[{"tags": ["c", "file", "printf", "scanf"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450308638, "post_id": 34324072, "comment_id": 56390013, "body": "Your program does not handle incorrect (non-integer) input correctly. Nothing much to do with the redirection. <code>scanf</code> does not consume the non-matching input. And <code>fflush(stdin)</code> does not do that either (it&#39;s Undefined Behaviour on some platforms and on Linux it only flushes any buffered data not the unread data)."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450308821, "post_id": 34324072, "comment_id": 56390077, "body": "Try using <code>fgets</code> and then <code>sscanf</code> or <code>strtol</code> instead."}, {"owner": {"reputation": 71, "user_id": 5688796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10205262417669295/picture?type=large", "display_name": "Govardhan Murali", "link": "https://stackoverflow.com/users/5688796/govardhan-murali"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450309030, "post_id": 34324072, "comment_id": 56390145, "body": "kaylum,Thanks for your response,you were saying that the program doesnt handle incorrect data correctly,but when running the exe and if i give a dummy value: sadsdfs or some incorrect data,it does print the code inside the else part,the problem is only occuring when i try to redirect the input to a file instead of a user input,it would be really  helpful if you can correct the code and show me the part which is wrong.."}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1450309225, "post_id": 34324072, "comment_id": 56390205, "body": "what exactly is in the file <code>in.txt</code> ? Preferable you should show a hexdump of that file."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450309268, "post_id": 34324072, "comment_id": 56390224, "body": "The problem is <code>fflush(stdin)</code>. It&#39;s in general Undefined Behaviour and not predictable at best. It may work on a particular system but it will not always work (not portable at best) - it certainly does not work on my Linux system and invalid input from the terminal will result in the infinete loop that you see. Bottom line - avoid doing <code>fflush(stdin)</code>. See for example: <a href=\"https://stackoverflow.com/questions/2979209/using-fflushstdin\">Using fflush(stdin)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5688796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10205262417669295/picture?type=large", "display_name": "Govardhan Murali", "link": "https://stackoverflow.com/users/5688796/govardhan-murali"}, "edited": false, "score": 0, "creation_date": 1450309333, "post_id": 34324221, "comment_id": 56390238, "body": "hi,can you please correct the code and show me the correct one,it would be helpful...."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1450312909, "last_edit_date": 1450312909, "creation_date": 1450309107, "answer_id": 34324221, "question_id": 34324072, "link": "https://stackoverflow.com/questions/34324072/c-file-redirection-is-not-working/34324221#34324221", "title": "C : File redirection is not working", "body": "<p>You do not test for end of file: when the input file has been scanned, the program goes into an infinite loop because <code>scanf</code> return <code>-1</code>, the program complains and retries.</p>\n\n<p>Incidentally, if there is data in the input file that cannot be converted to an <code>int</code>, the program will loop forever trying to reparse the same input in vain.</p>\n\n<p>Note that <code>fflush(stdin);</code> is not specified in the C Standard, it may or may not do what you expect it to, especially from a file.</p>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {  \n    int latitude, scanfout, c;\n\n    puts(\"enter the value:\");\n\n    for (;;) {\n        scanfout = scanf(\"%d\", &amp;latitude);\n        if (scanfout == 1) {\n            printf(\"%d\\n\", latitude);\n            printf(\"ok return code:%d\\n\", scanfout);\n            puts(\"\\n\");\n        } else\n        if (scanfout &lt; 0) {\n            break;   // End of file \n        } else {\n            puts(\"value not a valid one\");\n            printf(\"not ok return code:%d\\n\", scanfout);        \n        }\n        /* read and ignore the rest of the line */\n        while ((c = getchar()) != EOF &amp;&amp; c != '\\n')\n            continue;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5688796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10205262417669295/picture?type=large", "display_name": "Govardhan Murali", "link": "https://stackoverflow.com/users/5688796/govardhan-murali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 34324221, "answer_count": 1, "score": -1, "last_activity_date": 1450331432, "creation_date": 1450308364, "last_edit_date": 1450331432, "question_id": 34324072, "link": "https://stackoverflow.com/questions/34324072/c-file-redirection-is-not-working", "title": "C : File redirection is not working", "body": "<p>I am trying to do a simple <code>scanf</code> and <code>printf</code> in the C program below:</p>\n\n<ol>\n<li>getting the user input</li>\n<li>checking if the user input is correct, if so, printing it out, else displaying a error message</li>\n</ol>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {  \n    int latitude;\n    int scanfout;\n    int started = 1;\n\n    puts(\"enter the value:\");\n\n    while (started == 1) {\n        scanfout = scanf(\"%d\", &amp;latitude);\n        if (scanfout == 1) {\n            printf(\"%d\\n\", latitude);\n            printf(\"ok return code:%d\\n\", scanfout);\n            puts(\"\\n\");\n        } else {\n            puts(\"value not a valid one\");\n            printf(\"not ok return code:%d\\n\", scanfout);        \n        }\n        fflush(stdin);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Tried compiling and running it at a command terminal, program works.\n command line output:</p>\n\n<pre><code>enter the value:\n1\n1\nok returncode:1\n\n0\n0\nok returncode:1\n\n122.22\n122\nok returncode:1\n\nsad\nvalue not a valid one\nnot ok returncode:0\n</code></pre>\n\n<p>As you can see, the program simply scans the user input and prints it out, it works fine in command line, but when it try to redirect the input to a text file say:</p>\n\n<pre><code>test &lt; in.txt\n</code></pre>\n\n<p>the program doesn't work and the print statements in the else part goes on printing in an infinite loop. The text file <code>in.txt</code> contains a single value <code>12</code>, instead of printing <code>12</code>, the program simply goes into a infinite loop and prints:</p>\n\n<pre><code>value not a valid one\nnot ok returncode:0\nvalue not a valid one\nnot ok returncode:0\nvalue not a valid one\nnot ok returncode:0\nvalue not a valid one\nnot ok returncode:0\n</code></pre>\n\n<p>Can anyone help me with this? Is the code correct, why it works from command line and why file redirection doesn't work? help would be appreciated...</p>\n"}, {"tags": ["c", "gcc", "openmp"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1450305798, "post_id": 34323418, "comment_id": 56388860, "body": "How about seeing the compiler&#39;s output (assembly code)?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 9, "creation_date": 1450305848, "post_id": 34323418, "comment_id": 56388887, "body": "<a href=\"https://en.wikipedia.org/wiki/Dead_code_elimination\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dead_code_elimination</a>"}, {"owner": {"reputation": 236, "user_id": 2387736, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J9dHK.jpg?s=128&g=1", "display_name": "Huarache", "link": "https://stackoverflow.com/users/2387736/huarache"}, "edited": false, "score": 1, "creation_date": 1450306349, "post_id": 34323418, "comment_id": 56389118, "body": "Is the value of num_steps known at compile time?  If so, you may want to try to pass it as a run time parameter via stdin.  See if that makes a difference.  If its value is hard-coded, it may be that the compiler can substitute the for loop with a simple expression that has an equivalent outcome."}, {"owner": {"reputation": 436, "user_id": 2838493, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/86388736e34c168fd054c7452f9d7387?s=128&d=identicon&r=PG&f=1", "display_name": "Rgarg", "link": "https://stackoverflow.com/users/2838493/rgarg"}, "edited": false, "score": 1, "creation_date": 1450327012, "post_id": 34323418, "comment_id": 56395254, "body": "While doing compiler optimizations, the order of loads and stores can be highly reshuffled to suit the execution. However, in a parallel program, in order to maintain sequential consistency, these kinds of compiler optimizations are not doable."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1450336678, "post_id": 34323418, "comment_id": 56398876, "body": "try <code>double dtime = -omp_get_wtime();  serial(); dtime += omp_get_wtime(); printf(&quot;%f\\n&quot;, dtime);</code> Same logic for <code>SPMD_for_reduction()</code>."}, {"owner": {"reputation": 61, "user_id": 5688657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24573063c2cb35ad0e1bced7a4ba053b?s=128&d=identicon&r=PG&f=1", "display_name": "winter-muted", "link": "https://stackoverflow.com/users/5688657/winter-muted"}, "edited": false, "score": 0, "creation_date": 1450387178, "post_id": 34323418, "comment_id": 56430404, "body": "Thanks everyone. I&#39;m thoroughly confused now but have some food for thought. I guess that&#39;s how you learn!"}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 7141543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3970e48060711d429b441225cd797d?s=128&d=identicon&r=PG&f=1", "display_name": "SamVanDonut", "link": "https://stackoverflow.com/users/7141543/samvandonut"}, "is_accepted": false, "score": 4, "last_activity_date": 1486395587, "creation_date": 1486395587, "answer_id": 42071632, "question_id": 34323418, "link": "https://stackoverflow.com/questions/34323418/openmp-vs-gcc-compiler-optimizations/42071632#42071632", "title": "OpenMP vs gcc compiler optimizations", "body": "<p>The compiler outsmarts you. For the serial version it is able to detect, that the result of your computation is never used. Therefore it throws out the computation completely.</p>\n\n<pre><code>double start_time = omp_get_wtime();\nserial(); //&lt;-- Computations not used.\ndouble end_time = omp_get_wtime();\n</code></pre>\n\n<p>In the openMP case the compiler can not see if really everything inside the function body is without an effect, so to stay on the safe side it keeps the function call.</p>\n\n<p>You can of course write something like <code>double serial_pi = serial();</code> and outside of the time measurement do some dummy stuff with the variable  <code>serial_pi</code>. This way the compiler will keep the function call and do the optimizations you are actually looking for.</p>\n"}], "owner": {"reputation": 61, "user_id": 5688657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24573063c2cb35ad0e1bced7a4ba053b?s=128&d=identicon&r=PG&f=1", "display_name": "winter-muted", "link": "https://stackoverflow.com/users/5688657/winter-muted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1486395587, "creation_date": 1450305225, "question_id": 34323418, "link": "https://stackoverflow.com/questions/34323418/openmp-vs-gcc-compiler-optimizations", "title": "OpenMP vs gcc compiler optimizations", "body": "<p>I'm learning openmp using the example of computing the value of pi via quadature.  In serial, I run the following C code:</p>\n\n<pre><code>double serial() {\n    double step;\n    double x,pi,sum = 0.0;\n\n    step = 1.0 / (double) num_steps;\n\n    for (int i = 0; i &lt; num_steps; i++) {\n        x = (i + 0.5) * step; // forward quadature\n        sum += 4.0 / (1.0 + x*x);\n    }\n    pi = step * sum;\n\n    return pi;\n}\n</code></pre>\n\n<p>I'm comparing this to an omp implementation using a parallel for with reduction:</p>\n\n<pre><code>double SPMD_for_reduction() {\n    double step;\n    double pi,sum = 0.0;\n\n    step = 1.0 / (double) num_steps;\n\n    #pragma omp parallel for reduction (+:sum)\n    for (int i = 0; i &lt; num_steps; i++) {\n        double x = (i + 0.5) * step;\n        sum += 4.0 / (1.0 + x*x);\n    }\n    pi = step * sum;\n\n    return pi;\n}\n</code></pre>\n\n<p>For num_steps = 1,000,000,000, and 6 threads in the case of omp, I compile and time:</p>\n\n<pre><code>    double start_time = omp_get_wtime();\n    serial();\n    double end_time = omp_get_wtime();\n\n    start_time = omp_get_wtime();\n    SPMD_for_reduction();\n    end_time = omp_get_wtime();\n</code></pre>\n\n<p>Using no cc compiler optimizations, the runtimes are around 4s (Serial) and .66s (omp).  With the -O3 flag, serial runtime drops to \".000001s\" and the omp runtime is mostly unchanged.  What's going on here? Is it vector instructions being used, or is it poor code or timing method? If it's vectorization, why isn't the omp function benefiting?</p>\n\n<p>It may be of interest that the machine I am using is using a modern 6 core Xeon processor.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450304471, "post_id": 34323183, "comment_id": 56388193, "body": "Where is that duplicate Question which is based of my Question?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1450304540, "post_id": 34323183, "comment_id": 56388229, "body": "Try <code>int arr[] = {1, 2, 3, &#39;\\0&#39;, 4, 5, 6, &#39;\\0&#39;};</code> and it will print 3 instead of 7, so you can see it&#39;s not actually getting the length of the array. (But if this fits your needs, it&#39;s an okay thing to do <i>instead of</i> getting the length of the array)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1450304561, "post_id": 34323183, "comment_id": 56388240, "body": "Also I don&#39;t think this is a duplicate since it&#39;s not about sizeof. Voting to reopen..."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450304640, "post_id": 34323183, "comment_id": 56388290, "body": "Please reopen my Question. And i did mention about that immbis, I mean I edited my Question."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 4, "creation_date": 1450304819, "post_id": 34323183, "comment_id": 56388383, "body": "You&#39;re using a <i>sentinel</i>. Note that <code>&#39;\\0&#39;</code> is simply <code>0</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450304826, "post_id": 34323183, "comment_id": 56388387, "body": "As long as the Array doesn&#39;t have <code>0</code> inside you can get the length, that is my Question"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450304827, "post_id": 34323183, "comment_id": 56388390, "body": "You may add second parameter to <code>foo(  int * arr, int arr_len )</code> and send array length."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450304859, "post_id": 34323183, "comment_id": 56388402, "body": "@i486 Really, did you read my Question? When did i Asked about that?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1450304867, "post_id": 34323183, "comment_id": 56388406, "body": "Looks fine to me. It&#39;s just use of a sentinel value to mark the end of the array and is not uncommon. As long as the sentinel value is outside the set of regular valid values. For example, the C standard defines that the <code>main</code> parameter, <code>argv</code>, has a NULL sentinel. And also, of course C strings are essentially char arrays with a NUL sentinel."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450304963, "post_id": 34323183, "comment_id": 56388456, "body": "Based of your Comments, should I understand that if the Array doesn&#39;t contain <code>0</code>, you can get its length ?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1450305058, "post_id": 34323183, "comment_id": 56388497, "body": "@KarolyHorvath I do know that, i just used <code>&#39;\\0&#39;</code> to explain my point."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450305084, "post_id": 34323183, "comment_id": 56388508, "body": "The only problem is, the function reports the length as 1 too few. <code>int arr1[]  = {10,&#39;\\0&#39;};</code> has 2 elements."}, {"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450305105, "post_id": 34323183, "comment_id": 56388520, "body": "@Michi Yes assuming your arrays will never contain a zero you can append one on the end as the last value and use your method to get the length. Obviously this won&#39;t work for all cases and probably isn&#39;t ideal, but for what you want to do it&#39;ll work :)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450305105, "post_id": 34323183, "comment_id": 56388521, "body": "@WeatherVane Sir, please explain"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450305119, "post_id": 34323183, "comment_id": 56388526, "body": "I don&#39;t understand why you need this? Is it theoretical exercise or you need such &quot;feature&quot;? Generally, C language does not provide such extras. It is better to add array length as first element (prefix) than marking end of array with zero."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450305162, "post_id": 34323183, "comment_id": 56388548, "body": "PS: BTW, you can simply put <code>0</code> element instead of <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450305168, "post_id": 34323183, "comment_id": 56388554, "body": "@Michi <code>int arr1[]  = {10,&#39;\\0&#39;};</code> has 2 elements, not 1. Just because you defined <code>\\0</code> unusually for <code>int</code> does not make it just as much a part of the array as the other elements."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450305215, "post_id": 34323183, "comment_id": 56388582, "body": "@i486 I&#39;m 35 Years old, married with two kids, <code>C language</code> is just for fun, I didn&#39;t study in school <code>C</code> or others languages."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450305357, "post_id": 34323183, "comment_id": 56388641, "body": "@WeatherVane Yes, i know that, but there is no need to count it, or keep track of it. the same goes for <code>char arr[] = {&#39;a&#39;, &#39;b&#39;, &#39;\\0&#39;};</code>, the <code>&#39;\\0&#39;</code> is there, but you don&#39;t needed."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450306261, "post_id": 34323183, "comment_id": 56389073, "body": "Down Voter please Explain. I really hate you Guys for doing that with no Reason. Why SO allows this?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306526, "post_id": 34323183, "comment_id": 56389191, "body": "@Michi Why does SO allow downvoting? Why wouldn&#39;t it? Sure it&#39;s annoying when someone does it without a reason, but usually the reason is &quot;this question isn&#39;t very useful&quot;."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306599, "post_id": 34323183, "comment_id": 56389230, "body": "@Michi If I&#39;d downvoted this question (which I didn&#39;t) it would probably be because it&#39;s not entirely clear what you want to know. You want to know why this works? Well that seems like an obvious answer - which is that there&#39;s nothing <i>stopping</i> it from working."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306611, "post_id": 34323183, "comment_id": 56389236, "body": "@immibis Sir, I didn&#39;t ask about <code>Why does SO allow downvoting?</code>, I was asking why i got Down voted."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306648, "post_id": 34323183, "comment_id": 56389251, "body": "@immibis NO, the Question is clear. There are 3 Answers, and No one was disagree."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450306714, "post_id": 34323183, "comment_id": 56389276, "body": "I&#39;m feeling like someone has something against me."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306757, "post_id": 34323183, "comment_id": 56389296, "body": "!Michi &quot;Why foo prints the length of all arrays?&quot; is the question? It&#39;s sort of like asking why <code>void foo(int *p) {int len = 5; printf(&quot;%d\\n&quot;, len);} int main() {int a[5]; int b[5]; int c[5]; foo(a); foo(b); foo(c); return 0;}</code> prints the length of all the arrays - it doesn&#39;t magically know the length of the arrays, you told it how to &quot;find the length&quot; (in this case, you said it&#39;s always 5)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450306842, "post_id": 34323183, "comment_id": 56389330, "body": "@immibis Probably the Question inside the Topic, at the end, wasn&#39;t exactly the  100 points one, but I think everyone here Understood it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1450308005, "post_id": 34323183, "comment_id": 56389787, "body": "<code>void foo(int *arr)</code> does not get an array at all. So how would youi calculate an &quot;array size&quot;? A pointer is not an array. You just cannot pass an array to/from a function in C."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1450308373, "post_id": 34323183, "comment_id": 56389921, "body": "@Olaf Sir, I do know that <code>arr[]</code> decays to a pointer. It wasn&#39;t about passing Array to Function, It was only to find its length as long as there is no <code>0</code> inside it. Was just Theory in here and nothing more."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450308583, "post_id": 34323183, "comment_id": 56389994, "body": "The same thing <a href=\"http://stackoverflow.com/questions/33231470/how-to-find-actual-end-of-char-array-in-c-containing-zeros-in-the-middle/33232025#33232025\">Here</a> was just a Theory, but it works at some point."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450309250, "post_id": 34323183, "comment_id": 56390213, "body": "You son&#39;t even have <code>int arr[]</code>. I just comment on the title, which is completely missleading. And finding a specific value in an array is something you can find in every C book or tutorial. Effectively you ask if an <i>integer character constant</i> can be converted to <code>int</code>. But it <b>is</b> actually an <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.4p10\" rel=\"nofollow noreferrer\"><code>int</code></a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450309652, "post_id": 34323183, "comment_id": 56390343, "body": "However, it is bad style. Use a macro with a constant integer similar to <code>EOF</code>."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450309866, "post_id": 34323183, "comment_id": 56390392, "body": "@Olaf Thank you for your time, like always strait to the language."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450310311, "post_id": 34323183, "comment_id": 56390520, "body": "@Olaf Is there anyway to separate <code>0</code> from <code>&#39;\\0&#39;</code> in C? To write a code that it doesn&#39;t compare <code>&#39;\\0&#39;</code> with <code>0</code> being the same,"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450310964, "post_id": 34323183, "comment_id": 56390715, "body": "@Michi: I stated that clear in my comment (and provided even a link to the standard. But compliant does not imply &quot;good style&quot;."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450311090, "post_id": 34323183, "comment_id": 56390768, "body": "@Olaf Oh, Sorry about that, is 01:10, i didn&#39;t saw that. :D"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450312161, "post_id": 34323183, "comment_id": 56391083, "body": "@Michi Nope, because they&#39;re the same thing written differently."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450568685, "post_id": 34323183, "comment_id": 56494826, "body": "Down voter please explain"}], "answers": [{"tags": [], "owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "is_accepted": false, "score": 2, "last_activity_date": 1450305333, "creation_date": 1450305333, "answer_id": 34323438, "question_id": 34323183, "link": "https://stackoverflow.com/questions/34323183/find-the-array-length-inside-function/34323438#34323438", "title": "Find the Array length inside Function", "body": "<p>Sidenote: <code>'\\0'</code> is really 0 here, as your store <code>int</code>s.</p>\n\n<hr>\n\n<p>You're using a sentinel. C-style strings have been using this method for decades to mark where the string finishes. It has the same benefits, but it also has the same drawbacks.</p>\n\n<p>As long as you <em>maintain</em> the invariant that the sentinel occours <em>only at the last place of the array</em> you'll be able to get the length of the array. In O(N) time, as you have to traverse the sequence.</p>\n\n<p>Note that you can shrink the sequence by terminating it earlier with a sentinel:</p>\n\n<pre><code>1 2 3 4 0   //\n1 2 3 0 *   // * as in: anything\n</code></pre>\n\n<p>But as soon as you do this, you cannot known the size of the <em>array</em> anymore. Even though you could technically append an extra element, a function without knowing the context cannot safely do this. In essence, you know the size of the sequence, but you don't known the size of the <em>array</em> anymore.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450305543, "post_id": 34323447, "comment_id": 56388737, "body": "I&#39;m 100% sure that I will never use my Program Example in some code, but there was only theory for future explanations for me-"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450305706, "post_id": 34323447, "comment_id": 56388816, "body": "I understand.  But I thought I would cover <i>why</i> such an approach is not a good idea for anyone reading this now/later."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450305820, "post_id": 34323447, "comment_id": 56388872, "body": "Yes, but based on my Question and on your Answer and others Answer, this makes a valid way to find Array length, or not?...as long as the Array doesn&#39;t contain <code>0</code>!"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450305896, "post_id": 34323447, "comment_id": 56388910, "body": "Thank you, this is What i needed and this was the Answer I needed for my Question."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 4, "last_activity_date": 1450305353, "creation_date": 1450305353, "answer_id": 34323447, "question_id": 34323183, "link": "https://stackoverflow.com/questions/34323183/find-the-array-length-inside-function/34323447#34323447", "title": "Find the Array length inside Function", "body": "<blockquote>\n  <p>It is illegal to use something like int arr[] = {1,2,3,'\\0'}; ?</p>\n</blockquote>\n\n<p>No. It's perfectly legal. <code>'\\0'</code> is an <code>int</code> which is same as <code>0</code>. It's no different to using any number as marker to identify the end of the array. For example, you can use <code>-1</code> if you array is going to contain only positive number. So your approach is valid.</p>\n\n<p>The reason you wouldn't usually see in practice it's kind of needless to iterate over an array when you can simply pass it as an extra argument, which is easily understandable from maintenance point of view. </p>\n\n<pre><code>int arr[1024];\nsize_t len = sizeof arr/sizeof a[0];\n\nfunc(arr, len);\n\nvoid func(int *a, size_t length) {\n}\n</code></pre>\n\n<p>Compare this with your approach.</p>\n\n<p>Also, the size is calculated at compile-time whereas in your approach you have iterate over the array. Choosing the <em>right</em> sentinel could become difficult ( o or -1 or whatever) if it's also needed to be an element of the array. </p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450305464, "post_id": 34323448, "comment_id": 56388696, "body": "Which make my program OK? As long as <code>arr[]</code> doesn&#39;t contain <code>&#39;\\0&#39;</code> you get the length?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450306030, "post_id": 34323448, "comment_id": 56388981, "body": "Yeah, I don&#39;t see why it wouldn&#39;t."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 4, "last_activity_date": 1450305358, "creation_date": 1450305358, "answer_id": 34323448, "question_id": 34323183, "link": "https://stackoverflow.com/questions/34323183/find-the-array-length-inside-function/34323448#34323448", "title": "Find the Array length inside Function", "body": "<p>This is how C-strings mark their end and length. And as they're just char arrays, naturally you can apply the same to other types of arrays as well. </p>\n\n<p>Just remember that calculating the length of such an array through a pointer has a linear time complexity.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450308790, "post_id": 34324147, "comment_id": 56390066, "body": "Thank you for your explanation. I do understand it, but this does&#39;n Answer My Question. I do not try to find a way how to do it, I already know that, +1 for that."}, {"owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450309196, "post_id": 34324147, "comment_id": 56390197, "body": "I am not a fan of sentinels at the end of arrays.  In C strings they are fine as it&#39;s the standard and code expects it.  But to find the length of an array you have to read every single element, which is not efficient.  Placing the length at the front or keeping it in a struct or separate variable is much more efficient, IMO.  Knowing the length in this way also means you can implement e.g. linear searches on sorted arrays.  Another variation is to store the length <i>and</i> a hashcode for a string or the data to speed up comparisons."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450310123, "post_id": 34324147, "comment_id": 56390468, "body": "this is one of the reason why i hate <code>c</code> (even if i like the languagfe :) ), because <code>0</code> and <code>&#39;\\0&#39;</code> are treated the same"}, {"owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450310618, "post_id": 34324147, "comment_id": 56390607, "body": "In fact they are <i>not</i> treated the same.  The digit <code>0</code> will be treated as a zero digit for any numerical type.  It s sometimes even used instead of <code>NULL</code> as a null pointer value ( which is bad practice, IMO ).  However <code>&#39;\\0&#39;</code> is <b>not</b> a digit, it&#39;s a <i>char</i> of value zero.  Now C will do some conversions between integer types for you, but sometimes it will find that the char value clashes with it&#39;s rules.  So be aware they are not the same in a strict sense."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450310774, "post_id": 34324147, "comment_id": 56390648, "body": "Sir, again, please stick to my Question/comments here <code>&#39;\\0&#39;</code> and <code>0</code> are the same. This was my point."}, {"owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450311585, "post_id": 34324147, "comment_id": 56390925, "body": "My point is that it is bad programming practice to use them as if they were interchangeable.  I&#39;m suggesting you get out of the habit of thinking they are.  If C bothers you I&#39;d suggest you consider C# or maybe D or Vala.  Why use something that irritates you when there are so many choices ?"}], "tags": [], "owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "is_accepted": false, "score": 1, "last_activity_date": 1450308695, "last_edit_date": 1592644375, "creation_date": 1450308695, "answer_id": 34324147, "question_id": 34323183, "link": "https://stackoverflow.com/questions/34323183/find-the-array-length-inside-function/34324147#34324147", "title": "Find the Array length inside Function", "body": "<p>If you need a method to use to allow you to carry the array length with the array then try using one of these approaches.</p>\n<h3>Store the length in the start of the array</h3>\n<p>So (ideally) <code>array[0]</code>, the first element would be a length.</p>\n<p>The catch is that that only works if your array has a suitable type and the length fit in that type.  You can in principle use <code>union</code> to define an element large enough to hold different types of data, including the length, but it's potentially wasteful.</p>\n<h3>Maintain a structure to store the array length and a pointer to the array data.</h3>\n<p>This is something like :</p>\n<pre><code>struct arrayinfo_s {\n    int length ;\n    char *data ;\n    };\n\nchar name[1000] ;\n\nstruct arrayinfo a ;\n\na.length = sizeof(name) ;\na.data = name ;\n\nmyfunc( &amp;arrayinfo ) ;\n</code></pre>\n<p>There are many variations on this possible.</p>\n<h3>The &quot;standard&quot; convention.</h3>\n<p>As someone already mentioned, it is typical to track the array length and pass it as a separate parameter to the function.</p>\n<pre><code>myfunc( array, length ) ;\n</code></pre>\n<p>If <code>array</code> is a fixed size declared like e.g. <code>int nums[100] ;</code> then you can use <code>sizeof(nums)</code> <strong>if the variable was declared in the same function as you used sizeof() or globally</strong>.</p>\n<p>There is also a variation on this for allowing a function to return an array of unknown length.  Typically you would do something like returning a point to the array, but pass a parameter that is a pointer to some integer type to store the length of the new array in.</p>\n<pre><code>char *newstuff( int *newlength )\n{\n    char *p = NULL ;\n\n    p = malloc( 102 ) ;\n\n    if( p == NULL )\n    {\n        *length = 102 ;\n        return p ;\n    }\n    else\n    {\n        *length = 0 ;\n        return NULL ;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 34323448, "answer_count": 4, "score": 0, "last_activity_date": 1450367694, "creation_date": 1450304295, "last_edit_date": 1495535242, "question_id": 34323183, "link": "https://stackoverflow.com/questions/34323183/find-the-array-length-inside-function", "title": "Find the Array length inside Function", "body": "<p>Based on This Question <a href=\"https://stackoverflow.com/questions/4162923/calculate-length-of-array-in-c-by-using-function\">Calculate Length of Array in C by Using Function</a> i really need an explanation.</p>\n\n<p>Let's say we have an Array like this:</p>\n\n<pre><code>int arr[] = {1,2,3};\n</code></pre>\n\n<p>here <code>arr</code> has the length <code>3</code>, so passing into a Function will decay to Pointer and we lose track of its Length.</p>\n\n<p>What happens if we Null terminate this array using <code>'\\0'</code> like this:</p>\n\n<pre><code>int arr[] = {1,2,3,'\\0'};\n</code></pre>\n\n<p>And pass it to a function like this:</p>\n\n<pre><code>void foo(int *arr){\n    int length = 0;\n\n    while(arr[length] != '\\0'){\n        length++;\n    }\n\n    printf(\"Length = %d\\n\",length);\n}\n</code></pre>\n\n<p>Is this ok?</p>\n\n<p>I wrote the following code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid foo(int *arr);\n\nint main(void){\n    int arr1[]  = {10,'\\0'};\n    int arr2[]  = {12,44,'\\0'};\n    int arr3[]  = {87,1,71,'\\0'};\n    int arr4[]  = {120,15,31,82,'\\0'};\n    int arr5[]  = {28,49,16,33,11,'\\0'};\n    int arr6[]  = {19,184,90,52,38,77,'\\0'};\n    int arr7[]  = {2,17,23,41,61,78,104,'\\0'};\n    int arr8[]  = {16,92,11,35,52,118,79,44,'\\0'};\n    int arr9[]  = {20,44,33,75,49,36,9,2,11,'\\0'};\n    int arr10[] = {92,145,24,61,99,145,172,255,300,10,'\\0'};\n\n    foo(arr1);\n    foo(arr2);\n    foo(arr3);\n    foo(arr4);\n    foo(arr5);\n    foo(arr6);\n    foo(arr7);\n    foo(arr8);\n    foo(arr9);\n    foo(arr10);\n    return 0;\n}\n\n\nvoid foo(int *arr){\n    int length = 0;\n\n    while(arr[length] != '\\0'){\n        length++;\n    }\n\n    printf(\"Length = %d\\n\",length);\n}\n</code></pre>\n\n<p>And i got the following Output:</p>\n\n<pre><code>Length = 1\nLength = 2\nLength = 3\nLength = 4\nLength = 5\nLength = 6\nLength = 7\nLength = 8\nLength = 9\nLength = 10\n</code></pre>\n\n<p>Which prints the Length of all 10 arrays. \nNow I'm confused here, because as far of my concern, as I read in some books, there is no way to make it work.</p>\n\n<p>Why <code>foo</code> prints the length of all arrays?\nIt is illegal to use something like <code>int arr[] = {1,2,3,'\\0'};</code> ?\nI know that if the Array has a <code>0</code> inside like this <code>int arr[] = {1,2,0,3,4};</code> the length will be <code>2</code>, but this is not my question.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1450304395, "post_id": 34323130, "comment_id": 56388156, "body": "<code>typedef</code> and <code>enum</code> are seperate concepts. They can be used independantly of each other. So are you not understanding just <code>typedef</code>, just <code>enum</code>, both or the use of <code>typedef</code> with <code>enum</code>?"}, {"owner": {"reputation": 8993, "user_id": 1354537, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24aaaba3c6140eaef24f9ed711644033?s=128&d=identicon&r=PG", "display_name": "Marged", "link": "https://stackoverflow.com/users/1354537/marged"}, "edited": false, "score": 0, "creation_date": 1450304433, "post_id": 34323130, "comment_id": 56388176, "body": "Isn&#39;t the example with the weekdays self explanatory ? The trick is to define your own variable."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450304547, "post_id": 34323130, "comment_id": 56388235, "body": "<a href=\"https://stackoverflow.com/questions/7571019/when-to-use-enums\">When to use enums?</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450306936, "post_id": 34323130, "comment_id": 56389382, "body": "You may find <a href=\"https://stackoverflow.com/questions/1674032/static-const-vs-define-vs-enum-in-c/1674459#1674459\"><code>static const</code> vs <code>#define</code> vs <code>enum</code> in C</a> useful.  It isn&#39;t a direct answer to your main question, but it has some useful sidelights on why it is beneficial to use <code>enum</code> types in your code."}, {"owner": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1612126518, "post_id": 34323130, "comment_id": 116663288, "body": "You should avoid identifiers ending in <code>_t</code>. That suffix is reserved by the standard and your code might fail to compile in future versions of the standard."}], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "is_accepted": false, "score": 19, "last_activity_date": 1450306706, "last_edit_date": 1450306706, "creation_date": 1450304544, "answer_id": 34323250, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323250#34323250", "title": "The importance of c enumeration (typedef enum)", "body": "<p><code>typedef</code> is used to define an alternative name for an existing type. The <code>enum</code> could have declared like this:</p>\n\n<pre><code>enum operator_t\n{\n    NO_OP,\n    ADDITION,\n};\n</code></pre>\n\n<p>and then you could declare a variable of this type like so:</p>\n\n<pre><code>enum operator_t x = NO_OP;\n</code></pre>\n\n<p>This is kind of verbose so you would use <code>typedef</code> to define a shorter alias for this type:</p>\n\n<pre><code>typedef enum operator_t operator_t;\n</code></pre>\n\n<p>This defines <code>operator_t</code> to mean the type <code>enum operator_t</code> allowing you to initialize a variable like so:</p>\n\n<pre><code>operator_t x = NO_OP;\n</code></pre>\n\n<p>This syntax:</p>\n\n<pre><code>typedef enum\n{\n    NO_OP,\n    ADDITION,\n}   operator_t;\n</code></pre>\n\n<p>does the whole process in one step, so it defines an (untagged or tagless) <code>enum</code> type and gives it the alias <code>operator_t</code>.</p>\n\n<p>Bonus: <code>operator_t</code> is an <code>enum</code> data type; read more about it here: <a href=\"https://en.wikipedia.org/wiki/Enumerated_type\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Enumerated_type</a></p>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "is_accepted": false, "score": 1, "last_activity_date": 1450304651, "creation_date": 1450304651, "answer_id": 34323279, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323279#34323279", "title": "The importance of c enumeration (typedef enum)", "body": "<p>typedef and enum are two different concepts. You can rewrite the code like this:</p>\n\n<pre><code>enum operator\n{\n  NO_OP,\n  ADDITION\n};\n\ntypedef enum operator operator_t;\n</code></pre>\n\n<p>The first statement declares an enumeration called <code>operator</code>, with two values. The second statement declares that the enumeration <code>operator</code> is now <strong>also</strong> to be known as the type <code>operator_t</code>.</p>\n\n<p>The syntax does allow to combine these two statements into one statement:</p>\n\n<pre><code> typedef enum operator\n {\n    NO_OP,\n    ADDITION,\n } operator_t;\n</code></pre>\n\n<p>And finally to omit a name for the enumeration, as there is a datatype for it anyway:</p>\n\n<pre><code> typedef enum\n {\n    NO_OP,\n    ADDITION,\n } operator_t;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "edited": false, "score": 1, "creation_date": 1450305018, "post_id": 34323299, "comment_id": 56388479, "body": "The downvoter voted down because your rant does not answer the question."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "edited": false, "score": 0, "creation_date": 1450305099, "post_id": 34323299, "comment_id": 56388517, "body": "@LarsFriedrich Fair enough. To quote the OP: &quot;What is typedef and why should we use it?&quot; is not answered clearly and with a vengeance?"}, {"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 4, "creation_date": 1450305353, "post_id": 34323299, "comment_id": 56388637, "body": "Not going to down vote because I believe you did answer the question &quot;What is typedef and why should we use it?&quot; However I personally disagree with you. I think having struct or enum or union before type defined as such is redundant it doesn&#39;t add much to the program. It&#39;s very similar to Hungarian notation IMO. Now there may be cases like with hungarian notation where this is somewhat helpful, but I dont think it&#39;s right to say we should never use typedef. Just my 2 cents :)"}, {"owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "edited": false, "score": 0, "creation_date": 1450305543, "post_id": 34323299, "comment_id": 56388738, "body": "What is typedef was not answered before the edit , second the purpose of it is to hide information, stating that it hides information is bad, is no reasoning. Functions hide information, too. I call the function and don&#39;t need to bother about the details of the function. structs themselves and enumerations hide information. Using an enumeration means I don&#39;t know the value without looking it up. There is &quot;less visible&quot; is just not a sufficient answer. The same kind of &quot;argument&quot; is used to explain why &quot;goto&quot; is bad."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450306055, "post_id": 34323299, "comment_id": 56388993, "body": "Although I&#39;m not sure I agree that typedefs for enums, structs, and unions are a <i>complete</i> waste, any more than typedefs for other types are a waste, I agree that they indeed do hide information in a manner that can negatively effect development and maintenance.  Specifically, they hide the answers to important questions such as &quot;if variable <code>t1</code> is a <code>thing_t</code> and variable <code>t2</code> is a <code>struct thing</code> then can I assign <code>t1</code>&#39;s value to <code>t2</code>?&quot;"}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1450304732, "creation_date": 1450304732, "answer_id": 34323299, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323299#34323299", "title": "The importance of c enumeration (typedef enum)", "body": "<p>Typedefs for enums, structs and unions are a complete waste. They hide important information for the questionable benefit of saving a few characters to type.</p>\n\n<p>Don't use them in new code.</p>\n\n<p>Technically, a typedef introduce an <em>alias</em>, i.e. a new name for something that already exists. This means, typedefs are <em>not</em> new types. The type system will treat them just like the aliased type.</p>\n\n<p>The downvoters may please educate themselves by, for example, reading the wonderful Peter van der Linden book <em>Expert C Programming</em> where the case against typedefs for enum/struct/union is made.</p>\n"}, {"comments": [{"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 1, "creation_date": 1450307286, "post_id": 34323453, "comment_id": 56389508, "body": "Wow perfect explanation. How come there are hardly any sites that keep things so nice and compact for c starters?"}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450307340, "post_id": 34323453, "comment_id": 56389523, "body": "May I ask now how does c associate traffic_light_states_t with the enum? I mean it is outside the enum brackets"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 1, "creation_date": 1450316229, "post_id": 34323453, "comment_id": 56392246, "body": "&quot;traffic_light_states_t&quot; is simply an <i>ALIAS</i>.  The two declarations I gave above accomplish exactly the same thing.  The only difference is you&#39;d declare a variable for first one <code>enum traffic_light_states my_traffic_light;</code>; vs. <code>traffic_light_states_t my_traffic_light;</code> for the typedef&#39;d definition.  Look here for more details about &quot;typedef&quot;: <a href=\"http://www.cprogramming.com/tutorial/typedef.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/typedef.html</a>"}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 43, "last_activity_date": 1539355038, "last_edit_date": 1539355038, "creation_date": 1450305369, "answer_id": 34323453, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323453#34323453", "title": "The importance of c enumeration (typedef enum)", "body": "<ol>\n<li><p>It's definitely not \"too technical\".</p></li>\n<li><p>\"<a href=\"http://www.cprogramming.com/tutorial/typedef.html\" rel=\"noreferrer\">typedef</a>\" and \"<a href=\"http://www.cprogramming.com/tutorial/enum.html\" rel=\"noreferrer\">enum</a>\" are two completely different things.</p></li>\n<li><p>The basic reason to have \"enums\" is to avoid \"magic numbers\":</p>\n\n<p>Let's say you have three \"states\": STOP, CAUTION and GO.  How do you represent them in your program?</p>\n\n<p>One way is to use the string literals \"STOP\", \"CAUTION\" and \"GO\".  But that has a lot of problems - including the fact that you can't use them in a C \"switch/case\" block.</p>\n\n<p>Another way is to Map\" them to the integer values \"0\", \"1\" and \"2\".  This has a lot of benefits.  But seeing \"STOP\" in your code is a lot more meaningful than seeing a \"0\".  Using \"0\" in your code like that is an example of a \"<a href=\"https://en.wikipedia.org/wiki/Magic_number_%28programming%29\" rel=\"noreferrer\">magic number</a>\".  Magic numbers are Bad: you want to use a \"meaningful name\" instead.</p></li>\n</ol>\n\n<p>Before enums were introduced in the language, C programmers used macros:</p>\n\n<pre><code>   #define STOP 0\n   #define CAUTION 1\n   #define GO 2\n</code></pre>\n\n<p>A better, cleaner approach in modern C/C++ is to use an enum instead:</p>\n\n<pre><code>enum traffic_light_states {\n  STOP,\n  CAUTION,\n  GO\n}; \n</code></pre>\n\n<p>Using a \"typedef\" just simplifies declaring a variable of this type:</p>\n\n<pre><code>typedef enum {\n  STOP,\n  CAUTION,\n  GO\n} traffic_light_states_t ; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 7, "last_activity_date": 1450306192, "last_edit_date": 1450306192, "creation_date": 1450305535, "answer_id": 34323498, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323498#34323498", "title": "The importance of c enumeration (typedef enum)", "body": "<blockquote>\n  <p>What is typedef enum and why should we use it?</p>\n</blockquote>\n\n<p>There are two different things going on there: a typedef and an enumerated type (an \"enum\").  A typedef is a mechanism for declaring an alternative name for a type.  An enumerated type is an integer type with an associated set of symbolic constants representing the valid values of that type.</p>\n\n<p>Taking the enum first, the full form of an enum declaration consists of the <code>enum</code> keyword, followed by a tag by which that particular enum will be identified, followed by the symbolic enum constants in curly brackets.  By default, the enum constants correspond to consecutive integer values, starting at zero.  For example:</p>\n\n<pre><code>enum operator {\n    NO_OP,\n    ADDITION\n};\n</code></pre>\n\n<p>As you can see, it has some similarities to a <code>struct</code> declaration, and like a <code>struct</code> declaration, variables of that enumerated type can be declared in the same statement:</p>\n\n<pre><code>enum operator {\n    NO_OP,\n    ADDITION\n} op1, op2, op3;\n</code></pre>\n\n<p>or they can be declared later, by referencing the enum's tag:</p>\n\n<pre><code>enum operator op4, op5;\n</code></pre>\n\n<p>Also like a <code>struct</code> declaration, the tag can be omitted, in which case the enumerated type cannot be referenced elsewhere in the source code (but any declared variables of that type are still fine):</p>\n\n<pre><code>enum {\n    NO_OP,\n    ADDITION\n} op1, op2, op3;\n</code></pre>\n\n<p>Now we get to the typedef.  As I already wrote, a typedef is a means to declare an alternative name for a type.  It works by putting the <code>typedef</code> keyword in front of something that would otherwise be a variable declaration; the symbol that would have been the variable name is then the alternative name for the type.  For instance this ...</p>\n\n<pre><code>typedef unsigned long long int ull_t;\n</code></pre>\n\n<p>declares <code>ull_t</code> to be an alternative name for type <code>unsigned long long int</code>.  The two type names can thereafter be used interchangeably (within the scope of the typedef declaration).</p>\n\n<p>In your case, you have</p>\n\n<pre><code>typedef enum\n{\n    NO_OP,\n    ADDITION,\n}   operator_t;\n</code></pre>\n\n<p>which declares <code>operator_t</code> as an alias for the tagless enumerated type given.  Declaring a typedef in this way makes the enum usable elsewhere, via the typedef name, even though the enum is tagless.  This is a fairly common mechanism for declaring a shorthand name for an enumerated type, and an analogous technique is common for structs, too.</p>\n\n<blockquote>\n  <p>Bonus (optional): What type of variable is the operator_t?</p>\n</blockquote>\n\n<p>As I explained, the <code>operator_t</code> is not a variable, it is a type.  In particular, it is an enumerated type, and the symbols <code>NO_OP</code> and <code>ADDITION</code> represent values of that type.</p>\n"}, {"comments": [{"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450308055, "post_id": 34323596, "comment_id": 56389804, "body": "What I dont get is, how can any of the if statements evaluate to true if the types ADD, SUBSTRACT, MULTIPLY have no meaning? For me it looks like operation == NAN"}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450308445, "post_id": 34323596, "comment_id": 56389947, "body": "Ok based on the other answers I assume ADD is 0, Substract 1, Multiply 2. So basically you are saying: Operation == 0?"}, {"owner": {"reputation": 141, "user_id": 4542782, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565373120415615/picture?type=large", "display_name": "Mini Mithi", "link": "https://stackoverflow.com/users/4542782/mini-mithi"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450344527, "post_id": 34323596, "comment_id": 56403338, "body": "@Asperger it&#39;s a user defined symbolic name. it&#39;s just so you can use the function like this  <code>do_arithmetic_operation(1, 2, ADD);</code> <code>do_arithmetic_operation(1, 2, SUBTRACT);</code> <code>do_arithmetic_operation(1, 2, MULTIPLY);</code>"}, {"owner": {"reputation": 141, "user_id": 4542782, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565373120415615/picture?type=large", "display_name": "Mini Mithi", "link": "https://stackoverflow.com/users/4542782/mini-mithi"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450346020, "post_id": 34323596, "comment_id": 56404417, "body": "@Asperger, yes that&#39;s how it works under the hood but you don&#39;t have to think of it like that. If you didn&#39;t use enum you would have something like, <code>#define ADD = 0</code>, <code>int operation</code>, <code>if (operation == ADD) return a + b</code>"}], "tags": [], "owner": {"reputation": 141, "user_id": 4542782, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565373120415615/picture?type=large", "display_name": "Mini Mithi", "link": "https://stackoverflow.com/users/4542782/mini-mithi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450559443, "last_edit_date": 1450559443, "creation_date": 1450305911, "answer_id": 34323596, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum/34323596#34323596", "title": "The importance of c enumeration (typedef enum)", "body": "<p>Wikipedia has a good discussion of what a typedef is</p>\n\n<blockquote>\n  <p>typedef is a keyword in the C and C++ programming languages. The purpose of typedef is to form complex types from more-basic machine types<a href=\"https://en.wikipedia.org/wiki/Typedef\" rel=\"nofollow\">1</a> and assign simpler names to such combinations. They are most often used when a standard definition or declaration is cumbersome, potentially confusing, or likely to vary from one implementation to another.\n  <a href=\"https://en.wikipedia.org/wiki/Typedef\" rel=\"nofollow\">See this page for a detailed discussion of Typedef in Wikipedia</a></p>\n</blockquote>\n\n<p>Enumerated Types allow us to create our own symbolic names for a list of related ideas.</p>\n\n<p>Given the example you gave I'm guessing you can use enum to select which arithmetic operation to use for a particular set of variables. </p>\n\n<p>The following example code should give you a good idea on what enum is useful for.</p>\n\n<pre><code>enum ARITHMETIC_OPERATION {ADD, SUBTRACT, MULTIPLY};\n\nint do_arithmetic_operation(int a, int b, enum ARITHMETIC_OPERATION operation){\n\n   if(operation == ADD)\n       return a+b;\n\n   if(operation == SUBTRACT)\n       return a-b;\n\n   if(operation == MULTIPLY)\n       return a*b;\n}\n</code></pre>\n\n<p>If you didn't have enum, you would do something like this instead: </p>\n\n<pre><code>#DEFINE ADD 0\n#DEFINE SUBTRACT 1\n#DEFINE MULTIPLY 2\n\nint do_artithmetic_operation(int a, int b, int operation);\n</code></pre>\n\n<p>This alternative is less readable, because operation is not really an integer but a symbolic type that represents an arithmetic operation that is either ADD, MULTIPLY, or SUBTRACT. </p>\n\n<p>The following links provide good discussions and sample code that uses Enum.</p>\n\n<p><a href=\"http://www.cs.utah.edu/~germain/PPS/Topics/C_Language/enumerated_types.html\" rel=\"nofollow\">http://www.cs.utah.edu/~germain/PPS/Topics/C_Language/enumerated_types.html</a></p>\n\n<p><a href=\"http://www.cprogramming.com/tutorial/enum.html\" rel=\"nofollow\">http://www.cprogramming.com/tutorial/enum.html</a></p>\n\n<p><a href=\"http://cplus.about.com/od/introductiontoprogramming/p/enumeration.htm\" rel=\"nofollow\">http://cplus.about.com/od/introductiontoprogramming/p/enumeration.htm</a></p>\n"}], "owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64772, "favorite_count": 9, "closed_date": 1450306596, "answer_count": 6, "score": 20, "last_activity_date": 1539355038, "creation_date": 1450304078, "last_edit_date": 1450304361, "question_id": 34323130, "link": "https://stackoverflow.com/questions/34323130/the-importance-of-c-enumeration-typedef-enum", "closed_reason": "Duplicate", "title": "The importance of c enumeration (typedef enum)", "body": "<p>I recently saw this in an answer that was posted for me:</p>\n\n<pre><code>    typedef enum\n    {\n        NO_OP,\n        ADDITION,\n    }   operator_t;\n\nint main()\n{\n    operator_t operator = NO_OP;\n}\n</code></pre>\n\n<p>What is typedef enum and why should we use it? I googled and found the following:\n<a href=\"http://www.programiz.com/c-programming/c-enumeration\" rel=\"noreferrer\">http://www.programiz.com/c-programming/c-enumeration</a></p>\n\n<p>Right now it sounds slightly too technical for me so I dont think I understand what is going on or why one would use that.</p>\n\n<p>Bonus (optional): What type of variable is the operator_t?</p>\n"}, {"tags": ["c", "math", "long-double"], "comments": [{"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450304036, "post_id": 34322932, "comment_id": 56387952, "body": "Do you really need to accurately handle values that large? If so I&#39;d google search arbitrary precision arithmetic. It&#39;s slower but will give you exact results"}, {"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 1, "creation_date": 1450304201, "post_id": 34322932, "comment_id": 56388054, "body": "As far as determining the accuracy of long double values you could look for information in the limits.h header file. Wikipedia also helps with understanding the format <a href=\"https://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450306251, "post_id": 34322932, "comment_id": 56389067, "body": "On the bed-post overnight."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450306753, "post_id": 34322932, "comment_id": 56389293, "body": "please use length-checking input instead of <code>gets</code> , and <code>%s</code> in scanf"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450306788, "post_id": 34323696, "comment_id": 56389307, "body": "if <code>#include &lt;tgmath.h&gt;</code> is present then it ought to select the right &quot;overload&quot; for <code>pow(</code>"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1450327439, "last_edit_date": 1495542655, "creation_date": 1450306436, "answer_id": 34323696, "question_id": 34322932, "link": "https://stackoverflow.com/questions/34322932/when-long-double-calculator-loses-its-precision/34323696#34323696", "title": "When long-double calculator loses its precision?", "body": "<p>Using <code>pow(f1, f2)</code> is counter-productive as that converts the parameters to <code>double</code> before calling <code>pow()</code> and explains OP's woes.  <code>double</code> typically has trouble beginning with 16 decimal digts as in OP's case.  Recommend <code>powl()</code></p>\n\n<pre><code>// return (pow(f1, f2));\nreturn (powl(f1, f2));\n</code></pre>\n\n<hr>\n\n<p>Other notes:</p>\n\n<p><code>long double</code> can precisely encode numbers with <code>LDBL_DIG</code> decimal digits.  That is at least 10 and likely 18+ on your machine.</p>\n\n<p><code>long double</code>, when printed needs <code>LDBL_DECIMAL_DIG</code> significant digits of output to distinguish that number from all other <code>long double</code>.  To see all the significance, avoid using <code>%Lf</code> when trying to determine precision related issues.</p>\n\n<pre><code>printf(\"%.*Le\", LDBL_DECIMAL_DIG - 1, x);   // \"%Le\"\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/q/16839658/2410359\">Printf width specifier to maintain precision of floating-point value</a></p>\n\n<hr>\n\n<p>[edit]  When does floating point lose precision?</p>\n\n<p><code>* /</code> is easy.   As long the result is not so small (sub-normal) or overflows, the answer should be expected to be with 0.5 ULP (<a href=\"https://en.wikipedia.org/wiki/Unit_in_the_last_place\" rel=\"nofollow noreferrer\">unit in the last place</a>).</p>\n\n<p><code>+ -</code> When the result is further away from zero, again lose up to 0.5 ULP.  But when there is cancellation like <code>1.0 - 0.9999999...</code>, nearly all precision can be lost. </p>\n\n<p><code>z=pow(x,y)</code>  can be very imprecise when <code>z</code> is a large number and the function poorly written such as when the math identity is simplistically used: <code>z = exp(log(x)*y)</code>.  Otherwise a good <code>pow()</code> result will be within 1.0 ULP.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/questions/34322932/when-long-double-calculator-loses-its-precision/34323696#comment56389307_34323696\">@M.M comments</a> that an alternative to using <code>powl()</code> is to <code>#include &lt;tgmath.h&gt;</code> for automatic correct selection of many <code>&lt;math.h&gt;</code> functions.</p>\n"}], "owner": {"reputation": 129, "user_id": 5568009, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/470538bd77356b82d8797a8923a00a5e?s=128&d=identicon&r=PG&f=1", "display_name": "m&#229;ngata", "link": "https://stackoverflow.com/users/5568009/m%c3%a5ngata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450327439, "creation_date": 1450303368, "last_edit_date": 1450307501, "question_id": 34322932, "link": "https://stackoverflow.com/questions/34322932/when-long-double-calculator-loses-its-precision", "title": "When long-double calculator loses its precision?", "body": "<p>My task was to write a code for a calculator that operates on <code>long double</code>. It turns out that after the certain point the calculator loses precision. For example it computes correctly <code>9999999 ^ 2</code>, but as far as <code>99999999 ^ 2</code> it yields the result, which is 1 bigger than it should be. I've already read something about the float precision, but all questions are concerned with decimals. I know that one can fix it by using the gmp library, but my question is: </p>\n\n<blockquote>\n  <p>Is there any other way to tackle this problem?<br>\n  How to calculate/show the point to which a long double calculator is accurate?</p>\n</blockquote>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    char str[100];\n    char key[] = \"exit\";\n\n    if (argc &gt; 1)\n    {\n        switch (argv[1][1])\n        {\n            case 'V': case 'v':\n                setValid(1);\n                break;\n            case 'E': case 'e':\n                setError(1);\n                break;\n            default:\n                setValid(1);\n                break;\n        }\n    }\n    else\n        setValid(1);\n\n    while (gets(str) != NULL &amp;&amp; strcmp(key, str) != 0)\n    {\n        if (calcFilter(str));\n        else\n            printf(\"expression error!\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>evalexpression.c</strong></p>\n\n<pre><code>static long double f1, f2;\nstatic char op;\n\nint isValidExpression(const char *str)\n{\n    int res;\n    char ops[10];\n\n    res = sscanf(str, \"%Lf %s %Lf\", &amp;f1, ops, &amp;f2);\n\n    if (res == 3 &amp;&amp; (ops[0] == '+' || ops[0] == '*' || ops[0] == '-' ||\n        ops[0] == '/' || ops[0] == '^'))\n    {\n        op = ops[0];\n        return 1;\n    }\n    else\n        return 0;\n\nlong double getExprValue(void)\n{\n    switch (op)\n    {\n        case '+':\n            return (f1+f2);\n        case '*':\n            return (f1*f2);\n        case '-':\n            return (f1-f2);\n        case '/':\n            return (f1/f2);\n        case '^':\n            return (pow(f1, f2));\n        default:\n            perror(\"something went wrong\");\n            return 0;\n    }\n}\n</code></pre>\n\n<p><strong>calcfilter.c</strong></p>\n\n<pre><code>static int errorsw = 0, validsw = 0;\n\nint calcFilter(const char *str)\n{\n    if (validsw == 1 &amp;&amp; isValidExpression(str))\n    {\n        printf(\"%s = %Lf\\n\", str, getExprValue());\n        return 1;\n    }\n    else if (errorsw == 1 &amp;&amp; !isValidExpression(str))\n    {\n        printf(\"%s\\n\", str);\n        return 1;\n    }\n    else if (errorsw)\n        return 1;\n    else\n        return 0;\n}\n\nvoid setError(int mode)\n{\n    errorsw = mode;\n}\n\nvoid setValid(int mode)\n{\n    validsw = mode;\n}  \n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1450303028, "post_id": 34322741, "comment_id": 56387480, "body": "<code>int z = 0;  int n = 1;</code> --&gt; <code>int z;  int n;</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450303126, "post_id": 34322741, "comment_id": 56387522, "body": "C or C++?  The title says &quot;C&quot;, the tags say &quot;C++&quot;."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450303233, "post_id": 34322741, "comment_id": 56387574, "body": "@Sparkm4n I removed your C tag. Because your code is clearly C++ not C. But then I noticed your title says C. Please clarify which language you are using. They are not the same and the answer may be different for each language."}, {"owner": {"reputation": 575, "user_id": 5057200, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/998722690147651/picture?type=large", "display_name": "Sparkm4n", "link": "https://stackoverflow.com/users/5057200/sparkm4n"}, "edited": false, "score": 0, "creation_date": 1450303738, "post_id": 34322741, "comment_id": 56387792, "body": "actually its c but my code is mixed with c++"}, {"owner": {"reputation": 575, "user_id": 5057200, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/998722690147651/picture?type=large", "display_name": "Sparkm4n", "link": "https://stackoverflow.com/users/5057200/sparkm4n"}, "edited": false, "score": 0, "creation_date": 1450304547, "post_id": 34322741, "comment_id": 56388234, "body": "EDIT: the next problem is the harmonic series in the for loop, i already improved the code and it works fine but it prints out random numbers the for loop here:                                                                                                       for (i = 1; i &lt;= 6; i++) {  \t\tstruct fraction b1 = {b1.z, b1.n }, b2 = { i, 1 }; \t\tPrint(addition(b1, b2));"}, {"owner": {"reputation": 575, "user_id": 5057200, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/998722690147651/picture?type=large", "display_name": "Sparkm4n", "link": "https://stackoverflow.com/users/5057200/sparkm4n"}, "edited": false, "score": 0, "creation_date": 1450372806, "post_id": 34322741, "comment_id": 56422523, "body": "all right already solved: for (i = 1; i &lt;= 6; i++) { \t\t\tfraction b1 = {}, b2 = { 1, i }; \t\t\t\tresult = addition(result,b2); \t\t\t\tprintf(&quot;%d/%d\\n&quot;, result.z, result.n);"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1450302916, "creation_date": 1450302916, "answer_id": 34322814, "question_id": 34322741, "link": "https://stackoverflow.com/questions/34322741/calculating-the-fraction-with-struct-in-c/34322814#34322814", "title": "calculating the fraction with struct in c", "body": "<p>When you use C++, you don't need to use <code>struct fraction</code>. You can but you don't need to. You can use just <code>fraction</code>.</p>\n\n<p>Coming to the problematic line:</p>\n\n<pre><code>struct fraction b1 = { 1,1 }, b2 = { 1,2 };\n</code></pre>\n\n<p>You can use:</p>\n\n<pre><code>fraction b1{ 1,1 };\nfraction b2{ 1,2 };\n</code></pre>\n\n<p>or</p>\n\n<pre><code>fraction b1 = fraction{ 1,1 }, b2 = fraction{ 1,2 };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3025, "user_id": 2127454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6443819c0f09ac4d2383488b5d786ead?s=128&d=identicon&r=PG&f=1", "display_name": "Keammoort", "link": "https://stackoverflow.com/users/2127454/keammoort"}, "is_accepted": true, "score": 3, "last_activity_date": 1450303444, "last_edit_date": 1450303444, "creation_date": 1450303027, "answer_id": 34322848, "question_id": 34322741, "link": "https://stackoverflow.com/questions/34322741/calculating-the-fraction-with-struct-in-c/34322848#34322848", "title": "calculating the fraction with struct in c", "body": "<p>Remove assigned values from struct (for C++11 and below):</p>\n\n<pre><code>struct fraction{\n    int z;\n    int n;\n};\n</code></pre>\n\n<p>Now it compiles fine, tested with g++ 5.2.1 (should get the job done for other compilers too).</p>\n\n<p>When I added option <code>-std=c++14</code> your code compiled just fine without any changes.</p>\n"}, {"comments": [{"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1450325467, "post_id": 34322982, "comment_id": 56394855, "body": "&quot;initializing variables in the struct&quot; is covered by the bullet point about default member initializers on that cppreference page."}], "tags": [], "owner": {"reputation": 89, "user_id": 3727118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f395bd7fc837a7f709e7d44d69b2e0c1?s=128&d=identicon&r=PG&f=1", "display_name": "Pangi", "link": "https://stackoverflow.com/users/3727118/pangi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450303526, "creation_date": 1450303526, "answer_id": 34322982, "question_id": 34322741, "link": "https://stackoverflow.com/questions/34322741/calculating-the-fraction-with-struct-in-c/34322982#34322982", "title": "calculating the fraction with struct in c", "body": "<p>from <a href=\"http://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/aggregate_initialization</a>\nI read that user defined constructors will stop you from initializing with braces and, I guess, initializing your variables in the struct will act like an user defined constructor. </p>\n\n<blockquote>\n  <p>no user-provided constructors (explicitly defaulted or deleted constructors are allowed) (since C++11)</p>\n</blockquote>\n\n<p>so writing just : </p>\n\n<pre><code>struct fraction{\n    int z; \n    int n; \n}; \n</code></pre>\n\n<p>should solve the problem</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6299673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d5cf6ec3eae9c58a9c8e94d92b390e6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike J", "link": "https://stackoverflow.com/users/6299673/mike-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1462663329, "creation_date": 1462663329, "answer_id": 37094672, "question_id": 34322741, "link": "https://stackoverflow.com/questions/34322741/calculating-the-fraction-with-struct-in-c/37094672#37094672", "title": "calculating the fraction with struct in c", "body": "<p>here is my idea how you could solve the problem</p>\n\n<pre><code>#include \"stdafx.h\" \n\nint euclid( int a, int b );\n\nstruct fraction {\n    int z;\n    int n;\n};\n\ntypedef struct fraction Bruch;\n\nBruch add( Bruch b1, Bruch b2 ) {\n    Bruch r;\n    r.z = b1.z * b2.n + b2.z * b1.n;\n    r.n  = b1.n * b2.n;\n    return r;\n}\n\nvoid print( Bruch b ) {\n    printf(\"%d / %d \\n\", b.z, b.n );\n}\n\n\nvoid test() {\n    Bruch eins = {1,1};\n    Bruch halb = {1,2};\n\n    printf(\" ---------------- structure---------------- \\n\" );\n    Bruch sum = add( eins, halb );\n    print(sum);\n\n    sum.z = 0;\n    sum.n = 1;\n\n    Bruch summand = {1,1};\n\n    for( int n=1; n&lt;=6; ++n ) {\n        summand.nenner = n;\n        sum = add( sum, summand );\n        print(sum);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 5057200, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/998722690147651/picture?type=large", "display_name": "Sparkm4n", "link": "https://stackoverflow.com/users/5057200/sparkm4n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 34322848, "answer_count": 4, "score": 2, "last_activity_date": 1462663329, "creation_date": 1450302608, "last_edit_date": 1462662629, "question_id": 34322741, "link": "https://stackoverflow.com/questions/34322741/calculating-the-fraction-with-struct-in-c", "title": "calculating the fraction with struct in c", "body": "<p>im trying to calculate the fraction with structs, the compiler says that initializer list cannot be converted, whats actually the issue? here is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct fraction{ \n    int z = 0; \n    int n = 1;\n};\nstruct fraction addition(struct fraction b1, struct fraction b2) {\n    struct fraction result;\n    result.z = b1.z*b2.n + b2.z*b1.n;\n    result.n = b1.n*b2.n;\n\n    return result;\n    }\n\nvoid Print(struct fraction b) { \n    printf(\"%d/%d\\n\", b.z, b.n);\n\n}\nint main() {\n    int i;\n    struct fraction b1 = { 1,1 }, b2 = { 1,2 };\n    try {\n        for (i = 1; i &lt;= 6; i++) { \n\n        Print(addition(b1, b2));\n\n    }\n}\n    catch (int exception) {\n        printf(\"Program closed!\");\n    }\n}\n</code></pre>\n\n<p>the for loop by the way is harmonic series but im not done with it yet. thanks for help in advance</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1450302672, "post_id": 34322736, "comment_id": 56387302, "body": "You need a C websocket library."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1450302865, "post_id": 34322736, "comment_id": 56387404, "body": "Shouldn&#39;t the memset()s use 0 instead of &#39;0&#39; (which is 48)?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450303015, "post_id": 34322736, "comment_id": 56387474, "body": "The whole memset() is cargo cult programming. instead the return from recv() should be used. (and: why would anyone use a RAW socket for this kind of trivial stuff?)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 4, "creation_date": 1450303161, "post_id": 34322736, "comment_id": 56387536, "body": "You need to receive on <code>connfd</code>, not <code>listenfd</code>. You also want <code>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)</code>. And <code>0</code> instead of <code>&#39;0&#39;</code>"}, {"owner": {"reputation": 533, "user_id": 4362955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f4sSd.jpg?s=128&g=1", "display_name": "mando222", "link": "https://stackoverflow.com/users/4362955/mando222"}, "edited": false, "score": 0, "creation_date": 1450303656, "post_id": 34322736, "comment_id": 56387763, "body": "Ok I updated the code in my question as those were some good changes.  Still having the same overall issue though.  In relation to David&#39;s comment.  Is there a standard websocket library?"}, {"owner": {"reputation": 185743, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1450303853, "post_id": 34322736, "comment_id": 56387854, "body": "What do you mean by &quot;standard&quot;? There&#39;s libwebsockets, which seems both stable and popular."}, {"owner": {"reputation": 533, "user_id": 4362955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f4sSd.jpg?s=128&g=1", "display_name": "mando222", "link": "https://stackoverflow.com/users/4362955/mando222"}, "edited": false, "score": 0, "creation_date": 1450304331, "post_id": 34322736, "comment_id": 56388120, "body": "Yeah I just found that.  I have never used a library like this before so I will have to figure it out.  Thanks for the help guys.  I will update this when I get it working."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1450306886, "post_id": 34322736, "comment_id": 56389355, "body": "You don&#39;t necessarily need a library. You can write it yourself. A mistake that is pretty clear in your code is that 1. You never check if <code>recv()</code> returned an error value, 2. You don&#39;t guarantee that <code>sendBuf</code> is nul terminated. You can check that first. The handshake is relatively simple to code, and the <a href=\"https://tools.ietf.org/html/rfc6455\" rel=\"nofollow noreferrer\">RFC 6455</a> has all the needed information, I find it very simple so instead of using a library you can indeed write this yourself."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450306973, "post_id": 34322736, "comment_id": 56389392, "body": "Also, you have to be very careful if you are going to use <i>wss://</i> connections, in that case simplicity will be masked by the fact that you need to write the SSL too and it would be more logical to use some well tested tool no matter how hard it could be to learn how to use it, it is likely that writing it with SSL would be harder. I have some code I can share if you want. Just leave your e-mail."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450307320, "post_id": 34322736, "comment_id": 56389514, "body": "Finally, <a href=\"http://websocketd.com/\" rel=\"nofollow noreferrer\">this could be easier than a library</a>. Try it too, there&#39;s a very simple concept behind it."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1450307619, "post_id": 34322736, "comment_id": 56389653, "body": "when calling the system functions: <code>socket</code>, <code>listen</code>, <code>recv</code>, always check the returned value, as those kinds of functions are prone to having failures.   When calling <code>listen()</code>  it is (almost) always better to fork() or pthread_create() a separated line of execution to handle the incoming call, so can immediately loop back to the <code>accept()</code> function call."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450307938, "post_id": 34322736, "comment_id": 56389762, "body": "when handling an error indication from a system function, printing some generic message is nearly useless.   Instead use something like: `fprintf( stderr, &quot;bind failed: due to: %s\\n&quot;, strerror( errno ) );"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450308440, "post_id": 34322736, "comment_id": 56389944, "body": "in C, a reference to an array name degrades to the address of the array.  <code>sendBuff[]</code> is just such an array.  so in the call to <code>recv()</code>, the parameter: <code>(char*)sendBuff</code> does not need a cast.  suggest: <code>sendBuff</code>"}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 4362955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f4sSd.jpg?s=128&g=1", "display_name": "mando222", "link": "https://stackoverflow.com/users/4362955/mando222"}, "edited": false, "score": 0, "creation_date": 1450366431, "post_id": 34326697, "comment_id": 56417992, "body": "Good catch on the connfd.  I forgot to update that in the question.  I will play with getting the telnet to work in addition to my reading on libwebsockets."}], "tags": [], "owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1450361490, "last_edit_date": 1450361490, "creation_date": 1450326990, "answer_id": 34326697, "question_id": 34322736, "link": "https://stackoverflow.com/questions/34322736/ws-in-a-c-program/34326697#34326697", "title": "ws:// in a C program", "body": "<p>First of all, as pointed out by someone else, you should be using <code>connfd</code> in the <code>recv()</code> call:</p>\n\n<pre><code>recv(connfd, (char*)sendBuff, sizeof sendBuff, MSG_DONTWAIT);\n</code></pre>\n\n<p>If you have a <code>telnet</code> client available that can connect to your program, you should use that to experiment with your code.  For example, if you are running on Linux, start your program in one terminal window and, from another terminal, type\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>telnet localhost 5000\n</code></pre>\n\n<p>Here is what happens when I do it:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>## The terminal where I run the program (a.out):\n$ ./a.out \nconnection opened \nBuff:  \nconnection closed\nconnection opened \nBuff:  \nconnection closed\n\n## The terminal window I connect from:\n\n$ telnet localhost 5000\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nConnection closed by foreign host.\n$ telnet localhost 5000\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nConnection closed by foreign host.\n</code></pre>\n\n<p>See what's happening? And this is not surprising: the code accepts a connection from the client, tries to read a message from the client without giving it a chance to send it, gets nothing (of course!), doesn't ever send anything back to the client, and closes the connection.  Then it waits for the next connection.  </p>\n\n<p>Please read some tutorials on C socket programming, play with it, get it to work with a telnet client, and then move on to websockets.</p>\n\n<p>It's a good start, anyway.  Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1450362669, "last_edit_date": 1450362669, "creation_date": 1450361651, "answer_id": 34336721, "question_id": 34322736, "link": "https://stackoverflow.com/questions/34322736/ws-in-a-c-program/34336721#34336721", "title": "ws:// in a C program", "body": "<p>You might consider, instead of handling manually all the websocket details, to use some existing HTTP server library.</p>\n\n<p>In particular, the <a href=\"http://www.coralbits.com/libonion/\" rel=\"nofollow\">libonion</a> is a free software HTTP server library and it already supports websockets. See its <a href=\"https://github.com/davidmoreno/onion/blob/master/examples/websockets/websockets.c\" rel=\"nofollow\"><code>examples/websockets/websockets.c</code></a> file</p>\n"}], "owner": {"reputation": 533, "user_id": 4362955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f4sSd.jpg?s=128&g=1", "display_name": "mando222", "link": "https://stackoverflow.com/users/4362955/mando222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 34326697, "answer_count": 2, "score": 3, "last_activity_date": 1450471955, "creation_date": 1450302581, "last_edit_date": 1450471955, "question_id": 34322736, "link": "https://stackoverflow.com/questions/34322736/ws-in-a-c-program", "title": "ws:// in a C program", "body": "<p>I have a program that is running as a listener on a socket.  From a javascript page I am able to send an open socket request using Websocket (ws://).  My issue lies in that I can't seem to see the handshake or reply to it from the C program.  I used wireshark to confirm that the javascript is sending the correct handshake but when I try to receive it in the buffer all I get are zeros.  </p>\n\n<p>In addition I was able to test the javascript on ws://echo.websocket.org so I am pretty sure it is working correctly.  The error I get from the console in my web browser indicates that no reply was received to the handshake.  </p>\n\n<p><strong>Edit</strong>: I know this is because I don't have a response set up.</p>\n\n<p>My <strong>updated</strong> C program is as follows</p>\n\n<pre><code>#include &lt;sys/socket.h&gt; //for socket\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt; //inet_addr\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt; //strlen\n#include &lt;sys/types.h&gt;\n\n/* main function */\nint main() {\n    int listenfd = 0, connfd = 0;\n    int status;\n    struct sockaddr_in serv_addr;\n    char revcBuff[1025];\n    int dataPresent = 0;\n    memset(&amp;serv_addr, 0, sizeof(serv_addr)); //clear the memory for the server_addr\n    memset(&amp;revcBuff, 0, sizeof(revcBuff)); //clear the memory for the buffer\n    serv_addr.sin_family = AF_INET; //specifiys that the address is IPv4\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);//gets the local address\n    //serv_addr.sin_port = htons(13669); //gets the local port\n    serv_addr.sin_port = htons(5000); //gets the local port\n\n    //designate the socket\n    listenfd = socket(AF_INET, SOCK_STREAM, 0); \n    if(listenfd &lt; 0) {\n        fprintf(stderr, \"Socket creation failed due to: %s\\n\", strerror( errno )); //If the socket creation fails get the error\n        return EXIT_FAILURE;\n    }\n\n    //binds to the local address and port to listen\n    while ( (bind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)))&lt; 0) { \n        fprintf(stderr, \"bind failed due to: %s\\n Retrying.....\\n\", strerror( errno )); //If the bind fails get the error\n        sleep(3); //time in seconds till next try\n    } \n\n    //listen on socket\n    if ( (listen(listenfd, 10))&lt; 0) { \n       fprintf(stderr, \"listen failed due to: %s\\n\", strerror( errno ));//If the listen fails get the error\n        return EXIT_FAILURE;\n    }\n\n    //main program loop\n    fprintf(stderr, \"serverSock0-14 now running in listen mode \\n\");\n    while (connfd &gt;= 0) { //while socket is not in error mode try to accept incoming socket requests\n        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); //wait for an incoming socket request\n        if ( connfd == -1) { //if atempted socket request failed \n            fprintf(stderr, \"accept failed due to: %s\\n\", strerror( errno )); // if the accept fails\n        }\n        fprintf(stdout, \"connection opened \\n\");\n        while (dataPresent != -1) { //keep socket open till you receive a packet\n            dataPresent = recv(connfd, &amp;revcBuff, sizeof revcBuff, MSG_TRUNC); //receive data from buffer\n            //dataPresent = recv(connfd, revcBuff, sizeof revcBuff, MSG_DONTWAIT); //receive data from buffer\n            if ( dataPresent == -1) { //test if new data is bad\n                fprintf(stderr, \"Receive failed due to: %s\\n\", strerror( errno )); // if the accept fails\n            } else if ( dataPresent == 0) { // if the socket is closed on the other end\n                break; // Escape to the close socket statement\n            } else {\n                revcBuff[dataPresent] = '\\0'; // null terminate the buffer\n                fprintf(stdout, \"Buff Hex unsigned: %x %x %x \\n\", (unsigned int) revcBuff[0], (unsigned int) revcBuff[1], (unsigned int) revcBuff[2]); \n                fprintf(stdout, \"Buff Hex: %x %x %x %x %x \\n\", revcBuff[0], revcBuff[1], revcBuff[2], revcBuff[3], revcBuff[4], revcBuff[5]); \n                fprintf(stdout, \"Buff: %s \\nbytes received: %i \\n\", revcBuff, dataPresent); //Print out what you received\n            }\n            dataPresent = 0;\n            usleep(7000);\n        }\n        if ((close(connfd))==0){//close the socket\n            fprintf(stdout, \"connection closed\\n\");\n        }\n    } //end main program loop\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Any direction would be super helpful.  I am still very new to the world of C.</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450306812, "post_id": 34322715, "comment_id": 56389317, "body": "Note that you&#39;ll need <code>int64_t</code> to hold the value of 20!"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1450302980, "last_edit_date": 1450302980, "creation_date": 1450302588, "answer_id": 34322737, "question_id": 34322715, "link": "https://stackoverflow.com/questions/34322715/why-is-the-output-of-recursive-function-0/34322737#34322737", "title": "Why is the output of recursive function 0?", "body": "<p>In last iteration <code>input</code> becomes zero inside the <code>if</code> statement. Change your function to  </p>\n\n<pre><code>int factorial(int input)\n{\n    if (input &gt; 0)\n    {\n        return (input) * factorial(input-1);\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1450302626, "creation_date": 1450302626, "answer_id": 34322744, "question_id": 34322715, "link": "https://stackoverflow.com/questions/34322715/why-is-the-output-of-recursive-function-0/34322744#34322744", "title": "Why is the output of recursive function 0?", "body": "<p>For the very last <em>inbound</em> iteration, in your code, when <code>input</code> is 1, executing</p>\n\n<pre><code>if (input &gt; 0)\n    {\n    input--;  // see here, 1 goes to 0.....\n    return input * factorial(input);\n    }\n</code></pre>\n\n<p>essentially gives you</p>\n\n<pre><code>  return 0 * factorial (0);\n</code></pre>\n\n<p>which will eventually make the <em>whole</em> return value as 0.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 5688583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377816cc1322671318f7c5f3cb2515ee?s=128&d=identicon&r=PG&f=1", "display_name": "ashutosh", "link": "https://stackoverflow.com/users/5688583/ashutosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1450304181, "last_edit_date": 1450304181, "creation_date": 1450303147, "answer_id": 34322878, "question_id": 34322715, "link": "https://stackoverflow.com/questions/34322715/why-is-the-output-of-recursive-function-0/34322878#34322878", "title": "Why is the output of recursive function 0?", "body": "<p>Lets simplify your question and find <code>factorial(2)</code>.</p>\n\n<pre><code>input=2;\n</code></pre>\n\n<p>after doing <code>(input--)</code>, <code>input == 1</code></p>\n\n<pre><code>return 1*factorial(1)\n</code></pre>\n\n<p>Now, when <code>factorial(1)</code> is called.</p>\n\n<pre><code>input=1;\n</code></pre>\n\n<p>after doing <code>input--</code>, <code>input == 0</code>;</p>\n\n<pre><code>return 0*factorial(0)\n</code></pre>\n\n<p>So no matter what, factorial 0 returns zero -- which, multiplied by anything, becomes zero.</p>\n"}], "owner": {"reputation": 335, "user_id": 5225289, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c6a43f0596e528a10ac920523b882178?s=128&d=identicon&r=PG&f=1", "display_name": "Maxitj", "link": "https://stackoverflow.com/users/5225289/maxitj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34322744, "answer_count": 3, "score": -2, "last_activity_date": 1451809492, "creation_date": 1450302484, "last_edit_date": 1451809492, "question_id": 34322715, "link": "https://stackoverflow.com/questions/34322715/why-is-the-output-of-recursive-function-0", "title": "Why is the output of recursive function 0?", "body": "<p>Could somebody explain me why is this snippet of code returning 0?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint factorial(int input)\n{\n    if (input &gt; 0)\n    {\n        input--;\n        return input * factorial(input);\n    }\n    return 1;\n}\nint main()\n{\n    printf(\"%d\", factorial(20));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 382, "user_id": 5623147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da068ffce1337828392e929ed1e3921c?s=128&d=identicon&r=PG&f=1", "display_name": "Matriac", "link": "https://stackoverflow.com/users/5623147/matriac"}, "edited": false, "score": 0, "creation_date": 1450300027, "post_id": 34322067, "comment_id": 56385965, "body": "what is your code doing right now? isnt return(0) in the main closing your application?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1450300014, "creation_date": 1450300014, "answer_id": 34322108, "question_id": 34322067, "link": "https://stackoverflow.com/questions/34322067/tic-tac-toe-prevent-user-from-going-in-taken-spot/34322108#34322108", "title": "Tic Tac Toe prevent user from going in taken spot", "body": "<p>You cannot <em>chain</em> the logical OR operator like you did. You need to change</p>\n\n<pre><code> if(tttarray[i][j] == 'x' || 'o')\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if((tttarray[i][j] == 'x') || (tttarray[i][j] =='o'))\n</code></pre>\n\n<p>That said, a statement after a <code>return</code> statement does not make any sense. Control will <em>never</em> reach the <code>printf()</code> inside the <code>if</code> condition. Maybe what you want is to use </p>\n\n<ul>\n<li><code>printf()</code> statement</li>\n<li><code>continue;</code></li>\n</ul>\n\n<p>in this very order.</p>\n"}], "owner": {"reputation": 29, "user_id": 5680196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096907f4bade2937bd454718115a112b?s=128&d=identicon&r=PG&f=1", "display_name": "Hydra King", "link": "https://stackoverflow.com/users/5680196/hydra-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1451809463, "creation_date": 1450299873, "last_edit_date": 1451809463, "question_id": 34322067, "link": "https://stackoverflow.com/questions/34322067/tic-tac-toe-prevent-user-from-going-in-taken-spot", "title": "Tic Tac Toe prevent user from going in taken spot", "body": "<pre><code>int main (void)\n{\n    char tttarray[3][3] = {\n        {'1','2','3'},\n        {'4','5','6'},\n        {'7','8','9'}\n    };\n\n\n    int turn = 0,i,j,loc;\n    char XO;\n\n    while(turn&lt;=9)\n    {\n        printf(\"Enter (x) or (o): \");\n        scanf(\"%c\",&amp;XO);\n        getchar();\n        printf(\"Enter number: \");\n        scanf(\"%d\", &amp;loc);\n\n        j = (loc - 1)%3;\n        i = (loc - 1)/3;\n\n        if(tttarray[i][j] == 'x' || 'o')\n        {\n            return(0);\n            printf(\"That spot has been taken!\\n\");\n        }\n\n\n        tttarray[i][j] = XO;\n        printArray(tttarray);\n\n    }\n\n}\n</code></pre>\n\n<p>I'm only showing main the code for convenience. My problem is with this part:</p>\n\n<pre><code>if(tttarray[i][j] == 'x' || 'o')\n{\n    return(0);\n    printf(\"That spot has been taken!\\n\");\n}\n</code></pre>\n\n<p>This is because it always seems to be true which prevents the player from placing an <code>'x'</code> or <code>'o'</code> there. Am I missing something in the above code? How do prevent the user from going to a taken space?</p>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450297593, "post_id": 34321290, "comment_id": 56384512, "body": "Works like a char on Linux. Maybe you have some strange IDE or OS? And <code>fgets</code> does not allow editing. <code>stdin</code> is a character stream!"}, {"owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450297855, "post_id": 34321290, "comment_id": 56384672, "body": "The idea is to be able to exit the input very easily (a specific exit character probably) and I can&#39;t do that with fgets."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450297789, "post_id": 34321434, "comment_id": 56384637, "body": "This doesn&#39;t allow an empty line and the user might want to have an empty line."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450297866, "post_id": 34321434, "comment_id": 56384680, "body": "@user3604097 I did not notice that as a part of your requirement."}, {"owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450298015, "post_id": 34321434, "comment_id": 56384783, "body": "I forgot to mention it, but the general idea is for the user to be able to enter C code in the terminal window."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450298052, "post_id": 34321434, "comment_id": 56384805, "body": "@user3604097 check the updated answer. Hope you got the idea to adjust the logic to your needs."}, {"owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450298501, "post_id": 34321434, "comment_id": 56385102, "body": "Yeah, I could tell the user to write &quot;exit&quot; and then do a strcmp on it. It&#39;s still a bit too complex but I guess that&#39;s the only way with fgets ?"}, {"owner": {"reputation": 390, "user_id": 3778070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25046f88b49cca08a3b53b31dc1558fe?s=128&d=identicon&r=PG&f=1", "display_name": "NadavL", "link": "https://stackoverflow.com/users/3778070/nadavl"}, "edited": false, "score": 0, "creation_date": 1450299051, "post_id": 34321434, "comment_id": 56385453, "body": "Why not add a boolean variable that indicates if a newline has been inserted, and if two consecutive new line has been inserted it&#39;ll exit.  Unless the user can input as many new lines as he wants?"}, {"owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "edited": false, "score": 0, "creation_date": 1450300039, "post_id": 34321434, "comment_id": 56385975, "body": "They have to be able to enter C programs with as little restrictions as possible."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450305751, "post_id": 34321434, "comment_id": 56388839, "body": "Suspect no valid C program can have a line that begins with a <code>$</code> (except in a comment), maybe use that to exit the <code>while</code> loop?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1450298035, "last_edit_date": 1450298035, "creation_date": 1450297552, "answer_id": 34321434, "question_id": 34321290, "link": "https://stackoverflow.com/questions/34321290/user-input-and-fgets/34321434#34321434", "title": "User input and fgets", "body": "<p>Why not to use the input value itself to implement a check? That way, you won't be needing any <em>special</em> implementation to mark the end of input.</p>\n\n<p>To elaborate, in case you want to use an empty line to mark the end of input, you can check for the first element of the input buffer to be equal to the newline to implement the <code>break</code> condition, like</p>\n\n<pre><code>    while (fgets( line, sizeof line, stdin) != NULL)\n    {\n            if (line[0] == '\\n')\n            {\n                    printf(\"end\\n\");\n                    break;\n            }\n               fputs(line, file);\n    }\n</code></pre>\n\n<p>Edit: If you want to implement your own end-of-input marker, you can use that particular marker to compare against the first element (or, if it is a multi-letter marker, maybe <code>strcmp()</code> with the input) to implement the <code>break</code>.</p>\n"}], "owner": {"reputation": 93, "user_id": 3604097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4bbe65bf9fcefeae257ad6b4355333a?s=128&d=identicon&r=PG&f=1", "display_name": "user3604097", "link": "https://stackoverflow.com/users/3604097/user3604097"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450300556, "creation_date": 1450297071, "last_edit_date": 1450300556, "question_id": 34321290, "link": "https://stackoverflow.com/questions/34321290/user-input-and-fgets", "title": "User input and fgets", "body": "<p>I have to accept user input and write it to a file, for which I'm using <code>fgets()</code> with the idea to prevent overflows:</p>\n\n<pre><code>while (fgets( line, sizeof line, stdin) != NULL)\n    fputs(line, file);\n</code></pre>\n\n<p>The problem with this is that the user has to enter CTRL+Z on an empty line and then submit it to exit the input, and this might look a bit confusing. Is there a simpler way of exiting the <code>fgets()</code> input ?</p>\n\n<p>What about other methods ? If I read symbol by symbol I can implement an exit character, but the user can't delete the input and this is also confusing, so I have to implement a deletion algorithm, which adds a bit too much complexity to the code.</p>\n\n<p>Edit:\nThe user has to be able to enter C code in the terminal with as little restrictions as possible.</p>\n"}, {"tags": ["c", "arrays", "function", "palindrome"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450296376, "post_id": 34321022, "comment_id": 56383881, "body": "Isn&#39;t <code>&quot;a&quot;</code> a palindrome too?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450296400, "post_id": 34321022, "comment_id": 56383888, "body": "There are a LOT of examples, on SO and elsewhere, re. palindromes."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450296543, "post_id": 34321022, "comment_id": 56383966, "body": "In general, what you ask for is not possible since detecting a a palindrome means  extending the original array without knowing if there is enough space available."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450296625, "post_id": 34321022, "comment_id": 56384012, "body": "<code>for(i=esp_anterior, j=pos; i&lt;pos; i++, j--)</code> --&gt; <code>for(i=esp_anterior, j=pos-1; i&lt;j; i++, j--)</code>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1450296750, "post_id": 34321022, "comment_id": 56384058, "body": "How much storage do you think <code>char texto1[100], texto2[]= {};</code> will allocate for <code>texto2</code>?"}, {"owner": {"reputation": 3, "user_id": 5688053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e407c9560806f25b4910a1601e0c51b?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos MG", "link": "https://stackoverflow.com/users/5688053/marcos-mg"}, "edited": false, "score": 0, "creation_date": 1450296937, "post_id": 34321022, "comment_id": 56384167, "body": "texto2[100] . I corrected it before but I pasted the wrong code."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1450297109, "post_id": 34321022, "comment_id": 56384266, "body": "So you&#39;re saying that this horrific code isn&#39;t even the <i>right</i> horrific code? How exactly do you expect anyone to help you if you can&#39;t/won&#39;t even post the right code?"}, {"owner": {"reputation": 3, "user_id": 5688053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e407c9560806f25b4910a1601e0c51b?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos MG", "link": "https://stackoverflow.com/users/5688053/marcos-mg"}, "edited": false, "score": 0, "creation_date": 1450297383, "post_id": 34321022, "comment_id": 56384406, "body": "Ok, you won&#39;t help me with the code, that&#39;s ok. But can you help me with the logic steps ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450297437, "post_id": 34321022, "comment_id": 56384435, "body": "<code>printf(&quot;\\n%s&quot;, texto2);</code> <i>unterminated string</i>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450297598, "post_id": 34321022, "comment_id": 56384515, "body": "<code>texto2[0]=&#39;*&#39;; texto2[1]=&#39;*&#39;;</code> always writes to the start of the string. Quite frankly, the code is <b><i>riddled with errors</i></b>. Get out your debugger, follow it through line by line. Put away your toys and turn offf the TV, and work until dawn."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450299019, "post_id": 34321022, "comment_id": 56385433, "body": "Have the usual &#39;Debugger...................DCV&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450300571, "post_id": 34322166, "comment_id": 56386224, "body": "Off-by-one in <code>malloc</code> and <code>realloc</code>: need a byte for string terminator."}, {"owner": {"reputation": 390, "user_id": 3778070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25046f88b49cca08a3b53b31dc1558fe?s=128&d=identicon&r=PG&f=1", "display_name": "NadavL", "link": "https://stackoverflow.com/users/3778070/nadavl"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450300893, "post_id": 34322166, "comment_id": 56386388, "body": "Here&#39;s one to off by one errors!"}, {"owner": {"reputation": 3, "user_id": 5688053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e407c9560806f25b4910a1601e0c51b?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos MG", "link": "https://stackoverflow.com/users/5688053/marcos-mg"}, "edited": false, "score": 0, "creation_date": 1450301864, "post_id": 34322166, "comment_id": 56386881, "body": "NadavL thank you very much. I really appreciate it! The only thing is that we haven&#39;t learnt pointers, the function strtok, malloc and realloc. We have to program it with basic things, like handcraft haha."}], "tags": [], "owner": {"reputation": 390, "user_id": 3778070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25046f88b49cca08a3b53b31dc1558fe?s=128&d=identicon&r=PG&f=1", "display_name": "NadavL", "link": "https://stackoverflow.com/users/3778070/nadavl"}, "is_accepted": true, "score": 0, "last_activity_date": 1450301136, "last_edit_date": 1450301136, "creation_date": 1450300261, "answer_id": 34322166, "question_id": 34321022, "link": "https://stackoverflow.com/questions/34321022/intro-to-programming-in-c-final-exam-sample-palindrome-function/34322166#34322166", "title": "Intro to Programming in C - [Final Exam Sample] Palindrome Function", "body": "<p>I would suggest a logic like that:</p>\n\n<p>Take string, separate it by a delimiter - \" \" (space) in your case with strtok.</p>\n\n<p>Then, send each delimited word to a function that determines whether the string is a palindrome or not.</p>\n\n<p>If the string is palindrome, allocate enough space for the string + \"<strong>\", and copy \"</strong>\" + string into the allocated space, save the current position of your 'cursor' on that array.\nPseudo Example: </p>\n\n<pre><code>\"Anna notpali\"\nchar *new_str;\nint cursor = 0;\n\nis_palindrome(\"Anna\") \n      Yes -&gt; new_str = malloc(strlen(\"Anna\") + strlen(\"**\") + 1)\n      strcpy(&amp;(new_str[cursor]),\"**Anna\");\n      cursor  += strlen(\"**Anna\");\n\nis_palindrom(\"notpali\")\n      No -&gt; new_str = realloc(new_str,strlen(\" notpali\") + 1)\n      strcpy(&amp;(new_str[cursor]),\" notpali\");\n      cursor += strlen(\" notpali\");\n\n// After going through all the words\nnew_str[cursor] = '\\0'\n</code></pre>\n\n<p>etc, there might be some corner cases to take care of, but this is a basic logic I suggest to approach it.</p>\n"}], "owner": {"reputation": 3, "user_id": 5688053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e407c9560806f25b4910a1601e0c51b?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos MG", "link": "https://stackoverflow.com/users/5688053/marcos-mg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "closed_date": 1450302602, "accepted_answer_id": 34322166, "answer_count": 1, "score": -5, "last_activity_date": 1450301136, "creation_date": 1450296068, "last_edit_date": 1450297156, "question_id": 34321022, "link": "https://stackoverflow.com/questions/34321022/intro-to-programming-in-c-final-exam-sample-palindrome-function", "closed_reason": "Not suitable for this site", "title": "Intro to Programming in C - [Final Exam Sample] Palindrome Function", "body": "<p>I need help! I can't do it. I tried in many ways but non has worked.\nAt least can someone help me with the LOGIC. Below I will paste my code.</p>\n\n<ul>\n<li>Develop a program with a function that receives an array of chars. The function has to modify the original and copy it exactly to another one but putting two asterisks (**) before each word that is a PALINDROME, a palindrome is a word which reads the same backward or forward (e.g ANNA, KAYAK). </li>\n</ul>\n\n<p>For example,\nmy best friend anna has a red kayak</p>\n\n<p>my best friend **anna has a red **kayak.</p>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid Cargar(char texto1[])\n{\n    int i=0;\n    char letra;\n\n    do\n    {\n        letra=getche();\n        if(letra != '.')\n        {\n            texto1[i]=letra;\n            i++;\n        }\n    }\n    while (letra != '.' &amp;&amp; i&lt;99);\n\n    texto1[i]='\\0';\n\n}\n\n\nint main()\n{\n    char texto1[100], texto2[100];\n    printf(\"Ingrese texto: \");\n    Cargar(texto1);\n\n    int pos=0, esp_anterior=0, aux1=0, aux2=0, aux3=0, bandera=0;\n    int i, j, k;\n\n    for(pos = 0 ; texto1[pos] != '\\0' ; pos++)\n    {\n        if( texto1[pos] == ' ')\n        {\n            if(bandera==0)\n            {\n                if( hay_palindromo(texto1, pos, esp_anterior) == 1)\n                {\n                    texto2[0]='*';\n                    texto2[1]='*';\n\n                    for(i=2, j=0; j&lt;pos ; j++ , i++)\n                    {\n                        texto2[i]=texto1[j];\n                    }\n                    aux1=i;\n                    aux2=j;\n                }\n                else\n                {\n                    for(i=0; i&lt;pos; i++)\n                    {\n                        texto2[i]=texto1[i];\n                    }\n                    aux3=i;\n                }\n                bandera = 1;\n                esp_anterior = pos;\n            }\n\n            else\n\n            {\n                if(bandera == 1)\n                {\n                    if( hay_palindromo(texto1, pos, esp_anterior) == 1)\n                    {\n\n                        texto2[aux1]='*';\n                        texto2[aux1+1]='*';\n\n                        for(i=aux1+2, j=aux2; j&lt;pos ; j++ , i++)\n                        {\n                            texto2[i]=texto1[j];\n                        }\n                        aux1=i;\n                        aux2=j;\n\n                    }\n                    else\n                    {\n                        for(i=aux3; i&lt;pos; i++)\n                        {\n                            texto2[i]=texto1[i];\n                        }\n                        aux3=i;\n\n                    }\n                    esp_anterior=pos;\n\n                }\n            }\n\n        }\n    }\n    printf(\"\\n%s\", texto2);\n\n    return 0;\n}\n\nint hay_palindromo(char texto1[], int pos, int esp_anterior)\n{\n    int i, j, bandera=0;\n    for(i=esp_anterior, j=pos; i&lt;pos; i++, j--)\n    {\n        if(texto1[i] == texto1[j])\n        {\n            bandera=1;\n        }\n        else\n        {\n            bandera=0;\n            break;\n        }\n    }\n    if(bandera==1)\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n</code></pre>\n\n\n"}, {"tags": ["c", "history"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1450294871, "post_id": 34320662, "comment_id": 56383077, "body": "What you want is called command history, and you will have to implement it yourself. Every time the user issues a command append it to a list, then when they hit the up arrow key extract commands from that list."}, {"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 0, "creation_date": 1450295096, "post_id": 34320662, "comment_id": 56383209, "body": "List thing you can implement . but to handle arrow key In Linux it will be little bit tricky to implement"}, {"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1450295401, "post_id": 34320662, "comment_id": 56383376, "body": "Won&#39;t something like this work for getting the key pressed  <code>if(kbhit()){ c = getch();}</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450295470, "post_id": 34320662, "comment_id": 56383401, "body": "You can use <code>setbuf</code> to disable the input buffer - enabling you to detect the cursor up/down keys, but you&#39;ll have to do all the text input processing yourself, such as backspace, left and right cursor, and so on."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450295504, "post_id": 34320662, "comment_id": 56383426, "body": "@OlarAndrei <code>getch()</code> is Windows MSVC specific."}], "answers": [{"comments": [{"owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "edited": false, "score": 0, "creation_date": 1450296938, "post_id": 34320852, "comment_id": 56384168, "body": "Well, I&#39;ll start working on it as soon as I&#39;m done reading all the documentaion. Thanks"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1450296514, "last_edit_date": 1450296514, "creation_date": 1450295465, "answer_id": 34320852, "question_id": 34320662, "link": "https://stackoverflow.com/questions/34320662/proper-use-of-readline-in-order-to-display-history/34320852#34320852", "title": "Proper use of readline in order to display history", "body": "<p>Consider using the <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/rltop.html\" rel=\"nofollow\">GNU readline</a> library (mixing both editable readline feature and history feature). It has documentation for the <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/readline.html\" rel=\"nofollow\">Readline</a> itself and for the <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/history.html\" rel=\"nofollow\">history</a> sub-library.</p>\n\n<p>You'll use <code>readline</code> function to read the line, and <code>add_history</code> to add some \"accepted\" line into the history list. You might also want to customize the <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC45\" rel=\"nofollow\">completer</a>.</p>\n\n<p>Spend a couple of hours to read the documentation, it is quite well explained with code samples.</p>\n\n<p><sup>(the <code>readline</code> library is GPL licensed, and is commonly available on Linux. E.g. on Debian install the <code>libreadline6-dev</code>  package; I don't know if <code>readline</code> works on Windows.)</sup></p>\n\n<p>You probably should not explicitly use (in your program) <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">signal(7)</a>-s with <code>readline</code>. If you do, dive into the documentation and the source code.</p>\n\n<p>You might want to consider <a href=\"https://www.gnu.org/software/ncurses/ncurses.html\" rel=\"nofollow\"><code>ncurses</code></a>  library instead. It enables you to code full-screen terminal applications (like <code>vim</code> or <code>emacs</code> are).</p>\n\n<p>Of course, <code>readline</code>  and <code>ncurses</code> want the input to be a pseudo-<a href=\"https://en.wikipedia.org/wiki/Terminal_emulator\" rel=\"nofollow\">tty</a> (so it cannot be a pipe or a file). Read the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow\">tty demystified</a> page to understand more the <em>gory</em> details, and see <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow\">termios(3)</a>!</p>\n\n<p><sup>If you want a graphical user interface, dive into <a href=\"http://gtk.org/\" rel=\"nofollow\">GTK</a> or <a href=\"http://qt.io/\" rel=\"nofollow\">Qt</a>. If you want a web interface, you'll need some HTTP server library like <a href=\"https://www.coralbits.com/libonion/\" rel=\"nofollow\">libonion</a> or <a href=\"http://www.webtoolkit.eu/wt\" rel=\"nofollow\">Wt</a> (and a lot of knowledge about web related technologies: HTML5, CSS, Javascript, Jquery, AJAX, ... see <a href=\"http://w3schools.com/\" rel=\"nofollow\">w3schools</a> - which is imperfect).</sup></p>\n"}], "owner": {"reputation": 1808, "user_id": 4687702, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/8747327fabd738c1e2466505c617c50f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Olar", "link": "https://stackoverflow.com/users/4687702/andrei-olar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 34320852, "answer_count": 1, "score": 2, "last_activity_date": 1450296514, "creation_date": 1450294732, "question_id": 34320662, "link": "https://stackoverflow.com/questions/34320662/proper-use-of-readline-in-order-to-display-history", "title": "Proper use of readline in order to display history", "body": "<p>I'm making a program that shoul act like a real terminal in linux (ubuntu).</p>\n\n<p>What I have is this:</p>\n\n<pre><code>int main(int argc, char *argv[]){\n\n   char cmd[500];\n\n   do{\n       printf(\"$ &gt; \");\n       fgets(cmd, 499, stdin);\n       //executeCommands(cmd);\n   }while(strcmp(cmd, \"exit\\n\") != 0);\n\n   return 0;\n}\n</code></pre>\n\n<p>What I want to do is: When I press the up key, it should show me what I typed before, and so on... If I press the up key 3 times, it should show me the 3rd latest command used, and so on for the bottom key.</p>\n\n<p>I am not that good with C, but I understood that there is a library readline, and a history one, but I don't know how to use them in order to accomplish this.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 1, "creation_date": 1450293859, "post_id": 34319998, "comment_id": 56382491, "body": "No.  <a href=\"http://blogs.cisco.com/performance/dont-leak-mpi_requests\" rel=\"nofollow noreferrer\">blogs.cisco.com/performance/dont-leak-mpi_requests</a> <a href=\"http://blogs.cisco.com/performance/mpi_request_free-is-evil\" rel=\"nofollow noreferrer\">blogs.cisco.com/performance/mpi_request_free-is-evil</a>"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1450302850, "post_id": 34319998, "comment_id": 56387395, "body": "As long as you do not need the <code>qtasks</code> data while doing these later calculations, all you have to do is place a <code>MPI_Waitall</code> after your calculations (and before you need the <code>qtasks</code> data). You&#39;ll be overlapping communication with computation."}], "answers": [{"comments": [{"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "reply_to_user": {"reputation": 47, "user_id": 5644184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1098519010159201/picture?type=large", "display_name": "Tasos ", "link": "https://stackoverflow.com/users/5644184/tasos"}, "edited": false, "score": 1, "creation_date": 1450367400, "post_id": 34323512, "comment_id": 56418678, "body": "Welcome to SO @Tasos. If the answer is correct for you, indicate that by voting it up and/or clicking the check mark on the left side of the screen. That way future visitors will also know that this is the correct answer. You&#39;ll also earn a few rep for doing so."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1450367500, "post_id": 34323512, "comment_id": 56418758, "body": "I&#39;m not sure this answer is going to be 100% correct though. If you&#39;re going to be completely safe, you should probably use <code>MPI_Waitall</code> instead of <code>MPI_Wait</code>. That way the sends can all make progress at the same time. On most implementations, it probably doesn&#39;t matter though."}, {"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1450368272, "post_id": 34323512, "comment_id": 56419340, "body": "Yeah... that probably changes between MPI implementations. Thanks for the tip. I basically chose the MPI_Wait approach to simplify the code."}], "tags": [], "owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "is_accepted": false, "score": 1, "last_activity_date": 1450305588, "creation_date": 1450305588, "answer_id": 34323512, "question_id": 34319998, "link": "https://stackoverflow.com/questions/34319998/is-it-safe-to-use-mpi-isend-in-this-c-example-of-code/34323512#34323512", "title": "Is it safe to use MPI_Isend in this C example of code?", "body": "<p>No. On the one side, and as Jonathan Dursi pointed out, MPI_Request_free deallocates the request and therefore this call does not ensure that the message has actually reached its destination.</p>\n\n<p>To make sure that the message has arrived, you need to use either MPI_Wait or MPI_Test calls (or any of their relatives - MPI_Waitall, MPI_Waitsome, ... MPI_Testall, MPI_Testsome, ...). So your code may look something like:</p>\n\n<pre><code>//qtasks[][] is a 2d array and Im sending one row to each task \n//it has numtasks rows and different count of columns for each row\nMPI_Request mpireq[N];\nMPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\nMPI_Comm_size(MPI_COMM_WORLD,&amp;size);\nint _k;\nfor(t=0;t&lt;size;t++){\n        if(t != rank) {\n            _k= cqtasks[t]; //this is the number of columns (for each row)                 \n            MPI_Isend( qtasks[t],_k,MPI_DOUBLE, t, 55,MPI_COMM_WORLD, &amp;mpireq[t] );    \n        }\n    }\n\ndo_some_calculation();\n\nfor(t=0;t&lt;size;t++){\n        if(t != rank) {\n            MPI_Wait (mpireq[t], MPI_STATUS_IGNORE);\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5644184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1098519010159201/picture?type=large", "display_name": "Tasos ", "link": "https://stackoverflow.com/users/5644184/tasos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1450305588, "creation_date": 1450292391, "question_id": 34319998, "link": "https://stackoverflow.com/questions/34319998/is-it-safe-to-use-mpi-isend-in-this-c-example-of-code", "title": "Is it safe to use MPI_Isend in this C example of code?", "body": "<p>Quick question: Due to performance requirements I need to be able to do later calclulations while I am also sending data.\nSo I need to use MPI_Isend.</p>\n\n<p>Is this safe? </p>\n\n<pre><code> //qtasks[][] is a 2d array and Im sending one row to each task \n//it has numtasks rows and different count of columns for each row\nMPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\nMPI_Comm_size(MPI_COMM_WORLD,&amp;size);\nint k;\nfor(t=0;t&lt;numtasks;t++){\n        if(t != rank) {\n            _k= cqtasks[t]; //this is the number of columns (for each row)                 \n            MPI_Isend( qtasks[t],_k,MPI_DOUBLE, t, 55,MPI_COMM_WORLD, &amp;mpireq );\n            MPI_Request_free( &amp;mpireq );\n\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "matrix", "cuda", "parallel-processing"], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 4, "last_activity_date": 1608054256, "last_edit_date": 1608054256, "creation_date": 1450299838, "answer_id": 34322058, "question_id": 34319941, "link": "https://stackoverflow.com/questions/34319941/large-matrix-addition-using-cuda-c/34322058#34322058", "title": "Large Matrix Addition using CUDA C", "body": "<ol>\n<li><p>Any time you are having trouble with a CUDA code, it's advisable to run your code with <code>cuda-memcheck</code> and also add <a href=\"https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\">proper cuda error checking</a>.</p>\n</li>\n<li><p>This:</p>\n<pre><code> dim3 dimBlock(BLOCK_DIM, BLOCK_DIM);\n</code></pre>\n</li>\n</ol>\n<p>is not legal in CUDA for <code>BLOCK_DIM</code> larger than 22 or 32 (depending on GPU and CUDA version).  CUDA kernels are limited to 512 or 1024 threads per block, which is the <em>product</em> of the individual threadblock dimensions.  So in your case <code>BLOCK_DIM</code>*<code>BLOCK_DIM</code> must be less than 512 or 1024 depending on GPU and CUDA version.  Setting <code>BLOCK_DIM</code> to 512 cannot work, in any case.</p>\n<ol start=\"3\">\n<li><p>If you are creating a variable like this on the stack:</p>\n<pre><code> float matrix1[N][N];\n</code></pre>\n</li>\n</ol>\n<p>that will cause trouble as <code>N</code> gets larger, because you may run into limits on stack size. (This is not related to CUDA.) Instead create these variables dynamically (an example is given in the code below).</p>\n<p>The following code (built around the pieces you have shown) seems to work for me, and implements the above changes.  I've omitted proper cuda error check for brevity of presentation, but I recommend using it if you are having trouble with a CUDA code.  In lieu of that, I am running it with <code>cuda-memcheck</code> :</p>\n<pre><code>$ cat t1002.cu\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nconst size_t BLOCK_DIM = 16;\nconst size_t MY_N =  2048;\n\nconst float tval1 = 1.0f;\nconst float tval2 = 2.0f;\n\n__global__ void parMatrixAdd_kernel(float *a, float *b, float *c, int N) {\n\n   int col = threadIdx.x + blockIdx.x * blockDim.x;\n   int row = threadIdx.y + blockIdx.y * blockDim.y;\n   int index = col + row * N;\n   if (col &lt; N &amp;&amp; row &lt; N) {\n       c[index] = a[index] + b[index];\n   }\n}\n\ntypedef float my_mat[MY_N];\n\nint main(){\n\n  my_mat *A, *B, *C;\n  const size_t N = MY_N;\n  size_t dsize = N*N*sizeof(float);\n  A = (my_mat *)malloc(dsize);\n  B = (my_mat *)malloc(dsize);\n  C = (my_mat *)malloc(dsize);\n\n  for (int i = 0; i &lt; N; i++)\n    for (int j = 0; j &lt; N; j++) {\n      A[i][j] = tval1;\n      B[i][j] = tval2;\n      C[i][j] = 0.0f;}\n\n  float *d_A, *d_B, *d_C;\n  cudaMalloc(&amp;d_A, dsize);\n  cudaMalloc(&amp;d_B, dsize);\n  cudaMalloc(&amp;d_C, dsize);\n\n  cudaMemcpy(d_A, A, dsize, cudaMemcpyHostToDevice);\n  cudaMemcpy(d_B, B, dsize, cudaMemcpyHostToDevice);\n\n  dim3 dimBlock(BLOCK_DIM, BLOCK_DIM);\n  dim3 dimGrid((int)ceil((double)N/dimBlock.x),(int)ceil((double)N/dimBlock.y));\n\n  parMatrixAdd_kernel&lt;&lt;&lt;dimGrid, dimBlock&gt;&gt;&gt;(d_A, d_B, d_C, N);\n  cudaMemcpy(C, d_C, dsize, cudaMemcpyDeviceToHost);\n  for (int i = 0; i &lt; N; i++)\n    for (int j = 0; j &lt; N; j++)\n      if (C[i][j] != (tval1+tval2)) {printf(&quot;mismatch at %d,%d was: %f, should be %f\\n&quot;, i, j, C[i][j], (tval1+tval2)); return 1;}\n  printf(&quot;Success!\\n&quot;);\n  return 0;\n}\n$ nvcc -o t1002 t1002.cu\n$ cuda-memcheck ./t1002\n========= CUDA-MEMCHECK\nSuccess!\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 1733825, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6a3092bb88bee92d0e1b14b1160b901f?s=128&d=identicon&r=PG", "display_name": "aaa", "link": "https://stackoverflow.com/users/1733825/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 1, "closed_date": 1450331612, "accepted_answer_id": 34322058, "answer_count": 1, "score": 0, "last_activity_date": 1608054256, "creation_date": 1450292188, "question_id": 34319941, "link": "https://stackoverflow.com/questions/34319941/large-matrix-addition-using-cuda-c", "closed_reason": "Not suitable for this site", "title": "Large Matrix Addition using CUDA C", "body": "<p>I want to add two large matrices NxN (N is multiple of two) and parallelize program using Cuda C. I was able to run the program with matrices of size 512x512. But if I go beyond that (e.g: 1024x1024) then it fails. I believe the problem might be that CUDA can launch maximum 512 threads per block(?). So my question is how to change the program so that I can matrices of any size.</p>\n\n<p>cuda kernel</p>\n\n<pre><code>__global__ void parMatrixAdd_kernel(float *a, float *b, float *c, int N) {\n\n   int col = threadIdx.x + blockIdx.x * blockDim.x;\n   int row = threadIdx.y + blockIdx.y * blockDim.y;\n   int index = col + row * N;\n   if (col &lt; N &amp;&amp; row &lt; N) {\n       c[index] = a[index] + b[index];\n   }\n}\n</code></pre>\n\n<p>block and grid sizes:</p>\n\n<pre><code>    //BLOCK_DIM is 512, N works upto 512, but not beyond\n    dim3 dimBlock(BLOCK_DIM, BLOCK_DIM);\n    dim3 dimGrid((int)ceil(N/dimBlock.x),(int)ceil(N/dimBlock.y));\n</code></pre>\n\n<p>arrays are: <code>matrix1[N][N]</code> <code>matrix2[N][N]</code></p>\n"}, {"tags": ["c", "linux", "call", "system", "fgets"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450292002, "post_id": 34319852, "comment_id": 56381451, "body": "If you are going to allocate a fixed-size buffer, why not use an array? Then you won&#39;t have the memory leak."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5688040, "user_type": "registered", "profile_image": "https://graph.facebook.com/952450734847108/picture?type=large", "display_name": "Luca S-c", "link": "https://stackoverflow.com/users/5688040/luca-s-c"}, "edited": false, "score": 0, "creation_date": 1450293844, "post_id": 34319916, "comment_id": 56382485, "body": "Thank you so much ^^ but how do I use the code you wrote and why exactly ? Sorry for the stupid questions I&#39;m quite a newbie in coding"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 13, "user_id": 5688040, "user_type": "registered", "profile_image": "https://graph.facebook.com/952450734847108/picture?type=large", "display_name": "Luca S-c", "link": "https://stackoverflow.com/users/5688040/luca-s-c"}, "edited": false, "score": 0, "creation_date": 1450294010, "post_id": 34319916, "comment_id": 56382605, "body": "@LucaS-c Just copy-paste the last 2 lines from my answer after the fgets call in your code. It&#39;s that simple :)"}, {"owner": {"reputation": 13, "user_id": 5688040, "user_type": "registered", "profile_image": "https://graph.facebook.com/952450734847108/picture?type=large", "display_name": "Luca S-c", "link": "https://stackoverflow.com/users/5688040/luca-s-c"}, "edited": false, "score": 0, "creation_date": 1450294586, "post_id": 34319916, "comment_id": 56382912, "body": "Thanks a lot man I understand what this does now I feel stupid &gt;&lt;"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1450292108, "creation_date": 1450292108, "answer_id": 34319916, "question_id": 34319852, "link": "https://stackoverflow.com/questions/34319852/fgets-function-is-not-reading-the-first-character-in-the-input/34319916#34319916", "title": "fgets function is not reading the first character in the input", "body": "<p>It's because you have <code>getchar();</code> call <em>before</em> <code>fgets()</code> call. So it consumes the first character and only the rest of the input is read by <code>fgets()</code>. Remove it.</p>\n\n<p>Also, note that <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow\"><code>fgets()</code></a> would read the trailing newline as well, if buffer space is available. You would want to trim it.</p>\n\n<p>You can use <a href=\"http://man7.org/linux/man-pages/man3/strchr.3.html\" rel=\"nofollow\"><code>strchr()</code></a> to remove the newline, if present:</p>\n\n<pre><code>fgets(line, 100, stdin);\nchar *p = strchr(line, '\\n');\nif (p) *p = 0;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5688040, "user_type": "registered", "profile_image": "https://graph.facebook.com/952450734847108/picture?type=large", "display_name": "Luca S-c", "link": "https://stackoverflow.com/users/5688040/luca-s-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1674, "favorite_count": 0, "accepted_answer_id": 34319916, "answer_count": 1, "score": 0, "last_activity_date": 1450292355, "creation_date": 1450291859, "last_edit_date": 1450292355, "question_id": 34319852, "link": "https://stackoverflow.com/questions/34319852/fgets-function-is-not-reading-the-first-character-in-the-input", "title": "fgets function is not reading the first character in the input", "body": "<p>Here is my code and the system call works when there is just one word with no space or anything between (like enter...). </p>\n\n<p>For example when I use \"pwd\" the call works but when I use something like <code>ls -l</code> or let's say \"cd file1 file2\" it erases the first character and doesn't take into account anything after the space.</p>\n\n<p>So when I write \"cd file1 file2\" only the \"d\" of \"cd\" is left. What can i do to prevent that ?    </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"Expert_mode.h\"\n\nvoid Expert_mode()\n{\n    printf(\"Your are now in Expert mode, You are using a basic Shell (good luck) \\nWe added the commands 'read_history', 'leave' and 'Easter_egg'. \\n\");\n\n    int a = 0;\n    while(a == 0)\n    {\n\n        char* line;\n\n        getchar();\n\n        printf(\"Choose a command : \\n\");\n\n        line = malloc(100*sizeof(char));\n\n        fgets(line, 100, stdin);\n\n        if(strcoll(line, \"leave\") == 0)\n        {\n            a = 1;\n        }\n        else if(strcoll(line, \"read_history\") == 0)\n        {\n            //read_history();\n        }\n        else if(strcoll(line, \"Easter_egg\") == 0)\n        {\n           // Easter_egg();\n        }\n        else\n        {\n            system(line);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "gcc"], "comments": [{"owner": {"reputation": 3817, "user_id": 2082884, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c1a7c51faf6f8622ecdbb8b638d3550?s=128&d=identicon&r=PG", "display_name": "hetepeperfan", "link": "https://stackoverflow.com/users/2082884/hetepeperfan"}, "edited": false, "score": 4, "creation_date": 1450291240, "post_id": 34319660, "comment_id": 56380986, "body": "What is the point of incrementing a pointer and subsequently set it to NULL?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1450292455, "post_id": 34319660, "comment_id": 56381704, "body": "Did you mean <code>*pointer = &#39;\\0&#39;;</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1450292688, "post_id": 34319660, "comment_id": 56381839, "body": "You&#39;ve accepted an answer even though it&#39;s not clear from you post what you intended to accomplish in the line <code>(++pointer)=NULL;</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450296953, "post_id": 34319660, "comment_id": 56384172, "body": "&quot;I have a <code>char *</code> pointer&quot; - So yu have a <code>char **</code>! And you loose the anchor. Remember to <code>--p</code> before <code>free</code>! But what do you think is the last line supposed to do anyway?"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1450292829, "last_edit_date": 1450292829, "creation_date": 1450291279, "answer_id": 34319697, "question_id": 34319660, "link": "https://stackoverflow.com/questions/34319660/gcc-error-lvalue-required-as-left-operand-of-assignment/34319697#34319697", "title": "GCC Error: lvalue required as left operand of assignment", "body": "<p>The subexpression <code>(++pointer)</code> will evaluate to an <em>rvalue</em> and it can't be a left operand of assignment (<code>=</code>) operator.</p>\n"}, {"comments": [{"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 2, "creation_date": 1450292060, "post_id": 34319705, "comment_id": 56381480, "body": "Some expressions are assignable lvalues, for example <code>*(p + 1)</code>. It&#39;s just that not every expression designates a modifiable location in memory."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "edited": false, "score": 0, "creation_date": 1450325733, "post_id": 34319705, "comment_id": 56394919, "body": "@BlagovestBuyukliev, Thanx. Edited"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 2, "last_activity_date": 1450325709, "last_edit_date": 1450325709, "creation_date": 1450291314, "answer_id": 34319705, "question_id": 34319660, "link": "https://stackoverflow.com/questions/34319660/gcc-error-lvalue-required-as-left-operand-of-assignment/34319705#34319705", "title": "GCC Error: lvalue required as left operand of assignment", "body": "<p>Some expressions cannot be an <code>assignable l-value</code>.</p>\n\n<p>In your code <code>(++pointer)</code> is an expression, which cannot be used as a left operand of the <code>=</code> sign.</p>\n\n<hr>\n\n<p>Think of something like</p>\n\n<pre><code>(x + 2) = 5  // (x + 2) is an expression\n</code></pre>\n\n<p>Does it makes sense?</p>\n"}, {"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 1, "creation_date": 1450291478, "post_id": 34319706, "comment_id": 56381142, "body": "It will never compile."}, {"owner": {"reputation": 1337, "user_id": 2116768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/INWvO.png?s=128&g=1", "display_name": "Dylan Kirkby", "link": "https://stackoverflow.com/users/2116768/dylan-kirkby"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1450291659, "post_id": 34319706, "comment_id": 56381253, "body": "Edited to stress the hypothetical"}], "tags": [], "owner": {"reputation": 1337, "user_id": 2116768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/INWvO.png?s=128&g=1", "display_name": "Dylan Kirkby", "link": "https://stackoverflow.com/users/2116768/dylan-kirkby"}, "is_accepted": true, "score": 3, "last_activity_date": 1450291637, "last_edit_date": 1450291637, "creation_date": 1450291315, "answer_id": 34319706, "question_id": 34319660, "link": "https://stackoverflow.com/questions/34319660/gcc-error-lvalue-required-as-left-operand-of-assignment/34319706#34319706", "title": "GCC Error: lvalue required as left operand of assignment", "body": "<p>The symbol <code>pointer</code> is an lvalue and can be used in an assignment on the left hand side.  <code>(++pointer)</code>, however, is not an lvalue and cannot be used in the same assignment.</p>\n\n<p>If on an alien planet far far away it did compile, this code would increment pointer by one and then set it to zero (<code>NULL</code>) so to achieve the same effect, and be portable to earth compilers, use <code>pointer = NULL;</code></p>\n"}], "owner": {"reputation": 1159, "user_id": 5531761, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dd74a9250f5dcf441880dba2b41ac7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Czenski", "link": "https://stackoverflow.com/users/5531761/dylan-czenski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 34319706, "answer_count": 3, "score": -4, "last_activity_date": 1450325709, "creation_date": 1450291150, "question_id": 34319660, "link": "https://stackoverflow.com/questions/34319660/gcc-error-lvalue-required-as-left-operand-of-assignment", "title": "GCC Error: lvalue required as left operand of assignment", "body": "<p>I have a <code>char* pointer</code> and when I do <code>(++pointer)= NULL</code>, there's an error:</p>\n\n<pre><code>lvalue required as left operand of assignment\n</code></pre>\n\n<p>What does it mean and how do I fix it? The code is</p>\n\n<pre><code>void func(const char*p1, const char *p2){\n    char * pointer;\n    pointer=malloc(strlen(p1)+strlen(p2)+2;\n    (++pointer)=NULL;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1450292732, "post_id": 34320339, "comment_id": 56382354, "body": "<a href=\"https://programmers.stackexchange.com/help/on-topic\">programmers.stackexchange.com/help/on-topic</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450371306, "post_id": 34320339, "comment_id": 56421568, "body": "this line: <code>iNames[x] = cNames;</code> would be better written as: <code>iNames[x] = strdup(cNames);</code>   Then at the of the program: <code>for(int i=0; i&lt;5; i++ ) free(iNames[i])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4700, "user_id": 2289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/446d362592d5eca5518c06c309dfecdb?s=128&d=identicon&r=PG", "display_name": "Ant", "link": "https://stackoverflow.com/users/2289/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1450292320, "creation_date": 1450292320, "answer_id": 34320340, "question_id": 34320339, "link": "https://stackoverflow.com/questions/34320339/storing-accessing-next-element-in-string-array-in-c/34320340#34320340", "title": "Storing/accessing next element in string array in C", "body": "<p>Here you allocate memory for a single string that is 255 characters long:</p>\n\n<pre><code>char cNames[255];\n</code></pre>\n\n<p>Let's say that string exists at memory address <code>42</code>.</p>\n\n<p>Here you read a sequence of characters into the string at address <code>42</code>:</p>\n\n<pre><code>scanf(\" %s\", cNames);\n</code></pre>\n\n<p>If the user enters the name \"Joe\", the sequence of bytes beginning at memory address <code>42</code> looks like this:</p>\n\n<pre><code>Joe\\0\n</code></pre>\n\n<p>Now we'll store the address of the string in your pointer array:</p>\n\n<pre><code>iNames[x] = cNames;\n</code></pre>\n\n<p><code>iNames[0]</code> now looks like this (technically, those zeros are actually random numbers, because we haven't set their values yet):</p>\n\n<pre><code>{ 42, 0, 0, 0, 0 }\n</code></pre>\n\n<p>Now we loop, and read another sequence of characters from the user:</p>\n\n<pre><code>scanf(\" %s\", cNames);\n</code></pre>\n\n<p>What happens here?  <code>cNames</code> is still a single string at memory address <code>42</code>.  If the user enters the name \"Bob\", the sequence of bytes beginning at memory address 42 looks like this:</p>\n\n<pre><code>Bob\\0\n</code></pre>\n\n<p>What happened to the name \"Joe\"?  We overwrote it.  The iNames pointer array doesn't store the string \"Joe\"; it stores the memory address <code>42</code>.  We overwrote the sequence of bytes at that memory address.</p>\n\n<p>Once the program finishes, what you'll eventually end up with is a pointer array looking like this:</p>\n\n<pre><code>{ 42, 42, 42, 42, 42 }\n</code></pre>\n\n<p>To fix this, you need to make sure you allocate a block of memory for each string you're trying to read in.  Do something like this to read the string from the user:</p>\n\n<pre><code>char *str = malloc(sizeof(char) * 255);\nscanf(\" %s\", str);\niNames[x] = str;\n</code></pre>\n\n<p>...and something like this to clean up when the program finishes:</p>\n\n<pre><code>for (int i = 0; i &lt; 5; ++i) {\n    free(iNames[i]);\n}\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1450293590, "question_id": 305251}, "owner": {"reputation": 351, "user_id": 3495404, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3f6dce90b558784be81ffb3eab5ba9f0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Hummel", "link": "https://stackoverflow.com/users/3495404/andrew-hummel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450437634, "creation_date": 1450290468, "last_edit_date": 1450437634, "question_id": 34320339, "link": "https://stackoverflow.com/questions/34320339/storing-accessing-next-element-in-string-array-in-c", "title": "Storing/accessing next element in string array in C", "body": "<p>I'm trying to print out all the elements of my array based upon what the user enters. I don't think I'm storing them correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint x = 0;\nint iChoice = 1;\nchar cNames[255];\nchar *iNames[5];\n\nint main()\n{\n   while (x &gt;= 0 || iChoice == 1) {\n      printf(\"\\nPlease enter a name: \");\n      scanf(\" %s\", cNames);\n      iNames[x] = cNames;\n      printf(\"Name One: %s\", iNames[x]);\n      x++;\n      if (x &gt; 0) {\n         printf(\"\\n\\n\\tMenu\\n\");\n         printf(\"\\t****\\n\\n\");\n         printf(\"\\t1. Enter another name\\n\\t2. Print report\\n\\n\");\n         printf(\"Enter selection: \");\n         scanf(\"%d\", &amp;iChoice);\n      }\n      if (iChoice == 2) {\n         for (x = 0; x &lt; 5; x++) {\n         printf(\"Name Two: %s\\n\", iNames[x]);\n      }\n         break;\n      }\n   }\n}\n</code></pre>\n\n<p>Even though I entered 5 different names, it only printed out the very last one I entered 5 times.</p>\n\n<pre><code>Name Two: Mike\nName Two: Mike\nName Two: Mike\nName Two: Mike\nName Two: Mike\n</code></pre>\n\n<p>Any suggestions much appreciated.</p>\n"}, {"tags": ["c++", "c", "windows", "gcc", "codeblocks"], "comments": [{"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1450291612, "post_id": 34319405, "comment_id": 56381216, "body": "<a href=\"https://stackoverflow.com/questions/13321980/yet-another-mingw-gcc-error-createprocess-no-such-file-or-directory#13326306\" title=\"yet another mingw gcc error createprocess no such file or directory%2313326306\">stackoverflow.com/questions/13321980/&hellip;</a>"}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1450291770, "post_id": 34319405, "comment_id": 56381317, "body": "It <i>looks</i> like you&#39;re possibly missing the linker, or your PATH is misconfigured."}, {"owner": {"reputation": 11, "user_id": 5687891, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p1ufaGl3mI8/AAAAAAAAAAI/AAAAAAAAAIM/V9vYHTrqZtk/photo.jpg?sz=128", "display_name": "Camel Smokes", "link": "https://stackoverflow.com/users/5687891/camel-smokes"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1450292472, "post_id": 34319405, "comment_id": 56381715, "body": "I&#39;ve added a couple screenshots."}, {"owner": {"reputation": 11, "user_id": 5687891, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p1ufaGl3mI8/AAAAAAAAAAI/AAAAAAAAAIM/V9vYHTrqZtk/photo.jpg?sz=128", "display_name": "Camel Smokes", "link": "https://stackoverflow.com/users/5687891/camel-smokes"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1450365904, "post_id": 34319405, "comment_id": 56417606, "body": "I tried the TDM installer, redirected the paths, and it somewhat worked except after it compiles and the program runs, it&#39;s blank and no errors come up. One problem after another right?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5687891, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p1ufaGl3mI8/AAAAAAAAAAI/AAAAAAAAAIM/V9vYHTrqZtk/photo.jpg?sz=128", "display_name": "Camel Smokes", "link": "https://stackoverflow.com/users/5687891/camel-smokes"}, "edited": false, "score": 1, "creation_date": 1450364857, "post_id": 34327627, "comment_id": 56416918, "body": "Sounds like a plan. When I get some time I&#39;ll uninstall everything, reboot, and try it as you did. The funny thing is on the other computer that I installed this on, and has been working, just today is now getting that error too and it&#39;s all default settings which have never been touched, then again, that&#39;s how the problem started on this computer."}], "tags": [], "owner": {"reputation": 513, "user_id": 2808357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iuuoe.jpg?s=128&g=1", "display_name": "Neil Roy", "link": "https://stackoverflow.com/users/2808357/neil-roy"}, "is_accepted": false, "score": 1, "last_activity_date": 1450332076, "creation_date": 1450332076, "answer_id": 34327627, "question_id": 34319405, "link": "https://stackoverflow.com/questions/34319405/mingw32-g-exe-error-createprocess-no-such-file-or-directory-again/34327627#34327627", "title": "mingw32-g++.exe: error: CreateProcess: No such file or directory again", "body": "<p>Windows 7 can be particular about where it will allow you to write files.  The directory where you installed Code::Blocks itself shouldn't matter as it doesn't write back to it's installation folder, but just in case, I installed mine in C:\\Develop\\CodeBlocks.  Windows 7 will not allow software to write to the program files folder once installed there.  Like I said, probably not an issue, but just in case, you may want to move it outside of that location, something like what I have.  I also have MinGW 4.8.1 installed it it's own folder in C.  I put it in C:\\MinGW and pointed to it as you did.  Code::Blocks has no problem autodetecting it though.</p>\n\n<p>For my projects, I put mine in my C:\\Develop\\Projects folder.  I am not sure if Windows 7 will allow software to write to your home folder, at least I don't think it's a location that is recommended by Microsoft.  If you prefer a location in there, your Documents folder is a safe location to create projects and can be written to.  My suspicion is that a file is not getting written at compile time and then, of course, it is not being found and so you get that error.</p>\n\n<p>Incidentally, I am also using Windows 7 (64bit) with Code::Blocks v13:12 and MinGW 4.8.1 (32bit version).</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5851841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9c23bccf27bcbe285a1170b06081a93?s=128&d=identicon&r=PG&f=1", "display_name": "DJB", "link": "https://stackoverflow.com/users/5851841/djb"}, "is_accepted": false, "score": 1, "last_activity_date": 1454501887, "last_edit_date": 1454501887, "creation_date": 1454500661, "answer_id": 35176420, "question_id": 34319405, "link": "https://stackoverflow.com/questions/34319405/mingw32-g-exe-error-createprocess-no-such-file-or-directory-again/35176420#35176420", "title": "mingw32-g++.exe: error: CreateProcess: No such file or directory again", "body": "<p>AntiVirus false triggers?  Or Windows Defender etc, if the behaviour change was noticed after a system update.</p>\n\n<p>I have <code>C::B 16.01</code>, but installed well away from <code>C:\\Program files</code> etc, on Win7(64) and (once I figured out how to point it at some needed third party lib's) it all works fine.   So far...</p>\n\n<p>Regards.</p>\n\n<p>DJB.</p>\n"}], "owner": {"reputation": 11, "user_id": 5687891, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p1ufaGl3mI8/AAAAAAAAAAI/AAAAAAAAAIM/V9vYHTrqZtk/photo.jpg?sz=128", "display_name": "Camel Smokes", "link": "https://stackoverflow.com/users/5687891/camel-smokes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 1, "closed_date": 1510072513, "answer_count": 2, "score": 1, "last_activity_date": 1537155501, "creation_date": 1450290249, "last_edit_date": 1537155501, "question_id": 34319405, "link": "https://stackoverflow.com/questions/34319405/mingw32-g-exe-error-createprocess-no-such-file-or-directory-again", "closed_reason": "Duplicate", "title": "mingw32-g++.exe: error: CreateProcess: No such file or directory again", "body": "<p>I have searched all over and cannot find a solution.</p>\n\n<p>I installed the code::blocks version with the compiler. (Windows 7)\nEvery time I try to compile, I get the No Such file or directory error.\nI thought maybe the spaces were causing the problem, so I downloaded and installed ming alone to C:\\GCC\\MinGW-w64</p>\n\n<p>I went into the compiler settings/toolchain executables and directed every path so it wouldn't try to read from the Program Files one where code::blocks is installed. Same error occurred. I've also tried going directly to the bin folder.</p>\n\n<p>I've reset to default settings. I've auto-detected. I've uninstalled and reinstalled. I've seriously tried about everything.</p>\n\n<p>Then I thought maybe because it's where I'm saving my projects, since they have spaces. So I put them directly to the c:\\ drive. Same error.</p>\n\n<p>This worked the first day I used it, after that it's been this problem ever since. So you'd think reinstalling everything would fix it right? </p>\n\n<p>If anyone has a solution please do tell! Using the exact same installation file on another computer, the compiler works fine, every setting is exactly the same as it is on this one, except on the other one it works. </p>\n\n<p>Here's the error messages. I made a quick console project just to post these errors.</p>\n\n<pre><code>||=== Build: Debug in hhhh (compiler: GNU GCC Compiler) ===|\n CreateProcess||No such file or directory|\n||=== Build failed: 1 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n\nmingw32-g++.exe -Wall -fexceptions -g  -c C:\\Users\\Mack\\hhhh\\main.cpp -o obj\\Debug\\main.o\nmingw32-g++.exe: error: CreateProcess: No such file or directory\n</code></pre>\n\n<p>Yet every time I go into the toolchain and redo the paths, they are all correct. The files are there, but code::blocks for some reason is not seeing them.</p>\n\n<p>Before coming here, I tried to make an account on the code::blocks forum, but it's broken. Activation email won't send and I can't find any email address to contact support. I've tried registering with a live.com, gmail.com, and mail.com email accounts, and none of them received the activation email.</p>\n\n<p>Also here is the simple Hello World I used that gave me the above errors.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here are some screenshots. </p>\n\n<p>Default settings.\n<a href=\"http://prntscr.com/9eyoi4\" rel=\"nofollow\">http://prntscr.com/9eyoi4</a></p>\n\n<p>Redirected to the latest compiler install. Redid each path so they all direct to the new files.\n<a href=\"http://prntscr.com/9eyqnx\" rel=\"nofollow\">http://prntscr.com/9eyqnx</a></p>\n"}, {"tags": ["c", "winapi", "printing"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1450295836, "post_id": 34319321, "comment_id": 56383594, "body": "Chrome must do it since it provides its own print dialog which includes options for color and b&amp;w, so you could grab the source to that and have a look."}, {"owner": {"reputation": 24556, "user_id": 110358, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/13c7ad63eb27047a7ff869d27e40c1ad?s=128&d=identicon&r=PG", "display_name": "Jacob Marble", "link": "https://stackoverflow.com/users/110358/jacob-marble"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1450460210, "post_id": 34319321, "comment_id": 56464012, "body": "<a href=\"https://code.google.com/p/chromium/codesearch#chromium/src/printing/backend/print_backend_win.cc&amp;l=264\" rel=\"nofollow noreferrer\">code.google.com/p/chromium/codesearch#chromium/src/printing/&zwnj;&#8203;&hellip;</a> Looks like they use DC_COLORDEVICE"}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1450296185, "post_id": 34320484, "comment_id": 56383771, "body": "<code>DEVMODE&#47;dmColor</code> is probably easier, it is also accessible through <code>PRINTDLG</code> or <code>EnumPrinters</code>/<code>PRINTER_INFO_2</code> ---- <code>pDevMode-&gt;dmColor</code> is 2 for color printers."}, {"owner": {"reputation": 24556, "user_id": 110358, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/13c7ad63eb27047a7ff869d27e40c1ad?s=128&d=identicon&r=PG", "display_name": "Jacob Marble", "link": "https://stackoverflow.com/users/110358/jacob-marble"}, "edited": false, "score": 0, "creation_date": 1450313627, "post_id": 34320484, "comment_id": 56391493, "body": "Well, I thought I had checked <code>DEVMODE.dmColor</code>, but clearly I had not. The results are 100% accurate for all of my printers. Thanks Adrian."}, {"owner": {"reputation": 24556, "user_id": 110358, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/13c7ad63eb27047a7ff869d27e40c1ad?s=128&d=identicon&r=PG", "display_name": "Jacob Marble", "link": "https://stackoverflow.com/users/110358/jacob-marble"}, "edited": false, "score": 0, "creation_date": 1450313948, "post_id": 34320484, "comment_id": 56391593, "body": "Hmm, doesn&#39;t <code>DEVMODE.dmColor</code> return the default color mode? So if the printer is capable of color, but the default is B/W, then I&#39;m left thinking it&#39;s B/W, yes?"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1450323051, "post_id": 34320484, "comment_id": 56394182, "body": "It depends how you read <code>DEVMODE.dmColor</code> If you go through <code>EnumPrinters</code> it should always be color for color printers. However, if printer&#39;s default settings is gray-scale, and you go through <code>PRINTDLG</code> then it reads black&amp;white. If that&#39;s the case you can override and set it back to color-mode."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1450294501, "last_edit_date": 1450294501, "creation_date": 1450294123, "answer_id": 34320484, "question_id": 34319321, "link": "https://stackoverflow.com/questions/34319321/how-to-detect-color-printer-with-win32/34320484#34320484", "title": "How to detect color printer with Win32?", "body": "<p>Bummer that <code>DC_COLORDEVICE</code> doesn't give the right answer.  The rest of your findings don't surprise me.</p>\n\n<p>You could try creating an information context for the printer with <a href=\"https://msdn.microsoft.com/en-us/library/dd183505(v=vs.85).aspx\" rel=\"nofollow\">CreateIC</a>, and then use <a href=\"https://msdn.microsoft.com/en-us/library/dd144877(v=vs.85).aspx\" rel=\"nofollow\">GetDeviceCaps</a> to check the <code>COLORRES</code> property.</p>\n\n<p>(An information context is like a device context that you can query but can't actually draw to.  It's useful when you want to know what a printer driver is going to do without actually creating a real device context, which may require the printer being online.)</p>\n\n<p>Checking the number of planes is useless, since everything (to a good approximation) uses a single plane.  The number of bits per pixel doesn't actually tell you if those pixels can be color or just grayscale (or just palette entries).</p>\n\n<p>Another idea is to look at the <code>dmColor</code> field in the default <a href=\"https://msdn.microsoft.com/en-us/library/dd183565(v=vs.85).aspx\" rel=\"nofollow\">DEVMODE</a> for the device.</p>\n\n<p>I had to solve the same problem many, many years ago (before DeviceCapabilities), but I don't remember how I did it.</p>\n"}], "owner": {"reputation": 24556, "user_id": 110358, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/13c7ad63eb27047a7ff869d27e40c1ad?s=128&d=identicon&r=PG", "display_name": "Jacob Marble", "link": "https://stackoverflow.com/users/110358/jacob-marble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 2, "accepted_answer_id": 34320484, "answer_count": 1, "score": 4, "last_activity_date": 1450294501, "creation_date": 1450289953, "question_id": 34319321, "link": "https://stackoverflow.com/questions/34319321/how-to-detect-color-printer-with-win32", "title": "How to detect color printer with Win32?", "body": "<p>I have two black-and-white printers, two color printers, and some virtual printers (Fax, CutePDF Writer, etc).</p>\n\n<p>According to the <code>DC_COLORDEVICE</code> query to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd183552(v=vs.85).aspx\" rel=\"nofollow\"><code>DeviceCapabilities</code></a>, only the Fax virtual printer is black-and-white.</p>\n\n<p>According to <code>PLANES</code> and <code>BITSPIXEL</code> queries to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd144877(v=vs.85).aspx\" rel=\"nofollow\"><code>GetDeviceCaps</code></a>, all of the printers have one plane, and only Fax and CutePDF have 1 bit/pixel (are black-and-white).</p>\n\n<p>According to the <code>NUMCOLORS</code> query to <code>GetDeviceCaps</code>, only Fax is black-and-white.</p>\n\n<p>I'm not excited about <a href=\"http://www.codeguru.com/cpp/w-d/doc_view/printing/article.php/c6755/How-to-Determine-Whether-a-Printer-Supports-Color.htm\" rel=\"nofollow\">querying the driver directly</a>, so I haven't tried it yet.</p>\n\n<p><strong>How do I accurately detect a color printer with Win32?</strong></p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1450290332, "post_id": 34319265, "comment_id": 56380443, "body": "Using functions would be much better option IMHO"}, {"owner": {"reputation": 4519, "user_id": 1977887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/I3Cij.jpg?s=128&g=1", "display_name": "Erick G. Hagstrom", "link": "https://stackoverflow.com/users/1977887/erick-g-hagstrom"}, "edited": false, "score": 0, "creation_date": 1450290764, "post_id": 34319265, "comment_id": 56380725, "body": "You need to look carefully at your braces. They aren&#39;t where you think they are."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1450295198, "post_id": 34319265, "comment_id": 56383272, "body": "Read more about char, char* and char[]."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450300105, "post_id": 34319265, "comment_id": 56386018, "body": "You&#39;re not checking return values from any of your <code>scanf()</code> calls.  How do you know if they work?"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1450290911, "last_edit_date": 1450290911, "creation_date": 1450290395, "answer_id": 34319451, "question_id": 34319265, "link": "https://stackoverflow.com/questions/34319265/c-only-the-first-condition-in-the-if-statement-works/34319451#34319451", "title": "C: Only the first condition in the if statement works", "body": "<p>One problem I see is:</p>\n\n<pre><code>scanf(\"%s\", &amp;variable);\n</code></pre>\n\n<p>This is syntactically correct but semantically incorrect. Since <code>variable</code> is of type <code>char</code>, you really cannot read a string into it. You end up accessing memory that you are not supposed to and it leads to undefined behavior.</p>\n\n<p>You need something like:</p>\n\n<pre><code>char variable[100]; // Make the array as large you need to\nscanf(\"%s\", variable);\n</code></pre>\n\n<p><strong>PS</strong> Fixing this may not solve any other problems.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1450290460, "creation_date": 1450290460, "answer_id": 34319464, "question_id": 34319265, "link": "https://stackoverflow.com/questions/34319265/c-only-the-first-condition-in-the-if-statement-works/34319464#34319464", "title": "C: Only the first condition in the if statement works", "body": "<p>It's because the condition <code>else if (probtype == 2)</code> is inside the condition <code>if (probtype == 1)</code> and connected to some other <code>if</code>.\nInstead add another brace before:</p>\n\n<pre><code>} // &lt;--- Add an extra brace here in addition to what you have.\nelse if (probtype == 2)\n{\n</code></pre>\n\n<p>and remove one at the end of your outer <code>if</code> statement.</p>\n\n<p>You have too many nested <em>if else</em> statements. I suggest you re-write your code to use <code>switch</code>-<code>case</code> and/or use separate functions for sub-tasks so that your code is more readable and you'd be able to debug easily.</p>\n"}], "owner": {"reputation": 11, "user_id": 5687875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147da7c141c953627a5654e37db68329?s=128&d=identicon&r=PG&f=1", "display_name": "TheOne15", "link": "https://stackoverflow.com/users/5687875/theone15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450293676, "creation_date": 1450289767, "last_edit_date": 1450293676, "question_id": 34319265, "link": "https://stackoverflow.com/questions/34319265/c-only-the-first-condition-in-the-if-statement-works", "title": "C: Only the first condition in the if statement works", "body": "<p>I am currently coding something in PuTTY and seem to be having technical difficulties with my if statements. My program is currently incomplete, but I wanted to fix this bug before I complete the code. The program will compile fine and prints; however, only doing the first type of differentiation works and trying to do integration or another type of differentiation exits the program:</p>\n\n<pre><code>int main()\n{\n    int probtype, diftype, intype,  vartype, vartest;\n    probtype = 0;\n    diftype = 0;\n    intype = 0;\n    vartype = 0;\n    vartest = 0;\n    char variable, variable2;\n    float  fpower, fconstant, fpower2, fconstant2, fdivisor;\n    int ipower, iconstant, ipower2, iconstant2, idivisor;\n    printf(\"Alright, starting off would you like to do differentiation or integration? Type '1' for differentiation or '2' for integration. \");\n    scanf(\"%d\", &amp;probtype);\n    if (probtype == 1)\n    {\n        printf(\"Okay, what kind of differentiation problem are you interested in? Type 1 for 'Power Rule with a Constant', Type 2 for 'Product Rule', Type 3 for 'Quotient Rule, Type 4 for 'Chain Rule', Type 5 for 'Trigonometric Problems', Type 6 for 'Exponential Problems' or Type 7 for 'Natural Log Problems. \");\n        scanf(\"%d\", &amp;diftype);\n        if (diftype == 1)\n        {\n            printf(\"Before we begin. Type 1, if the constant and power are both integers, type 2 if the constant is a decimal and the power is an integer, and type 3 for all other cases. \" );\n            scanf(\"%d\", &amp;vartype);\n            if (vartype == 1)\n            {\n                printf(\"First off enter the function's constant. If it has no visible constant enter 1. \");\n                scanf(\"%d\", &amp;iconstant);\n                printf(\"Alright, next enter the variable you are using. \");\n                scanf(\"%s\", &amp;variable);\n                printf(\"Finally, enter the power of the variable. \");\n                scanf(\"%d\", &amp;ipower);\n                iconstant = iconstant * ipower;\n                ipower = ipower - 1;\n                if (ipower == 0)\n                {\n                    printf(\"The derivative of the function would be: %d \\n\", iconstant);\n                }\n                else\n                {\n                    printf(\"The derivative of the function would be: %d%s^%d \\n\", iconstant, &amp;variable, ipower);\n                }\n            }\n            if (vartype == 2)\n            {\n                printf(\"First off enter the function's constant. Enter it in DECIMAL form! \");\n                scanf(\"%f\", &amp;fconstant);\n                printf(\"Next, enter the variable you are using. \");\n                scanf(\"%s\", &amp;variable);\n                printf(\"Finally, enter the power of the variable. \");\n                scanf(\"%d\", &amp;ipower);\n                fconstant = fconstant * ipower;\n                ipower = ipower - 1;\n                if (ipower == 0)\n                {\n                    printf(\"The derivative of the function would be %f \\n\", fconstant);\n                }\n                else\n                {\n                    printf(\"The derivative of the function would be %f%s^%d \\n\", fconstant, &amp;variable, ipower);\n                }\n            }\n            if (vartype == 3)\n            {\n                printf(\"First off, enter the function's constant. Enter it in DECIMAL form! \");\n                scanf(\"%f\", &amp;fconstant);\n                printf(\"Okay, now enter which variable you are using. \");\n                scanf(\"%s\", &amp;variable);\n                printf(\"Finally, enter the power of the variable. Enter this in DECIMAL form also! \");\n                scanf(\"%f\", &amp;fpower);\n                fconstant = fconstant * fpower;\n                fpower = fpower - 1;\n                printf(\"The derivative of the function would be: %f%s^%f \\n\", fconstant, &amp;variable, fpower);\n            }\n            else if (diftype == 2)\n            {\n                printf(\"Enter the first function's constant. If it doesn't have one, type a 1 \");\n            }\n            else if (diftype == 3)\n            {\n                printf(\"Quotient Rule\");\n            }\n            else if (diftype == 4)\n            {\n                printf(\"Chain Rule\");\n            }\n            else if (diftype == 5)\n            {\n                printf(\"Trigoometric Problems\");\n            }\n            else if (diftype == 6)\n            {\n                printf(\"Exponential Problems\");\n            }\n            else if (diftype == 7)\n            {\n                printf(\"Natural Log Problems\");\n            }\n        }\n        else if (probtype == 2)\n        {\n            printf(\"Okay, now what kind of integration problem are you interested in? Type 1 for 'Indefinite Integrals', Type 2 for 'Definite Integrals', Type 3 for 'Substitution', Type 4 for 'Trignometric Integrals', Type 5 for 'Integrations by Part', Type 6 for 'Exponential Problems', Type 7 for 'Natural Log Problems. \");\n            scanf(\"%d\", &amp;intype);\n            if (intype == 1)\n            {\n                printf(\"Before we get started: type 1 if both the constant and power are integers, type 2 if the constant is an integer and the power is a decimal, type 3 if the constant is a decimal and the power is an integer, and type 4 if both are decimals.\" );\n                scanf(\"%d\", &amp;vartype);\n                if (vartype == 1)\n                {\n                    printf(\"Alright first off, enter the constant. If there is no constant, type a 1. \" );\n                    scanf(\"%d\", &amp;iconstant);\n                    printf(\"Is there a variable in this equation? Type 1 if there is, Type 2 if there isn't. \");\n                    if (vartest == 2)\n                    {\n                        printf(\"The indefinite integral of the function is: %dx + C\", iconstant);\n                    }\n                    else\n                    {\n                        printf(\"Next, enter the variable that will be used for the problem. \");\n                        scanf(\"%s\", &amp;variable);\n                        printf(\"Finally enter the power of the function. \");\n                        scanf(\"%d\", &amp;ipower);\n                        ipower = ipower + 1;\n                        idivisor = ipower + 1;\n                        printf(\"The indefinte integral of the function is:  %d%s^%d / %d \\n\", iconstant, &amp;variable, ipower, idivisor);\n                    }\n                }\n            }\n            else if (intype == 2)\n            {\n                printf(\"Definite Integrals\");\n            }\n            else if (intype == 3)\n            {\n                printf(\"Substitution\");\n            }\n            else if (intype == 4)\n            {\n                printf(\"Trignometric Integrals\");\n            }\n            else if (intype == 5)\n            {\n                printf(\"Integrations by Part\");\n            }\n            else if (intype == 6)\n            {\n                printf(\"Exponential Problems\");\n            }\n            else if (intype == 7)\n            {\n                printf(\"Natural Log Problems\");\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I can't seem to find what is causing the error, I apologize if my information is not specific enough. I am aware there are more efficient ways of doing this program, so please don't change my code, but rather just show me what I did wrong and how I can fix it. Thank you. </p>\n"}, {"tags": ["c", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1450290689, "post_id": 34319203, "comment_id": 56380678, "body": "run your code with <code>cuda-memcheck</code>.  You will see that <code>cuda-memcheck</code> is identifying invalid <code>__global__</code> reads emanating from your <code>bfs</code> kernel.  Then recompile your code with the <code>-lineinfo</code> switch added, and follow the directions <a href=\"http://stackoverflow.com/questions/27277365/unspecified-launch-failure-on-memcpy/27278218#27278218\">here</a> to identify the specific line of source code in your <code>bfs</code> kernel that is generating the invalid global read.  Continue to fix your program until <code>cuda-memcheck</code> reports no errors."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450291333, "post_id": 34319203, "comment_id": 56381050, "body": "Add this line of code: <code>if (vfirst &gt; 1023) {printf(&quot;oops!\\n&quot;); return;}</code>  immediately after this line of code in your <code>bfs</code> kernel: <code>int vfirst = edges[e].first;</code>  If we ever see &quot;oops&quot; printout, then it means you have an invalid indexing going on, because the size of the <code>vertices</code> array is only 1024, right?  You can put a similar debug index check after this line of code: <code>int vsecond = edges[e].second;</code> to test if <code>vsecond</code> will be out-of-range (it is, in some cases.)"}, {"owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450291818, "post_id": 34319203, "comment_id": 56381353, "body": "You mean I add this code to the BFS function. But will it print, since my understanding is that the CUDA kernel has no I/O capability, so will it run printf. But I&#39;ll try right away."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450291923, "post_id": 34319203, "comment_id": 56381404, "body": "Yes, CUDA provides a special capability to handle <code>printf</code> (only) from the kernel.  This is covered in the <a href=\"http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output\" rel=\"nofollow noreferrer\">documentation</a>.  A principal use of this capability is for quick debug like this.  Once you have this identified, you will need to begin to address the question of why <code>vfirst</code> and <code>vsecond</code> are ending up out-of-range (i.e. higher than 1023) for some threads."}, {"owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450292088, "post_id": 34319203, "comment_id": 56381497, "body": "Well this actually worked. But now I&#39;m even more confused, my data generation code will not write an index greater than 1024, so is the line <code>int e = blockDim.x * blockIdx.x + threadIdx.x;</code> doing something wrong. This is the data generation code. [link] [<a href=\"https://github.com/soumasish/GenerateDataSet]\" rel=\"nofollow noreferrer\">github.com/soumasish/GenerateDataSet]</a>"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1450292356, "post_id": 34319203, "comment_id": 56381655, "body": "1024 is an illegal index for an array of size 1024.  That is in fact what is happening here.  Replace the index check code with something like this: <code>if (vfirst &gt; 1023) {printf(&quot;oops %d:%d\\n&quot;, e, vfirst); return;}</code>  Do something similar for <code>vsecond</code>.  You will see that thread 517 has an (illegal) index of  1024 on <code>vfirst</code>, thread 1904 has an index of 1024 on <code>vsecond</code> and thread 2009 has an index of 1024 on <code>vfirst</code>.  You may wish to review how arrays in C work."}, {"owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450293258, "post_id": 34319203, "comment_id": 56382157, "body": "I&#39;ve fixed the data errors, there are no more data errors now, its still not modifying the modified variable. Also I&#39;m using a specific number 85 which is in the data set and trying to log that number for the relevant thread, but that&#39;s not happening either, which is I think the reason why the BFS function is never getting called again. I&#39;ve modified the BFS code here with the debugging log and also on github. Really appreciate the help."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1450294027, "post_id": 34319203, "comment_id": 56382615, "body": "The only conclusion at this point is that neither of your <code>if</code> conditions are being satisfied, since if either one of those were satisfied, then <code>modified</code> should be set to 1.  That certainly seems to me like another problem in your data setup.  Note that in your algorithm description you say: &quot;The vertices array is initialized to -1 for all vertices except the starting vertex which is 0. &quot; but in your pictorial example you are indicating <b>just the opposite</b>: <code>0 0 0-1 0 0.....0</code>  Which is it supposed to be?  All -1 with a single zero for the starting vertex, or all 0 with a single -1?"}, {"owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450294730, "post_id": 34319203, "comment_id": 56382986, "body": "Ah I&#39;ll amend that now in the question, but it is actually initialized to -1 for all and zero for the starting vertex. I&#39;ve even copied and printed out  my edges array on the device to check whether the data set is correct and it seems correct to this point."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450295517, "post_id": 34319203, "comment_id": 56383433, "body": "This line of code in main.cu is broken, the ampersand does not belong there:  <code>err = cudaMemcpy(&amp;h_vertices, d_vertices, VERTEX_BYTES, cudaMemcpyDeviceToHost);</code>  Change that to this: <code>err = cudaMemcpy(h_vertices, d_vertices, VERTEX_BYTES, cudaMemcpyDeviceToHost);</code>  Also, your initial <code>current_depth</code> is set to 1, but that cannot possibly work for your initial <code>vertices</code> array which consists of either 0 or -1, correct ?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1450295726, "post_id": 34319203, "comment_id": 56383540, "body": "Really? This code <i>again</i>? How many accounts do you have anyway?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1450296351, "post_id": 34319203, "comment_id": 56383875, "body": "When I make the above 2 changes to your code (remove <code>h_vertices</code> ampersand and initialize <code>current_depth</code> to 0 instead of 1) then your code runs for two iterations instead of 1.    Hopefully by now you have a sense of how to debug this.  Setting <code>current_depth</code> initially to 1 prevented either  <code>if</code> condition in the first pass of your <code>bfs</code> kernel from being satisfied, for your initial data set.  Your initial data set has a zero vertex at position 85 in the <code>vertices</code> array, and therefore the thread that has 85 for <code>vsecond</code> (thread 5) initially must trigger to get the ball rolling."}, {"owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "edited": false, "score": 0, "creation_date": 1450296974, "post_id": 34319203, "comment_id": 56384188, "body": "Thanks a ton, it finally worked."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": false, "score": 2, "last_activity_date": 1450319886, "last_edit_date": 1450319886, "creation_date": 1450297997, "answer_id": 34321601, "question_id": 34319203, "link": "https://stackoverflow.com/questions/34319203/bfs-implementation-issues-on-cuda/34321601#34321601", "title": "BFS implementation issues on CUDA", "body": "<blockquote>\n  <p>My problem is that in the first run of BFS the modified variable never gets modified to 1 and thus the function never gets called a second time.</p>\n</blockquote>\n\n<ol>\n<li><p>The first problem that was encountered was out-of-bounds accesses as indicated by <code>cuda-memcheck</code>.  This was traced to the fact that the <code>edges</code> array was incorrectly including indices of 1024, which is not valid since the size of the <code>vertices</code> array was 1024.  The fix was to modify the <code>edges</code> array so that no values greater than 1023 were present.</p></li>\n<li><p>The other main problem discovered was that the <code>current_depth</code> variable was being set to 1 initially (in main.cu).  This prevented either <code>if</code> condition in the <code>bfs</code> kernel from being satisfied.  The <code>if</code> conditions:</p>\n\n<pre><code>    if((dfirst == current_depth) &amp;&amp;...\n</code></pre>\n\n<p>depended on a value (<code>dfirst</code>) being retrieved from the <code>vertices</code> array matching the <code>current_depth</code> value.  But since the initial population of the <code>vertices</code> array was all 0 or -1 (as stated in the problem description), there was no possibility to satisfy either <code>if</code> condition in the first kernel launch.  As a result, the <code>modified</code> variable never gets changed to 1, and so no additional kernel launches occur.  The fix is to set <code>current_depth</code> initially to zero in main.cu.</p></li>\n<li><p>Additionally, the following line of code was observed in main.cu:</p>\n\n<pre><code>err = cudaMemcpy(&amp;h_vertices, d_vertices, VERTEX_BYTES, cudaMemcpyDeviceToHost);\n</code></pre>\n\n<p>Since <code>h_vertices</code> is already a pointer, it is not correct to take the address of it here, so the ampersand is out of place here.  Using that code as-is would be a recipe for stack corruption in your program.  The fix is to remove the ampersand.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 5082771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad99f754a1c10973cce5a11c39ee5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Moffet", "link": "https://stackoverflow.com/users/5082771/moffet"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 1, "closed_date": 1450336279, "answer_count": 1, "score": -2, "last_activity_date": 1450319886, "creation_date": 1450289556, "last_edit_date": 1450295226, "question_id": 34319203, "link": "https://stackoverflow.com/questions/34319203/bfs-implementation-issues-on-cuda", "closed_reason": "Not suitable for this site", "title": "BFS implementation issues on CUDA", "body": "<p>I've the following algorithm that runs parallel BFS using CUDA 7.5. The function takes in an array of edges and an array of vertices. An edge is defined as </p>\n\n<pre><code>typedef struct Edge\n{\n    int first;\n    int second;\n\n}Edge;\n</code></pre>\n\n<p>The vertices array is initialized to -1 for all vertices except the starting vertex which is 0. Thus we have something like</p>\n\n<pre><code> 1 2 3 4 5 6.....1024\n-1-1-1-1 0-1.....-1\n</code></pre>\n\n<p>In this case the starting vertex is 4\nAssuming a sparse graph the edge list would have data in the following manner(the data would be in the edge stuff, but I've provided the integer representation)</p>\n\n<pre><code>1 2  3  4 5 .......2048\n3 17 12 1 3........2010\n9 34 20 9 17.......196\n</code></pre>\n\n<p>The BFS is supposed to run parallely with 2048 threads with any thread having 0 as the first/second index writing to the relevant index in the vertices array 1 and modify a bool to 1. This is the BFS code.</p>\n\n<pre><code>__global__ void bfs(Edge* edges, int* vertices, int current_depth, int* modified){\n\n    int e = blockDim.x * blockIdx.x + threadIdx.x;\n    int vfirst = edges[e].first;\n    if (vfirst &gt; 1023) {printf(\"oops %d:%d\\n\", e, vfirst); return;}\n    int dfirst = vertices[vfirst];\n    int vsecond = edges[e].second;\n    if (vsecond &gt; 1023) {printf(\"oops %d:%d\\n\", e, vsecond); return;}\n    int dsecond = vertices[vsecond];\n\n    if((dfirst == current_depth) &amp;&amp; (dsecond == -1)){\n        vertices[vsecond] = current_depth;\n        printf(\"e:%d  depth:%d\\n\", e, current_depth);\n        __syncthreads();\n        *modified = 1;\n        printf(\"%d\\n\", *modified);\n    }else if((dsecond == current_depth) &amp;&amp; (dfirst == -1)){\n        vertices[vfirst] = current_depth;\n        printf(\"e:%d depth:%d\\n\", e, current_depth);\n        __syncthreads();\n        *modified = 1;\n        printf(\"%d\\n\", *modified);\n    }\n}\n</code></pre>\n\n<p>This BFS kernel is being called repeatedly by the main code incrementing the value of current depth everytime it is called. This is the relevant section of the calling code.</p>\n\n<pre><code>begin = clock();\n\n    do{\n\n        h_modified = 0;\n        //printf(\"Entered while loop\\n\");\n        err = cudaMemcpy(d_modified, &amp;h_modified, sizeof(int), cudaMemcpyHostToDevice);\n        if (err != cudaSuccess)\n        {\n            fprintf(stderr, \"Failed to copy h_done to device(error code %s)!\\n\", cudaGetErrorString(err));\n            exit(EXIT_FAILURE);\n        }\n\n        printf(\"CUDA kernel launching with %d blocks of %d threads\\n\", edgeBlocks, threadsPerBlock);\n\n        bfs&lt;&lt;&lt;edgeBlocks, threadsPerBlock&gt;&gt;&gt;(d_edges, d_vertices, current_depth, d_modified);\n        cudaThreadSynchronize();\n\n        err = cudaGetLastError();\n        if (err != cudaSuccess)\n        {\n            fprintf(stderr, \"Failed to launch bfs kernel (error code %s)!\\n\", cudaGetErrorString(err));\n            exit(EXIT_FAILURE);\n        }\n        //printf(\"Second kernel launch finished\\n\");\n\n        err = cudaMemcpy(&amp;h_modified, d_modified, sizeof(int), cudaMemcpyDeviceToHost);\n        printf(\"%d\\n\", h_modified);\n        if (err != cudaSuccess)\n        {\n            fprintf(stderr, \"Failed to copy d_done to host(error code %s)!\\n\", cudaGetErrorString(err));\n            exit(EXIT_FAILURE);\n        }\n\n        printf(\"BFS run for level %d\\n\", current_depth);\n        current_depth++;\n\n\n    }while(h_modified != 0);\n\n    end = clock();\n    time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n    printf(\"Time taken: %f\\n\", time_spent);\n</code></pre>\n\n<p>The memcpy and mallocs have all been correctly and checked up. My problem is that in the first run of BFS the modified variable never gets modified to 1 and thus the function never gets called a second time. I've thoroughly checked my logic but just can't seem to put my finger on the problem. This is my first complete project in CUDA thus any help would be appreciated. For those who want a complete verifiable example please use the link,</p>\n\n<p><a href=\"https://github.com/soumasish/ParallelBreadthFirstSearch\" rel=\"nofollow\">https://github.com/soumasish/ParallelBreadthFirstSearch</a></p>\n"}, {"tags": ["c", "networking", "ip", "setsockopt", "getsockopt"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1450289104, "post_id": 34319033, "comment_id": 56379700, "body": "Please indent your code properly so it&#39;s easier to read."}, {"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 0, "creation_date": 1450289427, "post_id": 34319033, "comment_id": 56379905, "body": "How can you work with the IP version and the header length merged like that into a single byte? You need to split them into the 4 bit quantities that they are to be useful."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4908911, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04076e7a682cc9fb89047d5b10393fd7?s=128&d=identicon&r=PG&f=1", "display_name": "EmanueleRiso", "link": "https://stackoverflow.com/users/4908911/emanueleriso"}, "edited": false, "score": 0, "creation_date": 1450292252, "post_id": 34319292, "comment_id": 56381586, "body": "ok, i made changes. Now the header length is 24, how can i see ip option? the setsockopt seeting are right for detect these option?"}, {"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "reply_to_user": {"reputation": 51, "user_id": 4908911, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04076e7a682cc9fb89047d5b10393fd7?s=128&d=identicon&r=PG&f=1", "display_name": "EmanueleRiso", "link": "https://stackoverflow.com/users/4908911/emanueleriso"}, "edited": false, "score": 0, "creation_date": 1450292992, "post_id": 34319292, "comment_id": 56381993, "body": "Ok, so that means you have 4 bytes of IP options. No, getsockopt/setsockopt is for sockets, nothing to do with IP header options. I&#39;ve added a paragraph at the bottom of my answer with some links to pages with stuff about IP header options for you, but I&#39;m afraid you are going to have to get your hands dirty dealing with the data, I don&#39;t think there&#39;s an easy library for you AFAIK."}], "tags": [], "owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1450292839, "last_edit_date": 1450292839, "creation_date": 1450289855, "answer_id": 34319292, "question_id": 34319033, "link": "https://stackoverflow.com/questions/34319033/setting-setsockopt-for-detect-ip-option/34319292#34319292", "title": "setting setsockopt for detect ip option", "body": "<p>The structure you define for your IP header MIGHT be broadly compatible with an IP packet header but it's not really good enough and not easily usable.</p>\n\n<p>On my Linux system the system headers define the IP header in /usr/include/linux/ip.h like this:</p>\n\n<pre><code>struct iphdr {\n#if defined(__LITTLE_ENDIAN_BITFIELD)\n    __u8    ihl:4,\n            version:4;\n#elif defined (__BIG_ENDIAN_BITFIELD)\n    __u8    version:4,\n            ihl:4;\n#else\n#error  \"Please fix &lt;asm/byteorder.h&gt;\"\n#endif\n    __u8    tos;\n    __be16  tot_len;\n    __be16  id;\n    __be16  frag_off;\n    __u8    ttl;\n    __u8    protocol;\n    __sum16 check;\n    __be32  saddr;\n    __be32  daddr;\n    /*The options start here. */\n};\n</code></pre>\n\n<p>As you can see, this breaks the IP version and header length properly, and it's safer to be compiled for big or little endian targets.</p>\n\n<p>With a structure definition like this you can find the start of the IP options after <code>sizeof(struct iphdr)</code> bytes, and the size of the entire IP header will be <code>ip.ihl * 4</code>, where ip is a <code>struct iphdr</code>.</p>\n\n<p>You need the multiplication by 4 above because <code>ihl</code> is the number of 32 bit words that makes up the IP header, not the byte count of the header itself.</p>\n\n<p>You can look at <a href=\"https://en.wikipedia.org/wiki/IPv4\" rel=\"nofollow\">IPv4 (Wikipedia)</a> which has some general information about IP header options and their format, and <a href=\"http://www.iana.org/assignments/ip-parameters/ip-parameters.xhtml\" rel=\"nofollow\">IANAs list of IP Options</a> for a complete list, with links to the various RFCs which describe the details of each option.</p>\n"}], "owner": {"reputation": 51, "user_id": 4908911, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/04076e7a682cc9fb89047d5b10393fd7?s=128&d=identicon&r=PG&f=1", "display_name": "EmanueleRiso", "link": "https://stackoverflow.com/users/4908911/emanueleriso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450292839, "creation_date": 1450288956, "last_edit_date": 1450289721, "question_id": 34319033, "link": "https://stackoverflow.com/questions/34319033/setting-setsockopt-for-detect-ip-option", "title": "setting setsockopt for detect ip option", "body": "<p>i want to detect ip options of incoming internet packets. Here's my code. </p>\n\n<pre><code>//#define IPPROTO_IP 0\n//#define IP_OPTIONS 68\n#define SENDER_PORT_NUM 53\n#define SENDER_IP_ADDR \"127.0.0.1\" \n#define true 1\n\nstatic void bail(const char *error)\n{\n    printf(\"%s: %s\\n\", error, strerror(errno));\n    exit(1);\n}\n\nstruct ip_datagram{\n   unsigned char ver_ihl;\n   unsigned char tos; \n   unsigned short totlen;\n   unsigned short id; \n   unsigned short flags_offs;\n   unsigned char ttl; \n   unsigned char proto; \n   unsigned short checksum;\n   unsigned long src; \n   unsigned long dst; \n   unsigned char payload[1500];\n};       \nint main(){    \n\n   int s,b,sso,gso, i;\n   int contatore = 5;\n   int enabled = 1;  \n   char *data, *buffer;\n   int addrlen;\n   struct sockaddr_in addr;    \n   struct ip_datagram *ip, *ip_reply;\n   struct icmphdr* icmp;    \n   //char *src_addr=\"93.34.229.111\";\n   char *dst_addr=\"127.0.0.1\";\n\n   data = malloc(sizeof(struct ip_datagram)+ sizeof(struct icmphdr));\n   buffer = malloc(sizeof(struct ip_datagram)+ sizeof(struct icmphdr));\n   ip = (struct ip_datagram *) (data );\n   icmp = (struct icmphdr*) (data + sizeof(struct ip_datagram));\n\n   ip-&gt;ver_ihl = 45;\n   //ip-&gt;ihl = 15;\n   ip-&gt;totlen = sizeof(struct ip_datagram);\n   ip-&gt;proto = IPPROTO_ICMP;\n   //ip-&gt;src =(inet_addr(src_addr));\n   ip-&gt;dst = inet_addr(dst_addr);\n   ip-&gt;checksum = in_cksum((unsigned short *)ip, sizeof(struct     ip_datagram)); \n   icmp-&gt;type      = ICMP_ECHO;\n   icmp-&gt;checksum = in_cksum((unsigned short *)icmp, sizeof(struct icmphdr));\n\n   s = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP);\n   if(s&lt;0)\n      printf(\"errore socket\\n\");\n\n   sso = setsockopt(s, IPPROTO_IP, IP_OPTIONS,  &amp;enabled, sizeof(enabled));\n   if(sso&lt;0)\n      bail(\"errore setsockoptions\\n\");\n\n   gso = (s, IPPROTO_IP, IP_OPTIONS,  &amp;enabled, sizeof(enabled));\n   if(gso&lt;0)\n      bail(\"errore getsockoptions\\n\");\n   else\n      printf(\"IP_OPTIONS VALUE :%d\\n\", enabled);\n\n   addr.sin_family = AF_INET;\n   addr.sin_addr.s_addr = ip-&gt;dst;\n\n   while(contatore&gt;0){\n      int sent_bytes = sendto(s, (const char *)data, ip-&gt;totlen, 0, (struct sockaddr*)&amp;addr, sizeof(struct sockaddr) );\n\n      if(sent_bytes &lt;0){\n         printf(\"failed to send packets\\n\");\n         return 3;\n      }\n      //printf(\"Sent %d byte packet from %s to %s\\n\", ip-&gt;totlen, src_addr, dst_addr);\n      printf(\"Sent %d byte packet to %s\\n\", ip-&gt;totlen, dst_addr);   \n\n      addrlen = sizeof(addr);\n\n      int bytes = recvfrom(s, buffer, sizeof(struct ip_datagram) + sizeof(struct icmphdr), 0, (struct sockaddr*)&amp;addr, &amp;addrlen);\n\n      if(bytes&lt;=0){\n         printf(\"errore recvfrom\\n\");\n         break;\n      }\n      else{\n         char *cp;   \n         ip_reply = (struct ip_datagram*) buffer;\n         cp = (char *)&amp;ip_reply-&gt;src;\n         printf(\"Received %d byte reply from %u.%u.%u.%u:\\n\", ntohs(ip_reply-&gt;totlen), cp[0]&amp;0xff,cp[1]&amp;0xff,cp[2]&amp;0xff,cp[3]&amp;0xff);\n         printf(\"ID: %d\\n\", ntohs(ip_reply-&gt;id));\n         printf(\"TTL: %d\\n\", ip_reply-&gt;ttl);\n         printf(\"type of service: %.1X\\n\", ip_reply-&gt;tos);        \n         printf(\"IP ADDRESS SOURCE: %.4X\\n\", htonl(ip_reply-&gt;src));\n         printf(\"IP ADDRESS DESTINATION: %.4X\\n\", htonl(ip_reply-&gt;dst));\n         printf(\"versione + header length: %.1X\\n\", ip_reply-&gt;ver_ihl);\n         contatore--;       \n         printf(\"-----------------\\n\");        \n         printf(\"****************\\n\");\n      }\n   }    \n}\n</code></pre>\n\n<p>the problem is the header length is 6 but the length should be 20 for detecting all ip options. In setsockopt, maybe, the type of enabled variable should be a char, but i have some problem when i run the program: in fact, with a char type it gives me an error for invalid argument. I want to know also how to print these options using getsockoption. What's the problem? i hope my question is clear :)</p>\n"}, {"tags": ["c", "sockets", "signals", "sigpipe"], "comments": [{"owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "edited": false, "score": 1, "creation_date": 1450290813, "post_id": 34319025, "comment_id": 56380755, "body": "Loops why/how? You haven&#39;t really provided enough information here. I&#39;d have to guess that once the socket gets trashed the read or write calls being made on the socket are always returning immediately, because it&#39;s now an error to read/write. You need to detect that and discard the socket or take whatever action is appropriate... IF that&#39;s what&#39;s happening..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450291632, "post_id": 34319025, "comment_id": 56381236, "body": "If you ignore SIGPIPE, the write operations will return an error setting <code>errno</code> to <code>EINTR</code>.  This is useful as long as you consistently and carefully test that your write operations succeed (and take appropriate action when they don&#39;t succeed \u2014 which means stop trying to write).  Otherwise, it is a recipe for disaster."}, {"owner": {"reputation": 19, "user_id": 3959771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f4178c7efe897ca08d204dc0c6f2201?s=128&d=identicon&r=PG&f=1", "display_name": "Maria de gregorio", "link": "https://stackoverflow.com/users/3959771/maria-de-gregorio"}, "edited": false, "score": 0, "creation_date": 1450296276, "post_id": 34319025, "comment_id": 56383826, "body": "I did a mistake and I will put all check all write and read istructions with perror. But, anyway, is that the right way to handle the situation?  Client close the terminal Server need to go ahead  Have you got any idea to suggest to me? Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1510044247, "creation_date": 1510044247, "answer_id": 47153403, "question_id": 34319025, "link": "https://stackoverflow.com/questions/34319025/c-signal-sigpipe-sighup-via-socket/47153403#47153403", "title": "C signal (sigpipe, sighup) via Socket", "body": "<blockquote>\n  <p>I did a mistake and I will put all check all write and read\n  istructions with perror. But, anyway, is that the right way to handle\n  the situation?</p>\n</blockquote>\n\n<p>Ignoring SIGPIPE is viable. Alternatively you could prevent the generation of SIGPIPE by giving the MSG_NOSIGNAL flag to <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/send.html\" rel=\"nofollow noreferrer\"><code>send()</code></a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 3959771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f4178c7efe897ca08d204dc0c6f2201?s=128&d=identicon&r=PG&f=1", "display_name": "Maria de gregorio", "link": "https://stackoverflow.com/users/3959771/maria-de-gregorio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510044247, "creation_date": 1450288930, "question_id": 34319025, "link": "https://stackoverflow.com/questions/34319025/c-signal-sigpipe-sighup-via-socket", "title": "C signal (sigpipe, sighup) via Socket", "body": "<p>I've to handle the SIGHUP and the SIGPIPE signal in order to avoid that a CLIENT, connected via Socket TCP, closing the terminal (The [X] of the GUI) hadn't to close or crash the SERVER.</p>\n\n<p>I've set on the client a sigup handler like this</p>\n\n<pre><code>void sighup()\n{\n  signal(SIGHUP, SIG_IGN);\n  system(\"echo SIGHUP received&gt;&gt;log.txt\");\n  close(socket);\n  exit(0);\n}\n</code></pre>\n\n<p>On the server I've set a SIGPIPE handler like this</p>\n\n<pre><code>signal(SIGPIPE,SIG_IGN); \n</code></pre>\n\n<p>but, if the client close the windows of the terminal, the server loops.</p>\n\n<p>Any idea?\nThank you anyway for support </p>\n"}, {"tags": ["c", "syntax", "clang", "naming-conventions", "identifier"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1450288982, "post_id": 34319000, "comment_id": 56379629, "body": "Related <a href=\"http://stackoverflow.com/q/26660180/1708801\">Unicode/special characters in variable names in clang not allowed?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454469113, "post_id": 34319000, "comment_id": 58053808, "body": "<code>@interface</code>, etc. do not look like valid C anyway. Does that happen to be Objective-C actually? If so, please update text and tags!"}, {"owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454479819, "post_id": 34319000, "comment_id": 58057272, "body": "@Olaf I&#39;m talking <code>C</code> identifiers.  <a href=\"https://en.wikipedia.org/wiki/Objective-C#Syntax\" rel=\"nofollow noreferrer\">All valid <code>C</code> is valid <code>Objective-C</code></a>, so the superset of <code>C</code> is irrelevant."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1454505461, "post_id": 34319000, "comment_id": 58073162, "body": "That is not bijective. Can you prove Objective-C does not extend the definition of valid identifiers? Left that aside: Using non-ASCII identifiers is strongly deprecated; there is only one reson to use such eccentricities: to obfuscate the code. This includes language-specific characters like German Umlauts (<code>&#228;&#246;&#252;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 3, "creation_date": 1450293786, "post_id": 34319264, "comment_id": 56382447, "body": "could you at least drop a node what this means about his observations, since I guess not everyone is familiar with the encoding of each unicodation."}, {"owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1570718106, "post_id": 34319264, "comment_id": 103009306, "body": "@dhein The answer to &quot;and why&quot; is &quot;Because the standard says so&quot;. The only entity that can say why is the ISO. Generally standard organization don&#39;t have to justify their decisions. And I have not assumed any lack of knowledge, I said <b>if</b> (that means &quot;for the case that the following is true&quot; and not &quot;the following is true&quot;) and I write that, as you said &quot;I guess not everyone is familiar with the encoding of each unicodation&quot;, well, if you are not familiar with it, then you don&#39;t seem to know ISO/IEC 10646, as that standard explains it."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "edited": false, "score": 0, "creation_date": 1571121610, "post_id": 34319264, "comment_id": 103124030, "body": "@Mecki: Well, I am not considering myself &quot;everyone&quot;... So it was a suggestion for the answer how to improve the quality of this answer. I also know that only the people (in this case the committee) making a decision are those who can say why they made a decision. Nonetheless that&#39;s what OP asked and since this answer wasn&#39;t leaving a note on it (either stating there is no such reason known to have been given, or mentioning the reason that was given) I was pointing it out. So I wasn&#39;t asking either of the 2 things. I was just leaving a suggestions for improving the answer as its missing these."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 9, "last_activity_date": 1450289766, "creation_date": 1450289766, "answer_id": 34319264, "question_id": 34319000, "link": "https://stackoverflow.com/questions/34319000/what-constitutes-a-valid-c-identifier/34319264#34319264", "title": "What constitutes a &quot;valid&quot; C Identifier?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\">C 2011 standard</a></p>\n\n<blockquote>\n<h3>6.4.2 Identifiers</h3>\n<strong>6.4.2.1 General</strong><br>\n...<br>\n3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Each universal character name in an identifier shall designate a character whose encoding\nin ISO/IEC 10646 falls into one of the ranges specified in D.1.<sup>71)</sup> The initial character\nshall not be a universal character name designating a character whose encoding falls into\none of the ranges specified in D.2. An implementation may allow multibyte characters\nthat are not part of the basic source character set to appear in identifiers; which characters\nand their correspondence to universal character names is implementation-defined.\n<br>...\n<hr>\n<sup>71) On systems in which linkers cannot accept extended characters, an encoding of the universal character\nname may be used in forming valid external identifiers. For example, some otherwise unused\ncharacter or sequence of characters may be used to encode the \\u in a universal character name.\nExtended characters may produce a long external identifier.</sup>\n<br>...<br>\n<h1>Annex D</h1>\n<h1>(normative)</h1>\n<h2>Universal character names for identifiers</h2>\n1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This clause lists the hexadecimal code values that are valid in universal character names\nin identifiers.<br><br>\n<strong>D.1 Ranges of characters allowed</strong><br><br>\n1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;00A8, 00AA, 00AD, 00AF, 00B2\u221200B5, 00B7\u221200BA, 00BC\u221200BE, 00C0\u221200D6,\n00D8\u221200F6, 00F8\u221200FF<br><br>\n2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0100\u2212167F, 1681\u2212180D, 180F\u22121FFF<br><br>\n3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;200B\u2212200D, 202A\u2212202E, 203F\u22122040, 2054, 2060\u2212206F<br><br>\n4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2070\u2212218F, 2460\u221224FF, 2776\u22122793, 2C00\u22122DFF, 2E80\u22122FFF<br><br>\n5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3004\u22123007, 3021\u2212302F, 3031\u2212303F<br><br>\n6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3040\u2212D7FF<br><br>\n7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F900\u2212FD3D, FD40\u2212FDCF, FDF0\u2212FE44, FE47\u2212FFFD<br><br>\n8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10000\u22121FFFD, 20000\u22122FFFD, 30000\u22123FFFD, 40000\u22124FFFD, 50000\u22125FFFD,\n60000\u22126FFFD, 70000\u22127FFFD, 80000\u22128FFFD, 90000\u22129FFFD, A0000\u2212AFFFD,\nB0000\u2212BFFFD, C0000\u2212CFFFD, D0000\u2212DFFFD, E0000\u2212EFFFD<br><br>\n<strong>D.2 Ranges of characters disallowed initially</strong><br><br>\n1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0300\u2212036F, 1DC0\u22121DFF, 20D0\u221220FF, FE20\u2212FE2F\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 6, "last_activity_date": 1454516303, "last_edit_date": 1454516303, "creation_date": 1454515998, "answer_id": 35182080, "question_id": 34319000, "link": "https://stackoverflow.com/questions/34319000/what-constitutes-a-valid-c-identifier/35182080#35182080", "title": "What constitutes a &quot;valid&quot; C Identifier?", "body": "<p>The syntax for identifiers, which include macro names, is presented in section 6.4.2 of the C2011 standard, as interpreted in light of appendix D.1.  These provisions hold that every identifier may contain underscores, upper- and lower-case Latin letters, decimal digits, sequences of characters constituting \"universal character names\" (subject to limitations), <em>and any other character defined by the implementation</em>.</p>\n\n<p>Universal character names (UCNs) are Unicode escape sequences similar to those provided by Java, Python, and some other languages: they start with a backslash (<code>\\</code>), which is followed by a <code>u</code> or <code>U</code>, and either four or eight hexadecimal digits, respectively.  There are some limitations on the specific hex digit sequences that may be used, some general, others specific to identifier context.  Note, however, that <em>syntactically</em>, the only additional character that the provision for UCNs allows to appear in identifiers is the backslash; all the other characters that can appear in a UCN are allowed in identifiers outside of UCN context, too.</p>\n\n<p>Thus, speaking syntactically and restricting the discussion to the characters that the standard requires to be allowed in identifiers, the underscore, (unaccented) Latin letters, decimal digits, and the backslash are the only characters that C requires must be supported in identifiers.  Support for the backslash is required only in the context of UCNs, and not all valid UCNs are allowed in identifiers.  Additionally, the standard does not require support for digits as the first characters of identifiers.</p>\n\n<p>On the other hand, the standard is quite liberal in allowing \"other implementation-defined characters\" in identifiers, including as the first character.  Even decimal digits, which otherwise cannot be the first character in an identifier, could, in principle, be allowed at that position under this provision, at the discretion of the implementation.  If you want your code to be portable among implementations then you will avoid relying on this provision anywhere.  If you want to know which characters your particular implementation allows then you must consult its documentation.</p>\n\n<p>Every standard-conforming implementation must document its behavior with respect to every detail the standard declares to be implementation defined.  For example, <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Implementation-defined-behavior.html#Implementation-defined-behavior\" rel=\"noreferrer\">GCC's documentation</a> specifies that the dollar sign (<code>$</code>) is allowed in identifiers on most target architectures.  You yourself linked to and quoted Clang's documentation of the same implementation-defined detail, which is more liberal -- it allows all the characters that can be represented in identifiers via UCNs to also be representable by UTF-8 byte sequences.  In many cases, if you display or print source code containing such byte sequences, they will be rendered as a single display character.</p>\n"}, {"comments": [{"owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "edited": false, "score": 0, "creation_date": 1454787054, "post_id": 35242264, "comment_id": 58204813, "body": "So far this is the only answer that answers the question &quot;why not&quot;.  This is the root of my confusion, and unless something earth shattering is presented.. This will take the bounty."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "edited": false, "score": 0, "creation_date": 1454939489, "post_id": 35242264, "comment_id": 58253939, "body": "@alexgray, you are of course free to award the bounty to whomever you choose, but if indeed you had an interest in speculation on <i>why</i> the standard specifies what it does, as opposed to only <i>what</i> the standard specifies, then you would have gotten more answers addressing that point by raising it in your question.  Or even in comments."}, {"owner": {"reputation": 616, "user_id": 3306678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd72a88a67d63fce90ba5755adc61cf9?s=128&d=identicon&r=PG", "display_name": "TabascoEye", "link": "https://stackoverflow.com/users/3306678/tabascoeye"}, "reply_to_user": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "edited": false, "score": 0, "creation_date": 1455007818, "post_id": 35242264, "comment_id": 58285241, "body": "@alexgray so now you gave one half of the bounty to john-bollinger and the other half to no one? interesting..."}, {"owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "edited": false, "score": 0, "creation_date": 1455035057, "post_id": 35242264, "comment_id": 58304201, "body": "@TabascoEye No, I was super busy yesterday and didn&#39;t have a moment to award it to anybody!  (That 24-hour limit is pretty draconian, IMHO). <code>SE</code> seems to have divvied things up as they see fit, and doesn&#39;t look like I get to have any say in it, now.  \ud83d\ude21"}], "tags": [], "owner": {"reputation": 616, "user_id": 3306678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd72a88a67d63fce90ba5755adc61cf9?s=128&d=identicon&r=PG", "display_name": "TabascoEye", "link": "https://stackoverflow.com/users/3306678/tabascoeye"}, "is_accepted": false, "score": 5, "last_activity_date": 1454769704, "creation_date": 1454769704, "answer_id": 35242264, "question_id": 34319000, "link": "https://stackoverflow.com/questions/34319000/what-constitutes-a-valid-c-identifier/35242264#35242264", "title": "What constitutes a &quot;valid&quot; C Identifier?", "body": "<p>As already mentioned, the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">C11 Standard</a> defines several allowed Ranges of Unicode characters.</p>\n\n<ul>\n<li>00A8, 00AA, 00AD, 00AF, 00B2\u221200B5, 00B7\u221200BA, 00BC\u221200BE, 00C0\u221200D6, 00D8\u221200F6, 00F8\u221200FF</li>\n<li>0100\u2212167F, 1681\u2212180D, 180F\u22121FFF</li>\n<li>200B\u2212200D, 202A\u2212202E, 203F\u22122040, 2054, 2060\u2212206F</li>\n<li>2070\u2212218F, 2460\u221224FF, 2776\u22122793, 2C00\u22122DFF, 2E80\u22122FFF</li>\n<li>3004\u22123007, 3021\u2212302F, 3031\u2212303F</li>\n<li>3040\u2212D7FF</li>\n<li>F900\u2212FD3D, FD40\u2212FDCF, FDF0\u2212FE44, FE47\u2212FFFD</li>\n<li>10000\u22121FFFD, 20000\u22122FFFD, 30000\u22123FFFD, 40000\u22124FFFD, 50000\u22125FFFD, 60000\u22126FFFD, 70000\u22127FFFD, 80000\u22128FFFD, 90000\u22129FFFD, A0000\u2212AFFFD, B0000\u2212BFFFD, C0000\u2212CFFFD, D0000\u2212DFFFD, E0000\u2212EFFFD</li>\n</ul>\n\n<p>This also means there are several ranges of characters excluded from usage.<br/>\nFrom your examples:</p>\n\n<ul>\n<li>\u260e is <code>260E</code> and from the \"Miscellaneous Symbols\" block: <code>2600-26FF</code> which means youre missing out on <a href=\"http://www.unicode.org/charts/PDF/U2600.pdf\" rel=\"noreferrer\">all of these</a></li>\n<li>\u274c is <code>274C</code> and from the \"Dingbats\" block: <code>2700-27BF</code> which is <a href=\"http://www.unicode.org/charts/PDF/U2700.pdf\" rel=\"noreferrer\">all of these</a> but some of them are allowed (<code>2776\u22122793</code>)</li>\n<li>\u21e7 is <code>21E7</code> and from the \"Arrows \" block: <code>2190-21FF</code> which means youre missing out on <a href=\"http://www.unicode.org/charts/PDF/U2190.pdf\" rel=\"noreferrer\">all of these</a></li>\n<li>\u3013 is <code>3013</code> and from the \"CJK Symbols and Punctuation\" block: <code>3000-303F</code> which is <a href=\"http://www.unicode.org/charts/PDF/U3000.pdf\" rel=\"noreferrer\">all these</a> but some of them are allowed.</li>\n<li>\ud83c\udf4e is <code>1F34E</code> and from the \"Miscellaneous Symbols and Pictographs\" block: <code>1F300-1F5FF</code> which is <a href=\"http://www.unicode.org/charts/PDF/U1F300.pdf\" rel=\"noreferrer\">all these</a> and actually should work<br/> (maybe a <code>clang</code>problem? btw this is not displayed on my home computer (Ubuntu) but on my work PC (Win7))</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "edited": false, "score": 1, "creation_date": 1454881470, "post_id": 35258227, "comment_id": 58231326, "body": "Great research.  It&#39;s a tad shocking how myriad, disparate, and undecipherable all these various sources are!"}], "tags": [], "owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "is_accepted": true, "score": 14, "last_activity_date": 1454952018, "last_edit_date": 1592644375, "creation_date": 1454874396, "answer_id": 35258227, "question_id": 34319000, "link": "https://stackoverflow.com/questions/34319000/what-constitutes-a-valid-c-identifier/35258227#35258227", "title": "What constitutes a &quot;valid&quot; C Identifier?", "body": "<p>As others have mentioned, Annex D of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">ISO/IEC 9899:2011</a> lists the hexadecimal values of characters valid for universal character names in C11.  (I won't bother repeating it here.)  I have been searching for an answer as to &quot;why&quot; this list was chosen.</p>\n<h2>Character set standards</h2>\n<p>First, there are two relevant standards defining a set of characters: <a href=\"http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=63182\" rel=\"noreferrer\">ISO/IEC 10646</a> (defining <a href=\"https://en.wikipedia.org/wiki/Universal_Coded_Character_Set\" rel=\"noreferrer\">UCS</a>) and <a href=\"http://unicode.org/\" rel=\"noreferrer\">Unicode</a>.  To further confuse (or simplify) things, they both define <em>the same characters</em> since the ISO and Unicode keep them <a href=\"http://unicode.org/faq/unicode_iso.html\" rel=\"noreferrer\">synchronized</a>.  UCS is essentially just a character map associating values to a set of characters (&quot;repertoire&quot;), while Unicode also gives further definitions such how to compare strings in an alphabetical sorting order (<a href=\"http://unicode.org/reports/tr10/\" rel=\"noreferrer\">collation</a>), which code points represent &quot;canonically equivalent&quot; characters (<a href=\"http://unicode.org/faq/normalization.html\" rel=\"noreferrer\">normalization</a>), and a <a href=\"http://unicode.org/reports/tr9/\" rel=\"noreferrer\">bidirectional algorithm</a> for how to process characters in languages written right to left, and more.</p>\n<h2>Universal character names in C</h2>\n<p>Universal character names (UCN) was a feature newly added in C99 (ISO/IEC 9899:1999).  In the &quot;Rationale for International Standard---Programming Languages---C&quot; (<a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n897.pdf\" rel=\"noreferrer\" title=\"Rationale for International Standards---Programming Languages---C, Rev. 2 (Oct. 1999)\">Rev. 2, Oct. 1999</a>), the purpose was &quot;to enable the use of any 'native' character in identifiers, string literals and character constants, while retaining the portability objective of C&quot; (sec. 5.2.1).  This section continues on about issues of how to encode these characters in C (the <code>\\U</code> and <code>\\u</code> forms versus multibyte characters or native encodings) and policy models of how to deal with it (p.14, see <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n897.pdf\" rel=\"noreferrer\" title=\"Rationale for International Standards---Programming Languages---C, Rev. 2 (Oct. 1999)\">PDF</a> page 22).</p>\n\n<h2>Rationale</h2>\n<p>I was hoping that the same <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n897.pdf\" rel=\"noreferrer\" title=\"Rationale for International Standards---Programming Languages---C, Rev. 2 (Oct. 1999)\">&quot;rationale&quot; document from 1999</a> would give a reason of why each extended character range was selected as acceptable for C99's UCNs.  The entirety of the rationale's Annex I is:</p>\n<blockquote>\n<p><strong>Annex I   Universal character names for identifiers (normative)</strong></p>\n<p><i>A new feature of C9X.</i></p>\n</blockquote>\n<p>This is not much of a rationale.  They didn't even know what year the C standard would be published, so it's just called &quot;C9X&quot;.  A later <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf\" rel=\"noreferrer\" title=\"Rationale for International Standards---Programming Languages---C, Rev. 5.10 (Apr. 2003)\">rationale document from 2003</a> is slightly more enlightening:</p>\n<blockquote>\n<p><strong>Annex D   Universal character names for identifiers (normative)</strong></p>\n<p><em>New feature for C99.</em></p>\n<p>The intention is to keep current with ISO/IEC TR 10176.</p>\n</blockquote>\n<p><a href=\"http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=37765\" rel=\"noreferrer\" title=\"ISO/IEC TR 10176: Guidelines for the preparation of programming language standards\">ISO/IEC TR 10176</a> is &quot;Guidelines for the preparation of programming language standards.&quot;  It a basically a guidebook for people who write programming language standards.  It includes guidelines for the use of character sets in programming languages as well as a &quot;recommended extended repertoire for user-defined identifiers&quot; (Annex A).  But this quote from the 2003 rationale document is only an &quot;intention to keep current,&quot; not a pledge of strict adherence to TR 10176.</p>\n<p>There is a publicly available <a href=\"http://www.iso.org/ittf/ISOIEC_TR_10176_2003_Table.txt\" rel=\"noreferrer\">ISO/IEC TR 10176:2003 table</a> of characters.  The character values refer to  ISO 10646.  The table classifies ranges of characters from numerous languages as being &quot;uppercase&quot; <code>Lu</code>; &quot;lowercase&quot; <code>Ll</code>; &quot;number, decimal digit&quot; <code>Nd</code>, &quot;punctuation, connector&quot; <code>Pc</code>; etc.  It should be clear what use such classifications have to a programming language.</p>\n<p>An important reminder is that TR 10176 is a Technical Report, and not a standard.  I have found several passing references to it on forums and in documents related to other programming languages, such as Ada, COBOL, and D language.  Much of the discussion was about how closely standards of those languages should follow TR 10176 (not being a standard) and complaints that TR 10176 was lagging behind updates to ISO 10646.</p>\n<p>Perhaps most enlightening is document <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3146.html\" rel=\"noreferrer\" title=\"WG21/N3146: Recommendations for extended identifier characters in C and C++ (2010)\">WG21/N3146</a>: &quot;Recommendations for extended identifier characters for C and C++.&quot;  It starts with a comment in 2010 to the standards body recommending restrictions on the initial characters of identifiers.  It mentions similar complaints about C referencing TR 10176, and makes suggestions about what characters should be allowed as initial characters of an identifier based on restrictions from <a href=\"http://www.unicode.org/reports/tr31/tr31-11.html#Alternative_Identifier_Syntax\" rel=\"noreferrer\" title=\"UAX#31: Unicode's Alternative Identifier Syntax\">Unicode's Identifier and Pattern Syntax</a> and <a href=\"http://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn\" rel=\"noreferrer\" title=\"XML's Common Syntactic Constructs\">XML's Common Syntactic Constructs</a>.  WG21/N3146 gives the proposed wording that later appeared in the C11 standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">ISO/IEC 9899:2011</a>.  There is a table at the end of the document that helps shed light on the character ranges selected.</p>\n<h2>Characters allowed and not allowed in C11</h2>\n<p>Below is a compiled list of ranges for <em>extended</em> identifier characters.  The <strong>boldface</strong> ranges are those given in C11 (<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">ISO/IEC 9899:2011 Annex D</a>).  Some comments are added about the <em>italicized</em> ranges <em>not listed in C11</em> (i.e. not allowed).  They are either marked in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3146.html\" rel=\"noreferrer\" title=\"WG21/N3146: Recommendations for extended identifier characters in C and C++ (2010)\">WG21/N3146</a> as disallowed by <a href=\"http://www.unicode.org/reports/tr31/tr31-11.html#Alternative_Identifier_Syntax\" rel=\"noreferrer\" title=\"UAX#31: Unicode's Alternative Identifier Syntax\">Unicode's UAX#31</a> or <a href=\"http://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn\" rel=\"noreferrer\" title=\"XML's Common Syntactic Constructs\">XML's Common Syntactic Constructs</a>, or prohibited by some other comment.</p>\n\n<p><strong>00A8, 00AA, 00AD, 00AF, 00B2-00B5, 00C0-00D6, 00D8-00F6, 00F8-00FF</strong>: (Various characters, such as feminine \u00aa and masculine \u00ba ordinal indicators, vowels with diacritics, numeric characters such as superscript numbers, fractions, etc.)</p>\n<p><em>(previous gaps)</em>: All disallowed by <a href=\"http://www.unicode.org/reports/tr31/tr31-11.html#Alternative_Identifier_Syntax\" rel=\"noreferrer\" title=\"UAX#31: Unicode's Alternative Identifier Syntax\">UAX31</a> and/or <a href=\"http://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn\" rel=\"noreferrer\" title=\"XML's Common Syntactic Constructs\">XML</a>.  (Generally punctuation type marks like \u00ab\u00bb, monetary symbols \u00a5\u00a3, mathematical operators \u00d7\u00f7, etc.)</p>\n<p><strong>0100-167F</strong>: (Latin, Greek, Cyrillic, Arabic, Thai, Ethiopic, etc.---many others)</p>\n<p><em>1680</em>: &quot;The Ogham block contains a script-specific space: \u1680&quot;</p>\n<p><strong>1681-180D</strong>: (Ogham, Tagalog, Mongolian, etc.)</p>\n<p><em>180E</em>: &quot;The Mongolian block contains a script-specific space&quot;</p>\n<p><strong>180F-1FFF</strong>: (More languages... phonetics, extended Latin &amp; Greek, etc.)</p>\n<p><em>2000</em>: starts the &quot;General Punctuation&quot; block, but some are allowed:</p>\n<p><strong>200B\u2212200D, 202A\u2212202E, 203F\u22122040, 2054, 2060\u2212206F</strong>: (selections from &quot;General Punctuation&quot; block)</p>\n<p><strong>2070\u2212218F</strong>: &quot;Superscripts and Subscripts, Currency Symbols, Combining Diacritical Marks for Symbols, Letterlike Symbols, Number Forms&quot;</p>\n<p><em>2190-245F</em>: &quot;Arrows, Mathematical Operators, Miscellaneous Technical, Control Pictures, Optical Character Recognition&quot;</p>\n<p><strong>2460-24FF</strong>: &quot;Enclosed Alphanumerics&quot;</p>\n<p><em>2500</em>: starts &quot;Box Drawing, Block Elements, Geometric Shapes&quot;, etc.</p>\n<p><strong>2776-2793</strong>: (some dingbats and circled dingbats)</p>\n<p><em>2794-2BFF</em>: (a different dingbat set, mathematical symbols, arrows, Braille patterns, etc.)</p>\n<p><strong>2C00-2DFF, 2E80-2FFF</strong>: &quot;Glagolitic, Latin Extended-C, Coptic, Georgian Supplement, Tifinagh, Ethiopic Extended, Cyrillic Extended-A&quot; (also CJK radical supplement)</p>\n<p><em>3000</em>: (start of &quot;CJK Symbols and Punctuation&quot;, some selections allowed)</p>\n<p><strong>3004-3007, 3021-302F, 3031-303F</strong>: (allowed &quot;CJK Symbols and Punctuation&quot;)</p>\n<p><strong>3040-D7FF</strong>: &quot;Hiragana, Katakana,&quot; more CJK ideograms, radicals, etc.</p>\n<p><em>D800-F8FF</em>: (This starts the <a href=\"http://unicode.org/charts/PDF/UD800.pdf\" rel=\"noreferrer\">High</a> and Low Surrogate Areas (number space needed for encodings), and <a href=\"http://unicode.org/charts/PDF/UE000.pdf\" rel=\"noreferrer\">Private Use</a>)</p>\n<p><strong>F900-FD3D, FD40-FDCF, FDF0-FE44, FE47-FFFD</strong>: selections from &quot;CJK Compatibility Ideographs,&quot; &quot;Arabic Presentation Forms,&quot; etc.\n<strong>10000\u22121FFFD, 20000\u22122FFFD, 30000\u22123FFFD, 40000\u22124FFFD, 50000\u22125FFFD,\n60000\u22126FFFD, 70000\u22127FFFD, 80000\u22128FFFD, 90000\u22129FFFD, A0000\u2212AFFFD,\nB0000\u2212BFFFD, C0000\u2212CFFFD, D0000\u2212DFFFD, E0000\u2212EFFFD</strong>: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3146.html\" rel=\"noreferrer\" title=\"WG21/N3146: Recommendations for extended identifier characters in C and C++ (2010)\">WG21/N3146</a> gives the rationale for these final ranges:</p>\n<blockquote>\n<p>The Supplementary Private Use Area extends from F0000 through 10FFFF; both <a href=\"http://www.unicode.org/reports/tr31/tr31-11.html#Alternative_Identifier_Syntax\" rel=\"noreferrer\" title=\"UAX#31: Unicode's Alternative Identifier Syntax\">[AltId]</a> and <a href=\"http://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn\" rel=\"noreferrer\" title=\"XML's Common Syntactic Constructs\">[XML2008]</a> disallow characters in that range.</p>\n<p>In addition, <a href=\"http://www.unicode.org/reports/tr31/tr31-11.html#Alternative_Identifier_Syntax\" rel=\"noreferrer\" title=\"UAX#31: Unicode's Alternative Identifier Syntax\">[AltId]</a> disallows, as non-characters, the last two code positions of each plane, i.e. every position of the form <i>P</i>FFFE or <i>P</i>FFFF, for any value of <i>P</i>.</p>\n</blockquote>\n<p>The &quot;Ranges of characters disallowed initially&quot; from <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">C11</a> Annex D.2 are <strong>0300\u2212036F, 1DC0\u22121DFF, 20D0\u221220FF, FE20\u2212FE2F</strong>.</p>\n<p>With this <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3146.html\" rel=\"noreferrer\" title=\"WG21/N3146: Recommendations for extended identifier characters in C and C++ (2010)\">WG21/N3146</a> placed next to the Annex D of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">C11 standard</a>, much can be inferred about how they line up.  For example, mathematical operators and punctuation seem to be not allowed.  I hope this sheds some light on &quot;why&quot; or &quot;how&quot; the allowed characters were chosen.</p>\n<hr />\n<h2>TLDR; version</h2>\n<ul>\n<li>Authoritative source for legal identifier characters is the C11 standard <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\" title=\"C11 standard, ISO/IEC 9899:2011\">ISO/IEC 9899:2011</a> (See Annex D).</li>\n<li>This list is based on a technical report, <a href=\"http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=37765\" rel=\"noreferrer\" title=\"ISO/IEC TR 10176: Guidelines for the preparation of programming language standards\">ISO/IEC TR 10176</a>, but with <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3146.html\" rel=\"noreferrer\" title=\"WG21/N3146: Recommendations for extended identifier characters in C and C++ (2010)\">modifications</a>.</li>\n</ul>\n"}], "owner": {"reputation": 14714, "user_id": 547214, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/50e7ed4eb2e7af000ea7d161748958f1?s=128&d=identicon&r=PG", "display_name": "Alex Gray", "link": "https://stackoverflow.com/users/547214/alex-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4020, "favorite_count": 2, "accepted_answer_id": 35258227, "answer_count": 4, "score": 25, "last_activity_date": 1454952018, "creation_date": 1450288840, "last_edit_date": 1495542805, "question_id": 34319000, "link": "https://stackoverflow.com/questions/34319000/what-constitutes-a-valid-c-identifier", "title": "What constitutes a &quot;valid&quot; C Identifier?", "body": "<p>At @Zaibis suggestion (and related to my own <em>answer</em> to <a href=\"https://stackoverflow.com/a/34315237/547214\">What are the valid characters for macro names?</a>, as well as <a href=\"https://stackoverflow.com/questions/12692067/and-other-unicode-characters-in-identifiers-not-allowed-by-g\">\ud83d\ude03 (and other unicode characters) in identifiers not allowed by g++</a>))... </p>\n\n<blockquote>\n  <p>clang allows a lot of \"crazy\" characters.. although I have struggled to find much rhyme or reason - as to why some are allowed (\ud83d\udd34 \u03df \u30c4 \u2318 \u2601 \u00bd), and others are not (\u25b6\ufe0e \u2200 \u2605 \u00a9). </p>\n</blockquote>\n\n<p>For example, the following all compile A-OK (<code>clang-700.1.76</code>)</p>\n\n<pre><code>#define \ud83d\udca9  ?:          // OK (Pile of poo)\n#define  \uffed  @end        // OK (HALFWIDTH BLACK SQUARE)\n#define \ud83c\udd7a  @interface  // OK (NEGATIVE SQUARED LATIN CAPITAL LETTER K)\n#define \uff30  @protocol   // OK (FULLWIDTH LATIN CAPITAL LETTER P)\n</code></pre>\n\n<p>yet the following all result in the same compiler error...</p>\n\n<blockquote>\n  <p><code>Macro name must be an identifier.</code></p>\n</blockquote>\n\n<pre><code>#define  \u260e   TEL\n#define \u274c    NO\n#define  \u21e7   UP\n#define  \u3013  ==\n#define  \ud83c\udf4e   APPLE\n</code></pre>\n\n<p><a href=\"http://llvm.org/releases/3.3/tools/clang/docs/ReleaseNotes.html#major-new-features\" rel=\"noreferrer\"><code>clang</code>'s docs refer to the issue</a>, stating only...</p>\n\n<blockquote>\n  <p>... support for extended identifiers in C99 and C++. This feature allows identifiers to contain certain Unicode characters, as specified by the active language standard; these characters can be written directly in the source file using the UTF-8 encoding, or referred to using universal character names (\\u00E0, \\U000000E0).</p>\n</blockquote>\n\n<p>So, I guess I'm asking.. what IS the \"active language standard\", and how can I find an authoritative source for what identifiers are legal.</p>\n\n<p>I created the <a href=\"http://git.io/v01Pv\" rel=\"noreferrer\">following code</a> just to see what <code>clang</code> would do with it.  Out of about 63488 possible identifiers tested, 23 issued warnings and 9506 generated errors.  That leaves almost 54,000 valid characters to use in identifiers.  Certainly enough, but who got cut? And why?</p>\n"}, {"tags": ["c++", "c", "windows", "cmake", "gstreamer"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1450335356, "post_id": 34318978, "comment_id": 56398208, "body": "Where is your call to <code>FindGStreamer.cmake</code>? With other words: Don&#39;t set GSTREAMER_INCLUDE_DIRS and GSTREAMER_LIBRARIES by hand, use CMake!"}, {"owner": {"reputation": 71, "user_id": 1829041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4d2bee09817ad4040031d1e4ba652c?s=128&d=identicon&r=PG", "display_name": "Cyrus4ever", "link": "https://stackoverflow.com/users/1829041/cyrus4ever"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1450428936, "post_id": 34318978, "comment_id": 56445074, "body": "I know FindGstreamer would be better, but the thing is that there is no one supporting Windows, so I need to find the solution by myself :)"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1829041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4d2bee09817ad4040031d1e4ba652c?s=128&d=identicon&r=PG", "display_name": "Cyrus4ever", "link": "https://stackoverflow.com/users/1829041/cyrus4ever"}, "is_accepted": false, "score": 2, "last_activity_date": 1450429051, "creation_date": 1450429051, "answer_id": 34351806, "question_id": 34318978, "link": "https://stackoverflow.com/questions/34318978/compiling-a-gstreamer-app-using-cmake-on-windows/34351806#34351806", "title": "Compiling a gstreamer app using cmake on Windows", "body": "<p>Ok, I found what the problem is.\nI only need to take *dll.a files, so the code is now:</p>\n\n<pre><code>file(\n        GLOB_RECURSE\n        gst_files\n        ${CMAKE_CURRENT_SOURCE_DIR}/deps/lib/*dll.a\n)\n</code></pre>\n\n<p>I suppose we can do it in a proper way, so if someone has a better idea, I would be interested.</p>\n"}], "owner": {"reputation": 71, "user_id": 1829041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4d2bee09817ad4040031d1e4ba652c?s=128&d=identicon&r=PG", "display_name": "Cyrus4ever", "link": "https://stackoverflow.com/users/1829041/cyrus4ever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2091, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450429051, "creation_date": 1450288779, "question_id": 34318978, "link": "https://stackoverflow.com/questions/34318978/compiling-a-gstreamer-app-using-cmake-on-windows", "title": "Compiling a gstreamer app using cmake on Windows", "body": "<p>I am trying to use the gstreamer library under windows, using cmake.</p>\n\n<p>Here is my simple test code:</p>\n\n<pre><code>#include &lt;gst/gst.h&gt;\n\nint main (void)\n{\n    gst_init (NULL, NULL);\n    return 0;\n}\n</code></pre>\n\n<p>I got the lib (\"gstreamer-1.0-devel-x86-1.6.1.msi\") from here: <a href=\"http://gstreamer.freedesktop.org/data/pkg/windows/1.6.1/\" rel=\"nofollow\">http://gstreamer.freedesktop.org/data/pkg/windows/1.6.1/</a></p>\n\n<p>and try to compile the program with the following CMakeList.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.12)\n\nproject(test_g)\n\nSET(CMAKE_CXX_WARNING_LEVEL 4)\nif (MSVC)\n        add_definitions(\"/W4\")\nelse()\n        add_definitions(\"-Wall -Wextra\")\nendif ()\n\ninclude(CheckCXXCompilerFlag)\nCHECK_CXX_COMPILER_FLAG(\"-std=c++11\" COMPILER_SUPPORTS_CXX11)\nCHECK_CXX_COMPILER_FLAG(\"-std=c++0x\" COMPILER_SUPPORTS_CXX0X)\nif(COMPILER_SUPPORTS_CXX11)\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nelseif(COMPILER_SUPPORTS_CXX0X)\n    set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++0x\")\nelse()\n        message(STATUS \"The compiler ${CMAKE_CXX_COMPILER} has no C++11 support. Please use a different C++ compiler.\")\nendif()\n\nfile(\n        GLOB_RECURSE\n        source_files\n        ./*\n)\n\nfile(\n        GLOB_RECURSE\n        gst_files\n        ${CMAKE_CURRENT_SOURCE_DIR}/deps/lib/*.a\n        ${CMAKE_CURRENT_SOURCE_DIR}/deps/lib/*.lib\n)\n\nadd_executable(\n        test_g\n        ${source_files}\n)\n\n  set(GSTREAMER_INCLUDE_DIRS \"./deps/include/gstreamer-1.0\" \"./deps/include/glib-2.0\" \"./deps/lib/glib-2.0/include\" \"./deps/lib/gstreamer-1.0/include\")\n  if (WIN32)\n   set(GSTREAMER_LIBRARIES ${gst_files})\n  else()\n    message(FATAL_ERROR \"Gstreamer not found\")\n  endif()\n\ninclude_directories(${GSTREAMER_INCLUDE_DIRS})\ntarget_link_libraries (test_g ${GSTREAMER_LIBRARIES})\n</code></pre>\n\n<p>I would like to avoid using pkgconfig because my goal is to make it easy to compile.</p>\n\n<p>Unfortunately, this does not work:</p>\n\n<pre><code>[ 33%] Linking CXX executable test_g.exe\n\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gst.o): In function `init_post':\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gst.c:719: undefined reference to `_imp__glib_micro_version'\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gst.c:719: undefined reference to `_imp__glib_minor_version'\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gst.c:719: undefined reference to `_imp__glib_major_version'\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gstinfo.o): In function `parse_debug_level':\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gstinfo.c:1771: undefined reference to `_imp__g_ascii_table'\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gstinfo.o): In function `gst_path_basename':\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gstinfo.c:467: undefined reference to `_imp__g_ascii_table'\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gstinfo.o): In function `gst_info_dump_mem_line':\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gstinfo.c:1931: undefined reference to `_imp__g_ascii_table'\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gststructure.o): In function `gst_structure_parse_simple_string':\nC:\\MinGW\\msys\\1.0\\home\\Jan\\cerbero\\sources\\windows_x86\\gstreamer-1.0-1.6\\gst/gststructure.c:2221: undefined reference to `_imp__g_ascii_table'\nC:/Users/toto/Documents/GitHub/test_gst/deps/lib/libgstreamer-1.0.a(libgstreamer_1.0_la-gststructure.o): In function `gst_structure_validate_name':\n... Many other errors ...\n</code></pre>\n\n<p>My questions are the following:</p>\n\n<ul>\n<li><p>Should I use both .lib and .a files?</p></li>\n<li><p>Why it does not compile? The file libglib-2.0.dll.a is in the lib directory, so I am not sure to understand what the issue is during the linkage...</p></li>\n</ul>\n\n<p>Thanks!</p>\n\n<hr>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1450287350, "post_id": 34318439, "comment_id": 56378681, "body": "Could be an output buffering issue.  Try changing <code>&quot;%d %d&quot;</code> to <code>&quot;%d %d\\n&quot;</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1450287392, "post_id": 34318439, "comment_id": 56378703, "body": "<a href=\"http://ideone.com/1DBh85\" rel=\"nofollow noreferrer\">I do get some output</a>. How are you compiling this code?"}, {"owner": {"reputation": 1232, "user_id": 948073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05cb19ad33c2a2919e936f60f4009d97?s=128&d=identicon&r=PG", "display_name": "Lori", "link": "https://stackoverflow.com/users/948073/lori"}, "edited": false, "score": 0, "creation_date": 1450287600, "post_id": 34318439, "comment_id": 56378814, "body": "Are you linking in <code>max_subarray_data.o</code> (compilation of <code>max_subarray_data.c</code>)?"}, {"owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1450289167, "post_id": 34318439, "comment_id": 56379742, "body": "@dasblinkenlight Yes you are right. But why am i not getting the output when I am using separate files ?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1450289253, "post_id": 34318439, "comment_id": 56379791, "body": "@FibonacciCoder I get output using separate files: <a href=\"http://pastie.org/10636553\" rel=\"nofollow noreferrer\">pastie.org/10636553</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450304307, "post_id": 34318439, "comment_id": 56388105, "body": "Use <code>ssize_t</code> instead of casting like this <code>int n=(int)(sizeof(price)&#47;sizeof(int))-1;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450287837, "post_id": 34318595, "comment_id": 56378955, "body": "I think you must point out that in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and most languages array indexes go from <code>0</code> to <code>N - 1</code>"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450288038, "post_id": 34318595, "comment_id": 56379067, "body": "@iharob, I think OP knews. the loop starts at 1 because he uses <code>price[i-1]</code>"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1450288395, "post_id": 34318595, "comment_id": 56379295, "body": "If you have modified the <code>for</code> loop in <code>main()</code> accordingly, I think that should work"}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 3, "last_activity_date": 1450287542, "creation_date": 1450287542, "answer_id": 34318595, "question_id": 34318439, "link": "https://stackoverflow.com/questions/34318439/not-getting-any-output/34318595#34318595", "title": "Not getting any output", "body": "<p>If it's not the missing <code>'\\n'</code> in <code>printf()</code> it may be because your array <code>change</code> is one element too small: as array size you use the same expression as for setting <code>n</code>, so <code>n-1</code> is the largest possible index. But then you loop from 1 to n and assign something to <code>change[n]</code>. That invokes Undefined Behaviour, so anything might happen.</p>\n"}], "owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 34318595, "answer_count": 1, "score": 1, "last_activity_date": 1489094465, "creation_date": 1450287099, "last_edit_date": 1450297695, "question_id": 34318439, "link": "https://stackoverflow.com/questions/34318439/not-getting-any-output", "title": "Not getting any output", "body": "<p>The content of my main.c file</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"max_subarray_data.h\"\n\nint main()\n{\n    init_change();\n    for(int i=0;i&lt;n;i++)\n    {\n        printf(\"%d %d\\n\",i,change[i]);\n    }\n}\n</code></pre>\n\n<p>The content of max_subarray_data.h</p>\n\n<pre><code>extern int price[];\nextern int change[];\nextern int n;\n\nvoid init_change();\n</code></pre>\n\n<p>The content of my max_subarray_data.c</p>\n\n<pre><code>int price[]={100,113,110,85,105,102,86,63,81,101,94,106,101,79,94,90,97};\nint n=(int)(sizeof(price)/sizeof(int))-1;\nint change[(int)(sizeof(price)/sizeof(int))-1];\n\nvoid init_change()\n{\n    for(int i=0;i&lt;n;i++)\n    {\n        change[i]=price[i+1]-price[i];\n    }\n}\n</code></pre>\n\n<p>Why am i getting no output ?</p>\n"}, {"tags": ["c", "multithreading", "pointers", "struct"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1450286967, "post_id": 34318383, "comment_id": 56378474, "body": "That depends on how/where you&#39;re using these structs.  More code would help."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1450287443, "post_id": 34318383, "comment_id": 56378728, "body": "Think about malloced memory..."}], "answers": [{"tags": [], "owner": {"reputation": 3361, "user_id": 5395288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pw0Jz.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5395288/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1450288838, "creation_date": 1450288838, "answer_id": 34318999, "question_id": 34318383, "link": "https://stackoverflow.com/questions/34318383/declaring-temporary-struct-to-pass-as-argument-struct-gets-written-over-how/34318999#34318999", "title": "Declaring temporary struct to pass as argument -- Struct gets written over. How do I declare the struct in a new memory location?", "body": "<p>If you want the data to have persistence beyond that iteration of your while loop whilst other iterations continue then you need to dynamically allocate, like this:</p>\n\n<pre><code>while(dirs[i] != NULL){\n    thread_arg * nargp = (thread_arg *) malloc(sizeof(thread_arg)); \n</code></pre>\n\n<p>You have a pointer now instead of a value, but that's probably appropriate to your use (i.e, you should be thinking of it as a pointer rather than a value probably).</p>\n\n<p>You need to free the data when you have finished with it of course. Where/how you do that depends on your use case - you mention you are passing the data to another function, so if that function uses it and there's no other use, then one solution is that function could free it (<code>free(nargp)</code>) before returning.</p>\n"}], "owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450288838, "creation_date": 1450286896, "question_id": 34318383, "link": "https://stackoverflow.com/questions/34318383/declaring-temporary-struct-to-pass-as-argument-struct-gets-written-over-how", "title": "Declaring temporary struct to pass as argument -- Struct gets written over. How do I declare the struct in a new memory location?", "body": "<p>I am trying to initialize a new struct during each iteration of this loop to pass into a function; the problem is that the same struct keeps being written over or reused (the memory address is the same).  How do I declare a new structure that won't be overwritten so that I can pass the pointer to another function?</p>\n\n<pre><code>while(dirs[i] != NULL){\n    thread_arg narg;\n</code></pre>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450288277, "post_id": 34318362, "comment_id": 56379215, "body": "Global scope vars are initialized to 0, ie. false.  If &#39;x&#39; had been declared inside main(), it would have been UB."}], "answers": [{"comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1450288683, "post_id": 34318387, "comment_id": 56379451, "body": "<code>x</code> is a global variable, static storage. It&#39;s guaranteed to be initialized to 0"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450289025, "post_id": 34318387, "comment_id": 56379654, "body": "@EliasVanOotegem, my bad. I missed that."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450289060, "post_id": 34318387, "comment_id": 56379673, "body": "Honest mistake :) I&#39;ve included the relevant sections of the C standard in my answer meanwhile"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 4, "last_activity_date": 1450289109, "last_edit_date": 1450289109, "creation_date": 1450286908, "answer_id": 34318387, "question_id": 34318362, "link": "https://stackoverflow.com/questions/34318362/why-is-output-of-the-following-program-how-r-u/34318387#34318387", "title": "Why is output of the following program how r u?", "body": "<blockquote>\n  <p><strong>6.9.2 External object definitions</strong></p>\n  \n  <p><strong>Semantics</strong></p>\n  \n  <p><strong>1</strong> If the declaration of an identifier for an object has file scope and an initializer, the\n  declaration is an external definition for the identifier.</p>\n  \n  <p><strong>2</strong> A declaration of an identifier for an object that has file scope without an initializer, and\n  without a storage-class specifier or with the storage-class specifier static, constitutes a\n  tentative definition. If a translation unit contains one or more tentative definitions for an\n  identifier, and the translation unit contains no external definition for that identifier, then\n  the behavior is exactly as if the translation unit contains a file scope declaration of that\n  identifier, with the composite type as of the end of the translation unit, with an initializer\n  equal to 0.</p>\n</blockquote>\n\n<hr>\n\n<p>So, Global variables are never left uninitialized, they are always initialized to <code>0</code>. Hence the output <code>how r u</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450289138, "post_id": 34318525, "comment_id": 56379724, "body": "I&#39;m sorry, but this answer is just all shades of wrong: global variables <i>are</i> initialized, and a stack variable does not contain values used <i>&quot;by another program&quot;</i> until you initialize it"}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "edited": false, "score": 0, "creation_date": 1450289982, "post_id": 34318525, "comment_id": 56380224, "body": "It&#39;s not garbage. Uninitialized global variables go into the BSS segment. These are initialized to zero."}], "tags": [], "owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "is_accepted": false, "score": 1, "last_activity_date": 1450290223, "last_edit_date": 1450290223, "creation_date": 1450287356, "answer_id": 34318525, "question_id": 34318362, "link": "https://stackoverflow.com/questions/34318362/why-is-output-of-the-following-program-how-r-u/34318525#34318525", "title": "Why is output of the following program how r u?", "body": "<p>//global\nint x; </p>\n\n<p>You have declared 'x' as global variable ... Therefore it's default value is 0 .</p>\n"}, {"tags": [], "owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "is_accepted": false, "score": 3, "last_activity_date": 1450288998, "creation_date": 1450288998, "answer_id": 34319049, "question_id": 34318362, "link": "https://stackoverflow.com/questions/34318362/why-is-output-of-the-following-program-how-r-u/34319049#34319049", "title": "Why is output of the following program how r u?", "body": "<p>According to the C standard, your code does not trigger undefined behaviour:</p>\n\n<blockquote>\n  <p>If an object that has static or thread storage duration is not initialized explicitly, then:<br>\n  - if it has pointer type, it is initialized to a null pointer;<br>\n  - if it has arithmetic type, it is initialized to (positive or unsigned) zero;</p>\n</blockquote>\n\n<p>This is taken from the C11 standard, but C89, and C99 both defined this behaviour, too:</p>\n\n<blockquote>\n  <p>If an object that has static storage duration is not initialized explicitly, it is initialized implicitly as if every member that has arithmetic type were assigned 0 and every member that has pointer type were assigned a null pointer constant.</p>\n</blockquote>\n\n<p>Because you're declaring <code>x</code> as a global variable, it has static storage duration, and therefore <code>x</code> is guaranteed to be initialized to <code>0</code> (it being an int, it obviously has an arithmetic type).</p>\n\n<p>Your main function, therefore reads like this:</p>\n\n<pre><code>int main(void)//use int main(void), not int main() \n{\n    if(0)//x is 0, 0 is false\n        printf(\"hi\");\n    else\n        printf(\"how r u \\n\");//because if (x) is false, this is executed\n    return 0;\n}\n</code></pre>\n\n<p>That's why the output of your program will be <em>\"How r u\"</em>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5687762, "user_type": "registered", "profile_image": "https://graph.facebook.com/918653178213932/picture?type=large", "display_name": "Ashish Pawade", "link": "https://stackoverflow.com/users/5687762/ashish-pawade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1450290223, "creation_date": 1450286846, "last_edit_date": 1450286973, "question_id": 34318362, "link": "https://stackoverflow.com/questions/34318362/why-is-output-of-the-following-program-how-r-u", "title": "Why is output of the following program how r u?", "body": "<p>The following code is the basic implementation of the <code>if - else</code> conditional statements - </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint x;\nint main() \n{\n    if(x)\n        printf(\"hi\");\n    else\n        printf(\"how r u \\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "operators", "bit-manipulation"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450288216, "post_id": 34318204, "comment_id": 56379177, "body": "Add a space and it will compile <code>x = + +2&lt;&lt;4%3*3</code> --&gt; <code>16</code>, but then it may not be the value hoped for."}, {"owner": {"reputation": 101, "user_id": 5431682, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/wJfGp.png?s=128&g=1", "display_name": "CcoderBeginner", "link": "https://stackoverflow.com/users/5431682/ccoderbeginner"}, "edited": false, "score": 0, "creation_date": 1450288609, "post_id": 34318204, "comment_id": 56379412, "body": "this is a question im trying to solve i didnt create it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450299236, "post_id": 34318204, "comment_id": 56385560, "body": "OK, then rewrite it or ignore it, it&#39;s rubbish code.  Don&#39;t waste your own, or anyone else&#39;s, time on it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450299370, "post_id": 34318204, "comment_id": 56385635, "body": "Oh.. an exercise.  OK, then you should sort it out.  This is a site for professional and enthusiast programmers. A professional would get fired for going near such code, an enthusiast would be too ashamed to approach it."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5431682, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/wJfGp.png?s=128&g=1", "display_name": "CcoderBeginner", "link": "https://stackoverflow.com/users/5431682/ccoderbeginner"}, "edited": false, "score": 0, "creation_date": 1450287304, "post_id": 34318337, "comment_id": 56378655, "body": "so how do i go about solving this then?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 101, "user_id": 5431682, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/wJfGp.png?s=128&g=1", "display_name": "CcoderBeginner", "link": "https://stackoverflow.com/users/5431682/ccoderbeginner"}, "edited": false, "score": 0, "creation_date": 1450287553, "post_id": 34318337, "comment_id": 56378781, "body": "@CcoderBeginner, you can divide that line into multiple, simpler, steps. It&#39;s not clear from your code what you intend to assign to <code>x</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1450286782, "creation_date": 1450286782, "answer_id": 34318337, "question_id": 34318204, "link": "https://stackoverflow.com/questions/34318204/bit-manipulation-procedure-precedence-doesnt-seem-right/34318337#34318337", "title": "bit manipulation procedure precedence doesn&#39;t seem right", "body": "<blockquote>\n  <p>then i wondered doesn't ++2 mean increase x by 2?</p>\n</blockquote>\n\n<p>No. <code>++2</code> is illegal. The pre-increment can be used only with an expression that evaluates to an lvalue.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1450288717, "creation_date": 1450288717, "answer_id": 34318958, "question_id": 34318204, "link": "https://stackoverflow.com/questions/34318204/bit-manipulation-procedure-precedence-doesnt-seem-right/34318958#34318958", "title": "bit manipulation procedure precedence doesn&#39;t seem right", "body": "<blockquote>\n  <p>but then i wondered doesn't ++2 mean increase x by 2?</p>\n</blockquote>\n\n<p>No; it attempts to increment the literal <code>2</code> (which is not allowed).  <code>x += 2</code> increases <code>x</code> by 2.  </p>\n\n<p>Perhaps you (or the person you got the code from) meant to write</p>\n\n<pre><code>x += 2 &lt;&lt; 4 % 3 * 3; // whitespace is your friend, use it\n</code></pre>\n\n<p>in which case, you're adding 16 to <code>x</code>:</p>\n\n<pre><code>x += ( 2 &lt;&lt; ( ( 4 % 3 ) * 3 ) )\nx += ( 2 &lt;&lt; ( 1 * 3 ) )\nx += ( 2 &lt;&lt; 3 )\nx += 16\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5431682, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/wJfGp.png?s=128&g=1", "display_name": "CcoderBeginner", "link": "https://stackoverflow.com/users/5431682/ccoderbeginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1450288717, "creation_date": 1450286397, "last_edit_date": 1450288566, "question_id": 34318204, "link": "https://stackoverflow.com/questions/34318204/bit-manipulation-procedure-precedence-doesnt-seem-right", "title": "bit manipulation procedure precedence doesn&#39;t seem right", "body": "<pre><code>x = ++2&lt;&lt;4%3*3 \n</code></pre>\n\n<p>So i assumed that by precedence :</p>\n\n<ol>\n<li>List item</li>\n<li>++2</li>\n<li>4%3</li>\n<li>what is get in (2) *3.</li>\n</ol>\n\n<p>but then i wondered doesn't ++2 mean increase x by 2? so the answer would be in terms of x :S ?</p>\n\n<p>PLEASE NOTE: this is not a code im trying to compile its, a question i have had problems in at a written coding excercise where im supposed to calculate x.</p>\n"}, {"tags": ["c", "linux", "ubuntu", "gnome-terminal"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450292689, "post_id": 34318189, "comment_id": 56381840, "body": "You&#39;d need to think in terms of <code>popen()</code> so that you can communicate with the program.  The <code>system()</code> function runs the Gnome terminal, but doesn&#39;t return until the terminal exits (so your program can&#39;t interact with the terminal \u2014 even if it had a way of doing so), unless the Gnome terminal always forks and the parent exits immediately.  Using <code>popen()</code> may still not be the solution; you may have to do more work (pseudo-tty, perhaps) so that you can write to the terminal from your program."}], "answers": [{"comments": [{"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1450287899, "post_id": 34318605, "comment_id": 56378989, "body": "I will update the output during the run of the program, so I can&#39;t use a static file"}, {"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1450289081, "post_id": 34318605, "comment_id": 56379689, "body": "thanks for your advice, I use the terminal the program is started in already for the main output. The second terminal is for additional information :)"}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1450289104, "last_edit_date": 1450289104, "creation_date": 1450287565, "answer_id": 34318605, "question_id": 34318189, "link": "https://stackoverflow.com/questions/34318189/c-open-second-custom-sized-terminal-and-use-it-for-output/34318605#34318605", "title": "C: open second custom sized terminal and use it for output", "body": "<p>The easiest thing would probably be to write the output to a file, say /tmp/tmp96888 (tip: <code>mkstemp</code>) and then do something like</p>\n\n<pre><code>system(\"gnome-terminal --geometry=40x14 --command 'less /tmp/tmp96888'\");\n</code></pre>\n\n<p>Or, to update continuously from the file:</p>\n\n<pre><code>system(\"gnome-terminal --geometry=40x14 --command 'tail -f /tmp/tmp96888'\");\n</code></pre>\n\n<p>But if you can, I think the best way is to open a new terminal and run the program itself in it, and just print the output. It's only if you actually need to do things in the original window that you have to bother with a separate output window.</p>\n"}], "owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450289104, "creation_date": 1450286360, "last_edit_date": 1450286795, "question_id": 34318189, "link": "https://stackoverflow.com/questions/34318189/c-open-second-custom-sized-terminal-and-use-it-for-output", "title": "C: open second custom sized terminal and use it for output", "body": "<p>I am writing a program in C that is started simply by the terminal. Now I want to make the program itself open another terminal with a custom size and write its output in there.</p>\n\n<p>I found the command </p>\n\n<pre><code>system(\"gnome-terminal\");\n</code></pre>\n\n<p>which opens another terminal, but I can't find a function that lets me write into this second terminal. I am using Ubuntu.</p>\n\n<p>If you have any idea, that would be great</p>\n"}, {"tags": ["c", "debugging", "if-statement", "optimization"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1450286469, "post_id": 34318176, "comment_id": 56378160, "body": "What is the <code>switch</code> statement&#39;s control expression (including the types of any variables involved).  Are you sure that case is what&#39;s being selected?"}, {"owner": {"reputation": 31, "user_id": 4496060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9795f8f7accdc2a39b9693682324e30a?s=128&d=identicon&r=PG&f=1", "display_name": "LordCreepity", "link": "https://stackoverflow.com/users/4496060/lordcreepity"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1450286582, "post_id": 34318176, "comment_id": 56378232, "body": "@MichaelBurr Here is the entire file: <a href=\"https://github.com/LordCreepity/SDM/blob/master/main.c\" rel=\"nofollow noreferrer\">main.c</a>"}, {"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450286636, "post_id": 34318176, "comment_id": 56378267, "body": "acc is of type char, it will never be greater than 128, my guess is that your compiler removed this if as it will never be executed."}, {"owner": {"reputation": 31, "user_id": 4496060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9795f8f7accdc2a39b9693682324e30a?s=128&d=identicon&r=PG&f=1", "display_name": "LordCreepity", "link": "https://stackoverflow.com/users/4496060/lordcreepity"}, "reply_to_user": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450286644, "post_id": 34318176, "comment_id": 56378272, "body": "@RyanFitzpatrick A <code>char</code>. This instruction is supposed to jump only if <code>acc</code> is negative."}, {"owner": {"reputation": 31, "user_id": 4496060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9795f8f7accdc2a39b9693682324e30a?s=128&d=identicon&r=PG&f=1", "display_name": "LordCreepity", "link": "https://stackoverflow.com/users/4496060/lordcreepity"}, "reply_to_user": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450286734, "post_id": 34318176, "comment_id": 56378329, "body": "@RyanFitzpatrick It is not an <code>unsigned char</code>, it is a regular <code>char</code>. Its maximum should be 255."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 2, "creation_date": 1450286763, "post_id": 34318176, "comment_id": 56378350, "body": "You may want to use <code>unsigned char</code> instead of <code>char</code> in your program if you want a range of 0..255. The range of a <code>char</code> will be -128..127 if your compiler treats it as signed."}, {"owner": {"reputation": 533, "user_id": 5613000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21885cdf3eab3a31152c12315051c78?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Fitzpatrick", "link": "https://stackoverflow.com/users/5613000/ryan-fitzpatrick"}, "edited": false, "score": 0, "creation_date": 1450286898, "post_id": 34318176, "comment_id": 56378433, "body": "@LordCreepity unsigned char is always in the range 0-255, char may be signed meaning its range is -128 to 127"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1450286932, "post_id": 34318176, "comment_id": 56378455, "body": "@LordCreepity: on many platforms (most that I have dealt with) <code>char</code> is a signed type.  So you are likely running into the problem that Ryan and Mark have commented about."}, {"owner": {"reputation": 31, "user_id": 4496060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9795f8f7accdc2a39b9693682324e30a?s=128&d=identicon&r=PG&f=1", "display_name": "LordCreepity", "link": "https://stackoverflow.com/users/4496060/lordcreepity"}, "edited": false, "score": 0, "creation_date": 1450287077, "post_id": 34318176, "comment_id": 56378532, "body": "Oh, wait... I seems to have gotten signed and unsigned confused. Heh. Sorry about that."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450374166, "post_id": 34318176, "comment_id": 56423332, "body": "regarding this line: <code>memory = calloc(1, 4096);</code> when calling <code>calloc()</code> (or malloc or realloc) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450374227, "post_id": 34318176, "comment_id": 56423365, "body": "regarding this line: <code>memoryImage = open(argv[1], 0);</code>  do not access any command line parameter beyond argv[0] with out first checking argc to assure that parameter was actually entered by the user."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450374326, "post_id": 34318176, "comment_id": 56423422, "body": "regarding this line: <code>read(memoryImage, memory, 4096);</code>  always check the returned value to assure the operation was successful"}], "owner": {"reputation": 31, "user_id": 4496060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9795f8f7accdc2a39b9693682324e30a?s=128&d=identicon&r=PG&f=1", "display_name": "LordCreepity", "link": "https://stackoverflow.com/users/4496060/lordcreepity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "closed_date": 1450391819, "answer_count": 0, "score": 3, "last_activity_date": 1450287944, "creation_date": 1450286339, "last_edit_date": 1450287944, "question_id": 34318176, "link": "https://stackoverflow.com/questions/34318176/if-statement-never-executes", "closed_reason": "Not suitable for this site", "title": "If statement never executes", "body": "<p>I have <a href=\"https://github.com/LordCreepity/SDM\" rel=\"nofollow\">this</a> simulator located in the file <code>main.c</code>. Using the assembler located in <code>asm.c</code>, I can generate a program image that <em>should</em> be an infinite loop:</p>\n\n<pre><code>stoa 0xFF\njin 0x0\n</code></pre>\n\n<p>However, when I examine the simulator under a debugger, it passes over the if-statement completely; the test is never executed and the code goes straight to <code>break;</code>. The if-statement in question:</p>\n\n<pre><code>case '\\x80':\n    if (acc &gt;= 128) {\n        lIByte = arg;\n        rIByte = arg + 1;\n        jumped = 1;\n    }\n    break;\n</code></pre>\n\n<p>Maybe this is an optimization issue?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 1, "creation_date": 1450286286, "post_id": 34318070, "comment_id": 56378056, "body": "<code>#include &lt;string.h&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1450286358, "creation_date": 1450286358, "answer_id": 34318188, "question_id": 34318070, "link": "https://stackoverflow.com/questions/34318070/getting-the-error-message-assignment-makes-pointer-from-integer-without-a-cast/34318188#34318188", "title": "Getting the error message &quot;assignment makes pointer from integer without a cast&quot; while trying to write a parsing program", "body": "<p>Since you did not <code>#include</code> the header file in which <code>strtok</code> is declared, the compiler assumes that the return type of the function is <code>int</code>. Hence, the warning.</p>\n\n<p>Add</p>\n\n<pre><code>#include &lt;string.h&gt;\n</code></pre>\n\n<p>to fix the problem.</p>\n"}], "owner": {"reputation": 55, "user_id": 5687702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc5c57a6d2bdeda8440b0a2ef0545e7?s=128&d=identicon&r=PG&f=1", "display_name": "J Hall", "link": "https://stackoverflow.com/users/5687702/j-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 34318188, "answer_count": 1, "score": 0, "last_activity_date": 1450286358, "creation_date": 1450285964, "question_id": 34318070, "link": "https://stackoverflow.com/questions/34318070/getting-the-error-message-assignment-makes-pointer-from-integer-without-a-cast", "title": "Getting the error message &quot;assignment makes pointer from integer without a cast&quot; while trying to write a parsing program", "body": "<p>I'm trying to write a parsing program that will read the file /proc/stat and store its various tokens in arrays. This is the progress I have made so far. my problem comes with the line </p>\n\n<pre><code>s = strtok(str, \" \");\n</code></pre>\n\n<p>With this line I get the error message:\n    ass2.c:62:15: warning: assignment makes pointer from integer without a cast [enabled by default]\n             s = strtok(string, \" \");</p>\n\n<p>I'm not sure how to solve this issue. I'm just about a complete beginner with C so not familiar with the feedback terms and so I'm struggling to rectify this issue. Below I have pasted the entire programs code so far.</p>\n\n<pre><code>//standard input/output file to help with io operations\n#include&lt;stdio.h&gt;\n//standard library files to help with exit and other standard functions\n#include&lt;stdlib.h&gt;\n//header file for usleep function\n#include &lt;unistd.h&gt;\n\nint main()\n{\n//FILE pointer will need to be declared initially, in this example the name     is fp\nFILE *fp;\n//A character pointer that will store each line within the file; you will need to parse this line to extract useful information\nchar *str = NULL;\n//size_t defined within C is a unsigned integer; you may need this for getline(..) function from stdio.h to allocate buffer dynamically\nsize_t len = 0;\n//ssize_t is used to represent the sizes of blocks that can be read or written in a single operation through getline(..). It is similar to size_t, but must be a signed type.\nssize_t read;\nint cpu_line1[5];\nint cpu_line2[5];\nint cpu_line3[5];\nint cpu_line4[5];\nint cpu_line5[5];\nint page_line[3];\nint swap_line[3];\nint intr_line[2];\nint ctxt_line[2];\nint btime_line[2];\n\n\n//a variable declared to keep track of the number of times we read back the file\nunsigned int sample_count = 0;\n\n//opening the file in read mode; this file must be closed after you are done through fclose(..); note that explicit location of the file to ensure file can be found\nfp = fopen(\"/proc/stat\", \"r\");\n\n//checking if the file opening was successful; if not we do not want to proceed further and exit with failure code right away\nif(fp == NULL)\n{\n    exit(EXIT_FAILURE);\n}\nint i = 0;\nchar **string = NULL; //declaration of string\nstring = (char**)malloc(10*sizeof(char*)); //assign space for 10 pointers to array\nfor (i=0; i&lt;10; i++) //allocate 50 bytes to each string in the array\n{\n    string[i] = (char*)malloc(50*sizeof(char));\n}\n\n\n//a loop that will read one line in the file at a time; str will read the line; len will store the length of the file\nwhile(sample_count &lt; 1)\n{\n    printf(\"\\e[1;1H\\e[2J\"); //this line will make sure you have cleared the previous screen using C's powerful format specifiers\n    printf(\"----------------------------------------------------------------\\n\");//used for presentation\n    printf(\"Sample: %u\\n\", sample_count); //showing the sample count\n\n    while ((read = getline(&amp;str, &amp;len, fp)) != -1)\n    {\n        printf(\"Retrieved line: \\n%sof length: %zu, allocated buffer: %u :\\n\", str, read, (unsigned int) len);\n        //You will then need to extract the useful information, including the name and the statistics\n        char *s = NULL;\n        s = strtok(str, \" \");\n        sprintf(string[i], s);\n        printf(\"Test: %s\", string[0]);\n\n    }\n\n    if (i=0)\n        {\n            cpu_line1[0] = atoi(strtok(NULL, \" \"));\n            cpu_line1[1] = atoi(strtok(NULL, \" \"));\n            cpu_line1[2] = atoi(strtok(NULL, \" \"));\n        }\n\n    printf(\"----------------------------------------------------------------\\n\"); //used for presentation\n    usleep(500000);//this will ensure time delay\n    rewind(fp);//rewind the file pointer to start reading from the beginning\n    sample_count++;//update the sample count\n}\n//once you are done, you should free the pointers to make your program memory efficient\nfree(str);\n//once you are done, you should also close all file pointers to make your program memory efficient\nfclose(fp);\n\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1450285341, "post_id": 34317808, "comment_id": 56377476, "body": "See: <a href=\"http://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">Why are these constructs (using ++) undefined behavior?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1450285268, "creation_date": 1450285268, "answer_id": 34317855, "question_id": 34317808, "link": "https://stackoverflow.com/questions/34317808/why-is-the-output-0-when-using-equality-inside-printf/34317855#34317855", "title": "Why is the output 0 when using equality inside printf?", "body": "<p>You're modifying <code>var</code> inside of the function call.  Parameters to a function can be evaluated in any order.  In this particular example, <code>var = 100</code> is being evaluated before <code>var==10</code>, but there's no guarantee the behavior will be the same if you use a different compiler.</p>\n\n<p>Because you're attempting to read and modify a variable in the same expression without a sequence point to separate them, you're invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5500934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29c9ef2edbe2a7919f2b11e281c19601?s=128&d=identicon&r=PG&f=1", "display_name": "user5500934", "link": "https://stackoverflow.com/users/5500934/user5500934"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1450343967, "accepted_answer_id": 34317855, "answer_count": 1, "score": -4, "last_activity_date": 1450285268, "creation_date": 1450285163, "last_edit_date": 1450285233, "question_id": 34317808, "link": "https://stackoverflow.com/questions/34317808/why-is-the-output-0-when-using-equality-inside-printf", "closed_reason": "Duplicate", "title": "Why is the output 0 when using equality inside printf?", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int var = 10 ; \n    printf ( \"\\n%d %d\",var==10, var = 100) ;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 100\n</code></pre>\n\n<p>Inside the printf statement, <code>var==10</code> evaluates to true but then I'm getting the output as <code>0</code>. Why does this happen? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1450285770, "post_id": 34317739, "comment_id": 56377730, "body": "Does the code provided also fail?  If not, you have not provided enough data for anyone to tell you why it fails.  See <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 2939, "user_id": 4320738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de47f691b009d906bf13e2e6c0fb1451?s=128&d=identicon&r=PG&f=1", "display_name": "Munir", "link": "https://stackoverflow.com/users/4320738/munir"}, "edited": false, "score": 1, "creation_date": 1450285879, "post_id": 34317739, "comment_id": 56377793, "body": "Cannot recreate the seg fault with the sample code you have provided. Are you sure it is <code>strtok_r</code> that&#39;s causing the seg fault and not something else."}, {"owner": {"reputation": 3167, "user_id": 502144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a14b0afdcd244efec7579d4e8bc64b01?s=128&d=identicon&r=PG", "display_name": "fdermishin", "link": "https://stackoverflow.com/users/502144/fdermishin"}, "edited": false, "score": 0, "creation_date": 1450288026, "post_id": 34317739, "comment_id": 56379059, "body": "Why do you think the program execution will result in something meaningful? You can view generated binary code to see what happens in your case."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1450285828, "post_id": 34318014, "comment_id": 56377764, "body": "I don&#39;t think the question as currently posed provides an MCVE"}, {"owner": {"reputation": 3272, "user_id": 901417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/836ld.png?s=128&g=1", "display_name": "Mr_Pouet", "link": "https://stackoverflow.com/users/901417/mr-pouet"}, "edited": false, "score": 0, "creation_date": 1450286225, "post_id": 34318014, "comment_id": 56378019, "body": "Mind explaining the difference between _s and _r?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "reply_to_user": {"reputation": 3272, "user_id": 901417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/836ld.png?s=128&g=1", "display_name": "Mr_Pouet", "link": "https://stackoverflow.com/users/901417/mr-pouet"}, "edited": false, "score": 1, "creation_date": 1450286321, "post_id": 34318014, "comment_id": 56378074, "body": "@Mr_Pouet: its the same functions <code>_s</code> for Windows OS, <code>_r</code> for POSIX, only naming difference."}], "tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": false, "score": 1, "last_activity_date": 1471604658, "last_edit_date": 1471604658, "creation_date": 1450285777, "answer_id": 34318014, "question_id": 34317739, "link": "https://stackoverflow.com/questions/34317739/strtok-r-segmentation-fault/34318014#34318014", "title": "Strtok_r segmentation fault", "body": "<p>Works perfectly for me (MS Visual C++). Only difference is usage <code>strtok_s</code> instead of <code>strtok_r</code> considering it is Windows instead of POSIX.</p>\n\n<p>Here I have added some modifications to your code.</p>\n\n<pre><code>#include &lt;string.h&gt;   //strlen\n#include &lt;stdlib.h&gt;\n\nvoid handler(char * input){\n    char * end_str;\n    char * token =strtok_s(input, \"\\n\", &amp;end_str); // tokenize input string\n    char * endd_str;\n    char * token2 = NULL;\n\n    while(token!=0){\n\n        printf(\"%s\\n\",token);\n\n        token2 = strtok_s(token, \" \", &amp;endd_str); // retokenize first token\n        while(token2 !=0){\n            printf(\"%s\\n\",token2); // replace printf call to avoid null string output and first token miss\n            token2 =strtok_s(NULL,\" \",&amp;endd_str);}\n\n        token = end_str; // \"important\" restore char pointer to point the last untokenized input character\n\n        token=strtok_s(token,\"\\n\",&amp;end_str); // the same as printf issue is for all loops body\n    }\n\n}\n\nint main(int argc , char *argv[])\n{\n    char test[100]=\"set a,10.5\\nset b,11.5\\nget b\\nadd e,a,b\\nsub g,a,b\";\n    handler(test);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1450294397, "last_edit_date": 1450294397, "creation_date": 1450293627, "answer_id": 34320334, "question_id": 34317739, "link": "https://stackoverflow.com/questions/34317739/strtok-r-segmentation-fault/34320334#34320334", "title": "Strtok_r segmentation fault", "body": "<p>You're interleaving <code>strtok_r</code> calls working off of the same string.  On the second iteration of the inner <code>while</code> loop, before the call to <code>token2 =strtok_r(NULL,\" \",&amp;endd_str);</code>, <code>endd_str</code> points to an empty string because the string it was matching against reached the end, so <code>strtok_r</code> returns <code>NULL</code>.  Passing that <code>NULL</code> to <code>printf</code> causes the segfault.</p>\n\n<p>After each parse of the <code>\"\\n\"</code> delimiter, do a fresh start of looping through the <code>\" \"</code> delimeter.  Don't do the outer one again until you've exhausted the inner one.  Also, move your <code>strtok_r</code> calls to the end of the loop so the <code>while</code> condition checks them properly.</p>\n\n<p>You need to do the following:</p>\n\n<pre><code>void handler(char * input){\n    char * end_str;\n    char * token =strtok_r(input, \"\\n\", &amp;end_str);\n    while(token!=0){\n        printf(\"%s\\n\",token);\n        char * endd_str;\n        char * token2= strtok_r(token, \" \", &amp;endd_str);\n        while(token2 !=0){\n            printf(\"%s\\n\",token2);\n            token2 =strtok_r(NULL,\" \",&amp;endd_str);    // call at end of loop\n        }\n        token=strtok_r(NULL,\"\\n\",&amp;end_str);          // call at end of loop\n    }\n}\n</code></pre>\n\n<p>Ouput:</p>\n\n<pre><code>set a,10.5\nset\na,10.5\nset b,11.5\nset\nb,11.5\nget b\nget\nb\nadd e,a,b\nadd\ne,a,b\nsub g,a,b\nsub\ng,a,b\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 5398216, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55265a3cd838ba6f092b0f1c63297742?s=128&d=identicon&r=PG&f=1", "display_name": "dcousina", "link": "https://stackoverflow.com/users/5398216/dcousina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1471604658, "creation_date": 1450284975, "last_edit_date": 1450292871, "question_id": 34317739, "link": "https://stackoverflow.com/questions/34317739/strtok-r-segmentation-fault", "title": "Strtok_r segmentation fault", "body": "<p>I know this has been asked before, but previous answers have said you can't modify a string literal, and unless I am misunderstanding I am not. I can sucesfully use strtok_r until the very last line of input, then I get a seg fault. Why would this happen? Heres a simplified version of my code. From printing I know it processes through get b, but then there is a seg fault? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;   //strlen\n#include &lt;stdlib.h&gt;\n\n    void handler(char * input){\n    char * end_str;\n    char * token =strtok_r(input, \"\\n\", &amp;end_str);\n    char * endd_str;\n    char * token2= strtok_r(token, \" \", &amp;endd_str);\n    while(token!=0){\n        printf(\"%s\\n\",token);\n        token=strtok_r(NULL,\"\\n\",&amp;end_str);\n        while(token2 !=0){\n            token2 =strtok_r(NULL,\" \",&amp;endd_str);\n            printf(\"%s\\n\",token2);}\n    }\n\n}\n\nint main(int argc , char *argv[])\n{\n    char test[100]=\"set a,10.5\\nset b,11.5\\nget b\\nadd e,a,b\\nsub g,a,b\";\n    handler(test);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "serialization", "thrift"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4445238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zYSQf.jpg?s=128&g=1", "display_name": "Alex Rewa", "link": "https://stackoverflow.com/users/4445238/alex-rewa"}, "edited": false, "score": 0, "creation_date": 1450293364, "post_id": 34318286, "comment_id": 56382211, "body": "Thank you! Will try tomorrow with the latest source"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user473305"}, "is_accepted": true, "score": 1, "last_activity_date": 1450286625, "creation_date": 1450286625, "answer_id": 34318286, "question_id": 34317358, "link": "https://stackoverflow.com/questions/34317358/thrift-is-it-possible-to-do-only-serialization-with-the-c-glib-thrift-library/34318286#34318286", "title": "Thrift: Is it possible to do only serialization with the C (GLib) Thrift library?", "body": "<p>This was <a href=\"https://issues.apache.org/jira/browse/THRIFT-3455\" rel=\"nofollow\">a bug in the C (GLib) implementation</a> that was reported and fixed just recently, so you'll need to fetch and build <a href=\"http://thrift.apache.org/developers#source-control\" rel=\"nofollow\">the latest Thrift source</a> from git for the example to work correctly.</p>\n\n<p>If you're curious, you can see <a href=\"http://mail-archives.apache.org/mod_mbox/thrift-user/201511.mbox/%3C1448492604.6423%40zygmund.net%3E\" rel=\"nofollow\">the discussion on the user mailing list</a> that led to the bug being identified.</p>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 4445238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zYSQf.jpg?s=128&g=1", "display_name": "Alex Rewa", "link": "https://stackoverflow.com/users/4445238/alex-rewa"}, "is_accepted": false, "score": 1, "last_activity_date": 1450446528, "creation_date": 1450446528, "answer_id": 34357173, "question_id": 34317358, "link": "https://stackoverflow.com/questions/34317358/thrift-is-it-possible-to-do-only-serialization-with-the-c-glib-thrift-library/34357173#34357173", "title": "Thrift: Is it possible to do only serialization with the C (GLib) Thrift library?", "body": "<p>After some research and with the help of community I came up with serializing solution that works not only with master branch, but with 0.9.3 version as well. Actually we don't need variable write_len at all:</p>\n\n<pre><code>ThriftMemoryBuffer* tbuffer = g_object_new(THRIFT_TYPE_MEMORY_BUFFER,\n    \"buf_size\", 2048, NULL);\nThriftTransport *transport = NULL;\nThriftProtocol* protocol = NULL;\nGError* error = NULL;\n\nif (tbuffer) {\n    transport = THRIFT_TRANSPORT(tbuffer);\n    thrift_transport_open(transport, &amp;error);\n\n    protocol =\n    THRIFT_PROTOCOL(\n        g_object_new(THRIFT_TYPE_BINARY_PROTOCOL, \"transport\", transport, NULL));\n\n    if (protocol) {\n        ExceptionData* exception_data = g_object_new(TYPE_EXCEPTION_DATA, \"ex_sign\",\n            exception_signature, \"cl_sign\", class_signature, \"caught\",\n            catch_method != NULL,\n            NULL);\n\n        if (exception_data) {\n            ThriftStructClass* cls = THRIFT_STRUCT_CLASS(EXCEPTION_DATA_GET_CLASS(exception_data));\n            cls-&gt;write(exception_data, protocol, &amp;error);\n\n            if(tbuffer-&gt;buf != NULL) {\n\n                printf(\"Buffer length %i bytes\\n\", tbuffer-&gt;buf-&gt;len);\n\n                send_kafka_message((const void *)tbuffer-&gt;buf-&gt;data, tbuffer-&gt;buf-&gt;len);\n            }\n\n            g_object_unref(exception_data);\n        }\n\n        g_object_unref(protocol);\n    }\n\n    if (thrift_transport_is_open(transport)) {\n        thrift_transport_close(transport, &amp;error);\n    }\n\n    g_object_unref(tbuffer);\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4445238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zYSQf.jpg?s=128&g=1", "display_name": "Alex Rewa", "link": "https://stackoverflow.com/users/4445238/alex-rewa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 34318286, "answer_count": 2, "score": 2, "last_activity_date": 1450447880, "creation_date": 1450283835, "last_edit_date": 1450447880, "question_id": 34317358, "link": "https://stackoverflow.com/questions/34317358/thrift-is-it-possible-to-do-only-serialization-with-the-c-glib-thrift-library", "title": "Thrift: Is it possible to do only serialization with the C (GLib) Thrift library?", "body": "<p>I am trying to use <a href=\"https://github.com/apache/thrift/blob/master/lib/c_glib/test/testserialization.c\" rel=\"nofollow\">this</a> example but it always return write_len = 10 bytes.</p>\n\n<pre><code>ThriftTransport* transport = THRIFT_TRANSPORT(\n    g_object_new(THRIFT_TYPE_MEMORY_BUFFER, \"buf_size\", 8096, NULL));\nThriftProtocol* protocol = THRIFT_PROTOCOL(\n    g_object_new(THRIFT_TYPE_BINARY_PROTOCOL, \"transport\", transport,\n        NULL));\n\nException* src = g_object_new(TYPE_EXCEPTION, NULL);\nExceptionClass* cls = EXCEPTION_GET_CLASS(src);\ng_object_set(src,\n    \"ex_sign\", exception_signature,\n    \"cl_sign\", class_signature,\n    \"caught\", catch_method != NULL,\n    NULL);\n\nint write_len = THRIFT_STRUCT_CLASS(cls)-&gt;write(THRIFT_STRUCT(src), protocol, &amp;error);\n</code></pre>\n"}, {"tags": ["c", "data-structures", "struct", "sizeof", "unions"], "answers": [{"comments": [{"owner": {"reputation": 3075, "user_id": 450780, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4bc1d82a93b1016737726859d886c86b?s=128&d=identicon&r=PG", "display_name": "linsek", "link": "https://stackoverflow.com/users/450780/linsek"}, "edited": false, "score": 0, "creation_date": 1450283092, "post_id": 34317085, "comment_id": 56376016, "body": "Aaaah, I knew it was something simple. Thanks."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1450283093, "last_edit_date": 1450283093, "creation_date": 1450283005, "answer_id": 34317085, "question_id": 34317046, "link": "https://stackoverflow.com/questions/34317046/how-to-get-the-size-of-a-struct-within-a-union-in-c/34317085#34317085", "title": "How to get the size of a struct within a union in C?", "body": "<p>Like this:</p>\n\n<pre><code>sizeof(struct req_);\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>int main()\n{\n    printf(\"sizeof msg_t=%zd\\n\",sizeof(msg_t));\n    printf(\"sizeof struct req_=%zd\\n\",sizeof(struct req_));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sizeof msg_t=5\nsizeof struct req_=2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1450283829, "creation_date": 1450283829, "answer_id": 34317354, "question_id": 34317046, "link": "https://stackoverflow.com/questions/34317046/how-to-get-the-size-of-a-struct-within-a-union-in-c/34317354#34317354", "title": "How to get the size of a struct within a union in C?", "body": "<p><code>req_</code> is a structure tag. You need to either put <code>struct</code> with it   </p>\n\n<pre><code>size_t size = sizeof(struct req_);\n</code></pre>\n\n<p>or use the struct variable declared  </p>\n\n<pre><code>size_t size = sizeof(msg_t.req_.req);\n</code></pre>\n"}], "owner": {"reputation": 3075, "user_id": 450780, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4bc1d82a93b1016737726859d886c86b?s=128&d=identicon&r=PG", "display_name": "linsek", "link": "https://stackoverflow.com/users/450780/linsek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 34317085, "answer_count": 2, "score": -1, "last_activity_date": 1450283829, "creation_date": 1450282880, "question_id": 34317046, "link": "https://stackoverflow.com/questions/34317046/how-to-get-the-size-of-a-struct-within-a-union-in-c", "title": "How to get the size of a struct within a union in C?", "body": "<p>How do you get the size of a struct within a union in C?</p>\n\n<p>Given the following definition:</p>\n\n<pre><code>typedef union\n{\n    struct req_\n    {\n        uint8_t cmd1;\n        uint8_t cmd2;\n    } req;\n\n    struct rsp_\n    {\n        uint8_t cmd_result;\n        uint8_t status_1;\n        uint8_t status_2;\n        uint8_t status_3;\n        uint8_t status_4;\n    } rsp;\n} msg_t;\n</code></pre>\n\n<p><code>sizeof(msg_t)</code> would provide the maximum size of the union, which in this case, would be 5 as <code>rsp_</code> is greater than <code>req_</code>.</p>\n\n<p>How do you get <code>sizeof(req_)</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1450281845, "post_id": 34316620, "comment_id": 56375103, "body": "heh? you&#39;re writing instruction outside a function? How?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1450281873, "post_id": 34316620, "comment_id": 56375132, "body": "Avoid code in header files! Stick to declaration of types, macro definitions and such ..."}, {"owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "edited": false, "score": 0, "creation_date": 1450282009, "post_id": 34316620, "comment_id": 56375249, "body": "i want to calculate the change array here itself rather than calling it from the main.c file ."}, {"owner": {"reputation": 593, "user_id": 1955945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qt3vW.png?s=128&g=1", "display_name": "rlam12", "link": "https://stackoverflow.com/users/1955945/rlam12"}, "edited": false, "score": 0, "creation_date": 1450282274, "post_id": 34316620, "comment_id": 56375450, "body": "That needs to be inside a function, there is no way around it...."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1450282297, "post_id": 34316620, "comment_id": 56375464, "body": "Where is &quot;here&quot;? It is floating in a vacuum."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "edited": false, "score": 0, "creation_date": 1450284429, "post_id": 34316879, "comment_id": 56376942, "body": "Thanks ! This helped."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "edited": false, "score": 0, "creation_date": 1450284488, "post_id": 34316879, "comment_id": 56376985, "body": "@FibonacciCoder Glad I could help.  Feel free to <a href=\"http://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "edited": false, "score": 0, "creation_date": 1450284740, "post_id": 34316879, "comment_id": 56377132, "body": "The error has gone but i am still not getting the desired output.Will i have to ask it in a differnt question ?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "edited": false, "score": 0, "creation_date": 1450284891, "post_id": 34316879, "comment_id": 56377217, "body": "@FibonacciCoder Yes, post it as a new question.  Be sure to post enough code so that others can reproduce your issue."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1450288173, "post_id": 34316879, "comment_id": 56379160, "body": "Well, it is allowed (and sensible) to have <code>static inline</code>  functions <i>defined</i> in header files."}, {"owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1450356203, "post_id": 34316879, "comment_id": 56410966, "body": "@BasileStarynkevitch How ?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1450288763, "last_edit_date": 1450288763, "creation_date": 1450282402, "answer_id": 34316879, "question_id": 34316620, "link": "https://stackoverflow.com/questions/34316620/i-am-looking-for-a-way-to-initialize-an-array-in-c-header-file/34316879#34316879", "title": "I am looking for a way to initialize an array in c header file", "body": "<p>You can't put code outside of a function, and you shouldn't put a function definition inside of a header file.</p>\n\n<p>max_subarray_data.h should contain the following:</p>\n\n<pre><code>extern int price[];\nextern int change[];\n\nvoid init_change();\n</code></pre>\n\n<p>Then create max_subarray_data.c which contains:</p>\n\n<pre><code>int price[]={100,113,110,85,105,102,86,63,81,101,94,106,101,79,94,90,97};\nint change[(sizeof(price)/sizeof(int))-1];\n\nvoid init_change() \n{\n    int n=(int)(sizeof(price)/sizeof(int))-1;\n    for(int i=1;i&lt;=n;i++) {\n         change[i-1]=price[i]-price[i-1];\n    }\n}\n</code></pre>\n\n<p>Then in your <code>main</code>, you need to call <code>init_change()</code> to initialize <code>change</code>.</p>\n\n<p>EDIT:</p>\n\n<p>Also, note that the loop now assigns to <code>change[i-1]</code> instead of <code>change[i]</code>, otherwise you'll be writing one element past the end of the array, and the first element will be uninitialized.</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 1, "last_activity_date": 1450288123, "creation_date": 1450288123, "answer_id": 34318798, "question_id": 34316620, "link": "https://stackoverflow.com/questions/34316620/i-am-looking-for-a-way-to-initialize-an-array-in-c-header-file/34318798#34318798", "title": "I am looking for a way to initialize an array in c header file", "body": "<p>the best practice is to follow what @dbush did post. but if you insist, you can do macros initialization like this :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\n#define PRICE_0         100\n#define PRICE_1         113\n#define PRICE_2         110\n#define PRICE_3         85\n#define PRICE_4         105\n#define PRICE_5         102\n#define PRICE_6         86\n#define PRICE_7         63\n#define PRICE_8         81\n#define PRICE_9         101\n#define PRICE_10        94\n#define PRICE_11        106\n#define PRICE_12        101\n#define PRICE_13        79\n#define PRICE_14        94\n#define PRICE_15        90\n#define PRICE_16        97\n\nint price[]={\n    PRICE_0,  // 0\n    PRICE_1,  // 1\n    PRICE_2,  // 2\n    PRICE_3,   // 3\n    PRICE_4,  // 4\n    PRICE_5,  // 5\n    PRICE_6,   // 6\n    PRICE_7,   // 7\n    PRICE_8,   // 8\n    PRICE_9,  // 9\n    PRICE_10,   // 10\n    PRICE_11,  // 11\n    PRICE_12,  // 12\n    PRICE_13,   // 13\n    PRICE_14,   // 14\n    PRICE_15,   // 15\n    PRICE_16};  // 16\n\n\n#define PRICE_DIF(a,b)  (PRICE_ ## a - PRICE_ ## b)\nint change[]={\n    0,              // &lt;-- what about this? :(\n    PRICE_DIF(1,0),\n    PRICE_DIF(2,1),\n    PRICE_DIF(3,2),\n    PRICE_DIF(4,3),\n    PRICE_DIF(5,4),\n    PRICE_DIF(6,5),\n    PRICE_DIF(7,6),\n    PRICE_DIF(8,7),\n    PRICE_DIF(9,8),\n    PRICE_DIF(10,9),\n    PRICE_DIF(11,10),\n    PRICE_DIF(12,11),\n    PRICE_DIF(13,12),\n    PRICE_DIF(14,13),\n    PRICE_DIF(15,14),\n    PRICE_DIF(16,15),\n\n};\n\n\n\nint main(void){\n    for(int k=0;k&lt;=17;k++)\n         printf(\"%d\\n\",change[k]);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5660186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/P9vsB.jpg?s=128&g=1", "display_name": "FibonacciCoder", "link": "https://stackoverflow.com/users/5660186/fibonaccicoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 34316879, "answer_count": 2, "score": -2, "last_activity_date": 1450288763, "creation_date": 1450281675, "question_id": 34316620, "link": "https://stackoverflow.com/questions/34316620/i-am-looking-for-a-way-to-initialize-an-array-in-c-header-file", "title": "I am looking for a way to initialize an array in c header file", "body": "<p>These are the contents of my max_subarray_data.h   </p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n\n    int price[]={100,113,110,85,105,102,86,63,81,101,94,106,101,79,94,90,97};\n    int n=(int)(sizeof(price)/sizeof(int))-1;\n    int change[]={};\n    for(int k=1;k&lt;=n;k++)  **//here it is giving error-expected identifier or '('** \n         change[i]=price[i]-price[i-1];\n</code></pre>\n\n<p>I am looking for a way to resolve this !</p>\n"}, {"tags": ["c", "compiler-errors", "printf"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1450281013, "post_id": 34316336, "comment_id": 56374440, "body": "&quot;as far as I can tell going by tutorials, it should be right.&quot; Do throw away such useless tutorials!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450281064, "post_id": 34316336, "comment_id": 56374477, "body": "At least show the error..Update: anyway I see one at least: missing semicolon in <code>print_test</code>"}, {"owner": {"reputation": 430, "user_id": 1725233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581d84feea8626ba8f91143f7107d150?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Daniluk", "link": "https://stackoverflow.com/users/1725233/%c5%81ukasz-daniluk"}, "edited": false, "score": 0, "creation_date": 1450281109, "post_id": 34316336, "comment_id": 56374511, "body": "You are missing &quot;format&quot; parameter for <code>printf</code>. If you want to print two floating point numbers you would use <code>printf(&quot;%f %f&quot;, x, y);</code> instead of <code>printf(x,y)</code>. Format parameter tells what the latter parameters are in order to print them properly. Link to reference: <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/printf</a>"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1450281540, "post_id": 34316336, "comment_id": 56374896, "body": "That&#39;s not how <code>printf</code> works..."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1451934466, "post_id": 34316336, "comment_id": 56941622, "body": "Please explain how it is off topic.  Even before the edits, although bad, I thought the question was on topic (for the most part anyway, maybe a little less emphasis on the math aspect)."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452020215, "post_id": 34316336, "comment_id": 56983852, "body": "I reworked my question to make it more relevant and understandable (I think).  Please review when you can."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452021836, "post_id": 34316336, "comment_id": 56984804, "body": "Oh.  Wait lol.  I see now why this question is bad.  Thing is though, typos weren&#39;t the full reason, it was also due to improper useage of printf (missing format parameter).  That wouldn&#39;t apply to that reason for being bad."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452022177, "post_id": 34316336, "comment_id": 56985003, "body": "Ok, cut it down to the part that I though was giving a problem.  Usually people get mad at me for not putting enough information about the code, not when I put too much."}, {"owner": {"reputation": 25448, "user_id": 563532, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2773fec98b1630ec087b575482dc08a?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/563532/rob"}, "edited": false, "score": 0, "creation_date": 1452032987, "post_id": 34316336, "comment_id": 56990360, "body": "@cluemein People don&#39;t like too much code because it <i>usually</i> is an indicator of little-to-no research (essentially copy &amp; pasting the program to SO as soon as you get an error). Being able to boil the question down to a few lines of code that can be quickly reproduced by users not only makes it easier for people to test their solution and provide a good answer, it also shows that you&#39;ve spent time trying to debug the problem and have found the smallest amount of code to reproduce it. Your current version the post is much better than it was before, I&#39;ve voted to reopen."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "reply_to_user": {"reputation": 25448, "user_id": 563532, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2773fec98b1630ec087b575482dc08a?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/563532/rob"}, "edited": false, "score": 0, "creation_date": 1452099487, "post_id": 34316336, "comment_id": 57022226, "body": "@Rob thanks for the info.  Also will now be using a new system of reviewing my prospective questions before I post them."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452099944, "post_id": 34316336, "comment_id": 57022555, "body": "Apparently though, there is something still wrong with my question as it got downvoted again after you upvoted or voted to reopen it again."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1453844850, "post_id": 34316336, "comment_id": 57775944, "body": "Should I change the text of the question to deempathize the math part?"}], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1450282358, "post_id": 34316449, "comment_id": 56375511, "body": "Still gives me the same error. It also says invalid initializer at ConvertSpchToCart 3rd to last line."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1450283046, "post_id": 34316449, "comment_id": 56375976, "body": "Nevermind, the problem is that for some reason itt isn&#39;t registering the change of the function name."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452017795, "post_id": 34316449, "comment_id": 56982533, "body": "This solution worked once I made sure all the old data from previous compiles was cleared from memory."}, {"owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "edited": false, "score": 0, "creation_date": 1452099984, "post_id": 34316449, "comment_id": 57022589, "body": "Don&#39;t know why that was an issue to begin with though (the memory issue)."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 1, "last_activity_date": 1452032811, "last_edit_date": 1452032811, "creation_date": 1450281243, "answer_id": 34316449, "question_id": 34316336, "link": "https://stackoverflow.com/questions/34316336/how-do-i-use-printf-to-output-values-of-spherical-coordinates-converted-to-carte/34316449#34316449", "title": "How do I use printf to output values of spherical coordinates converted to cartesian coordinates in C?", "body": "<ul>\n<li>Add a format string to <code>printf()</code></li>\n<li>Add a semicolon after <code>printf()</code></li>\n<li>Declare <code>cart</code> and delete unused <code>cartesian</code> in <code>ConvertSpclToCart()</code></li>\n<li>Change <code>ConvertSphclToCart</code> to <code>ConvertSpclToCart</code> in <code>main()</code></li>\n<li>Change <code>int main()</code> to <code>int main(void)</code></li>\n</ul>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define PI 3.14159\n\n\nstruct threedSphericalData\n{\n    float azimuth;\n    float inclination;\n    float range;\n};\n\nstruct threedCartesianData\n{\n    float x;\n    float y;\n    float z;\n};\n\nvoid print_test (struct threedCartesianData cartesian)\n{\n    printf(\"%f %f\\n\", cartesian.x, cartesian.y);\n}\n\nstruct threedCartesianData ConvertSpclToCart(struct threedSphericalData spherical)\n{\n    struct threedCartesianData cart;\n    cart.x = spherical.range * cos(spherical.inclination * PI/180)*cos(-(spherical.azimuth)*PI/180);\n    cart.y = spherical.range * cos(spherical.inclination * PI/180)*sin(-(spherical.azimuth)*PI/180);\n    return cart;\n\n}\n\n\nint main (void)\n{\n    struct threedSphericalData spherical;\n    spherical.azimuth = 35;\n    spherical.inclination = 10;\n    spherical.range = 300;\n    struct threedCartesianData cartesian = ConvertSpclToCart(spherical);\n    print_test(cartesian);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 880, "user_id": 2901466, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/638f735abf47b48fa3cd7b43c1d72341?s=128&d=identicon&r=PG&f=1", "display_name": "cluemein", "link": "https://stackoverflow.com/users/2901466/cluemein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 34316449, "answer_count": 1, "score": -4, "last_activity_date": 1452539616, "creation_date": 1450280943, "last_edit_date": 1452535699, "question_id": 34316336, "link": "https://stackoverflow.com/questions/34316336/how-do-i-use-printf-to-output-values-of-spherical-coordinates-converted-to-carte", "title": "How do I use printf to output values of spherical coordinates converted to cartesian coordinates in C?", "body": "<p>I am writing a program in C where part of the program is supposed to convert spherical coordinates into cartesian and then display them on the screen, but I always get a compilation error for this part.  I'm not sure if my syntax is wrong,   or if I am missing something.  Any suggestions? I think the problem is with how I am using printf, such as using the wrong parameters or wrong number of parameters.  The error is:  </p>\n\n<pre><code>Compilation error   time: 0 memory: 0 signal:0prog.c: In function 'print_test':\nprog.c:21:9: error: incompatible type for argument 1 of 'printf'\n  printf(cartesian.x);\n         ^\n</code></pre>\n\n<p>Here is the part of the code that I think I am doing wrong based on the error message (I think I added some stuff to the code, but the effect should remain the same for the most part):</p>\n\n<pre><code>void print_test (struct threedCartesianData cartesian)\n{\n    printf(cartesian.x, cartesian.y)\n}\n</code></pre>\n\n<p>I am pretty sure I am using printf wrong, but not sure how exactly.</p>\n"}, {"tags": ["c", "regex", "posix"], "comments": [{"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1450279870, "post_id": 34315842, "comment_id": 56373555, "body": "Do you need to match all digit sequences as standalone strings but <code>55341</code>,  <code>55312</code> and <code>55227</code>? Or just 3-digit sequences, not 2- or 4+-digit sequences? Check <a href=\"https://regex101.com/r/oH5fH8/1\" rel=\"nofollow noreferrer\"><code>(^|[^[:digit:]])[[:digit:]]{3}($|[^[:digit:]])</code></a> (with <code>REG_EXTENDED</code> flag as I think you are using <code>&lt;regex.h&gt;</code>) to match only 3-digit sequences."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1450280555, "post_id": 34315842, "comment_id": 56374059, "body": "If you plan to match all digit sequences but the 3 mentioned, I&#39;d rather use a regex with a capturing group: <a href=\"https://regex101.com/r/oH5fH8/2\" rel=\"nofollow noreferrer\"><code>^55341|55312|55227|([0-9]{1,})$</code></a> and check the captured texts. If the capture group is empty, a wrong &quot;number&quot; was matched."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 5, "creation_date": 1450280977, "post_id": 34315842, "comment_id": 56374412, "body": "if you keep silent, it is difficult to help you."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1450282284, "post_id": 34315842, "comment_id": 56375454, "body": "@CharlesDuffy I have read stribizhev&#39;s comment and deleted mine. Did not know that."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1450290670, "post_id": 34315842, "comment_id": 56380666, "body": "By the way -- there are two different POSIX regex languages, BRE and ERE; in the future, instead of just saying &quot;POSIX regex&quot;, you should consider specifying which one explicitly."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1450290718, "post_id": 34315842, "comment_id": 56380699, "body": "(if you&#39;re using the <code>REG_EXTENDED</code> flag to <code>regcomp()</code>, then your language is ERE; otherwise, it&#39;s BRE)."}, {"owner": {"reputation": 43, "user_id": 5687321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000840589255/picture?type=large", "display_name": "Luiz Fernando Softov", "link": "https://stackoverflow.com/users/5687321/luiz-fernando-softov"}, "edited": false, "score": 0, "creation_date": 1450296559, "post_id": 34315842, "comment_id": 56383977, "body": "I need to match all digits in 551.. 552.. and 553.. Like 55112 55113 55114 55333 55222 But if the number was  55341 55312 55227  Then the regex need to fail.  Sorry for the delay, i was working, and don&#39;t thing that the reply was so fast here"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1450374593, "post_id": 34315842, "comment_id": 56423581, "body": "If you are using the answer provided by @Ziffusion, rather than editing the question to note this, click the checkbox next to that answer to flag it accepted."}], "answers": [{"comments": [{"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1450281454, "post_id": 34316503, "comment_id": 56374821, "body": "<i>Lookahed is not supported by all language</i> - exactly this is the case here. It does not even support <code>\\d</code>, only <code>[[:digit:]]</code>."}, {"owner": {"reputation": 43, "user_id": 5687321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000840589255/picture?type=large", "display_name": "Luiz Fernando Softov", "link": "https://stackoverflow.com/users/5687321/luiz-fernando-softov"}, "edited": false, "score": 0, "creation_date": 1450297031, "post_id": 34316503, "comment_id": 56384218, "body": "Like i said before, i&#39;m using C in Unix (FreeBSD) This regex was invalid for me, thanks for the help"}], "tags": [], "owner": {"reputation": 82, "user_id": 5655157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/604687b6099c46d6ff23fd5279b663ed?s=128&d=identicon&r=PG&f=1", "display_name": "Kaspars Primaks", "link": "https://stackoverflow.com/users/5655157/kaspars-primaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1450281379, "creation_date": 1450281379, "answer_id": 34316503, "question_id": 34315842, "link": "https://stackoverflow.com/questions/34315842/posix-ere-extended-regex-excluding-a-limited-blacklist-from-a-regex/34316503#34316503", "title": "POSIX ERE (extended regex) -- excluding a limited blacklist from a regex", "body": "<p>Use non consuming regex to find 5 digit numbers that start with 55[1,2,3] and then lookahed to check of number isn't one of blacklisted.</p>\n\n<pre><code>^(?=55[123]\\d{2})((?!55(341|312|227))\\d){5}$\n</code></pre>\n\n<p>P.S. Lookahed is not supported by all language</p>\n"}, {"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450291144, "post_id": 34316823, "comment_id": 56380952, "body": "@stribizhev: lol, yes of course. (but it&#39;s possible to write a code to do it)."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450293321, "post_id": 34316823, "comment_id": 56382186, "body": "I ask because the <a href=\"http://utilitymill.com/edit/Regex_For_Range/\" rel=\"nofollow noreferrer\">UtilityMill</a> page is now inaccessible, but was public for a long time. I have just found <a href=\"http://code.activestate.com/recipes/534137-generate-a-regular-expression-to-match-an-arbitrar/\" rel=\"nofollow noreferrer\">this Python code</a>, might be useful."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450293502, "post_id": 34316823, "comment_id": 56382285, "body": "@stribizhev: I didn&#39;t know this page."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450293599, "post_id": 34316823, "comment_id": 56382331, "body": "@stribizhev: note that the python code doesn&#39;t factorize branches and doesn&#39;t sort branches from the more probable to the less."}, {"owner": {"reputation": 481661, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1450293736, "post_id": 34316823, "comment_id": 56382418, "body": "If you know of any other sources, please share. BTW, there are links to other solutions in the comments (<a href=\"http://subversion.assembla.com/svn/numrangeregex/trunk/numrangeregex.py\" rel=\"nofollow noreferrer\">one more buggy version</a>)."}, {"owner": {"reputation": 43, "user_id": 5687321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000840589255/picture?type=large", "display_name": "Luiz Fernando Softov", "link": "https://stackoverflow.com/users/5687321/luiz-fernando-softov"}, "edited": false, "score": 0, "creation_date": 1450296709, "post_id": 34316823, "comment_id": 56384044, "body": "I already have a field in my system that was a regex match, its like a route mark, so if the number was X, then the route is used, if the number isn&#39;t the route isn&#39;t used. Then, because of this, i need to match all numbers in 551.., but if the number was 55155 don&#39;t match, something like that.  The user can be wan&#39;t something like match all number 551.., but not 55155, 55166 and 55167"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 2, "last_activity_date": 1450282238, "creation_date": 1450282238, "answer_id": 34316823, "question_id": 34315842, "link": "https://stackoverflow.com/questions/34315842/posix-ere-extended-regex-excluding-a-limited-blacklist-from-a-regex/34316823#34316823", "title": "POSIX ERE (extended regex) -- excluding a limited blacklist from a regex", "body": "<p>The only way with POSIX regex is the hard way (you must list all possible cases):</p>\n\n<pre><code>^55(1[0-9][0-9]|2([013-9][0-9]|2[0-689])|3([0235-9][0-9]|1[013-9]|4[02-9]))$\n</code></pre>\n\n<p><em>(or use <code>^55[132][0-9][0-9]$</code> and check forbidden numbers with a simple if)</em></p>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 4892253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZrMZEj2JfQU/AAAAAAAAAAI/AAAAAAAADzM/kb6HWF8eRpE/photo.jpg?sz=128", "display_name": "Giuseppe Ricupero", "link": "https://stackoverflow.com/users/4892253/giuseppe-ricupero"}, "is_accepted": false, "score": 1, "last_activity_date": 1450282652, "creation_date": 1450282652, "answer_id": 34316967, "question_id": 34315842, "link": "https://stackoverflow.com/questions/34315842/posix-ere-extended-regex-excluding-a-limited-blacklist-from-a-regex/34316967#34316967", "title": "POSIX ERE (extended regex) -- excluding a limited blacklist from a regex", "body": "<p>Use a 2 steps approach instead of trying to solve with a single (posix-compatible) regex. </p>\n\n<ol>\n<li><p>Filter out everything that matches your black list:</p>\n\n<p><code>^(55341|55312|55227)$ # you can easily add new values</code></p></li>\n<li><p>Use a modified version of your regex to approve the remaining cases:</p>\n\n<p><code>^55[1-3][0-9]{2}$</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "is_accepted": true, "score": 2, "last_activity_date": 1450300831, "creation_date": 1450300831, "answer_id": 34322312, "question_id": 34315842, "link": "https://stackoverflow.com/questions/34315842/posix-ere-extended-regex-excluding-a-limited-blacklist-from-a-regex/34322312#34322312", "title": "POSIX ERE (extended regex) -- excluding a limited blacklist from a regex", "body": "<p>It's easier to do this using a logical expression of two regexes.</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;regex.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    regex_t r0, r1;\n    regmatch_t rm[10];\n    int s0, s1;\n\n    s0 = regcomp(&amp;r0, \"^55[123]..$\", REG_EXTENDED|REG_ICASE);\n    s0 = regcomp(&amp;r1, \"^(55341)|(55312)|(55227)$\", REG_EXTENDED|REG_ICASE);\n\n    s0 = regexec(&amp;r0, \"55188\", 10, rm, 0);\n    s1 = regexec(&amp;r1, \"55188\", 10, rm, 0);\n    printf(\"===== %d %d match=%d\\n\", s0, s1, s0 == 0 &amp;&amp; s1 != 0);\n\n    s0 = regexec(&amp;r0, \"55341\", 10, rm, 0);\n    s1 = regexec(&amp;r1, \"55341\", 10, rm, 0);\n    printf(\"===== %d %d match=%d\\n\", s0, s1, s0 == 0 &amp;&amp; s1 != 0);\n}\n</code></pre>\n\n<p>You have a match when one regex matches and the other doesn't.</p>\n\n<pre><code>s0 == 0 &amp;&amp; s1 != 0\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5687321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000840589255/picture?type=large", "display_name": "Luiz Fernando Softov", "link": "https://stackoverflow.com/users/5687321/luiz-fernando-softov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 34322312, "answer_count": 4, "score": 3, "last_activity_date": 1450374926, "creation_date": 1450279544, "last_edit_date": 1450374926, "question_id": 34315842, "link": "https://stackoverflow.com/questions/34315842/posix-ere-extended-regex-excluding-a-limited-blacklist-from-a-regex", "title": "POSIX ERE (extended regex) -- excluding a limited blacklist from a regex", "body": "<p>I'm trying to do a regex using posix to match some numbers of 5 digits:</p>\n\n<pre><code>551..\n552..\n553..\n\n^(55[123]..)$\n</code></pre>\n\n<p>But i need to exclude the next numbers:</p>\n\n<pre><code>55341 55312 55227\n</code></pre>\n\n<p>I'm trying to figure out how to create a regex that match some numbers and exclude another using posix (because my program is in C).</p>\n\n<hr>\n\n<p>I'm currently compiling the regex with <code>REG_EXTENDED</code> and <code>REG_ICASE</code> flags:</p>\n\n<pre><code>status  = regcomp(&amp;brb_regex-&gt;reg, regex_str, REG_EXTENDED|REG_ICASE);\n</code></pre>\n\n<p>...and executing it as follows:</p>\n\n<pre><code>status  = regexec(&amp;brb_regex-&gt;reg, cmp_str, 10, brb_regex-&gt;match, 0);\n</code></pre>\n"}, {"tags": ["python", "c", "ipc"], "comments": [{"owner": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "edited": false, "score": 1, "creation_date": 1450278740, "post_id": 34315470, "comment_id": 56372760, "body": "It&#39;s unclear (to me at least) what you specifically want to do.  I don&#39;t think the code you posted is relevant (or is it)?  Are you trying to just call some C code from Python, that passes back an forth the data shown in the C struct?"}, {"owner": {"reputation": 63, "user_id": 5687228, "user_type": "registered", "profile_image": "https://graph.facebook.com/995947113776689/picture?type=large", "display_name": "PaddyOsmond", "link": "https://stackoverflow.com/users/5687228/paddyosmond"}, "reply_to_user": {"reputation": 1941, "user_id": 5186820, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3054407a607bcfc6f7203280afd0aceb?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5186820/brian"}, "edited": false, "score": 0, "creation_date": 1450279297, "post_id": 34315470, "comment_id": 56373123, "body": "Thank you Brian, I have edited the question to give it more focus"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1450279446, "post_id": 34315470, "comment_id": 56373244, "body": "If possible, I would serialize the data to a string and pass it as argument to the c-program and take the exit code as the return value. This is of course not possible, if the amount of data passed or the return value can be too big."}, {"owner": {"reputation": 14673, "user_id": 296460, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FGDo8.jpg?s=128&g=1", "display_name": "shuttle87", "link": "https://stackoverflow.com/users/296460/shuttle87"}, "edited": false, "score": 0, "creation_date": 1450280126, "post_id": 34315470, "comment_id": 56373728, "body": "The approach I used in a very similar situation was to use shared memory (with mmap). The data to be passed to the python script was put in the shared memory then the python process was called which then did it&#39;s processing and put the results back into the shared memory. I wrote a <a href=\"https://github.com/JaggedVerge/mmap_backed_array\" rel=\"nofollow noreferrer\">library</a> to make dealing with the mmap backed data easier on the python side of things. If things are more complex than this perhaps go with a message queue based approach."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5687228, "user_type": "registered", "profile_image": "https://graph.facebook.com/995947113776689/picture?type=large", "display_name": "PaddyOsmond", "link": "https://stackoverflow.com/users/5687228/paddyosmond"}, "edited": false, "score": 1, "creation_date": 1450280363, "post_id": 34315847, "comment_id": 56373909, "body": "I&#39;ll take a look at ZeroMQ, it would be interesting to see if this can be done via shared memory though too. Message queuing is not something I was aware of before so thank you for introducing me to the concept"}], "tags": [], "owner": {"reputation": 1875, "user_id": 999125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/688125baa044bb16829bf0169fe92927?s=128&d=identicon&r=PG", "display_name": "0xd", "link": "https://stackoverflow.com/users/999125/0xd"}, "is_accepted": false, "score": 0, "last_activity_date": 1450279554, "creation_date": 1450279554, "answer_id": 34315847, "question_id": 34315470, "link": "https://stackoverflow.com/questions/34315470/ipc-between-c-application-and-python/34315847#34315847", "title": "IPC between C application and Python", "body": "<p>The way you are organizing the architecture is a bit messy. What you really want is <a href=\"https://en.wikipedia.org/wiki/Message_queue\" rel=\"nofollow\">Message Queues</a>. So in your example:</p>\n\n<ul>\n<li>Your python worker listens for new information to process in queue A;</li>\n<li>Your C program input data in queue A;</li>\n<li>Your python worker process the data and queue the result into queue B;</li>\n<li>Your C program listens for new items on queue B;</li>\n</ul>\n\n<p>This may vary, but the concept is simple.</p>\n\n<p>They are easy to implement, and has tons of libraries and tools to aid you on this task. <a href=\"http://zeromq.org/\" rel=\"nofollow\">ZeroMQ</a> would do for you, for sure. It works with C and Python.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 2, "creation_date": 1450283885, "post_id": 34316653, "comment_id": 56376608, "body": "With a due respect, a ZeroMQ approach is by far not an overkill. Supposing <b>Osmond has stated on his own</b> to be a &quot;relatively new&quot; to inter-process communications, <b>the very ZeroMQ concept of thinking may save his future</b> from repeated falling into so many common traps of amateur / low-quality raw pipe / sock concurrency programming. <b>This is based on real experience with a team learning-curve and productivity</b> once moved the architecture right into re-use of ZeroMQ tools in Scaleable Formal Patterns ( highly abstract behaviours, rather than  hacking coordination of low-level resources )"}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1450285311, "post_id": 34316653, "comment_id": 56377456, "body": "That&#39;s a good point. But ZeroMQ (or similar) is not always the answer. Each problem calls for a suitable tool. If I have to do simple IPC between two processes to get something done, I am certainly not going to use ZeroMQ. Each tool has its use and place."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 1, "creation_date": 1450287757, "post_id": 34316653, "comment_id": 56378917, "body": "With a wisdom of <b>\u201cWhen the only tool you have is a hammer, every problem begins to resemble a nail.\u201d</b> ( Maslows&#39;s hammer ) in mind, still I am pretty sure, Maslow&#39;s Hammer is not the bottom-line issue. <b>How low is the probability</b> a new coder will <b>within a reasonable time</b> create a distributed ( N+M ) failure-protected ( fail-safe ), performance-scaleable messaging between running processes, natively developed in C++ - python - MQL4 - java - FORTRAN - LISP - Go - PHP - ... you name &#39;em all ... C#? <b>My life-experience based guesstimate is Zero.</b> ( probability )"}], "tags": [], "owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "is_accepted": true, "score": 5, "last_activity_date": 1450283344, "last_edit_date": 1450283344, "creation_date": 1450281760, "answer_id": 34316653, "question_id": 34315470, "link": "https://stackoverflow.com/questions/34315470/ipc-between-c-application-and-python/34316653#34316653", "title": "IPC between C application and Python", "body": "<p>About <strong><code>fork()</code></strong> and the need to execute a different process. It is true that <code>fork()</code> creates a copy of the current process. But this is usually coupled with <a href=\"http://linux.die.net/man/3/exec\" rel=\"nofollow\"><strong><code>exec()</code></strong></a> (one of the various forms) to get the process copy to execute a different program.</p>\n\n<p>As for <strong><code>IPC</code></strong>, you have several choices. Someone mentioned a queue - but something like ZeroMQ is a overkill. You can do <code>IPC</code> with one of several mechanisms.</p>\n\n<ol>\n<li><a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow\">Pipes</a> (named pipes or anonymous)</li>\n<li>Unix domain sockets</li>\n<li><code>TCP</code> or <code>UDP</code> via the sockets API</li>\n<li><a href=\"https://www.cs.cf.ac.uk/Dave/C/node27.html\" rel=\"nofollow\">Shared memory</a></li>\n<li><a href=\"http://linux.die.net/man/7/mq_overview\" rel=\"nofollow\">Message queues</a></li>\n</ol>\n\n<p>The <code>pipe</code> approach is the easiest. Note that when you pass data back and forth between the C program and Python, you will need to worry about the transfer syntax of the data. If you choose to use C structs (which can be non portable), you will need to unpack the data on the Python side. Else you can use some textual format - combination of <code>sprintf</code>/<code>sscanf</code>, or <code>JSON</code> etc.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1450282566, "creation_date": 1450282566, "answer_id": 34316940, "question_id": 34315470, "link": "https://stackoverflow.com/questions/34315470/ipc-between-c-application-and-python/34316940#34316940", "title": "IPC between C application and Python", "body": "<p>If your struct is simple enough, you could even not use IPC at all. Provided, you can <em>serialize</em> it as string parameters that could be used as program arguments and provided the int value to return can be in the range 0-127, you could simply:</p>\n\n<ul>\n<li><p>in C code:</p>\n\n<ul>\n<li>prepare the command arguments to pass to the Python script</li>\n<li>fork-exec (assuming a Unix-like system) a Python interpretor with the script path and the script arguments</li>\n<li>wait for child termination</li>\n<li>read what the script passed as code termination</li>\n</ul></li>\n<li><p>in Python:</p>\n\n<ul>\n<li>get the arguments from command line and rebuild the elements of the struct</li>\n<li>process it</li>\n<li>end the script with <code>exit(n)</code> where n is an integer in the range 0-127 that will be returned to caller.</li>\n</ul></li>\n</ul>\n\n<p>If above does not meet your requirements, next level would be to use pipes:</p>\n\n<ul>\n<li><p>in C code:</p>\n\n<ul>\n<li>prepare 2 pipe pairs one for C->Python (let's call it input), one for Python->C (let's call it output)</li>\n<li>serialize the struct into a char buffer</li>\n<li>fork</li>\n<li>in child\n\n<ul>\n<li>close write side of input pipe</li>\n<li>close read side of output pipe</li>\n<li>dup read side of input pipe to file descriptor 0 (stdin) (see `dup2)</li>\n<li>dup write side of output pipe to file descriptor 1 (stdout)</li>\n<li>exec a Python interpretor with the name of the script</li>\n</ul></li>\n<li>in parent\n\n<ul>\n<li>close read side of input pipe</li>\n<li>close write side of output pipe</li>\n<li>write the buffer (eventually preceded by its size if it cannot be known a priori) to the write side on input file</li>\n<li>wait for the child to terminate</li>\n<li>read the return value from the read side of output pipe</li>\n</ul></li>\n</ul></li>\n<li><p>in Python:</p>\n\n<ul>\n<li>read the serialized data from standard input</li>\n<li>process it</li>\n<li>write the output integer to standard output</li>\n<li>exit</li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1450768395, "post_id": 34332101, "comment_id": 56561747, "body": "A lovely piece of wisdom, Claudio. More members with your approach to both system design &amp; S/O answers. <b>My hat is raised</b>"}, {"owner": {"reputation": 126, "user_id": 1967258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/90BqD.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/1967258/claudio"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1452094255, "post_id": 34332101, "comment_id": 57018676, "body": "@user3666197 thank you for the kind words. I try to keep my approach broader more often than not."}], "tags": [], "owner": {"reputation": 126, "user_id": 1967258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/90BqD.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/1967258/claudio"}, "is_accepted": false, "score": 2, "last_activity_date": 1450347668, "last_edit_date": 1592644375, "creation_date": 1450347668, "answer_id": 34332101, "question_id": 34315470, "link": "https://stackoverflow.com/questions/34315470/ipc-between-c-application-and-python/34332101#34332101", "title": "IPC between C application and Python", "body": "<p>I suggest looking at the application and structuring the issues you are confronted with.</p>\n<h1>Multi-threading</h1>\n<p>Starting two processes is by far not the biggest issue, as Ziffusion said you can have another process do something else. Plus there are python bindings for C, so you can create another thread for example (no need for it to be a process) and call your python routines from the C program.</p>\n<h1>Communication</h1>\n<p>Sharing information is more interesting as you have to solve two issues: one is technically getting the data from one place to another and viceversa; the other is how two different things can work on the same data.\nThis goes into messaging patterns and process flow:</p>\n<ul>\n<li>who generates the data?</li>\n<li>who receives the data?</li>\n<li>is there a piece of code waiting for something before proceeding?</li>\n<li>is there the need to control what happens to the data while the data is processed?</li>\n<li>do I want to code it myself?</li>\n<li>can I use libraries in the project?</li>\n<li>are there security limitations?</li>\n<li>...</li>\n</ul>\n<p>Once you answer the above questions, you can define how your pieces of the application are going to interact. One main distinction is synchronous vs asynchronous.</p>\n<h1>Sync vs Async</h1>\n<p>Synchronous means that for every message there is a reply which should be contained in a time envelope of finite (usually as small as possible) size. This in order to avoid latency.\nThis a pattern best used when you have to finely control what's happening, or you need an <em>answer</em> to the <em>question</em> in timely manner.\nIt is, in fact, how http works to download web pages: whenever you load a web site, you want to see the content right now.\nThis is a pattern called <strong>REQ</strong>uest/<strong>REP</strong>ly</p>\n<p>Asynchronous is often used in case of heavy processing: the data producer (for example a a database interface, or a sensor) sends a bulk of data to a worker thread, without waiting for an answer. The worker thread then starts doing its job on the data, and when it's done sends the results to a data sink/user.\nThis pattern is called <strong>PUB</strong>lish/<strong>SUB</strong>scribe.</p>\n<p>There are many others, but these form the basics of communication.</p>\n<h1>Marshalling</h1>\n<p>Another issue you face is how to structure the data passing, marshalling.\nHow to get the meaning and content of your data from one context to a totally different one.\nFor example from your C part to your Python part.\nMaintaining serializing libraries is tedious and perilous not to mention prone to backward compatibility issues.</p>\n<h1>Implementation</h1>\n<p>When you come to implementation you usually want the cleanest and most powerful code. The two things are clearly against each other. So I usually go look for a library that can do exactly what I need.\nIn this case my advice is to try ZeroMQ: it is thin, flexible, low-level.\nIt will give you a powerful framework to interface threads, processes and even machines.\nZeroMQ provides the link, but you still need a protocol to run over this link.\nTo avoid incredible headaches and streamline your work with respect to the marshaling issue, I suggest you investigate available marshaling libraries that make this task easy.\n<a href=\"https://capnproto.org/\" rel=\"nofollow noreferrer\">Cap'n proto</a>, <a href=\"https://google.github.io/flatbuffers/\" rel=\"nofollow noreferrer\">Flatbuffers</a>, Protocol buffers (Google, can't post more than 2 links yet)\nThey make it easy to define your data in an intermediate language, and parse it from any other language without you having to write all the classes yourself.</p>\n<p>As for pipes and shared memory my humble opinion is: forget they exist.</p>\n"}], "owner": {"reputation": 63, "user_id": 5687228, "user_type": "registered", "profile_image": "https://graph.facebook.com/995947113776689/picture?type=large", "display_name": "PaddyOsmond", "link": "https://stackoverflow.com/users/5687228/paddyosmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8265, "favorite_count": 2, "accepted_answer_id": 34316653, "answer_count": 4, "score": 5, "last_activity_date": 1450347668, "creation_date": 1450278490, "last_edit_date": 1450279280, "question_id": 34315470, "link": "https://stackoverflow.com/questions/34315470/ipc-between-c-application-and-python", "title": "IPC between C application and Python", "body": "<p>So I am relatively new to IPC and I have a c program that collects data and a python program that analyses the data. I want to be able to:</p>\n\n<ol>\n<li>Call the python program as a subprocess of my main c program</li>\n<li>Pass a c struct containing the data to be processed to the python process </li>\n<li>Return an int value from the python process back to the c program </li>\n</ol>\n\n<p>I have been briefly looking at Pipes and FIFO, but so far cannot find any information to address this kind of problem, since as I understand it, a fork() for example will simply duplicate the calling process, so not what I want as I am trying to call a different process.</p>\n"}, {"tags": ["c", "coordinates", "2d-games", "coordinate-systems"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1450278035, "post_id": 34315289, "comment_id": 56372226, "body": "You can&#39;t &quot;go back&quot; in the output stream using the standard C features. You will need some dedicated libraries like <code>ncurses</code>. Or redraw the whole board every time."}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450278183, "post_id": 34315289, "comment_id": 56372370, "body": "well I&#39;m sure there is a way, its part of an assignment I have :( @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1450278260, "post_id": 34315289, "comment_id": 56372444, "body": "Then probably the second approach was meant."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1450278277, "post_id": 34315289, "comment_id": 56372463, "body": "What console do you use? if it is VT100 compatible, <a href=\"http://www.termsys.demon.co.uk/vtansi.htm\" rel=\"nofollow noreferrer\">escape sequences</a> are useful."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1450278363, "post_id": 34315289, "comment_id": 56372511, "body": "Or maybe you are building a GUI software?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1450278899, "post_id": 34315289, "comment_id": 56372860, "body": "If it&#39;s a console program you should redraw the whole board each time. That&#39;s probably what is required by your homework."}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1450279598, "post_id": 34315289, "comment_id": 56373350, "body": "yeah I think so, anyway could you please help me and tell me how? even if I have to redraw it each time thanks @MikeCAT"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450279831, "post_id": 34315289, "comment_id": 56373521, "body": "If you are using MSVC you could use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686025%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">SetConsoleCursorPosition</a> where there is example code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450280188, "post_id": 34315289, "comment_id": 56373775, "body": "@thaeer show your code that draws the board, then wen can tell you more."}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450280232, "post_id": 34315289, "comment_id": 56373816, "body": "I&#39;m using codeBlocks and I cant use any function I didn&#39;t create, the only two libraries I can use are stdio.h and stdlib.h :( @WeatherVane"}, {"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1450280238, "post_id": 34315289, "comment_id": 56373819, "body": "Redrawing the board means that you&#39;ll print this board without forgetting the stars, what&#39;s unclear about it?"}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450280500, "post_id": 34315289, "comment_id": 56374015, "body": "@MichaelWalz the function I created to draw the starting point cant help cause it draws an empty board and I cant add anything to it (like adding an array of numbers) I should create a new one, do you still want to see it ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450280534, "post_id": 34315289, "comment_id": 56374040, "body": "Tip: prepare an array of strings filled with <code>space</code> characters and <code>\\0</code>-terminated, then &quot;poke&quot; the text characters you need, into the arrays. Finally, print all the prepared lines in a loop."}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450281047, "post_id": 34315289, "comment_id": 56374468, "body": "yeah I think I&#39;m getting somewhere thanks man @WeatherVane"}], "answers": [{"tags": [], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "is_accepted": false, "score": 5, "last_activity_date": 1450281613, "last_edit_date": 1450281613, "creation_date": 1450281311, "answer_id": 34316478, "question_id": 34315289, "link": "https://stackoverflow.com/questions/34315289/drawing-a-game-board-in-c/34316478#34316478", "title": "Drawing a game board in C", "body": "<p>If you are printing these on the termial (console), You can not simply print the coordinate axis and the go back and put coordinates, however if your coordinate system is sufficiently small, you should not have a problem with redrawing the entire board every time a new point is added.</p>\n\n<p>One simple approach is to keep a 2d array of char and either put \" \" or \"*\" based on the coordinates. This way you can simply print the 2D array row by row every time a new point is added to the coordinates. </p>\n\n<p>Of course you are also responsible for printing the axes but that part should be straight forward. </p>\n\n<pre><code>char points [4][4] ={\n       {' ',' ',' ',' '},\n       {' ',' ',' ',' '},\n       {' ',' ',' ',' '},\n       {' ',' ',' ',' '},\n       };\n</code></pre>\n\n<p>Is what you will have as an empty board. now if you want to enter something at coordinates (1,2), all you need to do is to say <code>points[1][2]='*';</code></p>\n\n<p>to print the entire array you will need a nested loop, the outer to traverse the rows and the inner to traverse the columns. something like this:</p>\n\n<pre><code>int i,j;\n\nfor (i=0; i&lt;4; ++i)\n    {\n        for (j=0; j&lt;4; ++j) printf(\"%c \", points[i][j]);\n\n     printf(\"\\n\");\n     }\n</code></pre>\n\n<p>This way the coordinate values will be increasing from left to right and from top to bottom. if you want otherwise you should change the for loop bounds. </p>\n\n<p>to refresh the screen I recommend you print a whole bunch of newlines to effectively clear the screen. there are other ways of doing this (like system(\"cls\"), but not as pain free</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "edited": false, "score": 0, "creation_date": 1450288119, "post_id": 34316932, "comment_id": 56379125, "body": "yeah that perfect, but I get the array from another function so what changes should I do to make this function do the same for an array the user gives me? @Weather Vane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "edited": false, "score": 0, "creation_date": 1450288308, "post_id": 34316932, "comment_id": 56379234, "body": "Thanks for the vote, but I can&#39;t guess what code you have or which of the three arrays in this code you are talking about. Perhaps time to ask another question?"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1450282942, "last_edit_date": 1450282942, "creation_date": 1450282530, "answer_id": 34316932, "question_id": 34315289, "link": "https://stackoverflow.com/questions/34315289/drawing-a-game-board-in-c/34316932#34316932", "title": "Drawing a game board in C", "body": "<p>This illustrates what I meant in my comment, perhaps it helps. It prepares an array of strings representing the game board, before printing them.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BOARDX  5\n#define BOARDY  5\n#define BOARDW  (BOARDX*2)              // length of text line\n\nchar board [BOARDY][BOARDW+1];          // allow for string terminator\n\nvoid print_board(void)\n{\n    int y, x;\n    for(y=BOARDY-1; y&gt;=0; y--) {\n        printf(\"%-2d|%s\\n\", y, board[y]);\n    }\n\n    printf(\"   \");\n    for(x=0; x&lt;BOARDX; x++)\n        printf(\" -\");\n    printf(\"\\n\");\n\n    printf(\"   \");\n    for(x=0; x&lt;BOARDX; x++)\n        printf(\"%2d\", x);\n    printf(\"\\n\");\n}\n\nvoid empty_board(void)\n{\n    int y, x;\n    for(y=0; y&lt;BOARDY; y++) {\n        for(x=0; x&lt;BOARDW; x++) {\n            board[y][x] = ' ';\n        }\n        board[y][x] = '\\0';\n    }\n}\n\nvoid poke_board(int x, int y, char c)\n{\n    if (y &gt;= 0 &amp;&amp; y &lt; BOARDY &amp;&amp; x &gt;= 0 &amp;&amp; x &lt; BOARDX)\n       board[y][x*2+1] = c;               // correctly spaced\n}\n\nint main(void)\n{\n    int posX[]= {2,4,2,1};\n    int posY[]= {2,3,4,4};\n    int len = sizeof(posX) / sizeof(posX[0]);\n    int n;\n    empty_board();\n    for(n=0; n&lt;len; n++) {\n        poke_board(posX[n], posY[n], '*');\n    }\n    print_board();\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>4 |   * *\n3 |         *\n2 |     *\n1 |\n0 |\n    - - - - -\n    0 1 2 3 4\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3367, "favorite_count": 1, "accepted_answer_id": 34316932, "answer_count": 2, "score": 0, "last_activity_date": 1450282942, "creation_date": 1450277975, "last_edit_date": 1450279324, "question_id": 34315289, "link": "https://stackoverflow.com/questions/34315289/drawing-a-game-board-in-c", "title": "Drawing a game board in C", "body": "<p>Well, as the title says, I'm trying to draw a game board. Well the board itself I did and it looks something like his:</p>\n\n<pre><code>4 |\n3 |\n2 |\n1 |\n0 |\n   - - - - -\n   0 1 2 3 4\n</code></pre>\n\n<p>but that's not the problem. The thing I find hard is the I wanna draw icons of star shape (*) on the board, and the coordinates are giving in an array like this </p>\n\n<pre><code>posX {2,4,2,1}\nposY {2,3,4,4}\n</code></pre>\n\n<p>so in this case I should draw * in the coordinates (2,2) , (4,3) , (2,4) , (1,4) and so on. Any ideas?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 551, "user_id": 4571206, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yJHES.jpg?s=128&g=1", "display_name": "Abr001am", "link": "https://stackoverflow.com/users/4571206/abr001am"}, "edited": false, "score": 1, "creation_date": 1450277288, "post_id": 34314989, "comment_id": 56371673, "body": "which variable scanf casts the value ?"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1450279010, "post_id": 34314989, "comment_id": 56372940, "body": "<a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">The Definitive C Book Guide and List</a>"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1450279236, "post_id": 34314989, "comment_id": 56373087, "body": "If the compiler talks about constructor and destructor, you are compiling for C++ and not C."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1450280740, "post_id": 34314989, "comment_id": 56374218, "body": "Are you trolling? If not, here&#39;s a hint: start off with the <i>minimum</i> possible code required to compile without errors. Then, add one line at a time, compiling between each line."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 2, "creation_date": 1450281104, "post_id": 34314989, "comment_id": 56374507, "body": "@RPGillespie there is a lot of really low-level trolling going on ATM.  Something to do with teh winter bash hats:("}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 1, "creation_date": 1450281730, "post_id": 34314989, "comment_id": 56375015, "body": "I ended up up-voting this otherwise dreadful question which would typically give most readers, &quot;Where do I begin?&quot; kind of responses... but for only one reason: check out these answers below. They deserve some attention."}, {"owner": {"reputation": 593, "user_id": 1955945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qt3vW.png?s=128&g=1", "display_name": "rlam12", "link": "https://stackoverflow.com/users/1955945/rlam12"}, "edited": false, "score": 0, "creation_date": 1450282503, "post_id": 34314989, "comment_id": 56375609, "body": "I think almost everything there is wrong..."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450290098, "post_id": 34314989, "comment_id": 56380296, "body": "@MartinJames: yeah, I think I just got geek-sniped.  At least I&#39;m getting rep out of it, though..."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1450277486, "last_edit_date": 1450277486, "creation_date": 1450277291, "answer_id": 34315042, "question_id": 34314989, "link": "https://stackoverflow.com/questions/34314989/declaring-a-variable-in-c/34315042#34315042", "title": "Declaring a variable in C", "body": "<ol>\n<li><p>You cannot write assignments like <code>a = 19, b = 27, c = 3;</code> outside functions.</p></li>\n<li><p><code>int count = 0;</code> is the initialisation of a global variable, so that is allowed.</p></li>\n<li><p><code>ABC;</code> is also meaningless unless <code>ABC</code> has been <code>#define</code>d to something numerical, and even then it would be a no-op.</p></li>\n<li><p><code>main</code> is also malformed. You need to write it as <code>int main()</code> and make sure you return a value.</p></li>\n<li><p>Lastly, your <code>scanf</code> argument list is not correct. Do consult the documentation.</p></li>\n</ol>\n\n<p>It would be a good idea to study an introduction to C. Kernighan &amp; Ritchie is an excellent book.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1450281288, "post_id": 34316178, "comment_id": 56374671, "body": "Up-voted since this is the most descriptive code-only example I&#39;ve ever seen and I think it&#39;s a very direct and useful way of illustrating what&#39;s wrong (might be ideal as a standard way of answering Qs)."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "edited": false, "score": 0, "creation_date": 1450286035, "post_id": 34316178, "comment_id": 56377890, "body": "This is a great answer."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 6, "last_activity_date": 1450280513, "creation_date": 1450280513, "answer_id": 34316178, "question_id": 34314989, "link": "https://stackoverflow.com/questions/34314989/declaring-a-variable-in-c/34316178#34316178", "title": "Declaring a variable in C", "body": "<p>Here's a rewrite, showing how to fix the various issues:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint count = 0;     // declarations and intitializations are allowed at file\n                   // scope (that is, outside of any function body).  The\n                   // storage for count will be set aside at program start\n                   // and held until the program terminates.  \n                   //\n                   // count is visible to all functions defined within this\n                   // file, and will be visible to other files compiled and\n                   // linked into the same program.  \n\nint main( void ) { // Implicit typing of functions is no longer allowed as of C99,\n                   // and it was never good practice to begin with. \n                   // IOW, the compiler will not assume a return type of\n                   // int if a type specifier is missing.  main always\n                   // returns int, and either takes 0 or 2 arguments.\n\n  int a, b, c;     // int abc; declares a *single* variable named \"abc\", \n                   // not three variables named \"a\", \"b\", and \"c\".  \n                   // Storage for these variables will be set aside at\n                   // function entry and held until the function exits.\n                   //\n                   // None of a, b, or c are visible outside of the\n                   // function body.            \n\n                   // ABC has not been defined anywhere; it's not clear\n                   // what the intent was behind ABC;\n\n  a = 19;          // While not illegal, a = 19, b = 27, c = 3; is not the best style\n  b = 27;          // in the world; it's better to make these three separate statements \n  c = 3;           // Note that assignment statements (like any other executable \n                   // statement) are not allowed outside of a function body.  \n\n\n  a = 4 + 5 * 3;                   // fine\n  b = (4 +5) * 3;                  // fine\n  c = 25 -(2 * (10 + (8 / 2)));    // fine\n\n  printf(\"Enter a value please\\n\"); // fine\n\n  scanf(\"%d\", &amp;a); // Each conversion specifier in a scanf call needs a corresponding \n                   // argument to write the input value to, and the argument needs\n                   // to be of the correct type.  %d expects the corresponding \n                   // argument to have type \"int *\" (pointer to int).  The expression\n                   // \"&amp;a\" gives the address of the variable \"a\", and the type \n                   // of the expression is \"int *\".  So, this statement will read an \n                   // integer value from standard input and store it to a.\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5687089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0f77680c18bf38d064f4ca57f9ed920?s=128&d=identicon&r=PG&f=1", "display_name": "laraine", "link": "https://stackoverflow.com/users/5687089/laraine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": -10, "last_activity_date": 1450281523, "creation_date": 1450277153, "last_edit_date": 1450281523, "question_id": 34314989, "link": "https://stackoverflow.com/questions/34314989/declaring-a-variable-in-c", "title": "Declaring a variable in C", "body": "<p>I\u2019m having a hard time with declaring my variables within C. The compiler display a message \u201cexpected constructor destructor or type conversion before token.\u201d What am I doing wrong? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint count =0;\nint abc;\nABC; \na = 19, b = 27, c = 3;\n\na = 4 + 5 * 3;\nb = (4 +5) * 3;\nc = 25 -(2 * (10 + (8 / 2)));\n\nmain {\n   printf(\"Enter a value please\\n\");\n   scanf(\"%d, , \\n\");\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450277540, "post_id": 34314954, "comment_id": 56371863, "body": "&quot;I&#39;m using Visual Studio 2015 and it says&quot; - What? However, RTFM."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4424299"}, "edited": false, "score": 0, "creation_date": 1450277562, "post_id": 34314991, "comment_id": 56371881, "body": "That&#39;s indeed the solution! Thank you very much :)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450277990, "post_id": 34314991, "comment_id": 56372196, "body": "Never do this. If <code>realloc()</code> fails and you will not exit from the program yet, you just caused a memory leak. Also <code>sizeof(char)</code> is very unnecessary."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450278137, "post_id": 34314991, "comment_id": 56372329, "body": "@iharob Are the <code>printf()</code> and <code>getchar()</code> after <code>realloc()</code> in the original code bad things?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1450278468, "post_id": 34314991, "comment_id": 56372581, "body": "I mean <code>buffer = realloc(buffer, new_size);</code> is a very bad thing."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 3, "last_activity_date": 1450277166, "creation_date": 1450277166, "answer_id": 34314991, "question_id": 34314954, "link": "https://stackoverflow.com/questions/34314954/c-program-crashes-after-2-reallocs/34314991#34314991", "title": "C program crashes after 2 reallocs", "body": "<p>You have to receive the address of reallocated buffer as the return value like</p>\n\n<pre><code>buffer = realloc(buffer, sizeof(char) * new_size);\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4424299"}, "edited": false, "score": 0, "creation_date": 1450277793, "post_id": 34315164, "comment_id": 56372039, "body": "Visual Studio is indeed not the best IDE, but we are obligated to use it by our teacher ;)"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1450277956, "post_id": 34315164, "comment_id": 56372175, "body": "It is extremly good IDE, for C++ and C# , not C, in my opinion"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1450278490, "post_id": 34315164, "comment_id": 56372594, "body": "I think Visual Studio is not good for learning C because it has many confusing features such as accepting <code>void main()</code> and rejecting using <code>scanf()</code>, etc."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1450278588, "post_id": 34315164, "comment_id": 56372656, "body": "It simply was built as a C++ IDE with C++ compiler, that&#39;s it. microsoft won&#39;t spend resources to develop real support in C, although I can understand them"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": -1, "last_activity_date": 1450278307, "last_edit_date": 1450278307, "creation_date": 1450277608, "answer_id": 34315164, "question_id": 34314954, "link": "https://stackoverflow.com/questions/34314954/c-program-crashes-after-2-reallocs/34315164#34315164", "title": "C program crashes after 2 reallocs", "body": "<p>Let's review it backward:</p>\n\n<p>In C, in order for a function to change an argument, it has to receive that argument as a pointer.</p>\n\n<p>But what happens if that argument is a pointer? the function has to get that pointer as a pointer to pointer.</p>\n\n<p>As you noticed, <code>realloc</code> doesn't get the pointer as <code>void**</code> but as a <code>void*</code>, meanning it can not change that pointer to point to the new location of the memory.</p>\n\n<p>So logically, the expression<br/>\n<code>realloc(ptr,new_size);</code> <br/>\nis pointless, the memory address has being changed, but not the pointer.</p>\n\n<p>this is why <code>realloc</code> returns the new address as <code>void*</code>, and you have to update the original pointer:</p>\n\n<pre><code>buffer = realloc(buffer, new_size);\n</code></pre>\n\n<p>P.S.\nI'm not sure using visual studio as a C IDE is the best idea.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450282968, "last_edit_date": 1450282968, "creation_date": 1450278471, "answer_id": 34315465, "question_id": 34314954, "link": "https://stackoverflow.com/questions/34314954/c-program-crashes-after-2-reallocs/34315465#34315465", "title": "C program crashes after 2 reallocs", "body": "<p>The correct way to use <code>realloc()</code> is</p>\n\n<pre><code>void *temp;\ntemp = realloc(buffer, new_size); // Note that: sizeof(char) == 1 ALWAYS\nif (temp == NULL)\n    handle_allocation_error_or_exit(); // `buffer' is still valid here\nelse\n    buffer = temp;\n</code></pre>\n\n<p>The way you have <strong>it does not store the returned pointer</strong>. You should bear in mind that <code>realloc()</code> might actually <code>free()</code> the pointer and reallocate new memory. But only if it can successfully do so.</p>\n\n<p>Not using a temporary pointer has issues related to it, a few to mention</p>\n\n<ol>\n<li>You cannot <code>free()</code> the old pointer because you overwrite it with <code>NULL</code></li>\n<li>For the same reason, now you will not have access to the data that was previously in the memory pointed to by buffer, you might need it to recover, or to write it to permanent storage or whatever, but you would lose reference to it if <code>realloc()</code> fails.</li>\n</ol>\n\n<p>It's true that it's quite hard to make <code>malloc()</code>/<code>calloc()</code>/<code>realloc()</code> fail when you are using a system with +8GB of RAM, but it's not impossible. In my case, sometimes I am running a Video Conference program and sharing a Windows 10 quemu virtual machine with 2GB of memory and at the same time using the web browser, some IDE like Android Studio (which eats a lot of memory) + Android Emulator (again qemu). You can be surprised as to how quickly the RAM is consumed, in this situation the program might fail at <code>realloc()</code> and you could have lost some important data.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4424299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 34314991, "answer_count": 3, "score": -1, "last_activity_date": 1450282968, "creation_date": 1450277079, "last_edit_date": 1450278501, "question_id": 34314954, "link": "https://stackoverflow.com/questions/34314954/c-program-crashes-after-2-reallocs", "title": "C program crashes after 2 reallocs", "body": "<p>I'm trying to write a small C program, but it crashes once I try to realloc with new_size being 20. Every value for new_size (in the function reallocate_buffer) under 20 works perfectly. I don't understand what's happening. This is my code.</p>\n\n<pre><code>char* reallocate_buffer(char* buffer, unsigned new_size)\n{\n    if (!buffer)\n    {\n        printf(\"Invallid buffer pointer given!\\n\");\n        printf(\"Press any key to continue...\\n\");\n        getchar();\n        exit(2);\n    }\n    realloc(buffer, sizeof(char) * new_size);\n    printf(\"Realloc is done...\\n\");\n    if (!buffer)\n    {\n        printf(\"Couldn't increase buffer size! Maybe out of memory?\\n\");\n        printf(\"Press any key to continue...\\n\");\n        getchar();\n        exit(1);\n    }\n    return buffer;\n}\n\nchar* read_input(int* text_length)\n{\n    unsigned bufsize = BUFFER_SIZE;\n    char* buffer = malloc(sizeof(char) * BUFFER_SIZE);\n    char c;\n    unsigned done = 0;\n    while((c = fgetc(stdin)) != EOF &amp;&amp; c != '\\n')\n    {\n        printf(\"C is now %d\\n\", c);\n        buffer[done] = c;\n        done += 1;\n\n        if (done == bufsize)\n        {\n            printf(\"Reallocating...\\n\");\n            printf(\"Buffer size was now: %d\\n\", bufsize);\n            bufsize += 5;\n            buffer = reallocate_buffer(buffer, bufsize);\n            printf(\"Buffer size is now: %d\\n\", bufsize);\n        }\n    }\n\n    /* Now increase size once more if necessary to place the \\0 character */\n    if (bufsize == done)\n    {\n        printf(\"Reallocing once more...\\n\");\n        bufsize++;\n        reallocate_buffer(buffer, bufsize);\n    }\n\n    buffer[done] = '\\0';\n    return buffer;\n}\n\nint main(int argc, char * argv [])\n{\n    printf(\"Please provide input:\\n\");\n    int line_size;\n    char* word = read_input(&amp;line_size);\n    printf(\"You provided:\\n%s\\n\", word);\n    printf(\"Press any key to continue...\\n\");\n    getchar();\n    free(word);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1450276850, "post_id": 34314847, "comment_id": 56371351, "body": "Do not attempt to modify string literals."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450277601, "post_id": 34314847, "comment_id": 56371906, "body": "gcc is a compiler; it will not run a program."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1523710036, "last_edit_date": 1523710036, "creation_date": 1450277380, "answer_id": 34315075, "question_id": 34314847, "link": "https://stackoverflow.com/questions/34314847/my-program-is-crashing-when-it-calls-strcpy/34315075#34315075", "title": "My program is crashing when it calls `strcpy()&#39;", "body": "<p>You can't overwrite your <code>str1</code> pointer to a <a href=\"https://softwareengineering.stackexchange.com/questions/294748/why-are-c-string-literals-read-only\">string literal because they are read only memory</a> and your program is trying to write to the memory the pointer points to which causes <em>Undefined Behavior</em> most of the time it causes a <em>Segmentation Fault</em>. And even worst you can't concatenate without previously allocating the necessary space.</p>\n\n<p>If you want your code to work, you need something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char str1[42] = \"Bangladesh Bogus Party\";\n    const char *str2 = \"Sad is a beautiful country\";\n\n    strcpy(str1 + 11, str2 + 4);\n    strcat(str1, \"! !! !!!\");\n\n    printf(\"%s\\n\", str1);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that <code>str1</code> is no longer a string literal, whil <code>str2</code> is. That is because <code>str2</code> is never modified, and I added the <code>const</code> specifier to prevent from accidentally doing it. It's impossible to completely prevent this but <code>const</code> can help you notice when you do it unintentionally.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1450277493, "creation_date": 1450277493, "answer_id": 34315119, "question_id": 34314847, "link": "https://stackoverflow.com/questions/34314847/my-program-is-crashing-when-it-calls-strcpy/34315119#34315119", "title": "My program is crashing when it calls `strcpy()&#39;", "body": "<p>The main issue is that <code>str1</code> points to a string literal.  These live in a read-only section of memory, so attempting to change them will typically cause your program to crash.  Rather than defining <code>str1</code> as a pointer, define it as an array initialized with the literal in question:</p>\n\n<pre><code>char str1[] = \"Bangladesh Bogus Party\";\n</code></pre>\n\n<p>If you do this, however, the array doesn't have enough room for the extra characters to be added.  So make the array larger so that is has enough space:</p>\n\n<pre><code>char str1[50] = \"Bangladesh Bogus Party\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1450277863, "creation_date": 1450277863, "answer_id": 34315242, "question_id": 34314847, "link": "https://stackoverflow.com/questions/34314847/my-program-is-crashing-when-it-calls-strcpy/34315242#34315242", "title": "My program is crashing when it calls `strcpy()&#39;", "body": "<p><code>strcpy</code> and <code>strcat</code> both require that the first operand points to memory that is both writable and big enough to hold the result.</p>\n\n<p>In your case neither of these requirements is fulfilled.</p>\n\n<p>String literals are often placed in write-protected memory by the compiler. <code>gcc</code> places string literals in write-protected memory. Other compilers can do it differently. </p>\n\n<p>The problem can be solved by creating <code>str1</code> in writable memory and increasing its size so that it is big enough to hold the entire string.</p>\n\n<p>The resulting string will be 41 characters + 1 for the string terminator.</p>\n\n<p>Here are a couple of different ways to do it:</p>\n\n<pre><code>char str1[42] = \"Bangladesh Bogus Party\";  // Declare str1 as an array\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char *str1 = malloc(42);                 // Allocate str1 dynamically\nstrcpy(str1, \"Bangladesh Bogus Party\");  // and copy the string to it\n</code></pre>\n\n<p>or </p>\n\n<pre><code>char *str1 = strdup(\"Bangladesh Bogus Party\"); // Allocate str1 dynamically and copy the string to it. It will only be just big enough to hold the initial data\nstr1 = realloc(str1, 42);  // Increase the size to 42.\n</code></pre>\n"}], "owner": {"reputation": 2708, "user_id": 5424617, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f86a85c89417fa560070c4aeb5aecc56?s=128&d=identicon&r=PG", "display_name": "Md. Rezwanul Haque", "link": "https://stackoverflow.com/users/5424617/md-rezwanul-haque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3226, "favorite_count": 1, "closed_date": 1450391815, "accepted_answer_id": 34315075, "answer_count": 3, "score": -4, "last_activity_date": 1523710036, "creation_date": 1450276792, "last_edit_date": 1501763206, "question_id": 34314847, "link": "https://stackoverflow.com/questions/34314847/my-program-is-crashing-when-it-calls-strcpy", "closed_reason": "Not suitable for this site", "title": "My program is crashing when it calls `strcpy()&#39;", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char *str1 = \"Bangladesh Bogus Party\";\n    char *str2 = \"Sad is a beautiful Country\";\n\n    strcpy(str1 + 11, str2 + 4);\n    strcat(str1, \"! !! !!!\");\n    printf(\"\\n%s\", str1);\n\n    return 0;\n}\n</code></pre>\n\n<p>In the code blocks ,it has found....</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>-------------- Build: Debug in catcpy (compiler: GNU GCC Compiler)---------------\n\nTarget is up to date.\nNothing to be done (all items are up-to-date).\n\n\n-------------- Run: Debug in catcpy (compiler: GNU GCC Compiler)---------------\n\nChecking for existence: E:\\Sobar Jonno C (Niton)\\String\\catcpy\\bin\\Debug\\catcpy.exe\nExecuting: \"C:\\Program Files (x86)\\CodeBlocks/cb_console_runner.exe\" \"E:\\Sobar Jonno C (Niton)\\String\\catcpy\\bin\\Debug\\catcpy.exe\"  (in E:\\Sobar Jonno C (Niton)\\String\\catcpy\\.)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450276264, "post_id": 34314599, "comment_id": 56370891, "body": "In the code, there is only one mistake. You ignore what <code>scanf()</code> returns. You should write <code>if ((scanf(&quot;%d&quot;, &amp;a) == 1) &amp;&amp; (a == b))</code> instead of <code>if (a == b)</code>. Other than that, there is no reason for the described behavior, at least not a problem with the code. Can you please give more details about your environment and how are you testing the <i>.exe</i> file?"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 1, "creation_date": 1450276295, "post_id": 34314599, "comment_id": 56370915, "body": "What input are you providing when you run the program the first time?"}, {"owner": {"reputation": 11, "user_id": 5328127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6939d4776ef9fc4fdcd8599d4dfde37c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Chhaparia", "link": "https://stackoverflow.com/users/5328127/naman-chhaparia"}, "edited": false, "score": 0, "creation_date": 1450276309, "post_id": 34314599, "comment_id": 56370925, "body": "I&#39;m using the MinGW gcc compiler, on Windows XP."}, {"owner": {"reputation": 11, "user_id": 5328127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6939d4776ef9fc4fdcd8599d4dfde37c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Chhaparia", "link": "https://stackoverflow.com/users/5328127/naman-chhaparia"}, "edited": false, "score": 0, "creation_date": 1450276405, "post_id": 34314599, "comment_id": 56370995, "body": "Mike, I&#39;m typing 10 for the first time"}, {"owner": {"reputation": 11, "user_id": 5328127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6939d4776ef9fc4fdcd8599d4dfde37c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Chhaparia", "link": "https://stackoverflow.com/users/5328127/naman-chhaparia"}, "edited": false, "score": 0, "creation_date": 1450276426, "post_id": 34314599, "comment_id": 56371011, "body": "iharob, your code initiates an endless loop"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 5, "creation_date": 1450276535, "post_id": 34314599, "comment_id": 56371090, "body": "This code wouldn&#39;t run twice. There must be a problem with how you&#39;re running it."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 1, "creation_date": 1450276540, "post_id": 34314599, "comment_id": 56371093, "body": "There is no &quot;\\n&quot; at the end of the  2 resulting printf, so the shell prompt must stick to the output and that may sound strange, but it doesn&#39;t execute twice. Try <code>printf(&quot;Found&#47;Match...\\n&quot;);</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450277789, "post_id": 34314599, "comment_id": 56372035, "body": "@NamanChhaparia How so? Just replacing that will NOT cause an endless loop. How are you testing it? There has to be something that you are not telling us. Perhaps because you don&#39;t think it&#39;s relevant. The fix I suggest cannot possible cause that because there are no loops involved."}, {"owner": {"reputation": 11, "user_id": 5328127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6939d4776ef9fc4fdcd8599d4dfde37c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Chhaparia", "link": "https://stackoverflow.com/users/5328127/naman-chhaparia"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1450359199, "post_id": 34314599, "comment_id": 56413039, "body": "@interjay, I&#39;m using it on windows xp, using MinGW gcc compiler. and I&#39;m running it simply through command prompt."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 4494073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/386ebc9e37f5f027f320c72cf6666e1f?s=128&d=identicon&r=PG", "display_name": "LORDTEK", "link": "https://stackoverflow.com/users/4494073/lordtek"}, "is_accepted": false, "score": 0, "last_activity_date": 1452351697, "creation_date": 1452351697, "answer_id": 34695035, "question_id": 34314599, "link": "https://stackoverflow.com/questions/34314599/c-scanf-program-executes-2-times/34695035#34695035", "title": "C scanf program executes 2 times", "body": "<p>The code works well in Ubuntu 14.04. At MS Windows + MinGW there are some problem sometimes. If you want to develop a program with gcc you should use Unix Like Operating System (Linux, BSD, etc) If you want to still use MS Windows, then you should use MS Visual Studio for the best result.</p>\n"}], "owner": {"reputation": 11, "user_id": 5328127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6939d4776ef9fc4fdcd8599d4dfde37c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Chhaparia", "link": "https://stackoverflow.com/users/5328127/naman-chhaparia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1452351697, "creation_date": 1450276091, "last_edit_date": 1450276133, "question_id": 34314599, "link": "https://stackoverflow.com/questions/34314599/c-scanf-program-executes-2-times", "title": "C scanf program executes 2 times", "body": "<p>I'm new to C. I was learning <code>scanf()</code> function, and the error that occured is that when I run the .exe file, it executes, gives correct output, and closes; but it then again executes on its own , asks for input and gives correct output and closes. Here's my code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a;\n    printf(\"Enter a num\\n\");\n    scanf(\"%d\", &amp;a);\n    int b = 1601;\n    if (a == b) {\n        printf(\"Found a match!!\");\n    } else {\n        printf(\"Match not found!\");\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "audio", "microphone"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450274958, "post_id": 34313930, "comment_id": 56369943, "body": "And the errors are....?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450274971, "post_id": 34313930, "comment_id": 56369951, "body": "Do you have an actual question?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450275011, "post_id": 34313930, "comment_id": 56369984, "body": "Well, yeah.. I see question marks in comments only.."}, {"owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "edited": false, "score": 0, "creation_date": 1450275228, "post_id": 34313930, "comment_id": 56370121, "body": "The errors are multiple and repetetive. for instance 263 C:\\Dev-     Cpp\\include\\windef.h syntax error at &#39;##&#39; token"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450275383, "post_id": 34313930, "comment_id": 56370222, "body": "If you want to get any help, you should include all of the relevant information in the question."}, {"owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "edited": false, "score": 0, "creation_date": 1450275426, "post_id": 34313930, "comment_id": 56370250, "body": "it happens in thousands . i didnt even know  where to access windef.h except as itopens in new tap. it happens not only to windef.h but also winbase.h, and winuser.h. i must have made terrible silly mistake or didnt know what to include . can someone out there please help me how to fix this? I would appreciate if i can see one simple working code that uses the functions used above"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450275550, "post_id": 34313930, "comment_id": 56370357, "body": "This compiles except for linker errors. Did you look at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd743866%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">waveOutOpen function</a>? You need to link with <code>Winmm.lib</code> but you do not need to explicitly <code>#include &lt;mmsystem.h&gt;</code> because you have <code>#include &lt;windows.h&gt;</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450275613, "post_id": 34313930, "comment_id": 56370409, "body": "@WeatherVane Looks like the OP has problem compiling. I would say he screwed up one of the headers. Or the compiler settings are wrong."}, {"owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "edited": false, "score": 0, "creation_date": 1450275697, "post_id": 34313930, "comment_id": 56370483, "body": "so how do i link the Winnmm.lib ? do i just include it? when i include this , it says no such file or directory"}, {"owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450275822, "post_id": 34313930, "comment_id": 56370572, "body": "@WeatherVane am new to this . can help me understand what u mean?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450276084, "post_id": 34313930, "comment_id": 56370768, "body": "I do not use an IDE, I make executables from a console command line. My current (project) folder contains a file called <code>MAKEFILE</code> which instructs the compiler tool chain what to do. One of its lines instructs what library modules to link to the executable. Since this test project is for simple C testing, its makefile does not mention any windows libraries to link, which is why I got the error I mentioned above, and, presumably, relates also to you own situation, as you refer to &quot;lots of errors from built-in libraries&quot;."}, {"owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450293470, "post_id": 34313930, "comment_id": 56382267, "body": "@WeatherVane,Eugene Sh thank you"}], "owner": {"reputation": 11, "user_id": 5554223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec86176ef028b66404a059397f021027?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5554223/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450274361, "creation_date": 1450274182, "last_edit_date": 1450274361, "question_id": 34313930, "link": "https://stackoverflow.com/questions/34313930/how-to-apply-mci-to-capture-microphone-input-and-process-in-c", "title": "how to apply MCI to capture microphone input and process in C", "body": "<p>I wanted to capture and process audio input through microphone in C. I couldn't find specific functions to handle input devices. So I moved to use MCI of windows to not use other open source tools/software.\nWhile trying to apply the functions specific to MCI to record, process and save as <code>.WAV</code> file, am facing a lot of errors which refer to other built in libraries. For instance, here is one sample code I fetched over the net:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;mmsystem.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n {\n  HWAVEOUT hWaveOut;\n  WAVEFORMATEX wfx; \n  MMRESULT result;\n\n    wfx.nSamplesPerSec = 44100; \n    wfx.wBitsPerSample = 16; \n    wfx.nChannels = 2;\n    wfx.cbSize = 0; \n    wfx.wFormatTag = WAVE_FORMAT_PCM;\n    wfx.nBlockAlign = (wfx.wBitsPerSample &gt;&gt; 3) * wfx.nChannels;\n    wfx.nAvgBytesPerSec = wfx.nBlockAlign * wfx.nSamplesPerSec;\n\n    if(waveOutOpen(&amp;hWaveOut,        WAVE_MAPPER,&amp;wfx,0,0,CALLBACK_NULL)     !=  MMSYSERR_NOERROR)\n    {\n     fprintf(stderr, \"unable to open WAVE_MAPPER device\\n\");\n      ExitProcess(1);\n    }\n    printf(\"The Wave Mapper device was opened successfully!\\n\");\n    waveOutClose(hWaveOut);\n    return 0;\n   }\n</code></pre>\n"}, {"tags": ["c", "linux"], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450279072, "post_id": 34314013, "comment_id": 56372988, "body": "Thanks i&#39;ll have to give it try ."}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 4, "last_activity_date": 1450276433, "last_edit_date": 1450276433, "creation_date": 1450274413, "answer_id": 34314013, "question_id": 34313774, "link": "https://stackoverflow.com/questions/34313774/c-c-flock-as-mutex-on-linux-not-robust-to-file-delete/34314013#34314013", "title": "c/c++ flock as mutex on linux not robust to file delete", "body": "<p>You can indeed use a semaphore. Linux provides the flag <code>SEM_UNDO</code>, which will undo the semaphore-operation on process termination (see <code>semop</code>(2)).</p>\n"}, {"comments": [{"owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450279110, "post_id": 34315035, "comment_id": 56373007, "body": "the lock file name  is actually well know and unique,"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450279499, "post_id": 34315035, "comment_id": 56373284, "body": "@MichelSanches, then your options for protecting the lock file are the same ones available for protecting any file.  My answer already provides a recommendation for that case.  A process holding the file open confers no protection against unlinking, regardless of <code>flock()</code>ing.  This is by design."}, {"owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450279715, "post_id": 34315035, "comment_id": 56373430, "body": "Yes your right  i used  /tmp/xxx as  a know good place where any user can have access to and create a file. Just tough of a scenario where root or any user decide to clean /tmp because space is needed and brake my mutex logic :(  Creating file as root with precise attribute is a good idea  but will it work ? It seam flock fail if you have no write &quot;permisision&quot;. Also giving file root priviliged make the installation process a bit more complex and need root privileged. Still Many thanks for the suggestion i&#39;ll have to try it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450280393, "post_id": 34315035, "comment_id": 56373932, "body": "@MichelSanches, if the lock file is not writable by your process, then you must open it with mode <code>O_RDONLY</code>, and you must not include <code>O_EXCL</code> among the open flags.  It is not useful to include <code>O_CREAT</code>, but neither is it directly harmful.  As long as you successfully open the file, you should be able to <code>flock()</code> it.  I just tested this to be sure."}, {"owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450280628, "post_id": 34315035, "comment_id": 56374115, "body": "i tested open root owned file  with &quot;rw-r-r&quot;  , open rd only  is ok of course but lockf is not it fail :("}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450281037, "post_id": 34315035, "comment_id": 56374463, "body": "@MichelSanches, what does <code>lockf()</code> have to do with anything?  You said you are using <code>flock()</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450281564, "post_id": 34315035, "comment_id": 56374918, "body": "@MichelSanches, on Linux, <code>lockf()</code> is implemented on top of <code>fcntl()</code> locks.  The only exclusive locks provided by <code>fcntl()</code> are write locks, and you can take out such a lock only on a file open for writing.  Linux (and BSD) <code>flock()</code> is an entirely separate system.  FWIW, OS X is a fork of BSD."}, {"owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450296446, "post_id": 34315035, "comment_id": 56383915, "body": "oops my mistake i  used lockf so far  (mac os and linux). I started with that for some reason i can&#39;t remenber. I can change but will it make any difference on the end ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "edited": false, "score": 0, "creation_date": 1450299447, "post_id": 34315035, "comment_id": 56385666, "body": "@MichelSanches, as I said, <code>lockf()</code>/<code>fcntl()</code> locks and <code>flock()</code> locks are completely separate and independent on Linux and BSD.  They are both advisory locks, but they have somewhat different semantics.  Among the differences, <code>flock()</code> can provide exclusive locks on read-only files, but <code>fcntl()</code> cannot.  I cannot say whether any of the other differences would be significant for you."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1450277274, "creation_date": 1450277274, "answer_id": 34315035, "question_id": 34313774, "link": "https://stackoverflow.com/questions/34313774/c-c-flock-as-mutex-on-linux-not-robust-to-file-delete/34315035#34315035", "title": "c/c++ flock as mutex on linux not robust to file delete", "body": "<p>The <code>rm</code> command does not actually delete files.  Rather, it unlinks them from the file system, as if via the <code>unlink(2)</code> syscall.  The files will not be removed from disk as long as any process holds them open (or any other hard links to them exist), and processes that <em>do</em> hold them open continue to refer to the same file, even though it no longer appears in directory listings.  Nothing prevents another file from being created and linked to the file system at the same place as the previous one, but that is an altogether different file.  This behavior is desirable for consistent program behavior, and some programs intentionally use it to their advantage for managing temporary files.</p>\n\n<p>There is nothing you can do to prevent a process <em>with sufficient privileges</em> from unlinking the lock file.  Any process that has sufficient privilege to create the lock file has sufficient privilege to unlink it, with the consequences you describe.  One usually mitigates this problem by creating a temporary file with an unpredictable name for use with <code>flock()</code>, so that the file name or an open file handle must be exchanged between processes that want to synchronize actions by locking that file.  For the particular case of child processes, you can rely on the child inheriting open file descriptors from its parent to enable them to get at the lock file even if it has been unlinked.</p>\n\n<p>On the other hand, if you are relying on a lock file with a well-known name then the solution may be to create the file in advance, make root its owner and the owner of every directory in the path of hard links leading to it, and deny all other users write access the file and the directories.  You could consider further wrapping it up with mandatory access controls (SELinux policy) if you wanted to be even more careful.</p>\n"}], "owner": {"reputation": 418, "user_id": 4108106, "user_type": "registered", "profile_image": "https://graph.facebook.com/1459853034/picture?type=large", "display_name": "Michel Sanches", "link": "https://stackoverflow.com/users/4108106/michel-sanches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1450277274, "creation_date": 1450273758, "last_edit_date": 1450276405, "question_id": 34313774, "link": "https://stackoverflow.com/questions/34313774/c-c-flock-as-mutex-on-linux-not-robust-to-file-delete", "title": "c/c++ flock as mutex on linux not robust to file delete", "body": "<p>File locking in C using <code>flock</code> is commonly used to implement cross-platform  cooperative inter-process locking/mutex.</p>\n\n<p>I have an implementation (mac/linux/win) that works well, but it is not robust to file deletion (at least under Linux).</p>\n\n<p>One or more process have started creating and using lockfile (<code>/tmp/lockfile</code>) and cooperatively interlock on a shared resource with it.  </p>\n\n<p>Some time later, I manually delete the lockfile (<code>rm /tmp/lockfile</code>).  The running process keep on cooperating with each other, but any new process that wants to start using the same resource lock and lockfile breaks the overall mutex logic. It will  create  a new version of the <code>/tmp/lockfile</code> that is somehow different  to the one already in used in already running process.</p>\n\n<p>What can be done to prevent the lockfile from being unlinked while any process has it open?\nWhat other solutions can be used?</p>\n\n<p>I can't use a semaphore because I need the lock to self-release if the owning process crashes.</p>\n"}, {"tags": ["c", "postfix-operator"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450273500, "post_id": 34313553, "comment_id": 56368866, "body": "&quot;But if I print out the value of i after line 4 I get 10 instead of 11 which it is in line 3. Why does this happen?&quot; Because line 4 decreases the value by 1."}, {"owner": {"reputation": 2552, "user_id": 1244949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79313f5bc90c71f8ade2c446348db622?s=128&d=identicon&r=PG&f=1", "display_name": "WalterM", "link": "https://stackoverflow.com/users/1244949/walterm"}, "edited": false, "score": 0, "creation_date": 1450273664, "post_id": 34313553, "comment_id": 56368989, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2371118/how-do-the-post-increment-i-and-pre-increment-i-operators-work-in-java\">How do the post increment (i++) and pre increment (++i) operators work in Java?</a>"}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "reply_to_user": {"reputation": 2552, "user_id": 1244949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79313f5bc90c71f8ade2c446348db622?s=128&d=identicon&r=PG&f=1", "display_name": "WalterM", "link": "https://stackoverflow.com/users/1244949/walterm"}, "edited": false, "score": 2, "creation_date": 1450273933, "post_id": 34313553, "comment_id": 56369198, "body": "@WalterM - It&#39;s best not to link as duplicates separate languages."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2552, "user_id": 1244949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79313f5bc90c71f8ade2c446348db622?s=128&d=identicon&r=PG&f=1", "display_name": "WalterM", "link": "https://stackoverflow.com/users/1244949/walterm"}, "edited": false, "score": 2, "creation_date": 1450273943, "post_id": 34313553, "comment_id": 56369206, "body": "@WalterM: That duplicate is a different language, and the nuances of the operator differ due to sequencing considerations."}, {"owner": {"reputation": 2552, "user_id": 1244949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79313f5bc90c71f8ade2c446348db622?s=128&d=identicon&r=PG&f=1", "display_name": "WalterM", "link": "https://stackoverflow.com/users/1244949/walterm"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450273986, "post_id": 34313553, "comment_id": 56369242, "body": "@Bathsheba My bad, I thought I was on Java tag."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450274168, "post_id": 34313553, "comment_id": 56369382, "body": "Here&#39;s the <a href=\"http://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i\">C equivalent</a>. Though I don&#39;t see how this is a duplicate. The op doesn&#39;t even seem to know what <code>i--</code> does to begin with."}, {"owner": {"reputation": 45, "user_id": 5485006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9dad76c3bf33741633bc47f44f7450?s=128&d=identicon&r=PG&f=1", "display_name": "Chibuikem", "link": "https://stackoverflow.com/users/5485006/chibuikem"}, "edited": false, "score": 0, "creation_date": 1450275194, "post_id": 34313553, "comment_id": 56370098, "body": "Ok. I see. I know what i-- does, but I didn&#39;t know it changed the value of all i after that. I just thought the new value would be set to j not to every i thereafter. Which was all I wanted to know in the first place. Thank you"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 2552, "user_id": 1244949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79313f5bc90c71f8ade2c446348db622?s=128&d=identicon&r=PG&f=1", "display_name": "WalterM", "link": "https://stackoverflow.com/users/1244949/walterm"}, "edited": false, "score": 0, "creation_date": 1450281248, "post_id": 34313553, "comment_id": 56374632, "body": "@WalterM if you suffer from that often, see your doctor:)"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1450273330, "post_id": 34313592, "comment_id": 56368731, "body": "@Downvoter, this looks correct to me. Presumably the answerer and I have missed something?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450273453, "post_id": 34313592, "comment_id": 56368831, "body": "@Bathsheba Please let me know if you get anything, probably i&#39;m missing it too. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1450275546, "post_id": 34313592, "comment_id": 56370353, "body": "@Bathsheba I hate drive-by anonymous down-voters! Up-voted to restore the balance."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1450275630, "post_id": 34313592, "comment_id": 56370419, "body": "Maybe you should wear the Odinson hat you have? I think it would help. That hat looks a little bit like a police uniform, and some people have strong negative feelings against the police. Maybe that&#39;s why this got the down-vote."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1450275653, "post_id": 34313592, "comment_id": 56370442, "body": "@Ike While i should be happy (<i>actually I am</i>), but I will like to politely remind you, you should vote based on the content, not to restore balance. Thank you and appricicate it. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 2, "creation_date": 1450275681, "post_id": 34313592, "comment_id": 56370469, "body": "@SouravGhosh I am voting on the content -- but also to restore the balance. :-D Plus I also personally like your hat."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450275731, "post_id": 34313592, "comment_id": 56370510, "body": "@Ike Thanks much. Cheers !! :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1450276382, "post_id": 34313592, "comment_id": 56370978, "body": "My guess for why someone randomly down-voted your answer is because it&#39;s an answer to such a confusingly-worded question that got a lot of down-votes. Maybe they just didn&#39;t like that you chose to answer it. But your answer is fantastic and took the time to cite the language standard. It makes this otherwise poor question quite interesting."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450276522, "post_id": 34313592, "comment_id": 56371078, "body": "Sadly I was not the answerer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450276544, "post_id": 34313592, "comment_id": 56371099, "body": "@Bathsheba Ah yes, sorry, I edited it. I just wanted to ping you even though I knew you weren&#39;t the answerer about why this might have a down-vote."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1450273680, "last_edit_date": 1450273680, "creation_date": 1450273290, "answer_id": 34313592, "question_id": 34313553, "link": "https://stackoverflow.com/questions/34313553/does-setting-a-variable-equal-to-a-decrementing-variable-change-all-values-of-th/34313592#34313592", "title": "Does setting a variable equal to a decrementing variable change all values of that variable?", "body": "<p>In your code, see the following step-through.</p>\n\n<pre><code>j=3;   //Line 1, j ==3\ni=6;   //Line 2, i == 6\ni+=5;  //Line 3, i == i + 5 == 11\nj=i--; // line 4, j == 11, i == 10, after this line.\n</code></pre>\n\n<p>To elaborate, the <code>x += y</code> can be broken down as <code>x = x + y</code>, so that's it.</p>\n\n<p>and regarding the <em>post-decrement</em>, the side-effect (decrement) will take place after the expression is evaluated. So, anyway, before the next statement, the value of <code>i</code> will get decremented.</p>\n\n<p>To add some reference, from <code>C11</code>, chapter \u00a76.5.2.4,</p>\n\n<blockquote>\n  <p>The result of the postfix <code>++</code> operator is the value of the operand. As a side effect, the\n  value of the operand object is incremented (that is, the value 1 of the appropriate type is\n  added to it).[....]</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The postfix <code>--</code> operator is analogous to the postfix <code>++</code> operator, except that the value of\n  the operand is decremented (that is, the value 1 of the appropriate type is subtracted from\n  it).</p>\n</blockquote>\n\n<p>Note, a difference of a pre-decrement and post-decrement is visible only <em>within</em> the expression they are used. From the perspective of the <em>next instruction</em> using the variable, they both will give you the <em>same</em> result (effect).</p>\n"}, {"tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1450273462, "creation_date": 1450273462, "answer_id": 34313667, "question_id": 34313553, "link": "https://stackoverflow.com/questions/34313553/does-setting-a-variable-equal-to-a-decrementing-variable-change-all-values-of-th/34313667#34313667", "title": "Does setting a variable equal to a decrementing variable change all values of that variable?", "body": "<p>The <code>--</code> decrement operators are not the same as subtraction by one. They modify the lvalue on which they were used, so any time <code>i--</code> is used, <code>i</code> will be modified.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1450273513, "creation_date": 1450273513, "answer_id": 34313686, "question_id": 34313553, "link": "https://stackoverflow.com/questions/34313553/does-setting-a-variable-equal-to-a-decrementing-variable-change-all-values-of-th/34313686#34313686", "title": "Does setting a variable equal to a decrementing variable change all values of that variable?", "body": "<p>First you make the value of <code>i</code> become <code>11</code>, then you assign this value to <code>j</code> and <em>then</em> the decrement of <code>i</code> happens. The last line is equivalent to</p>\n\n<pre><code>j = i;\ni -= 1;\n</code></pre>\n\n<p>If you did <code>j = --i;</code> then the last line would have been equivalent to</p>\n\n<pre><code>i -= 1;\nj = i;\n</code></pre>\n\n<p>and <code>j</code> would have become <code>10</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 5485006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9dad76c3bf33741633bc47f44f7450?s=128&d=identicon&r=PG&f=1", "display_name": "Chibuikem", "link": "https://stackoverflow.com/users/5485006/chibuikem"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1451855850, "answer_count": 3, "score": -8, "last_activity_date": 1450275881, "creation_date": 1450273163, "last_edit_date": 1450275881, "question_id": 34313553, "link": "https://stackoverflow.com/questions/34313553/does-setting-a-variable-equal-to-a-decrementing-variable-change-all-values-of-th", "closed_reason": "Needs details or clarity", "title": "Does setting a variable equal to a decrementing variable change all values of that variable?", "body": "<p>If you had the following code:</p>\n\n<pre><code>j=3;   // Line 1\ni=6;   // Line 2\ni+=5;  // Line 3\nj=i--; // Line 4\n</code></pre>\n\n<p>... to my knowledge, the value of <code>j</code> would become 6. If it was <code>--i</code>, it would be 5 etc.</p>\n\n<p>But if I print out the value of <code>i</code> after line 4, I get 10 instead of 11 which is on line 3.</p>\n\n<p>Why does this happen? Does this mean if I declared <code>i</code> to be a number and later on I go back the code and set another variable to <code>i--</code>, before most of my <code>i's</code> in the code, it changes the value of <code>i</code> globally?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 4, "creation_date": 1450272420, "post_id": 34313271, "comment_id": 56368113, "body": "<code>fflush(stdin);</code> invokes <i>undefined behavior</i>. Do not use it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450272469, "post_id": 34313271, "comment_id": 56368137, "body": "Not sure that <code>sscanf</code> is the way to go here."}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1450272469, "post_id": 34313271, "comment_id": 56368138, "body": "@MikeCAT im currently in school. The teacher told me to use it. Feel free to show me an alternative : ("}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1450272524, "post_id": 34313271, "comment_id": 56368173, "body": "<code>fflush(stdin);</code> is still UB, even if your teacher tells yo to use it."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 1, "creation_date": 1450272613, "post_id": 34313271, "comment_id": 56368237, "body": "If you&#39;re after this kind of context inference you&#39;re not going to be able to parse generic patterns like this. Read some material about Natural Language Processing, there are some clever techniques out there."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450273651, "post_id": 34313271, "comment_id": 56368982, "body": "You should tell your teacher to take some classes in C programming..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450274077, "post_id": 34313271, "comment_id": 56369311, "body": "@Asperger What exactly is the reason to use it?"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1450274109, "post_id": 34313271, "comment_id": 56369338, "body": "@Asperger: A standard compliant way to ensure the stdin buffer is empty would be an empty while loop: <code>while((c = getchar()) != &#39;\\n&#39; &amp;&amp; c != EOF);</code> This reads characters from the buffer until EOL or EOF is encountered"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450274245, "post_id": 34313271, "comment_id": 56369427, "body": "@EliasVanOotegem Wouldn&#39;t it block when no character is entered? One will have to explicitly send ^D or EOL.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450274492, "post_id": 34313271, "comment_id": 56369589, "body": "What does the program do with <code>and</code>?"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1450274591, "post_id": 34313271, "comment_id": 56369661, "body": "@EugeneSh. Yes, OP shouldn&#39;t attempt to clear stdin unless there are unwanted characters in there, of course (<code>ioctl</code> can tell you that). The real answer is that there is no simple, portable replacement for <code>fflush(stdin)</code>. If you&#39;re only targeting gcc, then the behaviour of <code>fflush(stdin)</code> is defined (implementation specific, non-standard, but documented and defined). Either way, there&#39;s tons of questions about flushing stdin on SO and other sites for the OP to sift through. Most of them will mention the while loop I&#39;ve posted, along with the caveats"}], "answers": [{"comments": [{"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450274836, "post_id": 34313347, "comment_id": 56369849, "body": "I can use regular expressions in c? I never knew"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 2, "creation_date": 1450274910, "post_id": 34313347, "comment_id": 56369917, "body": "@Asperger The code I showed is not a regular expression, it&#39;s a perfectly standard format specifier for <code>sscanf()</code> using the <code>%[]</code> and <code>%d</code> conversion specifiers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450277592, "post_id": 34313347, "comment_id": 56371897, "body": "A more detailed meaning: &quot;find at least 1 non-digit, skip until you see a digit, convert one decimal number ...&quot;  So <code>&quot;1 sum 2&quot;</code> fails."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1450272525, "creation_date": 1450272525, "answer_id": 34313347, "question_id": 34313271, "link": "https://stackoverflow.com/questions/34313271/how-do-i-create-flexible-placeholder-expressions-d-s-d-in-c/34313347#34313347", "title": "How do I create flexible placeholder expressions (%d %s %d) in c?", "body": "<p>Something like <code>\"%*[^0-9]%d%*[^0-9]%d\"</code> might work, but this is rather iffy use of <code>sscanf()</code>.</p>\n\n<p>The format specifier basically means \"skip until you see a digit, convert one decimal number, then skip until the next digit and finally convert another decimal number\". This of course assumes that the input doesn't start with the first number, and so on.</p>\n\n<p>You should check the return value of <code>sscanf()</code> before relying on the variables having values.</p>\n"}, {"comments": [{"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450274974, "post_id": 34314137, "comment_id": 56369953, "body": "there seems to be an error on this line  token = strtok(NULL, s);"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450275047, "post_id": 34314137, "comment_id": 56370011, "body": "@Asperger  Yup, just spotted that.  Thank you."}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450275351, "post_id": 34314137, "comment_id": 56370198, "body": "What do you think of unwinds &quot;regex style&quot; solution? What is the disadvantage of both?"}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450275490, "post_id": 34314137, "comment_id": 56370300, "body": "I still somehow get large numbers instead"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450275775, "post_id": 34314137, "comment_id": 56370536, "body": "@Asperger I&#39;ve never used regex&#39;s for anything other than the most simple tasks, when the format of the input is known in advance.  It&#39;s not very extensible, even if you&#39;re prepared to build the regex dynamically.  It&#39;s really not the best way to learn about parsing.  It may work in this instance, but (IMO) is not the best approach, even if a regex library is available in C."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450275891, "post_id": 34314137, "comment_id": 56370627, "body": "@Asperger Put in a few debug lines to <code>printf</code> each token and what they parse as (the operator_t value, the <code>sscanf</code> integer value, etc.)."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450276051, "post_id": 34314137, "comment_id": 56370748, "body": "@Asperger ...and I&#39;ve just fixed another bug on the <code>prinf</code> output line (I forgot to add teh parameters)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450277339, "post_id": 34314137, "comment_id": 56371720, "body": "NIcely done!   Suggest adding <code>&#39;\\n&#39;</code> to the delimiter list so <code>&quot;1 2 sum\\n&quot;</code> works."}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450278239, "post_id": 34314137, "comment_id": 56372426, "body": "Wow nice. Im a starter in C so this is really helpful."}, {"owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450278836, "post_id": 34314137, "comment_id": 56372819, "body": "#define NUMBER_OF_ITEMS 3 is not a library. How does that work? Sorry if I ask so much : (   The solutions works though"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450284573, "post_id": 34314137, "comment_id": 56377032, "body": "@Asperger <code>#define</code> is a C preprocessor directive that causes the text <code>NUMBER_OF_ITEMS</code> to be replaced by the value <code>3</code> wherever it occurs in your source code.  This means that you can change the value in one place, without having to manually go through your code and find it.  It also associates a handy, human-readable description of what the value is in place of a relatively meaningless number.  i.e. what does <code>if(itemCount==3)</code> really mean and why 3?"}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "edited": false, "score": 0, "creation_date": 1450344193, "post_id": 34314137, "comment_id": 56403109, "body": "@Asperger You could replace that line with <code>static const int NUMBER_OF_ITEMS = 3;</code> and it would work the same (in this instance).  However, they are not the same thing at all.  It&#39;s like a constant, except that it only exists for the benefit of the programmer and the compiler.  There will be no entity (pointer, variable, constant, etc.) in the compiled software.  There are lots of resources on this site and the web in general relating to the C preprocessor - have a read around."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": false, "score": 2, "last_activity_date": 1450275999, "last_edit_date": 1450275999, "creation_date": 1450274740, "answer_id": 34314137, "question_id": 34313271, "link": "https://stackoverflow.com/questions/34313271/how-do-i-create-flexible-placeholder-expressions-d-s-d-in-c/34314137#34314137", "title": "How do I create flexible placeholder expressions (%d %s %d) in c?", "body": "<p>Try using <code>strtok</code> to split your input string into a list of operators and operands.  The problem is that natural languages such as English do not have a formal order for operators and operands when expressing mathematical phrases, whereas you program requires this.</p>\n\n<p>Splitting the input into operators and operands allows you to match them up in the order required.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef enum\n{\n    NO_OP,\n    ADDITION,\n    /* Add new operators here. */\n}   operator_t;\n\n/* One operator plus two operands. */\n#define NUMBER_OF_ITEMS 3\n\nint main()\n{\n    char question[100];\n    char buffer[100];\n    char *token;\n\n    int result = 0;\n    /* Extend this to allow more complex sentences with multiple operations. */\n    int operands[2];\n    int* nextOperand = &amp;operands[0];\n    int itemCount = 0;\n    /* Turn this into an array to extend the parser. */\n    operator_t operator = NO_OP;\n\n    printf (\"Your mathematical question: \\r\\n\");\n\n    fgets(question, sizeof(question), stdin);\n\n    /* Tokens are seperated by SPACES in this example. */\n    const char delims[] = \" \";\n\n    /* Get the first token. */\n    token = strtok(question, delims);\n\n    /* Walk through all tokens in the question string. */\n    while((token != NULL)&amp;&amp;(NUMBER_OF_ITEMS &gt; itemCount)) \n    {\n        /* use strcmp to avoid matches on words like 'summertime'. */\n        if((0 == strcmp(token, \"sum\")) || (0 == strcmp(token, \"add\")))\n        {\n            operator = ADDITION;\n            itemCount++;\n        }\n        else\n        {\n            /* Check that one integer can be parsed from the token. */\n            if(1 == sscanf(token, \"%d\", nextOperand))\n            {\n                nextOperand++;\n                itemCount++;\n            }\n        }\n\n        /* Find the next token. */\n        token = strtok(NULL, delims);\n    }\n\n    /* Perform the operation, if possible. */\n    if((NUMBER_OF_ITEMS == itemCount) &amp;&amp; (NO_OP != operator))\n    {\n        switch(operator)\n        {\n            case ADDITION:\n                result = operands[0] + operands[1];\n                printf(\"The answer to your question (%d + %d) is %d.\\r\\n\",\n                    operands[0], operands[1], result);\n                break;\n            default:\n                printf(\"Oops, please ask my programmer to do some debugging.\");\n                break;\n        }\n\n    }\n    else\n    {\n        printf (\"I did not understand your question.\\r\\n\");    \n    }\n}\n</code></pre>\n\n<p>Note that you will need to add much more error checking for decent robustness, but the code above should help illustrate how teh problem can be solved.</p>\n\n<p>You can then use something like <a href=\"https://en.wikipedia.org/wiki/Reverse_Polish_notation\" rel=\"nofollow\">Reverse Polish Notation</a> to extend the functionality of your parser.</p>\n"}], "owner": {"reputation": 3194, "user_id": 5208406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ce3abcae33e760707a531fbeb4c71490?s=128&d=identicon&r=PG&f=1", "display_name": "Asperger", "link": "https://stackoverflow.com/users/5208406/asperger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1450275999, "creation_date": 1450272316, "question_id": 34313271, "link": "https://stackoverflow.com/questions/34313271/how-do-i-create-flexible-placeholder-expressions-d-s-d-in-c", "title": "How do I create flexible placeholder expressions (%d %s %d) in c?", "body": "<p>The program lets you type in a math question such as:</p>\n\n<pre><code>Bob has 1 apple and Mike 2. What is the sum?\n</code></pre>\n\n<p>The program then understands the word \"sum\" and adds the two numbers together. At least that is what im trying to achieve. It doesnt work as im getting very large numbers. I suspect that the expression %d %s %d is not flexible enough and only works if the question is:</p>\n\n<pre><code>1 sum 2\n</code></pre>\n\n<p>The order seems to matter. So how do I make it flexible so that the order does not matter?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n   char question[100];\n   char buffer[100];\n   int result;\n   int n1, n2;\n   int operation;\n\n   printf (\"Your mathematical question: \");\n\n   fgets(question, sizeof(question), stdin);\n   fflush(stdin);\n\n   if(strstr(question, \"sum\") || strstr(question, \"add\")){\n        operation = 0;\n   }\n\n   sscanf(question, \"%d %s %d\", &amp;n1, buffer, &amp;n2);\n\n   printf (\"%d %d \\n\", n1, n2);\n\n    switch(operation) {\n        case 0: result = n1 + n2;\n        break;\n    }\n\n   printf (\"%d\", result);\n   return(0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 6, "creation_date": 1450271291, "post_id": 34312891, "comment_id": 56367309, "body": "Don&#39;t cast the result of <code>malloc</code> &amp; friends in C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1450271362, "post_id": 34312891, "comment_id": 56367366, "body": "Note that being a three-star programmer is not a compliment in C. What would that make a four-star programmer?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450271431, "post_id": 34312891, "comment_id": 56367424, "body": "See <a href=\"http://c2.com/cgi/wiki?FiveStarProgrammer\" rel=\"nofollow noreferrer\">c2.com/cgi/wiki?FiveStarProgrammer</a> There&#39;s always a bigger fish."}, {"owner": {"reputation": 11, "user_id": 5686711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bab0e75a09c89e9ee97e8f5090cdc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emphasizer", "link": "https://stackoverflow.com/users/5686711/emphasizer"}, "edited": false, "score": 0, "creation_date": 1450271531, "post_id": 34312891, "comment_id": 56367495, "body": "As you would see, I did mention this program is not the brightest in use. but... I still need to finish it."}, {"owner": {"reputation": 11, "user_id": 5686711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bab0e75a09c89e9ee97e8f5090cdc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emphasizer", "link": "https://stackoverflow.com/users/5686711/emphasizer"}, "edited": false, "score": 1, "creation_date": 1450271629, "post_id": 34312891, "comment_id": 56367566, "body": "Respectfully, Olaf... I don&#39;t care for compliments as a programmer at this point :)"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1450272116, "post_id": 34312891, "comment_id": 56367913, "body": "There are many ways to use <code>malloc</code> and <code>realloc</code>. It depends on what exactly you want to allocate, but you haven&#39;t really said that. e.g. do you want a 1D/2D/3D array, how many elements in each dimension, what type it contains, etc."}, {"owner": {"reputation": 11, "user_id": 5686711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bab0e75a09c89e9ee97e8f5090cdc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emphasizer", "link": "https://stackoverflow.com/users/5686711/emphasizer"}, "edited": false, "score": 0, "creation_date": 1450272303, "post_id": 34312891, "comment_id": 56368039, "body": "Hey interjay, at this point, i only want to allocate the space so i can even put a char there... since i use some other functions and reallocation before this point - i have decided that -maybe- mentioning all of that would only confuse... i need a 2D array (D1 are pointers and D2 are strings)"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1450272781, "post_id": 34312891, "comment_id": 56368354, "body": "What do you mean by <i>send</i>? And why does &quot;sending&quot; a second time add another indirection? Could you please use common C terminolgy and rephrase the whole question? As-is it is next to impossible to understand."}, {"owner": {"reputation": 11, "user_id": 5686711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bab0e75a09c89e9ee97e8f5090cdc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emphasizer", "link": "https://stackoverflow.com/users/5686711/emphasizer"}, "edited": false, "score": 0, "creation_date": 1450273338, "post_id": 34312891, "comment_id": 56368738, "body": "I am sorry, since i have only coded in C for a month, I guess the terminology used is blurred... by &quot;sending&quot; i mean that i do &quot;scan_strings_from_user(char*** students)&quot; sending a second time means that I&#39;ll do &quot;String_Exists(char ****students, char** newString)&quot; I hope this clarifies thigs"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1450273356, "post_id": 34312891, "comment_id": 56368752, "body": "You should always reallocate pointers of pointers of pointers to the garbage bin."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450274080, "post_id": 34312891, "comment_id": 56369314, "body": "I don&#39;t understand the question... Your task is to make a bad program and now you have made a program which doesn&#39;t work. Success."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450275127, "post_id": 34312891, "comment_id": 56370056, "body": "Do yourself a favour, and use <code>sizeof *ptr_to_allocate</code> instead of <code>sizeof(type)</code>. That way, you&#39;re far more likely to allocate enough memory: <code>char ***foo = malloc(10 * sizeof *foo);</code> vs <code>malloc(10 * sizeof(char**));</code> which is easier to read? (if you insist on using triple indirection anyways)"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450277098, "post_id": 34312891, "comment_id": 56371554, "body": "I think this is a good time to ask the OP for a minmal (1) specification and (2) as complete as possible (but still minimal!) code example of what he wants to achieve, together with the build- or run time errors. That is, use the simplest data possible (int or char) and the simplest data structure that you fail to understand or design or code. For example, my assumption is that if you cannot allocate and pass around data for a 2-dimensional matrix you will also have trouble with a simple one-dimensional array."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1457708263, "creation_date": 1457708263, "answer_id": 35943352, "question_id": 34312891, "link": "https://stackoverflow.com/questions/34312891/reallocating-pointers-of-pointers-of-pointers/35943352#35943352", "title": "Reallocating pointers of pointers of pointers", "body": "<blockquote>\n  <p>I have created the dynamic-array **students and allocated space for\n  it. at this point, i send this dynamic array (**students) to a\n  function that sends it to ANOTHER function (i send &amp;students so i can\n  change them by address)\n  \u2026\n  To be specific, since i sent the array 2 times: my first function\n  receives ***students and my second function receives ****students</p>\n</blockquote>\n\n<p>There is no sense in taking the array pointer's address (i. e. <code>&amp;students</code>) more than once, since we then already have the means to reallocate the array:</p>\n\n<pre><code>void ANOTHER_function(char ***students)\n{\n    *students = realloc(*students, 2 * sizeof **students);  // room for 2 char *\n    (*students)[1] = malloc(sizeof *(*students)[1]);        // room for 1 char\n}\n\nvoid a_function(char ***students)\n{\n    ANOTHER_function(students); // no need for address operator &amp; here\n}\n\nint main()\n{\n    char **students = malloc(sizeof *students); // room for 1 char *\n    students[0] = malloc(sizeof *students[0]);  // room for 1 char\n    a_function(&amp;students);\n}\n</code></pre>\n\n<p>So, we don't need more than three <code>*</code> anywhere here.</p>\n\n<hr>\n\n<p>When you had <code>ANOTHER_function(char ****students)</code> and therein</p>\n\n<pre><code>    *students = (char**)realloc(*students, 2 * sizeof(char*));\n</code></pre>\n\n<p>the type of <code>*students</code> was <code>char ***</code> and didn't match the <code>(char**)</code> on the right - fortunately, because <code>*students</code> was the address of <code>main</code>'s <code>students</code> instead of its value.</p>\n\n<pre><code>    **students = (char**)realloc(**students, 2 * sizeof(char*));\n</code></pre>\n\n<p>was correct (albeit overly complicated) in this case; the corresponding <code>malloc()</code> for the new element would have been</p>\n\n<pre><code>    (**students)[1] = malloc(sizeof *(**students)[1]);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5686711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bab0e75a09c89e9ee97e8f5090cdc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emphasizer", "link": "https://stackoverflow.com/users/5686711/emphasizer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457708263, "creation_date": 1450271163, "last_edit_date": 1450276301, "question_id": 34312891, "link": "https://stackoverflow.com/questions/34312891/reallocating-pointers-of-pointers-of-pointers", "title": "Reallocating pointers of pointers of pointers", "body": "<p>As a part of our Computer Science course (using C), we are to build a VERY wasteful system using pointers\nSince we are not allowed to use structures at this point, we are to use ONLY pointers for our dynamic-arrays.</p>\n\n<p>I have created the dynamic-array **students and allocated space for it.\nat this point, i send this dynamic array (**students) to a function that sends it to ANOTHER function (i send &amp;students so i can change them by address)</p>\n\n<p>My problem is, that i do not know (apparently - and after many many tries) how to reallocate space to this dynamic-array</p>\n\n<p>To be specific, since i sent the array 2 times:\nmy first function receives ***students\nand my second function receives ****students</p>\n\n<p>I tried to reallocate space the following way (I am in the SECOND function at the moment)</p>\n\n<pre><code>*students = (char**)realloc(*students, 2 * sizeof(char*));\n*students[1] = (char*)malloc(sizeof(char))\n</code></pre>\n\n<p>this seemed like the way to do it - apparently i was wrong\nany help would be thankfully received :)</p>\n\n<p>Edit:</p>\n\n<p>The program will run if I do this:</p>\n\n<pre><code>**students = (char**)realloc(**students, 2 * sizeof(char*));\n</code></pre>\n\n<p>but then I am not able to use malloc correctly..</p>\n\n<p>I would appreciate the understanding behind my question and not just a solution, so I can learn for next trial.</p>\n"}, {"tags": ["c", "linked-list", "sparse-matrix"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450270946, "post_id": 34312693, "comment_id": 56367068, "body": "Do not post links. And don&#39;t post images if avoidable. Your question has to be self-contained. As far as I see, you did quite a lot correct here (not casting <code>void *</code>, <code>sizeof(*&lt;pointer&gt;)</code>, ... Maybe you should think first what you actually want to accomplish, refine this and <b>then</b> think about how to implement it."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 6, "creation_date": 1450271024, "post_id": 34312693, "comment_id": 56367114, "body": "It seems someone else had the same homework in January: <a href=\"http://stackoverflow.com/questions/28000250/creating-a-sparse-matrix-using-linked-lists-in-c\" title=\"creating a sparse matrix using linked lists in c\">stackoverflow.com/questions/28000250/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5686555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19737d0db2b4b859ee38db403c5fd98d?s=128&d=identicon&r=PG&f=1", "display_name": "cam_arri98", "link": "https://stackoverflow.com/users/5686555/cam-arri98"}, "edited": false, "score": 0, "creation_date": 1450272363, "post_id": 34312693, "comment_id": 56368077, "body": "But I think that this are not the same functions, is it posible to help me a little with the definitions?"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1450272632, "post_id": 34312693, "comment_id": 56368242, "body": "You diagram appears to show R[n] and C[n] as non-sparse arrays. If so they&#39;d just contain a single <code>Matrix*</code>."}, {"owner": {"reputation": 338, "user_id": 5439654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7m1uW.png?s=128&g=1", "display_name": "Kotshi", "link": "https://stackoverflow.com/users/5439654/kotshi"}, "edited": false, "score": 0, "creation_date": 1450274269, "post_id": 34312693, "comment_id": 56369441, "body": "What it is the purpose of <code>initiate_1()</code> ? It returns nothing so you won&#39;t be able to access it from anywhere else, this is a memory leak."}, {"owner": {"reputation": 1, "user_id": 5686555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19737d0db2b4b859ee38db403c5fd98d?s=128&d=identicon&r=PG&f=1", "display_name": "cam_arri98", "link": "https://stackoverflow.com/users/5686555/cam-arri98"}, "edited": false, "score": 0, "creation_date": 1450279230, "post_id": 34312693, "comment_id": 56373080, "body": "I thought that it would create the header cells :/"}], "owner": {"reputation": 1, "user_id": 5686555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19737d0db2b4b859ee38db403c5fd98d?s=128&d=identicon&r=PG&f=1", "display_name": "cam_arri98", "link": "https://stackoverflow.com/users/5686555/cam-arri98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "closed_date": 1450276139, "answer_count": 0, "score": 0, "last_activity_date": 1450272131, "creation_date": 1450270594, "last_edit_date": 1450272131, "question_id": 34312693, "link": "https://stackoverflow.com/questions/34312693/linked-list-and-sparse-matrix-in-c", "closed_reason": "Duplicate", "title": "Linked list and sparse matrix in C", "body": "<p>I need to represent a sparse matrix using liked list in C:</p>\n\n<p>The structure definition is the following;</p>\n\n<pre><code>typedef struct matrix{\n  struct matrix *right;\n  struct matrix *below;\n  int rowptr, colptr;\n  double val;\n}Matrix;\n</code></pre>\n\n<p>I know that right is pointing to the next non-zero element of the row (below points to the non-zero element of the column).</p>\n\n<p>I need to define this functions:</p>\n\n<ol>\n<li><p>Matrix* initiate(void), which uses stdin to read the non-zero element from a .txt file (which only contains the non-zero values).</p></li>\n<li><p>void print(Matrix*), it prints the matrix using stdout.</p></li>\n<li><p>Matrix* add(Matrix*, Matrix*);</p></li>\n<li><p>void set_elemnt(Matrix* A, int i, int j, double x): assigns A(i,j)=x. </p></li>\n<li><p>double get_element(Matrix * A, int i, int j); returns A(i,j).</p></li>\n</ol>\n\n<p>I don't know hot to define the header cells (wich contain nothing), the other cells represents the non-zero values. \nThis image  in this link represent an idea of what I have to do: </p>\n\n<p><a href=\"https://i.stack.imgur.com/TMf3x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TMf3x.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>What I have so far:</p>\n\n<pre><code>Matrix* initiate(void){\n  Matrix *A=malloc(sizeof(*A));\n\n  A-&gt;rowptr=rowptr;\n  A-&gt;colptr=colptr;\n\n  A-&gt;right=malloc(rowptr * sizeof(*rowptr-&gt;right));\n  A-&gt;below=malloc(n * sizeof(*n-&gt;col));\n\n  return A;\n}\n</code></pre>\n\n<p>For the header (the one containing nothing), I tried to do this, but I have no idea if it is useful:</p>\n\n<pre><code>Matrix* initiate_1(void){\n   Matrix *A=malloc(sizeof(*A));\n   A-&gt;rowptr=-1;\n   A-&gt;colptr=-1;\n   A-&gt;val=nan;\n   A-&gt;right=A;\n   A-&gt;below=A;\n}\n</code></pre>\n\n<p>To add matrix:</p>\n\n<pre><code>Matrix* add(Matrix*,Matrix*){\n   int i;\n   Matrix *C = initiate(); //I don't know what to put here\n   for (int i = 0; ; i++) { //don't know what to put in the middle space\n                            // don't know what to put here\n   }\n}\n</code></pre>\n\n<p>Also, I think I can create a matrix with zeros only, but I'm not sure on how I can do that and if it is of any help.\nI would appreciate if you could help me with this, I barely understand data structures. Thank you!</p>\n"}, {"tags": ["c", "loops", "while-loop", "printf"], "comments": [{"owner": {"reputation": 841, "user_id": 1441090, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c85a81b706c1c8f51e2ea177531e9107?s=128&d=identicon&r=PG", "display_name": "Jorgel", "link": "https://stackoverflow.com/users/1441090/jorgel"}, "edited": false, "score": 4, "creation_date": 1450269400, "post_id": 34312190, "comment_id": 56365935, "body": "Try putting a newline on your printf"}, {"owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "reply_to_user": {"reputation": 841, "user_id": 1441090, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c85a81b706c1c8f51e2ea177531e9107?s=128&d=identicon&r=PG", "display_name": "Jorgel", "link": "https://stackoverflow.com/users/1441090/jorgel"}, "edited": false, "score": 0, "creation_date": 1450269660, "post_id": 34312190, "comment_id": 56366118, "body": "@Jorgel , putting a newline in printf worked. But , I am still confused about this behaviour . This is the first time I encountered this."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1450270072, "post_id": 34312190, "comment_id": 56366416, "body": "You have infinite loop - that is the &quot;first time&quot;. Even without newline it will work OK if you add <code>break</code> after <code>printf</code>."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1450270237, "post_id": 34312190, "comment_id": 56366549, "body": "<code>stdout</code> (to which <code>printf()</code> writes) is usually buffered and you usually won&#39;t see anything until you&#39;ve printed a line-feed (or called <code>fflush(stdout)</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1450269767, "post_id": 34312267, "comment_id": 56366187, "body": "So this problem is with the printf right ? from your ans I assume there is nothing wrong with the while loop or large volume of processing happening in the code."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1450269851, "post_id": 34312267, "comment_id": 56366246, "body": "Yes. Nothing wrong with the loop.But I wouldn&#39;t say it is a &quot;problem&quot;. There&#39;s a good reason why libc implementations do buffering: performance."}, {"owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1450270109, "post_id": 34312267, "comment_id": 56366444, "body": "either printf(&quot;3 seconds up\\n&quot;); or printf(&quot;\\n3 seconds up&quot;); didn&#39;t work. Even adding a new printf(&quot;\\n&quot;) just before the printf(&quot;3 seconds up\\n&quot;) didnt help. The code works properly if i put a printf(&quot;\\n&quot;) instead of the commented printf (//printf(&quot;%d\\n&quot;,ms-oldms );)  in code"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1450270147, "post_id": 34312267, "comment_id": 56366476, "body": "@kid The &quot;volume of processing&quot; is because of your infinite loop. There is no <code>sleep</code> in this loop and it is normal to get 100% CPU load."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "edited": false, "score": 0, "creation_date": 1450270777, "post_id": 34312267, "comment_id": 56366932, "body": "@kid <code>\\n</code> will work only if you printing on the console, not if you are doing some sort of redirection. For example, if you are doing <code>.&#47;a.out &gt; file</code> then not. So call <code>fflush(stdout);</code> after the printf statement."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 10, "last_activity_date": 1450269738, "last_edit_date": 1450269738, "creation_date": 1450269409, "answer_id": 34312267, "question_id": 34312190, "link": "https://stackoverflow.com/questions/34312190/c-while-loop-un-explained-behaviour/34312267#34312267", "title": "C- while loop un-explained behaviour", "body": "<p>Output buffering is the reason.</p>\n\n<p><code>stdout</code> is line buffered by default when attached to a terminal device. You can flush this out using <code>fflush(stdout);</code> or using <code>\\n</code> in <code>printf()</code> i.e. <code>printf(\"3 seconds up\\n\");</code>.\nor disabling it with <code>setbuf(stdout, 0);</code></p>\n\n<p>I/O is slow in general. So implementations use a fixed size buffer and printf once it gets full.\nIn practice, calling <code>fflush(stdout);</code> too often can affect performance. </p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1450377332, "creation_date": 1450377332, "answer_id": 34341844, "question_id": 34312190, "link": "https://stackoverflow.com/questions/34312190/c-while-loop-un-explained-behaviour/34341844#34341844", "title": "C- while loop un-explained behaviour", "body": "<p>the posted code has a couple of problems</p>\n\n<ol>\n<li>the variable <code>oldms</code> is not being set to any specific value before the elapsed time is being checked</li>\n<li>without either a call to <code>fflush(stdout);</code> or a trailing newline ('\\n') in the format string, nothing will be output (for a very long time, until the system stdout buffer is filled)</li>\n<li>for readability, the axiom <code>only one statement per line and (at most) one variable declaration per statement</code> is applied to the code</li>\n</ol>\n\n<p>the following code compiles cleanly and performs the desired operation</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    unsigned int ms;\n    unsigned int oldms = 0;\n    unsigned int dif;\n    struct timeval tv;\n\n    gettimeofday(&amp;tv, NULL);\n    oldms = tv.tv_sec;\n\n    while(1)\n    {\n        gettimeofday(&amp;tv, NULL);\n        ms=tv.tv_sec;\n        //printf(\"%d\\n\",ms-oldms );\n        dif=ms-oldms;\n\n        if(dif&gt;3)\n        {\n            printf(\"3 seconds up\\n\");\n            oldms=ms;\n        }\n    }\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 120, "user_id": 2305331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81b143c91bd7164cced4bfc5a1590520?s=128&d=identicon&r=PG", "display_name": "kid", "link": "https://stackoverflow.com/users/2305331/kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "accepted_answer_id": 34312267, "answer_count": 2, "score": 5, "last_activity_date": 1450377332, "creation_date": 1450269225, "question_id": 34312190, "link": "https://stackoverflow.com/questions/34312190/c-while-loop-un-explained-behaviour", "title": "C- while loop un-explained behaviour", "body": "<p>I am trying to run the following code :</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\nunsigned int ms, oldms = 0,dif;\nstruct timeval tv;\nwhile(1)\n{\n gettimeofday(&amp;tv, NULL);\n ms=tv.tv_sec; \n //printf(\"%d\\n\",ms-oldms );\n dif=ms-oldms;\n if(dif&gt;3)\n   {    \n        printf(\"3 seconds up\");\n        oldms=ms;\n   }\n }\n}\n</code></pre>\n\n<p>I am expecting it to print \"3 seconds up\" after every 3 seconds, but it doesn't display that message.\nI tried to debug it using gdb but nothing seems wrong and still no output.\nWhile trying to debug, I added a printf statement and magically the output can be seen.</p>\n\n<p>If I run the program after removing the  //printf(\"%d\\n\",ms-oldms ); statement , there is no output again.I am not sure what's happening and whether its dependant on anything.</p>\n\n<p>$gcc --version\ngcc (Ubuntu 4.8.2-19ubuntu1) 4.8.2</p>\n"}, {"tags": ["c", "header", "internal", "convention", "project-structure"], "comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1450270040, "post_id": 34312185, "comment_id": 56366388, "body": "naming two different things with the same name is confusing"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5258051"}, "reply_to_user": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1450270264, "post_id": 34312185, "comment_id": 56366568, "body": "@PeterMiehle Even with the directory appended like <code>xyz&#47;something.h</code>?"}, {"owner": {"reputation": 3753, "user_id": 451641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811b28e7b085e2e493fd32c5913a1ae8?s=128&d=identicon&r=PG", "display_name": "Frederik Deweerdt", "link": "https://stackoverflow.com/users/451641/frederik-deweerdt"}, "edited": false, "score": 0, "creation_date": 1450280586, "post_id": 34312185, "comment_id": 56374087, "body": "I think what you suggest is perfectly fine. The linux kernel uses a similar layout with the public <code>sched.h</code> under include/ and the private <code>sched.h</code> under kernel/sched"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5258051"}, "edited": false, "score": 0, "creation_date": 1450284172, "post_id": 34312185, "comment_id": 56376787, "body": "Alright! Then I&#39;ll use my layout. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 1722, "user_id": 1709658, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c88e1926e717bde5c2e8f0c4c5ec662b?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1709658/sam"}, "edited": false, "score": 1, "creation_date": 1522522575, "post_id": 35982035, "comment_id": 86190361, "body": "if the files have same names, how do you deal with the include-guard macros? They generally have same name as the file name. The private implementation code might need to include both public and private header."}, {"owner": {"reputation": 148, "user_id": 4459405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uKo_vuudAcY/AAAAAAAAAAI/AAAAAAAAYWo/oNAwWOd0V0M/photo.jpg?sz=128", "display_name": "Daniel Ching", "link": "https://stackoverflow.com/users/4459405/daniel-ching"}, "reply_to_user": {"reputation": 1722, "user_id": 1709658, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c88e1926e717bde5c2e8f0c4c5ec662b?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/1709658/sam"}, "edited": false, "score": 0, "creation_date": 1595537016, "post_id": 35982035, "comment_id": 111518046, "body": "@Sam, You can use <code>#pragma once</code> or use a different macro for each file."}], "tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": true, "score": 1, "last_activity_date": 1457941692, "creation_date": 1457941692, "answer_id": 35982035, "question_id": 34312185, "link": "https://stackoverflow.com/questions/34312185/c-internal-header-conventions-for-libraries/35982035#35982035", "title": "C internal header conventions for libraries", "body": "<p>I think what you suggest is perfectly fine. The linux kernel uses a similar layout with the public <code>sched.h</code> under include/ and the private <code>sched.h</code> under kernel/sched \u2013 Frederik Deweerdt</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5258051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 35982035, "answer_count": 1, "score": 3, "last_activity_date": 1457941692, "creation_date": 1450269216, "last_edit_date": 1450272384, "question_id": 34312185, "link": "https://stackoverflow.com/questions/34312185/c-internal-header-conventions-for-libraries", "title": "C internal header conventions for libraries", "body": "<p>Are there any conventions for seperating the public interface headers and internal headers? I've looked at some libraries and see that mostly the internal headers are in the <code>src</code> directory named <code>something-internal.h</code> and the public headers are in the <code>include</code> directory. I was thinking of something like this:</p>\n\n<p>(<code>xyz</code> is the library name)</p>\n\n<p><strong><code>include/xyz/something.h</code></strong>  (public interface)</p>\n\n<pre><code>struct something;\nvoid do_something(struct something *s);\n</code></pre>\n\n<p><strong><code>src/something.h</code></strong>  (internal header)</p>\n\n<pre><code>/* include public header */\n#include \"xyz/something.h\"\n\n/* struct definition in internal header for opaque struct */\nstruct something { int x, int y };\n</code></pre>\n\n<p><strong><code>src/something.c</code></strong>  </p>\n\n<pre><code>/* not xyz/something.h, but the private header in src/ */\n#include \"something.h\"\n\nvoid do_something(struct something *s) {\n        /* function definition */\n}\n</code></pre>\n\n<p>So note that I don't use the <code>-internal</code> suffix, because in my opinion if the header is in the <code>src</code> directory it's internal. Is this clear enough for, for example, new contributors? Or should the <code>-internal</code> suffix be added for clarity?</p>\n\n<p>`</p>\n"}, {"tags": ["c", "pointers", "return", "printf", "segmentation-fault"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1450269010, "post_id": 34312063, "comment_id": 56365670, "body": "In <code>getRandomMemory</code>: <code>rret[i] = ret[i];</code> - <code>ret</code> doesn&#39;t point to any properly initialized memory, so you have UB (also: <code>size_t l = strlen(ret) + 1;</code>)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450269075, "post_id": 34312063, "comment_id": 56365721, "body": "You <i>do</i> initialize <code>ret</code> to a proper string with proper termination?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450269131, "post_id": 34312063, "comment_id": 56365767, "body": "Can you tell us (or rather <i>show</i> us) what <code>getMemory</code> does?"}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450269311, "post_id": 34312063, "comment_id": 56365877, "body": "Yes, ret is initialized. That&#39;s just a ton of code, so I snipped it. You can see that it&#39;s correct cause of the <code>printf(&quot;--- %s ---\\n&quot;, rret);</code> statement, which gets printed successfully.  Will edit the question and add getMemory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1450269516, "post_id": 34312063, "comment_id": 56366008, "body": "Unfortunately, seemingly correct behavior is one of the possible results of undefined behavior. Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us, as it is now it&#39;s impossible to do anything but guess."}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450270751, "post_id": 34312063, "comment_id": 56366915, "body": "@JoachimPileborg I am trying to create such an example but the code in there (which is nothing but copy&amp;paste) runs just fine, so the verifiable part is where I stuck."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450270796, "post_id": 34312063, "comment_id": 56366945, "body": "<code>char *rret = getMemory(sizeof(char) * l);</code>?  <code>sizeof( char )</code> is <code>1</code> by definition."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1450271693, "post_id": 34312063, "comment_id": 56367611, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450272137, "post_id": 34312063, "comment_id": 56367929, "body": "@Olaf I&#39;m trying to create such an example while we speak but I can&#39;t as the example (which is nothing more than copy&amp;pasted code) works like a charm. What I&#39;m doing right now is either removing code from the program or copying from the program to the example but no matter what, the example works while the program crashes."}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450281035, "post_id": 34312063, "comment_id": 56374460, "body": "Okay, so instead of creating an example I first wanted to get the main program as good as possible, so I used valgrind to detect all memory errors. Now the program runs perfectly fine in valgrind (no crashes, no leaks) but if I start it without valgrind it&#39;s still crashing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450284886, "post_id": 34312063, "comment_id": 56377212, "body": "@Thomas It still crashes when you run in a debugger? Then maybe you could try stepping through the code line by line until it crashes? It might be a lot of stepping, especially if it doesn&#39;t crash on the first run through the code in question, but hopefully you will see something that can give you a hint to what the problem might be."}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450286608, "post_id": 34312063, "comment_id": 56378250, "body": "@JoachimPileborg In valgrind it doesn&#39;t crash but in gdb it does. This is how the thread currently looks like: <a href=\"http://pastie.org/10636461\" rel=\"nofollow noreferrer\">pastie.org/10636461</a> - the output: <a href=\"http://pastie.org/10636462\" rel=\"nofollow noreferrer\">pastie.org/10636462</a> so I already know the exact line it&#39;s crashing (the printf. The NULL check right before the printf is fine). gdb shows exactly the same stacktrace (except that the line number in think.c has changed) as shown above."}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450296815, "post_id": 34312063, "comment_id": 56384097, "body": "A bit more debugging: I added print statements ( <a href=\"http://pastie.org/10636726\" rel=\"nofollow noreferrer\">pastie.org/10636726</a> ) and the result looks like <code>Before: 7f63d8000bb0 After: ffffffffd8000bb0</code> or <code>Before: 7f462c000bb0 After: 2c000bb0</code> which leads me to believe there&#39;s something writing zeros or ones partly in the memory holding the pointer address. But valgrind doesn&#39;t show any such behavior and there&#39;s no other code running in between these two print statements (the main thread is waiting for input from <code>fgets</code>/stdin and there is no other child)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450270793, "post_id": 34312439, "comment_id": 56366941, "body": "Thanks for the heads up but the program is crashing before it reaches the call to <code>freeMemory</code>."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450271204, "post_id": 34312439, "comment_id": 56367239, "body": "I see.  Not sure what&#39;s going on, but I also noticed that you sometimes assign a fixed <code>&quot;NULL&quot;</code> string to <code>think</code> before freeing it.  That will also cause a memory error.  But it looks like your problem occurs prior to that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450271447, "post_id": 34312439, "comment_id": 56367438, "body": "@Thomas And you haven&#39;t called <code>freeMemory</code> the wrong way <i>before</i> this code? You don&#39;t run your code in a loop?"}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450272379, "post_id": 34312439, "comment_id": 56368088, "body": "@JoachimPileborg No, <code>freeMemory</code> is not called before. Yes, this code does run in a loop, well, more of a recursive thread. But threading also doesn&#39;t seem to be the problem. In case you want to have a look, this is my example code till now: <a href=\"http://pastie.org/10635991\" rel=\"nofollow noreferrer\">pastie.org/10635991</a> ... it also works with the threads but does everything correctly."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "edited": false, "score": 0, "creation_date": 1450273285, "post_id": 34312439, "comment_id": 56368692, "body": "@Thomas You create threads recursively, <i>when</i> do the crash happen, in the first thread? The second? After many threads? Maybe it&#39;s just resource exhaustion by creating to many threads? Oh, and you <i>do</i> free the memory you allocate in the main loop? :)"}, {"owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450284061, "post_id": 34312439, "comment_id": 56376716, "body": "@JoachimPileborg I changed that so it&#39;s using just one thread with a loop inside instead but yes, it crashes when the thread runs for the first time. For now I rewrote a lot and startet to use valgrind heavily: No leaks, no race conditions but still it crashes when running without valgrind (yes, inside of valgrind it runs perfectly fine //EDIT: Yes, I also used helgrind)."}], "tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 1, "last_activity_date": 1450269869, "creation_date": 1450269869, "answer_id": 34312439, "question_id": 34312063, "link": "https://stackoverflow.com/questions/34312063/c-returning-char-from-a-function-crashes-printf/34312439#34312439", "title": "C: Returning char* from a function crashes printf", "body": "<p>The problem is your call to <code>freeMemory</code>:</p>\n\n<pre><code>freeMemory(think);\n</code></pre>\n\n<p>You've coded that function to take the address of the pointer to the memory to be freed, rather than the pointer itself.  So you need to call it with:</p>\n\n<pre><code>freeMemory(&amp;think);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450271532, "post_id": 34312809, "comment_id": 56367497, "body": "Look at how the OP calculates the length of the string, and how the OP copies. If there&#39;s a terminator in the original string it will be copied. But yes the OP should have used <code>strcpy</code> instead."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": -1, "last_activity_date": 1450290343, "last_edit_date": 1450290343, "creation_date": 1450270954, "answer_id": 34312809, "question_id": 34312063, "link": "https://stackoverflow.com/questions/34312063/c-returning-char-from-a-function-crashes-printf/34312809#34312809", "title": "C: Returning char* from a function crashes printf", "body": "<p>[Deleted misstated assertion]</p>\n\n<p>Why not use <code>strcpy()</code>?</p>\n"}], "owner": {"reputation": 11, "user_id": 5686562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TndZm.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5686562/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450290343, "creation_date": 1450268854, "last_edit_date": 1450269339, "question_id": 34312063, "link": "https://stackoverflow.com/questions/34312063/c-returning-char-from-a-function-crashes-printf", "title": "C: Returning char* from a function crashes printf", "body": "<p>So here's the code containing the <code>printf</code> (with line numbers, this is from think.c):</p>\n\n<pre><code>30: char *think = getRandomMemory();\n31: printf(\"\\33[2K\\r\");\n32: if(think == NULL)\n33:     think = \"NULL\";\n34: printf(\"I have an idea: %s\\n\", think);\n35: parse(think);\n36: freeMemory(think);\n37: printf(\"&gt; \");\n</code></pre>\n\n<p>And the code from <code>getRandomMemory()</code> which makes sure the returned pointer points to heap allocated space:</p>\n\n<pre><code>char *getRandomMemory()\n{\n    char *ret;\n\n    // --SNIP--\n\n    size_t l = strlen(ret) + 1;\n    char *rret = getMemory(sizeof(char) * l);\n    for(int i = 0; i &lt; l; i++)\n        rret[i] = ret[i];\n    printf(\"--- %s ---\\n\", rret);\n    return rret;\n}\n</code></pre>\n\n<p>And finally this is what gdb gives me when running this. Please note that the \"--- test ---\" comes from \"   <code>printf(\"--- %s ---\\n\", rret)</code>\" above:</p>\n\n<pre><code>(gdb) run\nStarting program: /home/v10lator/Private/projekte/KI/Lizzy \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nLoading Lizzy 0.1... Done!\n\n&gt; --- test ---\n[New Thread 0x7ffff781f700 (LWP 32359)]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7ffff781f700 (LWP 32359)]\n0x00007ffff7869490 in _IO_vfprintf_internal (s=&lt;optimized out&gt;, format=&lt;optimized out&gt;, \nap=ap@entry=0x7ffff781ee68) at vfprintf.c:1642\n1642    vfprintf.c: Datei oder Verzeichnis nicht gefunden.\n(gdb) bt\n#0  0x00007ffff7869490 in _IO_vfprintf_internal (s=&lt;optimized out&gt;, format=&lt;optimized out&gt;, \nap=ap@entry=0x7ffff781ee68) at vfprintf.c:1642\n#1  0x00007ffff7919235 in ___printf_chk (flag=1, format=&lt;optimized out&gt;) at printf_chk.c:35\n#2  0x00000000004016bc in printf () at /usr/include/bits/stdio2.h:104\n#3  run (first=&lt;optimized out&gt;) at think.c:34\n#4  0x00007ffff7bc64c6 in start_thread (arg=0x7ffff781f700) at pthread_create.c:333\n#5  0x00007ffff790a86d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n</code></pre>\n\n<p>I really don't know what's wrong here, so hopefully someone sees the mistake.</p>\n\n<p>//EDIT: Forgot the getMemory/freeMemory functions:</p>\n\n<pre><code>/*\n  * This allocates memory.\n  * The difference between usig malloc directly is that this function will\n  * print an error and exit the program in case something bad happens.\n  */\nchar *getMemory(size_t size)\n{\n    char *mem = malloc(size);\n    if(mem == NULL)\n        crashWithMsg(\"Internal error (malloc failed)!\");\n    return mem;\n}\n\n/*\n * This deallocates memory.\n * The difference between using free directly is that this function will\n * set the pointer to NULL afterwards.\n */\nvoid freeMemory(void **ptr)\n{\n    free(*ptr);\n    *ptr = NULL;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 12976, "user_id": 1758762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Nt89f.jpg?s=128&g=1", "display_name": "Leo Chapiro", "link": "https://stackoverflow.com/users/1758762/leo-chapiro"}, "edited": false, "score": 0, "creation_date": 1450267529, "post_id": 34311546, "comment_id": 56364605, "body": "What is the goal to hold the child alive if the parent process is dead?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1450267532, "post_id": 34311546, "comment_id": 56364607, "body": "What signal is the child process getting to kill it?"}, {"owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "edited": false, "score": 1, "creation_date": 1450267797, "post_id": 34311546, "comment_id": 56364784, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3095566/linux-daemonize\">Linux daemonize</a>"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1450268064, "post_id": 34311546, "comment_id": 56364981, "body": "There are no threads here, only processes."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1450268331, "post_id": 34311546, "comment_id": 56365174, "body": "Why does the child gets signalled at all when the parent ends?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1450268377, "post_id": 34311546, "comment_id": 56365211, "body": "It usually doesn&#39;t, but ctrl+c sends sigint to the whole foreground process-group, not just to the parent process. The OP could try to use setsid() instead of trying to catch the signal."}, {"owner": {"reputation": 865, "user_id": 1501127, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/PtrKU.png?s=128&g=1", "display_name": "user1501127", "link": "https://stackoverflow.com/users/1501127/user1501127"}, "edited": false, "score": 0, "creation_date": 1450268971, "post_id": 34311546, "comment_id": 56365646, "body": "The parent proccess allready catches SIGINT and so i want the same as now the children dies."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1450269088, "post_id": 34311546, "comment_id": 56365732, "body": "do you by chance exec*() after the fork()? This will reset all signal handlers to default"}, {"owner": {"reputation": 865, "user_id": 1501127, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/PtrKU.png?s=128&g=1", "display_name": "user1501127", "link": "https://stackoverflow.com/users/1501127/user1501127"}, "edited": false, "score": 0, "creation_date": 1450270412, "post_id": 34311546, "comment_id": 56366684, "body": "Yes! ahh so thats it then, i do execvp(). But should not the sig* in parent/child code work for the new proccess?"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 1, "creation_date": 1450271673, "post_id": 34311546, "comment_id": 56367593, "body": "File handles, env vars, and process groups are kernel properties. Signal handers are user-space properties. Nothing user-space survives exec."}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 5596957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f27d0deda60ca2443d4b367b0e4bacf?s=128&d=identicon&r=PG&f=1", "display_name": "Duane McCully", "link": "https://stackoverflow.com/users/5596957/duane-mccully"}, "is_accepted": true, "score": 2, "last_activity_date": 1450282049, "creation_date": 1450282049, "answer_id": 34316750, "question_id": 34311546, "link": "https://stackoverflow.com/questions/34311546/stop-child-from-reciving-sigint-from-parent-proccess/34316750#34316750", "title": "Stop child from reciving SIGINT from parent proccess", "body": "<p><code>SIGINT</code> is sent to the entire process group.  Try using <code>setpgrp();</code> in the child process to put it into a different process group.</p>\n"}], "owner": {"reputation": 865, "user_id": 1501127, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/PtrKU.png?s=128&g=1", "display_name": "user1501127", "link": "https://stackoverflow.com/users/1501127/user1501127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 34316750, "answer_count": 1, "score": 2, "last_activity_date": 1450282049, "creation_date": 1450267384, "last_edit_date": 1450268956, "question_id": 34311546, "link": "https://stackoverflow.com/questions/34311546/stop-child-from-reciving-sigint-from-parent-proccess", "title": "Stop child from reciving SIGINT from parent proccess", "body": "<p>I have been trying to prevent my parent thread from killing the child proccess if the parent proccess recives a ctrl-C signal. I have run out of ideas. </p>\n\n<p>The parent proccess allready catches SIGINT and so i want the same as now the children dies.</p>\n\n<pre><code>  int main() {\n       pid_t pid;\n\n       pid = fork();\n\n       if(pid &gt; 0) {\n          /*Parent proccess*/\n          [...other code...]\n       } else {\n          /*Child proccess*/\n\n           signal(SIGINT, SIG_IGN);     //does not work\n           sigaction(SIGINT, &amp;action, 0);  //does not work either\n           [...other code...]\n       }\n\n  }\n</code></pre>\n\n<p>Ideas?</p>\n"}, {"tags": ["c", "multiprocessing", "signals"], "comments": [{"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 4, "creation_date": 1450267417, "post_id": 34311465, "comment_id": 56364539, "body": "For a start printf is not async safe, so you can&#39;t use it in a signal handler... See: <a href=\"http://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler\" title=\"how to avoid using printf in a signal handler\">stackoverflow.com/questions/16891019/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1450268788, "post_id": 34311803, "comment_id": 56365506, "body": "I don&#39;t understand why the child process will do handler_do_nothing..? In child process, I have registered handler..?"}, {"owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "reply_to_user": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 1, "creation_date": 1450268930, "post_id": 34311803, "comment_id": 56365619, "body": "@KennyYang the main process runs in parallel with the child process, so it can get to <code>kill</code> before the child process gets to <code>sigaction</code>."}], "tags": [], "owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 1, "last_activity_date": 1450268162, "creation_date": 1450268162, "answer_id": 34311803, "question_id": 34311465, "link": "https://stackoverflow.com/questions/34311465/signal-handler-showing-confusion-in-c/34311803#34311803", "title": "signal handler showing confusion in C", "body": "<p>Your child processes are being signalled before they have had time (i.e. execution resource scheduled) to install the new signal handler.</p>\n\n<p>This means that when the main program sends <code>SIGUSR1</code>, some subset of the child processes will still have <code>handler_do_nothing</code> installed.</p>\n\n<p>If you want to wait until the child processes have all finished setting up, you will need to add some interprocess communication mechanism - e.g. the children could signal the parent process when they are ready.</p>\n"}], "owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 34311803, "answer_count": 1, "score": 0, "last_activity_date": 1450268162, "creation_date": 1450267132, "question_id": 34311465, "link": "https://stackoverflow.com/questions/34311465/signal-handler-showing-confusion-in-c", "title": "signal handler showing confusion in C", "body": "<p>I am trying to use signal to sync N processes then print out something.\nEach child process register a handler which print \"yo\" and \"hihi\" when catching SIGUSR1.\nI use kill(0, SIGUSR1) to trigger every process. Since the default action for catching SIGUSR1 is being killed, I set a do-nothing handler for the main process so that it will wait all child died.</p>\n\n<p>The fork and send signal program will repeat for k times, I expect it will show out N*k times \"yo\" and \"hihi\". However, it doesn't show enough \"yo\" and \"hihi\" as I expect. The number of \"yo\" is different every execution.</p>\n\n<p>Here is my code, and thanks for your help!</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;sys/wait.h&gt;\n    #include &lt;time.h&gt;\n    #include &lt;signal.h&gt;\n    #include &lt;sys/time.h&gt;\n    #include &lt;string.h&gt;\n    #define N 3 \n    int pid_id[N];\n\n    void handler2 (int signum)\n    {\n        printf(\"hihi\\n\");\n    }\n\n    void handler (int signum)\n    {\n        signal(SIGUSR2, handler2); \n        printf(\"yo\\n\");\n        raise(SIGUSR2);\n    }\n\n    void handler_do_nothing (int signum)\n    {\n        ;\n    }\n\n    void child(int process_index)\n    {\n        struct sigaction sa;\n\n        /* Register */\n        memset(&amp;sa, 0, sizeof(sa));\n        sa.sa_handler = handler;\n        sigaction(SIGUSR1, &amp;sa, NULL);\n\n        printf(\"I am %d.\\n\", getpid());\n        pid_id[process_index] = getpid();\n        sleep(1);\n\n        exit(0);\n    }\n\n    int main()\n    {\n        int i, k, status;\n        pid_t pid[N];\n        pid_t pid_wait;\n\n        struct sigaction sa_main;\n\n        /* Register */    /* Main process will terminate if catch SIGUSR1 by default setting*/ \n        memset(&amp;sa_main, 0, sizeof(sa_main));\n        sa_main.sa_handler = handler_do_nothing;\n        sigaction(SIGUSR1, &amp;sa_main, NULL);\n\n        /* Race k times */\n        for (k=0;k&lt;3;k++) \n        {\n\n            for (i=0;i&lt;N;i++)\n            {\n                pid[i] = fork();\n                if (pid[i]==0)\n                {\n                    child(i);\n                }\n            }\n\n             // sleep();\n             kill(0, SIGUSR1);\n\n            for (i=0;i&lt;N;i++)\n            {\n                do\n                {\n                    pid_wait = waitpid(pid[i], &amp;status, WNOHANG);\n                    printf(\"I am waiting..\\n\");\n                    sleep(1);\n                }while(pid_wait != pid[i]);\n            }\n        }\n        printf(\"all done\\n\");\n\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "memory", "linux-kernel", "network-programming", "buffer"], "comments": [{"owner": {"reputation": 8686, "user_id": 268025, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb39f8801f5c6b47bab7d5e91bf513f4?s=128&d=identicon&r=PG", "display_name": "tangrs", "link": "https://stackoverflow.com/users/268025/tangrs"}, "edited": false, "score": 1, "creation_date": 1450267625, "post_id": 34311320, "comment_id": 56364677, "body": "You may want to post some sort of code..."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1450349170, "post_id": 34311320, "comment_id": 56406592, "body": "You may store <code>-&gt;head</code> field of <code>skb</code> somewhere and set the field to NULL before calling <code>kfree_skb</code>. Note, that you is allowed do that only when there is no other users of this <code>skb</code> instance. When data becomes unneded, call <code>kfree()</code> for stored pointer."}], "answers": [{"tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": false, "score": 0, "last_activity_date": 1519213551, "last_edit_date": 1519213551, "creation_date": 1516980432, "answer_id": 48464384, "question_id": 34311320, "link": "https://stackoverflow.com/questions/34311320/how-to-free-skb-buffer-without-freeing-data-pointer-pointed-by-it/48464384#48464384", "title": "How to free skb buffer without freeing data pointer pointed by it?", "body": "<pre><code>skb-&gt;cloned = 1;\natomic_inc(&amp;(skb_shinfo(skb)-&gt;dataref));\n\ngive_skb_to_function_that_might_free_it(skb);\n</code></pre>\n\n<p>Now <code>kfree_skb</code> and friends will think another socket buffer has a reference on the data and free only the <code>struct sk_buff</code>. Don't forget to free the data yourself later on though!</p>\n\n<p>EDIT: Alternatively, set <code>skb-&gt;head = NULL</code> inside the SKB's <code>.destructor</code>...</p>\n"}], "owner": {"reputation": 3662, "user_id": 2346402, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0e30f814ad681056b998d16e385fd7f?s=128&d=identicon&r=PG", "display_name": "Chinna", "link": "https://stackoverflow.com/users/2346402/chinna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1519213551, "creation_date": 1450266674, "last_edit_date": 1450267570, "question_id": 34311320, "link": "https://stackoverflow.com/questions/34311320/how-to-free-skb-buffer-without-freeing-data-pointer-pointed-by-it", "title": "How to free skb buffer without freeing data pointer pointed by it?", "body": "<p>I have a situation where i have to free only <code>skb</code> structure itself but not data pointer. I'm reusing data pointer in my driver. Please note that, <code>skb</code> is not a clone.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1450266456, "post_id": 34311148, "comment_id": 56363895, "body": "Judging by the file name&#39;s extension, your file seems to be a text file, but you are reading binary data with <code>fread</code>. You want <code>fscanf</code> or a combination of <code>fgets</code> and <code>sscanf</code> or <code>strtok</code>plus <code>strtol</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1450266594, "post_id": 34311148, "comment_id": 56364000, "body": "Also, you&#39;re not checking for errors in most of your library calls."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1450267738, "post_id": 34311148, "comment_id": 56364747, "body": "Also <code>fread(a, 1, n, fp);</code> --&gt; <code>fread(a, sizeof(int), n, fp);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5549058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f45d57791ce1800d8e9e311fdc53443?s=128&d=identicon&r=PG&f=1", "display_name": "ram", "link": "https://stackoverflow.com/users/5549058/ram"}, "edited": false, "score": 0, "creation_date": 1450279967, "post_id": 34312330, "comment_id": 56373618, "body": "Thank you for you valuable input.. But in the above code you are not using fread.. function.."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 21, "user_id": 5549058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f45d57791ce1800d8e9e311fdc53443?s=128&d=identicon&r=PG&f=1", "display_name": "ram", "link": "https://stackoverflow.com/users/5549058/ram"}, "edited": false, "score": 0, "creation_date": 1450286682, "post_id": 34312330, "comment_id": 56378292, "body": "Yes, because <code>fread</code> is not the function to use here. It&#39;s a bit like saying &quot;Thanks for fastening that screw, but you didn&#39;t use the hammer.&quot;"}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1450269580, "creation_date": 1450269580, "answer_id": 34312330, "question_id": 34311148, "link": "https://stackoverflow.com/questions/34311148/using-file-handling-read-integers-from-file-and-display-data-in-array/34312330#34312330", "title": "Using file handling read integers from file and display data in array", "body": "<p>Your file is a text file, which is human-readabla and can be edited in text editors. You treat it like a binary file, which stores data in the same way it is stored in the memory. Such files are compact and fast to read, but not easily editable or readable by humans.</p>\n\n<p>The C standard provides different functions to deal with these file types. <code>fwrite</code> and <code>fread</code> are for binary files. <code>fprintf</code>, <code>fscanf</code>, <code>fgets</code> and so on are for text files.</p>\n\n<p>There are several ways to parse your input and SO is full of examples. A cheap way to read data is <code>fscanf</code>. It ignores new-lines and just treats them as white space. It is not a good way to read input if you have more complex data or if you need good eror handling, but for your small example, it will do. Your input doesn't seem to be organised in lines.</p>\n\n<p>The code below defines the function <code>scan_int</code>, which reads a number of integers from a file. The <code>main</code> function shows how to use this function.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n/*\n *      Read at most max integers from a file and store them in arr.\n *      Return the number of integers read or -1 on file access error.\n *      Numbers may or may not be separated with commas.\n */\nint scan_int(const char *fn, int arr[], int max)\n{\n    FILE *f = fopen(fn, \"r\");\n    int n = 0;\n\n    if (f == NULL) return -1;\n\n    while (n &lt; max &amp;&amp; fscanf(f, \"%d,\", &amp;arr[n]) == 1) n++;\n    fclose(f);\n\n    return n;\n}\n\nint main(void)\n{\n    int a[10];\n    int i, n;\n\n    n = scan_int(\"data.txt\", a, 10);\n\n    for (i = 0; i &lt; n; i++) {\n        if (i) printf(\", \");\n        printf(\"%d\", a[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5549058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f45d57791ce1800d8e9e311fdc53443?s=128&d=identicon&r=PG&f=1", "display_name": "ram", "link": "https://stackoverflow.com/users/5549058/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450269580, "creation_date": 1450266216, "last_edit_date": 1450266370, "question_id": 34311148, "link": "https://stackoverflow.com/questions/34311148/using-file-handling-read-integers-from-file-and-display-data-in-array", "title": "Using file handling read integers from file and display data in array", "body": "<pre><code># include &lt;stdio.h&gt;\n\nmain()\n{\n    FILE *fp;\n    int a[10], n, i;\n    char file_name[20];\n\n    printf(\"enter the file name \\n\");\n    scanf(\"%s\", file_name);\n    printf(\"enter number of integers \\n\");\n    scanf(\"%d\", &amp;n);\n    fp = fopen(file_name, \"rb\");\n    if (fp == NULL) {\n        printf(\"Error in opening file \\n\");\n        return;\n    }\n    fread(a, 1, n, fp);\n    for (i = 0; i &lt; n; i++) {\n        printf(\"%d \\n\", a[i]);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>enter the file name       /home/n/t1.txt      enter number of integers \n3     1540736144      1540736144      1540736144..  </p>\n\n<p>In file t1.txt , i have entered the intergers {10,20,30,40.50}\nand stored in path /home/n/t1.txt..</p>\n\n<p>But in output it is displaying some junk addresses..\nKindly guide me how to display the integers stored in file..</p>\n"}, {"tags": ["c", "gtk", "gtk2"], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 5404160, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1126798840683221/picture?type=large", "display_name": "\u0645\u062d\u0645\u062f \u0627\u062d\u0633\u0627\u0646 \u0627\u0644\u062d\u0642", "link": "https://stackoverflow.com/users/5404160/%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d8%ad%d8%b3%d8%a7%d9%86-%d8%a7%d9%84%d8%ad%d9%82"}, "edited": false, "score": 0, "creation_date": 1450266179, "post_id": 34311052, "comment_id": 56363687, "body": "I still don&#39;t get it, can you specify with an example, the second part."}, {"owner": {"reputation": 68, "user_id": 5404160, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1126798840683221/picture?type=large", "display_name": "\u0645\u062d\u0645\u062f \u0627\u062d\u0633\u0627\u0646 \u0627\u0644\u062d\u0642", "link": "https://stackoverflow.com/users/5404160/%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d8%ad%d8%b3%d8%a7%d9%86-%d8%a7%d9%84%d8%ad%d9%82"}, "edited": false, "score": 0, "creation_date": 1450338183, "post_id": 34311052, "comment_id": 56399678, "body": "It isn&#39;t working, by example I meant an entire function or something like that by which I could understand."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 3, "last_activity_date": 1450266369, "last_edit_date": 1450266369, "creation_date": 1450265899, "answer_id": 34311052, "question_id": 34311010, "link": "https://stackoverflow.com/questions/34311010/limiting-values-in-gtkentry/34311052#34311052", "title": "Limiting values in GtkEntry", "body": "<ol>\n<li>You can attach a function to handle the <a href=\"https://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-key-press-event\" rel=\"nofollow\">key-press-event</a>, and in that function you can filter the keys. This way you can block any keypresses that you don't want to affect the content of the GtkEntry.</li>\n<li><p>You can use <a href=\"https://developer.gnome.org/gtk3/stable/GtkEntry.html#gtk-entry-get-text\" rel=\"nofollow\"><code>gtk_entry_get_text()</code></a> to get the text, then of course for an integer you need to convert using e.g. <code>strtol()</code> or some other regular string-to-integer function:</p>\n\n<p><code>const char *text = gtk_entry_get_text(entry1);\nconst long value = strtol(text, NULL, 10);\nprintf(\"the value is %ld\\n\", value);</code></p>\n\n<p>The above isn't 100% rock-solid, you can use the middle argument to <code>strtol()</code> to make it better but I omitted it for brevity and topicality.</p></li>\n</ol>\n"}], "owner": {"reputation": 68, "user_id": 5404160, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1126798840683221/picture?type=large", "display_name": "\u0645\u062d\u0645\u062f \u0627\u062d\u0633\u0627\u0646 \u0627\u0644\u062d\u0642", "link": "https://stackoverflow.com/users/5404160/%d9%85%d8%ad%d9%85%d8%af-%d8%a7%d8%ad%d8%b3%d8%a7%d9%86-%d8%a7%d9%84%d8%ad%d9%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 34311052, "answer_count": 1, "score": 3, "last_activity_date": 1450337077, "creation_date": 1450265769, "last_edit_date": 1450337077, "question_id": 34311010, "link": "https://stackoverflow.com/questions/34311010/limiting-values-in-gtkentry", "title": "Limiting values in GtkEntry", "body": "<p>How do I limit the gtkEntry only to numbers and also how to store the value entered by the user for further calculation.</p>\n\n<pre><code>entry1 = gtk_entry_new();\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 4, "creation_date": 1450262071, "post_id": 34309613, "comment_id": 56360811, "body": "As a rule of thumb: signed arithmetic suffers from (potential) overflow; unsigned arithmetic <i>cannot</i> overflow (since performed modulo 2^N)."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1450263021, "post_id": 34309613, "comment_id": 56361494, "body": "Case 2 is not correct either... due to overflow as for case 1"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1450264988, "post_id": 34309613, "comment_id": 56362875, "body": "@LPs - the output of case 2 seems correct though. That&#39;s my question, overflow doesn&#39;t seem to happen in this case"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1450265273, "post_id": 34309613, "comment_id": 56363046, "body": "It is not correct because of <code>0x80000000=2147483648</code> that multiply by 2 should be <code>0x100000000=4294967296</code>. Then -1 should be <code>0xFFFFFFFF=4294967295</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1450266845, "post_id": 34309613, "comment_id": 56364155, "body": "@Jens On a C level, this has not really anything to do with arithmetic overflow. There&#39;s a special rule for shifts saying that &quot;If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.&quot; Regardless of signedness and value, so your rule of thumb does not apply. On the assembler level though, such shift operations might work just fine."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450267044, "post_id": 34309613, "comment_id": 56364298, "body": "@artm For unsigned types, the max value can easily be obtained like this: <code>unsigned some_t max = ~(some_t)0;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450280148, "post_id": 34309613, "comment_id": 56373743, "body": "@Lundin Is there a case where the max value of some unsigned type is not found with <code>some_unsigned_type max = -1;</code>?"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450314964, "post_id": 34309613, "comment_id": 56391870, "body": "@Lundin - indeed cannot be simpler than that, <code>printf( &quot;ULONG_MAX (1) = %lu\\n&quot;, ~0L );</code> - thanks"}], "answers": [{"comments": [{"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 0, "creation_date": 1450265150, "post_id": 34309973, "comment_id": 56362972, "body": "Thanks. I agree case 1 is undefined. Is case 2 correct? <code>2*( 1UL &lt;&lt; ( long_bits - 1 ) )</code> appears more than what a <code>long</code> type can hold, so I wonder why it works here"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "edited": false, "score": 1, "creation_date": 1450265522, "post_id": 34309973, "comment_id": 56363222, "body": "@artm That case is undefined, too. Why don&#39;t you just do <code>(unsigned long)-1L</code>?"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 4, "last_activity_date": 1450262903, "creation_date": 1450262903, "answer_id": 34309973, "question_id": 34309613, "link": "https://stackoverflow.com/questions/34309613/when-left-shift-isnt-the-same-as-multiply-by-2/34309973#34309973", "title": "When left shift isn&#39;t the same as multiply by 2", "body": "<p>The behaviour of left-shifting a value is only defined if the amount you are left-shifting by is less than the size of the type. Therefore, <code>1UL &lt;&lt; long_bits</code> is undefined behaviour and anything can happen, including d\u00e6mons flying out of your nose.</p>\n\n<p>Let <code>n</code> be the number of bits in the type we are working with. In practice, depending on platform, there are two behaviours that happen in this case: Either, any left-shift by <code>n</code> or more produces <code>0</code> (as the whole bit-pattern is shifted out), or the left-shift is reduced modulo <code>n</code>, so a left-shift by <code>n</code> places behaves like a left shift by <code>0</code> places, yielding <code>1UL &lt;&lt; 0</code> or <code>1</code>.</p>\n"}], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1450315408, "creation_date": 1450261886, "last_edit_date": 1450315408, "question_id": 34309613, "link": "https://stackoverflow.com/questions/34309613/when-left-shift-isnt-the-same-as-multiply-by-2", "title": "When left shift isn&#39;t the same as multiply by 2", "body": "<p>I attempted KR exercise 2.1 - determine the range of <code>long</code> variables by direct calculation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint main()\n{\n    unsigned short long_bits =  sizeof( long ) * CHAR_BIT;\n    printf( \"LONG_MAX   = %ld\\n\", ( 1L &lt;&lt; ( long_bits - 1 ) ) - 1 );\n    printf( \"LONG_MIN   = %ld\\n\", ( -1 ) * ( 1L &lt;&lt; ( long_bits - 1 ) ) );\n    printf( \"ULONG_MAX (1) = %lu\\n\", ( 1UL &lt;&lt; long_bits ) - 1 );    // doesn't work\n\n    printf( \"ULONG_MAX (2) = %lu\\n\", 2*( 1UL &lt;&lt; ( long_bits - 1 ) ) - 1 );  // work\n    printf( \"\\n\" );\n}\n</code></pre>\n\n<ul>\n<li><code>ULONG_MAX (1) = 0</code> is wrong because the left shift overflow I suppose.</li>\n<li><code>ULONG_MAX (2) = 18446744073709551615</code> seems correct by replacing the last left shift with a multiply by 2.</li>\n</ul>\n\n<p>So it appears that left shift operator suffers from overflow, but multiplication does not? Does this intermediate calculation <code>2*( 1UL &lt;&lt; ( long_bits - 1 ) )</code> <em>promote</em> to some type more than <code>long</code>? In my machine, <code>long</code> and <code>long long</code> are exactly the same ( 8 Bytes ).</p>\n\n<hr>\n\n<p>Edit:\nAs Lundin pointed out, all needed for <code>ULONG_MAX</code> is <code>printf( \"ULONG_MAX = %lu\\n\", ~0L );</code></p>\n\n<p>Using left shift in this case caused UB, and multiply by 2 is potentially UB, too (although result of case 2 looks correct).</p>\n"}, {"tags": ["c", "swift", "pointers", "struct"], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 5479283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c7c034022c907b54d4f92c86c1d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/5479283/cindy"}, "edited": false, "score": 0, "creation_date": 1450264388, "post_id": 34309879, "comment_id": 56362461, "body": "withUnsafeMutablePointer(&amp;b) { (b) -&gt; Void in             a.test = b.memory         }"}, {"owner": {"reputation": 275, "user_id": 5479283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c7c034022c907b54d4f92c86c1d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/5479283/cindy"}, "edited": false, "score": 0, "creation_date": 1450264439, "post_id": 34309879, "comment_id": 56362492, "body": "Then I get error: Cannot convert value of type &#39;inout testB&#39; to expected argument type &#39;inout _&#39;"}, {"owner": {"reputation": 13124, "user_id": 3441734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45c3ad8f37b8f5df5a1fc01891e18119?s=128&d=identicon&r=PG&f=1", "display_name": "user3441734", "link": "https://stackoverflow.com/users/3441734/user3441734"}, "reply_to_user": {"reputation": 275, "user_id": 5479283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c7c034022c907b54d4f92c86c1d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/5479283/cindy"}, "edited": false, "score": 0, "creation_date": 1450266471, "post_id": 34309879, "comment_id": 56363910, "body": "@Cindy check my updated answer. you can see which direction you have to move. the whole project is three files, ....aloc(1) alocate memory for testB structure. you are responsible to free the memory!!! (see s.test.dealloc(1))"}], "tags": [], "owner": {"reputation": 13124, "user_id": 3441734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45c3ad8f37b8f5df5a1fc01891e18119?s=128&d=identicon&r=PG&f=1", "display_name": "user3441734", "link": "https://stackoverflow.com/users/3441734/user3441734"}, "is_accepted": true, "score": 2, "last_activity_date": 1450268205, "last_edit_date": 1450268205, "creation_date": 1450262608, "answer_id": 34309879, "question_id": 34309431, "link": "https://stackoverflow.com/questions/34309431/swift-with-c-struct-pointer/34309879#34309879", "title": "Swift with C struct pointer", "body": "<p>swift file</p>\n\n<pre><code>import Foundation\n\nvar s = testA()\ns.iSignal = 1\ns.test = UnsafeMutablePointer&lt;testB&gt;.alloc(1)  // alocate memory for one instance of testB\ns.test.memory.iPro = 10\n\n// if your testB is allocated in you C code, than just access it\nlet testB = UnsafeMutablePointer&lt;testB&gt;(s.test)\ndump(testB.memory)\n\n/*\n\u25bf __C.testB\n    - iPro: 10\n*/\n\ndump(s)\n\n/*\n\u25bf __C.testA\n    - iSignal: 1\n    \u25bf test: UnsafeMutablePointer(0x1007009C0)\n        - pointerValue: 4302309824\n\n*/\n\ndump(s.test.memory)\n\n/*\n\u25bf __C.testB\n    - iPro: 10\n*/\n\ns.test.dealloc(1) // dont forget deallocate s.test underlying memory ! \n</code></pre>\n\n<p>mystruct.h</p>\n\n<pre><code>#ifndef mystruct_h\n#define mystruct_h\nstruct testA {\n    int iSignal;\n    struct testB *test;\n};\n\nstruct testB {\n    int iPro;\n};\n#endif /* mystruct_h */\n</code></pre>\n\n<p>testc-Bridgin-Header.h</p>\n\n<pre><code>#include \"mystruct.h\"\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 5479283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c7c034022c907b54d4f92c86c1d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy", "link": "https://stackoverflow.com/users/5479283/cindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2809, "favorite_count": 0, "accepted_answer_id": 34309879, "answer_count": 1, "score": 2, "last_activity_date": 1450268205, "creation_date": 1450261396, "last_edit_date": 1450262041, "question_id": 34309431, "link": "https://stackoverflow.com/questions/34309431/swift-with-c-struct-pointer", "title": "Swift with C struct pointer", "body": "<p>I have a C struct that contains a pointer, all defined in a C header:</p>\n\n<pre><code>struct testA {\n  int iSignal;\n  struct testB *test;\n};\n\nstruct testB {\n  int iPro;\n};\n</code></pre>\n\n<p>Then I have a Swift program to initialize an instance of this struct:</p>\n\n<pre><code>var a = testA()\nvar b = testB()\na.test = &amp;b // this line error\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>'&amp;' used with non-inout argument of type 'UnsafeMutablePointer&lt;testB&gt;'\n</code></pre>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1450261329, "post_id": 34309362, "comment_id": 56360287, "body": "Forget <code>void main()</code>. At least it should be <code>int main(void)</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450261535, "post_id": 34309362, "comment_id": 56360443, "body": "Your code is invalid, <code>buff1d_1</code> is declared twice."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1450261587, "creation_date": 1450261587, "answer_id": 34309503, "question_id": 34309362, "link": "https://stackoverflow.com/questions/34309362/segmentation-fault-related-to-2-dimn-array/34309503#34309503", "title": "Segmentation fault related to 2 dimn array", "body": "<p><code>&amp;buff2d_1[0]</code> and <code>&amp;buff2d_2[0]</code> are of type <code>float32_t (*)[64]</code> but the function <code>fn1</code> expects its first and fourth argument of type <code>float32_t**</code>.  </p>\n\n<p>Change the function declarator to  </p>\n\n<pre><code>void fn1(float32_t (*in1)[64],float32_t* out1,float32_t* out2, float32_t (*in2)[64])\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3582072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3004dd8bbf962bd748bd6028776800c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3582072", "link": "https://stackoverflow.com/users/3582072/user3582072"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1450264249, "creation_date": 1450261234, "last_edit_date": 1450264249, "question_id": 34309362, "link": "https://stackoverflow.com/questions/34309362/segmentation-fault-related-to-2-dimn-array", "title": "Segmentation fault related to 2 dimn array", "body": "<p>I am facing a segmentation error in my code while handling 2d array.. not able to get to where my error lies.. any help is appreciated</p>\n\n<p>here is my code</p>\n\n<pre><code>void main()\n{\n    float32_t buff1d_1[64],buff1d_2[64];\n    float32_t buff2d_1[3][64],buff2d_2[3][64];\n\n    fn1(&amp;buff2d_1[0],buff1d_1,buff1d_2,&amp;buff2d_2[0]);\n}\n\nvoid fn1(float32_t** in1,float32_t* out1,float32_t* out2, float32_t** in2)\n{\n    float32_t trim[3]={0};\n    fn2(trim,in1,out1,in2);\n}\n</code></pre>\n\n<p>Declaration of fn2 is   </p>\n\n<pre><code>fn2(float32_t *,float32_t **inputs,float32_t *output, float32_t **coe);\n</code></pre>\n\n<p>The priority of functions are fn2 > fn1 > main.\nthat is the declaration of fn2 is fixed and i have to change the declaration of fn1 and fn1 call from main accordingly..</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1450261314, "post_id": 34309359, "comment_id": 56360275, "body": "You have commented some part in <code>else</code> . Please elaborate on not working and what do you expect ."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 1, "creation_date": 1450261764, "post_id": 34309359, "comment_id": 56360590, "body": "The <code>break</code> in the <code>else</code> clause probably isn&#39;t required.  It will cause the loop to end the first time it doesn&#39;t find the word.  I.e. it will only ever call <code>fgets</code> once."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1450262462, "post_id": 34309359, "comment_id": 56361094, "body": "drop <code>else</code> and what comes after"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450263362, "post_id": 34309359, "comment_id": 56361736, "body": "Debugger................DCV"}, {"owner": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "edited": false, "score": 0, "creation_date": 1450263380, "post_id": 34309359, "comment_id": 56361746, "body": "okay. I wanted it to open the file if any of the words are present or print out &quot;script not yet scored&quot;. if the words don&#39;t match it prints nothing and exit. Thanks"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1450265684, "post_id": 34309359, "comment_id": 56363335, "body": "You&#39;re getting the file contents 20 chars at a time, what would happen if the strings you&#39;re looking for start at offset 19, 39, 59 etc... You could end up searching for <code>PASS</code> in <i>&quot;this is a string, PA&quot;</i>, and <i>&quot;SS. but it doesn&#39;t. &quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450263335, "post_id": 34309658, "comment_id": 56361721, "body": "An eror in program flow that would have been revealed immediately by the most trivial attempt at debugging:("}, {"owner": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "edited": false, "score": 0, "creation_date": 1450265624, "post_id": 34309658, "comment_id": 56363288, "body": "@I3x. I have tried that but still not working. Just going straight to the else part even when the words exist in the file."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "edited": false, "score": 0, "creation_date": 1450265808, "post_id": 34309658, "comment_id": 56363422, "body": "@ConnelBLAZE Check if <code>fopen</code> succeeded: <code>if(!fp) { perror(&quot;fopen&quot;); exit(1); }</code>. Do you have lines longer than 20 in the file? Do you have matching words at all? Do you have the permission to read the file? Check all these too."}, {"owner": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "edited": false, "score": 0, "creation_date": 1450266233, "post_id": 34309658, "comment_id": 56363741, "body": "@I3x. Yes it did. Just don&#39;t know what to do. Will be submitting ma project soon and this is the only thing keeping me. Just don&#39;t want the student to see his/her results till after the faculty has put in remarks either &quot;PASS&quot;/&quot;FAIL&quot;."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "edited": false, "score": 0, "creation_date": 1450266397, "post_id": 34309658, "comment_id": 56363864, "body": "@ConnelBLAZE Well, change the permission of the file then. You should add that condition (in my prev comment) to your code and probably increase the line size to 256 or something like that (it still wouldn&#39;t handle the lines longer than that. But 20 is too small)."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1450263006, "last_edit_date": 1450263006, "creation_date": 1450262004, "answer_id": 34309658, "question_id": 34309359, "link": "https://stackoverflow.com/questions/34309359/searching-for-a-particular-word-in-a-file-in-c/34309658#34309658", "title": "Searching for a particular word in a file in C", "body": "<p>You don't need any condition in the <code>else</code> part. You also don't need to store the pointer returned by <code>strstr</code> since you don't use it.</p>\n\n<p>The problem is probably because of the <code>break</code> statement you have in the <code>else</code> part. Consider what would happen if anyone of lines do <em>not</em> have \neither of those words you look for: It would go into the <code>else</code> part and break the loop. Hence, it will not read the file anymore.</p>\n\n<p>Your if-else can be simplified to:</p>\n\n<pre><code>   if( strstr(line,str1) || strstr(line,str2) )\n      {\n          printf(\"ok\");\n          break; // If you want to continue searching the file after \n                 // first match, then you should remove this `break;`\n      }\n    else\n      {\n          printf(\"Still processing\");\n      }\n</code></pre>\n\n<p>I would avoid hard-coding array size in <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow\"><code>fgets()</code></a>. Instead the loop condition can be written as:</p>\n\n<pre><code>   while( fgets (line, sizeof line, fp) ) {\n      ...\n   }\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 4617869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jUUnb.jpg?s=128&g=1", "display_name": "connelblaze", "link": "https://stackoverflow.com/users/4617869/connelblaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450263006, "creation_date": 1450261228, "last_edit_date": 1450262383, "question_id": 34309359, "link": "https://stackoverflow.com/questions/34309359/searching-for-a-particular-word-in-a-file-in-c", "title": "Searching for a particular word in a file in C", "body": "<p>Good day y'all i have been trying to find if a particular remark or word exist in a file. Don't know why the else part isn't working. How do I do it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *fp;\n    char *file = \"mar\";\n    char *str1 = \"PASS\";\n    char *str2 = \"FAIL\";\n    char *find,*f;\n    char line[20] ;\n\n    fp = fopen(file, \"r\");\n\n    while( fgets (line, 20, fp)!=NULL )\n    {\n       if((find = strstr(line,str1)) || (find = strstr(line,str2)))\n          {\n              printf(\"ok\");\n              break;\n          }\n        else//if(find != strstr(line,str1))// || (find != strstr(line,str2)))\n          {\n              printf(\"Still processing\");\n              break;\n          }\n    }\n\n    fclose(fp);\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 4, "creation_date": 1450260966, "post_id": 34309177, "comment_id": 56360023, "body": "In your example you don&#39;t have any duplicates, what do you mean by <i>remove duplicates</i>? Please provide an example, e.g.: <code>number == 5</code> -&gt; I want X to happen."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1450261049, "post_id": 34309177, "comment_id": 56360074, "body": "&quot;remove duplicates from arrays&quot;. Your arrays do not contain any duplicates. Can you please explain what you mean more clearly?"}, {"owner": {"reputation": 1619, "user_id": 3085931, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dbiSD.png?s=128&g=1", "display_name": "user3085931", "link": "https://stackoverflow.com/users/3085931/user3085931"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450261145, "post_id": 34309177, "comment_id": 56360141, "body": "@JoachimPileborg you are right, I&#39;m removing it"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1450261233, "post_id": 34309177, "comment_id": 56360206, "body": "Not directly related to your problem, but <code>arrays[10]</code> is not needed at all, you can remove this array and simplify your program. I leave this as an exercicse to the reader."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1450260948, "creation_date": 1450260948, "answer_id": 34309251, "question_id": 34309177, "link": "https://stackoverflow.com/questions/34309177/remove-duplicates-from-arrays/34309251#34309251", "title": "Remove duplicates from arrays", "body": "<p>I assume you mean that in the loop if you have \"drawn\" a number, you don't want to draw the same number again? Then you could have another array with a flag saying if the <em>index</em> have been \"drawn\" before, and if it have then draw again.</p>\n"}, {"tags": [], "owner": {"reputation": 7067, "user_id": 1725836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6f752d354a35b6988b85dbaa1195e399?s=128&d=identicon&r=PG&f=1", "display_name": "nrofis", "link": "https://stackoverflow.com/users/1725836/nrofis"}, "is_accepted": false, "score": 1, "last_activity_date": 1450261855, "last_edit_date": 1495542196, "creation_date": 1450261281, "answer_id": 34309378, "question_id": 34309177, "link": "https://stackoverflow.com/questions/34309177/remove-duplicates-from-arrays/34309378#34309378", "title": "Remove duplicates from arrays", "body": "<p>I think that it would be better to create one array of all the cards (like deck) and then <a href=\"https://stackoverflow.com/questions/6127503/shuffle-array-in-c\">shuffle</a> the array, instead of using random select..\nThen you can take the top 10 cards without any duplicates.</p>\n\n<p>Theoretically with random select, you can select each time cards that already \"drawn\", and it will be waste of time (the more cards you drawn the less chance you hit no-drawn card).</p>\n"}], "owner": {"reputation": 13, "user_id": 5639783, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e70d66d034d632505c0caa2e9cc676ea?s=128&d=identicon&r=PG&f=1", "display_name": "Philly", "link": "https://stackoverflow.com/users/5639783/philly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1450289994, "creation_date": 1450260730, "last_edit_date": 1450261340, "question_id": 34309177, "link": "https://stackoverflow.com/questions/34309177/remove-duplicates-from-arrays", "title": "Remove duplicates from arrays", "body": "<p>I'm trying to make a card-game, and my plan is to make an array that first holds 1-10, then J-A, then the colors, so three different arrays and different variables with ints and chars.</p>\n\n<p>However, I'm stuck with the problem now that I want to remove duplicates from the array, but i dont really know how to do it, I've read some facts but I need a better explanatin and hur it would look code-wise.</p>\n\n<p>This is how my code looks so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n\n    int arrays[10] = { 1,2,3,4,5,6,7,8,9,10 };\n    char* color[4] = { \"Diamond\", \"Spade\", \"Heart\", \"Clubs\" };\n    int i;\n    int *number;\n\n\n    srand(time(NULL));\n\n    for (i = 0; i &lt; 10; i++) {\n        number = arrays[rand() % 10];\n        if (number ) { //Its here where i want to remove the duplicates\n            continue;\n        }\n        else {\n            printf(\"%d \", number);\n        }\n    }\n    system(\"pause\");\n    return 0;\n\n}\n</code></pre>\n\n<p>I would be greatly thankful for an explanation on how to do it, I tried with variables holding the value of arrays[i] but then all the numbers will be removed.</p>\n"}, {"tags": ["c", "arrays", "loops", "char"], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1450260171, "creation_date": 1450260171, "answer_id": 34308957, "question_id": 34308879, "link": "https://stackoverflow.com/questions/34308879/input-a-password-from-the-user-and-check-if-it-has-a-char-alphabet-and-digit/34308957#34308957", "title": "Input a password from the user and check if it has a char, alphabet and digit", "body": "<p>That's because your loop runs over the entire, not just upto the characters you read.</p>\n\n<p>Instead do,</p>\n\n<pre><code>    size_t len = strlen(arr);\n\n    for (i=0; i&lt;len; i++) {\n      ...\n    }\n</code></pre>\n\n<p>You may also want to use <a href=\"http://man7.org/linux/man-pages/man3/fgetc.3.html\" rel=\"nofollow\"><code>fgets()</code></a> to avoid buffer overrun. If you enter more than 10 characters, you'll overflow <code>arr</code>, which is <em>undefined behaviour.</em></p>\n\n<p>Instead of </p>\n\n<pre><code>scanf(\"%s\",arr );\n</code></pre>\n\n<p>do</p>\n\n<pre><code>fgets(arr, sizeof arr, stdin);\nchar *p = strchr(arr, '\\n');\nif(p) *p = 0; //trim the trailing newline, if present\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1450260210, "creation_date": 1450260210, "answer_id": 34308974, "question_id": 34308879, "link": "https://stackoverflow.com/questions/34308879/input-a-password-from-the-user-and-check-if-it-has-a-char-alphabet-and-digit/34308974#34308974", "title": "Input a password from the user and check if it has a char, alphabet and digit", "body": "<blockquote>\n  <p>I think it counts the blank spaces in the array as charecters and even declares <code>\"apple25\"</code> as a valid password.</p>\n</blockquote>\n\n<p>Your assumption is almost right. Your program does count characters after the end of user input, but they are not necessarily blanks.</p>\n\n<p>You get this effect with <code>\"AAPPLLEE2\"</code> because your code examines ten characters of a nine-character string. The tenth character is null terminator, which is neither a digit nor a letter.</p>\n\n<p>You need to use the actual length for the limit of the loop, rather than hard-coding the limit of ten.</p>\n\n<p>You should also fix the potential buffer overrun:</p>\n\n<pre><code>char arr[11];       // &lt;&lt;== Add one more character for '\\0'\nprintf(\"Enter a password. \\n\");\nscanf(\"%10s\",arr ); // &lt;&lt;== Tell scanf how big is your buffer\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85633, "user_id": 400056, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f2bfb454da13e7a17d5ec6df6aac25f?s=128&d=identicon&r=PG", "display_name": "DarkDust", "link": "https://stackoverflow.com/users/400056/darkdust"}, "is_accepted": false, "score": 0, "last_activity_date": 1450260227, "creation_date": 1450260227, "answer_id": 34308977, "question_id": 34308879, "link": "https://stackoverflow.com/questions/34308879/input-a-password-from-the-user-and-check-if-it-has-a-char-alphabet-and-digit/34308977#34308977", "title": "Input a password from the user and check if it has a char, alphabet and digit", "body": "<p>There are several issues here:</p>\n\n<ul>\n<li>Try entering a password with a size of 10 or longer. You'd overflow <code>arr</code>.</li>\n<li>You don't stop at the terminating NULL character (value 0). In fact, you count the terminating NULL as \"character\" and increase <code>c</code> when you come across it.</li>\n<li>Any garbage afterward is also processed.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1450267136, "last_edit_date": 1450267136, "creation_date": 1450260293, "answer_id": 34309009, "question_id": 34308879, "link": "https://stackoverflow.com/questions/34308879/input-a-password-from-the-user-and-check-if-it-has-a-char-alphabet-and-digit/34309009#34309009", "title": "Input a password from the user and check if it has a char, alphabet and digit", "body": "<ul>\n<li><p>Point 1. Always initialize your automatic local variables. Saves you from accidentally accessing un-initialized value.</p>\n\n<pre><code>char arr[10] = {0};\n</code></pre></li>\n<li><p>Point 2. Always limit your input length. Saves you from running into <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> by overrunning the allocated memory by longer-than-expected input.</p>\n\n<pre><code>scanf(\"%9s\",arr );\n</code></pre></li>\n<li><p>Point 3. Use <a href=\"http://linux.die.net/man/3/strlen\" rel=\"nofollow\"><code>strlen()</code></a> to loop over only the <em>valid</em> part of input.</p></li>\n</ul>\n"}], "owner": {"reputation": 17, "user_id": 5685063, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206935212692128/picture?type=large", "display_name": "Shravan Niranjan", "link": "https://stackoverflow.com/users/5685063/shravan-niranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1450267232, "creation_date": 1450259978, "last_edit_date": 1450267232, "question_id": 34308879, "link": "https://stackoverflow.com/questions/34308879/input-a-password-from-the-user-and-check-if-it-has-a-char-alphabet-and-digit", "title": "Input a password from the user and check if it has a char, alphabet and digit", "body": "<p>My doubt is that, the program works fine if I enter a password that fills the array. However if I enter a password such as \"apple25\", I think it counts the blank spaces in the array as characters and even declares \"apple25\" as a valid password. </p>\n\n<p>How do I prevent this from happening? Does it count the string terminator also as a <code>char</code>? Because even \"AAPPLLEE2\" comes as a valid password.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#define TRUE 1\n#define FALSE 0\n\n\nint main()\n{\n    char arr[10];\n    printf(\"Enter a password. \\n\");\n    scanf(\"%s\",arr );\n   // printf(arr);\n    char ch;\n    int i;\n    int alp=0, dig=0, c=0;\n\n\n    for (i=0; i&lt;10; i++)\n    {\n       ch=arr[i];\n\n       if(isalpha(ch))\n       {\n           alp++;\n          // printf(\" alpha is %d \\n\",alp);\n       }\n       else if(isdigit(ch))\n       {\n           dig++;\n          // printf(\"digit is %d \\n\",dig);\n       }\n       else\n       {\n           c++;\n         //  printf(\"charectores are %d \\n\",c);\n       }\n\n    }\n    if(alp&gt;=1&amp;&amp;dig&gt;=1&amp;&amp;c&gt;=1)\n        {\n            printf(\"Valid Password\");\n        }\n    else{\n            printf(\"Invalid Password\");\n        }\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "memory"], "answers": [{"comments": [{"owner": {"reputation": 496, "user_id": 4731244, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7e606a2d7d936744c79f83454e16fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Csi", "link": "https://stackoverflow.com/users/4731244/csi"}, "edited": false, "score": 0, "creation_date": 1450260138, "post_id": 34308782, "comment_id": 56359470, "body": "Ah thank you, i didn&#39;t pay attention. I used calloc and the condition is working just find."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1450266812, "last_edit_date": 1450266812, "creation_date": 1450259694, "answer_id": 34308782, "question_id": 34308699, "link": "https://stackoverflow.com/questions/34308699/check-if-pointer-is-null-in-a-pointer-array/34308782#34308782", "title": "check if pointer is null in a pointer array", "body": "<p>In your code, while <code>malloc()</code>ing <code>memory</code>, you allocated some memory to the variable <code>memory</code>. You never initialized the contents of <code>*memory</code> or <code>memory[i]</code>. They may not be <code>NULL</code>, as you're expecting. They may very well contain garbage values.</p>\n\n<p>So, basically, later,</p>\n\n<pre><code> if(memory[itr_mry] == NULL)\n</code></pre>\n\n<p>is an attempt to use uninitialized memory which leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Solution: You need to use <code>calloc()</code> to get a zero-initialized memory so that you can at least run the NULL check on <code>*memory</code> or <code>memory[i]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 496, "user_id": 4731244, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7e606a2d7d936744c79f83454e16fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Csi", "link": "https://stackoverflow.com/users/4731244/csi"}, "edited": false, "score": 0, "creation_date": 1450260212, "post_id": 34308789, "comment_id": 56359514, "body": "Ah thank you, i didn&#39;t pay attention. I used calloc and the condition is working just find"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1450260131, "last_edit_date": 1450260131, "creation_date": 1450259715, "answer_id": 34308789, "question_id": 34308699, "link": "https://stackoverflow.com/questions/34308699/check-if-pointer-is-null-in-a-pointer-array/34308789#34308789", "title": "check if pointer is null in a pointer array", "body": "<p>You need to initialise the contents of the array <code>memory</code> to NULL yourself: the compiler will not do this for you on a <code>malloc</code> call. Currently the behaviour of your program is undefined since you're reading back an uninitialised pointer value.</p>\n\n<p>The best thing to do is use <code>calloc</code> which will set pointers to the null pointer value.</p>\n"}], "owner": {"reputation": 496, "user_id": 4731244, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a7e606a2d7d936744c79f83454e16fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Csi", "link": "https://stackoverflow.com/users/4731244/csi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 34308789, "answer_count": 2, "score": 1, "last_activity_date": 1450266938, "creation_date": 1450259477, "last_edit_date": 1450266938, "question_id": 34308699, "link": "https://stackoverflow.com/questions/34308699/check-if-pointer-is-null-in-a-pointer-array", "title": "check if pointer is null in a pointer array", "body": "<p>I'm trying to check if a pointer is NULL in an array of pointer. Program crash when running, debbugger point to the <code>if()</code> condition but I don't know what it wrong.</p>\n\n<p>In <code>main.c</code></p>\n\n<pre><code>  unsigned int** memory = malloc(sizeof(unsigned int*)*MEMORY_SIZE);\n\n    /* malloc failed */\n    if (!memory)\n    {\n\n       return EXIT_FAILURE;\n    }\n\n    Process myProcess = { 1, 2, -1};\n\n    /* TEST THAT WORKS */\n    /* memory[0] = &amp;(myProcess.m_id); */\n    /* printf(\"%u\", *memory[0]); */\n\n\n    AllocFirstFit(&amp;myProcess, memory);\n</code></pre>\n\n<p>In another <code>.c</code> file</p>\n\n<pre><code>void AllocFirstFit(Process* process, unsigned int** memory)\n{\n    unsigned int itr_mry;\n    /* Declaration of various other local variable here*/\n\n    /* browsing the memory */\n    for(itr_mry = 0; itr_mry &lt; MEMORY_SIZE; ++itr_mry)\n    {\n        /* if memory unit is null */\n        /* debugger point this line. This condition is never true for some reason */ \n        if(memory[itr_mry] == NULL)\n        {\n</code></pre>\n"}, {"tags": ["c", "multidimensional-array", "hdf5"], "comments": [{"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "edited": false, "score": 0, "creation_date": 1450258853, "post_id": 34307843, "comment_id": 56358556, "body": "Please, provide a complete compilable example."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450260055, "post_id": 34307843, "comment_id": 56359428, "body": "How do you know tht the fie got opened at all?  Does the file exist?  Does it contain anything?  Where are your details from debugging?  This question is hopeless:(("}, {"owner": {"reputation": 43, "user_id": 1831841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27aa866f6618fa802b855adac86aa3ae?s=128&d=identicon&r=PG", "display_name": "kpa", "link": "https://stackoverflow.com/users/1831841/kpa"}, "edited": false, "score": 0, "creation_date": 1450263498, "post_id": 34307843, "comment_id": 56361821, "body": "I&#39;ve updated code and extended the problem description. Once again, the file is created and I can see the content of the file using h5dump utility."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1831841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27aa866f6618fa802b855adac86aa3ae?s=128&d=identicon&r=PG", "display_name": "kpa", "link": "https://stackoverflow.com/users/1831841/kpa"}, "edited": false, "score": 0, "creation_date": 1450342270, "post_id": 34315862, "comment_id": 56401843, "body": "Thanks a lot for the help, it was a silly mistake. Now I&#39;m checking error codes."}], "tags": [], "owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "is_accepted": true, "score": 3, "last_activity_date": 1450279604, "creation_date": 1450279604, "answer_id": 34315862, "question_id": 34307843, "link": "https://stackoverflow.com/questions/34307843/write-3d-data-into-hdf5-file-in-c/34315862#34315862", "title": "Write 3D data into HDF5 file in C", "body": "<p>You made a typo in <code>stride_3d</code>: you set <code>stride_3d[1]</code> twice and never set <code>stride_3d[2]</code> so the initial value of <code>stride_3d[2]</code> is undefined (a.k.a. garbage) and the call to <code>H5Sselect_hyperslab</code> fails. Which brings us to my second point\u2026</p>\n\n<p><strong>Check your errors!</strong> You should be checking the value of <code>err</code> after every API call.</p>\n"}], "owner": {"reputation": 43, "user_id": 1831841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27aa866f6618fa802b855adac86aa3ae?s=128&d=identicon&r=PG", "display_name": "kpa", "link": "https://stackoverflow.com/users/1831841/kpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 1, "accepted_answer_id": 34315862, "answer_count": 1, "score": 2, "last_activity_date": 1487760668, "creation_date": 1450256895, "last_edit_date": 1487760668, "question_id": 34307843, "link": "https://stackoverflow.com/questions/34307843/write-3d-data-into-hdf5-file-in-c", "title": "Write 3D data into HDF5 file in C", "body": "<p>I'm trying to write three-dimensional data (<img src=\"https://chart.googleapis.com/chart?cht=tx&amp;chl=Nx%20%5Ctimes%20Ny%20%5Ctimes%20Nz\" alt=\"Nx x Ny x Nz\">), which are stored in memory like a linear array (<img src=\"https://chart.googleapis.com/chart?cht=tx&amp;chl=k%20%2B%20Nz%20%5Ccdot%20j%20%2B%20Nz%20%5Ccdot%20Ny%20%5Ccdot%20i\" alt=\"k + Nz * j + Nz * Ny * i\">), into HDF5 file using hyper slabs. See my code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;float.h&gt;\n\n#include \"hdf5.h\"\n\nint main(int argc, char *argv[])\n{\n    int i, j, k;\n    int count = 0;\n    int Nx = 180;\n    int Ny = 128;\n    int Nz = 128;\n\n    double *data = (double *)malloc(Nx * Ny * Nz * sizeof(double));\n\n    for (i = 0; i &lt; Nx; i++)\n    {\n        for (j = 0; j &lt; Ny; j++)\n        {\n            for (k = 0; k &lt; Nz; k++)\n            {\n                data[k + Nz * j + Nz * Ny * i] = (double)count;\n                count++;\n            }\n        }\n    }\n\n    hid_t err;\n    hid_t dataspace, memspace, dataset;\n    hid_t file_identifier;\n    int rank;\n    hsize_t dimens_3d[3];\n    hsize_t start_3d[3];\n    hsize_t stride_3d[3];\n    hsize_t count_3d[3];\n\n    char *file_name = \"data.h5\";\n\n    file_identifier = H5Fcreate(file_name, H5F_ACC_TRUNC, H5P_DEFAULT, H5P_DEFAULT);\n\n    rank = 3;\n\n    dimens_3d[0] = Nz;\n    dimens_3d[1] = Ny;\n    dimens_3d[2] = Nx;\n\n    dataspace = H5Screate_simple(rank, dimens_3d, NULL);\n\n    start_3d[0] = 0;\n    start_3d[1] = 0;\n    start_3d[2] = 0;\n\n    stride_3d[0] = 1;\n    stride_3d[1] = 1;\n    stride_3d[1] = 1;\n\n    count_3d[0] = Nz;\n    count_3d[1] = Ny;\n    count_3d[2] = Nx;\n\n    err = H5Sselect_hyperslab(dataspace, H5S_SELECT_SET, start_3d, stride_3d, count_3d, NULL);\n\n    dimens_3d[0] = Nz;\n    dimens_3d[1] = Ny;\n    dimens_3d[2] = Nx;\n\n    memspace = H5Screate_simple(rank, dimens_3d, NULL);\n\n    start_3d[0] = 0;\n    start_3d[1] = 0;\n    start_3d[2] = 0;\n\n    stride_3d[0] = 1;\n    stride_3d[1] = 1;\n    stride_3d[1] = 1;\n\n    count_3d[0] = Nz;\n    count_3d[1] = Ny;\n    count_3d[2] = Nx;\n\n    err = H5Sselect_hyperslab(memspace, H5S_SELECT_SET, start_3d, stride_3d, count_3d, NULL);\n\n    dataset = H5Dcreate(file_identifier, \"data\", H5T_NATIVE_DOUBLE, dataspace, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);\n\n    err = H5Dwrite(dataset, H5T_NATIVE_DOUBLE, memspace, dataspace, H5P_DEFAULT, &amp;(data[0]));\n\n    H5Sclose(memspace);\n    H5Sclose(dataspace);\n    H5Dclose(dataset);\n\n    H5Fclose(file_identifier);\n\n    free(data);\n\n    return 0;\n}\n</code></pre>\n\n<p>This example isn't put any data into the file and I can't figure out why. The file is created but when I dump it into XML file using h5dump utility (h5dump -u data.h5 > data.xml) there are no values for <code>data</code> array. If I comment lines with <code>H5Sselect_hyperslab</code> function values appear in the file.</p>\n\n<p>I understand that here using of <code>H5Sselect_hyperslab</code> function isn't necessary, but the next step for me will be to write HDF5 in parallel where using of hyper slabs would be necessary.</p>\n"}, {"tags": ["c++", "c", "language-interoperability"], "comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 3, "creation_date": 1450258382, "post_id": 34307731, "comment_id": 56358224, "body": "@moooeeeep: Note that you have changed the meaning of OP. OP asked for standard libraries, what is a definite yes. While after your edit it asks for C-fucntions, where the answer is &quot;It depends on they were implemented for doing so.&quot; I would suggest to reroll that part!"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1450258892, "post_id": 34307731, "comment_id": 56358586, "body": "@Zaibis I thought it might be more interesting to include the more general case, but you are right, the OP asked specifically about the standard library. Please review my second edit."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1450259228, "post_id": 34307731, "comment_id": 56358823, "body": "@moooeeeep: I&#39;m fine with it. Hopefully Nimit is aswell :P"}], "answers": [{"comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1450256995, "post_id": 34307848, "comment_id": 56357303, "body": "And if you do want to use a C library which has e.g. a struct field named <code>try</code>, you can simply <code>#define try try_</code> or similar before you <code>#include</code> it."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 9347, "user_id": 2214693, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9O4uT.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/2214693/claudio"}, "edited": false, "score": 3, "creation_date": 1450257213, "post_id": 34307848, "comment_id": 56357447, "body": "@Claudio The C++ counterparts are primarily used to insert the symbols into the <code>std::</code> namespace, not to add the `extern &quot;C&quot; {&#39;. At least on my machine, it works perfectly fine to include all the C standard headers directly, inserting the symbols into the global namespace."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1450257379, "post_id": 34307848, "comment_id": 56357561, "body": "Unfortunately, sometimes there is no C++(11) equivalent in the standard library, e.g., arithmetics with dates (<a href=\"http://stackoverflow.com/a/15669430/1025391\">stackoverflow.com/a/15669430/1025391</a>)"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 10, "creation_date": 1450257500, "post_id": 34307848, "comment_id": 56357634, "body": "I wouldn&#39;t be too religious about writing idiomatic C++: Do whatever is most <i>simple</i>. All other concerns are of secondary importance. For me, it means that I tend to use the <code>printf()</code> family of functions over the C++ iostreams, because doing correct formatting with <code>cout</code> is a PITA, while the C version is usually quite readable and straight-forward."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1450257690, "post_id": 34307848, "comment_id": 56357763, "body": "I was much more thinking of containers, smart pointers than of streams"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1450258134, "post_id": 34307848, "comment_id": 56358054, "body": "My recommendation to read SICP before learning C++11 is still a strong one, in particular if you only know C"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1450266696, "post_id": 34307848, "comment_id": 56364054, "body": "Aren&#39;t closures and anonymous functions the same?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1450273023, "post_id": 34307848, "comment_id": 56368512, "body": "@Columbo Closures capture state, functions do not. I disagree with &quot;prefer <code>new</code>&quot;. If you use <code>new</code> in modern C++ you are doing it wrong."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1450273252, "post_id": 34307848, "comment_id": 56368672, "body": "@nwp First of all, I never mentioned <code>new</code>. Secondly, closures do not necessarily capture state and are therefore already including capture-less lambdas (which is presumably what &quot;anonymous functions&quot; is meant to designate), so enumerating those seperately seems superfluous."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1450273794, "post_id": 34307848, "comment_id": 56369089, "body": "@Columbo The comment about <code>new</code> was meant for Basille Starynkevitch, maybe I should have made 2 comments. I agree with your point that lambdas include anonymous functions and therefore anonymous functions didn&#39;t need to be mentioned separately, but I don&#39;t see anything wrong with answering your question the way I did."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1450273852, "post_id": 34307848, "comment_id": 56369137, "body": "@nwp I didn&#39;t disagree with your comment. I wasn&#39;t aware that anonymous functions were stateless. Mea culpa :-)"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 3, "creation_date": 1450280420, "post_id": 34307848, "comment_id": 56373959, "body": "@BasileStarynkevitch: I am not sure recommending Free Software in general is very useful. Most free software code is actually rather atrocious, for various reasons (age, compatibility with multiple/old compilers, contributors&#39; inexperience in C++ itself, ...)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1450281032, "post_id": 34307848, "comment_id": 56374459, "body": "I would not say that. Also, free software is IMHO a good example of <i>real world</i> software (in particular, I don&#39;t believe the proprietary software is significantly better). And most junior programmers start working on some existing legacy software base, not in a new project ex nihilo"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450287579, "post_id": 34307848, "comment_id": 56378797, "body": "@BasileStarynkevitch Full ACK. The proprietary code I have to cope with at work is <i>much, much worse</i> than any code I&#39;ve seen in free software, yet..."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 48, "last_activity_date": 1450360695, "last_edit_date": 1495541957, "creation_date": 1450256903, "answer_id": 34307848, "question_id": 34307731, "link": "https://stackoverflow.com/questions/34307731/can-functions-from-the-c-standard-library-be-used-in-c/34307848#34307848", "title": "Can functions from the C standard library be used in C++?", "body": "<p>Yes, C++ was originally designed so that any C library can be easily used in C++. Of course this is slightly less true (in particular, if a C library happens to use some C++ keyword like <code>try</code> or <code>dynamic_cast</code>, it won't work; also, if a <a href=\"https://en.wikipedia.org/wiki/Callback_%28computer_programming%29\" rel=\"nofollow noreferrer\">callback</a> coded in C++ passed to a C library is raising some exception, you are likely to have a big mess).</p>\n\n<p>The standard practice to use a C header file in C++ is</p>\n\n<pre><code> extern \"C\" {\n #include &lt;some_c_header_file.h&gt;\n };\n</code></pre>\n\n<p>and most <em>existing</em> C header files are designed to cooperate with C++ by actually containing stuff like</p>\n\n<pre><code> #ifdef __cplusplus\n extern \"C\" {\n #endif\n\n //// most of the header material goes here, C style\n\n #ifdef __cplusplus\n }; // end extern \"C\"\n #endif\n</code></pre>\n\n<p>In practice, many C standard headers have equivalent C++ headers wrapping things like above (and also in <code>namespace std</code>). Eg C <code>&lt;stdio.h&gt;</code> is C++ <code>&lt;cstdio&gt;</code> -but you often should prefer genuine C++ streams (<code>&lt;iostream&gt;</code>), however <code>printf</code>-like routines are usually more <a href=\"https://en.wikipedia.org/wiki/Internationalization_and_localization\" rel=\"nofollow noreferrer\">localization</a> friendly mixed with <a href=\"http://man7.org/linux/man-pages/man3/gettext.3.html\" rel=\"nofollow noreferrer\">gettext(3)</a>.</p>\n\n<p>However <strong>C and C++ are very different languages.</strong> You should code in idiomatic C++11 (using standard C++ <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a>, <code>auto</code>, <a href=\"https://en.wikipedia.org/wiki/Closure_%28computer_programming%29\" rel=\"nofollow noreferrer\">closures</a>, <a href=\"https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">RAII</a>, <a href=\"https://en.wikipedia.org/wiki/Smart_pointer\" rel=\"nofollow noreferrer\">smart pointers</a>, <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29\" rel=\"nofollow noreferrer\">rule of five</a>, <a href=\"https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error\" rel=\"nofollow noreferrer\">SFINAE</a>, <a href=\"https://en.wikipedia.org/wiki/Exception_handling\" rel=\"nofollow noreferrer\">exceptions</a>, <a href=\"https://en.wikipedia.org/wiki/Anonymous_function\" rel=\"nofollow noreferrer\">anonymous functions</a>, ...) </p>\n\n<p>Some standard C functions are not very useful in idiomatic C++. For example, you are unlikely to use <em>directly</em> <code>malloc</code> in <em>genuine</em> C++ (at least prefer <code>new</code> -which is still very low level and no more in the C++ spirit-, more likely use a lot the containers and the smart pointers <em>without</em> dealing manually with heap allocation). But <a href=\"http://en.wikipedia.org/wiki/POSIX\" rel=\"nofollow noreferrer\">POSIX</a> functions (notably <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> ....) are quite useful in C++. <a href=\"https://en.wikipedia.org/wiki/Setjmp.h\" rel=\"nofollow noreferrer\"><code>longjmp</code></a> is likely to be incompatible with C++ exceptions.</p>\n\n<p>BTW, C++ has evolved <em>a lot</em> in this century. Don't learn C++98 but at least <a href=\"https://en.wikipedia.org/wiki/C%2B%2B11\" rel=\"nofollow noreferrer\">C++11</a> (there are <em>tremendous</em> differences between them) and perhaps <a href=\"https://en.wikipedia.org/wiki/C%2B%2B14\" rel=\"nofollow noreferrer\">C++14</a>. Use a <em>recent</em> compiler (<a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> or <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang/LLVM</a>); in december 2015, that means <a href=\"http://gcc.gnu.org/gcc-5/\" rel=\"nofollow noreferrer\">GCC 5</a> at least or <a href=\"http://llvm.org/releases/3.7.0/docs/ReleaseNotes.html\" rel=\"nofollow noreferrer\">Clang/LLVM 3.7</a> at least. Don't forget to enable all warnings &amp; debug info in the compiler (e.g. <code>g++ -Wall -Wextra -g -std=c++11</code>)</p>\n\n<p><strong>C++</strong> (that means C++11 at least) <strong>is a <em>difficult</em> programming language</strong>, considerably more complex than C is. You'll need weeks of reading to learn some of it, and good coding style and discipline is essential (you can easily write very crappy code in C++). Start with <a href=\"http://www.stroustrup.com/Programming/\" rel=\"nofollow noreferrer\"><em>Programming: Principles &amp; Practice Using C++</em></a></p>\n\n<p>I believe that if you only know C, reading <a href=\"http://mitpress.mit.edu/sicp/\" rel=\"nofollow noreferrer\">SICP</a> (and studying a bit of Scheme) <em>before</em> learning C++ is worthwhile.</p>\n\n<p>The notion of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> is very important, both in C and probably even more in C++. You absolutely need to understand it (see C.Lattner's <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">blog on it</a>) and <a href=\"https://stackoverflow.com/a/25636788/841108\">avoid</a> it.</p>\n\n<p>You will also learn a big lot by studying (and perhaps contributing to) some existing <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> and its source code. Hence I recommend using Linux.</p>\n"}, {"tags": [], "owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "is_accepted": false, "score": 20, "last_activity_date": 1450258176, "last_edit_date": 1592644375, "creation_date": 1450258176, "answer_id": 34308279, "question_id": 34307731, "link": "https://stackoverflow.com/questions/34307731/can-functions-from-the-c-standard-library-be-used-in-c/34308279#34308279", "title": "Can functions from the C standard library be used in C++?", "body": "<p>I'll just quote a paragraph out of the ISO/IEC N3690(c++ standard).</p>\n<blockquote>\n<p>17.2 The C standard library</p>\n<p>1 The C++ standard library also makes available the facilities of the C standard library, suitably adjusted to ensure static type safety.</p>\n</blockquote>\n<p>So simply yes!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4734236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0164bdf819c56e9bad79477bbb407ddd?s=128&d=identicon&r=PG&f=1", "display_name": "Gamindu Udayanga", "link": "https://stackoverflow.com/users/4734236/gamindu-udayanga"}, "is_accepted": false, "score": 0, "last_activity_date": 1509431499, "last_edit_date": 1509431499, "creation_date": 1509430288, "answer_id": 47028929, "question_id": 34307731, "link": "https://stackoverflow.com/questions/34307731/can-functions-from-the-c-standard-library-be-used-in-c/47028929#47028929", "title": "Can functions from the C standard library be used in C++?", "body": "<p>yes .you can use standard c library functions in C++\nExamples</p>\n\n<pre><code>    stdio.h   =&gt; cstdio   (printf/scanf)\n    math.h    =&gt; cmath     (sqrt)  \n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 5658353, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f5285671b1d6a76f3e63f8de98ecae02?s=128&d=identicon&r=PG&f=1", "display_name": "Nimit Bhardwaj", "link": "https://stackoverflow.com/users/5658353/nimit-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3011, "favorite_count": 8, "accepted_answer_id": 34307848, "answer_count": 3, "score": 31, "last_activity_date": 1509431499, "creation_date": 1450256585, "last_edit_date": 1450259299, "question_id": 34307731, "link": "https://stackoverflow.com/questions/34307731/can-functions-from-the-c-standard-library-be-used-in-c", "title": "Can functions from the C standard library be used in C++?", "body": "<p>Right now I'm getting familiar with C and the C standard library and I wonder if my knowledge in this area will be useful when I turn to working with C++ at a later time.</p>\n\n<p>Therefore I'd like to know, whether I can use the functions provided by the C standard library in a C++ setting, and also whether and why it would make sense to actually do so.</p>\n"}, {"tags": ["c", "arm"], "comments": [{"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1450257104, "post_id": 34307729, "comment_id": 56357388, "body": "can you please elaborate?"}, {"owner": {"reputation": 11, "user_id": 5685714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8eb7f993d91b27b00674dcb8562580?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5685714/ganesh"}, "reply_to_user": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 0, "creation_date": 1450257462, "post_id": 34307729, "comment_id": 56357611, "body": "i am working on one project, where i required the timer for interrupts generation. but when timer isr is called, its goes in the isr but it doesn&#39;t return from isr to my main code."}, {"owner": {"reputation": 4714, "user_id": 3555000, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/145762f352604453bb4ba60e8d5738d7?s=128&d=identicon&r=PG&f=1", "display_name": "Enamul Hassan", "link": "https://stackoverflow.com/users/3555000/enamul-hassan"}, "edited": false, "score": 2, "creation_date": 1450257595, "post_id": 34307729, "comment_id": 56357705, "body": "You have to show your effort, like code or something to make it more understandable so that people could get you more easily."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1450258500, "post_id": 34307729, "comment_id": 56358302, "body": "Are you clearing the interrupt request flag in your ISR?"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1450258552, "post_id": 34307729, "comment_id": 56358339, "body": "For all we know your ISR could be <code>while(1);</code>. A question asking to reason about unspecified code is unanswerable..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1450259711, "post_id": 34307729, "comment_id": 56359193, "body": "NO, edit it into the question!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450260667, "post_id": 34307729, "comment_id": 56359812, "body": "Does the handler not need an &#39;_irq&#39; qualifier?"}], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1450261269, "post_id": 34309091, "comment_id": 56360242, "body": "You need to define your ISR as <code>void timer_isr(void) __irq { ... }</code>  Without that, it&#39;s just an ordinary function and won&#39;t save/restore the extra interrupt context."}, {"owner": {"reputation": 11, "user_id": 5685714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8eb7f993d91b27b00674dcb8562580?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5685714/ganesh"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1450262816, "post_id": 34309091, "comment_id": 56361358, "body": "@Craig Estey Thanks ...after define like void timer_isr() __irq {   } .....its works. Thanks once again to all."}], "tags": [], "owner": {"reputation": 11, "user_id": 5685714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8eb7f993d91b27b00674dcb8562580?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5685714/ganesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1450260498, "creation_date": 1450260498, "answer_id": 34309091, "question_id": 34307729, "link": "https://stackoverflow.com/questions/34307729/with-keil4-where-the-lpc2148-interrupts-or-irqs-wont-execute/34309091#34309091", "title": "with KEIL4 where the lpc2148 Interrupts or IRQs wont execute", "body": "<pre><code> the  code  is                                                                              /* Timer.h */\n#include \"LPC214x.h\"\n#include \"main.h\"\n\n#define VIC_EN      5\n#define VIC_TIMER0  4\n#define MR0         0\nvoid timer_init(void);\nvoid timer_isr(void);\n\n\n /* Timer.c */\n volatile uint8_t flag; \n void timer_init()\n {\n //disable and reset timer counters\n T0TCR = BV(1);\n\n //use T0 as TIMER: \n  T0CTCR = 0x00;\n\n //set prescalar\n T0PR = 15000000-1;\n\n //setup MR0 for 5 sec\n  T0MR0 = 4; //4+1\n\n //enable intr on MR0, reset\n  T0MCR |= BV(0) | BV(1);\n\n //enable T0 intr in VIC\n VICVectAddr1 = (uint32_t)timer_isr;\n VICVectCntl1 = BV(VIC_TIMER0) | VIC_EN;\n VICIntSelect &amp;= ~BV(VIC_TIMER0);\n VICIntEnable |= BV(VIC_TIMER0);\n\n //enable timer counter\n T0TCR = BV(0);\n }\n\nvoid timer_isr()\n{\n   flag=1;\n\n //clear intr in TIMER regrs\n T0IR |= BV(0);\n\n //clear intr in VIC\n VICVectAddr = 0x00000000;\n }\n\n/* Main.c*/\n\nint main (void) \n{\nint cnt=0;\nchar str[32];\ntimer_init();\nlcd_init();\nlcd_putstring(LCD_LINE1,\" *TIMER* \");\n_delay_ms(1000);\nstr_printf(str,\"Count:%d\",cnt);\n//lcd_putstring(LCD_LINE2,str);\n\nwhile(1)\n{\n    while(flag==0);\n    flag = 0;\n    cnt++;\n    str_printf(str,\"Count:%d\",cnt);\n    lcd_putstring(LCD_LINE2,str);\n}\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5685714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8eb7f993d91b27b00674dcb8562580?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5685714/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1450436137, "creation_date": 1450256580, "last_edit_date": 1450436137, "question_id": 34307729, "link": "https://stackoverflow.com/questions/34307729/with-keil4-where-the-lpc2148-interrupts-or-irqs-wont-execute", "title": "with KEIL4 where the lpc2148 Interrupts or IRQs wont execute", "body": "<p>When the timer match MR0, run the interrupt service routine  At the end of the interrupt service routine. I don't return from service routine to main program.  Why does my program not return from service routine?</p>\n\n<p>See answer below for complete code</p>\n"}, {"tags": ["c++", "c", "multithreading", "mpi"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1450254278, "post_id": 34306997, "comment_id": 56355696, "body": "What is the value of <code>n_portion</code>?"}, {"owner": {"reputation": 900, "user_id": 1423320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf5fd7800794cb4934ffd7174dda7fd7?s=128&d=identicon&r=PG", "display_name": "rahul.deshmukhpatil", "link": "https://stackoverflow.com/users/1423320/rahul-deshmukhpatil"}, "edited": false, "score": 2, "creation_date": 1450254464, "post_id": 34306997, "comment_id": 56355796, "body": "did you tried to debug the code, on which line it gets segmentation fault?  well calloc returns the null pointer if it is not able to allocate the code."}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1450254532, "post_id": 34306997, "comment_id": 56355835, "body": "@PaulMcKenzie I runned for 3 process and I have 12 elements in array. So <code>n_portion = 4</code>."}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "edited": false, "score": 0, "creation_date": 1450254662, "post_id": 34306997, "comment_id": 56355897, "body": "@JoachimPileborg But, it should be like that. Because I am using root as a worker too. if <code>n_procs</code> is 2 root will calculate one half of the array and <code>worker1</code> will be calculate the other half."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1450254705, "post_id": 34306997, "comment_id": 56355928, "body": "@samet - Are you assuming it will be 4, or did you verify for a fact that it <i>is</i> 4?  Your code contains no error checking, which is why it is still not clear if the value is really 4.  All we have are calls to <code>calloc</code> with variables that we have no idea what they are.  How about hard-coding a <code>4</code> instead of using a variable?  If you did that, would you still have the issue?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1450255862, "post_id": 34306997, "comment_id": 56356594, "body": "You aren&#39;t checking the result of <code>calloc()</code>.  Maybe it&#39;s failing."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1450256697, "post_id": 34306997, "comment_id": 56357136, "body": "Side note: You forgot to initialize <code>total sum</code>. This fact leads me to believe that you need to turn up your warning level. Add <code>-wall</code> to your compiler command line (assuming you use <code>gcc</code>)."}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "edited": false, "score": 0, "creation_date": 1450257899, "post_id": 34306997, "comment_id": 56357883, "body": "Thanks for comments. I am having trouble with mpi server for now. I will try all and give feedback in a few minutes."}, {"owner": {"reputation": 3448, "user_id": 5466118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5af41e2f2230c199ad274d363eda32?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zabel", "link": "https://stackoverflow.com/users/5466118/martin-zabel"}, "edited": false, "score": 3, "creation_date": 1450269931, "post_id": 34306997, "comment_id": 56366305, "body": "Shouldn&#39;t it be just <code>local</code> instead of <code>&amp;local</code> in the call of <code>MPI_Recv</code> ?"}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1450340915, "post_id": 34306997, "comment_id": 56401094, "body": "@PaulMcKenzie The same problem exist when I hard-coded <code>n_portion</code> as 4. So, I initialized <code>total_sum = 0</code> as Klas pointed, and changed <code>&amp;local</code> to <code>local</code> as Martin pointed. It works! Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "edited": false, "score": 0, "creation_date": 1450340976, "post_id": 34315207, "comment_id": 56401131, "body": "Thanks! Perfect solution."}], "tags": [], "owner": {"reputation": 46, "user_id": 5687212, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9853808dc31bd417a3b14f294c3f2538?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/5687212/johannes"}, "is_accepted": true, "score": 3, "last_activity_date": 1450277744, "creation_date": 1450277744, "answer_id": 34315207, "question_id": 34306997, "link": "https://stackoverflow.com/questions/34306997/mpi-calloc-causes-segmentation-fault/34315207#34315207", "title": "MPI calloc Causes Segmentation Fault", "body": "<p>I'd say the problem lies in the MPI_Recv on the worker side.\nYou should use 'local' instead of '&amp;local' as the buffer.\nMPI expects the \"initial adress of the receive buffer\" <a href=\"http://www.mpi-forum.org/docs/mpi-3.1/mpi31-report/node50.htm#Node50\" rel=\"nofollow\" title=\"MPI standard\">(see MPI standard)</a>,\nwhich in the case of dynamic arrays is the array variable itself.</p>\n\n<pre><code>MPI_Recv( local, n_portion, MPI_INT, root, tag1, MPI_COMM_WORLD, &amp;status);\n</code></pre>\n\n<p>You may also want to initialize 'total_sum' to 0 on root and then your code should run.</p>\n\n<p>Edit: Just saw that Martin Zabel already pointed this out in the comments</p>\n"}], "owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 34315207, "answer_count": 1, "score": 3, "last_activity_date": 1450277744, "creation_date": 1450254036, "question_id": 34306997, "link": "https://stackoverflow.com/questions/34306997/mpi-calloc-causes-segmentation-fault", "title": "MPI calloc Causes Segmentation Fault", "body": "<p>I wrote a program to find sum of array elements by MPI. Both root and workers finds the sum of a portion and workers sends partial sums to root at the end. When I try with a static sized array there isn't any problem. But it gives segmentation fault if I use calloc. The source code is given below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n#define tag1 1 /* send from root to workers */\n#define tag2 2 /* send from workers to root */\n#define root 0\n#define n_data 12\n\nint main(int argc, char *argv[]) \n{ \n    int total_sum, partial_sum;\n    int my_id, i, n_procs, n_portion;\n\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Status status;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_id);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;n_procs);\n    n_portion=n_data/n_procs;\n\n    int *array = (int *)calloc(n_data, sizeof(int));\n    int *local  = (int *)calloc(n_portion, sizeof(int));\n\n    if(my_id == root) { \n\n        /* initialize array */\n        for(i = 0; i &lt; n_data; i++) \n            array[i]=i;\n\n        /* send a portion of the array to each worker */\n        for(i= 1; i &lt; n_procs; i++) \n            MPI_Send( &amp;array[i*n_portion], n_portion, MPI_INT,i, tag1, MPI_COMM_WORLD); \n\n        /* calculate the sum of my portion */\n        for(i = 0; i &lt; n_portion; i++)\n            total_sum += array[i];\n\n        /* collect the partial sums from workers */\n        for(i= 1; i &lt; n_procs; i++) {\n            MPI_Recv( &amp;partial_sum, 1, MPI_INT, MPI_ANY_SOURCE,tag2, MPI_COMM_WORLD, &amp;status);\n            total_sum += partial_sum; \n        }\n\n        printf(\"The total sum is: %d\\n\", total_sum);\n    }\n    else { /* I am a worker, receive data from root */\n\n        MPI_Recv( &amp;local, n_portion, MPI_INT, root, tag1, MPI_COMM_WORLD, &amp;status);\n\n        /* Calculate the sum of my portion of the array */\n        partial_sum = 0;\n        for(i = 0; i &lt; n_portion; i++)\n            partial_sum += local[i];\n\n        /* send my partial sum to the root */\n        MPI_Send( &amp;partial_sum, 1, MPI_INT, root, tag2, MPI_COMM_WORLD);\n    }\n\n    MPI_Finalize(); \n    return 0;\n}\n</code></pre>\n\n<p>The error I took is:</p>\n\n<pre><code>-bash-4.1$ mpirun -np 3 distApprox\n--------------------------------------------------------------------------\nmpirun noticed that process rank 2 with PID 110834 on node levrek1 exited on signal 11 (Segmentation fault).\n--------------------------------------------------------------------------\n</code></pre>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "edited": false, "score": 2, "creation_date": 1450252586, "post_id": 34306589, "comment_id": 56354795, "body": "question is not clear. please edit to make it clearer."}, {"owner": {"reputation": 29, "user_id": 5685473, "user_type": "registered", "profile_image": "https://graph.facebook.com/866397443432014/picture?type=large", "display_name": "Pankaj Anuragi", "link": "https://stackoverflow.com/users/5685473/pankaj-anuragi"}, "reply_to_user": {"reputation": 2789, "user_id": 5350328, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d81b878ab7662258906d27f2877327b?s=128&d=identicon&r=PG&f=1", "display_name": "phoenix", "link": "https://stackoverflow.com/users/5350328/phoenix"}, "edited": false, "score": 0, "creation_date": 1450252916, "post_id": 34306589, "comment_id": 56354962, "body": "done ! is it clear now ?"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450253107, "post_id": 34306589, "comment_id": 56355051, "body": "@PankajAnuragi still quite unclear, do you mean when you put input of s=2 you will get two row matrices/vectors each having value of [1 2]? or you actually only have one matrix/vector [1 2] when s=2?"}, {"owner": {"reputation": 29, "user_id": 5685473, "user_type": "registered", "profile_image": "https://graph.facebook.com/866397443432014/picture?type=large", "display_name": "Pankaj Anuragi", "link": "https://stackoverflow.com/users/5685473/pankaj-anuragi"}, "edited": false, "score": 0, "creation_date": 1450253689, "post_id": 34306589, "comment_id": 56355377, "body": "for s=2, we have elements 1 and 2 , having these two elements we wants to make matrices ,so there is two possibilities here , first a matrix [ 1 2] simple in 1 row and second [1 2] in column ( I&#39;m not able to write the second matrix in two columns)  so in total we can make 2 matrices for s= 2"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450254282, "post_id": 34306589, "comment_id": 56355701, "body": "@PankajAnuragi I see, so what you want to find is the number of matrix you can make from the number of element you give, right? Or you want a program to do it for you for a given number?"}, {"owner": {"reputation": 29, "user_id": 5685473, "user_type": "registered", "profile_image": "https://graph.facebook.com/866397443432014/picture?type=large", "display_name": "Pankaj Anuragi", "link": "https://stackoverflow.com/users/5685473/pankaj-anuragi"}, "edited": false, "score": 0, "creation_date": 1450254719, "post_id": 34306589, "comment_id": 56355938, "body": "yes! I m trying to make a program for it which takes values of S and give the output (no. of different matrices can be form)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1450256174, "post_id": 34306589, "comment_id": 56356781, "body": "It is not very clear why you need to talk about 1,2,..,n as matrix elements. Do you consider (1,2) and (2,1) different? If not, why just not use (0,0) or whatever?"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450257152, "post_id": 34306589, "comment_id": 56357412, "body": "@PankajAnuragi you can read the link given by JohnZwinck for the code to answer"}, {"owner": {"reputation": 29, "user_id": 5685473, "user_type": "registered", "profile_image": "https://graph.facebook.com/866397443432014/picture?type=large", "display_name": "Pankaj Anuragi", "link": "https://stackoverflow.com/users/5685473/pankaj-anuragi"}, "edited": false, "score": 0, "creation_date": 1450259154, "post_id": 34306589, "comment_id": 56358767, "body": "two matrices are different if their no. of columns are different or if their no. of rows are different ..., so NO  (1,2) and (2,1) r not different and S &gt;0"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1450260775, "post_id": 34306589, "comment_id": 56359890, "body": "So your point 1 is irrelevant."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1450254705, "last_edit_date": 1495542196, "creation_date": 1450254705, "answer_id": 34307174, "question_id": 34306589, "link": "https://stackoverflow.com/questions/34306589/find-number-of-different-matrices-n-of-all-size-s-no-of-elements/34307174#34307174", "title": "find number of different matrices( N) of all size s (no. of elements)?", "body": "<p>The examples you give, plus the next few, are:</p>\n\n<ol>\n<li>1x1</li>\n<li>1x2, 2x1</li>\n<li>1x3, 3x1</li>\n<li>1x4, 2x2, 4x1</li>\n<li>1x5, 5x1</li>\n<li>1x6, 2x3, 3x2, 6x1</li>\n<li>1x7, 7x1</li>\n<li>1x8, 2x4, 4x2, 8x1</li>\n</ol>\n\n<p>So what's the pattern?  The solutions are simply the integral divisors of <code>s</code>.  Always <code>1</code> and <code>s</code> itself, of course, but also every integer which evenly divides <code>s</code>.  You can find algorithms to find all the factors of an integer online already, such as here: <a href=\"https://stackoverflow.com/questions/11699324/algorithm-to-find-all-the-exact-divisors-of-a-given-integer\">Algorithm to find all the exact divisors of a given integer</a> or here: <a href=\"https://stackoverflow.com/questions/239865/best-way-to-find-all-factors-of-a-given-number-in-c-sharp\">Best way to find all factors of a given number in C#</a></p>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1450258864, "last_edit_date": 1450258864, "creation_date": 1450255723, "answer_id": 34307456, "question_id": 34306589, "link": "https://stackoverflow.com/questions/34306589/find-number-of-different-matrices-n-of-all-size-s-no-of-elements/34307456#34307456", "title": "find number of different matrices( N) of all size s (no. of elements)?", "body": "<p>You need the divisible factors [not necessarily prime ones] to get number pairs.</p>\n\n<p>Here's a [working] perl script.  I don't write \"idiomatic\" perl, but, rather more like a C programmer would, so in should be easy enough to treat this as pseudo-code to write a C program:</p>\n\n<pre><code>#!/usr/bin/perl\n# mtxcombo -- generate matrix combinations\n\nmaster(@ARGV);\nexit(0);\n\n# master -- master control\nsub master\n{\n    my(@argv) = @_;\n    my($lim);\n    my($s);\n\n    $lim = shift(@argv);\n    $lim //= 1000;\n\n    for ($s = 1;  $s &lt;= $lim;  ++$s) {\n        domtx($s);\n    }\n}\n\nsub domtx\n{\n    my($s) = @_;\n    my($i);\n    my($d);\n\n    printf(\"%d:\",$s);\n\n    add(1,$s);\n\n    for ($i = 2;  $i &lt; $s;  ++$i) {\n        # up to sqrt\n        last if (($i * $i) &gt; $s);\n\n        if (($s % $i) == 0) {\n            $d = int($s / $i);\n            add($d,$i);\n            next;\n        }\n    }\n\n    printf(\"\\n\");\n}\n\nsub add\n{\n    my($x,$y) = @_;\n\n    printf(\" %dx%d\",$x,$y);\n\n    if ($x != $y) {\n        printf(\" %dx%d\",$y,$x);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Here's the program output for <code>&lt;program&gt; 100</code>:</p>\n\n<pre><code>1: 1x1\n2: 1x2 2x1\n3: 1x3 3x1\n4: 1x4 4x1 2x2\n5: 1x5 5x1\n6: 1x6 6x1 3x2 2x3\n7: 1x7 7x1\n8: 1x8 8x1 4x2 2x4\n9: 1x9 9x1 3x3\n10: 1x10 10x1 5x2 2x5\n11: 1x11 11x1\n12: 1x12 12x1 6x2 2x6 4x3 3x4\n13: 1x13 13x1\n14: 1x14 14x1 7x2 2x7\n15: 1x15 15x1 5x3 3x5\n16: 1x16 16x1 8x2 2x8 4x4\n17: 1x17 17x1\n18: 1x18 18x1 9x2 2x9 6x3 3x6\n19: 1x19 19x1\n20: 1x20 20x1 10x2 2x10 5x4 4x5\n21: 1x21 21x1 7x3 3x7\n22: 1x22 22x1 11x2 2x11\n23: 1x23 23x1\n24: 1x24 24x1 12x2 2x12 8x3 3x8 6x4 4x6\n25: 1x25 25x1 5x5\n26: 1x26 26x1 13x2 2x13\n27: 1x27 27x1 9x3 3x9\n28: 1x28 28x1 14x2 2x14 7x4 4x7\n29: 1x29 29x1\n30: 1x30 30x1 15x2 2x15 10x3 3x10 6x5 5x6\n31: 1x31 31x1\n32: 1x32 32x1 16x2 2x16 8x4 4x8\n33: 1x33 33x1 11x3 3x11\n34: 1x34 34x1 17x2 2x17\n35: 1x35 35x1 7x5 5x7\n36: 1x36 36x1 18x2 2x18 12x3 3x12 9x4 4x9 6x6\n37: 1x37 37x1\n38: 1x38 38x1 19x2 2x19\n39: 1x39 39x1 13x3 3x13\n40: 1x40 40x1 20x2 2x20 10x4 4x10 8x5 5x8\n41: 1x41 41x1\n42: 1x42 42x1 21x2 2x21 14x3 3x14 7x6 6x7\n43: 1x43 43x1\n44: 1x44 44x1 22x2 2x22 11x4 4x11\n45: 1x45 45x1 15x3 3x15 9x5 5x9\n46: 1x46 46x1 23x2 2x23\n47: 1x47 47x1\n48: 1x48 48x1 24x2 2x24 16x3 3x16 12x4 4x12 8x6 6x8\n49: 1x49 49x1 7x7\n50: 1x50 50x1 25x2 2x25 10x5 5x10\n51: 1x51 51x1 17x3 3x17\n52: 1x52 52x1 26x2 2x26 13x4 4x13\n53: 1x53 53x1\n54: 1x54 54x1 27x2 2x27 18x3 3x18 9x6 6x9\n55: 1x55 55x1 11x5 5x11\n56: 1x56 56x1 28x2 2x28 14x4 4x14 8x7 7x8\n57: 1x57 57x1 19x3 3x19\n58: 1x58 58x1 29x2 2x29\n59: 1x59 59x1\n60: 1x60 60x1 30x2 2x30 20x3 3x20 15x4 4x15 12x5 5x12 10x6 6x10\n61: 1x61 61x1\n62: 1x62 62x1 31x2 2x31\n63: 1x63 63x1 21x3 3x21 9x7 7x9\n64: 1x64 64x1 32x2 2x32 16x4 4x16 8x8\n65: 1x65 65x1 13x5 5x13\n66: 1x66 66x1 33x2 2x33 22x3 3x22 11x6 6x11\n67: 1x67 67x1\n68: 1x68 68x1 34x2 2x34 17x4 4x17\n69: 1x69 69x1 23x3 3x23\n70: 1x70 70x1 35x2 2x35 14x5 5x14 10x7 7x10\n71: 1x71 71x1\n72: 1x72 72x1 36x2 2x36 24x3 3x24 18x4 4x18 12x6 6x12 9x8 8x9\n73: 1x73 73x1\n74: 1x74 74x1 37x2 2x37\n75: 1x75 75x1 25x3 3x25 15x5 5x15\n76: 1x76 76x1 38x2 2x38 19x4 4x19\n77: 1x77 77x1 11x7 7x11\n78: 1x78 78x1 39x2 2x39 26x3 3x26 13x6 6x13\n79: 1x79 79x1\n80: 1x80 80x1 40x2 2x40 20x4 4x20 16x5 5x16 10x8 8x10\n81: 1x81 81x1 27x3 3x27 9x9\n82: 1x82 82x1 41x2 2x41\n83: 1x83 83x1\n84: 1x84 84x1 42x2 2x42 28x3 3x28 21x4 4x21 14x6 6x14 12x7 7x12\n85: 1x85 85x1 17x5 5x17\n86: 1x86 86x1 43x2 2x43\n87: 1x87 87x1 29x3 3x29\n88: 1x88 88x1 44x2 2x44 22x4 4x22 11x8 8x11\n89: 1x89 89x1\n90: 1x90 90x1 45x2 2x45 30x3 3x30 18x5 5x18 15x6 6x15 10x9 9x10\n91: 1x91 91x1 13x7 7x13\n92: 1x92 92x1 46x2 2x46 23x4 4x23\n93: 1x93 93x1 31x3 3x31\n94: 1x94 94x1 47x2 2x47\n95: 1x95 95x1 19x5 5x19\n96: 1x96 96x1 48x2 2x48 32x3 3x32 24x4 4x24 16x6 6x16 12x8 8x12\n97: 1x97 97x1\n98: 1x98 98x1 49x2 2x49 14x7 7x14\n99: 1x99 99x1 33x3 3x33 11x9 9x11\n100: 1x100 100x1 50x2 2x50 25x4 4x25 20x5 5x20 10x10\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5685473, "user_type": "registered", "profile_image": "https://graph.facebook.com/866397443432014/picture?type=large", "display_name": "Pankaj Anuragi", "link": "https://stackoverflow.com/users/5685473/pankaj-anuragi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1450259481, "creation_date": 1450252445, "last_edit_date": 1450259481, "question_id": 34306589, "link": "https://stackoverflow.com/questions/34306589/find-number-of-different-matrices-n-of-all-size-s-no-of-elements", "title": "find number of different matrices( N) of all size s (no. of elements)?", "body": "<p>Note:</p>\n\n<p>1) for s=n\nwe have elements from 1,2,3...,n that are used to fill the matrix </p>\n\n<p>2) two matrices are different if their no. of columns are different or if their no. of rows are different </p>\n\n<p>I tried to find the solution like\nfor <code>s = 1</code>\nwe can make only <code>1</code> matrix</p>\n\n<p>then for <code>s = 2</code>\nwe have two matrices like\n  <code>[1  2]</code>  order 1x2 and another same along the column of order 2x1</p>\n\n<p>for <code>s = 3</code> , also two matrices\n<code>[1 2 3]</code> of order 1x3 and another along the column of order 3x1</p>\n\n<p>but for <code>s = 4</code>\nwe have matrices  1x4,4x1 and 2x2</p>\n\n<p>but I m not able to find any pattern in this\n for all values of <code>s = 1,2,3,4,5,6...</code></p>\n\n<p>Need help !</p>\n"}, {"tags": ["c", "twitter", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5685362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb8e3d71dcc9a8b97c981e3008db7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "JulianP", "link": "https://stackoverflow.com/users/5685362/julianp"}, "edited": false, "score": 0, "creation_date": 1450289034, "post_id": 34310697, "comment_id": 56379659, "body": "I am now using the &quot;<a href=\"https://twitter.com/login/sessions\" rel=\"nofollow noreferrer\">twitter.com/login/sessions</a>&quot; URL as the target. I also added a few more parameters to my post request : &amp;remember_me=1&amp;return_to_ssl=true&amp;scribe_log=&amp;redirect_after&zwnj;&#8203;_login=true  But still will not work. The reason I close the handle is so that the curl COOKIEJAR &quot;method&quot; will output the cookie to the &quot;cookie.txt&quot; file. otherwise it doesn&#39;t. Could this be an issue?  Also I tried using wireshark before but miserably failed to accomplish anything."}, {"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "reply_to_user": {"reputation": 11, "user_id": 5685362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb8e3d71dcc9a8b97c981e3008db7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "JulianP", "link": "https://stackoverflow.com/users/5685362/julianp"}, "edited": false, "score": 0, "creation_date": 1450304124, "post_id": 34310697, "comment_id": 56388012, "body": "You need to add all fields the form has, including hidden ones. You don&#39;t need the jar file saved if you reuse the handle, as curl keep saved cookies &quot;in the handle&quot; as well so the second request would use the correct ones. Again: compare the browser&#39;s and libcurl&#39;s requests."}, {"owner": {"reputation": 11, "user_id": 5685362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb8e3d71dcc9a8b97c981e3008db7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "JulianP", "link": "https://stackoverflow.com/users/5685362/julianp"}, "edited": false, "score": 0, "creation_date": 1450308473, "post_id": 34310697, "comment_id": 56389955, "body": "I changed it so that it does not cleanup the handle after the first &#39;perform&#39;. Do I leave the COOKIE file inputs as &quot;cookie.txt&quot; or do I set them to &quot;-&quot; for COOKIEJAR and &quot;&quot; for COOKIEFILE ?  Also, I updated the format to: session[username_or_email]=user&amp;session[password]=password&amp;r&zwnj;&#8203;emember_me=1&amp;scribe_&zwnj;&#8203;log=&amp;redirect_after_&zwnj;&#8203;login=true&amp;authentic&zwnj;&#8203;ity_token=6e70616560&zwnj;&#8203;9354bd7a92a99cf94e09&zwnj;&#8203;140ea86c6f&amp;ui_metric&zwnj;&#8203;s=off&amp;ui_metrics_see&zwnj;&#8203;d=1450307791003  ...that should be including everything from the action=&quot;<a href=\"https://twitter.com/sessions/\" rel=\"nofollow noreferrer\">twitter.com/sessions</a>&quot; form"}, {"owner": {"reputation": 11, "user_id": 5685362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb8e3d71dcc9a8b97c981e3008db7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "JulianP", "link": "https://stackoverflow.com/users/5685362/julianp"}, "edited": false, "score": 0, "creation_date": 1450308478, "post_id": 34310697, "comment_id": 56389958, "body": "Can you please double check and confirm if I am setting the fields correctly? Also, the metric seed is random every page load... do I need to scrape that from the HTML and set it correctly or can I use  generic number?  PS. thank you so much for your help, I truly appreciate it"}], "tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1450264872, "creation_date": 1450264872, "answer_id": 34310697, "question_id": 34306221, "link": "https://stackoverflow.com/questions/34306221/logging-into-twitter-using-the-c-libcurl-library/34310697#34310697", "title": "Logging into Twitter using the C libcurl library", "body": "<p>To start with, I believe you're sending the POST to the wrong URL (see the action=\"\" parameter to the form tag). Then I also think you should avoid closing/recreating the easy handle as that's just extra overhead.</p>\n\n<p>But in more general terms: fire up your network tool in your browser (Firefox or Chrome) and record what it does when you go to the page manually and then login. You especially check the GET of the login form page and the POST where the browser logs in.</p>\n\n<p>Then you take that knowledge and doublecheck that your libcurl-using application works the same way. It can then be useful to use <a href=\"http://curl.haxx.se/libcurl/c/CURLOPT_DEBUGFUNCTION.html\" rel=\"nofollow\">DEBUGFUNCTION</a> to get a full trace of everything libcurl sends and receives so that you can check that is very similar to your browser's actions.</p>\n"}], "owner": {"reputation": 11, "user_id": 5685362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb8e3d71dcc9a8b97c981e3008db7f4a?s=128&d=identicon&r=PG&f=1", "display_name": "JulianP", "link": "https://stackoverflow.com/users/5685362/julianp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450308611, "creation_date": 1450250987, "last_edit_date": 1450308611, "question_id": 34306221, "link": "https://stackoverflow.com/questions/34306221/logging-into-twitter-using-the-c-libcurl-library", "title": "Logging into Twitter using the C libcurl library", "body": "<p>I have spent days trying to figure this out without luck..\nI am able to log into other websites but not Twitter and its driving me nuts!</p>\n\n<p>I won't post my entire program, just the parts that matter.\n(I will abstract out some parts for your sake)</p>\n\n<pre><code>    int main(int argc, const char * argv[]) {\n\n    curl_global_init( CURL_GLOBAL_ALL );\n\n    CURL * myHandle = curl_easy_init ( );\n    CURLcode result;\n    OutputBuffer output;\n\n    /* Fetch Login page to parse authenticity token */\n\n    // Set up a couple initial paramaters that we will not need to mofiy later.\n    curl_easy_setopt(myHandle, CURLOPT_USERAGENT, \"Mozilla/4.0\");\n    curl_easy_setopt(myHandle, CURLOPT_AUTOREFERER, 1 );\n    curl_easy_setopt(myHandle, CURLOPT_FOLLOWLOCATION, 1 );\n    curl_easy_setopt(myHandle, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);\n    curl_easy_setopt(myHandle, CURLOPT_WRITEDATA, &amp;output);\n    curl_easy_setopt(myHandle, CURLOPT_COOKIEFILE, \"cookies.txt\");\n    curl_easy_setopt(myHandle, CURLOPT_COOKIEJAR, \"cookies.txt\");\n\n    // Visit the login page once to obtain a PHPSESSID cookie\n    curl_easy_setopt(myHandle, CURLOPT_URL, \"https://www.twitter.com/login/\");\n    result = curl_easy_perform( myHandle );\n\n\n\n   // assume that the program properly retrieves the authenticity token here and stores it in 'token'\n   // then creates 'char *postreq' with the following format:\n   // session[username_or_email]=EnterUsername&amp;session[password]=EnterPassword&amp;remember_me=1&amp;return_to_ssl=true&amp;scribe_log=&amp;redirect_after_login=true&amp;authenticity_token=TokenGoesHere&amp;ui_metrics=off&amp;ui_metrics_seed=1450307791003\n\n\n\n    /*********************************************************************************************************/\n\n// perform login \n\n        // set the post fields\n        curl_easy_setopt(myHandle, CURLOPT_COPYPOSTFIELDS, postreq);\n\n        // forge the HTTP referer field, or HTS will deny the login\n        curl_easy_setopt(myHandle, CURLOPT_REFERER, \"https://www.twitter.com/login/sessions\");\n\n        result = curl_easy_perform( myHandle );\n\n        printf(\"%s\", output.buffer);\n\n\n        return 0;\n    }\n</code></pre>\n\n<p>I know it is failing because I print out the resulting web page and I filter through the keyword \"logout\" (which only should appear when logged in) and it is never found.\nI have no clue what I am doing wrong.. it works for other websites :/</p>\n\n<p>Please do not tell me to use the Twitter API! \nI strictly want to do this using C and libcurl w/out the API.</p>\n\n<p>My logic so far:\nPhase 1:\n- fetch login page\n- parse authenticity token\n- save session cookie to file</p>\n\n<p>Phase 2:\n- build POST request: session[username_or_email]=EnterUsername&amp;session[password]=EnterPassword&amp;authenticity_token=TokenGoesHere\n- load cookie from file\n- perform login</p>\n\n<p>I've looked everywhere and I can't figure it out..\nany guidance is truly appreciated!</p>\n\n<p>PS. is my POST request format correct for Twitter? Or is it missing something?</p>\n"}, {"tags": ["c", "linux", "qt", "popen"], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 5, "last_activity_date": 1450259071, "last_edit_date": 1495541044, "creation_date": 1450259071, "answer_id": 34308580, "question_id": 34306115, "link": "https://stackoverflow.com/questions/34306115/popen-does-not-trap-all-the-outputs-of-a-command/34308580#34308580", "title": "popen does not trap all the outputs of a command", "body": "<p>In your code:</p>\n\n<pre><code>FILE* file1 = popen (\"make\", \"r\");\n</code></pre>\n\n<p>you can use whatever <em>shell</em> command is useful on the machine.  For instance, you can redirect the <em>standard error</em> to the same destination as the <em>standard output</em>, and capture <em>both</em> via the pipe:</p>\n\n<pre><code>FILE* file1 = popen (\"make 2&gt;&amp;1\", \"r\");\n</code></pre>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6900577/c-popen-wont-catch-stderr\">c popen won't catch stderr</a></li>\n<li><a href=\"https://stackoverflow.com/questions/280571/how-to-control-popen-stdin-stdout-stderr-redirection\">how to control popen stdin, stdout, stderr redirection?</a></li>\n</ul>\n\n<p>While it is technically possible to open multiple pipes to a subprocess, it is much more complicated than the single-line call to <code>popen</code>:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/948221/does-this-multiple-pipes-code-in-c-makes-sense\">Does this multiple pipes code in C makes sense?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4059723/how-do-i-use-two-pipes-in-unix-c\">How do I use two pipes in Unix C?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12981199/multiple-pipe-implementation-using-system-call-fork-execvp-wait-pipe-i\">Multiple pipe implementation using system call fork() execvp() wait() pipe() - it is simply not working</a></li>\n</ul>\n"}], "owner": {"reputation": 18300, "user_id": 462608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/s9JpE.jpg?s=128&g=1", "display_name": "Aquarius_Girl", "link": "https://stackoverflow.com/users/462608/aquarius-girl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 34308580, "answer_count": 1, "score": -1, "last_activity_date": 1450332028, "creation_date": 1450250548, "question_id": 34306115, "link": "https://stackoverflow.com/questions/34306115/popen-does-not-trap-all-the-outputs-of-a-command", "title": "popen does not trap all the outputs of a command", "body": "<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QProcess&gt;\n#include &lt;QFile&gt;\n#include &lt;QDebug&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    QGuiApplication app(argc, argv);\n\n    FILE* file1 = popen (\"make\", \"r\");\n\n    char buff[5122];\n\n    while(fgets(buff, sizeof(buff), file1)!=NULL)\n    {\n        qDebug() &lt;&lt; \"from here: \" &lt;&lt; buff;\n    }\n\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral (\"qrc:/main.qml\")));\n    return app.exec();\n}\n</code></pre>\n\n<p>With <code>make</code> command the output is:</p>\n\n<p><code>QML debugging is enabled. Only use this in a safe environment.</code><br>\n<code>from here:  make: Nothing to be done for</code>first'.`</p>\n\n<p>With <code>ping</code> command the output is:</p>\n\n<pre><code>QML debugging is enabled. Only use this in a safe environment.\nUsage: ping [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]\n            [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]\n            [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]\n            [-w deadline] [-W timeout] [hop1 ...] destination\n</code></pre>\n\n<hr>\n\n<p>As you can see, with <code>make</code> command the output was trapped and displayed by <code>qDebug</code>. <strong>But, this isn't the case with <code>ping</code></strong>.</p>\n\n<p><strong>Be it an error or whatever, I want every output to be trapped and displayed through qDebug through my program.</strong></p>\n\n<p>What am I supposed to do now?</p>\n"}, {"tags": ["c", "linux", "caching", "gcc", "arm"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1450258336, "post_id": 34306031, "comment_id": 56358190, "body": "What are &quot;the accelerators&quot; - are you referring to DMA capable devices? If that is the case, how have you ended up with a cacheable mapping of a buffer for a non-coherent device anyway?"}, {"owner": {"reputation": 59, "user_id": 5335140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39de841bdd7f2a8160084b680156ead1?s=128&d=identicon&r=PG&f=1", "display_name": "Jyothi Vemulapalli", "link": "https://stackoverflow.com/users/5335140/jyothi-vemulapalli"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1450261393, "post_id": 34306031, "comment_id": 56360325, "body": "If I use pgprot_noncached(), it is fine. To improve performance, I want to try using cacheable buffers. Not sure if it is possible or not"}, {"owner": {"reputation": 59, "user_id": 5335140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39de841bdd7f2a8160084b680156ead1?s=128&d=identicon&r=PG&f=1", "display_name": "Jyothi Vemulapalli", "link": "https://stackoverflow.com/users/5335140/jyothi-vemulapalli"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1450266568, "post_id": 34306031, "comment_id": 56363981, "body": "I think its non-coherent device only, that&#39;s why I want to do explicit cache flush and invalidate operations."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1450274789, "post_id": 34306031, "comment_id": 56369818, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6046716/how-clear-and-invalidate-arm-v7-processor-cache-from-user-mode-on-linux-2-6-35\">How clear and invalidate ARM v7 processor cache from User Mode on Linux 2.6.35</a>"}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1450274871, "post_id": 34306031, "comment_id": 56369878, "body": "You already asked <a href=\"http://stackoverflow.com/questions/34133612/cache-flush-and-invalidate-operations-from-linux-userspace-in-armv7-a\">this question</a> which was a duplicate.  I updated <a href=\"http://stackoverflow.com/questions/22701352/flush-cpu-cache-for-a-region-of-address-space\">this question</a> with some info as I said in the comments in your first question (which was a duplicate).  If you read the ARMv7-A TRM, you will see that the CP15 cache register can only be accessed from <i>super mode</i>.  The only reliable way is a system call.  If you found Linux doesn&#39;t support it, then there is no way."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1450275397, "post_id": 34306031, "comment_id": 56370231, "body": "This <a href=\"https://community.arm.com/groups/processors/blog/2010/02/17/caches-and-self-modifying-code\" rel=\"nofollow noreferrer\">blog</a> specifically says that the linux syscall flushes the data cache; so either the blog writer is wrong, you have a bad version of Linux/glibc, or your code is wrong.  Have you given anyone the information to figure out which one it is? <a href=\"http://stackoverflow.com/questions/22701352/flush-cpu-cache-for-a-region-of-address-space\" title=\"flush cpu cache for a region of address space\">stackoverflow.com/questions/22701352/&hellip;</a>"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1450306905, "post_id": 34306031, "comment_id": 56389364, "body": "If you have devices doing their own DMA, that <i>has</i> to be managed by drivers in the kernel, full stop. Userspace cache maintenance essentially covers making the data/instruction caches coherent, to handle stuff that userspace <i>can</i> do like self-modifying code or JITs. It doesn&#39;t cover such fun as outer cache maintenance (which you probably need on Cortex-A9 if you have a PL310 L2 cache) and the other subtleties necessary to manage non-coherent DMA. You&#39;re then of course free to implement whatever method you like to communicate between your userspace component and your driver."}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 1, "creation_date": 1503556276, "post_id": 34306031, "comment_id": 78666645, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22701352/how-to-flush-the-cpu-cache-for-a-region-of-address-space-in-linux\">How to flush the CPU cache for a region of address space in Linux?</a>"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1509705816, "post_id": 34306031, "comment_id": 81137064, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34133612/cache-flush-and-invalidate-operations-from-linux-userspace-in-armv7-a\">Cache flush and invalidate operations from linux userspace in ARMv7-A</a>"}], "owner": {"reputation": 59, "user_id": 5335140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39de841bdd7f2a8160084b680156ead1?s=128&d=identicon&r=PG&f=1", "display_name": "Jyothi Vemulapalli", "link": "https://stackoverflow.com/users/5335140/jyothi-vemulapalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3825, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1450255156, "creation_date": 1450250256, "question_id": 34306031, "link": "https://stackoverflow.com/questions/34306031/how-to-do-data-cache-flush-invalidate-from-linux-user-space", "title": "How to do data cache flush/invalidate from linux user space", "body": "<p>Trying to use cacheable mapped buffers in linux user space. These buffers will be accessed by the accelerators. \nIn ARMv7-A architecture, is there any possibility to flush/invalidate data cache explicitly from linux user space?</p>\n\n<p>Tried __clear_cache(), it didnt work. As per URL <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html</a> , my understanding is that it flushes only instruction cache.</p>\n\n<p>user space applications run in user mode, do we need to set any privileged mode permissions for cache operations.</p>\n\n<p>More info will be helpful. </p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1450250458, "post_id": 34305910, "comment_id": 56353731, "body": "Please <a href=\"https://stackoverflow.com/posts/34305910/edit\">edit</a> the question to post the non-working code too. It&#39;s difficult to say why it&#39;s wrong when we can&#39;t see it. I.e. <i>where</i> do you set <code>next</code> to <code>NULL</code>? Or are you actually doing <code>*next = NULL</code> somewhere??"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 2, "creation_date": 1450250508, "post_id": 34305910, "comment_id": 56353760, "body": "&quot;But if I make *next = NULL, the display function will keep printing in the while loop.&quot; where?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1450254540, "post_id": 34305910, "comment_id": 56355841, "body": "Please show us an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 340, "user_id": 5450268, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57d94c150b28bf4d7426d3249c22ee01?s=128&d=identicon&r=PG&f=1", "display_name": "Nbajam 2015", "link": "https://stackoverflow.com/users/5450268/nbajam-2015"}, "edited": false, "score": 0, "creation_date": 1450254997, "post_id": 34305910, "comment_id": 56356093, "body": "Updated!! please see the code above"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1450255911, "post_id": 34305910, "comment_id": 56356622, "body": "In my opinion. initializing <i>next</i> in reverse() to NULL cannot make a difference at all, since it is set at the beginning of the while-body anyway."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1450257744, "post_id": 34305910, "comment_id": 56357790, "body": "If you had commented out the <code>create_in_front</code> and <code>create_in_between</code> function calls, you would see that there&#39;s nothing wrong with the <code>reverse</code> function."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1450259656, "post_id": 34305910, "comment_id": 56359143, "body": "This comment seems misleading: <i>&#39;delete_in_between - Function to add Node in between nodes&#39;</i>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450260969, "post_id": 34305910, "comment_id": 56360026, "body": "Debugger.........................DCV"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1450257632, "last_edit_date": 1450257632, "creation_date": 1450257190, "answer_id": 34307936, "question_id": 34305910, "link": "https://stackoverflow.com/questions/34305910/linked-list-reverse-function-leads-to-infinite-printing-loop/34307936#34307936", "title": "Linked list reverse function leads to infinite printing loop", "body": "<p>Function <code>create_in_front()</code> is bogus: <code>temp-&gt;next = ptr-&gt;next;</code> should be changed to <code>temp-&gt;next = ptr;</code></p>\n\n<p><code>create_in_between()</code> does not handle the case of <code>pos==0</code>.</p>\n\n<p><code>delete_in_between()</code> is completely dysfunctional: the node is frees but its predecessor still points to it.</p>\n\n<p><code>reverse()</code> seems correct to me, it could be simplified this way:</p>\n\n<pre><code>int reverse() {\n    struct node *prev = NULL;\n    struct node *curr = head;\n\n    while (curr != NULL) {\n        struct node *next = curr-&gt;next;\n        curr-&gt;next = prev;\n        prev = curr;\n        curr = next;\n    }\n    head = prev;\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem seems unrelated to your modifying the <code>reverse()</code> function, maybe a side effect of bugs in the other functions.</p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450310025, "last_edit_date": 1450310025, "creation_date": 1450259567, "answer_id": 34308734, "question_id": 34305910, "link": "https://stackoverflow.com/questions/34305910/linked-list-reverse-function-leads-to-infinite-printing-loop/34308734#34308734", "title": "Linked list reverse function leads to infinite printing loop", "body": "<p>Your <code>reverse()</code> function seems correct, but the rest of the code is somewhat overcomplicated. Try something like this:</p>\n\n<pre><code>void create(int data) {\n    struct node *temp = malloc(sizeof(struct node));\n\n    if (temp != NULL) {\n        temp-&gt;next = NULL;\n        temp-&gt;data = data;\n\n        if (head == NULL) {   // this is the first node\n            head = temp;\n        } else {\n            // this is not the first node\n            struct node *last = head;\n\n            while (last-&gt;next)\n                last = last-&gt;next;\n\n            last-&gt;next = temp;\n        }\n    }\n}\n\nvoid create_in_front(int data) {\n    struct node *temp = malloc(sizeof(struct node));\n\n    if (temp != NULL) {\n        temp-&gt;next = head;\n        temp-&gt;data = data;\n        head = temp;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 5450268, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57d94c150b28bf4d7426d3249c22ee01?s=128&d=identicon&r=PG&f=1", "display_name": "Nbajam 2015", "link": "https://stackoverflow.com/users/5450268/nbajam-2015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 34307936, "answer_count": 2, "score": -1, "last_activity_date": 1450310025, "creation_date": 1450249795, "last_edit_date": 1450257072, "question_id": 34305910, "link": "https://stackoverflow.com/questions/34305910/linked-list-reverse-function-leads-to-infinite-printing-loop", "title": "Linked list reverse function leads to infinite printing loop", "body": "<p>I was writing a C code to reverse a link list. I got into one problem.\nIf I do not make my <code>next</code> pointer <code>NULL</code> my reverse function works fine, but if I make it null the linked list always keeps printing in the while loop.</p>\n\n<p>Below is the correct program, which works fine.\nBut if I make <code>*next = NULL</code>, the display function will keep printing in the while loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node {\n    int data;\n    struct node *next;\n} *head;\n\n/*************************************************************/\n/*                                                           */\n/*  create - Function to create Nodes and add them at last   */\n/*                                                           */\n/*************************************************************/\nint create(int data)\n{\n    struct node *temp,*ptr = NULL;\n    //int data = 0;\n\n    ptr = head;\n\n    //Printf(\" Enter the Data for Node : \");\n    //scanf(\" %d \", data);  \n\n    temp = (struct node *)malloc(sizeof(struct node));\n\n    if (ptr == NULL) {\n        // this is the first node\n        temp-&gt;next = NULL;\n        temp-&gt;data = data;\n        head = temp;\n    } else {\n        // this is not the first node\n        while (ptr != NULL) {\n            if (ptr-&gt;next == NULL) {\n                temp-&gt;next = NULL;\n                temp-&gt;data = data;\n                ptr-&gt;next = temp;\n                break;\n            }\n            ptr = ptr-&gt;next;\n        }\n    }\n\n    return 0;\n}\n\n/*************************************************************/\n/*                                                           */\n/*  create_in_front - Function to add Node in Front          */\n/*                                                           */\n/*************************************************************/\nint create_in_front(int data)\n{\n    struct node *temp,*ptr = NULL;\n    ptr = head;\n\n    temp = (struct node *)malloc(sizeof(struct node));\n\n    if (ptr == NULL) {\n        // this is the first node\n        temp-&gt;next = NULL;\n        temp-&gt;data = data;\n        head = temp;\n    } else {\n        // this is not the first node\n        temp-&gt;next = ptr-&gt;next;\n        temp-&gt;data = data;\n        head = temp;\n    }\n    return 0;\n}\n\n/*************************************************************/\n/*                                                           */\n/*  create_in_between - Function to add Node in between nodes*/\n/*                                                           */\n/*************************************************************/\n\nint create_in_between(int data,int pos)\n{\n    struct node *temp, *ptr = NULL;\n    int i = 0;\n\n    ptr = head;\n\n    temp = (struct node *)malloc(sizeof(struct node));\n    temp-&gt;data = data;\n\n    for (i = 0; i &lt; pos; i++) {\n        if (i == pos-1) {\n            temp-&gt;next = ptr-&gt;next;\n            ptr-&gt;next = temp;\n        }\n        ptr = ptr-&gt;next;\n    }\n    return 0;\n}\n\n\n/*************************************************************/\n/*                                                           */\n/*  delete_in_between - Function to add Node in between nodes*/\n/*                                                           */\n/*************************************************************/\n\ndelete_in_between(int pos)\n{\n    struct node *ptr, *prev = NULL;\n    ptr = head;\n    int i = 0;\n\n    for (i = 0; i &lt; pos; i++) {\n        if (i == pos-1) {\n            prev = ptr-&gt;next;\n            free(ptr);\n            break;\n        }\n        prev = ptr;\n        ptr = ptr-&gt;next;\n    }\n    return 0;\n}\n\n/*************************************************************/\n/*                                                           */\n/*  reverse - Function to reverse link list                  */\n/*                                                           */\n/*************************************************************/\n\nint reverse()\n{\n    struct node *prev = NULL;\n    struct node *curr = head;\n    struct node *next = NULL;\n\n    curr = head;\n\n    while (curr != NULL) {\n        next = curr-&gt;next;\n        curr-&gt;next = prev;\n        prev = curr;\n        curr = next;\n    }\n    head = prev;\n\n    return 0;\n}\n\n/*************************************************************/\n/*                                                           */\n/*  display - Function to diplay link list                   */\n/*                                                           */\n/*************************************************************/\n// Function to display Link List\nint display()\n{\n    struct node *temp = head;\n\n    while (temp != NULL) {\n        printf(\"%d-&gt;\",temp-&gt;data);\n        temp = temp-&gt;next;\n    }\n    return 0;\n}\n\nint main()\n{\n    create(10);\n    create(20);\n    create(30);\n    create(40);\n    create(50);\n    create_in_front(34);\n    create_in_between(55,2);\n    //delete_in_between(4);\n    reverse();\n    display();\n    return 0;\n}\n</code></pre>\n\n<p>Let me know the logic behind this.</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1450249828, "post_id": 34305823, "comment_id": 56353427, "body": "What platform are you talking about here?  Modern operating systems would not allow this."}, {"owner": {"reputation": 9, "user_id": 5685287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e8c7a14834bd4176eecda1695662d8?s=128&d=identicon&r=PG&f=1", "display_name": "ABasu", "link": "https://stackoverflow.com/users/5685287/abasu"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450250152, "post_id": 34305823, "comment_id": 56353574, "body": "I was asking in general. No specific platform."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1450251181, "post_id": 34305823, "comment_id": 56354100, "body": "There is no general answer.   If a program is running on a host operating system that doesn&#39;t prevent this by design, it probably won&#39;t provide a way that allows you to prevent memory used by a program being trashed by another.    Most modern operating systems prevent this by design, so there is no further need to prevent it."}], "answers": [{"tags": [], "owner": {"reputation": 5438, "user_id": 1944335, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8675e8c601fc98c0ad3a8272b417d0de?s=128&d=identicon&r=PG&f=1", "display_name": "James Taylor", "link": "https://stackoverflow.com/users/1944335/james-taylor"}, "is_accepted": false, "score": 2, "last_activity_date": 1450254030, "creation_date": 1450254030, "answer_id": 34306995, "question_id": 34305823, "link": "https://stackoverflow.com/questions/34305823/how-to-prevent-a-process-from-using-memory-used-by-another-process/34306995#34306995", "title": "How to prevent a process from using memory used by another process?", "body": "<p>The operating system prevents a program from accessing memory in another program's stack by design. No program needs to worry about this.</p>\n\n<p>For illustrative purposes, I ran this scenario on a CentOS image:</p>\n\n<p>Program 1:</p>\n\n<pre><code>int main() {\n  char *p = \"Hello World\";\n}\n</code></pre>\n\n<p>Which, when run produces:</p>\n\n<pre><code>Dump of assembler code for function main:\n   0x00000000004004f0 &lt;+0&gt;:   push   %rbp\n   0x00000000004004f1 &lt;+1&gt;:   mov    %rsp,%rbp\n=&gt; 0x00000000004004f4 &lt;+4&gt;:   movq   $0x4005a0,-0x8(%rbp)\n   0x00000000004004fc &lt;+12&gt;:  mov    $0x0,%eax\n   0x0000000000400501 &lt;+17&gt;:  pop    %rbp\n   0x0000000000400502 &lt;+18&gt;:  retq   \nEnd of assembler dump.\n</code></pre>\n\n<p>We can see that the register <code>0x4005a0</code> holds <code>\"Hello World\"</code>:</p>\n\n<pre><code>(gdb) x /s 0x4005a0\n0x4005a0:   \"Hello World\"\n</code></pre>\n\n<p>Without killing the previous process, we can run another C program that accesses this register:</p>\n\n<pre><code>int main() {\n  char * hello_world = (char *) 0x4005a0;\n  printf(\"%s\", hello_world);\n}\n</code></pre>\n\n<p>Which, when run, produces:</p>\n\n<pre><code>L??L??D??A??H??H9?u?H?[]A\\A]A^A_?ff.?\n</code></pre>\n\n<p>And in a separate GDB session (separate from the two programs):</p>\n\n<pre><code>(gdb) x /s 0x4005a0\n0x4005a0:   &lt;Address 0x4005a0 out of bounds&gt;\n</code></pre>\n\n<p>So we can observe a few principles of modern memory architecture at work here. The OS is managing the memory of the program so that the scenario you described would not occur.</p>\n\n<p>In the second run of the program, it's actually able to print out some text (gibberish) because when a program is run, is actually allotted a virtual address space which, by definition, is the set of ranges of virtual addresses that an operating system makes available to a process. While these two programs use the same virtual address (<code>0x4005a0</code>), in the second instance it is just free memory.</p>\n\n<p>If a program were to step out of this boundary, the OS would send the classic <code>SIGSEGV</code> and terminate the program. A segmentation fault by definition is triggered by the OS about a memory access violation.</p>\n\n<p>So clearly from a programmatic standpoint, there is nothing that can be done nor needs to be done as this memory management is handled by the OS. Your program is safe in this regard, presuming it's running on a modern OS.</p>\n"}], "owner": {"reputation": 9, "user_id": 5685287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e8c7a14834bd4176eecda1695662d8?s=128&d=identicon&r=PG&f=1", "display_name": "ABasu", "link": "https://stackoverflow.com/users/5685287/abasu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450254030, "creation_date": 1450249484, "question_id": 34305823, "link": "https://stackoverflow.com/questions/34305823/how-to-prevent-a-process-from-using-memory-used-by-another-process", "title": "How to prevent a process from using memory used by another process?", "body": "<p>Suppose there are two processes: One is my own process and the other process generates random memory address and modifies the content in it (we don't have any control over it).</p>\n\n<p>The first process (my own process):</p>\n\n<pre><code>// Process 1\nint *ptr = (int*)malloc(sizeof(int)); // Suppose the address is 0x138145800\n*ptr = 45;\nprintf(\"%d\", *ptr);\nsleep();\nprintf(\"%d\", *ptr);\n</code></pre>\n\n<p>The second process (an external process that I have no control):</p>\n\n<pre><code>// Process 2\nint *ptr1;\nptr1 = (int*)0x138145800; // Random memory address is generated\n*ptr1 = 25;\nprintf(\"%d\", *ptr1);\n</code></pre>\n\n<p>When the first process is in sleep, the second process to which we don't have any control, modifies the value used by process 1.</p>\n\n<p>How to prevent the second process from doing so by changing only the first process?</p>\n\n<p>One possible way might be to use locks. However to use lock for every variable process 1 uses will be very inefficient. Is there any efficient way to solve the problem?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1450249242, "post_id": 34305717, "comment_id": 56353134, "body": "Why are you reading <code>num</code> from stdin rather than taking it as an argument?"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 1, "creation_date": 1450249513, "post_id": 34305717, "comment_id": 56353279, "body": "Someone please fix the indentation; every time I try someone else edits the question and I can&#39;t save mine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 5, "creation_date": 1450250382, "post_id": 34305717, "comment_id": 56353689, "body": "This question should probably go to <a href=\"http://codereview.stackexchange.com/\">codereview</a> instead."}], "answers": [{"tags": [], "owner": {"reputation": 7193, "user_id": 1856325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ZO1bm.png?s=128&g=1", "display_name": "FreeNickname", "link": "https://stackoverflow.com/users/1856325/freenickname"}, "is_accepted": false, "score": 1, "last_activity_date": 1450250793, "last_edit_date": 1450250793, "creation_date": 1450250159, "answer_id": 34306003, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306003#34306003", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>Something like this should do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int num;\n    printf(\"Enter loop repeat number(rows): \");\n    scanf(\"%d\",&amp;num);\n    printf(\"\\n\");\n\n    for (int row = 0; row &lt; num; ++row) {\n        int columnLimit = num - row;\n        for (int column = 1; column &lt;= columnLimit; ++column) {\n            printf(\"%d\", column);\n        }\n        for(int spacing = 0; spacing &lt; row; ++spacing) {\n            printf(\"__\");\n        }\n        for (int column = columnLimit; column &gt; 0; --column) {\n            printf(\"%d\", column);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/hgtRvP\" rel=\"nofollow\">IDE One</a></p>\n"}, {"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 4, "last_activity_date": 1450250632, "creation_date": 1450250632, "answer_id": 34306136, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306136#34306136", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>Rather than making multiple calls to printf, it seems cleaner to construct the string yourself:</p>\n\n<pre><code>#include&lt;stdio.h&gt;                                                        \n#include&lt;stdlib.h&gt;                                                       \n\nint                                                                      \nmain( int argc, char ** argv )                                           \n{                                                                        \n        unsigned num = argc &gt; 1 ? strtol( argv[1], NULL, 0 ) : 5;          \n        char digits[] = \"123456789_987654321\";                           \n        char *rhs = digits + sizeof digits - 1 - num;                    \n\n        if( num &gt; 9 ) {                                                  \n                fprintf( stderr, \"argument must be &lt; 10\" );              \n                exit( EXIT_FAILURE );                                    \n        }                                                                \n        digits[num] = '\\0';                                              \n        for( ; num &gt; 0; ) {                                              \n                printf( \"%s%s\\n\", digits, rhs );                         \n                digits[ sizeof digits - 1 - num ] = '_';                 \n                digits[ --num ] = '_';                                     \n        }                                                                \n        return 0;                                                        \n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450251904, "post_id": 34306231, "comment_id": 56354468, "body": "...or... you could use if-else instead, together with sensible variable names."}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450252311, "post_id": 34306231, "comment_id": 56354638, "body": "@Lundin var names edited"}], "tags": [], "owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "is_accepted": false, "score": 1, "last_activity_date": 1450253211, "last_edit_date": 1450253211, "creation_date": 1450251016, "answer_id": 34306231, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306231#34306231", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>Use ternary operator for simplification, this way you only need two lines \ninside of the inner loop code,</p>\n\n<pre><code>val = column &lt;= num ? column : limit - column + 1;\nprintf(\"%c\", val &gt; row ? '_' : val + 0x30);\n</code></pre>\n\n<p>Here it is:</p>\n\n<pre><code>int main(){\n    int num,column,row,limit,val;\n    printf(\"Enter loop repeat number(rows): \");\n    scanf(\"%d\",&amp;num);\n    printf(\"\\n\");\n    limit = num * 2;\n    for (row = num; row &gt; 0; --row){ //num times\n        for (column = 1; column &lt;= limit; ++column){\n            val = column &lt;= num ? column : limit - column + 1;\n            printf(\"%c\", val &gt; row ? '_' : val + 0x30);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Web91.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Web91.png\" alt=\"enter image description here\"></a></p>\n\n<p>The downside is you still have to call printf multiple times. But obviously the code is really compact!</p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450251346, "creation_date": 1450251346, "answer_id": 34306317, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306317#34306317", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>Assuming (but not checking!) that input does not exceed 9:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int num, r, c;\n    printf(\"Enter loop repeat number(rows): \");\n    scanf(\"%d\",&amp;num);\n    printf(\"\\n\");\n    for(r=num; r&gt;=1; row--)\n    {\n        for(c=1; c&lt;=num; c++)\n            putc(c&lt;=r ? ('0'+c) : '_');\n        for(c=num; c&gt;=1; c--)\n            putc(c&lt;=r ? ('0'+c) : '_');\n        putc(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1450252390, "post_id": 34306383, "comment_id": 56354681, "body": "@LPs Isn&#39;t the output supposed to be 5 lines only?"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1450254557, "post_id": 34306383, "comment_id": 56355854, "body": "Updated with an added recursive version! That should fit \u2708"}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 1, "last_activity_date": 1450254302, "last_edit_date": 1450254302, "creation_date": 1450251595, "answer_id": 34306383, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306383#34306383", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>A revisited one that asks the user for the max number... </p>\n\n<pre><code>int main()\n{\n    int num;\n    printf(\"Enter loop repeat number(rows, 9 max): \");\n    scanf(\"%d\",&amp;num);\n    if (num &gt; 9) num = 9;\n\n    int i,j;\n    for (i=num ; i&gt;0 ; i--) {\n       for(j=1 ; j&lt;=num ; j++) {\n          printf(\"%c\", j&gt;i ? '_':0x30+j);\n       }\n       for(j=num ; j&gt;=1 ; j--) {\n          printf(\"%c\", j&gt;i ? '_':0x30+j);\n       }\n       printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><code>0x30</code> is the ascii code for <code>0</code>, adding <code>j</code> gives <code>1</code> to <code>num</code>.</p>\n\n<hr>\n\n<p><strong>edit</strong> a <em>recursive</em> bonus ...</p>\n\n<pre><code>int num; // global to avoid putting it in the recursive function\n\nvoid recursive(int i, int j) {\n    printf(\"%c\", i&gt;j ? '_':0x30+i);\n    if (i&lt;num) recursive(i+1, j);\n    printf(\"%c\", i&gt;j ? '_':0x30+i);\n    if(i==1) {\n        printf(\"\\n\");\n        if (--j &gt; 0) recursive(1, j);\n    }\n}\n</code></pre>\n\n<p>To be called as <code>recursive(1, num);</code></p>\n\n<pre><code>int main(int argc, char **argv)\n{\n   printf(\"Enter loop repeat number(rows, 9 max): \");\n   scanf(\"%d\",&amp;num);\n   if (num &gt; 9) num = 9;\n\n   recursive(1, num);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1450252433, "last_edit_date": 1450252433, "creation_date": 1450251985, "answer_id": 34306485, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306485#34306485", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>This works until 9 rows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int num, cols;\n    int i, j;\n    printf(\"Enter loop repeat number(rows): \");\n    scanf(\"%d\",&amp;num);\n    printf(\"\\n\");\n\n    if (num&lt;10)\n    {\n        cols=num*2;\n\n        char **matrix = malloc(num*sizeof(char *));\n\n        for(i=0; i&lt;num; i++)\n        {\n            matrix[i] = malloc(cols*sizeof(char *));\n\n            memset(matrix[i], '_', cols);\n\n            for (j=0; j&lt;num; j++)\n            {\n                if (j&lt;(num-i))\n                {\n                    matrix[i][j] = (j+1)+0x30;\n                    matrix[i][cols-j-1] = matrix[i][j];\n                }\n            }\n        }\n\n        for (i=0; i&lt;num; i++)\n        {\n            for (j=0; j&lt;cols; j++)\n                printf(\"%c\", matrix[i][j]);\n\n            printf(\"\\n\");\n\n            free(matrix[i]);\n        }\n\n        free(matrix);\n    }\n    else\n    {\n        printf(\"Max allowed rows = 9\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/lnGtFp\" rel=\"nofollow\">IDE One</a></p>\n"}, {"tags": [], "owner": {"reputation": 5776, "user_id": 1242380, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/koff4.jpg?s=128&g=1", "display_name": "Neil Townsend", "link": "https://stackoverflow.com/users/1242380/neil-townsend"}, "is_accepted": false, "score": 0, "last_activity_date": 1450252301, "last_edit_date": 1450252301, "creation_date": 1450251995, "answer_id": 34306487, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306487#34306487", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>The question seems to assume that it won't go above an input of 9, so I'll assume the same ...</p>\n\n<pre><code>int num=5; // Set as required\n\nint  max=9;\nchar leftNums[10] = \"123456789\";\nchar rightNums[10] = \"987654321\";\nchar pyramid[17] = \"________________\";\n\nint rightStart = max - num;\nfor (int row=0; row&lt;num; row++) {\n    int colLimit = num - row;\n    printf(\"%*.*s\", colLimit, colLimit, leftNums);\n    printf(\"%*.*s\", 2*row, 2*row, pyramid);\n    printf(\"%*.*s\\n\", colLimit, colLimit, &amp;rightNums[rightStart+row]);\n    // Or, if you prefer for the last line:\n    // printf(\"%*.*s\\n\", colLimit, colLimit, rightNums+rightStart+row);\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>You can obviously easily play around with letters, numbers and so on in this approach.</li>\n<li>If you want to go above 9, you'll probably want to use letters rather than numbers ...</li>\n</ul>\n\n<p><a href=\"http://ideone.com/3MZucy\" rel=\"nofollow\">IDEone.com</a></p>\n"}, {"tags": [], "owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "is_accepted": false, "score": 1, "last_activity_date": 1450252055, "creation_date": 1450252055, "answer_id": 34306505, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34306505#34306505", "title": "C program for below pyramid If possible JAVA code also", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int num,c,sp;\n    printf(\"\\n\");\n    for(num =5; num&gt;=1; num--)\n    {\n        for(c=1; c&lt;=5; c++)\n        {\n            if(c&gt;num)\n            {\n                printf(\"_\");\n            }\n            else\n            {\n                printf(\"%d\",c);\n            }\n        }\n        for(c=5; c&gt;=1; c--)\n        {\n            if(c&gt;num)\n            {\n                printf(\"_\");\n            }\n            else\n            {\n                printf(\"%d\",c);\n            } \n        }    \n\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 1, "last_activity_date": 1450254529, "creation_date": 1450254529, "answer_id": 34307121, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also/34307121#34307121", "title": "C program for below pyramid If possible JAVA code also", "body": "<p>Your lines are symmetrical. You can use a recursive function where you print before and after recursing to achieve this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid line(int i, int n, int m)\n{\n    if (i &lt; n) {\n        putchar(i &gt; m ? '_' : '0' + (i + 1) % 10);\n        line(i + 1, n, m);\n        putchar(i &gt; m ? '_' : '0' + (i + 1) % 10);\n    }\n}\n\nint main(int argc, char **argv)\n{\n    int i, n = 0;\n\n    if (argc &gt; 1) n = atoi(argv[1]);\n    if (n &lt;= 0) n = 5;\n\n    i = n;\n    while (i--) {\n        line(0, n, i);\n        putchar('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The lines themselves are controlled with a regular loop. The newline <code>'\\n'</code> can't be part of the recursive function, because it doesn't fit the symmetric pattern; it has to be printed explicitly. This version takes the size of the pyramid from the command line with a default of 5.</p>\n"}], "owner": {"reputation": 81, "user_id": 5685263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bbde591ede483a1b7b93c637c4e4b262?s=128&d=identicon&r=PG&f=1", "display_name": "kumar", "link": "https://stackoverflow.com/users/5685263/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "closed_date": 1450258955, "accepted_answer_id": 34307121, "answer_count": 9, "score": 1, "last_activity_date": 1450429815, "creation_date": 1450249077, "last_edit_date": 1450429815, "question_id": 34305717, "link": "https://stackoverflow.com/questions/34305717/c-program-for-below-pyramid-if-possible-java-code-also", "closed_reason": "Not suitable for this site", "title": "C program for below pyramid If possible JAVA code also", "body": "<p><strong>Desired Output</strong></p>\n\n<pre><code>    1234554321\n    1234__4321\n    123____321\n    12______21\n    1________1\n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int num,c,sp,r=1;\n    printf(\"Enter loop repeat number(rows): \");\n    scanf(\"%d\",&amp;num);\n    printf(\"\\n\");\n    for(; num&gt;=1; num--,r++)\n    {\n        for(c=1; c&lt;=num; c++)\n            printf(\"%d\",c);\n        for(sp=r; sp&gt;1; sp--)\n            printf(\"_\");\n        for(sp=r; sp&gt;1; sp--)\n            printf(\"_\");\n        for(c=num; c&gt;=1; c--)\n            printf(\"%d\",c);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>I am looking for other alternative codes which are less complex. Any help would be appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1450248842, "post_id": 34305598, "comment_id": 56352964, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us, including structure definitions and how you call the function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1450248978, "post_id": 34305598, "comment_id": 56353023, "body": "Also, you should learn how to use a debugger, then you can step through the code line by line to see what&#39;s actually happening."}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "edited": false, "score": 1, "creation_date": 1450249392, "post_id": 34305598, "comment_id": 56353214, "body": "The code looks fine except for that the strings are not 0 terminated. Is that by design?"}, {"owner": {"reputation": 31, "user_id": 5365531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6e8ba0878fdf48b7c6091f602fd97a86?s=128&d=identicon&r=PG&f=1", "display_name": "zhauck", "link": "https://stackoverflow.com/users/5365531/zhauck"}, "edited": false, "score": 0, "creation_date": 1450249623, "post_id": 34305598, "comment_id": 56353333, "body": "I forgot to consider that, I&#39;ll give it a test."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1450261127, "post_id": 34305598, "comment_id": 56360128, "body": "Debugger..........DCV"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450288532, "post_id": 34305598, "comment_id": 56379369, "body": "Some memory is being malloc&#39;d but never an indication returned to the caller.  Nor is that malloc&#39;d memory being passed to free().   So this code has a memory leak."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5365531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6e8ba0878fdf48b7c6091f602fd97a86?s=128&d=identicon&r=PG&f=1", "display_name": "zhauck", "link": "https://stackoverflow.com/users/5365531/zhauck"}, "edited": false, "score": 0, "creation_date": 1450250031, "post_id": 34305875, "comment_id": 56353527, "body": "When it intentionally inserts at the beginning, it works fine. However, when it tries to insert at the end, it inserts backwards at the beginning"}, {"owner": {"reputation": 31, "user_id": 5365531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6e8ba0878fdf48b7c6091f602fd97a86?s=128&d=identicon&r=PG&f=1", "display_name": "zhauck", "link": "https://stackoverflow.com/users/5365531/zhauck"}, "edited": false, "score": 0, "creation_date": 1450250491, "post_id": 34305875, "comment_id": 56353747, "body": "It&#39;s the position where the char array is inserted, so index = 0 is the beginning and str-&gt;bytes.usage is the end, and anything else is in the middle."}], "tags": [], "owner": {"reputation": 91, "user_id": 2193256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09387486a59567e424221fdb9af12a77?s=128&d=identicon&r=PG", "display_name": "seamaner", "link": "https://stackoverflow.com/users/2193256/seamaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1450252143, "last_edit_date": 1450252143, "creation_date": 1450249679, "answer_id": 34305875, "question_id": 34305598, "link": "https://stackoverflow.com/questions/34305598/c-string-insertion-issues/34305875#34305875", "title": "C String Insertion Issues", "body": "<p>When index is 0, it is not in reverse order?</p>\n\n<pre><code>if (index == 0){  //inserts at beginning of array\n\n            for (int k = 0; k &lt; len; k++){\n                temp[k] = buf[k];\n</code></pre>\n\n<p>changed to</p>\n\n<pre><code>if (index == 0){  //inserts at beginning of array\n\n     for (int k = 0; k &lt; len; k++){\n            temp[k] = buf[len - k - 1];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1450261423, "last_edit_date": 1450261423, "creation_date": 1450261031, "answer_id": 34309283, "question_id": 34305598, "link": "https://stackoverflow.com/questions/34305598/c-string-insertion-issues/34309283#34309283", "title": "C String Insertion Issues", "body": "<pre><code>// as i understand it:\n// str-&gt;bytes.data = allocated memory\n// str-&gt;bytes.dim  = size of the allocated memory\n// str-&gt;bytes.usage= size of the used memory\n//\n\n#define BLOCK_SIZE  32\n\nbool string_insert(string_t * const str, size_t index, \n        const char *  buf, size_t len)\n{\n    int max_size;\n    int i;\n    char *start;\n    char *end;\n    char *tmp=str-&gt;bytes.data;\n\n    max_size=str-&gt;bytes.usage+len;\n\n\n    if(max_size&gt;=str-&gt;bytes.dim){\n        // realloc by BLOCK_SIZE steps\n        max_size=((max_size/BLOCK_SIZE)+1)*BLOCK_SIZE;\n        tmp=realloc(tmp,max_size); \n        if(!tmp) return 0; //false\n\n        //update fields with new values\n        str-&gt;bytes.data=tmp;\n        str-&gt;bytes.dim=max_size;\n    }\n\n\n    start=tmp+index;\n    end=tmp+(str-&gt;bytes.usage);\n\n    //shift content after the insertion point\n    while(end&gt;start){\n        end--;\n        *(end+len)=*end;\n    }\n\n    // no comments\n    strncpy (start,buf,len);\n\n    str-&gt;bytes.usage+=len;\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1450291015, "last_edit_date": 1450291015, "creation_date": 1450290395, "answer_id": 34319450, "question_id": 34305598, "link": "https://stackoverflow.com/questions/34305598/c-string-insertion-issues/34319450#34319450", "title": "C String Insertion Issues", "body": "<p>Rather than the posted convolutions, you could try something similar to this</p>\n\n<p>Assuming:</p>\n\n<ol>\n<li>Not normal C strings</li>\n<li>the string_t instances do not contain enough unused memory to\nhold both the strings</li>\n<li>string 2 is to be inserted at the offset into string 1</li>\n<li><p>the string_t is defined as:</p>\n\n<p>typedef struct\n{\n    char * pStr;\n    int    strLen;\n} string_t;</p></li>\n</ol>\n\n<p>caveat: not compiled, nor tested</p>\n\n<pre><code>string_t *string_insert( \n    const string_t * originalStr, \n    const string_t * strToInsert, \n    size_t index )\n{\n\n    string_t  *newString = NULL;\n\n    if( NULL != (newString =  malloc( sizeof( string_t )) ) )\n    { // then malloc successful\n        newString-&gt;pStr = NULL;\n        newString-&gt;strLen = 0;\n\n        // allocate enough room.\n        if(NULL != (newString-&gt;pStr = \n                    malloc( originalStr-&gt;strlen + strToInsert-&gt;strlen )\n        {// then mallooc successful\n            newString-&gt;strLen = \n                origianlStr-&gt;strlen + strToInsert-&gt;strLen;\n\n            //copy first part of originalStr to newString\n            for( int i = 0; i &lt; index; i++ )\n            {\n                newString-&gt;pStr[i] = originalStr-&gt;pStr[i];\n            }\n\n            // copy string to insert\n            for( int j=0; j&lt;strToInsert-&gt;strlen; j++ )\n            {\n                newStr-&gt;pStr[i+j] = strToInsert-pStr[j];\n            }\n\n            // copy last part of originalStr to newStr\n            for ( int k = 0; k&lt;newString-&gt;strLen; k++ )\n            {\n                newStr-&gt;pStr[i+j+k] = origianalStr-&gt;pStr[index+k];\n            }\n        }\n        else\n        {\n            free( newString );\n            newString = NULL;\n        }\n    }\n\n    return newString\n} // end function: string_insert\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1509711678, "creation_date": 1509711678, "answer_id": 47095690, "question_id": 34305598, "link": "https://stackoverflow.com/questions/34305598/c-string-insertion-issues/47095690#47095690", "title": "C String Insertion Issues", "body": "<p>You have</p>\n\n<pre><code>    if (str-&gt;len &lt; index){\n</code></pre>\n\n<p>, but you fail to assign anything to <code>str-&gt;len</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 5365531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6e8ba0878fdf48b7c6091f602fd97a86?s=128&d=identicon&r=PG&f=1", "display_name": "zhauck", "link": "https://stackoverflow.com/users/5365531/zhauck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1509711678, "creation_date": 1450248635, "last_edit_date": 1450250765, "question_id": 34305598, "link": "https://stackoverflow.com/questions/34305598/c-string-insertion-issues", "title": "C String Insertion Issues", "body": "<p>I'm trying to create a function that can insert a char array of length len into a given index in a string type. However, it acts ways that it shouldn't. </p>\n\n<p>When trying to insert at the end of the initial array, the contents of <code>buf</code> are inserted at the beginning of the string, in reverse order.</p>\n\n<p>i.e. inserting <code>world</code> into <code>Hello</code> becomes <code>dlrowHello</code></p>\n\n<p>When trying to insert in the middle of the initial case, the output is <code>worldHello</code></p>\n\n<p><code>str-&gt;bytes.data</code> is the array being modified.</p>\n\n<p><code>str-&gt;bytes.usage</code> is the length of that array.</p>\n\n<pre><code>bool string_insert(string_t * const str, size_t index, \n        const char * const buf, size_t len)\n{\n    bool success = false;\n    uint8_t orig_size = str-&gt;bytes.usage;\n    uint8_t * temp;\n\n    if (str-&gt;len &lt; index){\n        return false;\n    }\n    if(str-&gt;bytes.usage+len&gt;=str-&gt;bytes.usage){\n        temp = malloc(sizeof(char) * (str-&gt;bytes.usage + len));\n    }   \n    else {\n        temp = malloc(sizeof(char) * (str-&gt;bytes.usage));\n    }\n    if (temp == NULL){\n        success = false;    \n    }\n    else{\n        if (index == 0){  //inserts at beginning\n\n            for (int k = 0; k &lt; len; k++){\n                temp[k] = buf[k];\n\n            }   \n            for (int j = len; j &lt; str-&gt;bytes.usage+len; j++){\n                temp[j] = str-&gt;bytes.data[j - len];\n            }\n        }\n        else if (index == str-&gt;bytes.usage){    //inserts at end\n            for (int h = 0; h &lt; str-&gt;bytes.usage; h++){\n                temp[h] = str-&gt;bytes.data[h];\n            }\n            for (int g = 0; g &lt; len; g++){\n                temp[g+str-&gt;bytes.usage] = buf[g];  \n            }\n\n        }\n        else{    //inserts in the middle\n            for (int i = 0; i &lt; index; i++){\n                temp[i] = str-&gt;bytes.data[i];\n            }\n            for(int i = index; i &lt; index + len; i++){\n                temp[i] = buf[i-index];\n            }\n            for(int i = index + len; i &lt; str-&gt;bytes.usage+len; i++){\n                temp[i] = str-&gt;bytes.data[i-len];\n            }\n        }\n        string_free(str);\n        str-&gt;bytes.data = temp;\n        str-&gt;bytes.dim = 2*str-&gt;bytes.usage;\n        str-&gt;bytes.usage = orig_size+len;\n        success = true;\n    }\n        return success;\n}\n</code></pre>\n\n<p>Basically, I just need to know if I'm blind and missing something obvious.</p>\n"}, {"tags": ["c", "systems-programming"], "comments": [{"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 1, "creation_date": 1450248239, "post_id": 34305369, "comment_id": 56352709, "body": "Segmentation faults are caused by bad memory accesses, and since the only memory accesses on that line are <code>recs-&gt;...</code>, you can assume recs is not being properly initialized. Check if it&#39;s <code>NULL</code> right before, and if not, keep digging."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450281017, "post_id": 34305369, "comment_id": 56374443, "body": "Post definition of <code>bin_record</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450281792, "post_id": 34305369, "comment_id": 56375064, "body": "<code>strncpy(buffer,&quot;\\0&quot;, 100); &#47;* fill buffer with NULL *&#47;</code>  That will not fill the buffer with <b>NUL</b> characters as <code>strncpy()</code> copies a <i>maximum</i> number of bytes, but still stops copying when the first NUL character is encountered in the source."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450294860, "post_id": 34305369, "comment_id": 56383070, "body": "this line: <code>int bin2csv(fd1, fd2){</code> will not compile.  Perhaps you meant: (if using <code>open()</code>) <code>int bin2csv( int fd1, int fd2 )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450295084, "post_id": 34305369, "comment_id": 56383199, "body": "regarding this line: <code>strncpy(buffer,&quot;\\0&quot;, 100); </code>  this will copy up to 0 bytes, then append a &#39;\\0&#39;   probably not what you want.  Suggest: <code>memset( buffer, &#39;\\0&#39;, sizeof(buffer) );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450295218, "post_id": 34305369, "comment_id": 56383281, "body": "regarding this line: <code>recs = &amp;rec;</code>,  rec is defined as a struct , not as a pointer, and this line would ask it to point to itself, probably not what you want,  suggest removing this line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450295420, "post_id": 34305369, "comment_id": 56383386, "body": "after this line: <code>if((buflen = read(fd1, &amp;recs, sizeof(recs))) &lt; 0){</code> and before using the contents of the <code>recs</code> to fill the buffer[] array,  need to check for <code>buflen==0</code> (I.E. EOF) and for <code>buflen &lt; sizeof(recs)</code> (not enough characters in the file to read a complete <code>recs</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450295788, "post_id": 34305369, "comment_id": 56383573, "body": "unless the fields: <code>recs-&gt;lname, recs-&gt;fname</code> are a fixed size, cannot be sure that whole record is read (and not part of the next record)   If not a fixed length for those two fields, strongly suggest reading a single character at a time and parsing the input (or use <code>fscanf()</code>, but that will have its&#39; own problems)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450296070, "post_id": 34305369, "comment_id": 56383728, "body": "regarding this line: <code>write(fd2, buffer, sizeof(buffer));</code>  there is no guarantee that the buffer[] array is exactly full (it could be less than full or even overfilled (resulting in undefined behaviour).   What is really needed is the returned value from <code>sprintf()</code>, which the code fails to save, as the length (3rd) parameter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450296423, "post_id": 34305369, "comment_id": 56383908, "body": "regarding these two fields: <code>recs-&gt;lname, recs-&gt;fname</code> if those fields are not NUL terminated (and padded for short names) in the source file the sprintf() will crash."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1450300049, "post_id": 34305369, "comment_id": 56385981, "body": "@AndrewHenle That was my gut reaction too, because this is a non-standard way to zero a buffer, but <code>strncpy</code> will zero-pad the remainder of the buffer until <code>n</code> bytes have been written."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450300263, "post_id": 34305369, "comment_id": 56386091, "body": "@user3629249 You have flooded the comments with points that are better suited to an answer.  In addition, only a couple of the points you made are actually valid."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1450300811, "post_id": 34305369, "comment_id": 56386341, "body": "@paddy  Yes indeed.  <code>strncpy()</code> NUL pads the target string.  Learn something new every day... :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450306625, "post_id": 34305369, "comment_id": 56389243, "body": "@paddy,   The question does not contain enough detail to assure that any of my comments is the source of the OPs problem.  (like some example input records, the format of the <code>recs</code> structure, etc)  So it is possible that NONE of my comments are the answer.  Under such cases, I&#39;m very hesitant to post such comments as an answer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450306903, "post_id": 34305369, "comment_id": 56389363, "body": "when posting a question about a run time problem, post code that cleanly compiles, a sample of the input, the desired output, etc."}, {"owner": {"reputation": 13, "user_id": 5685152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153617129570804/picture?type=large", "display_name": "Jake Parham", "link": "https://stackoverflow.com/users/5685152/jake-parham"}, "edited": false, "score": 0, "creation_date": 1450327807, "post_id": 34305369, "comment_id": 56395476, "body": "This was my first post so it&#39;s my bad if things were not explained very well.  I know it&#39;s hard to diagnose problems while reading other peoples code, especially just a small portion of it.  Thanks for all the feedback though!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5685152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153617129570804/picture?type=large", "display_name": "Jake Parham", "link": "https://stackoverflow.com/users/5685152/jake-parham"}, "edited": false, "score": 0, "creation_date": 1450298103, "post_id": 34305544, "comment_id": 56384839, "body": "This fixed the segmentation fault!  Thanks for that information."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450306782, "post_id": 34305544, "comment_id": 56389305, "body": "if <code>recs</code> is a pointer, then this line: <code>if((buflen = read(fd1, &amp;recs, sizeof(recs))) &lt; 0){</code> will fail because the second parameter of <code>read()</code> has to be a pointer to the input buffer, not a pointer to a pointer to the input buffer.  in the OPs posted code, the variable <code>recs</code> is undefined"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450311636, "post_id": 34305544, "comment_id": 56390941, "body": "Thanks for paraphrasing my answer."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 3, "last_activity_date": 1450248452, "creation_date": 1450248452, "answer_id": 34305544, "question_id": 34305369, "link": "https://stackoverflow.com/questions/34305369/segfault-during-a-sprintf/34305544#34305544", "title": "Segfault during a sprintf()", "body": "<p>It looks like <code>recs</code> is a pointer.  You are reading bytes directly into that pointer, like reading a raw memory address from file:</p>\n\n<pre><code>read(fd1, &amp;recs, sizeof(recs))\n</code></pre>\n\n<p>And then you start using it in the call to <code>sprintf</code>...  BOOM!</p>\n\n<p>There is actually no reason to use it at all (is it a global?)...  Even though you initialised it by <code>recs = &amp;rec</code>, and assuming you don't trash it, it still will not contain valid address outside of that function.  That's because <code>rec</code> is a local variable.</p>\n\n<p>So, just read directly into <code>rec</code> like this:</p>\n\n<pre><code>read(fd1, &amp;rec, sizeof(rec))\n</code></pre>\n\n<p>And then on the <code>sprintf</code> line, you use <code>rec.id</code> instead of <code>recs-&gt;id</code> (<em>etc</em>).</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5685152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153617129570804/picture?type=large", "display_name": "Jake Parham", "link": "https://stackoverflow.com/users/5685152/jake-parham"}, "edited": false, "score": 0, "creation_date": 1450297081, "post_id": 34305705, "comment_id": 56384246, "body": "Part of the description of this particular homework was that we were not able to use FILE * or any f*() functions.  Otherwise, I would have used those."}, {"owner": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "reply_to_user": {"reputation": 13, "user_id": 5685152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153617129570804/picture?type=large", "display_name": "Jake Parham", "link": "https://stackoverflow.com/users/5685152/jake-parham"}, "edited": false, "score": 0, "creation_date": 1450300033, "post_id": 34305705, "comment_id": 56385970, "body": "@Jake Parham, fair enough.  I endorse Rahim&#39;s suggestion below about using <code>snprintf</code> then to protect against buffer overruns.  If you do not have to produce re-entrant code in this assignment (likely), I also suggest taking the buffer out of the stack by marking it static.  The identifier will still be local to the function.  Good luck on your assignment."}], "tags": [], "owner": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "is_accepted": false, "score": 2, "last_activity_date": 1450249057, "last_edit_date": 1495535239, "creation_date": 1450249057, "answer_id": 34305705, "question_id": 34305369, "link": "https://stackoverflow.com/questions/34305369/segfault-during-a-sprintf/34305705#34305705", "title": "Segfault during a sprintf()", "body": "<p>I see a few issues here:</p>\n\n<ol>\n<li><p><code>sprintf</code> does nothing to prevent writing past the end of the string buffer.  In fact it has no knowledge of the length of that buffer (100 bytes in your case).  Since you have setup the buffer in the stack, if <code>sprintf</code> over-runs your buffer (which it could do with long first or last names or garbage strings as input) your stack will be corrupted and a seg fault is likely.  You may want to consider including logic to ensure that sprintf will not exceed the amount of buffer space you have.  Or better yet avoid <code>sprintf</code> altogether (more on that below)</p></li>\n<li><p>You are not handling end-of-file in the code provided.  For end of file, read returns 0.  If you pass bad pointers to <code>sprintf</code>, it will fail.</p></li>\n<li><p>The functions that you are using are the UNIX derived ones (part of POSIX but decidedly low level) that use small integers as file descriptors.  I would recommend using the <code>FILE *</code> based ones instead.  The I/O functions of interest would be <code>fopen</code>, <code>fclose</code>, <code>fprintf</code>, <code>fwrite</code>, etc.  This would eliminate the need to use <code>sprintf</code>.</p></li>\n</ol>\n\n<p>See <a href=\"https://stackoverflow.com/questions/11414191/what-are-the-main-differences-between-fwrite-and-write\">this previous question</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1450280819, "creation_date": 1450280819, "answer_id": 34316295, "question_id": 34305369, "link": "https://stackoverflow.com/questions/34305369/segfault-during-a-sprintf/34316295#34316295", "title": "Segfault during a sprintf()", "body": "<pre><code>if((buflen = read(fd1, &amp;recs, sizeof(recs))) &lt; 0){\n</code></pre>\n\n<p>Use <code>&lt;= 0</code> rather than <code>&lt; 0</code>, else when the return value is 0, <code>sprintf(buffer ...</code> may seg fault as it tries to de-reference <code>recs-&gt;id</code> which has an uninitialized value.</p>\n"}, {"tags": [], "owner": {"reputation": 1199, "user_id": 2139631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6004f0c044a20f1c4e8343de5462183?s=128&d=identicon&r=PG", "display_name": "Rahim Dastar", "link": "https://stackoverflow.com/users/2139631/rahim-dastar"}, "is_accepted": false, "score": 0, "last_activity_date": 1450281603, "creation_date": 1450281603, "answer_id": 34316581, "question_id": 34305369, "link": "https://stackoverflow.com/questions/34305369/segfault-during-a-sprintf/34316581#34316581", "title": "Segfault during a sprintf()", "body": "<p>You have some problems:\n1) structure of bin_record. It has char[] and it is possible to overflow.\n2) in sprintf you cannot set buffer max size. it is better to use snprintf like this:</p>\n\n<pre><code> sprintf(buffer, 100, \"%d, %s, %s, %f, %d\\n\", recs-&gt;id, recs-&gt;lname, recs-&gt;fname, recs-&gt;gpa, recs-&gt;iq);\n</code></pre>\n\n<p>3) to fill buffer with null us this:</p>\n\n<pre><code>memset (buffer,'\\0',100);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5685152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153617129570804/picture?type=large", "display_name": "Jake Parham", "link": "https://stackoverflow.com/users/5685152/jake-parham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 34305544, "answer_count": 4, "score": 1, "last_activity_date": 1450331584, "creation_date": 1450247674, "last_edit_date": 1450331584, "question_id": 34305369, "link": "https://stackoverflow.com/questions/34305369/segfault-during-a-sprintf", "title": "Segfault during a sprintf()", "body": "<p>So, I am currently working on System programming for my Unix OS class.  All that this program should do is read a binary file and output the lines to a CSV file.  I feel like i'm almost done but for some reason I keep getting a segfault.</p>\n\n<p>To clarify:\n     fd1 = input file,\n     fd2 = output file, \n     numrecs = number of records from input file.\n     Somewhere in main(): </p>\n\n<pre><code>for(i=0;i&lt;numrecs;i++){\n    if((bin2csv(fd1, fd2)) == -1){\n        printf(\"Error converting data.\\n\");\n    }\n}\n\nint bin2csv(fd1, fd2){\n    bin_record rec;\n    char buffer[100];\n    int buflen;\n    strncpy(buffer,\"\\0\", 100); /* fill buffer with NULL */\n    recs = &amp;rec;\n\n    /* read in a record */\n    if((buflen = read(fd1, &amp;recs, sizeof(recs))) &lt; 0){\n        printf(\"Fatal Error: Data could not be read.\\n\");        \n        return -1;\n    }\n\n   sprintf(buffer, \"%d, %s, %s, %f, %d\\n\", recs-&gt;id, recs-&gt;lname, recs-&gt;fname, recs-&gt;gpa, recs-&gt;iq);\n   printf(\"%s\\n\", buffer);\n   write(fd2, buffer, sizeof(buffer));\n   return 0;\n}\n</code></pre>\n\n<p>The segfault is occurring on the line \"sprintf(buffer, etc..);\" however, I cannot figure out why that is happening.  </p>\n\n<p>This is the error gdb spits out:  </p>\n\n<blockquote>\n  <p>Program received signal SIGSEGV, Segmentation fault.<br>\n  0x0000000100000c87 in bin2csv (fd1=3, fd2=4) at bin2csv.c:25<br>\n  25      sprintf(buffer, \"%d, %s, %s, %f, %d\\n\", recs->id, recs->lname,<br>\n  recs->fname, recs->gpa, recs->iq);</p>\n</blockquote>\n\n<p>Hopefully this is enough info.  Thanks! </p>\n"}, {"tags": ["c", "pointers", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 0, "last_activity_date": 1450248096, "last_edit_date": 1450248096, "creation_date": 1450247790, "answer_id": 34305395, "question_id": 34305337, "link": "https://stackoverflow.com/questions/34305337/how-do-i-get-the-character-pointers-out-of-the-argument-array-passed-to-my-threa/34305395#34305395", "title": "How do I get the character pointers out of the argument array passed to my thread function?", "body": "<p>Perhaps you want:</p>\n\n<pre><code>int loop(void* args){\n  char** arr = args;\n  char* fn = arr[0];\n  char* sd = arr[1];\n  char* path = arr[2];\n</code></pre>\n\n<p><sup>(indeed, for readability reasons, it would have been better to declare some <code>struct</code> outside of your thread function and use an address to it, since your different elements have different roles)</sup></p>\n\n<p>You should take days to read a good C programming book before trying to code multi-threaded programs (e.g. using <a href=\"https://computing.llnl.gov/tutorials/pthreads/\" rel=\"nofollow\">POSIX threads</a>).</p>\n\n<p>BTW, the function passed to <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow\">pthread_create(3)</a> should return a generic pointer (i.e. some <code>void*</code>), not an <code>int</code>; so your <code>loop</code> has the wrong signature to be passed to <code>pthread_create</code>. Read also about <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow\">intptr_t</a></p>\n"}], "owner": {"reputation": 59, "user_id": 4598192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d429558a5d9f0f318e3f3d9d74dda1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/4598192/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 34305395, "answer_count": 1, "score": 0, "last_activity_date": 1450248096, "creation_date": 1450247519, "question_id": 34305337, "link": "https://stackoverflow.com/questions/34305337/how-do-i-get-the-character-pointers-out-of-the-argument-array-passed-to-my-threa", "title": "How do I get the character pointers out of the argument array passed to my thread function?", "body": "<p>I can't figure out how to access the character pointers contained in args.  args is an array of character points that was passed into pthread_create.  Should I store the arguments in a struct instead of an array?</p>\n\n<pre><code>int loop(void* args){\n  struct dirent *direntp; DIR *start_dir;struct stat statbuf;char *dirs[MAX_SIZE_DIRS];int error; const char* sd;\n  int size = 0;\n  char* fn = (char *)(args); sd = (char *)(args + 1); char* path = (char *)(args+2);\n  printf(\"%s\\n\", (char *)args);\n</code></pre>\n"}, {"tags": ["java", "c", "loops", "conditional"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1450247192, "post_id": 34305258, "comment_id": 56352253, "body": "Yes. The second one does one more iteration."}, {"owner": {"reputation": 19590, "user_id": 5050667, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3WJfP.jpg?s=128&g=1", "display_name": "Yassin Hajaj", "link": "https://stackoverflow.com/users/5050667/yassin-hajaj"}, "edited": false, "score": 6, "creation_date": 1450247208, "post_id": 34305258, "comment_id": 56352257, "body": "It has nothing to do with performance but with logic."}, {"owner": {"reputation": 19590, "user_id": 5050667, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3WJfP.jpg?s=128&g=1", "display_name": "Yassin Hajaj", "link": "https://stackoverflow.com/users/5050667/yassin-hajaj"}, "reply_to_user": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 3, "creation_date": 1450247232, "post_id": 34305258, "comment_id": 56352265, "body": "@MarounMaroun Depending on where you start.."}, {"owner": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1450247239, "post_id": 34305258, "comment_id": 56352268, "body": "I had heard in college that comparing with zero is more performant. So <code>i&gt;=0</code> should be performant than <code>i&gt;-1</code> I don&#39;t have any explanation for it though"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 0, "creation_date": 1450247317, "post_id": 34305258, "comment_id": 56352297, "body": "@sidgate we generally leave it up to the compiler to determine which is best to use for the target architecture, and in the code we try to use the best logic to express the problem being solved."}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "reply_to_user": {"reputation": 19590, "user_id": 5050667, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3WJfP.jpg?s=128&g=1", "display_name": "Yassin Hajaj", "link": "https://stackoverflow.com/users/5050667/yassin-hajaj"}, "edited": false, "score": 2, "creation_date": 1450247362, "post_id": 34305258, "comment_id": 56352314, "body": "@YassinHajaj that&#39;s true. Since OP is comparing them I assumed they&#39;re the same."}, {"owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "reply_to_user": {"reputation": 11235, "user_id": 977919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1", "display_name": "sidgate", "link": "https://stackoverflow.com/users/977919/sidgate"}, "edited": false, "score": 1, "creation_date": 1450247425, "post_id": 34305258, "comment_id": 56352344, "body": "@sidgate In C, the generated assembly code for comparing to zero is a simple sign-check instruction (on x86 processors anyway), where comparing to other value has to actually compare. In Java, JIT may do the same, but it&#39;s unlikely to be meaningful, since you have no control over JIT."}, {"owner": {"reputation": 29824, "user_id": 2464386, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/508c3cc96cdca194c0204f1f7c2758e0?s=128&d=identicon&r=PG", "display_name": "ajb", "link": "https://stackoverflow.com/users/2464386/ajb"}, "edited": false, "score": 0, "creation_date": 1450247732, "post_id": 34305258, "comment_id": 56352490, "body": "If <code>x</code> is a variable, there is probably a performance difference between <code>i &lt; x</code> and <code>i &lt;= x-1</code> (which are logically equivalent unless something wraps).  The subtraction takes a bit of time.  However, if this is a loop termination condition and  <code>x</code> is a local variable, a good compiler may be able to tell that <code>x</code> cannot be changed during the loop, and do the subtraction only once."}, {"owner": {"reputation": 793, "user_id": 5538786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621dcc28705eb41560226fffb9c7ee9b?s=128&d=identicon&r=PG", "display_name": "hargasinski", "link": "https://stackoverflow.com/users/5538786/hargasinski"}, "edited": false, "score": 0, "creation_date": 1450247947, "post_id": 34305258, "comment_id": 56352587, "body": "From my experience, <code>i &lt; x</code> is more commonly used than <code>i &lt;= x</code> because you&#39;re usually loop over elements in an array. If you did <code>for (int i = 1; i &lt;= x; i++)</code> where x is the length of the array, you would have <code>i-1</code> scattered throughout the body of your code. If you did <code>for (int i = 0; i &lt;= x -1; i++)</code>, you would have the same loop body but in that case, <code>for (int i = 0; i &lt; x; i++)</code> looks a lot cleaner. If there is any performance boost from <code>i &lt; x</code> as opposed to <code>i &lt;= x</code>, my assumption would be that any modern compiler would optimize <code>i &lt;= x</code>and your code to something similar to <code>i &lt; x</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "edited": false, "score": 0, "creation_date": 1450247484, "post_id": 34305311, "comment_id": 56352375, "body": "Is there any difference in execution time required for both operations. i.e. &gt; and &gt;="}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "edited": false, "score": 1, "creation_date": 1450247546, "post_id": 34305311, "comment_id": 56352403, "body": "For the raw boolean expression itself?  If there is, it&#39;s <b><i>very</i></b> insignificant, and if you&#39;re hoping to optimize your platform based on that sort of decision, there are <i>other</i> areas you should look to."}, {"owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "reply_to_user": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "edited": false, "score": 0, "creation_date": 1450247562, "post_id": 34305311, "comment_id": 56352410, "body": "@vipinagrahari The execution time of <code>&lt;</code> vs <code>&lt;=</code> is the same. The execution time of iterating the loop one more time is of course directly affected by the time an iteration takes."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1450247596, "post_id": 34305311, "comment_id": 56352426, "body": "Isn&#39;t it frustrating when you answer a question and you get asked the same question again, as if you didn&#39;t even answer it..."}, {"owner": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450247758, "post_id": 34305311, "comment_id": 56352501, "body": "@paddy I am sorry. But I actually could not understand if there is any actual difference. It will be great if you can give some reference."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "edited": false, "score": 0, "creation_date": 1450247818, "post_id": 34305311, "comment_id": 56352531, "body": "@vipinagrahari:  I&#39;d hope to clarify, but I&#39;m not sure I can.  The difference is insignificant, if it exists at all."}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": true, "score": 4, "last_activity_date": 1450247731, "last_edit_date": 1450247731, "creation_date": 1450247403, "answer_id": 34305311, "question_id": 34305258, "link": "https://stackoverflow.com/questions/34305258/is-there-any-performance-difference-between-using-and-in-a-loop/34305311#34305311", "title": "Is there any performance difference between using &gt; and &gt;= in a loop", "body": "<p>There's <em>very</em> little if any performance difference between these two statements, but there is a significant difference between the two statements and their logic flow.</p>\n\n<p>For instance:</p>\n\n<ul>\n<li>If you have a loop that runs until <code>i &lt;= 20</code>, you'll loop until <code>i == 20</code>.</li>\n<li>If you have a loop that runs until <code>i &lt; 20</code>, you'll loop until <code>i == 19</code>.</li>\n</ul>\n\n<p>If you have a condition that requires your iteration value to stop <em>before</em> a certain value, be sure that you pick the inequality that most suits it.</p>\n\n<p>By and large, though, if there were any difference in run time or performance on this boolean statement, it would be barely noticeable.  One should not base any optimization work around switching out those statements.*</p>\n\n<p><sup>*:  Also, don't break <a href=\"http://c2.com/cgi/wiki?RulesOfOptimization\" rel=\"noreferrer\">Rule #1 of Optimization.</a></sup></p>\n"}, {"comments": [{"owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 0, "creation_date": 1450247680, "post_id": 34305362, "comment_id": 56352464, "body": "You mean bytecode, not assembly."}, {"owner": {"reputation": 75, "user_id": 2707436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22bdcecbc26fd333ff3fb34310109aa0?s=128&d=identicon&r=PG&f=1", "display_name": "occamsrazor", "link": "https://stackoverflow.com/users/2707436/occamsrazor"}, "reply_to_user": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 4, "creation_date": 1450247703, "post_id": 34305362, "comment_id": 56352476, "body": "No, I don&#39;t. I mean assembly. This is tagged C."}, {"owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "edited": false, "score": 3, "creation_date": 1450247737, "post_id": 34305362, "comment_id": 56352493, "body": "And <code>java</code>, so I guess we&#39;re both right."}], "tags": [], "owner": {"reputation": 75, "user_id": 2707436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22bdcecbc26fd333ff3fb34310109aa0?s=128&d=identicon&r=PG&f=1", "display_name": "occamsrazor", "link": "https://stackoverflow.com/users/2707436/occamsrazor"}, "is_accepted": false, "score": 1, "last_activity_date": 1450247641, "creation_date": 1450247641, "answer_id": 34305362, "question_id": 34305258, "link": "https://stackoverflow.com/questions/34305258/is-there-any-performance-difference-between-using-and-in-a-loop/34305362#34305362", "title": "Is there any performance difference between using &gt; and &gt;= in a loop", "body": "<p>No, it makes absolutely no difference. When the compiler turns it into assembly, it turns both of them into the same <code>cmp</code> instruction.</p>\n"}, {"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 0, "last_activity_date": 1450247861, "creation_date": 1450247861, "answer_id": 34305409, "question_id": 34305258, "link": "https://stackoverflow.com/questions/34305258/is-there-any-performance-difference-between-using-and-in-a-loop/34305409#34305409", "title": "Is there any performance difference between using &gt; and &gt;= in a loop", "body": "<p>There are times you prefer to use <code>&lt;=</code> over <code>&lt;</code>, for instance in a <code>for</code> loop where usually we go from <code>0</code> to <em>length-1</em> (eg an array length), we use <code>&lt;</code>. But if you want to include the compared value as well, here <code>y</code>, and keep the <code>&lt;</code> logic, you get</p>\n\n<pre><code>for (x=0 ; x&lt;y+1 ; x++) {\n    ...\n}\n</code></pre>\n\n<p>while doing this</p>\n\n<pre><code>for (x=0 ; x&lt;=y ; x++) {\n    ...\n}\n</code></pre>\n\n<p>saves a <code>+1</code> calculation.</p>\n\n<p>Besides that, most processors have both the <em>less than</em> and <em>less or equal</em> instructions - thus using one or the other has no impact on performance.</p>\n"}], "owner": {"reputation": 1923, "user_id": 4652688, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a99fc4795ae54b447fad74e8e5659084?s=128&d=identicon&r=PG&f=1", "display_name": "vipin agrahari", "link": "https://stackoverflow.com/users/4652688/vipin-agrahari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1450247933, "accepted_answer_id": 34305311, "answer_count": 3, "score": 0, "last_activity_date": 1450247861, "creation_date": 1450247151, "last_edit_date": 1450247572, "question_id": 34305258, "link": "https://stackoverflow.com/questions/34305258/is-there-any-performance-difference-between-using-and-in-a-loop", "closed_reason": "Duplicate", "title": "Is there any performance difference between using &gt; and &gt;= in a loop", "body": "<p>In loops we keep terminating conditions and we check those conditions in every pass.</p>\n\n<p>I have seen 2 methods to check </p>\n\n<p>1 . <code> i > x </code> or <code> i &lt; x </code></p>\n\n<p>and the second approch is</p>\n\n<p>2 . <code> i >= x </code> or <code> i &lt;= x </code></p>\n\n<p>Is there any performance difference in these to 2 approaches while the logical comparison.</p>\n\n<p>Is there any difference in execution time required for both operations. i.e. > and >= ?</p>\n"}, {"tags": ["c", "multithreading", "memory", "rhel6"], "answers": [{"comments": [{"owner": {"reputation": 2956, "user_id": 2575399, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7aa23fef935e837e8a00dbee42d13cf?s=128&d=identicon&r=PG", "display_name": "Ajay yadav", "link": "https://stackoverflow.com/users/2575399/ajay-yadav"}, "edited": false, "score": 0, "creation_date": 1450250162, "post_id": 34305574, "comment_id": 56353581, "body": "Hi Jason thanks for answering. Please go through the <a href=\"https://www.ibm.com/developerworks/mydeveloperworks/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en\" rel=\"nofollow noreferrer\">ibm.com/developerworks/mydeveloperworks/blogs/kevgrig/entry/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 0, "creation_date": 1450250292, "post_id": 34305574, "comment_id": 56353642, "body": "Jason , I think its not true that VM is not dependent on design of allocator .Typically, block memory allocation is performed using a \u201cpartition pool\u201d, which is defined statically or dynamically and configured to contain a specified number of blocks of a specified fixed size."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 0, "creation_date": 1450251017, "post_id": 34305574, "comment_id": 56354024, "body": "@SACHINGOYAL You&#39;re incorrect.  Even with thread arenas, the allocator will typically call directly down to the operating system when the requested chunk size is above a certain threshold.  Furthermore, the allocator will not raise a <code>SIGSEGV</code> signal."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 2956, "user_id": 2575399, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7aa23fef935e837e8a00dbee42d13cf?s=128&d=identicon&r=PG", "display_name": "Ajay yadav", "link": "https://stackoverflow.com/users/2575399/ajay-yadav"}, "edited": false, "score": 0, "creation_date": 1450251338, "post_id": 34305574, "comment_id": 56354175, "body": "@Ajayyadav The article you&#39;re pointing to is from 2012, and it&#39;s describing some of what I&#39;m talking about.  If you still suspect the allocator, you can use <code>mmap</code> to bypass it."}, {"owner": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 2, "creation_date": 1450256128, "post_id": 34305574, "comment_id": 56356744, "body": "Jason , did I say anything about the SIGSEGV signal ? Moreover , whatever I said may not be true for you but as far as allocator is concerned , it is true . Source of above information is this link <a href=\"http://www.design-reuse.com/articles/25090/dynamic-memory-allocation-fragmentation-c.html\" rel=\"nofollow noreferrer\">design-reuse.com/articles/25090/&hellip;</a>   . Do you have any link or prove for your theory ?"}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 0, "creation_date": 1450272340, "post_id": 34305574, "comment_id": 56368062, "body": "@SACHINGOYAL The issue with the above code is that it catches a <code>SIGSEGV</code> signal.  This is virtual memory 101.  I&#39;m not entirely sure what the goal of your comments are.  Can you give me an idea how what you&#39;re describing is relevant to this answer?"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 2, "creation_date": 1450275008, "post_id": 34305574, "comment_id": 56369981, "body": "@SACHIN Your article is good enough actually. Because if you read it carefully you&#39;ll see that it&#39;s dealing with determined allocation in RT OSes. Not very applicable to standard Linux. Real-time has very different requirements to normal applications, you can very rarely map from one to the other."}, {"owner": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 0, "creation_date": 1450282505, "post_id": 34305574, "comment_id": 56375612, "body": "Jason , my comment was an answer your comment where you claim &quot;Memory allocation generally isn&#39;t specific to any distribution&quot; which unfortunately not true .I hope I am clear now .Anyways , you didn&#39;t mention from where you got the information used in your comment ?Would you please let me know the source of ur info if there is any ."}, {"owner": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "edited": false, "score": 0, "creation_date": 1450283069, "post_id": 34305574, "comment_id": 56375991, "body": "@ Voo , IMO RHEL6 has come up with a new allocator design to avoid the problem of false sharing (which was the problem with RHEL5 allocator ) .Previously , allocator used to share the area if it was not in use .New allocator design will provide separate arena (may be more than one ) for each thread and hence it will not only avoid the &quot;false sharing &quot; but also result into better performance ."}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": -1, "last_activity_date": 1450248563, "creation_date": 1450248563, "answer_id": 34305574, "question_id": 34305164, "link": "https://stackoverflow.com/questions/34305164/maximum-virtual-memory-allocation-for-a-thread-in-rhel6/34305574#34305574", "title": "Maximum virtual memory allocation for a thread in RHEL6", "body": "<p>Memory allocation generally isn't specific to any distribution.  Typically, the allocator is the <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow\">glibc</a> implementation.  However, the amount of memory a thread can allocate should be a function of the kernel, not the allocator.  Some of the reasons you wouldn't be able to allocate memory might include exhausting physical memory, exhausting swap memory, ulimit, cgroups, etc...</p>\n\n<p>If you still suspect the allocator though, you can try using <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow\"><code>mmap</code></a> to directly map the memory into the process.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1509713094, "creation_date": 1509713094, "answer_id": 47096137, "question_id": 34305164, "link": "https://stackoverflow.com/questions/34305164/maximum-virtual-memory-allocation-for-a-thread-in-rhel6/47096137#47096137", "title": "Maximum virtual memory allocation for a thread in RHEL6", "body": "<blockquote>\n  <p>Why the coredump generated?</p>\n</blockquote>\n\n<p>You have</p>\n\n<pre><code>  char *x[1024];\n  \u2026\n  for(i=0;i&lt;1536;i++)\n  {\n    x[i] = malloc(1*1024*1024);\n</code></pre>\n\n<p>- a plain case of array overflow.</p>\n"}], "owner": {"reputation": 2956, "user_id": 2575399, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7aa23fef935e837e8a00dbee42d13cf?s=128&d=identicon&r=PG", "display_name": "Ajay yadav", "link": "https://stackoverflow.com/users/2575399/ajay-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1509713094, "creation_date": 1450246743, "last_edit_date": 1450247911, "question_id": 34305164, "link": "https://stackoverflow.com/questions/34305164/maximum-virtual-memory-allocation-for-a-thread-in-rhel6", "title": "Maximum virtual memory allocation for a thread in RHEL6", "body": "<p>As RHEL6 introduced a new arena allocator design because of the same number of arena\u2019s are increased for a single thread which is resulting into more virtual memory usage.\nRHEL6 is allocating separate chunks of memory for each thread. Number of Arena per thread are calculated as below as per my understanding on 32/64 bit system:</p>\n\n<pre><code>On 32 Bit system  : \nNumber of Arena = 2 * Number of cores .\nOn 64 Bit system :\nNumber of Arena = 8 * Number of cores . \n</code></pre>\n\n<p>Please validate if my understanding have some gap.</p>\n\n<p>My machine has 4 cores and 64 bit system,</p>\n\n<pre><code>$ lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    2\nCore(s) per socket:    2\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 69\nStepping:              1\nCPU MHz:               759.000\nBogoMIPS:              4589.41\nVirtualization:        VT-x\nL1d cache:             32K\nL1i cache:             32K\nL2 cache:              256K\nL3 cache:              3072K\nNUMA node0 CPU(s):     0-3\n$ uname -a\nLinux admin 3.13.0-71-generic #114-Ubuntu SMP Tue Dec 1 02:34:22 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>So it has 4*8=32 Arena's per thread. Each arena has a maximum size of 64MB; pet thread virtual memory can be reached to 32*64=2GB(per thread).\nPlease let me know if my understanding is correct.</p>\n\n<p>I have created a sample program. It is allocated 1.5 GB of heap memory.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;unistd.h&gt;\n\nstatic void *thread(void *arg)\n{\n  int i=0;\n  char *x[1024];\n  unsigned int pid;\n  char str[15];\n  char cmd[30]=\"cat /proc/\";\n  pid = getpid();\n  sprintf(str, \"%d\", pid);\n  strcat(cmd,str);\n  strcat(cmd,\"/status\");\n  system(cmd);\n  for(i=0;i&lt;1536;i++)\n  {\n    x[i] = malloc(1*1024*1024);\n    printf(\"Memory Allocated %d:\\n \",i);\n    system(cmd);\n  }\n  for(i=0;i&lt;1536;i++)\n  {\n    *x[i] = 5;\n    free(x[i]);\n  }\n  return NULL;\n}\n\nint main(void)\n{\n   unsigned i;\n   pthread_t t;\n   pthread_create(&amp;t, NULL, thread, NULL);\n   pthread_join(t, NULL);\n  return 0;\n}\n</code></pre>\n\n<p>thread t is heap memory allocation is lesser than 2GB. but it generates the coredump after allocating 1GB approx. For more detail please refer the below detail:</p>\n\n<pre><code>Name:   arena\nState:  S (sleeping)\nTgid:   12511\nNgid:   0\nPid:    12511\nPPid:   4417\nTracerPid:  0\nUid:    1000    1000    1000    1000\nGid:    1000    1000    1000    1000\nFDSize: 256\nGroups: 4 24 27 30 46 108 124 129 1000 \nVmPeak:  1133924 kB\nVmSize:  1133924 kB\nVmLck:         0 kB\nVmPin:         0 kB\nVmHWM:      4568 kB\nVmRSS:      4568 kB\nVmData:  1127636 kB\nVmStk:       136 kB\nVmExe:         4 kB\nVmLib:      2012 kB\nVmPTE:      2092 kB\nVmSwap:        0 kB\nThreads:    2\nSigQ:   0/46560\nSigPnd: 0000000000000000\nShdPnd: 0000000000000000\nSigBlk: 0000000000000000\nSigIgn: 0000000000000006\nSigCgt: 0000000180000000\nCapInh: 0000000000000000\nCapPrm: 0000000000000000\nCapEff: 0000000000000000\nCapBnd: 0000001fffffffff\nSeccomp:    0\nCpus_allowed:   ff\nCpus_allowed_list:  0-7\nMems_allowed:   00000000,00000001\nMems_allowed_list:  0\nvoluntary_ctxt_switches:    1027\nnonvoluntary_ctxt_switches: 4\n</code></pre>\n\n<p>Why the coredump generated? is my above understanding is incorrect to calculate the thread maximum virtual memory?</p>\n\n<p>Also what are the consequences happened if virtual memory maximum limit reached\nPlease note I have set ulimit to unlimited  </p>\n\n<pre><code>$ ulimit\nunlimited\n</code></pre>\n"}, {"tags": ["c", "gcc", "compiler-errors", "mingw", "codeblocks"], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 5670722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p6sSx.png?s=128&g=1", "display_name": "cantelope", "link": "https://stackoverflow.com/users/5670722/cantelope"}, "is_accepted": true, "score": 1, "last_activity_date": 1450246578, "creation_date": 1450246578, "answer_id": 34305120, "question_id": 34305033, "link": "https://stackoverflow.com/questions/34305033/mingw-get-exe-unrecognised-option-wall-codeblokcs/34305120#34305120", "title": "mingw-get.exe: unrecognised option &#39;-Wall&#39; Code::blokcs", "body": "<p>Code::blocks can be tricky to configure. It seems your compiler switches have gotten messed up. I would try reinstalling code::blocks to revert to the default settings. One obvious problem is that mingw-get.exe is not a compiler, but is being tasked as one. <a href=\"http://www.mingw.org/wiki/getting_started\" rel=\"nofollow\">This page</a> may be of use to you.</p>\n"}], "owner": {"reputation": 33, "user_id": 5685137, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AhnhZfs0AVw/AAAAAAAAAAI/AAAAAAAAAGU/hRmPGx09QD0/photo.jpg?sz=128", "display_name": "Arshia Rostami", "link": "https://stackoverflow.com/users/5685137/arshia-rostami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1634, "favorite_count": 0, "accepted_answer_id": 34305120, "answer_count": 1, "score": 2, "last_activity_date": 1450246578, "creation_date": 1450246166, "question_id": 34305033, "link": "https://stackoverflow.com/questions/34305033/mingw-get-exe-unrecognised-option-wall-codeblokcs", "title": "mingw-get.exe: unrecognised option &#39;-Wall&#39; Code::blokcs", "body": "<p>So I am just trying to make a very simple program to test out my compiler. I \"made\" this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    puts(\"Hello World!\");\n    return 0;\n}\n</code></pre>\n\n<p>However, when I try to compile it (Code::Blocks MinGW) I get these errors:</p>\n\n<pre><code>mingw-get.exe -Wall -O2 -Wextra -ansi -g  -c \"C:\\Users\\Arshia\\Desktop\\Lab 4 Playground\\main.c\" -o obj\\Release\\main.o\nmingw-get.exe: unrecognised option `-Wall'\nProcess terminated with status 1 (0 minute(s), 0 second(s))\n0 error(s), 0 warning(s) (0 minute(s), 0 second(s))\n</code></pre>\n\n<p>Any idea what I can do? All help is appreciated, thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 2, "creation_date": 1450245423, "post_id": 34304811, "comment_id": 56351559, "body": "Are you familiar with the idea of passing by reference vs. passing by value?"}, {"owner": {"reputation": 382, "user_id": 5623147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da068ffce1337828392e929ed1e3921c?s=128&d=identicon&r=PG&f=1", "display_name": "Matriac", "link": "https://stackoverflow.com/users/5623147/matriac"}, "edited": false, "score": 1, "creation_date": 1450245458, "post_id": 34304811, "comment_id": 56351575, "body": "Does it show timeUpdate and dateUpdate in the command line screen?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 5, "creation_date": 1450245461, "post_id": 34304811, "comment_id": 56351577, "body": "If this compiles with no errors or warnings, I would seriously question the compiler."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1450245506, "post_id": 34304811, "comment_id": 56351590, "body": "What C compiler are you using? Because I get errors trying to compiled your code. Lines 28 and 33 seem fishy, where you appear to try and do something with nested functions (??, not supported in C), and have semi-colons at awkward places at those lines."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 0, "last_activity_date": 1450245734, "creation_date": 1450245734, "answer_id": 34304946, "question_id": 34304811, "link": "https://stackoverflow.com/questions/34304811/my-program-compiles-but-the-time-and-date-will-not-update-can-someone-show-me/34304946#34304946", "title": "My program compiles, but the time and date will not update. Can someone show me where I am going off course", "body": "<p>It looks like you are trying to define a function <code>timeUpdate</code> inside the definition of <code>clockKeeper</code>.  When you write (changed indentation to de-obfuscate):</p>\n\n<pre><code>struct dateAndTime  clockKeeper (struct dateAndTime dt)\n{\n    struct time  timeUpdate (struct time  now);\n    { /* This brace may as well be deleted.  */\n    printf (\"timeUpdate\\n\");\n    return now;\n    } /* along with this one. */\n...\n</code></pre>\n\n<p>you are defining the function <code>clockKeeper</code> in which you declare the existence of the function timeUpdate and two statements that are executed in clockKeeper.  The only thing clockKeeper will ever do is those two statements.  If you want to define the function <code>timeUpdate</code>, you need to move it outside the definition of clockKeeper and remove the semi-colon before the opening brace.  There are probably many other issues with your code, but this is a good place to start.</p>\n"}], "owner": {"reputation": 5, "user_id": 5619888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8b69dfc550495dffeb046ad4334e98?s=128&d=identicon&r=PG&f=1", "display_name": "jonathan", "link": "https://stackoverflow.com/users/5619888/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1450245734, "creation_date": 1450245007, "last_edit_date": 1450245285, "question_id": 34304811, "link": "https://stackoverflow.com/questions/34304811/my-program-compiles-but-the-time-and-date-will-not-update-can-someone-show-me", "title": "My program compiles, but the time and date will not update. Can someone show me where I am going off course", "body": "<p>I completed my code and ran it through code blocks with no errors and it shows the date and time that I have in the code at the command prompt screen, but for some reason it will not update.  Can someone point me in the right direction or show me what I am doing wrong. Here is the problem that I thought that I had solved:</p>\n\n<blockquote>\n  <p>Write a function called clockKeeper that takes as its argument a\n  dateAndTime structure. The function should call the timeUpdate\n  function, and if the time reaches midnight, the function should call\n  the dateUpdate function to switch over to the next day. Have the\n  function return the updated dateAndTime structure and output it to the\n  terminal.</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint dt;\n\nstruct date\n{\n    int day;\n    int month;\n    int year;\n};\n\nstruct time\n{\n    int seconds;\n    int minutes;\n    int hour;\n};\n\nstruct dateAndTime {\n     struct date sdate;\n     struct time stime;\n     };\n\nstruct dateAndTime  clockKeeper (struct dateAndTime dt)\n{\n    struct time  timeUpdate (struct time  now); {\n    printf (\"timeUpdate\\n\");\n    return now;\n     }\n\n    struct date  dateUpdate (struct date  today); {\n    printf (\"dateUpdate\\n\");\n    return today;\n    }    \n\n    dt.stime = timeUpdate (dt.stime);\n\n    if ( dt.stime.hour == 0  &amp;&amp;  dt.stime.minutes == 0  &amp;&amp;\n         dt.stime.seconds == 0 )\n         dt.sdate = dateUpdate (dt.sdate);\n\n    return  dt;\n}\n\nint main (void)\n\n    int dt1;\n    int dt2;\n\n{\n    struct dateAndTime  dt1 = { { 12, 31, 2004 }, { 23, 59, 59 } };\n    struct dateAndTime  dt2 = { { 2, 28, 2008 }, { 23, 59, 58 } };\n\n    printf (\"Current date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\",\n        dt1.sdate.month, dt1.sdate.day, dt1.sdate.year,\n        dt1.stime.hour,\n        dt1.stime.minutes, dt1.stime.seconds);\n\n    dt1 = clockKeeper (dt1);\n\n    printf (\"Updated date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\\n\",\n        dt1.sdate.month, dt1.sdate.day, dt1.sdate.year,\n        dt1.stime.hour, dt1.stime.minutes, dt1.stime.seconds);\n\n    printf (\"Current date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\",\n        dt2.sdate.month, dt2.sdate.day, dt2.sdate.year,\n        dt2.stime.hour, dt2.stime.minutes, dt2.stime.seconds);\n\n    dt2 = clockKeeper (dt2);\n\n    printf (\"Updated date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\\n\",\n        dt2.sdate.month, dt2.sdate.day, dt2.sdate.year,\n        dt2.stime.hour, dt2.stime.minutes, dt2.stime.seconds);\n\n    printf (\"Current date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\",\n        dt2.sdate.month, dt2.sdate.day, dt2.sdate.year,\n        dt2.stime.hour, dt2.stime.minutes, dt2.stime.seconds);\n\n    dt2 = clockKeeper (dt2);\n\n    printf (\"Updated date and time is %.2i/%.2i/%.2i \"\n        \"%.2i:%.2i:%.2i\\n\\n\",\n        dt2.sdate.month, dt2.sdate.day, dt2.sdate.year,\n        dt2.stime.hour, dt2.stime.minutes, dt2.stime.seconds);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "codeblocks"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1450244283, "post_id": 34304613, "comment_id": 56351204, "body": "That&#39;s because you&#39;re giving an incorrect argument to <code>printf</code>. The first arg needs to be a <code>const char *</code> whereas you gave it a <code>char</code>. What did you expect or what are you trying to prove? Just stick with the second (commented out) <code>printf</code> call instead."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1450244362, "post_id": 34304613, "comment_id": 56351226, "body": "If your compiler does not report an error in the line <code>printf(ch);</code>, drop it right away and look for a competent compiler."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1450247520, "post_id": 34304613, "comment_id": 56352391, "body": "Did you read documentation of <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow noreferrer\">printf(3)</a>? Reading it would have been faster than asking here. And compile with all warnings &amp; debug info: <code>gcc -Wall -Wextra -g</code>; see also <a href=\"http://man7.org/linux/man-pages/man3/putchar.3.html\" rel=\"nofollow noreferrer\">putchar(3)</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1450249009, "post_id": 34304613, "comment_id": 56353041, "body": "You need to locate the &quot;compiler messages&quot; window in your IDE and watch it. If you have any errors or warnings, fix them before trying to run your program."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5685063, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206935212692128/picture?type=large", "display_name": "Shravan Niranjan", "link": "https://stackoverflow.com/users/5685063/shravan-niranjan"}, "edited": false, "score": 0, "creation_date": 1450245404, "post_id": 34304807, "comment_id": 56351550, "body": "Thanks a lot! Understood it"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "reply_to_user": {"reputation": 17, "user_id": 5685063, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206935212692128/picture?type=large", "display_name": "Shravan Niranjan", "link": "https://stackoverflow.com/users/5685063/shravan-niranjan"}, "edited": false, "score": 0, "creation_date": 1450245748, "post_id": 34304807, "comment_id": 56351687, "body": "@ShravanNiranjan Great! =)"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1450246694, "post_id": 34304807, "comment_id": 56352062, "body": "Not only is <code>printf(&amp;ch);</code> &quot;not really good&quot;, it is <i>undefined behaviour</i>.  Do <b>not</b> do this!!  Use <code>printf( &quot;%c&quot;, ch );</code>."}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450246950, "post_id": 34304807, "comment_id": 56352155, "body": "@paddy Hi, paddy. I only mean to point out the concept that it should be a pointer as an argument. But if you can help to improve the answer, kindly edit. I will edit my answer too..."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1450247053, "post_id": 34304807, "comment_id": 56352198, "body": "I think it would have been better to explain why the formatted version that the OP asked about is actually correct by briefly explaining how it works, rather than offering reckless code that just happens to compile."}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1450247475, "post_id": 34304807, "comment_id": 56352370, "body": "@paddy I edited my answer, based on your correction. Thanks"}], "tags": [], "owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "is_accepted": false, "score": 1, "last_activity_date": 1450247349, "last_edit_date": 1450247349, "creation_date": 1450244971, "answer_id": 34304807, "question_id": 34304613, "link": "https://stackoverflow.com/questions/34304613/c-programming-codeblocks-stops-working-with-c-till-i-make-a-tiny-change-any-i/34304807#34304807", "title": "C Programming : Codeblocks stops working with C till I make a tiny change. Any idea why?", "body": "<p>That is because <code>printf</code> expects the argument should be in the <code>const char*, ...</code> as input argument while </p>\n\n<pre><code>char ch;\n</code></pre>\n\n<p>is not of pointer type</p>\n\n<p>So you \"can\" do:</p>\n\n<pre><code>char ch = 'A';\nprintf(&amp;ch); //this is bad because not only it is not well-formatted but also, though compiled, may cause undefined behavior. This is to only show you the idea\n</code></pre>\n\n<p>but cannot do:</p>\n\n<pre><code>char ch = 'A';\nprintf(ch);\n</code></pre>\n\n<p>Edited (after <code>paddy</code>'s correction):</p>\n\n<p>The correct way to print it using <code>printf</code> is by using the print format provided for character,</p>\n\n<pre><code>char ch = 'A';\nprintf(\"%c\", ch);\n</code></pre>\n\n<p>Hope it can help.</p>\n"}, {"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1450259282, "last_edit_date": 1450259282, "creation_date": 1450258636, "answer_id": 34308437, "question_id": 34304613, "link": "https://stackoverflow.com/questions/34304613/c-programming-codeblocks-stops-working-with-c-till-i-make-a-tiny-change-any-i/34308437#34308437", "title": "C Programming : Codeblocks stops working with C till I make a tiny change. Any idea why?", "body": "<p>What do you expect when you lie to the compiler? :-)</p>\n\n<p>The <code>printf</code> function's prototype, declared in <code>&lt;stdio.h&gt;</code> is</p>\n\n<pre><code>int printf(const char *format, ...);\n</code></pre>\n\n<p>which means the first argument must be given and it must be of type <em>pointer-to-char</em>.\nIf instead you pass printf a <code>char</code> then that is mis-interpreted as a pointer-to-char, causing <strong>undefined behavior</strong> in C lingo.</p>\n\n<p>Speak the truth to the compiler and it will cooperate. Finding out about the truth starts with reading the documentation of the library functions you use and enabling all warnings your compiler offers. This particular one is easily caught by almost all modern compilers.</p>\n\n<p>PS: using proper terminology also helps communicating problems. What you call <em>placeholder</em> is called <em>argument</em> or, more specifically, <em>format</em>.</p>\n"}], "owner": {"reputation": 17, "user_id": 5685063, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206935212692128/picture?type=large", "display_name": "Shravan Niranjan", "link": "https://stackoverflow.com/users/5685063/shravan-niranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1450259282, "creation_date": 1450244023, "last_edit_date": 1450245691, "question_id": 34304613, "link": "https://stackoverflow.com/questions/34304613/c-programming-codeblocks-stops-working-with-c-till-i-make-a-tiny-change-any-i", "title": "C Programming : Codeblocks stops working with C till I make a tiny change. Any idea why?", "body": "<p>The code is included below: <br>\nWhen I run the program with the line <code>printf(ch)</code> it says project could not be executed. However when I use the placeholder, the project works just fine. Any idea why it is such?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char arr[10];\n    printf(\"Enter a password. \\n\");\n    scanf(\"%s\",arr );\n   // printf(arr);\n    char ch;\n    int i;\n    for (i=0; i&lt;10; i++)\n    {\n       ch=arr[i];\n\n       printf(ch);\n       //printf(\"%c\",ch);--&gt; if i use this instead of printf(ch) it works fine. Can this please be explained\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "encryption", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1450248426, "post_id": 34304570, "comment_id": 56352795, "body": "CBC mode provides confidentiality only, and you usually must add a MAC to use CBC mode safely. You should probably be using authenticated encryption because it provides <i>both</i> confidentiality and authenticity. See <a href=\"https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a> on the OpenSSL wiki."}, {"owner": {"reputation": 961, "user_id": 589197, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/XwE4z.png?s=128&g=1", "display_name": "adlag", "link": "https://stackoverflow.com/users/589197/adlag"}, "edited": false, "score": 1, "creation_date": 1450265840, "post_id": 34304570, "comment_id": 56363449, "body": "Simplify your code. Do away with all the file system reading. Encrypt one file and try to decrypt that file. Debugging is much easier then."}, {"owner": {"reputation": 681, "user_id": 3733424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a15f0bcd0b7c06e27b55aaa7ba535f?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/3733424/sai"}, "edited": false, "score": 0, "creation_date": 1450332965, "post_id": 34304570, "comment_id": 56397137, "body": "Thank you for the reply. Did you mean that use of system calls from the program ?"}], "answers": [{"comments": [{"owner": {"reputation": 681, "user_id": 3733424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a15f0bcd0b7c06e27b55aaa7ba535f?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/3733424/sai"}, "edited": false, "score": 0, "creation_date": 1450333052, "post_id": 34308841, "comment_id": 56397161, "body": "Thank you Jay. yeah! you were right it was not getting the correct key and iv value. it tried a simple program with your suggestion (using -K, -iv and -p options) and it worked.  I have another query here.  I have generated an private key using this command <b>openssl genrsa -out key.pem 2048</b>  I have encrypted a file using this key as below <b>openssl enc -aes-256-cbc -in rand_bytes.c -out rand_bytes.enc -kfile key.pem</b>  Now the question is, I have to read the same key to decrypt the file using OpenSSL EVP API&#39;s.  Could you suggest me, how it can be achieved.   Thank you."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 681, "user_id": 3733424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a15f0bcd0b7c06e27b55aaa7ba535f?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/3733424/sai"}, "edited": false, "score": 0, "creation_date": 1501585392, "post_id": 34308841, "comment_id": 77832714, "body": "@Sai: If this answered your particular question, please mark it as the answer for this thread. The other answer is helpful for a different reason, but by marking this as the answer to your specific problem, it clarifies that this thread is not a duplicate of the one linked on the other answer."}], "tags": [], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "is_accepted": false, "score": 11, "last_activity_date": 1450259851, "creation_date": 1450259851, "answer_id": 34308841, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/34308841#34308841", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>I think the Key and IV used for encryption using command line and decryption using your program are not same.</p>\n\n<p>Please note that when you use the \"-k\" (different from \"-K\"), the input given is considered as a password from which the key is derived. Generally in this case, there is no need for the \"-iv\" option as both key and password will be derived from the input given with \"-k\" option.</p>\n\n<p>It is not clear from your question, how you are ensuring that the Key and IV are same between encryption and decryption.</p>\n\n<p>In my suggestion, better use \"-K\" and \"-iv\" option to explicitly specify the Key and IV during encryption and use the same for decryption. If you need to use \"-k\", then use the \"-p\" option to print the key and iv used for encryption and use the same in your decryption program.</p>\n\n<p>More details can be obtained at <a href=\"https://www.openssl.org/docs/manmaster/apps/enc.html\" rel=\"noreferrer\">https://www.openssl.org/docs/manmaster/apps/enc.html</a> </p>\n"}, {"comments": [{"owner": {"reputation": 22380, "user_id": 284111, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7540f1aac4d78cc963f6551e8307b757?s=128&d=identicon&r=PG", "display_name": "Andrew Savinykh", "link": "https://stackoverflow.com/users/284111/andrew-savinykh"}, "edited": false, "score": 77, "creation_date": 1496895804, "post_id": 43847627, "comment_id": 75851205, "body": "See here:  <a href=\"https://stackoverflow.com/a/39641378/284111\">stackoverflow.com/a/39641378/284111</a> Default digest has changed between those versions from md5 to sha256. One can specify the default digest on the command line as <code>-md sha256</code> or <code>-md md5</code> respectively"}, {"owner": {"reputation": 101, "user_id": 8862347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ZWHzdsUwaE/AAAAAAAAAAI/AAAAAAAAAA0/b818Ox8Nic0/photo.jpg?sz=128", "display_name": "St&#233;phane Tr&#233;boux", "link": "https://stackoverflow.com/users/8862347/st%c3%a9phane-tr%c3%a9boux"}, "edited": false, "score": 2, "creation_date": 1527419335, "post_id": 43847627, "comment_id": 88113852, "body": "I just upgraded from Kubuntu artful to Kubuntu bionic which updated openssl from 1.0.2g to 1.1.0g and I was unable to decrypt some files. The default hash used by <code>openssl enc</code> for password-based key derivation changed in 1.1.0 to SHA256 versus MD5 in lower versions (<a href=\"https://unix.stackexchange.com/a/344586\">source</a>). My solution was to <a href=\"https://packages.ubuntu.com/artful/openssl\" rel=\"nofollow noreferrer\">download the older <code>openssl</code> package</a>, force install it with <code>dpkg</code>, decrypt the file(s), force update the <code>openssl</code> package from the repository (using Synaptic for instance) and encrypt the files again."}, {"owner": {"reputation": 9594, "user_id": 448734, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94ccfc629c6862b5950de3512742bcae?s=128&d=identicon&r=PG", "display_name": "Bryan", "link": "https://stackoverflow.com/users/448734/bryan"}, "reply_to_user": {"reputation": 22380, "user_id": 284111, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7540f1aac4d78cc963f6551e8307b757?s=128&d=identicon&r=PG", "display_name": "Andrew Savinykh", "link": "https://stackoverflow.com/users/284111/andrew-savinykh"}, "edited": false, "score": 0, "creation_date": 1530011006, "post_id": 43847627, "comment_id": 89073571, "body": "@AndrewSavinykh please put your comment as an answer so I can upvote it."}, {"owner": {"reputation": 1466, "user_id": 926057, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/66d793e3800b52a15181bc0b18393d77?s=128&d=identicon&r=PG", "display_name": "o\u1d09\u0279\u01dd\u0265\u0254", "link": "https://stackoverflow.com/users/926057/o%e1%b4%89%c9%b9%c7%9d%c9%a5%c9%94"}, "reply_to_user": {"reputation": 22380, "user_id": 284111, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7540f1aac4d78cc963f6551e8307b757?s=128&d=identicon&r=PG", "display_name": "Andrew Savinykh", "link": "https://stackoverflow.com/users/284111/andrew-savinykh"}, "edited": false, "score": 0, "creation_date": 1533232781, "post_id": 43847627, "comment_id": 90282817, "body": "@AndrewSavinykh pls post it as an answer. because it is"}, {"owner": {"reputation": 195, "user_id": 5394180, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gaAAein1muI/AAAAAAAAAAI/AAAAAAAAAuI/mgbchsxT04M/photo.jpg?sz=128", "display_name": "Reeshabh Ranjan", "link": "https://stackoverflow.com/users/5394180/reeshabh-ranjan"}, "edited": false, "score": 0, "creation_date": 1587816990, "post_id": 43847627, "comment_id": 108660818, "body": "How to specify this in the C API?"}, {"owner": {"reputation": 1500, "user_id": 7624937, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2fd5b0f42844df6c7f0fdfc1815c3c50?s=128&d=identicon&r=PG&f=1", "display_name": "LLL", "link": "https://stackoverflow.com/users/7624937/lll"}, "edited": false, "score": 2, "creation_date": 1604479577, "post_id": 43847627, "comment_id": 114356943, "body": "Thank you for the answer! Anyway it must be said - people from openssl are complete bumpkins. This is not a toy program, it&#39;s not a calculator or some game, seriously ... People like myself have important stuff encrypted with this program. Financial and legal stuff! So when I suddenly need document encrypted couple years ago and instead of document, or at least info &quot;use openssl with version X to decrypt&quot; I get some stupid &quot;bad decrypt&quot; message it&#39;s like heart attack."}], "tags": [], "owner": {"reputation": 4426, "user_id": 1153203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/89d4f80278b4aa0f3c134aacc14adb95?s=128&d=identicon&r=PG", "display_name": "Sean Dawson", "link": "https://stackoverflow.com/users/1153203/sean-dawson"}, "is_accepted": false, "score": 152, "last_activity_date": 1551960677, "last_edit_date": 1551960677, "creation_date": 1494246281, "answer_id": 43847627, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/43847627#43847627", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>This message <code>digital envelope routines: EVP_DecryptFInal_ex: bad decrypt</code> can also occur when you encrypt and decrypt with an incompatible versions of openssl.</p>\n\n<p>The issue I was having was that I was encrypting on Windows which had version 1.1.0 and then decrypting on a generic Linux system which had 1.0.2g.</p>\n\n<p>It is not a very helpful error message!</p>\n\n<hr>\n\n<h1>Working solution:</h1>\n\n<p>A possible solution from @AndrewSavinykh that worked for many (see the comments):</p>\n\n<blockquote>\n  <p>Default digest has changed between those versions from md5 to sha256. One can specify the default digest on the command line as <code>-md sha256</code> or <code>-md md5</code> respectively </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 591, "user_id": 8950379, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4jMj8i1U2KA/AAAAAAAAAAI/AAAAAAAAAFM/pchXWm5t7LQ/photo.jpg?sz=128", "display_name": "Obinna Nnenanya", "link": "https://stackoverflow.com/users/8950379/obinna-nnenanya"}, "edited": false, "score": 0, "creation_date": 1588048737, "post_id": 50349279, "comment_id": 108742391, "body": "This was my case. Wrong password!"}], "tags": [], "owner": {"reputation": 636, "user_id": 2518705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0XaQ5.gif?s=128&g=1", "display_name": "RAM237", "link": "https://stackoverflow.com/users/2518705/ram237"}, "is_accepted": false, "score": 3, "last_activity_date": 1526384351, "creation_date": 1526384351, "answer_id": 50349279, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/50349279#50349279", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>This message can also occur when you specify the <strong>incorrect decryption password</strong> (yeah, lame, but not quite obvious to realize this from the error message, huh?).</p>\n\n<p>I was using the command line to decrypt the recent DataBase backup for my auxiliary tool and suddenly faced this issue.</p>\n\n<p>Finally, after 10 mins of grief and plus reading through this question/answers I have remembered that the password is different and everything worked just fine with the correct password.</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 6267434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/621bcbc86898b3041fb73688a73e2223?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Braune", "link": "https://stackoverflow.com/users/6267434/tobias-braune"}, "is_accepted": false, "score": 12, "last_activity_date": 1548466266, "last_edit_date": 1548466266, "creation_date": 1526993697, "answer_id": 50468269, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/50468269#50468269", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>I experienced a similar error reply while using the openssl command line interface, while having the correct binary key (-K). The option  \"-nopad\" resolved the issue:</p>\n\n<p>Example generating the error:<br></p>\n\n<pre><code>echo -ne \"\\x32\\xc8\\xde\\x5c\\x68\\x19\\x7e\\x53\\xa5\\x75\\xe1\\x76\\x1d\\x20\\x16\\xb2\\x72\\xd8\\x40\\x87\\x25\\xb3\\x71\\x21\\x89\\xf6\\xca\\x46\\x9f\\xd0\\x0d\\x08\\x65\\x49\\x23\\x30\\x1f\\xe0\\x38\\x48\\x70\\xdb\\x3b\\xa8\\x56\\xb5\\x4a\\xc6\\x09\\x9e\\x6c\\x31\\xce\\x60\\xee\\xa2\\x58\\x72\\xf6\\xb5\\x74\\xa8\\x9d\\x0c\" | openssl aes-128-cbc -d -K 31323334353637383930313233343536 -iv 79169625096006022424242424242424 | od -t x1\n</code></pre>\n\n<p>Result:<br></p>\n\n<pre><code>bad decrypt\n140181876450560:error:06065064:digital envelope \nroutines:EVP_DecryptFinal_ex:bad decrypt:../crypto/evp/evp_enc.c:535:\n0000000 2f 2f 07 02 54 0b 00 00 00 00 00 00 04 29 00 00\n0000020 00 00 04 a9 ff 01 00 00 00 00 04 a9 ff 02 00 00\n0000040 00 00 04 a9 ff 03 00 00 00 00 0d 79 0a 30 36 38\n</code></pre>\n\n<p>Example with correct result:<br></p>\n\n<pre><code>echo -ne \"\\x32\\xc8\\xde\\x5c\\x68\\x19\\x7e\\x53\\xa5\\x75\\xe1\\x76\\x1d\\x20\\x16\\xb2\\x72\\xd8\\x40\\x87\\x25\\xb3\\x71\\x21\\x89\\xf6\\xca\\x46\\x9f\\xd0\\x0d\\x08\\x65\\x49\\x23\\x30\\x1f\\xe0\\x38\\x48\\x70\\xdb\\x3b\\xa8\\x56\\xb5\\x4a\\xc6\\x09\\x9e\\x6c\\x31\\xce\\x60\\xee\\xa2\\x58\\x72\\xf6\\xb5\\x74\\xa8\\x9d\\x0c\" | openssl aes-128-cbc -d -K 31323334353637383930313233343536 -iv 79169625096006022424242424242424 -nopad | od -t x1\n</code></pre>\n\n<p>Result:<br></p>\n\n<pre><code>0000000 2f 2f 07 02 54 0b 00 00 00 00 00 00 04 29 00 00\n0000020 00 00 04 a9 ff 01 00 00 00 00 04 a9 ff 02 00 00\n0000040 00 00 04 a9 ff 03 00 00 00 00 0d 79 0a 30 36 38\n0000060 30 30 30 34 31 33 31 2f 2f 2f 2f 2f 2f 2f 2f 2f\n0000100\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 5394180, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gaAAein1muI/AAAAAAAAAAI/AAAAAAAAAuI/mgbchsxT04M/photo.jpg?sz=128", "display_name": "Reeshabh Ranjan", "link": "https://stackoverflow.com/users/5394180/reeshabh-ranjan"}, "edited": false, "score": 0, "creation_date": 1587817172, "post_id": 60057945, "comment_id": 108660883, "body": "What is the equivalent to specify in the C API?"}], "tags": [], "owner": {"reputation": 111, "user_id": 9729648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8333df82ed16f823f7af3e1402463c76?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/9729648/ankush"}, "is_accepted": false, "score": 7, "last_activity_date": 1580820974, "creation_date": 1580820974, "answer_id": 60057945, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/60057945#60057945", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>Errors:\n\"Bad encrypt / decrypt\"\n\"gitencrypt_smudge: FAILURE: openssl error decrypting file\"</p>\n\n<p>There are various error strings that are thrown from openssl, depending on respective versions, and scenarios. Below is the checklist I use in case of openssl related issues:</p>\n\n<ol>\n<li>Ideally, openssl is able to encrypt/decrypt using same key (+ salt) &amp; enc algo only.</li>\n<li><p>Ensure that openssl versions (used to encrypt/decrypt), are compatible. For eg. the hash used in openssl changed at version 1.1.0 from MD5 to SHA256. This produces a different key from the same password.\nFix: \nadd \"-md md5\" in 1.1.0 to decrypt data from lower versions, and \nadd \"-md sha256 in lower versions to decrypt data from 1.1.0</p></li>\n<li><p>Ensure that there is a single openssl version installed in your machine. In case there are multiple versions installed simultaneously (in my machine, these were installed :- 'LibreSSL 2.6.5' and 'openssl 1.1.1d'), make the sure that only the desired one appears in your PATH variable.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 5224852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5934ec39437fce96a7c5c1329b14cfa?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijay Chougale", "link": "https://stackoverflow.com/users/5224852/digvijay-chougale"}, "is_accepted": false, "score": 1, "last_activity_date": 1589949050, "creation_date": 1589949050, "answer_id": 61905157, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption/61905157#61905157", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>My case, the server was encrypting with padding disabled. But the client was trying to decrypt with the padding enabled.</p>\n\n<p>While using EVP_CIPHER*, by default the padding is enabled. To disable explicitly we need to do</p>\n\n<pre><code>EVP_CIPHER_CTX_set_padding(context, 0);\n</code></pre>\n\n<p>So non matching padding options can be one reason.</p>\n"}], "owner": {"reputation": 681, "user_id": 3733424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77a15f0bcd0b7c06e27b55aaa7ba535f?s=128&d=identicon&r=PG&f=1", "display_name": "Sai", "link": "https://stackoverflow.com/users/3733424/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120421, "favorite_count": 13, "answer_count": 6, "score": 67, "last_activity_date": 1592912614, "creation_date": 1450243822, "last_edit_date": 1450248248, "question_id": 34304570, "link": "https://stackoverflow.com/questions/34304570/how-to-resolve-the-evp-decryptfinal-ex-bad-decrypt-during-file-decryption", "title": "How to resolve the &quot;EVP_DecryptFInal_ex: bad decrypt&quot; during file decryption", "body": "<p>I have the following query.Could any one please suggest me a solution.</p>\n\n<p>I'm working on encryption and decryption of file for first time.</p>\n\n<p>I have encrypted file through command prompt using the command:</p>\n\n<pre><code>openssl enc -aes-256-cbc -in file.txt -out file.enc -k \"key value\" -iv \"iv value\"\n</code></pre>\n\n<p>I have to decrypt it programmatically. So I have written the program for it, but it is throwing the following error:</p>\n\n<pre><code>./exe_file enc_file_directory\n...\nerror: 06065064: digital envelope routines: EVP_DecryptFInal_ex: bad decrypt: evp_enc.c\n</code></pre>\n\n<hr>\n\n<p>The program below takes input as directory path and search for encrypted file \".enc\" and try to decrypt it read into buffer.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;openssl/conf.h&gt;\n#include &lt;libxml/globals.h&gt;\n\nvoid handleErrors(char *msg)\n{\n    {\n        ERR_print_errors_fp(stderr);\n        printf(\"%s\", msg);\n        abort(); \n    }\n}\n\nvoid freeMemory(char *mem)\n{\n    if (NULL != mem)\n    {\n        free(mem);\n        mem = NULL;\n    }\n}\n\n/* Function to decrypt the XML files */\n\nint decryptXML(unsigned char *indata, unsigned char *outdata, int fsize)\n{\n\n    int outlen1 = 0, outlen2 = 0;\n\n    unsigned char iv[] = \"b63e541bc9ece19a1339df4f8720dcc3\";\n    unsigned char ckey[] = \"70bbc518c57acca2c2001694648c40ddaf19e3b4fe1376ad656de8887a0a5ec2\" ;\n\n    if (NULL == indata)\n    {\n        printf (\"input data is empty\\n\");\n        return 0;\n    }\n\n    if (0 &gt;= fsize)\n    {\n        printf (\"file size is zero\\n\");\n        return 0;\n    }\n\n    outdata = (char *) malloc (sizeof (char) * fsize * 2);\n\n    EVP_CIPHER_CTX ctx;\n\n    EVP_CIPHER_CTX_init(&amp;ctx);\n\n    if (! EVP_DecryptInit_ex (&amp;ctx, EVP_aes_256_cbc(), NULL, ckey, iv))\n    {\n        EVP_CIPHER_CTX_cleanup(&amp;ctx);\n    handleErrors(\"DInit\");\n    }\n\n    if (! EVP_DecryptUpdate (&amp;ctx, outdata, &amp;outlen1, indata, fsize))\n    {\n        EVP_CIPHER_CTX_cleanup(&amp;ctx);\n        handleErrors(\"DUpdate\");\n    }\n\n    if (! EVP_DecryptFinal_ex (&amp;ctx, outdata + outlen1, &amp;outlen2))\n    {\n\n        EVP_CIPHER_CTX_cleanup(&amp;ctx);\n        handleErrors(\"DFinal\");\n    }\n\n    EVP_CIPHER_CTX_cleanup(&amp;ctx);\n\n    return outlen1+outlen2;\n\n}\n\nint isDirectory(char *path)\n{\n    DIR *dir = NULL;\n    FILE *fin = NULL, *fout = NULL;\n    int enc_len = 0, dec_len = 0, fsize = 0, ksize = 0;\n    unsigned char *indata = NULL, *outdata = NULL;\n    char buff[BUFFER_SIZE], file_path[BUFFER_SIZE], cur_dir[BUFFER_SIZE];\n\n    struct dirent *in_dir;\n    struct stat s;\n\n    if (NULL == (dir = opendir(path)))\n    {\n        printf (\"ERROR: Failed to open the directory %s\\n\", path);\n        perror(\"cannot open.\");\n        exit(1);\n    }\n\n    while (NULL != (in_dir = readdir(dir)))\n    {\n\n        if (!strcmp (in_dir-&gt;d_name, \".\") || !strcmp(in_dir-&gt;d_name, \"..\"))\n            continue;\n\n        sprintf (buff, \"%s/%s\", path, in_dir-&gt;d_name);\n\n        if (-1 == stat(buff, &amp;s))\n        {\n            perror(\"stat\");\n            exit(1);\n        }\n\n        if (S_ISDIR(s.st_mode))\n        {\n\n            isDirectory(buff);\n        }\n        else\n        {\n            strcpy(file_path, buff);\n\n            if (strstr(file_path, \".enc\"))\n            {\n\n                /* File to be decrypted */\n\n                fout = fopen(file_path,\"rb\"); \n\n                fseek (fout, 0L, SEEK_END);\n                fsize = ftell(fout);\n                fseek (fout, 0L, SEEK_SET);\n\n                indata = (char*)malloc(fsize);\n\n                fread (indata, sizeof(char), fsize, fout);\n\n                if (NULL == fout)\n                {\n                    perror(\"Cannot open enc file: \");\n                    return 1;\n                }\n\n\n                dec_len = decryptXML (indata, outdata, fsize);\n                outdata[dec_len] = '\\0';\n                printf (\"%s\\n\", outdata);\n                fclose (fin);\n                fclose (fout);\n\n            }\n        }\n    }\n\n\n\n    closedir(dir);\n    freeMemory(outdata);\n    freeMemory(indata);\n\n    return 1; \n}\n\n\nint main(int argc, char *argv[])\n{\n    int result;\n\n    if (argc != 2)\n    {\n        printf (\"Usage: &lt;executable&gt; path_of_the_files\\n\");\n        return -1;\n    }\n\n    ERR_load_crypto_strings();\n    OpenSSL_add_all_algorithms();\n    OPENSSL_config(NULL);\n\n    /* Checking for the directory existance */\n\n    result = isDirectory(argv[1]);\n\n    EVP_cleanup();\n    ERR_free_strings();\n\n    if (0 == result)\n        return 1;\n    else\n       return 0;\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1450243706, "post_id": 34304528, "comment_id": 56350990, "body": "&quot;While executing the program after removed the arguments argc and argv I get segmentation fault. &quot; - huh?  If you are having trouble with code then post the code you are having trouble with"}], "answers": [{"tags": [], "owner": {"reputation": 9545, "user_id": 242814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fabed09b67201710f4cc958b4e668cb1?s=128&d=identicon&r=PG", "display_name": "Brennan Vincent", "link": "https://stackoverflow.com/users/242814/brennan-vincent"}, "is_accepted": true, "score": 1, "last_activity_date": 1450243793, "creation_date": 1450243793, "answer_id": 34304564, "question_id": 34304528, "link": "https://stackoverflow.com/questions/34304528/list-environment-variables-with-c/34304564#34304564", "title": "List environment variables with C", "body": "<p>It doesn't matter what the arguments are called; only their position matters.</p>\n\n<p>If you removed <code>argc</code> and <code>argv</code>, and so you only have</p>\n\n<pre><code>int main(char *envp[])\n</code></pre>\n\n<p>this is illegal (since the first argument should be an integer).</p>\n\n<p>What is the problem with including <code>argc</code> and <code>argv</code>, but not using them?</p>\n\n<p>Also, I should point out that <code>envp</code> is not portable. But it is accepted by the most widely used C implementations.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2193256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09387486a59567e424221fdb9af12a77?s=128&d=identicon&r=PG", "display_name": "seamaner", "link": "https://stackoverflow.com/users/2193256/seamaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1450244800, "creation_date": 1450244800, "answer_id": 34304778, "question_id": 34304528, "link": "https://stackoverflow.com/questions/34304528/list-environment-variables-with-c/34304778#34304778", "title": "List environment variables with C", "body": "<p>main is called int main(int argc, char** argv, char** envp).</p>\n\n<p>If you remove argc, argv, it will be</p>\n\n<p>int main(char* envp[])</p>\n\n<p>so envp will be set to argc, and there will be segmentation fault when envp[index++]</p>\n"}], "owner": {"reputation": 171, "user_id": 5060800, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rClwOHM5848/AAAAAAAAAAI/AAAAAAAAABk/3DBFZKA7ERE/photo.jpg?sz=128", "display_name": "adhi .b", "link": "https://stackoverflow.com/users/5060800/adhi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 34304564, "answer_count": 2, "score": 0, "last_activity_date": 1450244800, "creation_date": 1450243626, "last_edit_date": 1450244019, "question_id": 34304528, "link": "https://stackoverflow.com/questions/34304528/list-environment-variables-with-c", "title": "List environment variables with C", "body": "<p>I have used the below code to print the environmental variables.In that I have doubt is there a connection between the parameters of <code>char *argv[]</code> and <code>char *envp[]</code> in main function.</p>\n\n<p>Sample Code:-</p>\n\n<pre><code>#include &lt;stdio.h&gt;    \nint main(int argc, char *argv[], char *envp[])    \n{\n  int index = 0;    \n  while (envp[index])    \n    printf(\"%s\\n\", envp[index++]);    \n}\n</code></pre>\n\n<p>While executing the program after removed the arguments argc and argv I get segmentation fault.\nSome one please explain this.!</p>\n"}, {"tags": ["c", "ubuntu", "terminal", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "edited": false, "score": 0, "creation_date": 1450242603, "post_id": 34304290, "comment_id": 56350654, "body": "Can you try adding #include &lt;fcntl.h&gt; and then try"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 2193256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09387486a59567e424221fdb9af12a77?s=128&d=identicon&r=PG", "display_name": "seamaner", "link": "https://stackoverflow.com/users/2193256/seamaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1450242699, "creation_date": 1450242699, "answer_id": 34304354, "question_id": 34304290, "link": "https://stackoverflow.com/questions/34304290/o-rdwr-undeclared-for-terminal/34304354#34304354", "title": "O_RDWR undeclared for terminal", "body": "<p>The first parameter of open is char*pathname, not a struct termios type.\nDonot open it like that.</p>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1450243135, "creation_date": 1450243135, "answer_id": 34304432, "question_id": 34304290, "link": "https://stackoverflow.com/questions/34304290/o-rdwr-undeclared-for-terminal/34304432#34304432", "title": "O_RDWR undeclared for terminal", "body": "<p><code>open</code> takes a path string (<code>char *</code>), not a random <code>struct</code>. <code>struct termios</code> is for <a href=\"http://linux.die.net/man/3/termios\" rel=\"nofollow\">specific terminal control APIs</a>, not arbitrary file manipulation functions.</p>\n\n<p>Perhaps you want to <code>open</code> something like <code>\"/dev/tty#\"</code> (where <code>#</code> is replaced with the <code>tty</code> number)?</p>\n"}, {"tags": [], "owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "is_accepted": false, "score": 3, "last_activity_date": 1450243886, "last_edit_date": 1450243886, "creation_date": 1450243175, "answer_id": 34304441, "question_id": 34304290, "link": "https://stackoverflow.com/questions/34304290/o-rdwr-undeclared-for-terminal/34304441#34304441", "title": "O_RDWR undeclared for terminal", "body": "<p><a href=\"http://linux.die.net/man/2/open\" rel=\"nofollow\"><code>man 2 open</code></a> will show the header files you need for <code>open()</code>. Namely,</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n</code></pre>\n\n<p>Next I suggest looking at <a href=\"http://linux.die.net/man/3/termios\" rel=\"nofollow\"><code>man 3 termios</code></a>.</p>\n"}], "owner": {"reputation": 563, "user_id": 2541267, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/GKg1g.jpg?s=128&g=1", "display_name": "madD7", "link": "https://stackoverflow.com/users/2541267/madd7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6198, "favorite_count": 0, "accepted_answer_id": 34304432, "answer_count": 3, "score": 0, "last_activity_date": 1450243886, "creation_date": 1450242324, "question_id": 34304290, "link": "https://stackoverflow.com/questions/34304290/o-rdwr-undeclared-for-terminal", "title": "O_RDWR undeclared for terminal", "body": "<p>I am using ubuntu 14.0.4LTS which is updated and upgraded.</p>\n\n<p>I have written a code for serial communication. </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;string.h&gt;\n #include &lt;unistd.h&gt;\n #include &lt;time.h&gt;\n #include &lt;errno.h&gt;\n #include &lt;sys/stat.h&gt;\n #include &lt;termios.h&gt;\n</code></pre>\n\n<p>above files have been included in the code.</p>\n\n<p>When i compile the code, it returns an error \"O_RDWR undeclared\" \nIf i include fcntl.h, then compiler return error \"incompatible type of argument 1\", which means that the open function wants const char* type of argument.</p>\n\n<pre><code>struct termios TtyN;\nopen( TtyN, O_RDWR );\n</code></pre>\n\n<p>typecasting would not be appropriate. what is the correct solution?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1450241600, "post_id": 34304096, "comment_id": 56350342, "body": "Floating point numbers are not always exact.  In your case, <code>x</code> (as <code>float</code>) is not exactly equal to <code>1.1</code> (as <code>double</code>) due to lower precision and floating point types that don&#39;t use base 10 internally."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1450241641, "post_id": 34304096, "comment_id": 56350357, "body": "The code <i>does</i> provide an equality condition.. reconsider the [real] question."}, {"owner": {"reputation": 1840, "user_id": 2952011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/16d6c7bf2e0842791df8ec9b05758bfb?s=128&d=identicon&r=PG&f=1", "display_name": "Mukit09", "link": "https://stackoverflow.com/users/2952011/mukit09"}, "edited": false, "score": 0, "creation_date": 1450241718, "post_id": 34304096, "comment_id": 56350377, "body": "use this... while(fabs(x-1.1)&lt;0.000001)"}], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 3778070, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25046f88b49cca08a3b53b31dc1558fe?s=128&d=identicon&r=PG&f=1", "display_name": "NadavL", "link": "https://stackoverflow.com/users/3778070/nadavl"}, "is_accepted": false, "score": 0, "last_activity_date": 1450241511, "creation_date": 1450241511, "answer_id": 34304155, "question_id": 34304096, "link": "https://stackoverflow.com/questions/34304096/can-i-not-provide-an-equality-condition-in-a-while-loop/34304155#34304155", "title": "Can I not provide an equality condition in a while loop?", "body": "<p>You need to read up on floating point precision.</p>\n\n<p>TL;DR is - x-1.1 is not really round 0.</p>\n\n<p>for example, in my debugger, x equals to 1.10000002 - this is due to the nature of the floating point precision.</p>\n\n<p>Relevant read:</p>\n\n<p><a href=\"http://floating-point-gui.de/\" rel=\"nofollow\">http://floating-point-gui.de/</a></p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2193256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09387486a59567e424221fdb9af12a77?s=128&d=identicon&r=PG", "display_name": "seamaner", "link": "https://stackoverflow.com/users/2193256/seamaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1450241937, "last_edit_date": 1450241937, "creation_date": 1450241536, "answer_id": 34304160, "question_id": 34304096, "link": "https://stackoverflow.com/questions/34304096/can-i-not-provide-an-equality-condition-in-a-while-loop/34304160#34304160", "title": "Can I not provide an equality condition in a while loop?", "body": "<p>Compare float like -0.000001 &lt; x - 1.1 &amp;&amp; x - 1.1 &lt; 0.00001</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5684940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4e5700824768ed9d3b7e84b34499bb1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav", "link": "https://stackoverflow.com/users/5684940/pranav"}, "reply_to_user": {"reputation": 15290, "user_id": 3393505, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/76db1f36ad7e50bb7dea1e04ea3e03ad?s=128&d=identicon&r=PG&f=1", "display_name": "Siyual", "link": "https://stackoverflow.com/users/3393505/siyual"}, "edited": false, "score": 0, "creation_date": 1450338481, "post_id": 34304173, "comment_id": 56399835, "body": "Thank you very much @Siyual. Explained it nicely!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1450283298, "last_edit_date": 1592644375, "creation_date": 1450241625, "answer_id": 34304173, "question_id": 34304096, "link": "https://stackoverflow.com/questions/34304096/can-i-not-provide-an-equality-condition-in-a-while-loop/34304173#34304173", "title": "Can I not provide an equality condition in a while loop?", "body": "<p>When you are dealing with floating point operations, you don't get the results as you would expect.</p>\n<p>What you are seeing is:</p>\n<ol>\n<li><p><code>1.1</code> is represented as a <code>float</code> in <code>x</code>.</p>\n</li>\n<li><p>In the <code>while</code> statement, <code>1.1</code> is of type <code>double</code>, not <code>float</code>. Hence, <code>x</code> is promoted to a <code>double</code> before the subtraction and comparison is made.</p>\n<p>You lose precision in these steps. Hence <code>x-1.1</code> does not evaluate to <code>0.0</code>.</p>\n</li>\n</ol>\n<p>You can see expected results if you use appropriate floating point constants.</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test1()\n{\n   printf(&quot;In test1...\\n&quot;);\n   float x=1.1;\n\n   // Use a literal of type float, not double.\n   if (x-1.1f == 0)\n   {\n      printf(&quot;true\\n&quot;);\n   }\n   else\n   {\n      printf(&quot;false\\n&quot;);\n   }\n}\n\nvoid test2()\n{\n   printf(&quot;In test1...\\n&quot;);\n\n   // Use a variable of type double, not float.\n   double x=1.1;\n   if (x-1.1 == 0)\n   {\n      printf(&quot;true\\n&quot;);\n   }\n   else\n   {\n      printf(&quot;false\\n&quot;);\n   }\n}\n\nint main()\n{\n   test1();\n   test2();\n   return 0;\n}\n</code></pre>\n<p>Output:</p>\n\n<pre><code>In test1...\ntrue\nIn test2...\ntrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 2, "last_activity_date": 1450241734, "creation_date": 1450241734, "answer_id": 34304195, "question_id": 34304096, "link": "https://stackoverflow.com/questions/34304096/can-i-not-provide-an-equality-condition-in-a-while-loop/34304195#34304195", "title": "Can I not provide an equality condition in a while loop?", "body": "<p>This is because <code>x</code> is a single-precision floating-point number, but you subtract the constant <code>1.1</code> from it, which is double-precision.  So your single-precision <code>1.1</code> is converted to double-precision, and the subtraction is performed, but the result is non-zero (since <code>1.1</code> cannot be exactly represented, but the double-precision value is closer than the single-precision value).  Try the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float x = 1.1;\n    double y = 1.1;\n\n    printf(\"%.20g\\n\", x - 1.1);\n    printf(\"%.20g\\n\", y - 1.1);\n\n    return 0;\n}\n</code></pre>\n\n<p>On my computer, the result is:</p>\n\n<pre><code>2.384185782133840803e-08\n0\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5684940, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4e5700824768ed9d3b7e84b34499bb1d?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav", "link": "https://stackoverflow.com/users/5684940/pranav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 34304173, "answer_count": 4, "score": -2, "last_activity_date": 1450283298, "creation_date": 1450241084, "question_id": 34304096, "link": "https://stackoverflow.com/questions/34304096/can-i-not-provide-an-equality-condition-in-a-while-loop", "title": "Can I not provide an equality condition in a while loop?", "body": "<p>I wrote this code and only 'Hello' got printed.</p>\n\n<pre><code>float x=1.1;\nprintf(\"Hello\\n\");\nwhile(x-1.1==0)\n{\n   printf(\"%f\\n\",x);\n   x=x-1;\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "conditional-statements", "obfuscation"], "comments": [{"owner": {"reputation": 51826, "user_id": 1223693, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/viu9Y.jpg?s=128&g=1", "display_name": "tckmn", "link": "https://stackoverflow.com/users/1223693/tckmn"}, "edited": false, "score": 3, "creation_date": 1450239302, "post_id": 34303802, "comment_id": 56349691, "body": "<code>i[foo]</code> == <code>*(i + foo)</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450239442, "post_id": 34303802, "comment_id": 56349722, "body": "<code>X</code> as condition statement is the same as <code>(X) != 0</code>"}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "edited": false, "score": 0, "creation_date": 1450239491, "post_id": 34303802, "comment_id": 56349729, "body": "i[&quot;]&lt;i;++i){--i;}&quot;] == &quot;]&lt;i;++i){--i;}&quot;[i]. i==0."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "edited": false, "score": 0, "creation_date": 1450248297, "post_id": 34303802, "comment_id": 56352735, "body": "Related: <a href=\"http://stackoverflow.com/questions/381542/with-c-arrays-why-is-it-the-case-that-a5-5a\" title=\"with c arrays why is it the case that a5 5a\">stackoverflow.com/questions/381542/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "edited": false, "score": 0, "creation_date": 1450239685, "post_id": 34303852, "comment_id": 56349787, "body": "And &quot;]&lt;i;++i){--i;}&quot;[i] == &#39;]&#39;"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "edited": false, "score": 0, "creation_date": 1450239778, "post_id": 34303852, "comment_id": 56349815, "body": "@RichardPennington: Well, initially. <code>i</code> is changing value during execution. So the first check, when <code>i</code> is <code>0</code>, sure, it&#39;s <code>]</code>, but later checks <code>i</code> is incrementing. Doesn&#39;t really matter what it happens to produce; all that matters is zero or non-zero, and all but the <code>NUL</code> terminator of a string is non-zero."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 6, "last_activity_date": 1450239487, "creation_date": 1450239487, "answer_id": 34303852, "question_id": 34303802, "link": "https://stackoverflow.com/questions/34303802/how-does-istring-work-as-a-condition-statement/34303852#34303852", "title": "How does i[&quot;string&quot;] work as a condition statement?", "body": "<p>C indexing is kinda funky. <code>a[b]</code> is roughly equivalent to <code>*(a+b)</code> (with <code>a</code> degrading to a pointer to the first element). But addition is commutative, so <code>a[b]</code> and <code>b[a]</code> do the same thing. Thus:</p>\n\n<pre><code>i[\"]&lt;i;++i){--i;}\"]\n</code></pre>\n\n<p>is really just:</p>\n\n<pre><code>\"]&lt;i;++i){--i;}\"[i]\n</code></pre>\n\n<p>but the reordering obfuscates by making it look like a normalish for loop if you miss the quotes. Since all values in the string are non-zero (and therefore \"true\") except for the <code>NUL</code> terminator, the loop would end when <code>i</code> was equal to the length of that string literal.</p>\n"}], "owner": {"reputation": 4070, "user_id": 2006333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/140d350dfc5e8e5d587c220dc153c04a?s=128&d=identicon&r=PG&f=1", "display_name": "Keshava GN", "link": "https://stackoverflow.com/users/2006333/keshava-gn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34303852, "answer_count": 1, "score": 3, "last_activity_date": 1450239487, "creation_date": 1450239152, "last_edit_date": 1450239455, "question_id": 34303802, "link": "https://stackoverflow.com/questions/34303802/how-does-istring-work-as-a-condition-statement", "title": "How does i[&quot;string&quot;] work as a condition statement?", "body": "<p>Check <a href=\"http://www.ioccc.org/1984/anonymous.c\" rel=\"nofollow\">this obfuscated code</a> in IOCCC. I'm trying to understand this.</p>\n\n<pre><code>int i;main(){for(;i[\"]&lt;i;++i){--i;}\"];read('-'-'-',i+++\"hell\\\no, world!\\n\",'/'/'/'));}read(j,i,p){write(j/p+p,i---j,i/i);}\n</code></pre>\n\n<p>Means:</p>\n\n<pre><code>int i;\nmain()\n{\n    for(;i[\"]&lt;i;++i){--i;}\"];read('-'-'-',i+++\"hello, world!\\n\",'/'/'/'));\n}\nread(j,i,p)\n{\n    write(j/p+p,i---j,i/i);\n}\n</code></pre>\n\n<p>Please explain me this : <code>i[\"]&lt;i;++i){--i;}\"]</code> </p>\n\n<p>How this works as a condition statement here?</p>\n"}, {"tags": ["c", "time", "posix"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1450237522, "post_id": 34303531, "comment_id": 56349251, "body": "@user3159253 It could return EFAULT in the case of <code>time((time_t*)junk)</code>, for some junk value. Although at the point of being able to return EFAULT, I&#39;d already consider the programs behavior forfeit."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1450237660, "post_id": 34303531, "comment_id": 56349301, "body": "For <i>some</i> junk. The question seems moot, but .. meh, let the lawyers feed."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1450237760, "post_id": 34303531, "comment_id": 56349338, "body": "@user3159253 Nothing to do with being well known (although that made it a very practical choice among other implications); it could have been any value (**), had it been codified into the function contract."}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1450237881, "post_id": 34303531, "comment_id": 56349371, "body": "For a given platform? No, for a given platform NULL pointer is determined completely. But sure, it could be != 0"}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 1, "creation_date": 1450239429, "post_id": 34303531, "comment_id": 56349720, "body": "Well, there&#39;s no EFAULT at all.   Neither in <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/unix/sysv/linux/time.c;h=a20efb43639d8ad81981a778e9f35a016265d555;hb=HEAD\" rel=\"nofollow noreferrer\">Linux-specific time() implementation in GLIBC</a>  nor in FreeBSD <a href=\"https://github.com/freebsd/freebsd/blob/master/lib/libc/sys/gettimeofday.c\" rel=\"nofollow noreferrer\">gettimeofday</a>"}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1450254154, "post_id": 34303531, "comment_id": 56355634, "body": "On some commercial *NIX <code>time(NULL)</code> was crashing. Don&#39;t remember the details though. On the relevant project, the style was always <code>time(&amp;timvar);</code> without any further error checking. On all modern <i>relevant</i> *NIX-y systems <code>time(NULL)</code> doesn&#39;t fail. (What&#39;s more, on Linux and BSD the syscall is optimized such, that it can&#39;t even detect errors.) YMMV"}, {"owner": {"reputation": 1106, "user_id": 3012938, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3bef4d31f4062f7103af7e0614d182c5?s=128&d=identicon&r=PG", "display_name": "Patrick Mutwiri", "link": "https://stackoverflow.com/users/3012938/patrick-mutwiri"}, "edited": false, "score": 0, "creation_date": 1450271691, "post_id": 34303531, "comment_id": 56367608, "body": "depends on what&#39;s being tested. And the function after the outcome"}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1450244789, "post_id": 34304055, "comment_id": 56351386, "body": "That&#39;s fine for posix, but the specifics documented are not standard C."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 4, "creation_date": 1450244975, "post_id": 34304055, "comment_id": 56351442, "body": "@Peter: The question is tagged posix."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1450248211, "post_id": 34304055, "comment_id": 56352696, "body": "And C, R.  It is applicable to one but not the other.  Hence my comment."}, {"owner": {"reputation": 42840, "user_id": 17875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9589a0b8efc6bb869bedfa51e7d28f16?s=128&d=identicon&r=PG", "display_name": "Eevee", "link": "https://stackoverflow.com/users/17875/eevee"}, "edited": false, "score": 2, "creation_date": 1450266562, "post_id": 34304055, "comment_id": 56363979, "body": "&quot;no sooner&quot;...  if you assume the machine&#39;s clock is correct  ;)"}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 22, "last_activity_date": 1450240873, "creation_date": 1450240873, "answer_id": 34304055, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure/34304055#34304055", "title": "Can time(NULL) ever return failure?", "body": "<p>Yes. <code>time</code> has a documented <em>may fail</em> case:</p>\n\n<blockquote>\n  <p>The time() function may fail if:</p>\n  \n  <p>[EOVERFLOW] The number of seconds since the Epoch will not fit in an object of type time_t.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/time.html\">http://pubs.opengroup.org/onlinepubs/9699919799/functions/time.html</a></p>\n\n<p>Expect this to happen in practice in about 22 years, no sooner, and not on 64-bit systems or 32-bit ones that utilize a 64-bit <code>time_t</code>.</p>\n\n<p>Also, the presence of any <em>shall fail</em> or <em>may fail</em> cases also allows for implementation-defined errors, though their existence would be a serious quality-of-implementation flaw.</p>\n\n<p><code>EFAULT</code> is a non-issue/non-existent because it only happens when your program has undefined behavior.</p>\n\n<p>So despite all this, in the real world, <code>time</code> is not actually going to fail.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1450241803, "creation_date": 1450241803, "answer_id": 34304208, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure/34304208#34304208", "title": "Can time(NULL) ever return failure?", "body": "<p>(Not consider POSIX degraded mode functionality)</p>\n\n<p>If the underlying real-time clock sub-system had a hardware fault like loss of clock integrity (battery) when the unit was off on an independent system, the return value of <code>time()</code> could certainly be <code>(time_t) -1</code>.  In that case, it make no difference what the passed in <code>time_t*</code> was.</p>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 4, "last_activity_date": 1450243146, "creation_date": 1450243146, "answer_id": 34304433, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure/34304433#34304433", "title": "Can time(NULL) ever return failure?", "body": "<p>I've checked on RHEL, SLES and UBTU; the <a href=\"http://linux.die.net/man/2/time\" rel=\"nofollow\"><em>man 2</em> page</a> yields the same (relevant) thing:</p>\n\n<blockquote>\n<pre><code>  time() returns the time since the Epoch (00:00:00 UTC, January 1, 1970), measured in seconds.\n</code></pre>\n</blockquote>\n\n<pre><code>   If t is non-NULL, the return value is also stored in the memory pointed to by t.\n</code></pre>\n\n<p>Anyway, going back to the original questions</p>\n\n<ul>\n<li><p><em>Q0</em>: <em>Can the <code>time_t time(time_t *t)</code> function ever return failure if the argument passed is always NULL?</em></p>\n\n<ul>\n<li><em>A/R0</em>: <strong>Yes</strong>, if some very special events occurred (memory full, and so on, ...)</li>\n</ul></li>\n<li><p><em>Q1</em>: <em>If the call is time(NULL), do we still need to check for the return value?</em></p>\n\n<ul>\n<li><em>A/R1</em>: The actual answer is \"NO\", you don't have to; the fact that the func could return something relevant, is a different story. After all, why calling a func ,if there's no need of doing so?</li>\n</ul></li>\n<li><p><em>Q2</em>: <em>The only documented error code is <code>EFAULT</code>, which relates to the pointer being invalid.</em></p>\n\n<ul>\n<li>You don't have anything to do with the invalid codes; as you said you're passing <code>NULL</code>, so there's no problem.</li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 126, "user_id": 5687703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6971fef14ccac58e9133c314d7340c04?s=128&d=identicon&r=PG&f=1", "display_name": "richardb", "link": "https://stackoverflow.com/users/5687703/richardb"}, "edited": false, "score": 0, "creation_date": 1450285867, "post_id": 34304774, "comment_id": 56377786, "body": "Long ago, on VMS, the system clock was in local time. Until much later, when the OS gained timezone support, time() always returned -1."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 4, "last_activity_date": 1450248293, "last_edit_date": 1450248293, "creation_date": 1450244793, "answer_id": 34304774, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure/34304774#34304774", "title": "Can time(NULL) ever return failure?", "body": "<p>In the C standard, <code>time()</code> can return <code>(time_t)(-1)</code> if \"the calendar time is not available\".  In the 1999 standard, for example, that is in Section 7.23.2.4, para 3.</p>\n\n<p>Although that wording is less than specific, I would suggest it represents an error condition.   Presumably an implementation can return <code>(time_t)(-1)</code> if it can't access the system clock, can't sensibly interpret the data it gets, etc.</p>\n\n<p>R's answer describes what is the case for the posix spec.</p>\n"}, {"comments": [{"owner": {"reputation": 3106, "user_id": 1102380, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b9ad1342298e967b5b98801456eef169?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1102380/thomas"}, "edited": false, "score": 5, "creation_date": 1450251676, "post_id": 34304906, "comment_id": 56354371, "body": "I guess <code>(time_t)(-1)</code> is in some sense a &quot;best approximation&quot; if time information cannot be retrieved... although it is debatable how useful this approximation is in practice if not treated as an error condition."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 5, "last_activity_date": 1450245530, "creation_date": 1450245530, "answer_id": 34304906, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure/34304906#34304906", "title": "Can time(NULL) ever return failure?", "body": "<blockquote>\n  <p>Can time(NULL) ever return failure?  </p>\n</blockquote>\n\n<p>No. C standard says that  </p>\n\n<p><strong>C11: 7.27.2.4:</strong></p>\n\n<blockquote>\n  <p>The time function returns the implementation\u2019s best approximation to the current calendar time. The value <code>(time_t)(-1)</code> is returned if the calendar time is not available.</p>\n</blockquote>\n"}], "owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1781, "favorite_count": 0, "accepted_answer_id": 34304055, "answer_count": 5, "score": 21, "last_activity_date": 1450258272, "creation_date": 1450236959, "last_edit_date": 1450258272, "question_id": 34303531, "link": "https://stackoverflow.com/questions/34303531/can-timenull-ever-return-failure", "title": "Can time(NULL) ever return failure?", "body": "<p>Can the <code>time_t time(time_t *t)</code> function ever return failure if the argument passed is always NULL?</p>\n\n<p>If the call is <code>time(NULL)</code>, do we still need to check for the return value?</p>\n\n<p>The only documented error code is EFAULT, which relates to the pointer being invalid.</p>\n"}, {"tags": ["c++", "c", "lua", "coroutine", "setjmp"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450237462, "post_id": 34303507, "comment_id": 56349232, "body": "AFAIK, the whole continuation function thing was the <i>fix</i> for that problem. If you&#39;re using Lua 5.3 or 5.2, you don&#39;t have the problem."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450238908, "post_id": 34303507, "comment_id": 56349610, "body": "@immibis: No, you do still have the problem. It&#39;s just that you have a potential solution to it. But it&#39;s hardly automatic."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1450453321, "post_id": 34303507, "comment_id": 56459855, "body": "OK, you are now asking a completely new question. You were originally asking about what that post was talking about with jumping over the stack. Now you&#39;re asking about how Lua 5.2/3&#39;s work to resolve it. It&#39;s a fine question, but it&#39;s a <i>new question</i>, which should be asked with the &quot;Ask Question&quot; button."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1450469612, "post_id": 34303507, "comment_id": 56468821, "body": "@NicolBolas: So I see where you are coming from on this but hear me out. When a programmer asks a question about some issue like this usually they want to know &quot;what at a high level is the problem, what are some examples of how it can happen, what do I need to do when I have the problem, practically speaking&quot;. For instance on this site you can see questions like &quot;what is a dangling pointer&quot; and they will have very detailed answers with code examples. I was hoping for an answer like that for the coroutines. It took me a while to figure out exactly what questions I needed to ask along the way."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1450469748, "post_id": 34303507, "comment_id": 56468893, "body": "If you think I need to rewrite the whole thing to condense it that&#39;s reasonable. If you think that I should split it into two questions &quot;what is the issue about coroutines jumping over the stack&quot; and &quot;how do I fix the issue about coroutines jumping over the stack in some example code&quot;, I mean that&#39;s also reasonable. But I think it&#39;s potentially useful to have these two pieces of info in the same place. I mean usually in programming I want the high level and also the &quot;what does it mean practically speaking&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 1, "creation_date": 1450344903, "post_id": 34304244, "comment_id": 56403652, "body": "Two things: Lua 5.1 also raises an error when you &quot;attempt to yield across across metamethod/C-call boundary&quot;, and the current LuaJIT (2.0/2.1beta) does have a similar problem (though you <i>can</i> yield from within metamethods and for-loop iterators). Coco was used in LuaJIT 1.x."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1450396279, "post_id": 34304244, "comment_id": 56434431, "body": "@NicolBolas: This is minor but I think the lines &quot;top&quot; and &quot;bottom&quot; should be exchanged in your diagrams, no? So that &quot;top&quot; is next to &quot;yield point&quot;"}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1450396601, "post_id": 34304244, "comment_id": 56434534, "body": "@ChrisBeck: &quot;Yield point&quot; represents the place where the coroutine will return to. The stack grows from the bottom up."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450449915, "post_id": 34304244, "comment_id": 56457758, "body": "So is Lua then using a static jump buffer, or something?  C <code>setjmp()</code> allows you to maintain multiple jump targets simultaneously, and as far as I understand the problem, it seems like it could be resolved by Lua maintaining a separate jump buffer for each call from C into Lua.  I&#39;m furthermore thinking that that could fall out quite naturally from the C call stack."}, {"owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450450385, "post_id": 34304244, "comment_id": 56458051, "body": "@JohnBollinger: Lua could do that, but it wouldn&#39;t work correctly. Or at least, not correctly relative to what Lua wants. <code>coroutine.yield</code> is supposed to return to the code that issued the <code>resume</code> call. What you&#39;re suggesting would cause <code>yield</code> to return to the <code>resume</code> call <i>or</i> the most recent C function that called into Lua. That&#39;s just the wrong behavior."}], "tags": [], "owner": {"reputation": 374829, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 10, "last_activity_date": 1450360663, "last_edit_date": 1450360663, "creation_date": 1450242030, "answer_id": 34304244, "question_id": 34303507, "link": "https://stackoverflow.com/questions/34303507/lua-coroutines-setjmp-longjmp-clobbering/34304244#34304244", "title": "Lua coroutines -- setjmp longjmp clobbering?", "body": "<p>Think about what happens when a coroutine does a <code>yield</code>. It stops executing, and processing returns to whomever it was that called <code>resume</code> on that coroutine, correct?</p>\n\n<p>Well, let's say you have this code:</p>\n\n<pre><code>function top()\n    coroutine.yield()\nend\n\nfunction middle()\n    top()\nend\n\nfunction bottom()\n    middle()\nend\n\nlocal co = coroutine.create(bottom);\n\ncoroutine.resume(co);\n</code></pre>\n\n<p>At the moment of the call to <code>yield</code>, the Lua stack looks like this:</p>\n\n<pre><code>-- top\n-- middle\n-- bottom\n-- yield point\n</code></pre>\n\n<p>When you call <code>yield</code>, the Lua call stack that is part of the coroutine is preserved. When you do <code>resume</code>, the preserved call stack is executed again, starting where it left off before.</p>\n\n<p>OK, now let's say that <code>middle</code> was in fact not a Lua function. Instead, it was a C function, and that C function calls the Lua function <code>top</code>. So conceptually, your stack looks like this:</p>\n\n<pre><code>-- Lua - top\n-- C   - middle\n-- Lua - bottom\n-- Lua - yield point\n</code></pre>\n\n<p>Now, please note what I said before: this is what your stack looks like <em>conceptually</em>.</p>\n\n<p>Because your actual call stack looks <em>nothing like this.</em></p>\n\n<p>In reality, there are really two stacks. There is Lua's internal stack, defined by a <code>lua_State</code>. And there's C's stack. Lua's internal stack, at the time when <code>yield</code> is about to be called, looks something like this:</p>\n\n<pre><code>-- top\n-- Some C stuff\n-- bottom\n-- yield point\n</code></pre>\n\n<p>So what does the stack look like to C? Well, it looks like this:</p>\n\n<pre><code>-- arbitrary Lua interpreter stuff\n-- middle\n-- arbitrary Lua interpreter stuff\n-- setjmp\n</code></pre>\n\n<p>And that right there is the problem. See, when Lua does a <code>yield</code>, it's going to call <code>longjmp</code>. That function is based on the behavior of the C stack. Namely, it's going to return to where <code>setjmp</code> was.</p>\n\n<p>The Lua stack will be preserved because the Lua stack is <em>separate</em> from the C stack. But the C stack? Everything between the <code>longjmp</code> and <code>setjmp</code>?. Gone. Kaput. Lost <em>forever</em>.</p>\n\n<p>Now you may go, \"wait, doesn't the Lua stack know that it went into C and back into Lua\"? A bit. But the Lua stack is incapable of doing something that C is incapable of. And C is simply not capable of preserving a stack (well, not without special libraries). So while the Lua stack is vaguely aware that some kind of C process happened in the middle of its stack, it has no way to reconstitute what was there.</p>\n\n<p>So what happens if you resume this <code>yield</code>ed coroutine?</p>\n\n<p><a href=\"http://www.urbandictionary.com/define.php?term=nasal%20demons\" rel=\"noreferrer\">Nasal demons.</a> And nobody likes those. Fortunately, Lua 5.1 and above (at least) will error whenever you attempt to yield across C.</p>\n\n<p>Note that Lua 5.2+ <a href=\"http://www.lua.org/manual/5.2/manual.html#4.7\" rel=\"noreferrer\">does have ways of fixing this</a>. But it's not automatic; it requires explicit coding on your part.</p>\n\n<p>When Lua code that is in a coroutine calls your C code, and your C code calls Lua code that may yield, you can use <code>lua_callk</code> or <code>lua_pcallk</code> to call the possibly-yielding Lua functions. These calling functions take an extra parameter: a \"continuation\" function.</p>\n\n<p>If the Lua code you call does yield, then the <code>lua_*callk</code> function won't ever actually return (since your C stack will have been destroyed). Instead, it will call the continuation function you provided in your <code>lua_*callk</code> function. As you can guess by the name, the continuation function's job is to continue where your previous function left off.</p>\n\n<p>Now, Lua does preserve the stack for your continuation function, so it gets the stack in the same state that your original C function was in. Well, except that the function+arguments that you called (with <code>lua_*callk</code>) are removed, and the return values from that function are pushed onto your stack. Outside of that, the stack is all the same.</p>\n\n<p>There is also <code>lua_yieldk</code>. This allows your C function to yield back to Lua, such that when the coroutine is resumed, it calls the provided continuation function.</p>\n\n<p>Note that <a href=\"http://coco.luajit.org/index.html\" rel=\"noreferrer\">Coco</a> gives Lua 5.1 the ability to resolve this problem. It is capable (though OS/assembly/etc magic) of <em>preserving</em> the C stack during a yield operation. LuaJIT versions before 2.0 also provided this feature.</p>\n\n<hr>\n\n<p>C++ note</p>\n\n<p>You marked your question with the C++ tag, so I'll assume that's involved here.</p>\n\n<p>Among the many differences between C and C++ is the fact that C++ is <em>far</em> more dependent on the nature of its callstack than Lua. In C, if you discard a stack, you might lose resources that weren't cleaned up. C++ however is required to call destructors of functions declared on the stack at some point. The standard does not allow you to just throw them away.</p>\n\n<p>So continuations only work in C++ if there is <strong><em>nothing</em></strong> on the stack which needs to have a destructor call. Or more specifically, only types that are trivially destructible can be sitting on the stack if you call any of the continuation function Lua APIs.</p>\n\n<p>Of course, Coco handles C++ just fine, since it's actually preserving the C++ stack.</p>\n"}, {"comments": [{"owner": {"reputation": 3821, "user_id": 3677376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345ca06e9690f13ec2cde085a7ef6e57?s=128&d=identicon&r=PG&f=1", "display_name": "siffiejoe", "link": "https://stackoverflow.com/users/3677376/siffiejoe"}, "edited": false, "score": 2, "creation_date": 1450426536, "post_id": 34350275, "comment_id": 56443867, "body": "The <code>return lua_yieldk(...)</code> issue is a remnant of Lua 5.1 which didn&#39;t use <code>longjmp</code> for yielding, but a special return value instead. Now (with Lua 5.2+) it just acts as a reminder that the execution of the current C function ends when <code>lua_yieldk</code> is called."}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 1, "last_activity_date": 1450716495, "last_edit_date": 1450716495, "creation_date": 1450422985, "answer_id": 34350275, "question_id": 34303507, "link": "https://stackoverflow.com/questions/34303507/lua-coroutines-setjmp-longjmp-clobbering/34350275#34350275", "title": "Lua coroutines -- setjmp longjmp clobbering?", "body": "<p>Posting this as an answer which complements @Nicol Bolas' answer, and so that\nI can have space to write down what it took for me to understand the original\nquestion, and the answers to the secondary questions / a code listing.</p>\n\n<p>If you read Nicol Bolas' answer but still have questions like I did, here are\nsome additional hints:</p>\n\n<ul>\n<li>The <em>three</em> layers on the call stack, Lua, C, Lua, are essential to the problem.\nIf you only have two layers, Lua and C, you don't get the problem.</li>\n<li>In imagining how the coroutine call is supposed to work -- the lua stack looks\na certain way, the C stack looks a certain way, the call yields (longjmp) and\nlater is resumed... the problem does not happen <em>immediately</em> when it is\nresumed.<br>\n<em>The problem happens when the resumed function later tries to return, to your\nC function.</em><br>\nBecause, for the coroutine semantics to work out, it is supposed to return\ninto a C function call, but the stack frames for that are gone, and cannot be\nrestored.</li>\n<li>The workaround for <em>this</em> lack of ability to restore those stack frames is to\nuse <code>lua_callk</code>, <code>lua_pcallk</code>, which allow you to provide a substitute\nfunction which can be called in place of that C function whose frames were\nwiped out.</li>\n<li>The issue about <code>return lua_yieldk(...)</code> appears to have nothing to do with\nany of this. From skimming the implementation of <code>lua_yieldk</code> it appears that\nit does indeed always <code>longjmp</code>, and it may only return in some obscure case\ninvolving lua debugging hooks (?).</li>\n<li>Lua internally (at current version) keeps track of when yield should not be\nallowed, by keeping a counter variable <code>nny</code> (number non-yieldable) associated\nto the lua state, and when you call <code>lua_call</code> or <code>lua_pcall</code> from a C api\nfunction (a <code>lua_CFunction</code> which you earlier pushed to lua), <code>nny</code> is\nincremented, and is only decremented when that call or pcall returns. When\n<code>nny</code> is nonzero, it is not safe to yield, and you get this <code>yield across\nC-api boundary</code> error if you try to yield anyways.</li>\n</ul>\n\n<p>Here is a simple listing that produces the problem and reports the errors,\nif you are like me and like to have a concrete code examples. It demonstrates\nsome of the difference in using <code>lua_call</code>, <code>lua_pcall</code>, and <code>lua_pcallk</code>\nwithin a function called by a coroutine.</p>\n\n<pre><code>extern \"C\" {\n#include &lt;lauxlib.h&gt;\n#include &lt;lua.h&gt;\n}\n\n#include &lt;cassert&gt;\n#include &lt;iostream&gt;\n\n//#define USE_PCALL\n//#define USE_PCALLK\n\n#define CODE(C) \\\ncase C: { \\\n  std::cout &lt;&lt; \"When returning to \" &lt;&lt; where &lt;&lt; \" got code '\" #C \"'\" &lt;&lt; std::endl; \\\n  break; \\\n}\n\n#define ERRCODE(C) \\\ncase C: { \\\n  std::cout &lt;&lt; \"When returning to \" &lt;&lt; where &lt;&lt; \" got code '\" #C \"': \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl; \\\n  break; \\\n}\n\nint report_resume_code(int code, const char * where, lua_State * L) {\n  switch (code) {\n    CODE(LUA_OK)\n    CODE(LUA_YIELD)\n    ERRCODE(LUA_ERRRUN)\n    ERRCODE(LUA_ERRMEM)\n    ERRCODE(LUA_ERRERR)\n    default:\n      std::cout &lt;&lt; \"An unknown error code in \" &lt;&lt; where &lt;&lt; \": \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n  }\n  return code;\n}\n\nint report_pcall_code(int code, const char * where, lua_State * L) {\n  switch(code) {\n    CODE(LUA_OK)\n    ERRCODE(LUA_ERRRUN)\n    ERRCODE(LUA_ERRMEM)\n    ERRCODE(LUA_ERRERR)\n    default:\n      std::cout &lt;&lt; \"An unknown error code in \" &lt;&lt; where &lt;&lt; \": \" &lt;&lt; lua_tostring(L, -1) &lt;&lt; std::endl;\n  }\n  return code;\n}\n\nint trivial(lua_State *, int, lua_KContext) {\n  std::cout &lt;&lt; \"Called continuation function\" &lt;&lt; std::endl;\n  return 0;\n}\n\nint f(lua_State * L) {\n  std::cout &lt;&lt; \"Called function 'f', yielding\" &lt;&lt; std::endl;\n  return lua_yield(L, 0);\n}\n\nint g(lua_State * L) {\n  std::cout &lt;&lt; \"Called function 'g'\" &lt;&lt; std::endl;\n\n  lua_getglobal(L, \"f\");\n#ifdef USE_PCALL\n  std::cout  &lt;&lt; \"pcall...\" &lt;&lt; std::endl;\n  report_pcall_code(lua_pcall(L, 0, 0, 0), __func__, L);\n  // ^ yield across pcall!\n  // If we yield, there is no way ever to return normally from this pcall,\n  // so it is an error.\n#elif defined(USE_PCALLK)\n  std::cout  &lt;&lt; \"pcallk...\" &lt;&lt; std::endl;\n  report_pcall_code(lua_pcallk(L, 0, 0, 0, 0, trivial), __func__, L);\n#else\n  std::cout &lt;&lt; \"call...\" &lt;&lt; std::endl;\n  lua_call(L, 0, 0);\n  // ^ yield across call!\n  // This results in an error being reported in lua_resume, rather than at\n  // the pcall\n#endif\n  return 0;\n}\n\nint main () {\n  std::cout &lt;&lt; \"Starting:\" &lt;&lt; std::endl;\n\n  lua_State * L = luaL_newstate();\n\n  // init\n  {\n    lua_pushcfunction(L, f);\n    lua_setglobal(L, \"f\");\n\n    lua_pushcfunction(L, g);\n    lua_setglobal(L, \"g\");\n  }\n\n  assert(lua_gettop(L) == 0);\n\n  // Some action\n  {\n    lua_State * T = lua_newthread(L);\n    lua_getglobal(T, \"g\");\n\n    while (LUA_YIELD == report_resume_code(lua_resume(T, L, 0), __func__, T)) {}\n  }\n\n  lua_close(L); \n\n  std::cout &lt;&lt; \"Bye! :-)\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<p><code>call</code></p>\n\n<pre><code>Starting:\nCalled function 'g'\ncall...\nCalled function 'f', yielding\nWhen returning to main got code 'LUA_ERRRUN': attempt to yield across a C-call boundary\nBye! :-)\n</code></pre>\n\n<p><code>pcall</code></p>\n\n<pre><code>Starting:\nCalled function 'g'\npcall...\nCalled function 'f', yielding\nWhen returning to g got code 'LUA_ERRRUN': attempt to yield across a C-call boundary\nWhen returning to main got code 'LUA_OK'\nBye! :-)\n</code></pre>\n\n<p><code>pcallk</code></p>\n\n<pre><code>Starting:\nCalled function 'g'\npcallk...\nCalled function 'f', yielding\nWhen returning to main got code 'LUA_YIELD'\nCalled continuation function\nWhen returning to main got code 'LUA_OK'\nBye! :-)\n</code></pre>\n"}], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 0, "accepted_answer_id": 34304244, "answer_count": 2, "score": 9, "last_activity_date": 1450716495, "creation_date": 1450236809, "last_edit_date": 1450302790, "question_id": 34303507, "link": "https://stackoverflow.com/questions/34303507/lua-coroutines-setjmp-longjmp-clobbering", "title": "Lua coroutines -- setjmp longjmp clobbering?", "body": "<p>In a <a href=\"http://spin.atomicobject.com/2013/07/01/lua-coroutines/\">blog post</a> from not too long ago, Scott Vokes describes a technical problem associated to lua's implementation of coroutines using the C functions <code>setjmp</code> and <code>longjmp</code>: </p>\n\n<blockquote>\n  <p>The main limitation of Lua coroutines is that, since they are implemented with setjmp(3) and longjmp(3), you cannot use them to call from Lua into C code that calls back into Lua that calls back into C, because the nested longjmp will clobber the C function\u2019s stack frames. (This is detected at runtime, rather than failing silently.)</p>\n  \n  <p>I haven\u2019t found this to be a problem in practice, and I\u2019m not aware of any way to fix it without damaging Lua\u2019s portability, one of my favorite things about Lua \u2014 it will run on literally anything with an ANSI C compiler and a modest amount of space. Using Lua means I can travel light. :)</p>\n</blockquote>\n\n<p>I have used coroutines a fair amount and I thought I understood broadly what was going on and what <code>setjmp</code> and <code>longjmp</code> do, however I read this at some point and realized that I didn't really understand it. To try to figure it out, I tried to make a program that I thought should cause a problem based on the description, and instead it seems to work fine.</p>\n\n<p>However there are a few other places that I've seen people seem to allege that there are problems:</p>\n\n<ul>\n<li><a href=\"http://coco.luajit.org/\">http://coco.luajit.org/</a></li>\n<li><a href=\"http://lua-users.org/lists/lua-l/2005-03/msg00179.html\">http://lua-users.org/lists/lua-l/2005-03/msg00179.html</a></li>\n</ul>\n\n<p>The question is:  </p>\n\n<ul>\n<li>Under what circumstances do lua coroutines fail to work because of C function stack frames getting clobbered?</li>\n<li>What exactly is the result? Does \"detected at runtime\" mean, lua panic? Or something else?</li>\n<li>Does this still affect the most recent versions of lua (5.3) or is this actually a 5.1 issue or something?</li>\n</ul>\n\n<p>Here was the code which I produced. In my test, it is linked with lua 5.3.1, compiled as C code, and the test itself is compiled itself as C++ code at C++11 standard.</p>\n\n<pre><code>extern \"C\" {\n#include &lt;lauxlib.h&gt;\n#include &lt;lua.h&gt;\n}\n\n#include &lt;cassert&gt;\n#include &lt;iostream&gt;\n\n#define CODE(C) \\\ncase C: { \\\n  std::cout &lt;&lt; \"When returning to \" &lt;&lt; where &lt;&lt; \" got code '\" #C \"'\" &lt;&lt; std::endl; \\\n  break; \\\n}\n\nvoid handle_resume_code(int code, const char * where) {\n  switch (code) {\n    CODE(LUA_OK)\n    CODE(LUA_YIELD)\n    CODE(LUA_ERRRUN)\n    CODE(LUA_ERRMEM)\n    CODE(LUA_ERRERR)\n    default:\n      std::cout &lt;&lt; \"An unknown error code in \" &lt;&lt; where &lt;&lt; std::endl;\n  }\n}\n\nint trivial(lua_State *, int, lua_KContext) {\n  std::cout &lt;&lt; \"Called continuation function\" &lt;&lt; std::endl;\n  return 0;\n}\n\nint f(lua_State * L) {\n  std::cout &lt;&lt; \"Called function 'f'\" &lt;&lt; std::endl;\n  return 0;\n}\n\nint g(lua_State * L) {\n  std::cout &lt;&lt; \"Called function 'g'\" &lt;&lt; std::endl;\n\n  lua_State * T = lua_newthread(L);\n  lua_getglobal(T, \"f\");\n\n  handle_resume_code(lua_resume(T, L, 0), __func__);\n  return lua_yieldk(L, 0, 0, trivial);\n}\n\nint h(lua_State * L) {\n  std::cout &lt;&lt; \"Called function 'h'\" &lt;&lt; std::endl;\n\n  lua_State * T = lua_newthread(L);\n  lua_getglobal(T, \"g\");\n\n  handle_resume_code(lua_resume(T, L, 0), __func__);\n  return lua_yieldk(L, 0, 0, trivial);\n}\n\nint main () {\n  std::cout &lt;&lt; \"Starting:\" &lt;&lt; std::endl;\n\n  lua_State * L = luaL_newstate();\n\n  // init\n  {\n    lua_pushcfunction(L, f);\n    lua_setglobal(L, \"f\");\n\n    lua_pushcfunction(L, g);\n    lua_setglobal(L, \"g\");\n\n    lua_pushcfunction(L, h);\n    lua_setglobal(L, \"h\");\n  }\n\n  assert(lua_gettop(L) == 0);\n\n  // Some action\n  {\n    lua_State * T = lua_newthread(L);\n    lua_getglobal(T, \"h\");\n\n    handle_resume_code(lua_resume(T, nullptr, 0), __func__);\n  }\n\n  lua_close(L); \n\n  std::cout &lt;&lt; \"Bye! :-)\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output I get is:</p>\n\n<pre><code>Starting:\nCalled function 'h'\nCalled function 'g'\nCalled function 'f'\nWhen returning to g got code 'LUA_OK'\nWhen returning to h got code 'LUA_YIELD'\nWhen returning to main got code 'LUA_YIELD'\nBye! :-)\n</code></pre>\n\n<hr>\n\n<p>Much thanks to @ Nicol Bolas for the very detailed answer!<br>\nAfter reading his answer, reading the official docs, reading some emails and playing around with it some more, I want to refine the question / ask a specific follow-up question, however you want to look at it.</p>\n\n<p>I think this term 'clobbering' is not good for describing this issue and this was part of what confused me -- nothing is being \"clobbered\" in the sense of being written to twice and the first value being lost, the issue is solely, as @Nicol Bolas points out, that <code>longjmp</code> tosses part of the C stack, and if you are hoping to restore the stack later, too bad.</p>\n\n<p>The issue is actually described very nicely in <a href=\"http://www.lua.org/manual/5.2/manual.html#4.7\">section 4.7 of lua 5.2 manual</a>, in a link provided by @Nicol Bolas.</p>\n\n<p>Curiously, there is no equivalent section in the lua 5.1 documentation. However, lua 5.2 has <a href=\"http://www.lua.org/manual/5.2/manual.html#lua_yieldk\">this to say</a> about <code>lua_yieldk</code>:</p>\n\n<blockquote>\n  <p>Yields a coroutine.</p>\n  \n  <p>This function should only be called as the return expression of a C function, as follows:</p>\n  \n  <p><code>return lua_yieldk (L, n, i, k);</code></p>\n</blockquote>\n\n<p>Lua 5.1 manual says <a href=\"http://www.lua.org/manual/5.1/manual.html#lua_yield\">something similar</a>, about <code>lua_yield</code> instead:</p>\n\n<blockquote>\n  <p>Yields a coroutine.</p>\n  \n  <p>This function should only be called as the return expression of a C function, as follows:</p>\n  \n  <p><code>return lua_yieldk (L, n, i, k);</code></p>\n</blockquote>\n\n<p>Some natural questions then:  </p>\n\n<ul>\n<li>Why does it matter if I use <code>return</code> here or not? If <code>lua_yieldk</code> will call <code>longjmp</code> then the <code>lua_yieldk</code> will never return anyways, so it shouldn't matter if I return then? So that cannot be what is happening, right?</li>\n<li>Supposing instead that <code>lua_yieldk</code> just makes a note within the lua state that the current C api call has stated that it wants to yield, and then when it finally does return, lua will figure out what happens next. Then this solves the problem of saving C stack frames, no? Since after we return to lua normally, those stack frames have expired anyways -- so the complications described in @Nicol Bolas picture are skirted around? And second of all, in 5.2 at least the semantics are never that we should restore C stack frames, it seems -- <code>lua_yieldk</code> resumes to a continuation function, not to the <code>lua_yieldk</code> caller, and <code>lua_yield</code> apparently resumes to the caller of the current api call, not to the <code>lua_yield</code> caller itself.</li>\n</ul>\n\n<p>And, the most important question:</p>\n\n<blockquote>\n  <p>If I consistently use <code>lua_yieldk</code> in the form <code>return lua_yieldk(...)</code> specified in the docs, returning from a <code>lua_CFunction</code> that was passed to lua, is it still possible to trigger the <code>attempt to yield across a C-call boundary</code> error?</p>\n</blockquote>\n\n<p>Finally, (but this is less important), I would like to see a concrete example of what it looks like when a naive programmer \"isn't careful\" and triggers the <code>attempt to yield across a C-call boundary</code> error. I get the idea that there could be problem associated to <code>setjmp</code> and <code>longjmp</code> tossing stack frames that we later need, but I want to see some real lua / lua c api code that I can point to and say \"for instance, don't do that\", and this is surprisingly elusive.</p>\n\n<p>I found <a href=\"http://lua-users.org/lists/lua-l/2013-01/msg00504.html\">this email</a> where someone reported this error with some lua 5.1 code, and I attempted to reproduce it in lua 5.3. However what I found was that, this looks like just poor error reporting from the lua implementation -- the actual bug is being caused because the user is not setting up their coroutine properly. The proper way to load the coroutine is, create the thread, push a function onto the thread stack, and then call <code>lua_resume</code> on the thread state. Instead the user was using <code>dofile</code> on the thread stack, which executes the function there after loading it, rather than resuming it. So it is effectively <code>yield outside of a coroutine</code> iiuc, and when I patch this, his code works fine, using both <code>lua_yield</code> and <code>lua_yieldk</code> in lua 5.3.</p>\n\n<p>Here is the listing I produced:</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;cstdio&gt;\n\nextern \"C\" {\n#include \"lua.h\"\n#include \"lauxlib.h\"\n}\n\n//#define USE_YIELDK\n\nbool running = true;\n\nint lua_print(lua_State * L) {\n  if (lua_gettop(L)) {\n    printf(\"lua: %s\\n\", lua_tostring(L, -1));\n  }\n  return 0;\n}\n\nint lua_finish(lua_State *L) {\n  running = false;\n  printf(\"%s called\\n\", __func__);\n  return 0;\n}\n\nint trivial(lua_State *, int, lua_KContext) {\n  printf(\"%s called\\n\", __func__);\n  return 0;\n}\n\nint lua_sleep(lua_State *L) {\n  printf(\"%s called\\n\", __func__);\n#ifdef USE_YIELDK\n  printf(\"Calling lua_yieldk\\n\");\n  return lua_yieldk(L, 0, 0, trivial);\n#else\n  printf(\"Calling lua_yield\\n\");\n  return lua_yield(L, 0);\n#endif\n}\n\nconst char * loop_lua =\n\"print(\\\"loop.lua\\\")\\n\"\n\"\\n\"\n\"local i = 0\\n\"\n\"while true do\\n\"\n\"  print(\\\"lua_loop iteration\\\")\\n\"\n\"  sleep()\\n\"\n\"\\n\"\n\"  i = i + 1\\n\"\n\"  if i == 4 then\\n\"\n\"    break\\n\"\n\"  end\\n\"\n\"end\\n\"\n\"\\n\"\n\"finish()\\n\";\n\nint main() {\n  lua_State * L = luaL_newstate();\n\n  lua_pushcfunction(L, lua_print);\n  lua_setglobal(L, \"print\");\n\n  lua_pushcfunction(L, lua_sleep);\n  lua_setglobal(L, \"sleep\");\n\n  lua_pushcfunction(L, lua_finish);\n  lua_setglobal(L, \"finish\");\n\n  lua_State* cL = lua_newthread(L);\n  assert(LUA_OK == luaL_loadstring(cL, loop_lua));\n  /*{\n    int result = lua_pcall(cL, 0, 0, 0);\n    if (result != LUA_OK) {\n      printf(\"%s error: %s\\n\", result == LUA_ERRRUN ? \"Runtime\" : \"Unknown\", lua_tostring(cL, -1));\n      return 1;\n    }\n  }*/\n  // ^ This pcall (predictably) causes an error -- if we try to execute the\n  // script, it is going to call things that attempt to yield, but we did not\n  // start the script with lua_resume, we started it with pcall, so it's not\n  // okay to yield.\n  // The reported error is \"attempt to yield across a C-call boundary\", but what\n  // is really happening is just \"yield from outside a coroutine\" I suppose...\n\n  while (running) {\n    int status;\n    printf(\"Waking up coroutine\\n\");\n    status = lua_resume(cL, L, 0);\n    if (status == LUA_YIELD) {\n      printf(\"coroutine yielding\\n\");\n    } else {\n      running = false; // you can't try to resume if it didn't yield\n\n      if (status == LUA_ERRRUN) {\n        printf(\"Runtime error: %s\\n\", lua_isstring(cL, -1) ? lua_tostring(cL, -1) : \"(unknown)\" );\n        lua_pop(cL, -1);\n        break;\n      } else if (status == LUA_OK) {\n        printf(\"coroutine finished\\n\");\n      } else {\n        printf(\"Unknown error\\n\");\n      }\n    }\n  }\n\n  lua_close(L);\n  printf(\"Bye! :-)\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>Here is the output when <code>USE_YIELDK</code> is commented out:</p>\n\n<pre><code>Waking up coroutine\nlua: loop.lua\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yield\ncoroutine yielding\nWaking up coroutine\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yield\ncoroutine yielding\nWaking up coroutine\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yield\ncoroutine yielding\nWaking up coroutine\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yield\ncoroutine yielding\nWaking up coroutine\nlua_finish called\ncoroutine finished\nBye! :-)\n</code></pre>\n\n<p>Here is the output when <code>USE_YIELDK</code> is defined:</p>\n\n<pre><code>Waking up coroutine\nlua: loop.lua\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yieldk\ncoroutine yielding\nWaking up coroutine\ntrivial called\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yieldk\ncoroutine yielding\nWaking up coroutine\ntrivial called\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yieldk\ncoroutine yielding\nWaking up coroutine\ntrivial called\nlua: lua_loop iteration\nlua_sleep called\nCalling lua_yieldk\ncoroutine yielding\nWaking up coroutine\ntrivial called\nlua_finish called\ncoroutine finished\nBye! :-)\n</code></pre>\n"}, {"tags": ["c", "testing", "embedded", "tdd", "microcontroller"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450236540, "post_id": 34303335, "comment_id": 56348995, "body": "Idea; Generate 3 codes bases, A_embedded, A_non-embedded and B_common.   Some code just makes no sense in the other world."}, {"owner": {"reputation": 2598, "user_id": 218913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59b5bd7fe3da101beb97cfddfdb6f9e2?s=128&d=identicon&r=PG&f=1", "display_name": "williamg", "link": "https://stackoverflow.com/users/218913/williamg"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450236974, "post_id": 34303335, "comment_id": 56349106, "body": "Right, that was my plan. Have one &quot;common&quot; library, and then two distinct applications/libraries that use the common one: one for embedded, and one for non-embedded"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450250930, "post_id": 34303335, "comment_id": 56353977, "body": "The key here will be to write all the code portable. It is fully possible to use the <i>same</i> code on for example a resource-constrained MCU and a burdensome 64 bit Windows PC. This requires far more extensive C knowledge from the programmer though: integer limits, implicit type promotions, signedness, endianess, implementation-defined behavior etc etc all have to be considered. You might want to consider using some flavour of MISRA-C to weed most of such portability vulnerabilities through static analysis."}], "answers": [{"comments": [{"owner": {"reputation": 2598, "user_id": 218913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59b5bd7fe3da101beb97cfddfdb6f9e2?s=128&d=identicon&r=PG&f=1", "display_name": "williamg", "link": "https://stackoverflow.com/users/218913/williamg"}, "edited": false, "score": 0, "creation_date": 1450237022, "post_id": 34303456, "comment_id": 56349118, "body": "Can you elaborate on what you mean by an &quot;interface library&quot;?"}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 2598, "user_id": 218913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59b5bd7fe3da101beb97cfddfdb6f9e2?s=128&d=identicon&r=PG&f=1", "display_name": "williamg", "link": "https://stackoverflow.com/users/218913/williamg"}, "edited": false, "score": 1, "creation_date": 1450237472, "post_id": 34303456, "comment_id": 56349235, "body": "A library like you said: robotlib.c - we can it an interface library because it contains only functions that will deal (interface) with your hardware.. ie: turnon(), turnoff(), stepup(), stepdown(), etc..."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1450251771, "post_id": 34303456, "comment_id": 56354409, "body": "The &quot;even better&quot; version is not equivalent - it calls printf() unconditionally for all builds."}], "tags": [], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "is_accepted": false, "score": 1, "last_activity_date": 1450236746, "last_edit_date": 1450236746, "creation_date": 1450236444, "answer_id": 34303456, "question_id": 34303335, "link": "https://stackoverflow.com/questions/34303335/maintaining-a-single-codebase-between-embedded-and-non-embedded-code/34303456#34303456", "title": "Maintaining a single codebase between embedded and non-embedded code", "body": "<p>Considering you are stuck with C that is not an object oriented language, I would go to a single library with some internal logic or even <code>#ifdefs</code> (if performance is a must), something like:</p>\n\n<pre><code>bool turnOn()\n{\n   #ifdef DEV\n       printf (\"Turned On\\n\");\n       return true;\n   #endif\n\n   #ifdef PROD\n      return robot_command_turnOn();\n   #endif\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bool turnOn()\n{\n   if (inProduction())\n      return robot_command_turnOn();\n\n   printf (\"Turned On\\n\");\n   return true;\n}\n</code></pre>\n\n<p>Or even better:</p>\n\n<pre><code>bool turnOn()\n{\n   printf (\"Turned On\\n\");\n\n   if (!inProduction())\n        return true;\n\n  return robot_command_turnOn();\n}\n</code></pre>\n\n<p>There are several ways to do it. In my view I wouldn\u00b4t go for two libraries as I would need to keep in sync function signatures and versions and this can be a mess.</p>\n\n<p>The secret is to build an <strong>interface library</strong> to your hardware (robot in case) and develop the library convering all possible interactions so that will keep a level of abstraction from the hardware layer.  That interface library can control if you are testing the unit (using a function like <code>inProduction()</code> above) and send the commands to hardware if allowed.</p>\n\n<p>Using an objected oriented language like C++ you have patterns to help you out: ie: <em>interface pattern</em>, <em>factory pattern</em>, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 2598, "user_id": 218913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59b5bd7fe3da101beb97cfddfdb6f9e2?s=128&d=identicon&r=PG&f=1", "display_name": "williamg", "link": "https://stackoverflow.com/users/218913/williamg"}, "edited": false, "score": 0, "creation_date": 1450248327, "post_id": 34304187, "comment_id": 56352751, "body": "Exactly what I was looking for! Thank you for the detailed response."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1450250472, "post_id": 34304187, "comment_id": 56353736, "body": "Overall good advise, but I wouldn&#39;t recommend to dump all drivers into one single library with a common header, because that turns everything project-specific. The problem with that is that you create a tight coupling between every single hardware driver: they all need the header. Which in turn means that in order to use your SPI driver on a project that only needs SPI, you must also provide the UART driver etc just so that things will link. It is better to create each module autonomous, with each own HAL. You&#39;ll have a SPI HAL and one UART HAL and they don&#39;t know about each other at all."}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450253134, "post_id": 34304187, "comment_id": 56355067, "body": "@Lundin: Those are details relating to how the HAL library is created. The OP needs a HAL for his project, so yes, it should be project-specific.  <code>hal.h</code> is the interface between the HAL library and the application code that uses it. It does not need to be <code>#include</code>d in every module in the HAL library; it only needs to be included in the application source files that need to access the HAL."}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450253268, "post_id": 34304187, "comment_id": 56355128, "body": "@Lundin: This would address your concern about coupling: <code>hal_uart.c</code> would contain the line <code>#include &quot;hal_uart.h&quot;</code>, but would know nothing about <code>hal_spi.h</code> or <code>hal.h</code>. <code>hal.h</code> would contain the lines <code>#include &quot;hal_uart.h&quot;</code> and <code>#include &quot;hal_spi.h&quot;</code>. The application source files would contain only the line <code>#include &quot;hal.h&quot;</code>. So my answer does not imply a tight coupling between all of the hardware drivers."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450259933, "post_id": 34304187, "comment_id": 56359357, "body": "@sifferman I don&#39;t see how that solves anything. If <code>hal.h</code> includes <code>hal_spi.h</code>, then you must always include the SPI driver in the project whenever you wish to use <code>hal.h</code> for completely unrelated UART purposes. That&#39;s still a dependency that shouldn&#39;t be there. That&#39;s ok if <code>hal.h</code> is some kind of project-specific summary of all used drivers, but in that case it should be named something else, like <code>robot_project.h</code> or whatever."}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450261456, "post_id": 34304187, "comment_id": 56360383, "body": "@Lundin The project is for a robot. A robot has hardware, such as proximity sensors, stepper motors, and solenoids. The interface to that hardware can be provided in a HAL. Hopefully, that interface won&#39;t include terms like &quot;UART&quot; and &quot;SPI&quot; because a robot&#39;s user doesn&#39;t want to think in those terms. The OP wasn&#39;t asking how to create a multi-purpose HAL that can be used in different projects - he wants a HAL for his robot. If you don&#39;t like the name <code>hal.h</code>, fine, but <code>hal.h</code> works for me because it serves as a single, simple header file that provides access to the entire HAL for the robot."}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "edited": false, "score": 0, "creation_date": 1450263506, "post_id": 34304187, "comment_id": 56361825, "body": "I made a minor edit to my answer so as to be a little less dogmatic about the use of a single header file as the entry point to the HAL."}], "tags": [], "owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "is_accepted": true, "score": 6, "last_activity_date": 1450263296, "last_edit_date": 1450263296, "creation_date": 1450241701, "answer_id": 34304187, "question_id": 34303335, "link": "https://stackoverflow.com/questions/34303335/maintaining-a-single-codebase-between-embedded-and-non-embedded-code/34304187#34304187", "title": "Maintaining a single codebase between embedded and non-embedded code", "body": "<p>This is a common situation in embedded systems development, and your approach of creating two libraries is usually the recommended solution. It's considered a best practice to decouple the low-level hardware from the software in embedded systems firmware.</p>\n\n<p>The library you mentioned is commonly known as a <em>\"Hardware Abstraction Layer\"</em>, or HAL. The API (application programming interface) for the HAL can be provided in a single header file named something like <code>hal.h</code>. Every source module in your software that needs to access the hardware would have the following line at the top of the source file:</p>\n\n<pre><code>#include \"hal.h\"\n</code></pre>\n\n<p>Benefits of designing your system like this include:</p>\n\n<ul>\n<li><strong>Modularity</strong>. If you need to make a timing change on, say a UART or SPI interface that reads a sensor, you only need to change the HAL library even though there may be multiple locations in your code that read that sensor.</li>\n<li><strong>Portability</strong>. If you later need to migrate your project to a different microcontroller, only the HAL layer would need to change.</li>\n<li><strong>Encapsulation</strong>. The details of the hardware are hidden within the HAL layer, which allows your other software to operate at a higher level of abstraction. If you are using a device library provided by the microcontroller manufacturer that provides the addresses of registers, I/O ports, etc., you can encapsulate the references to this library within your HAL library, so that your application code need have no knowledge of it.</li>\n<li><strong>Testability</strong>. This was the primary focus of your question. You can write a special version of the HAL layer that can be run on a different platform (such as Windows, for example) for testing of your application software. This special version would not need to include the device library provided by the microcontroller manufacturer, because when you are running in the test environment, the microcontroller doesn't exist, so its registers and I/O ports don't need to be accessed by your software.</li>\n</ul>\n\n<p>For your two scenarios, as you suggested, you would create two versions of the HAL library: the standard version that contains the code that runs on your embedded hardware, and the simulation version that simulates the hardware for the purpose of testing your software in a controlled manner. You might name the standard library <code>hal.lib</code> (perhaps with a different extension depending on your development environment), and the simulation library <code>hal_simulated.lib</code>. Both would have the same interface, as described in <code>hal.h</code>. That is, both libraries would contain all functions declared in <code>hal.h</code>, such as <code>void halInit()</code>, <code>int halReadProximitySensor()</code>, etc.</p>\n\n<p>Assuming your IDE supports <code>Release</code> and <code>Debug</code> configurations, you could create a third configuration for your software testing that is named <code>SW_Test</code>. This configuration would be a duplicate of your <code>Debug</code> configuration, except that the <code>hal_simulated.lib</code> would be linked into the project instead of the standard <code>hal.lib</code>.</p>\n\n<p><strong>See also</strong></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Hardware_abstraction\" rel=\"nofollow\">Hardware Abstraction (Wikipedia)</a></p>\n"}], "owner": {"reputation": 2598, "user_id": 218913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59b5bd7fe3da101beb97cfddfdb6f9e2?s=128&d=identicon&r=PG&f=1", "display_name": "williamg", "link": "https://stackoverflow.com/users/218913/williamg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 2, "closed_date": 1450915237, "accepted_answer_id": 34304187, "answer_count": 2, "score": 3, "last_activity_date": 1450263296, "creation_date": 1450235515, "question_id": 34303335, "link": "https://stackoverflow.com/questions/34303335/maintaining-a-single-codebase-between-embedded-and-non-embedded-code", "closed_reason": "Opinion-based", "title": "Maintaining a single codebase between embedded and non-embedded code", "body": "<p>I'm working on a robotics research project that involves programming a microcontroller. I'd like to be able to decouple testing the software from testing the hardware to the greatest extent possible. This is both to increase development speed and also so that I can more easily unit test/simulate the code before putting it on the robot. So for example, I might write a \"MyRobot\" library. Then I could include this library both in the embedded code and my non-embedded simulation/testing code. At runtime, I'd provide function pointers that would either read (in the embedded case) or simulate (in the simulation) sensor data and feed that into the library.</p>\n\n<p>So it seems like all I would need to do is generate two libraries at compile time: one for the embedded code, and one for the non-embedded code.</p>\n\n<p>My question is whether or not this is feasible/if there are better ways to do it/if there are any gotcha's I should watch out for.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "multiprocessing", "signals", "kill", "kill-process"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450234768, "post_id": 34303220, "comment_id": 56348556, "body": "What happens if you add <code>sleep(1)</code> between the first two for loops?"}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450234883, "post_id": 34303220, "comment_id": 56348585, "body": "it works...because my main process is too fast..??"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450235076, "post_id": 34303220, "comment_id": 56348628, "body": "What if you replace the <code>printf</code> call with <code>write(1, &quot;yo\\n&quot;, 3);</code> (and remove the <code>sleep</code> you added before)?"}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450235258, "post_id": 34303220, "comment_id": 56348678, "body": "It only works if I add sleep between the first two for loop, replace printf doesn&#39;t work."}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1450235823, "post_id": 34303220, "comment_id": 56348830, "body": "Is that really your code?  The parent will <i>kill()</i> the members of the external <code>pid_id[N]</code> array, not the automatic <code>pid[N]</code> array, but this array is never initialized in the parent."}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1450236352, "post_id": 34303220, "comment_id": 56348957, "body": "Yes, it is my code. I don&#39;t understand what you mean kill pid_id or pid? Since I need the id of each process to kill it, I declare pid_id. pid[N] is for fork."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450237368, "post_id": 34303220, "comment_id": 56349202, "body": "Good spotting... @KennyYang pilcrow means that <code>pid_id[i]</code> is filled with zeroes (since that&#39;s the default value for globals) so you call <code>kill(0, SIGUSR1)</code> N times."}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1450237526, "post_id": 34303220, "comment_id": 56349256, "body": "ok, so I have to wait all child process finish to trigger handler, right?"}, {"owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "edited": false, "score": 0, "creation_date": 1450241586, "post_id": 34303220, "comment_id": 56350338, "body": "Does the process always ends after catching kill...?"}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 2, "last_activity_date": 1450235309, "last_edit_date": 1450235309, "creation_date": 1450235008, "answer_id": 34303264, "question_id": 34303220, "link": "https://stackoverflow.com/questions/34303220/kill-usage-confusion-in-c/34303264#34303264", "title": "kill() usage confusion in C", "body": "<p>Remember that you're dealing with multiple processes now.  Just because in the code it looks like you ran <code>child</code> before <code>kill</code> doesn't mean that it happened in that order.  The order of execution is entirely dependent on how the OS schedules CPU time for these processes.</p>\n\n<p>What's happening is that some of the child processes are killed before they can install their signal handler.  This is an example of a race condition, much like the sort you get when starting new threads.</p>\n\n<p>This can be solved by synchronising the parent with its children, so that it doesn't continue until all children have notified back that they have completed their necessary initialisation steps.</p>\n"}], "owner": {"reputation": 135, "user_id": 5200975, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/950102218381326/picture?type=large", "display_name": "KennyYang", "link": "https://stackoverflow.com/users/5200975/kennyyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34303264, "answer_count": 1, "score": 1, "last_activity_date": 1450235309, "creation_date": 1450234705, "question_id": 34303220, "link": "https://stackoverflow.com/questions/34303220/kill-usage-confusion-in-c", "title": "kill() usage confusion in C", "body": "<p>I have read the manual of kill, and I know that it is a system call for sending a signal. I write a simple multi process code, each child process will do the handler function if it catch a specified signal, which is SIGUSR1 in my code.</p>\n\n<p>In my code, I have made 3 processes, each process will print out \"yo\" if they catch SIGUSR1 signal, but the output only print out one time or two time..? That really confuse me, thanks for your help!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;time.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;string.h&gt;\n#define N 3 \nint pid_id[N];\n\nvoid handler (int signum)\n{\n    printf(\"yo\\n\");\n}\n\nvoid child(int process_index)\n{\n    struct sigaction sa;\n\n    /* Register */\n    memset(&amp;sa, 0, sizeof(sa));\n    sa.sa_handler = handler;\n    sigaction(SIGUSR1, &amp;sa, NULL);\n\n    printf(\"I am %d.\\n\", getpid());\n    pid_id[process_index] = getpid();\n    sleep(5);\n\n    exit(0);\n}\n\nint main()\n{\n    int i, status;\n    pid_t pid[N];\n    pid_t pid_wait;\n\n    for (i=0;i&lt;N;i++)\n    {\n        pid[i] = fork();\n        if (pid[i]==0)\n        {\n            child(i);\n        }\n    }\n\n\n    for (i=0;i&lt;N;i++)\n        kill(pid_id[i], SIGUSR1);\n\n    for (i=0;i&lt;N;i++)\n    {\n        do\n        {\n            pid_wait = waitpid(pid[i], &amp;status, WNOHANG);\n        }while(pid_wait != pid[i]);\n\n    }\n    printf(\"all done\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "struct", "initialization", "int"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450230449, "post_id": 34302486, "comment_id": 56347481, "body": "What do you expect <code>void f(int i) {i = 5;} int main() {int x = 7; f(x); printf(&quot;%d\\n&quot;, x); return 0;}</code> to print?"}, {"owner": {"reputation": 15, "user_id": 5670119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9438418a1c4855659f35bbe5499ee95b?s=128&d=identicon&r=PG&f=1", "display_name": "Fafner Normanko", "link": "https://stackoverflow.com/users/5670119/fafner-normanko"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450232926, "post_id": 34302486, "comment_id": 56348110, "body": "void does nothing (no return value), so main prints out 7!  btw. ive tried out filing structure members the way i first tried to fill an Array in a structure and it&#39;s somehow working:      <code>typedef struct{     int day;     } WEEK;        void initTest(WEEK week) {     int i;     for(i=0; i&lt;7; i++){         week[i].day = i + 1;     }     }</code> ..so basically defining an Array containing 7 structures in main,  like:   <code>WEEK week1[7]; initTest(week1)</code>   works somehow different, because it fills values good ?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450233201, "post_id": 34302486, "comment_id": 56348179, "body": "What about <code>int f(int i) {i = 5; return i;} int main() {int x = 7; f(x); printf(&quot;%d\\n&quot;, x); return 0;}</code>?"}, {"owner": {"reputation": 15, "user_id": 5670119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9438418a1c4855659f35bbe5499ee95b?s=128&d=identicon&r=PG&f=1", "display_name": "Fafner Normanko", "link": "https://stackoverflow.com/users/5670119/fafner-normanko"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450233523, "post_id": 34302486, "comment_id": 56348235, "body": "the return value of function f is 5, but it does nothing to the Action. So 7 will be printed in the console. If we used <code>printf(&quot;%d\\n&quot;, f(x));</code> the console Output would be 5."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450234073, "post_id": 34302486, "comment_id": 56348389, "body": "As you can read in every good C book or tutorial, C is call-by-value."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450234639, "post_id": 34302486, "comment_id": 56348521, "body": "Now you know why <code>void f(Week w) {w = ...stuff...;} int main() {Week w; f(w); print(w); return 0;}</code> doesn&#39;t print the stuff. It works the same for Weeks as it does for ints. (Arrays work differently, for IMO silly reasons)"}, {"owner": {"reputation": 15, "user_id": 5670119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9438418a1c4855659f35bbe5499ee95b?s=128&d=identicon&r=PG&f=1", "display_name": "Fafner Normanko", "link": "https://stackoverflow.com/users/5670119/fafner-normanko"}, "edited": false, "score": 0, "creation_date": 1450234866, "post_id": 34302486, "comment_id": 56348575, "body": "i get the Basics like.. <code>int f(int * i) {*i = 5; return whatever;} int main() {int x = 7; f(&amp;x); printf(&quot;%d\\n&quot;, x); return 0;}</code> gives Output 5. I wanted to know the real difference, between Array and Struct. For filling an Array inside of a struct, we pass an adress (&amp;) Argument to a function, in the Definition head of the function we use the scheme <code>DATATYPE * variablename</code>  and inside the Body of the function we use <code>(*week).day[i] = i + 1;</code> or equivalent <code>week-&gt;day[i] = i + 1;</code> So far i got that."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1450230044, "creation_date": 1450230044, "answer_id": 34302625, "question_id": 34302486, "link": "https://stackoverflow.com/questions/34302486/filling-an-int-array-inside-a-structure/34302625#34302625", "title": "Filling an int Array inside a Structure", "body": "<p><code>initTest()</code> received a copy of <code>week</code>.  The calling function's <code>week</code> is not changed.  Instead have the calling code and receiving code use a pointer to <code>week</code>.</p>\n\n<pre><code>void initTest(WEEK *week, int seven){\n  int i;\n  for(i=0; i&lt;seven; i++){\n        week-&gt;day[i] = i + 1;  // -&gt;\n  }\n}\n\nWEEK week;\ninitTest(&amp;week, 7);  // &amp;week\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1450230060, "creation_date": 1450230060, "answer_id": 34302627, "question_id": 34302486, "link": "https://stackoverflow.com/questions/34302486/filling-an-int-array-inside-a-structure/34302627#34302627", "title": "Filling an int Array inside a Structure", "body": "<p>Modifying arguments in a function won't affect what the caller passed.</p>\n\n<p>Use pointers to modify caller's local variable.</p>\n\n<pre><code>void initTest(WEEK *week){\n    int i;\n    for(i=0; i&lt;7; i++){\n        week-&gt;day[i] = i + 1;\n    }\n}\n\nWEEK week;\ninitTest(&amp;week);\n</code></pre>\n\n<p>I removed the argument <code>seven</code> because it seamed meaningless.</p>\n"}], "owner": {"reputation": 15, "user_id": 5670119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9438418a1c4855659f35bbe5499ee95b?s=128&d=identicon&r=PG&f=1", "display_name": "Fafner Normanko", "link": "https://stackoverflow.com/users/5670119/fafner-normanko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1450230280, "creation_date": 1450228986, "last_edit_date": 1450230280, "question_id": 34302486, "link": "https://stackoverflow.com/questions/34302486/filling-an-int-array-inside-a-structure", "title": "Filling an int Array inside a Structure", "body": "<p>So, I was wondering about the initialization of Arrays inside of a struct. If I put this above main function:</p>\n\n<pre><code>typedef struct{\nint day[7];\n} WEEK;\n\nvoid initTest(WEEK week, int seven) {\n  int i;\n  for(i=0; i&lt;seven; i++){\n        week.day[i] = i + 1;\n  }\n}\n</code></pre>\n\n<p>..seems not to work, by invoking it in main like this:</p>\n\n<pre><code>WEEK week;\ninitTest(week, 7);\n</code></pre>\n\n<p>I get some garbage values pulled from memory filled to my array.</p>\n\n<p>However, if I use the following in the main function directly </p>\n\n<pre><code>int i;\nfor(i=0; i&lt;7; i++){\n        week.day[i] = i + 1;\n}\n</code></pre>\n\n<p>..I get good filing of <code>Array (1.. to ..7)</code>. </p>\n\n<blockquote>\n  <p>Can someone care to explain why this happens and maybe give some examples or alternatives how to fix this (with pointers/malloc or otherwise), etc?</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "network-programming", "iptables", "nat"], "comments": [{"owner": {"reputation": 345, "user_id": 4274163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-sVH75RxbQsI/AAAAAAAAAAI/AAAAAAAAAf0/NeZpLvNYhgQ/photo.jpg?sz=128", "display_name": "Kritpal Singh", "link": "https://stackoverflow.com/users/4274163/kritpal-singh"}, "edited": false, "score": 0, "creation_date": 1465300297, "post_id": 34302445, "comment_id": 62834106, "body": "did your code worked?? can you share the code of get_dnat_target()?"}], "answers": [{"tags": [], "owner": {"reputation": 1019, "user_id": 802199, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cc9d50cd3e61d00b38948a0a4237201?s=128&d=identicon&r=PG", "display_name": "vindyz", "link": "https://stackoverflow.com/users/802199/vindyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1450317593, "creation_date": 1450317593, "answer_id": 34325423, "question_id": 34302445, "link": "https://stackoverflow.com/questions/34302445/libiptc-adding-nat-rule-with-mark-based-match/34325423#34325423", "title": "libiptc : adding nat rule with mark based match?", "body": "<p>Learnt it the hard way, that iptables uses different structures for match &amp; target. The API uses \"revision\" field to differentiate which structures to use for this particular match/ target. </p>\n\n<p>So adding a line below, made my life easier. </p>\n\n<pre><code>match-&gt;u.user.revision = 1;\n</code></pre>\n"}], "owner": {"reputation": 1019, "user_id": 802199, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cc9d50cd3e61d00b38948a0a4237201?s=128&d=identicon&r=PG", "display_name": "vindyz", "link": "https://stackoverflow.com/users/802199/vindyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450404709, "creation_date": 1450228713, "last_edit_date": 1450404709, "question_id": 34302445, "link": "https://stackoverflow.com/questions/34302445/libiptc-adding-nat-rule-with-mark-based-match", "title": "libiptc : adding nat rule with mark based match?", "body": "<p>Am using libiptc -library to manipulate the iptables programatically to add nat rule similar to below.</p>\n\n<pre><code>Rule : iptables -t nat -A POSTROUTING -m mark --mark 0x2/0x3 -j SNAT --to 1.1.1.1\n</code></pre>\n\n<p>The code looks like below. </p>\n\n<p>I understand that iptable nat rules = <code>ipt_entry (IP Header) + ipt_entry_match (match) + ipt_entry_target (target)</code>.</p>\n\n<pre><code>// function to create Mark based match \n    struct ipt_entry_match* get_mark_target() {\n\n        struct ipt_entry_match *match;\n        struct xt_mark_info *m;\n        size_t size;\n        size =   IPT_ALIGN(sizeof(struct ipt_entry_match))\n            + IPT_ALIGN(sizeof(struct xt_mark_info));\n\n        match = calloc(1, size);\n        match-&gt;u.match_size = size;\n        strncpy(match-&gt;u.user.name, \"mark\", sizeof(match-&gt;u.user.name));\n        m = (struct xt_mark_info*)match-&gt;data;\n        m-&gt;mark = m-&gt;mask = 0xff;\n        return match;\n    }\n\n//function : to create final ipt_enrty  \n\n\n  static struct ipt_entry*\n    make_entry(const char * iaddr, const char * rhost, const char *chain_target)\n    {\n   int r = 0;\n    struct ipt_entry * e;\n    struct ipt_entry_match *match = get_mark_target();\n    struct xt_mark_info *m = NULL;\n    struct ipt_entry_target *target = NULL;\n\n    e = calloc(1, sizeof(struct ipt_entry));\n    //m = calloc(1, sizeof(*m));\n    //m-&gt;mark = 0xff;\n    e-&gt;ip.proto = IPPROTO_IP;\n    e-&gt;nfcache = NFC_IP_DST_PT;\n    if (!strcmp(chain_target, \"SNAT\")) {\n        e-&gt;ip.src.s_addr = inet_addr(rhost);\n        e-&gt;ip.smsk.s_addr = INADDR_NONE;\n        //e-&gt;ip.smsk.s_addr = INADDR_NONE;\n        printf(\"\\n SNAT\");\n        target = get_snat_target(iaddr, 0);\n    } else {\n        printf(\"\\n DNAT\");\n        e-&gt;ip.dst.s_addr = inet_addr(rhost);\n        e-&gt;ip.dmsk.s_addr = INADDR_NONE;\n        target = get_dnat_target(iaddr, 0);\n    }\n    e-&gt;nfcache |= NFC_UNKNOWN;\n    e = realloc(e, sizeof(struct ipt_entry)\n            + match-&gt;u.match_size + target-&gt;u.target_size);\n    memcpy(e-&gt;elems, match, match-&gt;u.match_size);\n    memcpy(e-&gt;elems + match-&gt;u.match_size, target, target-&gt;u.target_size);\n    e-&gt;target_offset = sizeof(struct ipt_entry)\n        + match-&gt;u.match_size;\n    e-&gt;next_offset = sizeof(struct ipt_entry)\n        + match-&gt;u.match_size + target-&gt;u.target_size;\n#if 0\n    e = realloc(e, sizeof(struct ipt_entry) + sizeof(*m));\n    //+ target-&gt;u.target_size);\n    //memcpy(e-&gt;elems , target, target-&gt;u.target_size);\n    memcpy(e-&gt;elems , m, sizeof(*m));\n    e-&gt;target_offset = sizeof(struct ipt_entry);\n    e-&gt;next_offset = sizeof(struct ipt_entry) + sizeof(*m);\n#endif\n    free(target);\n    //free(m);\n    return e;\n    }\n\n\n    static int\n    insert_nat_rule (char *src, char *dest, int op, const char *target)\n    {\n        struct ipt_entry *entry;\n        struct xtc_handle *h;\n        int ret = 1;\n        const char *chain, *table = \"nat\";\n        char *match_mask;\n\n        h = iptc_init (table);\n        if (!h) {\n            fprintf (stderr, \"Could not init IPTC library: %s\\n\", iptc_strerror (errno));\n            goto out;\n        }\n        if (!strcmp(target, \"SNAT\")) {\n            chain = \"POSTROUTING\";\n        } else  if (!strcmp(target, \"DNAT\")) {\n            chain = \"PREROUTING\";\n        } else {\n            //invlid target\n            return 0;\n        }\n        entry = make_entry(src, dest, target);\n        if (op) {\n            if (!iptc_append_entry (chain, (struct ipt_entry *) entry, h)) {\n                fprintf (stderr, \"Could not insert a rule in iptables (table %s): \"\n                                 \"%s\\n\", table, iptc_strerror (errno));\n                goto out;\n            }\n        } else {\n            match_mask = (unsigned char *)malloc(entry-&gt;next_offset);\n            memset(match_mask, 0xFF, entry-&gt;next_offset);\n\n            if (!iptc_delete_entry (chain, (struct ipt_entry *) entry,\n                                            match_mask, h)) {\n                fprintf (stderr, \"Could not delete a rule in iptables (table %s): \"\n                                 \"%s\\n\", table, iptc_strerror (errno));\n                goto out;\n            }\n        }\n\n        if (!iptc_commit (h)) {\n            fprintf (stderr, \"Could not commit changes in iptables (table %s): %s\\n\"\n                            , table, iptc_strerror (errno));\n            goto out;\n        }\n\n        ret = 0;\n    out:\n        if (entry) free(entry);\n        if (h) iptc_free (h);\n\n        return ret;\n    }\n</code></pre>\n\n<p>On executing the above program, we get an error saying \"Protocol wrong type for socket\". Without the mark based match this works fine, am able to add 1 to 1 SNAT rules without any problems. \nTried multiple structures for mark based match, but that does not seem to work. </p>\n\n<p>Is there something obvious that I am missing ? \nWill Appreciate the inputs. Thanks.</p>\n"}, {"tags": ["c", "cmake", "assert"], "comments": [{"owner": {"reputation": 4085, "user_id": 1321680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/JSn9z.png?s=128&g=1", "display_name": "patryk.beza", "link": "https://stackoverflow.com/users/1321680/patryk-beza"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450228578, "post_id": 34302265, "comment_id": 56346927, "body": "I checked it out and it turns out that <i>CMake</i> append <code>-DNDEBUG</code> flag, but it&#39;s still problematic because <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html\" rel=\"nofollow noreferrer\">CMake documentation</a> does <b>not</b> explicitly mention if <code>-DNDEBUG</code> flag is added when <code>CMAKE_BUILD_TYPE=Debug</code> option is present. I prefer to avoid writing code based on undocumented behaviour because it may change in future CMake versions (though potential consequences would be small)."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1450252113, "post_id": 34302265, "comment_id": 56354559, "body": "@iharob: Author wants to know, whether this behaviour is standard/common, and is observed on <b>all machines</b>. That&#39;s why checking that on his <i>current machine</i> is not sufficient (and author <i>did that</i>). Googling is not showing answer at least on the first page. And answer is actually not so simple as it seems to be. Intention to remove redudant code, given in the question, is perfectly OK for programming. Voted to reopen."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1450275756, "post_id": 34302265, "comment_id": 56370521, "body": "@Tsyvarev I see, I am deeply sorry. The utility with <i>undocumented</i> documentation is <i>qmake</i> and I didn&#39;t remember that, I will delete the comment as it&#39;s misleading."}], "answers": [{"comments": [{"owner": {"reputation": 1441, "user_id": 468252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3edfe3d7ddd58c637a125fc9177b226d?s=128&d=identicon&r=PG", "display_name": "qneill", "link": "https://stackoverflow.com/users/468252/qneill"}, "edited": false, "score": 1, "creation_date": 1615305525, "post_id": 34314956, "comment_id": 117647167, "body": "Starting in 3.7 you can set <code>CMAKE_&lt;LANG&gt;_FLAGS_RELEASE_INIT</code> explicitly and control all the compile flags - see <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_LANG_FLAGS_INIT.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/latest/variable/CMAKE_LANG_FLAGS_INIT.h&zwnj;&#8203;tml</a>."}], "tags": [], "owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "is_accepted": true, "score": 28, "last_activity_date": 1450277082, "creation_date": 1450277082, "answer_id": 34314956, "question_id": 34302265, "link": "https://stackoverflow.com/questions/34302265/does-cmake-build-type-release-imply-dndebug/34314956#34314956", "title": "Does CMAKE_BUILD_TYPE=Release imply -DNDEBUG?", "body": "<p>Yes, it is set by CMake. Grepping through the CMake code reveals, that for a host of compilers it is set. Probably they set it only for these compilers, which accepts this flag. Here one of the lines concerning GCC:</p>\n\n<pre><code>Modules/Compiler/GNU.cmake:  set(CMAKE_${lang}_FLAGS_RELEASE_INIT \"-O3 -DNDEBUG\")\n</code></pre>\n\n<p>But be aware that many projects overwrite release/debug flags without preserving the initial setting and also overwriting user's definitions.</p>\n"}], "owner": {"reputation": 4085, "user_id": 1321680, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/JSn9z.png?s=128&g=1", "display_name": "patryk.beza", "link": "https://stackoverflow.com/users/1321680/patryk-beza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12557, "favorite_count": 3, "accepted_answer_id": 34314956, "answer_count": 1, "score": 32, "last_activity_date": 1450277228, "creation_date": 1450227586, "last_edit_date": 1450277228, "question_id": 34302265, "link": "https://stackoverflow.com/questions/34302265/does-cmake-build-type-release-imply-dndebug", "title": "Does CMAKE_BUILD_TYPE=Release imply -DNDEBUG?", "body": "<p>Does <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html\" rel=\"noreferrer\"><code>CMAKE_BUILD_TYPE=Release</code></a> implicitly imply <a href=\"http://www.cplusplus.com/reference/cassert/assert/\" rel=\"noreferrer\"><code>-DNDEBUG</code></a>?</p>\n\n<p><strong>If not:</strong> isn't it reasonable to expect that this implication takes place?</p>\n\n<p>I want to know if following <a href=\"https://cmake.org/\" rel=\"noreferrer\">CMake</a> code is redundant in my <em>CMakeLists.txt</em>:</p>\n\n<pre><code>if (NOT CMAKE_BUILD_TYPE MATCHES Debug)\n    add_definitions(-DNDEBUG)\nendif()\n</code></pre>\n"}, {"tags": ["c", "pipe", "exec"], "answers": [{"comments": [{"owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 0, "creation_date": 1450242260, "post_id": 34302628, "comment_id": 56350554, "body": "parent is in blocking mode and it is not handling or even touching the pipe.  Closing the write end of the pipe will have no effect &amp; no result."}, {"owner": {"reputation": 29, "user_id": 5671122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45e37994e9c69c01957d294fa2ae349?s=128&d=identicon&r=PG&f=1", "display_name": "user5671122", "link": "https://stackoverflow.com/users/5671122/user5671122"}, "reply_to_user": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "edited": false, "score": 1, "creation_date": 1450242678, "post_id": 34302628, "comment_id": 56350676, "body": "pipe(tube);  on the third line of main creates a new pipe in the parent. The child gets a copy of the parent&#39;s open fds including the open read and write ends of the pipe. As also mentioned in the other answer the forked process running wc reads from the input fd (in this case the output end of the pipe) until EOF, which it never receives because although the first process in the pipeline terminated not all write ends of the pipe are closed (because it&#39;s open in the parent).  -edit-  see man 2 pipe for more info: <a href=\"http://linux.die.net/man/2/pipe\" rel=\"nofollow noreferrer\">linux.die.net/man/2/pipe</a>"}], "tags": [], "owner": {"reputation": 29, "user_id": 5671122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e45e37994e9c69c01957d294fa2ae349?s=128&d=identicon&r=PG&f=1", "display_name": "user5671122", "link": "https://stackoverflow.com/users/5671122/user5671122"}, "is_accepted": false, "score": 0, "last_activity_date": 1450230069, "creation_date": 1450230069, "answer_id": 34302628, "question_id": 34302259, "link": "https://stackoverflow.com/questions/34302259/execl-does-not-seem-to-read-from-stdin/34302628#34302628", "title": "execl() does not seem to read from stdin", "body": "<p>You'll need to close the write end of the pipe in the parent too.</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1450230560, "creation_date": 1450230560, "answer_id": 34302686, "question_id": 34302259, "link": "https://stackoverflow.com/questions/34302259/execl-does-not-seem-to-read-from-stdin/34302686#34302686", "title": "execl() does not seem to read from stdin", "body": "<p>The parent process still has the pipe open, so <code>wc</code> is waiting around in case the parent decides to write stuff (which <code>wc</code> would need to count).</p>\n\n<p>Close both ends of the pipe in the parent too:</p>\n\n<pre><code>    else // parent\n    {\n        int status;\n        close(tube[0]); // &lt;---\n        close(tube[1]); // &lt;---\n        waitpid(lsFork, &amp;status, 0);\n        waitpid(wcFork, &amp;status, 0);\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1450250099, "last_edit_date": 1450250099, "creation_date": 1450249708, "answer_id": 34305883, "question_id": 34302259, "link": "https://stackoverflow.com/questions/34302259/execl-does-not-seem-to-read-from-stdin/34305883#34305883", "title": "execl() does not seem to read from stdin", "body": "<p>Don't complicate things when you can do it easily..\nTry the simpler code below &amp; see if you can understand anything or not.</p>\n\n<pre><code>int main(){\n    int tube[2];\n    int fID;\n    pipe(tube);\n    if (fork() == 0){\n      // this is the child process\n      close(tube[0]); // reading end of the pipe\n      dup2(tube[1], 1); // stdout ---&gt; pipe writing end\n      execlp(\"ls\", \"ls\", NULL);\n    }else{\n      if (fork() == 0){\n        //umask(0022);\n        fID = open(\"sample.txt\", O_WRONLY | O_CREAT, 0644);\n        close(tube[1]); // writing end of the pipe\n        dup2(tube[0], 0);  // stdin ----&gt; pipe reading end\n        dup2(fID, 1);\n        execlp(\"wc\", \"wc\", NULL);\n      }\n    }\n  return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong> If the purpose of the code is to solely implement the above mentioned piping, then you don't need to implement any waiting mechanisms. The OS will auto-kill all the zombie child, if any. Moreover <code>execlp(\"wc\", \"wc\", NULL);</code> will auto block the program to end. Hence it will not exit early</p>\n"}], "owner": {"reputation": 149, "user_id": 5153648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b7811e157bb4b1164ef6197634021fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mr G0z", "link": "https://stackoverflow.com/users/5153648/mr-g0z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1816, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1450250099, "creation_date": 1450227548, "question_id": 34302259, "link": "https://stackoverflow.com/questions/34302259/execl-does-not-seem-to-read-from-stdin", "title": "execl() does not seem to read from stdin", "body": "<p>I'm trying to reproduce this command in c language:</p>\n\n<pre><code>ls | wc &gt; output.txt\n</code></pre>\n\n<p>So, to do that, I wrote the following program:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n\nint main()\n{\n    pid_t lsFork, wcFork;\n    int tube[2];\n    pipe(tube);\n\n    lsFork = fork();\n    if(lsFork == 0) // ls command\n    {\n        close(tube[0]);\n        dup2(tube[1], STDOUT_FILENO);\n        close(tube[1]);\n        if(execl(\"/usr/bin/ls\", \"ls\", NULL) == -1)\n            perror(\"Cannot execute ls\");\n    }\n    else\n    {\n        wcFork = fork();\n        if(wcFork == 0)  // wc command\n        {\n            sleep(1);\n            int file = open(\"output.txt\", O_WRONLY | O_CREAT);\n            if(file == -1)\n                perror(\"Cannot open output.txt\");\n\n            close(tube[1]);\n            dup2(tube[0], STDIN_FILENO);\n            close(tube[0]);\n            dup2(file, STDOUT_FILENO);\n            close(file);\n\n            /*char buffer[BUFSIZ];\n            read(STDIN_FILENO, buffer, BUFSIZ);\n            write(STDOUT_FILENO, buffer, BUFSIZ);*/\n\n            if(execl(\"/usr/bin/wc\", \"wc\", NULL) == -1)\n                perror(\"Cannot execute wc\");\n\n            close(STDOUT_FILENO);\n        }\n        else // parent\n        {\n            int status;\n            waitpid(lsFork, &amp;status, 0);\n            waitpid(wcFork, &amp;status, 0);\n        }\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>But, the program does not exit. According to htop, the wc command is blocking the program. To understand this behaviour, I wrote a piece of code (the lines commented before execl()) and I don't understand what this works and not execl(). Am I forgetting something when calling this function?</p>\n"}, {"tags": ["c", "linux", "sms", "embedded", "gsm"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450226091, "last_edit_date": 1450226091, "creation_date": 1450225756, "answer_id": 34301991, "question_id": 34301928, "link": "https://stackoverflow.com/questions/34301928/receiving-sms-part-of-project-returning-char-and-sizeof-out-of-function/34301991#34301991", "title": "Receiving SMS , part of project (returning char and sizeof out of function)", "body": "<p>Use parameters for that, like this</p>\n\n<pre><code>void UART_rx(char *rx_buffer, ssize_t *rx_length)\n{\n    memset(rx_buffer, '\\0', rx_length);\n    *rx_length = read(uart_filestream, (void *) rx_buffer, *rx_length);\n    if (*rx_length &lt; 0)\n        printf(\"uart rx error\\n\");\n    printf(\"RX: %s\", rx_buffer);\n}\n</code></pre>\n\n<p>and call it like this</p>\n\n<pre><code>char rx_buffer[256];\nssize_t rx_length;\n\nrx_length = sizeof(buffer);\nUART_rx(rx_buffer, &amp;rx_length);\n</code></pre>\n\n<p>It is very important to allocate the space in the caller funcion, also note how <code>rx_length</code> is useful in two ways, to let <code>UART_rx()</code> know the length of the destination buffer, and to store the length of the read data.</p>\n\n<p>Also, you should not need to <code>memset()</code> anything, if you MUST do it that indicates a bug in your code, in fact this is how your function should be written</p>\n\n<pre><code>void UART_rx(char *rx_buffer, ssize_t *rx_length)\n{\n    *rx_length = read(uart_filestream, (void *) rx_buffer, *rx_length - 1);\n    if (*rx_length &lt; 0)\n        printf(\"uart rx error\\n\");\n    rx_buffer[*rx_length] = '\\0';\n    printf(\"RX: %s\", rx_buffer);\n}\n</code></pre>\n\n<p>And finally, this <code>uart_filestream</code> being a global variable can be thought as a bad sign too. It is preferred to use another parameter to <code>UART_rx()</code> and that would be <code>uart_filestream</code>, that way the function will be more useful and the whole code will be more robust.</p>\n"}], "owner": {"reputation": 41, "user_id": 5684305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a9617e49f9ab0ac07a5ede1562dc5a?s=128&d=identicon&r=PG&f=1", "display_name": "FERBI", "link": "https://stackoverflow.com/users/5684305/ferbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1450252860, "answer_count": 1, "score": 2, "last_activity_date": 1450226091, "creation_date": 1450225318, "last_edit_date": 1450225882, "question_id": 34301928, "link": "https://stackoverflow.com/questions/34301928/receiving-sms-part-of-project-returning-char-and-sizeof-out-of-function", "closed_reason": "Not suitable for this site", "title": "Receiving SMS , part of project (returning char and sizeof out of function)", "body": "<p>I'm asking for help to return from this function content and length of buffer  </p>\n\n<pre><code>void UART_rx(void)\n     {\n    char rx_buffer[256];\n    memset(rx_buffer,'\\0',256);\n    int rx_length = read(uart_filestream, (void*)rx_buffer, sizeof(rx_buffer));\n    if(rx_length &lt; 0){\n        printf(\"uart rx error\\n\");\n    }\n    printf(\"RX: %s\", rx_buffer);\n      }\n</code></pre>\n\n<p><a href=\"http://kannupandiyan.blogspot.com/2014/05/sending-and-receiving-sms-using-sim300.html\" rel=\"nofollow\">This</a> is code I'm  trying to modify </p>\n\n<pre><code>int8_t   SIM300WaitForMsg(uint8_t *id)\n{\n   //Wait for a unsolicited response for 250ms  \n   uint8_t len=SIM300WaitForResponse(250);\n\n   if(len==0)\n      return SIM300_TIMEOUT;\n\n   sim300_buffer[len-1]='\\0';\n\n   //Check if the response is +CMTI (Incoming msg indicator)\n   if(strncasecmp(sim300_buffer+2,\"+CMTI:\",6)==0)\n   {\n      char str_id[4];\n\n      char *start;\n\n      start=strchr(sim300_buffer,',');\n      start++;\n\n      strcpy(str_id,start);\n\n      *id=atoi(str_id);\n\n      return SIM300_OK;\n   }\n   else\n      return SIM300_FAIL;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224187, "post_id": 34301702, "comment_id": 56345593, "body": "Positive. If I type in 1, 101, 11111, 1111111111111111111111 then &quot;Do this&quot; happens. If I do any number beginning with 2, then its &quot;Do that&quot;... simialrly for 3"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450224659, "post_id": 34301702, "comment_id": 56345727, "body": "Cool story. What is <code>choice</code>?"}, {"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450224776, "post_id": 34301702, "comment_id": 56345766, "body": "I know, right? The only other reference there is to choice in this file is int choice = 0;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450225066, "post_id": 34301702, "comment_id": 56345874, "body": "So <code>choice</code> is a variable with type <code>int</code>. You could&#39;ve said that."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450225322, "post_id": 34301702, "comment_id": 56345955, "body": "&quot; Any idea how or at least how to get to the DO SOME STUFF section?&quot; - type in a number starting with 1?"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450243727, "post_id": 34301702, "comment_id": 56350998, "body": "@pee2pee do you check what value is <code>choice</code> when you type 49 after the <code>recv(sd, &amp;choice, 1, 0)</code> line? because if <code>sd</code> is <code>string</code> or <code>char</code>, then the value copied from <code>sd</code> to <code>choice</code> could be wrong, since the value for ASCII character &quot;4&quot; is 52"}, {"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "reply_to_user": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450274750, "post_id": 34301702, "comment_id": 56369789, "body": "Thanks @Ian - figured something out that you&#39;ve helped with!"}], "answers": [{"comments": [{"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224134, "post_id": 34301720, "comment_id": 56345577, "body": "because you don&#39;t have <code>break</code>, so it goes straight to <code>default</code> which is not what you want."}, {"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224355, "post_id": 34301720, "comment_id": 56345644, "body": "I added but nothing changed"}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224918, "post_id": 34301720, "comment_id": 56345822, "body": "can you put a <code>printf( &quot;%d\\n&quot;, choice);</code> right after your <code>recv</code> line, and show the output?"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 2, "last_activity_date": 1450223982, "creation_date": 1450223982, "answer_id": 34301720, "question_id": 34301702, "link": "https://stackoverflow.com/questions/34301702/c-choice-not-being-chosen/34301720#34301720", "title": "C - Choice Not Being Chosen", "body": "<p>Always remember to <code>break</code> for each <code>case</code> of <code>switch</code> statement:</p>\n\n<pre><code>case 49:\n{\n    DO SOME STUFF;\n}\nbreak;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224341, "post_id": 34301756, "comment_id": 56345639, "body": "Amended original code and I do have this - just didn&#39;t want to type what I thought was at the time, sensitive"}, {"owner": {"reputation": 440, "user_id": 5495701, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GzlDX.png?s=128&g=1", "display_name": "Slepz", "link": "https://stackoverflow.com/users/5495701/slepz"}, "reply_to_user": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224742, "post_id": 34301756, "comment_id": 56345752, "body": "the line recv(sd, &amp;choice, 1, 0); might be wrong. You may not be receiving the whole int because your &quot;len&quot; parameter is 1"}, {"owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "edited": false, "score": 0, "creation_date": 1450224956, "post_id": 34301756, "comment_id": 56345834, "body": "So I guess that&#39;s why 111111111111 works as does 2222222 and 33333333333. Ok - unfortunately I can&#39;t edit this code directly so will need a think"}], "tags": [], "owner": {"reputation": 440, "user_id": 5495701, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/GzlDX.png?s=128&g=1", "display_name": "Slepz", "link": "https://stackoverflow.com/users/5495701/slepz"}, "is_accepted": false, "score": 0, "last_activity_date": 1450224199, "creation_date": 1450224199, "answer_id": 34301756, "question_id": 34301702, "link": "https://stackoverflow.com/questions/34301702/c-choice-not-being-chosen/34301756#34301756", "title": "C - Choice Not Being Chosen", "body": "<p>Like artm said, just add a break:</p>\n\n<pre><code>    write(sd, \"\\nWelcome!\\n\", 51);\n    write(sd, \"Please enter one of the following options:\\n\\n\", 45);\n    write(sd, \"1 - Do this\\n\", 28);\n    write(sd, \"2 - Do that\\n\", 26);\n    write(sd, \"3 - Do the other\\n\", 27);\n    fflush(stdout);\n\n    recv(sd, &amp;choice, 1, 0);\n\n    switch (choice) {\n    case 49:\n        DO SOME STUFF\n        break;\n    default:\n    write(sd, \"Invalid choice!\\n\", 17);\n    break;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 0, "last_activity_date": 1450225346, "creation_date": 1450225346, "answer_id": 34301933, "question_id": 34301702, "link": "https://stackoverflow.com/questions/34301702/c-choice-not-being-chosen/34301933#34301933", "title": "C - Choice Not Being Chosen", "body": "<p><code>choice</code> is a variable of type <code>int</code>. An <code>int</code> is 4 or 8 bytes on the most common platforms. <code>read</code>ing 1 byte into an <code>int</code> can yield unpredictable results, so you shouldn't do it.</p>\n\n<p>Additionally, the character '1' is different from the number 1. In fact, the character '1' has a value of 49 (again, on the most common platforms). And <code>read</code> reads characters, not numbers - if you type <code>1</code>, the first byte it reads will have the value 49.</p>\n"}], "owner": {"reputation": 3143, "user_id": 544542, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/502440725/picture?type=large", "display_name": "pee2pee", "link": "https://stackoverflow.com/users/544542/pee2pee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1450225346, "creation_date": 1450223895, "last_edit_date": 1450224312, "question_id": 34301702, "link": "https://stackoverflow.com/questions/34301702/c-choice-not-being-chosen", "title": "C - Choice Not Being Chosen", "body": "<pre><code>        write(sd, \"\\nWelcome!\\n\", 51);\n        write(sd, \"Please enter one of the following options:\\n\\n\", 45);\n        write(sd, \"1 - Do this\\n\", 28);\n        write(sd, \"2 - Do that\\n\", 26);\n        write(sd, \"3 - Do the other\\n\", 27);\n        fflush(stdout);\n\n        recv(sd, &amp;choice, 1, 0);\n\n        switch (choice) {\n        case 49:\n        fp = popen(\"/bin/df\", \"r\");\n        if (fp == NULL) {\n            printf(\"Failed to run command\\n\");\n            exit(1);\n        }\n        while (fgets(path, sizeof(path), fp) != NULL) {\n            sgnet_writes(sd, path);\n\n        }\n        break;\n        default:\n        write(sd, \"Invalid choice!\\n\", 17);\n        break;\n</code></pre>\n\n<p>So when I type in 49, I get the invalid choice message. Any idea how or at least how to get to the DO SOME STUFF section?</p>\n\n<p>If I type in any number starting with 1, it choose first option, any number starting with 2, the second, any number starting with 3, its the 3rd option. Any number starting with 4 or above, it fails</p>\n\n<p>Thanks</p>\n"}]