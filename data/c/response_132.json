[{"tags": ["c", "arrays", "struct", "hash"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1500506058, "post_id": 45202541, "comment_id": 77372088, "body": "&quot;because of this errors&quot; - well maybe include them in the question? and please, format your code better... it&#39;s hardly readable this way"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500506059, "post_id": 45202541, "comment_id": 77372089, "body": "you have to show the errors"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1500506104, "post_id": 45202541, "comment_id": 77372103, "body": "<code>a[i].k = -1;</code> : <code>a[i].k;</code> is array, not an <code>int</code>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500506209, "post_id": 45202541, "comment_id": 77372130, "body": "a[i].k is an array of 9 integers. Which one are you trying to set to -1? All of them, the first one...?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500506412, "post_id": 45202541, "comment_id": 77372169, "body": "@pm100 all of them but \u0131 am trying write to a[27] array and print it"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500506522, "post_id": 45202541, "comment_id": 77372203, "body": "for(int i = 0;i&lt;27;i++){ \tfor(int L=0;L&lt;9;L++) \t\ta[i].k[L] = -1; }"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500506856, "post_id": 45202541, "comment_id": 77372322, "body": "@EsmaeelE \u0131 edited put function. -1 is just a check if(a[h(data.k)].k == -1) empty or full"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500507008, "post_id": 45202541, "comment_id": 77372361, "body": "@haktans4 Its not clear first you must initialize struct elements. for example assign some arbitrary value (-1) to it."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1500507170, "post_id": 45202541, "comment_id": 77372414, "body": "I ask again , what are you trying to do with this line <code>a[i].k = -1;</code>. Which of the 9 k integers in are you try to set to -1. If all of them then you need another loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "edited": false, "score": 0, "creation_date": 1500507270, "post_id": 45202541, "comment_id": 77372439, "body": "I initialize sturct from main. v data;  srand(time(NULL));  for(int i=0;i&lt;27;i++)     {for(int j=0;j&lt;9;j++){                 if(j==0){                     data.k[j]=1;                 }                 else if(j==1){                     data.k[j]=rand() % 6 ;                 }                 else if(j==2){                     data.k[j]=0;                 }                 else if(j==6){                     data.k[j]=rand() % 5;                 }                 else {                     data.k[j]=rand() % 10 ;                 }             }             put(data);  }"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1500507365, "post_id": 45202541, "comment_id": 77372460, "body": "the error you show on <code>if(a[h(data.k)].k == -1)</code>. h is a function that takes a single integer. You are passing it an array of 9 integers. That cant work. What integer do you want to pass to h?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500507424, "post_id": 45202541, "comment_id": 77372473, "body": "@pm100 no \u0131 am trying to check it if(a[h(data.k)].k is -1 thats mean a[h(data.k)].k is free. \u0131 can add a value in it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500507572, "post_id": 45202541, "comment_id": 77372502, "body": "@pm100 ooo \u0131 get it.Thats right . k mean student number and v is student code . how can check it in my way ? with another int element ?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500507664, "post_id": 45202541, "comment_id": 77372538, "body": "Let&#39;s put it this way, if you declare <code>int k[9] = {1,2,3,4,5,6,7,8,9};</code> you can&#39;t do <code>if ( k == -1 )</code>, becuase you cannot compare an array directly with a scalar."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500507783, "post_id": 45202541, "comment_id": 77372571, "body": "@Bob__ yes \u0131 cant reconize it. But \u0131 must create hash table. And \u0131 need to check free spaces in memory. what can \u0131 do for this ?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500507951, "post_id": 45202541, "comment_id": 77372613, "body": "By <i>&quot;k mean student number and v is student code&quot;</i> do you mean that k is a 9 digits number and v is a 10 digits one (I noted that your hash function only takes a single <code>int</code>)?. If that is the case you don&#39;t need two arrays, but just two <code>int</code>s."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508283, "post_id": 45202541, "comment_id": 77372707, "body": "You should use char * for student number. not int[9]. Thats very unnatural.The you can use NULL as meaning empty."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500508294, "post_id": 45202541, "comment_id": 77372712, "body": "@Bob__ yes when \u0131 wanna get student data when \u0131 enter value in main  and program must print &#39;v&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508438, "post_id": 45202541, "comment_id": 77372754, "body": "@pm100 yes but hash table need int value for placement"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500508600, "post_id": 45202541, "comment_id": 77372809, "body": "Change your <a href=\"https://en.wikipedia.org/wiki/Hash_function\" rel=\"nofollow noreferrer\">hash function</a> so that it takes an array (of ints or chars) and returns a single int. You can, for example, sum all the values in the array and <i>then</i> take the remainder."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "edited": false, "score": 0, "creation_date": 1500508760, "post_id": 45202541, "comment_id": 77372851, "body": "\u0131m done with arrays for this example. I use linked list  because \u0131 cant handle it"}], "owner": {"user_type": "does_not_exist", "display_name": "user7139187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500506723, "creation_date": 1500505955, "last_edit_date": 1500506723, "question_id": 45202541, "link": "https://stackoverflow.com/questions/45202541/adding-hash-table-struct-with-array", "title": "adding hash table struct with array", "body": "<pre><code>typedef struct veri{\nint k[9],v[10];\n}v;\nv a[27];\nint h(int x){\nreturn x%27;\n}\n\n\nint put (v data){\nif(a[h(data.k)].k == -1){\n    a[h(data.k)] = data;\n    return 1;\n}\nelse {\n    int donusSayisi =0;\n    int indis = h(data.k);\n    while(a[indis].k != data.k &amp;&amp; a[indis].k!=-1){\n    //printf(\"%d %d %d \\n\",a[indis].k, data.k, indis);\n        indis ++;\n        if(indis&gt;=27){\n            if(donusSayisi&gt;=1){\n                printf(\"hashtable dolu\\n\");\n                return -1;\n            }\n            indis = indis %27;\n            donusSayisi++;\n        }\n    }\n\n    a[indis].v[indis]= data.v[indis];\n    a[indis].k[indis] = data.k[indis];\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>\u0131 am trying create hash table with array .But \u0131 cant add it .I cant put it and get it.Where is my mistake.I am getting crazy because of this errors.This not my all code just a part..</p>\n\n<pre><code>if(a[h(data.k)].k == -1){\n</code></pre>\n\n<p>passing argument 1 of 'h ' makes integer from pointer without a cast \ncomparison between pointer and  integer </p>\n\n<pre><code>return a[indis].v;\n</code></pre>\n\n<p>return makes integer from pointer without cast</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1500505186, "post_id": 45202397, "comment_id": 77371815, "body": "Probably because you corrupted the heap."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1500505278, "post_id": 45202397, "comment_id": 77371840, "body": "Or more specifically: You&#39;ll notice that <code>p[2]</code> and <code>*p[0]</code> have the same address - the third pointer overwrote the first number. Same for <code>p[4]</code> and <code>*p[1]</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1500505304, "post_id": 45202397, "comment_id": 77371846, "body": "<code>p = malloc(sizeof(int*));</code> only allocates memory for one <code>int*</code> but the later <code>p[i] = k;</code> breaks it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1500505465, "post_id": 45202397, "comment_id": 77371900, "body": "You say you know you should be using realloc to grow an array but in a momentary lapse of thought you did it this way. You realize the approach is wrong but still want to know why you are writing garbage. Hmm.... answer: write it properly :)"}, {"owner": {"reputation": 251, "user_id": 7681735, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dbced625af7bef58e9952f1cd432c15a?s=128&d=identicon&r=PG&f=1", "display_name": "SFlow", "link": "https://stackoverflow.com/users/7681735/sflow"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1500505618, "post_id": 45202397, "comment_id": 77371958, "body": "@immibis -- thanks I did not notice that.  I know its wrong. Just couldnt see what exactly is going wrong. I should have seen that malloc will give me the  next available pointer and should have seen that p[2] would be wrong."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500505717, "post_id": 45202397, "comment_id": 77371992, "body": "once you drift into Undefined Behavior land all bets are off. Things might work a bit, a lot, never,...."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500505859, "post_id": 45202397, "comment_id": 77372033, "body": "&quot; I should have seen that malloc will give me the next available pointer &quot; That no what malloc does. It allocates a block of memory and returns a pointer to it. <code>malloc(sizeof(int*))</code> is returning you a pointer to a block of memory big enough to hold a pointer. Almost certainly what you dont want"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500505920, "post_id": 45202397, "comment_id": 77372049, "body": "@WeatherVane Nothing wrong with wanting to understand why undefined behaviour works a particular way on one platform - it can give you deeper insight into the platform."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1500506452, "post_id": 45202397, "comment_id": 77372185, "body": "@immibis yes I do see the value as I have remarked in other questions, but many commenters here will say &quot;undefined behaviour (end of)&quot;. Even at a job interview. Like with a college interview: they want more than a 2 word answer."}], "answers": [{"tags": [], "owner": {"reputation": 5525, "user_id": 576857, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8ec04b9d97b033d197d40642de73a4bc?s=128&d=identicon&r=PG", "display_name": "Al Kepp", "link": "https://stackoverflow.com/users/576857/al-kepp"}, "is_accepted": false, "score": 0, "last_activity_date": 1500506426, "last_edit_date": 1500506426, "creation_date": 1500505734, "answer_id": 45202505, "question_id": 45202397, "link": "https://stackoverflow.com/questions/45202397/understanding-this-behavior-with-allocating-integer-array-in-c/45202505#45202505", "title": "Understanding this behavior with allocating integer array in C", "body": "<p>Your code is wrong. You declare <code>p</code> as single pointer to pointer, but then you use it as an array of <code>size</code> items. To do that you must allocate the array of required size. Your current <code>p = malloc(sizeof(int*))</code> allocates just a single pointer, correct code would be <code>p = (int**)malloc(size * sizeof(int*))</code>.</p>\n\n<p>I tested your code in Visual Studio and I can't see any garbage in p[0] and p[1]. I assume it is based on how your compiler and/or operating system organizes heap. Since you didn't specify them in your question, it is hard to comment.</p>\n\n<p>So you don't allocate memory for <code>p[1]</code> to <code>p[4]</code>. But you write values to there. So where do you think those values actually go? Those values are written to RAM, but it is not a memory you own for p[] array. Those two strange numbers -71290384 and -71290352 are actually values you wrote to <code>p[2]</code> and <code>p[4]</code>. (It is ff8ffbc031f0 hex and ff8ffbc03210 hex respectively, upper bit is set but that is irrelevant.) It is because when you write to <code>p[2]</code>, you actually write to memory allocated for that other local <code>k</code>. This behavior depends on concrete heap organization, so it differs on other operating systems and/or compilers.</p>\n\n<p>Also, while p[2] and p[4] are accidentally written to memory allocated for other variables, it seems that by writing to unallocated p[1] and p[3] you corrupted your heap.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1500506884, "creation_date": 1500506884, "answer_id": 45202670, "question_id": 45202397, "link": "https://stackoverflow.com/questions/45202397/understanding-this-behavior-with-allocating-integer-array-in-c/45202670#45202670", "title": "Understanding this behavior with allocating integer array in C", "body": "<p>The statement</p>\n\n<pre><code>p = malloc(sizeof(int*));\n</code></pre>\n\n<p>only allocates a single element to <code>p</code>; <code>p[1]</code> through <code>p[4]</code> don't exist (or, more properly, you don't own the memory corresponding to those elements).  To allocate a <code>size</code>-element array of <code>int *</code>, that line needs to be</p>\n\n<pre><code>p = malloc( size * sizeof *p ); // sizeof *p == sizeof (int *)\n</code></pre>\n\n<p>Also, </p>\n\n<pre><code>int *k;\nk = malloc(sizeof(int));\n*k = i;\np[i] = k;\n</code></pre>\n\n<p>could simply be written as</p>\n\n<pre><code>p[i] = malloc( sizeof *p[i] ); // sizeof *p[i] == sizeof (int)\nif ( p[i] ) // **always** check the result of a malloc, calloc, or realloc call!\n  *p[i] = i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1500506999, "creation_date": 1500506999, "answer_id": 45202688, "question_id": 45202397, "link": "https://stackoverflow.com/questions/45202397/understanding-this-behavior-with-allocating-integer-array-in-c/45202688#45202688", "title": "Understanding this behavior with allocating integer array in C", "body": "<p>The program has undefined behavior. Nevertheless I can explain the result of this program run.</p>\n\n<p>Usually when a memory allocation request is less than the size of the paragraph that is usually equal to 16 bytes then the function <code>malloc</code> allocates a chunk of memory exactly equal to the size of paragraph.</p>\n\n<p>So after this statement</p>\n\n<pre><code>p = malloc(sizeof(int*));\n</code></pre>\n\n<p>there was allocated 16 bytes at address</p>\n\n<pre><code>p = 0x7f8ffbc031c0\n</code></pre>\n\n<p>Thus you can use addresses </p>\n\n<p><code>0x7f8ffbc031c0</code> and <code>0x7f8ffbc031c8</code> that belong to the allocated extent.</p>\n\n<p>The first and the second chunks allocated in the loop by the statement</p>\n\n<pre><code>k = malloc(sizeof(int));\n</code></pre>\n\n<p>is</p>\n\n<pre><code>0x7f8ffbc031d0\n0x7f8ffbc031e0\n</code></pre>\n\n<p>In the same loop due to the statement</p>\n\n<pre><code>    p[i] = k;\n</code></pre>\n\n<p>there are accesses the memory beyond the allocated extent pointed to by the pointer <code>p</code>.</p>\n\n<p>so you have for the expression <code>p[i]</code> sequentially</p>\n\n<pre><code>0x7f8ffbc031c0   - p[0] \n0x7f8ffbc031c8   - p[1]\n0x7f8ffbc031d0   - p[2]  - Oops! the address 0x7f8ffbc031d0 is overwritten\n0x7f8ffbc031d8   - p[3]  \n0x7f8ffbc031e0   - p[4]  - Oops! the address 0x7f8ffbc031e0 is overwritten!\n</code></pre>\n\n<p>So the first two addresses where the first two integers were stored are overwritten.</p>\n"}], "owner": {"reputation": 251, "user_id": 7681735, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dbced625af7bef58e9952f1cd432c15a?s=128&d=identicon&r=PG&f=1", "display_name": "SFlow", "link": "https://stackoverflow.com/users/7681735/sflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 45202688, "answer_count": 3, "score": 0, "last_activity_date": 1500506999, "creation_date": 1500505104, "question_id": 45202397, "link": "https://stackoverflow.com/questions/45202397/understanding-this-behavior-with-allocating-integer-array-in-c", "title": "Understanding this behavior with allocating integer array in C", "body": "<p>I know I should be using realloc to grow an array but in a momentary lapse of thought I did it this way. I realize the approach is wrong as I am corrupting the heap by growing it without allocating the array. So I am essentially writing garbage. But when the code is small and nothing else is happening I don't see why this should not work. I get garbage for the first few values </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int **p = NULL;\n    int i=0;\n    int size = 5;\n    int *n = NULL;\n\n    p = malloc(sizeof(int*));\n\n    printf(\"p = %p \\n\", p);\n\n    for( i=0; i &lt; size; i++ )\n    {\n        int *k;\n        k = malloc(sizeof(int));\n        *k = i;\n        p[i] = k;\n        printf(\"%p, %p, val = %d \\n\", k, p[i], *k);\n    }\n\n    printf(\"Now print the array -- \\n\");\n    for( i=0; i &lt; size; i++ )\n    {\n        int *k;\n        k = p[i];\n        printf(\"value at mem %p == %d \\n\", p[i], *k);\n    }\n\n    printf(\"now print the next values in p \\n\");\n    for( i=0; i &lt; size; i++ )\n    {\n        printf(\"value at %p = %p \\n\", p+i, *(p+i) );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is the output of the code -- </p>\n\n<pre><code>p = 0x7f8ffbc031c0\n0x7f8ffbc031d0, 0x7f8ffbc031d0, val = 0\n0x7f8ffbc031e0, 0x7f8ffbc031e0, val = 1\n0x7f8ffbc031f0, 0x7f8ffbc031f0, val = 2\n0x7f8ffbc03200, 0x7f8ffbc03200, val = 3\n0x7f8ffbc03210, 0x7f8ffbc03210, val = 4\nNow print the array --\nvalue at mem 0x7f8ffbc031d0 == -71290384\nvalue at mem 0x7f8ffbc031e0 == -71290352\nvalue at mem 0x7f8ffbc031f0 == 2\nvalue at mem 0x7f8ffbc03200 == 3\nvalue at mem 0x7f8ffbc03210 == 4\nnow print the next values in p\nvalue at 0x7f8ffbc031c0 = 0x7f8ffbc031d0\nvalue at 0x7f8ffbc031c8 = 0x7f8ffbc031e0\nvalue at 0x7f8ffbc031d0 = 0x7f8ffbc031f0\nvalue at 0x7f8ffbc031d8 = 0x7f8ffbc03200\nvalue at 0x7f8ffbc031e0 = 0x7f8ffbc03210\n</code></pre>\n\n<p>I cannot explain why the first two values are garbage even though the memory address pointed to by p and p+1 are what I put there.</p>\n"}, {"tags": ["c++", "c", "windows", "wdk", "kernel-mode"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1500506493, "post_id": 45202359, "comment_id": 77372197, "body": "Welcome to Stack Overflow. Your post in its current form is unclear and not a good fit for Stack Overflow. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1500514097, "post_id": 45202359, "comment_id": 77374030, "body": "The canonical method is an IOCTL.  The user-mode call is the DeviceIoControl function.  You can either call this in a separate thread or use asynchronous I/O.  One of the ways the kernel mode driver might deal with such a request when it arrives would be to requeue it to a separate queue that is configured to use the manual dispatch method; that way, when you needed to send the message to user mode, you would just pull the pending request out of the queue with WdfIoQueueRetrieveNextRequest and then complete it as normal."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1500514236, "post_id": 45202359, "comment_id": 77374070, "body": "... the message from the driver should probably include an ID number of some kind, so that when the user-mode program sends an IOCTL to say &quot;true&quot; or &quot;false&quot; it can include the ID number so the driver knows which message the IOCTL is responding to."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1500515968, "post_id": 45202359, "comment_id": 77374484, "body": "ioctl or read call from the user is the correct way.  Call it and wait for the data.  You can&#39;t push from the kernel because you don&#39;t know where to push it to or whether the user process still exists."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 2, "last_activity_date": 1500534038, "creation_date": 1500534038, "answer_id": 45207498, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication/45207498#45207498", "title": "Kernel-Mode to User-Mode communication", "body": "<p>You probably need three IOCTLs.</p>\n\n<ol>\n<li>IOCTL_READ_FROM_KERNEL.  Initially sent after connection, and waits for the first kernel message</li>\n<li>IOCTL_RESPOND_AND_READ_FROM_KERNEL.   Sends a response, and waits for the next message.</li>\n<li>IOCTL_RESPOND.    Sends a response.</li>\n</ol>\n\n<p>The user mode code calls an IOCTL.  IOCTL_RESPOND returns immediately, and the thread probably exits.</p>\n\n<p>The other 2 IOCTLs will wait till kernel has something to send.  This will include some form of ID which can be used to identify the message.\nWhen kernel has a message, it can look for waiting UM threads to send to, or alternatively queue up the message for later delivery.</p>\n\n<p>When a UM connects, it pulls off the delivery queue, or gets added to the waiter queue.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 9115825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP6Dg.gif?s=128&g=1", "display_name": "PspSetProcessPpmPolicy", "link": "https://stackoverflow.com/users/9115825/pspsetprocessppmpolicy"}, "is_accepted": false, "score": 3, "last_activity_date": 1513647303, "creation_date": 1513647303, "answer_id": 47878853, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication/47878853#47878853", "title": "Kernel-Mode to User-Mode communication", "body": "<p>You have loads of options.</p>\n\n<ol>\n<li>Ports</li>\n<li>Named Pipes</li>\n<li>Pending IOCTLs</li>\n<li>Code injection</li>\n<li>Shared Events -> now read a configuration file from user-mode</li>\n</ol>\n\n<p>The first mentioned technique is officially supported for File-System Mini-Filter device drivers, and #3 and #5 are relatively straight-forward. Whereas, #2 and #4 are more complicated and less reliable/appropriate 9 times out of 10.</p>\n\n<p>However, you can implement Named Pipes from kernel-mode with some undocumented magic; the address for NtCreateNamedPipeFile can be extracted from the KeServiceDescriptorTable. NtCreateNamedPipeFile will rely on IoCreateFile - IoCreateFile is an exported kernel-mode routine which you can freely access. Everything else is simple to implement for a  named pipe server in kernel-mode, and if you're only after client implementation, it's even simpler because all you'll need to use is simple Native API routines such as ZwCreateFile, ZwWriteFile, ZwReadFile, etc.</p>\n\n<p>I recommend you look into Ports for communication, Microsoft have some samples of their own for it over on GitHub.</p>\n"}], "owner": {"reputation": 41, "user_id": 7753334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44974869878f2f9747c2eb55a2f12b78?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoflame33", "link": "https://stackoverflow.com/users/7753334/dinoflame33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1513647303, "creation_date": 1500504869, "question_id": 45202359, "link": "https://stackoverflow.com/questions/45202359/kernel-mode-to-user-mode-communication", "title": "Kernel-Mode to User-Mode communication", "body": "<p>I'm aware about communicating to kernel-mode from user-mode and I also know of events/inverted calls however I need to send a string value down to a user-mode process from a kernel-mode device driver and then wait in KM for a response (e.g. TRUE or FALSE BOOLEAN).</p>\n\n<p>Take the string \"c:\\file.txt\". Now I need the KM device driver to send this string down to user-mode and then have that UM program re-send back a TRUE or FALSE response for the driver to process. </p>\n\n<p>I've been through a lot of website topics/posts, documentation samples and cannot find what I am looking for.</p>\n\n<p>I was thinking that maybe I could setup a thread in the user-mode program which just continuously waits for data to come down and then in KM I somehow pause until a response is returned back... not sure</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c", "gtk3", "jack"], "comments": [{"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500512992, "post_id": 45202355, "comment_id": 77373743, "body": "Gtk is thread aware but not thread safe. Gtk functions/methods should be called from the main thread, the one on which gtk_main/mainloop is. GLib however is thread safe with some remarks."}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500541944, "post_id": 45202355, "comment_id": 77386729, "body": "so i shouldn&#39;t call the signal from the other 2 threads? Still i can&#39;t understand which thread is doing what..."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500546406, "post_id": 45202355, "comment_id": 77390057, "body": "Yes, signals are called from the &quot;main thread&quot;. Basically, functions/methods that are used to update the GUI must be called from the main thread. We can&#39;t help you more without a better explanation or code on your question."}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500556608, "post_id": 45202355, "comment_id": 77397835, "body": "following your advice i uploaded the code that emits the signal, still the interface isn&#39;t properly working, in fact sometimes it will not update correctly two combobox or just crash"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1500556799, "post_id": 45202355, "comment_id": 77398023, "body": "<i>&quot;So, my question is: who is modifying the GUI? the helper/RT thread or the gui thread in which i used gtk_main() ?&quot;</i> I&#39;m not sure that&#39;s a question. Your wording makes it unclear what you&#39;re asking, if anything. Are you saying some mysterious modifications are occurring and asking us to psychically guess who is responsible? Or are you asking which thread you should use to modify things deliberately? There does not seem to be any question or problem statement here that I can discern."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500557105, "post_id": 45202355, "comment_id": 77398315, "body": "@Gionata Benelli those <code>g_signal_emit_by_name</code> from the thread are part of the problem. You must have another way to pass the information from the thread to the main thread. I&#39;ll look into it..."}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1500557346, "post_id": 45202355, "comment_id": 77398518, "body": "@underscore_d maybe i wasn&#39;t clear enough, i was asking if the signal_callback were executed by the working thread or the GUI thread, the main one, even if the signal is emitted by another  thread."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1500557697, "post_id": 45202355, "comment_id": 77398827, "body": "Not sure but I think unless you use <code>g_idle_add()</code> then the signal emission occurs in the thread doing the emission, and therefore that signal&#39;s handlers might be called from there too."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1500557758, "post_id": 45202355, "comment_id": 77398885, "body": "I think this may effectively be a duplicate of <a href=\"https://stackoverflow.com/questions/30551986/are-gtk-callbacks-called-from-the-main-thread-when-using-gtk-main-iteration\">Are GTK Callbacks called from the main thread when using gtk_main_iteration?</a>"}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500557792, "post_id": 45202355, "comment_id": 77398922, "body": "@Jos&#233; Fonte since the data i need to exchange goes only in one way, should i make the gtk_list_store associated with each combo box global and directly modify that?"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500558023, "post_id": 45202355, "comment_id": 77399113, "body": "@GionataBenelli No, don&#39;t use Gtk functions on the threads. A simple way, since it&#39;s basically one way, could be the use of GLib <a href=\"https://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html\" rel=\"nofollow noreferrer\">AsyncQueue</a> but before that i&#39;m trying to understand the need. Why you need to &quot;simulate&quot; the clicked signal on the button?"}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500558246, "post_id": 45202355, "comment_id": 77399284, "body": "@Jos&#233; Fonte well i wanted to separate the gui from the sound processing, so i thought to use that signaling mechanism to have some sort of asynch callback. The function i&#39;m calling its just updating the gtk_list_store of 2 combobox, which shows the jack_ports accessible from my client. the list of ports name (char**) is stored inside the appData structure"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500558730, "post_id": 45202355, "comment_id": 77399705, "body": "@GionataBenelli ok, i think i understand. You want to update the UI when the state of jack ports change. You must separate concerns, workers should not update the UI but inform the main thread which will update accordingly. An answer would be to pass an async_queue which would push data and a g_iddle_add would try a pop from the queue, if there is some data then &quot;parse it&quot; and change the UI. Or simply provide status methods that the main thread can pool to update the UI."}, {"owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500559169, "post_id": 45202355, "comment_id": 77400153, "body": "@Jos&#233;Fonte, so if i get this clear: i should send some data in this async queue and then pop it from this g_idle_add and modify my UI, it&#39;s correct?"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1500560670, "post_id": 45202355, "comment_id": 77401400, "body": "@GionataBenelli Yes, check my answer."}], "answers": [{"tags": [], "owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "is_accepted": true, "score": 2, "last_activity_date": 1500660663, "last_edit_date": 1500660663, "creation_date": 1500560314, "answer_id": 45217379, "question_id": 45202355, "link": "https://stackoverflow.com/questions/45202355/gtk3-0-multithreaded-application/45217379#45217379", "title": "GtK+3.0 multithreaded application", "body": "<p>Following the comments, a suggestion would be to exchange the <code>g_signal_emit_by_name</code> functions for <code>g_async_queue_*</code> functions.</p>\n\n<p>Let suppose that <code>mainData-&gt;init</code> points to a <a href=\"https://developer.gnome.org/glib/stable/glib-Asynchronous-Queues.html\" rel=\"nofollow noreferrer\">GAsyncQueue</a> created in the main thread instead of the actual button.</p>\n\n<p>Then you could use on your thread:</p>\n\n<pre><code>g_async_queue_push(G_ASYNC_QUEUE(mainData-&gt;init), data);\n</code></pre>\n\n<p>Data can contain a simple flag to indicate the status and/or status change</p>\n\n<p>Then on your main thread, when you setup the UI, you could add the idle handler with:</p>\n\n<pre><code>my_queue = g_async_queue_new();\n...\ng_idle_add ((GSourceFunc) check_async_queue, my_queue); \n</code></pre>\n\n<p>and your <code>check_async_queue</code> could be something like this:</p>\n\n<pre><code>gboolean check_async_queue (gpointer user_data) {\n   gpointer queue_data;\n\n   queue_data = g_async_queue_try_pop (G_ASYNC_QUEUE(user_data));\n\n   if (queue_data != NULL) {\n      // We have data, do something with 'queue_data'\n      // and update GUI\n\n   } else {\n      // no data, probably do nothing\n\n   }\n\n   return TRUE; // can be G_SOURCE_CONTINUE instead of TRUE\n}\n</code></pre>\n\n<p>The return value will indicate if the <code>check_async_queue</code> function should keep running or not, so you can have a condition to remove the function.</p>\n\n<p>This will allow you to have a simple one way message queue that you can use to pass information from the worker thread to the main thread.</p>\n"}], "owner": {"reputation": 327, "user_id": 8334563, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10213396470176342/picture?type=large", "display_name": "Gionata Benelli", "link": "https://stackoverflow.com/users/8334563/gionata-benelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 0, "accepted_answer_id": 45217379, "answer_count": 1, "score": 0, "last_activity_date": 1500660663, "creation_date": 1500504845, "last_edit_date": 1500556383, "question_id": 45202355, "link": "https://stackoverflow.com/questions/45202355/gtk3-0-multithreaded-application", "title": "GtK+3.0 multithreaded application", "body": "<p>here's my problem:\nI'm developing a multithreaded application composed by:</p>\n\n<ul>\n<li>GUI thread-> GTK </li>\n<li>helper thread --> checking connection to JACK server</li>\n<li>RT thread of jack--> doing some sound-elaboration stuff</li>\n</ul>\n\n<p>I have implemented a button widget, that only receives signals from the helper and RT thread, that modify the gui in its callback function.</p>\n\n<p>So, my question is: who is modifying the GUI? the helper/RT thread or the gui thread in which i used  gtk_main() ?</p>\n\n<p>Thanks for your collaboration!</p>\n\n<p>edit: i added the code\n   /** @file JPLowPassFilter.c\n *\n * @brief this is a simple client that implements a numeric low Frequency Pass Filter\n */</p>\n\n<pre><code>#include \"JPLowPassFilter.h\" \njack_port_t *input_port;\njack_port_t *output_port;\n\njack_default_audio_sample_t tmp;\nint first=1;\nappData* mainData;\njack_default_audio_sample_t tmp;\n\n/*Code for port_registration_callback */\nvoid registrationPort(jack_port_id_t port, int reg, void *arg)\n{\n    return;\n}\n\n/*Code for client_registration_callback */\nvoid registrationClient(const char* name, int reg, void *arg)\n{\n    return;\n\n}\n/**\n * The process callback for this JACK application is called in a\n * special realtime thread once for each audio cycle.\n * Must not block!\n */\nint process (jack_nframes_t nframes, void *arg)\n{ \n    int i;\n    float alfa=mainData-&gt;alfa;\n    jack_default_audio_sample_t *in, *out;\n    in = jack_port_get_buffer (input_port, nframes);\n    out = jack_port_get_buffer (output_port, nframes);\n    for( i=0; i&lt;nframes; i++) {\n        if(first==1){\n            tmp=in[i];\n            first=0;\n        }\n        else{\n            tmp=tmp*alfa+(1.0f-alfa)*in[i];\n            //tmp=tmp*(1.0f-alfa)+alfa*in[i];\n        }\n        out[i]=tmp;\n    }\n    //fprintf (stderr, \".\");\n    return 0;      \n}\n\n/**\n * JACK calls this shutdow_callback if the server ever shuts down or\n * decides to disconnect the client\n */\nvoid jack_shutdown (void *arg)\n{ \n    mainData-&gt;state=NOT_WORKING;\n    jack_port_unregister(mainData-&gt;client,input_port);\n    jack_port_unregister(mainData-&gt;client, output_port);    \n    g_signal_emit_by_name (GTK_BUTTON(mainData-&gt;init),\"clicked\");\n}\n\n/* JACK calls this function whenever there is an xrun */\nint xrun_function(void *arg)\n{\n    fprintf (stderr, \"--XRUN OCCURRED--\\n\");    \n}\n\nvoid* threadCode(void* val)\n{\n    const char *client_name = CLIENT_NAME;\n    const char *server_name = NULL;\n    mainData=(appData*) val;\n    /* if server isn't present, don't start it!*/ \n    jack_options_t options =JackNoStartServer; \n    jack_status_t status;\n    do{\n        /* try to open a client connection to the JACK server */\n        mainData-&gt;client = jack_client_open (client_name, options, &amp;status, server_name);\n        if (mainData-&gt;client == NULL) \n        {\n            fprintf (stderr, \"jack_client_open() failed, \"\n                 \"status = 0x%2.0x\\n\", status);\n            if (status &amp; JackServerFailed) {\n                fprintf (stderr, \"Unable to connect to JACK server\\n\");\n            }\n            sleep(3);\n        }\n        else\n        {\n            fprintf (stderr, \"Connected to JACK server\\n\");\n            mainData-&gt;state=INIT;\n            /*  CALLBACKS*/\n            jack_set_process_callback (mainData-&gt;client, process, 0);\n            jack_on_shutdown (mainData-&gt;client, jack_shutdown, mainData);\n            jack_set_xrun_callback(mainData-&gt;client,xrun_function, 0);  \n            jack_set_port_registration_callback (mainData-&gt;client, registrationPort,NULL);\n            jack_set_client_registration_callback(mainData-&gt;client, registrationClient,NULL);\n\n            /* PORTS */\n            input_port = jack_port_register (mainData-&gt;client, \"input\", JACK_DEFAULT_AUDIO_TYPE,JackPortIsInput, 0);\n            output_port = jack_port_register (mainData-&gt;client, \"output\", JACK_DEFAULT_AUDIO_TYPE, JackPortIsOutput, 0);\n            mainData-&gt;state=INIT;\n            if ((input_port == NULL) || (output_port == NULL)) \n            {\n                fprintf(stderr, \"no more JACK ports available\\n\");\n                mainData-&gt;state=NOT_WORKING;\n            }\n            /* STARTS */\n            else if (jack_activate (mainData-&gt;client)) {\n                fprintf (stderr, \"cannot activate client\");\n                jack_port_unregister(mainData-&gt;client,input_port);\n                jack_port_unregister(mainData-&gt;client, output_port); \n                mainData-&gt;state=NOT_WORKING; \n            }\n            else  \n            {\n                fprintf (stderr, \"Client ready to Run\\n\");\n                mainData-&gt;state=WORKING;\n                mainData-&gt;portsName[0]=jack_port_name(input_port);\n                mainData-&gt;portsName[1]=jack_port_name(output_port);\n            }\n             //can be written to\n                        mainData-&gt;inputList=jack_get_ports(mainData-&gt;client,NULL, NULL,JackPortIsInput);\n                        //can be read from\n            mainData-&gt;outputList=jack_get_ports(mainData-&gt;client,NULL, NULL,JackPortIsOutput);\n            g_signal_emit_by_name (GTK_BUTTON(mainData-&gt;init),\"clicked\");\n            while(mainData-&gt;state==WORKING)\n            {\n                sleep(5);\n                fprintf (stderr, \".\");\n            }\n            fprintf (stderr, \"\\n\");\n                jack_free(mainData-&gt;inputList);\n            jack_free(mainData-&gt;outputList);\n            mainData-&gt;outputList=NULL;\n            mainData-&gt;inputList=NULL;\n            jack_client_close (mainData-&gt;client);       \n        }\n        fprintf (stderr, \"---RECONNECT---\\n\");\n    }while(mainData-&gt;state==NOT_WORKING);\n    fprintf (stderr, \"Ended!\\n\");\n\n    pthread_exit(NULL);\n}\n</code></pre>\n"}, {"tags": ["c", "io", "stdout"], "comments": [{"owner": {"reputation": 2622, "user_id": 1834967, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Fdxei.jpg?s=128&g=1", "display_name": "Felix Guo", "link": "https://stackoverflow.com/users/1834967/felix-guo"}, "edited": false, "score": 0, "creation_date": 1500504108, "post_id": 45202151, "comment_id": 77371481, "body": "I would recommend looking at the source code of various <code>cat</code> implementations to see how they <code>concat</code> / <code>write</code> the contents of a file onto the screen."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1500504117, "post_id": 45202151, "comment_id": 77371485, "body": "<code>char buff[BUFSIZ]; while(fgets(buff, sizeof buff, fp)) fputs(buff, stdout);</code> ?"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500504215, "post_id": 45202151, "comment_id": 77371522, "body": "@BLUEPIXY That&#39;s the point-- in my post I stated that I wish to avoid casting char buff[BUFSIZ] in every single call-- because this function gets called a lot, and casting and removing an array on the stack is very expensive."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1500504280, "post_id": 45202151, "comment_id": 77371537, "body": "I doubt it&#39;s very expensive to create an array on the stack, but if that&#39;s your concern, make the array static or global."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1500504347, "post_id": 45202151, "comment_id": 77371558, "body": "You only need to create an array once for each file you print out. Is it really that much of an overhead?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1500504386, "post_id": 45202151, "comment_id": 77371574, "body": "@Alex allocate and deallocate are not done every call."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1500504409, "post_id": 45202151, "comment_id": 77371581, "body": "@squeamishossifrage No-- once for every call to the function that does the printing-- or am I missing something?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1500504526, "post_id": 45202151, "comment_id": 77371621, "body": "Yes, if you create the array inside a function it&#39;s allocated on the stack each time you call the function. The allocation is basically free though, the stack pointer will be moved whether you have the array inside the function or not, so adding it just changes how far the pointer moves."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1500504661, "post_id": 45202151, "comment_id": 77371661, "body": "@RetiredNinja Thanks!  Both of your comments would work as valid solutions to my problem.  I was not aware exactly how static variables worked; and, I did not consider that stack allocation is just moving the stack pointer further."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1500504758, "post_id": 45202151, "comment_id": 77371686, "body": "You can&#39;t not store <i>anything</i> in memory, but you don&#39;t have to store a whole line in memory at a time."}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1500504721, "post_id": 45202251, "comment_id": 77371678, "body": "The suggestion of mmap deserves the +1."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 2, "creation_date": 1500505332, "post_id": 45202251, "comment_id": 77371857, "body": "@Alex At least on Linux, mmaping the file for reading is a pesimissation if the file is less than 16KiB. Check out my benchmark: <a href=\"https://stackoverflow.com/a/39196499/1084774\">stackoverflow.com/a/39196499/1084774</a>"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1500505388, "post_id": 45202251, "comment_id": 77371871, "body": "@PSkocik Sounds about right.  mmap is pretty expensive, in general."}], "tags": [], "owner": {"reputation": 108, "user_id": 4435795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c6c4d00c8e77fc5d9e31b93bef7954?s=128&d=identicon&r=PG&f=1", "display_name": "Yuji", "link": "https://stackoverflow.com/users/4435795/yuji"}, "is_accepted": true, "score": 1, "last_activity_date": 1500504324, "creation_date": 1500504324, "answer_id": 45202251, "question_id": 45202151, "link": "https://stackoverflow.com/questions/45202151/how-to-print-file-contents-to-stdout-without-storing-them-in-memory/45202251#45202251", "title": "How to print file contents to stdout without storing them in memory?", "body": "<p>First of all you can't print things that's not exist, means that you have to store it somewhere, either in the stack or heap. If you use <code>FILE*</code> then libc will do it for you automatically.</p>\n\n<p>Now if you use <code>FILE*</code>, you can use <code>getc</code> to get an ASCII character a time, check if the character is a newline character and push it to stdout.</p>\n\n<p>If you's using file descriptor, you can <code>read</code> a character a time and do exactly the same thing.</p>\n\n<p>Both approaches does not require you explicitly allocate memory in the heap.</p>\n\n<p>Now if you use <code>mmap</code>, you can perform some <code>strtok</code> family function and then print the string to stdout. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1500508528, "post_id": 45202510, "comment_id": 77372789, "body": "<code>fget</code>?  I f&#39;gets what that function does.  :D"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500517564, "post_id": 45202510, "comment_id": 77374822, "body": "@JonathanLeffler Gue__ I <i>ometime</i> at a lo__ al_o."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1500517507, "last_edit_date": 1500517507, "creation_date": 1500505758, "answer_id": 45202510, "question_id": 45202151, "link": "https://stackoverflow.com/questions/45202151/how-to-print-file-contents-to-stdout-without-storing-them-in-memory/45202510#45202510", "title": "How to print file contents to stdout without storing them in memory?", "body": "<blockquote>\n  <p>takes in files with arbitrarily long lines ... print the whole line to stdout, without malloc-ing an array to store it. Is this possible?</p>\n</blockquote>\n\n<p>In general, for arbitrary long lines: no.</p>\n\n<blockquote>\n  <p>A text stream is an ordered sequence of characters composed into lines, each line consisting of zero or more characters plus a terminating new-line character.  C11dr \u00a77.21.2 2</p>\n</blockquote>\n\n<p>The length of a line is not limited to <code>SIZE_MAX</code>, the longest array possible in C.  The length of a line can exceed the memory capacity of the computer.  There is just <strong>no way to read arbitrary long lines</strong>.  Simply code could use the following.  I doubt it will be satisfactory, yet it does print the entire contents of a file with scant memory.</p>\n\n<pre><code>// Reads one character at a time.\nint ch;\nwhile((ch = fgetc(fp)) != EOF) {\n  putchar(ch);\n}\n</code></pre>\n\n<p>Instead, code should <strong>set a sane upper bound on line length</strong>.  Create an array or allocate for the  <em>line</em>.  As much as a flexible long line is useful, it is also susceptible to malicious abuse by a hacker exploit consuming unrestrained resources.</p>\n\n<pre><code>#define LINE_LENGTH_MAX 100000\nchar *line = malloc(LINE_LENGTH_MAX + 1);\nif (line) {\n  while (fgets(line, LINE_LENGTH_MAX+1, fp)) {\n    if (strlen(line) &gt;= LINE_LENGTH_MAX) {\n      Handle_Possible_Attach();\n    }\n    foo(line);  // Use line\n  }\n  free(line);\n)\n</code></pre>\n"}], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 1, "accepted_answer_id": 45202251, "answer_count": 2, "score": 1, "last_activity_date": 1500517507, "creation_date": 1500503784, "last_edit_date": 1500504093, "question_id": 45202151, "link": "https://stackoverflow.com/questions/45202151/how-to-print-file-contents-to-stdout-without-storing-them-in-memory", "title": "How to print file contents to stdout without storing them in memory?", "body": "<p>My program takes in files with arbitrarily long lines.  Since I don't know how much characters would be on a line, I would like to print the whole line to stdout, without malloc-ing an array to store it.  Is this possible?</p>\n\n<p>I am aware that it's possible to print these lines one chunk at a time-- however, the function doing the printing would be called very often, and I wish to avoid the overhead of malloc-ing arrays that hold the output, in every single call.</p>\n"}, {"tags": ["c", "enums", "function-pointers", "function-prototypes"], "comments": [{"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 1, "creation_date": 1500502810, "post_id": 45201934, "comment_id": 77371080, "body": "How about a union of the two enumerations?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1500503886, "post_id": 45201934, "comment_id": 77371396, "body": "See <a href=\"https://stackoverflow.com/questions/1113855/is-the-sizeofenum-sizeofint-always\">Is the sizeof(enum) == sizeof(int), always?</a>"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500540006, "post_id": 45201934, "comment_id": 77385185, "body": "Regardless of the return type.... I don&#39;t see how you can make this work since <code>a_1 == b_1, a_2 == b_2</code>, how can you interpret the result?"}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1500582409, "post_id": 45201934, "comment_id": 77415420, "body": "@jeff6times7 if you mean using <code>typedef union { enum_a_t a; enum_b_t b; } enum_u_t;</code> and defining the function pointer as <code>typedef void (* func_t)(int, float, enum_u_t *)</code>, then i get the exact same warning but with <code>enum_u_t *</code> instead of <code>int *</code> as the incompatible actual parameter"}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500583301, "post_id": 45201934, "comment_id": 77415895, "body": "@Micha&#235;lRoy those assignment statements are merely a demonstration -- they aren&#39;t meant to reflect any real functional behavior.. unless i&#39;m misunderstanding your point?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500583477, "post_id": 45201934, "comment_id": 77415988, "body": "It is a very concrete implementation issue. If the function returns 0, what is the meaning of the return value? a_1, or b_1 (.. or c_1) ?  This could be a show-stopper."}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500583628, "post_id": 45201934, "comment_id": 77416086, "body": "@Micha&#235;lRoy see my edit, maybe that helps"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500584053, "post_id": 45201934, "comment_id": 77416334, "body": "That doesn&#39;t make the issue of making sense of the return values go away.  With this system, you give away the capacity for intelligent error handling and even simple centralized error reporting.  This could lead to spaghetti creeping into the code in the not so far future.  I don&#39;t know your application, but that&#39;s something that deserves a bit of thought."}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1500585258, "post_id": 45201934, "comment_id": 77416934, "body": "@Micha&#235;lRoy &quot;With this system, you give away the capacity for intelligent error handling&quot; -- I realize without more context this design might seem confusing to you, but showing its correctness and safety is an entirely different (yet <i>provable</i>) discussion from the question at hand"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1500585363, "post_id": 45201934, "comment_id": 77416984, "body": "Sure. Your app, my doubts."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1500652176, "post_id": 45201934, "comment_id": 77449665, "body": "&quot;<i>exact same warning</i>&quot; just drop this <code>int*</code> approach but use the same function signatures for both your functions by replacing <code>enum_a_p</code> <i>and</i> <code>enum_b_p</code> by <code>enum_u_t*</code>. BTW, <code>typedef</code>ing pointer types is often considered not the cleanest style."}, {"owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1500654206, "post_id": 45201934, "comment_id": 77450946, "body": "@alk changing the declared parameter lists of those functions is going to be a nightmare for integration testing i&#39;m afraid. without that restriction, your solution certainly answers the question. but as-is, what i&#39;m asking may be silly and impossible to do in a type-safe way. it looks like i will have to pony up and ditch the function pointer. thanks for your input"}], "answers": [{"tags": [], "owner": {"reputation": 108, "user_id": 6156224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tV4AVGDhIGo/AAAAAAAAAAI/AAAAAAAAD3c/QqYI3upAQr8/photo.jpg?sz=128", "display_name": "Jonathon S.", "link": "https://stackoverflow.com/users/6156224/jonathon-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1500742776, "creation_date": 1500742776, "answer_id": 45257094, "question_id": 45201934, "link": "https://stackoverflow.com/questions/45201934/define-and-use-function-pointer-type-referring-to-functions-with-parameters-of-d/45257094#45257094", "title": "Define and use function pointer type referring to functions with parameters of different enum types", "body": "<p>Assuming that the two functions can be modified, I would change the two functions to the format:</p>\n\n<pre><code>void func_a(int ai, float af, void * ae_ptr) { /* blah */ }\nvoid func_b(int ai, float af, void * ae_ptr) { /* blah */ }\n</code></pre>\n\n<p>Then, when you enter each of the two functions, recast to the appropriate type enum_a_p or enum_b_p when referencing the data.</p>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 2904562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77e6e82a71d9209170823146567abca2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Butterweck", "link": "https://stackoverflow.com/users/2904562/michal-butterweck"}, "is_accepted": false, "score": 0, "last_activity_date": 1500756700, "last_edit_date": 1500756700, "creation_date": 1500753449, "answer_id": 45258630, "question_id": 45201934, "link": "https://stackoverflow.com/questions/45201934/define-and-use-function-pointer-type-referring-to-functions-with-parameters-of-d/45258630#45258630", "title": "Define and use function pointer type referring to functions with parameters of different enum types", "body": "<p>To call a function by function pointer with described arguments, the arguments must be compatibile. The pointers to different types are not compatible. The one solution is to declare functions without prototype and then declare the function pointer without arguments (or more precisely with undefined number of arguments):</p>\n\n<pre><code>void func_a();\nvoid func_b();\n\nvoid func_a(int ai, double af, enum_a_p ae_ptr) { /* blah */ }\nvoid func_b(int ai, double af, enum_b_p ae_ptr) { /* blah */ }\n\ntypedef void (* func_t)();\n</code></pre>\n\n<p>Alternatively, you may use ellipsis:</p>\n\n<pre><code>void func_a(int ai, double af, ...) { /* blah with varargs */ }\nvoid func_b(int ai, double af, ...) { /* blah with varargs */ }\n\ntypedef void (* func_t)(int ai, double af, ...);\n</code></pre>\n\n<p>However, please note that in both cases default type promotios apply - that's why the argument af need to be changed from float to double type.</p>\n"}], "owner": {"reputation": 1770, "user_id": 1054397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8218beaae675c36460465d04d068e69?s=128&d=identicon&r=PG", "display_name": "ardnew", "link": "https://stackoverflow.com/users/1054397/ardnew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1500756700, "creation_date": 1500502468, "last_edit_date": 1500651767, "question_id": 45201934, "link": "https://stackoverflow.com/questions/45201934/define-and-use-function-pointer-type-referring-to-functions-with-parameters-of-d", "title": "Define and use function pointer type referring to functions with parameters of different enum types", "body": "<p>I have a pair of functions that both accept multiple parameters. Both function signatures are the same type except for one enum parameter:</p>\n\n<pre><code>typedef enum { a_1, a_2, a_3 } enum_a_t;\ntypedef enum_a_t * enum_a_p;\n\ntypedef enum { b_1, b_2      } enum_b_t;\ntypedef enum_b_t * enum_b_p;\n\nvoid func_a(int ai, float af, enum_a_p ae_ptr) { /* blah */ }\nvoid func_b(int ai, float af, enum_b_p ae_ptr) { /* blah */ }\n</code></pre>\n\n<p>Now because in my head I think of enums being implemented as integers, I thought maybe I could typedef a function that is compatible with both of these signatures, something like:</p>\n\n<pre><code>typedef void (* func_t)(int, float, int *);\n</code></pre>\n\n<p>But of course when assigning either of these functions to a variable of that type (e.g. <code>func_t f_a = func_a</code>), llvm-gcc complains:</p>\n\n<pre><code>warning: incompatible pointer types initializing 'func_t' (aka 'void (*)(int, float, int *)') with an expression of type 'void (int, float, enum_a_p)' (aka 'void (int, float, enum_a_t *)') [-Wincompatible-pointer-types]\n</code></pre>\n\n<p>I realize it's only a warning and I can probably get away with it if I'm careful, but I was curious if there is a strict / type-safe way to do something like this in C? </p>\n\n<p>I would like to not have a warning on assignment, and I would like to be able to treat these functions as a common type without having to change their declared parameter lists.</p>\n\n<p><strong><em>edit</em></strong></p>\n\n<p>This is a very small example of the problem I'm experiencing in a much larger code base. Changing the declared parameter lists would require typecasting all direct invocations of those functions elsewhere in the code - a major change that would require a <em>lot</em> of integration testing (days of testing then involving others (this is on a weird embedded platform)) in areas of the code I really don't need to be modifying.</p>\n"}, {"tags": ["c", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1500500749, "post_id": 45201484, "comment_id": 77370350, "body": "You <i>cannot</i> take a lock in a signal-handler. Hence, if you want to mix async-safety and thread-safety, the common subset is either: 1) Do not modify state shared between normal execution and signal-context or 2) Use lock-free atomics. You might be able to design a lock-free list if you have an architecture where <code>ATOMIC_POINTER_LOCK_FREE</code>. A doubly-linked list will not be easy to turn lock-free atomic."}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1500500949, "post_id": 45201484, "comment_id": 77370440, "body": "See also <a href=\"https://stackoverflow.com/q/6223191/\">stackoverflow.com/q/6223191</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8334395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f4039a00a67f09a482e85657e01472?s=128&d=identicon&r=PG&f=1", "display_name": "Devvy", "link": "https://stackoverflow.com/users/8334395/devvy"}, "edited": false, "score": 0, "creation_date": 1500534639, "post_id": 45202243, "comment_id": 77381365, "body": "Thanks very much. signalfd is the correct way for me to handle the signal (SIGCHLD) properly w.r.t. the linked list."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1500504291, "creation_date": 1500504291, "answer_id": 45202243, "question_id": 45201484, "link": "https://stackoverflow.com/questions/45201484/how-to-deal-with-pthread-mutex-protected-list-in-signal-handler/45202243#45202243", "title": "How to deal with pthread mutex protected list in signal handler", "body": "<p>You don't.</p>\n\n<p>You should make the signal handler can tell one of the threads that it got a signal. Then that thread (<em>outside</em> the signal handler) can access the list.</p>\n\n<p>Alternatively, use <a href=\"https://linux.die.net/man/2/signalfd\" rel=\"nofollow noreferrer\"><code>signalfd</code></a> and don't have a signal handler at all.</p>\n"}], "owner": {"reputation": 23, "user_id": 8334395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f4039a00a67f09a482e85657e01472?s=128&d=identicon&r=PG&f=1", "display_name": "Devvy", "link": "https://stackoverflow.com/users/8334395/devvy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 45202243, "answer_count": 1, "score": 1, "last_activity_date": 1500504291, "creation_date": 1500500373, "question_id": 45201484, "link": "https://stackoverflow.com/questions/45201484/how-to-deal-with-pthread-mutex-protected-list-in-signal-handler", "title": "How to deal with pthread mutex protected list in signal handler", "body": "<p>I have a double linked list protected by a pthread mutex. How can I access this list properly from a signal handler? (Here, the signal handler is the producer and some other code (thread) is the consumer.)</p>\n\n<p>1.) I do not need to mutex_lock the list because the signal handler is the only part of the entire program that can access the list during the signal processing.</p>\n\n<p>2.) But what happens if the signal handler e.g. adds something to the list and one of the other threads was currently accessing the linked list when the signal was raised?\nIn this case I think that the code might crash when the signal handler returns (because of the list modification in the signal handler, which is not detected by the thread currently accessing the list).</p>\n\n<p>Any idea on how to deal with this scenario?</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1500497437, "post_id": 45200709, "comment_id": 77368727, "body": "You must remove the newline that <code>fgets</code> probably includes at the end of <code>temp</code>. Please <a href=\"https://stackoverflow.com/questions/2693776/removing-trailing-newline-character-from-fgets-input/28462221#28462221\">read this answer</a>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1500497493, "post_id": 45200709, "comment_id": 77368753, "body": "1) don&#39;t bean-count.  [256], say, for temp.  2) strcpy the path to temp, then strcat the name to it. 3) printf() out the full path+ filename spec so you know it&#39;s right."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500497565, "post_id": 45200709, "comment_id": 77368783, "body": "...and for <code>str</code> too, you already used up half its niggardly length which you <code>strcat</code> to. Even better when developing use strings of 1000 length and tone them down later."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1500497658, "post_id": 45200709, "comment_id": 77368838, "body": "Oh.. and you need another &#39;\\\\&#39;, something you would have seen if you had printed out the whole file spec."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500497813, "post_id": 45200709, "comment_id": 77368919, "body": "We are off topic here: give the absolute program path. I am sure this has been asked many times. Where is the working folder?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500498018, "post_id": 45200709, "comment_id": 77369024, "body": "@MartinJames - the most egregious error of them all :)"}, {"owner": {"reputation": 33, "user_id": 8334211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610428525665411/picture?type=large", "display_name": "Andrew Haworth", "link": "https://stackoverflow.com/users/8334211/andrew-haworth"}, "edited": false, "score": 0, "creation_date": 1500544187, "post_id": 45200709, "comment_id": 77388394, "body": "The working folder is on a Linux server, and I am using a remote build to a Linux workstation to run it, using Putty to check if the files are created. But I am not using remote build on the CLion project where I test the code. It crashes on the Linux remote run and not the local CLion run, which really confuses me."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500708055, "post_id": 45200709, "comment_id": 77468122, "body": "this is the source of your problem: <code>strcat(str, temp);</code>  because <code>str</code> is already over 1/2 full and <code>temp</code> is (possibly) another 30 characters.  so 16+30 =&gt; 46"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500708322, "post_id": 45200709, "comment_id": 77468195, "body": "there are several different reasons a call to <code>fopen()</code> could fail.  this line: <code>printf(&quot;File does not exist!&quot;);</code> has two problems 1) it might not be the correct reason 2) error messages are to be output to <code>stderr</code>, not <code>stdout</code>.  Suggest using: <code>perror( &quot;fopen failed&quot; );</code>   Then it will output to <code>stderr</code> and will include a message saying why the OS thinks the call failed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500708422, "post_id": 45200709, "comment_id": 77468232, "body": "the code calls: <code>fclose( file );</code>  twice in the same execution path.  This is an error, especially if the call to `fopen() failed."}], "owner": {"reputation": 33, "user_id": 8334211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610428525665411/picture?type=large", "display_name": "Andrew Haworth", "link": "https://stackoverflow.com/users/8334211/andrew-haworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500497208, "creation_date": 1500497208, "question_id": 45200709, "link": "https://stackoverflow.com/questions/45200709/reading-writing-to-a-file-a-couple-of-folders-up", "title": "Reading/writing to a file a couple of folders up", "body": "<p>I am trying to create some code where a user inputs the name of a file, and the program then travels a couple of folders up, and then into a separate folder called \"Files\", finds the file, and echoes it.</p>\n\n<pre><code>void readfile() {\n    FILE *file;\n    int c;\n    char str[30] = \"..\\\\..\\\\Files\";\n    char temp[30];\n    printf(\"Please enter the name of the file\\n\");\n    fgets(temp, sizeof (temp), stdin);\n    strcat(str, temp);\n    file = fopen(str, \"r\");\n    if (file) {\n        while ((c = getc(file)) != EOF)\n            putchar(c);\n        fclose(file);\n    } else {\n        printf(\"File does not exist!\");\n    }\n    //printf(string);\n    fclose(file);\n}\n</code></pre>\n\n<p>However, when it tries to open up a file, the program crashes in Netbeans, but it returns the \"File does not exist\" error in CLion. I am very confused and I cannot pinpoint the problem.</p>\n"}, {"tags": ["c", "msbuild", "openssl", "paho", "windows64"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500574661, "post_id": 45200488, "comment_id": 77410919, "body": "Your link command is missing the OpenSSL import libraries for <code>libeay32.lib</code> and <code>ssleay32.lib</code>. <code>MQTTClient_create</code> is <i>not</i> from OpenSSL, and you need that library, too. You should find the library <code>MQTTClient_create</code> and friends are part of, and add either (1) the library name if its static linking; or (2) <code>&#47;implib:XXX</code> if its dynamically linking. Also see <a href=\"https://msdn.microsoft.com/en-us/library/67wc07b9.aspx\" rel=\"nofollow noreferrer\">/IMPLIB (Name Import Library)</a> on MSDN. If its a"}, {"owner": {"reputation": 391, "user_id": 2144877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f57dc53b9163af00055514fd4e0a3ac?s=128&d=identicon&r=PG", "display_name": "Don Mclachlan", "link": "https://stackoverflow.com/users/2144877/don-mclachlan"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500658349, "post_id": 45200488, "comment_id": 77453071, "body": "Instead of using msbuild I&#39;ve opened the solution in Visual Studio Community 2013 and added C:\\msys64\\usr\\local\\ssl\\lib to properties/Library Directory (and ...\\bin for the dll).  Visual Studio is still reporting, &quot;error LINK1181: cannot open input file &quot;libeay32.lib&quot;.)  Why?  Can it not find it?  Is there a problem with the file?   $ ls -l C:/msys64/usr/local/ssl/lib/libeay32.lib -rw-r--r-- 1 CRC None 802648 Jul 20 15:51 C:/msys64/usr/local/ssl/lib/libeay32.lib  $ file !$ C:/msys64/usr/local/ssl/lib/libeay32.lib: current ar archive"}, {"owner": {"reputation": 391, "user_id": 2144877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f57dc53b9163af00055514fd4e0a3ac?s=128&d=identicon&r=PG", "display_name": "Don Mclachlan", "link": "https://stackoverflow.com/users/2144877/don-mclachlan"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500659161, "post_id": 45200488, "comment_id": 77453522, "body": "Grr.  It seems I added that path in the wrong place in the properties.  Adding it to Linker-&gt;General-&gt;Additional Library Directories seems to be getting me somewhere."}, {"owner": {"reputation": 391, "user_id": 2144877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f57dc53b9163af00055514fd4e0a3ac?s=128&d=identicon&r=PG", "display_name": "Don Mclachlan", "link": "https://stackoverflow.com/users/2144877/don-mclachlan"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500661714, "post_id": 45200488, "comment_id": 77454935, "body": "The mqtt test files are trying to #include &lt;openssl/applink.c&quot;. That file exists the openssl tree in C:\\msys64\\usr\\local\\ssl\\include.  Is it possible VC does not allow including &quot;.c&quot; files using Properties-&gt;C/C++-&gt;.General-&gt;&quot;Additional Include Directories&quot; path?"}, {"owner": {"reputation": 391, "user_id": 2144877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f57dc53b9163af00055514fd4e0a3ac?s=128&d=identicon&r=PG", "display_name": "Don Mclachlan", "link": "https://stackoverflow.com/users/2144877/don-mclachlan"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500662391, "post_id": 45200488, "comment_id": 77455284, "body": "That was it. So if someone writes code including a .c file, to build it with Visual Studio, one needs to add the path to the .c file to Properites-&gt;VC++ Directories-&gt;Include Directories."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500663279, "post_id": 45200488, "comment_id": 77455731, "body": "<i>&quot;... one needs to add the path to the .c file to Properites-&gt;VC++ Directories-&gt;Include Directories...&quot;</i> sounds wrong. You add source files to the <code>ItemGroup</code> with the <code>ClCompile</code> nodes. Look at a typical <code>vcxproj</code> file; its just a XML file. Both Visual Studio and MSbuild uses the <code>vcxproj</code> file. Here&#39;s a sample one but its not a good example because its so big: <a href=\"https://github.com/weidai11/cryptopp/blob/master/cryptlib.vcxproj\" rel=\"nofollow noreferrer\"><code>cryptlib.vcxproj</code></a>. Also see <a href=\"https://msdn.microsoft.com/en-us/library/9f4t9t92(v=vs.100).aspx\" rel=\"nofollow noreferrer\">How to: Add Existing Items to a Project</a> on MSDN."}], "owner": {"reputation": 391, "user_id": 2144877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f57dc53b9163af00055514fd4e0a3ac?s=128&d=identicon&r=PG", "display_name": "Don Mclachlan", "link": "https://stackoverflow.com/users/2144877/don-mclachlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500574736, "creation_date": 1500496369, "last_edit_date": 1500574736, "question_id": 45200488, "link": "https://stackoverflow.com/questions/45200488/undefined-symbols-building-mqtt-paho-on-windows", "title": "Undefined symbols building MQTT Paho on Windows", "body": "<p>I'm trying to build <code>paho_mqtt.c</code> on Windows X86 (64-bit). I'm using Visual Studio Community 2013. Its a supported configuration.</p>\n\n<p>To build <code>paho_mqtt.c</code> for 64-bit, one needs OpenSSL compiled for Windows 64-bit. To build OpenSSL I found I needed a new version of Active Perl. I then used the following commands to build OpenSSL:</p>\n\n<ul>\n<li>perl Configure -no-asm VC-WIN64A</li>\n<li>nmake</li>\n<li>nmake test</li>\n</ul>\n\n<p>All the tests worked so I have believe I have working SSL/TLS libraries.</p>\n\n<p>When building MQTT paho it couldn't find the <code>ssl.h</code>.  I used the trick on this page listed below to set the environment variables so msbuild would get the include path from the environment variables:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15654002/adding-additional-library-and-include-paths-when-compiling-from-command-line\">Adding additional library and include paths when compiling from command line</a></p>\n\n<p>That worked and paho found ssl.h.</p>\n\n<p>Next msbuild of paho.mqtt.c could not find libeay32 / ssleay32.dll.  First I used the trick from above again so msbuild would search the correct directory for the openssl libraries.  Although the new libraries work, the library names are different. I used the information in 2) on <a href=\"http://www.ski-epic.com/2007_notes_on_openssl/\" rel=\"nofollow noreferrer\">Compiling OpenSSL for Windows, Linux, and Macintosh</a> and I did the following:</p>\n\n<pre><code>cp libssl.lib libeay32.lib\ncp libcrypto.lib ssleay32.lib\n</code></pre>\n\n<p>This is questionable I know, but it appears to have worked; that is, the link command that was failing now runs without warning or error.  But it might have just deferred any unresolved symbol problems until later.</p>\n\n<p>msbuild is failing later when trying to link an executable (shown at the bottom of this post). msbuild is complaining it cannot resolve the MQTTClient_* funcitons/symbols (e.g. MQTTClient_connect). Those functions are all in MQTTClient.c, and msbuild built MQTTClient.obj without emitting any errors.</p>\n\n<p>My questions revolve around \"what is the real problem?\":</p>\n\n<ul>\n<li>Is the problem with MQTTClient.obj:\n\n<ul>\n<li>maybe it is not included in the link command?</li>\n<li>or maybe the symbols are not in the object file?</li>\n</ul></li>\n<li>Is the problem that I renamed the libraries?</li>\n</ul>\n\n<p>msbuild is not reporting that it cannot find the MQTTClient.obj.\nIf the problem is with the openssl libraries I expect it would report some openssl symbols are not found.</p>\n\n<p>On linux I would use nm -g to see whether the undefined symbols are in the MQTT_Client.obj. How do I verify this in Windows?</p>\n\n<p>Thanks for any help you can provide,</p>\n\n<hr>\n\n<pre><code>Link:\n  C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\BIN\\amd64\\link.exe /ERRORREPORT:QUEUE /OUT:\"C:\\Users\\don\\paho.mqtt.c\\Windows Build\\x64\\Release\\paho-cs-pub.exe\" /INCREMENTAL:NO /NOLOGO /LIBPA\n  TH:\"C:\\Users\\don\\paho.mqtt.c\\Windows Build\\\\x64\\Release\" \"paho-mqtt3a.lib\" kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc3\n  2.lib odbccp32.lib /MANIFEST /MANIFESTUAC:\"level='asInvoker' uiAccess='false'\" /manifest:embed /DEBUG /PDB:\"C:\\Users\\don\\paho.mqtt.c\\Windows Build\\x64\\Release\\paho-cs-pub.pdb\" /SUBSYSTEM:CONSOLE /O\n  PT:REF /OPT:ICF /LTCG /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:\"C:\\Users\\don\\paho.mqtt.c\\Windows Build\\x64\\Release\\paho-cs-pub.lib\" /MACHINE:X64 x64\\Release\\paho_cs_pub.obj\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_create [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_yield [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_setCallbacks [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_disconnect [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_publish [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_destroy [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\npaho_cs_pub.obj : error LNK2001: unresolved external symbol MQTTClient_connect [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\nC:\\Users\\don\\paho.mqtt.c\\Windows Build\\x64\\Release\\paho-cs-pub.exe : fatal error LNK1120: 7 unresolved externals [C:\\Users\\don\\paho.mqtt.c\\Windows Build\\stdoutsuba\\stdoutsuba.vcxproj]\n</code></pre>\n"}, {"tags": ["c", "if-statement", "isalpha"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 8, "creation_date": 1500495573, "post_id": 45200262, "comment_id": 77367684, "body": "It&#39;s <code>==</code>. Or just <code>!isalpha(letter)</code>."}, {"owner": {"reputation": 743, "user_id": 5091033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0737443a012e096ab556ef60a197f?s=128&d=identicon&r=PG&f=1", "display_name": "simo-r", "link": "https://stackoverflow.com/users/5091033/simo-r"}, "edited": false, "score": 0, "creation_date": 1500495648, "post_id": 45200262, "comment_id": 77367718, "body": "We&#39;re not human debuggers, you should fix compiler problems yourself."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 743, "user_id": 5091033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0737443a012e096ab556ef60a197f?s=128&d=identicon&r=PG&f=1", "display_name": "simo-r", "link": "https://stackoverflow.com/users/5091033/simo-r"}, "edited": false, "score": 3, "creation_date": 1500495746, "post_id": 45200262, "comment_id": 77367774, "body": "@BetaRunner It&#39;s not even debuggers, but error message parsers..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500496430, "post_id": 45200262, "comment_id": 77368181, "body": "Indeed looks stupid, but in favor of the OP, if his compiler really shows the cited message, this is not entirely clear just showing the whole line..."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1500496929, "post_id": 45200262, "comment_id": 77368464, "body": "@FelixPalmen - perfectly clear (to me)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1500497024, "post_id": 45200262, "comment_id": 77368517, "body": "@KevinDTimm it doesn&#39;t state what the &quot;expression&quot; is, that&#39;s not &quot;assignable&quot;. I don&#39;t say this couldn&#39;t have been solved with just some &quot;<i>google skills</i>&quot;, still, coming from another language where <code>=</code> compares things and seeing <i>this</i> error message talking about the whole line as an expression that is not assignable -- it&#39;s at least not immediately obvious."}, {"owner": {"reputation": 28506, "user_id": 86860, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/24414172673338a6bce690a6eeb53f64?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/86860/nate"}, "edited": false, "score": 0, "creation_date": 1500499668, "post_id": 45200262, "comment_id": 77369832, "body": "Classic case where yoda programming might have helped, given the odd message OP got from his compiler."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500501469, "post_id": 45200262, "comment_id": 77370622, "body": "The C tag. IMO the &quot;recently&quot; added boolean type was a wrong turn for C. It is completely unnecessary."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500515871, "post_id": 45200262, "comment_id": 77374464, "body": "@WeatherVane yeah, why don&#39;t we just program universal turing machines with tape?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1500495655, "creation_date": 1500495655, "answer_id": 45200297, "question_id": 45200262, "link": "https://stackoverflow.com/questions/45200262/how-to-use-an-isalpha-result-to-initiate-an-if-statement/45200297#45200297", "title": "How to use an isalpha result to initiate an if statement?", "body": "<blockquote>\n  <p>How is the following wrong?</p>\n</blockquote>\n\n<pre><code>if (isalpha(letter) = false)\n</code></pre>\n\n<p>Well, it's an <em>assignment</em>! <code>=</code> is used to <em>assign a value</em>, and you can't assign a value to a function call (for hopefully obvious reasons)</p>\n\n<p>To compare values, you use the <code>==</code> operator in C.</p>\n\n<p>That said, checking for equality with <code>==</code> is not necessary at all when you already have <em>boolean</em> values. Just write:</p>\n\n<pre><code>if (!isalpha(letter))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500501633, "post_id": 45200663, "comment_id": 77370684, "body": "Yes, but <code>isalpha</code> and cousins take <code>int</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500507101, "post_id": 45200663, "comment_id": 77372391, "body": "@WeatherVane:  <code>isalpha()</code> and friends from <code>&lt;ctype.h&gt;</code> take an <code>int</code>, but are only defined for all values of type <code>unsigned char</code> and the special negative value <code>EOF</code>.  A negative <code>char</code> argument is promoted to <code>int</code> with the same value, and unless it happens to be the same as <code>EOF</code>, the behavior is undefined. If the <code>char</code> has the same value as <code>EOF</code>, the behavior is defined but potentially incorrect: <code>&#39;&#255;&#39;</code> has value <code>-1</code> for character set ISO-8859-1, will be treated as <code>EOF</code> which is commonly defined to the same value.  It is basically the same problem as <code>char c = getchar();</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500507849, "post_id": 45200663, "comment_id": 77372590, "body": "The value of the character must be passed as an <code>unsigned char</code> for it to be meaningful. <code>char</code> can be signed by default, but whenever character values are used in the C library, it is the value of the <code>unsigned char</code> that is considered: <code>strcmp()</code> compares the string bytes as converted to <code>unsigned char</code>, like <code>memcmp()</code> for which it is less questionable, <code>getchar()</code> returns the value of a byte from the stream as an <code>unsigned char</code>, <code>putchar()</code> converts its argument to an <code>unsigned char</code> and returns that... All functions from <code>&lt;ctype.h&gt;</code> need unsigned character values or the value <code>EOF</code>."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1500496993, "creation_date": 1500496993, "answer_id": 45200663, "question_id": 45200262, "link": "https://stackoverflow.com/questions/45200262/how-to-use-an-isalpha-result-to-initiate-an-if-statement/45200663#45200663", "title": "How to use an isalpha result to initiate an if statement?", "body": "<p>You made a typo: <code>if (isalpha(letter) = false)</code> is not a comparison, but an assignment.  You should instead write:</p>\n\n<pre><code>if (isalpha(letter) == false)\n</code></pre>\n\n<p>A more common way to write this is with the <code>!</code> operator:</p>\n\n<pre><code>if (!isalpha(letter))\n</code></pre>\n\n<p>Note however that <code>isalpha()</code> has undefined behavior for negative values different from <code>EOF</code>, and if the <code>char</code> type is signed, the value if <code>letter</code> can be negative. This problem is corrected with a cast:</p>\n\n<pre><code>if (!isalpha((unsigned char)letter))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7980069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7922d1c875c289cf5a8d4d208268f9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7980069/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1753, "favorite_count": 0, "closed_date": 1500502487, "answer_count": 2, "score": 0, "last_activity_date": 1500496993, "creation_date": 1500495488, "question_id": 45200262, "link": "https://stackoverflow.com/questions/45200262/how-to-use-an-isalpha-result-to-initiate-an-if-statement", "closed_reason": "Not suitable for this site", "title": "How to use an isalpha result to initiate an if statement?", "body": "<p>Okay, so I have a for loop that checks through every letter of a string to make sure that the string is made entirely of alphabetical characters before moving on to the next stage of the program.</p>\n\n<p>However, I am having trouble with my if statement that is supposed to run if the \"isalpha\" function comes back false.</p>\n\n<pre><code>string keyword = argv[1];\nfor (int i = 0; i &lt; strlen(keyword); i++)\n{\n    char letter = keyword[i];\n    if (isalpha(letter) = false)\n    {\n        printf(\"Only use alphabetical characters in your key\\n\");\n        return 1;\n    }\n</code></pre>\n\n<p>I am getting the error:</p>\n\n<blockquote>\n  <p>error: expression is not assignable\n          if (isalpha(letter) = false)</p>\n</blockquote>\n\n<p>How can I get an if statement that initiates due to a isalpha being false?</p>\n\n<p>How is the following wrong?</p>\n\n<pre><code>if (isalpha(letter) = false)\n</code></pre>\n"}, {"tags": ["c", "memory-management", "malloc", "free"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1500490244, "post_id": 45198752, "comment_id": 77364648, "body": "Probably many duplicate questions. Having released the memory with <code>free</code> it is available for other use. If it still works, you were unlucky that a fault didn&#39;t alert you to the coding error."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500490316, "post_id": 45198752, "comment_id": 77364687, "body": "@Peter Paul, What did you expect to happen?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500490403, "post_id": 45198752, "comment_id": 77364736, "body": "@WeatherVane Unlucky instead of lucky, that&#39;s the correct word."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1500490454, "post_id": 45198752, "comment_id": 77364775, "body": "@IharobAlAsimi I already wrote &quot;unlucky&quot;. The comment edit was a different typo. Consider the phrasing."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500490750, "post_id": 45198752, "comment_id": 77364967, "body": "@WeatherVane I know. I meant, that sometimes the word <i>lucky</i> is used where <i>unlucky</i> makes more sense."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1500490845, "post_id": 45198752, "comment_id": 77365034, "body": "@IharobAlAsimi I get you now, you reinforced my comment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1500491339, "post_id": 45198752, "comment_id": 77365322, "body": "@yano presumably the lesson from the well-received answer you linked, is to <code>free(p); p = NULL;</code>"}, {"owner": {"reputation": 377, "user_id": 5487627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StDJG.jpg?s=128&g=1", "display_name": "Peter Paul", "link": "https://stackoverflow.com/users/5487627/peter-paul"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500491675, "post_id": 45198752, "comment_id": 77365508, "body": "@chux and Weather Vane I am expecting a &#39;memory already deallocated error&#39; here because I tried to print the variable after I freed them. It seems to be a UB as mentioned by many people on this post. Then my next question is: Is that safe if the memory space isn&#39;t clean up after deallocation? Will the memory be cleaned up before the next time the same memory space is allocated again?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1500492699, "post_id": 45198752, "comment_id": 77366087, "body": "@yano &quot;you hope not&quot; - what do you have against setting a pointer to <code>NULL</code>, when its previous <b>value</b> (not what it points to) can supposedly not even be read?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500492804, "post_id": 45198752, "comment_id": 77366155, "body": "@PeterPaul That is the thing about UB.  You may get &quot;memory already deallocated error&quot; on one run of code, on another you may a <code>seg-fault</code>, on another nothing bad happens, on another your disk is wiped clean.  It is undefined.  &quot;Is that safe if the memory space isn&#39;t clean up after deallocation?&quot; --&gt; For the most part, yes, the memory will be free&#39;d when code closes, but may consume resources in the meantime,  &quot;Will the memory be cleaned up before the next time the same memory space is allocated again?&quot; Do not expect this, until the program closes."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500492957, "post_id": 45198752, "comment_id": 77366265, "body": "@WeatherVane Nothing, my apologies, spaced out for a second there,, misinterpreted what you said."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500492983, "post_id": 45198752, "comment_id": 77366283, "body": "To be clear:after freeing <code>ptr</code>, not only is <code>*ptr</code> UB, even copying the old pointer value <code>void *p = ptr;</code> is UB."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500492996, "post_id": 45198752, "comment_id": 77366290, "body": "@PeterPaul no, after you <code>free</code> the memory it is no concern of yours at all. The memory manager won&#39;t remember the history of what you did with the pointer, even less the C code that used it. So don&#39;t expect any kind of report. The memory is yours to use, and if it isn&#39;t anything might happen - even apparent success."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500493258, "post_id": 45198752, "comment_id": 77366432, "body": "@WeatherVane &quot;The memory manager won&#39;t remember the history of what you did with the pointer, even less the C code that uses it&quot; again is one of those ideas that is not supported by C, nor the OS.  It is UB.  After freeing memory the &quot;memory manager&quot; may very well keep track of all sorts of things.  Assuming anything about free&#39;d memory provides for a hacker exploit like searching free&#39;d memory for tell-tale passwords, etc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500493342, "post_id": 45198752, "comment_id": 77366487, "body": "@chux sorry, my comment does not support your theory. Please read more carefully."}, {"owner": {"reputation": 377, "user_id": 5487627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StDJG.jpg?s=128&g=1", "display_name": "Peter Paul", "link": "https://stackoverflow.com/users/5487627/peter-paul"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500493589, "post_id": 45198752, "comment_id": 77366625, "body": "@chux Thanks for your explanation! It&#39;s very helpful! I was just testing the behaviors of <code>free()</code>. I think now I can understand some strange behaviors I met before with memory allocation."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1500493031, "post_id": 45198765, "comment_id": 77366304, "body": "@PeterPaul, probable. You can&#39;t rely on what is there immediately after <code>malloc()</code>. You need to explicitly initialize the returned memory with some data."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 10, "last_activity_date": 1500555363, "last_edit_date": 1500555363, "creation_date": 1500490174, "answer_id": 45198765, "question_id": 45198752, "link": "https://stackoverflow.com/questions/45198752/can-still-print-a-string-after-i-freed-it/45198765#45198765", "title": "Can still print a string after I freed it?", "body": "<p>You need to learn the concept of <em>undefined behavior</em>.</p>\n\n<p>Even if you print the string after you free it and it \"<em>works</em>\", it doesn't mean it worked. It's just one of the things that can happen when the behavior is said to be <strong>undefined</strong>, which in this case it is.</p>\n\n<p>Also, the pointer will not be <code>NULL</code> except if you do this</p>\n\n<pre><code>free(ptr);\nptr = NULL;\n</code></pre>\n\n<p>and <code>free()</code>, doesn't set all bytes to <code>0</code> either.</p>\n\n<p>The <code>free()</code> function just does exactly what it's name suggests. It allows <code>malloc()</code> to use the <code>free()</code>d chunk again. The data the pointer pointed to might still be there unchanged and that is the reason why you can still print the previous content after <code>free()</code>. But there is absolutely no guarantee of what will happen if you do dereference a pointer after <code>free()</code> or whether the data still exists or, was completely or partially overwritten.</p>\n\n<p>If you do dereference the pointer after having <code>free()</code>d it, there is one thing you do know, the behavior is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1500490996, "post_id": 45198862, "comment_id": 77365118, "body": "@PeterPaul find the long version of the UB analogy <a href=\"https://stackoverflow.com/a/6445794/3476780\">here</a>. This links to a <code>c++</code> answer and a different type of UB, but UB nonetheless and it applies to <code>c</code> as well"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 6, "last_activity_date": 1500490485, "creation_date": 1500490485, "answer_id": 45198862, "question_id": 45198752, "link": "https://stackoverflow.com/questions/45198752/can-still-print-a-string-after-i-freed-it/45198862#45198862", "title": "Can still print a string after I freed it?", "body": "<p>When you call <code>free</code>, it allows the pointed-to memory to be used for other purposes.  Attempting to read or write memory that has been freed invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>.</p>\n\n<p>Just because the memory has been given up doesn't necessarily mean it's been physically wiped.</p>\n\n<p>An analogy: Suppose you left a book on your hotel room table.  You check out of the hotel, but you still have the key card.  If you go back to the room the book <em>might</em> be there, or it might not.</p>\n"}], "owner": {"reputation": 377, "user_id": 5487627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StDJG.jpg?s=128&g=1", "display_name": "Peter Paul", "link": "https://stackoverflow.com/users/5487627/peter-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1630, "favorite_count": 1, "accepted_answer_id": 45198765, "answer_count": 2, "score": 8, "last_activity_date": 1500555363, "creation_date": 1500490105, "last_edit_date": 1500495863, "question_id": 45198752, "link": "https://stackoverflow.com/questions/45198752/can-still-print-a-string-after-i-freed-it", "title": "Can still print a string after I freed it?", "body": "<p>I am learning and testing memory allocation in C and I want to test what happens if <code>free()</code> is called. </p>\n\n<p>I expected there could be a segmentation fault or pointer is <code>NULL</code> after I run the program below. However, I can still successfully print the string as in Output. I also tried to free <code>str</code> twice, then an error as Output 2 occurred. </p>\n\n<p>It seems the previously allocated memory is successfully deallocated, but the data on the memory is not cleaned up. Is that correct? If that is the case, when will the program clean up those deallocated memory space? Is that safe if the data is deallocated but not cleaned up?</p>\n\n<p>Answers to any question above will be helpful! Thanks!</p>\n\n<h3>Code</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    printf(\"Hello, World!\\n\");\n    char *str = (char *)malloc(24);\n    char *str2 = \"tutorialspoint\";\n    strcpy(str, str2);\n    free(str);\n    printf(\"[str] %s\\n\", str);\n    return 0;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>Hello, World!\n[str] tutorialspoint\n</code></pre>\n\n<h3>Output 2</h3>\n\n<pre><code>main(83218,0x7fff9d2aa3c0) malloc: *** error for object 0x7fb0b2d00000: pointer being freed was not allocated\n*** set a breakpoint in malloc_error_break to debug\nAbort trap: 6\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>Thank you all for helpful replies. Now I understand that there are some undefined behaviors (UB) in C and this helped me understand something else confused me before such as writing to a string beyond the scope of allocated(like what's in the code snippet below). This caused UB according to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">wiki</a>, but the program will not crash. </p>\n\n<p>Feel free to correct me if I got it wrong!</p>\n\n<pre><code>char *str = (char *)malloc(0);\nchar *str2 = \"tutorialspoint\";\nstrcat(str, str2);\nprintf(\"[str] %s, [addr] %p\\n\", str, str);\n</code></pre>\n"}, {"tags": ["c", "char", "memcpy", "c-strings"], "comments": [{"owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "edited": false, "score": 0, "creation_date": 1500489246, "post_id": 45198479, "comment_id": 77364087, "body": "I expect buffer contains <code>boundary</code> + <code>header1_a</code> + <code>header1_b</code>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1500489251, "post_id": 45198479, "comment_id": 77364093, "body": "&quot;Is it because of the fact that I have copied NULL-terminated char array?&quot; Yes"}, {"owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500489305, "post_id": 45198479, "comment_id": 77364124, "body": "How do I not copying the NULL at the end of the character array?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1500489407, "post_id": 45198479, "comment_id": 77364167, "body": "Subtract 1 from length passed to memcpy (except in last call)?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 7, "creation_date": 1500489445, "post_id": 45198479, "comment_id": 77364194, "body": "<code>std::memcpy()</code> is not C"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1500489545, "post_id": 45198479, "comment_id": 77364240, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8465006/how-do-i-concatenate-two-strings-in-c\">How do I concatenate two strings in C?</a>"}, {"owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500489601, "post_id": 45198479, "comment_id": 77364274, "body": "I dont undertand now. @chux said std::memcpy() is not C. Should I use the C version?"}, {"owner": {"reputation": 5516, "user_id": 2128327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG", "display_name": "Khaled.K", "link": "https://stackoverflow.com/users/2128327/khaled-k"}, "edited": false, "score": 0, "creation_date": 1500489639, "post_id": 45198479, "comment_id": 77364296, "body": "<b>printf</b> will print character-by-character till it hits a <code>\\0</code> null-terminator, <b>memcpy</b> copied all the strings including their null-terminators, what you need to do is to avoid copying the null-terminators."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500489660, "post_id": 45198479, "comment_id": 77364307, "body": "@user3222184 Post is tagged <code>C</code>,  <code>std::memcpy()</code> is not valid C code.  Your choice if to code in C or some other language."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500489685, "post_id": 45198479, "comment_id": 77364329, "body": "Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem in your language of choice, and tag appropriately. The code shown is not C. You should have enough rep and 3+ years to know that."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1500489812, "post_id": 45198479, "comment_id": 77364411, "body": "Strings are copied with <code>strcpy</code> not with <code>memcpy</code>. Then you can concatenate other strings with <code>strcat</code> instead of calculation of start position: <code>strcpy( buffer, boundary ); strcat( buffer, header1_a );</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "edited": false, "score": 0, "creation_date": 1500493423, "post_id": 45198559, "comment_id": 77366535, "body": "That&#39;s correct. One could add that strlen and sizeof do not return the same value: strlen(boundary)=21 whereas sizeof(boundary)=22."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1500496705, "post_id": 45198559, "comment_id": 77368324, "body": "Use <code>strcat()</code> for a cleaner and more readable program. The compiler will likely generate the same efficient code."}], "tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": true, "score": 7, "last_activity_date": 1500489571, "last_edit_date": 1500489571, "creation_date": 1500489430, "answer_id": 45198559, "question_id": 45198479, "link": "https://stackoverflow.com/questions/45198479/memcpy-not-actual-copying/45198559#45198559", "title": "memcpy not actual copying", "body": "<p>When you copy the first string, you get something like</p>\n\n<blockquote>\n  <p>--this-is-a-boundary\\n\\0</p>\n</blockquote>\n\n<p>Then you copy the next string. You get</p>\n\n<blockquote>\n  <p>--this-is-a-boundary\\n\\0Content-Disposition: form-data; name=\\\"metadata\\\"\\n\\0</p>\n</blockquote>\n\n<p>Since strings are \\0-terminated, the string is still the part up to the first \\0. </p>\n\n<p>I think, it is quite clear, what you have to do \u2026:</p>\n\n<pre><code>std::memcpy(buffer + sizeof boundary - 1, header1_a, sizeof header1_a);\n</code></pre>\n\n<p>This overwrites the \\0, when you append the next string.</p>\n"}, {"comments": [{"owner": {"reputation": 2061, "user_id": 6692092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rbzDRLhrk0/AAAAAAAAAAI/AAAAAAAACiA/ta8as2voMb0/photo.jpg?sz=128", "display_name": "Ignacio Ara", "link": "https://stackoverflow.com/users/6692092/ignacio-ara"}, "edited": false, "score": 0, "creation_date": 1524760557, "post_id": 50047625, "comment_id": 87112183, "body": "Please add some code so other users can test what you&#39;re describing. Thanks!"}, {"owner": {"reputation": 1648, "user_id": 2667267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6OVh.png?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/2667267/charles"}, "reply_to_user": {"reputation": 2061, "user_id": 6692092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rbzDRLhrk0/AAAAAAAAAAI/AAAAAAAACiA/ta8as2voMb0/photo.jpg?sz=128", "display_name": "Ignacio Ara", "link": "https://stackoverflow.com/users/6692092/ignacio-ara"}, "edited": false, "score": 0, "creation_date": 1525448472, "post_id": 50047625, "comment_id": 87374444, "body": "@IgnacioAra i hope this will shed some light"}], "tags": [], "owner": {"reputation": 1648, "user_id": 2667267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6OVh.png?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/2667267/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1525254250, "last_edit_date": 1525254250, "creation_date": 1524759103, "answer_id": 50047625, "question_id": 45198479, "link": "https://stackoverflow.com/questions/45198479/memcpy-not-actual-copying/50047625#50047625", "title": "memcpy not actual copying", "body": "<pre><code>    /*Always rember to remove the null terminatior \\0 if this is not done it starts behaving abnormally the best way is to allocate memory and then copy or if not just use strcat it produces the same result\n\nBelow is a example simple to illustrate this */\n\n //Always rember to remove the null terminatior \\0 if this is not done it starts //behaving abnormally the best way is to allocate memory and then copy or if not //just use strcat it produces the same result\n\n//Below is a example simple to illustrate this\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main(){\n\n\n char* buffer;\n\n    char* boundary= \"--this-is-a-boundary\\\\n\";\n    char* header1_= \"Content-Disposition: form-data; name=\\\\\\\"metadata\\\\\\\"\\\\n\";\n    char* header1_b= \"Content-Type: application/json; charset=UTF-8\\\\n\\\\n\";\n//first allocate memory\nint n=strlen(boundary)+strlen(header1_)+strlen(header1_b);\nchar* str=malloc(n*sizeof(char));\n//After allocating this amount memory use strncat to concatenate to form\n//one string\n\nchar* str1=strncat(str,boundary,strlen(boundary));\nchar* str2=strncat(str1,header1_,strlen(header1_));\nchar* str3=strncat(str2,header1_b,strlen(header1_b));\n\nprintf(\"%s\",str3);\n\n\n\n\n\n\n}\n\n//The out put will be as follows\n\n//--this-is-a-boundary\\nContent-Disposition: form-data; //name=\\\"metadata\\\"\\nContent-Type: application/json; charset=UTF-8\\n\\n\n//Process returned 0 (0x0)   execution time : 0.067 s\n//Press any key to continue.\n\n//NOTE I CHOOSE TO PRINT THE \" AS \\\" AND THE NEW LINE \\\\n\n\n\nTHE CODE BELOW IS PRINTING NORMALLY WITH OUT THE \\\" AND THE NEW LINE \\\\n\n\n//Always rember to remove the null terminatior \\0 if this is not done it starts //behaving abnormally the best way is to allocate memory and then copy or if not //just use strcat it produces the same result\n\n//Below is a example simple to illustrate this\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main(){\n\n\n char* buffer;\n\n    char* boundary= \"--this-is-a-boundary\\n\";\n    char* header1_= \"Content-Disposition: form-data; name=\\\"metadata\\\"\\n\";\n    char* header1_b= \"Content-Type: application/json; charset=UTF-8\\\\n\\n\";\n//first allocate memory\nint n=strlen(boundary)+strlen(header1_)+strlen(header1_b);\nchar* str=malloc(n*sizeof(char));\n//After allocating this amount memory use strncat to concatenate to form\n//one string\n\nchar* str1=strncat(str,boundary,strlen(boundary));\nchar* str2=strncat(str1,header1_,strlen(header1_));\nchar* str3=strncat(str2,header1_b,strlen(header1_b));\n\nprintf(\"%s\",str3);\n\n\n\n}\n\n//BELOW IS THE OUTPUT GENERATED BY THE ABOVE CODE\n\n//--this-is-a-boundary\n//Content-Disposition: form-data; name=\"metadata\"\n//Content-Type: application/json; charset=UTF-8\\n\n\n//Process returned 0 (0x0)   execution time : 0.071 s\n//Press any key to continue.\n\n//I hope this will help you\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 3222184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2ad8caef44d26e995fd7e13bc65b1715?s=128&d=identicon&r=PG&f=1", "display_name": "user3222184", "link": "https://stackoverflow.com/users/3222184/user3222184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 0, "accepted_answer_id": 45198559, "answer_count": 2, "score": 0, "last_activity_date": 1525254250, "creation_date": 1500489144, "last_edit_date": 1500496621, "question_id": 45198479, "link": "https://stackoverflow.com/questions/45198479/memcpy-not-actual-copying", "title": "memcpy not actual copying", "body": "<pre><code>    char buffer[2000];\n\n    char boundary[]= \"--this-is-a-boundary\\n\";\n    char header1_a[]= \"Content-Disposition: form-data; name=\\\"metadata\\\"\\n\";\n    char header1_b[]= \"Content-Type: application/json; charset=UTF-8\\n\\n\";\n    printf(\"%s%s%s\\n\\n\\n\\n\", boundary, header1_a, header1_b);\n    std::memcpy(buffer, boundary, sizeof boundary);\n    std::memcpy(buffer + sizeof boundary, header1_a, sizeof header1_a);\n    std::memcpy(buffer + sizeof boundary + sizeof header1_a, header1_b, sizeof header1_b);\n    std::memcpy(buffer + sizeof boundary + sizeof header1_a + sizeof header1_b,\n                strJSONout, sizeof strJSONout);\n    printf(\"%s\", buffer);\n</code></pre>\n\n<p>But the output is :</p>\n\n<pre><code>--this-is-a-boundary\n</code></pre>\n\n<p>What happen to the rest of the string? I expect buffer contains all of the these character arrays...</p>\n\n<p>Is it because of the fact that I have copied NULL-terminated char array?</p>\n"}, {"tags": ["c", "struct", "structure"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1500488950, "post_id": 45198317, "comment_id": 77363913, "body": "That is just perverse."}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 1, "creation_date": 1500489022, "post_id": 45198317, "comment_id": 77363952, "body": "If <i>*pone</i> points to one and <i>*ptwo</i> points to two then <i>memcpy(one,two,sizeof(one));</i> should to it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500489087, "post_id": 45198317, "comment_id": 77363987, "body": "So you copy a pointer but not what it points to. Suppose you then <code>free</code> the pointer in the first <code>struct</code>. Doomed."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1500489114, "post_id": 45198317, "comment_id": 77364008, "body": "Not really, not automatically. The typical workaround is to extract the common fields into a parent structure which may be embedded into both structures and copied. Or you may play nasty games with half-baked introspection to register each individual member&#39;s name, offset and type. Then write a function to copy matching fields. Or use code generation to preprocess the structure definitions and generate suitable copying code offline."}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 0, "creation_date": 1500489325, "post_id": 45198317, "comment_id": 77364134, "body": "free should only be used in conjunction with malloc() , these are static structures."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500499420, "post_id": 45198317, "comment_id": 77369699, "body": "use memcpy   <a href=\"https://stackoverflow.com/questions/4931123/copying-one-structure-to-another\" title=\"copying one structure to another\">stackoverflow.com/questions/4931123/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1500489053, "creation_date": 1500489053, "answer_id": 45198457, "question_id": 45198317, "link": "https://stackoverflow.com/questions/45198317/how-to-copy-the-content-of-a-structure-in-another-structure-in-c/45198457#45198457", "title": "How to copy the content of a structure\u200b in another structure in C", "body": "<p>There's no way to automatically grab fields of a given name from a struct.  While you could do something like this in Java with reflection, it can't be done in C.  You just need to manually copy the relevant members.</p>\n"}, {"comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1500756692, "post_id": 45258603, "comment_id": 77481637, "body": "Why do you reimplement <code>memcpy</code>?"}], "tags": [], "owner": {"reputation": 108, "user_id": 6156224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tV4AVGDhIGo/AAAAAAAAAAI/AAAAAAAAD3c/QqYI3upAQr8/photo.jpg?sz=128", "display_name": "Jonathon S.", "link": "https://stackoverflow.com/users/6156224/jonathon-s"}, "is_accepted": false, "score": -2, "last_activity_date": 1500758645, "last_edit_date": 1500758645, "creation_date": 1500753275, "answer_id": 45258603, "question_id": 45198317, "link": "https://stackoverflow.com/questions/45198317/how-to-copy-the-content-of-a-structure-in-another-structure-in-c/45258603#45258603", "title": "How to copy the content of a structure\u200b in another structure in C", "body": "<p>In theory you could do this with a simple block copy function for your example above using the code below if you are certain that your compiler sequences the structure as sequenced in its type definition.  However, I don't think it's a great idea.  Block copy would be safer with two data structures of the same type as defined in one of the answers proposed above.</p>\n\n<p>Example using block copy function:</p>\n\n<pre><code>void main(void)\n{\n\n    struct one{\n        int a;\n        int b;\n        char *s;\n        int c;\n    };\n\n    struct two{\n        int a;\n        int e;\n        char *s;\n        int d;\n    };\n\n    // Place code that assigns variable one here\n\n    memcpy(&amp;two, &amp;one, sizeof(one));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 368, "user_id": 2904562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77e6e82a71d9209170823146567abca2?s=128&d=identicon&r=PG&f=1", "display_name": "Michal Butterweck", "link": "https://stackoverflow.com/users/2904562/michal-butterweck"}, "is_accepted": false, "score": 0, "last_activity_date": 1500756581, "creation_date": 1500756581, "answer_id": 45259079, "question_id": 45198317, "link": "https://stackoverflow.com/questions/45198317/how-to-copy-the-content-of-a-structure-in-another-structure-in-c/45259079#45259079", "title": "How to copy the content of a structure\u200b in another structure in C", "body": "<p>You may write function macro like this:</p>\n\n<pre><code>#define CAT(A, B) A ## B\n#define ARGS_ASSIGN(N, L, R, ...) CAT(_ARGS_ASSIGN, N) (L, R, __VA_ARGS__)\n#define _ARGS_ASSIGN1(L, R, M0) L.M0 = R.M0;\n#define _ARGS_ASSIGN2(L, R, M0, M1) L.M0 = R.M0; L.M1 = R.M1;\n/* ... define sufficiently more */\n</code></pre>\n\n<p>and use in such way:</p>\n\n<pre><code>ARGS_ASSIGN(2, two, one, a, s)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7981485, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1583728498312990/picture?type=large", "display_name": "Vincenzo Cosi", "link": "https://stackoverflow.com/users/7981485/vincenzo-cosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1500758645, "creation_date": 1500488665, "question_id": 45198317, "link": "https://stackoverflow.com/questions/45198317/how-to-copy-the-content-of-a-structure-in-another-structure-in-c", "title": "How to copy the content of a structure\u200b in another structure in C", "body": "<p>I have a C program where I have two structures</p>\n\n<pre><code>struct one{\n  int a;\n  int b;\n  char *s;\n  int c;\n};\n\nstruct two{\n  int a;\n  int e;\n  char *s;\n  int d;\n};\n</code></pre>\n\n<p>Is possible to write a function that copies the values of the variables with the same type and name from <code>struct one</code> to <code>struct two</code>?\nFor example, in this case the function should do this</p>\n\n<pre><code>two.a = one.a;\ntwo.s = one.s;\n</code></pre>\n"}, {"tags": ["c", "c11", "tr24731"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500487940, "post_id": 45198063, "comment_id": 77363297, "body": "&quot;how can I get rid of it?&quot; --&gt; Do not use <code>sprintf_s()</code>  Post the code that appears to need it to see alternatives."}, {"owner": {"reputation": 171, "user_id": 8328436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119abb210ce564512ae74d2057bb12b1?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/8328436/npatel"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500487987, "post_id": 45198063, "comment_id": 77363324, "body": "I need to use it."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1500488076, "post_id": 45198063, "comment_id": 77363374, "body": "Quick &amp; dirty way: add <code>-Wnoimplicit-function-declaration</code> to compiler options."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500488135, "post_id": 45198063, "comment_id": 77363408, "body": "What&#39;s this <code>sprintf_s</code> function anyhow and where did you get it? Include the proper headers and the warning will go away."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500488569, "post_id": 45198063, "comment_id": 77363672, "body": "@AnttiHaapala: These are the &quot;Annex K&quot; / TR 24731 functions. They&#39;re standardized but optional, and in practice only supported by Visual Studio."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1500488657, "post_id": 45198063, "comment_id": 77363730, "body": "@DietrichEpp doesn&#39;t one need the <code>#define __STDC_WANT_LIB_EXT1__ 1</code> too there?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500488826, "post_id": 45198063, "comment_id": 77363837, "body": "Standard C99 does not have <code>sprintf_s()</code>.  C11 <i>may</i> include it.  Other versions may include it as some form of extension."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500489099, "post_id": 45198063, "comment_id": 77364001, "body": "C does not support <i>methods</i>. <code>sprintf_s</code> is a <i>function</i>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1500489118, "post_id": 45198063, "comment_id": 77364009, "body": "@AnttiHaapala: According to the standard, yes. However, I am not aware of any implementation where the macro actually has that effect."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500489153, "post_id": 45198063, "comment_id": 77364030, "body": "@Olaf: Fixed, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 6, "last_activity_date": 1500489939, "creation_date": 1500489939, "answer_id": 45198698, "question_id": 45198063, "link": "https://stackoverflow.com/questions/45198063/sprintf-s-implicit-declaration-warning/45198698#45198698", "title": "sprintf_s() implicit declaration warning", "body": "<p>The <code>sprintf_s</code> function is part of the Annex K / TR 24731 bounds checking interfaces. However, anyone interested in these interfaces should read <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"noreferrer\">N1967 Field Experience With Annex K \u2014 Bounds Checking Interfaces</a>.  Here is an excerpt:</p>\n\n<blockquote>\n  <p>Despite more than a decade since the original proposal and nearly ten years since the ratification of ISO/IEC TR 24731-1:2007, and almost five years since the introduction of the Bounds checking interfaces into the C standard, no viable conforming implementations has emerged. The APIs continue to be controversial and requests for implementation continue to be rejected by implementers.</p>\n</blockquote>\n\n<p>Indeed, if you look at the <a href=\"https://gcc.gnu.org/wiki/C11Status\" rel=\"noreferrer\">GCC C11 status page</a>, you'll see (emphasis added):</p>\n\n<blockquote>\n  <p>Bounds-checking (Annex K) [Optional]: Library issue <strong>(not implemented)</strong></p>\n</blockquote>\n\n<p>The only major implementation of Annex K (<code>sprintf_s</code> and other similar <code>_s</code> versions of functions) is in Visual Studio. The popular explanation given is that these functions are used by Microsoft <em>internally, in their own code base</em> to solve security problems.</p>\n\n<p>Other implementations rely on tools like Valgrind, mudflap, the address sanitizer, etc. to solve the same set of problems, and few code bases outside of Microsoft actually use these functions, so there is very little motivation to implement them.</p>\n\n<p>In other words, if you are not using Visual Studio, you can't use these functions. Fortunately, they are not necessary.</p>\n\n<p>The invocation of <code>sprintf_s</code> in the question is highly suspect to begin with\u2026</p>\n\n<pre><code>// Wait, what? Something smells fishy...\nsprintf_s(var, outfile_ppm, local_filecounter++);\n</code></pre>\n\n<p>The third argument to <code>sprintf_s</code> should be a format string, but <code>local_filecounter++</code> looks far too suspicious to be a format string.</p>\n\n<p>Typically, you would use <code>snprintf</code>, which truncates its output to fit the buffer, or <code>asprintf</code> if you are okay using functions outside the C standard.</p>\n\n<pre><code>char var[256];\nsnprintf(var, sizeof(var), outfile_ppm, localfile_counter++);\n</code></pre>\n\n<p>Note that if <code>var</code> does not have array type you can't use <code>sizeof(var)</code> to calculate its size, and the usual caveats about arrays decaying to pointers when used as function arguments apply here.</p>\n\n<p><strong>Summary:</strong> You can't use <code>sprintf_s()</code> unless you switch to Visual Studio or implement it yourself. Tough cookies.</p>\n\n<p><strong>Minor Note:</strong> In theory, you should define <code>__STDC_WANT_LIB_EXT1__</code> if you want <code>sprintf_s</code>. In practice, however, the only major implementation which defines <code>sprintf_s</code> <em>at all</em> does so regardless of the macro's presence\u2014as far as I know. Things may have changed.</p>\n"}], "owner": {"reputation": 171, "user_id": 8328436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119abb210ce564512ae74d2057bb12b1?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/8328436/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1787, "favorite_count": 0, "closed_date": 1500513305, "accepted_answer_id": 45198698, "answer_count": 1, "score": -1, "last_activity_date": 1524057924, "creation_date": 1500487886, "last_edit_date": 1524057924, "question_id": 45198063, "link": "https://stackoverflow.com/questions/45198063/sprintf-s-implicit-declaration-warning", "closed_reason": "Not suitable for this site", "title": "sprintf_s() implicit declaration warning", "body": "<p>I have a C code in which I have this line.</p>\n\n<pre><code>sprintf_s(var, outfile_ppm, local_filecounter++);\n</code></pre>\n\n<p>Here, <code>var</code> is <code>char*</code> type and <code>local_filecounter</code> is <code>int</code> type.</p>\n\n<p>When I run the code it gives me this warning:</p>\n\n<blockquote>\n  <p>warning: implicit declaration of function 'sprintf_s' is invalid in C99 [-Wimplicit-function-declaration]</p>\n</blockquote>\n\n<p>What is this warning and how can I get rid of it?</p>\n"}, {"tags": ["c", "bmp", "cs50"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1500487498, "post_id": 45197897, "comment_id": 77363064, "body": "<code>&amp;stuff.other</code> will return an address, not the actual value. Is that what you want? If I were the compiler, I&#39;d optimize that line away as clearly the expression is always false."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1500487512, "post_id": 45197897, "comment_id": 77363075, "body": "You&#39;re comparing addresses not contents. Get rid of the &amp;."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 1, "creation_date": 1500566954, "post_id": 45197974, "comment_id": 77406265, "body": "That was it! Still new to addresses and pointers so I don&#39;t quite have the hang of it just yet. Thanks!"}], "tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 2, "last_activity_date": 1500487559, "creation_date": 1500487559, "answer_id": 45197974, "question_id": 45197897, "link": "https://stackoverflow.com/questions/45197897/debugger-skipping-a-whole-if-statement/45197974#45197974", "title": "Debugger skipping a whole if statement", "body": "<p>Don't compare addresses, it will always fail. Compare the values, as that results in simple integer comparison</p>\n\n<pre><code>if(red.rgbtRed == triple.rgbtRed &amp;&amp; red.rgbtGreen != triple.rgbtRed &amp;&amp; red.rgbtBlue != triple.rgbtRed) {\n    same = 1; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 7211710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/600d4335487df1509e29e5b516e4cafb?s=128&d=identicon&r=PG&f=1", "display_name": "Alam", "link": "https://stackoverflow.com/users/7211710/alam"}, "is_accepted": true, "score": 3, "last_activity_date": 1500488246, "last_edit_date": 1500488246, "creation_date": 1500487874, "answer_id": 45198054, "question_id": 45197897, "link": "https://stackoverflow.com/questions/45197897/debugger-skipping-a-whole-if-statement/45198054#45198054", "title": "Debugger skipping a whole if statement", "body": "<p>Don't compare addresses and you dont need to use the <code>int same</code> variable at all. </p>\n\n<pre><code>if(red.rgbtRed == triple.rgbtRed &amp;&amp; red.rgbtGreen != triple.rgbtRed &amp;&amp; red.rgbtBlue != triple.rgbtRed) \n{\n    fwrite(&amp;white, sizeof(RGBTRIPLE), 1, outptr);\n}\nelse\n{\n    fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "is_accepted": false, "score": 2, "last_activity_date": 1500493949, "creation_date": 1500493949, "answer_id": 45199846, "question_id": 45197897, "link": "https://stackoverflow.com/questions/45197897/debugger-skipping-a-whole-if-statement/45199846#45199846", "title": "Debugger skipping a whole if statement", "body": "<p>Your compiler might detect that this \"if\" condition is always false, and it optimizes out these lines. Therefore this part of the code is not present in your executable and your debugger does not see it.</p>\n"}], "owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 45198054, "answer_count": 3, "score": 3, "last_activity_date": 1500493949, "creation_date": 1500487311, "question_id": 45197897, "link": "https://stackoverflow.com/questions/45197897/debugger-skipping-a-whole-if-statement", "title": "Debugger skipping a whole if statement", "body": "<pre class=\"lang-html prettyprint-override\"><code>/**\n * Copies a BMP piece by piece, just because.\n * All we have to do is change all the red pixels to \n\n\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"bmp.h\"\n\nint main(int argc, char *argv[])\n{\n    // ensure proper usage\n    if (argc != 3)\n    {\n        fprintf(stderr, \"Usage: ./copy infile outfile\\n\");\n        return 1;\n    }\n\n    // remember filenames\n    char *infile = argv[1];\n    char *outfile = argv[2];\n\n    // open input file \n    FILE *inptr = fopen(infile, \"r\");\n    if (inptr == NULL)\n    {\n        fprintf(stderr, \"Could not open %s.\\n\", infile);\n        return 2;\n    }\n\n    // open output file\n    FILE *outptr = fopen(outfile, \"w\");\n    if (outptr == NULL)\n    {\n        fclose(inptr);\n        fprintf(stderr, \"Could not create %s.\\n\", outfile);\n        return 3;\n    }\n\n    // read infile's BITMAPFILEHEADER\n    BITMAPFILEHEADER bf;\n    fread(&amp;bf, sizeof(BITMAPFILEHEADER), 1, inptr);\n\n    // read infile's BITMAPINFOHEADER\n    BITMAPINFOHEADER bi;\n    fread(&amp;bi, sizeof(BITMAPINFOHEADER), 1, inptr);\n\n    // ensure infile is (likely) a 24-bit uncompressed BMP 4.0\n    if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || \n        bi.biBitCount != 24 || bi.biCompression != 0)\n    {\n        fclose(outptr);\n        fclose(inptr);\n        fprintf(stderr, \"Unsupported file format.\\n\");\n        return 4;\n    }\n\n    // write outfile's BITMAPFILEHEADER\n    fwrite(&amp;bf, sizeof(BITMAPFILEHEADER), 1, outptr);\n\n    // write outfile's BITMAPINFOHEADER\n    fwrite(&amp;bi, sizeof(BITMAPINFOHEADER), 1, outptr);\n\n    // determine padding for scanlines\n    int padding =  (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;\n\n    // iterate over infile's scanlines\n    for (int i = 0, biHeight = abs(bi.biHeight); i &lt; biHeight; i++)\n    {\n        // iterate over pixels in scanline\n        for (int j = 0; j &lt; bi.biWidth; j++)\n        {\n            // temporary storage\n            RGBTRIPLE triple;\n\n            // read RGB triple from infile\n            fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n\n            RGBTRIPLE red = {0, 0, 255};\n            int same = 0; \n            RGBTRIPLE white = {255, 255, 255};\n\n            if(&amp;red.rgbtRed == &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtGreen != &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtBlue != &amp;triple.rgbtRed)\n            {\n                same = 1; \n            }\n\n            if(same == 0) //copy the pixel, if the pixel isn't red\n            {\n                // write RGB triple to outfile\n                fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);    \n            }\n            if(same == 1)\n            {\n                fwrite(&amp;white, sizeof(RGBTRIPLE), 1, outptr);\n            }\n\n        }\n\n        // skip over padding, if any\n        fseek(inptr, padding, SEEK_CUR);\n\n        // then add it back (to demonstrate how)\n        for (int k = 0; k &lt; padding; k++)\n        {\n            fputc(0x00, outptr);\n        }\n    }\n\n    // close infile\n    fclose(inptr);\n\n    // close outfile\n    fclose(outptr);\n\n    // success\n    return 0;\n}\n</code></pre>\n\n\n\n<p>My issue is more specifically with this one segment of the code:</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>// temporary storage\n            RGBTRIPLE triple;\n\n            // read RGB triple from infile\n            fread(&amp;triple, sizeof(RGBTRIPLE), 1, inptr);\n\n            RGBTRIPLE red = {0, 0, 255};\n            int same = 0; \n            RGBTRIPLE white = {255, 255, 255};\n\n            if(&amp;red.rgbtRed == &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtGreen != &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtBlue != &amp;triple.rgbtRed)\n            {\n                same = 1; \n            }\n\n            if(same == 0) //copy the pixel, if the pixel isn't red\n            {\n                // write RGB triple to outfile\n                fwrite(&amp;triple, sizeof(RGBTRIPLE), 1, outptr);    \n            }\n            if(same == 1)\n            {\n                fwrite(&amp;white, sizeof(RGBTRIPLE), 1, outptr);\n            }\n</code></pre>\n\n<p>I am trying to copy over a bmp file to another file, but get rid of any red and replace it with white (most of this code is not my work, its prewritten code that I am supposed to edit for the assignment), The copy function works, but for some reason detecting red and replacing it with white is not working. Oddly when I use the debugger, it completely skips over this part of the code: </p>\n\n<pre><code> if(&amp;red.rgbtRed == &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtGreen != &amp;triple.rgbtRed &amp;&amp; &amp;red.rgbtBlue != &amp;triple.rgbtRed)\n        {\n            same = 1; \n        }\n</code></pre>\n\n<p>which is where I am detecting if the pixel is red, the debugger acts as if the line doesn't exist. </p>\n"}, {"tags": ["c", "circular-buffer"], "comments": [{"owner": {"reputation": 4854, "user_id": 446357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2374e43485f6caeb3302e66c327608e2?s=128&d=identicon&r=PG", "display_name": "MTilsted", "link": "https://stackoverflow.com/users/446357/mtilsted"}, "edited": false, "score": 4, "creation_date": 1500487093, "post_id": 45197788, "comment_id": 77362848, "body": "Just a guess, but it might be because the smaller cache fits within the processers cache."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1500487102, "post_id": 45197788, "comment_id": 77362850, "body": "Caching. There are various caches in the operating system - the data caches, and the translation lookaside buffer for example."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500487943, "post_id": 45197788, "comment_id": 77363300, "body": "Also, one wouldn&#39;t <i>copy</i> the buffers around like this, instead you&#39;d produce into the next buffer, or add a next buffer to the list of buffers to consume, or so."}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500492201, "post_id": 45197788, "comment_id": 77365788, "body": "Indeed. I would write in the ring buffer based on a AudioUnit callback and consume the data for eg. FFT via vDSP computations when reaching say 16384 samples. But , at the end, I would write millions of bytes in the ring buffer. In this case, if the speed can be optimised by a factor 3, I try to understand why and eventually apply it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500492425, "post_id": 45197788, "comment_id": 77365927, "body": "What @AnttiHaapala says.  As the buffers get bigger, the bigger the performance advantage of handling them by address, rather than copying bulk data.  This is especially  true when a lock needs to be held when queueing a buffer - the lock only needs to be held for the time taken to push a pointer, no matter how large the buffer pointed to."}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500492934, "post_id": 45197788, "comment_id": 77366250, "body": "@ MartinJames Not sure to understand correctly, event if I use directly the content of the buffer, I need to feed it first. No?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500683755, "post_id": 45197788, "comment_id": 77463934, "body": "the posted code does not compile!! the compiler outputs many warnings messages and some error messages.  (ubuntu linux 16.04, gcc version 5.4.0)  How do you expect us to perform any analysis on your code when the posted code does not compile?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500684652, "post_id": 45197788, "comment_id": 77464046, "body": "the posted code is missing the statement: <code>#include &lt;stdint.h&gt;</code>  for the definitions of types like: <code>uint32_t</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500684728, "post_id": 45197788, "comment_id": 77464056, "body": "in function: <code>ARWritePtr( float array[] )</code> the parameter <code>array[]</code> is not used, so why pass it to the function?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500684788, "post_id": 45197788, "comment_id": 77464069, "body": "the macro: <code>DST_NONE</code> is not declared in the posted code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500684902, "post_id": 45197788, "comment_id": 77464082, "body": "the function: <code>srand()</code> expects a parameter of type: <code>unsigned int</code>, not <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500685032, "post_id": 45197788, "comment_id": 77464109, "body": "this expression: <code>(float)rand()&#47;1000000.0;</code> is taking a <code>int</code>/ dividing it by a <code>double</code>, then casting the result to <code>float</code>.   Suggest using: `(float)rand()/1000000.0F;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500685338, "post_id": 45197788, "comment_id": 77464155, "body": "regarding: <code>unsigned long tv_sec, tv_usec;</code>  these fields are being set from a <code>long int</code> value, so either cast them accordingly or (prefered) use: ` long tv_sec, tv_usec;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500685413, "post_id": 45197788, "comment_id": 77464167, "body": "for ease of readability and understanding: 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i> 2) place appropriate horizontal spacing, after semicolor, after comma, inside parens, around C operators.   The compiler doesn&#39;t care, but it really helps us humans to read/understand the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500685549, "post_id": 45197788, "comment_id": 77464183, "body": "there are two valid signatures for the <code>main()</code> function.  <code>int main( void )</code> and <code>int main( int argc, const char *argv[] )</code>  When the parameters are not going to be used, the proper signature is: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500686191, "post_id": 45197788, "comment_id": 77464274, "body": "this statement: <code>uint32_t totalBytesToWrite = kNumberOfSetToWrite  \\                                * kLengthOfOneSetOfFloatToWrite  \\                                * sizeof(float);</code> should not have the &#39;line continuation&#39; marks.  Suggest: `uint32_t totalBytesToWrite = kNumberOfSetToWrite                                * kLengthOfOneSetOfFloatToWrite                                * sizeof(float);"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500686442, "post_id": 45197788, "comment_id": 77464303, "body": "this statement: <code>printf( &quot;\\n- %lu Seconds %lu Micro Seconds \\            average Micro Seconds &#47; count framesToWrite:%f \\            total bytes written:%u  count of resets:%u\\n\\n&quot; .... should not have the &#39;line continuation&#39; marks.  Suggest: </code>printf(&quot;kNumberOfSetToWrite:%u &quot;            &quot;of kLengthOfOneSetOfFloatToWrite:%u &quot;            &quot;total bytes:%u &quot;            &quot;expected overrides:%u\\n&quot; ....`  because successive character string literals are concatenated into a single string."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500687063, "post_id": 45197788, "comment_id": 77464393, "body": "after cleaning up all the compiler problems, this line: <code>memcpy(framefloat, gSubArrayToWrite, lengthToWriteInBytes);</code> causes a seg fault event because the variable: <code>framefloat</code> contains 0"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500687981, "post_id": 45197788, "comment_id": 77464555, "body": "on the second iteration of the <code>for()</code> loop at the end of <code>main()</code>, this line: <code>memcpy(framefloat, gSubArrayToWrite, lengthToWriteInBytes);</code> is writing past the end of the destination array.  This results in undefined behavior and can lead to a seg fault event"}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500714084, "post_id": 45197788, "comment_id": 77469600, "body": "@ user3629249 Sorry that you have so many issues in Linux with GCC 5.4.0, I&#39;m using Xcode 8.3.3 on macOS 10.12.6 Sierra which uses the compiler LLVM 8.1  ARCHS = x86_64 and have no warning."}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500715837, "post_id": 45197788, "comment_id": 77470059, "body": "DST_NONE on macOS is declared in sys/time.h and uint32_t is declared via &lt;stdlib.h&gt;"}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500716896, "post_id": 45197788, "comment_id": 77470339, "body": "I do not have any errors that you mentioned. I suppose that it might be related to differences in OS/compilers or architecture used."}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500717545, "post_id": 45197788, "comment_id": 77470527, "body": "For the issue related in the <code>for</code> loop,  the buffer size being a whole multiple of <code>lengthToWritesInBytes</code>  prevents any issue and <code>ARWritePtr</code> prevents the issue for the next read (the whole multiple is tested in the original project but not here)"}, {"owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "edited": false, "score": 0, "creation_date": 1500729446, "post_id": 45197788, "comment_id": 77473863, "body": "Hi, I was able to test on a Linux machine compiling with GCC 6.2, We had some framework issues related to the includes as mentioned, but then the execution did run just fine."}], "owner": {"reputation": 81, "user_id": 5920376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0d4be6920deb24335dd13d5e9a9aa07?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Marie D.", "link": "https://stackoverflow.com/users/5920376/jean-marie-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500715757, "creation_date": 1500486971, "last_edit_date": 1500715757, "question_id": 45197788, "link": "https://stackoverflow.com/questions/45197788/why-writing-huge-amount-of-data-in-a-circular-buffer-takes-less-time-when-the-bu", "title": "Why writing huge amount of data in a circular buffer takes less time when the buffer is small", "body": "<p>I'm studying a circular buffer in C for Audio purpose</p>\n\n<p>The number of bytes I need to write in one memcpy is 2048 bytes - frame size of 512 float samples.</p>\n\n<p>I test for 32000 write operations i.e. 65536000 bytes ( 32000 * 512 *4 )</p>\n\n<ul>\n<li><p>If my circular buffer is 0x1000000 length ( 16777216), it takes 12000 micro seconds (*)</p></li>\n<li><p>If my circular buffer is 0x100000 length ( 1048576), it takes 4000 micro seconds (*)</p></li>\n</ul>\n\n<p>It looks like as if it would take more time when the circular buffer is longer \n... although the total bytes written is the same. What could explain such difference?</p>\n\n<p>I try to find for error in my code or in my interpretation of the results but could not find any explanation.</p>\n\n<p>Maybe I have a stupid mistake somewhere but I could not find it.</p>\n\n<p>I write a small example to illustrate my issue:\n<strong>Updated version</strong></p>\n\n<pre><code>//\n//  main.c\n//  TestMemoryWrite\n//\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/time.h&gt;       // DST_NONE, gettimeofday\n\n#define kLengthOfOneSetOfFloatToWrite 512\n#define kNumberOfSetToWrite  32000\n#if 0\n #define kMainBufferLengthInBytes 0x1000000  // 12000 useconds\n#else\n #define kMainBufferLengthInBytes  0x100000  //  3500 useconds\n#endif\n#define kMainBufferLengthInFloat ( kMainBufferLengthInBytes / sizeof(float) )\n\nfloat gMainBufferFloat[ kMainBufferLengthInFloat ] = {0}; // 16 777 816 bytes\nfloat gSubArrayToWrite[kLengthOfOneSetOfFloatToWrite] = {0};\n// gPtrWrite is our void* pointer in gMainBufferFloat\n// Each time we write it will be \"advanced\" for 512 float equivalent\n// When gBufferEnd is reached, gPtrWrite is reinitialized at gBufferStart\nvoid * gPtrWrite = (void*)gMainBufferFloat;\nvoid * gBufferStart = (void*)gMainBufferFloat;\nvoid * gBufferEnd = (void*)gMainBufferFloat + kMainBufferLengthInBytes;\n\n// function providing gPtrWrite value\nvoid *ARWritePtr(void)\n{\n    // Return current Pointer in gMainBufferFloat\n    void * ptrWrite = gPtrWrite;\n    // Advance our pointer or reset to the start\n    // aSetOfBytesToWrite: 2048\n    uint32_t aSetOfBytesToWrite = kLengthOfOneSetOfFloatToWrite *  sizeof(float);\n    gPtrWrite += aSetOfBytesToWrite;\n    // Shall we reach the end next time\n    if ( gPtrWrite &gt;= gBufferEnd  ) {\n        // Then reset to start\n        gPtrWrite = gBufferStart;\n    }\n    return ptrWrite;\n}\n\nint main(int argc, const char * argv[]) {\n\n    // Initialize items to compute elapsed time\n    struct timeval  tv1, tv2;\n    struct timezone  tz1 = {0, DST_NONE};\n    unsigned long tv_sec, tv_usec;\n\n    // Create data for the test\n    // Initialize random functions\n    srand((int)time(NULL));\n    for (int i = 0; i&lt;kLengthOfOneSetOfFloatToWrite; i++) {\n       gSubArrayToWrite[i] = (float)rand()/1000000.0;\n    }\n\n    // initialize timing\n    gettimeofday( &amp;tv1, &amp;tz1);\n\n    // lengthToWriteInBytes: 512 * 4\n    // -&gt; 2048\n    uint32_t lengthToWriteInBytes = kLengthOfOneSetOfFloatToWrite * sizeof(float);\n\n    // totalBytesToWrite: 32000 * 512 * 4\n    // -&gt; 65536000\n    uint32_t totalBytesToWrite = kNumberOfSetToWrite * kLengthOfOneSetOfFloatToWrite * sizeof(float);\n\n    printf(\"kNumberOfSetToWrite:%u\\n\", kNumberOfSetToWrite);\n    printf(\"of kLengthOfOneSetOfFloatToWrite:%u\\n\", kLengthOfOneSetOfFloatToWrite);\n    printf(\"total bytes:%u \\n\", totalBytesToWrite);\n    printf(\"expected overrides:%u\\n\", (uint32_t)totalBytesToWrite / kMainBufferLengthInBytes);\n\n    float *framefloat = NULL;\n    float *framefloatPrevious = NULL;\n    // 32000 loops\n    uint32_t countOfResets = 0;\n    for (int i=0; i &lt; kNumberOfSetToWrite  ; i++) {\n        // get current pointer to write in our buffer\n        framefloat = (float*)ARWritePtr();\n        // if our pointer is smaller than before, we had a reset\n        if (framefloat &lt; framefloatPrevious  &amp;&amp; framefloatPrevious ) {\n            countOfResets++;\n        }\n        // copy our 2048 bytes: memcpy(dst, src, length)\n        memcpy((void*)framefloat, (void*)gSubArrayToWrite, lengthToWriteInBytes);\n        framefloatPrevious = framefloat;\n    }\n\n    gettimeofday( &amp;tv2, &amp;tz1);\n    tv_sec=tv2.tv_sec - tv1.tv_sec;\n    tv_usec=tv2.tv_usec - tv1.tv_usec;\n\n    printf(\"\\n- %lu Seconds %lu Micro Seconds \\n\", tv_sec,  tv_usec);\n    printf(\"average Micro Seconds / count framesToWrite:%f\\n\", (double)tv_usec / (double)kNumberOfSetToWrite);\n    printf(\"total bytes written:%u  count of resets:%u\\n\\n\", totalBytesToWrite, countOfResets );\n\n    return 0;\n}\n</code></pre>\n\n<p>Would anyone have an explanation?</p>\n\n<p>(*)Using MacBook Pro 16GB 2,7 GHz Intel Core i7</p>\n"}, {"tags": ["c", "arrays", "pointers", "nested-loops"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 5, "creation_date": 1500486163, "post_id": 45197505, "comment_id": 77362287, "body": "OK, so do you have a question here?"}, {"owner": {"reputation": 39, "user_id": 8305045, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154763229168354/picture?type=large", "display_name": "Adam Heffernan-Munro", "link": "https://stackoverflow.com/users/8305045/adam-heffernan-munro"}, "edited": false, "score": 0, "creation_date": 1500486404, "post_id": 45197505, "comment_id": 77362441, "body": "Code isn&#39;t functioning properly when we run the sput.h test harness there is an issue."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1500486432, "post_id": 45197505, "comment_id": 77362459, "body": "You do not need two nested loops. Use one loop (<code>i</code>) and a destination index (<code>j</code>), to copy values that are not 10 to the destination. When the loop ends, fill the array elements from <code>j</code> to <code>i-1</code> with <code>0</code>."}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 1, "creation_date": 1500486445, "post_id": 45197505, "comment_id": 77362472, "body": "Would you mind telling us <i>the issue</i>?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500487061, "post_id": 45197505, "comment_id": 77362829, "body": "@WeatherVane - very nice answer, gave him the solution but not the code :)"}], "answers": [{"comments": [{"owner": {"reputation": 623, "user_id": 4357941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uGqwOMmMeMU/AAAAAAAAAAI/AAAAAAAAFPU/s-5WnAzDmHI/photo.jpg?sz=128", "display_name": "David Isla", "link": "https://stackoverflow.com/users/4357941/david-isla"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1500491739, "post_id": 45198807, "comment_id": 77365537, "body": "Aghhh... you are right... :S"}], "tags": [], "owner": {"reputation": 623, "user_id": 4357941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uGqwOMmMeMU/AAAAAAAAAAI/AAAAAAAAFPU/s-5WnAzDmHI/photo.jpg?sz=128", "display_name": "David Isla", "link": "https://stackoverflow.com/users/4357941/david-isla"}, "is_accepted": false, "score": 1, "last_activity_date": 1500491684, "last_edit_date": 1500491684, "creation_date": 1500490319, "answer_id": 45198807, "question_id": 45197505, "link": "https://stackoverflow.com/questions/45197505/function-that-removes-10s-from-an-array-replaces-10s-with-0s-shifts-all-rem/45198807#45198807", "title": "Function that removes 10&#39;s from an array, replaces 10&#39;s with 0&#39;s. Shifts all remaining elements to start of array", "body": "<p>There are several ways... that's one of them. </p>\n\n<pre><code>void remove_tens(int *arr, int len )\n{\n    int i = 0, n = 0;\n\n    // Skip numbers 10 from de copy \n    for( i = 0 ; i &lt; len ; i++ )\n        arr[i] != 10 ? arr[n++] = arr[i] : arr[n] = 0;\n\n    // Fill de array with 0 \n    for( i = n ; i &lt; len ; i++ )\n        arr[i] = 0;\n}\n</code></pre>\n\n<p><strong>First one</strong>: don't copy 10 numbers, skip them </p>\n\n<p>I will use <code>n</code> as an index of each non 10 number correctly copied to the array.</p>\n\n<pre><code>// Skip numbers 10 from de copy \nfor( i = 0 ; i &lt; len ; i++ )\n     arr[i] != 10 ? arr[n++] = arr[i] : arr[n] = 0;\n</code></pre>\n\n<p>That for means... If the current element is different of 10 (<code>arr[i] != 10</code>), copy that element (<code>arr[i]</code>) to the result array and move one (<code>arr[n++] = arr[i]</code>), if not, don't move and don't copy anything (<code>arr[n] = 0</code>).</p>\n\n<p><strong>Second one</strong>: fill the <em>spaces</em> with 0's</p>\n\n<p>Starting at n (<code>for( i = n...</code>), fill with 0's (<code>arr[i] = 0;</code>). </p>\n\n<p>Code and an example on <a href=\"http://coliru.stacked-crooked.com/a/fb850c16ee700312\" rel=\"nofollow noreferrer\">Coliru</a></p>\n\n<pre><code>void remove_tens(int *arr, int len )\n{\n    int i = 0, n = 0;\n\n    // Skip numbers 10 from de copy \n    for( i = 0 ; i &lt; len ; i++ )\n        arr[i] != 10 ? arr[n++] = arr[i] : arr[n] = 0;\n\n    // Fill the array with 0 \n    for( i = n ; i &lt; len ; i++ )\n        arr[i] = 0;\n}\n\n\nint main ()\n{\n    int numbers[5];\n    int i = 0;\n\n    numbers[0] = 4;\n    numbers[1] = 5;\n    numbers[2] = 10;\n    numbers[3] = 1;\n    numbers[4] = 10;\n\n    remove_tens(numbers, 5);\n\n    // Printing the result    \n    for( i = 0 ; i &lt; 5 ; i++ )\n        printf(\"%d\", numbers[i] );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8305045, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154763229168354/picture?type=large", "display_name": "Adam Heffernan-Munro", "link": "https://stackoverflow.com/users/8305045/adam-heffernan-munro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1500498783, "answer_count": 1, "score": -1, "last_activity_date": 1500496475, "creation_date": 1500486046, "last_edit_date": 1500496475, "question_id": 45197505, "link": "https://stackoverflow.com/questions/45197505/function-that-removes-10s-from-an-array-replaces-10s-with-0s-shifts-all-rem", "closed_reason": "Needs details or clarity", "title": "Function that removes 10&#39;s from an array, replaces 10&#39;s with 0&#39;s. Shifts all remaining elements to start of array", "body": "<p>Write a function that removes all the 10's from an array of n integers. The remaining elements should be shifted left towards the start of the array as required, and the \"empty\" spaces at the end of the array should be set to 0, So far we have code is not functioning properly when we run sput.h test harness </p>\n\n<pre><code>void without_tens(int *arr, int n) {\n    int i = 0; \n    for (int j = 0; arr[j] % 10 == 0 &amp;&amp; j &lt; n; j++) {\n        arr[j] = 0;\n        i = j; \n        while (i &lt; n &amp;&amp; arr[i] % 10 != 0 &amp;&amp; arr[i + 1] != 0) {\n            arr[i + 1] = arr[i];\n            break;\n        }\n    } \n}\n</code></pre>\n"}, {"tags": ["c", "average", "scanf"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 4, "creation_date": 1500485234, "post_id": 45197154, "comment_id": 77361749, "body": "You need to read values into your variables <i>before</i> computing the average."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500486660, "post_id": 45197154, "comment_id": 77362604, "body": "Possibly not going to help future readers..."}, {"owner": {"reputation": 963, "user_id": 805796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/351bc6b115265f0a9fbcb328c4532ced?s=128&d=identicon&r=PG", "display_name": "MCG", "link": "https://stackoverflow.com/users/805796/mcg"}, "edited": false, "score": 0, "creation_date": 1500497165, "post_id": 45197154, "comment_id": 77368598, "body": "For most of the stack overflow users this question may be too basic :)"}, {"owner": {"reputation": 963, "user_id": 805796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/351bc6b115265f0a9fbcb328c4532ced?s=128&d=identicon&r=PG", "display_name": "MCG", "link": "https://stackoverflow.com/users/805796/mcg"}, "edited": false, "score": 0, "creation_date": 1500497341, "post_id": 45197154, "comment_id": 77368689, "body": "Why do you have two pairs of curly braces?"}, {"owner": {"reputation": 13, "user_id": 8332993, "user_type": "registered", "profile_image": "https://graph.facebook.com/1577767662295895/picture?type=large", "display_name": "Muhammad Shahryar", "link": "https://stackoverflow.com/users/8332993/muhammad-shahryar"}, "edited": false, "score": 0, "creation_date": 1500549242, "post_id": 45197154, "comment_id": 77391892, "body": "Am new to programming"}, {"owner": {"reputation": 13, "user_id": 8332993, "user_type": "registered", "profile_image": "https://graph.facebook.com/1577767662295895/picture?type=large", "display_name": "Muhammad Shahryar", "link": "https://stackoverflow.com/users/8332993/muhammad-shahryar"}, "edited": false, "score": 0, "creation_date": 1500549666, "post_id": 45197154, "comment_id": 77392171, "body": "I used two pairs because before that I had another another different program written in it so I used two pairs of brackets around each code to separate them and another third one(that you mentioned) for return value which would apply to all program."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500485194, "post_id": 45197213, "comment_id": 77361725, "body": "<code>test1Marks</code> is uninitialize, not necessarily 0.  Attempting to read <code>test1Marks</code> before initialization/assignment is UB."}], "tags": [], "owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "is_accepted": true, "score": 5, "last_activity_date": 1500485737, "last_edit_date": 1500485737, "creation_date": 1500485073, "answer_id": 45197213, "question_id": 45197154, "link": "https://stackoverflow.com/questions/45197154/this-c-program-gives-zero-average-whats-wrong-in-it/45197213#45197213", "title": "This C program gives zero average.Whats wrong in it?", "body": "<p>Move <code>averageMarks=(test1Marks+test2Marks+test3Marks)/3;</code> <em>after the last</em> <code>scanf</code> but <em>before</em> the <code>print</code> statement in which you are printing the average!</p>\n\n<pre><code>int main()\n{\n    float test1Marks,test2Marks,test3Marks,averageMarks;\n\n    printf(\"Test 1 Marks:\");\n    scanf(\"%f\",&amp;test1Marks);\n\n    printf(\"Test 2 Marks:\");\n    scanf(\"%f\",&amp;test2Marks);\n\n    printf(\"Test 3 Marks:\");\n    scanf(\"%f\",&amp;test3Marks);\n\n    /* Now with determined test1Marks, test2Marks, and test3Marks\n       values we can compute their average:\n    */\n    averageMarks=(test1Marks+test2Marks+test3Marks)/3;\n\n    printf(\"Average Marks of tests are:%f\",averageMarks);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1500485453, "creation_date": 1500485453, "answer_id": 45197333, "question_id": 45197154, "link": "https://stackoverflow.com/questions/45197154/this-c-program-gives-zero-average-whats-wrong-in-it/45197333#45197333", "title": "This C program gives zero average.Whats wrong in it?", "body": "<p>You need to read values into your variables before computing the average <a href=\"https://stackoverflow.com/questions/45197154/this-c-program-always-gives-zero-average-whats-wrong-in-it#comment77361749_45197154\">@John Bode 1</a></p>\n\n<p>Compute <code>averageMarks=(test1Marks+test2Marks+test3Marks)/3;</code> after the values are read.</p>\n\n<p>In another language this approach may work, yet C requires sequential evaluation.</p>\n"}, {"tags": [], "owner": {"reputation": 752, "user_id": 7654030, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/852379ca630c9bca3c121b1e54ad4a19?s=128&d=identicon&r=PG&f=1", "display_name": "Austin_Anderson", "link": "https://stackoverflow.com/users/7654030/austin-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1500485671, "creation_date": 1500485671, "answer_id": 45197391, "question_id": 45197154, "link": "https://stackoverflow.com/questions/45197154/this-c-program-gives-zero-average-whats-wrong-in-it/45197391#45197391", "title": "This C program gives zero average.Whats wrong in it?", "body": "<p><code>averageMarks=(test1Marks+test2Marks+test3Marks)/3;</code> is not a function, it is a series of statements to do something, where it adds the values in those variable <em>at the time it is run</em>, and then divides by 3, and assigns the result to averageMarks.</p>\n\n<p>when you read in the values, <code>scanf</code> puts whatever value it reads into the variables when it is executed, and then you print out the <code>averageMarks</code>, which was already computed and stored earlier with the empty variables you made with the first statement.</p>\n"}], "owner": {"reputation": 13, "user_id": 8332993, "user_type": "registered", "profile_image": "https://graph.facebook.com/1577767662295895/picture?type=large", "display_name": "Muhammad Shahryar", "link": "https://stackoverflow.com/users/8332993/muhammad-shahryar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 45197213, "answer_count": 3, "score": -1, "last_activity_date": 1504989822, "creation_date": 1500484887, "last_edit_date": 1500549870, "question_id": 45197154, "link": "https://stackoverflow.com/questions/45197154/this-c-program-gives-zero-average-whats-wrong-in-it", "title": "This C program gives zero average.Whats wrong in it?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    {\n        float test1Marks, test2Marks, test3Marks, averageMarks;\n        averageMarks = (test1Marks + test2Marks + test3Marks) / 3;\n\n        printf(\"Test 1 Marks:\");\n        scanf(\"%f\", &amp;test1Marks);\n\n        printf(\"Test 2 Marks:\");\n        scanf(\"%f\", &amp;test2Marks);\n\n        printf(\"Test 3 Marks:\");\n        scanf(\"%f\", &amp;test3Marks);\n\n        printf(\"Average Marks of tests are:%f\", averageMarks);\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Everything alright but the final output which gives average is wrong.\nBut when I assign values to two of the variables and input third ones value by scanf syntax then it gives the average otherwise not.</p>\n"}, {"tags": ["ruby-on-rails", "c", "ruby", "heroku"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1500518579, "post_id": 45197132, "comment_id": 77375084, "body": "The usual way to do this would be to create a Gem containing the C extension, which would then be compiled when it is installed during deployment."}], "answers": [{"comments": [{"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 1, "creation_date": 1500507575, "post_id": 45197423, "comment_id": 77372503, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/16764489\">From Review</a>"}, {"owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "reply_to_user": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1500508535, "post_id": 45197423, "comment_id": 77372791, "body": "I edited the comment to include more instructions in case the link changes"}], "tags": [], "owner": {"reputation": 397, "user_id": 1642511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f2c418f2e87d63e2ccbf538ed70fdb?s=128&d=identicon&r=PG", "display_name": "Eric Himmelreich", "link": "https://stackoverflow.com/users/1642511/eric-himmelreich"}, "is_accepted": true, "score": 3, "last_activity_date": 1500508472, "last_edit_date": 1500508472, "creation_date": 1500485772, "answer_id": 45197423, "question_id": 45197132, "link": "https://stackoverflow.com/questions/45197132/is-there-any-support-for-extending-ruby-using-c-on-heroku/45197423#45197423", "title": "Is there any support for extending Ruby using C on Heroku?", "body": "<p>You can use Heroku Buildpacks to solve this <a href=\"https://blog.heroku.com/buildpacks\" rel=\"nofollow noreferrer\">https://blog.heroku.com/buildpacks</a></p>\n\n<p>I did some work with the linguist gem which required C extensions to work and solved it by using the correct buildpack.</p>\n\n<p>You can either use a prebuilt buildpack or build your own</p>\n"}], "owner": {"reputation": 123, "user_id": 4196243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-Ih2-y04fww4/AAAAAAAAAAI/AAAAAAAAABo/zYo6kU9Vmic/photo.jpg?sz=128", "display_name": "computergorl", "link": "https://stackoverflow.com/users/4196243/computergorl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 45197423, "answer_count": 1, "score": 1, "last_activity_date": 1500508472, "creation_date": 1500484822, "question_id": 45197132, "link": "https://stackoverflow.com/questions/45197132/is-there-any-support-for-extending-ruby-using-c-on-heroku", "title": "Is there any support for extending Ruby using C on Heroku?", "body": "<p>I am trying to quickly calculate the hamming distance between two 64 bit integers in Ruby. I quickly discovered that even with Ruby's optimized string functions etc. it wouldn't be enough, so I turned to C extensions. For comparison, Pure Ruby benchmarked at about 350,000 comparisons per second and C extensions benchmarked at around 4,000,000. </p>\n\n<p>I used the implementation <a href=\"https://stackoverflow.com/a/6397116/4196243\">here</a> and compiled it on my computer where it worked fine. The problem I have is using it on Heroku. I tried <code>ruby extconf.rb make</code> to create the makefile, which worked, and then <code>make</code> to compile it which failed with <code>make: gcc: Command not found</code>. It doesn't matter to me if I do this on deploy or not, but I don't know how to run code automatically at deploy. This has vexed me - if anyone could help it would be much appreciated.</p>\n"}, {"tags": ["ios", "c", "xcode", "frameworks", "gdal"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 8222761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sXK_i_s9Ve0/AAAAAAAAAAI/AAAAAAAAAIQ/CxAfuoyve7Y/photo.jpg?sz=128", "display_name": "Scott Driggers", "link": "https://stackoverflow.com/users/8222761/scott-driggers"}, "edited": false, "score": 0, "creation_date": 1500486335, "post_id": 45197243, "comment_id": 77362402, "body": "When I add these paths to &quot;Library Search Paths&quot; in Xcode, I add them without the &quot;-L&quot; and it supplies the &quot;-L&quot;  Should I add the path &quot;/usr/local/Cellar/gdal/1.11.5_2/lib-lgdal&quot; like that?"}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "reply_to_user": {"reputation": 139, "user_id": 8222761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sXK_i_s9Ve0/AAAAAAAAAAI/AAAAAAAAAIQ/CxAfuoyve7Y/photo.jpg?sz=128", "display_name": "Scott Driggers", "link": "https://stackoverflow.com/users/8222761/scott-driggers"}, "edited": false, "score": 0, "creation_date": 1500486857, "post_id": 45197243, "comment_id": 77362722, "body": "@ScottDriggers I&#39;ve never used Xcode, sorry. All I can say is that <code>ld</code> isn&#39;t getting the parameters you want it to get."}, {"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "reply_to_user": {"reputation": 139, "user_id": 8222761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sXK_i_s9Ve0/AAAAAAAAAAI/AAAAAAAAAIQ/CxAfuoyve7Y/photo.jpg?sz=128", "display_name": "Scott Driggers", "link": "https://stackoverflow.com/users/8222761/scott-driggers"}, "edited": false, "score": 0, "creation_date": 1500486920, "post_id": 45197243, "comment_id": 77362753, "body": "@ScottDriggers But Library Search Paths sounds like the right place to specify that path, and someplace else you&#39;ll want to specify the library <code>gdal</code>"}], "tags": [], "owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1500485156, "creation_date": 1500485156, "answer_id": 45197243, "question_id": 45196791, "link": "https://stackoverflow.com/questions/45196791/error-when-linking-c-libraries-downloaded-from-homebrew-to-xcode-project/45197243#45197243", "title": "Error when linking C libraries downloaded from Homebrew to Xcode Project", "body": "<p>I've not done any Xcode or iOS development, but I'd suggest fixing the linker errors before you do anything else:</p>\n\n<p><code>ld: warning: directory not found for option '-L-L/usr/local/Cellar/gdal/1.11.5_2/lib'</code></p>\n\n<p>The linker could not find the directory <code>-L/usr/local/Cellar/gdal/1.11.5_2/lib</code>. It looks like you've got two <code>-L</code> options one after the other, so I'd remove the first, and then double check that the directory <code>/usr/local/Cellar/gdal/1.11.5_2/lib</code> exists and includes the libraries you want. This might be an Xcode configuration problem. Look at wherever you configure the linker includes. </p>\n\n<p><code>ld: warning: directory not found for option '-L-lgdal'</code></p>\n\n<p>Same issue here, the <code>-L</code> option specifies an additional directory to look for libraries, and the <code>-l</code> option gives a specific library to include (in this case, <code>gdal</code>). The string <code>-L-lgdal</code> makes no sense, but <code>-lgdal</code> does make sense.</p>\n\n<p><code>ld: warning: ignoring file /usr/local/Cellar/gdal/1.11.5_2/lib/libgdal.1.dylib, file was built for x86_64 which is not the architecture being linked (arm64): /usr/local/Cellar/gdal/1.11.5_2/lib/libgdal.1.dylib</code></p>\n\n<p>The library that was found is for x86_64 architecture but you're trying to build an arm64 application. If you got the libraries as pre-built binaries then go find an arm64 binary. If you built the libraries then you want to re-build them for the arm64 architecture. </p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 8222761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sXK_i_s9Ve0/AAAAAAAAAAI/AAAAAAAAAIQ/CxAfuoyve7Y/photo.jpg?sz=128", "display_name": "Scott Driggers", "link": "https://stackoverflow.com/users/8222761/scott-driggers"}, "is_accepted": true, "score": 0, "last_activity_date": 1500556968, "creation_date": 1500556968, "answer_id": 45216073, "question_id": 45196791, "link": "https://stackoverflow.com/questions/45196791/error-when-linking-c-libraries-downloaded-from-homebrew-to-xcode-project/45216073#45216073", "title": "Error when linking C libraries downloaded from Homebrew to Xcode Project", "body": "<p>I found the answer.  I was trying to install Mac OSX applications to my iOS application.  Yea, I know, pretty dumb.  I fixed this by googling around until I found someone who had a <a href=\"http://www.hurtsdevelopment.com/blog/uncategorized/gdal-on-ios-it-works/\" rel=\"nofollow noreferrer\">tutorial</a> for this solution.  Hope this helps somebody sometime.</p>\n"}], "owner": {"reputation": 139, "user_id": 8222761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sXK_i_s9Ve0/AAAAAAAAAAI/AAAAAAAAAIQ/CxAfuoyve7Y/photo.jpg?sz=128", "display_name": "Scott Driggers", "link": "https://stackoverflow.com/users/8222761/scott-driggers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 45216073, "answer_count": 2, "score": 0, "last_activity_date": 1500556968, "creation_date": 1500483781, "last_edit_date": 1500484784, "question_id": 45196791, "link": "https://stackoverflow.com/questions/45196791/error-when-linking-c-libraries-downloaded-from-homebrew-to-xcode-project", "title": "Error when linking C libraries downloaded from Homebrew to Xcode Project", "body": "<p>So guys, I've been struggling for two days trying to get GDAL libraries working with my iOS application.  Whenever I try to build my program, I get a error like the following: </p>\n\n<pre><code>Ld /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Products/Debug-iphoneos/Mapper.app/Mapper normal arm64\ncd /Users/scottdriggers/Documents/XcodeProjects/Mapper\nexport IPHONEOS_DEPLOYMENT_TARGET=9.0\nexport PATH=\"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\"\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS10.3.sdk -L/Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Products/Debug-iphoneos -L-L/usr/local/Cellar/gdal/1.11.5_2/lib -L-lgdal -L/usr/local/Cellar/gdal/1.11.5_2/lib -F/Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Products/Debug-iphoneos -F/Users/scottdriggers/Documents/XcodeProjects/Mapper/Pods/DJI-SDK-iOS/iOS_Mobile_SDK -F/Users/scottdriggers/Documents/XcodeProjects/Mapper/Pods/DJI-UILibrary-iOS/iOS_UILibrary -filelist /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Intermediates/Mapper.build/Debug-iphoneos/Mapper.build/Objects-normal/arm64/Mapper.LinkFileList -Xlinker -rpath -Xlinker @executable_path/Frameworks -Xlinker -rpath -Xlinker @loader_path/Frameworks -Xlinker -rpath -Xlinker @executable_path/Frameworks -miphoneos-version-min=9.0 -dead_strip -Xlinker -object_path_lto -Xlinker /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Intermediates/Mapper.build/Debug-iphoneos/Mapper.build/Objects-normal/arm64/Mapper_lto.o -Xlinker -export_dynamic -Xlinker -no_deduplicate -fobjc-arc -fobjc-link-runtime -ObjC -framework DJISDK -framework DJIUILibrary -ObjC -framework DJISDK -framework DJIUILibrary -I/usr/local/Cellar/gdal/1.11.5_2/include -lgdal.1 -framework CoreGraphics -framework MapKit -framework CoreLocation -framework UIKit -framework Foundation /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Products/Debug-iphoneos/VideoPreviewer.framework/VideoPreviewer -lPods-Mapper -Xlinker -dependency_info -Xlinker /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Intermediates/Mapper.build/Debug-iphoneos/Mapper.build/Objects-normal/arm64/Mapper_dependency_info.dat -o /Users/scottdriggers/Library/Developer/Xcode/DerivedData/Mapper-goynotoybcqaezfpmrcmfwumcokh/Build/Products/Debug-iphoneos/Mapper.app/Mapper\n\nld: warning: directory not found for option '-L-L/usr/local/Cellar/gdal/1.11.5_2/lib'\nld: warning: directory not found for option '-L-lgdal'\nld: warning: ignoring file /usr/local/Cellar/gdal/1.11.5_2/lib/libgdal.1.dylib, file was built for x86_64 which is not the architecture being linked (arm64): /usr/local/Cellar/gdal/1.11.5_2/lib/libgdal.1.dylib\nUndefined symbols for architecture arm64:\n\"_GDALGetRasterXSize\", referenced from:\n  -[GEOTIFFManager averageFile:] in GEOTIFFManager.o\n\"_GDALGetRasterYSize\", referenced from:\n  -[GEOTIFFManager averageFile:] in GEOTIFFManager.o\n</code></pre>\n\n<p>...many similar issues...</p>\n\n<pre><code>ld: symbol(s) not found for architecture arm64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Like the <strong>EXPERT LEVEL PROGRAMMER</strong> I am, I immediately went to google to search for others with similar issues, and found that there were quite a few.  Following their recommendations, I did all of the following things several times in several different orders:</p>\n\n<p>I cleaned and tried to build the project again<br>\nI deleted the contents of the derived data folder for Xcode<br>\nI updated the Header Search Paths, the Other Linker Flags, the Framework Search Paths, and the Library Search Paths to everything I was recommended and nothing helped.  The current state of these settings is as follows:<br>\n<strong>Framework Search Paths:</strong><br>\n    $(inherited)<br>\n<strong>Header Search Paths:</strong><br>\n    $(inherited)<br>\n    \"${PODS_ROOT}/Headers/Public/DJI-SDK-iOS\"<br>\n    \"${PODS_ROOT}/Headers/Public/DJI-UILibrary-iOS\"<br>\n    /usr/local/Cellar/gdal/1.11.5_2/include<br>\n    /usr/local/include<br>\n<strong>Library Search Paths:</strong><br>\n    -L/usr/local/Cellar/gdal/1.11.5_2/lib<br>\n    -lgdal<br>\n    /usr/local/Cellar/gdal/1.11.5_2/lib<br>\n<strong>Runpath Search Paths:</strong><br>\n    $(inherited)<br>\n    @executable_path/Frameworks  </p>\n\n<p>I was receiving more of these errors and I was able to fix some of these by adding some libraries into the tab \"Link Binary With Libraries\" in the Build Phases of my target, but these GDAL errors wont go away, even when I link the library from the /usr/local/lib file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BBedc.jpg\" rel=\"nofollow noreferrer\">Link Binaries With Libraries</a></p>\n\n<p><strong>Background:</strong> I need to view a pixel from a GEOTiff file for my program.  I am writing my application in OBJC, but the GDAL libraries are for C++ or C.<br>\nI installed these libraries using Homebrew, and this went fine, all of the files linked in /usr/local, but they are not working right with Xcode.  I originally started writing this file in C++ but switched to C after a day of errors like this.  After switching to C (so I wouldn't have to compile in OBJC++), I am still going through the same errors.  </p>\n\n<p>Note: I am also using Cocoapods to run some other libraries, but Cocoapods didn't have a GDAL library or I would have tried that route.</p>\n\n<p><strong>The Plot Thickens:</strong>  When I run the program for the iPhone simulator instead of trying to run it on my iPhone 7, the program compiles just fine and says \"build succeeded\", but I get another error when it tries to attach it to the simulator: </p>\n\n<pre><code>dyld: Library not loaded: /usr/local/opt/gdal/lib/libgdal.1.dylib\nReferenced from: /Users/scottdriggers/Library/Developer/CoreSimulator/Devices/1618C362-7271-4E1D-93C7-DE7CE2F15F59/data/Containers/Bundle/Application/905B2454-C731-42DC-8963-5B5C3F4A62A6/Mapper.app/Mapper\nReason: no suitable image found.  \nDid find: /usr/local/opt/gdal/lib/libgdal.1.dylib: mach-o, but not built for iOS simulator\n</code></pre>\n\n<p>I don't think its necessary to include the file that causes the errors, but here is a sampling if anybody wants to take a look: </p>\n\n<pre><code>#include \"GEOTIFFManager.h\"\n#include \"gdal.h\"\n#include \"cpl_conv.h\"\n@interface GEOTIFFManager()\n@end\n@implementation GEOTIFFManager\n- (id) init{\n    self = [super init];\n    GDALAllRegister();\n    return self;\n}\n- (float) getPixelValueOfCoordinate:(double *)coordinate FromFile:(char *)name{\n    GDALDatasetH* inFile = (GDALDatasetH*)GDALOpen(name, GA_ReadOnly);\n    double* transformation = NULL;\n    GDALGetGeoTransform(inFile, transformation);\n    double* transformedCoord;\n    transformedCoord = reverseTransform(coordinate, transformation);\n    int pixelX = floor(transformedCoord[0]);\n    int pixelY = floor(transformedCoord[1]);\n    float tempArray[1] = {-1.0};\n    float* output = tempArray;\n    GDALRasterBandH Band = GDALGetRasterBand(inFile, 1);\n    GDALRasterIO(Band, GF_Read, pixelX, pixelY, 1, 1, output, 1, 1, GDT_CFloat32, 0, 0);\n    return output[0];\n}\n</code></pre>\n\n<p>Anyways, thank you all for your help, I do appreciate it.  Hope yall can provide some helpful tips.</p>\n"}, {"tags": ["c", "arrays", "data-structures", "find-occurrences"], "comments": [{"owner": {"reputation": 1429, "user_id": 1783971, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TszrZ.jpg?s=128&g=1", "display_name": "rootkea", "link": "https://stackoverflow.com/users/1783971/rootkea"}, "edited": false, "score": 0, "creation_date": 1500483232, "post_id": 45196515, "comment_id": 77360604, "body": "Let me guess these numbers are actually digits?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 3, "creation_date": 1500483234, "post_id": 45196515, "comment_id": 77360606, "body": "use a dictionary. if you encounter say &quot;3&quot; store 1 under key &quot;3&quot;, if you encounter &quot;3&quot; once again, your dictionary should have such value: &quot;3&quot;:2 and so on. or you can use array instead of dictionary too."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1500483875, "post_id": 45196515, "comment_id": 77360994, "body": "Further to what Giorgi wrote above, you can use a hash table to create the dictionary. If the hash table size is significantly larger than the number of elements in the input array (say, twice as large), lookup and insertion/increment should be approximately O(1). Then the overall complexity will be O(max(m,n)) where m is the length of the input array and n is the number of numbers in the collection."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500484338, "post_id": 45196515, "comment_id": 77361287, "body": "Does &quot;collection of number can be of size 10^5&quot; imply the range of numbers read is [0 ... 9,999]?  Something else?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500689395, "post_id": 45196515, "comment_id": 77464773, "body": "when calling any of the heap allocation functions: (malloc, calloc, realloc) 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the returned type is <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500689959, "post_id": 45196515, "comment_id": 77464853, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500690327, "post_id": 45196515, "comment_id": 77464911, "body": "there are on two valid signatures (regardless of what visual studio might allow) for the <code>main()</code> function.  <code>int main( void )</code> and <code>int main( int, char* )</code>  They all have a returned type of <code>int</code>, not <code>void</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500690486, "post_id": 45196515, "comment_id": 77464939, "body": "the variable <code>size</code> should have a type of <code>size_t</code>, not <code>int</code> so it will contain the proper type for the parameter to <code>malloc()</code>  suggest: <code>size_t size;</code> and <code>if( 1 != scanf( &quot;%ul&quot;, &amp;size ) )</code>  and because of that fix, this line: <code>for(int i=0;i&lt;size;i++)</code> should be: for( size_t i=0; i&lt;size; i++ )` and this line: <code>for(int j=0;j&lt;size;j++){</code> should be: <code>for( size_t j=0; j&lt;size; j++){</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500691126, "post_id": 45196515, "comment_id": 77465028, "body": "the posted code calls <code>scanf()</code> to input the <code>key</code> to search for in the array, so why read yet another value into <code>temp</code> then search for that value in the array?  especially using <code>key</code> as a loop counter limit value.   The value read into <code>key</code> could be anything from -2gig to +2gig,  I.E.  it has no relationship with the number of elements in the array"}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1500483335, "post_id": 45196615, "comment_id": 77360659, "body": "How do we know the range of elements is small?"}, {"owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 0, "creation_date": 1500483383, "post_id": 45196615, "comment_id": 77360691, "body": "Can you clarify how you came to that? The constraint say &quot;Constrains:Array can be of size 10^5 and collection of number can be of size 10^5&quot; that implies the size of the arrays, no?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1500483389, "post_id": 45196615, "comment_id": 77360693, "body": "@IanAbbott It&#39;s a constraint listed in the question: <i>collection of number can be of size 10^5</i>"}, {"owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 0, "creation_date": 1500483477, "post_id": 45196615, "comment_id": 77360742, "body": "If I&#39;m misunderstanding the statement couldn&#39;t &quot;collection of number can be of size 10^5,&quot; refer just to the size of the array and not the value of the elements?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500483484, "post_id": 45196615, "comment_id": 77360744, "body": "of <i>size</i>, but the numbers themselves are not limited."}, {"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 1, "creation_date": 1500483488, "post_id": 45196615, "comment_id": 77360748, "body": "10^5 is only 100000, which is relatively small."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500483508, "post_id": 45196615, "comment_id": 77360755, "body": "What&#39;s missing is whether the numbers in the array are constrained in a known range (other than <code>[INT_MIN .. INT_MAX]</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "edited": false, "score": 0, "creation_date": 1500483633, "post_id": 45196615, "comment_id": 77360835, "body": "@samanime 10,000 may be small on platforms you use, but is large and significant on common embedded processors in 2017.  IAC, it is an <code>O()</code> related issue."}, {"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500484048, "post_id": 45196615, "comment_id": 77361106, "body": "@chux Yes, if this was being done for an embedded processor. But if it&#39;s goal is O(n), then it&#39;s going to have to use more memory. With a more constrained array size, the efficiency would have to go up in order to minimize memory use. It&#39;s a trade-off. The question clearly states that it&#39;s allowing a certain amount of memory usage."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1500483243, "creation_date": 1500483243, "answer_id": 45196615, "question_id": 45196515, "link": "https://stackoverflow.com/questions/45196515/occurence-of-a-element-in-unsorted-array-by-on/45196615#45196615", "title": "Occurence of a element in unsorted array by O(n)", "body": "<p>The range of elements is small.  So create an array of counters for the possible values and increment the count for each value you find.  For example, if you find 2, increment <code>counter[2]</code>.</p>\n\n<p>Then given your collection of numbers, just do an array lookup to get the count.</p>\n"}, {"comments": [{"owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 0, "creation_date": 1500483843, "post_id": 45196681, "comment_id": 77360975, "body": "This solution would be good if we know the range of the elements. 10^5 refer just to the size of the arrays. Though this satisfy O(n) in time-complexity, space-complexity would be horrible if the range of element values were extreme."}, {"owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "reply_to_user": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 0, "creation_date": 1500484169, "post_id": 45196681, "comment_id": 77361179, "body": "Indeed, but it&#39;s highly unlikely that the size of the numbers are larger than the size of the array. While it&#39;s not stated in the problem provided, a solution that is still O(n) for any arbitrarily large number would be a problem that is many, many magnitudes more complex then I suspect it&#39;s meant to be. I even doubt you could create a true O(n) solution with a fixed memory size with an arbitrarily large number, because you&#39;d have to have some sort of hashing function involved somewhere which would likely be greater than O(1)."}, {"owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "edited": false, "score": 0, "creation_date": 1500484654, "post_id": 45196681, "comment_id": 77361446, "body": "The point of my comment is from a theory standpoint. &quot;Highly unlikely&quot; does not subject itself to impossible under theoretical scrutiny. I myself am nether claiming that I know of a solution that can accomplish this with O(1) memory size, but it is to be that this solution be acknowledged of this memory size situation."}], "tags": [], "owner": {"reputation": 20934, "user_id": 1261825, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/44eaaa3783922a617281e96bfe3f5343?s=128&d=identicon&r=PG", "display_name": "samanime", "link": "https://stackoverflow.com/users/1261825/samanime"}, "is_accepted": false, "score": 0, "last_activity_date": 1500483423, "creation_date": 1500483423, "answer_id": 45196681, "question_id": 45196515, "link": "https://stackoverflow.com/questions/45196515/occurence-of-a-element-in-unsorted-array-by-on/45196681#45196681", "title": "Occurence of a element in unsorted array by O(n)", "body": "<p>A very simple way to do this would be to have your resulting array's keys be where the values are.</p>\n\n<p>My C skills are kind of weak, but here is how in pseudo-C (you'll have to tweak it to make it work properly:</p>\n\n<pre><code>int size = 10*10*10*10*10;\nint[size] input = getInput();\nint[size] results = new int[size](0); // fill array with zeros\n\nfor(int i = 0; i &lt; size; i++) {\n  if (input[i] === -1)\n    break; // assuming -1 signifies the end of the input\n\n  output[input[i]]++; // increment the value at the index that matches the number by one\n}\n\nfor(int i = 0; i &lt; size; i++) {\n  if (output[i] === 0)\n    continue; // number wasn't in array\n\n  printf('%d', output[i]);\n}\n</code></pre>\n\n<p>Basically, you put the input of the array in the matching index of output.</p>\n\n<p>So, if your input is <code>5,3,2,1,1,5,3,2,1</code>, you would put into output:</p>\n\n<pre><code>output[5]++;\noutput[3]++;\noutput[2]++;\noutput[1]++;\noutput[1]++;\noutput[5]++;\noutput[3]++;\noutput[2]++;\noutput[1]++;\n</code></pre>\n\n<p>resulting in an array that looks like this:</p>\n\n<pre><code>[0, 3, 2, 2, 0, 1]\n</code></pre>\n\n<p>Then you just output it, skipping the zeros because they weren't present.</p>\n"}, {"tags": [], "owner": {"reputation": 17971, "user_id": 171006, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/unCkx.jpg?s=128&g=1", "display_name": "Lior Kogan", "link": "https://stackoverflow.com/users/171006/lior-kogan"}, "is_accepted": false, "score": 2, "last_activity_date": 1500484470, "last_edit_date": 1500484470, "creation_date": 1500483954, "answer_id": 45196858, "question_id": 45196515, "link": "https://stackoverflow.com/questions/45196515/occurence-of-a-element-in-unsorted-array-by-on/45196858#45196858", "title": "Occurence of a element in unsorted array by O(n)", "body": "<p>The time complexity is O(max(m,n)) where m is the size of the array and n is the size of the collection. The space required is O(p) where p is the range of the integers that may appear in the array. We'll use p0 to denote the lower bound of this range.</p>\n\n<p>The solution is simple:</p>\n\n<ul>\n<li>Construct an array C of size p and set all values to zero   </li>\n<li>Walk over the input array and for each value k - increase C[k-p0] by 1. Now you have a count of each value.</li>\n<li>Walk over the collection and for each value k - print C[k-p0]</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500485776, "post_id": 45197018, "comment_id": 77362061, "body": "&quot;initialize it with 0.&quot; is not clearly shown here in this Java answer to a C post.  At least a comment about where initialization is implied would be helpful."}, {"owner": {"reputation": 86, "user_id": 7448241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b054bd54b7da21f5dc01ca698affcb05?s=128&d=identicon&r=PG&f=1", "display_name": "rajat188", "link": "https://stackoverflow.com/users/7448241/rajat188"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500572905, "post_id": 45197018, "comment_id": 77409826, "body": "edit done. And in the post it was not written user wanted answer in c language he was having problem with the logic behind the problem, so I provided a answer in java."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500573884, "post_id": 45197018, "comment_id": 77410439, "body": "rajat188, note that the posted was tagged C.  See <a href=\"https://stackoverflow.com/help/tagging\">tagging</a> &quot;tags appear on the question page, so other people will take them into account when answering your question.&quot;"}], "tags": [], "owner": {"reputation": 86, "user_id": 7448241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b054bd54b7da21f5dc01ca698affcb05?s=128&d=identicon&r=PG&f=1", "display_name": "rajat188", "link": "https://stackoverflow.com/users/7448241/rajat188"}, "is_accepted": true, "score": 0, "last_activity_date": 1500572734, "last_edit_date": 1500572734, "creation_date": 1500484422, "answer_id": 45197018, "question_id": 45196515, "link": "https://stackoverflow.com/questions/45196515/occurence-of-a-element-in-unsorted-array-by-on/45197018#45197018", "title": "Occurence of a element in unsorted array by O(n)", "body": "<p>You can simply make a array of 10^5 and initialize it with 0. Now iterate over array and increment the value in array. Like you encounter a 5 increment arr[5] and now you can answer the queries in O(1) time.</p>\n\n<p>Below is a code in java. </p>\n\n<pre><code>import java.util.Scanner;\npublic class test\n{\n    public static void main(String args[])\n    {\n          Scanner in=new Scanner(System.in());\n          int n=s.nextInt();\n          int arr[]=new int[100001];       //Array is initialized 0 \n          for(int i=0;i&lt;n;i++)\n          {\n               int num=s.nextInt();\n               arr[num]++;\n          }\n          while(s.hasnextInt())\n          {\n              int p=s.nextInt();\n              System.out.println(arr[p]);\n          }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 234, "user_id": 7552123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff4d4510d383ba23827223244e69940?s=128&d=identicon&r=PG&f=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/7552123/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 45197018, "answer_count": 4, "score": 2, "last_activity_date": 1500572734, "creation_date": 1500482941, "question_id": 45196515, "link": "https://stackoverflow.com/questions/45196515/occurence-of-a-element-in-unsorted-array-by-on", "title": "Occurence of a element in unsorted array by O(n)", "body": "<p>This is driving me nuts:(</p>\n\n<p>Problem statement:</p>\n\n<p>An unsorted array is inputed.Next the user gives a collection of numbers and the program should print the occurrence of the given number in that array.</p>\n\n<p><strong>This should run at O(n) time complexicity.</strong></p>\n\n<p>Example:\nInput array:[1, 1, 1, 2, 2, 0]</p>\n\n<p>Collection of numbers:</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>1</p>\n\n<p>0</p>\n\n<p>Output:</p>\n\n<p>3</p>\n\n<p>2</p>\n\n<p>3</p>\n\n<p>1</p>\n\n<p><strong>Constrains:Array can be of size 10^5 and collection of number can be of size 10^5</strong></p>\n\n<p>P.S:I have made a code with O(n^2)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid main(){\n    int *n,size,key,count=0;\n    scanf(\"%d\",&amp;size);\n    n=(int*)malloc(size*sizeof(int));\n    for(int i=0;i&lt;size;i++){\n        scanf(\"%d\",&amp;n[i]);\n    }\n    scanf(\"%d\",&amp;key);\n    for(int i=0;i&lt;key;i++){\n        count=0;\n        int temp=0;\n        scanf(\"%d\",&amp;temp);\n        for(int j=0;j&lt;size;j++){\n            if(temp==n[j])\n                 count+=1;\n        }\n        printf(\"\\n\");\n        if(count==0){\n            printf(\"NOT PRESENT\");\n        }\n        else{\n            printf(\"%d\",count);\n        }\n\n    }\n\n    }\n</code></pre>\n\n<p>Any help is welcomed :)</p>\n"}, {"tags": ["c", "filter", "driver", "mouse"], "comments": [{"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500486849, "post_id": 45196112, "comment_id": 77362715, "body": "Writing a kernel driver for Windows properly is hard, you may consider taking a class. Try to achieve your goal (modification of mouse behavior?) without a driver. What exactly do you want to modify?"}, {"owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "reply_to_user": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500535628, "post_id": 45196112, "comment_id": 77382098, "body": "Yes, I know it&#39;s a tough task but I&#39;m very much interested in learning how to do so. Do you have any suggestions of a good class I could take ? I guess you didn&#39;t read this post : <a href=\"https://stackoverflow.com/questions/44970592/using-two-mice-to-perform-completely-different-actions-in-windows\" title=\"using two mice to perform completely different actions in windows\">stackoverflow.com/questions/44970592/&hellip;</a>  where I explain rather thourougly what I want to do and the reason why I can&#39;t do it without a driver."}], "owner": {"reputation": 499, "user_id": 8252462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bf0ec9fee87a4625c1334a02be4400b2?s=128&d=identicon&r=PG&f=1", "display_name": "Getter", "link": "https://stackoverflow.com/users/8252462/getter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 754, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500481569, "creation_date": 1500481569, "question_id": 45196112, "link": "https://stackoverflow.com/questions/45196112/upper-filter-device-driver-for-a-mouse", "title": "Upper filter device driver for a mouse", "body": "<p>I've just started diving into driver related stuffs as what I want to do (cf. <a href=\"https://stackoverflow.com/questions/44970592/using-two-mice-to-perform-completely-different-actions-in-windows\">here</a>) seems undoable with a \"regular\" application. For now, I'm just trying to install a Kernel Mode Driver (KMDF) as an upper filter for the mouse I want to modify the behaviour. The source files are not empty as they are filled in according to the Visual Studio KMDF template. The only modification I\u00a0did so far in those source files was adding those two lines of code in the CreateDevice routine :</p>\n\n<pre><code>WdfFdoInitSetFilter(DeviceInit);\n\nWdfDeviceInitSetDeviceType(DeviceInit, FILE_DEVICE_MOUSE); \n</code></pre>\n\n<p>to specify that the driver is a mouse filter driver. </p>\n\n<p>However, I'm having trouble to install it as I would like on my virtual machine. Here is the INF\u00a0file (don't pay too much attention to the comments, I just added them to better understand what's going on as it's the first time I'm confronted to such a file):</p>\n\n<pre><code>;\n; EGMC_filter.inf\n;\n\n[Version]\nSignature=\"$WINDOWS NT$\" ;Operating system for which the INF\u00a0file is valid\nClass=Mouse ; The class is mouse\nClassGuid={4d36e96f-e325-11ce-bfc1-08002be10318} ; Mouse class GUID\nProvider=%ManufacturerName% ; is specified in the Strings section (bottom of this file)\nCatalogFile=EGMC_filter.cat ; for signature\nDriverVer= ; TODO: set DriverVer in stampinf property pages\n\n\n; The DestinationDirs section specifies the target destination directory for all copy, delete and/or rename operations\n; on files referenced by name elsewhere in the INF file\n\n[DestinationDirs]\nDefaultDestDir = 12 ; directory is \\Drivers on WinNT platforms\nEGMC_filter_Device_CoInstaller_CopyFiles = 11 ; Directory is  \\system32 on WinNt platforms\n\n[SourceDisksNames] \n1 = %DiskName%,,,\"\"\n\n[SourceDisksFiles] \nEGMC_filter.sys  = 1,,\nWdfCoInstaller$KMDFCOINSTALLERVERSION$.dll=1 ; make sure the number matches with SourceDisksNames\n\n;*****************************************\n; Install Section\n;*****************************************\n\n[Manufacturer] ; This section is used to list all devices handled by the driver\n%ManufacturerName%=Standard,NT$ARCH$ ;stands for architecture. Is modified depending on x64 or x86\n\n[Standard.NT$ARCH$] ; This is a model section\n%EGMC_filter.DeviceDesc%=EGMC_filter_Device, USB\\VID_093A&amp;PID_2510; Specifying the Hardware ID\u00a0for which to install the driver. No revision nb specified\n\n[EGMC_filter_Device.NT] ; This is a DDInstall section\nCopyFiles=Drivers_Dir ; CopyFiles directive that specify a copyfiles section (Drivers_Dir)\nAddReg=EGMC_filter.AddReg\n\n[EGMC_filter.AddReg]\nHKR,,\"UpperFilters\",0x0010008,\"EGMC_filter\" ; REG_MULTI_SZ value \n\n[Drivers_Dir] ; This is a CopyFile section.\nEGMC_filter.sys ; All the files in this section are copied to the specified directory in the DestinationDirs section.\n\n;-------------- Service installation\n\n\n\n[EGMC_filter_Device.NT.Services]\nAddService = EGMC_filter,%SPSVCINST_ASSOCSERVICE%, EGMC_filter_Service_Inst ; create a service installation section\n\n\n\n\n; -------------- EGMC_filter driver install sections\n[EGMC_filter_Service_Inst]\nDisplayName    = %EGMC_filter.SVCDESC%\nServiceType    = 1               ; SERVICE_KERNEL_DRIVER\nStartType      = 3               ; SERVICE_DEMAND_START\nErrorControl   = 1               ; SERVICE_ERROR_NORMAL\nServiceBinary  = %12%\\EGMC_filter.sys ; create a value in the registry with the fully qualified path of the driver's file\n\n\n;\n;--- EGMC_filter_Device Coinstaller installation ------\n;\n\n[EGMC_filter_Device.NT.CoInstallers]\nAddReg=EGMC_filter_Device_CoInstaller_AddReg ;Add a registry section\nCopyFiles=EGMC_filter_Device_CoInstaller_CopyFiles\n\n[EGMC_filter_Device_CoInstaller_AddReg]\nHKR,,CoInstallers32,0x00010000, \"WdfCoInstaller$KMDFCOINSTALLERVERSION$.dll,WdfCoInstaller\"\n\n[EGMC_filter_Device_CoInstaller_CopyFiles]\nWdfCoInstaller$KMDFCOINSTALLERVERSION$.dll\n\n[EGMC_filter_Device.NT.Wdf]\nKmdfService =  EGMC_filter, EGMC_filter_wdfsect\n[EGMC_filter_wdfsect]\nKmdfLibraryVersion = $KMDFVERSION$\n\n[Strings]\nSPSVCINST_ASSOCSERVICE= 0x00000002\nManufacturerName=\"EGMC\" ; My manufacturer name\nClassName=\"Mouse\" ;  ClassName of the device\nDiskName = \"EGMC_filter Installation Disk\" ; the disk name. DON'T KNOW WHERE IT COMES FROM !!!\nEGMC_filter.DeviceDesc = \"EGMC Filter Device\"\nEGMC_filter.SVCDESC = \"EGMC_filter Service\"\n</code></pre>\n\n<p>I'm trying to install my driver in a virtual machine running Windows 10. The VM is configured to support USB 2.0 and I've added a USB device filter in order for the VM to detect my particular mouse (otherwise, the VM\u00a0couldn't distinguish the different mice connected). </p>\n\n<p>First I tried deploying it via Visual Studio using the \"Install/Reinstall and Verify\" option in the project properties (configuration properties -> Driver Install -> Deployment). Note that remove previous driver versions before deployment is selected. </p>\n\n<p>It didn't work and I got the following error messages : </p>\n\n<pre><code>[17:32:01:625]: ERROR: Task \"Default Driver Package Installation Task\" failed to complete successfully. Look at the logs in the driver test group explorer for more details on the failure.\n[17:32:02:348]: Driver Post Install Actions\n[17:32:02:348]: Removing any existing files from test execution folder.\n[17:32:02:375]: Copying required files for \"Driver Post Install Actions\".\n[17:32:02:934]: [Driver Post Install Actions] Command Line:\n$KitRoot$\\Testing\\Runtimes\\TAEF\\te.exe \"%SystemDrive%\\DriverTest\\Run\\DriverTestTasks.dll\" /select:\"@Name='DriverTestTasks::_DriverPostInstall'\" /rebootStateFile:%SystemDrive%\\DriverTest\\Run\\DriverTestReboot.xml /enableWttLogging /wttDeviceString:$LogFile:file=\"%SystemDrive%\\DriverTest\\Run\\Driver_Post_Install_Actions_00011.wtl\",writemode=append,encoding=unicode,nofscache=true,EnableLvl=\"WexStartTest|WexEndTest|WexXml|WexProperty|WexCreateContext|WexCloseContext|*\" /runas:Elevated\n[17:32:05:387]: Result Summary: Total=1, Passed=1, Failed=0, Blocked=0, Warned=0, Skipped=0\n[17:32:05:388]: Task \"Driver Post Install Actions\" completed successfully\nDriver Deployment Task Failed: Default Driver Package Installation Task\n</code></pre>\n\n<p>It may sound stupid but I was unable to locate the logs in the driver test group explorer to get more info about the error.</p>\n\n<p>Secondly, I tried using the \"Hardware ID Driver\" option instead of the \"Install/Reinstall and Verify\" one with the following Hardware ID\u00a0\"USB\\VID_093A&amp;PID_2510\" (same as the one specified in the INF). It worked this time. However, I'm not sure to understand exactly why. So now that you got a better picture of what I'm doing, here are my questions :</p>\n\n<p>1) I did understand that the SourceDisksNames section is used to specify the name of a disk (CD-rom, DVD) containing the .sys file of the driver. However, I don't understand how to install a driver from such a disk practically. Imagine I buy a specific hardware and it comes with a CD with the corresponding driver files. Once the CD is in the player, what should I do ? Should I run the INF file in order to install it ? From what I remember the only time I had to install a driver from a disk it was a .exe file. </p>\n\n<p>2) What if I want to release my driver package via Internet ? What's the point of this section then ?</p>\n\n<p>3) By default when I created the project, VS filled the disk name with \"EGMC_filter Installation Disk\". What does it correspond to ? Should I modify it ? </p>\n\n<p>4) I don't understand how the deployment process works. I guess that VS first transfers the driver package (containing the .INF, .cat and .sys) to the VM and then launches the .INF\u00a0file in the VM. Is that right ? If yes, what does the DiskName correspond to in the VM\u00a0? Does VS\u00a0create some kind of ISO containing the package ? Where can I find where the package is stored in the VM ?</p>\n\n<p>5) Does the deployment process differ when using the \"Hardware ID Driver Update\" and the \"Install/Reinstall [\u2026]\" options ?</p>\n\n<p>6) Any idea why I can't install my driver using the \"Install/Reinstall and Verify\" option ? What's wrong with the INF file ? Has it something to do with the Disk name ?</p>\n\n<p>7) Despite having read <a href=\"https://msdn.microsoft.com/en-us/windows-drivers/develop/deployment_properties_for_driver_projects\" rel=\"nofollow noreferrer\">this page</a>, I'm confused about why I can deploy my driver with the \"Hardware ID\" option considering that I didn't respect the form Root\\xxx (I saw this page afterwards). However, it seems clear that for what I want to do, I must install my driver using the other option. Any idea why it still seems to work (at least partially) ?</p>\n\n<p>8) After the \"incorrect\" installation is completed, a \"EGMC Filter Device\" entry is added to the Device Manager under Mice and other pointer devices even when the mouse of interest is unplugged. Why is this ? When I plug it, another entry appears.</p>\n\n<p>9) When my driver is installed, the mouse doesn't work anymore (it doesn't even light up !). However, as the upper filter doesn't do anything for now, the mouse should work normally. The only explanation I've found so far is that the driver is installed as a function driver and not as a filter one. Could it be the case ? In the registry of the VM, I'm unable to find the UpperFilters keys with the \"EGMC_filter\" value in the section \"Ordinateur\\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Class{4d36e96f-e325-11ce-bfc1-08002be10318}\". The only one I found is : \"UpperFilters : VboxMouse mouclass\". It comforts me in my idea that the driver is installed as a function one\u2026 Could the VM interferes with my driver ?</p>\n\n<p>10) The driver details of the mouse of interest (left) and the regular one (right) also confuse me as the mouhid is missing from the former. <a href=\"https://i.stack.imgur.com/W1npN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W1npN.png\" alt=\"Driver details\"></a></p>\n\n<p>11) Lastly, what's the point of specifying in the driver code that it's a filter driver ? What does it change concretely ?</p>\n\n<p>I know it's a long post and that I'm asking quite specific questions but I hope you won't mind and hopefully some experts right there will be able to answer them.</p>\n\n<p>I'm looking forward to your replies.</p>\n\n<p>Guillaume.</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 3, "creation_date": 1500481638, "post_id": 45196073, "comment_id": 77359624, "body": "What is difficult about using <code>rand()</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1500481775, "post_id": 45196073, "comment_id": 77359691, "body": "If you are using C++ I would suggest using the new <a href=\"http://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\"><code>&lt;random&gt;</code></a> facilities.  You can get better randomness and after writing a convenience function it becomes really simply to call a function and give it range to return from."}, {"owner": {"reputation": 3, "user_id": 8333065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92edcf7de0f7948c7c2d47a569505877?s=128&d=identicon&r=PG", "display_name": "user8333065", "link": "https://stackoverflow.com/users/8333065/user8333065"}, "edited": false, "score": 0, "creation_date": 1500481828, "post_id": 45196073, "comment_id": 77359716, "body": "Finding seed by feeding array"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1500481853, "post_id": 45196073, "comment_id": 77359726, "body": "Can you explain what you mean by <i>finding the seed</i>? Reverse-engineering the initial seed value given a set of consecutive random numbers is only possible in limited cases."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1500482333, "post_id": 45196073, "comment_id": 77360023, "body": "Please pick a language"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1500483991, "post_id": 45196073, "comment_id": 77361078, "body": "Do I understand correctly, that you want a PRNG (which does by definition practically not allow to determine the next value), with the special attribute that it is always possible to determine the preceding value, if a sequence of a certain minumum length is known?"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1500482273, "post_id": 45196238, "comment_id": 77359978, "body": "Is there a reason you&#39;re using <code>std::bind</code> instead of a lambda?  You don&#39;t really need a <code>std::function</code> object and the type erasure that comes with it here."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500482345, "post_id": 45196238, "comment_id": 77360027, "body": "@NathanOliver No reason except that I just grabbed an old example I had previously written for another purpose. A lambda would work equally well."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1500482382, "post_id": 45196238, "comment_id": 77360044, "body": "OK.  Just checking."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 0, "last_activity_date": 1500482565, "last_edit_date": 1500482565, "creation_date": 1500482053, "answer_id": 45196238, "question_id": 45196073, "link": "https://stackoverflow.com/questions/45196073/how-to-generate-pseudorandom-no-easily/45196238#45196238", "title": "How to generate pseudorandom no. easily?", "body": "<p>Here's a simple example that generates 10 evenly distributed random numbers in the range -42 to 42 :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;random&gt;\nint main()\n{\n    std::random_device seed_device;\n    std::mt19937 engine(seed_device());\n    std::uniform_int_distribution&lt;int&gt; distribution(-42, 42);\n    auto rnd = std::bind(distribution, std::ref(engine));\n    for (int i = 0; i &lt; 10; ++i) {\n        std::cout &lt;&lt; \"random number: \" &lt;&lt; rnd() &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>See also:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/header/random</a></p>\n"}], "owner": {"reputation": 3, "user_id": 8333065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92edcf7de0f7948c7c2d47a569505877?s=128&d=identicon&r=PG", "display_name": "user8333065", "link": "https://stackoverflow.com/users/8333065/user8333065"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1500498800, "accepted_answer_id": 45196238, "answer_count": 1, "score": -6, "last_activity_date": 1500482565, "creation_date": 1500481472, "question_id": 45196073, "link": "https://stackoverflow.com/questions/45196073/how-to-generate-pseudorandom-no-easily", "closed_reason": "Needs details or clarity", "title": "How to generate pseudorandom no. easily?", "body": "<p>i am using <code>seed</code> and  functions like  <code>srand()</code> or <code>random()</code>  to generate numbers   from just <code>0 to 5</code> but i  need an easier method that makes also easy to  find <code>seed</code> by feeding array. Please suggest one</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11, "user_id": 8226647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4kuik6NZny0/AAAAAAAAAAI/AAAAAAAABWA/Ck2pfw0xT4E/photo.jpg?sz=128", "display_name": "Avi Feygin", "link": "https://stackoverflow.com/users/8226647/avi-feygin"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1500481560, "post_id": 45195995, "comment_id": 77359574, "body": "that only works for 1 character wrong answers typing &quot;ccccc&quot; still causes the repeat"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1500481998, "post_id": 45195995, "comment_id": 77359811, "body": "posted code does not compile"}, {"owner": {"reputation": 11, "user_id": 8226647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4kuik6NZny0/AAAAAAAAAAI/AAAAAAAABWA/Ck2pfw0xT4E/photo.jpg?sz=128", "display_name": "Avi Feygin", "link": "https://stackoverflow.com/users/8226647/avi-feygin"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1500483242, "post_id": 45195995, "comment_id": 77360610, "body": "fixed code compilation, forgot my imports"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1500483414, "post_id": 45195995, "comment_id": 77360708, "body": "Main issue with compilation seems to be missing declaration for <code>string_IO1</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500484719, "post_id": 45195995, "comment_id": 77361480, "body": "Tip: delete <code>#define scan_for_add scanf(&quot;%s&quot;)</code> for production code."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8226647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4kuik6NZny0/AAAAAAAAAAI/AAAAAAAABWA/Ck2pfw0xT4E/photo.jpg?sz=128", "display_name": "Avi Feygin", "link": "https://stackoverflow.com/users/8226647/avi-feygin"}, "edited": false, "score": 0, "creation_date": 1500483077, "post_id": 45196497, "comment_id": 77360495, "body": "thank you very much i&#39;ve been looking for ways online to try and clear the stream.  IT WORKED BEAUTIFULLY Now is there a way to make this safe for if the input stream is empty already so I can toss a few in just to be safe? or is there a built in c function that can check if the stream is clean?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 11, "user_id": 8226647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4kuik6NZny0/AAAAAAAAAAI/AAAAAAAABWA/Ck2pfw0xT4E/photo.jpg?sz=128", "display_name": "Avi Feygin", "link": "https://stackoverflow.com/users/8226647/avi-feygin"}, "edited": false, "score": 0, "creation_date": 1500483292, "post_id": 45196497, "comment_id": 77360640, "body": "The way to do this is <i>not</i> to call it when the input stream is empty. Calling after <code>scanf()</code> is safe, so long as you don&#39;t use some other trickery to remove extra characters first. There is no need to use extra calls for safety, though. I will add to the example shortly to maybe address your concerns a bit more...."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500484912, "post_id": 45196497, "comment_id": 77361580, "body": "&quot;... discards any characters that remain in the input stream.&quot;  --&gt; closer to &quot;... discards characters in the input stream up to the end-of-line.&quot;"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 0, "last_activity_date": 1500485913, "last_edit_date": 1500485913, "creation_date": 1500482895, "answer_id": 45196497, "question_id": 45195995, "link": "https://stackoverflow.com/questions/45195995/while-loops-repeats-with-scanf-equal-to-number-of-characters-read/45196497#45196497", "title": "While loops repeats with scanf equal to number of characters read", "body": "<p>The calls to <code>scanf()</code> in the posted code leave characters behind in the input stream. If, for example, the user enters <strong>g</strong> at the first prompt, pressing <kbd>ENTER</kbd> after, the <code>\\n</code> character is left behind. If the user enters more than one character, the extra characters are left behind. The later calls to I/O functions will pick up these unexpected characters, causing the program to misbehave.</p>\n\n<p>One solution is to write a little function to clear the input stream after such I/O function calls:</p>\n\n<pre><code>void clear_input(void)\n{\n    int c;\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF) {\n        continue;\n    }\n}\n</code></pre>\n\n<p>This function discards any characters that remain in the input stream (up to and including the first newline character). Note that <code>c</code> must be an <code>int</code> to ensure that <code>EOF</code> is handled correctly. Also note that this function should only be called when the input stream is not empty; an empty input stream will cause the call to <code>getchar()</code> to block, waiting for input.</p>\n\n<p>For example, after the first call to <code>scanf()</code> you know that there is at least a <code>\\n</code> character still in the input stream (maybe more characters preceding the newline); just call <code>clear_input()</code> to clean the input stream before the next I/O call:</p>\n\n<pre><code>scanf(\"%c\", &amp;file_console);\nclear_input();\n</code></pre>\n\n<p>The value returned by <code>scanf()</code> should be checked in robust code; the number of successful assignments made is returned, or <code>EOF</code> in rare the event of an error. This can help to validate input.</p>\n\n<p>A better option would be to use <code>fgets()</code> to read from <code>stdin</code> and fetch a line of input to a buffer, and then use <code>sscanf()</code> to parse the buffer. One advantage here is that <code>fgets()</code> will read all characters up to, and including, a newline character, provided there is adequate space in the buffer. So, allocate a generous <code>buffer[]</code> to make it likely that no reasonable input can fail to be contained in the buffer. If you need to be more careful, you can check the input buffer for a <code>\\n</code> character (using <code>strchr()</code>, for example). If the <code>\\n</code> character is found in the buffer, then the input stream is empty, otherwise there are extra characters left behind, and the <code>clear_input()</code> function can be called to clean things up:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n...\nchar buffer[1000];\nchar end;\nwhile (IO_method==0)\n{\n    printf(\"please type 'c'for console or 'f' for file to select input type\\n\");\n    if (fgets(buffer, sizeof buffer, stdin) == NULL) {\n        /* Handle input error */\n        perror(\"Error in fgets()\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* May need to clear input stream, if input is too large */\n    if (strchr(buffer, '\\n') == NULL) {\n        clear_input();\n    }\n\n    /* Input again if input is not as expected */\n    if (sscanf(buffer, \"%c%c\", &amp;file_console, &amp;end) != 2 || end != '\\n') {\n        continue;\n    }\n...\n</code></pre>\n\n<p>Here, <code>buffer[]</code> is declared with a generous size to hold all reasonable inputs. <code>fgets()</code> places the input in <code>buffer</code>, up to and including the newline (space-permitting). Note that the return value from <code>fgets()</code> is checked; a null pointer is returned if there is a rare I/O error. Next, <code>strchr()</code> is used to check for the <code>\\n</code> in <code>buffer</code>; it is expected to be present, but if not, a null pointer is returned, signalling that there are still characters in the input stream to be cleared. Next, <code>sscanf()</code> is used to parse the buffer. Here, note that <code>end</code> is used store the character after the user-input character. In expected input, this is a <code>\\n</code> character. If the user enters too many characters, testing <code>end</code> will reveal this, and input is taken again.</p>\n\n<p>Also note that in the posted code, <code>string_IO1</code> was not declared (and not a great name, since the characters in <code>IO1</code> are difficult to distinguish on a screen); if this is a character array, then the call to <code>scanf()</code> should have looked like:</p>\n\n<pre><code>scanf(\"%s\",string_IO1);\n</code></pre>\n\n<p>And, <code>file_console</code> has been declared as a <code>char</code>, so the assigment <code>file_console = NULL;</code> is wrong, since <code>NULL</code> is the null pointer macro, not an integer type.</p>\n"}], "owner": {"reputation": 11, "user_id": 8226647, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4kuik6NZny0/AAAAAAAAAAI/AAAAAAAABWA/Ck2pfw0xT4E/photo.jpg?sz=128", "display_name": "Avi Feygin", "link": "https://stackoverflow.com/users/8226647/avi-feygin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 45196497, "answer_count": 1, "score": 0, "last_activity_date": 1500490591, "creation_date": 1500481171, "last_edit_date": 1500490591, "question_id": 45195995, "link": "https://stackoverflow.com/questions/45195995/while-loops-repeats-with-scanf-equal-to-number-of-characters-read", "title": "While loops repeats with scanf equal to number of characters read", "body": "<p>I have a program that is meant to take commands the first question is the format the commands will be taken in command line or file by typing c or f\nif neither is typed the while loop repeats without allowing input equal to the number of characters in the incorrect input instead of stopping and allowing scanf to grab input again. I don't use it's return values at any point so I am at a loss as to why this happens. correctly entering 'f' or 'c' does not cause the problem.\nany help would be greatly appreciated</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define true 1\n#define false 0\ntypedef int bool;\n\ndouble **temp_array;\ndouble temp1d_array[36];\nchar consolep[100];\nchar *fp1;\nFILE *fp;\nchar string_IO1[50];\nchar string_temp[50];\nchar buffer[50];\nchar current_command[10];\nint halt = 0;\nchar *strtodptr;\n\nvoid main(){\nprintf(\"welcome \\n\");\nchar IO;\nchar read[250];\nchar file_console;\nint IO_method = 0;\nchar command[10];\nchar type_IO;\nchar type_of_var_IO;\nchar dim_IO[3];\nchar array_string_IO[40];\n\n//console or file\n\n//decide IO Method loop 1\nwhile (IO_method==0)\n{\n    printf(\"please type 'c'for console or 'f' for file to select input type\\n\");\n    scanf(\"%c\", &amp;file_console);\n\n//if console\nif(file_console =='c')\n{\n    IO_method=1;\n    printf(\"method is console\\n\");\n\n}\n\n//if file\n    else if(file_console=='f')\n    {\n        IO_method=2;\n        printf(\"method is file\\n\");\n        printf(\"please enter a file directory\\n\");\n        scanf(\"%s\",&amp;string_IO1);\n    }\n\n    else\n    {\n        printf(\"invalid entry\\n\");  \n        file_console=NULL;\n        IO_method=0;\n    }\n}}//code here continues but i compiled it without and has no bearing on the error.\n</code></pre>\n"}, {"tags": ["c", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 996, "user_id": 2792981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c793f8cd872cea8e560707a1172a9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Myrta", "link": "https://stackoverflow.com/users/2792981/tomasz-myrta"}, "is_accepted": true, "score": 2, "last_activity_date": 1500533942, "last_edit_date": 1500533942, "creation_date": 1500481679, "answer_id": 45196139, "question_id": 45195979, "link": "https://stackoverflow.com/questions/45195979/how-to-analyse-untyped-buffer-in-gdb/45196139#45196139", "title": "How to analyse untyped buffer in GDB", "body": "<p>Try this one:</p>\n\n<pre><code>print *((double*)buf+0x3f)\n</code></pre>\n\n<ul>\n<li>(buf+0x3f) - pointer to interesting part of memory</li>\n<li>(double*)(ptr) - casting it as pointer to double</li>\n<li>\"*(ptr)\" - accessing it's value</li>\n</ul>\n"}], "owner": {"reputation": 566, "user_id": 4667104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rGRu3uu46Vg/AAAAAAAAAAI/AAAAAAAAAS4/sFeLdQuPwdU/photo.jpg?sz=128", "display_name": "Elvis Teixeira", "link": "https://stackoverflow.com/users/4667104/elvis-teixeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 45196139, "answer_count": 1, "score": 1, "last_activity_date": 1500533942, "creation_date": 1500481117, "question_id": 45195979, "link": "https://stackoverflow.com/questions/45195979/how-to-analyse-untyped-buffer-in-gdb", "title": "How to analyse untyped buffer in GDB", "body": "<p>I am working on a C application that writes and reads a lot of binary data to files. The file accesses are done by pages, like in a database.</p>\n\n<p>Now, suppose we read a page like</p>\n\n<p><code>char *buf = malloc(PAGE_SIZE);\n pread(fd, buf, PAGE_SIZE, nth * PAGE_SIZE);\n</code></p>\n\n<p>What I want to know is: Is there a convenient way to analyse the contents of <code>buf</code> reinterpreting them as other types in GDB? For instance, how can I check that the <code>double</code> value at 0x3F from the beginning of this page is <code>3.14</code>?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 0, "creation_date": 1500481647, "post_id": 45195555, "comment_id": 77359630, "body": "r is an array. See also <a href=\"https://stackoverflow.com/questions/3959705/arrays-are-pointers\">this</a> question."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 8096596, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1334983339919919/picture?type=large", "display_name": "Olatunji Odelade", "link": "https://stackoverflow.com/users/8096596/olatunji-odelade"}, "edited": false, "score": 0, "creation_date": 1500480462, "post_id": 45195677, "comment_id": 77358939, "body": "Wao!! silassales your answer was really helpful"}], "tags": [], "owner": {"reputation": 36, "user_id": 8184941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GkkKtrbP1JY/AAAAAAAAAAI/AAAAAAAAB0M/IWhCFl9aEUw/photo.jpg?sz=128", "display_name": "silassales", "link": "https://stackoverflow.com/users/8184941/silassales"}, "is_accepted": false, "score": 0, "last_activity_date": 1500480167, "creation_date": 1500480167, "answer_id": 45195677, "question_id": 45195555, "link": "https://stackoverflow.com/questions/45195555/pointers-in-objective-c-returning-pointer-from-a-function/45195677#45195677", "title": "Pointers in Objective C, returning pointer from a function", "body": "<p>You are printing the pointer r (first pointer in the array of ints).</p>\n\n<p>To print the value of a position in the array use r[position].</p>\n\n<p>6296000 is the base 10 version of the address of the pointer to the array r.</p>\n"}], "owner": {"reputation": 63, "user_id": 8096596, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1334983339919919/picture?type=large", "display_name": "Olatunji Odelade", "link": "https://stackoverflow.com/users/8096596/olatunji-odelade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500602962, "creation_date": 1500479810, "last_edit_date": 1500602962, "question_id": 45195555, "link": "https://stackoverflow.com/questions/45195555/pointers-in-objective-c-returning-pointer-from-a-function", "title": "Pointers in Objective C, returning pointer from a function", "body": "<pre><code>#import &lt;Foundation/Foundation.h&gt;\n\n/* function to generate and return random numbers. */\nint * getRandom( )\n{\n   static int  r[10];\n   int i;\n\n   /* set the seed */\n   srand( (unsigned)time( NULL ) );\n   for ( i = 0; i &lt; 10; ++i)\n   {\n      r[i] = rand();\n      NSLog(@\"%d\\n\", r[i] );\n   }\n  NSLog(@\"checking for r value: %d\\n\", r );\n   return r;\n}\n\n/* main function to call above defined function */\nint main ()\n{\n   /* a pointer to an int */\n   int *p;\n   int i;\n\n   p = getRandom();\n   for ( i = 0; i &lt; 10; i++ )\n   {\n       NSLog(@\"*(p + [%d]) : %d\\n\", i, *(p + i) );\n   }`enter code here`\n\n   return 0;\n}\n</code></pre>\n\n<p>Please I need an explanation on something, am new to objective-c, on running the above code, (\"checking for r value: 6296000\") became the output of   \"NSLog(@\"checking for r value: %d\\n\", r )\", r became 6296000, please whats the meaning of 6296000 that am getting for the value of r.</p>\n"}, {"tags": ["c++", "c", "struct", "sizeof"], "comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 13, "creation_date": 1500477597, "post_id": 45194751, "comment_id": 77356934, "body": "The latter is not a valid struct, so the compiler makes up a value of its own by adding features to the c++ language. The idea probably is that sizeof(struct)+sizeof(array) will yield a pointer just past the array and (char*)structpointer+sizeof(struct) gives the first element of the array."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 1, "creation_date": 1500477851, "post_id": 45194751, "comment_id": 77357134, "body": "Related to: <a href=\"https://stackoverflow.com/questions/1626446/what-is-the-size-of-an-empty-struct-in-c\" title=\"what is the size of an empty struct in c\">stackoverflow.com/questions/1626446/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c\" title=\"what happens if i define a 0 size array in c c\">stackoverflow.com/questions/9722632/&hellip;</a>"}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 2, "creation_date": 1500477908, "post_id": 45194751, "comment_id": 77357183, "body": "Interesting, because I just did this with gcc version 6.3.0 and got an output of 0 for both."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1500478139, "post_id": 45194751, "comment_id": 77357370, "body": "And I did it again with g++ (same version of 6.3.0) and got sizeof 1 for the empty struct and sizeof 0 for the struct with a 0 size array."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1500478158, "post_id": 45194751, "comment_id": 77357393, "body": "I suggest looking at the assembly code"}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1500478225, "post_id": 45194751, "comment_id": 77357454, "body": "For C++ see: <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c\" title=\"what happens if i define a 0 size array in c c\">stackoverflow.com/questions/9722632/&hellip;</a>"}, {"owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1500478339, "post_id": 45194751, "comment_id": 77357540, "body": "Sum up so far: for C, <code>EmptyStruct</code> causes UB; for C++, <code>StructEmptyArr</code> causes UB. Am I correct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 7, "creation_date": 1500478533, "post_id": 45194751, "comment_id": 77357680, "body": "@duong_dajgja: For standard C, <code>StructEmptyArr</code> is a syntax error (there must be at least one member in the structure C11 &#167;6.7.2.1 &#182;2), as is <code>EmptyStruct</code> (zero size arrays are not permitted in standard C; C11 &#167;6.7.6.2 &#182;1).  GCC has extensions that may make them acceptable, but the standard says &quot;No&quot;."}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "reply_to_user": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1500479147, "post_id": 45194751, "comment_id": 77358121, "body": "@mgarey I suspect this won&#39;t actually help, the compiler (should) will replace the sizeof call with a literal value matching that printed out."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 5, "creation_date": 1500479409, "post_id": 45194751, "comment_id": 77358275, "body": "In passing: the result of <code>sizeof</code> operator is a size_t, so you should be using <code>%zu</code> or similar, not <code>%ld</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1500479876, "post_id": 45194751, "comment_id": 77358574, "body": "gcc and g++ will whinge about the zero-size array, if you ask it to: <code>gcc -std=c11 -Wall -Wextra -Wpedantic</code> or <code>g++ -std=c++17 -Wall -Wextra -Wpedantic</code>."}], "answers": [{"comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1500478158, "post_id": 45194937, "comment_id": 77357392, "body": "But he says that he understands the reason for why the empty struct has its size. And the struct that <i>does</i> have a named member has the confusing size."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 0, "creation_date": 1500478224, "post_id": 45194937, "comment_id": 77357452, "body": "@michael clearly the code is not ISO C, because he uses the tag withithout the tag namespace qualifier"}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500478265, "post_id": 45194937, "comment_id": 77357483, "body": "@JohannesSchaub-litb That&#39;s moot, I answered a direct question above"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 2, "creation_date": 1500478377, "post_id": 45194937, "comment_id": 77357570, "body": "@michael it is not moot because while apples are red, my shirt is blue and in ISO C structs must have a named member, none of this is relevant because the question is not about apples, ISO C, or my shirt"}, {"owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "edited": false, "score": 0, "creation_date": 1500478411, "post_id": 45194937, "comment_id": 77357597, "body": "Please see the comment above by PasserBy, that is the question I was answering."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "edited": false, "score": 0, "creation_date": 1500479515, "post_id": 45194937, "comment_id": 77358344, "body": "@duong_dajgja; Updated the answer."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500479613, "post_id": 45194937, "comment_id": 77358404, "body": "I must say that your description is incorrect. Since we are in pedantry mode, I must note that c++ allows objects of size 0"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 2, "creation_date": 1500480140, "post_id": 45194937, "comment_id": 77358743, "body": "@JohannesSchaub-litb; <a href=\"http://www.stroustrup.com/bs_faq2.html#sizeof-empty\" rel=\"nofollow noreferrer\">Its not my hypothesis</a>. Also: <i>&quot;Unless it is a bit-field (9.6), a most derived object shall have a non-zero size and shall occupy one or more bytes of storage. <b>Base class subobjects may have zero size</b>.&quot;</i>  &#167; 1.8 (p5)"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1500481884, "post_id": 45194937, "comment_id": 77359745, "body": "@hacks you say that the standard forbids objects of size 0, and go on to quote that it allows such. And link to a page that merely says that objects shall have different addresses. If I take numbers 9+0 and 8+0, both are different, yet I added 0 to them."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1500557232, "post_id": 45194937, "comment_id": 77398417, "body": "@JohannesSchaub-litb; It also says <i>a most derived object shall have a non-zero size and shall occupy one or more bytes of storage</i>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 40, "last_activity_date": 1500481486, "last_edit_date": 1500481486, "creation_date": 1500478016, "answer_id": 45194937, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array/45194937#45194937", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p>In C, the behavior of a program is undefined if a struct is defined without any named member.  </p>\n\n<p>C11-\u00a76.7.2.1:</p>\n\n<blockquote>\n  <p>If the struct-declaration-list does not contain any named members, either directly or via an anonymous structure or anonymous union, the behavior is undefined.  </p>\n</blockquote>\n\n<p>GCC allows an empty struct as <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Empty-Structures.html#Empty-Structures\" rel=\"noreferrer\">an extension</a> and its size will be <code>0</code>.</p>\n\n<hr>\n\n<p>For C++, <a href=\"http://www.stroustrup.com/bs_faq2.html#sizeof-empty\" rel=\"noreferrer\">the standard doesn't allow an object of size <code>0</code></a> and therefore <code>sizof(EmptyStruct)</code>  returns a value of 1.<br>\nArrays of zero length are not supported by standard C++\u00b9, but are <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/Zero-Length.html\" rel=\"noreferrer\">supported as an extension by GNU</a> and the <code>sizeof</code> operator will return <code>0</code> if applied.   </p>\n\n<hr>\n\n<p><sub> 1. \u00a7 8.5.1-footnote 107) C++ does not have zero length arrays. </sub> </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5368518"}, "is_accepted": false, "score": 5, "last_activity_date": 1500480007, "last_edit_date": 1500480007, "creation_date": 1500478757, "answer_id": 45195220, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array/45195220#45195220", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html</a></p>\n\n<blockquote>\n  <p>G++ treats empty structures as if they had a single member of type char.</p>\n</blockquote>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html</a></p>\n\n<blockquote>\n  <p>Zero-length arrays are allowed in GNU C. They are very useful as the last element of a structure that is really a header for a variable-length object.</p>\n</blockquote>\n"}], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2580, "favorite_count": 3, "accepted_answer_id": 45194937, "answer_count": 2, "score": 35, "last_activity_date": 1501700420, "creation_date": 1500477494, "last_edit_date": 1501700420, "question_id": 45194751, "link": "https://stackoverflow.com/questions/45194751/difference-between-sizeofempty-struct-and-sizeofstruct-with-empty-array", "title": "Difference between sizeof(empty struct) and sizeof(struct with empty array)?", "body": "<p>I have two structs defined as follows:</p>\n\n<pre><code>struct EmptyStruct{\n\n};\n\nstruct StructEmptyArr{\n    int arr[0];\n};\n\nint main(void){\n    printf(\"sizeof(EmptyStruct) = %ld\\n\", sizeof(EmptyStruct));\n    printf(\"sizeof(StructEmptyArr) = %ld\\n\", sizeof(StructEmptyArr));\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with gcc (g++) 4.8.4 on Ubuntu 14.04, x64.</p>\n\n<p>Output (for both gcc and g++):</p>\n\n<pre><code>sizeof(EmptyStruct) = 1\nsizeof(StructEmptyArr) = 0\n</code></pre>\n\n<p>I can understand why <code>sizeof(EmptyStruct)</code> equals to <code>1</code> but cannot understand why <code>sizeof(StructEmptyArr)</code> equals to <code>0</code>. Why are there differences between two?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1500477555, "post_id": 45194740, "comment_id": 77356891, "body": "Where do you assign the value of <code>position</code>?"}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 1, "creation_date": 1500477645, "post_id": 45194740, "comment_id": 77356972, "body": "You&#39;ll have a problem if n &gt; 20."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500477847, "post_id": 45194740, "comment_id": 77357130, "body": "The logic is somewhat wrong and you never assign a value to <code>position</code>, therefore it&#39;s content is indeterminate and the behaviour of the program is undefined."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500478248, "post_id": 45194740, "comment_id": 77357475, "body": "And it would also be cleaner to increment the value of <code>n</code> (which is the number of elements) because after the duplication there is one more element in the set. Then you could have the same condition <code>i&lt;n</code> in both <code>for</code> loops. And please indent your code correctly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500478739, "post_id": 45194740, "comment_id": 77357833, "body": "<code>position</code> is uninitialised. But suppose it is <code>0</code>, then <code>i&gt;=position-1</code> will cause further undefined behaviour by breaking the array index limit."}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1500478825, "post_id": 45195206, "comment_id": 77357889, "body": "what if <code>n</code> &gt; 20? And what about <code>value</code> &lt;= 0 or <code>value</code> &gt; <code>n</code>?"}], "tags": [], "owner": {"reputation": 144, "user_id": 2982586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56dea6792e3195dcbaff4e46505f4dae?s=128&d=identicon&r=PG&f=1", "display_name": "Math Lover", "link": "https://stackoverflow.com/users/2982586/math-lover"}, "is_accepted": true, "score": 1, "last_activity_date": 1500478858, "last_edit_date": 1500478858, "creation_date": 1500478713, "answer_id": 45195206, "question_id": 45194740, "link": "https://stackoverflow.com/questions/45194740/copy-an-element-from-array-and-pasting-it-in-the-end/45195206#45195206", "title": "Copy an element from array and pasting it in the end?", "body": "<p>If I don't understand bad, you want to put the element to be replicated at the end of the array, leaving the other in the same place. The code in this case can be this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int arr[20],position,i,n,value;\n    printf(\"Enter number of elements in the set\\n\");\n    scanf(\"%d\",&amp;n);\n\n    printf(\"Enter the elements in the set\\n\");\n    for(i=0;i&lt;n;i++)\n       scanf(\"%d\",&amp;arr[i]);\n\n    printf(\"Enter the position of element to be replicated from 1 to n\\n\");\n    scanf(\"%d\",&amp;value);\n    arr[n]=arr[value-1];\n\n    printf(\"Set after replication is\\n\");\n    for(i=0;i&lt;=n;i++)    \n       printf(\"%d\\n\", arr[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8237369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0e6cd6291be0fa4187c5f4c8fad8936?s=128&d=identicon&r=PG&f=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/8237369/joey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45195206, "answer_count": 1, "score": -1, "last_activity_date": 1500478933, "creation_date": 1500477470, "last_edit_date": 1500478933, "question_id": 45194740, "link": "https://stackoverflow.com/questions/45194740/copy-an-element-from-array-and-pasting-it-in-the-end", "title": "Copy an element from array and pasting it in the end?", "body": "<p><strong>Error:</strong> I am not getting the desired output</p>\n\n<p><strong>This is my program flow:</strong></p>\n\n<ol>\n<li>Get the number of elements.</li>\n<li>Get all elements.</li>\n<li>Get the position of the element to be replicated.</li>\n<li>Add the replicated element at the end of the set.</li>\n<li>Display the set.</li>\n</ol>\n\n<p><strong>Code:</strong>    </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int arr[20],position,i,n,value;\n    printf(\"Enter number of elements in the set\\n\");\n    scanf(\"%d\",&amp;n);\n\n    printf(\"Enter the elements in the set\\n\");\n    for(i=0;i&lt;n;i++)\n        scanf(\"%d\",&amp;arr[i]);\n\n    printf(\"Enter the position of element to be replicated\\n\");\n    scanf(\"%d\",&amp;value);\n    for(i=n-1;i&gt;=position-1;i--)\n        arr[i+1]=arr[i];\n    arr[position-1]=value;\n\n    printf(\"Set after replication is\\n\");\n    for(i=0;i&lt;=n;i++)\n        printf(\"%d\\n\", arr[i]);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "recursion", "clang"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1500476961, "post_id": 45194527, "comment_id": 77356441, "body": "If you need someone watching over your sholder programming, do a peer-review. Otherwise, just don&#39;t write recursive code! By desing, the compiler <b>cannot</b> warn you about recursion - unless you only use <code>static</code> functions and no function pointers."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500477215, "post_id": 45194527, "comment_id": 77356645, "body": "@Olaf well it could warn you if you use recursion with static functions (which is the kind of recursion that is done most of the time)."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1500477304, "post_id": 45194527, "comment_id": 77356705, "body": "<code>gcc</code> is first and foremost a compiler, and could but does not do a number of static analysis functions. There are, however, a number of available 3rd party static analysis tools that generate call graphs, etc. This would be most useful if you&#39;ve inherited or must analyze a large body of source code. If it&#39;s new code, then design practice and peer reviews is the appropriate way to achieve it."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500479354, "post_id": 45194527, "comment_id": 77358244, "body": "As written, I think this question is either too broad or requesting a tool recommendation. Certainly, the clang library could be used to implement a static analysis which would detect <i>some</i> recursive calls. If you are interested, it might make for a good starter project, and if you run into trouble, specific questions would be welcome."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500479560, "post_id": 45194527, "comment_id": 77358366, "body": "I don&#39;t understand. Are you a split personality guy? You wake up in the morning and notice that the second you has written something when you were sleeping. Just do not recurse."}, {"owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "edited": false, "score": 0, "creation_date": 1500479868, "post_id": 45194527, "comment_id": 77358567, "body": "I&#39;ve edited the question to clarify. Hope it&#39;s okay now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500480320, "post_id": 45194527, "comment_id": 77358855, "body": "@MichaelWalz: Either SO delivers comments differently to different users, or your browser suppressed part of my comment or you didn&#39;t read it completely. I&#39;m pretty sure I already stated that: &quot;unless you only use static functions and no function pointers&quot; (note you forgot about the second part)"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1500484345, "post_id": 45194527, "comment_id": 77361293, "body": "Related: <a href=\"https://stackoverflow.com/questions/7909148/is-there-a-tool-that-will-detect-a-recursive-function-call-in-c-code\">is there a tool that will detect a recursive function call in C code</a>"}, {"owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "edited": false, "score": 0, "creation_date": 1500499022, "post_id": 45194527, "comment_id": 77369499, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7909148/is-there-a-tool-that-will-detect-a-recursive-function-call-in-c-code\">is there a tool that will detect a recursive function call in C code?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1500481008, "creation_date": 1500481008, "answer_id": 45195945, "question_id": 45194527, "link": "https://stackoverflow.com/questions/45194527/how-to-get-a-warning-for-using-recursion/45195945#45195945", "title": "How to get a warning for using recursion?", "body": "<p>You can investigate tools to produce call trees. They might have an option to detect recursion, including mutual recursion, otherwise you might be able to patch one to get the functionality you want.</p>\n\n<p><a href=\"https://stackoverflow.com/a/517797/4593267\">See this reponse</a></p>\n\n<p>A this commercial tool from Roguewave software: <a href=\"http://docs.roguewave.com/totalview/2017.0/html/index.html#page/User_Guides/totalviewug-about-totalview.04.15.html\" rel=\"nofollow noreferrer\">TotalView</a></p>\n"}, {"tags": [], "owner": {"reputation": 991, "user_id": 7472328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91ddbe555b433ddd61621c5b5697f421?s=128&d=identicon&r=PG&f=1", "display_name": "Some Who Call Me Tim", "link": "https://stackoverflow.com/users/7472328/some-who-call-me-tim"}, "is_accepted": true, "score": 4, "last_activity_date": 1500526499, "creation_date": 1500526499, "answer_id": 45205484, "question_id": 45194527, "link": "https://stackoverflow.com/questions/45194527/how-to-get-a-warning-for-using-recursion/45205484#45205484", "title": "How to get a warning for using recursion?", "body": "<p>This is solvable using callgraph data generated by Clang.</p>\n\n<p>Step 1. Generate call graph information using clang: </p>\n\n<pre><code>clang -S -emit-llvm SourceFile.c -o - | opt -analyze -print-callgraph \n</code></pre>\n\n<p>(From <a href=\"https://stackoverflow.com/questions/5373714/generate-calling-graph-for-c-code\">Generate calling graph for C++ code</a>, replacing <code>-dot-callgraph</code> with <code>-print-callgraph</code>.)</p>\n\n<p>For an input like:</p>\n\n<pre><code>void a(){}\nvoid b(){a();}\nvoid c(){a(); b();}\nvoid d(){a(); c();}\nvoid e(){e();}\n</code></pre>\n\n<p>this will produce:</p>\n\n<pre><code>CallGraph Root is: &lt;&lt;null function: 0x0x7fdef25036c0&gt;&gt;\nCall graph node &lt;&lt;null function&gt;&gt;&lt;&lt;0x7fdef25036c0&gt;&gt;  #uses=0\n  CS&lt;0x0&gt; calls function 'a'\n  CS&lt;0x0&gt; calls function 'b'\n  CS&lt;0x0&gt; calls function 'c'\n  CS&lt;0x0&gt; calls function 'd'\n\nCall graph node for function: 'a'&lt;&lt;0x7fdef2503750&gt;&gt;  #uses=4\n\nCall graph node for function: 'b'&lt;&lt;0x7fdef25037d0&gt;&gt;  #uses=2\n  CS&lt;0x7fdef2500a38&gt; calls function 'a'\n\nCall graph node for function: 'c'&lt;&lt;0x7fdef2503870&gt;&gt;  #uses=2\n  CS&lt;0x7fdef2500cb8&gt; calls function 'a'\n  CS&lt;0x7fdef2500d28&gt; calls function 'b'\n\nCall graph node for function: 'd'&lt;&lt;0x7fdef2503970&gt;&gt;  #uses=1\n  CS&lt;0x7fdef2500fe8&gt; calls function 'a'\n  CS&lt;0x7fdef2501058&gt; calls function 'c'\n\nCall graph node for function: 'e'&lt;&lt;0x7f8912d03c10&gt;&gt;  #uses=2\n  CS&lt;0x7f8912d01318&gt; calls function 'e'\n</code></pre>\n\n<p>(In C++, mangled function names can be cleaned up with <code>c++filt</code>; templates get ugly but are doable.) With that data, it's possible to sketch out how one detects recursion:</p>\n\n<p>Step 2. Parse callgraph data into favorite scripting language to form representation of callgraph.</p>\n\n<pre><code>class Graph(object):\n\n  _callees = []\n\n  def add_callee(self, f):\n    self._callees.append(f)\n    # etc\n</code></pre>\n\n<p>Step 3. For each function, walk graph looking for calls to that function. Something kind of like this:</p>\n\n<pre><code>def walkGraph(node,f,stack):\n  for callee in node._callees:\n    if f == callee:\n      print('Recursion!')\n      dumpStack(stack,f)\n    else:\n      walkGraph(callee,f,stack.append(node))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "edited": false, "score": 0, "creation_date": 1607160234, "post_id": 65051617, "comment_id": 115188925, "body": "Good to know, thank you!"}], "tags": [], "owner": {"reputation": 1256, "user_id": 212010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8019a9fde70ba696125db5e0315e24d9?s=128&d=identicon&r=PG", "display_name": "Mathias", "link": "https://stackoverflow.com/users/212010/mathias"}, "is_accepted": false, "score": 1, "last_activity_date": 1606579508, "creation_date": 1606579508, "answer_id": 65051617, "question_id": 45194527, "link": "https://stackoverflow.com/questions/45194527/how-to-get-a-warning-for-using-recursion/65051617#65051617", "title": "How to get a warning for using recursion?", "body": "<p><code>clang-tidy</code> learned to detect this in version 11.</p>\n<p><a href=\"https://clang.llvm.org/extra/clang-tidy/checks/misc-no-recursion.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/extra/clang-tidy/checks/misc-no-recursion.html</a></p>\n"}], "owner": {"reputation": 17121, "user_id": 202919, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c98b750637d6114f5fd1893dbdfe1f39?s=128&d=identicon&r=PG", "display_name": "Venemo", "link": "https://stackoverflow.com/users/202919/venemo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 2, "accepted_answer_id": 45205484, "answer_count": 3, "score": 6, "last_activity_date": 1606579508, "creation_date": 1500476883, "last_edit_date": 1500480201, "question_id": 45194527, "link": "https://stackoverflow.com/questions/45194527/how-to-get-a-warning-for-using-recursion", "title": "How to get a warning for using recursion?", "body": "<p>Some rule sets and guidelines of embedded software development forbid recursion entirely. I use <code>arm-none-eabi-gcc</code> with an ARM Cortex-M4 based microcontroller.</p>\n\n<p>I'm looking for a static analysis tool which would warn me about the use of recursion in the code. I have little experience with such tools. Is it possible to use clang-tidy or the clang static analyzer for this? If yes, how can I configure them to warn about recursion?</p>\n\n<p>(A quick look at the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html\" rel=\"noreferrer\">gcc option summary</a> tells me that gcc alone can't do this.)</p>\n\n<p>NOTE:</p>\n\n<ul>\n<li>Please don't tell me <em>\"just don't recurse\"</em>. The code base is big and not mine alone. I'd like to be able to prove that there is no recursion in it.<br>\n(That is like saying <em>\"just don't dereference a null pointer\"</em>. While nobody does on purpose, tools exist for a reason to verify that it doesn't happen.)</li>\n</ul>\n"}, {"tags": ["c", "sockets", "rpc", "xdr"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1500477369, "post_id": 45194153, "comment_id": 77356757, "body": "Sorry, but you don&#39;t provide any where near enough information.  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that we can at least attempt to trace what&#39;s happening."}, {"owner": {"reputation": 33, "user_id": 3058329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf7fc78781017ec9b96f4d64a450dda?s=128&d=identicon&r=PG&f=1", "display_name": "Manzo Gray", "link": "https://stackoverflow.com/users/3058329/manzo-gray"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1500478143, "post_id": 45194153, "comment_id": 77357378, "body": "Shall I publish the whole server function? So that it is verifiable but I keep it minimal not including the socket connection part?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1500478848, "post_id": 45194153, "comment_id": 77357908, "body": "You&#39;re crashing inside the C library. This is very likely to mean you are calling <code>xdr_message</code> incorrectly."}, {"owner": {"reputation": 33, "user_id": 3058329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf7fc78781017ec9b96f4d64a450dda?s=128&d=identicon&r=PG&f=1", "display_name": "Manzo Gray", "link": "https://stackoverflow.com/users/3058329/manzo-gray"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1500488111, "post_id": 45194153, "comment_id": 77363392, "body": "After @zwol&#39;s suggestion I found out that I used the same <code>buffer</code> to memorize the file bytes and to create the XDR stream, that is an error. Now there is no segmentation fault and the XDR struct <code>message</code> is correctly filled, but now the call to the generated function <code>xdr_bytes()</code> returns false and the encodification still fails. I&#39;m updating the server code."}], "owner": {"reputation": 33, "user_id": 3058329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf7fc78781017ec9b96f4d64a450dda?s=128&d=identicon&r=PG&f=1", "display_name": "Manzo Gray", "link": "https://stackoverflow.com/users/3058329/manzo-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500488094, "creation_date": 1500475890, "last_edit_date": 1500488094, "question_id": 45194153, "link": "https://stackoverflow.com/questions/45194153/xdr-mem-c-no-such-file-or-directory", "title": "xdr_mem.c: No such file or directory", "body": "<p>I wrote a C server that should send to a client the file it requested through the XDR library, using the buffer paradigm. The program uses a custom struct.</p>\n\n<pre><code>enum tagtype {\n    GET = 0,\n    OK = 1,\n    QUIT = 2,\n    ERR = 3\n};\nstruct file {\n    opaque contents&lt;&gt;;\n    unsigned int last_mod_time;\n};\nunion message switch (tagtype tag) {\n    case GET:\n    string filename&lt;256&gt;;\n    case OK:\n    struct file fdata;\n    case QUIT:\n    void;\n    case ERR:\n    void;\n};\n</code></pre>\n\n<p>This is the core part of the XDR server.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#include &lt;rpc/xdr.h&gt;\n#include \"xdr_file.h\"\n\n//main() and call to manage_clixrequest()\n\nint manage_clixrequest(int clisocket_fd) {\nFILE *req_file;\nstruct stat metadata;\nchar rcv_message[CHUNK_SIZE] = \"\";\nchar *buffer, buffer2[2048];\nsize_t nbytes = 0;\nint sent, n;\nXDR xdrs_r, xdrs_w; // Pointer to XDR streams\nmessage msg, send_msg;\n\n\n/* Create codification stream */\nxdrmem_create(&amp;xdrs_r, rcv_message, sizeof(rcv_message), XDR_DECODE);\n\nmemset(&amp;msg, 0, sizeof(msg));\nmemset(&amp;send_msg, 0, sizeof(send_msg));\n\nmsg.tag = ERR;\nmsg.message_u.filename = NULL;\nmsg.message_u.fdata.contents.contents_len = 0;\nmsg.message_u.fdata.contents.contents_val = NULL;\nmsg.message_u.fdata.last_mod_time = 0;\n\n/* The server waits for data */\nn = recv(clisocket_fd, rcv_message, sizeof(rcv_message), 0);\n\n/* Check if the server received some data */\nif (n &lt; 0) {\n    printf(\"Errno %d in recv(): %s\\n\", errno, strerror(errno));\n}\n\n\nif(!xdr_message(&amp;xdrs_r, &amp;msg)){\n    printf(\"Error in xdr_message()\\n\");\n    return -1;\n}\nxdr_destroy(&amp;xdrs_r);\n\n/* For a GET message the function extracts the filename\n * and send the corresponding file to the client */\n\nif (msg.tag == GET) {\n\n    req_file = fopen(msg.message_u.filename, \"rb\");\n\n    /* Check if the file is valid */\n    if (req_file == NULL) {\n        if (errno == 2){\n\n            xdrmem_create(&amp;xdrs_w, buffer, sizeof(buffer), XDR_ENCODE);\n\n            /* The requested file does not exist, so an error message is sent\n             * and the connection is going to be shutdown */\n            send_msg.tag = ERR;\n\n            if(!xdr_message(&amp;xdrs_w, &amp;send_msg)){\n                printf(\"Error in xdr_message()\\n\");\n                return -1;\n            }\n\n            sent = send(clisocket_fd, buffer, sizeof(buffer), 0);\n\n            /* Check if the server sent the data */\n            if (sent &lt; 0) {\n                printf(\"Errno %d in send(): %s\\n\", errno, strerror(errno));\n            }\n            xdr_destroy(&amp;xdrs_r);\n            xdr_destroy(&amp;xdrs_w);\n\n            return 0;\n        } else {\n            printf(\"Errno %d in fopen(): %s\\n\", errno, strerror(errno));\n            return -1;\n        }\n    }\n\n    /* Check if the file metadata are correctly retrieved */\n    if (fstat(fileno(req_file), &amp;metadata) &lt; 0) {\n        printf(\"Errno %d in fstat(): %s\\n\", errno, strerror(errno));\n        return -1;\n    }\n\n    /* File is read and memorized in a temporary buffer */\n    buffer = (char *) malloc(sizeof(char)*metadata.st_size);\n    memset(buffer, 0, metadata.st_size);\n    nbytes = fread(buffer, sizeof(char), metadata.st_size, req_file);\n    memset(buffer2, 0, sizeof(buffer2));\n\n    /* Create codification stream */\n    xdrmem_create(&amp;xdrs_w, buffer2, sizeof(buffer2), XDR_ENCODE);\n\n    /* This is the beginning of the message for the client\n     * when the file is going to be sent */\n    send_msg.tag = OK;\n\n    /* The file size and last modification time are retrieved */\n    send_msg.message_u.fdata.contents.contents_len= metadata.st_size;\n    send_msg.message_u.fdata.last_mod_time = metadata.st_mtime;\n    send_msg.message_u.filename = msg.message_u.filename;\n    send_msg.message_u.fdata.contents.contents_val = buffer;\n\n    if(!xdr_message(&amp;xdrs_w, &amp;send_msg)){\n        printf(\"Error in xdr_message()\\n\");\n        return -1;\n    }\n\n    /* The XDR struct is sent with the send() function  */\n    sent = send(clisocket_fd, buffer2, nbytes, 0);\n\n    /* Check if the server sent the data */\n    if (sent &lt; 0) {\n        printf(\"Errno %d in send(): %s\\n\", errno, strerror(errno));\n        return -1;\n    }\n    free(buffer);\n    xdr_destroy(&amp;xdrs_w);\n\n\n} else if (msg.tag == QUIT) {\n    /* The client asked to shutdown the connection.\n     * Unused if the client itself closes the connection */\n    return 0;\n\n} else {\n    /* The client sent a request with a not expected tag, so an error message is sent\n     * and the connection is going to be shutdown*/\n\n    xdrmem_create(&amp;xdrs_w, buffer, sizeof(buffer), XDR_ENCODE);\n\n    send_msg.tag = ERR;\n\n    if(!xdr_message(&amp;xdrs_w, &amp;send_msg)){\n        printf(\"Errno %d in xdr_message(): %s\\n\", errno, strerror(errno));\n        return -1;\n    }\n\n    sent = send(clisocket_fd, buffer, sizeof(buffer), 0);\n\n    /* Check if the server sent the data */\n    if (sent &lt; 0) {\n        printf(\"Errno %d in send(): %s\\n\", errno, strerror(errno));\n    }\n    xdr_destroy(&amp;xdrs_w);\n\n    return 0;\n}\nreturn 1;\n}\n</code></pre>\n\n<p>Unfortunately the encodification of the message causes a segmentation fault.</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\nxdrmem_putlong (xdrs=0x7fffffffd050, lp=0x7fffffffcf58) at xdr_mem.c:124\n124 xdr_mem.c: No such file or directory.\n</code></pre>\n\n<p>I checked the program with GDB and I obtained this backtrace</p>\n\n<pre><code>(gdb) backtrace\n#0  xdrmem_putlong (xdrs=0x7fffffffd050, lp=0x7fffffffcf58)\nat xdr_mem.c:124\n#1  0x00007ffff7b4d99c in __GI_xdr_enum (xdrs=&lt;optimized out&gt;, \nep=0x7fffffffd000) at xdr.c:500\n#2  0x000055555555617e in xdr_tagtype (xdrs=0x7fffffffd050, \nobjp=0x7fffffffd000) at xdr_file.c:13\n#3  0x0000555555556214 in xdr_message (xdrs=0x7fffffffd050, \nobjp=0x7fffffffd000) at xdr_file.c:35\n#4  0x0000555555555847 in manage_clixrequest (clisocket_fd=4)\nat server3-4.c:273\n#5  0x00005555555552a6 in main (argc=3, argv=0x7fffffffdd78)\nat server3-4.c:129\n</code></pre>\n\n<p>where manage_clixrequest(socket_fd) is the function I wrote. I don't know if I  am using badly the XDR library, or if I am forgetting to include something so that the xdr_mem.c is not linked correctly. Do you have any ideas/tips?</p>\n\n<p><strong>EDIT</strong>\nI reported the whole server function and the xdr_file.c.</p>\n\n<pre><code>/*\n * Please do not edit this file.\n * It was generated using rpcgen.\n */\n\n#include \"xdr_file.h\"\n\nbool_t\nxdr_tagtype (XDR *xdrs, tagtype *objp)\n{\n    register int32_t *buf;\n\n     if (!xdr_enum (xdrs, (enum_t *) objp))\n         return FALSE;\n    return TRUE;\n}\n\nbool_t\nxdr_file (XDR *xdrs, file *objp)\n{\n    register int32_t *buf;\n\n     if (!xdr_bytes (xdrs, (char **)&amp;objp-&gt;contents.contents_val, (u_int *) &amp;objp-&gt;contents.contents_len, ~0))\n         return FALSE;\n     if (!xdr_u_int (xdrs, &amp;objp-&gt;last_mod_time))\n         return FALSE;\n    return TRUE;\n}\n\nbool_t\nxdr_message (XDR *xdrs, message *objp)\n{\n    register int32_t *buf;\n\n     if (!xdr_tagtype (xdrs, &amp;objp-&gt;tag))\n         return FALSE;\n    switch (objp-&gt;tag) {\n    case GET:\n         if (!xdr_string (xdrs, &amp;objp-&gt;message_u.filename, 256))\n             return FALSE;\n        break;\n    case OK:\n         if (!xdr_file (xdrs, &amp;objp-&gt;message_u.fdata))\n             return FALSE;\n        break;\n    case QUIT:\n        break;\n    case ERR:\n        break;\n    default:\n        return FALSE;\n    }\n    return TRUE;\n}\n</code></pre>\n\n<p>I found out that I used the same buffer to memorize the file bytes and to create the XDR stream, that is an error. Now there is no segmentation fault and the XDR struct <code>message</code> is correctly filled, but now the call to the generated function <code>xdr_bytes()</code> returns false and the encodification still fails.</p>\n"}, {"tags": ["c", "windows", "multithreading", "sockets", "winsock"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1500476355, "post_id": 45194142, "comment_id": 77355970, "body": "Surely you should always use <code>htons()</code> for portability issues, the function will do the required conversions depending on the machine running the code. But if you&#39;re using it on an X86 architecture you <b>must use <code>htons()</code></b> because network byte order is almost always big_endian."}, {"owner": {"reputation": 601, "user_id": 2321263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/69136768e112181d36d0fece557f8684?s=128&d=identicon&r=PG", "display_name": "weblar83", "link": "https://stackoverflow.com/users/2321263/weblar83"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1500476703, "post_id": 45194142, "comment_id": 77356249, "body": "@Frankie_C, in which case, should I use <code>htonl</code> when specifying the sin_addr? Either way, I&#39;m still not able to receive UDP broadcast packets."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1500476890, "post_id": 45194142, "comment_id": 77356387, "body": "Have a look here: <a href=\"https://stackoverflow.com/questions/41022253/udp-winsock-not-receiving-broadcast-packets\" title=\"udp winsock not receiving broadcast packets\">stackoverflow.com/questions/41022253/&hellip;</a>, <a href=\"http://www.binarytides.com/udp-socket-programming-in-winsock/\" rel=\"nofollow noreferrer\">binarytides.com/udp-socket-programming-in-winsock</a>"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1500476968, "post_id": 45194142, "comment_id": 77356444, "body": "You should bind the socket anyway, the broadcast address, defined as <code>#define INADDR_BROADCAST (u_long)0xffffffff</code> is anyway an address <b><code>255.255.255.255</code></b>."}, {"owner": {"reputation": 601, "user_id": 2321263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/69136768e112181d36d0fece557f8684?s=128&d=identicon&r=PG", "display_name": "weblar83", "link": "https://stackoverflow.com/users/2321263/weblar83"}, "edited": false, "score": 0, "creation_date": 1500477178, "post_id": 45194142, "comment_id": 77356618, "body": "Ok, so I&#39;ve added a <code>bind</code> just after the <code>setsockopt</code>:      <code>err = bind(m_iSocket, (struct sockaddr *)&amp;socket, sizeof(socket));</code>  I get an error code of <code>10049</code> which is <code>WSAEADDRNOTAVAIL</code> cannot assign requested address"}, {"owner": {"reputation": 601, "user_id": 2321263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/69136768e112181d36d0fece557f8684?s=128&d=identicon&r=PG", "display_name": "weblar83", "link": "https://stackoverflow.com/users/2321263/weblar83"}, "edited": false, "score": 0, "creation_date": 1500477561, "post_id": 45194142, "comment_id": 77356900, "body": "Well, I&#39;m not sure that&#39;s the case in my instance. I&#39;ve got Wireshark hooked up to my ethernet interface and I can see the UDP broadcast packets coming in on this interface"}], "answers": [{"tags": [], "owner": {"reputation": 601, "user_id": 2321263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/69136768e112181d36d0fece557f8684?s=128&d=identicon&r=PG", "display_name": "weblar83", "link": "https://stackoverflow.com/users/2321263/weblar83"}, "is_accepted": false, "score": 1, "last_activity_date": 1500478421, "creation_date": 1500478421, "answer_id": 45195095, "question_id": 45194142, "link": "https://stackoverflow.com/questions/45194142/winsock-udp-broadcast-listener/45195095#45195095", "title": "WinSock - UDP Broadcast Listener", "body": "<p>Ok, so the issue was with this line of code, specifically the last two parameters:</p>\n\n<pre><code>err = recvfrom(m_iSocket, ucBuffer, BUFFER_LEN, 0, (struct sockaddr *)&amp;socket, &amp;length);\n</code></pre>\n\n<p><code>length</code> was never being initialized (should be <code>sizeof(sockaddr_in)</code>) and <code>&amp;socket</code> should be a different <code>sockaddr_in</code> struct - not the one used during the <code>bind</code> call.</p>\n\n<p>Sorry guys, overlooked that!</p>\n"}], "owner": {"reputation": 601, "user_id": 2321263, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/69136768e112181d36d0fece557f8684?s=128&d=identicon&r=PG", "display_name": "weblar83", "link": "https://stackoverflow.com/users/2321263/weblar83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1669, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500478421, "creation_date": 1500475866, "last_edit_date": 1500476088, "question_id": 45194142, "link": "https://stackoverflow.com/questions/45194142/winsock-udp-broadcast-listener", "title": "WinSock - UDP Broadcast Listener", "body": "<p>I have a device which sends out data packets via the UDP broadcast address.</p>\n\n<p>I'm attempting to put together a winsock application to listen for these broadcast messages but ultimately, I'm not having much success setting up a UDP socket.</p>\n\n<p>Here's he code I have to create the socket and start the listener thread:</p>\n\n<pre><code>DWORD CreateStatusListener() {\n    WORD wVersion;\n    WSADATA wsa;\n    int err;\n\n    wVersion = MAKEWORD(2, 2);\n\n    err = WSAStartup(wVersion, &amp;wsa);\n\n    if (err != 0) {\n        // Fail gracefully\n        // ...\n    }\n\n    // Create the UDP status socket\n    m_iSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n\n    if (m_iSocket == SOCKET_ERROR) {\n        // Fail gracefully\n        // ...\n    }\n\n    m_bAbort = FALSE;\n\n    // Create the UDP status socket listener thread\n    m_hThread = CreateThread(NULL, 0, PollStatusSocket, NULL, 0, &amp;m_dwThreadID);\n\n    if (!m_hThread) {\n        // Fail gracefully\n        // ...\n    }\n\n    return ERR_SUCCESS;\n}\n</code></pre>\n\n<p>This function succeeds, with the socket being set up and the thread being created. </p>\n\n<p>My UDP polling function is as follows:</p>\n\n<pre><code>static DWORD WINAPI PollStatusSocket(LPVOID lpParam) {\n\n    struct sockaddr_in socket;\n    INT length;\n\n    // Set up the address struct\n    memset(&amp;socket, 0, sizeof(socket));\n    socket.sin_family = AF_INET;\n    socket.sin_port = htons(52102);\n    socket.sin_addr.s_addr = INADDR_BROADCAST;\n\n    INT err = SOCKET_ERROR;\n    INT bAllow = 1;\n\n    err = setsockopt(m_iSocket, SOL_SOCKET, SO_BROADCAST, (char *)&amp;bAllow, sizeof(bAllow));\n\n    // Allocate a receive buffer\n    char ucBuffer[BUFFER_LEN];\n\n    // Loop while the thread is not aborting\n    while (!m_bAbort) {\n        err = recvfrom(m_iSocket, ucBuffer, BUFFER_LEN, 0, (SOCKADDR *)&amp;socket, &amp;length);\n\n        if (err != SOCKET_ERROR) {\n            // Check we have a valid status message\n            // ...\n        }\n        else {\n            err = WSAGetLastError();\n\n            printf(\"Error: %d\", err);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What happens during the polling thread is that <code>recvfrom</code> returns -1 and the <code>WSAGetLastError</code> reports a <code>WSAEINVAL</code> error - invalid argument.</p>\n\n<p>Some code examples I've seen use the <code>bind</code> method but as far as I was aware, I don't need to call <code>bind</code> on a broadcast address. One thing I have considered is whether the <code>sockaddr_in</code> struct was assigned correctly - for example, does the port number need to be passed as <code>htons(port)</code> or just as is?</p>\n"}, {"tags": ["c", "arrays", "parameter-passing"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1500476027, "post_id": 45194108, "comment_id": 77355667, "body": "... and you are allowed to post formatted code here."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500476203, "post_id": 45194108, "comment_id": 77355833, "body": "<code>std::vector&lt;char const*&gt;</code> -&gt; <code>std::vector&lt;const char*&gt;</code> correct me if I&#39;m wrong."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500479882, "post_id": 45194573, "comment_id": 77358578, "body": "Thank you very much! It works, but is there a way to keep this line: const char *arr[] = former_array;  because I want to use arr in other processing. After changing, arr is a different type and not match the original code."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1500477026, "creation_date": 1500477026, "answer_id": 45194573, "question_id": 45194108, "link": "https://stackoverflow.com/questions/45194108/using-the-value-from-command-line-to-form-the-char-array-and-passing-it-to-other/45194573#45194573", "title": "Using the value from command line to form the char array and passing it to other function", "body": "<p>I think I guessed what you want:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstd::vector&lt;const char*&gt; former_array = {\"aa\", \"bb\"};\n\nvoid other_process(int argc, char *argv[])\n{    \n  const char **arr = new const char*[former_array.size()];\n\n  int arrcount = 0;\n  for (auto &amp; ch : former_array)\n  {\n    arr[arrcount++] = ch;\n  }\n\n  for (int i = 0; i &lt; arrcount; i++)\n  {\n    printf(\"%s\\n\", arr[i]);\n  }    \n}\n\nint main(int argc, char *argv[])\n{\n  former_array.push_back(\"hello\");\n  other_process(argc, argv);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1500480597, "last_edit_date": 1500480597, "creation_date": 1500478904, "answer_id": 45195284, "question_id": 45194108, "link": "https://stackoverflow.com/questions/45194108/using-the-value-from-command-line-to-form-the-char-array-and-passing-it-to-other/45195284#45195284", "title": "Using the value from command line to form the char array and passing it to other function", "body": "<p>You have marked this as C++.  </p>\n\n<p>I am not sure I understand your question, it appears to suggest something about converting command line parameters to strings in an array.  IMHO, you should use std::strings but prefer std::vector,   please consider the following approach:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n\nclass T504_t\n{\npublic:\n\n   T504_t() = default;\n   ~T504_t() = default;\n\n   int exec(int argc, char* argv[])\n      {\n         std::cout &lt;&lt; \"\\nargc: \" &lt;&lt; argc &lt;&lt; std::endl;\n\n         std::vector&lt;std::string&gt; strVec;   // note 1\n\n         for (int i = 0; i &lt; argc; i += 1)\n         {\n            std::string s ( argv[i] ); // Note 2\n            strVec.push_back(s);       // Note 3\n         }\n\n         std::cout &lt;&lt; \"\\n  strVec.size() : \" &lt;&lt; strVec.size() &lt;&lt; \"\\n  \" &lt;&lt; std::endl;\n         for (auto sv : strVec)\n            std::cout &lt;&lt; \"  \" &lt;&lt; sv;\n         std::cout &lt;&lt; \"\\n\\n\"&lt;&lt; std::endl;\n\n         return(0);\n      }\n\n}; // class T504_t\n\n\nint main(int argc, char* argv[])\n{\n   int retVal = -1;\n   {\n      T504_t   t504;                  // ctor - create an instance\n      retVal = t504.exec(argc, argv); // pass command line params\n   }\n\n   std::cout &lt;&lt; \"  &lt;&lt;&lt; Did your C++ 'Hello World' have no class? \"\n             &lt;&lt;\" Why did you bother? &gt;&gt;&gt;\"\n             &lt;&lt; std::endl;\n\n   return(retVal);\n}\n</code></pre>\n\n<p>Note 1: a vector is easy to declare, it is created with 0 elements</p>\n\n<p>Note 2: ctor can use a char*, but assignment works too.</p>\n\n<p>Note 3: a vector auto magically expands with push-back, no pre-allocation needed.</p>\n\n<hr>\n\n<p>When run from the command line with the following parameters:</p>\n\n<p>~$ ./dumy504  a  12  b  c  d  344</p>\n\n<p>Note 4: all command line parameters are c-strings (i.e. null-terminate),  </p>\n\n<hr>\n\n<p>the code reports:</p>\n\n<p>strVec.size() : 7</p>\n\n<p>./dumy504  a  12  b  c  d  344</p>\n\n<p>Note 5: c-strings are trivially converted to std::strings</p>\n\n<hr>\n\n<p>Beauty is found in youth, and little else is expected.\nclass  is found in C++,   and little else is needed.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500481061, "post_id": 45195723, "comment_id": 77359287, "body": "Thank you for your answer, my original purpose is to read data from the command line, and then: const char *arr[] = {&quot;Hello&quot;, &quot;World&quot;}; ,since I need arr for other process after this, I want to keep arr in its former format. I am not very sure how I can do it."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500481379, "post_id": 45195723, "comment_id": 77359462, "body": "Well, if you really need <code>arr</code> you can still declare a <code>std::vector&lt;const char *&gt; args;</code> and then retrieve the data with <code>const char **arr = args.data(); int arr_size = args.size();</code>. See <a href=\"https://ideone.com/IrKvdq\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500482147, "post_id": 45195723, "comment_id": 77359897, "body": "Hello, thank you very much. I still have a problem here, is the *arr[] and **arr different? Since I can&#39;t use const char *arr[] = args.data();. But the program is not getting the correct answer due to I am passing the arr using the method you offered."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500489399, "post_id": 45195723, "comment_id": 77364163, "body": "@aki Can you please also explain what <i>&quot;the program is not getting the correct answer&quot;</i> means?"}, {"owner": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "edited": false, "score": 0, "creation_date": 1500491879, "post_id": 45195723, "comment_id": 77365628, "body": "Hi, thank you again. I think I find the problem. The link you have send is helping a lot!"}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 0, "last_activity_date": 1500480331, "creation_date": 1500480331, "answer_id": 45195723, "question_id": 45194108, "link": "https://stackoverflow.com/questions/45194108/using-the-value-from-command-line-to-form-the-char-array-and-passing-it-to-other/45195723#45195723", "title": "Using the value from command line to form the char array and passing it to other function", "body": "<p>You can take advantage of the Standard Library and write something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nint main(int argc, char *argv[])\n{\n    std::vector&lt;std::string&gt; args { \"Previous...\"};\n\n    args.insert(args.end(), argv, argv + argc);\n    // you can start from   ^^^^ argv + 1 if you don't need the program name    \n    args.emplace_back(\"final.\");\n\n    std::copy(args.begin(), args.end(),\n              std::ostream_iterator&lt;std::string&gt;(std::cout, \"\\n\"));\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7403157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ab53f21d9604a3ae6aac12cd7feda?s=128&d=identicon&r=PG&f=1", "display_name": "koma", "link": "https://stackoverflow.com/users/7403157/koma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 45195723, "answer_count": 3, "score": -1, "last_activity_date": 1500485103, "creation_date": 1500475763, "last_edit_date": 1500485103, "question_id": 45194108, "link": "https://stackoverflow.com/questions/45194108/using-the-value-from-command-line-to-form-the-char-array-and-passing-it-to-other", "title": "Using the value from command line to form the char array and passing it to other function", "body": "<p>I am trying to read some data from command line, then passing it to a char array for the further processing.</p>\n\n<pre><code>#define former_array {\"hello\",\"world\"}\n\nvoid other_process(int argc, char *argv[])\n{\n    const char *arr[] = former_array;\n}\nint main(int argc, char *argv[])\n{\n    other_process(argc, argv);\n}\n</code></pre>\n\n<p>The original code is written in static way. I am trying to rewrite it by reading the data from command line. So I have change it into adding the word in main function:</p>\n\n<pre><code>std::vector&lt;const char*&gt; former_array = {};\n\nvoid other_process(int argc, char *argv[])\n{\n    const char *arr[] = former_array;\n}\n\nint main(int argc, char *argv[])\n{\n     former_array.push_back(\"hello\");\n     other_process(argc, argv);\n}\n</code></pre>\n\n<p>But I have got the error.\nerror: initializer fails to determine size of 'former_array'\n     const char *arr[] = former_array;</p>\n\n<p>error: array must be initialized with a brace-enclosed initializer\n     const char *arr[] = former_array;</p>\n\n<p>I don't want to change the format of const char *arr[] = former_array; because I need arr for other process.\nAny idea how to solve this?\nThank you.</p>\n"}, {"tags": ["c", "winapi", "while-loop", "recv", "message-pump"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500475697, "post_id": 45194074, "comment_id": 77355393, "body": "Polling using e.g. <code>select</code>? Non-blocking sockets?"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 3, "creation_date": 1500477207, "post_id": 45194074, "comment_id": 77356639, "body": "There are multiple ways but one is to use the overlapped I/O mode of <code>WSARecv</code> and use <code>MsgWaitForMultipleObjects</code> to wait for either a window message or activity on the socket handle. This is sort-of half wrapped in the Winsock API but in modern Windows implementations sockets are actually just HANDLEs under the hood. Admittedly there are more straightforward options but the advantage is that it can be smoothly extended with additional handle types for I/O multiplexing."}, {"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "edited": false, "score": 0, "creation_date": 1500477304, "post_id": 45194074, "comment_id": 77356706, "body": "Have you portable way?"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1500478250, "post_id": 45194074, "comment_id": 77357478, "body": "@Et7f3XIV: Portable to what? I uncertain whether the move to kernel HANDLEs was is made in transition from Win16 or if the Win9x family also lacks support. I hope you are not forced to maintain support for such museum pieces but I believe that <code>WSAAsyncSelect</code> with window message notifications was the traditional Winsock 1.1 (Win16) method if you need to extend your portability that far."}, {"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "edited": false, "score": 0, "creation_date": 1500479501, "post_id": 45194074, "comment_id": 77358338, "body": "I want port my program on linux. (I know getMessage isn&#39;t portabe but i prefer use only portable function. i tghink i&#39;ll make thread only for the getmessage loop."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1500480126, "post_id": 45194074, "comment_id": 77358736, "body": "@Et7f3XIV: Not really. There is plain old <code>select</code> as previously mentioned if you only need multiplexing among sockets but then you can&#39;t wait for incoming inter-communication, say for outgoing data or cancellation. Polling with intermittent sleeps is about the best you could do. Really though, achieving this type of portability without libraries is in my experience a lost cause. You will be better off in the long run isolation the I/O into system-specific wrappers while pulling out the generic bits as into shared modules."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1500481704, "post_id": 45194074, "comment_id": 77359661, "body": "I would have surely gone with a separate thread for the network recv() and all associated protocol checking/parsing, so isolating it from the message-handling loop.  Such a thread would be reasonably portable.  The thread would generate &#39;command&#39; struct instances, (malloc), and fire them into an extern handler function.  On Windows, that handler would load the struct address into lParam/hParam of a WM_APP message and post it to the GetMessage() thread, where it would be received in the usual way, dispatched to a handler, the struct extracted, executed and then freed."}, {"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500482331, "post_id": 45194074, "comment_id": 77360021, "body": "I&#39;ve read some other article and I think the better way to go is like @Martin James say. I will refactor my code for including thread.@doynax I would apply if my programm is windows only."}, {"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500482397, "post_id": 45194074, "comment_id": 77360053, "body": "@MartinJames put you&#39;re comment in answer for accepting your answer."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500482398, "post_id": 45194074, "comment_id": 77360055, "body": "@Martin James: I tend to agree for applications allowing straightforward locking. Unfortunately I find that I usually still require multiplexing even on the I/O thread for transmits outside of pure stop-and-wait applications, time-outs, and cancellation."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1500487247, "post_id": 45194074, "comment_id": 77362940, "body": "@doynax sure.  In requirements like this, there is no need for any expicit locks - it&#39;s all message-passing, (obviously, the Windows message queues etc. have their own internal locks, but you can at least be sure that they work:). Timeouts/cancellation issues may exist, maybe the network thread might need to loop around and reconnect after a server or network fail, all sorts of stuff.  That&#39;s even more of a reason to implement all of the network stuff in a simple synchronous manner in a thread of its own - no matter what gets blocked/delayed/whatever, the GetMessage loop runs on, isolated:)"}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500488020, "post_id": 45194074, "comment_id": 77363340, "body": "@Martin James: I was referring to user interface actions requiring immediate action without waiting for pending receive to complete. Think application shutdown, or an outgoing packet. As for locking there is frequently additional application state involved in processing network traffic and requiring careful sharing. Personally I tend to make the thread the manager of the connection and its state, permitting an imperative style and updated via messaging though requiring UI caching. If only message parsing/encoding is performed there is unlikely to be sufficient CPU load to warrant threading."}], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "edited": false, "score": 0, "creation_date": 1500498888, "post_id": 45196991, "comment_id": 77369442, "body": "with this example all my code will be in this loop... (thx for editing my original post)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "edited": false, "score": 0, "creation_date": 1500511038, "post_id": 45196991, "comment_id": 77373321, "body": "@Et7f3XIV it would be better if the window has a wndproc function and you handle the messages in there instead of in the loop itself. But either will work."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 4, "last_activity_date": 1500485514, "last_edit_date": 1500485514, "creation_date": 1500484328, "answer_id": 45196991, "question_id": 45194074, "link": "https://stackoverflow.com/questions/45194074/how-to-combine-recv-and-getmessage-in-loop-c-winapi/45196991#45196991", "title": "How to combine RECV and getMessage in loop (C, WINAPI)", "body": "<p>Use the socket in asynchronous (not non-blocking) mode via <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms741540.aspx\" rel=\"nofollow noreferrer\"><code>WSAAsyncSelect()</code></a>:</p>\n\n<blockquote>\n  <p>The\u00a0WSAAsyncSelect\u00a0function requests Windows message-based notification of network events for a socket.</p>\n</blockquote>\n\n<p>The socket will notify a specified <code>HWND</code> of socket activity, like data available.</p>\n\n<p>The app can then run a standard message loop, processing socket messages when they arrive from the queue.</p>\n\n<pre><code>#define WM_SOCKET_MSG (WM_APP + 1)\n\nWSAAsyncSelect(sock, hwnd, WM_SOCKET_MSG, FD_READ | FD_WRITE | FD_CLOSE);\n\nMSG msg;\nchar command[20];\nint n;\n\nwhile (GetMessage(&amp;msg, 0, 0, 0)) {\n        switch (msg.message) {\n            case WM_SOCKET_MSG:\n            {\n                int event = WSAGETSELECTEVENT(msg.lParam);\n                int error = WSAGETSELECTERROR(msg.lParam);\n                if (error != 0) {\n                    // process socket error as needed ...\n                    break;\n                }\n\n                switch(event) {\n                    case FD_READ:\n                        n = recv(sock, command, sizeof command - 1, 0);\n                        if (n &gt; 0) {\n                            // process data as needed ...\n                        } else {\n                            // process read error as needed ... \n                        }\n                        break;\n                    }\n\n                    // process other socket events as needed ...\n                }\n\n                break;\n            }\n\n            // process other messages as needed ... \n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1500486962, "post_id": 45197575, "comment_id": 77362774, "body": "<i>&quot;it&#39;s much easier to test, debug&quot;</i> - Not at all. Concurrent code is inherently harder to test and debug."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1500487555, "post_id": 45197575, "comment_id": 77363099, "body": "@IInspectable not when you have isolated subsystems with message-passing.   Each subsystem does not know, or need to know, what the others are doing, just what they are saying:)"}, {"owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "edited": false, "score": 0, "creation_date": 1500498032, "post_id": 45197575, "comment_id": 77369033, "body": "I choose to avoid thread becaus I don&#39;t wants to go in thread&#39;s mess like concurrent access, race condition,... but you have well argumented so I will use pthread and notify the messageloop with postmessage. thx"}], "tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": true, "score": 1, "last_activity_date": 1500486276, "creation_date": 1500486276, "answer_id": 45197575, "question_id": 45194074, "link": "https://stackoverflow.com/questions/45194074/how-to-combine-recv-and-getmessage-in-loop-c-winapi/45197575#45197575", "title": "How to combine RECV and getMessage in loop (C, WINAPI)", "body": "<p>I would have surely gone with a separate thread for the network recv() and all associated protocol checking/parsing, so isolating it from the message-handling loop. Such a thread would be reasonably portable. The thread would generate 'command' struct instances, (malloc), and fire them into an extern handler function. On Windows, that handler would load the struct address into lParam/hParam of a WM_APP message and post it to the GetMessage() thread, where it would be received in the usual way, dispatched to a handler, the struct extracted, executed and then freed.</p>\n\n<p>Such a design might be seen as over-complex, (and uses the dreaded threads), but it's much easier to test, debug, extend and enhance than cramming everything into an asynchronous message loop that does everything.  Sometimes, an extra thread really is easier:) </p>\n"}], "owner": {"reputation": 493, "user_id": 7227940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9f050867bfc799d9938a5834ac9f8d67?s=128&d=identicon&r=PG&f=1", "display_name": "Et7f3XIV", "link": "https://stackoverflow.com/users/7227940/et7f3xiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 45197575, "answer_count": 2, "score": 1, "last_activity_date": 1500486276, "creation_date": 1500475656, "last_edit_date": 1500484119, "question_id": 45194074, "link": "https://stackoverflow.com/questions/45194074/how-to-combine-recv-and-getmessage-in-loop-c-winapi", "title": "How to combine RECV and getMessage in loop (C, WINAPI)", "body": "<p>How do you code this in C?</p>\n\n<p>The desired flow is:</p>\n\n<pre><code>Create socket\nCreate window\nloop: Wait until data can be read from socket or message are added to the queue\nif data then\n  do stuff with data\n  goto loop\nelse if message then\n  do stuff with message\n  goto loop\n</code></pre>\n\n<p>I have tried this code:</p>\n\n<pre><code>MSG msg;\nDWORD last=msg.time;\nshort bRet;\nchar command[20];\nint n=0;\nwhile((\n       (n = recv(sock, command, sizeof command - 1, 0)) &gt;= 0\n       )||(\n           (bRet = GetMessage( &amp;msg, 0, 0, 0 )) != 0\n           //I can't use peek message because it will have the same issue than non-blocking socket\n           )){\n    //here we check time of message if it is equal to last we know that is socket\n}\n</code></pre>\n\n<p>I know threads exist, but I want to avoid use of threads. I will use a thread if it is the only way to go.</p>\n\n<p>Edit:\nUsing a non-blocking socket is not a solution because if no data is available and no message is in the queue then my program will exit.</p>\n"}, {"tags": ["c++", "c", "sizeof", "flexible-array-member"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1500475431, "post_id": 45193984, "comment_id": 77355156, "body": "FWIW VLA&#39;s are not standard in C++ so anything you get is going to be implementation defined."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500475565, "post_id": 45193984, "comment_id": 77355260, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18</a>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1500475895, "post_id": 45193984, "comment_id": 77355555, "body": "@Olaf Why did you remove the C++ tag? The question is &quot;C vs C++&quot;. Isn&#39;t that legal or reasonable?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500475946, "post_id": 45193984, "comment_id": 77355599, "body": "A simple look into the standard would have saved time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500475986, "post_id": 45193984, "comment_id": 77355633, "body": "@Scheff Apparently the question applies only to one of the different languages."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500476045, "post_id": 45193984, "comment_id": 77355679, "body": "@Scheff I think it is not illegal. But it is better to have two different question as there are many C experts here and many C++ experts which are not always the same people. The C++ part was the reason I put the link to the C standard in the comment and not made it an answer as I don&#39;t have it from the top of my mind about C++ ."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500476366, "post_id": 45193984, "comment_id": 77355981, "body": "@Olaf For me, that was not so &quot;apparently&quot; (though my stomach had me prevented to do something like this in C++) but I see your intention."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500476502, "post_id": 45193984, "comment_id": 77356083, "body": "It conflicts with the question explicitly asking about differences between C and C++ (and the answer addresses this) -&gt; tag restored."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500476552, "post_id": 45193984, "comment_id": 77356125, "body": "Oje... (Peace, please.)"}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 1, "creation_date": 1500476579, "post_id": 45193984, "comment_id": 77356143, "body": "It <i>works</i> in C++ in both Clang and GCC so the question <i>can be answered</i>. The answer might be &quot;It is not in the standard, but supported but GCC and Clang. On those compilers the size is 4&quot;. That&#39;s useful information."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1500476580, "post_id": 45193984, "comment_id": 77356144, "body": "Not even sure why the question needs to be asked - it&#39;s easy enough to find out what the sizeof would be with a simple call to <code>printf</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500476584, "post_id": 45193984, "comment_id": 77356151, "body": "@Scheff: Must be some German thingie \u2026"}, {"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1500476614, "post_id": 45193984, "comment_id": 77356181, "body": "@ChrisTurner: Because C/C++ is full of undefined and implementation-defined behaviour. <code>printf</code> won&#39;t tell you that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500480131, "post_id": 45193984, "comment_id": 77358737, "body": "Yes, better don&#39;t judge the quality of the question this way. The standard documents aren&#39;t exactly an easy reading, you have to be already very familiar with them in order to find what you&#39;re looking for. And apparently, the question is well received. The duplicate isn&#39;t a perfect one, but as it has been answered that FAMs just don&#39;t exist in C++, it&#39;s ok as a link to a strongly related question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500480184, "post_id": 45193984, "comment_id": 77358769, "body": "@Timmmm: We can only judge from what was presented in the question. And from that it is evident you did no research at all."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1500481415, "post_id": 45193984, "comment_id": 77359485, "body": "I don&#39;t think it&#39;s an exact dupe as this question address c++ along with c tag. Reopened it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500486386, "post_id": 45193984, "comment_id": 77362427, "body": "BE sure to review this find <a href=\"https://stackoverflow.com/a/44870679/2410359\">answer</a> to <a href=\"https://stackoverflow.com/q/44745677/2410359\">Flexible array members can lead to undefined behavior?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 1, "creation_date": 1500476735, "post_id": 45194073, "comment_id": 77356269, "body": "Thanks! I actually can&#39;t find any reference to it in C++14, but I think it is safe to assume that Clang/GCC/etc apply the same behaviour to it in C++ as they do in C (and by experiment they seem to)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1500481430, "post_id": 45194073, "comment_id": 77359496, "body": "@felix: <code>struct { char a; double d[]; };</code>. If you ignored <code>d</code>, the size could be 1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1500481626, "post_id": 45194073, "comment_id": 77359616, "body": "@rici yes, that&#39;s a simple one, but <a href=\"https://stackoverflow.com/q/44745677/2371524\">have a look at the discussion here</a> ;) (I just see I might have confused this with some other quotes... sorry)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500490762, "post_id": 45194073, "comment_id": 77364973, "body": "@felix I saw that discussion earlier but chose to avoid entering the fray. The C Standard is not in the business of deliberately building false expectations, nor is it a kind of Delphic Oracle whose mysterious pronouncements can only be unravelled by high priests skilled in the magic arts. Rather, it is a description of a programming language intended to be used (and to be usable). A feature described by the standard must be usable; otherwise it would not be there. If the wording makes that impossible, it is a defect and should be corrected; it won&#39;t be the first nor the last such error..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500491141, "post_id": 45194073, "comment_id": 77365207, "body": "... The question that you link to struck me as a misappropriation of energy: if OP&#39;s argument is valid, it should be presented as a DR to the standardisation committee. Using it instead to discourage the use of FAMs strikes me as a tactic by someone whose aesthetic sensibilities are offended by FAMs, and who therefore believes that they should be extirpated from the language. (A serious argument to that effect would also better be submitted to the committee but I expect it would not prosper.) Now: what interesting example were you referring to?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500493766, "post_id": 45194073, "comment_id": 77366742, "body": "@rici As I understood his comments, he <b>did</b> prepare a DR. But I&#39;m not sure his argumentation holds ;) The passage in this answer just reminded me having seen this discussion."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1500497841, "post_id": 45194073, "comment_id": 77368931, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149647/discussion-between-rici-and-felix-palmen\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 7, "last_activity_date": 1500480712, "last_edit_date": 1500480712, "creation_date": 1500475654, "answer_id": 45194073, "question_id": 45193984, "link": "https://stackoverflow.com/questions/45193984/size-of-a-struct-with-flexible-array-member/45194073#45194073", "title": "Size of a struct with flexible array member", "body": "<p>The compiler will ignore the flexible array member as it were not there.  </p>\n\n<p>C11-\u00a76.7.2.1 (p18)</p>\n\n<blockquote>\n  <p>[...] In most situations, the flexible array member is ignored. In particular, <strong>the size of the structure is as if the flexible array member were omitted</strong> except that it may have more trailing padding than the omission would imply [...].  </p>\n</blockquote>\n\n<p>AFAIK, flexible array member is not the part of C++ standard till c++14. But, GNU support it as <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">an extension</a>. Behaviour will be similar for both C and C++.</p>\n"}], "owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "accepted_answer_id": 45194073, "answer_count": 1, "score": 6, "last_activity_date": 1500481368, "creation_date": 1500475394, "last_edit_date": 1500476407, "question_id": 45193984, "link": "https://stackoverflow.com/questions/45193984/size-of-a-struct-with-flexible-array-member", "title": "Size of a struct with flexible array member", "body": "<p>Given</p>\n\n<pre><code>struct Foo {\n    uint32_t a;\n    uint32_t b[];\n};\n</code></pre>\n\n<p>What is <code>sizeof(Foo)</code>? Is it implementation-defined or undefined behaviour? Does the answer differ for C vs C++?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500475209, "post_id": 45193897, "comment_id": 77354976, "body": "Nested functions are not supported in standard C."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1500475230, "post_id": 45193897, "comment_id": 77354985, "body": "You still have the same problems as <a href=\"https://stackoverflow.com/questions/45121296/c-unresolved-external-symbol-function-name-found-in-function-option-link-201\">in your previous question</a>. Fix those first!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1500475654, "post_id": 45193897, "comment_id": 77355347, "body": "Learning the language would help. Don&#39;t skip chapters in your book and don&#39;t youtube during course lessons."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500475733, "post_id": 45193897, "comment_id": 77355416, "body": "@EugeneSh. Look closely at the &quot;nested functions&quot;. There are sneaky semicolons between the closing parenthesis and opening curly bracket. They are function prototypes followed by blocks of code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1500475797, "post_id": 45193897, "comment_id": 77355467, "body": "@Blastfurnace Wow. So nested function prototypes :)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1500476594, "post_id": 45193897, "comment_id": 77356157, "body": "You&#39;re supposed to use function parameters and return values for communicating between functions."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500477329, "post_id": 45193897, "comment_id": 77356728, "body": "Are you coding C programming language?"}, {"owner": {"reputation": 45, "user_id": 8312941, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-wSVrelKAAwg/AAAAAAAAAAI/AAAAAAAABEc/q4tttbSD7Lk/photo.jpg?sz=128", "display_name": "Nyako", "link": "https://stackoverflow.com/users/8312941/nyako"}, "edited": false, "score": 0, "creation_date": 1500477708, "post_id": 45193897, "comment_id": 77357019, "body": "I am I&#39;m trying to understand the language. I&#39;ve been reading my book  and watching my lessons, neither really cover putting functions in this switch case structure which has beenm really messing me up."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500499717, "post_id": 45193897, "comment_id": 77369856, "body": "try to read some standard easy tutorial on C complete for example tutorialspoint"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500500543, "post_id": 45193897, "comment_id": 77370263, "body": "<a href=\"https://www.tutorialspoint.com/cprogramming/\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 0, "last_activity_date": 1502878367, "last_edit_date": 1592644375, "creation_date": 1500500011, "answer_id": 45201417, "question_id": 45193897, "link": "https://stackoverflow.com/questions/45193897/c-the-variables-in-my-function-are-not-recognized-because-my-variables-are-not/45201417#45201417", "title": "C: The variables in my function are not recognized because my variables are not global", "body": "<p>C has not nested function.\nWe declare Global variable in C above <code>main()</code>.\nTo store Average of some numbers we must define a floating point variable that can hold Rational numbers (i.e. 5.69) because of a/b may have not integer answer(10/3=3.33). <code>float averageOfInput = 0;</code></p>\n<p>I perform some basic changes on your source and it works. but this is not a Good or complete version. you can improve it by learning more  C.</p>\n<h1>Code</h1>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;time.h&gt;\n#define PAUSE system(&quot;pause&quot;)\n#define SIZE 5\n\n\n///Global Variables\nint usersArray[SIZE] = { 0 };\nint count = 0;\nint numbers = 0;\nint totalOfInput = 0;\nfloat averageOfInput = 0;   \nint i = 0;\n\n///Function declaration \nvoid enterNumbers();\nvoid addNumbers();\nvoid numbersAveraged();\nvoid displayNumbers();\n\n\nint main(void)\n{\n\n    \n    int option = 0;\n    \n    do {\n    \n    printf(&quot;\\n&quot;);\n    \n    \n    printf(&quot;==========================================================\\n&quot;);\n    printf(&quot;=================Number Management System====================\\n&quot;);\n    printf(&quot;============================================================\\n\\n\\n\\n&quot;);\n    printf(&quot;Things you can do here.\\n&quot;);\n    printf(&quot;\\n1. Give us numbers to work with! \\n&quot;);\n    printf(&quot;\\n2. Let Me add all the numbers you gave me.\\n&quot;);\n    printf(&quot;\\n3. I  will display the average of all of the numbers you've put in.\\n&quot;);\n    printf(&quot;\\n4. I will display all of the numbers you put in. \\n&quot;);\n    printf(&quot;\\n5. Exit \\n&quot;);\n    \n    scanf(&quot;%i&quot;, &amp;option);\n\n    switch (option) {\n    case 1:\n        enterNumbers();\n        break;\n    case 2:\n        addNumbers();\n        break;\n    case 3:\n        numbersAveraged();\n        break;\n    case 4:\n        displayNumbers();\n        break;\n    case 5:\n        exit(0);\n        break;\n    default:\n        printf(&quot;This is not a valid choice, please type 1-5. &quot;);\n        PAUSE;\n    }\n\n    \n    } while (option != 5);\n\n}//End main()\n\n\n\n///Function definition \n\nvoid enterNumbers() \n{\n    int temp;\n    printf(&quot;Please type in a number. Enter -1 when you are done entering numbers.\\n&quot;);\n        \n    for (i = 0; i &lt; SIZE; i++) {\n        scanf(&quot;%i&quot;, &amp;temp);\n        if (temp == -1) {\n            break;\n        }\n        else {\n            usersArray[i] = temp;   \n            count++;\n        }\n        \n    }\n}\n\n\nvoid addNumbers()\n{\n    totalOfInput = 0;\n    enterNumbers();\n    for (i = 0; i &lt; count; i++) {\n        totalOfInput += usersArray[i];\n    }\n    printf(&quot;OK, so the total of all of these numbers is: %d\\n&quot;, totalOfInput);\n}\n\nvoid numbersAveraged(){\n    addNumbers();\n    averageOfInput = (float) totalOfInput / count;\n    printf(&quot; The average of the numbers you added was %f\\n&quot;, averageOfInput);\n}\n\nvoid displayNumbers(){\n    printf(&quot;OK, here are all of the numbers you put in.\\n&quot;);\n    for (i = 0; i &lt; count; i++) {\n        printf(&quot;%d \\n&quot;, usersArray[i]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8312941, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-wSVrelKAAwg/AAAAAAAAAAI/AAAAAAAABEc/q4tttbSD7Lk/photo.jpg?sz=128", "display_name": "Nyako", "link": "https://stackoverflow.com/users/8312941/nyako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502878367, "creation_date": 1500475141, "question_id": 45193897, "link": "https://stackoverflow.com/questions/45193897/c-the-variables-in-my-function-are-not-recognized-because-my-variables-are-not", "title": "C: The variables in my function are not recognized because my variables are not global", "body": "<p>So, I defined my functions globally so they are recognized, but I'm not allowed to define my variables globally, and now my variables are not recognized within my function definitions. ( Error: \"identifier -variableName- is undefined\".) Any suggestions to solve this would be much appreciated!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;time.h&gt;\n#define PAUSE system(\"pause\")\n#define SIZE 10\nint main(void) {\n    void enterNumbers();\n    void addNumbers();\n    void numbersAveraged();\n    void displayNumbers();\n    int i = 0;\n    int usersArray[SIZE] = { 0 };\n    int numbers = 0;\n    int totalOfInput = 0;\n    int averageOfInput = 0;\n    int count = 0;\n    int option = 0;\n    do {\n\n        printf(\"==========================================================\\n\");\n        printf(\"=================Number Management System====================\\n\");\n        printf(\"============================================================\\n\\n\");\n        printf(\"Things you can do here.\\n\");\n        printf(\"\\n1. Give us numbers to work with! \\n\");\n        printf(\"\\n2. Let Me add all the numbers you gave me.\\n\");\n        printf(\"\\n3. I  will display the average of all of the numbers you've put in.\\n\");\n        printf(\"\\n4. I will display all of the numbers you put in. \\n\");\n        printf(\"\\n5. Exit \\n\");\n        scanf(\"%i\", &amp;option);\n\n        switch (option) {\n        case 1:\n            enterNumbers();\n            break;\n        case 2:\n            addNumbers();\n\n            break;\n        case 3:\n            numbersAveraged();\n            break;\n        case 4:\n            displayNumbers();\n            break;\n        case 5:\n            exit(0);\n            break;\n        default:\n            printf(\"This is not a valid choice, please type 1-5. \");\n            PAUSE;\n        }\n\n\n    } while (option != 5);\n\n    void enterNumbers(); {\n        for (i = 0; i == SIZE; i++) {\n            printf(\"Please type in a number. Enter -1 when you are done entering numbers.\");\n            scanf(\"%i\", &amp;usersArray[i]);\n            count++;\n            if (usersArray[i] == -1) {\n                break;\n            }\n            if (i == SIZE) {\n                printf(\"That's enough numbers! I can't hold any more I'm afraid.\");\n            }\n        }\n    }\n    void addNumbers(); {\n        void enterNumbers();\n        for (i = 0; i &lt; count; i++) {\n            totalOfInput += usersArray[i];\n        }\n        printf(\"OK, so the total of all of these numbers is: %d\", totalOfInput);\n    }\n    void numbersAveraged(); {\n        addNumbers();\n        averageOfInput = totalOfInput / i;\n        printf(\" The average of the numbers you added was %i\", averageOfInput);\n    }\n    void displayNumbers(); {\n        printf(\"OK, here are all of the numbers you put in. \\n\");\n        for (i = 0; i &lt; count; i++) {\n            printf(\"%d \\n\", usersArray[i]);\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "mouse-hook"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500473758, "post_id": 45193224, "comment_id": 77353811, "body": "You asked the same question an hour ago <a href=\"https://stackoverflow.com/questions/45190578/mousehookproc-in-c\">stackoverflow.com/questions/45190578/mousehookproc-in-c</a> (10k+ reps required). Don&#39;t repost questions!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500473782, "post_id": 45193224, "comment_id": 77353832, "body": "yes i deleted it and asked again no answer I got :("}, {"owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500473812, "post_id": 45193224, "comment_id": 77353858, "body": "Okay was by mistake"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500473865, "post_id": 45193224, "comment_id": 77353911, "body": "1) We don&#39;tr have a time limite for answers here. 2) If you don&#39;t get an answer after 1 year, it still does not allow to repost."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1500474137, "post_id": 45193224, "comment_id": 77354110, "body": "Have you read the documentation on LowLevelMouseProc (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644986(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>).  You aren&#39;t following the rules about return values.  Also, if you take too long to process the message &quot;on Windows 7 and later, the hook is silently removed without being called.&quot;. MessageBox is surely going to take more than the few milliseconds that is allowed."}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 3, "creation_date": 1500474286, "post_id": 45193224, "comment_id": 77354236, "body": "Your program exits immediately after installing the hook; how do you expect the callback to be called? You need a loop (specifically, a message queue) to actually receive the events. See <a href=\"https://stackoverflow.com/questions/7458807/why-must-setwindowshookex-be-used-with-a-windows-message-queue\" title=\"why must setwindowshookex be used with a windows message queue\">stackoverflow.com/questions/7458807/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "edited": false, "score": 0, "creation_date": 1500474403, "post_id": 45193224, "comment_id": 77354317, "body": "I am adding MSG message and then start getmessage function in a while loop then."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "edited": false, "score": 0, "creation_date": 1500474828, "post_id": 45193224, "comment_id": 77354683, "body": "It worked when I added the loop, thanks Andrew. But Ihad to restart the computer because whenever I clicked to close the messagebox a new appeared ))) so i was never able to close it also my computer froze"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1500475041, "post_id": 45193224, "comment_id": 77354868, "body": "simply not use MessageBox inside <code>HookCallBack</code>. log the clicks by another way"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "edited": false, "score": 0, "creation_date": 1500475079, "post_id": 45193224, "comment_id": 77354888, "body": "yeap.... I know"}], "owner": {"user_type": "does_not_exist", "display_name": "user7813357"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1500474023, "creation_date": 1500473612, "last_edit_date": 1500474023, "question_id": 45193224, "link": "https://stackoverflow.com/questions/45193224/c-programming-mouse-hook-proc", "title": "C programming Mouse Hook Proc", "body": "<p>I want the messagebox to appear whenever I click my mouse, how do I achieve it? do mouse clicks have virtual key code like keyboard presses do? Do I also need to use lparam with MouseHookStruct, please help me with the Callback Function. \nNothing happens when I click the mouse.</p>\n\n<pre><code>#ifdef __WIN32\n#include&lt;windows.h&gt;\n\nHHOOK __hook;\n\nMOUSEHOOKSTRUCT mouseHookStruct;\n\nKBDLLHOOKSTRUCT keyboardHookStruct;\n\nLRESULT __stdcall HookCallBack(int nCode, WPARAM wparam, LPARAM lparam){\n\n    if(nCode &gt;= 0){\n\n        if(wparam == WM_LBUTTONDOWN)\n        {\n            mouseHookStruct = *((MOUSEHOOKSTRUCT*) lparam);\n            MessageBox(NULL, \"left button\", \"left button\", MB_ICONINFORMATION);\n        }\n        if(wparam == WM_RBUTTONDOWN){\n            mouseHookStruct = *((MOUSEHOOKSTRUCT*) lparam);\n            MessageBox(NULL, \"left button\", \"left button\", MB_ICONINFORMATION); \n        }\n    }\n\n    return CallNextHookEx(__hook, nCode, wparam, lparam);\n}\n\n\nvoid startHook(){\n\n    __hook = SetWindowsHookEx(WH_MOUSE_LL , HookCallBack , NULL , 0);\n\n}\n\nvoid releaseHook(){\n    UnhookWindowsHookEx(__hook);\n}\nvoid main(){\n startHook();\n}\n#endif\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 7, "creation_date": 1500473122, "post_id": 45192988, "comment_id": 77353273, "body": "&quot;<i>Why is arr called a free pointer</i>&quot; .. why do you <b>think</b> it is? I never heard that before."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500473189, "post_id": 45192988, "comment_id": 77353325, "body": "&quot;I learnt that there are two ways of declaring an array in C \u2026&quot; - You learned wrong! Neither is a pointer an array nor an array a pointer."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 3, "creation_date": 1500473271, "post_id": 45192988, "comment_id": 77353385, "body": "Where did you read about the term <i>free pointer</i>? If you use <code>malloc</code> to obtain a pointer, then certainly later on you do need to <i>free</i> the pointer when it&#39;s no longer needed (or just exit the program, which also frees it). But I&#39;m not familiar with <i>free pointer</i> as a specific, technical term for a kind of pointer. As far as you second question is concerned, I&#39;m not sure what you mean by, <i>change the address contained in array</i>. Perhaps you could show an example."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500473590, "post_id": 45192988, "comment_id": 77353667, "body": "<i>And why can&#39;t I change the address contained in array while I can do it with array</i>: you probably meant <i>And why can&#39;t I change the address contained in array while I can do it with <b>arr</b></i>: because <code>array</code> and <code>arr</code> are two different things, <code>arr</code> is a pointer, and <code>array</code> is an array of 3 <code>ints</code>s."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 5, "last_activity_date": 1500473307, "creation_date": 1500473307, "answer_id": 45193097, "question_id": 45192988, "link": "https://stackoverflow.com/questions/45192988/what-is-a-free-pointer-in-c/45193097#45193097", "title": "What is a free pointer in C?", "body": "<p>As said in comments, you learned something incorrect, from a bad source.</p>\n\n<p>In the second case, <code>arr</code> is not an array, it's a pointer. A pointer that (if the allocation succeeds) happens to contain the address of a block of memory that can hold three <code>int</code>s, but that's not an array.</p>\n\n<p>This confusion probably comes from the fact that arrays \"decay\" to pointers in some contexts, but that does not make them equivalent.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1500476479, "creation_date": 1500476479, "answer_id": 45194377, "question_id": 45192988, "link": "https://stackoverflow.com/questions/45192988/what-is-a-free-pointer-in-c/45194377#45194377", "title": "What is a free pointer in C?", "body": "<p>Let's look at how the two objects are laid out in memory:</p>\n\n<pre><code>       +---+\narray: | 1 | array[0]\n       +---+\n       | 2 | array[1]\n       +---+\n       | 3 | array[2]\n       +---+\n\n       +---+            +---+\n  arr: |   | ---------&gt; | ? | arr[0]\n       +---+            +---+\n                        | ? | arr[1]\n                        +---+\n                        | ? | arr[2]\n                        +---+\n</code></pre>\n\n<p>So, one immediate difference - there is no <code>array</code> object that is separate from the array elements themselves, whereas <code>arr</code> <em>is</em> a separate object from the array elements.  Only <code>array</code> is an <em>actual array</em> as far as C is concerned - <code>arr</code> is just a pointer to a single object, which <em>may</em> be the first element of a sequence of objects or not.  </p>\n\n<p>This is why you can assign a new address value to <code>arr</code>, but not to <code>array</code> - in the second case, there's nothing to assign the new address value <em>to</em>.  It's like trying to change the address of a scalar variable - you can't do it, because the operation doesn't make any sense.  </p>\n\n<p>It also means that the address of <code>array[0]</code> is the same as the address of <code>array</code>.  The <em>expressions</em> <code>&amp;array[0]</code>, <code>array</code>, and <code>&amp;array</code> will all yield the same address value, although the types of the expressions will be different (<code>int *</code>, <code>int *</code>, and <code>int (*)[3]</code>, respectively).  By contrast, the address of <code>arr</code> is <em>not</em> the same as the address of <code>arr[0]</code>; the expressions <code>arr</code> and <code>&amp;arr[0]</code> will yield the same value, but <code>&amp;arr</code> will not, and its type will be <code>int **</code> instead of <code>int (*)[3]</code>. </p>\n"}], "owner": {"reputation": 58, "user_id": 8332204, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UXsDrR-HoMk/AAAAAAAAAAI/AAAAAAAAASg/5Rc4zHlDQYE/photo.jpg?sz=128", "display_name": "Cha&#239; Sarfati", "link": "https://stackoverflow.com/users/8332204/cha%c3%af-sarfati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1500476479, "creation_date": 1500473049, "last_edit_date": 1500473158, "question_id": 45192988, "link": "https://stackoverflow.com/questions/45192988/what-is-a-free-pointer-in-c", "title": "What is a free pointer in C?", "body": "<p>I learnt that there are two ways of declaring an array in C:</p>\n\n<pre><code>int array[] = {1,2,3};\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>int* arr = malloc(3*sizeof(int));\n</code></pre>\n\n<p>Why is arr called a free pointer ? And why can't I change the address contained in array while I can do it with array ?</p>\n"}, {"tags": ["c++", "c", "api-design"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500474383, "post_id": 45192937, "comment_id": 77354301, "body": "In such a situation, I finally adopted the principle of the OpenGL API. Our simulation system got a context object (actually a <code>struct</code>) which stores the current states. There are methods to get/set states. Other functions (to perform simulation) rely on these states. For new features, we may add states (and get()/set()). For backwards compatibility, we assign a default value (in constructor of context <code>struct</code>) so that the resp. functions work as before if the new state is never touched."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500474529, "post_id": 45192937, "comment_id": 77354435, "body": "Don&#39;t use multiple parameters but declare your enum members as flags (powers of 2). A common notation would be <code>1&lt;&lt;0</code>, <code>1&lt;&lt;1</code>, <code>1&lt;&lt;2</code>, <code>1&lt;&lt;3</code> and so on. This is often seen <i>in the wild</i>."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5368518"}, "is_accepted": true, "score": 1, "last_activity_date": 1500477289, "last_edit_date": 1500477289, "creation_date": 1500474925, "answer_id": 45193798, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead/45193798#45193798", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>Adding meaningless arguments that you plan to implement some day (or maybe never) is bug prone. Imagine that you have an argument <code>option4</code> that is ignored by the function and your program works just fine. In some time later you add meaning to that argument and for some unknown reason your program becomes unstable. That may happen if in some places you call your function giving that argument some random values and it went unnoticed in the past since the <code>option4</code> was ignored. Now, how do you find out in which calls it has a good value and in which it is the value that you gave it by mistake before it was implemented? And moreover, what if there is not just one such argument but a few of them?</p>\n\n<p>Creating a structure, which will contain all the extra arguments and passing it to the function seems to be a better solution:</p>\n\n<pre><code>struct args_ex\n{\n    bool foo;\n    bool bar;\n    bool spam;\n\n    // add more later\n};\n\nvoid your_function (... , const struct args_ex * extra)\n{\n    ...\n\n    if (extra)\n        // Do something with an extra arguments\n}\n</code></pre>\n\n<p>Later you will add members to that structure and modify the function. In places where you call this function with only some arguments being passed, you initialize the entire structure to zero and the members you need.</p>\n\n<pre><code>struct args_ex extra =\n{\n    .foo = true,\n    .bar = true,\n};\n\nyour_function (... , &amp; extra);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1500479617, "creation_date": 1500479617, "answer_id": 45195494, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead/45195494#45195494", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>In order to avoid passing all your parameters in one go, you could create an object. You could then follow the advice in this <a href=\"https://people.mpi-inf.mpg.de/~jblanche/api-design.pdf\" rel=\"nofollow noreferrer\">pdf</a>, so then you could write</p>\n\n<pre><code>MyObject myObject(someParams);\nmyObject.setOption1(foo);\nmyObject.setOption2(bar);\n\nmyObject.doFunction();\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 3456599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a283a30c20435118ecae7f054a70476e?s=128&d=identicon&r=PG&f=1", "display_name": "calofr", "link": "https://stackoverflow.com/users/3456599/calofr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45193798, "answer_count": 2, "score": 1, "last_activity_date": 1500479617, "creation_date": 1500472936, "question_id": 45192937, "link": "https://stackoverflow.com/questions/45192937/disadvantages-of-api-extension-with-predefined-enumerated-option-list-instead", "title": "Disadvantages of api extension with predefined (enumerated) option list instead of individual arguments", "body": "<p>I currently need to extend a function's API that is very often used in my aplication with a new (boolean) parameter. I also foresee that, as more features are added to the program, the same function may (not yet certain) need more functionality, that (if needed) can be controled by boolean parameters. The extra functionality will only be needed by new function calls, not by the existing ones.</p>\n\n<p>So, to simplify its extension in the future, I plan on adding two or tree extra enumerated parameters to its API, so that new features can be added without chasing and editing all fuction calls everytime something is added. So, instead of extending to this:</p>\n\n<pre><code>function(currparams..., bool option1, bool option2, bool option3, bool option4);\n</code></pre>\n\n<p>It would extend to this:</p>\n\n<pre><code>typedef enum{\n    noopt,\n    opt1,\n    opt2,\n    opt3,\n    ...\n}APIoptions;\n\nfunction(currparams..., APIoptions option1, APIoptions option2);\n</code></pre>\n\n<p>As long as the enumerated arguments I add now are enough for the future needs, this should make extending the API easier. However I don't recall seing this type of programming in the wild and would like to understand its disadvantages and potential problems and why it wouldn't be more often used.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "c++", "c", "android-ndk", "c-libraries"], "owner": {"reputation": 8243, "user_id": 5045201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qB7Z8.jpg?s=128&g=1", "display_name": "Sapnesh Naik", "link": "https://stackoverflow.com/users/5045201/sapnesh-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1500472374, "creation_date": 1500472374, "question_id": 45192677, "link": "https://stackoverflow.com/questions/45192677/android-ndk-native-library-for-usb-storage-management", "title": "Android NDK| native library for USB storage management.", "body": "<p>I am trying to build an app which involves formatting usb drives, changing the partition scheme and creating partitions. \nAfter a lot of research I found that Android SDK does not provide tools or ways to access the information needed to do such tasks even with root.</p>\n\n<p>So is there any C/C++ library which I could use? Or is there a better way? </p>\n"}, {"tags": ["c", "gcc", "toolchain", "address-sanitizer"], "comments": [{"owner": {"reputation": 229, "user_id": 1296994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/558f3a491940047f108dee8c590b39b2?s=128&d=identicon&r=PG", "display_name": "Dongguo", "link": "https://stackoverflow.com/users/1296994/dongguo"}, "edited": false, "score": 0, "creation_date": 1503819190, "post_id": 45192667, "comment_id": 78764028, "body": "Hi,  Have you made the address sanitizer work? If yes, could you please possibly share me the sample code?"}, {"owner": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "reply_to_user": {"reputation": 229, "user_id": 1296994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/558f3a491940047f108dee8c590b39b2?s=128&d=identicon&r=PG", "display_name": "Dongguo", "link": "https://stackoverflow.com/users/1296994/dongguo"}, "edited": false, "score": 0, "creation_date": 1504871464, "post_id": 45192667, "comment_id": 79193684, "body": "Dongguo, hello! Yes, I made it, but I can&#39;t send to you OS because it&#39;s my work and it don&#39;t opened yet. I used Linux implementation as reference. Sorry for waiting"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "edited": false, "score": 0, "creation_date": 1500486870, "post_id": 45196221, "comment_id": 77362726, "body": "I check gcc versions 5.4 and 6.3.1 from <a href=\"https://launchpad.net/gcc-arm-embedded\" rel=\"nofollow noreferrer\">gcc-arm-embedded</a> and yesterday I build 7.1 and all the same - <code>__asan_register_globals</code> and <code>__asan_unregister_globals</code> are not used. That about stack instrumentation, how compiler know where shadow memory is located? I don&#39;t use <code>-fasan-shadow-offset=</code> option because shadow start address, in my realization, computed depends on configuration params."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "edited": false, "score": 0, "creation_date": 1500488639, "post_id": 45196221, "comment_id": 77363718, "body": "@LakeevRoman : Unfortunately variable shadow offset is not supported by GCC. It&#39;s quite doable (it has been recently implemented in LLVM), we just didn&#39;t need it for Kasan. So for now GCC will always use fixed address, either one specified w/ <code>-fasan-shadow-offset</code> or default."}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "edited": false, "score": 0, "creation_date": 1500519945, "post_id": 45196221, "comment_id": 77375413, "body": "@LakeevRoman: Just to double check - do you use <code>-fno-common</code> as advised e.g. <a href=\"https://github.com/google/sanitizers/issues/776\" rel=\"nofollow noreferrer\">here</a>? Could you check <code>echo &#39;int x = 1;&#39; | ~&#47;install&#47;gcc&#47;bin&#47;gcc -fsanitize=kernel-address --param asan-globals=1 -x c - -S -o- | grep asan</code>? This prints <code>call __asan_register_globals</code> but that&#39;s 8.0."}, {"owner": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "edited": false, "score": 0, "creation_date": 1500537286, "post_id": 45196221, "comment_id": 77383254, "body": "No, I didn&#39;t use <code>-fno-common</code> flag. With this flag <code>__asan_register_globals</code> and <code>__asan_unregister_globals</code> appeared. Thanks!  Can you add this note to your answer?"}], "tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 1, "last_activity_date": 1500543407, "last_edit_date": 1500543407, "creation_date": 1500481977, "answer_id": 45196221, "question_id": 45192667, "link": "https://stackoverflow.com/questions/45192667/support-of-asan-flags-in-arm-none-eabi-toolchain/45196221#45196221", "title": "Support of ASAN flags in arm-none-eabi toolchain", "body": "<p>You don't need any special functions calls for stack instrumentation - shadow memory is poisoned via inline stores in function prologue (and unpoisoned in epilogue).</p>\n\n<p>Which GCC version do you use? Instrumentation of globals was done only in GCC 5.0 (in <a href=\"https://patchwork.ozlabs.org/patch/416958/\" rel=\"nofollow noreferrer\">this patch</a>) and wasn't backported to 4.9 branch. Another option option is that you forgot to use <code>-fno-common</code> which is <a href=\"https://github.com/google/sanitizers/issues/776\" rel=\"nofollow noreferrer\">necessary to instrument common symbols</a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 3990452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96563716ccde572c526f5e0110e64688?s=128&d=identicon&r=PG&f=1", "display_name": "Lakeev Roman", "link": "https://stackoverflow.com/users/3990452/lakeev-roman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 1, "accepted_answer_id": 45196221, "answer_count": 1, "score": 1, "last_activity_date": 1556632454, "creation_date": 1500472343, "last_edit_date": 1556632454, "question_id": 45192667, "link": "https://stackoverflow.com/questions/45192667/support-of-asan-flags-in-arm-none-eabi-toolchain", "title": "Support of ASAN flags in arm-none-eabi toolchain", "body": "<p>I'm working on porting kernel address sanitizer (KASan) from linux to another os (let's call it OS). This OS compiled with <code>arm-none-eabi</code> toolchain and I pass following asan related flags to compiler:</p>\n\n<p><code>-fsanitize=kernel-address --param asan-globals=1 --param asan-stack=1 --param asan-instrumentation-with-call-threshold=0</code></p>\n\n<p>Also I implement different <code>__asan_*</code> functions including <code>__asan_register_globals</code> and <code>__asan_unregister_globals</code>.</p>\n\n<p>My problem is that compiler inserts only <code>__asan_load*</code>, <code>__asan_store*</code> and <code>__asan_handle_no_return</code> functions and ignores global variables and stack.</p>\n\n<p>I made investigation and find out that in Linux compiler inserts instrumentation of globals and stack, but Linux use <code>arm-linux-gnueabi</code> toolchain.</p>\n\n<p>Can anybody explain why <code>--param asan-globals=1</code> and <code>--param asan-stack=1</code> don't affect on generated code with <code>arm-none-eabi</code> toolchain?\nOr just set direction for further searches.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1500471297, "post_id": 45192223, "comment_id": 77351630, "body": "Please show what you have tried."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 10, "creation_date": 1500471311, "post_id": 45192223, "comment_id": 77351647, "body": "Huh? Loop and compare? Where&#39;s the problem?"}, {"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 1, "creation_date": 1500472827, "post_id": 45192223, "comment_id": 77353008, "body": "What do you mean be <code>index = 0, count;</code> in your code?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1500473605, "post_id": 45192223, "comment_id": 77353677, "body": "You need to ask a specific question. What part of the problem are you stuck on? Sounds like you need to start by prompting the user to enter a name or jersey number to compare with, right? Then as Felix says, do a loop and compare."}, {"owner": {"reputation": 31, "user_id": 8322471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2319bab87b0bda48618776aeff3035f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Alba", "link": "https://stackoverflow.com/users/8322471/adrian-alba"}, "edited": false, "score": 0, "creation_date": 1500483449, "post_id": 45192223, "comment_id": 77360727, "body": "I did use for loop with if statement that is the first thing I tried to do.IF statement used to try and compare userInput to all the elements of jerseyNumber array.I couldn&#39;t get it to work then thought need to show all information of the player. By just comparing the jerseyArray to userInput how will that allow me to show all info for that player. I just started using array struct so having hard time and can&#39;t find something that will help me accomplish this specific task."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1500510987, "post_id": 45192223, "comment_id": 77373312, "body": "Probably a good idea to emit a diagnostic if <code>sscanf</code> doesn&#39;t return the expected number of fields. Otherwise you will be scratching your head due to some unexpected result actually caused by bad data."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1500511029, "post_id": 45192223, "comment_id": 77373318, "body": "When using <code>sscanf</code> on a line of input, it&#39;s a good idea to scan one extra dummy field. Then if you get a return value &gt; 14, it indicates there are superfluous elements in the line: that can be diagnosed also. Too many is as bad as not enough."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1500511093, "post_id": 45192223, "comment_id": 77373341, "body": "The <code>%s</code> scanf conversion specifier places no limit on the length of the data; it is very much like the deprecated <code>gets</code> function.  Use <code>&quot;%*s&quot;, ..., (int) sizeof array - 1, array)</code>"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1500511182, "post_id": 45192223, "comment_id": 77373355, "body": "I.e &quot;%40s&quot; means read up to 40 characters. We can replace this constant with <code>*</code> to indicate &quot;get the limit from an argument of type <code>int</code>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1500508080, "post_id": 45202816, "comment_id": 77372640, "body": "hint, ask the user what they want to lookup. Then call lookupbyxxxx depending  on what they choose. You already have lookupbynumber (its the for loop at the end)"}], "tags": [], "owner": {"reputation": 31, "user_id": 8322471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2319bab87b0bda48618776aeff3035f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Alba", "link": "https://stackoverflow.com/users/8322471/adrian-alba"}, "is_accepted": false, "score": 1, "last_activity_date": 1500507803, "creation_date": 1500507803, "answer_id": 45202816, "question_id": 45192223, "link": "https://stackoverflow.com/questions/45192223/how-to-search-through-an-array-of-struct-c-programming/45202816#45202816", "title": "How to search through an array of struct C programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define LEN_LINE 80\n#define LEN_NAME 30\n#define MAX_LINES 30\n#define LEN_POS 5\n#define LEN_HAND 5\n#define LEN_THROW 5\n#define LEN_STATUS 20\n#define LEN_MLBSTATUS 5\n#define MAX_PLAYERS 26\n\ntypedef struct\n{\n    int jerseyNumber;\n    char firstName[LEN_NAME + 1];\n    char lastName[LEN_NAME + 1];\n    char position[LEN_POS + 1];\n    char battingHand[LEN_HAND + 1];\n    char throwingHand[LEN_THROW + 1];\n    int birthYear, birthMonth, birthDay, heightFeet, heightInches, weight;\n    char status[LEN_STATUS + 1];\n    char mlbStatus[LEN_MLBSTATUS + 1];\n\n\n}player_t;\n\n//protype\nvoid displayPlayer(player_t *aPlayerPtr);\n\n\nint main(void)\n{\n    FILE * filePtr;\n    int index, count;\n    char line[LEN_LINE + 1];\n    player_t players[MAX_LINES];\n    filePtr = fopen(\"Shrimp.txt\",\"r\");\n    if (filePtr == NULL)\n    {\n        printf(\"Unable to open file.\\n\");\n    }\n    else\n    {\n        index = 0, count;\n        while(index &lt; MAX_LINES &amp;&amp; fgets(line, LEN_LINE, filePtr))\n        {\n            if(14 == sscanf(line, \"%i %s %s %s %s %s %i %i %i %i %i %i %s %s\",\n                           &amp;players[index].jerseyNumber, players[index].firstName,\n                           players[index].lastName, players[index].position,\n                           players[index].battingHand, players[index].throwingHand,\n                           &amp;players[index].birthYear, &amp;players[index].birthMonth,\n                           &amp;players[index].birthDay, &amp;players[index].heightFeet,\n                           &amp;players[index].heightInches, &amp;players[index].weight,\n                           players[index].status, players[index].mlbStatus)\n\n               )\n            {\n                index++;\n            }\n        }\n\n    fclose(filePtr);\n    count = index;\n\n    for(index = 0; index &lt; count; index = index + 1)\n    {\n        displayPlayer(&amp;players[index]);\n    }\n\n    int jerseyNumber;\n    int i;\n\n\n    printf(\"Enter jersey number for the player: \");\n    scanf(\"%i\",&amp;jerseyNumber);\n\n    for(i=0;i&lt;=MAX_PLAYERS;i++){\n        if(jerseyNumber == players[i].jerseyNumber){\n            printf(\"The player's name is %s %s\\n\",players[i].firstName, players[i].lastName);\n        }\n    }\n\n    }\n    return 0;\n}\n\nvoid displayPlayer(player_t *aPlayerPtr)\n{\n    printf(\"JERSEY: %i PLAYER NAME: %s %s POSITION: %s BATTING HAND: %s THROWING HAND: %s BIRTHDAY: %i/%i/%i HEIGHT: %i'%i WEIGHT: %i STATUS: %s MLB 40-STATUS: %s\\n\\n\",\n           aPlayerPtr-&gt;jerseyNumber,aPlayerPtr-&gt;firstName,aPlayerPtr-&gt;lastName,aPlayerPtr-&gt;position,\n           aPlayerPtr-&gt;battingHand,aPlayerPtr-&gt;throwingHand,aPlayerPtr-&gt;birthMonth,aPlayerPtr-&gt;birthDay,\n           aPlayerPtr-&gt;birthYear,aPlayerPtr-&gt;heightFeet,aPlayerPtr-&gt;heightInches,aPlayerPtr-&gt;weight,\n           aPlayerPtr-&gt;status,aPlayerPtr-&gt;mlbStatus\n           );\n}\n</code></pre>\n\n<p>After going back and looking at it I managed to make it work using jersey number.Using this piece of code</p>\n\n<pre><code>int jerseyNumber;\nint i;\n\n\nprintf(\"Enter jersey number for the player: \");\nscanf(\"%i\",&amp;jerseyNumber);\n\nfor(i=0;i&lt;=MAX_PLAYERS;i++){\n    if(jerseyNumber == players[i].jerseyNumber){\n        printf(\"The player's name is %s %s\\n\",players[i].firstName, players[i].lastName);\n    }\n}\n</code></pre>\n\n<p>Though now I am stuck in trying to figure out how to do it using name or position </p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8322471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2319bab87b0bda48618776aeff3035f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Alba", "link": "https://stackoverflow.com/users/8322471/adrian-alba"}, "is_accepted": false, "score": -1, "last_activity_date": 1500581494, "creation_date": 1500581494, "answer_id": 45224350, "question_id": 45192223, "link": "https://stackoverflow.com/questions/45192223/how-to-search-through-an-array-of-struct-c-programming/45224350#45224350", "title": "How to search through an array of struct C programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define LEN_LINE 80\n#define LEN_NAME 30\n#define MAX_LINES 30\n#define LEN_POS 5\n#define LEN_HAND 5\n#define LEN_THROW 5\n#define LEN_STATUS 10\n#define LEN_MLBSTATUS 5\n#define MAX_PLAYERS 26\n\ntypedef struct\n{\n    int jerseyNumber;\n    char firstName[LEN_NAME + 1];\n    char lastName[LEN_NAME + 1];\n    char position[LEN_POS + 1];\n    char battingHand[LEN_HAND + 1];\n    char throwingHand[LEN_THROW + 1];\n    int birthYear, birthMonth, birthDay, heightFeet, heightInches, weight;\n    char status[LEN_STATUS + 1];\n    char mlbStatus[LEN_MLBSTATUS + 1];\n\n\n} player_t;\n\n//protypes for all functions\nvoid displayPlayer(player_t *aPlayerPtr);\nvoid displayWelcome(void);\nvoid resultsProvided(void);\nvoid singleDisplay(player_t *aPlayerPtr);\n\nint main(void)\n{\n    FILE * filePtr;\n    int index, count,i;\n    char line[LEN_LINE + 1];\n    char userChoice;\n    char repeat;\n    player_t players[MAX_LINES];\n    filePtr = fopen(\"Shrimp.txt\",\"r\");\n    if (filePtr == NULL)\n    {\n        printf(\"Unable to open file.\\n\");\n    }\n    else\n    {\n        index = 0;\n        while(index &lt; MAX_LINES &amp;&amp; fgets(line, LEN_LINE, filePtr))\n        {\n            if(14 == sscanf(line, \"%i %30s %30s %5s %5s %5s %i %i %i %i %i %i %10s %5s\",\n                            &amp;players[index].jerseyNumber, players[index].firstName,\n                            players[index].lastName, players[index].position,\n                            players[index].battingHand, players[index].throwingHand,\n                            &amp;players[index].birthYear, &amp;players[index].birthMonth,\n                            &amp;players[index].birthDay, &amp;players[index].heightFeet,\n                            &amp;players[index].heightInches, &amp;players[index].weight,\n                            players[index].status, players[index].mlbStatus)\n\n              )\n            {\n                index++;\n            }\n        }\n\n        fclose(filePtr);\n        count = index;\n\n        displayWelcome();\n        do\n        {\n            printf(\"Choose how you would like to search.\\nEnter A to display all players information.\\\n                \\nEnter N to search a player based on name.\\nEnter J to search a player based on jersey number.\\\n                \\nEnter P to search a player based on position.\\nEnter your choice: \");\n            scanf(\"%c\",&amp;userChoice);\n\n            if(userChoice == 'A' || userChoice == 'a'){\n            for(index = 0; index &lt; count; index = index + 1)\n            {\n                displayPlayer(&amp;players[index]);\n            }\n            }\n\n            if(userChoice == 'J' || userChoice == 'j'){\n            int jerseyNumber;\n\n            printf(\"Enter jersey number for the player: \");\n            scanf(\"%i\",&amp;jerseyNumber);\n\n            for(i=0; i&lt;=MAX_PLAYERS; i++)\n            {\n                if(jerseyNumber == players[i].jerseyNumber)\n                {\n                    singleDisplay(&amp;players[i]);\n\n                }\n            }\n            }\n            if(userChoice == 'N' || userChoice == 'n'){\n            char playerName[LEN_NAME + 1];\n\n            printf(\"Enter name for the player: \");\n            scanf(\"%s\",playerName);\n\n            for(i=0; i&lt;=MAX_PLAYERS; i++)\n            {\n                if(strcmp(playerName, players[i].firstName)== 0)\n                {\n                    singleDisplay(&amp;players[i]);\n\n                }\n            }\n            }\n            if(userChoice == 'P' || userChoice == 'p'){\n            char playerPosition[LEN_NAME + 1];\n\n            printf(\"Enter position for the player: \");\n            scanf(\"%s\",playerPosition);\n\n            for(i=0; i&lt;=MAX_PLAYERS; i++)\n            {\n                if(strcmp(playerPosition, players[i].position)== 0)\n                {\n                    singleDisplay(&amp;players[i]);\n\n                }\n            }\n\n            }\n            printf (\"Would you like to search again?\\nEnter Y or y for Yes or any other character to exit this program!\\n\");\n            scanf (\"\\n%c\", &amp;repeat);\n        }\n        while (repeat == 'Y' || repeat == 'y');\n    }\n    resultsProvided();\n\n    return 0;\n}\n\nvoid displayPlayer(player_t *aPlayerPtr)\n{\n    printf(\"JERSEY: %i PLAYER NAME: %s %s POSITION: %s BATTING HAND: %s THROWING HAND: %s BIRTHDAY: %i/%i/%i HEIGHT: %i'%i WEIGHT: %i STATUS: %s MLB 40-STATUS: %s\\n\\n\",\n           aPlayerPtr-&gt;jerseyNumber,aPlayerPtr-&gt;firstName,aPlayerPtr-&gt;lastName,aPlayerPtr-&gt;position,\n           aPlayerPtr-&gt;battingHand,aPlayerPtr-&gt;throwingHand,aPlayerPtr-&gt;birthMonth,aPlayerPtr-&gt;birthDay,\n           aPlayerPtr-&gt;birthYear,aPlayerPtr-&gt;heightFeet,aPlayerPtr-&gt;heightInches,aPlayerPtr-&gt;weight,\n           aPlayerPtr-&gt;status,aPlayerPtr-&gt;mlbStatus\n          );\n}\n\nvoid displayWelcome(void)\n{\n    printf(\"Welcome to Adrian's Baseball Program!\\n\");\n\n}\n\nvoid resultsProvided(void)\n{\n    printf(\"\\nResults provided by Adrian.\\n\");\n}\n\nvoid singleDisplay(player_t *aPlayerPtr)\n{\n     printf(\"JERSEY: %i\\nPLAYER NAME: %s %s\\nPOSITION: %s\\nBATTING HAND: %s\\nTHROWING HAND: %s\\\n            \\nBIRTHDAY: %i/%i/%i\\nHEIGHT: %i'%i\\nWEIGHT: %i\\nSTATUS: %s\\nMLB 40-STATUS: %s\\n\\n\",\n           aPlayerPtr-&gt;jerseyNumber,aPlayerPtr-&gt;firstName,aPlayerPtr-&gt;lastName,aPlayerPtr-&gt;position,\n           aPlayerPtr-&gt;battingHand,aPlayerPtr-&gt;throwingHand,aPlayerPtr-&gt;birthMonth,aPlayerPtr-&gt;birthDay,\n           aPlayerPtr-&gt;birthYear,aPlayerPtr-&gt;heightFeet,aPlayerPtr-&gt;heightInches,aPlayerPtr-&gt;weight,\n           aPlayerPtr-&gt;status,aPlayerPtr-&gt;mlbStatus\n          );\n}\n</code></pre>\n\n<p>I was able to get almost everything working expect for while loop that allows user to search repeatedly.Also I am having trouble getting else statements to work properly.</p>\n\n<pre><code>    if(userChoice == 'J' || userChoice == 'j'){\n    int jerseyNumber;\n\n    printf(\"Enter jersey number for the player: \");\n    scanf(\"%i\",&amp;jerseyNumber);\n\n    for(i=0; i&lt;=MAX_PLAYERS; i++)\n    {\n        if(jerseyNumber == players[i].jerseyNumber)\n        {\n            singleDisplay(&amp;players[i]);\n\n        }else{\n            printf(\"The jersey number entered is not found.\");\n        }\n    }\n    }\n</code></pre>\n\n<p>It loops and even if I enter a number in the array it outputs something like this(no.18 is first jersey number in file)</p>\n\n<pre><code> Welcome to Adrian's Baseball Program!\nChoose how you would like to search.\nEnter A to display all players information.\nEnter N to search a player based on name.\nEnter J to search a player based on jersey number.\nEnter P to search a player based on position.\nEnter your choice: J\nEnter jersey number for the player: 18\nJERSEY: 18\nPLAYER NAME: Matt Tomshaw\nPOSITION: P\nBATTING HAND: R\nTHROWING HAND: L\nBIRTHDAY: 12/17/1988\nHEIGHT: 6'2\nWEIGHT: 200\nSTATUS: Active\nMLB 40-STATUS: No\n</code></pre>\n\n<p>The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.The jersey number entered is not found.Would you like to practice another number?\n    Enter Y or y for Yes or any other character to exit this program!</p>\n"}], "owner": {"reputation": 31, "user_id": 8322471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2319bab87b0bda48618776aeff3035f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Alba", "link": "https://stackoverflow.com/users/8322471/adrian-alba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1500581494, "creation_date": 1500471231, "question_id": 45192223, "link": "https://stackoverflow.com/questions/45192223/how-to-search-through-an-array-of-struct-c-programming", "title": "How to search through an array of struct C programming", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define LEN_LINE 80\n#define LEN_NAME 30\n#define MAX_LINES 30\n#define LEN_POS 5\n#define LEN_HAND 5\n#define LEN_THROW 5\n#define LEN_STATUS 20\n#define LEN_MLBSTATUS 5\n\ntypedef struct\n{\n    int jerseyNumber;\n    char firstName[LEN_NAME + 1];\n    char lastName[LEN_NAME + 1];\n    char position[LEN_POS + 1];\n    char battingHand[LEN_HAND + 1];\n    char throwingHand[LEN_THROW + 1];\n    int birthYear, birthMonth, birthDay, heightFeet, heightInches, weight;\n    char status[LEN_STATUS + 1];\n    char mlbStatus[LEN_MLBSTATUS + 1];\n\n\n}player_t;\n\n//protype\nvoid displayPlayer(player_t *aPlayerPtr);\n\n\nint main(void)\n{\n    FILE * filePtr;\n    int index, count;\n    char line[LEN_LINE + 1];\n    player_t players[MAX_LINES];\n    filePtr = fopen(\"Shrimp.txt\",\"r\");\n    if (filePtr == NULL)\n    {\n        printf(\"Unable to open file.\\n\");\n    }\n    else\n    {\n        index = 0, count;\n        while(index &lt; MAX_LINES &amp;&amp; fgets(line, LEN_LINE, filePtr))\n        {\n            if(14 == sscanf(line, \"%i %s %s %s %s %s %i %i %i %i %i %i %s %s\",\n                           &amp;players[index].jerseyNumber, players[index].lastName,\n                           players[index].firstName, players[index].position,\n                           players[index].battingHand, players[index].throwingHand,\n                           &amp;players[index].birthYear, &amp;players[index].birthMonth,\n                           &amp;players[index].birthDay, &amp;players[index].heightFeet,\n                           &amp;players[index].heightInches, &amp;players[index].weight,\n                           players[index].status, players[index].mlbStatus)\n\n               )\n            {\n                index++;\n            }\n        }\n    fclose(filePtr);\n    count = index;\n\n    for(index = 0; index &lt; count; index = index + 1)\n    {\n        displayPlayer(&amp;players[index]);\n    }\n\n\n    }\n    return 0;\n}\n\nvoid displayPlayer(player_t *aPlayerPtr)\n{\n    printf(\"Player %i and his name is %s , %s. His weight is %i and position %s. His Status is %s and his mlb status %s \\n\",\n           aPlayerPtr-&gt;jerseyNumber, aPlayerPtr-&gt;lastName, aPlayerPtr-&gt;firstName,\n           aPlayerPtr-&gt;weight, aPlayerPtr-&gt;position, aPlayerPtr-&gt;status, aPlayerPtr-&gt;mlbStatus\n           );\n}\n</code></pre>\n\n<p>Okay so I designed a program to read off information from a file into an array of structs.I am suppose to be able to let the user search players info either using name or jersey number.I would appreciate if someone could point me in the right direction.</p>\n"}, {"tags": ["c", "embedded", "crc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500469735, "post_id": 45191493, "comment_id": 77350303, "body": "Not clear what your problem is. We are not to explain CRC calculation,that is too broad. There are a lot of resources about CRCs to be found. Start with Wikipedia and dig further."}, {"owner": {"reputation": 587, "user_id": 2725838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Nb6RH.jpg?s=128&g=1", "display_name": "Sigma", "link": "https://stackoverflow.com/users/2725838/sigma"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500469776, "post_id": 45191493, "comment_id": 77350331, "body": "@Olaf care to explain?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500469930, "post_id": 45191493, "comment_id": 77350471, "body": "Wikipedia has an extensive article on CRC and how to calculate them."}, {"owner": {"reputation": 587, "user_id": 2725838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Nb6RH.jpg?s=128&g=1", "display_name": "Sigma", "link": "https://stackoverflow.com/users/2725838/sigma"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500470066, "post_id": 45191493, "comment_id": 77350597, "body": "@JonathanLeffler  I am not asking how to get CRC I understand that but I don&#39;t understand why author XORed remainder with next byte in case of byte array"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500470409, "post_id": 45191493, "comment_id": 77350880, "body": "CRC for a single byte is wholly unexciting.  It is only interesting when applied to multiple bytes in some shape or form.  There are rules for how to do the chaining.  IIRC, Wikipedia explains them."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500470425, "post_id": 45191493, "comment_id": 77350893, "body": "@Sigma <i>&#39;but I don&#39;t understand why author XORed remainder with next byte in case of byte array&#39;</i> Please. Compile it, debug it and think."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500474521, "post_id": 45191493, "comment_id": 77354431, "body": "Tip: Use <code>()</code> with <code>TOPBIT (1 &lt;&lt; 7)</code> to avoid unexpected code - although not an issue here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500474685, "post_id": 45191493, "comment_id": 77354567, "body": "&quot;I don&#39;t quite understand why? why he XOR&#39;ed to get in the next byte into remainder?&quot; --&gt; posting what you expected would help others explain the code to you."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1500479038, "post_id": 45191493, "comment_id": 77358036, "body": "<a href=\"http://www.sunshine2k.de/articles/coding/crc/understanding_crc.html\" rel=\"nofollow noreferrer\">sunshine2k.de/articles/coding/crc/understanding_crc.html</a>"}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1500528398, "post_id": 45191493, "comment_id": 77378059, "body": "Read <a href=\"http://www.ross.net/crc/download/crc_v3.txt\" rel=\"nofollow noreferrer\">this tutorial</a>. It will explain that and much more."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500710582, "post_id": 45191493, "comment_id": 77468728, "body": "The missing parentheses in the <code>TOPBIT</code> define (as @chux wrote above) indicate that you changed the original code from the article. Do not do this if you don&#39;t understand what you&#39;re doing. Also, if you are not too tight with RAM, you might want to check the lookup table CRC version shown at the bottom of the article."}], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 2725838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Nb6RH.jpg?s=128&g=1", "display_name": "Sigma", "link": "https://stackoverflow.com/users/2725838/sigma"}, "is_accepted": false, "score": 0, "last_activity_date": 1500472232, "creation_date": 1500472232, "answer_id": 45192620, "question_id": 45191493, "link": "https://stackoverflow.com/questions/45191493/how-to-calculate-crc-for-byte-array/45192620#45192620", "title": "How to calculate crc for byte array?", "body": "<p>Look at page on wikipedia <a href=\"https://en.wikipedia.org/wiki/Mathematics_of_cyclic_redundancy_checks\" rel=\"nofollow noreferrer\">Mathematics of cyclic redundancy checks</a> It turns out that CRC is a linear operation meaning that crc(x^y^z) = crc(x)crc(y)crc(x) and hence the author XOR'd the remainder of previous byte with the next byte</p>\n"}, {"comments": [{"owner": {"reputation": 6079, "user_id": 34989, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f16eae47ba215ccc1fe3f05f1750adc?s=128&d=identicon&r=PG", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/34989/gerhard"}, "reply_to_user": {"reputation": 2034, "user_id": 4688321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5b21d8c934125839996c5eac897fc1?s=128&d=identicon&r=PG&f=1", "display_name": "kiner_shah", "link": "https://stackoverflow.com/users/4688321/kiner-shah"}, "edited": false, "score": 2, "creation_date": 1565006940, "post_id": 45210361, "comment_id": 101203418, "body": "@kiner_shah Alternatively get it <a href=\"https://archive.org/stream/PainlessCRC/crc_v3.txt\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 6079, "user_id": 34989, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f16eae47ba215ccc1fe3f05f1750adc?s=128&d=identicon&r=PG", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/34989/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1500542435, "last_edit_date": 1500542435, "creation_date": 1500542086, "answer_id": 45210361, "question_id": 45191493, "link": "https://stackoverflow.com/questions/45191493/how-to-calculate-crc-for-byte-array/45210361#45210361", "title": "How to calculate crc for byte array?", "body": "<p>See <a href=\"http://www.ross.net/crc/crcpaper.html\" rel=\"nofollow noreferrer\">A painless guide to CRC error detection algorithms</a>. It has everything on CRCs, including your question. An array is treated as a single massive number so the remainder is carried over to the next byte. CRC is the remainder that is left over at the end.</p>\n"}], "owner": {"reputation": 587, "user_id": 2725838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Nb6RH.jpg?s=128&g=1", "display_name": "Sigma", "link": "https://stackoverflow.com/users/2725838/sigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4726, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1500542435, "creation_date": 1500469416, "question_id": 45191493, "link": "https://stackoverflow.com/questions/45191493/how-to-calculate-crc-for-byte-array", "title": "How to calculate crc for byte array?", "body": "<p>I understand how CRC for a byte can be calculated by modulo 2 division with a polynomial but I don't understand how do you calculate CRC for data consisting of byte arrays. CRC for a single byte can be calculated by this following code</p>\n\n<pre><code>#define WIDTH  8\n#define TOPBIT 1 &lt;&lt; 7\n#define POLYNOMIAL 0xD8\n\nuint8_t(uint8_t const message)\n{\n    uint8_t remainder = 0;  \n    remainder ^= message;\n    for (uint8_t bit = 8; bit &gt; 0; --bit)\n    {\n        if (remainder &amp; TOPBIT)\n        {\n            remainder = (remainder &lt;&lt; 1) ^ POLYNOMIAL;\n        }\n        else\n        {\n            remainder = (remainder &lt;&lt; 1);\n        }\n    }\n    return (remainder);\n\n}\n</code></pre>\n\n<p>but what about byte array ? I found above code on <a href=\"https://barrgroup.com/Embedded-Systems/How-To/CRC-Calculation-C-Code\" rel=\"nofollow noreferrer\">this site</a>, Author also gave the code for byte array where he just XOR'ed current remainder with next byte</p>\n\n<pre><code>remainder ^= (message[byte] &lt;&lt; (WIDTH - 8));\n</code></pre>\n\n<p>I don't quite understand why? why he XOR'ed to get in the next byte into remainder?</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 9, "creation_date": 1500469268, "post_id": 45191362, "comment_id": 77349911, "body": "There is no such thing as &quot;correctly crashing&quot;. - what you have is undefined behaviour."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1500469352, "post_id": 45191362, "comment_id": 77349987, "body": "The compiler should never crash and it is unlikely that it does.  What do you mean by &quot;crashes&quot;?  The addition shouldn&#39;t fail.  However, you are using the function to access out of bounds of the array.  That can lead to the program crashing when run.  Print the addresses to see why disaster ensues."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1500469498, "post_id": 45191362, "comment_id": 77350114, "body": "Is there an &#39;off-by-1&#39; issue?  Without compiling the code I can&#39;t tell, but both versions look like they are trying to access arr[99], which should be available to either function.  If you fill arr with the value of each position (e.g. arr[0]=0, arr[50]=50, arr[99]=99) does it print the correct value?"}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500469507, "post_id": 45191362, "comment_id": 77350120, "body": "thanks Neil, I&#39;ve corrected the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500469527, "post_id": 45191362, "comment_id": 77350129, "body": "You might want to look up the definition of the word &quot;<b>undefined</b>&quot;, like in &quot;undefined behaviour&quot;. Your problem is <b>not</b> the negation! Also don&#39;t spam tags. One language per question, C <b>or</b> C++."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1500469529, "post_id": 45191362, "comment_id": 77350132, "body": "For fullest understanding, it might be important to know whether your code is compiled as 64-bit. Are you using a 64-bit OS? Does the compilation command-line have &quot;-m32&quot;? What is the size of <code>unsigned long</code> and <code>unsigned int</code>? You can <a href=\"https://stackoverflow.com/posts/45191362/edit\">edit</a> your question to mention these details."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1500469628, "post_id": 45191362, "comment_id": 77350209, "body": "I&#39;m wondering whether you understand what unary <code>operator-</code> does to <code>unsigned</code> values. It is well-defined and does not create a negative value."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500469683, "post_id": 45191362, "comment_id": 77350255, "body": "<a href=\"https://stackoverflow.com/q/20649734/440558\">Pointer arithmetic and integral promotion</a> is a related question."}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1500469809, "post_id": 45191362, "comment_id": 77350359, "body": "@anatolyg, is I&#39;m talking about x64"}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500470045, "post_id": 45191362, "comment_id": 77350579, "body": "@Olaf, different compilers emit different results. Both Old-GCC &amp; VC++ will use NEG on both functions."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1500470141, "post_id": 45191362, "comment_id": 77350652, "body": "Are you asking if the compiler is allowed to create a program that doesn&#39;t crash? If so, the answer is always yes. Undefined behavior can do anything, including not crashing."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500470287, "post_id": 45191362, "comment_id": 77350772, "body": "@Tal: That is completely unrelated to my comment."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1500471680, "post_id": 45191362, "comment_id": 77351991, "body": "&quot;loop_back_1() will treat the unsigned long &#39;dist&#39; value as a signed long value.&quot;. No, it won&#39;t. -dist still has the type unsigned long."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1500471855, "post_id": 45191362, "comment_id": 77352155, "body": "At least I&#39;m no longer wondering."}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500471904, "post_id": 45191362, "comment_id": 77352199, "body": "@Art, see <a href=\"https://godbolt.org/g/GbNysd\" rel=\"nofollow noreferrer\">godbolt.org/g/GbNysd</a>"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500472460, "post_id": 45191362, "comment_id": 77352666, "body": "@Tal see <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a> I don&#39;t care what code some specific compiler generates on undefined behavior."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500472516, "post_id": 45191362, "comment_id": 77352723, "body": "@tal besides. that&#39;s a perfectly valid instruction to generate an unsigned long."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500474093, "post_id": 45191362, "comment_id": 77354074, "body": "Rolled back. You are not allowed to edit a question if that leaves an answer without context! Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and take the <a href=\"https://stackoverflow.com/tour\">tour</a> if you are not aware of site-rules."}], "answers": [{"comments": [{"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500470542, "post_id": 45191795, "comment_id": 77351010, "body": "Please ignore the undefined example I&#39;ve supplied. can you explain what is undefined in both  functions when compiled as imported function?  godbolt.org/g/gxNN1W"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500470621, "post_id": 45191795, "comment_id": 77351084, "body": "@Tal adding UINT_MAX to a pointer is undefined unless that pointer points to an array with UINT_MAX elements. Which your pointer doesn&#39;t."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500470725, "post_id": 45191795, "comment_id": 77351174, "body": "@Tal: That question doesn&#39;t make sense. &quot;Undefined Behavior&quot; is a term in the C++ Standard. &quot;Imported function&quot; is not. In general, the Standard defines the term in relation to whole programs given specific inputs, although there is a subset of programs that will exhibit Undefined Behavior regardless of input."}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500472153, "post_id": 45191795, "comment_id": 77352411, "body": "I hope now it clearer I&#39;m not talking about &quot;undefined behaviour&quot;"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 1, "creation_date": 1500472694, "post_id": 45191795, "comment_id": 77352885, "body": "@tal it still is undefined behavior. You are adding X to a pointer to an array with Y elements where X &gt; Y + 1. That is undefined behavior. C11 standard &#167;6.5.6 point 8."}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500472827, "post_id": 45191795, "comment_id": 77353007, "body": "@Art, Thanks, now I got it"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "edited": false, "score": 0, "creation_date": 1500472883, "post_id": 45191795, "comment_id": 77353057, "body": "@Tal: To notice the difference in the two functions, you must use arguments that cause Undefined Behavior. Calling the function with valid arguments (e.g. <code>~0UL</code>) will not lead to a noticeable difference."}, {"owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500539557, "post_id": 45191795, "comment_id": 77384844, "body": "@Art Can you explain why int * behaves differently than char* ? See: <a href=\"https://godbolt.org/g/SzB89A\" rel=\"nofollow noreferrer\">godbolt.org/g/SzB89A</a>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 4, "last_activity_date": 1500471920, "last_edit_date": 1500471920, "creation_date": 1500470197, "answer_id": 45191795, "question_id": 45191362, "link": "https://stackoverflow.com/questions/45191362/decrementing-a-pointer-with-an-unsigned-negative-number/45191795#45191795", "title": "Decrementing a pointer with an unsigned &quot;negative&quot; number", "body": "<p>[Edit] This is the answer to a previous version of the question, which showed the problem in action when calling these functions with argument <code>dist==1</code> </p>\n\n<p><code>-(unsigned long)1</code> is well-defined and wraps around. It's just <code>ULONG_MAX</code>. For the same reason, <code>-(unsigned int)</code> is <code>UINT_MAX</code>.</p>\n\n<p>Pointer arithmetic outside array bounds causes Undefined Behavior, so it's perfectly reasonable for GCC to just ignore the possibility. They can treat an pointer on x64 as just a 64 bit integer with wrap-around, for instance. Adding a 64 bits <code>ULONG_MAX</code> to a 64 bits pointer with wrap-around just decreases the pointer by -1, that's how wrap-around works. Adding a 32 bits <code>UINT_MAX</code> points nowhere near your <code>int[100]</code>. </p>\n\n<p>So, the behavior you see is one completely valid consequence of Undefined Behavior. It however is totally unreliable. An optimizer may know that you can't add more than the maximum number of elements permitted in an array (which for 4 byte ints on a 64 bit platform would be 2^62), and make assumptions from there on.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1500472304, "creation_date": 1500472304, "answer_id": 45192652, "question_id": 45191362, "link": "https://stackoverflow.com/questions/45191362/decrementing-a-pointer-with-an-unsigned-negative-number/45192652#45192652", "title": "Decrementing a pointer with an unsigned &quot;negative&quot; number", "body": "<p>Looking at your \"godbolt\" disassembly, the difference is quite easy. You're compiling for a platform which is natively 64 bits, with <code>unsigned int</code> 32 bits and <code>unsigned long</code> 64 bits. That is to say that math is natively modulo 2^64, which exactly matches matches the behavior of <code>unsigned long</code>. But for <code>unsigned int</code>, one extra instruction is needed. This is a subtle <code>MOV</code> instruction from a 32 bits register to itself (!). The reason for this instruction? It clears the upper 32 bits of the 64 bit result, which is what you need for the \"modulo 2^32\" behavior.</p>\n\n<p>This is efficient, and quite smart. It may give unexpected results for code exhibiting Undefined Behavior, but you shouldn't have expectations for those cases anyway.</p>\n"}], "owner": {"reputation": 1731, "user_id": 11287, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WiS0E.jpg?s=128&g=1", "display_name": "Tal", "link": "https://stackoverflow.com/users/11287/tal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 45191795, "answer_count": 2, "score": -6, "last_activity_date": 1500474034, "creation_date": 1500469081, "last_edit_date": 1500474034, "question_id": 45191362, "link": "https://stackoverflow.com/questions/45191362/decrementing-a-pointer-with-an-unsigned-negative-number", "title": "Decrementing a pointer with an unsigned &quot;negative&quot; number", "body": "<p>The below example should crash when calling look_back_1() or look_back_2().\nReason: when negating an unsigned variable the result should remain unsigned.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint look_back_1(int *arr, unsigned int nmElems, unsigned long dist)\n{\n    int *elem = arr + nmElems;\n    elem += -dist;\n    return (*elem);\n}\n\n\nint look_back_2(int *arr, unsigned int nmElems, unsigned int dist)\n{\n    int *elem = arr + nmElems;\n    elem += -dist;\n    return (*elem);\n}\n\n\nint main(int argc, char **argv)\n{\n    int arr[100] = { 0, };\n    printf(\"1. %d\\n\", look_back_1(arr, 100, 1)); //       &lt;NEEDS TO CRASH, BUT WORKS????&gt;&gt;\n    printf(\"2. %d\\n\", look_back_2(arr, 100, 1)); //       &lt;&lt;CRASH!!!!!&gt;&gt;\n}\n</code></pre>\n\n<p>GCC 4.5 crashes in each function call when doing array out of bound access.\nThe compiler emit the NEG opcode for both cases.</p>\n\n<p>GCC 6.1 or Clang will only crash when calling the int version.\nBut they both avoids crashing when they emit the SUB opcode for the unsigned long version.</p>\n\n<p>Are they allowed to do so?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1500469066, "post_id": 45191304, "comment_id": 77349741, "body": "fscanf(ptr, &quot;%s&quot;, a); this looks like the problem. a is not malloced"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1500469070, "post_id": 45191304, "comment_id": 77349746, "body": "<code>fscanf(ptr, &quot;%s&quot;, a);</code> overwrites random memory. By adding a variable, you happen to change which random memory it stomps on."}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1500469207, "post_id": 45191304, "comment_id": 77349862, "body": "@Art, too bad short answers get autochanged to comments. If you can get your answer to show up in the Answers section, it&#39;ll help keep this question from showing up in the &quot;Unanswered&quot; section forever."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 2, "creation_date": 1500469434, "post_id": 45191304, "comment_id": 77350056, "body": "@CDahn I didn&#39;t bother with a proper answer since this is a &quot;debug this specific instance of my code&quot; question. The answer will never be useful to anyone else."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "edited": false, "score": 0, "creation_date": 1500470717, "post_id": 45191304, "comment_id": 77351171, "body": "@CDahn wait? That happens? Short answers get converted to comments?"}, {"owner": {"reputation": 1654, "user_id": 3652920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qKRou.jpg?s=128&g=1", "display_name": "CDahn", "link": "https://stackoverflow.com/users/3652920/cdahn"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500474644, "post_id": 45191304, "comment_id": 77354526, "body": "@AjayBrahmakshatriya, yes. I&#39;m not sure what the criteria is, but if you give a short, one or two sentence answer, it auto commits it as a comment instead. Super annoying, but I guess it forces you to provide more details in the answer. Sometimes it makes answering very simple questions a bit challenging."}], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 5, "last_activity_date": 1500469257, "creation_date": 1500469257, "answer_id": 45191441, "question_id": 45191304, "link": "https://stackoverflow.com/questions/45191304/segmentation-fault-involving-unused-variable/45191441#45191441", "title": "Segmentation fault involving unused variable", "body": "<blockquote>\n  <p>after printf I still getting seg. fault. </p>\n</blockquote>\n\n<p>Well, segfault can be caused by cause A and get caught only after a while.  </p>\n\n<p>this line: <code>fscanf(ptr, \"%s\", a)</code> is reading string into <code>a</code> without allocating the memory first -> UB.</p>\n\n<p>The UB is invoked only at <code>printf</code>. Fix the <code>a</code> with <code>a=malloc(SOME_SIZE)</code> or <code>char a[SOME_SIZE]</code> and this should go away</p>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1500470643, "post_id": 45191653, "comment_id": 77351110, "body": "<i>use stack-allocated</i> it would be better if you change the wordings to &quot;use arrays with automatic storage duration&quot;."}], "tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1500476557, "last_edit_date": 1500476557, "creation_date": 1500469834, "answer_id": 45191653, "question_id": 45191304, "link": "https://stackoverflow.com/questions/45191304/segmentation-fault-involving-unused-variable/45191653#45191653", "title": "Segmentation fault involving unused variable", "body": "<p>You need to initialize your pointer to char, <code>char *a</code>, by using <code>calloc</code> or <code>malloc</code> functions. Alternatively, use arrays with automatic storage duration like <code>char a[20];</code>.</p>\n\n<p>In your code, you are passing uninitialized pointer into <code>fscanf()</code> meaning effectively that <code>fscanf()</code> is going to overwrite to an <em>undefined area of memory</em>.</p>\n"}], "owner": {"reputation": 63, "user_id": 8327320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cd1b7fb9fcc770bd4153095cd6d11896?s=128&d=identicon&r=PG&f=1", "display_name": "badabum", "link": "https://stackoverflow.com/users/8327320/badabum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1500476557, "creation_date": 1500468972, "last_edit_date": 1500473763, "question_id": 45191304, "link": "https://stackoverflow.com/questions/45191304/segmentation-fault-involving-unused-variable", "title": "Segmentation fault involving unused variable", "body": "<p>So I face a strange problem. When declaring an <code>int</code> that is not subsequently used, I get a segmentation fault. When I remove the declaration, the code runs perfectly. How can this be?</p>\n\n<pre><code>FILE* ptr = fopen(\"prueba.txt\", \"r\");\nint x;\nchar* a;\nint y = 0; //this cause the seg fault. \ndo{\n    while (fscanf(ptr, \"%i\", &amp;x)!=-1){\n        fscanf(ptr, \"%s\", a);\n            printf(\"%i    %s    \",x, a);\n    }\n    fseek(ptr, 0, SEEK_SET);\n}while(1);\n\n\nfclose(ptr);\n}\n</code></pre>\n\n<p>But even if I use it, say with <code>y++;</code>, after <code>printf</code> I am still getting a segmentation fault.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1500468578, "post_id": 45190910, "comment_id": 77349266, "body": "Write your code so that it&#39;s clear what you mean for people who&#39;ll maintain it in the future. If the data in the business logic will always fit in uint8_t, then use uint8_t. It&#39;s clearer and reduces mental load when trying to decode what the code does"}], "answers": [{"tags": [], "owner": {"reputation": 783, "user_id": 406486, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a485e45b7121f0ee50092d54e67dbbb7?s=128&d=identicon&r=PG", "display_name": "Darshan Prajapati", "link": "https://stackoverflow.com/users/406486/darshan-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1500469406, "creation_date": 1500469406, "answer_id": 45191492, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45191492#45191492", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<p>Following are the answers to your questions respectively:</p>\n\n<ul>\n<li>It will not profit, but it will increase the complexity of the code.</li>\n<li>There will be performance effect, but it will be in terms of few machine cycles. You should care for that if you are really writing very much time critical programs like Avionics.</li>\n<li>There is no such best practice for using variable size as per architecture of the CPU. Programs should be designed with the portability in mind rather than CPU specific.</li>\n</ul>\n\n<p>I hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500473153, "post_id": 45191565, "comment_id": 77353300, "body": "Detail: &quot;Both uint8_t and size_t are portable&quot; --&gt; <code>uint8_t</code> is pseudo-optional.  Required on all that can support it (most platforms), but it is not required and does not exist on the remaining few."}], "tags": [], "owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "is_accepted": false, "score": 1, "last_activity_date": 1500469614, "creation_date": 1500469614, "answer_id": 45191565, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45191565#45191565", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<blockquote>\n  <p>Would my application profit in terms of portability if i would use \n  size_t and downcast all variables on the external interface serialization?</p>\n</blockquote>\n\n<p>Both uint8_t and size_t are portable, just use them correctly. If you store a value that will never exceed 8 bits, independetly of the architecture, you can safely use uint8_t. It is guaranteed that it will have the same size on all architectures that support it.</p>\n\n<p>size_t is guaranteed to be be large enough to hold the size of any object. If you need that functionality, then use size_t. However, you cannot make assumptions about size_t's actual size, other than it being at least 16bit.</p>\n\n<blockquote>\n  <p>Are there performance effects using uint8_t or size_t+casting beside\n  the serialization part?</p>\n</blockquote>\n\n<p>The choice of algorithms and good data structures impacts performance, don't worry about the choice of integer types. As this is also dependent on the compiler, the architecure, even the processor, there cannot be a final answer. Make some benchmarks if you are really curious, but I say you won't see any differences.</p>\n\n<blockquote>\n  <p>Is there a best practice regarding choice of variable size for\n  smaller-than-architecture size variables?</p>\n</blockquote>\n\n<p>Yes and no. How would you mesure code quality? Portability, readability, performance, memory needs, ... Everything is dependent on your use case. Best practise for writing portable code is using portable types and not making any assumptions. Comment your code. For some special embedded use cases it might be good to use small types whenever possible to save memory. But again, there cannot be a general answer.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1500470563, "creation_date": 1500470563, "answer_id": 45191948, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45191948#45191948", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<p>Whatever you do, <code>size_t</code> would be a bad choice to store some data that would fit into 8 bits. There are platforms where <code>size_t</code> is larger than the machine's <em>natural word size</em>.</p>\n\n<p>In the general case, I would recommend to use (<code>unsigned</code>)<code>int</code>. Although this is not guaranteed, most of the time you will get the best performance this way. It could be a bad choice on an 8bit \u00b5c for example, because <code>int</code> must have at least 16 bits. But in the general case, it's a good choice.</p>\n\n<p>If your concern is memory consumption (e.g. you have huge arrays of data, but all single values would fit into an <code>uint8_t</code>), <strong>then</strong> you should use <code>uint8_t</code> instead.</p>\n\n<p>Of course it's not possible to give a <strong>definitive</strong> answer here. If you decide to use <code>unsigned int</code>, but have to (de-)serialize very often, this could cost you more than just using <code>uint8_t</code> throughout the entire program. If in doubt, try both implementations (using <code>typedef</code>s and conditional compilation) and <em>measure</em> performance.</p>\n"}, {"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1500472479, "post_id": 45192460, "comment_id": 77352692, "body": "I was about to mention them, so the upvote... But you should add that they aim to improve perfs at a possible cost in used memory."}], "tags": [], "owner": {"reputation": 2887, "user_id": 2422450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c899826b7012b67268ee1899b40419?s=128&d=identicon&r=PG", "display_name": "Lanting", "link": "https://stackoverflow.com/users/2422450/lanting"}, "is_accepted": false, "score": 1, "last_activity_date": 1500471803, "creation_date": 1500471803, "answer_id": 45192460, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45192460#45192460", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<p>I'm surprised nobody mentioned the <a href=\"http://www.cplusplus.com/reference/cstdint/\" rel=\"nofollow noreferrer\">fast types</a> yet.</p>\n\n<p><code>int_fast8_t</code>n <code>uint_fast8_t</code> <code>int_fast16_t</code> etc. provide integer type definitions that are at least as fast as any other integer type on the target with at least the specified width.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1500474334, "last_edit_date": 1500474334, "creation_date": 1500474005, "answer_id": 45193376, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45193376#45193376", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<blockquote>\n  <p>Is choosing smaller-than-architecture size variables a valid choice?</p>\n</blockquote>\n\n<p>Yes.  Use selectively.</p>\n\n<blockquote>\n  <p>Would my application profit in terms of portability if i would use <code>size_t</code> and downcast all variables on the external interface serialization?</p>\n</blockquote>\n\n<p>No. Use <code>size_t</code> to index arrays and size calculations, not general integer math.  Its range varies by platform.  </p>\n\n<blockquote>\n  <p>Are there performance effects using <code>uint8_t</code> or <code>size_t</code> +casting beside the  serialization part?</p>\n</blockquote>\n\n<p>Avoid casting unless needed.  Using <code>uint8_t</code> has a significant plus in that there is no byte endian issue.  Other specific performance serialization issues exist for the unposted code, yet need to see that.</p>\n\n<blockquote>\n  <p>Is there a best practice regarding choice of variable size for smaller-than-architecture size variables?</p>\n</blockquote>\n\n<p>For <em>arrays</em> of data, using the smallest type that encodes the entire range needed is good.</p>\n\n<p>For reading/writing binary files, use explicit types such a <code>uint8_t, int32_t</code> that match the file format.</p>\n\n<p>For explicit algorithms that oblige a specific width type, use <code>uint8_t, int16_t, etc.</code></p>\n\n<p>Else, coding for clarity is the major concern.  <a href=\"https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice/45193376#comment77349266_45190910\">@Art</a></p>\n\n<hr>\n\n<p>Using smaller than <code>int/unsigned</code> brings in unexpected and often subtle promotions/math effects.  There are best avoided and used when there is 1) a requirement 2) <em>significant</em> space concern.</p>\n\n<p><code>int/unsigned</code> tend to be the optimal type for a platforms speed.  Use <code>fast</code> types <a href=\"https://stackoverflow.com/a/45192460/2410359\">@Lanting</a> for select critical code. </p>\n"}], "owner": {"reputation": 157, "user_id": 4039207, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed35267961546abaae338b80f713747?s=128&d=identicon&r=PG&f=1", "display_name": "user259819", "link": "https://stackoverflow.com/users/4039207/user259819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 45193376, "answer_count": 5, "score": 1, "last_activity_date": 1500474334, "creation_date": 1500467986, "question_id": 45190910, "link": "https://stackoverflow.com/questions/45190910/is-choosing-smaller-than-architecture-size-variables-a-valid-choice", "title": "Is choosing smaller-than-architecture size variables a valid choice?", "body": "<p>I need some advice.</p>\n\n<p>Situation:</p>\n\n<ul>\n<li>I'm developing an ANSI C application on an 32 bit architecture. </li>\n<li>Most variables of my business logic fit into uint8_t by design.</li>\n<li>Most variables have to be send in messages as uint8_t data segments</li>\n<li>I do not use struct packing</li>\n</ul>\n\n<p>Questions: </p>\n\n<ul>\n<li>Would my application profit in terms of portability if i would use size_t and downcast all variables on the external interface serialization?</li>\n<li>Are there performance effects using uint8_t or size_t+casting beside the serialization part?</li>\n<li>Is there a best practice regarding choice of variable size for smaller-than-architecture size variables?</li>\n</ul>\n\n<p>Kind regards</p>\n"}, {"tags": ["c", "rfid", "spi", "contiki"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500467968, "post_id": 45190515, "comment_id": 77348748, "body": "Never use a macro a function will do as well! And we don&#39;t even know the hardware is correct, less what the devices are expected to transmit. Use the debugger and a scope or logic analyser."}, {"owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500468201, "post_id": 45190515, "comment_id": 77348935, "body": "@Olaf could you advice me a debugger for that?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500468477, "post_id": 45190515, "comment_id": 77349174, "body": "Asking about tools is explicitly off-topic. But you should use the debugger which comes with your toolchain or one that is sutable for it. For a scope/LA see google."}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "edited": false, "score": 0, "creation_date": 1501058723, "post_id": 45216568, "comment_id": 77605462, "body": "I deleted all <code>printf();</code> changes in macro"}], "tags": [], "owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "is_accepted": true, "score": 0, "last_activity_date": 1501058657, "last_edit_date": 1501058657, "creation_date": 1500558245, "answer_id": 45216568, "question_id": 45190515, "link": "https://stackoverflow.com/questions/45190515/getting-noice-before-the-right-byte-comes-spi-rfid/45216568#45216568", "title": "Getting noice before the right byte comes SPI RFID", "body": "<p>Here I shared updated functions for reading and writing to RC522 using SPI library:</p>\n\n<pre><code>void\nwriteMFRC522(uint8_t adr, uint8_t val)\n{\n  GPIO_CLR_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  GPIO_CLR_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  SPI_WRITE((adr &lt;&lt; 1) &amp; 0x7e);\n  SPI_WRITE(val);\n  SPI_FLUSH();\n  //printf(\"456\\n\");\n  GPIO_SET_PIN(GPIO_C_BASE, GPIO_PIN_1);\n}\n\n\nstatic uint8_t\nreadMFRC522(uint8_t dev_cmd)\n{\n  uint8_t ret = 0x0;\n  GPIO_CLR_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  GPIO_CLR_PIN(GPIO_C_BASE, GPIO_PIN_1);\n\n  SPI_WRITE(((dev_cmd &lt;&lt; 1) &amp; 0x7e) | 0x80);\n  SPI_READ(ret);\n\n  ret = 0;\n  SPI_WRITE(0x00);\n  SPI_READ(ret);\n\n  GPIO_SET_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 45216568, "answer_count": 1, "score": -1, "last_activity_date": 1597613229, "creation_date": 1500467018, "last_edit_date": 1597613229, "question_id": 45190515, "link": "https://stackoverflow.com/questions/45190515/getting-noice-before-the-right-byte-comes-spi-rfid", "title": "Getting noice before the right byte comes SPI RFID", "body": "<p>I try to read byte from RFID which represents version number of the device. Using SPI protocol I get 0x92 byte (RC522 Version 2.0), and request byte is 0x37. Everything works well except the positions of the byte. Before I get the right one (0x92) as was planned to get  which I do not know why it is printed. The output:</p>\n\n<pre><code>     Hello, world\nreceived: 1\nreceived: 92\n = v2.0\nreceived: 0\nreceived: 92\n = v2.0\nreceived: 0\nreceived: 92\n = v2.0\nreceived: 0\nreceived: 92\n = v2.0\nreceived: 0\nreceived: 92\n = v2.0\n</code></pre>\n\n<p>I said, well Ok, let me just delete the <code>printf(\"received: %x\\n\", data); \\\n</code> linefrom the SPI.h library. But then I get nothing printed (except Hello World). Another function which should print only <code>\"version 2.0\"</code> when 92h returned won't do that, why- because the <code>v</code> variable returned is <code>9f</code> instead of <code>92</code> and all previous are different.</p>\n\n<pre><code>#define SPI_READ(data) \\\n  do { \\\n    SPI_TXBUF = 0; \\\n    SPI_WAITFOREORx(); \\\n    data = SPI_RXBUF; \\\n    printf(\"received: %x\\n\", data); \\\n  } while(0)\n</code></pre>\n\n<p>Maybe I should place some wait or delay like function in order to let the RC522 to execute the command? And right after let it print. But even if that would happened, why the <code>printf</code> deletion breaks the whole output? Here is the code where SPI_READ is in called from:</p>\n\n<pre><code>static uint8_t\nread_register_rfid(uint8_t dev_cmd)\n{\n  uint8_t ret = 0;\n  GPIO_CLR_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  SPI_WRITE(((dev_cmd &lt;&lt; 1) &amp; 0x7e) | 0x80);\n  SPI_READ(ret);\n  GPIO_SET_PIN(GPIO_C_BASE, GPIO_PIN_1);\n  return ret;\n}\n</code></pre>\n\n<p>and the  function of checking the version:</p>\n\n<pre><code>void\ntest_ver()\n{\n    uint8_t reg=1;\n  // Get the MFRC522 firmware version\n  uint8_t v = 0;\n  while(reg!=0xa){\n    v = read_register_rfid(0x37);\n    //printf(\"%x\\n\", v);\n    // Lookup which version\n    switch(v) {\n      case 0x88: printf(\" = (clone)\");  break;\n      case 0x90: printf(\" = v0.0\");     break;\n      case 0x91: printf(\" = v1.0\");     break;\n      case 0x92: printf(\" = v2.0\\n\");     break;\n      // default:   printf(\" = (unknown)\\n\");\n    }\n    reg++;\n  //When 0x00 or 0xFF is returned, communication probably failed\n  }\n  if ((v == 0x00) || (v == 0xFF))\n  printf(\"WARNING: Communication failure?\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "client-server", "fork", "tcpclient"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1500468953, "post_id": 45190328, "comment_id": 77349643, "body": "Yes.  That looks correct and the reasoning is sound."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500471057, "post_id": 45190328, "comment_id": 77351441, "body": "@JonathanLeffler umm... quick question - so when / where does the parent process close <code>socket_fd</code>?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500471091, "post_id": 45190328, "comment_id": 77351472, "body": "@JonathanLeffler before the child closes the <code>socket_fd</code> is the bound port mapped to both the PIDs? If there is a incoming packet, whose queue will it be put into?"}, {"owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "reply_to_user": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1500471204, "post_id": 45190328, "comment_id": 77351554, "body": "@babon In this case since it&#39;s an endless loop, never. The server will always be listening for up to N connections defined in listen(socket_fd, N)."}, {"owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500471241, "post_id": 45190328, "comment_id": 77351585, "body": "@AjayBrahmakshatriya to the parent&#39;s one I assume"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500471332, "post_id": 45190328, "comment_id": 77351665, "body": "@Matteo if that is the case, the same should also happen for the packets for the <code>new_socket_fd</code> since both have it open. This means that the child won&#39;t be able to read the packets until the parent closes it. This can lead to race conditions."}, {"owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500471813, "post_id": 45190328, "comment_id": 77352107, "body": "@AjayBrahmakshatriya But file descriptor shouldn&#39;t intefere betweeen parent and child, that&#39;s why closing socket_fd on the child side doesn&#39;t stop the parent from listening"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1500471881, "post_id": 45190328, "comment_id": 77352171, "body": "@Matteo Agreed. But I think you should close <code>socket_fd</code> after the <code>while</code> loop. In case tomorrow you change the loop to break for some condition you run the risk of keeping an open socket for no reason."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500472018, "post_id": 45190328, "comment_id": 77352301, "body": "@Matteo both the file descriptors in the parent and child are different. So closing one should not affect the other. But both the copies have the same (src-ip, src-port, dest-ip, dest-port) 4-tuple and so where would a packet with such a header go?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500472196, "post_id": 45190328, "comment_id": 77352446, "body": "The parent closes the <code>socket_fd</code> when it exits the loop or has been told to stop listening on the socket.  There&#39;s no real provision for that in the code shown, so it will be closed when the parent process is killed (or a fork failure occurs).  The whole point is that the listening socket can be used for many connections \u2014 you don&#39;t want to close it in the parent until you&#39;ve finished listening."}, {"owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500472440, "post_id": 45190328, "comment_id": 77352650, "body": "@AjayBrahmakshatriya In my example accept_client creates the sockaddr struct for the client, so the 4-tuple goes to child&#39;s new_socket_fd"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1500473795, "post_id": 45190328, "comment_id": 77353847, "body": "Note that the <code>N</code> parameter in the <code>listen()</code> call is the number of outstanding connections that can be queued for the listening process.  That is, the number of connection requests that have not yet returned a value via the <code>accept()</code> call.  It is not a limit on the number of connections that can be active concurrently after the <code>accept()</code> has accepted the connection."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1500474515, "post_id": 45190328, "comment_id": 77354427, "body": "@AjayBrahmakshatriya: <i>before the child closes the socket_fd is the bound port mapped to both the PIDs? If there is a incoming packet, whose queue will it be put into?</i> The incoming packet is associated with the socket&#39;s &#39;open file description&#39; (or equivalent \u2014 as distinct from &#39;file descriptor&#39; or &#39;socket descriptor&#39;). It is available to either parent or child, whichever reads it first. Similarly, incoming connection requests are queued on the <code>socket_fd</code>; they could be accepted by either parent or child. However, the family has agreed who does what so they don&#39;t get in each other&#39;s way."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500474933, "post_id": 45190328, "comment_id": 77354765, "body": "@JonathanLeffler Ah! Whoever reads it first makes sense. Following this question I checked some other questions and some answer mentioned that the socket would be unusable to both. Hence the confusion. Thanks for clarifying."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500476492, "post_id": 45190328, "comment_id": 77356077, "body": "@AjayBrahmakshatriya: Do you want to identify the question(s) that led to the confusion?  Maybe they need some fix-up work \u2014 a new answer, or some comments clarifying what is said, or something similar."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500476944, "post_id": 45190328, "comment_id": 77356427, "body": "@JonathanLeffler I was referring to <a href=\"https://stackoverflow.com/a/19319981/2858773\">this</a> answer. But now that I read it again, it is about listening to the port and not reading."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500477293, "post_id": 45190328, "comment_id": 77356698, "body": "@AjayBrahmakshatriya: I&#39;ve added a comment dissenting from what that answer says.  It was written years ago; it may take a while for the OP to do anything about it \u2014 if they ever do anything about it."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500477563, "post_id": 45190328, "comment_id": 77356903, "body": "@JonathanLeffler actually the context of that question is different. The OP there is forking and then closing the socket in the parent (for unrelated reasons) and then trying to listen again (to resume the service) but is unable to do so because the port is already bound in the child. The answer uses the word listen not accept. So maybe it is correct. The child process holding a copy of the socket is disallowing the parent to listen again."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500477636, "post_id": 45190328, "comment_id": 77356969, "body": "@AjayBrahmakshatriya: OK; I&#39;ll go back and have another look.  If you&#39;re correct (and I&#39;ve no reason to think not), then I&#39;m glad I didn&#39;t down-vote.  That would be adding insult to injury. <i>[\u2026time passes\u2026]</i> I&#39;ve removed my comment.  Although it isn&#39;t mentioned, the error is probably EADDRINUSE, because the address is in use.  And the parent/daemon design is faulty."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500477816, "post_id": 45190328, "comment_id": 77357108, "body": "@JonathanLeffler Ah Yes! and the SO rule about not being able to un downvote after 5 mins unless an edit is made is a pain sometimes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500477942, "post_id": 45190328, "comment_id": 77357211, "body": "@AjayBrahmakshatriya: One advantage of lots of rep is that you can edit without troubling the review queues, so you can un-down-vote.  Not a desirable thing, but it does get you out of a fix on occasion.  I&#39;m just a (very) cautious down-voter.  I seldom down-vote."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500478496, "post_id": 45190328, "comment_id": 77357654, "body": "@JonathanLeffler Yes, I would avoid that too. Anyway, thanks for taking time to answer all queries."}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "edited": false, "score": 1, "creation_date": 1500476893, "post_id": 45194246, "comment_id": 77356390, "body": "&quot;The packet is available to both processes via the file descriptor. When a process closes the file descriptor, it can no longer access the information sent to connection (or send data on that connection, of course). Until then, it is a lottery who sees what unless the participant processes agree on which one reads the data and which one listens for connections&quot; That&#39;s the main point I think, also other answers on the topic point out the problem of zombies, so I&#39;ll take a look about later on. Thanks for the recap."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1500476580, "last_edit_date": 1500476580, "creation_date": 1500476131, "answer_id": 45194246, "question_id": 45190328, "link": "https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork/45194246#45194246", "title": "Is this the correct way to close socket descriptors on fork?", "body": "<p><sup><em>Converting the comment stream into an answer.</em></sup></p>\n\n<h3>TL; DR</h3>\n\n<p>Yes. The description in the question looks correct and the reasoning is sound.</p>\n\n<p>At some point, your parent process should wait for child processes that have died to prevent the accumulation of zombies (but it shouldn't block until a child dies).  Using <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html\" rel=\"nofollow noreferrer\"><code>waitpid()</code></a> in a loop with the <code>WNOHANG</code> argument is probably appropriate, in the portion of the loop where the parent closes the <code>new_socket_fd</code>.  This could leave one or more zombies around until the next incoming request is made.  If that's a problem, you could ignore <code>SIGCHLD</code> (so zombies are never created), or you could arrange a periodic wake-up during which the parent process checks for zombies.</p>\n\n<h3>Discussion</h3>\n\n<p><a href=\"https://stackoverflow.com/users/4845636/babon\">babon</a> <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77351441_45190328\">asked</a></p>\n\n<blockquote>\n  <p>Quick question - so when / where does the parent process close socket_fd?</p>\n</blockquote>\n\n<p>The parent closes the <code>socket_fd</code> when it exits the loop or has been told to stop listening on the socket. There's no real provision for that in the code shown, so it will be closed when the parent process is killed (or a fork failure occurs). The whole point is that the listening socket can be used for many connections \u2014 you don't want to close it in the parent until you've finished listening.</p>\n\n<p><a href=\"https://stackoverflow.com/users/5238305/matteo\">Matteo</a> <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77351554_45190328\">noted</a></p>\n\n<blockquote>\n  <p>In this case since it's an endless loop, never. The server will always be listening for up to N connections defined in <code>listen(socket_fd, N)</code>.</p>\n</blockquote>\n\n<p>Note that the N parameter in the <code>listen()</code> call is the number of outstanding connections that can be queued for the listening process. That is, the number of connection requests that have not yet returned a value via the <code>accept()</code> call. It is not a limit on the number of connections that can be active concurrently after the <code>accept()</code> has accepted the connection.</p>\n\n<p><a href=\"https://stackoverflow.com/users/2858773/ajay-brahmakshatriya\">Ajay Brahmakshatriya</a> <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77351472_45190328\">asked</a></p>\n\n<blockquote>\n  <p>Before the child closes the <code>socket_fd</code>, is the bound port mapped to both the PIDs? If there is a incoming packet, whose queue will it be put into?</p>\n</blockquote>\n\n<p>The incoming packet is associated with the socket's 'open file description' (or equivalent \u2014 as distinct from 'file descriptor' or 'socket descriptor'). It is available to either parent or child, whichever reads it first. Similarly, incoming connection requests are queued on the <code>socket_fd</code>; they could be accepted by either parent or child. However, the family has agreed who does what so they don't get in each other's way.</p>\n\n<p>Matteo <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77351585_45190328\">commented</a></p>\n\n<blockquote>\n  <p>To the parent's one I assume.</p>\n</blockquote>\n\n<p>Ajay <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77351665_45190328\">responded</a>    </p>\n\n<blockquote>\n  <p>If that is the case, the same should also happen for the packets for the <code>new_socket_fd</code> since both have it open. This means that the child won't be able to read the packets until the parent closes it. This can lead to race conditions.</p>\n</blockquote>\n\n<p>This is based on a misunderstanding.  The packet is available to both processes via the file descriptor.  When a process closes the file descriptor, it can no longer access the information sent to connection (or send data on that connection, of course).  Until then, it is a lottery who sees what unless the participant processes agree on which one reads the data and which one listens for connections</p>\n\n<p>Matteo <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77352107_45190328\">responded</a></p>\n\n<blockquote>\n  <p>But file descriptor shouldn't interfere between parent and child; that's why closing <code>socket_fd</code> on the child side doesn't stop the parent from listening.</p>\n</blockquote>\n\n<p>babon <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77352171_45190328\">commented</a></p>\n\n<blockquote>\n  <p>Agreed. But I think you should close <code>socket_fd</code> after the while loop. In case tomorrow you change the loop to break for some condition you run the risk of keeping an open socket for no reason.</p>\n</blockquote>\n\n<p>This is good practice, but the loop doesn't exit (it is a <code>while (1)</code> loop, and the failure mode does a <code>return</code> out of the loop \u2014 it could close the socket before doing that <code>return</code>).  And if the program exits, then the system closes the socket, so it isn't crucial, for all it is good housekeeping to close what you open.</p>\n\n<p>Ajay <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77352301_45190328\">notes</a></p>\n\n<blockquote>\n  <p>Both the file descriptors in the parent and child are different. So closing one should not affect the other. But both the copies have the same (src-ip, src-port, dest-ip, dest-port) 4-tuple and so where would a packet with such a header go?</p>\n</blockquote>\n\n<p>The descriptors are different, but the socket connection they refer to is the same.  The packet is available to any process that reads it \u2014 parent or child.</p>\n\n<p>Matteo <a href=\"https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork?noredirect=1#comment77352650_45190328\">responded</a></p>\n\n<blockquote>\n  <p>In my example <code>accept_client</code> creates the <code>sockaddr</code> struct for the client, so the 4-tuple goes to child's <code>new_socket_fd</code>.</p>\n</blockquote>\n\n<p>This isn't quite accurate.  First, <code>accept_client()</code> is called before there is a child; the <code>new_socket_fd</code> is in the parent (only) when that function completes.  Second, after the <code>fork()</code>, both processes have access to the <code>new_socket_fd</code>, and either could read the data sent by the client process.  However, the program is designed so that the server goes back to listening for more connection requests while the child processes the incoming connection on <code>new_socket_fd</code> \u2014 a sensible division of labour.</p>\n\n<p>Note that it would be permissible to have the parent process the request and the child continue listening.  However, this is contrary to convention.  It would mean that the 'daemon' process listening changes PID on each connection request, making it hard to determine which process is currently listening on the socket.  The conventional approach used in the code is that the daemon process remains the same over long periods of time, making it sensible to record the PID for later process control (killing the daemon when it isn't needed any more).</p>\n"}], "owner": {"reputation": 383, "user_id": 5238305, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3bQUj.jpg?s=128&g=1", "display_name": "Matteo", "link": "https://stackoverflow.com/users/5238305/matteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1136, "favorite_count": 3, "accepted_answer_id": 45194246, "answer_count": 1, "score": 2, "last_activity_date": 1500476580, "creation_date": 1500466634, "last_edit_date": 1500473404, "question_id": 45190328, "link": "https://stackoverflow.com/questions/45190328/is-this-the-correct-way-to-close-socket-descriptors-on-fork", "title": "Is this the correct way to close socket descriptors on fork?", "body": "<p>Consider this code:</p>\n\n<pre><code>socket_fd = start_server(port);\n\nwhile (1){\n\n    new_socket_fd = accept_client(socket_fd);\n\n    int pid = fork();\n\n    if (pid == 0){\n\n        //I am the child server process\n\n        close(socket_fd);      &lt;------(1)\n\n        do_stuff_with_client(new_socket_fd, buffer);\n\n        close(new_socket_fd);       &lt;------(2)\n\n        exit(0);\n\n    } else if (pid &gt; 0){\n\n        //I am the parent server process\n\n        close(new_socket_fd);      &lt;------(3)\n\n    } else {\n\n        fprintf(stderr, \"Fork error\\n\");\n        return 1;\n    }\n}\n</code></pre>\n\n<p>From what I understand, when a process calls fork(), its address space is duplicated but not shared, so if I change variables or close file descriptors from child's process, it doesn't affect the parent.</p>\n\n<p>That said, after the server has accepted a new connection (thus creating <code>new_socket_fd</code>) it forks itself, and the child closes <code>socket_fd</code> (1) because it's not required since the parent is still listening at its <code>socket_fd</code>. </p>\n\n<p>The child processes the requests and then closes its <code>new_socket_fd</code> (2) and exits.</p>\n\n<p>While the child is doing all of these, the parent process has already closed <code>new_socket_fd</code> (3) since the connection is being handled by the child.</p>\n\n<p>The question is: are these assumptions right? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1500466106, "post_id": 45190034, "comment_id": 77347218, "body": "Take a look at <a href=\"https://stackoverflow.com/a/30345939/4265352\">this answer</a>. It explains how to read the C variables and types declarations."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500466110, "post_id": 45190034, "comment_id": 77347221, "body": "The typedef is immaterial. That&#39;s how you define variables of the type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1500466638, "post_id": 45190034, "comment_id": 77347632, "body": "@StoryTeller this is not an exact duplicate, it asks about the declaration syntax for function pointers, not about <i>typedef</i> declarations."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500466788, "post_id": 45190034, "comment_id": 77347769, "body": "@FelixPalmen - The syntax for a typedef is exactly the same as for a variable by definition. The reason for the variable syntax is in the dupe. Hanging on to the typedef is a nit-pick to keep an already answered question open."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500466830, "post_id": 45190034, "comment_id": 77347805, "body": "@StoryTeller &quot;<i>The syntax for a typedef is exactly the same as for a variable by definition</i>&quot; &lt;- and this is an answer to <b>this</b> question. No, not a &quot;<i>nitpick</i>&quot;."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500466867, "post_id": 45190034, "comment_id": 77347837, "body": "@FelixPalmen - Let&#39;s not act coy. This does not answer what the OP isn&#39;t clear about."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500466967, "post_id": 45190034, "comment_id": 77347946, "body": "@StoryTeller I suggest to re-read the question. It starts with &quot;<i>If I wanted to declare a <code>typedef</code></i>&quot;. This question is about the syntax of typedefs. I wouldn&#39;t be surprised to see a duplicate at all, as it&#39;s a very basic question. Still, the linked question is not a duplicate."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500467155, "post_id": 45190034, "comment_id": 77348113, "body": "@FelixPalmen - I suggest you re-read the question yourself. You didn&#39;t focus on the OP&#39;s actual confusion which is why his attempt failed. Your answer only adds it as an afterthought. Instead you seem adamant to focus on a superficial difference to keep this question open. Note the close bar also reads &quot;<b>This question already has an answer here:</b>&quot;. No need for a 100% exact dupe. But this arguing is pointless. You voted to re-open, let&#39;s see if more in the community agree."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1500467284, "post_id": 45190034, "comment_id": 77348205, "body": "@bite-bites if you put <code>typedef</code> in front of a variable declaration it turns into a type declaration. The name of the variable becomes the name of a new type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500468526, "post_id": 45190034, "comment_id": 77349228, "body": "@StoryTeller this is not about the question being opened or closed, I don&#39;t care. The issue is that the duplicate doesn&#39;t answer the question. The second one is slightly better, as one of the answers mentions what is the key issue here, still not a perfect choice."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500468725, "post_id": 45190034, "comment_id": 77349421, "body": "@FelixPalmen - It does answer the core issue. The chasm between how you and I see the subject of the question is obviously too deep to bridge. But I re-iterate, if 4 other people (or one C gold badge person) agree with you, this will re-open. Trust the process."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500469008, "post_id": 45190034, "comment_id": 77349693, "body": "@StoryTeller if you look at the comment posted below my answer, it is even more clear that this question was about the syntax of <code>typedef</code>. You can correct that mistake or leave it. This question isn&#39;t important enough to get a lot of reviews, it would just be nice not to have misleading duplicates."}, {"owner": {"reputation": 1325, "user_id": 8055063, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fUn28.png?s=128&g=1", "display_name": "Bite Bytes", "link": "https://stackoverflow.com/users/8055063/bite-bytes"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500469020, "post_id": 45190034, "comment_id": 77349707, "body": "@StoryTeller the process is not really the best, some people got their reputations by giving only <i>opinions</i>, in the old days. If the same rules of today applied to them, their accounts would be deleted, and not given golden badges."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500469166, "post_id": 45190034, "comment_id": 77349816, "body": "@BiteBytes - How about you clarify what it is that isn&#39;t clear for you. You didn&#39;t accept Felix&#39;s answer, so it obviously doesn&#39;t  answer your question. And if the question is about why the function pointer syntax is weird, there are two dupes. Read them carefully instead of disparaging them."}], "answers": [{"comments": [{"owner": {"reputation": 1325, "user_id": 8055063, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fUn28.png?s=128&g=1", "display_name": "Bite Bytes", "link": "https://stackoverflow.com/users/8055063/bite-bytes"}, "edited": false, "score": 0, "creation_date": 1500467548, "post_id": 45190167, "comment_id": 77348399, "body": "So, the rule is not the following:   If I have a type called Type I can create a typedef called Name using <code>typedef Type Name</code>.   But the rule instead, is:   If have a declaration like this <i>declarator name</i> I can turn name to typedef by forwarding the delcarator by the keyword <code>typedef</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 1325, "user_id": 8055063, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fUn28.png?s=128&g=1", "display_name": "Bite Bytes", "link": "https://stackoverflow.com/users/8055063/bite-bytes"}, "edited": false, "score": 0, "creation_date": 1500468185, "post_id": 45190167, "comment_id": 77348920, "body": "@BiteBytes yes. PeterJ&#39;s answer shows how this applies to typedef&#39;ing an array type."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 1325, "user_id": 8055063, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fUn28.png?s=128&g=1", "display_name": "Bite Bytes", "link": "https://stackoverflow.com/users/8055063/bite-bytes"}, "edited": false, "score": 2, "creation_date": 1500468581, "post_id": 45190167, "comment_id": 77349273, "body": "@BiteBytes: Syntactically speaking, <code>typedef</code> is treated as a storage class specifier like <code>auto</code> or <code>extern</code>, even though it has a different meaning.  So yes, the form of a <code>typedef</code> is the form of a regular declaration, just with the <code>typedef</code> keyword prepended to it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 6, "last_activity_date": 1500466257, "creation_date": 1500466257, "answer_id": 45190167, "question_id": 45190034, "link": "https://stackoverflow.com/questions/45190034/function-pointers-using-typedef-in-c/45190167#45190167", "title": "Function Pointers Using typedef in C", "body": "<p>A <code>typedef</code> looks exactly like a \"<em>normal</em>\" declaration. If you declare a function pointer, it would look like this:</p>\n\n<pre><code>void (*myfunc)(int, char);\n</code></pre>\n\n<p>So, the <code>typedef</code> looks the same, with the only difference that the declared identifier doesn't refer to an object of the type, but to a <em>type alias name</em> instead:</p>\n\n<pre><code>typedef void (*myfunc)(int, char);\n</code></pre>\n\n<hr>\n\n<p>As for the \"<em>why?</em>\" -- Well, because the language is designed that way, but I guess once you understand how it works, it's arguably the easiest way not to introduce a different syntax for <code>typedef</code> declarations. This design is following the principle of least surprise, treating <code>typedef</code> declarations somehow differently would be needlessly complicated.</p>\n"}, {"tags": [], "owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1500466406, "creation_date": 1500466406, "answer_id": 45190239, "question_id": 45190034, "link": "https://stackoverflow.com/questions/45190034/function-pointers-using-typedef-in-c/45190239#45190239", "title": "Function Pointers Using typedef in C", "body": "<p>The basic way to create function pointer is <code>void (*myfunc)(int, char);</code> <br></p>\n\n<p>So to create a new type that is a function pointer which returns <code>void</code> and get <code>int</code> and <code>char</code> as argument is\n<code>typedef void (*myfunc)(int, char);</code> <br></p>\n\n<p>that is why the first one is incorrect</p>\n\n<p>There is no need of adding <code>(*)</code> before <code>function pointer</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1500466723, "creation_date": 1500466723, "answer_id": 45190371, "question_id": 45190034, "link": "https://stackoverflow.com/questions/45190034/function-pointers-using-typedef-in-c/45190371#45190371", "title": "Function Pointers Using typedef in C", "body": "<blockquote>\n  <p>But when I wanted to create a typedef for a function, I was expecting\n  the following syntax to be the one: </p>\n  \n  <p><code>typedef void (*)(int, char) myfunc;</code></p>\n</blockquote>\n\n<p>You can of course write you own compiler of your own language.</p>\n\n<p>But C syntax is like this.</p>\n\n<p>Here is the another example:</p>\n\n<pre><code>typedef char foo[10];\n</code></pre>\n"}], "owner": {"reputation": 1325, "user_id": 8055063, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/fUn28.png?s=128&g=1", "display_name": "Bite Bytes", "link": "https://stackoverflow.com/users/8055063/bite-bytes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "closed_date": 1500466422, "accepted_answer_id": 45190167, "answer_count": 3, "score": 1, "last_activity_date": 1500467708, "creation_date": 1500465927, "question_id": 45190034, "link": "https://stackoverflow.com/questions/45190034/function-pointers-using-typedef-in-c", "closed_reason": "Duplicate", "title": "Function Pointers Using typedef in C", "body": "<p>If I wanted to declare a <code>typedef</code> for a certain type, I would go for a syntax like this one, in this example:  </p>\n\n<pre><code>typedef int INT\n</code></pre>\n\n<p>But when I wanted to create a <code>typedef</code> for a function, I was expecting the following syntax to be the one:  </p>\n\n<pre><code>typedef void (*)(int, char) myfunc;\n</code></pre>\n\n<p>Instead the correct one is:  </p>\n\n<pre><code>typedef void (*myfunc)(int, char);\n</code></pre>\n\n<p>So why the first one is not correct?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1500465893, "post_id": 45189855, "comment_id": 77347052, "body": "2. is a function that takes a function pointer, 4. is a function that returns a function pointer"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500468369, "post_id": 45189855, "comment_id": 77349074, "body": "We are not a tutoring service. Your question is too broad. A good C book will help."}, {"owner": {"reputation": 131, "user_id": 4309211, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-rn-SqO0k5SY/AAAAAAAAAAI/AAAAAAAAAQc/uihnXrq5ZmE/photo.jpg?sz=128", "display_name": "R1S8K", "link": "https://stackoverflow.com/users/4309211/r1s8k"}, "edited": false, "score": 0, "creation_date": 1500473028, "post_id": 45189855, "comment_id": 77353187, "body": "OK, sorry I&#39;m actually got to function pointers is because of the function pointers I found in AVR twi library which wrapped in wire library for Arduino, so those function pointers are still not clear to me and want to understand what are the function callbacks for an interest of event."}, {"owner": {"reputation": 131, "user_id": 4309211, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-rn-SqO0k5SY/AAAAAAAAAAI/AAAAAAAAAQc/uihnXrq5ZmE/photo.jpg?sz=128", "display_name": "R1S8K", "link": "https://stackoverflow.com/users/4309211/r1s8k"}, "edited": false, "score": 0, "creation_date": 1500473077, "post_id": 45189855, "comment_id": 77353248, "body": "Let me try to change the topic to function callbacks for C library in conjunction with C++ library."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500466117, "post_id": 45190089, "comment_id": 77347227, "body": "UV&#39;d, the <code>typedef</code> here is indeed good practice to keep this kind of code <i>somewhat</i> readable for humans ;)"}, {"owner": {"reputation": 131, "user_id": 4309211, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-rn-SqO0k5SY/AAAAAAAAAAI/AAAAAAAAAQc/uihnXrq5ZmE/photo.jpg?sz=128", "display_name": "R1S8K", "link": "https://stackoverflow.com/users/4309211/r1s8k"}, "edited": false, "score": 0, "creation_date": 1500467487, "post_id": 45190089, "comment_id": 77348355, "body": "Yes, thank you for the link, the expansion of pointers and the relationship to braces and stars looks simple, but really how that works in real life? That should be awesome to reach a level where to deal with function pointers and see how they are so powerful."}], "tags": [], "owner": {"reputation": 2887, "user_id": 2422450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c899826b7012b67268ee1899b40419?s=128&d=identicon&r=PG", "display_name": "Lanting", "link": "https://stackoverflow.com/users/2422450/lanting"}, "is_accepted": false, "score": 3, "last_activity_date": 1500466119, "last_edit_date": 1500466119, "creation_date": 1500466060, "answer_id": 45190089, "question_id": 45189855, "link": "https://stackoverflow.com/questions/45189855/what-are-the-benefits-function-pointers-in-c/45190089#45190089", "title": "What are the benefits function pointers in C?", "body": "<ol>\n<li>Same as regular typdefs, incredibly useful for 2 and 4. Instead of typing the whole thing, you can now use <code>myFuncDef</code></li>\n<li>A function declaration for a function that recieves a function pointer. A function that takes a function pointer of 1. would thus look <code>int add2to3(myFuncDef functionPtr);</code></li>\n<li>-</li>\n<li>A function that takes an int and (probably based on that) returns you a function pointer. Using the typedef it would have looked like <code>myFuncDef functionFactory(int n);</code></li>\n</ol>\n\n<p>Without typedefs these chains of pointers to pointers could get incredibly long as can be seen in this question: <a href=\"https://stackoverflow.com/questions/10758811/c-syntax-for-functions-returning-function-pointers\">C syntax for functions returning function pointers</a></p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1500466742, "creation_date": 1500466742, "answer_id": 45190377, "question_id": 45189855, "link": "https://stackoverflow.com/questions/45189855/what-are-the-benefits-function-pointers-in-c/45190377#45190377", "title": "What are the benefits function pointers in C?", "body": "<p>typedef(s) are used to simplify declarations.</p>\n\n<p>This declaration </p>\n\n<pre><code>int add2to3(int (*functionPtr)(int, int));      \n</code></pre>\n\n<p>declares a function that accepts as argument a pointer to a function with two parameters of the type <code>int</code> and has the return type <code>int</code>.</p>\n\n<p>To make this declaration simpler you can write the parameter as having a type of function instead of the type pointer to function.</p>\n\n<pre><code>int add2to3( int function( int, int ) );\n</code></pre>\n\n<p>Or you can use the typedef</p>\n\n<pre><code>typedef int (*myFuncDef)(int, int);      \n\n//...\n\nint add2to3( myFuncDef functionPtr );\n</code></pre>\n\n<p>This declaration</p>\n\n<pre><code>int (*functionFactory(int n))(int, int);\n</code></pre>\n\n<p>declares a function that has one parameter of the type <code>int</code> and has the return type pointer to a function that has two parameters of the type <code>int</code> and has the return type <code>int</code>.</p>\n\n<p>Again using the typedef above you can simplify the declaration</p>\n\n<pre><code>typedef int (*myFuncDef)(int, int);      \n\n//...\n\nmyFuncDef functionFactory(int n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1500467083, "last_edit_date": 1500467083, "creation_date": 1500466756, "answer_id": 45190384, "question_id": 45189855, "link": "https://stackoverflow.com/questions/45189855/what-are-the-benefits-function-pointers-in-c/45190384#45190384", "title": "What are the benefits function pointers in C?", "body": "<p>1) <code>typdef</code> of function pointer will help to return a function pointer from a function.<br>\ni.e., <code>typedef int (*myFuncDef)(int, int);</code> <br>\n      <code>myDuncDef retFunc()</code> here retFunc return the function pointer.<br></p>\n\n<p>2)<code>int add2to3(int (*functionPtr)(int, int));</code> here <code>add2to3</code>function gets the function pointer with specified type as a argument.</p>\n\n<p>3) ------</p>\n\n<p>4) <code>int (*functionFactory(int n))(int, int)</code> this is another way of returning a function pointer.</p>\n"}], "owner": {"reputation": 131, "user_id": 4309211, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/-rn-SqO0k5SY/AAAAAAAAAAI/AAAAAAAAAQc/uihnXrq5ZmE/photo.jpg?sz=128", "display_name": "R1S8K", "link": "https://stackoverflow.com/users/4309211/r1s8k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "closed_date": 1500472690, "answer_count": 3, "score": -2, "last_activity_date": 1573914404, "creation_date": 1500465478, "last_edit_date": 1573914404, "question_id": 45189855, "link": "https://stackoverflow.com/questions/45189855/what-are-the-benefits-function-pointers-in-c", "closed_reason": "Needs more focus", "title": "What are the benefits function pointers in C?", "body": "<p>I want to know the benefits of function pointers in computer and embedded systems programming.</p>\n"}, {"tags": ["c", "format-string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1500465478, "post_id": 45189796, "comment_id": 77346694, "body": "Try a <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\"><code>scanf() manual</code></a>. It matches any character <i>except</i> newline, while the <code>*</code> suppresses the assignment of the conversion, so the characters are just &quot;<i>skipped</i>&quot;."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500470843, "post_id": 45189938, "comment_id": 77351256, "body": "&quot;<i>reads a symbol if it is not a new line or, if it is a new line, ignores it.</i>&quot; -- uhm, it reads <i>everything up to a newline</i> and ignores everything that was read."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1500478231, "post_id": 45189938, "comment_id": 77357460, "body": "@FelixPalmen exactly, fixed now."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 1, "last_activity_date": 1500478219, "last_edit_date": 1500478219, "creation_date": 1500465695, "answer_id": 45189938, "question_id": 45189796, "link": "https://stackoverflow.com/questions/45189796/format-string-confusion-in-fscanf-function-in-c/45189938#45189938", "title": "Format string confusion in fscanf function in C", "body": "<p>From the <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow noreferrer\">docs</a> one might see, that:</p>\n\n<p><code>*</code> - assignment-suppressing character which is used not to assign the value being read to any receiveing argument of <code>fscanf</code>.</p>\n\n<p><code>[^\\n]</code> - conversion specifier which matches any symbol except (<code>^</code>) new line (<code>\\n</code>).</p>\n\n<p>As a result, this <code>fscanf</code> reads all symbols until new line is met.</p>\n"}], "owner": {"reputation": 140, "user_id": 8183253, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/354b77dfe07c643ead99d9615d505db1?s=128&d=identicon&r=PG&f=1", "display_name": "SK17", "link": "https://stackoverflow.com/users/8183253/sk17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45189938, "answer_count": 1, "score": -2, "last_activity_date": 1500478219, "creation_date": 1500465327, "last_edit_date": 1500465380, "question_id": 45189796, "link": "https://stackoverflow.com/questions/45189796/format-string-confusion-in-fscanf-function-in-c", "title": "Format string confusion in fscanf function in C", "body": "<p><em>I'm unable to understand below this line , could somebody tell me what it does ?</em></p>\n\n<pre><code>fscanf(file_pointer, \"%*[^\\n]\");\n</code></pre>\n"}, {"tags": ["c", "pointers", "gcc", "linker", "constants"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1500465417, "post_id": 45189782, "comment_id": 77346643, "body": "&quot;I need some solution that will not work without changes in the source &quot; Are you sure about that? At a guess you &quot;I need some solution that will work without changes in the source &quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500465617, "post_id": 45189782, "comment_id": 77346807, "body": "Maybe try writing a custom <a href=\"https://sourceware.org/binutils/docs/ld/Scripts.html#Scripts\" rel=\"nofollow noreferrer\">linker script</a>"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500469343, "post_id": 45189782, "comment_id": 77349973, "body": "A global pointer variable which is initialized like this needs a relocation in PIC code. I don&#39;t think there is a way around this, so you need to disable PIC code or write some tiny dynamic linker which performs the required relocations."}, {"owner": {"reputation": 61, "user_id": 6663666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PlQIA3oG_Tw/AAAAAAAAAAI/AAAAAAAAAPA/pDQV11fdOuo/photo.jpg?sz=128", "display_name": "Patryk Kubiak", "link": "https://stackoverflow.com/users/6663666/patryk-kubiak"}, "edited": false, "score": 0, "creation_date": 1500470229, "post_id": 45189782, "comment_id": 77350724, "body": "Actually I am using my own linker script in my own OS designed for embedded architectures (<a href=\"http://chocoos.org\" rel=\"nofollow noreferrer\">chocoos.org</a>). I want to run ELF files in it. In general it works, but the problem is, that I dont have MMU, so I have to use -fPIC. The program is built and put into the SD card. The system analyzes the ELF file, reads program sections, and updates it. And this works despite of the situation, when the global pointer is initialized to the .rodata section. I know, that I can put the variable to the different section, and update the section, but I don&#39;t want to change the source code of the program"}, {"owner": {"reputation": 61, "user_id": 6663666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PlQIA3oG_Tw/AAAAAAAAAAI/AAAAAAAAAPA/pDQV11fdOuo/photo.jpg?sz=128", "display_name": "Patryk Kubiak", "link": "https://stackoverflow.com/users/6663666/patryk-kubiak"}, "edited": false, "score": 0, "creation_date": 1500470326, "post_id": 45189782, "comment_id": 77350816, "body": "Otherwise everytime, when you want to built a program for the system, you will have to update all global variables. If you want to build gcc for example, it will take too much time"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 6663666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PlQIA3oG_Tw/AAAAAAAAAAI/AAAAAAAAAPA/pDQV11fdOuo/photo.jpg?sz=128", "display_name": "Patryk Kubiak", "link": "https://stackoverflow.com/users/6663666/patryk-kubiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1500484218, "creation_date": 1500484218, "answer_id": 45196957, "question_id": 45189782, "link": "https://stackoverflow.com/questions/45189782/constant-pointers-in-different-sections-gcc/45196957#45196957", "title": "Constant pointers in different sections GCC", "body": "<p>To describe the situation in details, please take a look:</p>\n\n<pre><code>#include &lt;oc_stdio.h&gt;\n#include &lt;oc_stdtypes.h&gt;\n\nstatic char *       SomeString = \"Hue hue, it is my string!\\n\";\nstatic uint32_t     Variable   = 0xDEADBEEF;\nstatic uint32_t *   Pointer    = NULL;\nstatic uint32_t     Variable2  = 0xBEEFBABA;\n\n//=========================================\n/**\n * The main entry of the application\n *\n * @param Argc      Argument counter\n * @param Argv      Arguments array\n *\n * @return result\n */\n//=========================================\nint main( int Argc , char ** Argv )\n{\n    printf(\"Hello ChocoOS - userspace World!\\n\");\n    printf(\"It is very nice to be here!\\n\");\n\n    printf(\"Here is string from data section: '%s'\\n\", SomeString);\n    printf(\"And here variable from data section: 0x%08X\\n\", Variable);\n\n    Pointer = &amp;Variable2;\n\n    printf(\"Variable2 = 0x%08X\\n\", Variable2);\n    printf(\"Pointer to Variable2 = 0x%08X\\n\", Pointer);\n    printf(\"Value from pointer = 0x%08X\\n\", *Pointer);\n    printf(\"String pointer = 0x%08X\\n\", SomeString);\n\n    return 0;\n}\n</code></pre>\n\n<p>Actual result is:\n<a href=\"https://i.stack.imgur.com/3IEwB.png\" rel=\"nofollow noreferrer\">Result of the program work</a></p>\n\n<p>In the binary you can see, that the string is placed in the .rodata:\n<a href=\"https://i.stack.imgur.com/stlUD.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>And as you can see in the output of the program, the pointer stores offset of the .rodata. </p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6663666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PlQIA3oG_Tw/AAAAAAAAAAI/AAAAAAAAAPA/pDQV11fdOuo/photo.jpg?sz=128", "display_name": "Patryk Kubiak", "link": "https://stackoverflow.com/users/6663666/patryk-kubiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1500484406, "creation_date": 1500484406, "answer_id": 45197015, "question_id": 45189782, "link": "https://stackoverflow.com/questions/45189782/constant-pointers-in-different-sections-gcc/45197015#45197015", "title": "Constant pointers in different sections GCC", "body": "<p>And here is the proof, that the program correctly uses .got:\n<a href=\"https://i.stack.imgur.com/OEzrd.png\" rel=\"nofollow noreferrer\">ASM .got</a></p>\n"}], "owner": {"reputation": 61, "user_id": 6663666, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PlQIA3oG_Tw/AAAAAAAAAAI/AAAAAAAAAPA/pDQV11fdOuo/photo.jpg?sz=128", "display_name": "Patryk Kubiak", "link": "https://stackoverflow.com/users/6663666/patryk-kubiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1500484406, "creation_date": 1500465288, "question_id": 45189782, "link": "https://stackoverflow.com/questions/45189782/constant-pointers-in-different-sections-gcc", "title": "Constant pointers in different sections GCC", "body": "<p>Is there a way to change the destination section of all constant pointers? For me, the option with '<strong>attibute</strong>' is not ok, because I need some solution that will not work without changes in the source code. </p>\n\n<p>Here example:</p>\n\n<pre><code>char * myString = \"Some string to print\";\n</code></pre>\n\n<p>And as we know, <code>myString</code> is stored in the .data and points to the .rodata. The system will initialize it by copying it from the elf file during start of the application. But it is only raw data, it cannot be analyzed. The problem is, that when we don't have MMU, and we try to using -fPIC and .got, the pointer does not use the .got, so it is icorrect. </p>\n"}, {"tags": ["c", "data-structures", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1500468323, "post_id": 45189738, "comment_id": 77349038, "body": "If I remember right, a common trick is to put the &quot;r-b-flag&quot; into the least bit of one of the child pointers which is usually 0 (due to word alignment of addresses). This saves a byte or even a word for each node. In this case, comparison with 0 may have to mask this out - comparison with itself not. But, it&#39;s just speculation..."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500475315, "post_id": 45189738, "comment_id": 77355050, "body": "@Scheff: That may well be but the code quoted here would appear to store a separate color member."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1500475451, "post_id": 45189738, "comment_id": 77355172, "body": "Sorry, I didn&#39;t even read the code - my fault..."}], "answers": [{"comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1500475141, "post_id": 45193743, "comment_id": 77354929, "body": "In addition to reducing special cases in a linked data structures using a sentinel as opposed to NULL allows the code to speculatively follow the chain, affording the optimizer more leeway in reordering."}], "tags": [], "owner": {"reputation": 169, "user_id": 6335232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26495a57ff2c7cdf812def809616e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Shcherbina", "link": "https://stackoverflow.com/users/6335232/vlad-shcherbina"}, "is_accepted": true, "score": 3, "last_activity_date": 1500474788, "creation_date": 1500474788, "answer_id": 45193743, "question_id": 45189738, "link": "https://stackoverflow.com/questions/45189738/why-a-self-referencing-sentinel-in-a-red-black-tree-is-simpler-than-having-to-ch/45193743#45193743", "title": "Why a self-referencing sentinel in a red-black tree is simpler than having to check for NULL?", "body": "<p>Let's say you want to check one of the main properties of the RB tree, that there are no adjacent red nodes.</p>\n\n<p>With NULL representation, it looks like this:</p>\n\n<p><code>node-&gt;color == black || (node-&gt;left == NULL || node-&gt;left-&gt;color == black) &amp;&amp; (node-&gt;right == NULL || node-&gt;right-&gt;color == black)\n</code></p>\n\n<p>Sentinel representation allows to express it more concisely:</p>\n\n<p><code>node-&gt;color == black || node-&gt;left-&gt;color == black &amp;&amp; node-&gt;right-&gt;color == black\n</code></p>\n\n<p>Same simplification applies to the actual checks in the tree operations.</p>\n\n<p>Similar story with the fake root. It ensures that the tree is never empty, and thus eliminates a special case from the tree insertion routine. (No idea what they meant by spitting though.)</p>\n"}], "owner": {"reputation": 1142, "user_id": 5863693, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101741963312f7ee577a74925672d234?s=128&d=identicon&r=PG&f=1", "display_name": "Yos", "link": "https://stackoverflow.com/users/5863693/yos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 45193743, "answer_count": 1, "score": 1, "last_activity_date": 1500474788, "creation_date": 1500465175, "question_id": 45189738, "link": "https://stackoverflow.com/questions/45189738/why-a-self-referencing-sentinel-in-a-red-black-tree-is-simpler-than-having-to-ch", "title": "Why a self-referencing sentinel in a red-black tree is simpler than having to check for NULL?", "body": "<p>I'm trying to implement red-black tree data structure and came across <a href=\"https://opensource.apple.com/source/sudo/sudo-46/src/redblack.c\" rel=\"nofollow noreferrer\">this</a> example from Apple Open Source project. This is the code for creating a tree:</p>\n\n<pre><code>/*\n * Create a red black tree struct using the specified compare routine.\n * Allocates and returns the initialized (empty) tree.\n */\nstruct rbtree *\nrbcreate(compar)\n    int (*compar)__P((const void *, const void*));\n{\n    struct rbtree *tree;\n\n    tree = (struct rbtree *) emalloc(sizeof(*tree));\n    tree-&gt;compar = compar;\n\n    /*\n     * We use a self-referencing sentinel node called nil to simplify the\n     * code by avoiding the need to check for NULL pointers.\n     */\n    tree-&gt;nil.left = tree-&gt;nil.right = tree-&gt;nil.parent = &amp;tree-&gt;nil;\n    tree-&gt;nil.color = black;\n    tree-&gt;nil.data = NULL;\n\n    /*\n     * Similarly, the fake root node keeps us from having to worry\n     * about splitting the root.\n     */\n    tree-&gt;root.left = tree-&gt;root.right = tree-&gt;root.parent = &amp;tree-&gt;nil;\n    tree-&gt;root.color = black;\n    tree-&gt;root.data = NULL;\n\n    return(tree);\n}\n</code></pre>\n\n<p>I'm wondering what is the reasoning behind having the sentinel node instead having the children pointing to <code>NULL</code>. In any case we have to check as far as I understand. </p>\n\n<p>Also I don't understand why we need fake root and how the root can even be split in theory?</p>\n"}, {"tags": ["c", "ascii", "eof", "non-ascii-characters", "stdio"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500464699, "post_id": 45189507, "comment_id": 77346061, "body": "<code>char ch=EOF;</code> &lt;- <code>EOF</code> might be unrepresentable in <code>char</code>. It&#39;s some <code>int</code> constant."}, {"owner": {"reputation": 25, "user_id": 7751535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gs4j7YHRQk0/AAAAAAAAAAI/AAAAAAAAABI/lEvzH0QfIu8/photo.jpg?sz=128", "display_name": "Anuvansh Kumar", "link": "https://stackoverflow.com/users/7751535/anuvansh-kumar"}, "edited": false, "score": 0, "creation_date": 1500464825, "post_id": 45189507, "comment_id": 77346161, "body": "ok i see that is why return type of putc() is unsigned char .... But why there are 2 different values is still a question ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500464900, "post_id": 45189507, "comment_id": 77346223, "body": "Return type is <code>int</code>. <i>This function returns the character written as an unsigned char cast to an int or EOF on error.</i> <code>EOF</code> has the value <code>-1</code> and this cannot be an <code>unsigned char</code> cast to <code>int</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500464932, "post_id": 45189507, "comment_id": 77346252, "body": "The return value of <code>putc</code> is of type <code>int</code>. Where did you see that it is <code>unsigned char</code>?"}, {"owner": {"reputation": 25, "user_id": 7751535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gs4j7YHRQk0/AAAAAAAAAAI/AAAAAAAAABI/lEvzH0QfIu8/photo.jpg?sz=128", "display_name": "Anuvansh Kumar", "link": "https://stackoverflow.com/users/7751535/anuvansh-kumar"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500465012, "post_id": 45189507, "comment_id": 77346329, "body": "sorry @WeatherVane is right,according to the link given it&#39;s unsigned char cast to an int."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1500466877, "post_id": 45189507, "comment_id": 77347845, "body": "If you really want to experiment with the C standard library, think seriously about using a C compiler."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500474723, "post_id": 45189507, "comment_id": 77354593, "body": "There are man pages...."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1500465020, "creation_date": 1500465020, "answer_id": 45189683, "question_id": 45189507, "link": "https://stackoverflow.com/questions/45189507/what-does-putc-return-in-c/45189683#45189683", "title": "What does putc() return in c?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/c/io/fputc\" rel=\"nofollow noreferrer\">fputc</a> documentation on cppreference.com, the character is internally converted to <code>unsigned char</code>:</p>\n\n<blockquote>\n  <p>Internally, the character is converted to unsigned char just before\n  being written.</p>\n</blockquote>\n\n<p>If you now have a (probably signed) character, and you assign <code>char ch = EOF</code>, and if <code>EOF</code> is actually <code>-1</code>, then converting <code>(char)-1</code> into <code>(unsigned char)-1</code> gives <code>255</code>, which is then passed back as <code>int</code>. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500466755, "post_id": 45189689, "comment_id": 77347738, "body": "AFAIK, the standard doesn&#39;t require a specific value for <code>EOF</code>. <code>-1</code> is just commonly used, as it must be a value different from any character value as <code>unsigned char</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1500484225, "post_id": 45189689, "comment_id": 77361210, "body": "@FelixPalmen: <code>EOF</code> must also be negative."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500484391, "post_id": 45189689, "comment_id": 77361321, "body": "@vasek: The OP does not write <code>putc(EOF,stdout)</code>, he writes <code>putc(ch, stdout)</code> and <code>ch</code> is an <code>unsigned char</code> with value <code>(unsigned char)EOF</code>, <code>255</code> on his system.  <code>putc(EOF, stdout)</code> would have the same beavior because the argument is converted as <code>unsigned char</code> as you wrote."}, {"owner": {"reputation": 2365, "user_id": 611117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d70f88638c52101b1f0c5d9a87a803e?s=128&d=identicon&r=PG", "display_name": "vasek", "link": "https://stackoverflow.com/users/611117/vasek"}, "edited": false, "score": 0, "creation_date": 1500487355, "post_id": 45189689, "comment_id": 77362992, "body": "Actually <code>ch</code> was declared as <code>char</code>, therefore signed."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500496370, "post_id": 45189689, "comment_id": 77368148, "body": "@vasek: oops you are correct! but the argument is converted to <code>unsigned char</code> anyway.  And <code>char</code> might be unsigned by default, which after all is the only consistent choice ;-)"}], "tags": [], "owner": {"reputation": 2365, "user_id": 611117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d70f88638c52101b1f0c5d9a87a803e?s=128&d=identicon&r=PG", "display_name": "vasek", "link": "https://stackoverflow.com/users/611117/vasek"}, "is_accepted": true, "score": 2, "last_activity_date": 1500465027, "creation_date": 1500465027, "answer_id": 45189689, "question_id": 45189507, "link": "https://stackoverflow.com/questions/45189507/what-does-putc-return-in-c/45189689#45189689", "title": "What does putc() return in c?", "body": "<p>EOF is -1 as you already have probably already found out. So if you <code>putc(EOF,stdout)</code> then you see <code>255</code> in the output because -1 is converted to <code>unsigned char</code> before printing.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1500465120, "creation_date": 1500465120, "answer_id": 45189720, "question_id": 45189507, "link": "https://stackoverflow.com/questions/45189507/what-does-putc-return-in-c/45189720#45189720", "title": "What does putc() return in c?", "body": "<p>From <a href=\"https://linux.die.net/man/3/putc\" rel=\"nofollow noreferrer\">a <code>putc()</code> manual</a>:</p>\n\n<blockquote>\n  <p><code>fputc()</code>, <code>putc()</code> and <code>putchar()</code> return the character written as an <strong>unsigned</strong> <em>char</em> cast to an <em>int</em> or <code>EOF</code> on error.</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<p><code>EOF</code> is an <code>int</code> constant that is different from any character value, so a natural choice could be <code>-1</code> (and many implementations use this).</p>\n\n<p>Now, if your <code>char</code> is <em>signed</em>, converting <code>EOF</code> to <code>char</code> will still be <code>-1</code>. But the function uses <strong>unsigned char</strong> for characters, so it returns <code>255</code> (this would be the same value interpreted as <em>unsigned</em>, assuming the signed value was stored in 2's complement and your <code>char</code> has 8 bits).</p>\n\n<hr>\n\n<p>Just use the functions the way they are <em>documented</em>: Pass <code>unsigned char</code> for printing (a character constant is fine) and take the return value as an <code>int</code>. if the return value isn't <code>EOF</code>, <strong>then</strong> you can interpret it as an <code>unsigned char</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 7751535, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gs4j7YHRQk0/AAAAAAAAAAI/AAAAAAAAABI/lEvzH0QfIu8/photo.jpg?sz=128", "display_name": "Anuvansh Kumar", "link": "https://stackoverflow.com/users/7751535/anuvansh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 1, "accepted_answer_id": 45189689, "answer_count": 3, "score": 1, "last_activity_date": 1500484191, "creation_date": 1500464570, "last_edit_date": 1500484191, "question_id": 45189507, "link": "https://stackoverflow.com/questions/45189507/what-does-putc-return-in-c", "title": "What does putc() return in c?", "body": "<p>I was willing to know what does <code>putc()</code> return. I was going through the following link:<a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_putc.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/c_standard_library/c_function_putc.htm</a>. Now if <code>putc()</code> returns <code>EOF</code> on error, then a natural question is what does it return on end of file? for that I wrote the following in dev c++:</p>\n\n<h1>Code</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char ch = EOF;\n    printf(\"%d\\n\", putc(ch, stdout));\n    printf(\"hello %d\", EOF);\n\n    return 0;\n} \n</code></pre>\n\n<h1>Output</h1>\n\n<pre><code>255\nhello -1\n</code></pre>\n\n<p>This is a little bit weird. Can anyone help me out ? <code>EOF</code> is not an ASCII character as stated in <a href=\"https://stackoverflow.com/questions/7622699/what-is-the-ascii-value-of-eof-in-c/35640814#35640814\">What is the ascii value of EOF in c.?</a> then why <code>255</code> (yes its not ASCII) in the first line and <code>-1</code> in second?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500463947, "post_id": 45189072, "comment_id": 77345486, "body": "<code>[j]</code> might occurs out-of-bounds error."}, {"owner": {"reputation": 86, "user_id": 6044264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2d52296c121703ff0ec78ea27c0dea?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Fighter", "link": "https://stackoverflow.com/users/6044264/phil-fighter"}, "edited": false, "score": 2, "creation_date": 1500464578, "post_id": 45189072, "comment_id": 77345957, "body": "I think you have to switch <code>i</code> and <code>j</code> in your calculation of the <code>spot</code>."}, {"owner": {"reputation": 1, "user_id": 8331139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d99ade5ddcc356d09d4b634a95abf75?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Pearson", "link": "https://stackoverflow.com/users/8331139/dustin-pearson"}, "reply_to_user": {"reputation": 86, "user_id": 6044264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2d52296c121703ff0ec78ea27c0dea?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Fighter", "link": "https://stackoverflow.com/users/6044264/phil-fighter"}, "edited": false, "score": 2, "creation_date": 1500466600, "post_id": 45189072, "comment_id": 77347613, "body": "@PhilFighter, thanks! That was the issue. I don&#39;t know how to accept your statement as the answer or mark the question as completed, but you just solved a 3 hour headache."}, {"owner": {"reputation": 86, "user_id": 6044264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d2d52296c121703ff0ec78ea27c0dea?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Fighter", "link": "https://stackoverflow.com/users/6044264/phil-fighter"}, "edited": false, "score": 0, "creation_date": 1500466921, "post_id": 45189072, "comment_id": 77347888, "body": "@Dustin Pearson, It was a pleasure to help"}], "owner": {"reputation": 1, "user_id": 8331139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d99ade5ddcc356d09d4b634a95abf75?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin Pearson", "link": "https://stackoverflow.com/users/8331139/dustin-pearson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500472281, "creation_date": 1500463344, "last_edit_date": 1500472281, "question_id": 45189072, "link": "https://stackoverflow.com/questions/45189072/largest-square-finder-debug", "title": "Largest Square Finder debug", "body": "<p>I am using an algorithm to find the biggest square from a text file given as input to my program. I have tested; my program is receiving the correct string of characters with newlines after each row, and it is receiving the correct character that marks a \"full\" spot. It is receiving the correct column and row count. </p>\n\n<p>My function, displayed here, is supposed to make a two dimensional integer array that fills in a minesweeper-like algorithm. The goal being to be able to select any spot in the array and know how many \"full\" spots are in the area above and to the left of it. </p>\n\n<p>Here is my function:</p>\n\n<pre><code>int **makearray(char *str, char full, int rowcount, int colcount){\n    int i;\n    int j;\n    int **intarray;\n    int *column;\n    int spot;\n\n    intarray = (int **) malloc(sizeof(int *) * rowcount);\n    i = 0;\n    while (i &lt; rowcount) {\n        j = 0;\n        column = (int *) malloc(sizeof(int) * (colcount));\n        intarray[i] = column;\n        while (j &lt; (colcount + 1)) {\n            spot = i + (j * (colcount + 1));\n            intarray[i][j] = 0;\n            if (str[spot] == full)\n                intarray[i][j] = 1;\n            if (i == 0 &amp;&amp; (j != 0))\n                intarray[i][j] += intarray[i][j - 1];\n            else if (i != 0 &amp;&amp; (j != 0))\n                intarray[i][j] += (intarray[i][j - 1] + intarray[i - 1][j]\n                        - intarray[i - 1][j - 1]);\n            else if (i != 0 &amp;&amp; (j == 0))\n                intarray[i][j] += intarray[i - 1][j];\n            j++;\n        }\n        i++;\n    }\n    return (intarray);\n}\n</code></pre>\n\n<p>Here is the input that I give it:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>.o...o....................o.o..............o....o..\n...o..o..................o.........o..o....o.......\n...o...........o...................o........o......\n.........................oo...........oo.......o...\n..o...........................o.......o............\no....o.....o....o....o.........o.........o.........\n....................................o.....oo.o.....\n.....o..o..........o..........o....................\n..............o.o.......o..o......o................\n.................o..o...........o...o..............\no.................oo............oo.................\n...o...oo....................oo..o......o....o....o\n...o......o.........o..o.....................oo....\n.........oo......o............................o....\n......o....o................o.....................o\n......................................o..oo.......o\n....................o..o........o.....o.o..........\n...o.o..o..o.......o.....................o......o..\n...o..........o.......o................o........o..\n...........o......................o.oo....o....o.o.\n.o......o...o......................o.......o.......\n........................o......oo............oo....\n..o.....o..........................................\n</code></pre>\n\n<p>This should turn it into an array that has 116 in the last position; however, when I test it, the last spot is holding a 48. The logic was obtained from this stack-overflow post: <a href=\"https://stackoverflow.com/questions/20335427/most-efficient-algorithm-to-find-the-biggest-square-in-a-two-dimension-map\">Most efficient algorithm to find the biggest square in a two dimension map</a></p>\n\n<p>Could you help me find the bug?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 3, "creation_date": 1500463019, "post_id": 45188916, "comment_id": 77344841, "body": "It has to be <code>%c</code> not just <code>c</code> in printf. Did you include needed headers: <code>#include &lt;stdio.h&gt;</code>? To have a running program you need a <code>main</code> function see here: <a href=\"https://stackoverflow.com/a/45159215/8051589\">stackoverflow.com/a/45159215/8051589</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500463091, "post_id": 45188916, "comment_id": 77344907, "body": "You had some <i>errors</i>. Could you share them with us?"}, {"owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "edited": false, "score": 0, "creation_date": 1500463136, "post_id": 45188916, "comment_id": 77344940, "body": "You should read a C book first."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500463222, "post_id": 45188916, "comment_id": 77344999, "body": "Please present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1500463267, "post_id": 45188916, "comment_id": 77345039, "body": "<a href=\"http://ide.geeksforgeeks.org/RqYGh3\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/RqYGh3</a>"}, {"owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 0, "creation_date": 1500463274, "post_id": 45188916, "comment_id": 77345046, "body": "<i>It is not running with a lot of errors.</i> So it does run without errors? Or doesn&#39;t it run but the compiler spits out a lot of errors? Please have a look at the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> section and then create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463306, "post_id": 45188916, "comment_id": 77345076, "body": "token that is not allowed by the formal grammar"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463134, "post_id": 45188952, "comment_id": 77344938, "body": "hey thanks but i included only function with errors I have a main function"}, {"owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "edited": false, "score": 1, "creation_date": 1500463156, "post_id": 45188952, "comment_id": 77344952, "body": "The functionality(<b>void</b>) is missing."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1500463780, "post_id": 45188952, "comment_id": 77345369, "body": "OP changed it now there is a wrong main function..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1500464468, "post_id": 45188952, "comment_id": 77345883, "body": "@AndreKampling: The C standard requires compilers to add <code>return 0;</code> to <code>main</code> if missing."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1500465161, "post_id": 45188952, "comment_id": 77346440, "body": "My comment (<code>OP changed it now [...]</code>) was about: <code>printf(functionality);</code> in the main function of the OP. But thank you, you answered my other comment under David Farrugias answer, as I didn&#39;t know that fact."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1500465640, "post_id": 45188952, "comment_id": 77346827, "body": "Just for completeness: The <code>return 0</code> is just added in the C99 standard. For ANSI C or C89 that doesn&#39;t apply, see the SO answer I refer to."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1500462990, "creation_date": 1500462990, "answer_id": 45188952, "question_id": 45188916, "link": "https://stackoverflow.com/questions/45188916/unknown-errors-on-multiple-lines-in-c/45188952#45188952", "title": "Unknown errors on multiple lines in C", "body": "<p>These errors are not <em>unknown</em>:</p>\n\n<ol>\n<li><p>There is no <code>main</code> function, so there's nothing to run.</p></li>\n<li><p>You are missing a closing <code>}</code> at the end of this function.</p></li>\n<li><p>You are missing a <code>;</code> at the end of <code>int ll = 5;</code></p></li>\n<li><p>Your <code>printf</code> call is malformed, Did you want  <code>printf(\"%c  \", x);</code>?</p></li>\n<li><p>Where is your <code>#include &lt;stdio.h&gt;</code> (or does your compiler bring that in automatically?).</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463415, "post_id": 45188963, "comment_id": 77345157, "body": "Hi this seems to have removed many errors but there is still another one in main function"}, {"owner": {"reputation": 1042, "user_id": 4587043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97c179dfd99ef87a2a3bd03801d2927c?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4587043/david"}, "reply_to_user": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463446, "post_id": 45188963, "comment_id": 77345178, "body": "can you edit your post to include your main function, please?"}, {"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463550, "post_id": 45188963, "comment_id": 77345252, "body": "done please check my question for edit"}, {"owner": {"reputation": 1042, "user_id": 4587043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97c179dfd99ef87a2a3bd03801d2927c?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4587043/david"}, "reply_to_user": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463724, "post_id": 45188963, "comment_id": 77345346, "body": "updated my answer for you..."}, {"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463825, "post_id": 45188963, "comment_id": 77345402, "body": "I will try it nnow"}, {"owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "edited": false, "score": 0, "creation_date": 1500463860, "post_id": 45188963, "comment_id": 77345424, "body": "Yes there is output! Thanks"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1500464331, "post_id": 45188963, "comment_id": 77345757, "body": "The <code>main</code> function should return something as the <code>main</code> function in C returns an <code>int</code>: <a href=\"https://stackoverflow.com/questions/3727051/why-does-a-main-function-without-a-return-statement-return-value-12\" title=\"why does a main function without a return statement return value 12\">stackoverflow.com/questions/3727051/&hellip;</a>. For example <code>EXIT_SUCCESS</code> or <code>0</code>."}], "tags": [], "owner": {"reputation": 1042, "user_id": 4587043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97c179dfd99ef87a2a3bd03801d2927c?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4587043/david"}, "is_accepted": true, "score": 4, "last_activity_date": 1500463691, "last_edit_date": 1500463691, "creation_date": 1500463019, "answer_id": 45188963, "question_id": 45188916, "link": "https://stackoverflow.com/questions/45188916/unknown-errors-on-multiple-lines-in-c/45188963#45188963", "title": "Unknown errors on multiple lines in C", "body": "<p>on the first glance of your code I can see 3 problems:</p>\n\n<p>the line <code>int ll = 5</code> is missing a <code>;</code></p>\n\n<p><strong>AND</strong></p>\n\n<p>the line <code>printf(\"c  \", x);</code> should be <code>printf(\"%c  \", x);</code></p>\n\n<p><strong>AND</strong></p>\n\n<p>a missing <code>}</code> at the end</p>\n\n<p>For next time, try to also provide the error codes, please.</p>\n\n<p>The main function should look like this:</p>\n\n<pre><code>int main(){\n   functionality();\n}\n</code></pre>\n\n<p>The function is void, hence no need to call it in a <code>print</code> statement. Also, we call a function by first stating the name of the function followed by the curly braces. I suggest that you first familiarize yourself with the basic syntax of the language first.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 7345605, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Nn86EOCa7n8/AAAAAAAAAAI/AAAAAAAANbk/RjHIAxCH-H0/photo.jpg?sz=128", "display_name": "PhaniBhushan kolla", "link": "https://stackoverflow.com/users/7345605/phanibhushan-kolla"}, "is_accepted": false, "score": 0, "last_activity_date": 1500463411, "last_edit_date": 1500463411, "creation_date": 1500463109, "answer_id": 45188991, "question_id": 45188916, "link": "https://stackoverflow.com/questions/45188916/unknown-errors-on-multiple-lines-in-c/45188991#45188991", "title": "Unknown errors on multiple lines in C", "body": "<p>you are missing a <strong>;</strong> at the end of the line int ll=5</p>\n\n<p>change the <code>c</code> to <code>%c</code> in the <code>printf()</code> function as follows</p>\n\n<pre><code>printf(\"%c\",x);\n</code></pre>\n\n<p>also make sure you close all the braces properly at the end of the function.</p>\n\n<p>make sure you have a main function in your program,and also include header files </p>\n"}], "owner": {"reputation": 1, "user_id": 8331164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9894f5ee0a4df4819a5152c580faee84?s=128&d=identicon&r=PG&f=1", "display_name": "John Yohanisberg", "link": "https://stackoverflow.com/users/8331164/john-yohanisberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1500466722, "accepted_answer_id": 45188963, "answer_count": 3, "score": -8, "last_activity_date": 1500468648, "creation_date": 1500462887, "last_edit_date": 1500468648, "question_id": 45188916, "link": "https://stackoverflow.com/questions/45188916/unknown-errors-on-multiple-lines-in-c", "closed_reason": "Not suitable for this site", "title": "Unknown errors on multiple lines in C", "body": "<pre><code>void functionality()\n{\n   int ll = 5\n   char x = 'A';\n\n   for (int i = 0; i &lt; ll; i++)\n   {\n      printf(\"c  \", x);\n   }\n}\n</code></pre>\n\n<p>I am learning C language and I wrote the above snippet. However, it is not running with loads of errors. I cannot seem to find the problem of what is happening here since I followed the code from a tutorial and I have double checked everything.</p>\n\n<pre><code>int main()\n{\n   printf(functionality);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1500462555, "post_id": 45188701, "comment_id": 77344526, "body": "There is a possibility that the newline may be included in the input with <code>fgets</code>."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 2, "creation_date": 1500462636, "post_id": 45188701, "comment_id": 77344585, "body": "Not sure if a typo or the actual code, but on your <code>for</code> loop, it should be <code>for(i=0;i&lt;5;i++)</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1500462644, "post_id": 45188701, "comment_id": 77344588, "body": "for(i=0;i5;i++){     change  i&lt;=5"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500462960, "post_id": 45188701, "comment_id": 77344799, "body": "Please <a href=\"https://stackoverflow.com/a/28462221/4142924\">read this</a>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500463042, "post_id": 45188701, "comment_id": 77344869, "body": "Your very next step should be to learn how to use your debugger.  It is an essential tool that you must become good at using before you can progress:)"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500463057, "post_id": 45188701, "comment_id": 77344882, "body": "change find track function to void find_track(char search_for[]) {     int i;     for(i=0;i&lt;=15;i++){         if (strstr(tracks[i], search_for)){         printf(&quot;Track %i: &#39;%s&#39;\\n&quot;, i, tracks[i]);         return;         }     }      \tprintf(&quot;Track Not found&quot;);  }"}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 1, "creation_date": 1500463251, "post_id": 45188701, "comment_id": 77345025, "body": "@EsmaeelE why <code>i &lt;= 15</code>? <code>i &lt; 5</code> is perfectly fine. I strongly believe that the <code>i</code> error is a typo otherwise the program wouldn&#39;t even compile. The real problem was pointed by Weather Vane and BLUEPIXY."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1500463346, "post_id": 45188701, "comment_id": 77345099, "body": "@woz Yes this is a typo i correct it in my edit proposal to Question."}, {"owner": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 0, "creation_date": 1500463430, "post_id": 45188701, "comment_id": 77345166, "body": "Apart from the typo, the program doesn&#39;t works correctly"}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1500463520, "post_id": 45188701, "comment_id": 77345235, "body": "@proneon add this: <code>search_for[strcspn(search_for, &quot;\\n&quot;)] = 0;</code> before calling <code>find_track(search_for);</code> on your <code>main</code> function. It&#39;s the solution based on Weather Vane&#39;s comment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500464478, "post_id": 45188701, "comment_id": 77345889, "body": "@proneon the program works properly after correcting the typo and removing the newline from the input string."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500464704, "post_id": 45188701, "comment_id": 77346066, "body": "@EsmaeelE Your edit introduced a logic bug and also caused mismatched curly braces."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1500464799, "post_id": 45188701, "comment_id": 77346136, "body": "It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/45188701/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1500464932, "post_id": 45188701, "comment_id": 77346253, "body": "@Blastfurnace I correct curly brace. what is the logic bug?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500465059, "post_id": 45188701, "comment_id": 77346358, "body": "@EsmaeelE The array has 5 elements. The loop condition should be <code>i &lt; 5</code> because the valid indices are 0..4"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1500465275, "post_id": 45188701, "comment_id": 77346541, "body": "@Blastfurnace Yes thanks for catching my mistake!"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500465513, "post_id": 45188701, "comment_id": 77346718, "body": "@EsmaeelE One last thing, just in my opinion adding the <code>return</code> and <code>printf</code> go beyond fixing a typo into changing the author&#39;s intent. They might want to see multiple matches."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500465854, "post_id": 45188701, "comment_id": 77347022, "body": "@And by change it we must catch  condition of this string not found, for example by defining a flag or etc."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1500466712, "post_id": 45188701, "comment_id": 77347705, "body": "One of the things that&#39;s wrong with it is that you didn&#39;t read the directions on how to ask a good question.  What testing have you done?  In what way does it not function properly?  What are you expecting the output to be and why?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500466838, "post_id": 45188701, "comment_id": 77347814, "body": "I find out the fgets() function that is not work true in this example. if i try to search with constant string that i put in hard coding in source &quot;search string&quot; strstr works good"}], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": true, "score": -1, "last_activity_date": 1500467575, "last_edit_date": 1592644375, "creation_date": 1500467575, "answer_id": 45190735, "question_id": 45188701, "link": "https://stackoverflow.com/questions/45188701/what-is-wrong-with-this-c-code/45190735#45190735", "title": "What is wrong with this C code?", "body": "<p>I find out using <code>fgets()</code> is the cause of error in getting user input and use this string on <code>strstr()</code> function.</p>\n<p>By perform some good advice from Blastfurnace, woz and other guys in Question comment section I can fix this problem.</p>\n<h1>Code</h1>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar tracks[][80] = {\n&quot;I left my heart in Harvard Med School&quot;,\n&quot;Newark, Newark - a wonderful town&quot;,\n&quot;Dancing with a Dork&quot;,\n&quot;From here to maternity&quot;,\n&quot;The girl from Iwo Jima&quot;,\n};\n\nvoid find_track(char search_for[])\n{\n    int i;\n    char * pch;\n    int flag = 0;\n\n    for(i=0;i&lt;5;i++){\n        pch = strstr(tracks[i], search_for);\n        if (pch){\n            printf(&quot;find in Track   %i: '%s'\\n&quot;, i, tracks[i]);\n            flag = 1;//find\n\n        }\n    }\n    \n    if (flag == 0)// not found\n        printf(&quot;Track Not found\\n&quot;);\n\n}\n\nint main()\n{\n    char search_for[80];\n    printf(&quot;Search for: &quot;);\n    fscanf (stdin, &quot;%s&quot;, search_for);\n    find_track(search_for);\n     \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 45190735, "answer_count": 1, "score": -6, "last_activity_date": 1500467575, "creation_date": 1500462340, "last_edit_date": 1500462480, "question_id": 45188701, "link": "https://stackoverflow.com/questions/45188701/what-is-wrong-with-this-c-code", "title": "What is wrong with this C code?", "body": "<p>I am following head first C book and now I am following the string theory part. There was a program written that return the track no and the full name of the track when a part of the track's name is searched and is found out. But the code is not working properly. Can someone please tell me what is wrong with this C program: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar tracks[][80] = {\n\"I left my heart in Harvard Med School\",\n\"Newark, Newark - a wonderful town\",\n\"Dancing with a Dork\",\n\"From here to maternity\",\n\"The girl from Iwo Jima\",\n};\n\nvoid find_track(char search_for[])\n{\n    int i;\n    for(i=0;i5;i++){\n        if (strstr(tracks[i], search_for)){\n        printf(\"Track %i: '%s'\\n\", i, tracks[i]);}\n    }\n\n}\n\nint main()\n{\n    printf(\"Hello World!\\n\");\n    char search_for[80];\n    printf(\"Search for: \");\n    fgets(search_for, 80, stdin);\n    find_track(search_for);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1500459712, "post_id": 45187640, "comment_id": 77342555, "body": "With the tag C, this doesn&#39;t make sense. C knows nothing about a &quot;<i>stack</i>&quot;"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 4, "creation_date": 1500459714, "post_id": 45187640, "comment_id": 77342557, "body": "This question is utterly meaningless. There is no stack in the C standard. This might be more meaningful if a platform was mentioned: the computer architecture and the operating system. But even then - on those computers that use stacks, the stack can have the bottom of the stack but no limit for the top; and a program can have multiple threads of execution each with their own stacks, etc."}, {"owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "edited": false, "score": 0, "creation_date": 1500459742, "post_id": 45187640, "comment_id": 77342581, "body": "check it in map file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1500459994, "post_id": 45187640, "comment_id": 77342754, "body": "And then, I can&#39;t think of a good reason you would need this -- care to explain? There <i>might</i> be a much better approach to address your <i>original</i> problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500460260, "post_id": 45187640, "comment_id": 77342943, "body": "Write a recursive function that prints the address of a local variable. Until it breaks."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500461262, "post_id": 45187640, "comment_id": 77343579, "body": "For added confusion, a &#39;program&#39; may have more than one stack."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1500461381, "last_edit_date": 1500461381, "creation_date": 1500461038, "answer_id": 45188204, "question_id": 45187640, "link": "https://stackoverflow.com/questions/45187640/how-to-find-the-starting-and-ending-address-of-stack-memory-for-a-program/45188204#45188204", "title": "How to find the starting and ending address of Stack memory for a program?", "body": "<p>There is no portable way of getting the stack base and the limit in C simply because C doesn't understand call stacks.</p>\n\n<p>We can talk about a particular implementation that uses a stack for calling though. </p>\n\n<p>Now each implementation uses some kind of a Thread Local Storage pointed by one of the registers. On X86 they use one of the unused segment registers. \nThese implementations also provide a way of accessing this TLB.</p>\n\n<p>If you are on windows you can look at <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/hh285210(v=vs.85).aspx\" rel=\"nofollow noreferrer\">NtCurrentTEB</a>.</p>\n\n<p>And the <a href=\"https://en.wikipedia.org/wiki/Win32_Thread_Information_Block\" rel=\"nofollow noreferrer\">TEB Structure</a>. You can see the field - StackBase and StackLimit.</p>\n\n<p>A code for getting the stack base and limit in C (similar can be written in CPP) (On Windows only) will be </p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;winnt.h&gt;\n\nstruct _TEB {\n        NT_TIB NtTib;\n};\n\nvoid *getStackBase(){\n        return NtCurrentTeb()-&gt;NtTib.StackBase;\n}\nvoid *getStackLimit(){\n        return NtCurrentTeb()-&gt;NtTib.StackLimit;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5995979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/902768ff11470aaea9debb59976622a7?s=128&d=identicon&r=PG&f=1", "display_name": "Imran", "link": "https://stackoverflow.com/users/5995979/imran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "closed_date": 1500465093, "answer_count": 1, "score": -4, "last_activity_date": 1500461381, "creation_date": 1500459587, "question_id": 45187640, "link": "https://stackoverflow.com/questions/45187640/how-to-find-the-starting-and-ending-address-of-stack-memory-for-a-program", "closed_reason": "Needs details or clarity", "title": "How to find the starting and ending address of Stack memory for a program?", "body": "<p>Any one can explain how to find the stack starting address and ending address through programming</p>\n"}, {"tags": ["c", "embedded", "avr", "atmega"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500459422, "post_id": 45187448, "comment_id": 77342365, "body": "Probably, the timer uses a divided clock as input and you can somehow configure the divisor. Have a look in your datasheet."}, {"owner": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "edited": false, "score": 0, "creation_date": 1500459749, "post_id": 45187448, "comment_id": 77342585, "body": "It was working Fine with previous ATMEGA32 chip which came with the Kit. I never bothered to check/change the Fuse bits. But, That one burned due to some problem. so I had to buy new one. Code is same, Circuit is the same. I am sure it has something to do with Fuse bit Settings. I referred to datasheet and set 0xFF anf 0x99 as fuse bits according to datasheet. but, unfortunately, still the problem persists."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "edited": false, "score": 0, "creation_date": 1500460171, "post_id": 45187778, "comment_id": 77342872, "body": "I checked and double checked CKSEL0...3 should be 1111 CKDIV8 i have checked and it works good on simulator. Just that it does not work as expected in real hardware. I thought my oscillator has given up. I have replaced the Crystal too."}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "reply_to_user": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "edited": false, "score": 1, "creation_date": 1500464086, "post_id": 45187778, "comment_id": 77345580, "body": "@AntarikshBahekar: You could narrow down the problem by temporarily using the internal 8MHz oscillator (low fuse 0xE4) and check if you get (half) the expected frequency that way. You could also just toggle an IO-Pin every second with a _delay_ms(1000) and verify that its really 1s. First, get your time-base right, then start PWN stuff."}, {"owner": {"reputation": 56, "user_id": 8312011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6554e8fa2e9f447603005ba77faa756?s=128&d=identicon&r=PG&f=1", "display_name": "d10e", "link": "https://stackoverflow.com/users/8312011/d10e"}, "reply_to_user": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "edited": false, "score": 0, "creation_date": 1500464108, "post_id": 45187778, "comment_id": 77345602, "body": "@AntarikshBahekar: To verify if you set the clock source properly, you can disconnect the chrystal and check you output signal. If you&#39;re still getting 250Hz, the microcontroller is running on its internal clock."}, {"owner": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "edited": false, "score": 0, "creation_date": 1500559867, "post_id": 45187778, "comment_id": 77400726, "body": "Thank you for your help. Problem solved. I changed the programmer. Low fuse-0xFF High Fuse-0x99 worked. I was writing those values but my programmer was unable to write it.   ATMega32 Does not have CKDIV8 Fuse"}], "tags": [], "owner": {"reputation": 56, "user_id": 8312011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6554e8fa2e9f447603005ba77faa756?s=128&d=identicon&r=PG&f=1", "display_name": "d10e", "link": "https://stackoverflow.com/users/8312011/d10e"}, "is_accepted": false, "score": 0, "last_activity_date": 1500463496, "last_edit_date": 1500463496, "creation_date": 1500459928, "answer_id": 45187778, "question_id": 45187448, "link": "https://stackoverflow.com/questions/45187448/atmega32-fuse-bit-settings-low-fuse-and-high-fuse-16mhz-external-crystal/45187778#45187778", "title": "ATMEGA32 Fuse bit settings, Low Fuse and High Fuse, 16MHz, External crystal?", "body": "<p>Did you set clock selection <code>fuse bits</code> (and possibly clock divider) in the correct way? I'd start checking <code>CKSEL0...3</code> and <code>CKDIV8</code>. </p>\n\n<p>By my experience, getting an exact multiple of the desired <code>time/frequency</code> is almost always based on a wrong clock setting.</p>\n"}], "owner": {"reputation": 1, "user_id": 8330871, "user_type": "registered", "profile_image": "https://graph.facebook.com/1865927510091016/picture?type=large", "display_name": "Antariksh Bahekar", "link": "https://stackoverflow.com/users/8330871/antariksh-bahekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 877, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500463496, "creation_date": 1500459059, "last_edit_date": 1500461484, "question_id": 45187448, "link": "https://stackoverflow.com/questions/45187448/atmega32-fuse-bit-settings-low-fuse-and-high-fuse-16mhz-external-crystal", "title": "ATMEGA32 Fuse bit settings, Low Fuse and High Fuse, 16MHz, External crystal?", "body": "<p>I am using <code>ATMEGA32</code> with Crystal <code>16MHz</code>.<br>\nI have written following code to generate <code>1kHz</code> wave.</p>\n\n<p>I tried writing <code>Low- 0xFF</code> <code>High-0x99</code><br>\nBut I am unable to get <code>1kHz wave</code>. I am getting <code>250Hz wave</code>. instead of <code>1kHz</code>.<br></p>\n\n<p>Please help.</p>\n\n<pre><code>#define F_CPU 16000000UL \n#include &lt;avr/io.h&gt; //io related \n#include &lt;util/delay.h&gt; //delay\n#include \"lcd.h\" //custom lib for lcd\n#include &lt;stdlib.h&gt; //for string handling\n#ifndef sbit_h\n#define sbit_h\nint main(void)\n{\n\n    //All Declarations Go here.\n\n   OCR0=p*127/100; //set pwm1 duty cycle\n   OCR2=OCR0;      //set pwm2 duty cycle (Output compare register)\n\n   while(1)\n   { \n      if ((bit_is_set(PIND, 3 )))\n       {\n           pinChange(LED8,1); //Turn on solenoid valve\n           pinChange(LED1,1);\n           //PORTC|=(1&lt;&lt;PC3);\n           _delay_ms(sq); //wait for squeeze time\n           TCCR0 |= (1&lt;&lt;WGM00)|(1&lt;&lt;COM01)|(1&lt;&lt;WGM01)|(1&lt;&lt;CS01)|(1&lt;&lt;CS00); \n           //initialise timer in PWM mode 1kHz//cs00 and cs02\n           _delay_us(500);//90 degree phase shift\n           TCCR2 |= (1&lt;&lt;WGM20)|(1&lt;&lt;COM21)|(1&lt;&lt;WGM21)|(1&lt;&lt;CS22); //initialise timer2 in PWM mode 1kHz//CS22 for 1kHz\n           _delay_ms(w1); //wait until weld time over\n           TCCR0=0x00;  //stop PWM1\n           TCCR2=0x00;  //Stop PWM2\n           _delay_ms(h); //wait for hold time\n           pinChange(LED8,0); //turn off solenoid valve\n           pinChange(LED1,0);\n           TCNT0=0x00; //Reset timer counter\n           TCNT2=0x00; //reset timer counter\n     }\n}\n</code></pre>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1500466560, "post_id": 45187361, "comment_id": 77347582, "body": "Just a small remark: Do not loop on <code>MPI_Test</code> unless you a) have useful work to do in the loop, or b) you want the thread to sleep and your MPI implementation doesn&#39;t support that properly. Otherwise use <code>MPI_Wait</code>."}, {"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1500480530, "post_id": 45187361, "comment_id": 77358978, "body": "Yep, I just use it to stand for some other code, thank you for your advice."}, {"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1500480859, "post_id": 45187361, "comment_id": 77359173, "body": "BTW, is there any way to combine <code>pthread_cond_wait</code> and <code>MPI_Wait</code> like <code>select</code>? I have a loop in a worker thread, I need to wait notifies from <code>pthread_cond_signal</code> and <code>MPI_Send</code>."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1500483440, "post_id": 45187361, "comment_id": 77360722, "body": "Not directly. I guess you could do something like sending a message to your own thread and use <code>MPI_Waitany</code>, or otherwise do some thread trickery. Pretty sure anything the like requires <code>MPI_THREAD_MULTIPLE</code>."}, {"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1500518968, "post_id": 45187361, "comment_id": 77375171, "body": "hmmmm, It looks like the only way to achieve this is to do thread trickery if I care about the real time notification from both."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "edited": false, "score": 0, "creation_date": 1500480195, "post_id": 45188097, "comment_id": 77358776, "body": "yep, you&#39;re right, i just thought there are same simply."}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": false, "score": 2, "last_activity_date": 1500460770, "creation_date": 1500460770, "answer_id": 45188097, "question_id": 45187361, "link": "https://stackoverflow.com/questions/45187361/mpi-ibcast-mpi-test-couldnt-receive-data/45188097#45188097", "title": "MPI_Ibcast + MPI_Test couldn&#39;t receive data", "body": "<p>i am afraid you cannot simply mix <code>MPI_Bcast()</code> on rank 0 and <code>MPI_Ibcast()</code> on the other ranks.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "edited": false, "score": 0, "creation_date": 1500480452, "post_id": 45188568, "comment_id": 77358931, "body": "BTW, is there any way to simulate the MPI_Ibcast for the old version MPI which has no implement of MPI 3.0?"}, {"owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "edited": false, "score": 0, "creation_date": 1500518840, "post_id": 45188568, "comment_id": 77375138, "body": "Oh! That&#39;s exactly what I want!"}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 3, "last_activity_date": 1500461948, "creation_date": 1500461948, "answer_id": 45188568, "question_id": 45187361, "link": "https://stackoverflow.com/questions/45187361/mpi-ibcast-mpi-test-couldnt-receive-data/45188568#45188568", "title": "MPI_Ibcast + MPI_Test couldn&#39;t receive data", "body": "<p>Gilles is absolutely right, MPI explicitly states that</p>\n\n<blockquote>\n  <p>Unlike point-to-point operations, <strong>nonblocking collective operations do not match with blocking collective operations</strong> [...]</p>\n</blockquote>\n\n<p>There is a very simple fix though, just replace your <code>MPI_Bcast</code> with:</p>\n\n<pre><code>MPI_Request req;\nMPI_Status status;\nMPI_Ibcast(&amp;data, 1, MPI_INT, 0, MPI_COMM_WORLD, &amp;req);\nMPI_Wait(&amp;req, &amp;status);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 2664112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e84a4d2b0d9a3905d07ce1a4b2cd5bc?s=128&d=identicon&r=PG", "display_name": "teng", "link": "https://stackoverflow.com/users/2664112/teng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 45188568, "answer_count": 2, "score": 0, "last_activity_date": 1500480220, "creation_date": 1500458848, "last_edit_date": 1500480220, "question_id": 45187361, "link": "https://stackoverflow.com/questions/45187361/mpi-ibcast-mpi-test-couldnt-receive-data", "title": "MPI_Ibcast + MPI_Test couldn&#39;t receive data", "body": "<p>I have a data need to broadcast to workers.\nHowever I can't receive it even I use MPI_Wait instead of MPI_Test, unless I using blocking MPI_Bcast.</p>\n\n<p>I have no idea what happen, I have tried many ways, but none of them work.</p>\n\n<p>Is there any thing wrong in my code?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;mpi.h&gt;\n\nint main()\n{\n    int rank, size;\n    int data;\n\n    MPI_Init(NULL, NULL);\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    printf(\"MPI start %d/%d\\n\", rank, size);\n\n    if (rank == 0)\n    {\n        sleep(1);\n        data = 1;\n        printf(\"MPI %d/%d bcast\\n\", rank, size);\n        MPI_Bcast(&amp;data, 1, MPI_INT, 0, MPI_COMM_WORLD);\n    }\n    else\n    {\n        int flag = 0;\n        MPI_Request req = MPI_REQUEST_NULL;\n        MPI_Status status;\n        MPI_Ibcast(&amp;data, 1, MPI_INT, 0, MPI_COMM_WORLD, &amp;req);\n        while (flag == 0) {\n            MPI_Test(&amp;req, &amp;flag, &amp;status);\n            usleep(100 * 1000);\n        }\n        // MPI_Bcast can be done!\n        //MPI_Bcast(&amp;data, 1, MPI_INT, 0, MPI_COMM_WORLD);\n        printf(\"MPI %d/%d recv bcast data: %d\\n\", rank, size, data);\n    }\n    MPI_Barrier(MPI_COMM_WORLD);\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>It will hangup here:</p>\n\n<pre><code>MPI start 0/5\nMPI start 1/5\nMPI start 2/5\nMPI start 3/5\nMPI start 4/5\nMPI 0/5 bcast\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb", "allegro5"], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 5, "last_activity_date": 1500457781, "creation_date": 1500457781, "answer_id": 45186926, "question_id": 45186738, "link": "https://stackoverflow.com/questions/45186738/how-to-debug-shared-libraries-compiled-with-debug-information/45186926#45186926", "title": "How to debug shared libraries compiled with debug information", "body": "<p><code>al_load_bitmap@plt</code> is the PLT stub (located in the main program, not the shared object), which does not have debugging information.  You need to step over several instructions, then you'll reach the actual function, which hopefully has debugging information.  You may also encounter the dynamic linker if lazy binding is active (it can be disabled with the <code>LD_BIND_NOW=1</code> environment variable setting).</p>\n\n<p>For these reasons, it is much easier to use the <code>s</code> (<code>step</code>) command to enter the function (if the called function has debugging information).</p>\n\n<p>There are some cases when <code>file</code> reports the presence of debugging information, but you still don't get useful behavior from GDB (such as line numbers or local variable access).  That's because there are several types of debugging information, and some distributions/developers perform partial stripping or debuginfo separation, leaving only the bare minimum to generate backtraces in the ELF file (which is what <code>file</code> reports as <em>not stripped</em>).</p>\n"}], "owner": {"reputation": 250, "user_id": 1798390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6830191bbabb663c3832cb4249de1719?s=128&d=identicon&r=PG", "display_name": "Bungow", "link": "https://stackoverflow.com/users/1798390/bungow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1973, "favorite_count": 1, "accepted_answer_id": 45186926, "answer_count": 1, "score": 5, "last_activity_date": 1590685108, "creation_date": 1500457314, "last_edit_date": 1590685108, "question_id": 45186738, "link": "https://stackoverflow.com/questions/45186738/how-to-debug-shared-libraries-compiled-with-debug-information", "title": "How to debug shared libraries compiled with debug information", "body": "<p>I'm compiling a program with debug simbols that links to a shared library (liballegro) also compiled with debug symbols. When I try to step into a function of this shared library I can't see any code.</p>\n\n<pre><code>file myBin \nmybin: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32, BuildID[sha1]=d4133ef127e81ffb007c4c17e10f4ddaefac6a0f, with debug_info, not stripped\n\nfile lib/liballegro-debug.so\nliballegro-debug.so.5.2.2: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=dd75ca87e0ed86832ed02a1c40548a055ad4f551, with debug_info, not stripped\n</code></pre>\n\n<p>GDB shows how this lib is loaded with debug information:</p>\n\n<pre><code>(gdb) info shared\nFrom                To                  Syms Read   Shared Object Library\n0x00007ffff7dd9b40  0x00007ffff7df5110  Yes (*)     /lib64/ld-linux-x86-64.so.2\n0x00007ffff7a5a0d0  0x00007ffff7b84591  Yes         correct/path/to/liballegro-debug.so\n0x00007ffff76ffd60  0x00007ffff7778eef  Yes (*)     /usr/lib/libm.so.6\n0x00007ffff74e1640  0x00007ffff74eefb1  Yes (*)     /usr/lib/libpthread.so.0\n[...]\n</code></pre>\n\n<p>So I put a breakpoint in a function call who lives in the shared library (al_load_bitmap):</p>\n\n<pre><code>90      level-&gt;tileset.parent = al_load_bitmap(filename);\n</code></pre>\n\n<p>The source code of al_load_bitmap is in the file path/to/<strong>src/bitmap_io.c</strong> which is listed in the output of gdb <strong>info sources</strong></p>\n\n<p>And step into it:</p>\n\n<pre><code>(gdb) si\n0x0000555555555f00 in al_load_bitmap@plt ()\n</code></pre>\n\n<p>At this point I can't figure how to see the source code of this function, as <strong>list</strong> comand show nothing.</p>\n\n<p>How can I debug what happens inside this function?</p>\n\n<p>PD: I tried also with lldb and is the same result, so I'm missing something.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1500456930, "post_id": 45186287, "comment_id": 77340513, "body": "It&#39;s UB not due to strict aliasing (you don&#39;t have aliasing here, actually, except with <code>char*</code>, which is allowed). It&#39;s UB because you may have just filled B with a trap representation. The value represented by the bit pattern you copied officially leaves <code>b</code> in an indeterminate state, IIRC."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500457034, "post_id": 45186287, "comment_id": 77340582, "body": "@StoryTeller if <code>B</code> is guaranteed to be a type that doesn&#39;t have a trap representation is this &quot;OK&quot;?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1500457092, "post_id": 45186287, "comment_id": 77340628, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.19.2\" rel=\"nofollow noreferrer\">Well, yeah</a>. But the standard doesn&#39;t promise you any meaningful semantics."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500458204, "post_id": 45186287, "comment_id": 77341478, "body": "@StoryTeller, if <code>A</code> and <code>B</code> are two struct types with exactly the same fields, can I expect the behaviour to be same as each field being copied individually. Because the standard guarantees that any implementation must have the same memory layout if two structures are defined with same members."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500461044, "post_id": 45186287, "comment_id": 77343417, "body": "The standard does indeed guarantee it. I think you should be okay. The contents of any padding bits being copied will not interfere since they are merely unspecified. All corresponding members <i>will</i> get their values copied properly. As a side note, I think your loop should be replaced with a call to <code>memcpy</code>. It will require less casting (and in turn will look cleaner for it)."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1500461146, "post_id": 45186287, "comment_id": 77343487, "body": "@StoryTeller Yes, I would use <code>memcpy</code> in real use. It&#39;s just I wanted to highlight the cast of pointers here since my question was about strict aliasing. Anyway, thanks for answering."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1500460459, "post_id": 45186611, "comment_id": 77343072, "body": "I think this answer clears the confusion beyond any doubt. From a discussion above in comments (and also from your last line) it is clear that it won&#39;t be UB if <code>B</code> has no trap representation. But the standard doesn&#39;t guarantee anything about the semantics. But  if A and B are two struct types with exactly the same fields, can I expect the behavior to be same as each field being copied individually. Because the standard guarantees that any implementation must have the same memory layout if two structures are defined with same members."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500489531, "post_id": 45186611, "comment_id": 77364236, "body": "In cases where the destination is known only by a pointer, 6.5p6 throws a spanner in the works."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 5, "last_activity_date": 1500459269, "last_edit_date": 1500459269, "creation_date": 1500457007, "answer_id": 45186611, "question_id": 45186287, "link": "https://stackoverflow.com/questions/45186287/does-copying-data-byte-wise-between-types-break-strict-aliasing/45186611#45186611", "title": "Does copying data byte wise between types break strict aliasing?", "body": "<p>This code does not violate aliasing rules. From the latest draft (n1570), \u00a76.5 section 7:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of\n  the following types:<br>\n  \u2014 a type compatible with the effective type of the object,<br>\n  \u2014 a qualified version of a type compatible with the effective type of the object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to the effective type of the\n  object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to a qualified version of the\n  effective type of the object,<br>\n  \u2014 an aggregate or union type that includes one of the aforementioned types among its\n  members (including, recursively, a member of a subaggregate or contained union), or<br>\n  \u2014 <strong>a character type</strong></p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<blockquote>\n  <p>I am concerned about both the derefences involved in the assignment.</p>\n</blockquote>\n\n<p>These dereferences <strong>are</strong> <em>accessing the stored value</em> using a <em>character type</em>.</p>\n\n<p>Of course, you could still trigger <em>undefined behavior</em> if the representation of your <code>A</code> is not a valid representation for <code>B</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500489733, "post_id": 45198576, "comment_id": 77364363, "body": "In my question the destination type is complete since I imposed the condition that size of A and B are equal. But thanks for this insight. It is rare to see that the standard is so vague about something ( in my experience )."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500490418, "post_id": 45198576, "comment_id": 77364747, "body": "@AjayBrahmakshatriya: The authors of the Standard recognized that different applications fields need to use aliasing in different ways, and thus figured that any quality compiler suitable for any particular field should support aliasing in cases which were appropriate for that field <i>whether the Standard required it or not</i>, so there was no need to delve into every possible corner case.  Still, 6.5p6 is truly horrible because it offers useful opportunities for real optimization but major opportunities for mischief."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500493987, "post_id": 45198576, "comment_id": 77366864, "body": "I don&#39;t think that&#39;s correct: Neither having a <i>declared type</i> nor an <i>effective type</i> is only possible for <i>allocated objects</i> ... once they have an <i>effective type</i> it will stay. If you want, I could try to find relevant passages in the standard tomorrow."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500494729, "post_id": 45198576, "comment_id": 77367225, "body": "To clarify by example: If you would have <code>B *b = malloc(sizeof(B));</code> and then copy <code>a</code> through a <code>char *</code> there, you would indeed have a problem, because <code>*b</code> would get the <i>effective type</i> <code>char</code>. But with <code>B b;</code>, there can&#39;t be a problem."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500496472, "post_id": 45198576, "comment_id": 77368207, "body": "@FelixPalmen: In the particular scenario where the destination is a simply-declared object, there is no problem.  In the scenario where the destination is known only by a pointer [a situation which applies to allocated objects, but also to cases where a function receives a pointer from somewhere else], the wheels fall off in cases where a bytewise copy is used for type conversion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500496550, "post_id": 45198576, "comment_id": 77368251, "body": "@supercat I strongly disagree with &quot;<i>but also to cases where a function receives a pointer from somewhere else</i>&quot; -- in that case, there is already an <i>effective type</i>, and the effective type doesn&#39;t change. As I said, I&#39;ll look up the relevant citations tomorrow."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500496797, "post_id": 45198576, "comment_id": 77368380, "body": "@FelixPalmen: Both GCC and Clang interpret the phrase about objects with declared type as being applicable only in cases where the compiler can see what the type is.  The rule would be impractical if it were interpreted as applying to pointers to objects which are declared in outside code, since the compiler would have no way of knowing what those types might be.  The notion that storage should have an &quot;effective type&quot; which is altered by writing to it should be recognized as being a truly horrible and broken model, since what should really matter is whether an object will be accessed..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500497136, "post_id": 45198576, "comment_id": 77368581, "body": "...multiple times via the same lvalue, with no evidence that it will be accessed via any other means between those accesses.  Presently, if <code>*p</code> and <code>*q</code> are pointers of different types, a compiler must (under C99 rules) generally keep writes to them in order whether or not there is any evidence of aliasing, because in case of aliasing each write would set the Effective Type, and whichever one happens last must &quot;win&quot;.  A rule based upon evidence of aliasing would allow reordering when no evidence exists, but allow programmers to use most of the useful semantics of  <code>-fno-strict-aliasing</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500535450, "post_id": 45198576, "comment_id": 77381959, "body": "Consider the first sentence &quot;<i>The effective type of an object for an access to its stored value is the declared type of the object, if any</i>&quot; together with the footnote &quot;<i>Allocated objects have no declared type</i>&quot;. This is in fact the <i>only</i> possibility for an object not having a declared type. If you pass a pointer to a function, you&#39;re either using <code>void *</code>, the correct declared type, or a wrong type. This last option is already a violation. So I don&#39;t see how this should be a problem for a compiler. It can safely assume the pointers don&#39;t alias."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500560972, "post_id": 45198576, "comment_id": 77401650, "body": "@FelixPalmen: I meant passing a pointer <i>into</i> a function.  If a function with a pointer-type parameter is called by outside code, it will generally have no way of knowing with certainty what types of object could be identified by the pointer.  It would be reasonable for a function that receives an argument of type <code>float*</code> and dereferences it without a typecast to expect that it would identify something of type <code>float*</code>, but given e.g. <code>uint32_t float_as_bits(float *fp) { return *(uint32_t*)fp;}</code> it shouldn&#39;t take a genius compiler to realize that <code>fp</code> should be presumed..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1500561435, "post_id": 45198576, "comment_id": 77402062, "body": "...capable of identifying either a <code>float</code> or an <code>uint32_t</code> when it is dereferenced, since nothing else happens to the object in question between the cast and the dereference.  Nothing in the rationale suggests that quality compilers for platforms where such conversions could be useful should ignore such evidence of aliasing.  More likely, such cases would have been seen as sufficiently <i>obvious</i> that compiler writers should be able to figure them out themselves whether the Standard mandates it or not."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1500489472, "creation_date": 1500489472, "answer_id": 45198576, "question_id": 45186287, "link": "https://stackoverflow.com/questions/45186287/does-copying-data-byte-wise-between-types-break-strict-aliasing/45198576#45198576", "title": "Does copying data byte wise between types break strict aliasing?", "body": "<p>In cases where the destination has a declared type, there is no problem, but in cases where the destination is known only via pointer the Standard is ambiguous.  According to the absolutely horribly written 6.5p6, copying data using <code>memcpy</code> or <code>memmove</code>, or \"as an array of character type\" [whatever that means] will cause the Effective Type of the source to be applied to the destination.  The Standard doesn't specify what one must do to copy a sequence of bytes without the operation being regarded as copying an \"array of character type\".</p>\n"}], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 2, "accepted_answer_id": 45186611, "answer_count": 2, "score": 10, "last_activity_date": 1500489472, "creation_date": 1500456209, "question_id": 45186287, "link": "https://stackoverflow.com/questions/45186287/does-copying-data-byte-wise-between-types-break-strict-aliasing", "title": "Does copying data byte wise between types break strict aliasing?", "body": "<p>Suppose I have 2 types <code>A</code> and <code>B</code> with same size and I have two variables </p>\n\n<pre><code>A a = ... ; // Initialized to some constant of type A\nB b;\n</code></pre>\n\n<p>If I copy the contents of <code>a</code> to <code>b</code> using something like -</p>\n\n<pre><code>assert(sizeof(A) == sizeof(B));\nsize_t t;\nfor( t=0; t &lt; sizeof(A); t++){\n    ((char*)&amp;b)[t] = ((char*)&amp;a)[t];\n}\n</code></pre>\n\n<p>Does this break strict aliasing rules of C?\nI know casting a pointer to <code>char*</code> and reading it is not UB but I am concerned about both the derefences involved in the assignment.</p>\n\n<p>If this is not UB, can this be a valid way for type punning?</p>\n"}, {"tags": ["c", "arrays", "language-lawyer"], "comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1500456263, "post_id": 45186243, "comment_id": 77340044, "body": "At a guess  6.5.6:9"}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 4, "creation_date": 1500456366, "post_id": 45186243, "comment_id": 77340116, "body": "&quot;&amp;array[x] &lt;= &amp;array[0]&quot;  ITYM &gt;=."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1500456232, "creation_date": 1500456232, "answer_id": 45186302, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186302#45186302", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>Yes, because <code>&amp;array[x]</code> is defined to be equivalent to <code>array+x</code>.</p>\n\n<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.2.1p2\" rel=\"nofollow noreferrer\">6.5.2.1p2</a>:</p>\n\n<blockquote>\n  <p>A postfix expression followed by an expression in square brackets []\n  is a subscripted designation of an element of an array object. The\n  definition of the subscript operator [] is that E1[E2] is identical to\n  (*((E1)+(E2))). Because of the conversion rules that apply to the\n  binary + operator, if E1 is an array object (equivalently, a pointer\n  to the initial element of an array object) and E2 is an integer,\n  E1[E2] designates the E2-th element of E1 (counting from zero).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1500456735, "last_edit_date": 1500456735, "creation_date": 1500456374, "answer_id": 45186350, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186350#45186350", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>The C11 standard <em>defines</em> the address difference between elements of an array as a number that depends on the relative (logical) order of the elements. As specified in the description of the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.6p9\" rel=\"nofollow noreferrer\">additive operators</a>:</p>\n\n<blockquote>\n  <p>When two pointers are subtracted, both shall point to elements of the\n  same array object, or one past the last element of the array object;\n  <strong>the result is the difference of the subscripts of the two array\n  elements.</strong> The size of the result is implementation-defined, and its\n  type (a signed integer type) is ptrdiff_t defined in the \n  header. If the result is not representable in an object of that type,\n  the behavior is undefined. In other words, if the expressions P and Q\n  point to, respectively, the i-th and j-th elements of an array object,\n  the expression (P)-(Q) has the value i-j provided the value fits in an\n  object of type ptrdiff_t. Moreover, if the expression P points either\n  to an element of an array object or one past the last element of an\n  array object, and the expression Q points to the last element of the\n  same array object, the expression ((Q)+1)-(P) has the same value as\n  ((Q)-(P))+1 and as -((P)-((Q)+1)), and has the value zero if the\n  expression P points one past the last element of the array object,\n  even though the expression (Q)+1 does not point to an element of the\n  array object.</p>\n</blockquote>\n\n<p>So the difference in your example is <strong>defined</strong> as <code>x - 0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1500457056, "post_id": 45186352, "comment_id": 77340598, "body": "@DavidBowling or my own stupidity for trying to be the FGITW"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1500457744, "post_id": 45186352, "comment_id": 77341147, "body": "Was already the same in C99, and for completeness is still the same in C++17. I really hate DV without comments!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1500458004, "post_id": 45186352, "comment_id": 77341335, "body": "@SergeBallesta I got the dvs when I was fgitwing, so np :D"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 12, "last_activity_date": 1566882899, "last_edit_date": 1566882899, "creation_date": 1500456378, "answer_id": 45186352, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186352#45186352", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>The address ordering is guaranteed. The behaviour of relational operators is defined in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.8p5\" rel=\"nofollow noreferrer\">C11 6.5.8p5</a>:</p>\n\n<blockquote>\n  <p>[...] pointers to array elements with larger subscript values compare greater than pointers to elements of the same array with lower subscript values. [...]</p>\n</blockquote>\n\n<p>Thus <code>&amp;array[x] &gt;= &amp;array[0]</code> is true always if <code>x</code> is the index of an element, or one greater than the maximum index. (And if <code>x</code> is not the index of an element, or one past the end of the actual array, then behaviour is undefined.)</p>\n\n<p>But surprisingly the <em>difference</em> <code>&amp;array[x] - &amp;array[0]</code> is defined <em>only</em> when</p>\n\n<ul>\n<li><code>x</code> is an actual index of an element or one greater than the maximum index in the array <strong>and</strong></li>\n<li><strong><code>x</code> is not greater than <code>PTRDIFF_MAX</code></strong></li>\n</ul>\n\n<p>as there is a peculiar corner case: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.6\" rel=\"nofollow noreferrer\">C11 6.5.6p9</a> says that</p>\n\n<blockquote>\n  <p>9 When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object; the result is the difference of the subscripts of the two array elements. <strong>The size of the result is implementation-defined, and its type (a signed integer type) is <code>ptrdiff_t</code> defined in the <code>&lt;stddef.h&gt;</code> header. If the result is not representable in an object of that type, the behavior is undefined.</strong> In other words, if the expressions P and Q point to, respectively, the i-th and j-th elements of an array object, the expression (P)-(Q) has the value <strong>i-j provided the value fits in an object of type <code>ptrdiff_t</code>.</strong>[...]</p>\n</blockquote>\n\n<p>If the signed <code>ptrdiff_t</code> is of same width as the unsigned <code>size_t</code>, it is possible to have an array for which there exists an index <code>x</code> greater than <code>PTRDIFF_MAX</code>; then <code>&amp;array[x] &gt;= &amp;array[0]</code> still, but <code>&amp;array[x] - &amp;array[0]</code> has completely undefined behaviour.</p>\n\n<hr>\n\n<p>Here is a demonstration. My computer is x86-64 that runs 64-bit Ubuntu Linux, but it is also capable of running 32-bit programs. In 32-bit X86 Linux + GCC, <code>ptrdiff_t</code> is a 32-bit signed integer, and <code>size_t</code> is 32-bit unsigned integer. A program run in 64-bit Linux in 32-bit mode can easily allocate over 2G of memory with malloc, as the entire 4G address space is reserved for user mode.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;stddef.h&gt;\n\nint main(void) {\n    size_t size = (size_t)PTRDIFF_MAX + 2;\n    size_t x = (size_t)PTRDIFF_MAX + 1;\n    char *array = malloc(size);\n    if (! array) {\n        perror(\"malloc\");\n        exit(1);\n    }\n    array[0] = 42;\n    array[x] = 84;\n    printf(\"&amp;array[0]: %p\\n\", (void *)&amp;array[0]);\n    printf(\"&amp;array[x]: %p\\n\", (void *)&amp;array[x]);\n    printf(\"&amp;array[x] &gt;= &amp;array[0]: %d\\n\", &amp;array[x] &gt;= &amp;array[0]);\n    printf(\"&amp;array[x] - &amp;array[1]: %td\\n\", &amp;array[x] - &amp;array[1]);\n    printf(\"&amp;array[x] - &amp;array[0]: %td\\n\", &amp;array[x] - &amp;array[0]);\n    printf(\"(&amp;array[x] - &amp;array[0]) &lt; 0: %d\\n\", (&amp;array[x] - &amp;array[0]) &lt; 0);\n}\n</code></pre>\n\n<p>Then compiled for 32-bit mode and run:</p>\n\n<pre><code>% gcc huge.c -m32 -Wall &amp;&amp; ./a.out \n&amp;array[0]: 0x77567008\n&amp;array[x]: 0xf7567008\n&amp;array[x] &gt;= &amp;array[0]: 1\n&amp;array[x] - &amp;array[1]: 2147483647\n&amp;array[x] - &amp;array[0]: -2147483648\n(&amp;array[x] - &amp;array[0]) &lt; 0: 1\n</code></pre>\n\n<p>The memory was allocated successfully, the starting address is at 0x77558008, <code>&amp;array[x]</code> is at <code>0xf7504008</code>, <code>&amp;array[x]</code> is greater than <code>&amp;array[0]</code>. The difference <code>&amp;array[x] - &amp;array[1]</code> produced a positive result, whereas <code>&amp;array[x] - &amp;array[0]</code>, with its undefined behaviour, now produced a negative result!</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1500458888, "last_edit_date": 1500458888, "creation_date": 1500456397, "answer_id": 45186364, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186364#45186364", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>First of all, FWIW, quoting <code>C11</code>, chapter \u00a76.5.6/P9, (<em>emphsis mine</em>)</p>\n\n<blockquote>\n  <p>When two pointers are subtracted, both shall point to elements of the same array object,\n  or one past the last element of the array object; the result is the <strong>difference of the\n  subscripts</strong> of the two array elements. [...]</p>\n</blockquote>\n\n<p>So, you don't need to be bothered about the individual pointer <em>value</em> (positioning) itself. It's the <em>difference</em> that matters (i.e, something like <code>|a-b|</code>)</p>\n\n<hr>\n\n<p>That said, if it has to come to the \"comparison\", ( usage of relational operators, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>), the standard says,</p>\n\n<blockquote>\n  <p>When two pointers are compared, the result depends on the relative locations in the\n  address space of the objects pointed to. [....] If the objects pointed to are members of the same aggregate object, [...] and <strong>pointers to array elements with larger subscript\n  values compare greater than pointers to elements of the same array with lower subscript values.</strong> [....]</p>\n</blockquote>\n\n<p>So, for a statement like <code>&amp;array[x] &lt;= &amp;array[0]</code>, it will evaluate to <code>0</code> (<strong>FALSY</strong>), when <code>x &gt; 0</code>.</p>\n\n<p><sub> <a href=\"https://stackoverflow.com/a/45186386/2173917\">Thanks to the other answer by Joachim</a></sub></p>\n"}, {"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500457488, "post_id": 45186386, "comment_id": 77340964, "body": "<i><b>pointers to elements of the same array</b></i> If <code>x</code> is less than <code>0</code>, pointers are invalid and can not be compared."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1500456850, "last_edit_date": 1500456850, "creation_date": 1500456454, "answer_id": 45186386, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186386#45186386", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>From the C11 specification (ISO/IEC 9899:2011 (E)) \u00a76.5.8/5:</p>\n\n<blockquote>\n  <p>When two pointers are compared, ... If the objects pointed to are members of the same aggregate object, ... <strong>and pointers to array elements with larger subscript values compare greater than pointers to elements of the same array with lower subscript values</strong>.</p>\n</blockquote>\n\n<p>That means that <code>&amp;array[x] &lt;= &amp;array[0]</code> will be <em>false</em> unless <code>x</code> is equal to zero.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8330528, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zJ3fjNdq1eY/AAAAAAAAAAI/AAAAAAAA0A8/BTv4cqUOCFo/photo.jpg?sz=128", "display_name": "Graeme McKerrell", "link": "https://stackoverflow.com/users/8330528/graeme-mckerrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1500456634, "creation_date": 1500456634, "answer_id": 45186458, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45186458#45186458", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>Given that traversing a array can also be achieve by incrementing a pointer, it would appear to be fairly fundamental that the absolute address of subsequent indexes increase.</p>\n\n<pre><code>char[] foobar;\nchar *foobarPtr = foobar;\n\nfoobar[0] == *foobarPtr++;\nfoobar[1] == *foobarPtr++;\n</code></pre>\n\n<p><a href=\"https://www.tutorialspoint.com/cprogramming/c_pointer_to_an_array.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cprogramming/c_pointer_to_an_array.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1500459489, "creation_date": 1500459489, "answer_id": 45187599, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el/45187599#45187599", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<pre><code>index = &amp;array[x] - &amp;array[0];\n</code></pre>\n\n<p>is syntactic sugar for </p>\n\n<pre><code>index = (array+x) - (array+0)\n</code></pre>\n\n<p>because in C any array is desugared as pointer.</p>\n\n<p>Now given the <code>pointer arithmetic</code> it will be rewritten as <code>index = x</code></p>\n\n<p>The relevant topics you can google for or search inside ISO9899 are <code>pointer arithmetic</code> and <a href=\"https://en.wikipedia.org/wiki/Syntactic_sugar#Notable_examples\" rel=\"nofollow noreferrer\">desugaring arrays as pointers</a>.</p>\n"}], "owner": {"reputation": 18613, "user_id": 131679, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4cb7f78dca34d0e27931f743f3aa1f30?s=128&d=identicon&r=PG", "display_name": "gramm", "link": "https://stackoverflow.com/users/131679/gramm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 45186352, "answer_count": 7, "score": 7, "last_activity_date": 1566882899, "creation_date": 1500456098, "last_edit_date": 1500465258, "question_id": 45186243, "link": "https://stackoverflow.com/questions/45186243/in-c-is-it-guaranteed-that-the-array-start-address-is-smaller-than-the-other-el", "title": "In C, is it guaranteed that the array start address is smaller than the other elements&#39; addresses?", "body": "<p>In other word when doing </p>\n\n<pre><code>index = &amp;array[x] - &amp;array[0];\n</code></pre>\n\n<p>Is it always guaranteed (per C standard) that &amp;array[0] &lt;= &amp;array[x], or is it dependent on the compiler?\nWhat are the C standard chapters relevant for this topic ?</p>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 160, "user_id": 6594779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/847c25720c1e7423a97c7894b530bfa4?s=128&d=identicon&r=PG&f=1", "display_name": "svtag", "link": "https://stackoverflow.com/users/6594779/svtag"}, "edited": false, "score": 3, "creation_date": 1500454493, "post_id": 45185502, "comment_id": 77338813, "body": "When a <code>float</code> value is assigned to <code>int</code> values, an internal conversion takes place. <code>round()</code> gives an double value, so if no conversion is performed it&#39;s value remains double. In this specified case <code>printf(&quot;%i\\n&quot;, round(1.21*100));</code> no conversion is performed, so it requires &#39;%f&#39; specifier to print float value."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500456236, "post_id": 45185580, "comment_id": 77340020, "body": "well, &quot;no conversion is made&quot;, the default argument promotions are done nevertheless."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500456545, "post_id": 45185580, "comment_id": 77340221, "body": "@AnttiHaapala Well since the function returns a <code>double</code> value, and the default argument promotion would be to a <code>double</code>, in this specific case no conversion is done."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 16, "last_activity_date": 1500455011, "last_edit_date": 1500455011, "creation_date": 1500454472, "answer_id": 45185580, "question_id": 45185502, "link": "https://stackoverflow.com/questions/45185502/data-type-confusion-in-c/45185580#45185580", "title": "data type confusion in C", "body": "<p>When you do</p>\n\n<pre><code>int i = round(f*100); \n</code></pre>\n\n<p>you <em>convert</em> the result of the <code>double</code> function <a href=\"http://en.cppreference.com/w/c/numeric/math/round\" rel=\"noreferrer\"><code>round</code></a>. The converted result is stored in the <code>int</code> variable <code>i</code>, which can be used with the format <code>\"%i\"</code> as it expects an <code>int</code> argument.</p>\n\n<p>When you pass the <code>double</code> result of <code>round</code> directly as an argument to a format that expects an <code>int</code> you have mismatching format and argument types. That leads to <em>undefined behavior</em>.</p>\n\n<p>No conversion is made in the call to <code>printf</code>, and no conversion <em>can</em> be made since the code inside the <code>printf</code> function doesn't know the actual type of the argument. All it knows is the format <code>\"%i\"</code>. All possible type-information is lost for variable-argument functions.</p>\n"}, {"tags": [], "owner": {"reputation": 783, "user_id": 406486, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a485e45b7121f0ee50092d54e67dbbb7?s=128&d=identicon&r=PG", "display_name": "Darshan Prajapati", "link": "https://stackoverflow.com/users/406486/darshan-prajapati"}, "is_accepted": false, "score": 5, "last_activity_date": 1500454859, "creation_date": 1500454859, "answer_id": 45185724, "question_id": 45185502, "link": "https://stackoverflow.com/questions/45185502/data-type-confusion-in-c/45185724#45185724", "title": "data type confusion in C", "body": "<p>This is because of the behavior of automatic type casting. In printf, automatic typecasting does not work. When you say %i, it simply expects integer, it can not convert double to integer and then print.</p>\n\n<p>In assignment operation, double is converted to integer first and then it is assigned to left operand of the = operator. I hope this helps.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1500457555, "last_edit_date": 1500457555, "creation_date": 1500456377, "answer_id": 45186351, "question_id": 45185502, "link": "https://stackoverflow.com/questions/45185502/data-type-confusion-in-c/45186351#45186351", "title": "data type confusion in C", "body": "<p>This is a bit of duplication, but maybe helps for a better understanding:</p>\n\n<ol>\n<li><p><code>round()</code> has the following prototype:</p>\n\n<pre><code>double round(double x);\n</code></pre>\n\n<p>so it returns <code>double</code>.</p></li>\n<li><p>There is an <em>implicit conversion</em> from <code>double</code> to <code>int</code> in C, so writing</p>\n\n<pre><code>int i = round(f*100);\n</code></pre>\n\n<p>will convert the result of <code>round()</code> to <code>int</code>.</p></li>\n<li><p>If you have a function that expects an int, e.g.</p>\n\n<pre><code>void printMyNumber(int number)\n{\n    printf(\"%i\\n\", number);\n}\n</code></pre>\n\n<p>you can call it like this:</p>\n\n<pre><code>printMyNumber(round(f*100));\n</code></pre>\n\n<p>and the implicit conversion works as expected, because the compiler sees both types (the return type from <code>round()</code> and the expected argument type of <code>printMyNumber()</code>).</p></li>\n<li><p>The reason this doesn't work with <code>printf()</code> is that the prototype of <code>printf()</code> looks like this:</p>\n\n<pre><code>printf(const char *format, ...);\n</code></pre>\n\n<p>so, except for the first argument, the types of the arguments are <em>unknown</em>. Therefore, whatever you pass is passed without any conversion (except for <a href=\"https://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\">default argument promotions</a>). Of course, you could use a <em>cast</em> to achieve an <em>explicit conversion</em> instead:</p>\n\n<pre><code>printf(\"%i\\n\", (int) round(f*100)); // &lt;- this is fine\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 517, "user_id": 5912649, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97e701b1332da24fab4ad6e145e7b8e5?s=128&d=identicon&r=PG&f=1", "display_name": "juanli", "link": "https://stackoverflow.com/users/5912649/juanli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 1, "accepted_answer_id": 45185580, "answer_count": 3, "score": 5, "last_activity_date": 1500459227, "creation_date": 1500454228, "last_edit_date": 1500459227, "question_id": 45185502, "link": "https://stackoverflow.com/questions/45185502/data-type-confusion-in-c", "title": "data type confusion in C", "body": "<p>The following code works: </p>\n\n<pre><code>int main(void)\n{  \n   float f = get_float();\n   int i = round(f*100);\n   printf(\"%i\\n\", i); \n}\n</code></pre>\n\n<p>Yet, error generated if coding this way:</p>\n\n<pre><code>printf(\"%i\\n\", round(1.21*100));\n</code></pre>\n\n<p>Output says <code>round(1.21*100)</code> is <code>float</code>. So, then why </p>\n\n<pre><code>int i = round(f*100); \n</code></pre>\n\n<p>is fine? </p>\n"}, {"tags": ["c", "casting", "floating-point"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 2, "creation_date": 1500452866, "post_id": 45184955, "comment_id": 77337631, "body": "Float accepts values up to <code>3.402823 &#215; 10^38</code> while <code>uint32_t</code> up to <code>(2^32)-1</code>. You are safe until your float is not bigger than maximal value of int you are casting to."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1500452942, "post_id": 45184955, "comment_id": 77337688, "body": "A <code>float</code> in the range <code>INT_MIN</code> to <code>INT_MAX</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1500453173, "post_id": 45184955, "comment_id": 77337844, "body": "C++ may be a bit easier to work with in this instance because of <code>numeric_limits</code>. I suppose the same could be done in C using the defines. Also see <a href=\"https://stackoverflow.com/q/37580501/608639\">Normalized Integer to/from Float Conversion</a> and <a href=\"https://stackoverflow.com/q/599976/608639\">Convert/Quantize Float Range to Integer Range</a>"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1500453231, "post_id": 45184955, "comment_id": 77337881, "body": "According to your modified question, answer is no. They can&#39;t be compared as float structure is completely different to int structure."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500453303, "post_id": 45184955, "comment_id": 77337920, "body": "There is no requirement in C as to how <code>float</code> should be represented."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500453457, "post_id": 45184955, "comment_id": 77338055, "body": "@WeatherVane that&#39;s true, but since most of them have IEEE 754 standard implemented, we can say that answer is still no."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1500453972, "post_id": 45184955, "comment_id": 77338422, "body": "@tilz0R If we assume IEEE 754 standard for representing floats then the comparison should be valid directly. Because exponents are stored before the mantissa."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500454225, "post_id": 45184955, "comment_id": 77338591, "body": "@AjayBrahmakshatriya For example, number <code>4</code> in <code>int</code> is represented as <code>0x00000004</code> while the same number <code>4</code> is represented in float (by IEEE754 standard) as <code>0x40800000</code>. How is this the same?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1500454443, "post_id": 45184955, "comment_id": 77338771, "body": "@tilz0R Yes, 4 is 0x40800000 in float but 5.0 is 0x40a00000. The comparison   <code>0x40800000 &lt; 0x40a00000 -&gt; 4.0 &lt; 5.0</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 2, "creation_date": 1500454499, "post_id": 45184955, "comment_id": 77338819, "body": "@tilz0R OP is not comparing a float with other unsigned. I believe he is type punning 2 floats into unsigned integers and comparing the integers."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500459408, "post_id": 45184955, "comment_id": 77342349, "body": "<b>You cannot cast the pointer</b>, it is UB, and it will bite you. The compilers will keep the floats in floating point registers, they&#39;re not flushed into memory upon access to some int pointer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500464470, "post_id": 45184955, "comment_id": 77345885, "body": "@WeatherVane <a href=\"https://stackoverflow.com/users/4142924/weather-vane\">Almost completely right</a> A  float in the range <code>[INT_MIN.99999.... to INT_MAX.99999....]</code> as conversion from <code>float</code> to <code>int</code> is defined for a slightly larger range."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500470248, "post_id": 45184955, "comment_id": 77350745, "body": "@chux agree its not great, I didn&#39;t think the question would be misunderstood as it was, I&#39;ve since added an example in the question."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500454241, "post_id": 45185154, "comment_id": 77338604, "body": "If the exponent is stored before the mantissa (and a single cohurt is enforced), the constraint <i>if the values are within the same range of powers of 2</i> can be relaxed right?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500456206, "post_id": 45185154, "comment_id": 77339999, "body": "@AjayBrahmakshatriya: if the values are not both negative, it seems the comparison as int can work for some architectures. Interesting."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "edited": false, "score": 0, "creation_date": 1500470593, "post_id": 45185154, "comment_id": 77351052, "body": "Note that this question is <b>specifically</b> about values from 0 to 1. But this answer is phrased as if the question is about all floating point values (which won&#39;t work of course). To the question I asked, the short answer is <b>Yes</b> AFAICS, note that while I did edit the question heavily, the 0..1 part was there from the start."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "edited": false, "score": 0, "creation_date": 1500477007, "post_id": 45185154, "comment_id": 77356479, "body": "@ideasman42: indeed the answer is yes, if a number of conditions are met and the values are not <code>+0.0</code> and <code>-0.0</code>."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1500479098, "last_edit_date": 1500479098, "creation_date": 1500453314, "answer_id": 45185154, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45185154#45185154", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>The long answer is: <strong>Yes</strong>, but with multiple restrictions and caveats. \n Comparing floats in the range <code>0</code> to <code>1</code> as integers may yield the correct result in many cases.  As a matter of fact, the values need not be restricted to this range:</p>\n\n<ul>\n<li><p>Assuming the <code>float</code> type has 32-bit single precision IEEE-754 representation and the <code>int</code> type has 32-bit 2's complement representation without padding bits (ie <code>int is</code>int32_t`);</p></li>\n<li><p>Assuming neither of the <code>float</code> values are NaN;</p></li>\n<li><p>Assuming the values are in normal or sub-normal form;</p></li>\n<li><p>Assuming <code>float</code> and <code>int</code> representations have the same endianness in memory;</p></li>\n<li><p>if the values are equal, comparing as <code>int</code> will yield the correct result unless you are comparing <code>+0.0</code> and <code>-0.0</code>.</p></li>\n<li><p>if the values are not both negative, the comparison as <code>int</code> may indeed yield the correct result, but the C Standard makes no guarantee and accessing the <code>float</code> values as <code>int</code> breaks the strict aliasing rule in most circumstances.</p></li>\n<li><p>if the values are both negative and the other constraints are matched, the comparison result should be negated.</p></li>\n</ul>\n\n<p>For your side question: some integer values may indeed have an identical representation as <code>int</code> and <code>float</code>, notably <code>0</code>, but the floating point value <code>-0.0</code> has a different representation yet compares equal to <code>0.0</code> as <code>float</code>. There are only two other special cases of integers that have the same representation as <code>int32_t</code> and IEEE-754 <code>float</code>: <code>1318926965</code> (<code>0x4E9D3A75</code>) and <code>-834214802</code> (<code>0xCE46E46E</code>).</p>\n\n<p>You can look at the actual representation of floating point values for the IEEE format, overwhelmingly common but not mandated by the C Standard here:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">Single-precision floating-point format</a></li>\n</ul>\n\n<p>For your specific case, if you know the values are in the range <code>0</code> to <code>1</code>, the only special case you should handle is the negative <code>0</code>. You can for the sign as positive by masking the value and the code will look like:</p>\n\n<pre><code>/* return 0 if p1 and p2 point to the same float value,\n   -1 if p1 points to a smaller value and\n   +1 otherwise.\n */\nint compare_floats_as_ints(const int32_t *p1, const int32_t *p2) {\n    int32_t i1 = *p1 &amp; 0x7fffffff;\n    int32_t i2 = *p2 &amp; 0x7fffffff;\n    return (i1 &gt; i2) - (i1 &lt; i2);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 0, "creation_date": 1500453610, "post_id": 45185242, "comment_id": 77338167, "body": "I think it was about comparing floats with floats, not floats with ints."}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1500453708, "last_edit_date": 1500453708, "creation_date": 1500453567, "answer_id": 45185242, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45185242#45185242", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>As from my understanding, you want to read float number from memory as unsigned/signed integer and I will give you answer for that.</p>\n\n<p>You cannot compare <code>float</code> with <code>signed</code> or <code>unsigned</code> int (32-bit).</p>\n\n<p>For example, number <code>4</code> in <code>int</code> is represented as <code>0x00000004</code> while the same number <code>4</code> is represented in float (by IEEE754 standard) as <code>0x40800000</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 2, "last_activity_date": 1500454453, "last_edit_date": 1500454453, "creation_date": 1500453631, "answer_id": 45185273, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45185273#45185273", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>The way I interpret you question: When interpreting the bit pattern of a floating point number in memory as a int, will the usual comparison operators behave the same for floating point numbers and integers.</p>\n\n<p>The answer is no. Strictly speaking, the C standard has a few possible integer representations and even more possible float representations. But even limiting ourselves to what pretty much everyone does - two's complement integers and ieee754 binary32 floating point, the answer is still no.</p>\n\n<p>The simplest example: floating points have two zeroes. The bit pattern 0x00000000 and the bit pattern 0x80000000 represent the numbers 0 and -0. They both compare equal as floating point, they wouldn't if interpreted as integers. Then you have two infinities, and a whole lot of bit patterns that represent NaN.</p>\n\n<p>You could enumerate the special cases and avoid them and then I'm pretty sure that a comparison as integers would work, but whatever performance gain you get from integer comparisons (which I assume is the point here) you'd gain you'd lose much more in avoiding the special cases.</p>\n\n<p>Responding to your last edit: Yes, in the range 0 to 1, the bit pattern for ieee754 floating point numbers is such that when interpreted as integers the normal integer comparison operators will behave the way you want. It's a bad idea, but it would work.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500459608, "post_id": 45185303, "comment_id": 77342495, "body": "You&#39;re misusing the abbreviation UB there especially in the first <code>if</code>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500460093, "post_id": 45185303, "comment_id": 77342819, "body": "@Antti Haapala and you do too much semantics. Logically it is UB as the result of such a comparition is unpredictable. It can be true if mathematically a.fl != b.fl and false when using common arithmetic knowledge it should be true."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500462297, "post_id": 45185303, "comment_id": 77344350, "body": "@Antti Haapala UB? Really? It has two meanings :  <b>Unspecified behaviour</b>  and <b>Undefined behaviour</b>. Probably you have never heard about the first one. Read the related documents first."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1500462519, "post_id": 45185303, "comment_id": 77344499, "body": "<code>a.fl == b.fl</code> has <i>specified behaviour</i>. It has behaviour that is very much specified by the standard."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -3, "last_activity_date": 1500453717, "creation_date": 1500453717, "answer_id": 45185303, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45185303#45185303", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>It does not matter if you compare uint from the union with float or the float itself. Same rules.</p>\n\n<p>if you have two operations:</p>\n\n<pre><code>union {\n  float fl;\n  uint32_t ui;\n} a, b\n\nfloat a.fl = (math expressions);\nfloat b.fl = (another math expressions); // both giving theoretically the same results\n\n// comparition of\n\nif(a.fl == b.fl) .... //UB - as float shall not be compared for being equal\nif(a.ui == b.ui) .... //UB - as ui is an unsigned representation of the bytes of fl\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1500454263, "post_id": 45185459, "comment_id": 77338632, "body": "For example, number <code>4</code> in <code>int</code> is represented as <code>0x00000004</code> while the same number <code>4</code> is represented in float (by IEEE754 standard) as <code>0x40800000</code>. How is this the same?"}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1500454516, "post_id": 45185459, "comment_id": 77338828, "body": "The values are not the same, but the comparison is (when both values are transmuted to ints and compared) - for values 0-1 at least."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500456851, "post_id": 45185459, "comment_id": 77340466, "body": "@chqrlie are you sure? - the C code above deals only with positive floats."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500464957, "post_id": 45185459, "comment_id": 77346281, "body": "&quot;qualification that inputs are positive, normalized float values&quot; should be &quot;qualification that inputs are positive, float values&quot;.  normal and sub-normals work"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500465460, "post_id": 45185459, "comment_id": 77346682, "body": "A key element missing is the <i>assumption</i> that the endian of <code>float</code> and <code>int</code> are the same.  There are not specified to be so.  So this is a failing case."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500465751, "post_id": 45185459, "comment_id": 77346924, "body": "Also missing: is the <i>assumption</i> <code>float</code>, and <code>unsigned</code> are the same size and <code>unsigned</code> has no padding - a failing case.  Part of this was implied in the question, yet &quot;float32&#39;s as int32 or uint32&quot; is open for interpretation as those are not standard types. Better to use <code>uint32_t</code> since you have all ready assumed IEEE <code>float</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500465773, "post_id": 45185459, "comment_id": 77346940, "body": "&quot;Here is a proof that this works:&quot; is not proof, but evidence that it can work.  Other platforms could have failed given the above concerns."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500467501, "post_id": 45185459, "comment_id": 77348365, "body": "@ideasman42: oops, on the contrary: since IEEE uses sign+magnitude, the values must <b>not</b> be both negative for the comparison as <code>int</code> to succeed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500467532, "post_id": 45185459, "comment_id": 77348384, "body": "@ideasman42 If you like, I can delete these comments as I have rolled them into an answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500467896, "post_id": 45185459, "comment_id": 77348688, "body": "@chqrlie negatives work if <code>int</code> is signed magnitude too.  Yes - only on a machine in a silicon graveyard. ;-)"}], "tags": [], "owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "is_accepted": false, "score": 1, "last_activity_date": 1516316564, "last_edit_date": 1516316564, "creation_date": 1500454150, "answer_id": 45185459, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45185459#45185459", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>The answer is yes, with the qualifications that:</p>\n\n<ul>\n<li>float &amp; int are the same size.</li>\n<li>inputs are positive, float values that don't include:<br><code>-0.0</code>, <code>-inf</code>, <code>nan</code>, <code>-nan</code>.</li>\n</ul>\n\n<p>Details:</p>\n\n<ul>\n<li>Both <code>signed int</code> and <code>unsigned int</code> can be used with matching comparisons.</li>\n<li>Assumes IEEE754 32bit floating point.</li>\n<li>Both int &amp; float need to be the same endian <em>(do architectures exist where this is not the case?)</em></li>\n<li>Not just <code>0-1</code>, <code>0.0..FLT_MAX</code> and <code>inf</code> can be compared.</li>\n<li>For completeness, negative values: <code>-0.0..-FLT_MAX</code> can be compared too but will always have a flipped order, eg:<br><code>assert(float_as_int(a) &gt; float_as_int(b) == a &lt; b);</code></li>\n</ul>\n\n<p>In this case, 2x floats represented as ints can be compared, giving the same results.</p>\n\n<p>Here is a evidence that this can work:</p>\n\n<p>C code, tests the full, unsigned float range.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;float.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    unsigned step = 0;\n    union {\n        float f;\n        unsigned u;\n    } value;\n\n    value.f = 0.0;\n\n    unsigned u_prev = value.u;\n\n    while (value.f != FLT_MAX) {\n        value.f = nextafterf(value.f, FLT_MAX);\n        unsigned u = value.u;\n        if (u &lt;= u_prev) {\n            printf(\"At value %f, step %u, comparisons don't match\\n\", value.f, step);\n            break;\n        }\n        u_prev = u;\n        step++;\n    }\n    printf(\"Tested %u times\\n\", step);\n\n    return 0;\n}\n</code></pre>\n\n<p>a Python3 script, checking all values from 0-1 with <code>nextafterf</code>, note that this is slow <em>(hence the C version above)</em>.</p>\n\n<pre><code>def main():\n    from struct import pack, unpack\n    as_u32_prev = None\n    value = 0.0\n    while True:\n        # transmute float to int\n        as_u32 = unpack('I', pack('f', value))\n        if as_u32_prev is not None:\n            if as_u32_prev &gt; as_u32:\n                raise Exception(\"f32/u32 comparisons don't match\")\n        as_u32_prev = as_u32\n        if value == 1.0:\n            break\n        value = nextafterf(value, 1.0)\n\n# Boiler Plate, see: https://stackoverflow.com/questions/6063755\n\nimport ctypes\nimport sys\nfrom sys import platform as _platform\n\nif _platform == \"linux\" or _platform == \"linux2\":\n    _libm = ctypes.cdll.LoadLibrary('libm.so.6')\n    _funcname_f = 'nextafterf'\nelif _platform == \"darwin\":\n    _libm = ctypes.cdll.LoadLibrary('libSystem.dylib')\n    _funcname_f = 'nextafterf'\nelif _platform == \"win32\":\n    _libm = ctypes.cdll.LoadLibrary('msvcrt.dll')\n    _funcname_f = '_nextafterf'\nelse:\n    # these are the ones I have access to...\n    # fill in library and function name for your system math dll\n    print(\"Platform\", repr(_platform), \"is not supported\")\n    sys.exit(0)\n\nnextafterf = getattr(_libm, _funcname_f)\nnextafterf.restype = ctypes.c_float\nnextafterf.argtypes = [ctypes.c_float, ctypes.c_float]\n\nmain()\n</code></pre>\n\n<hr>\n\n<p>Note that other answers here say that this wont work in all cases,\nI'd be interested to know which cases the examples in this answer would fail, <em>(besides architectures where float and int aren't 4 bytes in size)</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1500478167, "post_id": 45190635, "comment_id": 77357401, "body": "quite an elegant way to handle negative values including <code>-0.0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500482856, "post_id": 45190635, "comment_id": 77360329, "body": "@chqrlie For C99 onward, yes  type punning is OK  <a href=\"https://stackoverflow.com/q/11639947/2410359\">ref</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1501128313, "post_id": 45190635, "comment_id": 77643917, "body": "<code>int32_t</code> is guaranteed to be 32-bit 2&#39;s complement with no padding, so you only need points 1 and 4 in your list"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1501132339, "post_id": 45190635, "comment_id": 77645216, "body": "@M.M Agree - could minimize to those 2, yet <code>(u)int32_t</code> are example integer types.  General types would need additional conditions, as you say, that are all ready satisfied with the classic fixed-width types and binary32."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1501124969, "last_edit_date": 1501124969, "creation_date": 1500467338, "answer_id": 45190635, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45190635#45190635", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<blockquote>\n  <p>Can 32 bit floats between zero and one be compared (with the same outcome) if they're transmuted to int/uint?</p>\n</blockquote>\n\n<p>Using a <code>union</code> will work for comparing <code>float</code> in the range (zero and one) and  <strong>if</strong> all the list below can be insured.</p>\n\n<p>Otherwise the general answer is no.  It might work, it might not.</p>\n\n<pre><code>union x {\n  float f;\n  int32_t i;\n  uint32_t u;\n} a,b ;\na.f = foo(); \nb.f = foo(); \n// for all a.f and b.f in range\nassert((a.u &gt; b.u) == (a.f &gt; b.f));\nassert((a.u &lt; b.u) == (a.f &lt; b.f));\nassert((a.u == b.u) == (a.f == b.f));\n// also for a.i\n</code></pre>\n\n<ol>\n<li><code>float</code> is <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">binary32</a></li>\n<li>The integer type is not padded. (example: <code>(u)intN_t</code>) types.</li>\n<li>The integer may be any encoding: 2's complement, 1's complement, sign-magnitude</li>\n<li>The integer has same endian as <code>float</code>.  C does not require this.</li>\n<li>The integer/FP type size are the same. (This was implied in the question).</li>\n</ol>\n\n<p>This also works for the extended range of [+0.0 ... +INF].  It does not hold for -0.0.</p>\n\n<hr>\n\n<p>To compare 2 <em>any</em> finite/infinite <code>float</code> given the same endian-ness, expected <code>float</code> encoding and the above conditions:</p>\n\n<pre><code>int32_t sequence_f(float x) {\n  union {\n    float f;\n    int32_t i32;\n    uint32_t u32;\n  } u;\n  assert(sizeof(float) == sizeof(uint32_t));\n  u.f = x;\n  if (u.i32 &lt; 0) {\n    u.u32 = 0x80000000 - u.u32;\n  }\n  //  printf(\"% 16.8e % 11d\\n\", x, u.i32);\n  return u.i32;\n}\n\n// return + +,0,- without FP math.\n// valid for all finite/infinite values, not valid for NaN\n// +0.0 -0.0 compare the same.\nint compare(float fa, float fb) {\n  int32_t ia = sequence_f(fa);\n  int32_t ib = sequence_f(fb);\n  return (ia &gt; ib) - (ia &lt; ib);\n}\n</code></pre>\n\n<p>This is useful for embedded applications that need to perform FP compare, yet not other FP math.</p>\n\n<hr>\n\n<p>In general, casting is UB due to anti-aliasing.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5368518"}, "is_accepted": false, "score": 1, "last_activity_date": 1500471197, "last_edit_date": 1500471197, "creation_date": 1500469802, "answer_id": 45191641, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th/45191641#45191641", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<h1>The answer first</h1>\n\n<p>Yes, you can compare a binary representations of <code>float</code> as long as they are using IEEE-754 format, integers are 2's complement, you are comparing positive values or positive value with the negative, and you are treating the special cases properly.</p>\n\n<p><a href=\"http://ideone.com/s1i4rE\" rel=\"nofollow noreferrer\">Snippet on Ideone.com in C</a></p>\n\n<h1>The explanation</h1>\n\n<p>An IEEE-754 float (4 bytes) has the following structure:</p>\n\n<pre><code>     s::::::::.......................    meaning\n    31                              0    bit #\n\n    s = sign bit, : = exponent, . = mantissa\n</code></pre>\n\n<p>The value is coded as a <code>mantissa * 2 ^ exponent</code>. The exponent range is <code>0x00</code> to <code>0xFF</code>, and it represents values <code>-127</code> to <code>128</code> (<code>0x7F</code> corresponds to <code>0</code>).</p>\n\n<p>The mantissa represents <em>a binary fraction</em> with an implied <code>1b</code> always present to the left of the decimal. Each bit of mantissa represents a value of <code>2 ^ -(n+1)</code>, where <code>n</code> is an index of a bit from the left. The leftmost bit of mantissa has a value of <code>0.5</code>, second on the left <code>0.25</code>, third on the left <code>0.125</code>, and so on.</p>\n\n<p>The value <code>0.5</code> will have mantissa <code>b0000...</code> (<code>b1.0</code>) and the exponent <code>0x7E</code> (<code>-1</code>).<br>\nThe value <code>0.03</code> will have mantissa <code>b1110...</code> (<code>b1.1110...</code>) and the exponent <code>0x79</code> (<code>-6</code>).<br>\nThese values would be stored as:</p>\n\n<pre><code>0 01111110 00000000000000000000000    (0x3F000000)\n0 01111001 11101011100001010001111    (0x3CF5C28F)\n</code></pre>\n\n<p>The lowest value you can store is <code>1.0 * 2 ^ -127</code> (all bits of mantissa and exponent are zero). That is a special case and represents a <code>0</code>. The exponent value <code>0xFF</code> is reserved for <code>NaN</code> and <code>infinity</code>.</p>\n\n<p><a href=\"http://www.cprogramming.com/tutorial/floating_point/understanding_floating_point_representation.html\" rel=\"nofollow noreferrer\">Floating point number representation</a></p>\n\n<p>You can compare a negative <code>float</code> value with the positive if you are using <code>signed int</code> because the sign flag is being stored in the highest bit for both <code>signed int</code> and <code>float</code>. You can not compare two negative <code>float</code> values like this tho, as the negation of <code>int</code> is not being done by inversion of the sign flag only.</p>\n"}], "owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 7, "score": 2, "last_activity_date": 1516316564, "creation_date": 1500452756, "last_edit_date": 1500471411, "question_id": 45184955, "link": "https://stackoverflow.com/questions/45184955/can-32-bit-floats-between-zero-and-one-be-compared-with-the-same-outcome-if-th", "title": "Can 32 bit floats between zero and one be compared (with the same outcome) if they&#39;re transmuted to int/uint?", "body": "<p>When representing two float32's as int32 or uint32 (using union or casting pointer types), Within a limited range (0..1), can these values be compared against each other, that would match the result of the comparison when executed as floats?</p>\n\n<p>Example:</p>\n\n<pre><code>int float_as_int(float f) {\n    union { int i; float f; } u;\n    u.f = f;\n    return u.i;\n}\n\n/* Assert the following is always true for values in a limited range. */\nvoid assert_compare_works_as_expected(float a, float b) {\n    assert(float_as_int(a) &lt; float_as_int(b) == a &lt; b);\n}\n\n/* Psudocode */\nint main() {\n    for f in 0..1 {\n        assert_compare_works_as_expected(f_prev, f);\n        f_prev = f;\n    }\n}\n</code></pre>\n\n<p>If not, what float ranges map directly to ints so comparison can be done?</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1500451775, "post_id": 45184529, "comment_id": 77336937, "body": "The &quot;where&quot; could be as simple as a list of all macros in the current <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation unit</a>, and the &quot;how&quot; (in regards to checking with <code>#ifdef</code>) is simply looking for the macro in the list."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500452025, "post_id": 45184529, "comment_id": 77337093, "body": "How can I locate and print this macro list?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500452074, "post_id": 45184529, "comment_id": 77337123, "body": "@CIsForCookies for <code>gcc</code>, <a href=\"https://stackoverflow.com/questions/2224334/gcc-dump-preprocessor-defines\">look here</a> (of course, instead of <code>&#47;dev&#47;null</code>, feed it your actual source file)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1500452091, "post_id": 45184529, "comment_id": 77337133, "body": "That depends on the compiler you&#39;re using. It might have options to give you that list. Or it might not have."}], "answers": [{"comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1500452270, "post_id": 45184590, "comment_id": 77337261, "body": "I&#39;m trying to check it against <b>#define debug &quot;&quot;</b> but that throws an error:  token &quot;&quot;&quot;&quot; is not valid in preprocessor expressions"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1500452500, "post_id": 45184590, "comment_id": 77337394, "body": "@CIsForCookies Don&#39;t confuse preprocessor syntax with C syntax. A preprocessor token can of course contain <code>&quot;&quot;</code>, for the preprocessor, this are just two characters (it&#39;s NOT the same as <i>empty</i>). -- <code>#define debug &quot;&quot;</code> is perfectly valid."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1500452567, "post_id": 45184590, "comment_id": 77337440, "body": "So the only way to replace a string with empty string for the PP will be to leave it as I defined?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 2, "creation_date": 1500452646, "post_id": 45184590, "comment_id": 77337484, "body": "@CIsForCookies I don&#39;t understand what you&#39;re asking in this last comment. If you want your macro to expand to an <i>empty string constant</i>, define it as <code>&quot;&quot;</code>. If you want your macro to be empty (so the expansion will contain nothing at all), define it without a value."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 5, "last_activity_date": 1500451784, "creation_date": 1500451784, "answer_id": 45184590, "question_id": 45184529, "link": "https://stackoverflow.com/questions/45184529/whats-happens-when-using-define-with-no-replacement-string/45184590#45184590", "title": "whats happens when using #define with no replacement string?", "body": "<p>It's actually quite simple: <code>#define debug</code> <strong>does</strong> define <code>debug</code> to be empty. It is still <em>defined</em>. An empty macro is different from one that doesn't exist. <code>#undef debug</code> would remove the macro.</p>\n\n<p><code>#ifdef</code> doesn't care about the value. It only checks whether the macro is defined to whatever. If you don't care about the value, always use <code>#ifdef</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 2, "last_activity_date": 1500458736, "last_edit_date": 1500458736, "creation_date": 1500456236, "answer_id": 45186303, "question_id": 45184529, "link": "https://stackoverflow.com/questions/45184529/whats-happens-when-using-define-with-no-replacement-string/45186303#45186303", "title": "whats happens when using #define with no replacement string?", "body": "<p>The relevant syntax for the <code>#define</code> preprocessing directive is spelled out in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10p1\" rel=\"nofollow noreferrer\">\u00a76.10 \u00b61</a> (C11 Draft Standard):</p>\n\n<blockquote>\n  <p><strong># define</strong> <em>identifier replacement-list new-line</em><br>\n  ...<br>\n  <em>replacement-list: pp-tokens<sub>opt</sub></em></p>\n</blockquote>\n\n<p>The semantics of the <code>#define</code> directive are found in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10.3p9\" rel=\"nofollow noreferrer\">\u00a76.10.3</a>:</p>\n\n<blockquote>\n  <p>A preprocessing directive of the form</p>\n  \n  <p><strong># define</strong> <em>identifier replacement-list new-line</em></p>\n  \n  <p>defines an <em>object-like macro</em> that causes each subsequent instance of\n  the macro name to be replaced by the replacement list of\n  preprocessing tokens that constitute the remainder of the directive.\n  The replacement list is then rescanned for more macro names as\n  specified below.</p>\n</blockquote>\n\n<p>Note that a replacement-list is <em>optionally</em> composed of preprocessing tokens, and thus may be empty. So, to consider a <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10p8\" rel=\"nofollow noreferrer\">footnoted example from the Standard</a>:</p>\n\n<pre><code>#define EMPTY\n</code></pre>\n\n<p>Since, according to <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10.3p7\" rel=\"nofollow noreferrer\">\u00a76.10.3 \u00b67</a>:</p>\n\n<blockquote>\n  <p>The identifier immediately following the <strong>define</strong> is called the <em>macro\n  name</em>. There is one name space for macro names.</p>\n</blockquote>\n\n<p>the macro name <code>EMPTY</code> has been defined, and exists in the namespace for macro names. Each subsequent instance of <code>EMPTY</code> will be replaced by no preprocessing tokens.</p>\n"}], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 1, "accepted_answer_id": 45184590, "answer_count": 2, "score": 3, "last_activity_date": 1500458736, "creation_date": 1500451624, "question_id": 45184529, "link": "https://stackoverflow.com/questions/45184529/whats-happens-when-using-define-with-no-replacement-string", "title": "whats happens when using #define with no replacement string?", "body": "<p>When trying to debug my code, I marked a few <code>printf</code> with this:</p>\n\n<pre><code>#if debug\n    printf(...);\n#endif\n</code></pre>\n\n<p>And at the start of the file, I mistakenly wrote <code>#define debug</code> instead of <code>#define debug 1</code></p>\n\n<p>gcc threw the following error:</p>\n\n<blockquote>\n  <p>error: #if with no expression</p>\n</blockquote>\n\n<p>Now I have 2 options:</p>\n\n<ol>\n<li>changing the define into <code>#define debug 1</code></li>\n<li>changing the if into <code>#ifdef debug</code></li>\n</ol>\n\n<p>I know that upon seeing <code>#define debug 1</code> the PP will replace each <code>debug</code> in my code to <code>1</code> and that's why <code>#if debug</code> in my code didn't work - the compiler sees no expression...</p>\n\n<p>My question is, when I use <code>#ifdef debug</code> - what happens? I figure <code>debug</code> is saved somewhere and checked, but where and how?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1500450283, "post_id": 45183957, "comment_id": 77335958, "body": "What type is <code>argument1</code>?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1500450687, "post_id": 45183957, "comment_id": 77336222, "body": "the web page you linked has all the details AND has examples including how to declare a function that uses a non-default &#39;endian&#39; byte ordering.  What are you doing that the byte ordering is even a consideration?"}, {"owner": {"reputation": 311, "user_id": 7260372, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-iyMoXomspnc/AAAAAAAAAAI/AAAAAAAAADg/E69qbcWFWUU/photo.jpg?sz=128", "display_name": "Amninder Singh", "link": "https://stackoverflow.com/users/7260372/amninder-singh"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1500450966, "post_id": 45183957, "comment_id": 77336431, "body": "@4386427 argument 1 is of type size_t and the function is like  <code>function ( int * param1, char* param2);</code>"}, {"owner": {"reputation": 311, "user_id": 7260372, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-iyMoXomspnc/AAAAAAAAAAI/AAAAAAAAADg/E69qbcWFWUU/photo.jpg?sz=128", "display_name": "Amninder Singh", "link": "https://stackoverflow.com/users/7260372/amninder-singh"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500451061, "post_id": 45183957, "comment_id": 77336493, "body": "Hi, @user3629249, I also used  <code>int __attribute__((bigendian)) *  instead of int * attribute__((bigendian)) </code> as the page suggested but that is also getting ignored.  It might not be for type-casting then."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500451577, "post_id": 45183957, "comment_id": 77336836, "body": "I think you should mention the compiler you are working with. Because <code>__attribute__</code> is certainly not standard C (as you have tagged) and not portable."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1500457341, "post_id": 45183957, "comment_id": 77340839, "body": "Could it be that this is <b>not</b> to be used when calling the function but when declaring the function? Like <code>void foo(int* __attribute__((bigendian)) param1, char* param2);</code>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500464297, "post_id": 45183957, "comment_id": 77345735, "body": "Can you please put some actual codes and errors?"}], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1504846158, "creation_date": 1504846158, "answer_id": 46108844, "question_id": 45183957, "link": "https://stackoverflow.com/questions/45183957/when-does-a-byte-order-change-gets-ignored/46108844#46108844", "title": "when does a byte_order change gets ignored?", "body": "<p>If those (non-standard) qualifiers are anything like the <code>const</code> qualifier, for example, then:</p>\n\n<pre><code>const int *a;                 // a is a pointer to const int\nint const *b;                 // b is a pointer to int const (same as a)\nint * const c = (int[42]){0}; // c is a const pointer to int (DIFFERENT!)\n</code></pre>\n\n<p>The differences to these can be observed by trying to modify them:</p>\n\n<pre><code>a = (int const[]){0}; // This is allowed\na[0] = 42;            // This is NOT allowed\nc = NULL;             // This is NOT allowed\nc[0] = 42;            // This is allowed\n</code></pre>\n\n<hr>\n\n<p>I think you probably meant to write <code>int __attribute__((bigendian)) *</code>, i.e. putting the attribute <em>before</em> the asterisk to denote that you wanted a <em>pointer to big endian <code>int</code></em>, because putting it <em>after</em> would denote a <em>big endian pointer to <code>int</code></em>...</p>\n"}], "owner": {"reputation": 311, "user_id": 7260372, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-iyMoXomspnc/AAAAAAAAAAI/AAAAAAAAADg/E69qbcWFWUU/photo.jpg?sz=128", "display_name": "Amninder Singh", "link": "https://stackoverflow.com/users/7260372/amninder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1504846158, "creation_date": 1500449931, "last_edit_date": 1500450311, "question_id": 45183957, "link": "https://stackoverflow.com/questions/45183957/when-does-a-byte-order-change-gets-ignored", "title": "when does a byte_order change gets ignored?", "body": "<p>I get a warning for a function's argument that typecasting here is changing byte_order from bigendian int to int. so I change it to bigendian int. but doing this gets ignored.</p>\n\n<p><code>function_call_name((int*)&amp;argument1, argument2));</code></p>\n\n<p><code>function_call_name((int* __attribute__((bigendian))) &amp; argument1, argument2);</code></p>\n\n<p>Tried to find solution for this \n<a href=\"https://software.intel.com/en-us/node/628908\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/node/628908</a></p>\n\n<p>But things are not working out.</p>\n\n<p>Can I get some help? :)</p>\n\n<p>Also, how to know what byte_order is running. I mean some #ifdef directive?</p>\n"}, {"tags": ["c", "arrays", "string", "struct"], "comments": [{"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1500449993, "post_id": 45183928, "comment_id": 77335758, "body": "Questions asking for homework help must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it."}, {"owner": {"reputation": 15105, "user_id": 3768871, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Wxgi0.jpg?s=128&g=1", "display_name": "OmG", "link": "https://stackoverflow.com/users/3768871/omg"}, "edited": false, "score": 1, "creation_date": 1500450107, "post_id": 45183928, "comment_id": 77335829, "body": "remove <code>&amp;</code> in this line: <code>struct card *deck_change = &amp;blank_deck;</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1500450205, "post_id": 45183928, "comment_id": 77335908, "body": "Read this please: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500450261, "post_id": 45183928, "comment_id": 77335940, "body": "<code>memcpy(deck_change[i].suite, &quot;SPADES&quot;, 6);</code> --&gt; <code>memcpy(deck_change[i].suite, &quot;SPADES&quot;, 7);</code>. Also <code>k = 0;</code> move to before while-loop."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500450369, "post_id": 45183928, "comment_id": 77336021, "body": "Delete <code>deck_change[DECK] = 0;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500450551, "post_id": 45183928, "comment_id": 77336132, "body": "<code>deck[0].rank</code> is uninitialized."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500450849, "post_id": 45183928, "comment_id": 77336341, "body": "it should be noted that a <code>enum</code> statement produces integers, not characters"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500451047, "post_id": 45183928, "comment_id": 77336477, "body": "this code: <code>struct card {     char rank[RANK];     char suite[SUIT]; } card;</code> is creating an instance of &#39;struct card&#39; that has the name &#39;card.  However, that instance is not being used in the posted code.  suggest removing the characters &#39;card&#39; between the closing brace and the final semicolon"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500451391, "post_id": 45183928, "comment_id": 77336728, "body": "the problem is caused by the code in the body of the <code>deck_fill()</code> function, starting with this line: <code>struct card *deck_change = &amp;blank_deck;</code> which should NOT have the <code>address of</code> operator applied to the passed in variable <code>blank)deck</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500451676, "post_id": 45183928, "comment_id": 77336885, "body": "variables on the stack are not initialized by the application load process. so this line: <code>while (k &lt; 4)</code>  probably fails, then none of the <code>while()</code> loop is executed.  However, since testing the contents of an uninitialized variable results in undefined behavior anything could be happening.  Suggest this line: <code>int i, k, j;</code>  be changed to three lines: <code>int i; int k=0;</code>  and remove the reference to <code>j</code> since that variable is not used"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500451821, "post_id": 45183928, "comment_id": 77336968, "body": "suggest removing this line: <code>k++;</code> and modifying these lines: <code>while (k &lt; 4)     {         k = 0;</code>   to: <code>for( int k=0; k&lt;4; k++ ) {</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500452015, "post_id": 45183928, "comment_id": 77337088, "body": "the posted code fails to set the field <code>char rank[RANK];</code> to a known value"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500452179, "post_id": 45183928, "comment_id": 77337193, "body": "in C, an index into an array starts at 0 and continues to number of entries in the array -1.   So this line: <code>deck_change[DECK] = 0;</code> is writing beyond the end of the array.  This results in undefined behavior and can lead to a seg fault event"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1500452473, "post_id": 45183928, "comment_id": 77337381, "body": "the posted code contains some &#39;magic&#39; numbers. &#39;magic&#39; numbers are numbers with no basis.  I.E. 0, 1, 2, 3, 13.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using  <code>#define</code> statements or an <code>enum</code> statement to  give those &#39;magic&#39; numbers meaningful names, then use those names throughout the code.  Note: for the values 0, 1 ,2 ,3 there is already the <code>enum suites</code>"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 1, "creation_date": 1500480213, "post_id": 45185188, "comment_id": 77358788, "body": "If i did it this way how would i do Ace, Jack etc, thats why I used char array, I not doing any math with the numbers"}], "tags": [], "owner": {"reputation": 582, "user_id": 8248342, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/jTr8k.jpg?s=128&g=1", "display_name": "Kemal G&#252;ler", "link": "https://stackoverflow.com/users/8248342/kemal-g%c3%bcler"}, "is_accepted": false, "score": 0, "last_activity_date": 1500453423, "creation_date": 1500453423, "answer_id": 45185188, "question_id": 45183928, "link": "https://stackoverflow.com/questions/45183928/function-to-make-a-card-using-array-of-structures/45185188#45185188", "title": "Function to make a &quot;card&quot; using array of structures", "body": "<p>try to use this deck_fill() function. Don't forget to assing rank</p>\n\n<pre><code>void deck_fill(struct card blank_deck[])\n {\n    struct card *deck_change = blank_deck;\n    int i, j;\n    int k = 0;\n    char index[2];\n    char c;\n\n    while (k &lt; 4)\n    {\n        for (i = 0; i &lt; 13; i++)\n        {\n            switch(k)\n            {\n                case (0): \n                    strncpy(deck_change[i].suite, \"SPADES\", 6);\n                    deck_change[i].rank = i;\n                    break;\n\n                case (1):           \n                    strncpy(deck_change[i+13].suite, \"DIAMONDS\", 8);\n                    deck_change[i+13].rank = i;\n                    break;\n\n                case (2):\n                    strncpy(deck_change[i+26].suite, \"CLUBS\", 5);\n                    deck_change[i+26].rank = i;\n                    break;\n\n                case (3): \n                    strncpy(deck_change[i+39].suite, \"HEARTS\", 6);\n                    deck_change[i+39].rank = i;\n                    break;\n            }\n        }\n        k++;\n    }\n    //deck_change[DECK] = 0;\n}\n</code></pre>\n\n<p>and change struct wtih this</p>\n\n<pre><code>struct card{\n    int rank;\n    char suite[SUIT];\n} card;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500453423, "creation_date": 1500449853, "last_edit_date": 1500449929, "question_id": 45183928, "link": "https://stackoverflow.com/questions/45183928/function-to-make-a-card-using-array-of-structures", "title": "Function to make a &quot;card&quot; using array of structures", "body": "<p>I have a function here where I am making a deck of cards. At the end I have it print what is in each cards struct but it prints weird characters. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define DECK 52\n#define RANK 8\n#define SUIT 15\n\n\n\n/* SpEcIaL VaRiAbLeS */\nstruct card{\n\n    char rank[RANK];\n    char suite[SUIT];\n\n\n} card;\n\nenum suites{ \nSPADES, DIAMONDS, CLUBS, HEARTS};\n\n/* ***************************Prototypes ************************/\n\nvoid deck_fill( struct card blank_deck[] );\n</code></pre>\n\n<p>This is the driver function.</p>\n\n<pre><code>int main( void )\n{\n    struct card deck[DECK];\n\n    deck_fill( deck);\n\n    printf( \"The card is %s of %s\", deck[0].suite, deck[0].rank);\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>this is the function in question. hopefully at the end of this my deck array is filled with \"cards\".    </p>\n\n<pre><code> /* Definitions */\n void deck_fill( struct card blank_deck[] )\n {\n    struct card *deck_change = &amp;blank_deck;\n    int i, k, j;\n\n\n\n    while (k &lt; 4)\n    {\n        k = 0;\n        for (i = 0; i &lt; 13; i++)\n        {\n            switch(k)\n            {\n                case (0): \n                    memcpy(deck_change[i].suite, \"SPADES\", 6);\n                    break;\n\n                case (1):           \n                    memcpy(deck_change[i+13].suite, \"DIAMONDS\", 8);\n                    break;\n\n                case (2):\n                    memcpy(deck_change[i + 26].suite, \"CLUBS\", 5);\n                    break;\n\n                case (3): \n                    memcpy(deck_change[i + 39].suite, \"HEARTS\", 6);\n                    break;\n            }\n        }\n\n        k++;\n\n    }\n\n    deck_change[DECK] = 0;\n}\n</code></pre>\n\n<p>When ran it prints \"The card is  of R1S or (somethingweird)\".\nwhy?</p>\n"}, {"tags": ["c++", "c", "visual-studio"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500443303, "post_id": 45181629, "comment_id": 77331790, "body": "Steps 1 through 3 in this answer should get what you are after: <a href=\"https://stackoverflow.com/a/36046681/4581301\">stackoverflow.com/a/36046681/4581301</a>"}, {"owner": {"reputation": 11, "user_id": 8196938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc28cb5596d796f70da6d39828e980a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8196938/j-doe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1500445211, "post_id": 45181629, "comment_id": 77332697, "body": "C++ is definitely already installed which is visible by creating an empty project or looking in Options. Maybe things have changed after ending the trial version and as with life everything changes."}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1500450375, "post_id": 45181629, "comment_id": 77336027, "body": "Have you looked at <code>C:\\Program Files (x86)\\Microsoft Visual Studio 1X.0\\VC\\bin</code> where <code>1X.0</code> is the version you&#39;re looking for .. <code>cl.exe</code> is the VC++ command line build tool, there&#39;s also <code>link.exe</code> and some others"}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500489736, "post_id": 45181629, "comment_id": 77364367, "body": "Should be somewhere in registry."}], "owner": {"reputation": 11, "user_id": 8196938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc28cb5596d796f70da6d39828e980a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8196938/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500442052, "creation_date": 1500442052, "question_id": 45181629, "link": "https://stackoverflow.com/questions/45181629/where-can-i-find-if-the-visual-c-components-or-the-microsoft-visual-c-build", "title": "Where can I find if the Visual C++ components or the Microsoft Visual C++ Build Tools are installed in Visual Studio 2015?", "body": "<p>I guess I may be getting into trouble for asking ironically obvious questions. I had found the place that shows where things are installed on Visual Studio 2015 in 2016, but now I can't remember where it is. I see instructions of how to check using the command line, although I saw a nifty place that showed me which components were installed somewhere in the toolbars on top in 2016. Funny.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 16, "creation_date": 1500441531, "post_id": 45181512, "comment_id": 77331056, "body": "Undefined behaviour?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1500441795, "post_id": 45181512, "comment_id": 77331156, "body": "That warning isn&#39;t there to make the compiler writers feel better, you know. Did you not wonder why <i>&quot;excess elements in array initializer&quot;</i> could be a problem?"}, {"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1500442006, "post_id": 45181512, "comment_id": 77331246, "body": "@s_vishnu Yes. I get 9."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 5, "creation_date": 1500441970, "post_id": 45181593, "comment_id": 77331227, "body": "I don&#39;t think this is accessing out of bounds. I think it is passing a non null-terminated string to <code>strlen</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 5, "creation_date": 1500442116, "post_id": 45181593, "comment_id": 77331283, "body": "<code>char a[3] = {&#39;H&#39;,&#39;E&#39;,&#39;L&#39;,&#39;L&#39;,&#39;O&#39;,&#39;\\0&#39;};</code> would only initialize the first three characters in <code>a</code>, and hence it would not be a string, causing a UB with <code>strlen</code>."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1500442491, "post_id": 45181593, "comment_id": 77331464, "body": "@AjayBrahmakshatriya Thank you very much. I have updated my answer."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 3, "last_activity_date": 1500443180, "last_edit_date": 1500443180, "creation_date": 1500441794, "answer_id": 45181593, "question_id": 45181512, "link": "https://stackoverflow.com/questions/45181512/strlen-giving-unexpected-outputs-c/45181593#45181593", "title": "strlen giving unexpected outputs C", "body": "<p>It is <strong>undefined behaviour</strong> because <code>strlen(a)</code> could read beyond the size of <code>a</code> and cause undefined behavior (such as a crash). It means anything can happen. </p>\n\n<p><code>strlen</code> only works if a null terminator '\\0' is present in the array of characters. If not present then the program behaviour is <strong>undefined</strong>.</p>\n\n<p><strong>C11 - 7.23.6.3 The strlen function:</strong></p>\n\n<blockquote>\n  <p>The <strong>strlen</strong> function returns the number of characters that precede\n  the terminating null character.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500442933, "post_id": 45181650, "comment_id": 77331630, "body": "There is no mention that excess initializers are discarded in the standard, thus I believe it is UB by omission"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500443112, "post_id": 45181650, "comment_id": 77331711, "body": "There&#39;s only a mention what will happen if there are fewer elements: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p21\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.9p21</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500443179, "post_id": 45181650, "comment_id": 77331737, "body": "@AnttiHaapala - <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p20\" rel=\"nofollow noreferrer\">&quot;Otherwise, only enough initializers from the list are taken to account for the elements or members of the subaggregate or the first member of the contained union&quot;</a>. It&#39;s a fairly convoluted way of describing it, but there isn&#39;t a compiler today that behaves otherwise."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1500453755, "post_id": 45181650, "comment_id": 77338258, "body": "@AnttiHaapala, sure there is, this is a constraint violation, a compiler <b>must</b> print a diagnostic.  The text in the standard is  <i>No initializer shall attempt to provide a value for an object not contained within the entity being initialized.</i>"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1500442143, "creation_date": 1500442143, "answer_id": 45181650, "question_id": 45181512, "link": "https://stackoverflow.com/questions/45181512/strlen-giving-unexpected-outputs-c/45181650#45181650", "title": "strlen giving unexpected outputs C", "body": "<p>Just because you gave an initializer with 6 characters, doesn't mean those characters are actually stored anywhere for those small arrays.</p>\n\n<p>Excess initializers are discarded. Which if you don't know what you are doing can come back and make your program ill-formed.</p>\n\n<p>Let's consider the case where <code>a</code> has room for two characters. The compiler knows this, so it initializes it like this:</p>\n\n<pre><code>| 'H' | 'e' |\n</code></pre>\n\n<p>That's it. And while it's a perfectly valid character array, it's not a valid C-string. Because the array is not <code>\\0</code> terminated. Once you feed this array to a library function that expects a C-string, you aren't guaranteed anything. It makes the behavior of your entire program <strong>undefined</strong>.</p>\n\n<p>But practically speaking, <code>strlen</code> will just access memory which is beyond the bound of the array you defined. No telling what it can find there, or even if it will <strong>ever</strong> find a <code>\\0</code> and return.</p>\n"}, {"tags": [], "owner": {"reputation": 13578, "user_id": 1328439, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CuI4k.jpg?s=128&g=1", "display_name": "Dmitri Chubarov", "link": "https://stackoverflow.com/users/1328439/dmitri-chubarov"}, "is_accepted": false, "score": 2, "last_activity_date": 1500442423, "creation_date": 1500442423, "answer_id": 45181704, "question_id": 45181512, "link": "https://stackoverflow.com/questions/45181512/strlen-giving-unexpected-outputs-c/45181704#45181704", "title": "strlen giving unexpected outputs C", "body": "<p>Here is a partial assembly listing of this program compiled with gcc version 4.8.5 without any optimizations.</p>\n\n<pre><code>        .cfi_startproc\n        pushq   %rbp\n        .cfi_def_cfa_offset 16\n        .cfi_offset 6, -16\n        movq    %rsp, %rbp\n        .cfi_def_cfa_register 6\n        subq    $16, %rsp\n        movb    $72, -16(%rbp)\n        movb    $69, -15(%rbp)\n        movb    $76, -14(%rbp)\n        leaq    -16(%rbp), %rax\n        movq    %rax, %rdi\n        call    strlen\n</code></pre>\n\n<p>You could see that the array <code>a</code> is allocated on the stack at offset of 0x16 from the base of the stack. Only the letters <code>HEL</code> are put on the stack. When strlen is being called it looks at the memory starting at rbp-16 until the first <code>0</code> byte is being encountered. The way the stack is initialized is such that this 0 byte is encountered at position rbp-10 leading, so your program prints </p>\n\n<pre><code>Length is 6\n</code></pre>\n"}], "owner": {"reputation": 2214, "user_id": 7863149, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iv2fh.jpg?s=128&g=1", "display_name": "void", "link": "https://stackoverflow.com/users/7863149/void"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 45181650, "answer_count": 3, "score": -4, "last_activity_date": 1500487776, "creation_date": 1500441412, "last_edit_date": 1500487776, "question_id": 45181512, "link": "https://stackoverflow.com/questions/45181512/strlen-giving-unexpected-outputs-c", "title": "strlen giving unexpected outputs C", "body": "<p>This is my sample code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    char a[3] = { 'H', 'E', 'L', 'L', 'O', '\\0' };\n    printf(\"Length is %zd \", strlen(a));\n}\n</code></pre>\n\n<p>I know this produces the following warning!.</p>\n\n<pre><code>test.c:5:26: warning: excess elements in array initializer\n char a[3] = {'H','E','L','L','O','\\0'};\n</code></pre>\n\n<p>Now my question is if I specify the size as <code>a[6]</code> or anything greater than the actual size my output would be.</p>\n\n<p>for <code>char a[100] = {'H','E','L','L','O','\\0'};</code></p>\n\n<p>output:</p>\n\n<pre><code>Length is 5\n</code></pre>\n\n<p>for <code>char a[10] = {'H','E','L','L','O','\\0'};</code></p>\n\n<p>output:</p>\n\n<pre><code>Length is 5\n</code></pre>\n\n<p>for anything equal to or greater than the array size I'm getting correct output. </p>\n\n<p>But when I give anything less than actual size <strong>always</strong> I'm getting \n<strong>6</strong> as output.</p>\n\n<p>for <code>char a[5] = {'H','E','L','L','O','\\0'};</code> or for <code>a[4]</code> or <code>a[3]</code> or <code>a[2]</code> it's always </p>\n\n<p><code>Length is 6</code></p>\n\n<p>Though for </p>\n\n<pre><code>char a[1] = {'H','E','L','L','O','\\0'};\n</code></pre>\n\n<p>it is <code>Length is 1</code>.</p>\n\n<p>What is the reason for this?  Any detailed explanations are welcome.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1500439116, "post_id": 45181071, "comment_id": 77330217, "body": "A specifier like <code>&quot;%*d&quot;</code> requires two arguments, one for how many places and one for the integer value. You&#39;re providing one. You should probably eliminate the <code>*</code> part if you&#39;re not intending to do that."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 3, "creation_date": 1500439456, "post_id": 45181071, "comment_id": 77330334, "body": "Why not just use <code>%40d</code> or <code>%-40d</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1500441541, "post_id": 45181071, "comment_id": 77331059, "body": "<i>&quot;So basically print each number out [4 of them?] plus 2 spaces for formatting and fit within 40 characters total.</i>&quot; How is that possible if your longest string with be <code>10-chars</code> (e.g. <code>-300000000</code>). <code>10+2+10+2+10+2+10 = 48</code>??"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1500441897, "post_id": 45181071, "comment_id": 77331195, "body": "The reason it is unclear is <i>&quot;I need to print them out into evenly spaced columns&quot;</i> is mutually exclusive if you are failing to provide an even column width and spacing for each line."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1500442236, "post_id": 45181071, "comment_id": 77331330, "body": "Also -- out of curiosity - what value are you using for <code>max</code>? How do you spit <code>18</code> numbers into lines with <code>4</code> evenly spaced columns? Last line gets only <code>2</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1500441855, "post_id": 45181509, "comment_id": 77331176, "body": "@DavidC.Rankin Yes, putchar is simpler function and fit better here"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1500442033, "post_id": 45181509, "comment_id": 77331254, "body": "Well, it&#39;s more a &quot;why use the very complex <i>variadic</i> <code>printf</code> function to output a single-char?&quot; The correct tools there are <code>putchar</code> and <code>fputc</code>. But note I qualified it as a <i>nit</i> -- it&#39;s small potatoes and what you are doing is correct, but when teaching new C programmers, you always want to provoke thought about what the most efficient tool for the job is <code>:)</code> - you get the vote either way..."}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": false, "score": 5, "last_activity_date": 1500443498, "last_edit_date": 1500443498, "creation_date": 1500441403, "answer_id": 45181509, "question_id": 45181071, "link": "https://stackoverflow.com/questions/45181071/formatting-text-file-into-columns-with-sprintf-with-c/45181509#45181509", "title": "Formatting text file into columns with sprintf with C", "body": "<p>To print N numbers in 4 columns with width 10 characters use <code>printf(\"%10d\")</code> inside the loop that add new line (<code>\\n</code>) after each 4th printing, e.g.:</p>\n\n<pre><code>for (int i = 1; i &lt;= nums; i++)\n{\n    printf(\"%10d\", num[i-1]); // or printf(\"%-10d\", num[i-1]);\n    if (i % 4 == 0)\n        printf(\"\\n\"); // or putchar ('\\n')\n}\n</code></pre>\n\n<p>sign <code>-</code> in the format <code>%-10d</code> change alignment.</p>\n\n<p>As you see <code>sprinf</code> is not used here, I use <code>printf</code> for each number to print the value at screen (standard output).</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If you want to find optimal width of the column, and use it for output, e.g. using the number of digits in your biggest number (let it be <code>maxValue</code> an integer value found in the array <code>num</code>), you can find the minimum required number of digits (let it be <code>minWidth</code>), like:</p>\n\n<pre><code>char buff[20] = {0};\nint minWidth = strlen(_itoa(maxValue,buff,10));\n</code></pre>\n\n<p>and then change the printing loop like:</p>\n\n<pre><code>for (int i = 1; i &lt;= nums; i++)\n{\n    printf(\"%*d\", minWidth + 1, num[i - 1]);\n    if (i % 4 == 0) putchar('\\n');\n}\n</code></pre>\n\n<p>here vlaue <code>minWidth + 1</code> will be used in format specifier <code>%*d</code> instead of <code>*</code>, and <code>+1</code> is used for minimum separation between columns in one space (of course, there can be 2 or 3).</p>\n\n<p>Finally, having the column width calculated, you can find the number of column for your screen and use this value for starting new line, e.g.:</p>\n\n<pre><code>const int screenWidth = 80;\nint colWidth = minWidth + 2; // here 2 is added for minimum separation of columns\nint colNum = screenWidth / colWidth;\n\nfor (int i = 1; i &lt;= nums; i++)\n{\n    printf(\"%*d\", colWidth, num[i - 1]);\n    if ( !(i % colNum) ) putchar('\\n'); // !(i % colNum) is the same to i % colNum == 0\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "edited": false, "score": 0, "creation_date": 1500477479, "post_id": 45183270, "comment_id": 77356838, "body": "Thanks!  I was trying to look for a solution especially geared towards sprintf.  I really appreciate the help.  You guys are the best!"}, {"owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "edited": false, "score": 0, "creation_date": 1500478684, "post_id": 45183270, "comment_id": 77357788, "body": "@David C. Rankin thank you for your help as well.  I have a much better understanding over all what i need to do."}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": true, "score": 1, "last_activity_date": 1500448106, "creation_date": 1500448106, "answer_id": 45183270, "question_id": 45181071, "link": "https://stackoverflow.com/questions/45181071/formatting-text-file-into-columns-with-sprintf-with-c/45183270#45183270", "title": "Formatting text file into columns with sprintf with C", "body": "<p>This is my second answer for the same question, but this answer more close to the topic - here output is made to the string with <code>sprintf</code>.</p>\n\n<p>So, lets we have array of numbers <code>int num[1000]</code> and we need to print <code>nums</code> of them to several string (length is limited by value <code>stringMaxLength</code>) using formatting as columns with width depending on length of number representation (maximum number in the array).</p>\n\n<p>The following snippet has comments for all operations</p>\n\n<pre><code>// string that will be made from numbers\nconst int stringMaxLength = 120;\nchar str[stringMaxLength + 1]; // just one string\n\n// find longest number considering sign\nchar buff[20] = { 0 };\nint maxNumWidth = 0, numWidth;\nint n;\nfor (n = 0; n &lt; nums; n++)\n{\n    numWidth = strlen(_itoa(num[n], buff, 10));\n    if (numWidth &gt; maxNumWidth)\n        maxNumWidth = numWidth;\n}\n\nint colWidth = maxNumWidth + 1; // a column size with one space between columns\nint colNum = stringMaxLength / colWidth; // number of columns in one string\nint s, i; // i - nums counter, s - strings counter\nfor (i = 0, s = 1; i &lt; nums; s++) // loop counts strings but with condition for nums\n{\n    int sizeCnt = 0; // start making new string str\n    // loop works while there are numbers and the line is not filled completely \n    while (i &lt; nums)\n    {\n        // add next number (column) to the string and increase string size\n        sizeCnt += sprintf(str + sizeCnt, \"%*d\", colWidth, num[i++]);\n        if (i % colNum == 0)  // if string has colNum numbers it is full\n        {\n            break; // stop while loop \n        }\n    }\n    // next string is ready and can be used\n    printf(\"%d : %s\\n\", s, str); // e.g. for output\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 1, "accepted_answer_id": 45183270, "answer_count": 2, "score": 0, "last_activity_date": 1500448106, "creation_date": 1500438989, "last_edit_date": 1500439618, "question_id": 45181071, "link": "https://stackoverflow.com/questions/45181071/formatting-text-file-into-columns-with-sprintf-with-c", "title": "Formatting text file into columns with sprintf with C", "body": "<p>I have a basic text file I point my program at to run that has numbers line by line such as:</p>\n\n<pre>\n3\n30\n300\n3000\n30000\n300000\n3000000\n30000000\n300000000\n-3\n-30\n-300\n-3000\n-30000\n-300000\n-3000000\n-30000000\n-300000000\n</pre>\n\n<p>and I need to print them out into evenly spaced columns and I want them to fit into 40 characters (4 columns wide).  I want to use the sprintf function to do this.  So basically print each number out plus 2 spaces for formatting and fit within 40 characters total.  So far this is what I have.</p>\n\n<pre><code>int main(int argc, char *argv[]){\n\n    int a, b, num[1000], nums = 0;\n    char str[40];\n    FILE *pt;\n    int col, max, w;\n\n    if(argc &lt; 2){\n      printf(\"Usage %s &lt;No Files&gt;\\n\", argv[0]);\n      return 1;\n    }\n\n   if((pt = fopen(argv[1], \"r\")) == NULL){\n     printf(\"Unable to open %s for reading.\\n\", argv[1]);\n     return 1;\n   }\n\n   while(fscanf(pt, \"%d\", &amp;b) == 1){\n     num[nums++] = b;\n   }\n\n   w = sprintf(str, \"%*d\", num[a]);\n\n   if(max &lt; w){\n     col = 40 / (max + 2);\n     printf(\"%d  %d\\n\", w, num[a]);\n   }\n\n   return 0;\n\n }\n</code></pre>\n\n<p>I just get garbage when I point it to the text file mentioned in the above.  Any advice?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1500437199, "post_id": 45180630, "comment_id": 77329651, "body": "The first line makes <code>one</code> into a synonym for <code>char *</code>.  The second line declares that <code>abc</code> is a function that takes an indeterminate argument list and returns a <code>one</code> (aka <code>char *</code>).  The third line defines <code>twft</code> as a pointer to a function that takes an indeterminate argument list and returns a <code>one</code> (aka <code>char *</code>).  The last line declares that <code>abcde</code> is a function that takes an indeterminate argument list and returns a <code>twft</code> \u2014 aka pointer to function of the specified type."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1500437350, "post_id": 45180630, "comment_id": 77329681, "body": "Note that there are no prototypes in the code shown.  You&#39;d need <code>one abc(void);</code> and <code>typedef one (*twft)(void);</code> and <code>twft abcde(void);</code> or similar to create prototypes.  As it stands, all you know is that the functions do not take a variable argument list (are not declared or defined with <code>, ...</code> at the end of the argument list \u2014 are not variadic functions like <code>printf()</code> et al)."}], "answers": [{"tags": [], "owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "is_accepted": true, "score": 4, "last_activity_date": 1500437140, "creation_date": 1500437140, "answer_id": 45180770, "question_id": 45180630, "link": "https://stackoverflow.com/questions/45180630/it-is-difficult-to-understand-below-typedef-use-case/45180770#45180770", "title": "it is difficult to understand below typedef use case", "body": "<p>'one' is a typedef as char pointer</p>\n\n<pre><code>typedef char *one; \n</code></pre>\n\n<p>'abc' function declaration returning char pointer</p>\n\n<pre><code>one abc() \n</code></pre>\n\n<p>'twft' is typedef of a function pointer returning char pointer</p>\n\n<pre><code>typedef one (*twft)()  \n</code></pre>\n\n<p>The last one is that function declaration of abcde() which returns a function pointer of a function defined by above typedef</p>\n\n<pre><code>twft abcde() \n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8185708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SWziI.jpg?s=128&g=1", "display_name": "Sunny Lei", "link": "https://stackoverflow.com/users/8185708/sunny-lei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 45180770, "answer_count": 1, "score": -3, "last_activity_date": 1500437140, "creation_date": 1500436049, "question_id": 45180630, "link": "https://stackoverflow.com/questions/45180630/it-is-difficult-to-understand-below-typedef-use-case", "title": "it is difficult to understand below typedef use case", "body": "<p>Below typedef use case really confuses me, can you give an explaination for each line?</p>\n\n<pre><code>typedef char *one;\none abc();\ntypedef one (*twft)();\ntwft abcde();\n</code></pre>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 1358, "user_id": 2141666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3527d94710b02ffd4cfd250271c126a5?s=128&d=identicon&r=PG", "display_name": "Kdawg", "link": "https://stackoverflow.com/users/2141666/kdawg"}, "edited": false, "score": 2, "creation_date": 1500435415, "post_id": 45180509, "comment_id": 77329285, "body": "Probably because it&#39;s getting read in your <code>getchar</code> call before you assign it to the state name. Not knowing what your input is exactly, I would check that first and see if it&#39;s your output or your input function."}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "reply_to_user": {"reputation": 1358, "user_id": 2141666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3527d94710b02ffd4cfd250271c126a5?s=128&d=identicon&r=PG", "display_name": "Kdawg", "link": "https://stackoverflow.com/users/2141666/kdawg"}, "edited": false, "score": 0, "creation_date": 1500436074, "post_id": 45180509, "comment_id": 77329432, "body": "I edited to reflect the input separate from the output. If the getchar() is the problem, how do I replace it meanwhile keeping the while() loop?"}], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500436000, "post_id": 45180574, "comment_id": 77329420, "body": "Sorry, I edited the original post to reflect &#39;scanf()&#39; rather than fscanf(). Other than that, I would need to use the while() loop because I am reading in multiple lines of user inputted data from stdin, which ends when the EOF flag is entered (ctrl-d). Then, the output is spit out to stdout."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500436089, "post_id": 45180574, "comment_id": 77329436, "body": "This code handles EOF (by testing the return value from <code>scanf()</code> \u2014 now I&#39;ve fixed that), and also prevents overflow by not loading more rows than will fit in the array.  The use of <code>%3s</code> ensures that if someone writes <code>Texas</code> instead of <code>TX</code>, then things will not go haywire (but it will allow <code>Cal</code> or <code>CA</code> for California)."}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500438136, "post_id": 45180574, "comment_id": 77329925, "body": "Thanks so much! So I had to readjust my output to respond correctly to the scanf(). The output looks much better now!"}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500439305, "post_id": 45180574, "comment_id": 77330279, "body": "May I inquire about a suggestion for displaying the output properly? I tried an if-else inside a similar for-loop and it works until I reach a condition that doesn&#39;t meet the 10 lower limit and it breaks out of the loop. If I don&#39;t have the else --&gt; break, I am getting a crazy output of garbage at the end."}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500440352, "post_id": 45180574, "comment_id": 77330645, "body": "For educational purposes, the population numbers are arbitrary. I tried the above for-loop and my output came out:   TX 23 DE 3 CA 25 TX 23 CA 25 ??MR? 32767  Any idea what that last line is like that? It&#39;s pretty consistent with just the string portion altered with each trial."}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500440508, "post_id": 45180574, "comment_id": 77330697, "body": "Nevermind! You answered it previously... the solution was having the condition (j &lt; i) rather than MAX_STATES. Thanks again for your help!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500440532, "post_id": 45180574, "comment_id": 77330708, "body": "In the updated code, you have <code>for(j = 0; j &lt;= MAX_STATES; j++)</code> controlling the printing.  That accesses the <code>myStates[10]</code> element of the array, which doesn&#39;t actually exist (the array size is 10, so the maximum valid index is 9) \u2014 you&#39;re getting undefined behaviour because you&#39;re abusing the array size.  It so happens that what it is treating as the population is bigger than 10, so it prints the junk."}, {"owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "edited": false, "score": 0, "creation_date": 1500440623, "post_id": 45180574, "comment_id": 77330742, "body": "^ Noted. Output looks great now!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500443252, "post_id": 45180574, "comment_id": 77331775, "body": "but <code>scanf</code> return value can be != 2 for other reasons, including malformed input..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500443360, "post_id": 45180574, "comment_id": 77331821, "body": "There are multiple ways to deal with it \u2014 I choose to stop the input on any format error or EOF.  You may write your own answer if you wish to do other things, @AnttiHaapala."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1500451804, "post_id": 45180574, "comment_id": 77336960, "body": "Maybe this is a leftover from the earlier <code>fprintf()</code> version, but shouldn&#39;t you remove the trailing <code>\\n</code> from the <code>scanf()</code> format string? As it is, the user has to signal end-of-file twice from the keyboard to terminate the input loop, and this trailing whitespace character serves no purpose that I can see. (Of course, entering a character in the second field works as expected for loop-termination)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1500468261, "post_id": 45180574, "comment_id": 77348984, "body": "@DavidBowling: thanks.  The trailing newlines in the <code>scanf()</code> format are a bad idea.  I&#39;ve removed them and commented on doing so.  I&#39;ll add a link to the canonical Q&amp;A later. (And thanks for the other edit.)"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 6, "last_activity_date": 1500471533, "last_edit_date": 1500471533, "creation_date": 1500435714, "answer_id": 45180574, "question_id": 45180509, "link": "https://stackoverflow.com/questions/45180509/the-first-char-of-my-output-is-omitted-in-c/45180574#45180574", "title": "The first char of my output is omitted in C", "body": "<p>Replace:</p>\n\n<pre><code>int i = 0;\n\nwhile ((c = getchar()) != EOF)\n{\n    scanf(\"%s %d\\n\", myStates[i].name, &amp;myStates[i].population);\n    i++; \n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>int i;\n\nfor (i = 0; i &lt; MAX_STATES; i++)\n{\n    if (scanf(\"%3s %d\", myStates[i].name, &amp;myStates[i].population) != 2)\n        break;\n}\n</code></pre>\n\n<p>This protects you against entering too many states, uses the <code>for</code> loop to put the loop controls in place, detects format problems, prevents string buffer overflows, and reads the first character into the name.  Also, a trailing white space (such as a blank or newline) in a format string is a very bad idea in a <code>scanf()</code> format string if the input is being entered interactively.  If the input comes from a file, it is less serious but still unnecessary most of the time.  (See <a href=\"http://stackoverflow.com/questions/19499060/what-is-difference-between-scanfd-and-scanfd\">Trailing blank in <code>scanf()</code> format</a> for more information.)</p>\n\n<p><strong>Keeping a while loop</strong></p>\n\n<p>If you're really adamant that you need a <code>while</code> loop, then you can use:</p>\n\n<pre><code>int i = 0;\n\nwhile (i &lt; MAX_STATES &amp;&amp; (c = getchar()) != EOF)\n{\n    ungetc(c, stdin);\n    if (scanf(\"%3s %d\", myStates[i].name, &amp;myStates[i].population) != 2)\n        break;\n    i++; \n}\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int i = 0;\n\nwhile (i &lt; MAX_STATES &amp;&amp; (c = getchar()) != EOF)\n{\n    myStates[i].name[0] = c;\n    if (scanf(\"%2s %d\", &amp;myStates[i].name[1], &amp;myStates[i].population) != 2)\n        break;\n    i++; \n}\n</code></pre>\n\n<p>Note that these <code>while</code> loops still maintain both lots of overflow protection \u2014 overflowing the main array, and overflowing the name field.  Note that one of the two <code>scanf()</code> statements uses <code>%3s</code> and the other <code>%2s</code>; you should be able to explain why.  (And yes, the null byte is not counted by <code>scanf()</code>, so you have to use an 'off-by-one' length in the conversion specification.)</p>\n\n<p>There are, no doubt, other techniques that could also be used.  However, I think you'll find that the <code>for</code> loop is more nearly idiomatic C.</p>\n\n<p>One alternative that is often sensible is to use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> (or POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a> if it is available) to read whole lines, and then <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sscanf.html\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a> to parse the lines.  This often leads to more resilient programs, and better error reporting.  It also stops people who try to put the information for all 50 states on a single line, or who put each datum on a separate line with a blank line in between them all, from getting away with the malformed data.  You can quietly insist on two fields (and, if you're careful, only two fields) on the line.</p>\n\n<h3>And the output code?</h3>\n\n<blockquote>\n  <p>May I inquire about a suggestion for displaying the output properly?</p>\n</blockquote>\n\n<p>You have:</p>\n\n<pre><code>printf(\"\");\n\nif (c &lt;= 0)\n{\n    for(int j = 0; j &lt;= MAX_STATES; j++)\n    {\n        if(myStates[j].population &gt;= 10)\n            printf(\"%s %d\\n\", myStates[j].name, myStates[j].population);\n        else\n            break;\n    }\n}\n</code></pre>\n\n<p>The first <code>printf()</code> does nothing; it should go.  The <code>if (c &lt;= 0)</code> condition is a bit dubious.  It is possible to type a null byte (often <kbd>Control-@</kbd> or <kbd>Control-Shift-2</kbd>), though it would be a bit hard to get that to break the original loop.  The <code>for</code> loop should be more like <code>for (int j = 0; j &lt; MAX_STATES; j++)</code> \u2014 this is the template for safe <code>for</code> loops in C.  You most frequently use <code>for (int i = 0; i &lt; MAX; i++)</code>.  However, you only want to print the states that were read, so instead of using <code>MAX_STATES</code>, you need to use <code>i</code> as the limit.  If you really only want to print the top 9 states (CA, TX, FL, NY, IL, PA, OH, GA, NC \u2014 see <a href=\"https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population\" rel=\"nofollow noreferrer\">Wikipedia</a>; Michigan is just shy of 10M, it says), then the <code>if</code> condition is fine.</p>\n\n<p>So, you could use (noting that the input loop sets <code>i</code> to the number of states read successfully):</p>\n\n<pre><code>for (int j = 0; j &lt; i; j++)\n    printf(\"State: %.2s, Pop'n: %dM\\n\", myStates[j].name, myStates[j].population);\n</code></pre>\n\n<p>You can tweak the format to suit your requirements, of course.  This will print nothing if no states were read, or the number of states that were read.  If you really want to apply the condition on the population, then you'd use:</p>\n\n<pre><code>for (int j = 0; j &lt; i; j++)\n{\n    if (myStates[i].population &gt;= 10)\n        printf(\"State: %.2s, Pop'n: %dM\\n\", myStates[j].name, myStates[j].population);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500438439, "post_id": 45180829, "comment_id": 77330023, "body": "Note that the name is <code>char name[4];</code>, so it is crucial to use <code>%3s</code> in the <code>scanf()</code> conversion specification \u2014 <code>scanf()</code> doesn&#39;t count the terminating null, but does add one."}], "tags": [], "owner": {"reputation": 1, "user_id": 7422321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/714d54340874bc641ffc0c3552dc1c14?s=128&d=identicon&r=PG&f=1", "display_name": "Anoop", "link": "https://stackoverflow.com/users/7422321/anoop"}, "is_accepted": false, "score": 0, "last_activity_date": 1500444383, "last_edit_date": 1500444383, "creation_date": 1500437496, "answer_id": 45180829, "question_id": 45180509, "link": "https://stackoverflow.com/questions/45180509/the-first-char-of-my-output-is-omitted-in-c/45180829#45180829", "title": "The first char of my output is omitted in C", "body": "<p>You could try adding a space before %s in scanf, or specify a strict number of chars.</p>\n\n<pre><code>scanf(\" %3s\",\n</code></pre>\n\n<p>Or even use as in <a href=\"http://beej.us/guide/bgc/output/html/multipage/scanf.html\" rel=\"nofollow noreferrer\">Beej's guide:</a></p>\n\n<pre><code>// read all whitespace, then store all characters up to a newline \n\nscanf(\" %[^\\n]\", s);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500439365, "post_id": 45180968, "comment_id": 77330304, "body": "You need to test the return value from <code>sscanf()</code>.  Otherwise good, though."}], "tags": [], "owner": {"reputation": 484, "user_id": 5286400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S9mD3PopoHM/AAAAAAAAAAI/AAAAAAAAABo/26dEwCk8xr0/photo.jpg?sz=128", "display_name": "VIX", "link": "https://stackoverflow.com/users/5286400/vix"}, "is_accepted": false, "score": 0, "last_activity_date": 1500438393, "creation_date": 1500438393, "answer_id": 45180968, "question_id": 45180509, "link": "https://stackoverflow.com/questions/45180509/the-first-char-of-my-output-is-omitted-in-c/45180968#45180968", "title": "The first char of my output is omitted in C", "body": "<p>An alternative is:</p>\n\n<pre><code>int i = 0;\nchar temp[100];\nfor(i=0; i&lt;MAX_STATES; i++){\n    fgets(temp, 100, stdin);\n    if(strcmp(temp, \"\\n\") == 0)\n        break;\n    sscanf(temp, \"%s %d\\n\", myStates[i].name, &amp;myStates[i].population);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1500466317, "post_id": 45182179, "comment_id": 77347377, "body": "There is no need to add a leading whitespace character before an <code>%s</code> directive with <code>scanf()</code>, since this directive automatically skips over leading whitespace. It does make sense to add this before <code>%[]</code> directives, which do not ignore leading whitespace characters. Still, this does not solve OP&#39;s problem, which is the <code>getchar()</code> in this line: <code>while ((c = getchar())!= EOF) {}</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 7422321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/714d54340874bc641ffc0c3552dc1c14?s=128&d=identicon&r=PG&f=1", "display_name": "Anoop", "link": "https://stackoverflow.com/users/7422321/anoop"}, "is_accepted": false, "score": 0, "last_activity_date": 1500444465, "creation_date": 1500444465, "answer_id": 45182179, "question_id": 45180509, "link": "https://stackoverflow.com/questions/45180509/the-first-char-of-my-output-is-omitted-in-c/45182179#45182179", "title": "The first char of my output is omitted in C", "body": "<p>You could try adding a space before %s in scanf, or specify a strict number of chars.</p>\n\n<p>Or even use this:</p>\n\n<p>// read all whitespace, then store all characters up to a newline </p>\n\n<p>scanf(\" %[^\\n]\", s);</p>\n"}], "owner": {"reputation": 148, "user_id": 4380090, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NzzlG.jpg?s=128&g=1", "display_name": "Nathan1324", "link": "https://stackoverflow.com/users/4380090/nathan1324"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 45180574, "answer_count": 4, "score": 1, "last_activity_date": 1500471533, "creation_date": 1500435207, "last_edit_date": 1500440556, "question_id": 45180509, "link": "https://stackoverflow.com/questions/45180509/the-first-char-of-my-output-is-omitted-in-c", "title": "The first char of my output is omitted in C", "body": "<p>I can't seem to figure out what is going on with my output. I am reading in multiple lines of user input and outputting corresponding input that exceeds a lower boundary. For some reason when I output, the string that's outputted is omitting the first character of the string. Can anyone tell me why this is occuring? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct{\n   char  name[4];\n   int   population;\n} state;\n\nenum { MAX_STATES = 10 };\n\nint main()\n{\n    state myStates[MAX_STATES];\n\n    int c;\n    int i = 0;\n\n    while ((c = getchar())!= EOF)\n    {\n        scanf(\"%s %d\\n\", myStates[i].name, &amp;myStates[i].population);\n        i++; \n    }\n\n    // printf(\"Last character is [%d]\\n\", c);\n    printf(\"\");\n\n    if (c &lt;= 0)\n    {\n        for(int j = 0; j &lt;= MAX_STATES; j++)\n        {\n            if(myStates[j].population &gt;= 10)\n                printf(\"%s %d\\n\", myStates[j].name, myStates[j].population);\n            else\n                break;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Input: </p>\n\n<pre><code>TX 23\nCA 45\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>X 23\nA 45\n</code></pre>\n\n<p><b>Updated Code: </b></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct{\n   char  name[4];\n   int   population;\n} State;\n\nenum { MAX_STATES = 10 };\n\nint main()\n{\n    State myStates[MAX_STATES];\n\n    int i, j;\n\n    // Function to read in multiple lines (up to 10) of user input; loop \n    // controls in place, detects format problems, prevents string buffer \n    // overflows.\n    for (i = 0; i &lt; MAX_STATES; i++)\n    {\n        if (scanf(\"%2s %d\\n\", myStates[i].name, &amp;myStates[i].population) != 2)\n            break;\n    }\n\n    // Function to output (stdout) array of State structs that exceed 10 \n    // population. \n    for(j = 0; j &lt; i; j++)\n        {\n            if(myStates[j].population &gt;= 10)\n                printf(\"%s %d\\n\", myStates[j].name, myStates[j].population);\n            else\n                break;\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>The output as posted, only goes until there is an input that is less than 10 and it breaks out of the loop. When I didn't have that break statement, I was getting garbage output at the last line. Any suggestions to improve the output? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1533, "user_id": 6702495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36c783c141839b8fbf9aee4a91687fa2?s=128&d=identicon&r=PG&f=1", "display_name": "frozen", "link": "https://stackoverflow.com/users/6702495/frozen"}, "edited": false, "score": 0, "creation_date": 1500434180, "post_id": 45180348, "comment_id": 77328973, "body": "what&#39;s the error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500434213, "post_id": 45180348, "comment_id": 77328985, "body": "<code>scanf</code> returns the number of correctly read inputs. Use that result to verify that valid input was given."}, {"owner": {"reputation": 1, "user_id": 5653023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd81e317cf18789cab0120c0b20f32b5?s=128&d=identicon&r=PG&f=1", "display_name": "L.Liew", "link": "https://stackoverflow.com/users/5653023/l-liew"}, "reply_to_user": {"reputation": 1533, "user_id": 6702495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36c783c141839b8fbf9aee4a91687fa2?s=128&d=identicon&r=PG&f=1", "display_name": "frozen", "link": "https://stackoverflow.com/users/6702495/frozen"}, "edited": false, "score": 0, "creation_date": 1500434444, "post_id": 45180348, "comment_id": 77329049, "body": "@frozen i do not want the user to input the character.. limiting the input to number only.. how can i do this?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1500434447, "post_id": 45180348, "comment_id": 77329050, "body": "<code>namespace</code> can not be used in C."}, {"owner": {"reputation": 1, "user_id": 5653023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd81e317cf18789cab0120c0b20f32b5?s=128&d=identicon&r=PG&f=1", "display_name": "L.Liew", "link": "https://stackoverflow.com/users/5653023/l-liew"}, "edited": false, "score": 0, "creation_date": 1500434474, "post_id": 45180348, "comment_id": 77329061, "body": "@Evert how to verify the valid input?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500434488, "post_id": 45180348, "comment_id": 77329063, "body": "Use an if-statement..."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500434621, "post_id": 45180348, "comment_id": 77329100, "body": "check return value of <code>scanf</code>."}, {"owner": {"reputation": 1, "user_id": 5653023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd81e317cf18789cab0120c0b20f32b5?s=128&d=identicon&r=PG&f=1", "display_name": "L.Liew", "link": "https://stackoverflow.com/users/5653023/l-liew"}, "edited": false, "score": 0, "creation_date": 1500434664, "post_id": 45180348, "comment_id": 77329108, "body": "@Evert i already use if-statement to verify the number in range. But i do not know how to verify if the input is a character."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500434758, "post_id": 45180348, "comment_id": 77329135, "body": "Read my first comment more carefully. Read the manual page for scanf."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500437743, "post_id": 45180348, "comment_id": 77329793, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon. There are a number of questions on SO about how to write C code that ensures that the user enters a (only) a number. Collectively, they outline the alternative options available to you. You&#39;re probably best off using line-based input (<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> or POSIX  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a>) and parsing with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sscanf.html\" rel=\"nofollow noreferrer\"><code>sscanf()</code></a>."}, {"owner": {"reputation": 1, "user_id": 5653023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd81e317cf18789cab0120c0b20f32b5?s=128&d=identicon&r=PG&f=1", "display_name": "L.Liew", "link": "https://stackoverflow.com/users/5653023/l-liew"}, "edited": false, "score": 0, "creation_date": 1500438997, "post_id": 45180348, "comment_id": 77330184, "body": "@Evert sorry I not that good in programming.. i still cant understand how to do it.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500439123, "post_id": 45180348, "comment_id": 77330218, "body": "<code>if (scanf(&quot;%d&quot;, &amp;skor) == 1) { &#47;* read int *&#47; } else { &#47;* show warning about attempting to read a non-int *&#47; }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500439168, "post_id": 45180348, "comment_id": 77330234, "body": "scanf returns the number of correctly read inputs: if scanf asks for an int, and you give it one, it&#39;ll return one. If you give something else, scanf fails to read it correctly, hence it&#39;ll return 0."}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1500446316, "post_id": 45180902, "comment_id": 77333294, "body": "Do you know of any portable way to &quot;Trap key downs&quot; ? And how do you intend to handle back strokes, back strokes after non numeric characters? Please post a complete answer. This qualifies just to be a comment."}], "tags": [], "owner": {"reputation": 434, "user_id": 7902135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54180f17484cab5a689711805bfb1bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Harsh", "link": "https://stackoverflow.com/users/7902135/harsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500438015, "creation_date": 1500438015, "answer_id": 45180902, "question_id": 45180348, "link": "https://stackoverflow.com/questions/45180348/input-only-number-c-programming/45180902#45180902", "title": "Input only number C programming", "body": "<p>You could choose among options:<br>\nA. Take input as string and then verify if the string is number. Else, discard it.<br>\nB. Trap key downs. If if is alphabet or symbol, discard. If 0-9, use it.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1500439078, "post_id": 45180914, "comment_id": 77330210, "body": "Why that complicated? Why not <code>if (scanf(&quot;%d&quot;, &amp;skor) == 1)</code>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500439172, "post_id": 45180914, "comment_id": 77330237, "body": "@Evert <code>50abc</code> , <code>111111111111</code> must be an invalid input."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1500438126, "creation_date": 1500438126, "answer_id": 45180914, "question_id": 45180348, "link": "https://stackoverflow.com/questions/45180348/input-only-number-c-programming/45180914#45180914", "title": "Input only number C programming", "body": "<p>like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n\nint get_int(const char *prompt){\n    char buff[32];\n\n    for(;;){\n        fputs(prompt, stdout);fflush(stdout);\n        if(fgets(buff, sizeof buff, stdin)){\n            if(strchr(buff, '\\n')){\n                char *endp;\n                long n;\n\n                errno = 0;\n                n = strtol(buff, &amp;endp, 10);\n                if(errno == 0 &amp;&amp; *endp == '\\n' &amp;&amp; INT_MIN &lt;= n &amp;&amp; n &lt;= INT_MAX)\n                    return n;\n            } else {//too long input\n                while(getchar() != '\\n');\n            }\n        } else {//input EOF\n            continue;//ignore EOF\n        }\n    }\n}\n\nint main(void){\n    int n = 0, score, min = INT_MAX, max = INT_MIN;\n    double total = 0, average;\n\n    printf(\"Enter test scores,-1 to exit\\n\");\n    while((score = get_int(\"* Scores[%d] (0-50) : \")) != -1){\n        if(score &lt; 0 || score &gt; 50)\n            continue;\n\n        total += score;\n        if(score &gt; max)\n            max = score;\n        if(score &lt; min)\n            min = score;\n        ++n;\n    }\n    if(n){\n        average = total / n;\n        printf(\"Average marks = %.2f\\n\", average);\n        printf(\"MIN:%d\\n\", min);\n        printf(\"MAX:%d\\n\", max);\n    } else {\n        puts(\"No valid input\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5653023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd81e317cf18789cab0120c0b20f32b5?s=128&d=identicon&r=PG&f=1", "display_name": "L.Liew", "link": "https://stackoverflow.com/users/5653023/l-liew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1255, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1500438126, "creation_date": 1500434095, "last_edit_date": 1500434392, "question_id": 45180348, "link": "https://stackoverflow.com/questions/45180348/input-only-number-c-programming", "title": "Input only number C programming", "body": "<p>currently i am doing a program to get the input (0 to 50) from the user.\nIf the number is out of the range then the number will not be counted.\nAfter that, i will calculate and get the average, maximum and minimum for those\ninputs. I facing a problem when the user input character. The program will crack. I wonder how can i solve this problem? Thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nint main()\n{\nint i=1 , j=1,skor;             //variable untuk jumlah ujian\nfloat total = 0, average;       //variable untuk skor ujian, jumlah dan purata\nint min=99999;                  //variable untuk min\nint max=0;                  //variable untuk max\n\nprintf(\"*******************************************************************************\\n\");\nprintf(\"*                    Enter test scores,-1 to exit                              \\n\");\nprintf(\"*******************************************************************************\\n\");\nprintf(\"*                                                                              \\n\");\n//masukkan data skor dan perhitungan jumlah keseluruhan skor\nwhile (skor != -1)\n{\n    printf(\"* Scores[%d] (0-50) : \", i);\n    scanf(\"%d\", &amp;skor);\n    if(skor&gt;-1&amp;&amp;skor&lt;51)\n    {\n        total += skor;\n        j++;\n    }\n    if(skor&gt;max&amp;&amp;skor&lt;51&amp;&amp;skor!=-1)\n    {\n        max=skor;\n    }\n    if(skor&lt;min&amp;&amp;skor&gt;=0&amp;&amp;skor!=-1)\n    {\n        min=skor;\n    }\n    i++;\n}\nj=j-1;\n//pengiraan purata\naverage = total / j;\n//printf(\"\\nJumlah = %.2f\\n\", Jumlah);\n//printf(\"\\nj = %d\\n\", j);\nprintf(\"*                                                                              \\n\");\nprintf(\"*******************************************************************************\\n\");\nprintf(\"* \\n* Average marks = %.2f                                 \\n\", average);\nprintf(\"*                                                                              \\n\");\nprintf(\"*******************************************************************************\\n\");\n//pemaparan nilai min dan max\nprintf(\"*                                                                              \\n\");\nprintf(\"* MIN:%d \\n\", min);\nprintf(\"* MAX:%d \\n\", max);\nprintf(\"*                                                                              \\n\");\nprintf(\"*******************************************************************************\\n\");\ngetch();\nreturn 0;\n}\n</code></pre>\n\n<p>I want to limit that the input is only for integer value and not allow the user to input a character so that the program will not crack.</p>\n"}, {"tags": ["c", "linux", "parameters", "command-line-interface", "terminal-emulator"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8286278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8adb52f5721b936e2861601be4e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aria", "link": "https://stackoverflow.com/users/8286278/aria"}, "edited": false, "score": 0, "creation_date": 1500427708, "post_id": 45179516, "comment_id": 77327572, "body": "I tried this, this just printed out &quot;^A^K&quot; to my command line"}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 19, "user_id": 8286278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8adb52f5721b936e2861601be4e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aria", "link": "https://stackoverflow.com/users/8286278/aria"}, "edited": false, "score": 0, "creation_date": 1500427942, "post_id": 45179516, "comment_id": 77327620, "body": "@Aria This is the <code>-e</code> of the <code>echo</code> is for. It is the abbreviation of <i>evaluate</i>."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 19, "user_id": 8286278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8adb52f5721b936e2861601be4e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aria", "link": "https://stackoverflow.com/users/8286278/aria"}, "edited": false, "score": 0, "creation_date": 1500428040, "post_id": 45179516, "comment_id": 77327648, "body": "Wait, it this line clear is the feature of your shell or terminal emulator, then it will be really not so easy! But give it a try. If it doesn&#39;t work, the next step will be to find out, what does this line deletion feature."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 2, "creation_date": 1500430655, "post_id": 45179516, "comment_id": 77328229, "body": "<code>echo -e</code> does not work with caret notation, and writing these characters to screen will not affect bash&#39;s line reading."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1500465940, "post_id": 45179516, "comment_id": 77347089, "body": "@thatotherguy 1. Try then <code>echo -e</code> and you will see that it works. 2. It is a different (sub-)question, what will this sequence do. In the <a href=\"https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system/45179516#comment77327648_45179516\">comment</a> I explained, it won&#39;t surely work. 3. I don&#39;t know what makes the line deletion for this sequence, the bash (i.e. readline) or anything, the OP didn&#39;t write it."}, {"owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1500466421, "post_id": 45179516, "comment_id": 77347462, "body": "@thatotherguy  4. Referencing the comment again, my next idea is to watch, what will the readline (bash) do for this shortcut, likely it will produce an additional list of control sequences. The next step would be to check what is this sequence (for example, with a <code>strace</code>) and then emitting this from <code>echo -e</code>. 5. To do (4), first a feedback from the OP is needed, how the things are working by him. 6. It is also possible that this whole thing won&#39;t work, but I think it is unlikely (newer terminals are far enough smart to do this with control sequences, the only question is what is it)."}], "tags": [], "owner": {"reputation": 9620, "user_id": 1783163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BfUwH.jpg?s=128&g=1", "display_name": "peterh", "link": "https://stackoverflow.com/users/1783163/peterh"}, "is_accepted": false, "score": -3, "last_activity_date": 1500427330, "creation_date": 1500427330, "answer_id": 45179516, "question_id": 45179486, "link": "https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system/45179516#45179516", "title": "How to emulate a ctrl sequence with `system()`?", "body": "<p>First check the terminal controlling sequence what these commands give. You can do this by pressing a CTRL + V before the command. You will likely get</p>\n\n<pre><code>^A^K\n</code></pre>\n\n<p>If you want to do this with a <code>system()</code> call, then you should have to call a command with it, which ejects this terminal controlling sequence to your screen. Simplest command is for that the <code>/bin/echo</code>. A</p>\n\n<pre><code>/bin/echo -ne '^A^K'\n</code></pre>\n\n<p>will do the same. Give it to the <code>system()</code>:</p>\n\n<pre><code>system(\"/bin/echo -ne '^A^K'\");\n</code></pre>\n\n<p>And wonder.</p>\n"}, {"tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 0, "last_activity_date": 1500430220, "creation_date": 1500430220, "answer_id": 45179850, "question_id": 45179486, "link": "https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system/45179850#45179850", "title": "How to emulate a ctrl sequence with `system()`?", "body": "<p>You are very likely trying to do something wrong.</p>\n\n<p>First a minor note that you can clear up the line with mere ^U. ^K removes stuff from the current position and ^A takes you to the beginning, kind of a round-about way of doing this.</p>\n\n<p>Most programs should not accept interactive input, but instead take arguments from the command line (the argc and argv stuff). In the unlikely case the program has to be interactive, you typically don't want to do any explicit screen manipulation. In the even more unlikely case it makes sense to do said manilupation, you want to use something like ncurses.</p>\n\n<p>That said, I strongly suggest you elaborate on your actual problem.</p>\n"}, {"comments": [{"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1500437448, "post_id": 45180154, "comment_id": 77329706, "body": "I&#39;m confused by this answer. suspicion that they just want to make some kind of a progress bar or a spinner may be the correct one and has a reasonable/trivial answer, which you chose not to provide. Instead, you provided an obviously insane code sample implementing OP&#39;s wrong idea and now risk that they will building something on top of it."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1500442404, "post_id": 45180154, "comment_id": 77331417, "body": "Technically correct is the best kind of correct ^__^"}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1500433850, "last_edit_date": 1500433850, "creation_date": 1500432765, "answer_id": 45180154, "question_id": 45179486, "link": "https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system/45180154#45180154", "title": "How to emulate a ctrl sequence with `system()`?", "body": "<p>It makes no sense, but you can use Ctrl+A Ctrl+K in <code>system()</code> by crafting a command that allocates a PTY, runs a readline command like <code>bash</code>, and then write ASCII 0x01 0x0B to it. <code>script</code> and <code>printf</code> lets you do this:</p>\n\n<pre><code>void main() {\n  system(\n      \"{ sleep 1; \"\n      \"echo -n 'part of a line. deleting with Ctrl+A Ctrl+K soon...'; \"\n      \"sleep 3; \"\n      \"printf '\\x01\\x0b'; \"\n      \"sleep 2; \"\n      \"} | script -q 'bash'\"\n      );\n}\n</code></pre>\n\n<p>This will show a bash prompt, simulate writing \"part of a line..\", and then it writes Ctrl-A Ctrl-K to it, deleting it. </p>\n\n<p>Make sure to try it verbatim without any changes, because it can't be adapted to do anything useful in a larger program.</p>\n\n<p>PS: If you want to write and overwrite a line to create a spinner or progress bar, the question you should ask is \"how do I write and overwrite a line to create a spinner or progress bar?\"</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1500448373, "creation_date": 1500448373, "answer_id": 45183365, "question_id": 45179486, "link": "https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system/45183365#45183365", "title": "How to emulate a ctrl sequence with `system()`?", "body": "<p>You don't need to use <code>system()</code> if you just want to clear the current line as output by <em>your application</em> and move cursor to the beginning; instead just use <code>printf</code>. The code <code>\\r</code> means carriage return, and moves the cursor to the beginning of the line, and the ANSI escape sequence <code>CSI 2 K</code> will clear the entire line - the CSI consists of 2 characters: ASCII ESC (<code>\\033</code>), and <code>[</code>.</p>\n\n<p>Thus:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void) {\n    printf(\"Here be demo\");\n    fflush(stdout);\n    sleep(1);\n    printf(\"\\r\\033[2KIt works!\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8286278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8adb52f5721b936e2861601be4e6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Aria", "link": "https://stackoverflow.com/users/8286278/aria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 2, "answer_count": 4, "score": 0, "last_activity_date": 1500448373, "creation_date": 1500427030, "last_edit_date": 1500427349, "question_id": 45179486, "link": "https://stackoverflow.com/questions/45179486/how-to-emulate-a-ctrl-sequence-with-system", "title": "How to emulate a ctrl sequence with `system()`?", "body": "<p>If I use CTRL + A CTRL + K in the terminal (LINUX), it clears the line I type out in terminal. I want to perform this function through a <code>system()</code> call in my code. What parameters do I pass to a <code>system()</code> in order for it to run CTRL + A CTRL + K?</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 0, "creation_date": 1500426533, "post_id": 45179401, "comment_id": 77327274, "body": "That C++ not C#"}, {"owner": {"reputation": 25448, "user_id": 563532, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2773fec98b1630ec087b575482dc08a?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/563532/rob"}, "edited": false, "score": 0, "creation_date": 1500426579, "post_id": 45179401, "comment_id": 77327285, "body": "I&#39;m removing the C# tag as it&#39;s clearly not C#. I&#39;m unsure whether it&#39;s C or C++, so please re-tag your question appropriately"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500509611, "post_id": 45179401, "comment_id": 77373043, "body": "Using <code>double main()</code> is completely unorthodox, and I don&#39;t know of a platform where it is supported.  That may be the least of your problems.  What do you expect the <code>**jacobian(\u2026);</code> line to do?  It uses the 0,0 element of the array, sort of, but the compiler might optimize that away."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500509674, "post_id": 45179401, "comment_id": 77373059, "body": "Reformatting shows a bracing error."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1500515939, "post_id": 45179401, "comment_id": 77374475, "body": "what do you think <code>sizeof(Gama)</code> does?"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1500509818, "creation_date": 1500509818, "answer_id": 45203097, "question_id": 45179401, "link": "https://stackoverflow.com/questions/45179401/matrix-allocation/45203097#45203097", "title": "Matrix allocation", "body": "<p>The code does not compile, but it would have undefined behavior anyway, since neither <code>J</code> nor <code>y</code> are ever allocated, storing values to <code>y[k]</code> or <code>J[i][j]</code> are major problems.</p>\n"}], "owner": {"reputation": 13, "user_id": 8328428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a696932ed5842a930b419f3590f33b59?s=128&d=identicon&r=PG&f=1", "display_name": "J. Fuger", "link": "https://stackoverflow.com/users/8328428/j-fuger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 45203097, "answer_count": 1, "score": 1, "last_activity_date": 1500510054, "creation_date": 1500426429, "last_edit_date": 1500510054, "question_id": 45179401, "link": "https://stackoverflow.com/questions/45179401/matrix-allocation", "title": "Matrix allocation", "body": "<p>I am trying to write a function that should have as result a matrix.\nThe function is showed below:</p>\n\n<pre><code>double **jacobian(double *Xn, double *Clvi, double *c, double *Vinf,\n                  int *Np, double *mu, double *dx) {\n    /*Calculating the Fn values*/\n\n    int position = *Np / 2;\n    int k;\n    double *y;\n    double **J;\n\n    double *Gama = malloc(position * sizeof(double)); \n    double *Dalpha = malloc(position * sizeof(double));\n\n    memcpy(Gama, Xn, position * sizeof(Gama));\n    memcpy(Dalpha, Xn + position, position * sizeof(Gama)); \n\n    for (k = 1; k &lt;= (position - 2); k++) {\n        y[k] = Dalpha[k] - Clvi[k] / (2 * pi) + Gama[k] / (pi * *Vinf * *c) -\n               *mu * (Dalpha[k - 1] - 2 * Dalpha[k] + Dalpha[k + 1]); // n values listed as F1, F2,...Fn  - rows\n    }\n\n    int i;\n    int j;\n\n    //Gamma values\n    for (i = 1; i &lt;= (position - 2); i++) {\n        for (j = 1; j &lt; position - 2; j++) {\n            if (i == j) {\n                J[i][j] = ((Dalpha[j] - Clvi[j] / (2 * pi) + \n                            (Gama[j] + *dx) / (pi * *Vinf * *c) -\n                             *mu * (Dalpha[j - 1] - 2 * Dalpha[j] + Dalpha[j + 1])) - y[i]) / (*dx);\n            } else {\n                J[i][j] = 0;\n            }\n        }\n    }\n    for (j = position; j &lt; *Np; j++) {  \n        if (abs(i - j) &gt; 3) {\n            J[i][j] = 0;\n        } else {\n            J[i][j] = (((Dalpha[j] + *dx) -\n                        Clvi[j] / (2 * pi) + Gama[j] / (pi * *Vinf * *c) - \n                        *mu * (Dalpha[j - 1] - 2 * (Dalpha[j] + *dx) + \n                               Dalpha[j + 1])) - y[i]) / (*dx);\n\n        }\n    }\n}\n\nreturn J\n};\n</code></pre>\n\n<p>However, every time I try to run it, I receive the Segmentation error message.\nI guess it is because I am allocating the matrices elements wrong.\nCan someone help me?</p>\n\n<p>Running script.</p>\n\n<pre><code>double main() {\n    double Xn[12] = {1.0,2.0,3.0,4.0,5.0,6.0,0.1,0.2,0.3,0.4,0.5,0.6};\n    double Clvi[6] = {0.2,0.3,0.35,0.4,0.5,0.6};\n    double alpha[6] = {1.0,2.0,3.0,4.0,5.0,6.0};\n    double c = 1.0;\n    double Vinf = 300.0;\n    double mu = 0.2;\n    int Np1 = 12;\n    double dx = 0.1;\n\n    **jacobian(Xn, Clvi, &amp;c, &amp;Vinf, &amp;Np1, &amp;mu, &amp;dx);\n}\n</code></pre>\n"}, {"tags": ["c", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 171, "user_id": 8328436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119abb210ce564512ae74d2057bb12b1?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/8328436/npatel"}, "edited": false, "score": 0, "creation_date": 1500427381, "post_id": 45179442, "comment_id": 77327486, "body": "@npatel That&#39;s a warning, not an error. You should provide a declaration for <code>callmethod()</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1500426680, "creation_date": 1500426680, "answer_id": 45179442, "question_id": 45179368, "link": "https://stackoverflow.com/questions/45179368/jni-calling-c-from-java/45179442#45179442", "title": "JNI: calling C from java", "body": "<p>Your native method written in C can do anything any other C program can do, including calling other functions:</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisObj) {\n   jint a=3, b=4;\n   printf(\"sum=%d\\n\", callmethod(env, a, b));\n   return;\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 8328436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119abb210ce564512ae74d2057bb12b1?s=128&d=identicon&r=PG&f=1", "display_name": "npatel", "link": "https://stackoverflow.com/users/8328436/npatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 45179442, "answer_count": 1, "score": 0, "last_activity_date": 1500426680, "creation_date": 1500426226, "last_edit_date": 1500426555, "question_id": 45179368, "link": "https://stackoverflow.com/questions/45179368/jni-calling-c-from-java", "title": "JNI: calling C from java", "body": "<p>I am writing a C implementation for Java Code and it is a simple HelloWorld code.</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include \"HelloJNI.h\"\n\n// Implementation of native method sayHello() of HelloJNI class\nJNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisObj) {\n   printf(\"Hello World!\\n\");\n   return;\n}\n</code></pre>\n\n<p>But I would like to call another function in this function called callmethod:</p>\n\n<pre><code>int callmethod(JNIENV *env, jint a, jint b)\n{\n   return a+b;\n}\n</code></pre>\n\n<p>Is there any way to call <code>int callmethod(JNIENV *env, jint a, jint b)</code> which is not declared java code to be called in the method <code>JNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisObj)</code>?</p>\n"}, {"tags": ["c", "sockets", "ipv6"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 4, "creation_date": 1500423319, "post_id": 45178942, "comment_id": 77326468, "body": "Try <code>sizeof(m_socket_addrv6)</code> instead. You are telling <code>connect</code> the structure you are passing it is smaller than it actually is."}, {"owner": {"reputation": 221, "user_id": 7081500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8898cc3ce116bc692aa2004b0f28601f?s=128&d=identicon&r=PG&f=1", "display_name": "aupreti", "link": "https://stackoverflow.com/users/7081500/aupreti"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1500426417, "post_id": 45178942, "comment_id": 77327245, "body": "@PaulRooney thanks! that got rid of the error."}, {"owner": {"reputation": 14659, "user_id": 2705055, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b1d5dfaf239229501a184c8858fbc954?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Rosenau", "link": "https://stackoverflow.com/users/2705055/martin-rosenau"}, "edited": false, "score": 0, "creation_date": 1500441433, "post_id": 45178942, "comment_id": 77331025, "body": "Does connection work? <code>sin6_scope_id</code> is 0 although the address seems to be a link-local address!"}, {"owner": {"reputation": 221, "user_id": 7081500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8898cc3ce116bc692aa2004b0f28601f?s=128&d=identicon&r=PG&f=1", "display_name": "aupreti", "link": "https://stackoverflow.com/users/7081500/aupreti"}, "reply_to_user": {"reputation": 14659, "user_id": 2705055, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b1d5dfaf239229501a184c8858fbc954?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Rosenau", "link": "https://stackoverflow.com/users/2705055/martin-rosenau"}, "edited": false, "score": 0, "creation_date": 1500498988, "post_id": 45178942, "comment_id": 77369478, "body": "@MartinRosenau Yeah, the connection worked for sin6_scope_id=0. I am currently testing with link-local address."}], "answers": [{"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 1, "last_activity_date": 1500426888, "creation_date": 1500426888, "answer_id": 45179472, "question_id": 45178942, "link": "https://stackoverflow.com/questions/45178942/invalid-argument-error-while-calling-connect-for-ipv6-socket/45179472#45179472", "title": "Invalid argument error while calling connect for IPv6 socket", "body": "<p>You need to pass the size of the address, which is <code>sizeof(m_socket_addrv6)</code>, <em>not</em> <code>sizeof(struct sockaddr)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": true, "score": 2, "last_activity_date": 1500505452, "last_edit_date": 1500505452, "creation_date": 1500428749, "answer_id": 45179683, "question_id": 45178942, "link": "https://stackoverflow.com/questions/45178942/invalid-argument-error-while-calling-connect-for-ipv6-socket/45179683#45179683", "title": "Invalid argument error while calling connect for IPv6 socket", "body": "<p>Here is the function signature of connect.</p>\n\n<pre><code>int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);\n</code></pre>\n\n<p>The <code>addrlen</code> argument needs to be the true size of the <code>addr</code> argument. You are specifying it as <code>sizeof(struct sockaddr)</code>. This is too small for the actual struct you are passing, so connect will not use your structure correctly.</p>\n\n<p>Instead pass the actual real size of the <code>m_socket_addrv6</code> struct.</p>\n\n<pre><code>connect(m_socket, (struct sockaddr*)&amp;m_socket_addrv6, sizeof(m_socket_addrv6));\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 7081500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8898cc3ce116bc692aa2004b0f28601f?s=128&d=identicon&r=PG&f=1", "display_name": "aupreti", "link": "https://stackoverflow.com/users/7081500/aupreti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 45179683, "answer_count": 2, "score": 1, "last_activity_date": 1500505452, "creation_date": 1500422755, "last_edit_date": 1500502234, "question_id": 45178942, "link": "https://stackoverflow.com/questions/45178942/invalid-argument-error-while-calling-connect-for-ipv6-socket", "title": "Invalid argument error while calling connect for IPv6 socket", "body": "<p>I am getting an invalid argument error when I call </p>\n\n<pre><code>connect(m_socket, (struct sockaddr *)&amp;m_socket_addrv6, sizeof(struct sockaddr));\n</code></pre>\n\n<p>m_socket_addrv6 is a sockaddr_in6 struct.\nFrom gdb, this is what m_socket_addrv6 looks like.  </p>\n\n<pre><code>&gt;{sin6_len = 0 '\\0', sin6_family = 28 '\\034', sin6_port = 20480,  sin6_flowinfo = 0, sin6_addr = {__u6_addr = {\n  __u6_addr8 = \"\ufffd\\200\\000\\000\\000\\000\\000\\000\\002PV\ufffd\ufffd\ufffd\\000n\", __u6_addr16 = {33022, 0, 0, 0, 20482, 65366, 48126, 28160},\n  __u6_addr32 = {33022, 0, 4283846658, 1845541886}}}, sin6_scope_id = 0}. \n</code></pre>\n\n<p>Similar code was working for IPv4. Is there something I am missing for v6? </p>\n"}, {"tags": ["c", "linux", "process", "fork", "exec"], "answers": [{"comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1500453030, "post_id": 45180822, "comment_id": 77337755, "body": "I tried <code>kill (getppid(), 9);</code> in the childs code (before the exec) and <code>wait (0);</code> in the parents code. Both exit immediately."}], "tags": [], "owner": {"reputation": 113, "user_id": 8328926, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207864122714934/picture?type=large", "display_name": "Tung Vs", "link": "https://stackoverflow.com/users/8328926/tung-vs"}, "is_accepted": false, "score": -2, "last_activity_date": 1500437461, "creation_date": 1500437461, "answer_id": 45180822, "question_id": 45178612, "link": "https://stackoverflow.com/questions/45178612/exec-from-terminal-application-killing-the-terminal/45180822#45180822", "title": "exec from terminal application killing the terminal", "body": "<p>My idea is getting your program PID (process id), find it's parent PID (the terminal shell) and kill it with shell command \"kill -9\", then quit.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 5020949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222de4518d449a9e83ec3719c7795549?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel Frei", "link": "https://stackoverflow.com/users/5020949/rachel-frei"}, "is_accepted": false, "score": 0, "last_activity_date": 1525288109, "last_edit_date": 1525288109, "creation_date": 1525282787, "answer_id": 50140561, "question_id": 45178612, "link": "https://stackoverflow.com/questions/45178612/exec-from-terminal-application-killing-the-terminal/50140561#50140561", "title": "exec from terminal application killing the terminal", "body": "<p>What's happening is my_app is closing, sending SIGHUP to its children, which includes the forked process. When the forked process gets SIGHUP, it forwards it to its children, which include the exec'd program, so that dies too.</p>\n\n<p>Sounds like you want something similar to nohup, which doesn't respond to SIGHUP, or the shell built-in, \"disown\", which effectively chooses not to send SIGHUP to the exec'd process on exit. </p>\n\n<p>Simplest thing to do would be to </p>\n\n<p>a) call signal (SIGHUP, SIG_IGN) before calling execvp, which will prevent your forked process from dying when it gets SIGHUP.</p>\n\n<p>or</p>\n\n<p>b) copy appdata[i].args with adding \"nohup\" in front, and call execvp on that. nohup does (a) for you.</p>\n\n<p>minimal example of the first option:</p>\n\n<pre><code>void main(){\n  char * cmd[3] = {\"sleep\", \"1337\", 0};\n  int pid = fork();\n  if (pid &lt; 0)\n    printf(\"Could not fork\");\n  else if (pid == 0)\n    {\n      signal (SIGHUP, SIG_IGN);\n      execvp (cmd[0], cmd);\n      printf (\"Could not run\");\n    }\n}\n</code></pre>\n\n<p>If you run the above you will see it dies immediately but leaves sleep orphaned (find it with top or ps)</p>\n"}], "owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525288109, "creation_date": 1500420080, "question_id": 45178612, "link": "https://stackoverflow.com/questions/45178612/exec-from-terminal-application-killing-the-terminal", "title": "exec from terminal application killing the terminal", "body": "<p>I have written a small ncurses tool to run applications. What I want to achieve is that after I press enter and I successfully create the new process I want to exit my ncurses application and close the terminal.\nI run my application with <code>termite -e my_app</code> (every other terminal emulator which has the -e option should be fine, too). The terminal would probably close after my_app exits, but I can't get the parent to exit.</p>\n\n<p>I tried adding an <code>exit(0)</code> to the location in the code marked with a comment, but in this case I can no longer open up an application (I guess it exits immediately when its parent exits).</p>\n\n<p>I also tried using exec directly, without forking. But in this case the terminal emulator as parent of my_app and its replacement will keep running until the application exits.</p>\n\n<pre><code>static void\nhandle_enter (enum mode mode, char *buf, struct appdata *appdata, int i)\n{\n  pid_t pid;\n\n  if (mode == EXEC)\n    {\n      if (i == -1)\n        return;\n      if (strcmp (buf, appdata[i].name) == 0)\n        {\n          pid = fork();\n          if (pid &lt; 0)\n            report_run_error (\"Could not fork\", NULL);\n          else if (pid == 0)\n            {\n              execvp (appdata[i].args[0], appdata[i].args);\n              report_run_error (\"Could not run: %s\", appdata[i].name);\n            }\n          /* tried exit here */\n        }\n      else\n        return;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1500417422, "post_id": 45178196, "comment_id": 77324927, "body": "And who is going to allocate enough memory for this?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 3, "creation_date": 1500417478, "post_id": 45178196, "comment_id": 77324939, "body": "To do it using run-time stack you&#39;d either need 1) a non-standard run-time allocation through <code>alloca</code> or 2) recursive functions, where each level of recursion would host a single list node. That&#39;s about it. What you have now is not viable and only leads to undefined behavior. Of course, you can simply pre-allocate a fixed number of nodes as a local array and hope it is enough for your list... But I&#39;m sure this is not what you meant."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500417905, "post_id": 45178196, "comment_id": 77325055, "body": "<code>INT_NODE newNode;</code> \uff1a This is invalid outside the scope."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1500418338, "post_id": 45178196, "comment_id": 77325186, "body": "your are creating AND destroying yr node each time round that while loop. Gotta do it on the heap"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500424253, "post_id": 45178196, "comment_id": 77326697, "body": "Note that the only reason your printing loop stops is because of the <code>i &lt; 5</code> term.  For a true linked list, you&#39;d keep going until you reached a node with a null next pointer (most common case).  If you tried that, you&#39;d most probably get <code>31</code> produced &#39;for ever&#39; (until you got bored and killed your program).  That&#39;s a symptom of your troubles."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5075297, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8AAEN.jpg?s=128&g=1", "display_name": "BlaqICE", "link": "https://stackoverflow.com/users/5075297/blaqice"}, "edited": false, "score": 0, "creation_date": 1500674041, "post_id": 45178742, "comment_id": 77460622, "body": "Oh no, the answer I was going to give the green checkmark to is gone. :("}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1500424216, "last_edit_date": 1500424216, "creation_date": 1500421208, "answer_id": 45178742, "question_id": 45178196, "link": "https://stackoverflow.com/questions/45178196/c-stack-allocated-linked-list/45178742#45178742", "title": "C - Stack allocated linked list", "body": "<p>To do it using run-time stack you could use one of the following:</p>\n\n<ol>\n<li>Run-time allocation through <code>alloca</code>. This is easy: basically just replace <code>malloc</code> with <code>alloca</code> (and don't attempt to wrap <code>alloca</code> into another function). However, <code>alloca</code> is not a standard function.</li>\n<li>Recursive function, where each level of recursion would host a single list node (or a fixed number of list nodes). This has some severe limitations, but technically it meets your requirement of allocating all nodes on the stack.</li>\n<li>Pre-allocate a fixed number of nodes as a local array and hope it is enough for your list... But I'm sure this is not what you meant.</li>\n</ol>\n\n<p>That's about it. What you have now is not viable and only leads to undefined behavior. Your list basically \"consists\" of <code>INT_NODE</code> objects whose lifetime has already ended. In practice you'll typically end up reusing the same memory location again and again effectively linking a single node to itself.</p>\n\n<p>Here's an example if an implementation that keeps the whole list \"on the stack\" following the recursive approach. Of course, the list exists only as long as all recursive invocations are \"active\". This limits the applicability of this technique, but it has it uses</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct INT_NODE \n{\n  int element;\n  struct INT_NODE *next;\n} INT_NODE;\n\nvoid print_list(const INT_NODE *head)\n{\n  for (const INT_NODE *current = head; current != NULL; current = current-&gt;next)\n    printf(\"%d  \", current-&gt;element);\n  printf(\"\\n\");\n}\n\nvoid build_list(INT_NODE *head, INT_NODE *last)\n{\n  INT_NODE new = { 0 };\n\n  if (scanf(\"%d\", &amp;new.element) != 1)\n  {\n    print_list(head);\n    return;\n  }\n\n  if (head == NULL)\n    head = &amp;new;\n  else\n    last-&gt;next = &amp;new;\n\n  build_list(head, &amp;new);\n}\n\nint main(void) \n{\n  build_list(NULL, NULL);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5a4f15a82c66d992\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/5a4f15a82c66d992</a></p>\n"}, {"comments": [{"owner": {"reputation": 4338, "user_id": 1061193, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d7ffbfe3211751d0cfe8c9fcda306c2b?s=128&d=identicon&r=PG", "display_name": "drum", "link": "https://stackoverflow.com/users/1061193/drum"}, "edited": false, "score": 0, "creation_date": 1500437554, "post_id": 45180764, "comment_id": 77329736, "body": "Please post answers only if you are sure."}], "tags": [], "owner": {"reputation": 31, "user_id": 8317277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767db509e0378968f266921102ea8a13?s=128&d=identicon&r=PG&f=1", "display_name": "anka", "link": "https://stackoverflow.com/users/8317277/anka"}, "is_accepted": false, "score": 1, "last_activity_date": 1500437100, "creation_date": 1500437100, "answer_id": 45180764, "question_id": 45178196, "link": "https://stackoverflow.com/questions/45178196/c-stack-allocated-linked-list/45180764#45180764", "title": "C - Stack allocated linked list", "body": "<p>I think the reason is the scope of variables.\nEnter 5, program allocate memory on stack, but it will be returned.\nEnter 12, allocate same memory, return it.\nso finally, the head next pointer is the same memory, and the same memory next pointer is itself.</p>\n\n<p>you can output more than 5. maybe you will get  84 31 31  31 31 31 31 31 ..... </p>\n"}], "owner": {"reputation": 199, "user_id": 5075297, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8AAEN.jpg?s=128&g=1", "display_name": "BlaqICE", "link": "https://stackoverflow.com/users/5075297/blaqice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1500437100, "creation_date": 1500417229, "question_id": 45178196, "link": "https://stackoverflow.com/questions/45178196/c-stack-allocated-linked-list", "title": "C - Stack allocated linked list", "body": "<p>My goal with the following code was to have a user enter some integers, have those integers stored in stack allocated nodes of type <code>INT_NODE</code> and then link all those nodes together.  Finally, I wanted to iterate through the list and print out the element at each node (only the first 5 in the following code).  When I enter some numbers, however, the program prints out the first number I entered, and then the last number I entered repeated 4 times.  For example, if I enter <code>84 5 12 7 1 22 31[Enter]</code> and then press <code>Ctrl+D</code> at the beginning of the next line to simulate EOF on this Mac, I get the following output; <code>84 31 31 31 31</code>.  I can't figure out why it is doing this.  </p>\n\n<p>I am aware that I could allocate the nodes on the heap using <code>malloc()</code> and I have already written a function to do that.  I was just wondering if it were possible to do it using the runtime stack.  </p>\n\n<p>In the following code, the <code>INT_NODE</code> type is defined in the <code>\"SortingAlgs.h\"</code> header as the following;</p>\n\n<pre><code>typedef struct INT_NODE {\n    int element;\n    struct INT_NODE *next;\n} INT_NODE;\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"SortingAlgs.h\"\n\nint main(void) {\n\n    INT_NODE head = {-999999999};\n    int num;\n    INT_NODE *pCurrentNode = &amp;head;\n\n    if (scanf(\"%d\", &amp;num) != EOF) {\n        head.element = num;\n\n        while (scanf(\"%d\", &amp;num) != EOF) {\n            INT_NODE newNode;\n\n            newNode.element = num;\n            newNode.next = NULL;\n            pCurrentNode-&gt;next = &amp;newNode;\n            pCurrentNode = pCurrentNode-&gt;next;\n        }\n    } \n    int i;\n    for (pCurrentNode = &amp;head, i = 0; i &lt; 5;\n         pCurrentNode = pCurrentNode-&gt;next, i++)\n\n        printf(\"%d  \", pCurrentNode-&gt;element);\n\n    printf(\"\\n\");\n\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c", "macos", "gcc", "go", "cgo"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 2, "creation_date": 1500432022, "post_id": 45177958, "comment_id": 77328519, "body": "I managed to get it working on Linux by using <code>.&#47;configure --enable-module-recovery</code>. Since I installed to a directory that was outside the compiler&#39;s standard search path, I also had to modify <code>transactions&#47;signed_transaction.go</code> to fix the <code>#cgo</code> line for things to work correctly and the ldflags in the Makefile in the upvote example directory. You might need to do the same. Then you can use <code>make</code> in the <code>examples&#47;upvote</code> directory to build the example. I&#39;ve written a <a href=\"https://pastebin.com/wCTzgC1y\" rel=\"nofollow noreferrer\">shell script to illustrate/automate things</a>. Read the comments before executing it."}, {"owner": {"reputation": 157, "user_id": 3243289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b3cf99ca521466a5fd5d622ddecab1c?s=128&d=identicon&r=PG", "display_name": "Shaun", "link": "https://stackoverflow.com/users/3243289/shaun"}, "edited": false, "score": 0, "creation_date": 1500449275, "post_id": 45177958, "comment_id": 77335239, "body": "Thank you so much!  I followed your steps and it worked, I really appreciate your help. Please add this as an answer so that I can accept it and at least reward you in some way."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1500522772, "post_id": 45177958, "comment_id": 77376144, "body": "Glad it helped you. I&#39;ve posted a more detailed answer regarding what&#39;s happening that subverts the need for the commented script, but I&#39;m leaving the comment containing it since it might be useful to someone else later."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "is_accepted": true, "score": 1, "last_activity_date": 1500523020, "last_edit_date": 1500523020, "creation_date": 1500522578, "answer_id": 45204797, "question_id": 45177958, "link": "https://stackoverflow.com/questions/45177958/undefined-symbols-for-architecture-x86-64-for-library-using-cgo-on-macos-sier/45204797#45204797", "title": "&quot;Undefined symbols for architecture x86_64:&quot; for library using cgo on macOS Sierra", "body": "<p>Your problem is twofold:</p>\n\n<ol>\n<li>Improperly configured <code>libsecp256k1</code> package</li>\n<li>Your C compiler not searching <code>/usr/local</code> directories for installed headers/libs</li>\n</ol>\n\n<h2>Fixing the improperly libsecp256k1 configured package</h2>\n\n<p>Your \"undefined symbols\" issue when it comes to linking C libraries sometimes points to an improperly configured package (in the sense of an Autotools package or a CMake package, not a Go package). Running <code>./configure --help</code>, I see there is an option named <code>--enable-module-recovery</code>. Judging by names like <code>_secp256k1_ecdsa_sign_<strong>recoverable</strong></code> and <code>_secp256k1_ecdsa_<strong>recover</strong></code>, you need to add that option when configuring, meaning instead of executing the simpler <code>./configure</code>, you should execute this:</p>\n\n<pre><code>./configure --enable-module-recovery\n</code></pre>\n\n<h2>Is the C compiler broken?</h2>\n\n<p>Since the <code>secp256k1.h</code> header file isn't found in <code>/usr/local/include</code>, despite the fact that the header file most definitely exists after <code>sudo make install</code> is finished, it means <a href=\"https://stackoverflow.com/q/23905661/539810\">your compiler doesn't search <code>/usr/local</code></a>.</p>\n\n<p>Barring any fixes in the linked question, you can work around the issue by altering the source of the Go package as needed to add/modify the <code>CFLAGS</code> and <code>LDFLAGS</code> used when dealing with <code>import \"C\"</code> statements like this:</p>\n\n<pre><code>// #cgo CFLAGS: -I/usr/local/include\n// #cgo LDFLAGS: -L/usr/local/lib -lsecp256k1\n// #include &lt;secp256k1.h&gt;\nimport \"C\"\n</code></pre>\n\n<p>If you have <code>pkg-config</code> installed, you can use that instead of setting <code>CFLAGS</code> and <code>LDFLAGS</code> manually:</p>\n\n<ol>\n<li>Export the <code>PKG_CONFIG_PATH</code> environment variable with a custom set of paths. Because no prefix (i.e. directory serving as the install root) was specified, <code>/usr/local</code> is assumed, meaning <code>/usr/local/include</code> will contain headers and <code>/usr/local/lib</code> will contain libraries. This means you need to export <code>PKG_CONFIG_PATH</code> on your command line as in <code>export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/local/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig</code>. The default setting of <code>PKG_CONFIG_PATH</code> when unset includes <code>/usr/lib/pkgconfig</code> and <code>/usr/share/pkgconfig</code> in that order on Linux and are specified as a fallback for other packages that might be used, though it may not be necessary in this case. The default set of paths may differ on OS X, so consult your <code>pkg-config</code> man page for reference.</li>\n<li>Use <code>// #cgo pkg-config: libsecp256k1</code>, and <code>CFLAGS</code> and <code>LDFLAGS</code> will be set as necessary without you needing to do anything to them. Since not all systems have <code>pkg-config</code> installed, relying on this is perhaps a bad idea if you want a package to remain portable. Then again, I think it'd be preferable to the mess you dealt with since <code>pkg-config</code> simply wouldn't be found.</li>\n<li>Change to the upvote directory and type <code>make</code> to build a working upvote binary.</li>\n</ol>\n\n<h2>Additional customization</h2>\n\n<h3>Custom prefix</h3>\n\n<p>If you use something other than <code>/usr/local</code> as your prefix (e.g. <code>./configure --enable-module-recovery --prefix=/opt/libsecp256k1</code>), then you'll need to adjust some things accordingly:</p>\n\n<pre><code>// #cgo CFLAGS: -I/opt/libsecp256k1/include\n// #cgo LDFLAGS: -L/opt/libsecp256k1/lib -lsecp256k1\n// #include \"secp256k1.h\"\nimport \"C\"\n\n// or just use pkg-config and export the PKG_CONFIG_PATH environment\n// variable containing the following paths:\n//   /opt/libsecp256k1/lib/pkgconfig\n//   /opt/libsecp256k1/share/pkgconfig\n//   /usr/lib/pkgconfig\n//   /usr/share/pkgconfig\n</code></pre>\n\n<p>You'll also need to modify the provided Makefile in the upvote directory to set the runtime path of the binary that gets built, else <code>libsecp256k1.0.dylib</code> will not be found:</p>\n\n<pre><code># If you copy and paste this, replace the spaces in front of `go build`\n# with a single horizontal tab character, else `make` will fail.\n#\n# Note that the \"ldflags\" specified are for the Go linker (go tool link),\n# not the system's linker (ld).\nbuild:\n    go build -ldflags=\"-r /opt/libsecp256k1/lib\"\n</code></pre>\n\n<p>For more information about working with cgo, check out the following resources:</p>\n\n<ul>\n<li><a href=\"https://blog.golang.org/c-go-cgo\" rel=\"nofollow noreferrer\">\"C? Go? Cgo!\" introduction to cgo on The Go Blog</a></li>\n<li><a href=\"https://golang.org/cmd/cgo/\" rel=\"nofollow noreferrer\">Cgo documentation</a></li>\n</ul>\n"}], "owner": {"reputation": 157, "user_id": 3243289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b3cf99ca521466a5fd5d622ddecab1c?s=128&d=identicon&r=PG", "display_name": "Shaun", "link": "https://stackoverflow.com/users/3243289/shaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1645, "favorite_count": 0, "accepted_answer_id": 45204797, "answer_count": 1, "score": 0, "last_activity_date": 1500523020, "creation_date": 1500415875, "question_id": 45177958, "link": "https://stackoverflow.com/questions/45177958/undefined-symbols-for-architecture-x86-64-for-library-using-cgo-on-macos-sier", "title": "&quot;Undefined symbols for architecture x86_64:&quot; for library using cgo on macOS Sierra", "body": "<p>I am trying to make use of a library, <a href=\"https://github.com/go-steem/rpc\" rel=\"nofollow noreferrer\">https://github.com/go-steem/rpc</a>, that makes use of some C code, which references a library.</p>\n\n<p>The C library can be found here, <a href=\"https://github.com/bitcoin-core/secp256k1\" rel=\"nofollow noreferrer\">https://github.com/bitcoin-core/secp256k1</a></p>\n\n<p>I followed the steps to get that installed</p>\n\n<pre><code>$ ./autogen.sh\n$ ./configure\n$ make\n$ ./tests\n$ sudo make install  # optional\n</code></pre>\n\n<p>And have this output;</p>\n\n<pre><code>$ sudo make install\nPassword:\n  CC       src/libsecp256k1_la-secp256k1.lo\n  CCLD     libsecp256k1.la\n  CC       src/tests-tests.o\n  CCLD     tests\n  CC       src/exhaustive_tests-tests_exhaustive.o\n  CCLD     exhaustive_tests\n build-aux/install-sh -c -d '/usr/local/lib'\n /bin/sh ./libtool   --mode=install /usr/bin/install -c   libsecp256k1.la '/usr/local/lib'\nlibtool: install: /usr/bin/install -c .libs/libsecp256k1.0.dylib /usr/local/lib/libsecp256k1.0.dylib\nlibtool: install: (cd /usr/local/lib &amp;&amp; { ln -s -f libsecp256k1.0.dylib libsecp256k1.dylib || { rm -f libsecp256k1.dylib &amp;&amp; ln -s libsecp256k1.0.dylib libsecp256k1.dylib; }; })\nlibtool: install: /usr/bin/install -c .libs/libsecp256k1.lai /usr/local/lib/libsecp256k1.la\nlibtool: install: /usr/bin/install -c .libs/libsecp256k1.a /usr/local/lib/libsecp256k1.a\nlibtool: install: chmod 644 /usr/local/lib/libsecp256k1.a\nlibtool: install: /usr/bin/ranlib /usr/local/lib/libsecp256k1.a\n build-aux/install-sh -c -d '/usr/local/include'\n /usr/bin/install -c -m 644 include/secp256k1.h '/usr/local/include'\n build-aux/install-sh -c -d '/usr/local/lib/pkgconfig'\n /usr/bin/install -c -m 644 libsecp256k1.pc '/usr/local/lib/pkgconfig'\n</code></pre>\n\n<p>I try to run the upvote example from that Go library, go-steem/rpc/examples/upvote/ and get the following output;</p>\n\n<pre><code>$ go run main.go \n# github.com/go-steem/rpc/transactions\n../../transactions/signing.c:5:10: fatal error: 'secp256k1.h' file not found\n</code></pre>\n\n<p>Already it feels as though the wheels are falling off...</p>\n\n<p>Please bear with me as I do not develop in C, so I get a bit hack-y.</p>\n\n<p>After much reading, and googling I decide to copy the files from the 'include' directory where I compiled libsecp256k1 into the same directory as the error is originating from.</p>\n\n<p>You can see the files are not there;</p>\n\n<pre><code>$ ls -la ../../transactions/\ntotal 48\ndrwxr-xr-x   8 shaunmorrow  staff   272 May  8 18:09 .\ndrwxr-xr-x  15 shaunmorrow  staff   510 May  8 18:09 ..\n-rw-r--r--   1 shaunmorrow  staff   256 Apr 27 17:53 chains.go\n-rw-r--r--   1 shaunmorrow  staff  3731 May  8 18:09 signed_transaction.go\n-rw-r--r--   1 shaunmorrow  staff  1849 May  8 18:09 signed_transaction_test.go\n-rw-r--r--   1 shaunmorrow  staff  3075 Apr 27 17:53 signing.c\n-rw-r--r--   1 shaunmorrow  staff   408 Apr 27 17:53 signing.h\n-rw-r--r--   1 shaunmorrow  staff  1049 May  8 18:09 transactions.go\n</code></pre>\n\n<p>and after the copy;</p>\n\n<pre><code>$ ls -la ../../transactions/\ntotal 128\ndrwxr-xr-x  11 shaunmorrow  staff    374 Jul 18 19:08 .\ndrwxr-xr-x  15 shaunmorrow  staff    510 May  8 18:09 ..\n-rw-r--r--   1 shaunmorrow  staff    256 Apr 27 17:53 chains.go\n-rw-r--r--   1 shaunmorrow  staff  27071 Jul 18 19:08 secp256k1.h\n-rw-r--r--   1 shaunmorrow  staff   1014 Jul 18 19:08 secp256k1_ecdh.h\n-rw-r--r--   1 shaunmorrow  staff   4700 Jul 18 19:08 secp256k1_recovery.h\n-rw-r--r--   1 shaunmorrow  staff   3731 Jul 18 19:05 signed_transaction.go\n-rw-r--r--   1 shaunmorrow  staff   1849 May  8 18:09 signed_transaction_test.go\n-rw-r--r--   1 shaunmorrow  staff   3075 Apr 27 17:53 signing.c\n-rw-r--r--   1 shaunmorrow  staff    408 Apr 27 17:53 signing.h\n-rw-r--r--   1 shaunmorrow  staff   1049 May  8 18:09 transactions.go\n</code></pre>\n\n<p>Now I get a new error;</p>\n\n<pre><code>$ go run main.go \n# github.com/go-steem/rpc/transactions\nld: library not found for -lsecp256k1\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>This has me reading and googling some more,</p>\n\n<p>Finally I get even more hack-y and change transactions.go;</p>\n\n<pre><code>// #cgo LDFLAGS: -lsecp256k1\n// #include &lt;stdlib.h&gt;\n// #include \"signing.h\"\nimport \"C\"\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>// #cgo LDFLAGS: -L/usr/local/lib\n// #include &lt;stdlib.h&gt;\n// #include \"signing.h\"\nimport \"C\"\n</code></pre>\n\n<p>which fails, output on that later</p>\n\n<p>I also try;</p>\n\n<pre><code>// #cgo LDFLAGS: -L/usr/local/lib -I/usr/local/include\n// #include &lt;stdlib.h&gt;\n// #include \"signing.h\"\nimport \"C\"\n</code></pre>\n\n<p>and copy the .h files into the /usr/local/include directory.</p>\n\n<p>None of this works and now I am stuck with an error like this</p>\n\n<pre><code>$ go run main.go \n# github.com/go-steem/rpc/transactions\nld: library not found for -lsecp256k1\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nShaunsSePc-2:upvote shaunmorrow$ go run main.go \n# github.com/go-steem/rpc/transactions\nUndefined symbols for architecture x86_64:\n  \"_secp256k1_context_create\", referenced from:\n      _sign_transaction in signing.o\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_context_destroy\", referenced from:\n      _sign_transaction in signing.o\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_ec_pubkey_serialize\", referenced from:\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_ecdsa_recover\", referenced from:\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_ecdsa_recoverable_signature_convert\", referenced from:\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_ecdsa_recoverable_signature_parse_compact\", referenced from:\n      _verify_recoverable_signature in signing.o\n  \"_secp256k1_ecdsa_recoverable_signature_serialize_compact\", referenced from:\n      _sign_transaction in signing.o\n  \"_secp256k1_ecdsa_sign_recoverable\", referenced from:\n      _sign_transaction in signing.o\n  \"_secp256k1_ecdsa_verify\", referenced from:\n      _verify_recoverable_signature in signing.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>At this point I really have no idea how to continue.</p>\n\n<p>As you can see I am not experienced in C at all and have no idea how to test if the library <code>libsecp256k1</code> is even installed properly!</p>\n\n<p>This is where I ended up, but it's highly likely I took a wrong turn early in my journey, I would appreciate any help given as I have been struggling with this for a few nights already now :( </p>\n\n<p>Not sure whats needed so here some env variables</p>\n\n<pre><code>$ go env\nGOARCH=\"amd64\"\nGOBIN=\"\"\nGOEXE=\"\"\nGOHOSTARCH=\"amd64\"\nGOHOSTOS=\"darwin\"\nGOOS=\"darwin\"\nGOPATH=\"/Users/shaunmorrow/Work/go/\"\nGORACE=\"\"\nGOROOT=\"/usr/local/go\"\nGOTOOLDIR=\"/usr/local/go/pkg/tool/darwin_amd64\"\nGCCGO=\"gccgo\"\nCC=\"clang\"\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/86/hlqptn5101z5bcydjz05qy8m0000gn/T/go-build689438019=/tmp/go-build -gno-record-gcc-switches -fno-common\"\nCXX=\"clang++\"\nCGO_ENABLED=\"1\"\nPKG_CONFIG=\"pkg-config\"\nCGO_CFLAGS=\"-g -O2\"\nCGO_CPPFLAGS=\"\"\nCGO_CXXFLAGS=\"-g -O2\"\nCGO_FFLAGS=\"-g -O2\"\nCGO_LDFLAGS=\"-g -O2\"\n</code></pre>\n\n<p>Version is <strong>go version go1.8.3 darwin/amd64</strong> with no old versions lying around.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "ffmpeg", "mp4", "libx264"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500415801, "post_id": 45177897, "comment_id": 77324399, "body": "I suspect that my C compiler would reject this code."}, {"owner": {"reputation": 123, "user_id": 4825204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HvrZbZ64s2Q/AAAAAAAAAAI/AAAAAAAAAJM/YbL74OqOVq4/photo.jpg?sz=128", "display_name": "Blake McConnell", "link": "https://stackoverflow.com/users/4825204/blake-mcconnell"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500415915, "post_id": 45177897, "comment_id": 77324443, "body": "You are correct: this code is C++"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4825204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HvrZbZ64s2Q/AAAAAAAAAAI/AAAAAAAAAJM/YbL74OqOVq4/photo.jpg?sz=128", "display_name": "Blake McConnell", "link": "https://stackoverflow.com/users/4825204/blake-mcconnell"}, "edited": false, "score": 0, "creation_date": 1500482357, "post_id": 45185880, "comment_id": 77360033, "body": "I suspected this might be the case.  Adding the codec flushing code prior to writing the trailer worked for me.  Thanks."}], "tags": [], "owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1500455228, "creation_date": 1500455228, "answer_id": 45185880, "question_id": 45177897, "link": "https://stackoverflow.com/questions/45177897/ffmpeg-libx264-c-api-frames-dropped-from-end-of-short-mp4/45185880#45185880", "title": "ffmpeg/libx264 C API: frames dropped from end of short MP4", "body": "<p>I don't see codec being flushed anywhere in that code. You need to flush the codecs before writing trailer etc, so that incomplete GOPs and frames delayed for whatever else reason are forced out from the codecs. See any of encoding examples included in ffmpeg docs for the correct way to do it (e.g. <a href=\"https://github.com/FFmpeg/FFmpeg/blob/6d7192bcb7bbab17dc194e8dbb56c208bced0a92/doc/examples/encode_video.c#L166\" rel=\"nofollow noreferrer\">https://github.com/FFmpeg/FFmpeg/blob/6d7192bcb7bbab17dc194e8dbb56c208bced0a92/doc/examples/encode_video.c#L166</a>).</p>\n"}], "owner": {"reputation": 123, "user_id": 4825204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HvrZbZ64s2Q/AAAAAAAAAAI/AAAAAAAAAJM/YbL74OqOVq4/photo.jpg?sz=128", "display_name": "Blake McConnell", "link": "https://stackoverflow.com/users/4825204/blake-mcconnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 1, "accepted_answer_id": 45185880, "answer_count": 1, "score": 0, "last_activity_date": 1500455228, "creation_date": 1500415619, "question_id": 45177897, "link": "https://stackoverflow.com/questions/45177897/ffmpeg-libx264-c-api-frames-dropped-from-end-of-short-mp4", "title": "ffmpeg/libx264 C API: frames dropped from end of short MP4", "body": "<p>In my C++ application, I am taking a series of JPEG images, manipulating their data using FreeImage, and then encoding the bitmaps as H264 using the ffmpeg/libx264 C API.  The output is an MP4 which shows the series of 22 images at 12fps. My code is adapted from the \"muxing\" example that comes with ffmpeg C source code.</p>\n\n<p>My problem: no matter how I tune the codec parameters, a certain number of frames at the end of the sequence which are passed to the encoder do not appear in the final output.  I've set the AVCodecContext parameters like this:</p>\n\n<pre><code>//set context params\nctx-&gt;codec_id = AV_CODEC_ID_H264;\nctx-&gt;bit_rate = 4000 * 1000;\nctx-&gt;width = _width;\nctx-&gt;height = _height;\nost-&gt;st-&gt;time_base = AVRational{ 1, 12 };\nctx-&gt;time_base = ost-&gt;st-&gt;time_base;\nctx-&gt;gop_size = 1;\nctx-&gt;pix_fmt = AV_PIX_FMT_YUV420P;\n</code></pre>\n\n<p>I have found that the higher the <code>gop_size</code> the more frames are dropped from the end of the video.  I can also see from the output that, with this gop size (where I'm essentially directing that all output frames be I frames) that only 9 frames are written.</p>\n\n<p>I'm not sure why this is occurring.  I experimented with encoding duplicate frames and making a much longer video.  This resulted in no frames being dropped.  I know with the ffmpeg command line tool there is a concatenation command that accomplishes what I am trying to do, but I'm not sure how to accomplish the same goal using the C API.</p>\n\n<p>Here's the output I'm getting from the console:</p>\n\n<blockquote>\n  <p>[libx264 @ 026d81c0] using cpu capabilities: MMX2 SSE2Fast SSSE3\n  SSE4.2 AVX FMA3  BMI2 AVX2 [libx264 @ 026d81c0] profile High, level\n  3.1 [libx264 @ 026d81c0] 264 - core 152 r2851 ba24899 - H.264/MPEG-4 AVC codec - Cop yleft 2003-2017 - <a href=\"http://www.videolan.org/x264.html\" rel=\"nofollow noreferrer\">http://www.videolan.org/x264.html</a> -\n  options: cabac=1 ref=1 deb lock=1:0:0 analyse=0x3:0x113 me=hex subme=7\n  psy=1 psy_rd=1.00:0.00 mixed_ref=0 m e_range=16 chroma_me=1 trellis=1\n  8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chro ma_qp_offset=-2\n  threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1\n  interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0\n  keyint=1 ke yint_min=1 scenecut=40 intra_refresh=0 rc=abr mbtree=0\n  bitrate=4000 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4\n  ip_ratio=1.40 aq=1:1.00 Output #0, mp4, to\n  '....\\images\\c411a991-46f6-400c-8bb0-77af3738559a.mp4':\n      Stream #0:0: Video: h264, yuv420p, 700x700, q=2-31, 4000 kb/s, 12 tbn</p>\n  \n  <p>[libx264 @ 026d81c0] frame I:9     Avg QP:17.83  size:111058 [libx264\n  @ 026d81c0] mb I  I16..4:  1.9% 47.7% 50.5% [libx264 @ 026d81c0] final\n  ratefactor: 19.14 [libx264 @ 026d81c0] 8x8 transform intra:47.7%\n  [libx264 @ 026d81c0] coded y,uvDC,uvAC intra: 98.4% 96.9% 89.5%\n  [libx264 @ 026d81c0] i16 v,h,dc,p: 64%  6%  2% 28% [libx264 @\n  026d81c0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 32% 15%  9%  5%  5%  6%  8%\n  10% 10% [libx264 @ 026d81c0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 28% 18% \n  7%  6%  8%  8%  8%  9%  8% [libx264 @ 026d81c0] i8c dc,h,v,p: 43% 22%\n  25% 10% [libx264 @ 026d81c0] kb/s:10661.53</p>\n</blockquote>\n\n<p>Code included below:</p>\n\n<p>MP4Writer.h</p>\n\n<pre><code>#ifndef MPEG_WRITER\n#define MPEG_WRITER\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;ImgData.h&gt;\nextern \"C\" {\n    #include &lt;libavformat/avformat.h&gt;\n    #include &lt;libswscale/swscale.h&gt;\n    #include &lt;libswresample/swresample.h&gt;\n    #include &lt;libswscale/swscale.h&gt;\n}\n\ntypedef struct OutputStream \n{\n    AVStream *st;\n    AVCodecContext *enc;\n\n    //pts of the next frame that will be generated\n    int64_t next_pts;\n    int samples_count;\n\n    AVFrame *frame;\n    AVFrame *tmp_frame;\n\n    float t, tincr, tincr2;\n\n    struct SwsContext *sws_ctx;\n    struct SwrContext *swr_ctx;\n};\n\nclass MP4Writer {\n    public:\n        MP4Writer();\n        void Init();\n        int16_t SetOutput( const std::string &amp; path );\n        int16_t AddFrame( uint8_t * imgData );\n        int16_t Write( std::vector&lt;ImgData&gt; &amp; imgData );\n        int16_t Finalize();\n        void SetHeight( const int height ) { _height = _width = height; } //assuming 1:1 aspect ratio\n\n    private:\n        int16_t AddStream( OutputStream * ost, AVFormatContext * formatCtx, AVCodec ** codec, enum AVCodecID codecId );\n        int16_t OpenVideo( AVFormatContext * formatCtx, AVCodec *codec, OutputStream * ost, AVDictionary * optArg );\n        static AVFrame * AllocPicture( enum AVPixelFormat pixFmt, int width, int height );\n        static AVFrame * GetVideoFrame( uint8_t * imgData, OutputStream * ost, const int width, const int height );\n        static int WriteFrame( AVFormatContext * formatCtx, const AVRational * timeBase, AVStream * stream, AVPacket * packet );\n\n        int _width;\n        int _height;\n        OutputStream _ost;\n        AVFormatContext * _formatCtx;\n        AVDictionary * _dict;\n};\n\n#endif //MPEG_WRITER\n</code></pre>\n\n<p>MP4Writer.cpp</p>\n\n<pre><code>#include &lt;MP4Writer.h&gt;\n#include &lt;algorithm&gt;\n\nMP4Writer::MP4Writer()\n{\n    _width = 0;\n    _height = 0;\n}\n\nvoid MP4Writer::Init()\n{\n    av_register_all();\n}\n\n/**\n sets up output stream for the specified path.\n note that the output format is deduced automatically from the file extension passed\n @param path: output file path\n @returns: -1 = output could not be deduced, -2 = invalid codec, -3 = error opening output file,\n           -4 = error writing header\n*/\nint16_t MP4Writer::SetOutput( const std::string &amp; path )\n{\n    int error;\n    AVCodec * codec;\n    AVOutputFormat * format;\n\n    _ost = OutputStream{}; //TODO reset state in a more focused way?\n\n    //allocate output media context\n    avformat_alloc_output_context2( &amp;_formatCtx, NULL, NULL, path.c_str() );\n    if ( !_formatCtx ) {\n        std::cout &lt;&lt; \"could not deduce output format from file extension.  aborting\" &lt;&lt; std::endl;\n        return -1;\n    }\n    //set format\n    format = _formatCtx-&gt;oformat;\n    if ( format-&gt;video_codec != AV_CODEC_ID_NONE ) {\n        AddStream( &amp;_ost, _formatCtx, &amp;codec, format-&gt;video_codec );\n    }\n    else {\n        std::cout &lt;&lt; \"there is no video codec set.  aborting\" &lt;&lt; std::endl;\n        return -2;\n    }\n\n    OpenVideo( _formatCtx, codec, &amp;_ost, _dict );\n\n    av_dump_format( _formatCtx, 0, path.c_str(), 1 );\n\n    //open output file\n    if ( !( format-&gt;flags &amp; AVFMT_NOFILE )) {\n        error = avio_open( &amp;_formatCtx-&gt;pb, path.c_str(), AVIO_FLAG_WRITE );\n        if ( error &lt; 0 ) {\n            std::cout &lt;&lt; \"there was an error opening output file \" &lt;&lt; path &lt;&lt; \".  aborting\" &lt;&lt; std::endl;\n            return -3;\n        }\n    }\n\n    //write header\n    error = avformat_write_header( _formatCtx, &amp;_dict );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"an error occurred writing header. aborting\" &lt;&lt; std::endl;\n        return -4;\n    }\n\n    return 0;\n}\n\n/**\n initialize the output stream\n @param ost: the output stream\n @param formatCtx: the context format\n @param codec: the output codec\n @param codec: the ffmpeg enumerated id of the codec\n @returns: -1 = encoder not found, -2 = stream could not be allocated, -3 = encoding context could not be allocated\n*/\nint16_t MP4Writer::AddStream( OutputStream * ost, AVFormatContext * formatCtx, AVCodec ** codec, enum AVCodecID codecId )\n{\n    AVCodecContext * ctx; //TODO not sure why this is here, could just set ost-&gt;enc directly\n    int i;\n\n    //detect the encoder\n    *codec = avcodec_find_encoder( codecId );\n    if ( (*codec) == NULL ) {\n        std::cout &lt;&lt; \"could not find encoder.  aborting\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    //allocate stream\n    ost-&gt;st = avformat_new_stream( formatCtx, NULL );\n    if ( ost-&gt;st == NULL ) {\n        std::cout &lt;&lt; \"could not allocate stream.  aborting\" &lt;&lt; std::endl;\n        return -2;\n    }\n\n    //allocate encoding context\n    ost-&gt;st-&gt;id = formatCtx-&gt;nb_streams - 1;\n    ctx = avcodec_alloc_context3( *codec );\n    if ( ctx == NULL ) {\n        std::cout &lt;&lt; \"could not allocate encoding context.  aborting\" &lt;&lt; std::endl;\n        return -3;\n    }\n\n    ost-&gt;enc = ctx;\n\n    //set context params\n    ctx-&gt;codec_id = AV_CODEC_ID_H264;\n    ctx-&gt;bit_rate = 4000 * 1000;\n    ctx-&gt;width = _width;\n    ctx-&gt;height = _height;\n    ost-&gt;st-&gt;time_base = AVRational{ 1, 12 };\n    ctx-&gt;time_base = ost-&gt;st-&gt;time_base;\n    ctx-&gt;gop_size = 1;\n    ctx-&gt;pix_fmt = AV_PIX_FMT_YUV420P;\n\n    //if neccesary, set stream headers and formats separately\n    if ( formatCtx-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER ) {\n        std::cout &lt;&lt; \"setting stream and headers to be separate\" &lt;&lt; std::endl;\n        ctx-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n    }\n\n    return 0;\n}\n\n/**\n open the video for writing\n @param formatCtx: the format context\n @param codec: output codec\n @param ost: output stream\n @param optArg: dictionary\n @return: -1 = error opening codec, -2 = allocate new frame, -3 = copy stream params\n*/\nint16_t MP4Writer::OpenVideo( AVFormatContext * formatCtx, AVCodec *codec, OutputStream * ost, AVDictionary * optArg )\n{\n    int error;\n    AVCodecContext * ctx = ost-&gt;enc;\n    AVDictionary * dict = NULL;\n    av_dict_copy( &amp;dict, optArg, 0 );\n\n    //open codec\n    error = avcodec_open2( ctx, codec, &amp;dict );\n    av_dict_free( &amp;dict );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"there was an error opening the codec.  aborting\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    //allocate new frame\n    ost-&gt;frame = AllocPicture( ctx-&gt;pix_fmt, ctx-&gt;width, ctx-&gt;height );\n    if ( ost-&gt;frame == NULL ) {\n        std::cout &lt;&lt; \"there was an error allocating a new frame.  aborting\" &lt;&lt; std::endl;\n        return -2;\n    }\n\n    //copy steam params\n    error = avcodec_parameters_from_context( ost-&gt;st-&gt;codecpar, ctx );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"could not copy stream parameters.  aborting\" &lt;&lt; std::endl;\n        return -3;\n    }\n\n    return 0;\n}\n\n/**\n allocate a new frame\n @param pixFmt: ffmpeg enumerated pixel format\n @param width: output width\n @param height: output height\n @returns: an inititalized frame\n*/\nAVFrame * MP4Writer::AllocPicture( enum AVPixelFormat pixFmt, int width, int height )\n{\n    AVFrame * picture;\n    int error;\n\n    //allocate the frame\n    picture = av_frame_alloc();\n    if ( picture == NULL ) {\n        std::cout &lt;&lt; \"there was an error allocating the picture\" &lt;&lt; std::endl;\n        return NULL;\n    }\n\n    picture-&gt;format = pixFmt;\n    picture-&gt;width = width;\n    picture-&gt;height = height;\n\n    //allocate the frame's data buffer\n    error = av_frame_get_buffer( picture, 32 );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"could not allocate frame data\" &lt;&lt; std::endl;\n        return NULL;\n    }\n    picture-&gt;pts = 0;\n    return picture;\n}\n\n/**\n convert raw RGB buffer to YUV frame\n @return: frame that contains image data\n*/\nAVFrame * MP4Writer::GetVideoFrame( uint8_t * imgData, OutputStream * ost, const int width, const int height )\n{\n    int error;\n    AVCodecContext * ctx = ost-&gt;enc;\n\n    //prepare the frame\n    error = av_frame_make_writable( ost-&gt;frame );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"could not make frame writeable\" &lt;&lt; std::endl;\n        return NULL;\n    }\n\n    //TODO set this context one time per run, or even better, one time at init\n    //convert RGB to YUV\n    struct SwsContext* fooContext = sws_getContext( width, height, AV_PIX_FMT_BGR24, \n        width, height, AV_PIX_FMT_YUV420P, SWS_BICUBIC, NULL, NULL, NULL );\n    int inLinesize[1] = { 3 * width }; // RGB stride\n    uint8_t * inData[1] = { imgData };\n    int sliceHeight = sws_scale( fooContext, inData, inLinesize, 0, height, ost-&gt;frame-&gt;data, ost-&gt;frame-&gt;linesize );\n    sws_freeContext( fooContext );\n\n    ost-&gt;frame-&gt;pts = ost-&gt;next_pts++;\n    //TODO does the frame need to be returned here as it is available at the class level?\n    return ost-&gt;frame;\n}\n\n/**\n write frame to file\n @param formatCtx: the output format context\n @param timeBase: the framerate\n @param stream: output stream\n @param packet: data packet\n @returns: see return values for av_interleaved_write_frame\n*/\nint MP4Writer::WriteFrame( AVFormatContext * formatCtx, const AVRational * timeBase, AVStream * stream, AVPacket * packet )\n{\n    av_packet_rescale_ts( packet, *timeBase, stream-&gt;time_base );\n    packet-&gt;stream_index = stream-&gt;index;\n\n    //write compressed file to media file\n    return av_interleaved_write_frame( formatCtx, packet );\n}\n\nint16_t MP4Writer::Write( std::vector&lt;ImgData&gt; &amp; imgData )\n{\n    int16_t errorCount = 0;\n    int16_t retVal = 0;\n    bool countingUp = true;\n    size_t i = 0;\n    while ( true ) {\n        //don't show first frame again when counting back down\n        if ( !countingUp &amp;&amp; i == 0 ) {\n            break;\n        }\n        uint8_t * pixels = imgData[i].GetBits( imgData[i].mp4Input );\n        AddFrame( pixels );\n\n        //handle inc/dec without repeating last frame\n        if ( countingUp ) {\n            if ( i == imgData.size() -1 ) {\n                countingUp = false;\n                i--;\n            }\n            else {\n                i++;\n            }\n        }\n        else {\n            i--;\n        }\n    }\n    Finalize();\n    return 0; //TODO return error code\n}\n\n/**\n add another frame to output video\n @param imgData: the raw image data\n @returns -1 = error encoding video frame, -2 = error writing frame\n*/\nint16_t MP4Writer::AddFrame( uint8_t * imgData )\n{\n    int error;\n    AVCodecContext * ctx;\n    AVFrame * frame;\n    int gotPacket = 0;\n    AVPacket pkt = { 0 };\n\n    ctx = _ost.enc;\n    av_init_packet( &amp;pkt );\n\n    frame = GetVideoFrame( imgData, &amp;_ost, _width, _height );\n\n    //encode the image\n    error = avcodec_encode_video2( ctx, &amp;pkt, frame, &amp;gotPacket );\n    if ( error &lt; 0 ) {\n        std::cout &lt;&lt; \"there was an error encoding the video frame\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    //write the frame.  NOTE: this doesn't kick in until the encoder has received a certain number of frames\n    if ( gotPacket ) {\n        error = WriteFrame( _formatCtx, &amp;ctx-&gt;time_base, _ost.st, &amp;pkt );\n        if ( error &lt; 0 ) {\n            std::cout &lt;&lt; \"the video frame could not be written\" &lt;&lt; std::endl;\n            return -2;\n        }\n    }\n    return 0;\n}\n\n/**\n finalize output video and cleanup\n*/\nint16_t MP4Writer::Finalize()\n{\n    av_write_trailer( _formatCtx );\n    avcodec_free_context( &amp;_ost.enc );\n    av_frame_free( &amp;_ost.frame);\n    av_frame_free( &amp;_ost.tmp_frame );\n    avio_closep( &amp;_formatCtx-&gt;pb );\n    avformat_free_context( _formatCtx );\n    sws_freeContext( _ost.sws_ctx );\n    swr_free( &amp;_ost.swr_ctx);\n    return 0;\n}\n</code></pre>\n\n<p>usage</p>\n\n<pre><code>#include &lt;FreeImage.h&gt;\n#include &lt;MP4Writer.h&gt;\n#include &lt;vector&gt;\n\nstruct ImgData\n{\n    unsigned int width;\n    unsigned int height;\n    std::string path;\n    FIBITMAP * mp4Input;\n\n    uint8_t * GetBits( FIBITMAP * bmp ) { return FreeImage_GetBits( bmp ); }\n};\n\nint main()\n{\n     std::vector&lt;ImgData&gt; imgDataVec;\n     //load images and push to imgDataVec\n     MP4Writer mp4Writer;\n     mp4Writer.SetHeight( 1200 ); //assumes 1:1 aspect ratio\n     mp4Writer.Init();\n     mp4Writer.SetOutput( \"test.mp4\" );\n     mp4Writer.Write( imgDataVec );\n}\n</code></pre>\n"}, {"tags": ["c", "binary", "gnuplot", "binaryfiles"], "comments": [{"owner": {"reputation": 1425, "user_id": 778144, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/59b40d0a63d299e86e97f80024b99052?s=128&d=identicon&r=PG", "display_name": "atomSmasher", "link": "https://stackoverflow.com/users/778144/atomsmasher"}, "edited": false, "score": 0, "creation_date": 1500415632, "post_id": 45177808, "comment_id": 77324331, "body": "This is a tall order.... Have a look at fopen. For example fopen( &quot;data_file.data&quot;,  &quot;wb&quot;);"}, {"owner": {"reputation": 133, "user_id": 7696353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r5qXxGpSozs/AAAAAAAAAAI/AAAAAAAABhQ/xEBEEy5cAbY/photo.jpg?sz=128", "display_name": "CAMILO HG", "link": "https://stackoverflow.com/users/7696353/camilo-hg"}, "reply_to_user": {"reputation": 1425, "user_id": 778144, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/59b40d0a63d299e86e97f80024b99052?s=128&d=identicon&r=PG", "display_name": "atomSmasher", "link": "https://stackoverflow.com/users/778144/atomsmasher"}, "edited": false, "score": 0, "creation_date": 1500416292, "post_id": 45177808, "comment_id": 77324572, "body": "I tried to do it using fopen( &quot;data_file.data&quot;, &quot;wb&quot;); but I got the same result: a file with a ASCII like format ... Same format, same size"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1500416416, "post_id": 45177808, "comment_id": 77324612, "body": "Ok, so you opened in binary mode with <code>&quot;wb&quot;</code> but how did you write the data? What kind of write statement did you use? Or did you use <code>printf</code> and end up writing it as a string? Use <code>open</code>, <code>read</code> and <code>write</code>, not <code>printf</code> and <code>scanf</code> which are for <i>formatted</i> data."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1500416620, "post_id": 45177808, "comment_id": 77324679, "body": "How to use <code>gnuplot</code> is a completely separate question. Here&#39;s a complementary link to the <a href=\"http://www.gnuplot.info/docs_5.0/gnuplot.pdf\" rel=\"nofollow noreferrer\"><code>gnuplot</code> documentation</a>."}, {"owner": {"reputation": 133, "user_id": 7696353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r5qXxGpSozs/AAAAAAAAAAI/AAAAAAAABhQ/xEBEEy5cAbY/photo.jpg?sz=128", "display_name": "CAMILO HG", "link": "https://stackoverflow.com/users/7696353/camilo-hg"}, "edited": false, "score": 0, "creation_date": 1500416938, "post_id": 45177808, "comment_id": 77324781, "body": "I tried using fprinf(&quot;%lf \\t %lf \\n&quot;, x[ i ] , y[ i ] ) ... Because I saw fwrite() receibes just 1 pointer, but I have 2: x_val[ ] and y_val[ ]"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1500417042, "post_id": 45177808, "comment_id": 77324820, "body": "Yeah, like I said, <code>fprintf</code> such as the one you did is going to format in ASCII, leaving you where you were before. You need <code>fwrite</code>. You&#39;re writing in binary. You do only get one pointer. So the simplest thing to do is write out <code>x[i]</code> and <code>y[i]</code> with separate <code>fwrite</code> calls. There&#39;s no rule that you need to use just one call to write out both coordinates. <code>fwrite(&amp;x[i], 1, sizeof int, fp);</code> and <code>fwrite(&amp;y[i], 1, sizeof int, fp);</code>."}, {"owner": {"reputation": 133, "user_id": 7696353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r5qXxGpSozs/AAAAAAAAAAI/AAAAAAAABhQ/xEBEEy5cAbY/photo.jpg?sz=128", "display_name": "CAMILO HG", "link": "https://stackoverflow.com/users/7696353/camilo-hg"}, "edited": false, "score": 0, "creation_date": 1500417136, "post_id": 45177808, "comment_id": 77324852, "body": "Ok, I think I got it. But how do I know it has two columns ? Or how do I plot it ?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1500417247, "post_id": 45177808, "comment_id": 77324871, "body": "You already know the data has two columns. Does your program have to figure out automatically that there are two coordinates? Are you supporting cases where there are more or less than 2 coordinates? To your second question, see the GNU plot documentation. Read more specifically, for example, <a href=\"http://gnuplot.sourceforge.net/docs_4.2/node103.html\" rel=\"nofollow noreferrer\">Gnuplot: binary general</a>"}, {"owner": {"reputation": 133, "user_id": 7696353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r5qXxGpSozs/AAAAAAAAAAI/AAAAAAAABhQ/xEBEEy5cAbY/photo.jpg?sz=128", "display_name": "CAMILO HG", "link": "https://stackoverflow.com/users/7696353/camilo-hg"}, "edited": false, "score": 0, "creation_date": 1500417385, "post_id": 45177808, "comment_id": 77324918, "body": "Ok. Thank you everybody!"}], "owner": {"reputation": 133, "user_id": 7696353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r5qXxGpSozs/AAAAAAAAAAI/AAAAAAAABhQ/xEBEEy5cAbY/photo.jpg?sz=128", "display_name": "CAMILO HG", "link": "https://stackoverflow.com/users/7696353/camilo-hg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "closed_date": 1500417561, "answer_count": 0, "score": 0, "last_activity_date": 1500415102, "creation_date": 1500415102, "question_id": 45177808, "link": "https://stackoverflow.com/questions/45177808/how-to-write-binary-data-file-in-c-and-plot-it-using-gnuplot", "closed_reason": "Duplicate", "title": "How to write binary data file in C and plot it using gnuplot", "body": "<p>I need some help.</p>\n\n<p>I have two arrays (<strong>x_val[]</strong> and <strong>y_val[]</strong>) of data with the <strong>x</strong> and <strong>y</strong> values of some points in the plane, so that <strong>(x,y)</strong> is a point in the 2D space. I write the data following the next format:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QmgkX.png\" rel=\"nofollow noreferrer\">data_file.dat</a></p>\n\n<p>Then I use GNUPLOT for drawing all the points:</p>\n\n<p><strong>plot 'data_file.dat' u 1:2 w points</strong></p>\n\n<p>The problem is that the size of the file is almost 1Gb and I need to generate almost 500 files. So I thought that it could be better to write the data in binary format and then plot it, but I don't know how to do either.</p>\n\n<p>I would like to do it without changing the arrays <strong>x_val[]</strong> and <strong>y_val[]</strong> please.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415143, "post_id": 45177718, "comment_id": 77324152, "body": "this structure used with <code>NtQuerySystemInformation</code> <code>SystemHandleInformation</code>. however better use <code>SystemExtendedHandleInformation</code> with <code>SYSTEM_HANDLE_INFORMATION_EX</code> - in what your problem ?"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415181, "post_id": 45177718, "comment_id": 77324170, "body": "@RbMm I don&#39;t have any problem, I just want to know what that piece of code does."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415214, "post_id": 45177718, "comment_id": 77324183, "body": "but i not view any piece of code in your question"}, {"owner": {"reputation": 1485, "user_id": 938394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/m5Ovb.jpg?s=128&g=1", "display_name": "Paul Varghese", "link": "https://stackoverflow.com/users/938394/paul-varghese"}, "edited": false, "score": 0, "creation_date": 1500415343, "post_id": 45177718, "comment_id": 77324233, "body": "These are typedef you can use like this if you&#39;re curious about this:      PSYSTEM_HANDLE_TABLE_ENTRY_INFO var = new      SYSTEM_HANDLE_TABLE_ENTRY_INFO;     var-&gt;ProcessId = 1;     std::cout &lt;&lt; var-&gt;ProcessId; e.g: <a href=\"http://cpp.sh/3jjya\" rel=\"nofollow noreferrer\">cpp.sh/3jjya</a>"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415456, "post_id": 45177718, "comment_id": 77324275, "body": "@RbMm The definition of SYSTEM_HANDLE_TABLE_ENTRY_INFO right in the beginning, with the gray background"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415526, "post_id": 45177718, "comment_id": 77324295, "body": "but this is standard <i>c</i> style definition of any structure (not <i>c++</i> style). faster you need mark this question as <i>c</i>"}, {"owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415605, "post_id": 45177718, "comment_id": 77324319, "body": "@RbMm I didn&#39;t know that, I&#39;ll change it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500415731, "post_id": 45177718, "comment_id": 77324375, "body": "look for any windows headers file. <code>minwinbase.h</code> for example - you can view that all structs here defined as <code>typedef struct _T { } T, *PT;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "edited": false, "score": 0, "creation_date": 1500417742, "post_id": 45177985, "comment_id": 77325009, "body": "I didn\u2019t know until I saw your question that you could <code>typedef</code> multiple things at once like that, and I had to double-check <a href=\"http://en.cppreference.com/w/cpp/language/typedef\" title=\"Typedef page on cppreference\" rel=\"nofollow noreferrer\">cppreference</a> that it meant what I thought it did. I would recommend <i>not</i> writing code like this yourself."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1500415996, "creation_date": 1500415996, "answer_id": 45177985, "question_id": 45177718, "link": "https://stackoverflow.com/questions/45177718/explain-the-definition-of-system-handle-table-entry-info-and-how-to-use-it/45177985#45177985", "title": "Explain the definition of SYSTEM_HANDLE_TABLE_ENTRY_INFO and how to use it", "body": "<p>This is a complicated use of the <code>typedef</code> statement. We can break it down as follows.</p>\n\n<p>The first part to look at, taking up most of the space, is</p>\n\n<pre><code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO\n{\n    ULONG ProcessId;\n    BYTE ObjectTypeNumber;\n    BYTE Flags;\n    USHORT Handle;\n    PVOID Object;\n    ACCESS_MASK GrantedAccess;\n}\n</code></pre>\n\n<p>This declares a new <code>struct</code> type, named <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO</code>.</p>\n\n<p>In C, <code>struct</code> names and regular typenames aren\u2019t the same; if you want to use a <code>struct</code> you always have to use the keyword <code>struct</code>.\u00b9 However, typing this extra <code>struct</code> everywhere gets annoying, so you can <code>typedef</code> it to a regular type name. Thus we have the whole statement before the comma,</p>\n\n<pre><code>typedef struct SYSTEM_HANDLE_TABLE_ENTRY_INFO\n{\n    ULONG ProcessId;\n    BYTE ObjectTypeNumber;\n    BYTE Flags;\n    USHORT Handle;\n    PVOID Object;\n    ACCESS_MASK GrantedAccess;\n} SYSTEM_HANDLE_TABLE_ENTRY_INFO\n</code></pre>\n\n<p>This alone would allow you to refer to the type as either <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO</code> or just <code>SYSTEM_HANDLE_TABLE_ENTRY_INFO</code> from C programs, like you can either way from C++ programs.</p>\n\n<p>So what\u2019s with the last part? The <code>typedef</code> statement works like a variable declaration in a lot of ways. In particular, you can declare <em>multiple</em> typenames with a single <code>typedef</code> statement. Let\u2019s consider a simpler example, of just a variable declaration involving the <code>int</code> type:</p>\n\n<pre><code>int i, *p;\n</code></pre>\n\n<p>This creates in <code>int</code> called <code>i</code>, <em>and</em> a pointer-to-<code>int</code> (<code>int*</code>) called <code>p</code>. Adding <code>typedef</code> before that would let you use <code>i</code> as a synonym for <code>int</code>, and <code>p</code> as a synonym for <code>int*</code>.</p>\n\n<p>So your full statement,</p>\n\n<pre><code>typedef struct SYSTEM_HANDLE_TABLE_ENTRY_INFO\n{\n    ULONG ProcessId;\n    BYTE ObjectTypeNumber;\n    BYTE Flags;\n    USHORT Handle;\n    PVOID Object;\n    ACCESS_MASK GrantedAccess;\n} SYSTEM_HANDLE_TABLE_ENTRY_INFO, *PSYSTEM_HANDLE_TABLE_ENTRY_INFO;\n</code></pre>\n\n<p>does three things:</p>\n\n<ol>\n<li>It creates a structure type <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO</code> with the members you see named.</li>\n<li>It creates a type alias <code>SYSTEM_HANDLE_TABLE_ENTRY_INFO</code> equivalent to <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO</code>, allowing you to use either name in your code. This is unnecessary for C++, but necessary for C compatibility.</li>\n<li>It creates a type alias <code>PSYSTEM_HANDLE_TABLE_ENTRY_INFO</code> equivalent to <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO*</code> (pointer to <code>struct SYSTEM_HANDLE_TABLE_ENTRY_INFO</code>), allowing you to use the name <code>PSYSTEM_HANDLE_TABLE_ENTRY_INFO</code> whenever you want a pointer to this type of <code>struct</code>.</li>\n</ol>\n\n<p>\u00b9 This is removed in C++, but since C programs might also want to use the Windows API, it supports both usages.</p>\n"}], "owner": {"reputation": 179, "user_id": 8322690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7OHT.jpg?s=128&g=1", "display_name": "SilenceOnTheWire", "link": "https://stackoverflow.com/users/8322690/silenceonthewire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "accepted_answer_id": 45177985, "answer_count": 1, "score": -1, "last_activity_date": 1500415996, "creation_date": 1500414696, "last_edit_date": 1500415615, "question_id": 45177718, "link": "https://stackoverflow.com/questions/45177718/explain-the-definition-of-system-handle-table-entry-info-and-how-to-use-it", "title": "Explain the definition of SYSTEM_HANDLE_TABLE_ENTRY_INFO and how to use it", "body": "<pre><code>typedef struct SYSTEM_HANDLE_TABLE_ENTRY_INFO\n{\n    ULONG ProcessId;\n    BYTE ObjectTypeNumber;\n    BYTE Flags;\n    USHORT Handle;\n    PVOID Object;\n    ACCESS_MASK GrantedAccess;\n} SYSTEM_HANDLE_TABLE_ENTRY_INFO, *PSYSTEM_HANDLE_TABLE_ENTRY_INFO;\n</code></pre>\n\n<p>I am not very experienced with C++, but from what I have learn I think this means that with this declaration whenever I declare something with the type *PSYSTEM_HANDLE_TABLE_ENTRY_INFO what that does is that makes that something a struct of type SYSTEM_HANDLE_TABLE_ENTRY_INFO with the variables mentioned above.</p>\n\n<p>I have some questions though:</p>\n\n<ol>\n<li><p>Why make PSYSTEM_HANDLE_TABLE_ENTRY_INFO a pointer?</p>\n\n<p>1.1. What do I get exactly when I dereference this pointer? Do I get the address of the first element of this struct? If I remember right struct elements are stored consecutively in memory, isn't it? </p></li>\n<li><p>Could you give me an example of how to use this in a program? In other words, is the following correct and if not how would you do it?</p></li>\n</ol>\n\n<p><code>* PSYSTEM_HANDLE_TABLE_ENTRY_INFO var;\nvar.ProcessId = 1234;</code></p>\n\n<ol start=\"3\">\n<li>From what I have learn't the syntax for typedef is <code> typedef   </code>. So why is the struct SYSTEM_HANDLE_TABLE_ENTRY_INFO being declared and why is SYSTEM_HANDLE_TABLE_ENTRY_INFO at the end of it? And why is there a comma?</li>\n</ol>\n\n<p>EDIT: Downvoters, could you explain? I'm open to constructive criticism.</p>\n"}, {"tags": ["c", "powershell", "command-line", "mingw"], "comments": [{"owner": {"reputation": 37, "user_id": 4957062, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ee48cbd20ce8b61058eab7f9de847de?s=128&d=identicon&r=PG&f=1", "display_name": "Shafaat Ahsen", "link": "https://stackoverflow.com/users/4957062/shafaat-ahsen"}, "edited": false, "score": 0, "creation_date": 1500413614, "post_id": 45177464, "comment_id": 77323505, "body": "i tried also just entering <code>helloworld</code> but that didn&#39;t work either"}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 2, "creation_date": 1500413737, "post_id": 45177464, "comment_id": 77323550, "body": "Type <code>.\\helloworld</code> instead. PowerShell does not run executables in the current directory by default. (Look at the suggestion message.)"}, {"owner": {"reputation": 37, "user_id": 4957062, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ee48cbd20ce8b61058eab7f9de847de?s=128&d=identicon&r=PG&f=1", "display_name": "Shafaat Ahsen", "link": "https://stackoverflow.com/users/4957062/shafaat-ahsen"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1500413843, "post_id": 45177464, "comment_id": 77323600, "body": "thanks so much!^^ @Bill_Stewart that&#39;s it, couldn&#39;t figure out that message for some reason"}, {"owner": {"reputation": 963, "user_id": 805796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/351bc6b115265f0a9fbcb328c4532ced?s=128&d=identicon&r=PG", "display_name": "MCG", "link": "https://stackoverflow.com/users/805796/mcg"}, "edited": false, "score": 0, "creation_date": 1500421436, "post_id": 45177464, "comment_id": 77326023, "body": "Messages are for help, use them."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 4, "creation_date": 1500423961, "post_id": 45177464, "comment_id": 77326629, "body": "In the future, please use copy/paste from your terminal into your question. It is impossible for expert users to search an image for expected warning or error text. Use the <code>{}</code> tool from the toolbox at the top left of edit dialog on selected text to keep the proper &quot;programming&quot; format. Glad you got a solution to your problem. Have you  read  <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> , <a href=\"http://stackoverflow.com/help/dont-ask\">stackoverflow.com/help/dont-ask</a> ,  <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> ? These will help you write good Qs (except for the screen shot, this is a good one, so keep up the good work!) . Good luck."}, {"owner": {"reputation": 843, "user_id": 4910940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4081b83efaaefe18c5b5bd1fa50439?s=128&d=identicon&r=PG", "display_name": "bluuf", "link": "https://stackoverflow.com/users/4910940/bluuf"}, "edited": false, "score": 1, "creation_date": 1500455484, "post_id": 45177464, "comment_id": 77339487, "body": "Downvoting this because the solution is actually listed IN the error message."}], "answers": [{"comments": [{"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500490160, "post_id": 45177628, "comment_id": 77364599, "body": "You even can type ./helloworld    In powershell - like on UNIX :).  Note forward slash and no .exe."}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "reply_to_user": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500490358, "post_id": 45177628, "comment_id": 77364712, "body": "@ddbug only if that&#39;s the only helloworld.* file in the directory, otherwise I&#39;m not sure how the behavior is defined."}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "edited": false, "score": 0, "creation_date": 1500512599, "post_id": 45177628, "comment_id": 77373679, "body": "Usually there won&#39;t be two files with same name in one directory :) But you can have one file named &#39;helloworld.exe&#39; and one named &#39;helloworld&#39; without ext. It would be a weird filesystem otherwise. Files with other exts (helloworld.c etc) won&#39;t be executed unless specified in PATHEXT."}], "tags": [], "owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "is_accepted": false, "score": 1, "last_activity_date": 1500414295, "creation_date": 1500414295, "answer_id": 45177628, "question_id": 45177464, "link": "https://stackoverflow.com/questions/45177464/my-helloworld-for-c-is-compiling-but-the-exe-file-isnt-running/45177628#45177628", "title": "My helloworld for C is compiling but the .exe file isn&#39;t running?", "body": "<p>You need to specify the directory of the executable within PowerShell.  Your alternative is to launch the program through cmd.exe.</p>\n\n<pre><code>.\\helloworld.exe\n</code></pre>\n\n<p>or</p>\n\n<pre><code>C:\\Users\\Zanel\\OneDrive\\documents\\code\\C\\helloworld.exe\n</code></pre>\n\n<p><code>.</code> represents current directory.</p>\n"}], "owner": {"reputation": 37, "user_id": 4957062, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ee48cbd20ce8b61058eab7f9de847de?s=128&d=identicon&r=PG&f=1", "display_name": "Shafaat Ahsen", "link": "https://stackoverflow.com/users/4957062/shafaat-ahsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1372, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1500414299, "creation_date": 1500413542, "last_edit_date": 1500414299, "question_id": 45177464, "link": "https://stackoverflow.com/questions/45177464/my-helloworld-for-c-is-compiling-but-the-exe-file-isnt-running", "title": "My helloworld for C is compiling but the .exe file isn&#39;t running?", "body": "<p>I coded this simple C Hello World program, but i don't know why it's not working in command line? I'm using MinGW C compiler which I downloaded per site instructions and I'm using Sublimetext for my text editor. I compiled the program fine it seems b/c the .exe file shows up, but when I try to run that file it prints </p>\n\n<p><a href=\"https://i.stack.imgur.com/fYTZn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fYTZn.png\" alt=\"enter image description here\"></a></p>\n\n<p>the problem seems pretty basic, my bad if it the question is amateur, just started trying to learn C. </p>\n\n<p>Here's my code from Sublime text for it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (){\n    printf(\"Hello World\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "makefile", "gnu", "hpc"], "comments": [{"owner": {"reputation": 674, "user_id": 6911731, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6469fc87e72fcca5073e6916afafb908?s=128&d=identicon&r=PG", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/6911731/garmekain"}, "edited": false, "score": 0, "creation_date": 1500410429, "post_id": 45176641, "comment_id": 77321885, "body": "Could it be the blank line after <code>.&#47;x.d</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1500410530, "post_id": 45176641, "comment_id": 77321929, "body": "Where are you learning how to write makefiles from?"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1500410633, "post_id": 45176641, "comment_id": 77321986, "body": "I&#39;m reading through GNU make manual- which is not easy to understand, but this is not written by me originally. It seems to be generated by eclipse and I&#39;m only editing to make the changes in code work on this environment(linux)."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1500410926, "post_id": 45176641, "comment_id": 77322143, "body": "These rules are <a href=\"https://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules\" rel=\"nofollow noreferrer\">built-in</a> for GNU. Chances are you could remove them without ill effect."}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1500411010, "post_id": 45176641, "comment_id": 77322196, "body": "I removed those and ran make, it didn&#39;t work. (%.o: ../%.cpp) But without the c additions (just c++) it creates the library without a problem."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1500411215, "post_id": 45176641, "comment_id": 77322310, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/utilities/make.html\" rel=\"nofollow noreferrer\">posix make</a> doesn&#39;t seem to use the percent signs.  Scroll about half way down to &quot;Default Rules&quot;,"}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 1, "creation_date": 1500411510, "post_id": 45176641, "comment_id": 77322441, "body": "I notice the <code>..&#47;%.cpp</code>. I think that complicates it a bit. You might want to read <a href=\"https://stackoverflow.com/q/5178125/2800918\">How to place object files in separate subdirectory</a>"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1500412173, "post_id": 45176641, "comment_id": 77322784, "body": "I&#39;ll have a look. Thx."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1500415349, "post_id": 45176641, "comment_id": 77324236, "body": "Actually the GNU make manual is one of the best examples of technical writing around -  your problem is trying to use eclipse for C++ programming, or anything really."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1500412492, "post_id": 45176954, "comment_id": 77322961, "body": "<code>subdir.mk:59: warning: overriding recipe for target &#39;@echo&#39; </code> <code>subdir.mk:53: warning: ignoring old recipe for target &#39;@echo&#39; </code> <code>subdir.mk:59: warning: overriding recipe for target &#39;&#39;Building&#39; </code> <code>subdir.mk:53: warning: ignoring old recipe for target &#39;&#39;Building&#39; </code> <code>subdir.mk:59: warning: overriding recipe for target &#39;file&#39; </code> <code>subdir.mk:53: warning: ignoring old recipe for target &#39;file&#39; </code> <code>make: *** No rule to make target &#39;&#39;&#39;, needed by &#39;@echo&#39;.  Stop. </code>"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 1, "creation_date": 1500474633, "post_id": 45176954, "comment_id": 77354515, "body": "@MadHatter  I just reformatted this and saved it as a makefile (removing the leading spaces and inserting tabs and it&#39;s working with make <code>GNU Make 4.2.1 Built for i686-pc-cygwin Copyright (C) 1988-2016 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later &lt;http:&#47;&#47;gnu.org&#47;licenses&#47;gpl.html&gt; This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law.</code>"}, {"owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "edited": false, "score": 0, "creation_date": 1500477315, "post_id": 45176954, "comment_id": 77356717, "body": "make formatting is really tricky;spent a lot of time on this; wish I knew that before. Finally got it working thanks to you. @cleblanc"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 2, "last_activity_date": 1500411581, "creation_date": 1500411581, "answer_id": 45176954, "question_id": 45176641, "link": "https://stackoverflow.com/questions/45176641/how-to-add-an-additional-rule-for-c-objects-in-a-c-c-mixed-makefile/45176954#45176954", "title": "How to add an additional rule for c objects in a c c++ mixed makefile?", "body": "<p>Don't you want something like this?</p>\n\n<pre><code>CC=gcc\nCXX=g++\n\nCXXFLAGS=-Wall -g\nCCFLAGS=-g\n\n# Add inputs and outputs from these tool invocations to the build variables\nCPP_SRCS += \\\n../x.cpp \\\n../y.cpp \\\n../main.cpp\n\nCC_SRCS += \\\n../z__c.c\n\nOBJS += \\\n./x.o \\\n./y.o \\\n./z__c.o \\\n./main.o\n\nCPP_DEPS += \\\n./x.d \\\n./y.d \\\n./main.d\n\nicpc='/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/bin/g++'\nCC='/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/bin/gcc'\n# Each subdirectory must supply rules for building sources it contributes\n%.o: ../%.cpp\n    @echo 'Building file: $&lt;'\n    @echo 'Invoking: G++ Compiler'\n    g++ -Wall -mavx -g -O -O1 -std=c++11 -L/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/lib64 -libstdc -libsupc++ -libtsan -libubsan -libvtv -libquadmath -libgcc_s -libgcj  -L/opt/intel/composer_xe_2013.5.192/mkl/lib/intel64 -lmkl_mc -lmkl_sequential -lmkl_gf_ilp64 -lmkl_avx -lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_core -lmkl_gnu_thread -L/home../oed -liboed -liboedlib -I/opt/intel/composer_xe_2013.5.192/mkl/include  \n    -I/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/include -I/home..include -I/home../debug  -DDEBUG -DMKL_ILP64\n    -MMD -MP -MF\"$(@:%.o=%.d)\" -MT\"$(@:%.o=%.d)\" -c -o \"$@\" \"$&lt;\"\n    @echo 'Finished building: $&lt;'\n    @echo ' '\n\n%.o: ../%.c\n    @echo 'Building file: $&lt;'\n    @echo 'Invoking: GCC Compiler'\n    gcc -Wall -mavx -g -O -O1 -L/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/lib64 -libstdc -libsupc++ -libtsan -libubsan -libvtv -libquadmath -libgcc_s -libgcj  -L/opt/intel/composer_xe_2013.5.192/mkl/lib/intel64 -lmkl_mc -lmkl_sequential -lmkl_gf_ilp64 -lmkl_avx -lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_core -lmkl_gnu_thread -L/home../oed -liboed -liboedlib -I/opt/intel/composer_xe_2013.5.192/mkl/include  \n    -I/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/include -I/home..include -I/home../debug  -DDEBUG -DMKL_ILP64\n    -MMD -MP -MF\"$(@:%.o=%.d)\" -MT\"$(@:%.o=%.d)\" -c -o \"$@\" \"$&lt;\"\n    @echo 'Finished building: $&lt;'\n    @echo ' '\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 2336748, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uuTKW.gif?s=128&g=1", "display_name": "MadHatter", "link": "https://stackoverflow.com/users/2336748/madhatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500411581, "creation_date": 1500410347, "last_edit_date": 1500410835, "question_id": 45176641, "link": "https://stackoverflow.com/questions/45176641/how-to-add-an-additional-rule-for-c-objects-in-a-c-c-mixed-makefile", "title": "How to add an additional rule for c objects in a c c++ mixed makefile?", "body": "<p>I added some c code into a c++ code base on a windows machine; it was working on windows visual studio fine; but I'm having a hard time trying to get it to run on linux. </p>\n\n<p>Below file is a subdir.mk that is run with a makefile.\n I'm editing this file written for purely c++ on a linux64 system to add my c changes. I added cc sources as you can see below. I'm new at this. I heared that if you have  flags make knows how to build but the existing file had this rule %.o: ../%.cpp and it won't work without it. I tried adding %.o: ../%.c in different ways (with a , and then by piping) but was not successful.</p>\n\n<p>Do you see what I'm doing wrong here? Any feedback welcome. Thx!</p>\n\n<pre><code>CC=gcc\nCXX=g++\n\nCXXFLAGS=-Wall -g\nCCFLAGS=-g\n\n# Add inputs and outputs from these tool invocations to the build variables\nCPP_SRCS += \\\n../x.cpp \\\n../y.cpp \\\n../main.cpp\n\nCC_SRCS += \\\n../z__c.c\n\nOBJS += \\\n./x.o \\\n./y.o \\\n./z__c.o \\\n./main.o\n\nCPP_DEPS += \\\n./x.d \\\n./y.d \\\n./main.d\n\nicpc='/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/bin/g++'\nCC='/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/bin/gcc'\n# Each subdirectory must supply rules for building sources it contributes\n%.o: ../%.cpp\n#%.o: ../%.c\n\n\n    @echo 'Building file: $&lt;'\n    @echo 'Invoking: G++ Compiler'\n    g++ -Wall -mavx -g -O -O1 -std=c++11 -L/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/lib64 -libstdc -libsupc++ -libtsan -libubsan -libvtv -libquadmath -libgcc_s -libgcj  -L/opt/intel/composer_xe_2013.5.192/mkl/lib/intel64 -lmkl_mc -lmkl_sequential -lmkl_gf_ilp64 -lmkl_avx -lmkl_lapack95_lp64 -lmkl_intel_lp64 -lmkl_core -lmkl_gnu_thread -L/home../oed -liboed -liboedlib -I/opt/intel/composer_xe_2013.5.192/mkl/include  \n    -I/opt/shared/sw/x86_64-unknown-linux-gnu/gcc/5.3.0-rhel6/include -I/home..include -I/home../debug  -DDEBUG -DMKL_ILP64\n    -MMD -MP -MF\"$(@:%.o=%.d)\" -MT\"$(@:%.o=%.d)\" -c -o \"$@\" \"$&lt;\"\n    @echo 'Finished building: $&lt;'\n    @echo ' '\n</code></pre>\n"}, {"tags": ["c", "arrays", "bit-packing"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500408451, "post_id": 45176082, "comment_id": 77320744, "body": "I don&#39;t understand your textual logic explaining how 5 values can be represented by only 2 bits. Are you using &quot;escape&quot; code? Otherwise I don&#39;t understand how when unpacking you will distinguish whether a <code>0</code> means <code>0</code> or <code>3</code>."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1500408655, "post_id": 45176082, "comment_id": 77320845, "body": "He&#39;s really only got 4 values."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1500408702, "post_id": 45176082, "comment_id": 77320865, "body": "@LeeDanielCrocker the post clearly says <i>I know that the bytes in it can have only one of 5 values (i.e. 0, 1, 2, 3, 4).</i>"}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 2, "creation_date": 1500408707, "post_id": 45176082, "comment_id": 77320872, "body": "It sounds like a valid encoding is to delete input values with <code>3</code> because they don&#39;t contribute.  Effectively there are four distinct values that must be preserved during encoding."}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500408779, "post_id": 45176082, "comment_id": 77320930, "body": "@WeatherVane, we could reword this as &quot;the inputs should be constrained to 0,1,2,3,4 but we do not need to preserve &#39;3&#39;s from the input, they can be safely lost when we encode/decode.&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500408856, "post_id": 45176082, "comment_id": 77320966, "body": "We are not a coding service. What is your specific problem and why do you think it is too slow? Also it is not clear how you intend to pack 5 valuers into 2 bits."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500408897, "post_id": 45176082, "comment_id": 77320988, "body": "For working code there is <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1500409618, "post_id": 45176082, "comment_id": 77321440, "body": "What matters is not that <code>3</code> is unimportant, but that you <b>know</b> it is a <code>3</code> on decoding. Otherwise how will you know the <code>0</code> you encode both <code>0</code> and <code>3</code> as, is the important <code>0</code> or the unimportant <code>3</code>?"}, {"owner": {"reputation": 45, "user_id": 1660053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d86e88500b2254d41f8855d68057f69?s=128&d=identicon&r=PG", "display_name": "avikpram", "link": "https://stackoverflow.com/users/1660053/avikpram"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500409762, "post_id": 45176082, "comment_id": 77321525, "body": "@chux I was not aware of codereview.stackexchange . I might try there. Just to clarify I am not looking for just an working solution or ready-to-compile code. Any suggestions or hints on how to handle the operations more efficiently but maintaining the readability will be of much help. Thank you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1500409929, "post_id": 45176082, "comment_id": 77321626, "body": "@avikpram <a href=\"https://codereview.stackexchange.com/tour\">Code Review is a question and answer site for seeking peer review of your code.</a> fits the &quot;Any suggestions or hints on how to handle the operations more efficiently but maintaining the readability will be of much help.&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500410930, "post_id": 45176082, "comment_id": 77322148, "body": "I&#39;m voting to close this question as off-topic because it belongs on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500411692, "post_id": 45176082, "comment_id": 77322530, "body": "@chux I disagree, whenever no effort is shown we moan, now OP showed a real effort, had he just asked: I did this which doesn&#39;t work, could you help me finish it and make it faster it would have belonged here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1500412751, "post_id": 45176082, "comment_id": 77323096, "body": "@TonyTannous As is, the post does not meet codereview&#39;s standards, yet only needs some additional wrapping code and a few other things to meet that sites standard&#39;s - accessible <a href=\"https://codereview.stackexchange.com/questions/ask\">here</a>"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1500453746, "post_id": 45176082, "comment_id": 77338255, "body": "Cast the final close vote as <a href=\"https://codereview.stackexchange.com/questions/169596/compressing-a-char-array-using-bit-packing\">this question <i>has</i> now been posted on Code Review</a>, so it makes sense to keep the answers together in one place. If you have an answer to post, please do so over there."}, {"owner": {"reputation": 45, "user_id": 1660053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d86e88500b2254d41f8855d68057f69?s=128&d=identicon&r=PG", "display_name": "avikpram", "link": "https://stackoverflow.com/users/1660053/avikpram"}, "edited": false, "score": 0, "creation_date": 1500467908, "post_id": 45176082, "comment_id": 77348699, "body": "Thanks to everybody with special mention to @BiranCane . I have selected <a href=\"https://codereview.stackexchange.com/a/169597/143628\">this answer</a> in <a href=\"https://codereview.stackexchange.com\">Code Review</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 1, "creation_date": 1500410986, "post_id": 45176795, "comment_id": 77322183, "body": "Please explain too"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500411028, "post_id": 45176795, "comment_id": 77322207, "body": "OP requested &quot;make it more efficient or faster &quot;, not &quot;clearer&quot;.  Have you profiled the original and this approach?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500411218, "post_id": 45176795, "comment_id": 77322313, "body": "Code does not compile."}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500411339, "post_id": 45176795, "comment_id": 77322359, "body": "@chux: My variant uses one local variable &#39;temp&#39; that most likely will be cached in a register and all bit or operations will be performed on a register. The original variant has an array on a stack. Of course a good compiler can optimize this too, but that is less obvious. (OP: if &#39;assert&#39; does not compile, comment it out for now, until you learn what it means)"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1500411432, "post_id": 45176795, "comment_id": 77322401, "body": "@ddbug what do you mean by &quot;operations will be performed on a register&quot; ?"}, {"owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1500411757, "post_id": 45176795, "comment_id": 77322568, "body": "@TonyTannous C code is translated to machine instructions. Most normal machines&#39; CPUs  have registers - internal very fast storage, compared to memory. Machine instructions that deal with registers usually are much faster and shorter than references to memory (even with cache). The &#39;bit OR&#39; operation (|=) most likely will compile into a small number of machine instructions."}], "tags": [], "owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "is_accepted": false, "score": -2, "last_activity_date": 1500410941, "creation_date": 1500410941, "answer_id": 45176795, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c/45176795#45176795", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<p>Does this look clearer?</p>\n\n<pre><code>void compressByPacking (uint8_t* out, uint8_t* in, uint32_t length)\n{\n    assert( 0 == length % 4 );\n    for (int loop = 0; loop &lt; length; loop += 4)\n    {\n      uint8_t temp = 0;\n      for (int small_loop = 0; small_loop &lt; 4; small_loop++)\n      {\n        uint8_t inv = *in;  // get next input value\n        switch(inv)\n        {\n          case 0:  // encode as 00\n          case 3:  // change to 0\n             break;\n          case 1:\n              temp |= (1 &lt;&lt; smal_loop*2); // 1 encode as '01'\n              break;\n          case 2:\n              temp |= (2 &lt;&lt; smal_loop*2);  // 2 encode as '10'\n              break;\n          case 4:\n              temp |= (3 &lt;&lt; smal_loop*2);  // 4 encode as '11'\n              break;\n          default:\n              assert(0);\n        }\n      } // end inner loop\n\n      *out = temp;\n\n    } // end outer loop\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500412333, "post_id": 45176951, "comment_id": 77322866, "body": "Would the downvoter care to explain why?"}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1500412405, "post_id": 45176951, "comment_id": 77322911, "body": "The one compiler I tried (<code>clang</code> ToT) was able to unroll the loop, FYI."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500413085, "post_id": 45176951, "comment_id": 77323278, "body": "@chux: <code>length</code> <b>is</b> the loop counter ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500413194, "post_id": 45176951, "comment_id": 77323328, "body": "@chqrlie True.  Yet the loop if then using 3 counters.  Seems like at least 1 more than needed."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500413389, "post_id": 45176951, "comment_id": 77323413, "body": "@chux: I could use a boundary pointer on <code>in</code> and no longer update <code>length</code>, same number of registers, possibly a fraction of cycle less, if at all. Also less likely to get unrolled by the compiler."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1500452310, "last_edit_date": 1500452310, "creation_date": 1500411551, "answer_id": 45176951, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c/45176951#45176951", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<p>Your function has a bug: when loading the small array, you should write:</p>\n\n<pre><code>    temp[small_loop] = in[small_loop];\n</code></pre>\n\n<p>You can get rid of the tests with a lookup table, either on the source data, or more efficiently on some intermediary result:</p>\n\n<p>In the code below, I use a small table <code>lookup5</code> to convert the values <code>0,1,2,3,4</code> to <code>0,1,2,0,3</code>, and a larger one to map groups of 4 3-bit values from the source array to the corresponding byte value in the packed format:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n/// Compress by packing ...\nvoid compressByPacking0(uint8_t *out, uint8_t *in, uint32_t length) {\n    static uint8_t lookup[4096];\n    static const uint8_t lookup5[8] = { 0, 1, 2, 0, 3, 0, 0, 0 };\n\n    if (lookup[0] == 0) {    \n        /* initialize lookup table */\n        for (int i = 0; i &lt; 4096; i++) {\n            lookup[i] = (lookup5[(i &gt;&gt; 0) &amp; 7] &lt;&lt; 0) +\n                        (lookup5[(i &gt;&gt; 3) &amp; 7] &lt;&lt; 2) +\n                        (lookup5[(i &gt;&gt; 6) &amp; 7] &lt;&lt; 4) +\n                        (lookup5[(i &gt;&gt; 9) &amp; 7] &lt;&lt; 6);\n        }\n    }\n    for (; length &gt;= 4; length -= 4, in += 4, out++) {\n         *out = lookup[(in[0] &lt;&lt; 9) + (in[1] &lt;&lt; 6) + (in[2] &lt;&lt; 3) + (in[3] &lt;&lt; 0)];\n    }\n    uint8_t last = 0;\n    switch (length) {\n      case 3:\n        last |= lookup5[in[2]] &lt;&lt; 4;\n        /* fall through */\n      case 2:\n        last |= lookup5[in[1]] &lt;&lt; 2;\n        /* fall through */\n      case 1:\n        last |= lookup5[in[0]] &lt;&lt; 0;\n        *out = last;\n        break;\n    }\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>The code assumes the array does not contain values outside the specified range. Extra protection against spurious input can be achieved at a minimal cost.</p></li>\n<li><p>The dummy <code>&lt;&lt; 0</code> are here only for symmetry and compile to no extra code.</p></li>\n<li><p>The lookup table could be initialized statically, via a build time script or a set of macros.</p></li>\n<li><p>You might want to unroll this loop 4 or more times, or let the compiler decide.</p></li>\n</ul>\n\n<p>You could also use this simpler solution with a smaller lookup table accessed more often. Careful benchmarking will tell you which is more efficient on your target system:</p>\n\n<pre><code>/// Compress by packing ...\nvoid compressByPacking1(uint8_t *out, uint8_t *in, uint32_t length) {\n    static const uint8_t lookup[4][5] = {\n        { 0 &lt;&lt; 6, 1 &lt;&lt; 6, 2 &lt;&lt; 6, 0 &lt;&lt; 6, 3 &lt;&lt; 6 },\n        { 0 &lt;&lt; 4, 1 &lt;&lt; 4, 2 &lt;&lt; 4, 0 &lt;&lt; 4, 3 &lt;&lt; 4 },\n        { 0 &lt;&lt; 2, 1 &lt;&lt; 2, 2 &lt;&lt; 2, 0 &lt;&lt; 2, 3 &lt;&lt; 2 },\n        { 0 &lt;&lt; 0, 1 &lt;&lt; 0, 2 &lt;&lt; 0, 0 &lt;&lt; 0, 3 &lt;&lt; 0 },\n    };\n\n    for (; length &gt;= 4; length -= 4, in += 4, out++) {\n         *out = lookup[0][in[0]] + lookup[1][in[1]] +\n                lookup[2][in[2]] + lookup[3][in[3]];\n    }\n    uint8_t last = 0;\n    switch (length) {\n      case 3:\n        last |= lookup[2][in[2]];\n        /* fall through */\n      case 2:\n        last |= lookup[1][in[1]];\n        /* fall through */\n      case 1:\n        last |= lookup[0][in[0]];\n        *out = last;\n        break;\n    }\n}\n</code></pre>\n\n<p>Here is yet another approach, without any tables:</p>\n\n<pre><code>/// Compress by packing ...\nvoid compressByPacking2(uint8_t *out, uint8_t *in, uint32_t length) {\n#define BITS ((1 &lt;&lt; 2) + (2 &lt;&lt; 4) + (3 &lt;&lt; 8))\n    for (; length &gt;= 4; length -= 4, in += 4, out++) {\n         *out = ((BITS &lt;&lt; 6 &gt;&gt; (in[0] + in[0])) &amp; 0xC0) +\n                ((BITS &lt;&lt; 4 &gt;&gt; (in[1] + in[1])) &amp; 0x30) +\n                ((BITS &lt;&lt; 2 &gt;&gt; (in[2] + in[2])) &amp; 0x0C) +\n                ((BITS &lt;&lt; 0 &gt;&gt; (in[3] + in[3])) &amp; 0x03);\n    }\n    uint8_t last = 0;\n    switch (length) {\n      case 3:\n        last |= (BITS &lt;&lt; 2 &gt;&gt; (in[2] + in[2])) &amp; 0x0C;\n        /* fall through */\n      case 2:\n        last |= (BITS &lt;&lt; 4 &gt;&gt; (in[1] + in[1])) &amp; 0x30;\n        /* fall through */\n      case 1:\n        last |= (BITS &lt;&lt; 6 &gt;&gt; (in[0] + in[0])) &amp; 0xC0;\n        *out = last;\n        break;\n    }\n}\n</code></pre>\n\n<p>Here is a comparative benchmark on my system, Macbook pro running OS/X, with <code>clang -O2</code>:</p>\n\n<pre><code>compressByPacking(1MB) -&gt; 0.867ms\ncompressByPacking0(1MB) -&gt; 0.445ms\ncompressByPacking1(1MB) -&gt; 0.538ms\ncompressByPacking2(1MB) -&gt; 0.824ms\n</code></pre>\n\n<p>The <code>compressByPacking0</code> variant is fastest, almost twice as fast as your code.\nIt is a little disappointing, but the code is portable. You might squeeze more performance using handcoded SSE optimizations.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 1660053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d86e88500b2254d41f8855d68057f69?s=128&d=identicon&r=PG", "display_name": "avikpram", "link": "https://stackoverflow.com/users/1660053/avikpram"}, "edited": false, "score": 0, "creation_date": 1500413184, "post_id": 45177150, "comment_id": 77323324, "body": "Cane &quot;Either this is a typo, your target is seriously aging, &quot; :) It is not a typo, my code is for an embdded device.  I am saving this array in flash at certain milestones or update intervals and the whole compression thingy is to save flash memory (we don&#39;t have much of that).  The code is cross-compiled for a ARM9 target using gcc-arm-eabi and I am using optimization level 2 (&quot;O2&quot;). I wasn&#39;t aware of the &#39;clang&#39; feature; I would try that.   I admit I didn&#39;t dig enough so thanks for that. I was &quot;hoping&quot; that there must be an &#39;obvious&#39; trick that I am missing."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500413575, "post_id": 45177150, "comment_id": 77323493, "body": "&quot;I have a large array (around 1 MB) Either this is a typo, your target is seriously aging, ...&quot; is not needed.  Billions of small processors are make each year, 2017, that have very restrictive memory compare to PCs, etc.  C is very popular there and concerns about speed and smaller memory requirements are legitimate - even if does  not apply in OP&#39;s case."}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500418060, "post_id": 45177150, "comment_id": 77325093, "body": "@chux that may be true but ARM9s are not small processors and a 1MB array is not what I&#39;d call &quot;large&quot; for an ARM9."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500419334, "post_id": 45177150, "comment_id": 77325489, "body": "@BrianCain Unfamiliar with ARM9."}], "tags": [], "owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "is_accepted": false, "score": 1, "last_activity_date": 1500412256, "creation_date": 1500412256, "answer_id": 45177150, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c/45177150#45177150", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<blockquote>\n  <p>I have a large array (around 1 MB) </p>\n</blockquote>\n\n<p>Either this is a typo, your target is seriously aging, or this compression operation is invoked repeatedly in the critical path of your application.</p>\n\n<blockquote>\n  <p>Any code snippets or suggestion on how to make it more efficient or\n  faster (hopefully keeping the readability) will be very much helpful.</p>\n</blockquote>\n\n<p>In general, you will find the best information by empirically measuring the performance and inspecting the generated code.  Using profilers to determine what code is executing, where there are cache misses and pipeline stalls -- these can help you tune your algorithm.</p>\n\n<p>For example, you chose a stride of 4 elements.  Is that just because you are mapping four input elements to a single byte?  Can you use native SIMD instructions/intrinsics to operate on more elements at a time?</p>\n\n<p>Also, how are you compiling for your target and how well is your compiler able to optimize your code?</p>\n\n<p>Let's ask <code>clang</code> whether it finds any problems trying to optimize your code:</p>\n\n<pre><code>$ clang -fvectorize  -O3  -Rpass-missed=licm -c tryme.c \ntryme.c:11:28: remark: failed to move load with loop-invariant address because the loop may invalidate its value [-Rpass-missed=licm]\n        temp[small_loop] = *in;           // Load into local variable\n                           ^\ntryme.c:21:25: remark: failed to move load with loop-invariant address because the loop may invalidate its value [-Rpass-missed=licm]\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n                        ^\ntryme.c:22:25: remark: failed to move load with loop-invariant address because the loop may invalidate its value [-Rpass-missed=licm]\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n                        ^\ntryme.c:23:25: remark: failed to move load with loop-invariant address because the loop may invalidate its value [-Rpass-missed=licm]\n                      ((temp[2] &amp; 0x03) &lt;&lt; 2) |\n                        ^\ntryme.c:24:25: remark: failed to move load with loop-invariant address because the loop may invalidate its value [-Rpass-missed=licm]\n                      ((temp[3] &amp; 0x03));\n                        ^\n</code></pre>\n\n<p>I'm not sure but maybe alias analysis is what makes it think it can't move this load.  Try playing with <code>__restrict__</code> to see if that has any effect.</p>\n\n<pre><code>$ clang -fvectorize  -O3  -Rpass-analysis=loop-vectorize  -c tryme.c \ntryme.c:13:13: remark: loop not vectorized: loop contains a switch statement [-Rpass-analysis=loop-vectorize]\n        if (temp[small_loop] == 3)        // 3's are discarded\n</code></pre>\n\n<p>I can't think of anything obvious that you can do about this one unless you change your algorithm.  If the compression ratio is satisfactory without deleting the <code>3</code>s, you could perhaps eliminate this.</p>\n\n<p>So what's the generated code look like?  Take a look below.  How could you write it better by hand?  If you can write it better yourself, either do that or feed it back into your algorithm to help guide the compiler.</p>\n\n<p>Does the compiled code take advantage of your target's instruction set and registers?</p>\n\n<p>Most importantly -- try executing it and see where you're spending the most cycles.  Stalls from branch misprediction, unaligned loads?  Maybe you can do something about those.  Use what you know about the frequency of your input data to give the compiler hints about the branches in your encoder.</p>\n\n<pre><code>$ objdump -d --source tryme.o\n...\n0000000000000000 &lt;compressByPacking&gt;:\n#include &lt;stdint.h&gt;\n\nvoid compressByPacking (uint8_t* out, uint8_t* in, uint32_t length)\n{\n    for (int loop = 0; loop &lt; length/4; loop ++, in += 4, out++)\n   0:   c1 ea 02                shr    $0x2,%edx\n   3:   0f 84 86 00 00 00       je     8f &lt;compressByPacking+0x8f&gt;\n   9:   0f 1f 80 00 00 00 00    nopl   0x0(%rax)\n    {\n      uint8_t temp[4];\n\n      for (int small_loop = 0; small_loop &lt; 4; small_loop++)\n      {\n        temp[small_loop] = *in;           // Load into local variable\n  10:   8a 06                   mov    (%rsi),%al\n\n        if (temp[small_loop] == 3)        // 3's are discarded\n  12:   3c 04                   cmp    $0x4,%al\n  14:   74 3a                   je     50 &lt;compressByPacking+0x50&gt;\n  16:   3c 03                   cmp    $0x3,%al\n  18:   41 88 c0                mov    %al,%r8b\n  1b:   75 03                   jne    20 &lt;compressByPacking+0x20&gt;\n  1d:   45 31 c0                xor    %r8d,%r8d\n  20:   3c 04                   cmp    $0x4,%al\n  22:   74 33                   je     57 &lt;compressByPacking+0x57&gt;\n  24:   3c 03                   cmp    $0x3,%al\n  26:   88 c1                   mov    %al,%cl\n  28:   75 02                   jne    2c &lt;compressByPacking+0x2c&gt;\n  2a:   31 c9                   xor    %ecx,%ecx\n  2c:   3c 04                   cmp    $0x4,%al\n  2e:   74 2d                   je     5d &lt;compressByPacking+0x5d&gt;\n  30:   3c 03                   cmp    $0x3,%al\n  32:   41 88 c1                mov    %al,%r9b\n  35:   75 03                   jne    3a &lt;compressByPacking+0x3a&gt;\n  37:   45 31 c9                xor    %r9d,%r9d\n  3a:   3c 04                   cmp    $0x4,%al\n  3c:   74 26                   je     64 &lt;compressByPacking+0x64&gt;\n  3e:   3c 03                   cmp    $0x3,%al\n  40:   75 24                   jne    66 &lt;compressByPacking+0x66&gt;\n  42:   31 c0                   xor    %eax,%eax\n  44:   eb 20                   jmp    66 &lt;compressByPacking+0x66&gt;\n  46:   66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)\n  4d:   00 00 00 \n  50:   41 b0 03                mov    $0x3,%r8b\n  53:   3c 04                   cmp    $0x4,%al\n  55:   75 cd                   jne    24 &lt;compressByPacking+0x24&gt;\n  57:   b1 03                   mov    $0x3,%cl\n  59:   3c 04                   cmp    $0x4,%al\n  5b:   75 d3                   jne    30 &lt;compressByPacking+0x30&gt;\n  5d:   41 b1 03                mov    $0x3,%r9b\n  60:   3c 04                   cmp    $0x4,%al\n  62:   75 da                   jne    3e &lt;compressByPacking+0x3e&gt;\n  64:   b0 03                   mov    $0x3,%al\n          temp[small_loop] = 3;\n\n      } // end small loop\n\n      // Pack the bits into write pointer\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n  66:   41 c0 e0 06             shl    $0x6,%r8b\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n  6a:   c0 e1 04                shl    $0x4,%cl\n  6d:   80 e1 30                and    $0x30,%cl\n          temp[small_loop] = 3;\n\n      } // end small loop\n\n      // Pack the bits into write pointer\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n  70:   44 08 c1                or     %r8b,%cl\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n                      ((temp[2] &amp; 0x03) &lt;&lt; 2) |\n  73:   41 c0 e1 02             shl    $0x2,%r9b\n  77:   41 80 e1 0c             and    $0xc,%r9b\n                      ((temp[3] &amp; 0x03));\n  7b:   24 03                   and    $0x3,%al\n\n      } // end small loop\n\n      // Pack the bits into write pointer\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n  7d:   44 08 c8                or     %r9b,%al\n                      ((temp[2] &amp; 0x03) &lt;&lt; 2) |\n  80:   08 c8                   or     %cl,%al\n          temp[small_loop] = 3;\n\n      } // end small loop\n\n      // Pack the bits into write pointer\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n  82:   88 07                   mov    %al,(%rdi)\n#include &lt;stdint.h&gt;\n\nvoid compressByPacking (uint8_t* out, uint8_t* in, uint32_t length)\n{\n    for (int loop = 0; loop &lt; length/4; loop ++, in += 4, out++)\n  84:   48 83 c6 04             add    $0x4,%rsi\n  88:   48 ff c7                inc    %rdi\n  8b:   ff ca                   dec    %edx\n  8d:   75 81                   jne    10 &lt;compressByPacking+0x10&gt;\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n                      ((temp[2] &amp; 0x03) &lt;&lt; 2) |\n                      ((temp[3] &amp; 0x03));\n\n    } // end loop\n }\n  8f:   c3                      retq   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3018, "user_id": 18356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27E99.png?s=128&g=1", "display_name": "shoover", "link": "https://stackoverflow.com/users/18356/shoover"}, "edited": false, "score": 0, "creation_date": 1500418897, "post_id": 45177238, "comment_id": 77325343, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/16753552\">From Review</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 3018, "user_id": 18356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27E99.png?s=128&g=1", "display_name": "shoover", "link": "https://stackoverflow.com/users/18356/shoover"}, "edited": false, "score": 0, "creation_date": 1500419243, "post_id": 45177238, "comment_id": 77325455, "body": "Downvoted ??????"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1500420042, "post_id": 45177238, "comment_id": 77325680, "body": "Maybe you could explain why the unsafe version is unsafe."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500420577, "post_id": 45177238, "comment_id": 77325828, "body": "Does not check if the input has valid values, if not it is an UB. Number of input data items has to be dividable by 4. Otherwise it will read outside the input table which is an another UB. So it is unsafe"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -1, "last_activity_date": 1500419184, "last_edit_date": 1500419184, "creation_date": 1500412559, "answer_id": 45177238, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c/45177238#45177238", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<p>Update: Tested</p>\n\n<p>Unsafe version is the fastest - fastest than other ones in another answers. Tested with VS2017</p>\n\n<pre><code>const uint8_t table[4][5] = \n{ { 0 &lt;&lt; 0,1 &lt;&lt; 0,2 &lt;&lt; 0,0 &lt;&lt; 0,3 &lt;&lt; 0 },\n  { 0 &lt;&lt; 2,1 &lt;&lt; 2,2 &lt;&lt; 2,0 &lt;&lt; 2,3 &lt;&lt; 2 },\n  { 0 &lt;&lt; 4,1 &lt;&lt; 4,2 &lt;&lt; 4,0 &lt;&lt; 4,3 &lt;&lt; 4 },\n  { 0 &lt;&lt; 6,1 &lt;&lt; 6,2 &lt;&lt; 6,0 &lt;&lt; 6,3 &lt;&lt; 6 },\n};\n\n\n\nvoid code(uint8_t *in, uint8_t *out, uint32_t len)\n{\n    memset(out, 0, len / 4 + 1);\n    for (uint32_t i = 0; i &lt; len; i++)\n        out[i / 4] |= table[i &amp; 3][in[i] % 5];\n}\n\nvoid code_unsafe(uint8_t *in, uint8_t *out, uint32_t len)\n{\n    for (uint32_t i = 0; i &lt; len; i += 4, in += 4, out++)\n    {\n        *out = table[0][in[0]] | table[1][in[1]] | table[2][in[2]] | table[3][in[3]];\n    }\n}\n</code></pre>\n\n<p>To check how it is written it is enough to compile it - even online</p>\n\n<p><a href=\"https://godbolt.org/g/Z75NQV\" rel=\"nofollow noreferrer\">https://godbolt.org/g/Z75NQV</a></p>\n\n<p>There are small very simple my coding functions - just for comparition of the compiler generated code, not tested.</p>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500419710, "post_id": 45178501, "comment_id": 77325596, "body": "have you decompressed to check if it works ok?"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1500419244, "creation_date": 1500419244, "answer_id": 45178501, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c/45178501#45178501", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<p>In all the excitement about performance, functionality is overlooked.  Code is broke.</p>\n\n<pre><code>    // temp[small_loop] = *in;           // Load into local variable\n    temp[small_loop] = in[small_loop]; \n</code></pre>\n\n<hr>\n\n<p>Alternative: </p>\n\n<p>How about a simple tight loop?</p>\n\n<p>Use <code>const</code> and <code>restrict</code> to allow various optimizations.</p>\n\n<pre><code>void compressByPacking1(uint8_t* restrict out, const uint8_t* restrict in,\n    uint32_t length) {\n  static const uint8_t t[5] = { 0, 1, 2, 0, 3 };\n  uint32_t length4 = length / 4;\n  unsigned v = 0;\n  uint32_t i;\n  for (i = 0; i &lt; length4; i++) {\n    for (unsigned j=0; j &lt; 4; j++) {\n      v &lt;&lt;= 2;\n      v |= t[*in++];\n    }\n    out[i] = (uint8_t) v;\n  }\n  if (length &amp; 3) {\n    v = 0;\n    for (unsigned j; j &lt; 4; j++) {\n      v &lt;&lt;= 2;\n      if (j &lt; (length &amp; 3)) {\n        v |= t[*in++];\n      }\n    }\n    out[i] = (uint8_t) v;\n  }\n}\n</code></pre>\n\n<p><em>Tested</em> and found this code to be about 270% as fast (41 vs 15) (YMMV).<br>\nTested and found to form the same output as OP's (corrected) code</p>\n"}], "owner": {"reputation": 45, "user_id": 1660053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d86e88500b2254d41f8855d68057f69?s=128&d=identicon&r=PG", "display_name": "avikpram", "link": "https://stackoverflow.com/users/1660053/avikpram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1160, "favorite_count": 0, "closed_date": 1500453694, "answer_count": 5, "score": 2, "last_activity_date": 1500452310, "creation_date": 1500408318, "last_edit_date": 1500418806, "question_id": 45176082, "link": "https://stackoverflow.com/questions/45176082/compressing-a-char-array-using-bit-packing-in-c", "closed_reason": "Not suitable for this site", "title": "Compressing a &#39;char&#39; array using bit packing in C", "body": "<p>I have a large array (around 1 MB) of type <code>unsigned char</code> (i.e. <code>uint8_t</code>). I know that the bytes in it can have only one of 5 values (i.e. 0, 1, 2, 3, 4). Moreover we do not need to preserve '3's from the input, they can be safely lost when we encode/decode.</p>\n\n<p>So I guessed bit packing would be the simplest way to compress it, so every byte can be converted to 2 bits (<code>00</code>, <code>01</code>..., <code>11</code>). </p>\n\n<p>As mentioned all elements of value 3 can be removed (i.e. saved as 0). Which gives me option to save '4' as '3'. While reconstructing (decompressing) I restore 3's to 4's.</p>\n\n<p>I wrote a small function for the compression but I feel this has too many operations and just not efficient enough. Any code snippets or suggestion on how to make it more efficient or faster (hopefully keeping the readability) will be very much helpful.</p>\n\n<pre><code>/// Compress by packing ...\nvoid compressByPacking (uint8_t* out, uint8_t* in, uint32_t length)\n{\n    for (int loop = 0; loop &lt; length/4; loop ++, in += 4, out++)\n    {\n      uint8_t temp[4];\n\n      for (int small_loop = 0; small_loop &lt; 4; small_loop++)\n      {\n        temp[small_loop] = *in;           // Load into local variable\n\n        if (temp[small_loop] == 3)        // 3's are discarded\n          temp[small_loop] = 0;\n        else if (temp[small_loop] == 4)   // and 4's are converted to 3\n          temp[small_loop] = 3;\n\n      } // end small loop\n\n      // Pack the bits into write pointer\n      *out = (uint8_t)((temp[0] &amp; 0x03) &lt;&lt; 6) |\n                      ((temp[1] &amp; 0x03) &lt;&lt; 4) |\n                      ((temp[2] &amp; 0x03) &lt;&lt; 2) |\n                      ((temp[3] &amp; 0x03));\n\n    } // end loop\n }\n</code></pre>\n\n<ul>\n<li>Edited to make the problem more clear as it looked like I'm trying to save 5 values into 2 bits. Thanks to @Brian Cain for suggested wording.</li>\n<li><a href=\"https://codereview.stackexchange.com/questions/169596/compressing-a-char-array-using-bit-packing-using-c\">Cross-posted on Code Review.</a></li>\n</ul>\n"}, {"tags": ["c", "winapi", "loadimage"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1500407739, "post_id": 45175886, "comment_id": 77320351, "body": "<code>WM_SETICON</code> accept only icon format, when <code>LoadImage</code> with <code>IMAGE_BITMAP</code> - create bitmap only. so and must be error"}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1500408422, "post_id": 45175886, "comment_id": 77320733, "body": "I have tried this with a &#39;.ico&#39; file and &#39;IMAGE_ICON&#39;  aswell. It doesnt work even then"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1500408604, "post_id": 45175886, "comment_id": 77320820, "body": "What you describe works fine here."}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1500408921, "post_id": 45175886, "comment_id": 77321005, "body": "@DavidHeffernan It doesn&#39;t unfortunately"}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500408956, "post_id": 45175886, "comment_id": 77321026, "body": "@VTT Im letting the default handle it"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500409036, "post_id": 45175886, "comment_id": 77321076, "body": "Actually you can not use <code>.bmp</code> files as icons, only <code>.ico</code> files are supported."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1500409071, "post_id": 45175886, "comment_id": 77321093, "body": "Sure it does. That message works fine. You are doing something wrong. Since you won&#39;t provide a MCVE and you even showed code that you know cannot work, but described that you&#39;ve also, apparently, done it the right way, it&#39;s hard to help."}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "edited": false, "score": 0, "creation_date": 1500409416, "post_id": 45175886, "comment_id": 77321302, "body": ".ico file is giving an error code 0 when i call GetLastError() which is ERROR_SUCCESS. I dont understand.."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500409755, "post_id": 45175886, "comment_id": 77321521, "body": "<code>ERROR_SUCCESS</code> means that everything works fine."}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "edited": false, "score": 0, "creation_date": 1500409831, "post_id": 45175886, "comment_id": 77321573, "body": "but LoadImage() returns null so everything is not fine..."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500409896, "post_id": 45175886, "comment_id": 77321610, "body": "I guess you are already running code that is considerably different than what is present in you question. You should include new code as well."}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "edited": false, "score": 0, "creation_date": 1500410005, "post_id": 45175886, "comment_id": 77321670, "body": "<code>HICON hi = (HICON)LoadImage(NULL, &quot;ICON.ico&quot;, IMAGE_ICON, 16, 16, LR_LOADFROMFILE);</code> is the only change. ICON.ico is present in the project file."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1500410159, "post_id": 45175886, "comment_id": 77321758, "body": "Don&#39;t ask the question in comments. Use an edit to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1500410165, "post_id": 45175886, "comment_id": 77321762, "body": "It should be present in the application working directory, otherwise application won&#39;t be able to find it."}, {"owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "edited": false, "score": 1, "creation_date": 1500410936, "post_id": 45175886, "comment_id": 77322151, "body": "I have added an image in the question"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1500462009, "post_id": 45175886, "comment_id": 77344156, "body": "Don&#39;t ever use relative paths. If you need a file name relative to your executable image, construct a fully qualified path name from the executable image&#39;s path."}], "owner": {"reputation": 78, "user_id": 5105933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PtiMJ.jpg?s=128&g=1", "display_name": "Zero Cipher", "link": "https://stackoverflow.com/users/5105933/zero-cipher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500410919, "creation_date": 1500407597, "last_edit_date": 1500410919, "question_id": 45175886, "link": "https://stackoverflow.com/questions/45175886/win32-small-icon-doesnt-show", "title": "Win32: Small Icon doesn&#39;t show", "body": "<p><a href=\"https://i.stack.imgur.com/DuzGx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DuzGx.jpg\" alt=\"EDIT\"></a>I'm learning Win32 programming\nI used LoadImage(...) to set the small icon for the window but it doesn't seem to be working and I cannot pinpoint the problem</p>\n\n<pre><code>void AddIcons(HWND hw)\n{\n    HICON hi = LoadImage(NULL, \"ICON.bmp\", IMAGE_BITMAP, 16, 16, LR_LOADFROMFILE);\n\n    printf(\"Icon initialized\\n\");\n\n    if(hi)\n    {\n        printf(\"%x\\n\", hi);\n        SendMessage(hw, WM_SETICON, ICON_SMALL, (LPARAM)hi);\n    }\n\n}\n</code></pre>\n\n<p>And the windows procedure:</p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND handle, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch(message)\n    {\n        case WM_SETICON: printf(\"REQUEST RECEIVED\\n\");\n    }\n.\n.  // AddIcons() is called here\n.  // DefWindowProc() handles the message at the end\n}\n</code></pre>\n\n<p>I get all three print statements including <code>REQUEST RECEIVED</code>.</p>\n\n<p>However, the icon is still the default. Where is the problem occuring?</p>\n\n<p>I am aware that I can use keep a resource file and use LoadIcon(..) but I am more comfortable doing everything programatically. Which begs a second question:</p>\n\n<p>Can everything that can be done using resource(.rc) files be done programmatically?\nIf so, is one method inherently better than the other?</p>\n"}, {"tags": ["c++", "c", "multithreading"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500406841, "post_id": 45175662, "comment_id": 77319791, "body": "<code>local_file_read</code> is not the same name as <code>lock_file_read</code>.  If it should be then NO; there is a mechanism for updates on one thread to be seen on another see std::atomic :  <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/atomic/atomic</a>   Threads can NOT be called from other processes (unless IPC)."}, {"owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500406958, "post_id": 45175662, "comment_id": 77319874, "body": "sorry my mistake i have update"}, {"owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500407109, "post_id": 45175662, "comment_id": 77319991, "body": "wont the Lock mutex code make it safe?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1500407138, "post_id": 45175662, "comment_id": 77320009, "body": "Only if it is &quot;inside&quot; the mutex. Right now it is not ok."}, {"owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1500407388, "post_id": 45175662, "comment_id": 77320156, "body": "@RichardCritten If it is called multiple time from the same process then is it safe?"}, {"owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1500407532, "post_id": 45175662, "comment_id": 77320237, "body": "@deviantfan if i place lock_file_read=false; before unlock mutex then it is safe?"}, {"owner": {"reputation": 364, "user_id": 5875229, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3JQq.jpg?s=128&g=1", "display_name": "JazzSoft", "link": "https://stackoverflow.com/users/5875229/jazzsoft"}, "edited": false, "score": 0, "creation_date": 1500407974, "post_id": 45175662, "comment_id": 77320485, "body": "Consider using lambda expression with <i>capture</i> so that you can get rid of the global variable.  Also consider using <i>std::thread</i> and  <i>std::mutex</i>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1500408016, "post_id": 45175662, "comment_id": 77320508, "body": "How exactly are you using the same thread in different processes?"}, {"owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1500408356, "post_id": 45175662, "comment_id": 77320698, "body": "@molbdnilo and Richard Critten I am really sorry thread is called for the multiple time from same process I have update please excuse"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1500413860, "post_id": 45175662, "comment_id": 77323608, "body": "Why don&#39;t you use std::thread instead of pthreads?"}], "owner": {"reputation": 83, "user_id": 8228077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc0e814550bb151b9c935ae9218b881?s=128&d=identicon&r=PG&f=1", "display_name": "ricky", "link": "https://stackoverflow.com/users/8228077/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1500408225, "creation_date": 1500406750, "last_edit_date": 1500408225, "question_id": 45175662, "link": "https://stackoverflow.com/questions/45175662/is-use-of-global-variable-in-my-below-thread-is-good", "title": "Is use of global variable in my below thread is good?", "body": "<p>I have written a code which has a one thread called mulitple  time from same process and i am good with lock mechanism.</p>\n\n<p>I am using a global variable bool which notify when to read a file.\n<strong>I am not sure whether use of global variable in thread is good practice or not</strong> if not please suggest how to avoid the use of global variables in below case.</p>\n\n<pre><code>//global\n\nbool lock_file_read =false;\n</code></pre>\n\n<p>// Note this thread is called  multiple time from same process is use global var is good?</p>\n\n<pre><code>static void * runMyScript(void *tempFile)\n\n{\n  pthread_t threads;\n  lock_file_read = true;\n\n  /* Lock mutex code */\n  pthread_mutex_lock( &amp;count_mutex)\n  system(\"myscript takes around 20-30 sec\");\n\n   /* Unlock Mutex code*/\n  pthread_mutex_unlock( &amp;count_mutex );\n  lock_file_read=false;\n}\n\nvoid ReadFileWhen_Script_completed()\n{\n  if(!lock_file_read)\n  {\n    //read it\n    //call to thread \n  }\n}\n</code></pre>\n"}, {"tags": ["c", "c-strings"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500407423, "post_id": 45175649, "comment_id": 77320182, "body": "What is the <code>-1</code> for? Why do you use <code>sizeof</code> and not <code>strlen</code>? Why does the coded test string not match the question?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 7, "creation_date": 1500407488, "post_id": 45175649, "comment_id": 77320215, "body": "<code>if(string[i] != &quot; &quot;)</code> will generate a compiler complaint. Enable full compiler warnings and do not ignore them."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1500408047, "post_id": 45175649, "comment_id": 77320525, "body": "You can also simply process your string until the <i>nul-terminating</i> character is reached, e.g. <code>for(int i = 0; string[i]; i++)</code> or <code>char *p = string; while (*p) { &#47;*handle char*&#47;; p++; }</code>"}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 1, "creation_date": 1500408117, "post_id": 45175649, "comment_id": 77320573, "body": "When learning C or C++, enable all warnings with <code>-Wall -Werror</code> for clang or gcc, and <code>&#47;W4 &#47;WX</code> for msvc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1500408139, "post_id": 45175649, "comment_id": 77320582, "body": "<code>size_t sizee = sizeof(string) - 1;  char arrayOfStrings[sizee][sizee];</code> is one too small.  Consider <code>char string[] = &quot;123&quot;;</code>  Suggest <code>char arrayOfStrings[sizeof string&#47;2 + 1][sizeof string];</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500414913, "post_id": 45175649, "comment_id": 77324066, "body": "<a href=\"http://ideone.com/NLSxo5\" rel=\"nofollow noreferrer\">sample code</a>"}], "owner": {"reputation": 126, "user_id": 3696359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/meDmj.jpg?s=128&g=1", "display_name": "Wilfredo", "link": "https://stackoverflow.com/users/3696359/wilfredo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1500408012, "answer_count": 0, "score": 0, "last_activity_date": 1500406728, "creation_date": 1500406728, "question_id": 45175649, "link": "https://stackoverflow.com/questions/45175649/in-the-c-language-how-do-i-divide-a-string-up-into-substrings-separated-by-a-sp", "closed_reason": "Duplicate", "title": "In the C language, how do I divide a string up into substrings separated by a space character.", "body": "<p>For example, given input string \"this is a test\"\nI want to create an array of strings with 4 elements: \"this\", \"is\", \"a\", and \"test\". I also want to be able to change these strings later. </p>\n\n<p>Below is the code I have tried. This seems to put all the characters into the first string in the array. </p>\n\n<pre><code>    char string[] = \"this is a test string\"; //sample input string\n    size_t sizee = sizeof(string) - 1; //size of sample input string\n    char arrayOfStrings[sizee][sizee]; //the array of strings\n\n    int m = 0; //[m][n]\n    int n = 0; //[m][n]\n    for(int i = 0; i&lt;sizee; i++){\n            if(string[i] != \" \"){\n            arrayOfStrings[m][n] = string[i];\n            n++; //\n            }\n\n            else{\n            m++; //if space char, move to next string in the array\n            n = 0;\n            }\n    }\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1500406016, "post_id": 45175416, "comment_id": 77319295, "body": "<i>Why</i> do you want this? What is the <i>actual</i> problem you want to solve?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500406145, "post_id": 45175416, "comment_id": 77319362, "body": "Where is the personal information?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500406191, "post_id": 45175416, "comment_id": 77319399, "body": "@EdHeal maybe the compiler is the OP here?"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "edited": false, "score": 0, "creation_date": 1500406196, "post_id": 45175416, "comment_id": 77319402, "body": "I&#39;d like to compile and distribute binaries across several public repositories, but don&#39;t want many people to know I am the same person (obviously posting using a different account)"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1500406252, "post_id": 45175416, "comment_id": 77319431, "body": "How can  the above info identify you?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1500406266, "post_id": 45175416, "comment_id": 77319437, "body": "Umm.. won&#39;t they notice that the binary executable is the same size and has the same checksum?"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "edited": false, "score": 1, "creation_date": 1500406273, "post_id": 45175416, "comment_id": 77319444, "body": "It&#39;s not <i>personal</i> information, but I&#39;d like to replace anything that is not generic to generic (eg. browsers can be identified by user-agent and Tor Browser uses a generic user-agent)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1500406288, "post_id": 45175416, "comment_id": 77319452, "body": "That sounds like you&#39;re doing something nefarious."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500406356, "post_id": 45175416, "comment_id": 77319489, "body": "@MartinJames I am not distributing the same binary (using different source) - If you compile the above source, I can almost guarantee the checksum will be different from mine (MD5: 371643872c764d70bc355b6e29c114dd)"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "edited": false, "score": 0, "creation_date": 1500406431, "post_id": 45175416, "comment_id": 77319543, "body": "Even Tor Browser has &quot;good&quot; users and &quot;bad&quot; users, some are for genuine research / journalism, but some content is illegal to post publicly (in some countries)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500406519, "post_id": 45175416, "comment_id": 77319598, "body": "I don&#39;t like the intention and I think it would be unethical to help the OP in achieving their goal."}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500406684, "post_id": 45175416, "comment_id": 77319696, "body": "@EugeneSh. Please don&#39;t judge"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 0, "creation_date": 1500406712, "post_id": 45175416, "comment_id": 77319706, "body": "@user2979872 Why shouldn&#39;t I?"}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500406780, "post_id": 45175416, "comment_id": 77319740, "body": "@EugeneSh. Stackoverflow is for helping others not judging others. OP is not sitting in a court infront of you"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 1, "creation_date": 1500406866, "post_id": 45175416, "comment_id": 77319803, "body": "@user2979872 SO is a community run website where each member is entitled certain tools and their own opinion on how to use them. We don&#39;t help here to virus-writers, suicide bombers and kitten killers."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500406869, "post_id": 45175416, "comment_id": 77319812, "body": "There is a rule of law about conspiracy. I try to avoid getting wrapped up in that myself as I am identifiable."}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 1, "creation_date": 1500406890, "post_id": 45175416, "comment_id": 77319825, "body": "@AvdnhracNTAd9ex:  You write at the end that there is still a lot of identifying information in the binary.  Can you provide more examples other than what you&#39;ve posted?  Does the other identifying information consist of just library names and versions, or is there other stuff?"}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500407004, "post_id": 45175416, "comment_id": 77319909, "body": "@EugeneSh. You are too cynical and extreme in your opinions. Please keep this to your self."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 1, "creation_date": 1500407149, "post_id": 45175416, "comment_id": 77320013, "body": "@user2979872 Are you judging me now? For my opinions? Hm..."}, {"owner": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500408230, "post_id": 45175416, "comment_id": 77320627, "body": "@EugeneSh. You said it and you have it. While OP didn&#39;t say anything and you were jumping to conclusions guessing this could be for virus, kitten killers etc."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500408242, "post_id": 45175416, "comment_id": 77320633, "body": "@Eugene Sh. we should not worry too much about potential viruses &amp; exploits. If OP is asking such a very &quot;advanced&quot; questions, he is not very dangerous :)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 371, "user_id": 2979872, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f53dae485d6b73e75472bb3bfc08744?s=128&d=identicon&r=PG&f=1", "display_name": "user2979872", "link": "https://stackoverflow.com/users/2979872/user2979872"}, "edited": false, "score": 1, "creation_date": 1500408436, "post_id": 45175416, "comment_id": 77320739, "body": "@user2979872 You know - it is not very common to remove all the information from binary. Doing it in the real life you would definitely drive some attention of the law enforcement agencies. Anyway - I think no answers or advices shall be given."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1500410195, "post_id": 45175416, "comment_id": 77321778, "body": "@indiv As far as I know, it is only the dynamic linking that is identifiable (given enough samples)"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500410286, "post_id": 45175416, "comment_id": 77321815, "body": "@PeterJ I know that is not very common (or why couldn&#39;t I easily find it online?)... Maybe it is because few people know how to strip identifiable information in the first place"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500410390, "post_id": 45175416, "comment_id": 77321866, "body": "I would have thought having those strings in the binary would make it less identifiable (as they are very common). Having a binary without them would indicate that the person has something to hide"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500410535, "post_id": 45175416, "comment_id": 77321936, "body": "@AvdnhracNTAd9ex or maybe those who know do not want to feed ignorant home made hackers/pirates/terrorists/crackers"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500410729, "post_id": 45175416, "comment_id": 77322028, "body": "@PeterJ How do you distinguish between ignorant and those wanting to learn? Besides, it is a lack of knowledge that makes us want to learn"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500410876, "post_id": 45175416, "comment_id": 77322114, "body": "@EdHeal any additional information will make it more identifiable (take for example the <b>full</b> results at <a href=\"https://panopticlick.eff.org/\" rel=\"nofollow noreferrer\">panopticlick.eff.org</a>)"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500410921, "post_id": 45175416, "comment_id": 77322140, "body": "@EdHeal Yes, it would indicate the person has something to hide (their identity), but perhaps it is for the greater good"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500410977, "post_id": 45175416, "comment_id": 77322175, "body": "You are creating a binary. Not visiting a web site"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500411412, "post_id": 45175416, "comment_id": 77322394, "body": "@AvdnhracNTAd9ex In all clans, societies, sects - there is some knowledge not available for everyone. Identity hiding, virus methods writing is this kind of knowledge. You do not need to learn it. If you want to learn it is suspicious, as it does not have any legal practical use."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500411589, "post_id": 45175416, "comment_id": 77322477, "body": "@PeterJ You do realize that polymorphic code is easily obtainable, right? Also, I would say Tor Browser is identity hiding knowledge (just look at the source code and/or read blogs to see how it works)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500411634, "post_id": 45175416, "comment_id": 77322500, "body": "You are getting more and more suspicious"}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1500411857, "post_id": 45175416, "comment_id": 77322618, "body": "@PeterJ Is learning to serve pufferfish suspicious? It has potential to be an excellent dish, yet also the potential to poison and kill humans"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500411926, "post_id": 45175416, "comment_id": 77322647, "body": "What positive potential can be in &quot;<i>compile and distribute binaries across several public repositories, but don&#39;t want many people to know I am the same person (obviously posting using a different account)</i>&quot;? Please explain."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500412395, "post_id": 45175416, "comment_id": 77322905, "body": "@EugeneSh. Why would the creators of Bitcoin want to publish the implementation under the name &quot;Satoshi Nakamoto&quot;?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500412564, "post_id": 45175416, "comment_id": 77322989, "body": "@AvdnhracNTAd9ex They have had their reasons. I asked about yours."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500412630, "post_id": 45175416, "comment_id": 77323022, "body": "@Someprogrammerdude How do you know the backstory of <a href=\"https://security.stackexchange.com/questions/17774/how-to-recover-a-lost-zip-file-password\" title=\"how to recover a lost zip file password\">security.stackexchange.com/questions/17774/&hellip;</a> is true? How do you (and other community members) know it isn&#39;t for their own nefariuos purposes?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500412728, "post_id": 45175416, "comment_id": 77323079, "body": "@AvdnhracNTAd9ex You don&#39;t have <i>any</i> backstory. If you can come up with a somewhat convincing one it might suffice even if not very true."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500413356, "post_id": 45175416, "comment_id": 77323397, "body": "@EugeneSh. See update to post"}, {"owner": {"reputation": 464, "user_id": 6688314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b954d32dda14a7228f24cfa213f2b926?s=128&d=identicon&r=PG&f=1", "display_name": "flerb", "link": "https://stackoverflow.com/users/6688314/flerb"}, "edited": false, "score": 0, "creation_date": 1500413563, "post_id": 45175416, "comment_id": 77323488, "body": "There&#39;s no good reason to answer this question. It&#39;s not like you&#39;re writing malware for the sake of learning about it, or learning pentesting, or hacking for the sake of fixing bugs. If you were out for knowledge then you would figure it out on your own."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 464, "user_id": 6688314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b954d32dda14a7228f24cfa213f2b926?s=128&d=identicon&r=PG&f=1", "display_name": "flerb", "link": "https://stackoverflow.com/users/6688314/flerb"}, "edited": false, "score": 0, "creation_date": 1500413767, "post_id": 45175416, "comment_id": 77323565, "body": "@Darren I know I can just fire up a VM to compile, but it seems like overkill for such a simple thing"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1500422184, "post_id": 45175416, "comment_id": 77326177, "body": "If anyone doesn&#39;t like this question I would recommend they close it and go onto another question"}], "answers": [{"comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1500406609, "post_id": 45175511, "comment_id": 77319655, "body": "-Qn is the default, and does not remove the .comment section that contains &quot;Ubuntu&quot;. Try <code>strip -R .comment thebinary</code>."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500406960, "post_id": 45175511, "comment_id": 77319877, "body": "I think the documentation is wrong, see the handling of <code>flag_no_ident</code> in <code>toplev.c</code>."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500407500, "post_id": 45175511, "comment_id": 77320219, "body": "On a trivial example, I am getting the same binary whether I use -Qn, -Qy or nothing..."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500407650, "post_id": 45175511, "comment_id": 77320295, "body": "Interesting. What&#39;s your target? I see the <code>.ident</code> suppression with <code>-Qn</code> on Debian and Fedora."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500407864, "post_id": 45175511, "comment_id": 77320419, "body": "Debian testing, compiling <code>int main(){}</code> with the system gcc: <code>gcc m.c -Qn</code> (or -Qy or nothing) and checking the md5sum of a.out."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500408056, "post_id": 45175511, "comment_id": 77320532, "body": "I just tried <code>gcc-7 -Qn -O2 -S -o- -x c - &lt; &#47;dev&#47;null | grep ident</code> with current Debian sid (amd64), and it does not show any output for me."}, {"owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1500410527, "post_id": 45175511, "comment_id": 77321928, "body": "@MarcGlisse also getting the same binary here"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1500406253, "creation_date": 1500406253, "answer_id": 45175511, "question_id": 45175416, "link": "https://stackoverflow.com/questions/45175416/compile-without-extraneous-information/45175511#45175511", "title": "Compile without extraneous information", "body": "<p><code>GLIBC_2.2.5</code> and <code>/lib64/ld-linux-x86-64.so.2</code> needed for dynamic linking.  You can only get rid of that by using static linking (which is not recommended and barely supported on GNU/Linux).</p>\n\n<p>To remove the compiler identification, compile with the <code>-Qn</code> option.</p>\n"}], "owner": {"reputation": 27, "user_id": 8055533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63a8328957815d289018785d0fa65a4?s=128&d=identicon&r=PG&f=1", "display_name": "AvdnhracNTAd9ex", "link": "https://stackoverflow.com/users/8055533/avdnhracntad9ex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500413342, "creation_date": 1500405878, "last_edit_date": 1592644375, "question_id": 45175416, "link": "https://stackoverflow.com/questions/45175416/compile-without-extraneous-information", "title": "Compile without extraneous information", "body": "<p>Suppose I have a simple C file.</p>\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    printf(&quot;It works!\\n&quot;);\n    return 0;\n}\n</code></pre>\n<p><strong>How can I compile C source code so that the resulting binary does not leak information about me?</strong> ie. compile an anonymous binary</p>\n<p>If I simply use</p>\n<blockquote>\n<p>gcc main.c</p>\n</blockquote>\n<p>on the above source</p>\n<p>and then</p>\n<blockquote>\n<p>strings a.out</p>\n</blockquote>\n<p>I get output such as</p>\n<blockquote>\n<p>GLIBC_2.2.5</p>\n</blockquote>\n<p>Going through a.out in a text editor, I can find</p>\n<blockquote>\n<p>lib64/ld-linux-x86-64.so.2</p>\n<p>GCC: (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609</p>\n</blockquote>\n<p>Even after <code>strip</code>ing a.out, there is still a lot of identifying information in the binary</p>\n<p><strong>EDIT:</strong> <em>Reason for asking this question</em></p>\n<p>I am young and hoping to get a job in programming.</p>\n<p>However, I would like to create a &quot;test&quot; repo before creating a &quot;professional&quot; one.</p>\n<p>I know I can delete the &quot;test&quot;, but it may be archived somewhere (archive.org).</p>\n<p>I cannot make a &quot;private&quot; repository as it is a paid feature</p>\n<p>The &quot;test&quot; repo will contain code I have already written (but the style of code is not at par to how I now code), I would also like to compile and add it to a GitHub release.</p>\n<p>The &quot;pro&quot; repo will contain code I write from now on.</p>\n<p>I do not want employers to know the authors are the same person</p>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1500405861, "post_id": 45175408, "comment_id": 77319175, "body": "What do you think <code>^</code> does?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1500405951, "post_id": 45175408, "comment_id": 77319245, "body": "...&#39;cos it&#39;s not exponentation..."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1500405967, "post_id": 45175408, "comment_id": 77319263, "body": "Given the tags, you seem to understand what the <code>^</code> operator does. If so, you should learn about the representation of negative numbers in memory."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500405990, "post_id": 45175408, "comment_id": 77319279, "body": "1111111111111111111111111............."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1500405994, "post_id": 45175408, "comment_id": 77319282, "body": "<a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Two%27s_complement</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1500405998, "post_id": 45175408, "comment_id": 77319286, "body": "@viki It&#39;s XOR between two integers"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1500406029, "post_id": 45175408, "comment_id": 77319303, "body": "<code>x^-1</code> means <code>x xor -1</code> in both C &amp; C++ : <a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_arithmetic</a>"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1500410833, "post_id": 45175408, "comment_id": 77322089, "body": "If by <code>^-1</code> you meant &quot;multiplicative inverse&quot;, that was never going to work for even numbers anyway. There&#39;s no built-in operator for it in C sadly (nor most other languages)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1532012198, "post_id": 45175408, "comment_id": 89822710, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4843304/why-is-my-power-operator-not-working\">Why is my power operator (^) not working?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500494798, "post_id": 45175544, "comment_id": 77367257, "body": "I especially like the terseness of this post."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1500406733, "last_edit_date": 1500406733, "creation_date": 1500406383, "answer_id": 45175544, "question_id": 45175408, "link": "https://stackoverflow.com/questions/45175408/why-is-1-1-2-in-the-c-language/45175544#45175544", "title": "Why is 1^-1 = -2 in the C language?", "body": "<p>The <code>^</code> operator is the <code>XOR</code> or <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#XOR\" rel=\"nofollow noreferrer\">exclusive-or</a> operator in C.\nTo make it simple, consider 8-bit signed values, using the typical <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two's-complement encoding</a>. The <code>int</code> type will work in the same way.</p>\n\n<pre><code>Decimal   Binary\n      1   00000001\n     -1   11111111\n          -------- XOR\n     -2   11111110\n</code></pre>\n\n<p>Note that the unary operator <code>-</code> has higher precedence that the <code>^</code> bitwise operator.</p>\n"}, {"tags": [], "owner": {"reputation": 3150, "user_id": 5660689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f9eb32e09617459b856d14945faf70d?s=128&d=identicon&r=PG&f=1", "display_name": "nadavvadan", "link": "https://stackoverflow.com/users/5660689/nadavvadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1500406556, "creation_date": 1500406556, "answer_id": 45175601, "question_id": 45175408, "link": "https://stackoverflow.com/questions/45175408/why-is-1-1-2-in-the-c-language/45175601#45175601", "title": "Why is 1^-1 = -2 in the C language?", "body": "<p><strong>Signed</strong> <code>int</code>s use <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two's complement</a> in order to represent negative numbers. </p>\n\n<p><code>1</code> represented in int32:</p>\n\n<p><code>0000 0000 0000 0000 0000 0000 0000 0001</code></p>\n\n<p><code>-1</code> represented in int32, using Two's complement:</p>\n\n<p><code>1111 1111 1111 1111 1111 1111 1111 1111</code></p>\n\n<p><code>XOR</code>ing the two results in:</p>\n\n<p><code>1111 1111 1111 1111 1111 1111 1111 1110</code></p>\n\n<p>which, for signed <code>int</code>s, is <code>-2</code>.</p>\n\n<p>for unsigned ints, that would be <code>2^32 - 2</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 7167267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbdd91e7d804e6f14c7afb63856fc9a4?s=128&d=identicon&r=PG&f=1", "display_name": "viki", "link": "https://stackoverflow.com/users/7167267/viki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 45175601, "answer_count": 2, "score": -7, "last_activity_date": 1500406733, "creation_date": 1500405824, "last_edit_date": 1500405925, "question_id": 45175408, "link": "https://stackoverflow.com/questions/45175408/why-is-1-1-2-in-the-c-language", "title": "Why is 1^-1 = -2 in the C language?", "body": "<p>Can anyone explain how x^-1 is being executed in below code. I tried but no luck. I understood how x^1 is being executed. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) \n{\nint a=220, b=221, c=3;\nprintf(\"a^1= %d ,, a^-1= %d \\n\", a^1, a^-1);\nprintf(\"b^1= %d ,, b^-1= %d \\n\", b^1, b^-1);\nprintf(\"c^1= %d ,, c^-1= %d \\n\", c^1, c^-1);\nreturn 0;\n}\n/* output: a^1= 221 ,, a^-1= -221\n           b^1= 220 ,, b^-1= -222\n           c^1= 2   ,, c^-1= -4    */\n</code></pre>\n"}, {"tags": ["c", "gcc", "x86-64", "inline-assembly"], "comments": [{"owner": {"reputation": 1422, "user_id": 4759989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff4865147892ee9d56ae63dbaec75418?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4759989/david"}, "edited": false, "score": 2, "creation_date": 1500403532, "post_id": 45174634, "comment_id": 77317720, "body": "The result of most 32-bit instructions are zero-extended to the full 64-bit width. This is definitely true with the mov instruction, so &quot;mov eax, 60&quot; and &quot;mov rax, 60&quot; should have identical effect on the processor."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1500414714, "post_id": 45174634, "comment_id": 77323984, "body": "Beyond the other comments and answer. I&#39;m assuming that you are compiling with an optimization level above <code>-O0</code>. You&#39;d likely find that at optimization level <code>-O0</code> that <i>RAX</i> is likely used. When optimizations are on the compiler is likely using the fact that when the destination of an operation is a 32-bit register the upper 32-bits become 0. I bet if you did an experiment where you called <code>syscall(0x6060606060606060, 0x7fffffffffffffff);</code> that the full registers <i>RAX</i> and <i>RDX</i> would be used since the values exceed what can be represented in 32-bits."}], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 8107430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd1b232ac626ed2bfa9693642d402d8?s=128&d=identicon&r=PG", "display_name": "Eduardo Jos&#233; G&#243;mez Hern&#225;ndez", "link": "https://stackoverflow.com/users/8107430/eduardo-jos%c3%a9-g%c3%b3mez-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1500403629, "post_id": 45174726, "comment_id": 77317791, "body": "I know, but I want to force gcc to put <code>mov rax, 60</code>"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1500404193, "post_id": 45174726, "comment_id": 77318184, "body": "Why? This is exactly equivalent."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 98, "user_id": 8107430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd1b232ac626ed2bfa9693642d402d8?s=128&d=identicon&r=PG", "display_name": "Eduardo Jos&#233; G&#243;mez Hern&#225;ndez", "link": "https://stackoverflow.com/users/8107430/eduardo-jos%c3%a9-g%c3%b3mez-hern%c3%a1ndez"}, "edited": false, "score": 1, "creation_date": 1500405152, "post_id": 45174726, "comment_id": 77318771, "body": "@OdnetninI I don&#39;t think gcc emits this instruction at all."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1500415321, "post_id": 45174726, "comment_id": 77324219, "body": "Just a comment to anyone reading this, the inline assembly code is using intel syntax (not default) so if one wants to use this sample they&#39;d probably want to consider passing  <code>-masm=intel</code> to <i>GCC</i>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 98, "user_id": 8107430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd1b232ac626ed2bfa9693642d402d8?s=128&d=identicon&r=PG", "display_name": "Eduardo Jos&#233; G&#243;mez Hern&#225;ndez", "link": "https://stackoverflow.com/users/8107430/eduardo-jos%c3%a9-g%c3%b3mez-hern%c3%a1ndez"}, "edited": false, "score": 0, "creation_date": 1500519933, "post_id": 45174726, "comment_id": 77375407, "body": "@OdnetninI: Some assemblers (e.g. NASM) will even optimize <code>mov rax, 60</code> to <code>mov eax, 60</code> for you, because they have literally identical effects on the architectural state (except on RIP because taking 2 more bytes).  YASM won&#39;t, and neither will GNU <code>as</code>, though."}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 9, "last_activity_date": 1500463413, "last_edit_date": 1500463413, "creation_date": 1500403417, "answer_id": 45174726, "question_id": 45174634, "link": "https://stackoverflow.com/questions/45174634/cant-force-the-use-of-64-bit-registers-in-gcc-inline-assembly/45174726#45174726", "title": "Can&#39;t force the use of 64-bit registers in GCC inline assembly", "body": "<p>This actually sets the RAX register to 60:</p>\n\n<pre><code>mov eax, 60\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/11177137/why-do-most-x64-instructions-zero-the-upper-part-of-a-32-bit-register\">Writing to EAX always clears the upper 32-bit half of the 64-bit register</a>.  This is not like AH and AL, where writes preserve the rest of the register.</p>\n\n<p>If you absolutely want a move to RAX, you need to use something like this:</p>\n\n<pre><code>static inline __attribute__ ((always_inline)) void\nsyscall(uint64_t arg1, uint64_t arg2)\n{\n   __asm__(\"mov rax, %0; syscall\" : : \"i\" (arg1), \"D\" (arg2) : \"rax\");\n}\n</code></pre>\n\n<p>Note that <code>gas</code> will still assemble this as a 32-bit immediate move.</p>\n"}], "owner": {"reputation": 98, "user_id": 8107430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd1b232ac626ed2bfa9693642d402d8?s=128&d=identicon&r=PG", "display_name": "Eduardo Jos&#233; G&#243;mez Hern&#225;ndez", "link": "https://stackoverflow.com/users/8107430/eduardo-jos%c3%a9-g%c3%b3mez-hern%c3%a1ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "accepted_answer_id": 45174726, "answer_count": 1, "score": 5, "last_activity_date": 1500463535, "creation_date": 1500403106, "last_edit_date": 1500463535, "question_id": 45174634, "link": "https://stackoverflow.com/questions/45174634/cant-force-the-use-of-64-bit-registers-in-gcc-inline-assembly", "title": "Can&#39;t force the use of 64-bit registers in GCC inline assembly", "body": "<p>I'm trying to make some things with GCC Inline Assembly, in this case, make a Syscall, but I want to force use of 64bit registers (rax, rdi, rsi, ...) instead of 32bit ones (eax, edi, ...), but I tried a lot of ways, and nothing.</p>\n\n<pre><code>void syscall(uint64_t arg1, uint64_t arg2) {\n   // arg1 -&gt; rax        arg2 -&gt; rdi\n   __asm__(\"syscall\" : : \"a\" (arg1), \"D\" (arg2));\n}\n</code></pre>\n\n<p>When I compile that I get:</p>\n\n<pre><code>mov eax, 60\nsyscall\n</code></pre>\n\n<p>I'm in a function, so \"edi\" is being get from arguments, but like you can see is \"eax\", I want to use rax.</p>\n\n<p>How can I force 64bit registers instead of 32bit ones?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1500403528, "post_id": 45174616, "comment_id": 77317719, "body": "Undefined behaviour..."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1500403690, "post_id": 45174616, "comment_id": 77317837, "body": "Also, make sure that the <code>t1</code> was joined before the output from thread2 came?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1500404216, "post_id": 45174616, "comment_id": 77318197, "body": "Just because the code is wrong doesn&#39;t mean that it has to crash.  It may crash; it doesn&#39;t have to crash.  You could get various forms of subtle or not so subtle corruption."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1500406593, "post_id": 45174616, "comment_id": 77319645, "body": "Indentation/formatting:("}, {"owner": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "edited": false, "score": 0, "creation_date": 1500528339, "post_id": 45174616, "comment_id": 77378033, "body": "So the conclusion is that the behavior is undefined. If I make &#39;data&#39; static or declare it globally, it will increment to 10 and terminate. Thanks for the help everyone."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "edited": false, "score": 0, "creation_date": 1500438507, "post_id": 45174812, "comment_id": 77330045, "body": "Yes glibc. So it keeps the cache till program termination?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "edited": false, "score": 0, "creation_date": 1500454406, "post_id": 45174812, "comment_id": 77338746, "body": "@Sreena_th_read, no certainly not systematically. If the behavior of a program is undefined, basically anything can happen. In particular, the program may not report an error for all your tests, and then crunch the hard disk of your customer."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "edited": false, "score": 0, "creation_date": 1500454568, "post_id": 45174812, "comment_id": 77338869, "body": "@Sreena_th_read, the thread stack cache is of a fixed size. The stack can be reused for a new thread, and it can be deallocated if more threads are created and terminate."}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1500403718, "creation_date": 1500403718, "answer_id": 45174812, "question_id": 45174616, "link": "https://stackoverflow.com/questions/45174616/c-pthreads-passing-local-variable/45174812#45174812", "title": "C pthreads passing local variable", "body": "<p>This is undefined behavior. Is this with glibc? There is usually no segmentation fault because glibc keeps a cache of thread stacks, so the memory is not immediately deallocated after thread exit.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "edited": false, "score": 0, "creation_date": 1500438385, "post_id": 45175466, "comment_id": 77330004, "body": "Hi, I changed it to :         if(data &gt; 5)         {                 pthread_mutex_unlock(&amp;mtx);                 pthread_exit(0);         }  Still same output."}], "tags": [], "owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "is_accepted": false, "score": 0, "last_activity_date": 1500406067, "creation_date": 1500406067, "answer_id": 45175466, "question_id": 45174616, "link": "https://stackoverflow.com/questions/45174616/c-pthreads-passing-local-variable/45175466#45175466", "title": "C pthreads passing local variable", "body": "<p>When data == 6, the thread1 exits, but does not unlock the mutex.\nThe thread2 remains blocked, waiting for locking the mutex.\nSo it does not seg-fault. It just deadlocks.</p>\n"}], "owner": {"reputation": 49, "user_id": 8327210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fbe5fb3abdf4e91da633fe26e84a61?s=128&d=identicon&r=PG&f=1", "display_name": "Sreena_th_read", "link": "https://stackoverflow.com/users/8327210/sreena-th-read"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500406067, "creation_date": 1500403051, "question_id": 45174616, "link": "https://stackoverflow.com/questions/45174616/c-pthreads-passing-local-variable", "title": "C pthreads passing local variable", "body": "<p>I have written this code to understand how local variables work in a thread. I am passing address of local variable to a thread while creating it from another thread. Once the original thread exits,local variable also gets destroyed as stack frame is destroyed. So what happens in the new thread? Why no segmentation fault?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n\npthread_t t1,t2;\npthread_mutex_t mtx=PTHREAD_MUTEX_INITIALIZER;\n\nvoid* thr_fun2(void *p);\n\n\nvoid* thr_fun1(void *p)\n{\n    int data = 0;\n    sleep(1);\n    pthread_create(&amp;t2,0,thr_fun2,&amp;data);\n    printf(\"Thread 1 entered....\\n\");\n    while(1)\n    {\n    pthread_mutex_lock(&amp;mtx);\n    if(data &gt; 5)\n        pthread_exit(0);\n    printf(\"thread1:data =%d\\n \",data);\n    data++;\n    sleep(1);\n    printf(\"thread1:data(inc) =%d\\n \",data);\n    pthread_mutex_unlock(&amp;mtx);\n    sleep(1);\n    }\n\n\n}\n\n\nvoid* thr_fun2(void *p)\n{\n    sleep(1);\n    printf(\"Thread 2 entered....\\n\");\n    while(*(int *)p &lt; 10)\n    {\n    pthread_mutex_lock(&amp;mtx);\n    printf(\"thread2:data =%d\\n \",*(int *)p);\n    (*(int *)p)++;\n    sleep(1);\n    printf(\"thread2:data(inc) =%d\\n \",*(int *)p);\n    pthread_mutex_unlock(&amp;mtx);\n    sleep(1);\n    }\n}\n\nmain()\n{\n    pthread_mutex_init(&amp;mtx,0);\n    pthread_create(&amp;t1,0,thr_fun1,0);\n    pthread_join(t1,0);\n    pthread_join(t2,0);\n//  printf(\"Back in main fun \\n\");\n    pthread_mutex_destroy(&amp;mtx);\n    pthread_exit(0);\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Thread 1 entered....\nthread1:data =0\nthread1:data(inc) =1\nThread 2 entered....\nthread2:data =1\nthread2:data(inc) =2\nthread1:data =2\nthread1:data(inc) =3\nthread2:data =3\nthread2:data(inc) =4\nthread1:data =4\nthread1:data(inc) =5\nthread2:data =5\nthread2:data(inc) =6\n</code></pre>\n"}, {"tags": ["c", "linux", "makefile", "cplex"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1500404720, "post_id": 45174587, "comment_id": 77318496, "body": "You may need to add the directory that contains the library to your <code>LD_LIBRARY_PATH</code> environment variable - <code>export LD_LIBRARY_PATH=&#47;parent&#47;dir&#47;of&#47;library:$LD_LIBRARY_PATH</code>."}, {"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1500404805, "post_id": 45174587, "comment_id": 77318559, "body": "Can you run <code>ldd &#47;opt&#47;ibm&#47;ILOG&#47;CPLEX_Studio1263&#47;cplex&#47;lib&#47;x86-64_linux&#47;static&zwnj;&#8203;_pic&#47;*cplex*</code> and post the output?"}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "reply_to_user": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1500412076, "post_id": 45174587, "comment_id": 77322730, "body": "@kichik <code>&gt;ldd &#47;opt&#47;ibm&#47;ILOG&#47;CPLEX_Studio1263&#47;cplex&#47;lib&#47;x86-64_linux&#47;static&zwnj;&#8203;\u200c\u200b_pic&#47;*cplex* ldd: &#47;opt&#47;ibm&#47;ILOG&#47;CPLEX_Studio1263&#47;cplex&#47;lib&#47;x86-64_linux&#47;static&zwnj;&#8203;\u200c\u200b_pic&#47;*cplex*: No such file or directory</code>"}, {"owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "edited": false, "score": 0, "creation_date": 1500486317, "post_id": 45174587, "comment_id": 77362384, "body": "For CPLEX 12.7.1 (currently the latest version) and the C Callable Library (a static library), you need to link with <code>-lm -pthread</code> (<code>libgmp</code> is not a dependency). The issue you&#39;re having with <code>libgmp</code> is <b>not</b> CPLEX related."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500403684, "post_id": 45174640, "comment_id": 77317832, "body": "This is the error message: <code>gcc -O2 -Wall -fPIC -fexceptions -DNDEBUG  -c code.c -o code.o -I&#47;opt&#47;ibm&#47;ILOG&#47;CPLEX_Studio1263&#47;cplex&#47;include&#47; &#47;opt&#47;local&#47;bin&#47;..&#47;libexec&#47;gcc&#47;x86_64-unknown-linux-gnu&#47;4.8.0&zwnj;&#8203;&#47;cc1: error while loading shared libraries: libgmp.so.3: cannot open shared object file: No such file or directory</code>"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500403793, "post_id": 45174640, "comment_id": 77317909, "body": "Interesting. Does this mean that <code>gcc</code> is not the system compiler, but something from <code>&#47;opt&#47;local&#47;bin</code>? Have you changed the <code>PATH</code> environment variable?"}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500404336, "post_id": 45174640, "comment_id": 77318261, "body": "All I have changed was <code>llvm-gcc</code> to <code>gcc</code> and the address to cplex."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500404606, "post_id": 45174640, "comment_id": 77318426, "body": "The question is why the <code>gcc</code> command tries to run the C compiler from the directory <code>&#47;opt&#47;local&#47;bin&#47;..&#47;libexec&#47;gcc&#47;x86_64-unknown-linux-gnu&#47;4.8.0&zwnj;&#8203;\u200c</code>. Probably you should try <code>&#47;usr&#47;bin&#47;gcc</code> instead of <code>gcc</code>. Alternatively, upgrade to a newer version of IBM CPLEX which matches your operating system."}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500409601, "post_id": 45174640, "comment_id": 77321423, "body": "Changing <code>gcc</code> to <code>&#47;usr&#47;bin&#47;gcc</code> changed the error message to <code>&#47;usr&#47;bin&#47;ld: cannot find -lm &#47;usr&#47;bin&#47;ld: cannot find -lpthread &#47;usr&#47;bin&#47;ld: cannot find -lgcc_s &#47;usr&#47;bin&#47;ld: cannot find -lc &#47;usr&#47;bin&#47;ld: cannot find -lgcc_s collect2: error: ld returned 1 exit status</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500453836, "post_id": 45174640, "comment_id": 77338320, "body": "@Iman, how did you changed <code>llvm-gcc</code> to <code>gcc</code>?  Did you deinstall <code>gcc</code> first? are both compilers running on your system?  Why do you have binaries requesting two different versions of the same library running on the same system.  Are you getting packages from two different distributions? (this is common in debian/ubuntu users, and leads to these kind of problems)"}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1500477627, "post_id": 45174640, "comment_id": 77356962, "body": "@LuisColorado As I mentioned in my original question, I received this code from someone else. They had specified <code>llvm-gcc</code> as compiler in their Makefile. Since <code>llvm-gcc</code> is not available on the server I am using, I simply replaced it by <code>gcc</code> in the Makefile."}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500477983, "post_id": 45174640, "comment_id": 77357236, "body": "@FlorianWeimer, I&#39;m trying to understand your EDIT. This code as well as its Makefile are old, while the version of CPLEX installed on the server is the newest. I use CPLEX with my C++ code with no problem, but this code is in C and uses many callables from CPLEX which are only defined in C, so I cannot transform it to C++."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500637392, "post_id": 45174640, "comment_id": 77439065, "body": "@Iman, I&#39;m afraid you have done more than <i>changing the compiler name in the <code>Makefile</code></i>.  The lack of a shared object version is a consequence of doing nasty things in the system (things like partially installing a program, without providing or solving all its dependencies, ignoring the warnings given by the package management system or worse, having several system repositories, based on different versions of the system ---in this case, a dependency to version 3 of <code>libgmp.so</code>)"}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1500451364, "last_edit_date": 1500451364, "creation_date": 1500403162, "answer_id": 45174640, "question_id": 45174587, "link": "https://stackoverflow.com/questions/45174587/makefile-for-c-code/45174640#45174640", "title": "Makefile for C code", "body": "<p>You need to rebuild whatever program or library uses <code>libgmp.so.3</code> from source code.  Could you provide the exact command run by <code>make</code> and the error message it produces?</p>\n\n<p><strong>EDIT</strong> The problem here is that the system has installed a version of the IBM CPLEX software which comes with its own GCC binary, and that GCC binary uses <code>libgmp.so.3</code>.  The easiest way to fix this would be to upgrade the CPLEX software to a version which supports the operating system being used, or use the software on the operating system for which it was written (i.e., something really old that actually ships <code>libgmp.so.3</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500451490, "post_id": 45184218, "comment_id": 77336782, "body": "The distribution version of GMP is to new for a build tool, so that it fails to run. A <code>-dev</code> package is not going to fix that. You need a compatible operating system version, or perhaps a compat package."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500451950, "post_id": 45184218, "comment_id": 77337054, "body": "The error says <code>error while loading shared libraries</code> and this is a runtime error... The PO has not linked with the system library, so the runtime and the library required mismatch.  But as we have an executable at all, I have to assume the linking has succeeded.  We only need to install the library in the proper place or use <code>LD_LIBRARY_PATH</code> to specify where to load it from."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500452990, "post_id": 45184218, "comment_id": 77337724, "body": "@FlorianWeimer, you are right in your assertion, and I had quickly read the question and issued an answer.  I&#39;ve edited my answer to cope with the runtime error got from the system loader and giving some recommendations to follow.  I expect this will be the right way to go this time.  My apologies for directing the PO in the wrong direction."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500453290, "post_id": 45184218, "comment_id": 77337913, "body": "the key error message is in <a href=\"https://stackoverflow.com/questions/45174587/makefile-for-c-code/45184218?noredirect=1#comment77317832_45174640\">this comment</a>. They use a special, non-system GCC compiler which cannot run due to the missing library."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500453555, "post_id": 45184218, "comment_id": 77338128, "body": "Can I assume at least that ELF binaries are used and/or <code>binutils</code> to be able to <code>ldd(1)</code> something?  How do you know such things if you see the same information as I?  The problem anyway is a version mismatch in a shared object, and the PO has access to the program <code>Makefile</code>, so he has tried to build an executable or we are dealing with precompiled binaries?  Read my edition as it is now, please."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500454348, "post_id": 45184218, "comment_id": 77338705, "body": "@FlorianWeimer, are you downvoting all the answers to make yours to go upper in the list?  Should we all downvote yours to see where does it go?  Please, don&#39;t play downvoting just by downvoting."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1500454618, "post_id": 45184218, "comment_id": 77338904, "body": "your initial proposal to add an <code>-L</code> flag did not help in this situation."}, {"owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500477151, "post_id": 45184218, "comment_id": 77356594, "body": "@LuisColorado Thanks for the detailed answer, even though I might not be able to understand it all. First, I am using a server which means I almost have zero permission to make significant changes such as reinstalling or updating a package. I did not change the default compiler of the system. I simply replaced <code>llvm-gcc</code> in the makefile to <code>gcc</code>, as <code>gcc</code> is the only compiler available on this server. I don&#39;t believe the problem is coming from anywhere outside of the Makefile as I was able to build and run the same code on XCode which basically doesn&#39;t need the user to create a makefile."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "edited": false, "score": 0, "creation_date": 1500637662, "post_id": 45184218, "comment_id": 77439273, "body": "@Iman, sorry for my initial assumptions about your environment.  First, use a new system (or one on which you have complete control) to build your software.  Then test it there, and finaly, put it on the final server it is going to run.  This way you&#39;ll have whole control on what you do.  The final conclussion is that your build system is broken (probably the gcc compiler has been incorrectly upgraded to the clang compiler)  You need to put your error in knowledge of your system admin on the server, but I cannot help you more than I&#39;ve said yet.  Sorry."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1500454202, "last_edit_date": 1592644375, "creation_date": 1500450731, "answer_id": 45184218, "question_id": 45174587, "link": "https://stackoverflow.com/questions/45174587/makefile-for-c-code/45184218#45184218", "title": "Makefile for C code", "body": "<p>The most easy way it to install <code>libgmp-dev</code> package, from your linux distribution. GMP is a package library to do multiple precision calculations on large integers, which is probably needed by your program.  As you put in some comments, adding <code>-L/usr/lib64/libgmp.so.10</code> is an error, as <code>-L</code> option allows to add a <strong>directory</strong> to search for libraries, and not a specific library.</p>\n<p>If only the library is needed and no header file is missing in your compilation (this is something strange, but sometimes happen) then you can still link with only the <code>libgmp.so.10</code> object, but you have to do in a something nasty way.  Just add <code>/usr/lib64/libgmp.so.10</code> as an object file (not a library, with <code>-l</code> option) to your link command.</p>\n<h1>EDIT</h1>\n<p>From looking more closely your <code>Makefile</code> I see no reference to the <code>libgmp.so.3</code> library, so I only can assume this is a indirect reference from some other already compiled library that comes from outside with your package.  Just use</p>\n<pre><code>ldd lib&lt;nameOfLibrary&gt;.so.x.x\n</code></pre>\n<p>with all the libraries needed by your final executable, so see which shared objetc is the one that requests <code>libgmp.so.3</code> soname, and then recompile it, reinstall it, or use your system's libraries  <strong>ONLY</strong>, and not mesh anymore with libraries coming from another system.  For example you can try (this is an expensive command, but it will get the answer)</p>\n<pre><code>find / -name &quot;lib*.so.*&quot; -print | xargs ldd &gt; all_libs.lddout\n</code></pre>\n<p>and then find <code>all_libs.lddout</code> to see which library uses <code>libgmp.so.3</code> (this will be the outdated library)  You'll need to deinstall it or upgrade it, to be able to continue.</p>\n<p>Linux systems have a library version system that allows an executable to be able to load different versions of the same library and allow them to live together in the same system.  One of two: or you are able to locate the sources of version 3 of the shared <code>libgmp.so.3</code> library and install it on your system, or you'll need to update the libraries your program uses to be able to link with the <code>libgmp.so.10</code> already installed on your system.</p>\n<h1>2ND EDIT</h1>\n<p>As I see in the comments, you have changed the default compiler on your system by another coming possibly from other linux distribution (as your installed library is <code>libgmp.so.10</code> while the one <code>cc1</code> requests is <code>libgmp.so.3</code>, which is not installed on your system.</p>\n<p>Installing a different compiler from the one you have installed, and doing that without previously deinstalling the other compiler, can lead you to this kind of problems.</p>\n<p>The most reliable thing you can do is to reinstall the compiler from your distribution, or better, reinstall the whole linux system, as you have probably broken many things that will be emerging as you use your system.  There's very poor info on what you have done to go further in your problem.  Anyway, my recommendation is to not use the comment parts to add new information about your problem, just edit your question and add all those new information to it.</p>\n"}], "owner": {"reputation": 23, "user_id": 8327194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d536068efff2fbeccfddbb8ad692c24b?s=128&d=identicon&r=PG&f=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/8327194/iman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500454202, "creation_date": 1500402936, "last_edit_date": 1500403448, "question_id": 45174587, "link": "https://stackoverflow.com/questions/45174587/makefile-for-c-code", "title": "Makefile for C code", "body": "<p>I inherited a code which has a makefile, but so far I was unable to run it on a linux server. The main complain of the compiler is that it is unable to load <code>libgmp.so.3</code> : <code>error while loading shared libraries: libgmp.so.3</code>. I know that <code>libgmp.so.10</code> exists on this server, but I was wondering which part of the makefile needs to be changed so the compiler looks for <code>libgmp.so.10</code> rather than <code>libgmp.so.3</code>.</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>OPTFLAG         = -O2 -Wall -fPIC -fexceptions -DNDEBUG \nLDFLAGS     = -O2 -Wl,-no_compact_unwind -DNDEBUG -lm -pthread\n\nCOMPILER        = gcc ${OPTFLAG}\nLINKER          = gcc ${LDFLAGS}\n\n# CPLEX directory \nCPLEX_HOME     = /opt/ibm/ILOG/CPLEX_Studio1263/cplex\nCPLEX_INC      = ${CPLEX_HOME}/include/\nCPLEX_LIB      = ${CPLEX_HOME}/lib/x86-64_linux/static_pic/ -lcplex\n\n# Compile the main file\ncode: code.c\n    ${COMPILER} -c code.c -o code.o -I${CPLEX_INC}\n    ${LINKER} -o code code.o -L${CPLEX_LIB}     \n\nclean::\n    rm -f *.o\n    rm -f ${LIB}/*.o\n    rm -f *~\n    rm -f ${SRC}/*~ ${INCLUDE}/*~\n</code></pre>\n"}, {"tags": ["c", "arm", "gdb", "raspbian"], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 1, "last_activity_date": 1500405120, "creation_date": 1500405120, "answer_id": 45175235, "question_id": 45174406, "link": "https://stackoverflow.com/questions/45174406/gdb-on-raspbian-libc-function-names/45175235#45175235", "title": "Gdb on raspbian libc function names", "body": "<p>I am not sure, but I think address resolution for PLT stubs is just not implemented in upstream gdb/BFD.  I found this discussion:</p>\n\n<ul>\n<li><a href=\"https://groups.google.com/forum/#!topic/android-ndk/LnweJJORhZI\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/#!topic/android-ndk/LnweJJORhZI</a></li>\n</ul>\n\n<p>And the patch has not been applied.  Perhaps Ubuntu is carrying it as a private patch?</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 836679, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4130b4781125806555a92a2915cb4674?s=128&d=identicon&r=PG", "display_name": "Timo89", "link": "https://stackoverflow.com/users/836679/timo89"}, "is_accepted": true, "score": 0, "last_activity_date": 1500531083, "creation_date": 1500531083, "answer_id": 45206513, "question_id": 45174406, "link": "https://stackoverflow.com/questions/45174406/gdb-on-raspbian-libc-function-names/45206513#45206513", "title": "Gdb on raspbian libc function names", "body": "<p>Ubuntu 16.04 LTS seems to work ok - <a href=\"https://wiki.ubuntu.com/ARM/RaspberryPi\" rel=\"nofollow noreferrer\">https://wiki.ubuntu.com/ARM/RaspberryPi</a></p>\n"}], "owner": {"reputation": 361, "user_id": 836679, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4130b4781125806555a92a2915cb4674?s=128&d=identicon&r=PG", "display_name": "Timo89", "link": "https://stackoverflow.com/users/836679/timo89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 45206513, "answer_count": 2, "score": 0, "last_activity_date": 1500531083, "creation_date": 1500402263, "question_id": 45174406, "link": "https://stackoverflow.com/questions/45174406/gdb-on-raspbian-libc-function-names", "title": "Gdb on raspbian libc function names", "body": "<p>I'm having some issues when using gdb on a raspberry pi 3</p>\n\n<p>On raspbian it doesn't show libc function names.</p>\n\n<p>If I define a function the disassembly shows <code>bl my_func</code>.</p>\n\n<p>For libc functions - <code>puts(\"test\")</code> - it shows something like <code>bl  0x12345</code></p>\n\n<p>I have the latest version of libc6-dbg installed.</p>\n\n<p>Should I install other libraries? Am I doing something wrong?</p>\n\n<p>As a side note, I've also tried ubuntu mate - gdb shows proper function names for libc functions, however it crashes with a segfault when running the binary; I found this thread regarding this issue <a href=\"https://bugs.launchpad.net/gdb/+bug/1576432\" rel=\"nofollow noreferrer\">https://bugs.launchpad.net/gdb/+bug/1576432</a></p>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1500401617, "post_id": 45174158, "comment_id": 77316611, "body": "How can this be solved w/o knowing the dimensions of the wall?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500401618, "post_id": 45174158, "comment_id": 77316612, "body": "It would take a C program very little time to run a loop to work out the best arrangement. Number of videos in each row from <code>1</code> to <code>n</code>."}], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1500404501, "last_edit_date": 1500404501, "creation_date": 1500402219, "answer_id": 45174396, "question_id": 45174158, "link": "https://stackoverflow.com/questions/45174158/find-size-of-rectangles-to-fill-area/45174396#45174396", "title": "Find size of rectangles to fill area", "body": "<p>As far as I understand, you want to place <code>n</code> rectangles with fixed <code>C=W/H</code> ratio on the wall with given <code>Width</code> and <code>Height</code></p>\n\n<p>Let rectangle height is h (unknown yet), width is w = C * h</p>\n\n<p>Every row of grid contains</p>\n\n<pre><code> nr =  Floor(Width / (C * h))   // rounding down\n</code></pre>\n\n<p>Every column contains</p>\n\n<pre><code>nc = Floor(Height / h)\n</code></pre>\n\n<p>Write inequality </p>\n\n<pre><code>n &lt;= nc * nr\nn &lt;=  Floor(Width / (C * h)) * Floor(Height / h)\n</code></pre>\n\n<p>and solve it (find maximal possible <code>h</code> value)  for unknown h</p>\n\n<p>For real values of parameters <code>h</code> might be found getting initial approximate value: </p>\n\n<pre><code> h0 = Ceil(Sqrt(Width * Height / (n * C)))\n</code></pre>\n\n<p>and decrementing h value until inequality  becomes true</p>\n"}], "owner": {"reputation": 2004, "user_id": 1433300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6cfdd88a9d84181db46b91540bbd8eb6?s=128&d=identicon&r=PG", "display_name": "B&#236;nh Nguy&#234;n", "link": "https://stackoverflow.com/users/1433300/b%c3%acnh-nguy%c3%aan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 45174396, "answer_count": 1, "score": -4, "last_activity_date": 1500404501, "creation_date": 1500401327, "question_id": 45174158, "link": "https://stackoverflow.com/questions/45174158/find-size-of-rectangles-to-fill-area", "title": "Find size of rectangles to fill area", "body": "<p>I got trouble need your help:</p>\n\n<p>I'm working on a program that shows <code>n</code> videos in tiling mode (aka, videos wall, <code>c</code> columns and <code>r</code> rows). The <code>n</code> is arbitrary, the videos have same size (<code>W x H</code>) and we have <code>W / H</code> ratio, the size of wall is fixed, how can I get best set of <code>c</code>, <code>r</code>, <code>W</code> and <code>H</code> when <code>n</code> changes? The best set defined as: <code>W</code> and <code>H</code> is maximum values and videos fill maximum area of the wall.</p>\n\n<p>I have taken a look at Packing Problem but still can't solve my problem above, can someone help me this? Thank you very much!</p>\n"}, {"tags": ["c", "vb.net", "visual-studio", "devexpress", "devexpress-windows-ui"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2029255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71044865a72cc7e9779e760c8730d2f5?s=128&d=identicon&r=PG", "display_name": "ChrisGrahamUK", "link": "https://stackoverflow.com/users/2029255/chrisgrahamuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1500459547, "last_edit_date": 1500459547, "creation_date": 1500458365, "answer_id": 45187154, "question_id": 45174015, "link": "https://stackoverflow.com/questions/45174015/use-checkboxlist-in-devexpress-vb-net-assign-evaluate/45187154#45187154", "title": "Use CheckBoxList in DevExpress vb.net Assign &amp; Evaluate?", "body": "<p>This is the code we would use</p>\n\n<pre><code>        With clEmpresas.Properties\n            If .DataSource IsNot Nothing Then .DataSource = Nothing\n            .DataSource =  bdEmpresa \n            If .DataSource.rows.count = 0 Then Return Nothing 'no data to load\n            'get the names from the dataset, don't expect them to be specific names\n            .ValueMember = .DataSource.rows(0).Table.Columns(0).ColumnName\n            .DisplayMember = .DataSource.rows(0).Table.Columns(1).ColumnName\n\n            'Set the selected items, comma separated list of ids\n            If selectedIds &lt;&gt; \"\" Then\n                For i As Integer = 0 To .ItemCount - 1\n                    If Array.IndexOf(selectedIds.Split(\",\"), .GetItemValue(i).ToString) &gt;= 0 Then\n                        .SetItemChecked(i, True)\n                    End If\n                Next\n            End If\n\n        End With\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17169, "user_id": 770710, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8caf9cf7e8338ced407de12631fc7ae?s=128&d=identicon&r=PG", "display_name": "Niranjan Singh", "link": "https://stackoverflow.com/users/770710/niranjan-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500622602, "creation_date": 1500622602, "answer_id": 45231765, "question_id": 45174015, "link": "https://stackoverflow.com/questions/45174015/use-checkboxlist-in-devexpress-vb-net-assign-evaluate/45231765#45231765", "title": "Use CheckBoxList in DevExpress vb.net Assign &amp; Evaluate?", "body": "<p>You can use the <a href=\"https://documentation.devexpress.com/WindowsForms/DevExpress.XtraEditors.CheckedListBoxControl.members\" rel=\"nofollow noreferrer\">CheckMember</a> property to let the control automatically check the selection values from your assigned data source:\ne.g.</p>\n\n<pre><code>clEmpresas.DataSource = bdEmpresa\nclEmpresas.DisplayMember = \"Nombre\"\nclEmpresas.ValueMember = \"idEmpresa\"\nclEmpresas.CheckMember= \"Acceso\"\n</code></pre>\n\n<p>After that you can use the <a href=\"https://documentation.devexpress.com/WindowsForms/DevExpress.XtraEditors.BaseCheckedListBoxControl.CheckedItems.property\" rel=\"nofollow noreferrer\">CheckedItems</a> property to get the selected items if user changes selection in the control. see below example:</p>\n\n<pre><code>Private Sub SimpleButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SimpleButton1.Click\n        For Each item As DevExpress.XtraEditors.Controls.CheckedListBoxItem In CheckedListBoxControl1.CheckedItems\n            MessageBox.Show(item.Value.ToString())\n        Next\n    End Sub\n</code></pre>\n\n<p>Refer these:<br>\n<a href=\"https://www.devexpress.com/Support/Center/Question/Details/Q219009/get-the-selected-items-from-a-checkedlistbox\" rel=\"nofollow noreferrer\">get the selected items from a checkedlistbox</a><br>\n<a href=\"https://www.devexpress.com/Support/Center/Example/Details/E722/how-to-get-checked-rows-of-a-data-bound-checkedlistboxcontrol\" rel=\"nofollow noreferrer\">How to get checked rows of a data-bound CheckedListBoxControl</a><br>\n<a href=\"https://stackoverflow.com/questions/9003193/get-item-index-from-databound-devexpress-checkedlistboxcontrol\">Get item index from databound DevExpress CheckedListBoxControl</a></p>\n"}], "owner": {"reputation": 15, "user_id": 7115618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23bcd9ecbe4a45920c702d9882c195f?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Rodriguez", "link": "https://stackoverflow.com/users/7115618/miguel-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 45187154, "answer_count": 2, "score": 0, "last_activity_date": 1500622602, "creation_date": 1500400817, "question_id": 45174015, "link": "https://stackoverflow.com/questions/45174015/use-checkboxlist-in-devexpress-vb-net-assign-evaluate", "title": "Use CheckBoxList in DevExpress vb.net Assign &amp; Evaluate?", "body": "<p>Hello my code example is :</p>\n\n<p>/*\nbdEmpresa (BindingSource) \nContains:</p>\n\n<p>selet idEmpresa,Nombre,Acceso from Empresa</p>\n\n<p>Result </p>\n\n<p>1, Empresa1,true </p>\n\n<p>2, Empresa2,false</p>\n\n<p>3, Empresa2,true</p>\n\n<p>*/</p>\n\n<p>clEmpresas.DataSource = bdEmpresa </p>\n\n<p>clEmpresas.DisplayMember = ? (Nombre)</p>\n\n<p>clEmpresas.ValueMember = ? (Acceso)</p>\n"}, {"tags": ["c", "struct", "assignment-operator"], "answers": [{"comments": [{"owner": {"reputation": 2763, "user_id": 3728573, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/85cbc54f49bd3d6453e69c834ba21071?s=128&d=identicon&r=PG&f=1", "display_name": "Alex H", "link": "https://stackoverflow.com/users/3728573/alex-h"}, "edited": false, "score": 0, "creation_date": 1500401673, "post_id": 45174033, "comment_id": 77316655, "body": "Can you explain &quot;Identifiers bound to arrays&quot; part more?"}], "tags": [], "owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "is_accepted": false, "score": 0, "last_activity_date": 1500401425, "last_edit_date": 1500401425, "creation_date": 1500400870, "answer_id": 45174033, "question_id": 45173971, "link": "https://stackoverflow.com/questions/45173971/how-are-c-structs-with-arrays-returned/45174033#45174033", "title": "How are C structs with arrays returned?", "body": "<p>Identifiers bound to arrays may be interpreted as pointers, but that doesn't mean that the array variables are pointers.</p>\n\n<p>The storage for the array is part of the memory layout of the struct itself. The same way as arrays declared on the stack are on the stack itself.</p>\n\n<p>You can test this by yourself by checking <code>sizeof(Matrix)</code>.</p>\n\n<p>So in short:</p>\n\n<blockquote>\n  <p>Does the compiler allocate the memory for myMatrix then copy each Entry element of the array in the Matrix struct returned by emptyMatrix()?</p>\n</blockquote>\n\n<p>Yes</p>\n"}, {"comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1500401087, "post_id": 45174062, "comment_id": 77316274, "body": "That&#39;s just wrong, there is not memory allocation involved here. Maybe you meant &quot;created&quot;?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1500401168, "post_id": 45174062, "comment_id": 77316337, "body": "@Frank; Memory will be allocated but at compile time (not dynamic memory allocation)."}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1500401328, "post_id": 45174062, "comment_id": 77316434, "body": "But <code>Matrix</code> is treated as a single continuous block of memory. There is a single allocation for the root struct, unless you count figuring out the size of <code>Matrix</code> as &#39;allocation&#39;, but that&#39;s a stretch IMO."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1500401556, "post_id": 45174062, "comment_id": 77316578, "body": "@Frank; For every object compiler allocates memory. Note that I am talking about the memory allocation at compile time not at the run time."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1500401778, "last_edit_date": 1500401778, "creation_date": 1500400978, "answer_id": 45174062, "question_id": 45173971, "link": "https://stackoverflow.com/questions/45173971/how-are-c-structs-with-arrays-returned/45174062#45174062", "title": "How are C structs with arrays returned?", "body": "<p><code>Matrix</code> is a data type <code>struct struct {Entry grid[3][3];}</code>. For every object of the type <code>Metrix</code> memory of size <code>Entry grid[3][3]</code> will be allocated.<br>\nFunction <code>emptyMatrix</code> is returning an object of type <code>Matrix</code> and the object will be returned by value just like any other object.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1500402182, "creation_date": 1500402182, "answer_id": 45174386, "question_id": 45173971, "link": "https://stackoverflow.com/questions/45173971/how-are-c-structs-with-arrays-returned/45174386#45174386", "title": "How are C structs with arrays returned?", "body": "<p>Each instance of <code>Matrix</code> will contain a 3x3 <em>array</em> of <code>Entry</code>.  When you assign one instance of <code>Matrix</code> to another, the contents of the source matrix will be copied to the destination matrix.  </p>\n\n<p>Arrays are not pointers.  Array <em>expressions</em> will \"decay\" to pointers if the expression is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is not a string literal used to initialize a character array in a declaration.  </p>\n\n<p>For example, if you had a function call like</p>\n\n<pre><code>printMatrix( myMatrix.grid );\n</code></pre>\n\n<p>the <em>expression</em> <code>myMatrix.grid</code> has type \"3-element array of 3-element array of <code>Entry</code>\"; since it's not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, it \"decays\" to an expression of type \"pointer to 3-element array of <code>Entry</code>\" (<code>Entry (*)[3]</code>) and the value of the expression is the address of the first element of <code>grid</code> (which will also be the address of the whole <code>Matrix</code> instance).  </p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1500409779, "creation_date": 1500409779, "answer_id": 45176496, "question_id": 45173971, "link": "https://stackoverflow.com/questions/45173971/how-are-c-structs-with-arrays-returned/45176496#45176496", "title": "How are C structs with arrays returned?", "body": "<p>The ABI for each environment defines how structures are passed and returned by value. A common choice is this:</p>\n\n<ul>\n<li><p>small structures, up to the size of 2 or 4 registers are returned in registers.</p></li>\n<li><p>for larger objects, the caller allocates space on its stack frame for the return value and passes a pointer to the function.  When returning, the function copies whatever object is being returned into the space to which it received a pointer for the return value. That's it.  This simple method allows for recursive calls.</p></li>\n<li><p>the optimizer tries to minimize the amount of copying, especially if it can expand the function inline or if the returned value is stored into an object, as opposed to discarded or passed by value to another function.</p></li>\n</ul>\n\n<p>It does not matter if the structure has one or more member arrays.  The same method applies to unions as well.</p>\n"}], "owner": {"reputation": 2763, "user_id": 3728573, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/85cbc54f49bd3d6453e69c834ba21071?s=128&d=identicon&r=PG&f=1", "display_name": "Alex H", "link": "https://stackoverflow.com/users/3728573/alex-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1500446691, "creation_date": 1500400634, "last_edit_date": 1500401190, "question_id": 45173971, "link": "https://stackoverflow.com/questions/45173971/how-are-c-structs-with-arrays-returned", "title": "How are C structs with arrays returned?", "body": "<p>Suppose we have: </p>\n\n<pre><code>typedef struct {\n    uint8_t someVal;\n} Entry\n\ntypedef struct {\n    Entry grid[3][3];\n} Matrix\n\n//Make a 3x3 matrix of all 0s\nMatrix emptyMatrix(void) {\n    Entry zero = {.value = 0}\n    Matrix matrix;\n    for (int i = 0; i &lt; 3; i++)\n        for (int j = 0; j &lt; 3; j++) {\n            //Shallow copy empty struct\n            matrix.grid[i][j] = zero;\n        }\n    return matrix;\n}\n\nMatrix myMatrix = emptyMatrix();\n</code></pre>\n\n<p>I understand that in C we're <a href=\"https://stackoverflow.com/questions/9653072/return-a-struct-from-a-function-in-c\">allowed to return a struct</a> from a function so this works and I've tested it. However, it's unclear to me HOW the assignment works. </p>\n\n<p>Does the compiler allocate the memory for <code>myMatrix</code> then copy each <code>Entry</code> element of the array in the <code>Matrix</code> struct returned by <code>emptyMatrix()</code>?</p>\n\n<p>I guess it would also be helpful to know the memory map of <code>Matrix</code> - I assumed that since <code>grid</code> is an array that <code>Matrix</code>'s memory would contain pointers. However, it apparently stores the <a href=\"https://stackoverflow.com/questions/29798894/memory-layout-of-c-struct-with-arrays\">value</a>. If this is the case, my guess for how the assignment works makes much more sense to me. </p>\n\n<p>Edit: It seems like people are answering the question incompletely. I want to know whether my guess of how the assignment works is correct. </p>\n"}, {"tags": ["c", "linux", "ip", "packet"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1500396352, "post_id": 45172698, "comment_id": 77313476, "body": "Think...why you pass a pointer to actual <code>len</code> to the call?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1500396993, "last_edit_date": 1592644375, "creation_date": 1500396635, "answer_id": 45172804, "question_id": 45172698, "link": "https://stackoverflow.com/questions/45172698/does-recvfrom-modify-len/45172804#45172804", "title": "Does recvfrom() modify len?", "body": "<p>To <a href=\"https://linux.die.net/man/3/recvfrom\" rel=\"nofollow noreferrer\">quote the man page</a></p>\n<blockquote>\n<p>Syntax:</p>\n<pre><code> ssize_t recvfrom(int socket, void *restrict buffer, size_t length,\n      int flags, struct sockaddr *restrict address, socklen_t *restrict address_len);\n</code></pre>\n</blockquote>\n<p>and,</p>\n<blockquote>\n<p>[...] If the <code>address</code> argument is not a null pointer and the protocol provides the source address of messages, the source address of the received message shall be stored in the sockaddr structure pointed to by the <code>address</code> argument, and the length of this address shall be stored in the object pointed to by the <code>address_len</code> argument.</p>\n</blockquote>\n<p>So, it's status-by-design, <code>recvfrom()</code> will modify the value pointed by the last argument, provided</p>\n<ul>\n<li>the <code>address</code> argument is not a null pointer</li>\n<li>the protocol provides the source address of messages</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 8252513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187f1fb9bdac65dc55d1c0512203aaf3?s=128&d=identicon&r=PG&f=1", "display_name": "Enrico R.", "link": "https://stackoverflow.com/users/8252513/enrico-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 45172804, "answer_count": 1, "score": -1, "last_activity_date": 1500396993, "creation_date": 1500396256, "question_id": 45172698, "link": "https://stackoverflow.com/questions/45172698/does-recvfrom-modify-len", "title": "Does recvfrom() modify len?", "body": "<p>sendto() give me \"invalid argument\" because len decrease by 2 bytes from 20.\nWhy calling recvfrom() modifies len?</p>\n\n<pre><code>s=socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL));    \nstruct sockaddr_ll sll;\nlen=sizeof(sll);\nbzero((char *)&amp;sll, sizeof(sll));\nsll.sll_ifindex=3;\n\nrf=recvfrom(s, buf, sizeof(buf), 0, (struct sockaddr *) &amp;sll, &amp;len);\n\nst=sendto(s, buf, 6+6+2+20+8+8, 0, (struct sockaddr *) &amp;sll, len);\n</code></pre>\n"}, {"tags": ["c", "avr", "atmega", "atmel"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1500395584, "post_id": 45172039, "comment_id": 77312971, "body": "Debugger............."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1500396654, "post_id": 45172039, "comment_id": 77313689, "body": "I take it the program is exiting before it finishes the while loop (it likely gives you an error on the command line).   You should post those kinds of details in your question.   I would start by either using a debugger, or putting some prints before and after the line that @500 pointed out."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1500397113, "post_id": 45172039, "comment_id": 77313945, "body": "Please note that &quot;runs the while loop just once&quot; is not something you directly observed, it is likely to be something you inferred by looking at the outputs of the AVR as it ran.  The things you inferred about your system are way less reliable than what you actually <i>observed</i>.  You should say what you observed, and what you expected to observe, and how your system is wired up."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1500397162, "post_id": 45172039, "comment_id": 77313979, "body": "It would also be great to indent your code properly and trim it down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1500399280, "post_id": 45172039, "comment_id": 77315251, "body": "What is the value of <code>world[0]</code> in <code>for (int i=0;i&lt;9;i++)  {     nextworld[i]=world[i]; }</code> ?"}, {"owner": {"reputation": 21, "user_id": 8137364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f490d2596fae296be4f1d3ef53c0e3?s=128&d=identicon&r=PG&f=1", "display_name": "akinoioi", "link": "https://stackoverflow.com/users/8137364/akinoioi"}, "edited": false, "score": 0, "creation_date": 1500408347, "post_id": 45172039, "comment_id": 77320693, "body": "World[0] and World[9] are just empty fields to prevent that negative index in the for loop for checking the current field&#39;s neighbours."}, {"owner": {"reputation": 21, "user_id": 8137364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f490d2596fae296be4f1d3ef53c0e3?s=128&d=identicon&r=PG&f=1", "display_name": "akinoioi", "link": "https://stackoverflow.com/users/8137364/akinoioi"}, "edited": false, "score": 0, "creation_date": 1500408427, "post_id": 45172039, "comment_id": 77320737, "body": "Thank you :) I just have the avr compiler installed so its hard to debug it."}, {"owner": {"reputation": 21, "user_id": 8137364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f490d2596fae296be4f1d3ef53c0e3?s=128&d=identicon&r=PG&f=1", "display_name": "akinoioi", "link": "https://stackoverflow.com/users/8137364/akinoioi"}, "edited": false, "score": 0, "creation_date": 1500408507, "post_id": 45172039, "comment_id": 77320764, "body": "I am trying to make a cellular automata in a 8 bit field in 1 dimension. I want to realize is in hardware"}], "answers": [{"tags": [], "owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "is_accepted": false, "score": 5, "last_activity_date": 1500394351, "creation_date": 1500394351, "answer_id": 45172148, "question_id": 45172039, "link": "https://stackoverflow.com/questions/45172039/why-does-my-programm-call-the-while-loop-just-once-atmel-c/45172148#45172148", "title": "Why does my programm call the while loop just once ? (Atmel C)", "body": "<p>Maybe because the array index is negative on the first iteration</p>\n\n<pre><code>for (int i=0; i&lt;9;i++)\n    {\n        tiles = 0;\n        for (int xc=-1; xc &lt;= 1; xc++)\n        {\n            if (world[i+xc]==1) &lt;== HERE, i(0) + xc(-1) == -1\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8137364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f490d2596fae296be4f1d3ef53c0e3?s=128&d=identicon&r=PG&f=1", "display_name": "akinoioi", "link": "https://stackoverflow.com/users/8137364/akinoioi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500488132, "creation_date": 1500394024, "last_edit_date": 1500488132, "question_id": 45172039, "link": "https://stackoverflow.com/questions/45172039/why-does-my-programm-call-the-while-loop-just-once-atmel-c", "title": "Why does my programm call the while loop just once ? (Atmel C)", "body": "<p>Please help. My program runs the while loop just once :(</p>\n\n<p>I don't know what the problem is. I programmed the same thing as well in python and there it worked fine.</p>\n\n<p>I am a beginner in C and I am using the AtMega8 Microprocessor from Atmel.</p>\n\n<pre><code>#define F_CPU 8000000UL\n\n#include &lt;avr/io.h&gt;\n#include &lt;util/delay.h&gt;\n\nint main(void) {\n    DDRD = 0xFF;\n    int world[9];\n    int nextworld[9];\n    //from 1 to 8\n    //some random start values  \n\n    world[1] = 1;\n    world[2] = 1;\n    world[3] = 1;\n    world[6] = 1;\n    world[7] = 1;\n    world[8] = 1;\n    for (int i = 0; i &lt; 9; i++) {\n        nextworld[i] = world[i];\n    }\n    int binworld = 0;\n    int tiles = 0;\n    //=============================\n    if (world[1] == 1) {\n        binworld = binworld + 128;\n    }\n    if (world[2] == 1) {\n        binworld = binworld + 64;\n    }\n    if (world[3] == 1) {\n        binworld = binworld + 32;\n    }\n    if (world[4] == 1) {\n        binworld = binworld + 16;\n    }\n    if (world[5] == 1) {\n        binworld = binworld + 8;\n    }\n    if (world[6] == 1) {\n        binworld = binworld + 4;\n    }\n    if (world[7] == 1) {\n        binworld = binworld + 2;\n    }\n    if (world[8] == 1) {\n        binworld = binworld + 1;\n    }\n    PORTD = binworld;\n    //================================\n    while (1) {\n        _delay_ms(100);\n        tiles = 0;\n        //the live starts\n\n        for (int i = 0; i &lt; 9; i++) {\n            tiles = 0;\n            for (int xc = -1; xc &lt;= 1; xc++) {\n                if (world[i + xc] == 1) {\n                    tiles += 1;\n                }\n\n                if (world[i] == 1) {\n                    tiles = tiles - 1;\n                }\n            }\n            if (world[i] == 1 &amp;&amp; tiles == 0) {\n                nextworld[i] = 0;\n            }\n            else if (world[i] == 0 &amp;&amp; tiles == 1) {\n                nextworld[i] = 1;\n            }\n            else if (world[i] == 1 &amp;&amp; tiles == 2) {\n                nextworld[i] = 0;\n            }   \n        }\n        //update old world\n        for (int i = 0; i &lt; 9; i++) {\n            world[i] = nextworld[i];\n        }\n\n        //set null\n        binworld = 0;\n        //convert\n        if (world[1] == 1) {\n            binworld = binworld + 128;\n        }\n        if (world[2] == 1) {\n            binworld = binworld + 64;\n        }\n        if (world[3] == 1) {\n            binworld = binworld + 32;\n        }\n        if (world[4] == 1) {\n            binworld = binworld + 16;\n        }\n        if (world[5] == 1) {\n            binworld = binworld + 8;\n        }\n        if (world[6] == 1) {\n            binworld = binworld + 4;\n        }\n        if (world[7] == 1) {\n            binworld = binworld + 2;\n        }\n        if (world[8] == 1) {\n            binworld = binworld + 1;\n        }\n\n        PORTD = binworld;\n    }\n}\n</code></pre>\n"}]