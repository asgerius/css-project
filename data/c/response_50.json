[{"tags": ["c", "gcc", "assembly", "gnu-assembler", "mbr"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450915277, "post_id": 34445480, "comment_id": 56633034, "body": "Try increasing the optimisation level. <code>-O2</code> should do it."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1450915342, "post_id": 34445480, "comment_id": 56633053, "body": "The <i>asm</i> code you are showing - is that what you created by hand or <i>GCC</i>?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1450915391, "post_id": 34445480, "comment_id": 56633067, "body": "Not tested, something like <code>-fomit-frame-pointer</code>?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450915406, "post_id": 34445480, "comment_id": 56633073, "body": "In MSVC there&#39;s __declspec(naked). See if GCC has an equivalent to that. But note that a __declspec(naked) function may not declare local variables IIRC."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 3, "creation_date": 1450915425, "post_id": 34445480, "comment_id": 56633078, "body": "The attribute you&#39;re looking for is <code>naked</code> but GCC doesn&#39;t support that with x86 targets. Turning up the optimization will remove the stack frame allocation, but only if the compiler thinks it&#39;s not needed. Otherwise there&#39;s nothing you can do to remove it This, among other reasons, is why using a C compiler to write a bootsector is a bad idea."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1450915432, "post_id": 34445480, "comment_id": 56633081, "body": "Also, you&#39;re firmly out of the realm of &quot;standard C&quot; and into the realm of &quot;praying the compiler generates what I want it to&quot;."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 3, "creation_date": 1450916536, "post_id": 34445480, "comment_id": 56633372, "body": "@RossRidge : or at least use a <i>C</i> compiler that outputs proper 16-bit code that isn&#39;t full of gotchyas, and prefixes that aren&#39;t available on 8086/8088 processors. I&#39;d avoid writing a bootsector with <i>GCC</i> . Bruce&#39;s  C compiler (BCC), and Openwatcom, or if you are on Windows MSVC 1.52c (if you have a copy laying around)."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1450919534, "post_id": 34445480, "comment_id": 56634101, "body": "I think the moment of truth for your code will be when you attempt to add a stack based variable or call functions. The output from your disassembly suggests to me you aren&#39;t using <code>-m16</code> (available on newer GCC&#39;s) or <code>__asm__(&quot;.code16gcc\\n&quot;);</code> at the very top of your <i>C</i> file(s). Unless you really know what you are doing (and the associated pitfalls) I wouldn&#39;t even seriously consider recommending that bad hack. What caught my eye is that there are no 0x66 or 0x67 prefixes in the disassembled code which suggests you are compiling your <i>C</i> code as 32 or 64-bit code."}, {"owner": {"reputation": 802, "user_id": 5158590, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcea160384d274a012fa104bbcd36c36?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Blinov", "link": "https://stackoverflow.com/users/5158590/maxim-blinov"}, "edited": false, "score": 0, "creation_date": 1450919958, "post_id": 34445480, "comment_id": 56634189, "body": "Considering GCC&#39;s popularity and general portability, I always thought there would be a way to get it to fully support 16 bit code generation - hence the numerous oversights and assumptions I&#39;ve made. I&#39;m not too keen on using extra tools, so I&#39;ll just stick with programming what I must in assembler."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1450941859, "post_id": 34445480, "comment_id": 56639640, "body": "GCC has had a .code16gcc directive that can be emitted for GNU assembler to interpret for about 15 years. As of about GCC 4.9.0 they finally added the <code>-m16</code> option (which pretty much does what .code16gcc did without specifying the directive manually)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1450941865, "post_id": 34445480, "comment_id": 56639642, "body": "Max: gcc can make code that runs in 16bit mode. That&#39;s <b>not</b> the only issue here: the ABI for a boot sector is way different from the normal function-call ABI.  There&#39;s no way to handle this without inline asm: even trying to use global register variables or something won&#39;t help with segment setup and an initial stack pointer.  Also most of what a first-stage bootloader has to do is make a bunch of <code>int</code> BIOS calls, which will require inline asm.  Since you only have 512b to work with, it&#39;s probably easier to write it in asm, since it can&#39;t be very many instructions anyway!"}], "answers": [{"comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1450918886, "post_id": 34445896, "comment_id": 56633952, "body": "More importantly, the code generated by GCC will assume it&#39;s running in 32-bit mode. It will <i>sometimes</i> be parseable as 16-bit code, but it will not run as intended."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1450919855, "post_id": 34445896, "comment_id": 56634166, "body": "@duskwuff gcc has <code>-m16</code> which outputs an asm directive <code>.code16gcc</code> which allows the code to run in real mode, but that doesn&#39;t help the real problem.  IIRC, the early transfer of <code>grub2</code> into C assumes the <code>-m16</code> before switching to full 32 bit mode later.  In fact, it can flit in and out, similar to an [infamous] MS/Windows <i>thunk</i> operation until it&#39;s loaded and configured enough to stay in 32 bit for the remainder."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1450920062, "post_id": 34445896, "comment_id": 56634214, "body": "The <code>-m16</code> or the <code>.code16gcc</code> have quirks you need to be aware of, and the prefixes generated will not function on anything less than a 386 processor (code won&#39;t execute properly on 8086/88/188/286). That might not be a problem for some who don&#39;t ever intend booting from older PCs. Those extra prefixes (generated by -m16 or .code16gcc) also bloat the size of the bootloader. I&#39;ve written Fat12 aware bootloaders in Openwatcom without a problem. Writing a bootloader in C isn&#39;t bad if you use the right compilers."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 2, "creation_date": 1450920684, "post_id": 34445896, "comment_id": 56634351, "body": "@MichaelPetch Obviously, I wasn&#39;t advocating it, merely mentioning the option exists in gcc.  It&#39;s a bit hard to find pre-386 motherboards that still work.  My 386 motherboard from 1996 gave it up [dead air] circa 2010.  Even harder to find 8086&#39;s still in service that OP would have access to or desire for.  They&#39;re too ancient even for used/surplus computer outlets (e.g. weirdstuff.com)"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 6, "last_activity_date": 1450932274, "last_edit_date": 1450932274, "creation_date": 1450918525, "answer_id": 34445896, "question_id": 34445480, "link": "https://stackoverflow.com/questions/34445480/writing-bootsector-in-c-prevent-generating-stack-pointer-initialization/34445896#34445896", "title": "Writing bootsector in C: prevent generating stack pointer initialization", "body": "<p>I hate to discourage an admirable notion, but it's very difficult [if not impossible] to write a PC MBR boot block in C, for a few reasons, mostly having to do with the quirkiness of a PC/legacy BIOS boot:</p>\n\n<ol>\n<li>The BIOS will load your block, but will then write into it at precise locations to provide information.  This is the \"boot parameter block\" [BPB].  Among other things, it has the drive number to boot from.</li>\n<li>The BPB starts at offset 0x03.  So, the first 3 bytes of the must have a <code>jmp</code> asm instruction to skip around this.</li>\n<li>The last two bytes of the sector must have the BIOS boot signature 0x55AA</li>\n<li>There must be space at a precise location for the partition table [which will be overwritten by partition editors like <code>fdisk</code></li>\n</ol>\n\n<p>There's precious little space left over and the code is tricky and heavily tied to the BIOS.  You have to be able to use the <code>int</code> asm instructions to interrogate the BIOS and issue disk read calls.  They have a precise sequence and for some you must be able to modify the x86 <em>segment</em> registers as well as controlling the general purpose registers with byte loads (e.g. you must be able to set values in the <code>%ah</code> independently of <code>%al</code>).</p>\n\n<p>Most boots [virtually all] write the boot sector in assembly.  In order to conserve space, some boot blocks execute some code and then overwrite that code with data because the code is executed once and the space is reused.  This is difficult to do in C.</p>\n\n<p>By the time you've adjusted your C program, you may find out that it just doesn't fit in 512 bytes.</p>\n\n<p>In the case of <code>grub</code>, its boot block loads a sector or two from the area after the boot block and transfers control.  That, using parameters set up by the boot block, reads in more of <code>grub</code>.  <code>grub</code> \"co-opts\" a portion of the \"no man's land\" from the 2nd sector up to the first partition [which starts at 1MB]. Then, transfers control, which then loads the remainder and decides how to boot the OS.  The later stages are written in C.</p>\n\n<p>For Windows, the MBR would just load the first sector of the partition marked as bootable, then transfer control.  That second stage is NT's boot loader.  It knows that the first N blocks after it in an NTFS filesystem contain the remainder of the boot, so it just loads them sequentially and transfers control.</p>\n\n<p>Note that the second stage boots have a bit of assembly, but after loading and probing a bit, they can and do switch to C code.  That approach is what I'd recommend.</p>\n\n<hr>\n\n<p>As an example, here's the source for boot block for <code>grub2</code>:</p>\n\n<pre><code>/* -*-Asm-*- */\n/*\n *  GRUB  --  GRand Unified Bootloader\n *  Copyright (C) 1999,2000,2001,2002,2005,2006,2007,2008,2009  Free Software Foundation, Inc.\n *\n *  GRUB is free software: you can redistribute it and/or modify\n *  it under the terms of the GNU General Public License as published by\n *  the Free Software Foundation, either version 3 of the License, or\n *  (at your option) any later version.\n *\n *  GRUB is distributed in the hope that it will be useful,\n *  but WITHOUT ANY WARRANTY; without even the implied warranty of\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n *  GNU General Public License for more details.\n *\n *  You should have received a copy of the GNU General Public License\n *  along with GRUB.  If not, see &lt;http://www.gnu.org/licenses/&gt;.\n */\n\n#include &lt;grub/symbol.h&gt;\n#include &lt;grub/machine/boot.h&gt;\n\n/*\n *  defines for the code go here\n */\n\n        /* Print message string */\n#define MSG(x)  movw $x, %si; call LOCAL(message)\n#define ERR(x)  movw $x, %si; jmp LOCAL(error_message)\n\n        .file   \"boot.S\"\n\n        .text\n\n        /* Tell GAS to generate 16-bit instructions so that this code works\n           in real mode. */\n        .code16\n\n.globl _start, start;\n_start:\nstart:\n        /*\n         * _start is loaded at 0x7c00 and is jumped to with CS:IP 0:0x7c00\n         */\n\n        /*\n         * Beginning of the sector is compatible with the FAT/HPFS BIOS\n         * parameter block.\n         */\n\n        jmp     LOCAL(after_BPB)\n        nop     /* do I care about this ??? */\n\n        /*\n         * This space is for the BIOS parameter block!!!!  Don't change\n         * the first jump, nor start the code anywhere but right after\n         * this area.\n         */\n\n        . = _start + GRUB_BOOT_MACHINE_BPB_START\n        . = _start + 4\n\n        /* scratch space */\nmode:\n        .byte   0\ndisk_address_packet:\nsectors:\n        .long   0\nheads:\n        .long   0\ncylinders:\n        .word   0\nsector_start:\n        .byte   0\nhead_start:\n        .byte   0\ncylinder_start:\n        .word   0\n        /* more space... */\n\n        . = _start + GRUB_BOOT_MACHINE_BPB_END\n\n        /*\n         * End of BIOS parameter block.\n         */\n\nkernel_address:\n        .word   GRUB_BOOT_MACHINE_KERNEL_ADDR\n\n        . = _start + GRUB_BOOT_MACHINE_KERNEL_SECTOR\nkernel_sector:\n        .long   1, 0\n\n        . = _start + GRUB_BOOT_MACHINE_BOOT_DRIVE\nboot_drive:\n        .byte 0xff      /* the disk to load kernel from */\n                        /* 0xff means use the boot drive */\n\nLOCAL(after_BPB):\n\n/* general setup */\n        cli             /* we're not safe here! */\n\n        /*\n         * This is a workaround for buggy BIOSes which don't pass boot\n         * drive correctly. If GRUB is installed into a HDD, check if\n         * DL is masked correctly. If not, assume that the BIOS passed\n         * a bogus value and set DL to 0x80, since this is the only\n         * possible boot drive. If GRUB is installed into a floppy,\n         * this does nothing (only jump).\n         */\n        . = _start + GRUB_BOOT_MACHINE_DRIVE_CHECK\nboot_drive_check:\n        jmp     3f      /* grub-setup may overwrite this jump */\n        testb   $0x80, %dl\n        jz      2f\n3:\n        /* Ignore %dl different from 0-0x0f and 0x80-0x8f.  */\n        testb   $0x70, %dl\n        jz      1f\n2:\n        movb    $0x80, %dl\n1:\n        /*\n         * ljmp to the next instruction because some bogus BIOSes\n         * jump to 07C0:0000 instead of 0000:7C00.\n         */\n        ljmp    $0, $real_start\n\nreal_start:\n\n        /* set up %ds and %ss as offset from 0 */\n        xorw    %ax, %ax\n        movw    %ax, %ds\n        movw    %ax, %ss\n\n        /* set up the REAL stack */\n        movw    $GRUB_BOOT_MACHINE_STACK_SEG, %sp\n\n        sti             /* we're safe again */\n\n        /*\n         *  Check if we have a forced disk reference here\n         */\n        movb   boot_drive, %al\n        cmpb    $0xff, %al\n        je      1f\n        movb    %al, %dl\n1:\n        /* save drive reference first thing! */\n        pushw   %dx\n\n        /* print a notification message on the screen */\n        MSG(notification_string)\n\n        /* set %si to the disk address packet */\n        movw    $disk_address_packet, %si\n\n        /* check if LBA is supported */\n        movb    $0x41, %ah\n        movw    $0x55aa, %bx\n        int     $0x13\n\n        /*\n         *  %dl may have been clobbered by INT 13, AH=41H.\n         *  This happens, for example, with AST BIOS 1.04.\n         */\n        popw    %dx\n        pushw   %dx\n\n        /* use CHS if fails */\n        jc      LOCAL(chs_mode)\n        cmpw    $0xaa55, %bx\n        jne     LOCAL(chs_mode)\n\n        andw    $1, %cx\n        jz      LOCAL(chs_mode)\n\nlba_mode:\n        xorw    %ax, %ax\n        movw    %ax, 4(%si)\n\n        incw    %ax\n        /* set the mode to non-zero */\n        movb    %al, -1(%si)\n\n        /* the blocks */\n        movw    %ax, 2(%si)\n\n        /* the size and the reserved byte */\n        movw    $0x0010, (%si)\n\n        /* the absolute address */\n        movl    kernel_sector, %ebx\n        movl    %ebx, 8(%si)\n        movl    kernel_sector + 4, %ebx\n        movl    %ebx, 12(%si)\n\n        /* the segment of buffer address */\n        movw    $GRUB_BOOT_MACHINE_BUFFER_SEG, 6(%si)\n\n/*\n * BIOS call \"INT 0x13 Function 0x42\" to read sectors from disk into memory\n *      Call with       %ah = 0x42\n *                      %dl = drive number\n *                      %ds:%si = segment:offset of disk address packet\n *      Return:\n *                      %al = 0x0 on success; err code on failure\n */\n\n        movb    $0x42, %ah\n        int     $0x13\n\n        /* LBA read is not supported, so fallback to CHS.  */\n        jc      LOCAL(chs_mode)\n\n        movw    $GRUB_BOOT_MACHINE_BUFFER_SEG, %bx\n        jmp     LOCAL(copy_buffer)\n\nLOCAL(chs_mode):\n        /*\n         *  Determine the hard disk geometry from the BIOS!\n         *  We do this first, so that LS-120 IDE floppies work correctly.\n         */\n        movb    $8, %ah\n        int     $0x13\n        jnc     LOCAL(final_init)\n\n        /*\n         *  The call failed, so maybe use the floppy probe instead.\n         */\n        testb   $GRUB_BOOT_MACHINE_BIOS_HD_FLAG, %dl\n        jz      LOCAL(floppy_probe)\n\n        /* Nope, we definitely have a hard disk, and we're screwed. */\n        ERR(hd_probe_error_string)\n\nLOCAL(final_init):\n        /* set the mode to zero */\n        movzbl  %dh, %eax\n        movb    %ah, -1(%si)\n\n        /* save number of heads */\n        incw    %ax\n        movl    %eax, 4(%si)\n\n        movzbw  %cl, %dx\n        shlw    $2, %dx\n        movb    %ch, %al\n        movb    %dh, %ah\n\n        /* save number of cylinders */\n        incw    %ax\n        movw    %ax, 8(%si)\n\n        movzbw  %dl, %ax\n        shrb    $2, %al\n\n        /* save number of sectors */\n        movl    %eax, (%si)\n\nsetup_sectors:\n        /* load logical sector start (top half) */\n        movl    kernel_sector + 4, %eax\n\n        orl     %eax, %eax\n        jnz     LOCAL(geometry_error)\n\n        /* load logical sector start (bottom half) */\n        movl    kernel_sector, %eax\n\n        /* zero %edx */\n        xorl    %edx, %edx\n\n        /* divide by number of sectors */\n        divl    (%si)\n\n        /* save sector start */\n        movb    %dl, %cl\n\n        xorw    %dx, %dx        /* zero %edx */\n        divl    4(%si)          /* divide by number of heads */\n\n        /* do we need too many cylinders? */\n        cmpw    8(%si), %ax\n        jge     LOCAL(geometry_error)\n\n        /* normalize sector start (1-based) */\n        incb    %cl\n\n        /* low bits of cylinder start */\n        movb    %al, %ch\n\n        /* high bits of cylinder start */\n        xorb    %al, %al\n        shrw    $2, %ax\n        orb     %al, %cl\n\n        /* save head start */\n        movb    %dl, %al\n\n        /* restore %dl */\n        popw    %dx\n\n        /* head start */\n        movb    %al, %dh\n\n/*\n * BIOS call \"INT 0x13 Function 0x2\" to read sectors from disk into memory\n *      Call with       %ah = 0x2\n *                      %al = number of sectors\n *                      %ch = cylinder\n *                      %cl = sector (bits 6-7 are high bits of \"cylinder\")\n *                      %dh = head\n *                      %dl = drive (0x80 for hard disk, 0x0 for floppy disk)\n *                      %es:%bx = segment:offset of buffer\n *      Return:\n *                      %al = 0x0 on success; err code on failure\n */\n\n        movw    $GRUB_BOOT_MACHINE_BUFFER_SEG, %bx\n        movw    %bx, %es        /* load %es segment with disk buffer */\n\n        xorw    %bx, %bx        /* %bx = 0, put it at 0 in the segment */\n        movw    $0x0201, %ax    /* function 2 */\n        int     $0x13\n\n        jc      LOCAL(read_error)\n\n        movw    %es, %bx\n\nLOCAL(copy_buffer):\n        /*\n         * We need to save %cx and %si because the startup code in\n         * kernel uses them without initializing them.\n         */\n        pusha\n        pushw   %ds\n\n        movw    $0x100, %cx\n        movw    %bx, %ds\n        xorw    %si, %si\n        movw    $GRUB_BOOT_MACHINE_KERNEL_ADDR, %di\n        movw    %si, %es\n\n        cld\n\n        rep\n        movsw\n\n        popw    %ds\n        popa\n\n        /* boot kernel */\n        jmp     *(kernel_address)\n\n/* END OF MAIN LOOP */\n\n/*\n * BIOS Geometry translation error (past the end of the disk geometry!).\n */\nLOCAL(geometry_error):\n        ERR(geometry_error_string)\n\n/*\n * Read error on the disk.\n */\nLOCAL(read_error):\n        movw    $read_error_string, %si\nLOCAL(error_message):\n        call    LOCAL(message)\nLOCAL(general_error):\n        MSG(general_error_string)\n\n/* go here when you need to stop the machine hard after an error condition */\n        /* tell the BIOS a boot failure, which may result in no effect */\n        int     $0x18\nLOCAL(stop):\n        jmp     LOCAL(stop)\n\nnotification_string:    .asciz \"GRUB \"\ngeometry_error_string:  .asciz \"Geom\"\nhd_probe_error_string:  .asciz \"Hard Disk\"\nread_error_string:      .asciz \"Read\"\ngeneral_error_string:   .asciz \" Error\\r\\n\"\n\n/*\n * message: write the string pointed to by %si\n *\n *   WARNING: trashes %si, %ax, and %bx\n */\n\n        /*\n         * Use BIOS \"int 10H Function 0Eh\" to write character in teletype mode\n         *      %ah = 0xe       %al = character\n         *      %bh = page      %bl = foreground color (graphics modes)\n         */\n1:\n        movw    $0x0001, %bx\n        movb    $0xe, %ah\n        int     $0x10           /* display a byte */\nLOCAL(message):\n        lodsb\n        cmpb    $0, %al\n        jne     1b      /* if not end of string, jmp to display */\n        ret\n\n        /*\n         *  Windows NT breaks compatibility by embedding a magic\n         *  number here.\n         */\n\n        . = _start + GRUB_BOOT_MACHINE_WINDOWS_NT_MAGIC\nnt_magic:\n        .long 0\n        .word 0\n\n        /*\n         *  This is where an MBR would go if on a hard disk.  The code\n         *  here isn't even referenced unless we're on a floppy.  Kinda\n         *  sneaky, huh?\n         */\n\n        . = _start + GRUB_BOOT_MACHINE_PART_START\npart_start:\n\nprobe_values:\n        .byte   36, 18, 15, 9, 0\n\nLOCAL(floppy_probe):\n/*\n *  Perform floppy probe.\n */\n\n        movw    $probe_values - 1, %si\n\nLOCAL(probe_loop):\n        /* reset floppy controller INT 13h AH=0 */\n        xorw    %ax, %ax\n        int     $0x13\n\n        incw    %si\n        movb    (%si), %cl\n\n        /* if number of sectors is 0, display error and die */\n        cmpb    $0, %cl\n        jne     1f\n\n/*\n * Floppy disk probe failure.\n */\n        MSG(fd_probe_error_string)\n        jmp     LOCAL(general_error)\n\n/* \"Floppy\" */\nfd_probe_error_string:  .asciz \"Floppy\"\n\n1:\n        /* perform read */\n        movw    $GRUB_BOOT_MACHINE_BUFFER_SEG, %bx\n        movw    %bx, %es\n        xorw    %bx, %bx\n        movw    $0x201, %ax\n        movb    $0, %ch\n        movb    $0, %dh\n        int     $0x13\n\n        /* if error, jump to \"LOCAL(probe_loop)\" */\n        jc      LOCAL(probe_loop)\n\n        /* %cl is already the correct value! */\n        movb    $1, %dh\n        movb    $79, %ch\n\n        jmp     LOCAL(final_init)\n\n        . = _start + GRUB_BOOT_MACHINE_PART_END\n\n/* the last 2 bytes in the sector 0 contain the signature */\n        .word   GRUB_BOOT_MACHINE_SIGNATURE\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1497674331, "post_id": 44599936, "comment_id": 76189444, "body": "You might want to move that LJMP instruction so that it&#39;s not the first instruction as it could be detected as the start of BPB by some BIOSes that update the BPB in boot blocks. There&#39;s no need to initialize FS, but you should initialize SS."}], "tags": [], "owner": {"reputation": 11, "user_id": 8174323, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7f4b1971ffc91abbf8281b3fbb148947?s=128&d=identicon&r=PG", "display_name": "Robin Miyagi", "link": "https://stackoverflow.com/users/8174323/robin-miyagi"}, "is_accepted": false, "score": 1, "last_activity_date": 1497662766, "creation_date": 1497662766, "answer_id": 44599936, "question_id": 34445480, "link": "https://stackoverflow.com/questions/34445480/writing-bootsector-in-c-prevent-generating-stack-pointer-initialization/44599936#44599936", "title": "Writing bootsector in C: prevent generating stack pointer initialization", "body": "<p>Actually, it is posible to write a boot sector program almost entirely\nin C;</p>\n\n<p>Suppose you had the following files in the same directory;</p>\n\n<p>linker.ld;</p>\n\n<pre><code>ENTRY (_start)\nOUTPUT_FORMAT (binary)\nSECTIONS\n{\n    . = 0x7c00;\n    .text : { boot.o(.text)\n              *(.text)\n            }\n    .rodata : { *(.rodata)\n          }\n    .data : { *(.data)\n            }\n    . = 0x7dfe;\n    .boot_sig : { boot.o(.boot_sig);\n            }\n    .bss : { *(.bss)\n           }\n    . = ALIGN (0x200);\n    lit = .;\n\n    /DISCARD/ : { *(.eh_frame)\n              *(.comment)\n              *(.note.GNU-stack)\n            }\n}\n</code></pre>\n\n<p>Makefile;</p>\n\n<pre><code>progname    = boot-sector\n# --------------------------------------------------------------------\n# compiler/linker options;\n# --------------------------------------------------------------------\n\n# C programming\nSHELL       = /bin/bash\nCC      = gcc\ndefs        =\ninclude_dirs    = -I../include\nCFLAGS      = -Wall -mno-red-zone -Wextra -Os -ffreestanding -m16\nCPPFLAGS    = -Wp,-Wall,-Wextra $(defs) $(include_dirs)\nLDFLAGS     = -Wl,-Map=$@.map -T linker.ld -nostartfiles -nostdlib\nLDLIBS      = \n# bison/flex options\nYACC        = bison\nYFLAGS      = -d\nLEX     = flex\nLFLAGS      = --full\n\n# The rest of this file is the programmatic part of this makefile. \n######################################################################\n# Preperation for flex/bison files\nysource     = $(wildcard *.y)\nlexsource   = $(wildcard *.lex)\nycsource    = $(patsubst %.y,   %.tab.c,    $(ysource))\nlexcsource  = $(patsubst %.lex, %.yy.c,     $(lexsource))\n\n# --------------------------------------------------------------------\n# source and object defitions corresponding to the built in and user\n# defined implicit rules of interest to this makefile.\n# (e.g. .c.o: )\n# --------------------------------------------------------------------\ncsource     = $(ycsource) $(lexcsource) $(wildcard *.c)\ngaSsource   = $(wildcard *.S)\nsource      = $(gaSsource) $(csource)\n# IF YOU ADD A NEW AUTOMATIC RULE FOR A SOURCE ABOVE, YOU MUST ADD A\n# AN ENTRY BELOW FOR THE OBJECT FILE:\ncobjects    := $(patsubst %.c,  %.o,    $(csource))\ngaSobjects  := $(patsubst %.S,  %.o,    $(gaSsource))\nobjects = $(gaSobjects) $(cobjects)\n\n#\n# REMEMBER TO DEFINE A NEW IMPLICIT RULE AT THE END OF THIS FILE FOR\n# YOUR NEW FILENAME EXTENSION, IF IT IS NOT A BUILT IN EXPLICIT RULE\n#\n\n# --------------------------------------------------------------------\n# DEFAULT RULE, THIS RULE MUST BE FIRST\n# --------------------------------------------------------------------\nall : $(progname)\n\n# --------------------------------------------------------------------\n# phony targets\n# --------------------------------------------------------------------\n.PHONY : clean\nclean :\n# Only use shell wild cards in rm operations.  Using $(objects) may\n# cause project files to be deleted if there is anything wrong with\n# the value of $(objects).\n    rm -f $(progname) $(progname).so *.o *.d time-stamp\n    find . -name '*~' -print0 | xargs -0 rm -f\n\n# --------------------------------------------------------------------\n# program targets\n# --------------------------------------------------------------------\ninclude $(csource:.c=.d) $(gaSsource:.S=.d)\n\n$(progname) : $(objects)\n    $(CC) $(CFLAGS) $(LDFLAGS)  -o $@ $^ $(LDLIBS)\n    touch time-stamp\n\n# CUSTOM RULES CAN BE DEFINED BETWEEN HERE AND THE NEXT WARNING\n# COMMENT.\n\n# custom rules here :D\n\n# \n# %.o : %.c is a built in implicit rule.\n# %.o : %.C is a built in implicit rule.\n# \n# ADD MORE IMPLICIT RULES BELOW AS NECESSARY\n%.d: %.c Makefile linker.ld\n    @set -e; rm -f $@; \\\n    $(CC) -MM $(CPPFLAGS) $&lt; &gt; $@.$$$$; \\\n    sed 's,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g' &lt; $@.$$$$ &gt; $@; \\\n    rm -f $@.$$$$\n%.d: %.S Makefile linker.ld\n    @set -e; rm -f $@; \\\n    $(CC) -MM $(CPPFLAGS) $&lt; &gt; $@.$$$$; \\\n    sed 's,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g' &lt; $@.$$$$ &gt; $@; \\\n    rm -f $@.$$$$\n%.o : %.c Makefile linker.ld\n    $(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $&lt;\n%.o : %.S Makefile linker.ld\n    $(CC) $(CPPFLAGS) $(CFLAGS) -c -o $@ $&lt;\n%.tab.c : %.y Makefile\n    $(YACC) $(YFLAGS)  $&lt;\n%.yy.c : %.lex Makefile\n    $(LEX) $(LFLAGS)  -o $@ $&lt;\n</code></pre>\n\n<p>boot.S;</p>\n\n<pre><code>#define STACK_TOP 0x8000\n#define BUFFER_SIZE 0x200;\n    ## -----------------------------------------------------------\n    ## Start up code for boot sector program.\n    .text\n    .code16\n_start:\n    .global _start\n    ljmp $(0),$(set_segment)\nset_segment:\n    xorw %ax, %ax\n    movw %ax, %ds\n    movw %ax, %es\n    movw %ax, %fs\n    movw %ax, %fs\n    movl $(STACK_TOP), %esp\n    movl %esp, %ebp\n    call cmain\n1:\n    hlt\n    jmp 1b\n\n    ## -----------------------------------------------------------\n    ## Boot Signature --- in this software project, there is no\n    ## DOS partition table.  Instead, the partition table will be\n    ## found in the sector immediately following all of the boot\n    ## loader code.\n    .section .boot_sig, \"a\"\n    .short 0xaa55\n</code></pre>\n\n<p>main.c;</p>\n\n<pre><code>/* main.c - Boot sector program. */\n/* Copyright (C) 2017 Robin Miyagi\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n */\n/********************************************************************/\n/*                                                                  */\n/*             Project Includes                         */\n/*                                                                  */\n/********************************************************************/\n/********************************************************************/\n/*                                                                  */\n/*             System Includes                          */\n/*                                                                  */\n/********************************************************************/\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stddef.h&gt;\n\n/********************************************************************/\n/*                                                                  */\n/*            Macro Definitions                         */\n/*                                                                  */\n/********************************************************************/\n#define SECTOR_SIZE 0x200\n/********************************************************************/\n/*                                                                  */\n/*                Data Types                            */\n/*                                                                  */\n/********************************************************************/\n/*  \n * Type definition and structure for the address packet used for LBA\n * disk addressing.\n */\ntypedef struct address_packet_struct address_packet_T;\nstruct address_packet_struct\n{\n  uint8_t size;         /* Size of this address packet. */\n  uint8_t mbz;          /* Must be zero. */\n  uint16_t sectors;     /* Number of sectors to transfer. */\n  uint32_t buffer;      /* Transfer buffer - see note #1. */\n  uint32_t lba_lower;       /* Lower 32 bits of starting LBA. */\n  uint32_t lba_upper;       /* Upper 32 bits of starting LBA. */\n} __attribute__((__packed__));\n/* Notes: --------------------------------------------------------- */\n/*   \n *   1.  The segment is in the upper 16 bits of `buffer', and the\n *       offset is in the lower 16 bits of `buffer'.\n */\ntypedef struct packed_int_struct packed_int_T;\nstruct packed_int_struct\n{\n  uint32_t lba_lower;\n  uint32_t lba_upper;\n} __attribute__((__packed__));\n/*\n * Type definition and union for LBA disk address.\n */\ntypedef union disk_address_union disk_address_T;\nunion disk_address_union\n{\n  uint64_t l;\n  packed_int_T dwords;\n};\n\n/*\n * Type definition and structure for segment/offset.\n */\ntypedef struct segment_struct segment_T;\nstruct segment_struct\n{\n  uint16_t offset;\n  uint16_t segment;\n} __attribute__ ((__packed__));\n\n/*\n * Type definition and union for calculating segment/offset from a\n * pointer;\n */\ntypedef union address_calculator_union address_calculator_T;\nunion address_calculator_union\n{\n  void *ptr;\n  uint32_t i;\n  segment_T segoff;\n};\n/*\n * Type definition for loader \"function\"  \n */\ntypedef void (*loader_T) (void);\n/*\n * Type definition and structure for load image table (LIT).\n */\ntypedef struct load_table_struct load_table_T;\nstruct load_table_struct\n{\n  loader_T entry;\n  void *edata;\n} __attribute__((packed));\n\n/********************************************************************/\n/*                                                                  */\n/*             Global Variables                         */\n/*                                                                  */\n/********************************************************************/\n/* Implemented in the linker script `linker.ld', this is the loader\n * information table.\n */\nextern load_table_T lit;\n\n/********************************************************************/\n/*                                                                  */\n/*             Module Variables                         */\n/*                                                                  */\n/********************************************************************/\n/*\n * This is the disk address packet (DAP).\n */\n__attribute__((__aligned__(4) )) static address_packet_T dap;\n\n/********************************************************************/\n/*                                                                  */\n/*           Interface Functions                        */\n/*                                                                  */\n/********************************************************************/\n/*\n * The main driver function for the boot sector program. \n */\nvoid cmain (void);\n\n/********************************************************************/\n/*                                                                  */\n/*             Module Functions                         */\n/*                                                                  */\n/********************************************************************/\n/* Text output functions........................................... */\n/*\n * Prints a single character CH to the console. \n */\nstatic void putchar (char ch);\n\n/*\n * Prints string S to the console.\n */\nstatic void puts (char *s);\n\n/*\n * Prints the error message specified in MESSAGE and halts the\n * processor.\n */\n__attribute__((__noreturn__)) static void error (char *message);\n\n/*  Loader functions............................................... */\n/*\n * Tests if LBA extensions are available.  If LBA extensions are\n * supported, returns true, otherwise it returns false.\n */\nstatic bool test_lba (void);\n\n/*\n * Reads drive.  If successful, returns true, otherwise it returns\n * false.\n */\nstatic bool read_drive (uint64_t lba, uint16_t sectors, void *buffer);\n\n/*\n * Set up DAP. \n */\nstatic void setup_dap (uint64_t lba, uint16_t sectors, void *buffer);\n/********************************************************************/\n/*                                                                  */\n/*             Inline Functions                         */\n/*                                                                  */\n/********************************************************************/\n/********************************************************************/\n/*                                                                  */\n/*              Implementation                          */\n/*                                                                  */\n/********************************************************************/\nvoid \ncmain (void)\n{\n  uint16_t sectors;\n\n  if (test_lba () == false)\n    error (\"LBA not supported\");\n  if (read_drive (1, 1, &amp;lit) == false)\n    error (\"Unable to read drive\");\n  sectors = ((uint32_t) lit.edata - (uint32_t) &amp;lit) / 0x200 - 1;\n  if (sectors &gt; 0)\n    {\n      if (read_drive (2, sectors, (void *) &amp;lit + SECTOR_SIZE) == false)\n    error (\"Unable to read drive\");\n    }\n  lit.entry ();\n}\nstatic void \nputchar (char ch)\n{\n#define COLOR 0x7f\n  int16_t buffer = 0x0e00;\n\n  buffer += ch;\n  asm (\"int $(0x10)\" \n       : \n       : \"a\" (buffer), \"b\" ((uint16_t) COLOR)\n       :\n       );\n}\nstatic void\nputs (char *s)\n{\n  char *ptr;\n  for (ptr = s; *ptr != '\\0'; ++ptr)\n    putchar (*ptr);\n}\n__attribute__((noreturn)) static void \nerror (char *message)\n{\n  puts (message);\n  puts (\": processor halted\");\n  for (;;)\n    asm (\"hlt\");\n}\nstatic bool\ntest_lba (void)\n{\n  bool ret = true;\n\n  asm goto (\"int $(0x10); jc %l3\"\n        : \n        : \"a\" ((uint16_t) 0x4100), \"b\" ((uint16_t) 0x55aa), \"d\" ((uint8_t) 0x80)\n        :\n        : lba_unsupported\n        );\n quit:\n  return ret;\n lba_unsupported:\n  asm (\"clc\");\n  ret = false;\n  goto quit;\n}\nstatic bool\nread_drive (uint64_t lba, uint16_t sectors, void *buffer)\n{\n  bool ret = true;\n\n  setup_dap (lba, sectors, buffer);\n  asm goto (\"int $(0x13); jc %l3\"\n        :\n        : \"a\" ((uint16_t) 0x4200), \"d\" ((uint8_t) 0x80), \"S\" (&amp;dap)\n        :\n        : read_error\n        );\n quit:\n  return ret;\n read_error:\n  ret = false;\n  goto quit;\n}\nstatic void\nsetup_dap (uint64_t lba, uint16_t sectors, void *buffer)\n{\n  disk_address_T addr;\n  address_calculator_T calculator;\n\n  /*\n   * Setup simple fields in DAP. \n   */\n  dap.size = sizeof (address_packet_T);\n  dap.mbz = 0;\n  dap.sectors = sectors;\n\n  /*\n   * Setup buffer.\n   */\n  calculator.ptr = buffer;\n  calculator.segoff.segment &lt;&lt;= 12;\n  dap.buffer = calculator.i;\n\n  /*\n   * Setup LBA address. \n   */\n  addr.l = lba;\n  dap.lba_lower = addr.dwords.lba_lower;\n  dap.lba_upper = addr.dwords.lba_upper;\n}\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 5158590, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dcea160384d274a012fa104bbcd36c36?s=128&d=identicon&r=PG&f=1", "display_name": "Maxim Blinov", "link": "https://stackoverflow.com/users/5158590/maxim-blinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1458, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1497662766, "creation_date": 1450914902, "last_edit_date": 1450915412, "question_id": 34445480, "link": "https://stackoverflow.com/questions/34445480/writing-bootsector-in-c-prevent-generating-stack-pointer-initialization", "title": "Writing bootsector in C: prevent generating stack pointer initialization", "body": "<p>After tinkering with writing bootsector code in assembly, I'm wondering if I can do the same but in C. So far the code generation in an empty function looks as such:</p>\n\n<p>in C:</p>\n\n<pre><code>void _start() {\nhalt:\n    goto halt;\n}\n</code></pre>\n\n<p>consequent asm (generated by GCC):</p>\n\n<pre><code>7c00:   55                      push   %bp\n7c01:   89 e5                   mov    %sp,%bp\n7c03:   eb fe                   jmp    0x7c03\n</code></pre>\n\n<p>However, is it possible to specify that for this (entry) function in particular, I do not want the base and stack pointer to be initialized? The BIOS will transfer control directly to 0x7c00, so the first two instructions setting up the stack pointers are redundant.</p>\n\n<p>Ive tried adding <code>__attribute__ ((always_inline, noreturn, regparm(0)))</code> to the function declaration, but that does not seem to do anything.</p>\n"}, {"tags": ["c", "getchar"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1450926552, "post_id": 34445333, "comment_id": 56635507, "body": "Don&#39;t cast the result of <code>malloc</code> &amp; friends in C! And <code>sizeof(char)</code> is defined to yield <code>1</code>. It is superfluous."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 6, "last_activity_date": 1450913844, "creation_date": 1450913844, "answer_id": 34445353, "question_id": 34445333, "link": "https://stackoverflow.com/questions/34445333/odd-behaviour-of-getchar-function/34445353#34445353", "title": "odd behaviour of getchar() function", "body": "<p>You call <code>getchar</code> twice each time in the loop. You push enter (newline) at the end of the characters. And you bump the count <em>before</em> the second <code>getchar</code>. So the count will be <code>(n + 1) / 2</code> rounded up, where <code>n</code> is the number of characters.</p>\n\n<p>Plus one for the newline. Divided by two because two characters are read for each increment. And rounded up because the increment occurs before the second read.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450917774, "post_id": 34445758, "comment_id": 56633655, "body": "<code>char c;</code> should be <code>int c;</code>  , and you should also check it is not <code>EOF</code>"}, {"owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "edited": false, "score": 0, "creation_date": 1450918194, "post_id": 34445758, "comment_id": 56633778, "body": "wow man, I&#39;m flabbergasted by your response. Thank you, I appreciate your time and effort.It looks like this site has a great community, I&#39;m loving it.Thank you again you were very helpful and I wish you happy holidays :)."}, {"owner": {"reputation": 1135, "user_id": 5590742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNXUZ.png?s=128&g=1", "display_name": "jgreve", "link": "https://stackoverflow.com/users/5590742/jgreve"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450921118, "post_id": 34445758, "comment_id": 56634448, "body": "@M.M agreed... better to use &#39;int c&#39; vs. &#39;char c&#39;.  Also better to check for getchar() returning -1 to indicate eof.  Also better to check for malloc failure. :-)  After Paragon is further along on the learning they can read up on this: <a href=\"https://stackoverflow.com/questions/3676796/what-does-getchar-exactly-do\" title=\"what does getchar exactly do\">stackoverflow.com/questions/3676796/&hellip;</a>"}, {"owner": {"reputation": 1135, "user_id": 5590742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNXUZ.png?s=128&g=1", "display_name": "jgreve", "link": "https://stackoverflow.com/users/5590742/jgreve"}, "edited": false, "score": 0, "creation_date": 1450921292, "post_id": 34445758, "comment_id": 56634474, "body": "Paragon - I appreciate the thanks.  Programming can be a lot of fun.  C has some surprising complexity in it, I&#39;ll encourage you to try running the program and type in 100 random characters (more or less).  For me it core dumped, it will be useful for you to work through why.  Also M.M raises a good point, but I wouldn&#39;t worry too much about stuff like that for initial classroom / research code. Have fun :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1450926545, "post_id": 34445758, "comment_id": 56635505, "body": "Don&#39;t cast the result of <code>malloc</code> &amp; friends in C! And <code>sizeof(char)</code> is defined to yield <code>1</code>. It is superfluous."}], "tags": [], "owner": {"reputation": 1135, "user_id": 5590742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vNXUZ.png?s=128&g=1", "display_name": "jgreve", "link": "https://stackoverflow.com/users/5590742/jgreve"}, "is_accepted": true, "score": 0, "last_activity_date": 1450917381, "creation_date": 1450917381, "answer_id": 34445758, "question_id": 34445333, "link": "https://stackoverflow.com/questions/34445333/odd-behaviour-of-getchar-function/34445758#34445758", "title": "odd behaviour of getchar() function", "body": "<p>Dave Schwartz is right about calling getchar() twice.  There are one or two more rough edges in your code fragment; let's talk about those while I expand a little bit on Dave's answer.</p>\n\n<p>The C language can be VERY dense; multiple things can be going on in a single line of code.  For someone just starting out, I would encourage you to write things long form, even if you don't think you need to... then consolidate as your mental model of what C is doing becomes richer.</p>\n\n<p>For example... let's revise your code fragment to look like this:</p>\n\n<pre><code>int count = 0; \np = (char*)malloc(32*sizeof(char));\nchar c = getchar(); /* first call to getchar() */\nwhile( c != '\\n') {\n   p[count] = c; /* easier to read than *p=getchar() */\n   count++; /* could be combined...  see below for a more C-like version. */\n   /* question: what would happen if we increment count BEFORE we store in p's memory? */\n\n   /* Also... your initial code was this: */\n   /*   *p = getchar(); */\n   /* which is always assigning getchar to p[0]. */\n   /* see below for more \"idiomatic\" way to do that. */\n   /* see below for more \"idiomatic\" way to do that. */\n\n   /* Get the next char, then let while() condition decide if */\n   /* we come back into the loop body or proceed after it. */\n   /* It is a common tactic to put an input value in a scratch variable */\n   /* like 'c' and use it at different points in your loop. */\n\n   c = getchar(); /* all additional calls to getchar. */\n   /* note that we already declared c above the while-loop, so ok to re-use. */\n}\n/* dont want to call getchar() again here... this is the problem dave called out. */\n/* while( getchar() != '\\n' ); */\n/* ...do some stuff here */\nfree(p); /* your logic does free the malloc at some point, yes? :-) */\n</code></pre>\n\n<p>Now you <i>could</i> try collapse as much code into a single expression as possible.\nBut <i>please</i> don't do that - at least not until you can comfortably write code that is 1) easy to read, and 2) easy to predict what it will do.</p>\n\n<p>You will eventually find <i>writing</i> code isn't the hard part.</p>\n\n<p>It is <i>reading</i> code that was written 2 weeks (or 2+ years ago) that is hard.</p>\n\n<p>Let's talk about looping next: while(), for() and do/while() to work with.\nThe while() and for() give you the option to skip the loop body... the do/while() will Always execute the loop body, which may not be what you want in your situation since they user could just hit enter giving you the first character as '\\n'.</p>\n\n<p><b>for loop version</b>\nConsider how your logic might look usuing a  for() loop:</p>\n\n<pre><code>int count = 0; \np = (char*)malloc(32*sizeof(char));\nfor( char c = getchar(); c != '\\n'; c = getchar() ) {\n   p[count] = c;\n   count++;\n}\n</code></pre>\n\n<p><b>do/while version</b>\nI find it more difficult to write this with a do/while() loop:\nNot that it is hard to <i>write</i> the code, but I find it hard to make the code readable so the <i>intent</i> is clear.</p>\n\n<pre><code>int count = 0; \np = (char*)malloc(32*sizeof(char));\nchar c;\ndo {\n   if( count &gt;= 1  ) {\n      /* ugly... check count &gt;= 1 so we don't save an uninitialized 'c' */\n      p[count] = c;\n   }\n   count++;\n} while( (c = getchar() );\ncount--; /* adjust because we counted our '\\n'. */\n</code></pre>\n\n<p><b>again with some extra C idioms</b>\nThis one is hard to read because to understand it you have to be able\nto untangle the while() expression, which does the following things:</p>\n\n<p>1) calls the getchar() function and assigns the result to our temp var 'c'</p>\n\n<p>2) compares the result of that assignment to '\\n'</p>\n\n<p>3) while() evaluates the result of the compare and only enters the loop body if we have something besides a '\\n' in temp char var 'c'.</p>\n\n<p>That is a lot to wrap your head around before you can ask \"was it true?\".\nfyi - this is the only sample I actually tried to run...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n\nvoid main( char **argv ) {\n   printf(\"Please type some stuff:\\n\");\n\n    int count = 0; \n    char *p = (char*)malloc(32*sizeof(char));\n    char c;\n    while( (c = getchar() ) != '\\n') {\n       p[count++] = c;\n       /* So... could we just saying the following instead?\n        *     *p++ = c;\n        */\n    }\n    p[count] = '\\0'; /* this would turn our malloced buffer into a C-style string */\n    printf(\"found %d chars = '%s'\\n\", count, p);\n    free(p);\n}\n</code></pre>\n\n<p>For one last point to ponder, consider the following:</p>\n\n<p>1) Is there a limit to how many characters our user can type before they hit enter?</p>\n\n<p>2) Assuming #1 does have a limit, what is it and <i>why</i>?</p>\n\n<p>3) What could you do to add a check to ensure we don't let our user try to type too many characters?</p>\n"}], "owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 34445758, "answer_count": 2, "score": 0, "last_activity_date": 1464205788, "creation_date": 1450913710, "last_edit_date": 1464205788, "question_id": 34445333, "link": "https://stackoverflow.com/questions/34445333/odd-behaviour-of-getchar-function", "title": "odd behaviour of getchar() function", "body": "<p>I'm trying to write a function which stores data in a text file, using the <code>fopen(\"filename\",\"w\")</code> where \"filename\" is a string inputted by the user.  I've chosen to do so via the <code>getchar()</code> function and I need a counter variable that is being incremented with every keystroke. Here is where things get convoluted and confusing.</p>\n\n<pre><code>   char *p;\n   int count = 0; \n   p = (char*)malloc(32*sizeof(char));\n   do \n   {\n       *p = getchar();\n       count++;\n   }\n   while(getchar() != '\\n');\n</code></pre>\n\n<p>Up until 3 characters inputted it needs only 1 press of the Enter key and the counter is accurate until 2 characters after 2 it follows an odd pattern.</p>\n\n<pre><code>--------------------Input------------------------Count--------------------\n-------------------- t --------------------------  1  --------------------\n-------------------- te -------------------------  2  --------------------\n-------------------- tes  -----------------------  2  --------------------\n-------------------- test ------------------------ 3 ---------------------\n-------------------- test1 ----------------------- 3 ---------------------\n-------------------- test12 ---------------------- 4 ---------------------\n-------------------- test123 --------------------- 4 ---------------------\n-------------------- test1234 -------------------- 5 ---------------------\n</code></pre>\n\n<p>Basically, for every 2 additional chars, the count gets incremented by one.</p>\n\n<p>How does the function works in this context and why does it need 2 keystrokes?</p>\n"}, {"tags": ["c", "memory-management", "malloc", "signals"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450913539, "post_id": 34445242, "comment_id": 56632547, "body": "In real code it&#39;s likely the child process would have an event loop using <code>select</code> or some other similar mechanism. Then the general procedure is for the signal handler just to set a flag. The event loop would then detect this and do the process clean up and exit at that point (outside the signal handler)."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1450913546, "creation_date": 1450913546, "answer_id": 34445311, "question_id": 34445242, "link": "https://stackoverflow.com/questions/34445242/clear-dynamic-allocated-data-with-signal/34445311#34445311", "title": "Clear dynamic allocated data with signal", "body": "<p>Have the signal handler set a variable of type <code>sig_atomic_t</code>. In your regular code, periodically check for that variable to be set and, if so, shut down cleanly. Clean shutdown, if required, must be designed into a piece of software. It can't be \"stapled on\" at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 4, "last_activity_date": 1450914769, "last_edit_date": 1450914769, "creation_date": 1450913650, "answer_id": 34445325, "question_id": 34445242, "link": "https://stackoverflow.com/questions/34445242/clear-dynamic-allocated-data-with-signal/34445325#34445325", "title": "Clear dynamic allocated data with signal", "body": "<p>According to POSIX, neither <code>malloc()</code> nor <code>free()</code> nor any of the other high-level memory allocation functions are signal-safe (<code>mmap()</code> and friends are though). You cannot call them safely in a signal handler as they are not required to survive being called from a signal handler.</p>\n\n<p>The typical workaround is to set a flag in the signal handler that memory shall be cleared. The main loop of your program checks for this flag periodically and does the desired action when the flag is found to be set. Use the type <code>sig_atomic_t</code> for this variable and declare it as <code>volatile</code> for maximum safety.</p>\n"}, {"tags": [], "owner": {"reputation": 1297, "user_id": 1092762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40805c1087a50ecbeb837a1d4a961c68?s=128&d=identicon&r=PG", "display_name": "bbonev", "link": "https://stackoverflow.com/users/1092762/bbonev"}, "is_accepted": false, "score": 0, "last_activity_date": 1450913986, "creation_date": 1450913986, "answer_id": 34445371, "question_id": 34445242, "link": "https://stackoverflow.com/questions/34445242/clear-dynamic-allocated-data-with-signal/34445371#34445371", "title": "Clear dynamic allocated data with signal", "body": "<p>Unlike shared memory most other resources (like sockets and malloced memory) do not require cleanup before program exit. This is because they are cleaned-up anyways after the process is terminated.</p>\n\n<p>Setting a flag that will be processed in your main loop is a good idea for other signals, but will not work as expected for <code>SIGQUIT</code> because your process will be already terminated after the signal handler is called.</p>\n"}], "owner": {"reputation": 43, "user_id": 5712838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb574b3f81ac0191b73c49fe5afa11c?s=128&d=identicon&r=PG&f=1", "display_name": "James Dean", "link": "https://stackoverflow.com/users/5712838/james-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 34445325, "answer_count": 3, "score": 4, "last_activity_date": 1450914769, "creation_date": 1450913020, "last_edit_date": 1450913264, "question_id": 34445242, "link": "https://stackoverflow.com/questions/34445242/clear-dynamic-allocated-data-with-signal", "title": "Clear dynamic allocated data with signal", "body": "<p>What is the correct way to clean with <code>free()</code> dynamic allocated data in C when using signal?</p>\n\n<p><a href=\"http://www.csl.mtu.edu/cs4411.ck/www/NOTES/signal/kill.html\" rel=\"nofollow\">Here</a> there's an example with shared memory, and the used solution is to declare global variable, but seems not very clean and secure.</p>\n\n<p>This is an example code with an array of structure dynamically allocated not corretly cleaned</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include  &lt;signal.h&gt;\n\ntypedef struct {\n    int val;\n} mystruct_t;\n\nvoid sigquit(int sig) {\n    signal(sig, SIG_IGN);\n    printf(\"Child killed\\n\");\n\n    // Clear the dynamic allocated data inside\n    // the signal quit method\n    //\n    // int i;\n    // for (i = 0; i &lt; n; i++) {\n    //     free(struct_a[i]);\n    // }\n    // free(struct_a);\n\n    exit(0);\n}\n\nint\nmain()\n{\n    int n = 10;\n    /* dynamic allocated array of structure */\n    mystruct_t **struct_a = generatearray(n);\n    pid_t pid = fork();\n\n    if (pid == 0) {\n        printf(\"Child process. My pid is %d and my parent's id is %d.\\n\",\n            getpid(), getppid());\n\n        if (signal(SIGQUIT, sigquit) == SIG_ERR) {\n            printf(\"SIGINT install error\\n\");\n            exit(1);\n        }\n\n        while(1);\n    }\n    else {\n        printf(\"Parent process. My pid is %d and my parent's id is %d.\\n\",\n            getpid(), pid);\n\n        sleep(1);\n        kill(pid, SIGQUIT);\n        sleep(5);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Which method you would use to solve this problem?</p>\n"}, {"tags": ["python", "c", "pointers", "data-structures", "cpython"], "comments": [{"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450914446, "post_id": 34445197, "comment_id": 56632812, "body": "in the example you show, the function <code>insert</code> takes a pointer to a pointer to a <code>list</code>. The first pointer is then dereferenced, to read and then change the pointer that points to the <code>list</code> structure. Are you asking how to do this same read &amp; change if a pointer to a list structure (<code>list *self</code>) is passed to the function, instead of a pointer to a pointer?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450914668, "post_id": 34445197, "comment_id": 56632866, "body": "Yes. I want to send myList into insert without ampersand"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915007, "post_id": 34445197, "comment_id": 56632959, "body": "the solution for what you want, is to access using <code>self</code> instead of <code>*self</code>, i.e. <code>p-&gt;next = self;</code>, but that also means that by doing <code>self = p;</code> on the next line, you are only modifying your function&#39;s copy of that pointer, and the caller won&#39;t see the change. The way to get around this is by passing a pointer to a pointer, like in the code you showed. What exactly is it you need to do?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915294, "post_id": 34445197, "comment_id": 56633038, "body": "is there possible to caller to see the changes?"}, {"owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "reply_to_user": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450915504, "post_id": 34445197, "comment_id": 56633106, "body": "As I understand, myList is a pointer with value of address to the first element of the structure. Can I change this value to another element of that structure?"}, {"owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "edited": false, "score": 0, "creation_date": 1450916337, "post_id": 34445197, "comment_id": 56633333, "body": "the values passed into your function are copies. any changes you make to them will only be visible inside your function. So, yes, you can do whatever you want to <code>myList</code>, but if you&#39;re in a function then those changes won&#39;t be seen by the caller. If you need to change something in a function, the usual approach is to pass a pointer-- see my answer"}], "answers": [{"tags": [], "owner": {"reputation": 1075, "user_id": 2539954, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1ef914985b0030db224fbb296d0c9d0a?s=128&d=identicon&r=PG", "display_name": "Erik Nyquist", "link": "https://stackoverflow.com/users/2539954/erik-nyquist"}, "is_accepted": false, "score": 1, "last_activity_date": 1450916863, "last_edit_date": 1450916863, "creation_date": 1450915746, "answer_id": 34445587, "question_id": 34445197, "link": "https://stackoverflow.com/questions/34445197/one-linked-list-for-python-using-c-api/34445587#34445587", "title": "One linked list for python using C api", "body": "<p>Well, you can just drop the <code>*</code>, i.e.:</p>\n\n<pre><code>void insert(list *self, int item) {\n    list *p = malloc(sizeof(list));\n    p-&gt;item = item;\n    p-&gt;next = self;\n    self = p;\n}\n</code></pre>\n\n<p>But I don't think this will behave like you expect, because the line <code>self = p</code> will not actually modify the same pointer that the caller was using. Your function gets a seperate copy of <code>*self</code> when it runs (C is <a href=\"http://denniskubes.com/2012/08/20/is-c-pass-by-value-or-reference\" rel=\"nofollow\">pass-by-value</a>). If you want to modify something in a function and have the caller see the change, the normal approach is to use a pointer-- so you don't need to modify the copy of the pointer passed into the function, but you can use it to access the same piece of memory that the caller has been working with. In your case, the caller is working with a pointer to <code>myList</code>, so if you want the function to change the value of that pointer, you need a pointer to a pointer i.e. <code>list **self</code>. </p>\n"}], "owner": {"reputation": 993, "user_id": 4541287, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/64f22664ee95fd0770558a2d2daeb879?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Ruzhitskiy", "link": "https://stackoverflow.com/users/4541287/bogdan-ruzhitskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450916863, "creation_date": 1450912744, "question_id": 34445197, "link": "https://stackoverflow.com/questions/34445197/one-linked-list-for-python-using-c-api", "title": "One linked list for python using C api", "body": "<p>I'm trying to make one linked list for Python using C api. \nThis stuff works:</p>\n\n<pre><code>typedef struct list {\n    int item;\n    struct list *next;\n} list;\n\nvoid insert(list **self, int item) {\n    list *p = malloc(sizeof(list));\n    p-&gt;item = item;\n    p-&gt;next = *self;\n    *self = p;\n}\n\nint main() {\n    list *myList = NULL;\n    insert(&amp;myList, 1);\n    return 0;\n}\n</code></pre>\n\n<p>but Python C api use *self, instead **self. So, how can it works, if insert function would be like this:</p>\n\n<pre><code>void insert(list *self, int item) {\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1450908831, "post_id": 34444520, "comment_id": 56630866, "body": "You tell us the problem, we&#39;ll figure out its reason."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1450908871, "post_id": 34444520, "comment_id": 56630887, "body": "The <code>scanf</code> looks so suspicious it really is no longer funny. This question is so... goofy it almost deserves an upvote. If not a typo. No offense! :-)"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1450909030, "post_id": 34444520, "comment_id": 56630954, "body": "I think I see what this is trying to do, and several different reasons why it might not be working for you, but I cannot disentangle the (deliberately?) obtuse way of going about it, the possible bugs, and the definite bugs enough to give any explanation that would make sense at your level of understanding.  Possibly what you need is to throw away this textbook and get a better one."}, {"owner": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "edited": false, "score": 0, "creation_date": 1450909032, "post_id": 34444520, "comment_id": 56630956, "body": "When i input a character the program stops"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1450909222, "post_id": 34444520, "comment_id": 56631031, "body": "@GirishGogia : You need to edit the question to clarify it, not add clarification in comments (that may not be read)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1450910377, "post_id": 34444520, "comment_id": 56631478, "body": "I have just checked the 2nd edition of that book, and that code does not appear anywhere, and certainly not that error.  What edition?  What page?"}, {"owner": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "edited": false, "score": 0, "creation_date": 1450910571, "post_id": 34444520, "comment_id": 56631547, "body": "Pg-139,and the code does compile"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 1, "creation_date": 1450911022, "post_id": 34444520, "comment_id": 56631706, "body": "Yes, it compiles. But is very wrong. as mentioned in the answer, the <code>scanf()</code> is coded incorrectly. You shouldn&#39;t ignore warnings. I took your code and did as Clifford recommended and it appears to work properly."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1450947278, "post_id": 34444520, "comment_id": 56641495, "body": "@GirishGogia : OK found it on P139 - the PDF I was searching is a scan with inaccurate OCR, however the code is correct; you have simply transcribed it incorrectly. It compiles because it is syntactically valid; it is however semantic nonsense.  Many compilers would issue a warning for this error given suitablly high warning settings"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "edited": false, "score": 0, "creation_date": 1450909198, "post_id": 34444599, "comment_id": 56631013, "body": "Did that, same problem"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1450909229, "post_id": 34444599, "comment_id": 56631034, "body": "Likely, <code>scanf(&quot;%[^\\n]&quot;, line);</code> was meant."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1450909399, "post_id": 34444599, "comment_id": 56631108, "body": "@FUZxxl : fixed - I did not notice that - I&#39;ve not seen anyone make that error before!"}, {"owner": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "edited": false, "score": 0, "creation_date": 1450910623, "post_id": 34444599, "comment_id": 56631563, "body": "The problem must have been with the quotation marks"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "edited": false, "score": 0, "creation_date": 1450946413, "post_id": 34444599, "comment_id": 56641133, "body": "@GirishGogia : ... and the ampersand. You make it sound as if there is some doubt about the cause of the problem.  There is no doubt - the scanf call was nonsense."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 3, "last_activity_date": 1450950381, "last_edit_date": 1450950381, "creation_date": 1450909144, "answer_id": 34444599, "question_id": 34444520, "link": "https://stackoverflow.com/questions/34444520/program-stops-when-i-input-any-character/34444599#34444599", "title": "Program stops when i input any character", "body": "<p>The line:</p>\n\n<pre><code>scanf(\"%[^\\n], &amp;line\");\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>scanf(\"%[^\\n]\", line);\n</code></pre>\n\n<p>i.e. Put the closing <code>\"</code> in the format string in the correct place, and no <code>&amp;</code> before <code>line</code>.</p>\n\n<p>Moreover, on some platforms the stdout buffer is not flushed until it contains a newline or becomes full, so you should add a <code>fflush( stdout)</code> call.  You will get away with it on Windows.</p>\n\n<p>You might also consider simplifying the code by using the <code>ctype.h</code> functions.</p>\n\n<hr>\n\n<p>Since this is a simple transcription error (the book referenced does not contain this error) rather than a programming question, and the question has been closed, this purely an aside, but I'd suggest the following implementation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    char line[80];\n    int count;\n\n    /* read in the entire string */\n    printf(\"Enter a line of text below:\\n\");\n    scanf(\"%[^\\n]\", line);\n\n    /* encode each individual character and display it */\n    for (count = 0; line[count] != '\\0'; ++count)\n    {\n        char plaintext = line[count];\n        char encoded = '.';\n\n        if (isupper(plaintext))\n        { \n            encoded = (((plaintext + 1) - 'A') % 26) + 'A';\n        }\n        else if (islower(plaintext))\n        {\n            encoded = (((plaintext + 1) - 'a') % 26) + 'a';\n        }\n        else if (isdigit(plaintext))\n        {\n            encoded = (((plaintext + 1) - '0') % 10) + '0';\n        }\n\n        putchar(encoded);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5053816, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206816404798021/picture?type=large", "display_name": "Girish Gogia", "link": "https://stackoverflow.com/users/5053816/girish-gogia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1450909200, "answer_count": 1, "score": -3, "last_activity_date": 1450950381, "creation_date": 1450908748, "last_edit_date": 1450909565, "question_id": 34444520, "link": "https://stackoverflow.com/questions/34444520/program-stops-when-i-input-any-character", "closed_reason": "Needs details or clarity", "title": "Program stops when i input any character", "body": "<p>*the code is from a book named \nProgramming  with c by Byron gottfried *</p>\n\n<p>*when i try to input a character, the program stops *</p>\n\n<pre><code>int main()\n{\n\n    char line[80];\n    int count;\n    printf(\" Enter a line of text below:\\n\");\n    scanf(\"%[^\\n], &amp;line\");\n\n    for(count=0;line[count]!='\\0';++count){\n\n        if(((line[count]&gt;='0') &amp;&amp; (line[count] &lt; '9'))||\n            ((line[count] &gt;= 'A') &amp;&amp; (line[count]&lt; 'Z'))||\n            ((line[count]&gt;= 'a' ) &amp;&amp; (line[count] &lt;'z' )))\n             putchar(line[count]+1);\n             else if(line[count] =='9' ) putchar('0');\n             else if(line[count] == 'Z')putchar('A');\n             else if(line[count] == 'z')putchar('a');\n             else putchar('.');\n\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "segmentation-fault", "scanf"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450908225, "post_id": 34444366, "comment_id": 56630631, "body": "What platform is this for?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1450908381, "post_id": 34444366, "comment_id": 56630694, "body": "@DavidHoelzer <code>$fmt</code> is the value of the symbol <code>fmt</code>, <code>fmt</code> is the value at address <code>$fmt</code>. You got it the wrong way round."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "edited": false, "score": 0, "creation_date": 1450908407, "post_id": 34444366, "comment_id": 56630707, "body": "Unless the compiler is doing it wrong, I do indeed want <code>$fmt</code>."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450908450, "post_id": 34444366, "comment_id": 56630727, "body": "@FUZxxl If I got your question right, it&#39;s for unix."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450908639, "post_id": 34444366, "comment_id": 56630798, "body": "@Sunspawn Different Unices have different calling conventions and symbol naming schemes. It would help if you could narrow it down to one system."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450908733, "post_id": 34444366, "comment_id": 56630837, "body": "@FUZxxl Ubuntu 14.04."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450909253, "post_id": 34444366, "comment_id": 56631046, "body": "Comment removed.  See, this is why I hate AT&amp;T notation. :)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450909297, "post_id": 34444366, "comment_id": 56631067, "body": "@DavidHoelzer Please do not remove your comments. They give valuable insight into what others think about the problem and are helpful for future readers."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450910124, "post_id": 34444366, "comment_id": 56631381, "body": "@FUZxxl They&#39;re not useful to future readers when they&#39;re completely wrong. ;)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450910622, "post_id": 34444366, "comment_id": 56631561, "body": "@DavidHoelzer My correction is useful but it only makes sense if your error is seen."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1450909101, "post_id": 34444578, "comment_id": 56630980, "body": "I was about to write this."}, {"owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "edited": false, "score": 0, "creation_date": 1450909722, "post_id": 34444578, "comment_id": 56631233, "body": "Since I can push strings from the data segment in this way without a format string, I thought I could do it with just random numbers. Apparently not."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1450910559, "post_id": 34444578, "comment_id": 56631542, "body": "When you pass a string that <b>is</b> the format string. You can do <code>printf(&quot;hello&quot;);</code> which has <code>hello</code> as a format string without any specifiers. Note that the prototype (as any C reference will tell you) is: <code>int printf(const char *format, ...);</code>"}], "tags": [], "owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "is_accepted": true, "score": 5, "last_activity_date": 1450909053, "creation_date": 1450909053, "answer_id": 34444578, "question_id": 34444366, "link": "https://stackoverflow.com/questions/34444366/32b-x86-assembly-scanf-usage/34444578#34444578", "title": "32b x86 assembly scanf usage", "body": "<p>You simply forgot the format string for the <code>printf</code>.\nYou effectively do <code>printf(i)</code> instead of <code>printf(\"%d\", i)</code>.\nThus change:</p>\n\n<pre><code>pushl   -4(%ebp)\ncall    printf\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>pushl   -4(%ebp)\npushl   $fmt\ncall    printf\n</code></pre>\n\n<p>PS: learn to use a debugger.</p>\n"}], "owner": {"reputation": 767, "user_id": 3002496, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SRvSe.png?s=128&g=1", "display_name": "Sunspawn", "link": "https://stackoverflow.com/users/3002496/sunspawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1754, "favorite_count": 0, "accepted_answer_id": 34444578, "answer_count": 1, "score": 2, "last_activity_date": 1450909053, "creation_date": 1450907928, "question_id": 34444366, "link": "https://stackoverflow.com/questions/34444366/32b-x86-assembly-scanf-usage", "title": "32b x86 assembly scanf usage", "body": "<p>So, I am trying to use the <code>scanf</code> function in 32bit ATT assembly and keep getting segmentation faults, despite using pretty much the same code as the example shown in <code>Computer Systems: A Programmer's Perspective</code> and the assembly generated from my own simple C input program. I have no idea what it is I am doing wrong and would appreciate some help in figuring it out.</p>\n\n<p>My test assembly code(which segfaults):</p>\n\n<pre><code>    .data\n    .align  4\nfmt:    .string \"%d\"\nstr:    .string \"Input a number: \"\n    .text\n\n    .global main\n    .type   main, @function\nmain:\n    pushl   %ebp\n    movl    %esp, %ebp\n\n    subl    $40, %esp\n\n    movl    $str, (%esp)\n    call    printf\n\n    leal    36(%esp), %eax\n    movl    %eax, 4(%esp)\n    movl    $fmt, (%esp)\n    call    scanf\n\n    pushl   -4(%ebp)\n    call    printf\n\n    movl    %ebp, %esp\n    popl    %ebp\n    ret\n</code></pre>\n\n<p>The C code and it's assembly:</p>\n\n<p>C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int i, j;\n    printf(\"%s\\n\",\"Enter 2 numbers:\");\n    scanf(\"%d %d\",&amp;i,&amp;j);\n    printf(\"i = %d and j = %d\\n\",i,j);\n    return 0;\n}\n</code></pre>\n\n<p>assembly:</p>\n\n<pre><code>    .file   \"scan.c\"\n    .section    .rodata\n.LC0:\n    .string \"Enter 2 numbers:\"\n.LC1:\n    .string \"%d %d\"\n.LC2:\n    .string \"i = %d and j = %d\\n\"\n    .text\n    .globl  main\n    .type   main, @function\nmain:\n.LFB0:\n    .cfi_startproc\n    pushl   %ebp\n    .cfi_def_cfa_offset 8\n    .cfi_offset 5, -8\n    movl    %esp, %ebp\n    .cfi_def_cfa_register 5\n    andl    $-16, %esp\n    subl    $32, %esp\n    movl    $.LC0, (%esp)\n    call    puts\n    leal    28(%esp), %eax\n    movl    %eax, 8(%esp)\n    leal    24(%esp), %eax\n    movl    %eax, 4(%esp)\n    movl    $.LC1, (%esp)\n    call    __isoc99_scanf\n    movl    28(%esp), %edx\n    movl    24(%esp), %eax\n    movl    %edx, 8(%esp)\n    movl    %eax, 4(%esp)\n    movl    $.LC2, (%esp)\n    call    printf\n    movl    $0, %eax\n    leave\n    .cfi_restore 5\n    .cfi_def_cfa 4, 4\n    ret\n    .cfi_endproc\n.LFE0:\n    .size   main, .-main\n    .ident  \"GCC: (Ubuntu 4.8.4-2ubuntu1~14.04) 4.8.4\"\n    .section    .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>The example in the book(in a cropped screenshot): <a href=\"https://i.stack.imgur.com/gPcpF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gPcpF.jpg\" alt=\"http://i.imgur.com/zYaHZP5.jpg\"></a></p>\n"}, {"tags": ["c", "static"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450906179, "post_id": 34443976, "comment_id": 56629693, "body": "You didn&#39;t post the declaration of <code>counter</code>!"}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450906219, "post_id": 34443976, "comment_id": 56629712, "body": "Done, forgot about it, it was outside main. Now it&#39;s inside, towards the end of the program."}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1450907175, "post_id": 34443976, "comment_id": 56630164, "body": "I&#39;m having trouble following this code. You call <code>fork()</code> inside a loop. Then your child process starts executing, and then it goes back to the beginning of the loop so your child process then itself calls fork() and creates another child process. How many child/grandchild/great-grandchild processes are you intending to create?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1450907248, "post_id": 34443976, "comment_id": 56630193, "body": "@KlitosKyriacou good observation, a missing <code>_exit(0)</code> perhaps."}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450907388, "post_id": 34443976, "comment_id": 56630259, "body": "You guys are right. Didn&#39;t notice that. I must re-eval my code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450907406, "post_id": 34443976, "comment_id": 56630268, "body": "To insure code fails to read a <i>string</i>: <code>if (read (connfd, message, 100) &lt;= 0) ... message[99] = 0;</code>  Add this last bit or make <code>message</code> 1 bigger than used by <code>read()</code> with a zero-ed last element."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450907826, "post_id": 34443976, "comment_id": 56630459, "body": "@chux, you mean <code>ssize_t length; if ((length = read(connfd, message, 99) &lt;= 0) ... else message[length] = &#39;\\0&#39;;</code> right?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450908266, "post_id": 34443976, "comment_id": 56630653, "body": "@iharob Something like that.  OP has not posted <code>MAXLINE</code> as used in <code>char message[MAXLINE]</code>.  Your suggestion would work is <code>MAXLINE &gt;= 100</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450908381, "post_id": 34443976, "comment_id": 56630693, "body": "What is <code>MAXLINE</code>? Why 100 in <code>read (connfd, message, 100)</code>?"}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450908927, "post_id": 34443976, "comment_id": 56630907, "body": "I&#39;ve updated the code to be more readable, and the <code>counter</code> works, but it still increments even though the message is empty. I want it to increment after, let&#39;s say, I&#39;d verify that the <code>message</code> is a string representing a number and/ or is not empty, which occurs in the child process"}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1450910245, "post_id": 34443976, "comment_id": 56631423, "body": "What you could do is have the child process return 1 for error and 0 for success. Note the statement in your code <code>continue;   &#47;&#47;keep listening</code> is wrong as this statement is actually in the child process. It should be replaced by <code>exit(1);</code>. Then in the parent process, get the exit status of the child process and if its a success, increment the counter."}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450906513, "post_id": 34444053, "comment_id": 56629844, "body": "But as a ` static `, shouldn&#39;t it be NOT affected, but keeps it&#39;s value in the entire program?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 1, "creation_date": 1450906580, "post_id": 34444053, "comment_id": 56629880, "body": "Yes, in the entire program. But once you <code>fork()</code> a copy of the memory space is created for the child, and then you cannot affect the parent anymore, unless you use shared memory but that is not necessary in this case."}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450906776, "post_id": 34444053, "comment_id": 56629977, "body": "so i moved the <code>counter</code> right above <code>switch(fork())</code>, i does increment, but not if the message is the same from the client."}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450906916, "post_id": 34444053, "comment_id": 56630049, "body": "And it seems it does not break the limit of 4."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450907368, "post_id": 34444053, "comment_id": 56630247, "body": "@Justplayit94 There is a new edit after some one who commented on your question pointed out another mistake. Also, you MUST ensure that the <code>read()</code> reads the termination <code>nul</code> byte, other wise you can add it after <code>read()</code>."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1450907314, "last_edit_date": 1450907314, "creation_date": 1450906344, "answer_id": 34444053, "question_id": 34443976, "link": "https://stackoverflow.com/questions/34443976/static-variable-in-c/34444053#34444053", "title": "Static variable in C", "body": "<p>Just move <code>counter++</code> to the parent process. When the child process starts it gets a copy of <code>counter</code> and the one you modify does not affect it's copy (original actually) in the parent process. If you update it in the parent process you will achieve what you want.</p>\n\n<pre><code>int main(int argc, char ** argv)\n{\n    int number;\n    int listenfd, connfd, n;\n    pid_t childpid;\n    socklen_t clilen;\n    char message[MAXLINE], answer[MAXLINE];\n    struct sockaddr_in clientaddr, serveraddr;\n    int counter;\n\n    counter = 0;\n    // create socket\n    if ((listenfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n    {\n        perror(\"ERROR at creating socket\\n\");\n        exit(2);\n    }\n\n    // preparation of socket address\n    serveraddr.sin_family = AF_INET;\n    serveraddr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serveraddr.sin_port = htons(PORT);\n\n    // bind the socket\n    bind(listenfd, (struct sockaddr *) &amp;serveraddr, sizeof(serveraddr));\n\n    // listen to the socket\n    listen(listenfd, LIMIT);\n\n    printf(\"Server running, waiting for connections at port : %d\\n\", PORT);\n\n    while (1)\n    {\n        clilen = sizeof(clientaddr);\n        // accept a connection\n        connfd = accept(listenfd, (struct sockaddr *) &amp;clientaddr, &amp;clilen);\n        printf(\"Recieved guest\\n\");\n        switch (fork())\n        {\n        case -1:\n            perror(\"fork err\\n\");\n            exit(2);\n        case 0:\n            /* eroare la acceptarea conexiunii de la un client */\n            if (connfd &lt; 0)\n            {\n                perror(\"[server]Eroare la accept().\\n\");\n                continue;\n            }\n\n            /* s-a realizat conexiunea, se astepta mesajul */\n            bzero(message, 100);\n            printf(\"[server]Asteptam mesajul...\\n\");\n            fflush(stdout);\n\n            /* citirea mesajului */\n            if (read(connfd, message, 100) &lt;= 0)\n            {\n                perror(\"[server]Eroare la read() de la client.\\n\");\n                close(connfd); /* inchidem conexiunea cu clientul */\n\n                continue;   /* continuam sa ascultam */\n            }\n            printf (\"[server]Message was received...%s\\n\", message);\n            fflush(stdout);\n\n            number = atoi(message);\n\n            printf(\"The number is: %d\\n\", number);\n            printf (\"%d\\n\", counter + 1);\n            _exit(0); // The child should not create further grand children\n        default:\n            counter++;\n            break;\n        }//switch\n    }//for\n    close(connfd);\n}//main\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450908232, "post_id": 34444294, "comment_id": 56630636, "body": "Thanks for the advice. I&#39;m trying actually to make a Connect 4 game between 2 players for a project at my college. And it&#39;s really bugging me out."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450908428, "post_id": 34444294, "comment_id": 56630713, "body": "Maybe c is a prerequisite for this project, but if you&#39;re free to choose the implementation and delivery mechanism - HTML all the way on this one.  It would really help simplify the presentation, handle the network layer for you, and of ourse make your game playable for anyone with a browser without building a whole ton of client apps or distributing them."}, {"owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "edited": false, "score": 0, "creation_date": 1450909005, "post_id": 34444294, "comment_id": 56630940, "body": "I am being constrained to use C. It has to be only a console type of application."}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 2, "last_activity_date": 1450907892, "last_edit_date": 1450907892, "creation_date": 1450907495, "answer_id": 34444294, "question_id": 34443976, "link": "https://stackoverflow.com/questions/34443976/static-variable-in-c/34444294#34444294", "title": "Static variable in C", "body": "<p>You appear to be forking before setting the counter.  Since <a href=\"http://linux.die.net/man/2/fork\" rel=\"nofollow\">forking duplicates the entire process</a>, the copy of counter in each child process is different from the parent.  </p>\n\n<p>Sharing variables between applications in C can be tricky, but actually there's a pretty easy fix for your case and it will improve performance too.  If you look at your code, you're forking after the connect and then handling, in the child, the possibiliy that the <code>connfd &lt; 0</code>.  If you handled that in the parent process, the counter could belong to the parent and could be incremented <em>before</em> the fork.  </p>\n\n<p>A few other notes here come to mind.  Remember, fork <em>duplicates</em> the parent process, so the children in your case are still within a <code>while(1)</code> loop.  When you <code>continue</code> you loop back to the next iteration of the <code>while(1)</code> loop, but this doesn't seem correct; you want the child process to <em>exit</em> when it's done handling the connection.   This also means as you accept connections, you fork but the fork never dies - I guess that's more a \"process leak\" than a memory leak, but will certainly eat up memory.  Finally, just to throw it out there, forking to handle each request is probably the slowest way to concurrently handle connections.  I've had great success with pthread in this case.  Since threads share a process space, the threads can even persist and handle many connections before dying ( put the connections on a queue and have the threads poll it, for example ) becasuse they can continue to share connections with their \"parent\" ( though it's really a sibling thread in this case).  </p>\n"}], "owner": {"reputation": 385, "user_id": 3071813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001850907206/picture?type=large", "display_name": "Justplayit94", "link": "https://stackoverflow.com/users/3071813/justplayit94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 34444053, "answer_count": 2, "score": -1, "last_activity_date": 1450909176, "creation_date": 1450905979, "last_edit_date": 1450909176, "question_id": 34443976, "link": "https://stackoverflow.com/questions/34443976/static-variable-in-c", "title": "Static variable in C", "body": "<p>I have this program that is a part of a server with tcp protocol, that gets a number from the client and uses it in another function.\nAlso I have a <code>static int</code> type variable that i want to count each time the server gets a message from a client, but each time it does not keep its value;\nThe variable is <code>counter</code>\nCan you guys tell me why this is happening?</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n// used port \n#define PORT 1114\n\n// error code \nextern int errno;\n\nstatic int counter;\n\nint main ()\n{\n  struct sockaddr_in server;  // structure used by server\n  struct sockaddr_in from;  \n  char message[100];         //message received from client\n  int socketDescriptor;     //socket descriptor \n\n\n  //creating socket\n  if ((socketDescriptor = socket (AF_INET, SOCK_STREAM, 0)) == -1)\n  {\n    perror (\"[server]Error at socket\\n\");\n    return errno;\n  }\n\n  //preparing data structures\n  bzero (&amp;server, sizeof (server));\n  bzero (&amp;from, sizeof (from));\n\n  //filling structures\n  server.sin_family = AF_INET;  \n\n  server.sin_addr.s_addr = htonl (INADDR_ANY);\n\n  server.sin_port = htons (PORT);\n\n  //attach socket to descriptor\n  if (bind (socketDescriptor, (struct sockaddr *) &amp;server, sizeof (struct sockaddr)) == -1)\n  {\n    perror (\"[server]Error at bind\\n\");\n    return errno;\n  }\n\n  //server is listening\n  if (listen (socketDescriptor, 2) == -1)\n  {\n    perror (\"[server]Error at listen\\n\");\n    return errno;\n  }\n\n  /serving concurrent the clients\n\n  while (1)\n  {\n    int client;\n    int length = sizeof (from);\n\n    printf (\"[server]Waiting at port %d...\\n\",PORT);\n    fflush (stdout);\n\n    //accepting client\n\n    client = accept (socketDescriptor, (struct sockaddr *) &amp;from, &amp;length);\n    counter ++;\n    switch(fork())\n    {\n      case -1: \n        perror(\"fork err\\n\");\n        exit(2);\n    case 0:\n      //error if failed connection\n      if (client &lt; 0)\n      {\n        perror (\"[server]Error at accept\\n\");\n        continue;\n      }\n      //conenction established\n      bzero (message, 100);\n      printf (\"[server]Waiting for message...\\n\");\n      fflush (stdout);\n\n      //reading message\n      if (read (client, message, 100) &lt;= 0)\n      {\n        perror (\"[server]Error at read\\n\");\n        close (client); //closing connection\n        continue;   //keep listening\n      }\n\n      printf (\"[server]Message was received%s\\n\", message);\n      //this is where I want to increment counter, when I want to  verify     message\n\n      int number;\n      number = atoi(message);//convert char to int\n\n      printf(\"The number is: %d\\n\", number);//print number\n\n      printf(\"The counter is : %d\\n\", counter);\n\n      fflush(stdout);\n\n  exit(2);\n    }\n  close (client);\n  }      /* while */\n}       /* main */\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 11, "creation_date": 1450901333, "post_id": 34442959, "comment_id": 56627606, "body": "and how do you check it? using <code>%d</code> in printf?"}, {"owner": {"reputation": 2971, "user_id": 1340238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe02d595bdc6beb117b7c74f3399246a?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1340238/andrew"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450901432, "post_id": 34442959, "comment_id": 56627653, "body": "@SouravGhosh, you&#39;re right - my mistake"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1450901682, "post_id": 34442959, "comment_id": 56627769, "body": "Signed or unsigned, it&#39;s a matter of interpretation, not bit values."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1450910023, "post_id": 34442959, "comment_id": 56631340, "body": "The code is slightly inconsistent: <code>~0</code> is an <code>int</code>.  It would be better to write: <code>return (x &gt;&gt; (p + 1 - n)) &amp; ~(~0U &lt;&lt; n);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450905294, "post_id": 34443079, "comment_id": 56629346, "body": "using <code>%d</code> in this case just causes undefined behaviour.  C has value semantics; a function returning <code>unsigned</code> does actually return a value of type <code>unsigned int</code>."}, {"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "edited": false, "score": 0, "creation_date": 1450906260, "post_id": 34443079, "comment_id": 56629731, "body": "Technically, you&#39;re correct, but wouldn&#39;t the underlying data be exactly the same in this case?"}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1450912970, "post_id": 34443079, "comment_id": 56632354, "body": "What do you mean by &quot;underlying data type?&quot;  at the machine instruction level, data doesn&#39;t have a type itself - the type of instruction determines how it interprets the data."}, {"owner": {"reputation": 2971, "user_id": 1340238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe02d595bdc6beb117b7c74f3399246a?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1340238/andrew"}, "edited": false, "score": 0, "creation_date": 1450923148, "post_id": 34443079, "comment_id": 56634802, "body": "I originally had <code>%d</code> and that&#39;s where the -4 came from - once I switched it to <code>%u</code> everything was fixed"}], "tags": [], "owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "is_accepted": true, "score": 3, "last_activity_date": 1450905074, "last_edit_date": 1450905074, "creation_date": 1450901890, "answer_id": 34443079, "question_id": 34442959, "link": "https://stackoverflow.com/questions/34442959/unsigned-return-type-returns-signed-number-c/34443079#34443079", "title": "Unsigned return type returns signed number C", "body": "<p>Even if the function declares it is returning <code>unsigned</code>, the actual use of the value after return determines how it is interpreted.</p>\n\n<p>For example, <code>printf(\"%d\", x);</code> interprets <code>x</code> as a <code>signed int</code>, even if it's declared as anything else.</p>\n"}], "owner": {"reputation": 2971, "user_id": 1340238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe02d595bdc6beb117b7c74f3399246a?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1340238/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "closed_date": 1450915180, "accepted_answer_id": 34443079, "answer_count": 1, "score": -1, "last_activity_date": 1450905086, "creation_date": 1450901248, "last_edit_date": 1450905086, "question_id": 34442959, "link": "https://stackoverflow.com/questions/34442959/unsigned-return-type-returns-signed-number-c", "closed_reason": "Not suitable for this site", "title": "Unsigned return type returns signed number C", "body": "<p>I'm currently going through K&amp;R C, and I got to the section on bitwise operators with this example: </p>\n\n<pre><code>unsigned getbits(unsigned x, int p, int n) {\n  return (x &gt;&gt; (p + 1 - n)) &amp; ~(~0 &lt;&lt; n);\n}\n</code></pre>\n\n<p>I've been playing around with it, and I did the following: </p>\n\n<pre><code>unsigned getbits(unsigned x, int p, int n) {\n   return (~0 &lt;&lt; n);\n}\n</code></pre>\n\n<p>I fed in <code>n = 2</code>, and the result I got was <code>-4</code>. The result in bit form should be this (for a 32 bit integer), if I'm not mistaken: \n<code>1111 1111 1111 1100</code><br>\nIf the return type of the function wasn't unsigned, I can kind of see where the -4 would come from, but because the return type is unsigned, shouldn't this be returning an unsigned number? Why is it returning -4?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "assembly"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 3, "creation_date": 1450901415, "post_id": 34442943, "comment_id": 56627646, "body": "Whoever wrote this code should be executed. This code takes the abuse of operator precedence to a new level."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1450901626, "post_id": 34442943, "comment_id": 56627741, "body": "Isn&#39;t this is just pseudo <code>C</code> code optimized by the compiler?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1450901788, "post_id": 34442943, "comment_id": 56627824, "body": "I suspect this is some kind of misunderstanding of the compiler-generated code. Like a sign-extend of a 32 -&gt; 64-bit number in an optimised form. Most likely (c &gt;&gt; 32) is zero."}, {"owner": {"reputation": 4309, "user_id": 3543233, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xivj6.jpg?s=128&g=1", "display_name": "MattAllegro", "link": "https://stackoverflow.com/users/3543233/mattallegro"}, "edited": false, "score": 0, "creation_date": 1450905804, "post_id": 34442943, "comment_id": 56629548, "body": "Can you please reference where did you find such code?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1450906162, "post_id": 34442943, "comment_id": 56629690, "body": "Decompiled code is not usually human readable. The decompiler is replicating all the bizarre edge quirks of the generated assembly in a high-level language, so it&#39;s going to look super weird. (Likely, here it&#39;s replicating odd overflow characteristics that the assembly happens to have.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450906373, "post_id": 34442943, "comment_id": 56629788, "body": "It would help if you tell us what <code>sizeof(int)</code> is on the machine in question, and what the type of <code>c</code> and <code>n</code> are"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 8, "creation_date": 1450906423, "post_id": 34442943, "comment_id": 56629807, "body": "@user3528438 apparently the code was generated by a decompiler -- so the decompiler must have been executed already !"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450906725, "post_id": 34442943, "comment_id": 56629957, "body": "It might also be illuminating to see the original assembly, it&#39;s probably shorter than this C code"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450930810, "post_id": 34442943, "comment_id": 56636360, "body": "This is so amazingly obfuscated yet valid that I&#39;m adding it to my secure coding course!"}], "answers": [{"comments": [{"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1450901651, "post_id": 34442983, "comment_id": 56627752, "body": "@ScottHunter With code like this, it&#39;s best not to think too much about it. If it works, fine. If it doesn&#39;t work, throw it all away and write something yourself. Don&#39;t try to understand it."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1450901857, "post_id": 34442983, "comment_id": 56627862, "body": "@MrLister: The answer came from <i>somewhere</i>; its a pretty thin one w/o some elaboration."}, {"owner": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "edited": false, "score": 0, "creation_date": 1450901872, "post_id": 34442983, "comment_id": 56627872, "body": "This code is generated by decompiler: this is C code corresponding to ASM code generated by x86 compiler. I am trying to understand why this code has been generated like this - would any malloc(N) expression in original program imply these additional alignments when compiled?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "edited": false, "score": 0, "creation_date": 1450902482, "post_id": 34442983, "comment_id": 56628133, "body": "@leo it&#39;s a way of ensuring that any negative value will cause a failed allocation. The result of the expression for any negative value is 0xffffffffffffffff."}, {"owner": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "edited": false, "score": 0, "creation_date": 1450903065, "post_id": 34442983, "comment_id": 56628371, "body": "Do I understand correctly that compiler would always generate code like this when malloc is called with signed int value? I can post original ASM code from disassembler if it helps, it&#39;s just less readable."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "edited": false, "score": 1, "creation_date": 1450903421, "post_id": 34442983, "comment_id": 56628553, "body": "@leo I can&#39;t say whether all compilers will do this. could it be that what you&#39;re actually seeing is inlined <code>calloc</code>? It&#39;s a good way of ensuring that asking for more blocks than can possibly fit in the memory model is refused."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1450909709, "post_id": 34442983, "comment_id": 56631226, "body": "To me the number <code>18446744073709551615</code> doesn&#39;t mean much, at a glance. Only after seeing it expressed in hex I went &quot;ah&quot;."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1450910417, "post_id": 34442983, "comment_id": 56631496, "body": "@Jongware thanks for pointing that out - answer updated accordingly."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1450910397, "last_edit_date": 1450910397, "creation_date": 1450901391, "answer_id": 34442983, "question_id": 34442943, "link": "https://stackoverflow.com/questions/34442943/can-someone-explain-the-meaning-of-malloc20-c-20-unsigned-int64uns/34442983#34442983", "title": "Can someone explain the meaning of malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))", "body": "<p><strike>it's rounding up to the nearest block size.</strike></p>\n\n<p>forgive me. What it's doing is calculating a multiple of c while simultaneously checking for a negative value (overflow):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdint&gt;\n\n\nsize_t foo(char c)\n{\n    return 20 * c | -(20 * (std::uint64_t)(unsigned int)c &gt;&gt; 32 != 0);\n}\n\nint main()\n{\n    using namespace std;\n    for (char i = -4 ; i &lt; 4 ; ++i)\n    {\n        cout &lt;&lt; \"input is: \" &lt;&lt; int(i) &lt;&lt; \", result is \" &lt;&lt; foo(i) &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>results:</p>\n\n<pre><code>input is: -4, result is 18446744073709551615\ninput is: -3, result is 18446744073709551615\ninput is: -2, result is 18446744073709551615\ninput is: -1, result is 18446744073709551615\ninput is: 0, result is 0\ninput is: 1, result is 20\ninput is: 2, result is 40\ninput is: 3, result is 60\n</code></pre>\n\n<blockquote>\n  <p>To me the number 18446744073709551615 doesn't mean much, at a glance. Only after seeing it expressed in hex I went \"ah\". \u2013 Jongware</p>\n</blockquote>\n\n<p>adding &lt;&lt; hex:</p>\n\n<pre><code>input is: -1, result is ffffffffffffffff\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450903674, "post_id": 34443299, "comment_id": 56628669, "body": "Ugh.  Hopefully that&#39;s from disassembling an optimized <code>if (...)</code> statement and someone didn&#39;t code that directly."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450906543, "post_id": 34443299, "comment_id": 56629859, "body": "&quot;regardless the type of c&quot; - well, if <code>c</code> were a wider type than <code>unsigned int</code> then some information is lost"}], "tags": [], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "is_accepted": false, "score": 3, "last_activity_date": 1450917650, "last_edit_date": 1450917650, "creation_date": 1450902929, "answer_id": 34443299, "question_id": 34442943, "link": "https://stackoverflow.com/questions/34442943/can-someone-explain-the-meaning-of-malloc20-c-20-unsigned-int64uns/34443299#34443299", "title": "Can someone explain the meaning of malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))", "body": "<p>Since this code is decompiled from ASM, so we can only guess what it actually does.</p>\n\n<p>Let's first format it so figure the precedence:</p>\n\n<pre><code>malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                       //this is first evaluated, promoting c to \n                       //64 bit unsigned int without doing sign\n                       //extension, regardless the type of c\n\nmalloc(20 * c | -(20 * (uint64_t)c &gt;&gt; 32 != 0))\n                  ^^^^^^^^^^^^^^^^\n                  //then, multiply by 20, with uint64 result\n\nmalloc(20 * c | -(20 * (uint64_t)c &gt;&gt; 32 != 0))\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                  //if 20c is greater than 2^32-1, then result is true,\n                  //use -1 to generate a mask of 0xffffffff,\n                  //bitwise operator | then masks 20c to 0xffffffff \n                  //(2^32-1, the maximum of size_t, input type to malloc)\n                  //regardless what 20c actually is\n\n                  //if 20c is smaller than 2^32-1, then result is false,\n                  //the mask is 0, bitwise operator | keeps the final    \n                  //input to malloc as 20c untouched\n</code></pre>\n\n<p><strong>What are 20 and 6?</strong></p>\n\n<p>Those probably come from the common usage of \n<code>malloc(sizeof(Something)*count)</code>. Those two calls to <code>malloc</code> are probably made with <code>sizeof(Something)</code> and <code>sizeof(SomethingElse)</code> evaluated to <code>20</code> and <code>6</code> at compile time.</p>\n\n<p><strong>So what this code actually does:</strong></p>\n\n<p>My guess, it's trying to prevent <code>sizeof(Something)*count</code> from overflowing and cause the <code>malloc</code> to succeed and cause buffer overflow when the memory is used.</p>\n\n<p>By evaluating the product in 64 bit unsigned <code>int</code> and test against <code>2^32-1</code>, when size is greater than <code>2^32-1</code>, the input to <code>malloc</code> is set to a very large value that makes it guaranteed to fail (No 32 bit system can allocate 2^32-1 bytes of memory).  </p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1450906818, "last_edit_date": 1450906818, "creation_date": 1450906458, "answer_id": 34444077, "question_id": 34442943, "link": "https://stackoverflow.com/questions/34442943/can-someone-explain-the-meaning-of-malloc20-c-20-unsigned-int64uns/34444077#34444077", "title": "Can someone explain the meaning of malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))", "body": "<blockquote>\n  <p>Can someone explain the purpose of these calculations? </p>\n</blockquote>\n\n<p>It is important to understand that compiling changes the semantic meaning of code. Much unspecified behavior of the original code becomes specified by the compilation process.</p>\n\n<p>IDA has no idea whether things the generated assembly code just happens to do are important or not. To be safe, it tries to perfectly replicate the behavior of the assembly code, even in cases that cannot possibly happen given the way the code is used.</p>\n\n<p>Here, IDA is probably replicating the overflow characteristics that the conversion of types just happens to have on this platform. It can't just replicate the original C code because the original C code likely had unspecified behavior for some values of <code>c</code> or <code>n</code>, likely negative ones.</p>\n\n<p>For example, say I write this C code: <code>int f(unsigned j) { return j; }</code>. My compiler will likely turn that into very simple assembly code giving whatever behavior for negative values of <code>j</code> that my platform just happens to give.</p>\n\n<p>But if you decompile the generated assembly, you <em>cannot</em> decompile it to <code>int f(unsigned j) { return j; }</code> because that will not behave the same as the my assembly code did on platforms with different overflow behavior. That could compile to code (on other platforms) that returns different values than my assembly code does for negative values of <code>j</code>.</p>\n\n<p>So it is often literally impossible (in fact, incorrect) to decompile C code into the original code, it will often have these kinds of \"portably replicate this platform's behavior\" oddities.</p>\n"}, {"comments": [{"owner": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "edited": false, "score": 0, "creation_date": 1450971180, "post_id": 34445284, "comment_id": 56651522, "body": "You are right, this code was compiled by MSVC and its disassembly listing is almost identical to yours. Thank you!"}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 3, "last_activity_date": 1450913318, "creation_date": 1450913318, "answer_id": 34445284, "question_id": 34442943, "link": "https://stackoverflow.com/questions/34442943/can-someone-explain-the-meaning-of-malloc20-c-20-unsigned-int64uns/34445284#34445284", "title": "Can someone explain the meaning of malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))", "body": "<p>I'm guessing that original source code used the C++ <code>new</code> operator to allocate an array and was compiled with Visual C++. As user3528438's answer indicates this code is meant to prevent overflows. Specifically it's a 32-bit unsigned saturating multiply. If the result of the multiplication would be greater than 4,294,967,295, the maximum value of a 32-bit unsigned number, the result is clamped or \"saturated\" to that maximum. </p>\n\n<p>Since Visual Studio 2005, Microsoft's C++ compiler has <a href=\"http://blogs.msdn.com/b/michael_howard/archive/2005/12/06/500629.aspx\" rel=\"nofollow\">generated code to protect against overflows</a>. For example, I can generate assembly code that could be decompiled into your examples by compiling the following with Visual C++:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nvoid *\noperator new[](size_t n) {\n        return malloc(n);\n}\n\nstruct S {\n        char a[20];\n};\n\nstruct T {\n        char a[6];\n};\n\nvoid\nfoo(int n, S **s, T **t) {\n        *s = new S[n];\n        *t = new T[n * 2];\n}\n</code></pre>\n\n<p>Which, with Visual Studio 2015's compiler generates the following assembly code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    mov esi, DWORD PTR _n$[esp]\n    xor ecx, ecx\n    mov eax, esi\n    mov edx, 20                 ; 00000014H\n    mul edx\n    seto    cl\n    neg ecx\n    or  ecx, eax\n    push    ecx\n    call    _malloc\n    mov ecx, DWORD PTR _s$[esp+4]\n; Line 19\n    mov edx, 6\n    mov DWORD PTR [ecx], eax\n    xor ecx, ecx\n    lea eax, DWORD PTR [esi+esi]\n    mul edx\n    seto    cl\n    neg ecx\n    or  ecx, eax\n    push    ecx\n    call    _malloc\n</code></pre>\n\n<p>Most of the decompiled expression is actually meant to handle just one assembly statement. The assembly instruction <code>seto cl</code> sets CL to 1 if the previous MUL instruction overflows, otherwise it sets CL to 0. Similarly the expression <code>20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0</code> evaluates to 1 if the result of <code>20 * c</code> overflows, and evaluates to 0 otherwise.</p>\n\n<p>If this overflow protection wasn't there and the result of <code>20 * c</code> did actually overflow then the call to <code>malloc</code> would probably succeed, but allocate much less memory than the program intended.  The program would then likely write past the end of the memory actually allocated and trash other bits of memory. This would amount to a buffer overrun, one that could be potentially exploited by hackers.</p>\n"}], "owner": {"reputation": 521, "user_id": 1646681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9c55b9cbeb52f3f6a9ad14504e926b8c?s=128&d=identicon&r=PG", "display_name": "leo", "link": "https://stackoverflow.com/users/1646681/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 34445284, "answer_count": 4, "score": 1, "last_activity_date": 1450974218, "creation_date": 1450901190, "last_edit_date": 1450974218, "question_id": 34442943, "link": "https://stackoverflow.com/questions/34442943/can-someone-explain-the-meaning-of-malloc20-c-20-unsigned-int64uns", "title": "Can someone explain the meaning of malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))", "body": "<p>In decompiled code generated by IDA I see expressions like:</p>\n\n<pre><code>malloc(20 * c | -(20 * (unsigned __int64)(unsigned int)c &gt;&gt; 32 != 0))\nmalloc(6  * n | -(3  * (unsigned __int64)(unsigned int)(2 * n) &gt;&gt; 32 != 0))\n</code></pre>\n\n<p>Can someone explain the purpose of these calculations?\n<br/>c and n are int (signed integer) values.</p>\n\n<p><strong>Update.</strong>\n<br/>Original C++ code was compiled with MSVC for 32-bit platform.\n<br/>Here's assembly code for second line of decompiled C-code above (malloc(6 * ..)):</p>\n\n<pre><code>mov     ecx, [ebp+pThis]\nmov     [ecx+4], eax\nmov     eax, [ebp+pThis]\nmov     eax, [eax]\nshl     eax, 1\nxor     ecx, ecx\nmov     edx, 3\nmul     edx\nseto    cl\nneg     ecx\nor      ecx, eax\nmov     esi, esp\npush    ecx             ; Size\ncall    dword ptr ds:__imp__malloc\n</code></pre>\n"}, {"tags": ["c++", "c", "zero"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 5, "creation_date": 1450900214, "post_id": 34442710, "comment_id": 56627110, "body": "Just keep track of the sign of the last non-zero sample. If the sign changes, you have a zero crossing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1450900502, "post_id": 34442710, "comment_id": 56627240, "body": "Be aware that floating point values are rarely equal to zero.  You should compare against an <i>epsilon</i> or tolerance value, such as 1E-06; anything less than this value is considered zero."}, {"owner": {"reputation": 32649, "user_id": 316469, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7b88514bd3cdfab33fa64342aa1fcdc9?s=128&d=identicon&r=PG", "display_name": "Duck", "link": "https://stackoverflow.com/users/316469/duck"}, "edited": false, "score": 0, "creation_date": 1450900572, "post_id": 34442710, "comment_id": 56627273, "body": "I did that and I ended with a bunch of zeros in a row, making it impossible to detect zero crossing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1450900581, "post_id": 34442710, "comment_id": 56627277, "body": "You may want to consider using Fixed Point math to get better accuracy."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1450900917, "post_id": 34442710, "comment_id": 56627426, "body": "It would be interesting to know <i>why</i> you want to detect zero crossings. One reason is that&#39;s a good time to switch output routes, to avoid a sudden level change. If so that can be done when the signal is near zero, rather than when crossing."}, {"owner": {"reputation": 8138, "user_id": 821878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2vRIG.gif?s=128&g=1", "display_name": "Ryan Bemrose", "link": "https://stackoverflow.com/users/821878/ryan-bemrose"}, "edited": false, "score": 0, "creation_date": 1450902721, "post_id": 34442710, "comment_id": 56628230, "body": "An audio signal crosses zero thousands of times per second (twice the highest frequency in Hz).  It will be very difficult to get timing right for anything but the lowest frequency sounds.  It&#39;s better to switch outputs during a period of silence - a large number of identical (ideally zero, but not always) samples in a row."}, {"owner": {"reputation": 8138, "user_id": 821878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2vRIG.gif?s=128&g=1", "display_name": "Ryan Bemrose", "link": "https://stackoverflow.com/users/821878/ryan-bemrose"}, "edited": false, "score": 0, "creation_date": 1450902847, "post_id": 34442710, "comment_id": 56628281, "body": "Another thing to think about: A DC offset in your signal - being the signal not centered on zero - will throw a monkey wrench into all of these calculations.  Does it &quot;count&quot; if the signal drops from 0.4 to 0.1, and then starts going back up?  What if the signal never crosses zero?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1450907144, "post_id": 34442710, "comment_id": 56630153, "body": "if you have an unsigned integer representation, you will never cross zero..."}], "answers": [{"comments": [{"owner": {"reputation": 32649, "user_id": 316469, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7b88514bd3cdfab33fa64342aa1fcdc9?s=128&d=identicon&r=PG", "display_name": "Duck", "link": "https://stackoverflow.com/users/316469/duck"}, "edited": false, "score": 0, "creation_date": 1450901980, "post_id": 34442922, "comment_id": 56627920, "body": "Ok, I understand that this method is better than the other one, but suppose there are a lots of zeros in the middle, like -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 and it will detect a zero cross on the last 1, but a lot of time passed and the wave may be out of phase... I am just saying."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 32649, "user_id": 316469, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7b88514bd3cdfab33fa64342aa1fcdc9?s=128&d=identicon&r=PG", "display_name": "Duck", "link": "https://stackoverflow.com/users/316469/duck"}, "edited": false, "score": 0, "creation_date": 1450902921, "post_id": 34442922, "comment_id": 56628306, "body": "@SpaceDog well, you can&#39;t possibly detect the crossing before the last sample since that&#39;s the sample on which the zero is finally crossed in the diginal signal. It&#39;s impossible to figure out on which time point of original signal the zero would have been crossed. I guess the best quess would be the middle zero, but in order to figure out whether you&#39;re currently at a middle zero, you must keep track of the index of the last non-zero sample and look ahead for the next crossing which requires buffering the signal."}, {"owner": {"reputation": 4718, "user_id": 172218, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ulbsn.jpg?s=128&g=1", "display_name": "j b", "link": "https://stackoverflow.com/users/172218/j-b"}, "edited": false, "score": 0, "creation_date": 1541436828, "post_id": 34442922, "comment_id": 93208102, "body": "Why is this method better than the accepted answer?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1450901532, "last_edit_date": 1450901532, "creation_date": 1450901115, "answer_id": 34442922, "question_id": 34442710, "link": "https://stackoverflow.com/questions/34442710/options-for-detecting-zero-cross-of-audio/34442922#34442922", "title": "Options for detecting zero cross of audio", "body": "<p>Keep record of the sign of last non-zero sample and only consider the result of the multiplication if the current sample is non-zero as well (zero samples are never crossings themselves).</p>\n\n<pre><code>for (int i=0, previous=sign(data[0]); i&lt;numFrames-1; i++) {\n    if(int current = sign(data[i])) {\n        if(sign(previous * current) == -1)\n            printf(\"zero cross\");\n        previous = current;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1451680676, "last_edit_date": 1451680676, "creation_date": 1450906953, "answer_id": 34444179, "question_id": 34442710, "link": "https://stackoverflow.com/questions/34442710/options-for-detecting-zero-cross-of-audio/34444179#34444179", "title": "Options for detecting zero cross of audio", "body": "<p>Ignore the value and only use the sign to detect crossing.</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nfor (int i=0; i&lt;numFrames-1; i++) {\n  if (signbit(data[i+1]) != signbit(data[i])) printf(\"zero cross\");\n}\n</code></pre>\n\n<blockquote>\n  <p>The signbit macro reports the sign of all values, including infinities, zeros, and NaNs.</p>\n</blockquote>\n\n<p>[Edit]</p>\n\n<p><code>signbit()</code> returns a nonzero value if and only if the sign of its argument value is negative.  So it is possible that 2 different negative values may return different nonzero values.  Better to use:</p>\n\n<pre><code>  if (!signbit(data[i+1]) != !signbit(data[i])) printf(\"zero cross\");\n</code></pre>\n"}], "owner": {"reputation": 32649, "user_id": 316469, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/7b88514bd3cdfab33fa64342aa1fcdc9?s=128&d=identicon&r=PG", "display_name": "Duck", "link": "https://stackoverflow.com/users/316469/duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2321, "favorite_count": 0, "accepted_answer_id": 34444179, "answer_count": 2, "score": 1, "last_activity_date": 1451680676, "creation_date": 1450900102, "last_edit_date": 1495540343, "question_id": 34442710, "link": "https://stackoverflow.com/questions/34442710/options-for-detecting-zero-cross-of-audio", "title": "Options for detecting zero cross of audio", "body": "<p>I have live audio coming in and I need to detect zero crossings.</p>\n\n<p>The simpler algorithm to do this, like stated by <a href=\"https://stackoverflow.com/questions/13504019/number-of-zero-crossings-equation\">this question</a> is not acceptable for what I need. This algorithm detects a zero crossing by taking the sign of the multiplication of the current item with the previous one.</p>\n\n<p>This is a simple example of this method failing:</p>\n\n<blockquote>\n  <p>-1, -0.5, 0, 0, 0.32, 0.5...</p>\n</blockquote>\n\n<p>Two zeros in a row and the algorithm will fail.</p>\n\n<p>This method is implemented by this:</p>\n\n<pre><code>int sign(float value) {\n  if (value &lt; 0) {\n    return -1;\n  } else if (value &gt; 0) {\n    return 1;\n  }\n  return 0;\n}\n\nfor (int i=0; i&lt;numFrames-1; i++) {\n    int signR = sign(data[i+1] * data[i]);        \n    if (signR == 0) printf(\"zero cross\");\n    // but this will fail for data[i+1] = data[i] = 0, for example\n\n}\n</code></pre>\n\n<p>What other options of algorithms do I have to detect zero crossings?</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1450900178, "post_id": 34442705, "comment_id": 56627091, "body": "I don&#39;t think so. Please provide more information."}, {"owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450900501, "post_id": 34442705, "comment_id": 56627239, "body": "what kind of other information? I&#39;m typing the code from a book <i>C for Linux Programming</i> I&#39;m pretty much new to C"}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 7, "creation_date": 1450900502, "post_id": 34442705, "comment_id": 56627241, "body": "The error output shows the closing brace on line 6, but your code has the closing brace on line 7. You would get <i>exactly</i> that error if the <code>return 0;</code> line was missing."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450900525, "post_id": 34442705, "comment_id": 56627256, "body": "That code doesn&#39;t trigger this warning, please read my answer. Try to compile the code you posted is there a warning? No there is no warning because the code is <i>perfect</i>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450901294, "post_id": 34442705, "comment_id": 56627587, "body": "Save the file, then run the compiler again..."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1450901313, "post_id": 34442705, "comment_id": 56627594, "body": "@Prasanna Did you <i>save</i> the file? :)"}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450900698, "post_id": 34442753, "comment_id": 56627334, "body": "Correction: <code>main()</code> implicitly returns <code>0</code> when control reaches its end without encountering a <code>return</code> statement. This happens <i>before</i> the programs exits."}, {"owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "edited": false, "score": 0, "creation_date": 1450901174, "post_id": 34442753, "comment_id": 56627542, "body": "Please have a look at the screenshot in my question now to see if something is wrong"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 4, "last_activity_date": 1450900602, "last_edit_date": 1450900602, "creation_date": 1450900289, "answer_id": 34442753, "question_id": 34442705, "link": "https://stackoverflow.com/questions/34442705/hello-world-program-gives-an-error-on-void-in-main/34442753#34442753", "title": "Hello world program gives an error on void in main", "body": "<p>The error doesn't have anything to do with the <code>void</code> in the signature of <code>main()</code> <code>int main(void)</code> is correct and is the way to define <code>main()</code> when you don't need to handle command line arguments. </p>\n\n<p>The error means that you defined <code>int main(void)</code> and you did not return a value from the function. Like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    printf(\"Hello World!\\n\");    \n}\n</code></pre>\n\n<p>This warning was removed for <code>main()</code> in newer versions of <em>gcc</em> because <code>main()</code> implicitly returns <code>0</code> when the program exits unless you indicate otherwise with <code>exit()</code> or an explict return from <code>main()</code>.</p>\n\n<p>Normal functions still trigger this warning and it helps in prevention of <em>undefined behavior</em> due to not returning from a function and trying to capture the return value.</p>\n"}, {"comments": [{"owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "edited": false, "score": 0, "creation_date": 1450901398, "post_id": 34442936, "comment_id": 56627634, "body": "Your compile shell command compiled the program without warnings. What command should I use to find out the <code>std</code> and where can I read more about it?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "edited": false, "score": 0, "creation_date": 1450901514, "post_id": 34442936, "comment_id": 56627685, "body": "You can find more info here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Standards.html\" rel=\"nofollow noreferrer\">Language Standards Supported by GCC</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1450901592, "post_id": 34442936, "comment_id": 56627716, "body": "But before diving into standards, learn the correct workflow and how to read error messages. It&#39;s obvious, that you just haven&#39;t saved your file before compilation"}, {"owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450901658, "post_id": 34442936, "comment_id": 56627757, "body": "@EugeneSh. You are probably right. But why the code compiled with warnings in the first place is the question now"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450901703, "post_id": 34442936, "comment_id": 56627779, "body": "Is it still having this warning? Please perform <code>cat helloworld.c</code> in the console and check if the code is identical to what you have posted."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "edited": false, "score": 0, "creation_date": 1450901802, "post_id": 34442936, "comment_id": 56627830, "body": "@Prasanna That&#39;s because you are using a older gcc (without the return statement) that compiles code in gnu90, in which you need to provide an explicit return (otherwise, undefined). But that&#39;s no longer needed in C99 or C11. Hence, it disappears with <code>std=c99</code> or <code>-std=c11</code>."}, {"owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "edited": false, "score": 0, "creation_date": 1450901914, "post_id": 34442936, "comment_id": 56627901, "body": "No. Not any more. But I still don&#39;t understand why I got the warning in the first place and then i introduce this <code>std</code> - it compiles without warnings. Back again I passed my <code>gcc...</code> command and now there no warnings. Surely there is something that I haven&#39;t captured"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1450902108, "post_id": 34442936, "comment_id": 56627963, "body": "I am repeating in the third time - <i>you haven&#39;t saved your source file previously</i>. Now it is saved, so compiling without warnings."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1450909912, "post_id": 34442936, "comment_id": 56631293, "body": "I suspect the same, @EugeneSh. IF the OP disagrees, I suggest he use cat at the command line between compilations to prove what&#39;s on disk.  Screenshots of editors and terminal windows next to them do <i>not</i> capture meaningful file content."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1450901167, "creation_date": 1450901167, "answer_id": 34442936, "question_id": 34442705, "link": "https://stackoverflow.com/questions/34442705/hello-world-program-gives-an-error-on-void-in-main/34442936#34442936", "title": "Hello world program gives an error on void in main", "body": "<p>The only way that warning could be for <code>main()</code> function is if you don't have a return statement <em>and</em> you are compiling in C89/C90 mode.</p>\n\n<p>Since C99, a return statement at the end of <code>main()</code> is not required and it'll be assumed to <code>return 0;</code> if control returns from <code>main()</code>'s end. So compile in c99 or C11 mode:</p>\n\n<pre><code>gcc -Wall -ggdb -std=c11 helloworld.c -o hello\n</code></pre>\n\n<p>which won't trigger that warning. Or make sure you have <code>return</code> statement if you are compiling in c89/C90. Until recently (at least upto gcc 4.9), the default mode in gcc is <code>gnu90</code>. So you would get that warning withot a return statement if you don't pass<code>std=</code>.</p>\n\n<p>I presume you don't actually have <code>return 0;</code> in your real code that produces this warning as it wouldn't matter in what mode of C you are compiling it if you had an explicit <code>return</code> statement.</p>\n"}], "owner": {"reputation": 293, "user_id": 3799061, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d6be43888ffbde83daf4bc285a84bde9?s=128&d=identicon&r=PG", "display_name": "Prasanna", "link": "https://stackoverflow.com/users/3799061/prasanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 34442936, "answer_count": 2, "score": -2, "last_activity_date": 1450901167, "creation_date": 1450900083, "last_edit_date": 1450901082, "question_id": 34442705, "link": "https://stackoverflow.com/questions/34442705/hello-world-program-gives-an-error-on-void-in-main", "title": "Hello world program gives an error on void in main", "body": "<p>I have typed in the following code in Ubuntu using Emacs and compiled using the command line</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  printf(\"Hello World!\\n\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>Having the void in the main function argument returns the following warning</p>\n\n<pre>\nhelloworld.c: In function \u2018main\u2019:\nhelloworld.c:6:1: warning: control reaches end of non-void function [-Wreturn-type]\n }\n ^\n</pre>\n\n<p>When I removed the \"void\" within the parenthesis the program compiled without any errors. What is incorrect in have <code>main(void)</code> in this program?</p>\n\n<p>Compilation command is \n<code>gcc -Wall -ggdb helloworld.c -o hello</code></p>\n\n<p>Edit:\nThis is the screenshot which I would like to share\n<a href=\"https://i.stack.imgur.com/RHbla.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RHbla.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "linux", "linux-kernel", "load-balancing"], "answers": [{"comments": [{"owner": {"reputation": 2805, "user_id": 4568212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EFy85.jpg?s=128&g=1", "display_name": "Punit Vara", "link": "https://stackoverflow.com/users/4568212/punit-vara"}, "reply_to_user": {"reputation": 660, "user_id": 1951075, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/367d593180c9306bb7df045936342b80?s=128&d=identicon&r=PG", "display_name": "Noamiko", "link": "https://stackoverflow.com/users/1951075/noamiko"}, "edited": false, "score": 0, "creation_date": 1451383211, "post_id": 34499367, "comment_id": 56758454, "body": "<i>task_h_load is used to calculate weight of task.</i> Read answer from this statement.If you still want me to point out something I would be happy to improve answer :-)"}, {"owner": {"reputation": 860, "user_id": 1067642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42ff07397a2c55be5713a95d56528301?s=128&d=identicon&r=PG", "display_name": "boaz", "link": "https://stackoverflow.com/users/1067642/boaz"}, "edited": false, "score": 0, "creation_date": 1451407720, "post_id": 34499367, "comment_id": 56771569, "body": "Hi, I agreed with him... the answer does not answer my real question but gives a lot of info from the surrounding..."}, {"owner": {"reputation": 2805, "user_id": 4568212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EFy85.jpg?s=128&g=1", "display_name": "Punit Vara", "link": "https://stackoverflow.com/users/4568212/punit-vara"}, "reply_to_user": {"reputation": 860, "user_id": 1067642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42ff07397a2c55be5713a95d56528301?s=128&d=identicon&r=PG", "display_name": "boaz", "link": "https://stackoverflow.com/users/1067642/boaz"}, "edited": false, "score": 0, "creation_date": 1451408052, "post_id": 34499367, "comment_id": 56771750, "body": "Thank for comment @boaz So do you want to understand the pure code ? Is it okay for you if I would describe what h_load do so and so ..?"}, {"owner": {"reputation": 2805, "user_id": 4568212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EFy85.jpg?s=128&g=1", "display_name": "Punit Vara", "link": "https://stackoverflow.com/users/4568212/punit-vara"}, "reply_to_user": {"reputation": 860, "user_id": 1067642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42ff07397a2c55be5713a95d56528301?s=128&d=identicon&r=PG", "display_name": "boaz", "link": "https://stackoverflow.com/users/1067642/boaz"}, "edited": false, "score": 0, "creation_date": 1451408531, "post_id": 34499367, "comment_id": 56772071, "body": "I actually shown What task_h_load do how Actually cfs works to calculate it That also I have shown.If you look into each and every link you can understand actually your question But though you point me out specific points I would love to improve answer."}], "tags": [], "owner": {"reputation": 2805, "user_id": 4568212, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EFy85.jpg?s=128&g=1", "display_name": "Punit Vara", "link": "https://stackoverflow.com/users/4568212/punit-vara"}, "is_accepted": false, "score": 14, "last_activity_date": 1451782581, "last_edit_date": 1451782581, "creation_date": 1451330254, "answer_id": 34499367, "question_id": 34442691, "link": "https://stackoverflow.com/questions/34442691/linux-kernel-task-h-load/34499367#34499367", "title": "Linux Kernel- task_h_load", "body": "<p>Load balancing is invoked if SMP is configured.Linux uses <a href=\"http://www.ibm.com/developerworks/library/l-completely-fair-scheduler/\" rel=\"nofollow noreferrer\">Completely Fair Scheduler</a>(CFS) to schedule each task so that each one obtain \u201cfair\u201d share of the processor time.. CFS uses concept of <a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow noreferrer\">red-black tree</a>. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZlNeJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZlNeJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Scheduler records the current time when a task enters into the run queue. While the process waits for processor time, it's \u201cwait\u201d value gets incremented by an amount derived from the total number of tasks currently in the run queue and the process priority. When processor runs this task ,this \"wait\" value gets decremented.  If this value drops below certain value then scheduler will preempt the task and other task come closer to processor to execute. CFS always try to keep situation ideal by keeping \"wait\" value zero. </p>\n\n<p>There are two functions in linux <code>load_balance</code> and <code>select_task_rq_fair()</code> which perform the task of load balance. </p>\n\n<p>In simple word CFS load balance mechanism offload the busy CPU to less busy or ideal one.</p>\n\n<p><code>task_h_load</code> is used to calculate weight of task. </p>\n\n<blockquote>\n  <p>What I don't understand is what/how the load is calculated in\n  task_h_load.\n  how it is calculated in the task_h_load function?</p>\n</blockquote>\n\n<p>This weight factor depends on nice value of the process. </p>\n\n<pre><code>weighting factor = weight of process with nice value 0 / weight of current task;\n</code></pre>\n\n<p>where \u2018<a href=\"http://lxr.free-electrons.com/source/kernel/sched/sched.h#L276\" rel=\"nofollow noreferrer\">weight</a>\u2019 is approximately equivalent to 1024 * (1.25)^(-nice)</p>\n\n<p>For example : \nweight is 820 for nice value 1\nweight is 1277 for nice value -1</p>\n\n<p><a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c#L5893\" rel=\"nofollow noreferrer\">task_h_load</a><br>\nFor more load-balance methods and basics refer <a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c?v=3.14#L4587\" rel=\"nofollow noreferrer\">kernel comment</a> \n<code>task_h_load</code> use  <code>update_cfs_rq_h_load</code> to calculate hierarchical load of run queue for fair time scheduling and which use  cfs_rq_load_avg return average load of runqueue <a href=\"http://lxr.free-electrons.com/source/include/linux/sched.h#L1192\" rel=\"nofollow noreferrer\">load_avg</a>. </p>\n\n<p>Virtual run time is the weighted time a task has run on the CPU. CFS always try to keep <a href=\"http://www.cs.columbia.edu/~krj/os/lectures/L12-LinuxSched.pdf\" rel=\"nofollow noreferrer\">this</a> Red-black tree in balance. </p>\n\n<p><a href=\"https://i.stack.imgur.com/FPUao.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FPUao.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>&lt;--smaller value -----------vruntime value--------larger value--></strong></p>\n\n<p>Each runnable task is placed in self balancing Red Black tree based on <code>vruntime</code>. If task is ready to run (means task is not waiting for any resource), It is placed to tree. If task is waiting for some resource (i.e waiting for I/O  )then it is removed. Tasks those have less processing time (means smaller <code>vruntime</code> ) are towards left side of tree and tasks having more processing time are right side of tree. </p>\n\n<p>Left node has the smallest key value (For CFS ,it is task with higher priority). Self balancing red black tree need O(lgN) operation to navigate towards left node. Scheduler caches this value in <code>rb_leftmost</code>. By retrieving only this value ,scheduler determine which task to run next</p>\n\n<p>This load balance is used for non real task only <a href=\"http://www.linuxjournal.com/magazine/real-time-linux-kernel-scheduler\" rel=\"nofollow noreferrer\">for real time</a> task push-pull operations are used which is  developed by Steven Rostedt and Gregory Haskins</p>\n\n<p>One more thing about CFS is also helpful in Fair Group Scheduling .Consider <a href=\"http://criticalblue.com/news/wp-content/uploads/2013/12/linux_scheduler.pdf\" rel=\"nofollow noreferrer\">below figure</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/UBMYm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UBMYm.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c?v=3.14#L4980\" rel=\"nofollow noreferrer\"><code>move_task</code></a> is simply try to move up imbalance weighted load (means after calculating load factor as shown above ) from busies to <code>this_rq</code>. It try to equal the load balance of both run queue so that both can spare \"fair\" processor time.</p>\n\n<p><code>detach_task</code> detach the task for the migration specified in <code>env</code> pointer of linux kernel.</p>\n\n<p><code>detach_one_task</code> tries to dequeue exactly one task from env->src_rq. </p>\n\n<p><a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c#L5702\" rel=\"nofollow noreferrer\"><code>detach_tasks()</code></a> tries to detach up to imbalance weighted load from\n<code>busiest_rq</code>. And it  returns number of detached tasks or else zero if fail to detach.</p>\n\n<p>To attach this detached task to new <code>rq</code>(run queue) , <code>attach_task, attach_one_task,attach_tasks</code> is used according to situation.</p>\n\n<p>New warning check <a href=\"http://lxr.free-electrons.com/source/include/linux/lockdep.h#L365\" rel=\"nofollow noreferrer\"><code>lockdep_assert_held()</code></a> is introduced in <code>detach_tasks</code> which was not present in <code>move_tasks</code></p>\n\n<p><a href=\"https://lwn.net/Articles/80911/\" rel=\"nofollow noreferrer\">On multi-processor it is not easy to move task so easily</a> so cfs do domain specific load-balancing as below:\n<a href=\"https://i.stack.imgur.com/NoCBr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NoCBr.png\" alt=\"enter image description here\"></a></p>\n\n<p>For all this to understand I would like you to go through following reference </p>\n\n<ol>\n<li><p><a href=\"https://lists.linaro.org/pipermail/linaro-dev/2012-November/014472.html\" rel=\"nofollow noreferrer\">Per-Entity-Load-Tracking metric for load balancing</a></p></li>\n<li><p><a href=\"https://oakbytes.wordpress.com/2012/07/03/linux-scheduler-cfs-and-virtual-run-time/\" rel=\"nofollow noreferrer\">weight factor</a></p></li>\n<li><p><a href=\"https://doc.opensuse.org/documentation/html/openSUSE_121/opensuse-tuning/cha.tuning.taskscheduler.html\" rel=\"nofollow noreferrer\">Open-suse</a></p></li>\n<li><p><a href=\"http://www.informit.com/articles/article.aspx?p=101760\" rel=\"nofollow noreferrer\">Robert-love Chapter 3</a></p></li>\n<li><p><a href=\"https://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/6_CPU_Scheduling.html\" rel=\"nofollow noreferrer\">CPU-scheduling</a></p></li>\n</ol>\n\n<p>I specially read all these documentation to answer your question I hope you don't mind to comment if something is missing.</p>\n"}, {"tags": [], "owner": {"reputation": 660, "user_id": 1951075, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/367d593180c9306bb7df045936342b80?s=128&d=identicon&r=PG", "display_name": "Noamiko", "link": "https://stackoverflow.com/users/1951075/noamiko"}, "is_accepted": true, "score": 8, "last_activity_date": 1451785351, "last_edit_date": 1451785351, "creation_date": 1451574263, "answer_id": 34548159, "question_id": 34442691, "link": "https://stackoverflow.com/questions/34442691/linux-kernel-task-h-load/34548159#34548159", "title": "Linux Kernel- task_h_load", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Completely_Fair_Scheduler\" rel=\"nofollow\">CFS</a> holds a tree of \"scheduling entities\". Each scheduling entity can have its own tree, and so on in a recursive way...\n(This is useful, for example, for grouping all the processes of a specific user into one scheduling entity; thus preventing a user that has many tasks from consuming more cpu time than users with fewer processes)</p>\n\n<p>task_h_load - stands for \"<strong>task hierarchical load</strong>\"</p>\n\n<p>Since a task can be nested in a few trees, then calculating its load is not so simple...</p>\n\n<pre><code>static unsigned long task_h_load(struct task_struct *p){\n    struct cfs_rq *cfs_rq = task_cfbs_rq(p);\n    update_cfs_rq_h_load(cfs_rq);\n    return div64_ul(p-&gt;se.avg.load_avg * cfs_rq-&gt;h_load,\n                           cfs_rq_load_avg(cfs_rq) + 1);\n}\n</code></pre>\n\n<p>At the beginning <code>cfs_rq</code> points to the immediate tree at which p is found in. If we had only two nested trees then calculating the load of p would have been simple:</p>\n\n<blockquote>\n  <p>task_h_load = task_load_in_its_tree * ( load_of_immediate_tree / \n  load_of_containing_tree);</p>\n  \n  <p>(while immediate_tree refers to the tree that contains the task,\n  and containing_tree refers to the tree that contains the tree that contains the task.)</p>\n</blockquote>\n\n<p>But this is not the case.  Our tree might be a nested tree inside a scheduling entity, which is itself just a leaf in another tree.</p>\n\n<p>So, the first thing we do is to call <code>update_cfs_rq_h_load(cfs_rq)</code> which computes the hierarchical load factor for <code>cfs_rq</code> and all its ascendants (ancestors):  this function goes up the tree hierarchy all the way to the root, and down from the root to our <code>cfs_rq</code> while computing the hierarchical load factor for each tree in the hierarchy.</p>\n\n<p>The computation is done in a similar way:</p>\n\n<blockquote>\n  <p>cfs_rq_h_load = cfs_rq_load_in_its_tree * (load_of_immediate_tree / \n  load_of_containing_tree)</p>\n</blockquote>\n\n<p>So, finally we have the fractional load of <code>cfs_rq</code> and all we have to do is to calculate the h_load using the same formula.</p>\n\n<blockquote>\n  <p>task_h_load = task_load_in_its_tree * (load_of_immediate_tree / \n  load_of_containing_tree)</p>\n</blockquote>\n"}], "owner": {"reputation": 860, "user_id": 1067642, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42ff07397a2c55be5713a95d56528301?s=128&d=identicon&r=PG", "display_name": "boaz", "link": "https://stackoverflow.com/users/1067642/boaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 6, "accepted_answer_id": 34548159, "answer_count": 2, "score": 17, "last_activity_date": 1451785351, "creation_date": 1450899998, "last_edit_date": 1451022886, "question_id": 34442691, "link": "https://stackoverflow.com/questions/34442691/linux-kernel-task-h-load", "title": "Linux Kernel- task_h_load", "body": "<p>I'm trying to understand what happens during the <code>load_balance</code> function.<br>\nI'm checking version 3.14 but I also took a look at version 4.3 since I was told that the mechanism was changed and a bit more clear in this version.</p>\n\n<p>in <strong>v3.14</strong> the call is from <a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c?v=3.14#L4980\"><code>move_tasks</code></a></p>\n\n<p>in <strong>v4.3</strong> the call is from <a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c#L5702\"><code>detach_tasks</code></a>  </p>\n\n<p>from what I see it is the same function but only with a different name.</p>\n\n<p>This function is moving tasks from one queue to another according to the <code>env-&gt;balance</code> parameter.<br>\nWhat I don't understand is what/how the load is calculated in <a href=\"http://lxr.free-electrons.com/source/kernel/sched/fair.c#L5739\"><code>task_h_load</code></a>.  </p>\n\n<p>Does anyone know what the load member represent and how it is calculated in the <strong><code>task_h_load</code></strong> function?  </p>\n"}, {"tags": ["c", "arrays", "linked-list"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1450899296, "post_id": 34442500, "comment_id": 56626688, "body": "If this is <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> use the <code>new</code> operator, if it&#39;s <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> do not cast the return value of <code>calloc()</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450899475, "post_id": 34442500, "comment_id": 56626768, "body": "@DietrichEpp How did you find the duplicate. I couldn&#39;t."}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450899521, "post_id": 34442500, "comment_id": 56626790, "body": "@iharob Thanks, it is c. I removed casting but still doesn&#39;t work."}, {"owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450899554, "post_id": 34442500, "comment_id": 56626806, "body": "@DietrichEpp It is not duplicate."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450899558, "post_id": 34442500, "comment_id": 56626810, "body": "I did not say that it would work, I said that you should not cast and also, if it&#39;s <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, do not tag as <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450899566, "post_id": 34442500, "comment_id": 56626815, "body": "@iharob: I did a search for <code>[c] sizeof pointer</code> in a separate browser tab.  I did a couple other searches first.  It took me longer than I anticipated."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450899601, "post_id": 34442500, "comment_id": 56626830, "body": "@samet It is duplicate and the same question is asked over and over despite the fact that there are <i>more than a few</i> duplicates. Although since @<a href=\"http://stackoverflow.com/users/82294/dietrich-epp\">DietrichEpp</a> and I both had trouble finding it, I can see why you asked it again."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1450899674, "post_id": 34442500, "comment_id": 56626862, "body": "I am sorry that you feel that this is not a duplicate question.  However, the problem here is that you are using <code>sizeof</code> on a pointer, which points to an array returned by <code>malloc()</code>, and <code>sizeof</code> is returning the size of the pointer instead of the size of the array.  This is a very common gotcha in C and it is addressed in the other question, which is why I marked this question as a duplicate.  The other question has the answer you seek."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450899835, "post_id": 34442500, "comment_id": 56626943, "body": "@iharob but doesn&#39;t calloc return a void pointer? gcc would complain normally."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 1, "creation_date": 1450899941, "post_id": 34442500, "comment_id": 56626993, "body": "@AimanAl-Eryani: You are thinking of C++, which is a different language."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1450899953, "post_id": 34442500, "comment_id": 56627000, "body": "No <i>g++</i> would complain because the conversion from <code>void *</code> to another pointer type requires a cast in <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> but in <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> you would use <code>new Node[N]</code> instead - &quot;<i>although maybe you want to use <code>malloc()</code> because you can use <code>realloc()</code> bear in mind that <code>malloc()</code> does not call the constructor</i>&quot;. In <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> this happens automatically and using the cast just makes the code hard to read, and makes you repeat yourself and <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">more issues too</a>. You can avoid them, and write neater code by not casting in <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450900570, "post_id": 34442500, "comment_id": 56627271, "body": "@iharob &amp; Dietrich: I believed what you said, but then I thought I should try and see for myself: <a href=\"http://i.imgur.com/ApHc6bp.png\" rel=\"nofollow noreferrer\">i.imgur.com/ApHc6bp.png</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 1, "creation_date": 1450900775, "post_id": 34442500, "comment_id": 56627371, "body": "@AimanAl-Eryani Your file is a <i>.cpp</i> file, it&#39;s automatically compiled as a <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> program. You need to understand that <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> are different languages. In the beginning <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> tried to be as compatible as possible with <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>&#39;s syntax, and that is no longer the case (&quot;<i>most <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> programs still compilable with a <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> compiler but I think the effort to keep that feature is no longer a priority</i>&quot;). You try renamnig your file <i>test.c</i> instead, does the compiler complain now?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450900902, "post_id": 34442500, "comment_id": 56627418, "body": "And really avoid <code>malloc()</code> in <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> programs, because <code>malloc()</code>ing <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> classes is <i>simply</i> wrong."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1450900956, "post_id": 34442500, "comment_id": 56627442, "body": "@iharob: Aha! I realize C and C++ are different.I stand corrected. I thought the extension wouldn&#39;t matter as long as I use gcc and not g++. Thank you very much! Edit: I never really use malloc (I use new), but I will put that in mind."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1450901017, "post_id": 34442500, "comment_id": 56627463, "body": "In fact <i>gcc</i> automatically picks a compiler based on the file extension. You know that, <i>gcc</i> stands for GNU Compilers Collection, right? It has nothing to do with the <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> language."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 0, "creation_date": 1450901101, "post_id": 34442500, "comment_id": 56627506, "body": "I legitimately did not know that. Thanks!"}], "owner": {"reputation": 468, "user_id": 2948098, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/mDgWN.png?s=128&g=1", "display_name": "samet", "link": "https://stackoverflow.com/users/2948098/samet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1450899337, "answer_count": 0, "score": 0, "last_activity_date": 1450899591, "creation_date": 1450899122, "last_edit_date": 1450899591, "question_id": 34442500, "link": "https://stackoverflow.com/questions/34442500/dynamic-allocation-of-linked-list-array-in-c", "closed_reason": "Duplicate", "title": "Dynamic Allocation of Linked-List Array in C", "body": "<p>I need to keep numbers of linked-lists in an array. I have followed similar questions but confused about implementation and cannot allocate the array correctly. I debugged, found, and simplified my problem: The array is always sized as <code>1</code> instead of <code>N</code>. As a result, I'm getting segmentation fault when try to use nodes. Simplified code:</p>\n\n<pre><code>typedef struct Node {\n    int data;\n    struct Node *next;\n} node;\n\nint main(int argc, char** argv)\n{\n    node **array;\n    int N = 5;\n    array = (node **)calloc(N,sizeof(node*));\n    printf(\"Size of array = %d\", sizeof(array)/sizeof(array[0]));\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>Size of array = 1\n</code></pre>\n\n<p>Here when I use static size for array as <code>node *array[5]</code> the output is:</p>\n\n<pre><code>Size of array = 5\n</code></pre>\n\n<p>Thanks for suggestions.</p>\n"}, {"tags": ["c", "pointers", "language-lawyer", "c99", "c11"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1450896700, "post_id": 34441908, "comment_id": 56625450, "body": "What is an &quot;integer non-mathematical value&quot; in your eyes?"}, {"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1450897247, "post_id": 34441908, "comment_id": 56625699, "body": "@cad: I am trying to distinguish the abstract set of values, which is infinite, and have certain formal properties, from the particular subset of values capable of being representable in a given integer type in C. The values intended to be &quot;integers&quot; in a given type behaves different than the mathematical &quot;integers&quot;. For example, UINT_MAX+1 == 0 in unsigned int. The behaviour is different, so they are not &quot;mathematical&quot;, but a close simulation."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 4, "creation_date": 1450897256, "post_id": 34441908, "comment_id": 56625705, "body": "I think you&#39;re waaay overthinking this. I just memorize that a pointer can be converted to a standard integer type, where only <code>uintptr_t</code> and <code>intptr_t</code> are guaranteed to be capable of holding its value."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1450897412, "post_id": 34441908, "comment_id": 56625759, "body": "How is any type &quot;mathematical&quot; then? As far as I can tell from your explanation, a purely &quot;mathematical&quot; type is capable of holding every possible integer value, which is impossible, as there is only a finite amount of memory available."}, {"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1450897669, "post_id": 34441908, "comment_id": 56625880, "body": "@cad: I&#39;am not considering purely &quot;mathematical&quot; values as having a type in C. In the same way that one can say &quot;the value (purely mathematical or abstract) 1 centillion is not representable in 64-bit unsigned long long type&quot;. This mode of language is talking about &quot;mathematical&quot; or &quot;abstract&quot; numbers only, without a type, but then a given type is described. I&#39;m trying to dilucidate if this mode of discourse is the same in the paragraphs 6.3.2.5p.5/p.6, when talking about the issues of pointer-to-integer conversion."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450897772, "post_id": 34441908, "comment_id": 56625920, "body": "Re your last question, two unequal 64-bit pointers can be equal when truncated to 32-bit integers."}, {"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450898284, "post_id": 34441908, "comment_id": 56626205, "body": "@WeatherVane: Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1450898155, "post_id": 34442235, "comment_id": 56626130, "body": "Mmm. I can read in the standard that these integer types you mention, are optionally defined. This is the reason why I don&#39;t mention them in the question. (In standard C11: 7.20.1.4)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450898494, "post_id": 34442235, "comment_id": 56626321, "body": "Note that <code>intptr_t</code> and <code>uintptr_t</code> are <i>optional</i>.  A C implementation can conform to the standard without providing them, nor indeed any type at all that can serve as they are described to do."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450898644, "post_id": 34442235, "comment_id": 56626401, "body": "@JohnBollinger Try to refresh the page, I added a remark about this a couple of minutes ago."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450899187, "post_id": 34442235, "comment_id": 56626639, "body": "&quot;Obviously, when converting pointers to integers, many pointers are going to be mapped to the same integer.&quot; - not necessarily, some of the pointers may cause a hardware exception or cause the program to exit when the attempt is made to convert them to integer"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450900621, "post_id": 34442235, "comment_id": 56627297, "body": "@M.M Not for valid pointers and definitely not on 8086 (which is why I chose this concrete example)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450902982, "post_id": 34442235, "comment_id": 56628329, "body": "&quot;get a unique value for each pointer though.&quot; --&gt; true.  Note that pointers that compare equally may covert to <code>intptr_t</code> and have those integer values <i>not</i> compare equally."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450903028, "post_id": 34442235, "comment_id": 56628354, "body": "@chux Huch? I&#39;d like to have a source for this."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450903478, "post_id": 34442235, "comment_id": 56628578, "body": "@FUZxxl invalid pointers may  not be evaluated anyway, and valid pointers may still cause UB on attempt to convert to integer"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450905444, "post_id": 34442235, "comment_id": 56629408, "body": "@M.M Invalid pointers may be evaluated if they point one past the end of an array."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 2, "last_activity_date": 1450898283, "last_edit_date": 1450898283, "creation_date": 1450897967, "answer_id": 34442235, "question_id": 34441908, "link": "https://stackoverflow.com/questions/34441908/pointer-to-integer-conversion-in-standard-c/34442235#34442235", "title": "Pointer to integer conversion in Standard C", "body": "<blockquote>\n  <p>My question would be: is my interpretation in point (3.) correct?</p>\n</blockquote>\n\n<p>The standard specifies the types <code>uintptr_t</code> and <code>intptr_t</code> such that each valid pointer can be converted to an <code>uintptr_t</code> / <code>intptr_t</code> and back again. Compare ISO 9899:2011 \u00a77.20.1.4:</p>\n\n<blockquote>\n  <h3>7.20.1.4 Integer types capable of holding object pointers</h3>\n  \n  <p>1 The following type designates a signed integer type with the property that any valid pointer to void can be converted to this type, then converted back to pointer to void, and the result will compare equal to the original pointer:</p>\n\n<pre><code>intptr_t\n</code></pre>\n  \n  <p>The following type designates an unsigned integer type with the property that any valid pointer to void can be converted to this type, then converted back to pointer to void, and the result will compare equal to the original pointer:</p>\n\n<pre><code>uintptr_t\n</code></pre>\n  \n  <p>These types are optional.</p>\n</blockquote>\n\n<p>These types may not exist though, in which case no guarantee exists that each pointer maps to an integer.</p>\n\n<blockquote>\n  <p>Is open in standard C the possibility that two different valid pointers p, q, (that is: p != q), when converted to an integer type, the resulting integer values become equal.</p>\n</blockquote>\n\n<p>Yes, this can happen. Consider a platform like 8086 with 20 bit pointers and 16 bit <code>int</code>. Obviously, when converting pointers to integers, many pointers are going to be mapped to the same integer. If you take a larger type, like a 32 bit <code>long</code>, then you get a unique value for each pointer though.</p>\n"}, {"comments": [{"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1450898445, "post_id": 34442290, "comment_id": 56626287, "body": "So, if we invoke <b>undefined behaviour</b>, we can have, for example, <code>(unsigned long)p == (unsigned long) q</code>, even in the case that <code>p!=q</code> (being p. q, pointers)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450898563, "post_id": 34442290, "comment_id": 56626355, "body": "Yes but <code>unsigned long</code> <i>could</i> be the same size as the pointer."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1450898681, "post_id": 34442290, "comment_id": 56626423, "body": "Yes, but if you invoke undefined behavior, then anything can happen, e.g. your computer catches on fire. Programs that invoke undefined behavior are not useful."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1450898771, "post_id": 34442290, "comment_id": 56626460, "body": "Yours is a reasonable expectation, but not required by the standard.  Many conversions from pointer to integer involve <i>implementation-defined</i> behavior, as opposed to undefined behavior.  That implementation-defined behavior does not have to be what you describe."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450899026, "post_id": 34442290, "comment_id": 56626572, "body": "@JohnBollinger I believe I addressed your concerns with the predicate <i>&quot;In every execution environment that I&#39;m aware of...&quot;</i>. To some extent, the C language is a practical engineering construct, not just an arbitrary academic exercise."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450899291, "post_id": 34442290, "comment_id": 56626685, "body": "&quot;then the resulting integers will not compare equal.&quot;  - this is not a requirement of the standard -- only the footnote text (which is non-normative) suggests that it&#39;s useful for implementations to try and achieve that"}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1450898172, "creation_date": 1450898172, "answer_id": 34442290, "question_id": 34441908, "link": "https://stackoverflow.com/questions/34441908/pointer-to-integer-conversion-in-standard-c/34442290#34442290", "title": "Pointer to integer conversion in Standard C", "body": "<p>The answer to your <code>p != q</code> question is given in the [...] part of paragraph 6:</p>\n\n<blockquote>\n  <p>If the result cannot be represented in the integer type, the behavior\n  is undefined.</p>\n</blockquote>\n\n<p>Hence, if <code>p</code> and <code>q</code> are two different valid pointers, and you convert those pointers to integers <strong>without invoking undefined behavior</strong>, then the resulting integers will not compare equal.</p>\n\n<hr>\n\n<p>The answer to your main question is given in note 67 (which applies to paragraph 5):</p>\n\n<blockquote>\n  <p>The mapping functions for converting a pointer to an integer or an\n  integer to a pointer are intended to be consistent with the addressing\n  structure of the execution environment.</p>\n</blockquote>\n\n<p>In every execution environment that I'm aware of, the addressing structure is based on a finite subset of the natural numbers, with 0 being used as the <code>NULL</code> pointer. So converting from a pointer to an integer type is guaranteed to succeed if the range of integer values exceeds the range of addresses being used in the target hardware.</p>\n"}, {"comments": [{"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1450898691, "post_id": 34442333, "comment_id": 56626426, "body": "Thank you John, by I&#39;m trying to understand if the standard C considers the memory arithmetically as being similar to a unique subset of integers, or it&#39;s open to more extrange possibilities. On the other hand, I&#39;m sorry if I&#39;m not clear in my own question, but obviously this is part of my problems in understanding the topic in general."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450899075, "post_id": 34442333, "comment_id": 56626595, "body": "Re. (3), &quot;the result is i-d&quot; --&gt; &quot;the result is i-d or UB&quot;  . Re (4), it&#39;s normal to describe causing UB as &quot;failing&quot;"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 1, "creation_date": 1450899142, "post_id": 34442333, "comment_id": 56626612, "body": "@pablo1977, the bottom line is &quot;no&quot;, the standard itself does not consider (nor speak directly to) how memory addressing might map to integers.  It is common, however, for <i>implementations</i> to model memory via a flat address space that does map directly to integers, and that may even have the same representation as one of the system&#39;s integer types."}, {"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1450899204, "post_id": 34442333, "comment_id": 56626646, "body": "@JohnBollinger: Thank you, John."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1450900223, "post_id": 34442333, "comment_id": 56627115, "body": "If the &quot;result&quot; is implementation-defined then the program would not exit.  That would be possible if the &quot;behavior&quot; were implementation-defined."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450901741, "post_id": 34442333, "comment_id": 56627806, "body": "@DietrichEpp, the standard is not clear as to whether &quot;the result&quot; means &quot;the resulting value&quot; or &quot;the resulting behavior&quot;.  I have taken the latter, more permissive interpretation.  I attribute it a quality of implementation detail that the program should not exit under such circumstances, not a requirement of the standard."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1450902353, "post_id": 34442333, "comment_id": 56628078, "body": "@JohnBollinger: With due respect, that reading is inconsistent with the surrounding language.  In the section, the &quot;result&quot; refers to a value, not a behavior.  For example: &quot;If the <i>result</i> cannot be represented in the integer type, the <i>behavior</i> is undefined.&quot;  So it makes a distinction between &quot;result&quot; and &quot;behavior&quot;.  Emphasis mine.  In the previous paragraph, &quot;...the result is implementation-defined, might not be correctly aligned, ..., might be a trap representation...&quot; A value can be a trap representation, but a behavior cannot.  Therefore the &quot;result&quot; is a value, not a behavior."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1450899183, "last_edit_date": 1450899183, "creation_date": 1450898408, "answer_id": 34442333, "question_id": 34441908, "link": "https://stackoverflow.com/questions/34441908/pointer-to-integer-conversion-in-standard-c/34442333#34442333", "title": "Pointer to integer conversion in Standard C", "body": "<p>It's odd that you disregard parts of the standard as \"just talks about the issues that could happen when conversion fails\" when some of those are exactly the parts that address your question.</p>\n\n<blockquote>\n  <ol>\n  <li>I observe that the integer mathematical numbers are infinite as a set of values.</li>\n  </ol>\n</blockquote>\n\n<p>True, but irrelevant.  The standard says \"any pointer type can be converted to [any] integer <em>type</em>\" (emphasis added).  It is referring specifically to a family of C data types, including, but not limited to, <code>int</code>.  The text you omitted from your quote makes clear that some integer types might not be able to represent the result.  In fact, it says \"The result need not be in the range of values of <em>any</em> integer type\" (emphasis added).</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Any integer type in C can represent only a finite subset of the integer mathematical values.</li>\n  </ol>\n</blockquote>\n\n<p>True.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>In paragraphs 6.3.2.3.p5/p6 it seems that Standard C11 assumes that \"every pointer value can be mapped to an integer mathematical value\".</li>\n  </ol>\n</blockquote>\n\n<p>No, as a matter of fact not.  Part of the text you omitted was that \"the\nresult is implementation-defined\" for conversion in both directions, with certain exceptions.  The implementation-defined behavior of such a conversion could be that the program exits.  I'd accept that the standard suggests that there may be a mapping or mappings such as you describe, but not that it assumes there is one.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Besides, the way in that C11 standard is redacted seems to suggest that only when this mathematical (or abstract) value cannot be represented in the intedend integer type choosen by the developer, for any reason, is when the operation fails.</li>\n  </ol>\n</blockquote>\n\n<p>The operation never <em>fails</em>.  Under many circumstances the behavior is implementation-defined, and under some it is undefined, but that's altogether different.</p>\n\n<p>Note, however, that the standard places more requirements on implementations that choose to provide the optional <code>intptr_t</code> and/or <code>uintptr_t</code> types, as these support round-trip, value-preserving <code>void *</code> to integer type to <code>void *</code> conversions.  Such implementations (which are typical) must have a 1-1 mapping from all possible pointer values not only to mathematical integers but to representable integer values.</p>\n"}], "owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 0, "accepted_answer_id": 34442333, "answer_count": 3, "score": 0, "last_activity_date": 1450899183, "creation_date": 1450896508, "last_edit_date": 1450898191, "question_id": 34441908, "link": "https://stackoverflow.com/questions/34441908/pointer-to-integer-conversion-in-standard-c", "title": "Pointer to integer conversion in Standard C", "body": "<p>I've read several questions in this web about this topic, but I still have doubts.</p>\n\n<p>In Standard C we can read:</p>\n\n<blockquote>\n  <p>6.3.2.3.p.5: An integer can be converted to any pointer type. [...]<br>\n  6.3.2.3.p.6: Any pointer type can be converted to an integer type. [...].</p>\n</blockquote>\n\n<p>The omitted text (that would go in brackets [...]) just talks about the issues that could happen when conversion fails.  </p>\n\n<p>However my question is more general:  </p>\n\n<ol>\n<li>I observe that the <strong>integer mathematical numbers</strong> are infinite as a set of values.    </li>\n<li>Any integer type in C can represent only a finite subset of the integer mathematical values.    </li>\n<li>In paragraphs 6.3.2.3.p5/p6 it seems that <strong>Standard C11</strong> assumes that \"every pointer value can be mapped to an <strong>integer mathematical value</strong>\".  </li>\n<li>Besides, the way in that C11 standard is redacted seems to suggest that <em>only when this mathematical (or abstract) value cannot be represented in the intended integer type chosen by the developer</em>, for any reason, is when the operation fails.  </li>\n</ol>\n\n<p><strong>My question would be:</strong> is my interpretation in point (3.) correct?  </p>\n\n<p>On the other hand, when we define an array of type <em>T</em> having size <em>N</em>,<br>\nsince we can make integer arithmetic on the positions of the array,<br>\nit results obvious that, at least at \"local\" level, in an array,<br>\nwe have that the corresponding block of memory of the array behaves<br>\nthe same way, arithmetically, than the set of numbers from <em>0</em> to <em>N-1</em>, say.  </p>\n\n<p>By defining arrays or allocated objects, we can be sure that, in C,<br>\nthe memory addresses can be \"locally\" considered as arithmetically equivalent to a subset of integers.  </p>\n\n<p>However, this \"local\" behavior would not be enough to derive the conclusion<br>\nthat the Standard C assumes a memory model whose memory addresses can be considered as part of \"only one and the same set of integer numbers\".  </p>\n\n<p>However, 6.3.2.3.p5/p6 seems to \"suggest\" this stronger assertion, although I'm not completely sure.  </p>\n\n<p><strong>An additional question could be bring more light:</strong>   </p>\n\n<ul>\n<li>Is open in standard C the possibility that two different valid pointers <code>p</code>, <code>q</code>, (that is: <code>p != q</code>), when converted to an integer type, the resulting integer values become <strong>equal</strong>.</li>\n</ul>\n"}, {"tags": ["c", "string", "search", "compare"], "comments": [{"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 1, "creation_date": 1450895028, "post_id": 34441525, "comment_id": 56624652, "body": "not sure strcmp will do it.  I suspect the OP would expect string1 and string2 to be &#39;like&#39; seeing as how, if we treat string1 as a regular expression, then string2 would match.  That said, the OP might want to look at a regular expression library for C"}, {"owner": {"reputation": 1305, "user_id": 5665091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wOut.png?s=128&g=1", "display_name": "PinkiNice", "link": "https://stackoverflow.com/users/5665091/pinkinice"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1450895066, "post_id": 34441525, "comment_id": 56624674, "body": "@haccks Does <code>strcmp</code> accept mask symbols? Like <code>?</code> and <code>*</code>?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450897693, "post_id": 34441525, "comment_id": 56625890, "body": "I don&#39;t think this is a duplicate. OP is asking for globs, not regular expressions."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450897760, "post_id": 34441525, "comment_id": 56625914, "body": "POSIX provides functions for globs (wildcards like <code>?</code> and <code>*</code>) in <code>fnmatch.h</code>. The function you need is called <code>fnmatch()</code>."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1450903685, "post_id": 34441525, "comment_id": 56628675, "body": "If you want something simple like &quot;%xxx%&quot;, you could use strstr."}], "answers": [{"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 0, "last_activity_date": 1450894944, "last_edit_date": 1495540307, "creation_date": 1450894944, "answer_id": 34441557, "question_id": 34441525, "link": "https://stackoverflow.com/questions/34441525/is-there-any-function-in-c-similar-to-like-in-sql-to-compare-2-strings/34441557#34441557", "title": "Is there any function in C similar to LIKE in SQL to compare 2 strings?", "body": "<p>You want to use a regular expression library.  See this question for the ANSI library information: <a href=\"https://stackoverflow.com/questions/1085083/regular-expressions-in-c-examples\">Regular expressions in C: examples?</a></p>\n"}], "owner": {"reputation": 1305, "user_id": 5665091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wOut.png?s=128&g=1", "display_name": "PinkiNice", "link": "https://stackoverflow.com/users/5665091/pinkinice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "closed_date": 1450895161, "accepted_answer_id": 34441557, "answer_count": 1, "score": 0, "last_activity_date": 1450894944, "creation_date": 1450894786, "question_id": 34441525, "link": "https://stackoverflow.com/questions/34441525/is-there-any-function-in-c-similar-to-like-in-sql-to-compare-2-strings", "closed_reason": "Duplicate", "title": "Is there any function in C similar to LIKE in SQL to compare 2 strings?", "body": "<p>I meant, something that we can use this way:</p>\n\n<pre><code>char string1[] = \"???, buddy*\\0\";\nchar string2[] = \"Hey, buddy, hello!\\0\";\nif (like(string1, string2) \n    puts(\"strings are similar!\");\nelse\n    puts(\"string are different!\");\n</code></pre>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450893975, "post_id": 34441206, "comment_id": 56624130, "body": "<a href=\"https://docs.python.org/2/c-api/veryhigh.html#c.PyRun_InteractiveLoop\" rel=\"nofollow noreferrer\"><code>PyRun_InteractiveLoop</code></a>? That&#39;ll get you an actual interactive prompt, though."}], "answers": [{"comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1450894900, "post_id": 34441467, "comment_id": 56624581, "body": "So you&#39;re not allowed to define &#224; fonction in that mode? Or IS line break still allowed ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1450895011, "post_id": 34441467, "comment_id": 56624635, "body": "@lezebulon: A function definition is one statement (compound statements are okay). I don&#39;t think you can put empty lines in your compound statements, though."}, {"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1450895083, "post_id": 34441467, "comment_id": 56624679, "body": "Also, what if I want to store the r&#233;sultats string in memory and not peint it to std::co&#251;t? Thanks!"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1450895290, "post_id": 34441467, "comment_id": 56624767, "body": "@lezebulon: In that case, you should write Python code that does that, rather than trying to convince Python to handle expression statements differently. Strictly speaking, you <i>could</i> set a <code>sys.displayhook</code> that does that, but I&#39;d recommend against it."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1450894509, "creation_date": 1450894509, "answer_id": 34441467, "question_id": 34441206, "link": "https://stackoverflow.com/questions/34441206/simulate-shell-behavior-force-eval-of-last-command-to-be-displayed/34441467#34441467", "title": "Simulate shell behavior (force eval of last command to be displayed)", "body": "<p>To compile your code so expression statements invoke <code>sys.displayhook</code>, you need to pass <code>Py_single_input</code> as the <code>start</code> parameter, and you need to provide one statement at a time.</p>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 34441467, "answer_count": 1, "score": 1, "last_activity_date": 1450970405, "creation_date": 1450893272, "last_edit_date": 1450970405, "question_id": 34441206, "link": "https://stackoverflow.com/questions/34441206/simulate-shell-behavior-force-eval-of-last-command-to-be-displayed", "title": "Simulate shell behavior (force eval of last command to be displayed)", "body": "<p>In a python shell, if I type <code>a = 2</code> nothing is printed. If I type <code>a</code> 2 gets printed automatically. Whereas, this doesn't happen if I run a script from idle.</p>\n\n<p>I'd like to emulate this shell-like behavior using  the python C api, how is it done?</p>\n\n<p>For instance, executing this code <code>PyRun_String(\"a=2 \\na\", Py_file_input, dic, dic);</code> from C, will not print anything as the output. \nI'd like to simulate a shell-like behavior so that when I execute the previous command, the value \"2\" is stored in a string. Is it possible to do this easily, either via python commands or from the C api? Basically, how does the python shell do it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 11, "creation_date": 1450892251, "post_id": 34440962, "comment_id": 56623215, "body": "The hint is in the website :-)"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 3, "creation_date": 1450892352, "post_id": 34440962, "comment_id": 56623285, "body": "You can&#39;t allocate all that on the stack. Thread stack is usually limited to 1-2MB.  You need to allocate large object on the heap."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1450892524, "post_id": 34441014, "comment_id": 56623381, "body": "<code>static char qstr[3][200][100000];</code> would also work, but that has implications for multithreaded processes."}, {"owner": {"reputation": 4068, "user_id": 2532621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/291a71a3d9ae5305f07ab42ad15745e6?s=128&d=identicon&r=PG", "display_name": "ash", "link": "https://stackoverflow.com/users/2532621/ash"}, "edited": false, "score": 0, "creation_date": 1450894241, "post_id": 34441014, "comment_id": 56624272, "body": "Actually, automatic arrays are allocated on the stack.  Global arrays are not.  Additionally, it is possible to allocate a new array on the heap with malloc() or calloc()."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450912443, "post_id": 34441014, "comment_id": 56632163, "body": "C does not specify stack/heap, yet there are 3 types of coding paradigms: 1) Ones that divide things into 2 groups: heap &amp; stack:  2) Ones that don&#39;t.  ;-)"}, {"owner": {"reputation": 9251, "user_id": 202083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ec4abe66cb7af4c957e785cdc24449e?s=128&d=identicon&r=PG", "display_name": "Tristram Gr&#228;bener", "link": "https://stackoverflow.com/users/202083/tristram-gr%c3%a4bener"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450952324, "post_id": 34441014, "comment_id": 56643742, "body": "@chux haha :) I admit that my explanations isn\u2019t accurate, but I believe that it answers the question, from what I guess about the experience of que author."}, {"owner": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1451113728, "post_id": 34441014, "comment_id": 56680277, "body": "@AndrewHenle I checked <code>static</code> works, but why? I mean where are <code>static</code> local variables stored and why is this not multithread safe? Also, where are global variables stored?"}, {"owner": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "edited": false, "score": 0, "creation_date": 1451114069, "post_id": 34441014, "comment_id": 56680328, "body": "Is there a standard library function to determine stack size?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "edited": false, "score": 0, "creation_date": 1451232520, "post_id": 34441014, "comment_id": 56706216, "body": "@MayankVerma Adding the <code>static</code> keyword to a local variable definition causes the variable to have <code>static</code> <i>duration</i>, which means it continues to exist both before and after the function call - and retains its value between calls.  Without the <code>static</code> the variable is an <i>automatic</i> variable that exists only as long as the function is running - a &quot;normal&quot;, local stack variable.  If a function is called by multiple threads at the same time, each separate thread gets its own copy of <i>automatic</i> or &quot;normal&quot; stack variables."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1451232577, "post_id": 34441014, "comment_id": 56706231, "body": "(cont) <b>But</b> if you add the <code>static</code> keyword, there&#39;s only <i>one</i> copy of the variable - and it&#39;s shared by all threads.  Effectively, instead of getting a copy of the variable on the stack for each and every call to the function, you get <b>one</b> copy of the variable located somewhere in memory.  Since it&#39;s not on the stack, stack size limits don&#39;t apply."}], "tags": [], "owner": {"reputation": 9251, "user_id": 202083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ec4abe66cb7af4c957e785cdc24449e?s=128&d=identicon&r=PG", "display_name": "Tristram Gr&#228;bener", "link": "https://stackoverflow.com/users/202083/tristram-gr%c3%a4bener"}, "is_accepted": true, "score": 6, "last_activity_date": 1450892421, "creation_date": 1450892421, "answer_id": 34441014, "question_id": 34440962, "link": "https://stackoverflow.com/questions/34440962/segmentation-fault-in-c/34441014#34441014", "title": "Segmentation Fault in C", "body": "<p>THe answer is the stack size. There are two memories: the heap and the stack.</p>\n\n<p>Arrays are allocated in the stack. You can now the limit with the <code>ulimit -a</code> command. On my system, I get <code>stack size              (kbytes, -s) 8192</code>, so 8Mb at most. You probably have the same.</p>\n\n<p>If you want to allocate in the heap, you will need to play with <code>malloc</code>, pointers etc.</p>\n\n<p>For instance</p>\n\n<pre><code>char* qstr = malloc(3 * 200 * 100000);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "edited": false, "score": 0, "creation_date": 1451113899, "post_id": 34445151, "comment_id": 56680305, "body": "What if the function is called recursively?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "edited": false, "score": 0, "creation_date": 1451114563, "post_id": 34445151, "comment_id": 56680397, "body": "<code>static</code> variables are shared with all calling and modifying ones in a calling (maybe deeper call in recursion) do accect value in previous ones. Therefore, some algorithm which use local variables may not work!"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1450912464, "creation_date": 1450912464, "answer_id": 34445151, "question_id": 34440962, "link": "https://stackoverflow.com/questions/34440962/segmentation-fault-in-c/34445151#34445151", "title": "Segmentation Fault in C", "body": "<p>Making large arrays static is a easy way to avoid stack overflow if the function won't be called recursively.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    static int n[100000];\n    int t,q;\n    int i,j;\n    static char s[3][100000];\n    static char qstr[3][200][100000];\n    printf(\"Success\\n\");\n}\n</code></pre>\n\n<p>If you want to use <code>malloc()</code>, It can be written like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int *n = malloc(sizeof(int[100000]));\n    int t,q;\n    int i,j;\n    char (*s)[100000] = malloc(sizeof(char[3][100000]));\n    char (*qstr)[200][100000] = malloc(sizeof(char[3][200][100000]));\n    printf(\"Success\\n\");\n    free(n);\n    free(s);\n    free(qstr);\n}\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 5699882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-sPL4bZXU7W4/AAAAAAAAAAI/AAAAAAAAAWg/FOG3peQI48A/photo.jpg?sz=128", "display_name": "Mayank Verma", "link": "https://stackoverflow.com/users/5699882/mayank-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1452009117, "accepted_answer_id": 34441014, "answer_count": 2, "score": 0, "last_activity_date": 1450912464, "creation_date": 1450892186, "question_id": 34440962, "link": "https://stackoverflow.com/questions/34440962/segmentation-fault-in-c", "closed_reason": "Duplicate", "title": "Segmentation Fault in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n[100000];\n    int t,q;\n    int i,j;\n    char s[3][100000];\n    char qstr[3][200][100000];\n    printf(\"Success\\n\");\n}\n</code></pre>\n\n<p>In the above code the size of <code>qstr</code> is about 57.22 MiB. Why is there a Segmentation fault when more than 1 GiB of free memory is still available?\nIf I change the declaration of <code>qstr</code> as <code>qstr[3][200][10000]</code> the program has no trouble executing and \"Success\" is actually printed, after which it exits. In this case 'qstr' is only occupying about 5.7 MiB.</p>\n\n<p>I have 2 questions:</p>\n\n<ol>\n<li><p>How do I know the limit?</p></li>\n<li><p>Given that I've way more free memory, how do I exploit it?</p></li>\n</ol>\n"}, {"tags": ["c", "gcc"], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 5, "last_activity_date": 1450898208, "last_edit_date": 1450898208, "creation_date": 1450892227, "answer_id": 34440971, "question_id": 34440921, "link": "https://stackoverflow.com/questions/34440921/segmentation-fault-core-dumped-error-in-c-program/34440971#34440971", "title": "segmentation fault (core dumped) error in C program", "body": "<p>You are getting segmentation fault because you haven't allocated space for elements of <code>str</code>.\nYou need to allocate memory first in <code>main</code> function.  </p>\n\n<pre><code>scanf(\"%d\",&amp;t); //input the number of test cases\n\nif(t &lt;= 10)\n    for(size_t i = 0; i &lt; t; i++)\n        str[i] = malloc(50); // Assuming string is no more than 50characters. \nelse  \n    exit(0);  \n</code></pre>\n\n<p>Beside this there are many flaws in your code. Here is the code after fixing them  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nvoid strrev(char*);  // Change return type to void\n\nint main(void)\n{\n    int t,i=0,temp=0, ch;\n    char *str[10];\n    scanf(\"%d\",&amp;t); //input the number of test cases\n    while((ch = getchar()) != EOF &amp;&amp; ch != '\\n'); // To consume newline character after scanf\n\n    // Allocate memory for str elements\n    if(t &lt;= 10)\n        for(size_t i = 0; i &lt; t; i++)\n            str[i] = malloc(50); // Assuming string is no more than 50characters.\n    else\n        exit(0);\n\n    i = 0;\n    while(i &lt; t)\n    {\n        fgets(str[i],50,stdin); // Use fgets instead of scanf to read string\n        i++;\n    }\n    while(temp&lt;t) //reverse the string and display it\n    {\n        // Since you are reversing string by flipping the characters the same \n        // string just pass pointer to it. str[temp] will be updated in function.\n        strrev(str[temp]);\n        printf(\"Reverse is %s \\n\", str[temp]);\n        temp++;\n    }\n    return 0;\n}\n\nvoid strrev(char *str)\n{\n\n    size_t i = strlen(str)-1,j=0;\n    char ch;\n    while(i&gt;j)\n    {\n        ch = str[i];\n        str[i]= str[j];\n        str[j] = ch;\n        i--;\n        j++;\n    }\n    //printf(\"Reverse is %s \\n\", str);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5101725, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074237685939157/picture?type=large", "display_name": "Shreeya Kharbanda", "link": "https://stackoverflow.com/users/5101725/shreeya-kharbanda"}, "edited": false, "score": 0, "creation_date": 1450962019, "post_id": 34441294, "comment_id": 56647817, "body": "well, I inserted the line for memory allocation but it didn&#39;d work. I tried to run this program on CLion but it shows another error saying that invalid conversion from &#39;void*&#39; to &#39;char*&#39;."}, {"owner": {"reputation": 19, "user_id": 5101725, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074237685939157/picture?type=large", "display_name": "Shreeya Kharbanda", "link": "https://stackoverflow.com/users/5101725/shreeya-kharbanda"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1450972614, "post_id": 34441294, "comment_id": 56652065, "body": "@haccks SInce output is getting stored in rev array, there is no need to allocate memory for it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1451043635, "post_id": 34441294, "comment_id": 56666702, "body": "&quot;invalid conversion from &#39;void*&#39; to &#39;char*&#39;.&quot; means you are using a C++ compiler. You need to use a C compiler instead, C and C++ are different languages"}], "tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": false, "score": 2, "last_activity_date": 1451032931, "last_edit_date": 1451032931, "creation_date": 1450893747, "answer_id": 34441294, "question_id": 34440921, "link": "https://stackoverflow.com/questions/34440921/segmentation-fault-core-dumped-error-in-c-program/34441294#34441294", "title": "segmentation fault (core dumped) error in C program", "body": "<p>you have missed to allocate memory before reading char* value, so you can do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nchar* strrev(char*);\n\nint main(int argc, char *argv[])\n{\n        int t,i=0,temp=0;\n        char *str[10],*rev[10];\n        scanf(\"%d\",&amp;t); //input the number of test cases\n        while(i&lt;t)\n        {\n            str[i] = (char*)malloc(100); // just allocate memory\n            scanf(\"%s\", str[i]);\n            i++;\n        }\n        while(temp&lt;t) //reverse the string and display it\n        {\n           rev[temp]=strrev(str[temp]);\n           printf(\"%s \\n\",rev[temp]);\n           temp++;\n        }\n    return 0;\n    getchar();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 888, "user_id": 4618308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/moha6.jpg?s=128&g=1", "display_name": "mrflash818", "link": "https://stackoverflow.com/users/4618308/mrflash818"}, "is_accepted": false, "score": 1, "last_activity_date": 1450894760, "last_edit_date": 1450894760, "creation_date": 1450894219, "answer_id": 34441410, "question_id": 34440921, "link": "https://stackoverflow.com/questions/34440921/segmentation-fault-core-dumped-error-in-c-program/34441410#34441410", "title": "segmentation fault (core dumped) error in C program", "body": "<pre><code>char *str[10],*rev[10];\n</code></pre>\n\n<p>You did not assign storage to hold string values yet for those pointers.</p>\n\n<pre><code>char * str; /* this is a string pointer */\n\nchar * str = malloc(15); /* this creates storage for a string */\n\nchar str[10]; /* this creates a static char array, also is a string */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1454, "user_id": 2136806, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Zi5nX.jpg?s=128&g=1", "display_name": "mgokhanbakal", "link": "https://stackoverflow.com/users/2136806/mgokhanbakal"}, "is_accepted": false, "score": 0, "last_activity_date": 1516136051, "creation_date": 1516136051, "answer_id": 48289670, "question_id": 34440921, "link": "https://stackoverflow.com/questions/34440921/segmentation-fault-core-dumped-error-in-c-program/48289670#48289670", "title": "segmentation fault (core dumped) error in C program", "body": "<p>I also had the same issue. I just fixed it by correcting the indices of the matrix. </p>\n"}], "owner": {"reputation": 19, "user_id": 5101725, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074237685939157/picture?type=large", "display_name": "Shreeya Kharbanda", "link": "https://stackoverflow.com/users/5101725/shreeya-kharbanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29090, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1516136051, "creation_date": 1450892036, "question_id": 34440921, "link": "https://stackoverflow.com/questions/34440921/segmentation-fault-core-dumped-error-in-c-program", "title": "segmentation fault (core dumped) error in C program", "body": "<p>I tried to compile and run the following program to reverse a string using the gcc compiler for linux but it shows the error : segmentation fault (core dumped).I even tried to debug using gdb but it didn't help. The program given below firstly inputs t which is the number of test cases.I tested the program with 3 test cases but after taking the 2nd input from user, the compiler shows error.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nchar* strrev(char*);\n\nint main(int argc, char *argv[])\n{\n        int t,i=0,temp=0;\n        char *str[10],*rev[10];\n        scanf(\"%d\",&amp;t); //input the number of test cases\n        while(i&lt;t)\n        {\n            scanf(\"%s\",str[i]);\n            i++;\n        }\n        while(temp&lt;t) //reverse the string and display it\n        {\n           rev[temp]=strrev(str[temp]);\n           printf(\"%s \\n\",rev[temp]);\n           temp++;\n        }\n    return 0;\n    getchar();\n}\n</code></pre>\n\n<p>Function to reverse the string:</p>\n\n<pre><code>char *strrev(char *str) \n{\n\n    int i = strlen(str)-1,j=0;\n\n    char ch;\n    while(i&gt;j)\n    {\n        ch = str[i];\n        str[i]= str[j];\n        str[j] = ch;\n        i--;\n        j++;\n    }\n    return str;\n} \n</code></pre>\n"}, {"tags": ["c", "prolog", "scheme"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1450891304, "post_id": 34440737, "comment_id": 56622693, "body": "what do you mean with <i>solving</i> anything?"}, {"owner": {"reputation": 19369, "user_id": 4609915, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4fcZU.png?s=128&g=1", "display_name": "repeat", "link": "https://stackoverflow.com/users/4609915/repeat"}, "edited": false, "score": 2, "creation_date": 1450903063, "post_id": 34440737, "comment_id": 56628368, "body": "It is unclear to me which complexity you are referring to... That said, Prolog implementations typically have <i>very low</i> overhead for reclaiming memory upon backtracking (compared to Scheme call/cc)."}], "answers": [{"comments": [{"owner": {"reputation": 10335, "user_id": 772868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dt3Kv.jpg?s=128&g=1", "display_name": "false", "link": "https://stackoverflow.com/users/772868/false"}, "edited": false, "score": 0, "creation_date": 1451247802, "post_id": 34440806, "comment_id": 56710755, "body": "You can get a lot of overhead with <code>append&#47;3</code> for a query like <code>append([VeryBigTerm1,...],[],[BT1,...])</code> So it&#39;s not only the length but to a certain degree the terms contained in the list."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1450896142, "last_edit_date": 1450896142, "creation_date": 1450891536, "answer_id": 34440806, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force/34440806#34440806", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>Given you ask for <em>solving anything</em>, there are definitely problems that are solved by Prolog in linear time. For instance the following <code>append/3</code> predicate:</p>\n\n<pre><code>append([H|A],B,[H|R]) :-\n    append(A,B,R).\nappend([],L,L).\n</code></pre>\n\n<p>Now since at each step, there is only one candidate predicate, there is no branching, an hereby no exponential time complexity. The predicate runs linear in the length of the first list.</p>\n\n<p>Furthermore one can allow <em>tabling</em> in Prolog which can result in some kind of dynamic programming which can turning brute force backtracking algorithms sometimes in fast algorithms.</p>\n"}, {"tags": [], "owner": {"reputation": 475, "user_id": 4970679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e674047d1d50f7c45e49596a0d2aa53d?s=128&d=identicon&r=PG&f=1", "display_name": "ahuemmer", "link": "https://stackoverflow.com/users/4970679/ahuemmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1450891961, "creation_date": 1450891961, "answer_id": 34440905, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force/34440905#34440905", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>IMHO, it depends on the problem. If it is really solvable only via brute force and backtracking, I don't think that (even an idealized \"<em>best</em>\") Prolog would be faster than e. g. a well-written C program.</p>\n\n<p>On the other hand, if you have that kind of problem for the solution of which Prolog can use its database and deductive approach (so, not neccessarily brute force backtracking), it might have a better performance than another brute force backtracking program.</p>\n\n<p>In the end, every programming language ends up creating machine code that runs on your CPU to (hopefully) solve your problem. The same machine code can also be produced by other languages or more or less directly by the programmer. So, at all, Prolog is a good way to solve some kind of problems, but it need not be the best / fastest / only alternative.</p>\n"}, {"tags": [], "owner": {"reputation": 21445, "user_id": 812818, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bffad8ee5a559e7b747a839a1ed35416?s=128&d=identicon&r=PG", "display_name": "Daniel Lyons", "link": "https://stackoverflow.com/users/812818/daniel-lyons"}, "is_accepted": false, "score": 2, "last_activity_date": 1450893180, "last_edit_date": 1450893180, "creation_date": 1450892614, "answer_id": 34441055, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force/34441055#34441055", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>The question within your question seems to be, if I write Prolog-like code in Scheme, is it going to perform worse than if I write Prolog in Prolog?</p>\n\n<p>There's no straightforward answer. The truth is that the part of your problem that maps nicely onto Prolog will probably perform worse than it would in Prolog. Why? Because Prolog's intrinsics are all written in Prolog where your intrinsics are all written in Scheme. As @CommuSoft points out with <code>append/3</code>, the Prolog implementation of the intrinsic functions are able to leverage Prolog's strengths. You're going to be fighting an uphill battle in these parts. Plus, the Prolog implementations we have are old enough to have spent decades working to improve the performance of unification, because that's the interesting area here.</p>\n\n<p>At the same time, most substantial Prolog programs eventually wind up with some procedural bits. Those bits are probably not competitive with C or Scheme, because they're not as fun to optimize and whatever research there was to be done on this was happening in Scheme and ML instead. So you will win in those areas.</p>\n\n<p>As a Scheme user, I would think that you would find it more profitable to write programs in the Scheme style: functional, with a dash of macros to give it a declarative feel. If you have a problem that is embarrassingly good for Prolog, you can always throw <a href=\"http://minikanren.org/\" rel=\"nofollow\">miniKanren</a> at it, but keep it cordoned off from the rest of your program. Let your language be your language.</p>\n\n<p>I disagree with @ahuemmer about C versus Prolog only because labor is finite and programs have many aspects besides performance. The authorship costs of C are a lot higher, so you will commit harder to poorer strategies and wind up with less flexible code. Even if you confine your problem space to something small and well-defined, the Prolog programmer will have more time to experiment and discover a better solution, possibly with better time-complexity. If we are talking about unlimited amounts of labor, the C version will probably outperform the first Prolog version. But you have to consider all the dimensions.</p>\n\n<p>In general I think it's more important to fit the programmer to the language than the language to the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 39597, "user_id": 1613573, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcY5m.jpg?s=128&g=1", "display_name": "mat", "link": "https://stackoverflow.com/users/1613573/mat"}, "is_accepted": true, "score": 8, "last_activity_date": 1450894027, "creation_date": 1450894027, "answer_id": 34441363, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force/34441363#34441363", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>A naive brute force search will <em>remain</em> a naive brute force search when it is  <em>literally</em> translated to Prolog.</p>\n\n<p>That's OK: Plain Prolog is very well suited for describing and running brute force searches. Still, you will likely not be able to beat a hand-optimized low-level version of any brute force search with a brute force search written in Prolog. On the other hand, Prolog is so easy and convenient to type that you will likely soon find better search strategies with a bit of prototyping, and these other strategies will often easily beat <em>any</em> brute force implementation by a huge margin. And even when translated naively, Prolog is pretty good at backtracking and does it efficiently within some (smaller or larger, depending on the Prolog implementation you use) factor of lower-level code.</p>\n\n<p>However, the key advantage that Prolog has over many other languages when describing search problems are <strong>constraints</strong>: Due to so-called constraint <em>propagation</em>, the search space can often be pruned <em>significantly</em> and <em>automatically</em>. No special provisions are necessary on your part: The constraint solver will do it for you.</p>\n\n<p>The promise of constraints, and that promise has to a large extent turned into reality, is that (1) you state the requirements and (2) the Prolog engine finds the solution for you. Check out <a href=\"/questions/tagged/clpfd\" class=\"post-tag\" title=\"show questions tagged &#39;clpfd&#39;\" rel=\"tag\">clpfd</a> for one very important instance of this scheme.</p>\n\n<p>I therefore suggest the question: <em>In any language, how easy is it to convert a naive brute force search into a more informed search strategy?</em> After all, this is how the really significant improvements typically become possible.</p>\n\n<p>In Prolog, the answer is often: <strong>Very easy</strong>. In most other languages, not so much.</p>\n"}, {"comments": [{"owner": {"reputation": 10335, "user_id": 772868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dt3Kv.jpg?s=128&g=1", "display_name": "false", "link": "https://stackoverflow.com/users/772868/false"}, "edited": false, "score": 1, "creation_date": 1451254590, "post_id": 34473815, "comment_id": 56712739, "body": "Almost: &quot;if the problem has no solution&quot;, Prolog does not necessarily terminate."}], "tags": [], "owner": {"reputation": 21, "user_id": 5719034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c744e3b377193cc73d00ed3bf153bfa3?s=128&d=identicon&r=PG&f=1", "display_name": "abstractbike", "link": "https://stackoverflow.com/users/5719034/abstractbike"}, "is_accepted": false, "score": 2, "last_activity_date": 1451152788, "creation_date": 1451152788, "answer_id": 34473815, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force/34473815#34473815", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>Pure Prolog (without the \"cut\" operator, or imperative features) excels in one regard: For a certain class of problems, it is a \"complete refutation procedure\". If the problem has no solution, the Prolog program will terminate and announce the absence of solutions. On the other hand, if the problem does have solutions, the program may find none or some or all, and fail to terminate.</p>\n\n<p>If you use imperative features or cuts, all bets are off.</p>\n\n<p>Prolog can sometimes handle problems with infinitely many answers, if the answers have the right kind of pattern.</p>\n"}], "owner": {"reputation": 235, "user_id": 5616825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/070b1e8f0b91b82f493ebd3726d4530e?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5616825/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 34441363, "answer_count": 5, "score": 4, "last_activity_date": 1451247537, "creation_date": 1450891166, "last_edit_date": 1451247537, "question_id": 34440737, "link": "https://stackoverflow.com/questions/34440737/time-complexity-of-prolog-better-than-naive-brute-force", "title": "Time complexity of Prolog better than naive brute force?", "body": "<p>Is the time complexity of solving anything in (the best) Prolog better than a naive brute force backtracking implementation?</p>\n\n<p>I say the language Prolog generally... I'm wondering if there is some well known algorithm for this, that would for example make 'doing Prolog' using call/cc backtracking in Scheme a poor choice.</p>\n\n<p>EDIT: by \"solving anything\" I mean all Prolog programs. The \"question in a question\": I'm wondering about language design: if full continuations have any practical utility over partial continuations (the main advantages being Prolog-esque, but which aren't serious if they can't compete on time complexity with Prolog), and also if another language could completely absorb Prolog or if there are optimizations made possible by restricting programs to a Prolog form (analogous to the optimization possible in Fortran over C).</p>\n\n<p>EDIT: by time complexity I meant big O, i.e. pruning that wouldn't be possible emulating Prolog naively in a general language.</p>\n"}, {"tags": ["c", "visual-c++", "openssl", "aes"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1450892486, "post_id": 34440515, "comment_id": 56623361, "body": "ECB mode is not recommended, see ECB mode <a href=\"https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Electronic_Codebook_.28ECB.29\" rel=\"nofollow noreferrer\">example image</a>."}, {"owner": {"reputation": 463, "user_id": 1833142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f91d8400c8fc4d565902a545e11d6325?s=128&d=identicon&r=PG", "display_name": "S_R", "link": "https://stackoverflow.com/users/1833142/s-r"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1450920295, "post_id": 34440515, "comment_id": 56634269, "body": "So which mode should I be using? With the non EVP version, i.e AES_decrypt, there is no mode specified. So how do I find out which mode should be used for the EVP_Decrypt function?"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1450931098, "post_id": 34440515, "comment_id": 56636418, "body": "In general CBC ode is used, that is sometimes the default. There there is the issue of the iv which should be random bytes generally prepended to the encrypted data. But all these concerns are only necessary if security is needed, just encryption does not produce security."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1451049654, "post_id": 34440515, "comment_id": 56668132, "body": "You should <i>not</i> use <code>AES_encrypt</code> and friends. That&#39;s a software-only implementation, so you will not enjoy hardware support, like AES-NI. You should be using <code>EVP_*</code> functions. See <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki. In fact, you should probably be using authenticated encryption because it provides <i>both</i> confidentiality and authenticity. See <a href=\"https://wiki.openssl.org/index.php/EVP_Authenticated_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Authenticated Encryption and Decryption</a> on the OpenSSL wiki."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 1833142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f91d8400c8fc4d565902a545e11d6325?s=128&d=identicon&r=PG", "display_name": "S_R", "link": "https://stackoverflow.com/users/1833142/s-r"}, "edited": false, "score": 0, "creation_date": 1451411475, "post_id": 34447034, "comment_id": 56773654, "body": "It didnt work. The second 16 bytes of data when decrypted with EVP_DecryptUpdate always return an empty string. I think that is the problem. I have modified the question to specify this. Please have a look"}], "tags": [], "owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "is_accepted": false, "score": 1, "last_activity_date": 1450929180, "creation_date": 1450929180, "answer_id": 34447034, "question_id": 34440515, "link": "https://stackoverflow.com/questions/34440515/aes-decryption-result-varies-after-openssl-upgrade/34447034#34447034", "title": "AES decryption result varies after openssl upgrade", "body": "<p>Usage of <code>EVP_DecryptUpdate(ctx, out, &amp;len, in, ciphertext_len)</code> is wrong.</p>\n\n<p>Here, <code>len</code> must be initialized to the number of bytes in <code>out</code> array. As per my knowledge, if you call once with <code>len</code> as full length and <code>cipthertext_len</code>, it must decrypt all the encrypted text. Second call is not required. Either:</p>\n\n<pre><code>len = &lt;full length of buffer&gt;;\nEVP_DecryptUpdate(ctx, out, &amp;len, in, ciphertext_len);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>len = 16;\nEVP_DecryptUpdate(ctx, out, &amp;len, in, len);\nlen = 16;\nEVP_DecryptUpdate(ctx, out+16, &amp;len, in+16, len);\n</code></pre>\n\n<p>I prefer first approach. If you require special padding, then you can use additional call to handle last block.</p>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 1833142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f91d8400c8fc4d565902a545e11d6325?s=128&d=identicon&r=PG", "display_name": "S_R", "link": "https://stackoverflow.com/users/1833142/s-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1451489306, "creation_date": 1451489306, "answer_id": 34532342, "question_id": 34440515, "link": "https://stackoverflow.com/questions/34440515/aes-decryption-result-varies-after-openssl-upgrade/34532342#34532342", "title": "AES decryption result varies after openssl upgrade", "body": "<p>I just figured out the problem. It was really a very silly one.</p>\n\n<pre><code>int ciphertext_len = strlen((const char*)data);\n</code></pre>\n\n<p>I was deciding the length of an encrypted string, using strlen, which is wrong, and I just learned it the hard way. </p>\n"}], "owner": {"reputation": 463, "user_id": 1833142, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f91d8400c8fc4d565902a545e11d6325?s=128&d=identicon&r=PG", "display_name": "S_R", "link": "https://stackoverflow.com/users/1833142/s-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 34532342, "answer_count": 2, "score": 0, "last_activity_date": 1451489306, "creation_date": 1450890250, "last_edit_date": 1451412585, "question_id": 34440515, "link": "https://stackoverflow.com/questions/34440515/aes-decryption-result-varies-after-openssl-upgrade", "title": "AES decryption result varies after openssl upgrade", "body": "<p>My code which was linked to openssl 0.98 had a AES decryption functionality which was working fine.</p>\n\n<p>This is the code.</p>\n\n<pre><code>   const int bits = 256;\n        AES_KEY key;\n        iRes = AES_set_decrypt_key((const unsigned char *)szSecretKey, bits, &amp;key);\n\n        unsigned char szSigBytes[MAX_PATH] = \"\";\n        unsigned char *pSigBytes = szSigBytes;\n        unsigned char *pSignature = szSignature;\n        AES_decrypt(pSignature, pSigBytes, &amp;key);\n        AES_decrypt(pSignature + 16, pSigBytes + 16, &amp;key);\n\n        cout&lt;&lt;pSigBytes&lt;&lt;endl;\n</code></pre>\n\n<p>However, after migrating to openssl 1.0.1p, I had to use the EVP functions as the non EVP functions were failing in FIPS mode. So I modified the code to </p>\n\n<pre><code>EVP_CIPHER_CTX *ctx;    \n            int len;\n\n\n            int plaintext_len;\n            int ciphertext_len = strlen((const char*)in);\n\n            if(!(ctx = EVP_CIPHER_CTX_new()));\n\n\n            if(1 != EVP_DecryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, SecretKey, NULL))\n            return;\n\n          if(1 != EVP_DecryptUpdate(ctx, out, &amp;len, in, ciphertext_len))\n            return;\n\n          if(1 != EVP_DecryptUpdate(ctx, out + 16, &amp;len, in + 16, ciphertext_len - len))\n            return; \n\n          EVP_DecryptFinal_ex(ctx, out + len, &amp;len); \n\n          EVP_CIPHER_CTX_free(ctx);\n</code></pre>\n\n<p>The results are almost matching, but for some of the few last characters.\nAny idea, what am I doing wrong here?</p>\n\n<p>Edit: I see that the second 16 bytes are not getting decrypted while using EVP_DecryptUpdate.</p>\n\n<p>I have extracted the second 16 bytes into an array and tried to decrypt it. I see that it goes successfully when I use AES_decrypt, but returns \"\" when I use EVP_DecryptUpdate. \nThe cipher length is only 2 bytes. Can this be a reason why the decryption is failing?</p>\n\n<p>See the modified code below.</p>\n\n<pre><code>    unsigned char temp[MAX_PATH] = \"BoQ=\\n\";\n    unsigned char result[MAX_PATH] = \"\";\n\n    unsigned char data[MAX_PATH] = \"\";\n    Decode(temp, data);\n\n\n    //Decrypting with AES_Decrypt\n\n\n   AES_KEY key;\n\nunsigned char DecodedSecretKey[MAX_PATH];\nZeroMemory(DecodedSecretKey, MAX_PATH);\nDecode(secretKey, DecodedSecretKey);\n\n\nAES_set_decrypt_key((const unsigned char *)DecodedSecretKey, 256, &amp;key);\n\nAES_decrypt(data, result, &amp;key);//result returns the proper result\n</code></pre>\n\n<p>////////////////////////////////////////////////////////////////////////////////////////////////////////////</p>\n\n<pre><code>//Decrypting with EVP_DecryptUpdate\n\nEVP_CIPHER_CTX *ctx;    \n        int len;\n\n\n        int plaintext_len;\n        int ciphertext_len = strlen((const char*)data);\n\n        if(!(ctx = EVP_CIPHER_CTX_new()));\n\n\n        if(1 != EVP_DecryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, SecretKey, NULL))\n        return;\n\n      if(1 != EVP_DecryptUpdate(ctx, result, &amp;len, data, ciphertext_len))\n        return;\n\n\n      EVP_DecryptFinal_ex(ctx, result + len, &amp;len); \n\n      EVP_CIPHER_CTX_free(ctx);\n//Here the array result is always empty\n</code></pre>\n"}, {"tags": ["c", "data-structures", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1450891043, "creation_date": 1450891043, "answer_id": 34440706, "question_id": 34440424, "link": "https://stackoverflow.com/questions/34440424/trouble-in-insertion-of-string-in-linked-list/34440706#34440706", "title": "Trouble in insertion of string in linked list", "body": "<p>Your code gives undefined behavior.</p>\n\n<p>Have a look at the documentation of <a href=\"http://www.cplusplus.com/reference/cstring/strcpy/\" rel=\"nofollow\">strcpy()</a>.</p>\n\n<p>Long story short, <code>strcpy()</code> requires the <code>destination</code> (your <code>new_node-&gt;data</code>) to be an allocated <code>char</code> array, but you have not allocated the data for it, and you are writing to an undefined (and unallocated) memory.</p>\n\n<p>To overcome it, either allocate space dynamically for the new string (and don't forget to free it when a node is released), or make <code>data</code> a <code>char[]</code> instead of a <code>char*</code>.</p>\n\n<p>In addition, just remember <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\" rel=\"nofollow\">buffer overflow weakness</a>. Since it seems like educational purpose code, just think about it - don't try to solve it, IMO.</p>\n"}, {"comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895018, "post_id": 34441413, "comment_id": 56624641, "body": "that will result in undefined behavior as well. How much space does new_data takes? is it strlen(new_data) bytes?"}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895095, "post_id": 34441413, "comment_id": 56624686, "body": "yes, it is, new_data is read from scanf in main function, so lenght is different from 0"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895147, "post_id": 34441413, "comment_id": 56624714, "body": "Let me rephrase, does the new data need strlen(new_data) bytes? Where is the null terminator stored? How much space does the string <code>&quot;&quot;</code> take? What is its length?"}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895224, "post_id": 34441413, "comment_id": 56624744, "body": "no, but in this case the string is read with scanf so we have the null terminator stored"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895251, "post_id": 34441413, "comment_id": 56624752, "body": "And, did you allocate space for it (null terminator) in <code>new_node-&gt;data</code>?"}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1450895348, "post_id": 34441413, "comment_id": 56624807, "body": "no because in the case of the question strlen does not return unkown value while the strings are read with scanf function, so we does not need"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 1, "creation_date": 1450895542, "post_id": 34441413, "comment_id": 56624889, "body": "Assume I insert the string <code>a</code> to scanf. How much bytes to I need to allocate in <code>new_node-&gt;data</code> in order to store this string?"}], "tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": true, "score": -1, "last_activity_date": 1450895656, "last_edit_date": 1450895656, "creation_date": 1450894246, "answer_id": 34441413, "question_id": 34440424, "link": "https://stackoverflow.com/questions/34440424/trouble-in-insertion-of-string-in-linked-list/34441413#34441413", "title": "Trouble in insertion of string in linked list", "body": "<p>You have missed memory allocation, try this:</p>\n\n<pre><code>void insert(struct node** head_ref,char *new_data)\n{\nstruct node* new_node = (struct node*) malloc(sizeof(struct node));\nstruct node *last = *head_ref;\n\n// you should allocate memory because you use data as char *\nnew_node-&gt;data = malloc(strlen(new_data)+1); \n\n/* you can use new_node-&gt;data = strdup(new_data);  \ninstead of new_node-&gt;data = malloc(strlen(new_data)); and strcpy(new_node-&gt;data,new_data); \nbecause strdup allocate and copy string with exact size */\nstrcpy(new_node-&gt;data,new_data); \n\nnew_node-&gt;next = NULL;\nif (*head_ref == NULL)\n{\n   *head_ref = new_node;//assigning head node\n   return;\n}\n\nwhile (last-&gt;next != NULL)\n    last = last-&gt;next;//this helps to traverse to last node\n\nlast-&gt;next = new_node;\nreturn;\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5414622, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QlaEiHWu5M0/AAAAAAAAAAI/AAAAAAAAANc/W8L9MMm_9Hw/photo.jpg?sz=128", "display_name": "ajith kumar", "link": "https://stackoverflow.com/users/5414622/ajith-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 34441413, "answer_count": 2, "score": 2, "last_activity_date": 1450895656, "creation_date": 1450889945, "last_edit_date": 1450891050, "question_id": 34440424, "link": "https://stackoverflow.com/questions/34440424/trouble-in-insertion-of-string-in-linked-list", "title": "Trouble in insertion of string in linked list", "body": "<p>I am writing a program to insert data to linked list and print it.</p>\n\n<p><strong>LinkedList.c</strong>    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node \n{\n  char *data;\n  struct node *next;\n};\n\nvoid insert(struct node** head_ref,char *new_data)\n{\nstruct node* new_node = (struct node*) malloc(sizeof(struct node));\nstruct node *last = *head_ref;\nstrcpy(new_node-&gt;data,new_data);\nnew_node-&gt;next = NULL;\nif (*head_ref == NULL)\n{\n   *head_ref = new_node;//assigning head node\n   return;\n}\n\nwhile (last-&gt;next != NULL)\n    last = last-&gt;next;//this helps to traverse to last node\n\nlast-&gt;next = new_node;\nreturn;\n}\n\n\nvoid printList(struct node *node)//function to print the linked list\n{\n  while (node != NULL)\n  {\n   printf(\" %s \", node-&gt;data);\n   node = node-&gt;next;\n  }\n}\n\n\nint main() {\n   int t;\n   char datas[1000];\n   scanf(\"%d\",&amp;t);\n   struct node* head=NULL;\n   int i;\n   for(i=0;i&lt;t;i++)\n   {\n      scanf(\"%s\",datas);//this data should be added into the linkedlist\n      insert(&amp;head,datas);\n   }\n   printList(head);\n\n  return 0;\n }\n</code></pre>\n\n<p>This program works well for integer but if i use character string instead it showing that there is no response on stdout\nI have been trying to debug the code for more hours.</p>\n"}, {"tags": ["c", "fork"], "comments": [{"owner": {"reputation": 101, "user_id": 5386161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi5Bo.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5386161/adam"}, "edited": false, "score": 0, "creation_date": 1450891619, "post_id": 34440243, "comment_id": 56622875, "body": "Are the forked processes supposed to do anything, or is your only goal here to have your &quot;pstree -c &quot; call display that tree?"}, {"owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "reply_to_user": {"reputation": 101, "user_id": 5386161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi5Bo.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5386161/adam"}, "edited": false, "score": 0, "creation_date": 1450891719, "post_id": 34440243, "comment_id": 56622936, "body": "The goal is only to have the original process call pstree -c (its pid) to display the tree"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1450892329, "post_id": 34440243, "comment_id": 56623263, "body": "This is too broad - what <i>specific</i> aspect are you currently stuck on?"}, {"owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "edited": false, "score": 0, "creation_date": 1450892652, "post_id": 34440243, "comment_id": 56623448, "body": "if i had to narrow it down, i do know how to fork a process and go down to a child, the problem i have is i dont know how to get to the child that i need to fork next, right at the start, how do i for the right one and when i do, how do i get to the middle one to fork from there on?"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1450892918, "post_id": 34440243, "comment_id": 56623588, "body": "The forkers should wait the forkees, and the leaf processes should wait for something like 60 seconds, enough time for you to run your command."}, {"owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "edited": false, "score": 0, "creation_date": 1450893162, "post_id": 34440243, "comment_id": 56623717, "body": "But how do i know which one needs to fork and which one needs to wait, like after i call fork for the 3 processes with the one at lvl 2, how do i know which one of them is the middle one"}, {"owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "edited": false, "score": 0, "creation_date": 1450893744, "post_id": 34440243, "comment_id": 56624015, "body": "is it ok then if do it like this on the first one then: for (int i=0; i&lt;2; i++) {     pid[i]=fork(); if (i==2) {            //new for in here that will call fork 3 times     } }"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "edited": false, "score": 0, "creation_date": 1450975868, "post_id": 34451682, "comment_id": 56653272, "body": "Thank you, where did you call pstree from tho, mine needs to just have 1 arm going out like this bash------x----x in between the the first and the second x"}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": true, "score": 1, "last_activity_date": 1450954598, "creation_date": 1450954598, "answer_id": 34451682, "question_id": 34440243, "link": "https://stackoverflow.com/questions/34440243/fork-tree-in-c-depending-on-specific-parameters/34451682#34451682", "title": "Fork tree in c depending on specific parameters", "body": "<p>It's been almost a day, not sure if the comments were helpful.<br>\nHere is a suggested implementation - I understand you want to try to do it by yourself first, so, at first are hints. And if you need some clue, have a look at the C program at the bottom.</p>\n\n<p>Assumptions: </p>\n\n<ul>\n<li>string is made of a number of digits separated each by at least a space. </li>\n<li>after the end of the string, instruction is equivalent to \"0 fork\"</li>\n<li>And the limitation (at the bottom). </li>\n</ul>\n\n<p>First, you may notice a recursive pattern (but the same algo might be developed the <em>iterative</em> way also)</p>\n\n<ul>\n<li>fork n times</li>\n<li>ask children 1 .. n to fork x1 .. xn times, while feeding them with the next operation</li>\n<li>each child repeats the same algorithm</li>\n</ul>\n\n<p><strong>Hints</strong></p>\n\n<ul>\n<li>create two functions, one to get to the next digit in string, one to skip n digits in the string</li>\n<li>make a recursive function that takes 2 arguments\n\n<ul>\n<li>the number of forks to be performed</li>\n<li>the part of the string that gives instructions for the next forks, if any, of that particular child (among all children, only one should for again)</li>\n</ul></li>\n<li>if no fork is to be performed, the function just wait for a minute</li>\n<li>if N forks have to be performed, \n\n<ul>\n<li>get a S which points to the string after all children of <em>that</em> call have been skipped (eg \"2 0 3 4 0 0\" forks twice, 0 and 3 are the number of forks to be done by the children, the 2nd child gets a S that points to \"4 0 0\").</li>\n<li>do the N forks which children call recursively the function with the arguments (eg same example 0 and 3 for 2 forks)</li>\n<li>child side, return after the recursive call</li>\n<li>the parent process (<em>this</em> one) each time makes S points to the next digit, only if the child creates at least one fork.</li>\n</ul></li>\n<li>finally wait for all process created above</li>\n</ul>\n\n<p>That's it.</p>\n\n<p><em>Limitation</em>: the algo suggested here assumes the operation string generates only one active branch per each group of forks - the string you provide \"2 0 3 0 1 0 3\" goes according to that limitation (otherwise the algo would be much harder ; for instance with \"2 2 3...\" you'd have 2 parallel active branches, that have their own lives and must be fed from the string! Meaning searching within the string which part to be give to depth D fork F...).</p>\n\n<hr>\n\n<p>You should get something like (yes, my prog name is \"x\"), visible for about a minute via <code>pstree -c</code> </p>\n\n<pre><code>-bash\u2500\u2500\u2500x\u2500\u252c\u2500x\n          \u2514\u2500x\u2500\u252c\u2500x\n              \u251c\u2500x\u2500\u2500\u2500x\u2500\u252c\u2500x\n              \u2502       \u251c\u2500x\n              \u2502       \u2514\u2500x\n              \u2514\u2500x\n</code></pre>\n\n<hr>\n\n<p><strong>Implementation suggestion</strong></p>\n\n<ul>\n<li>First the 2 helper functions</li>\n</ul>\n\n<p>To get to next digit (or 0 ie '\\0') is string</p>\n\n<pre><code>char *nextdigit(char *s) {\n    while (*s &amp;&amp; (*s&lt;'0' || *s&gt;'9')) s++; // skip non digits\n    return s;\n}\n</code></pre>\n\n<p>To skip n digits</p>\n\n<pre><code>char *skipndigits(int n, char *s) {\n    while (n--) {\n        s = nextdigit(s);\n        if (*s) s++;\n    }\n    return s;\n}\n</code></pre>\n\n<p>Next is how the recursive function should be called (eg from <em>main()</em>), having <em>forkering()</em> the name of the function</p>\n\n<pre><code>char *op = \"2 0 3 0 1 0 3\";\n\nforkering(atoi(op), op+1);\n</code></pre>\n\n<p>And finally the recursive function.</p>\n\n<pre><code>#define WAITING 60\n\nvoid forkering(int n, char *op) {\n    printf(\"forkering %d, with %s\\n\", n, op);\n\n    if ( ! n) {\n        sleep(WAITING); // no forking, wait WAITING seconds\n        return;\n    }\n\n    char *nextop = skipndigits(n, op); // next op (for children)\n\n    while(n--) {\n        op = nextdigit(op);\n        int nop = atoi(op);  // number of forks that child has to do\n        if ( ! fork()) {\n            forkering(nop, nextop);\n            return;\n        }\n        if (nop) nextop = skipndigits(1, nextop); // only skip if non zero\n        op = skipndigits(1, op); // for our children\n    }\n\n    while (wait(NULL) &gt; 0); // wait all processes created above\n}\n</code></pre>\n\n<p>As you can see the function is pretty short.</p>\n"}], "owner": {"reputation": 41, "user_id": 4773742, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fe17c705e9c319a9ddd24dff620052bd?s=128&d=identicon&r=PG&f=1", "display_name": "Muffin123", "link": "https://stackoverflow.com/users/4773742/muffin123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 34451682, "answer_count": 1, "score": 2, "last_activity_date": 1450954598, "creation_date": 1450889287, "last_edit_date": 1450892715, "question_id": 34440243, "link": "https://stackoverflow.com/questions/34440243/fork-tree-in-c-depending-on-specific-parameters", "title": "Fork tree in c depending on specific parameters", "body": "<p>So I have to make a tree with fork that I then need to show using pstree.\nThe tree is based on how some parameters, here is one option: 2 0 3 0 1 0 3.\nMeaning: The original process needs to fork 2 children, the left one does nothing, the right one forks 3 children. The left one and the right one do nothing, the middle one forks 1 process and that process than forks 3 more children. </p>\n\n<p>This is a scheme:</p>\n\n<blockquote>\n<pre><code>     o\n    / \\\n   o   o\n      /|\\\n     o o o\n       |\n       o\n      /|\\\n     o o o\n</code></pre>\n</blockquote>\n\n<p>I have no idea on how to start this, all i have is this: (Keep in mind I don't need to hardcode)\nEDIT: I dont know how to identify which child to fork on from. (How do i know which child of those 3 is the middle one?)</p>\n\n<pre><code>    char c; int n;\n    int *array = (int*)malloc(20*sizeof(int));\n    int i = 0;\n    //reads the cmdline arguements\n    while ((scanf(\"%d\", &amp;n))!=EOF) {\n        array[i]=n;\n        //printf(\"%d \", array[i]);\n        i++;\n    }\n    //gets pid of original process and makes a string to call pstree\n    int d=getpid();\n    char str[50] = \"pstree -c \";\n    char str1[20];\n    sprintf(str1, \"%d\", d);\n    strcat(str,str1);\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1450889510, "post_id": 34440156, "comment_id": 56621658, "body": "What did you see when you put this in a debugger and stepped through the code one line at a time?  What were the values of <code>L</code> and <code>H</code>?"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 2, "creation_date": 1450889802, "post_id": 34440156, "comment_id": 56621848, "body": "<code>strcpy(elements[i], ROW)</code> copies something that could be up to 1025 bytes long, into a buffer of 257 bytes; potential buffer overflow."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450889998, "post_id": 34440156, "comment_id": 56621962, "body": "H=5 and L=4. it gave me ### repeted for several times. And actually ### is the first string of the E in ASCII."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1450890001, "post_id": 34440156, "comment_id": 56621963, "body": "<code>Pelements[i] = &amp;elements[i];</code> This assignment , both of them have a different type .Compiler may have complained about it ."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450890126, "post_id": 34440156, "comment_id": 56622047, "body": "How do they have different type? they are char, aren&#39;t they?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1450890187, "post_id": 34440156, "comment_id": 56622087, "body": "@Emanuele No, <code>Pelements[i]</code> has type <code>char *</code> and other one has type <code>char (*)[]</code>."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450890290, "post_id": 34440156, "comment_id": 56622141, "body": "@amecyCU Could you please explain that? as i wrote i&#39;ve just learned pointers, i don&#39;t even know the difference between char * and char(*)[]"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1450890399, "post_id": 34440156, "comment_id": 56622197, "body": "@Emanuele  <code>char *</code> is a pointer to <code>char</code>  and <code>char (*)[]</code> is a pointer to array of <code>char</code> ."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450890853, "post_id": 34440156, "comment_id": 56622458, "body": "@amecyCU I&#39;m getting confused. So how should i define those variables?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1450891502, "post_id": 34440156, "comment_id": 56622805, "body": "@Emanuele Don&#39;t get exhausted. I will suggest you to <a href=\"http://c-faq.com/aryptr/ptrary2.html\" rel=\"nofollow noreferrer\">read this</a> , then you would be comfortable  :-)"}, {"owner": {"reputation": 183, "user_id": 3741342, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f71ff8dd5efbb5b6ed8f79137fd079a8?s=128&d=identicon&r=PG&f=1", "display_name": "ThCP", "link": "https://stackoverflow.com/users/3741342/thcp"}, "edited": false, "score": 0, "creation_date": 1450892049, "post_id": 34440156, "comment_id": 56623101, "body": "You can remove the problem on the Pelements[i] = &amp;elements[i]; assigment by simply deleting the &amp; sign"}, {"owner": {"reputation": 183, "user_id": 3741342, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f71ff8dd5efbb5b6ed8f79137fd079a8?s=128&d=identicon&r=PG&f=1", "display_name": "ThCP", "link": "https://stackoverflow.com/users/3741342/thcp"}, "edited": false, "score": 0, "creation_date": 1450892583, "post_id": 34440156, "comment_id": 56623409, "body": "Could you also explain what you mean by &quot;given by the program&quot;? What part are you  exactly given and should not change?"}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "reply_to_user": {"reputation": 183, "user_id": 3741342, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f71ff8dd5efbb5b6ed8f79137fd079a8?s=128&d=identicon&r=PG&f=1", "display_name": "ThCP", "link": "https://stackoverflow.com/users/3741342/thcp"}, "edited": false, "score": 0, "creation_date": 1450906010, "post_id": 34440156, "comment_id": 56629627, "body": "@ThCP when i say that it&#39;s given by the program i mean than this is a game for programmers, and some variables cannot be changed due to the fact their values are given by programmers that coded the program. I don&#39;t know if i can say the name of the site.."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450906017, "post_id": 34440156, "comment_id": 56629633, "body": "Thank you @ameyCY i will read it."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450889708, "post_id": 34440309, "comment_id": 56621784, "body": "L is how much large are the letters given in ASCII, so it should be right.. if the lenght of a letter is 4, temp * 4 will return a number that represent where i should start to print."}], "tags": [], "owner": {"reputation": 2185, "user_id": 1504016, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/jrHkN.png?s=128&g=1", "display_name": "ibi0tux", "link": "https://stackoverflow.com/users/1504016/ibi0tux"}, "is_accepted": false, "score": 0, "last_activity_date": 1450889503, "creation_date": 1450889503, "answer_id": 34440309, "question_id": 34440156, "link": "https://stackoverflow.com/questions/34440156/getting-a-single-character-out-of-a-string-array-in-c/34440309#34440309", "title": "Getting a single character out of a string array in C", "body": "<p>I think your problem is here :</p>\n\n<pre><code>int index = temp*L; \n</code></pre>\n\n<p>From your code <code>temp</code> can be up to 25 and in your input in <code>L</code> is for instance the char <code>A</code> (64), your index will be 1600 which is I think larger than your <code>Pelements</code> size.</p>\n\n<p>I can not tell if this will solve your whole problem, but it might make you resolve a first issue.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450906422, "post_id": 34443345, "comment_id": 56629806, "body": "Thank you. This is exactly what i am trying to accomplish. I understand that my thinking-process identify me as a newbie. There are several things that i don&#39;t understand due to missing knowledge. For example: in the printf you used&quot;%*s&quot;.. why with the * ?Why are there 2 variables printed for a single reference?(there is only one %s, and L is an int..). If you are asking yourself why i&#39;m trying to read some variables from stdin, the reason is because this is a game for programmers, and those variables have already a value, given by the programmer . Again Thank you very much, i appreciate."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450907384, "post_id": 34443345, "comment_id": 56630257, "body": "@Emanuele: You can use an asterisk (*) to pass the width specifier/precision to printf(), rather than hard coding it into the format string, as I did passing L (which isn&#39;t printed). I could use &quot;%.3s&quot;."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450908883, "post_id": 34443345, "comment_id": 56630893, "body": "I see, i already knew that it&#39;s possible to use a number but i&#39;ve never thought that i could use a variable. Thank you."}, {"owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450910216, "post_id": 34443345, "comment_id": 56631410, "body": "Another question @Bob__ . Is it possible that there is a character at end of string different from &#39;\\0&#39; ? if my input is E, it gives me E?. It can&#39;t be \\0, because i verify it with while condition.."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "edited": false, "score": 0, "creation_date": 1450911972, "post_id": 34443345, "comment_id": 56632022, "body": "@Emanuele: I don&#39;t understand. What&#39;s your string? &quot;E&quot;? In C strings are null-terminated array of char, so &quot;E&quot; is {&#39;E&#39;,&#39;\\0&#39;}"}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1450960968, "last_edit_date": 1450960968, "creation_date": 1450903108, "answer_id": 34443345, "question_id": 34440156, "link": "https://stackoverflow.com/questions/34440156/getting-a-single-character-out-of-a-string-array-in-c/34443345#34443345", "title": "Getting a single character out of a string array in C", "body": "<p>If I have understood what are you trying to accomplish, most of your code is pretty useless. This:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFSIZE 128\n\nint main()\n{\n\n    char *ROW[5] = {\n        \" # ##  #### ###### ### #### ### ##  # #### # ##  # ##  ###### ## ## ## ## #######   \",\n        \"# ## ##  # ##  #  #  # # #   ## ##  #### ## ## ## ## ##   # # ## ## ## ## #  #  #   \",\n        \"##### #  # ### ## # #### #   ### #  #### ## ### # ###  #  # # ## #### #  #  #  ##   \",\n        \"# # ###  # ##  #  # ## # # # ## ##  # ## ## ##   ### #  # # # ## ##### # # #        \",\n        \"# ###  #### ####  #### #### # # ##### ## # # #    ## ###  # ### # # ## # # ### #    \",\n    };\n    const int L = 3;  // why do you want to read those from stdin?\n    const int H = 5;  // they depend on how you define your alphabet\n    const int not_a_letter = 26; // \"index\" of ? in your alphabet\n    const int space = 27;           // I added a space\n//    char T[BUFSIZE];\n//    fgets(T, BUFSIZE, stdin);\n    char T[]= \"Hello World!\"; //better starting with something short. note what happens to the '!'\n    for( int i = 0; i &lt; H; i++) { // for every row\n        char  * pch = T;\n        int temp;\n        while( *pch != '\\0') {\n            if( *pch &gt;='A' &amp;&amp; *pch &lt;= 'Z' ) temp = *pch - 'A';\n            else if ( *pch &gt;='a' &amp;&amp; *pch &lt;= 'z') temp = *pch - 'a'; // I'll print only capitals...\n            else if ( *pch == ' ') temp = space;\n            else temp = not_a_letter;\n            int index = temp * L; \n            printf(\"%.*s \" , L, ROW[i]+index); // print L char of string ROW[i] starting from index\n            pch++;\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Will print this:</p>\n\n<pre><code># # ### #   #    #      # #  #  ##  #   ##  ###\n# # #   #   #   # #     # # # # # # #   # #   #\n### ##  #   #   # #     ### # # ##  #   # #  ##\n# # #   #   #   # #     ### # # # # #   # #\n# # ### ### ###  #      # #  #  # # ### ##   #\n</code></pre>\n\n<p>edit:</p>\n\n<p>I'd like to add some considerations. Your program's input is read from stdin. This is a requirement, I guess, as most on line compiler redirect input and output from files, but it's not really convenient to enter every time all the variables, expecially all those \"## ####   ###...\", so I hard coded them in the program. I didn't add extra spaces between the letters so my L is 3, but in the picturre you posted they did, so your L is 4.</p>\n\n<p>You can keep that part of your program unchanged (mostly), but I'd like to point out a couple of things. When you read T you allocate enough space for 256 char, usually consolle screen are ~80 column wide so a string greater then 20 characters ( 80/4 ;) will be messed up when printed on stdout unless the output is redirected to a file (probably) or you change the program so that it can print out from T only 20 char at a time.\nThen you read the \"font\" using a buffer (ROW) big enough to contain 256 magnified characters (256*4=1024 ;) which is the entire ASCII set. I used only the capital letters, of course, but the problem is that IF they give you ALL the character you don't need a temp variable to shift the index to the right range, otherwise you don't need all that space. You should check what's the case.\nYou can read directly into ROW after having allocated the memory:</p>\n\n<pre><code>#define BUFSIZE 1025\n\nchar **ROW = malloc(H*sizeof(char*));\nfor (int i = 0; i &lt; H; i++) {\n\n    ROW[i] = malloc(BUFSIZE);\n    fgets(ROW[i], BUFSIZE, stdin);\n\n}\n</code></pre>\n\n<p>Remember to free the memory before closing the program:</p>\n\n<pre><code>for (int i = 0; i &lt; H; i++) {\n    free(ROW[i]);\n}\nfree(ROW);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5705090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/923ac5ff87d0f8465bbb5388ee198121?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/5705090/emanuele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 34443345, "answer_count": 2, "score": 2, "last_activity_date": 1450960968, "creation_date": 1450888926, "last_edit_date": 1450889277, "question_id": 34440156, "link": "https://stackoverflow.com/questions/34440156/getting-a-single-character-out-of-a-string-array-in-c", "title": "Getting a single character out of a string array in C", "body": "<p>Let's say that i have an array of strings that looks like this:\n<a href=\"http://i.stack.imgur.com/3gKf0.jpg\" rel=\"nofollow\">Alphabet</a>\nAs you can see, this is the alphabet represented with #.\nThe aim of the program is to show a letter (that comes from an input) using #.</p>\n\n<p>So if input = E , i will have to print <a href=\"http://i.stack.imgur.com/5YK9R.jpg\" rel=\"nofollow\">E</a></p>\n\n<p>If a letter is not beetwen [a-z] or [A-Z], i have to print a question mark(made with #).\nWe are given T: the message to code H: the height of the letter(number of rows), L: the lenght of letters, and ROW:the sequence of rows that create the alphabet with #.</p>\n\n<p>So i actually got a part of the program already coded.\nBut my problem is not how to sort this out.\nThe fact is that i've just learned pointers(basic use) and i don't understand how to handle them in a more complex(for me, it's complex), way.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n/**\n * Auto-generated code below aims at helping you parse\n * the standard input according to the problem statement.\n **/\nint main()\n{\n    int L;\n    scanf(\"%d\", &amp;L); fgetc(stdin);\n    int H;\n    scanf(\"%d\", &amp;H); fgetc(stdin);\n    char T[257];\n    fgets(T, 257, stdin);\n\n    char elements[H][sizeof(T)];\n    char *pointer, *Pelements[H];\n\n    pointer = T;\n\n    for (int i = 0; i &lt; H; i++) {\n\n        char ROW[1025];\n        fgets(ROW, 1025, stdin);\n        // given by the program\n\n        strcpy(elements[i], ROW);\n        Pelements[i] = &amp;elements[i];\n        // now i got the address of every first character of a string\n    }\n\n    while(*pointer != '\\0'){\n      if(*pointer &gt;='a' &amp;&amp; *pointer &lt;= 'z' || *pointer &gt;='A' &amp;&amp; *pointer &lt;= 'Z'){\n        int temp= ((*pointer) - 'A');\n        if(temp &lt;= 25){\n          for(int i=0; i&lt;H; i++){\n            int index= temp*L; // getting the position where to start to print\n            for(int j=0; j&lt;L; j++){\n              printf(\"%s \" , *Pelements+index);\n              Pelements[i]++; //could have used index++\n            }\n          }\n        }\n      }\n      else{\n          printf(\"?\");\n      } \n      pointer++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The program is not completed ( i didn't handle [a-z]) in fact i'm testing it only with uppercase letters.</p>\n\n<p>THE PROBLEM:\nIt keeps returning \"segmentation fault\", or giving me # in random positions. \nThank you in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450888704, "post_id": 34440038, "comment_id": 56621155, "body": "You forgot to reset <code>k = 0</code> after a mismatch, and after the success."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450888833, "post_id": 34440038, "comment_id": 56621236, "body": "Aside: <code>for (i = 0; i &lt;= strlen(str); i++)</code> iterates too far, <code>for (i = 0; i &lt; strlen(str); i++)</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1450889025, "post_id": 34440038, "comment_id": 56621364, "body": "Try separating the problem into smaller ones. For example: can SubSring of size Len be found in String starting at position Pos? Change the case of L letters in String starting from position Pos."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1450889093, "post_id": 34440038, "comment_id": 56621406, "body": "The main thing to realize is that you have to first search for a first character match and then check for the match of the rest of the string. Use a second set of counters for matching the rest of the string so that you don&#39;t loose your position in the main string. To clarify the process you could even use a second function for matching the rest of the string and capitalization"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450890243, "post_id": 34440038, "comment_id": 56622113, "body": "Thanks to your comments. I&#39;ve upgraded my code. @WeatherVane"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450890614, "post_id": 34440038, "comment_id": 56622320, "body": "@IlanAizelmanWS I rolled back the question. Please don&#39;t remove errors from the question (unless the question was incorrectly asked). It makes the original question, comments and answer, very hard to understand without looking back through the edits."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450890967, "post_id": 34440038, "comment_id": 56622516, "body": "@Ilan Aizelman WS Why accept an answer that uses <code>strstr()</code> if &quot;Do not use string&#39;s functions like strstr.&quot;?"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1450891573, "post_id": 34440038, "comment_id": 56622847, "body": "Because it is easy doing so with strstr(), but I don&#39;t know if someone will help me with my code anyways."}], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1450890427, "post_id": 34440448, "comment_id": 56622211, "body": "Thank you. Although I did wanted to get my code working without strstr."}, {"owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1450892428, "post_id": 34440448, "comment_id": 56623330, "body": "I have updated my response, I have added a new version of <code>replaceSubstring()</code> function without using <code>strstr()</code> function."}], "tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": true, "score": 1, "last_activity_date": 1450892342, "last_edit_date": 1450892342, "creation_date": 1450890033, "answer_id": 34440448, "question_id": 34440038, "link": "https://stackoverflow.com/questions/34440038/check-if-substring-in-string-and-make-strings-chars-uppercase-when-found-a-su/34440448#34440448", "title": "Check if substring in string, and make string&#39;s chars uppercase (when found a substring there", "body": "<p>You can use <code>strstr()</code> function to do this more easly, like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define N 101\nvoid replaceSubstring(char *str, char *subStr);\n\nvoid main()\n{\n    char str[N], subStr[N];\n    while (strlen(str) != 0 || strlen(subStr) != 0)\n\n    {\n        str[0] = 0;\n        printf(\"Enter text: \");\n        gets(str);\n        printf(\"Enter substring: \");\n        scanf(\"%s\", subStr);\n\n        replaceSubstring(str, subStr);\n\n    }\n}\n\nvoid replaceSubstring(char *str, char *SubStr)\n{\n    int  i;\n    char *tmp;\n\n    while((tmp = strstr(str, SubStr)) != NULL)\n    {\n        for (i = 0; i &lt; strlen(SubStr); i++)\n        {        \n            tmp[i] -= 32;\n        }\n    }\n    puts(str);\n    getchar();\n}\n</code></pre>\n\n<p>Here another version of <code>replaceSubstring()</code> function without using <code>strstr()</code> function:</p>\n\n<pre><code>void replaceSubstring(char *str, char *SubStr)\n{\n    int  i = 0, found = 1, j = 0, k = 0;\n\n    while (i &lt; strlen(str))\n    {    \n        if (str[i] == SubStr[0])\n        {\n            found = 1;            \n            for(k = 0; k &lt; strlen(SubStr); k++)\n            {\n                if(str[i+k] != SubStr[k])\n                {\n                    found = 0;\n                    break;\n                }\n            }\n            if(found)\n            {\n                for(k = 0; k &lt; strlen(SubStr); k++)\n                {\n                    str[i+k] -= 32;\n                }\n                i += strlen(SubStr);\n            }\n            else\n                i++;\n        }\n        else\n            i++;\n    }\n    puts(str);\n    getchar();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1450893729, "last_edit_date": 1450893729, "creation_date": 1450893394, "answer_id": 34441232, "question_id": 34440038, "link": "https://stackoverflow.com/questions/34440038/check-if-substring-in-string-and-make-strings-chars-uppercase-when-found-a-su/34441232#34441232", "title": "Check if substring in string, and make string&#39;s chars uppercase (when found a substring there", "body": "<p>Here is a demonstrative program that shows how the function can be written</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nchar * replaceSubstring( char *s1, const char *s2 )\n{\n    char *p = s1;\n    size_t n = strlen( s2 );\n\n    while ( ( p = strstr( p, s2 ) ) != NULL )\n    {\n        for ( size_t i = 0; i &lt; n; ++i, ++p  ) *p = toupper( ( unsigned char )*p );     \n    }\n\n    return s1;\n}\n\nint main( void )\n{\n    char s[] = \"abcdeffghfhkfff\";\n\n    puts( s );\n    puts( replaceSubstring( s, \"ff\" ) );\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>abcdeffghfhkfff\nabcdeFFghfhkFFf\n</code></pre>\n\n<p>Take into account that according to the C Standard function main without parameters shall be declared like`</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Also it is a bad idea to use \"magic\" numbers like 32 like in this statement</p>\n\n<pre><code>tmp[i] -= 32;\n</code></pre>\n\n<p>For example if in the environment there are used EBCDIC characters then this statement will be simply wrong.</p>\n\n<p>Moreover even for ASCII characters this statement is invalid because it is not necessary that original characters are in lower case.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5699501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f41a1c267e38fd29128d78c275be3e?s=128&d=identicon&r=PG&f=1", "display_name": "G. Fritz", "link": "https://stackoverflow.com/users/5699501/g-fritz"}, "is_accepted": false, "score": 1, "last_activity_date": 1450894728, "creation_date": 1450894728, "answer_id": 34441510, "question_id": 34440038, "link": "https://stackoverflow.com/questions/34440038/check-if-substring-in-string-and-make-strings-chars-uppercase-when-found-a-su/34441510#34441510", "title": "Check if substring in string, and make string&#39;s chars uppercase (when found a substring there", "body": "<p>To solve this without using <code>strstr()</code>, i would do something like this:</p>\n\n<pre><code>void replaceSubstring(char *str, char *SubStr)\n{\n    int  i = 0, equals = 0, j = 0, k = 0;\n    for(i=0;i&lt;strlen(str);i++){\n        j = i;\n        equals = 1;\n        k=0;\n        while(k&lt;strlen(SubStr)&amp;&amp;(equals == 1)){\n            if(SubStr[k] != str[j]){\n                equals = 0;\n            }\n            k++;\n            j++;\n        }\n        if(equals == 1){\n            for(j=i;j&lt;i+k;j++){\n                str[j] -= 32;\n            }\n        }\n    }\n    puts(str);\n    getchar();\n}\n</code></pre>\n\n<p>I'm pretty sure this works correctly.</p>\n\n<pre><code>input: abcdeffghfhkfff\nsubstring: ff\noutput: abcdeFFghfhkFFf\n</code></pre>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 34440448, "answer_count": 3, "score": 1, "last_activity_date": 1450894728, "creation_date": 1450888451, "last_edit_date": 1592644375, "question_id": 34440038, "link": "https://stackoverflow.com/questions/34440038/check-if-substring-in-string-and-make-strings-chars-uppercase-when-found-a-su", "title": "Check if substring in string, and make string&#39;s chars uppercase (when found a substring there", "body": "<p><strong>What I need to write:</strong></p>\n<blockquote>\n<p>1.Get a main string from user.</p>\n<p>2.Get a subString from a user.</p>\n<ol start=\"3\">\n<li><p>Every match of the subString in the main string, change its letters to uppercase.</p>\n</li>\n<li><p>Do not use string's functions like strstr.</p>\n</li>\n</ol>\n</blockquote>\n<p><strong>For example:</strong></p>\n<blockquote>\n<p>main string:  abcdeffghfhkfff</p>\n<p>sub string: ff</p>\n<p>outut: abcdeFFghfhkFFf</p>\n</blockquote>\n<p><strong>Problem:</strong> Well, I'm having troubles to continue writing the code after I found one match. for example after I found the first 'f' in the main string, how can I continue check if the second 'f' is adjacent to the found 'f', if not, then try to find another 'f' and check subsequent matches of the subarray until we've found that the length of the substring matches the number of subsequent matches in the string?  Here's what I've tried, and in writing the logic of the for loop in 'replaceSubstring' function</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;conio.h&gt;\n#include &lt;string.h&gt;\n\n#define N 101\nvoid replaceSubstring(char *str, char *subStr);\n\nvoid main()\n{\n    char str[N], subStr[N];\n    while (strlen(str) != 0 || strlen(subStr) != 0)\n\n    {\n        str[0] = 0;\n        printf(&quot;Enter text: &quot;);\n        gets(str);\n        printf(&quot;Enter substring: &quot;);\n        scanf(&quot;%s&quot;, subStr);\n\n        replaceSubstring(str, subStr);\n\n    }\n}\n\nvoid replaceSubstring(char *str, char *SubStr)\n{\n    int  i, count = 0, j = 0, k = 0;\n\n    for (i = 0; i &lt;= strlen(str); i++)\n    {\n        if (str[i] == SubStr[k])\n        {\n            k++;\n            count++;\n            if (count == strlen(SubStr))\n            {\n                str[i] -= 32;\n            }\n            \n\n        }\n    }\n    puts(str);\n    getchar();\n}\n</code></pre>\n"}, {"tags": ["c", "drawing", "2d-games", "coordinate-systems"], "comments": [{"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1450888388, "post_id": 34439982, "comment_id": 56620973, "body": "Best is if you could provide your code in the question too"}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 2, "creation_date": 1450888395, "post_id": 34439982, "comment_id": 56620976, "body": "It&#39;s absolutely impossible to say what could be wrong without seeing your code."}, {"owner": {"reputation": 952, "user_id": 5640413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d07fd20980a84da892b786510152cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Richard St-Cyr", "link": "https://stackoverflow.com/users/5640413/richard-st-cyr"}, "edited": false, "score": 0, "creation_date": 1450888501, "post_id": 34439982, "comment_id": 56621032, "body": "Welcome to SO. Please read <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask a good question</a>."}, {"owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "edited": false, "score": 0, "creation_date": 1450889228, "post_id": 34439982, "comment_id": 56621489, "body": "@lan i edited the post i&#39;ll be happy if you could check it out"}], "answers": [{"tags": [], "owner": {"reputation": 1055, "user_id": 3406936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2294a96c8fb728eca7525ea9de2e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Shlomi Agiv", "link": "https://stackoverflow.com/users/3406936/shlomi-agiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1450888568, "creation_date": 1450888568, "answer_id": 34440069, "question_id": 34439982, "link": "https://stackoverflow.com/questions/34439982/battleships-game-ships-drowned-in-c/34440069#34440069", "title": "Battleships game, ships drowned in C", "body": "<p>you need to maintain a status for each of the battleships, like isDead[4] or such. init to 0. Once a battleship is declared dead you notify it's dead, change the status to 1 and stop checking for it later</p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 2146694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xy6qw.jpg?s=128&g=1", "display_name": "David Nogueira", "link": "https://stackoverflow.com/users/2146694/david-nogueira"}, "is_accepted": false, "score": 1, "last_activity_date": 1450894342, "last_edit_date": 1450894342, "creation_date": 1450889039, "answer_id": 34440186, "question_id": 34439982, "link": "https://stackoverflow.com/questions/34439982/battleships-game-ships-drowned-in-c/34440186#34440186", "title": "Battleships game, ships drowned in C", "body": "<p>Moreover, you don't need to always be checking that. If every time the player hits a ship, you check if the ship is drowned (all its coordinates were hit), you just need to increment a counter of drowned_ships and check if that value is already equal to the stop/termination condition (drowned_ships == 4).</p>\n\n<pre><code>#define DROWNED_SHIPS_STOP 4\n\nbool ship::isDrowned(){\n    for (int i = 0 ; i &lt; size() ; i++){\n        //size() here would return 4 for your example -&gt; it is the size of the ship\n        if (board[posX[i]][posY[i] == 'V'){\n            count++;\n        }\n    }\n    return (count == size()) ? true:false;\n}\n\n(...)\n\n//Receive a x and y\ncoordinates = get_player_input();\n\nShip * ship;\nif (ship = isShip(coordinates.x,coordinates.y)){\n    //test if a ship has been hit\n    if( ship.isDrowned() ){\n        //every position of that ship has been hit\n        ships_drowned++;\n        if (ships_drowned == DROWNED_SHIPS_STOP)\n            DisplayGameTermination();\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5687176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9753121f45554d1b3e1adb3644bfd486?s=128&d=identicon&r=PG&f=1", "display_name": "thaeer", "link": "https://stackoverflow.com/users/5687176/thaeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450894342, "creation_date": 1450888221, "last_edit_date": 1450891479, "question_id": 34439982, "link": "https://stackoverflow.com/questions/34439982/battleships-game-ships-drowned-in-c", "title": "Battleships game, ships drowned in C", "body": "<p>I'm making a \"battleships\" game, and after placing all the ships, starting the game, etc., the user will enter \"coordinates to attack\" and if he hits a ship then the board will show 'V' in the coordinate the he hit and 'X' if there weren't any ships there.</p>\n\n<p>Well I did that part and its not the problem here, I have 4 different ships each with a different size, to drown the ship you have to hit all of its parts (its size).</p>\n\n<p>Example:</p>\n\n<pre><code>4|*\n3|  *\n2|    *\n1|\n0|* * * *\n  - - - - -\n  0 1 2 3 4\nEnter coordinates for attack\n(0,4)\n\n4|V\n3|  *\n2|    *\n1|\n0|* * * *\n  - - - - -\n  0 1 2 3 4\nEnter coordinates for attack\n(1,3)\n\n4|V\n3|  V\n2|    *\n1|\n0|* * * *\n  - - - - -\n  0 1 2 3 4\nEnter coordinates for attack\n(2,2)\n\n4|V\n3|  V\n2|    V\n1|\n0|* * * *\n  - - - - -\n  0 1 2 3 4\n\nthe battleship of size 3 has drowned!\n</code></pre>\n\n<p>And if the 4 battleships are drowned then its game over! What I did is to check\nall of the ship coordinates are 'V' and if so the the battleship has drowned but I think my problem is that there are more than one ship and if I check this every time it'll always say the the first battleship has drowned.</p>\n\n<p>I made two arrays that contain the locations of the ships:</p>\n\n<pre><code>posX[] = {1,2,3,4}\nposY[] = {1,2,3,4}\n</code></pre>\n\n<p><sup>(means the ship is on the locations (1,1) (2,2) (3,3) (4,4) the size is 4.)</sup></p>\n\n<p>What I did was like this:</p>\n\n<pre><code>for (int i = 0 l i &lt; 4 ; i++)\n{\nif (board[posX[i]][posY[i] == 'V')\n{\ncount++;\n}\n}\nif ( count == 4 ) printf(\"the battleship of size 4 has drowned\\n\");\n</code></pre>\n\n<p>And I tried something familiar to check if all the coordinates are 'V' the printf, but it's the same.</p>\n"}, {"tags": ["c", "sockets", "network-programming", "ntp"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1450888090, "post_id": 34439841, "comment_id": 56620790, "body": "It would be helpful if you could describe what actually <i>happens</i> with this code. You say there&#39;s a problem with the code you show, but you don&#39;t actually describe the problem which makes it a guessing game for us. For example, what output does the program write, and what did you expect it to write?"}, {"owner": {"reputation": 98, "user_id": 2587814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5Ltq.jpg?s=128&g=1", "display_name": "Mehrdad Mehraban", "link": "https://stackoverflow.com/users/2587814/mehrdad-mehraban"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1450889446, "post_id": 34439841, "comment_id": 56621616, "body": "my mistake, added the output."}], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 2587814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5Ltq.jpg?s=128&g=1", "display_name": "Mehrdad Mehraban", "link": "https://stackoverflow.com/users/2587814/mehrdad-mehraban"}, "edited": false, "score": 0, "creation_date": 1450896515, "post_id": 34441716, "comment_id": 56625348, "body": "I am aware of that concept and even added it but didn&#39;t change anything! I think the problem is when I am getting the packets from the server.   any ideas?"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 1, "last_activity_date": 1450895717, "creation_date": 1450895717, "answer_id": 34441716, "question_id": 34439841, "link": "https://stackoverflow.com/questions/34439841/sntp-client-version-4/34441716#34441716", "title": "SNTP client version 4", "body": "<p>Server sends data in network endianness, and you need to convert them to the host endianness. See <code>ntohs(), ntohl()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 2587814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5Ltq.jpg?s=128&g=1", "display_name": "Mehrdad Mehraban", "link": "https://stackoverflow.com/users/2587814/mehrdad-mehraban"}, "is_accepted": true, "score": 1, "last_activity_date": 1450970831, "creation_date": 1450970831, "answer_id": 34454888, "question_id": 34439841, "link": "https://stackoverflow.com/questions/34439841/sntp-client-version-4/34454888#34454888", "title": "SNTP client version 4", "body": "<p>turn out that the conversion was the problem. </p>\n\n<pre><code>time_t total_secs;\nint Receive_T=ntohl(message_receive.T_T);\nReceive_T = Receive_T - 2208988800L;\ntotal_secs = Receive_T;\nprintf(\"Today time is: %s\",ctime((const long *)&amp;total_secs));\n</code></pre>\n\n<p>I have to convert the time into <code>time_t</code> or the conversion and it doesn't matter if <code>localtime</code> or <code>ctime</code> has been used.</p>\n"}], "owner": {"reputation": 98, "user_id": 2587814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V5Ltq.jpg?s=128&g=1", "display_name": "Mehrdad Mehraban", "link": "https://stackoverflow.com/users/2587814/mehrdad-mehraban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 34454888, "answer_count": 2, "score": 0, "last_activity_date": 1450970831, "creation_date": 1450887740, "last_edit_date": 1450896422, "question_id": 34439841, "link": "https://stackoverflow.com/questions/34439841/sntp-client-version-4", "title": "SNTP client version 4", "body": "<p>I am failing to understand the problem with my code.</p>\n\n<pre><code>//SNTP Client  \n\n#include &lt;inttypes.h&gt;   //(since C99)   Format conversion of integer types\n#include &lt;stdio.h&gt;      //Input/output example printf\n#include &lt;stdlib.h&gt;     //General utilities: memory management, program utilities, string conversions, random numbers\n#include &lt;unistd.h&gt;     //standard symbolic constants and types\n#include &lt;string.h&gt;     //string operations\n#include &lt;sys/types.h&gt;  //data types\n#include &lt;sys/socket.h&gt; //Internet Protocol family\n#include &lt;netinet/in.h&gt; //Internet address family\n#include &lt;netdb.h&gt;      //definitions for network database operations\n#include &lt;time.h&gt;       //time types\n#include &lt;sys/time.h&gt;   //time types\n#include &lt;arpa/inet.h&gt;  //definitions for internet operations\n//#include&lt;linux/time.h&gt;//time types in linux\n\n\n\n//struct for gettimeofday\ntypedef struct {\n    long tv_sec;\n    long tv_usec;\n} timeval;\n\n\nstruct packets\n{\n    uint8_t LIVNMODE; \n    uint8_t startum; \n    uint8_t poll; \n    uint8_t precision; \n    uint32_t Root_Delay; \n    uint32_t Root_Dispersion; \n    uint32_t Ref_Identifier; \n    uint32_t Ref_T; \n    uint32_t Ref_Tp2; \n    uint32_t Origin_T;  \n    uint32_t Origin_Tp2; \n    uint32_t Receive_T; \n    uint32_t Receive_Tp2; \n    uint32_t T_T; \n    uint32_t T_Tp2; \n};\n\n\nint main(int argc, char *argv[])\n{\nint sock_desc;\nsocklen_t len; \nint today_time;\n\nstruct sockaddr_in Cli_addr,Serv_addr; \nstruct packets message_send;\nstruct packets message_receive; \n\n//add all packets in initialization \n//LI, VN and MODE in a one bytes as a 00 100 011 eg VN=4\nmessage_send.LIVNMODE=0b00100011; \nmessage_send.startum=0;\nmessage_send.poll=0;\nmessage_send.precision=0;\nmessage_send.Root_Delay=0;\nmessage_send.Root_Dispersion=0;\nmessage_send.Ref_Identifier=0;\nmessage_send.Ref_T=0;\nmessage_send.Ref_Tp2=0;\nmessage_send.Origin_T=0;\nmessage_send.Origin_Tp2=0;\nmessage_send.Receive_T=0;\nmessage_send.Receive_Tp2=0;\nmessage_send.T_T=0;\nmessage_send.T_Tp2=0;\n\n\nmessage_receive.Ref_T=0;\nmessage_receive.Ref_Tp2=0;\nmessage_receive.Origin_T=0;\nmessage_receive.Origin_Tp2=0;\nmessage_receive.Receive_T=0;\nmessage_receive.Receive_Tp2=0;\nmessage_receive.T_T=0;\nmessage_receive.T_Tp2=0;\nchar * HOSTADDRESS;\nint PORT;\n\nif (argc&gt;=2){\n      HOSTADDRESS=(char *)argv[1]; \n      PORT = atoi(argv[2]);\n}\nelse{\n    printf(\"--------------------------------------------\\n\");\n    printf(\"usage: ./file.out HOST_ADDRESS PORT \\n\");\n    printf(\"--------------------------------------------\\n\");\n    return -1;\n}\n\n\nif ((sock_desc = socket(AF_INET,SOCK_DGRAM,0)) &lt; 0){\n    printf(\"Error: can't create the socket \");\n    return -1; \n}\n\n\nlen=sizeof(struct sockaddr_in);   \nbzero((char *) &amp;Serv_addr,sizeof(Serv_addr));    \nServ_addr.sin_family = AF_INET; \nServ_addr.sin_addr.s_addr=inet_addr(HOSTADDRESS); \nServ_addr.sin_port=ntohs(PORT);    \n\n\nif(sendto(sock_desc,&amp;message_send,sizeof(message_send),0,(struct sockaddr *)&amp;Serv_addr,len) &lt; 0){\n     printf(\"Error: can not send a message on a socket\");\n     return -1;\n}\n\nif(recvfrom(sock_desc,&amp;message_receive,sizeof(message_receive),0,(struct sockaddr *)&amp;Cli_addr,&amp;len) &lt; 0){\n     printf(\"Error: can not receive a message on a socket\");\n     return -1;\n}\nprintf(\"message_receive.Ref_T: %\" PRIu32 \"\\n\",message_receive.Ref_T);\nprintf(\"message_receive.Ref_Tp2: %\" PRIu32 \"\\n\",message_receive.Ref_Tp2);\nprintf(\"message_receive.Origin_T: %\" PRIu32 \"\\n\",message_receive.Origin_T);\nprintf(\"message_receive.Origin_Tp2: %\" PRIu32 \"\\n\",message_receive.Origin_Tp2);\nprintf(\"message_receive.Receive_T: %\" PRIu32 \"\\n\",message_receive.Receive_T);\nprintf(\"message_receive.Receive_Tp2: %\" PRIu32 \"\\n\",message_receive.Receive_Tp2);\nprintf(\"message_receive.T_T: %\" PRIu32 \"\\n\",message_receive.T_T);\nprintf(\"message_receive.T_Tp2: %\" PRIu32 \"\\n\",message_receive.T_Tp2);\nint receive_T=ntohl(message_receive.Receive_T);\ntoday_time = receive_T-2208988800; \nprintf(\"Today time is: %s\",ctime((const long *)&amp;today_time));\n}\n</code></pre>\n\n<p>This code is a translated version of my perl code. I understand that the received message values are not same the server is sending. cause I am looking at the wireshark and it is sending the correct packet but can't understand how to fix it. </p>\n\n<p>EDIT: So I have to be direct. here is the output! The date is always something different.</p>\n\n<p>output 1:</p>\n\n<pre><code>message_receive.Ref_T: 4232652250\nmessage_receive.Ref_Tp2: 684824910\nmessage_receive.Origin_T: 0\nmessage_receive.Origin_Tp2: 0\nmessage_receive.Receive_T: 1112352218\nmessage_receive.Receive_Tp2: 1556395294\nmessage_receive.T_T: 1112352218\nmessage_receive.T_Tp2: 2125642782\nToday time is: Tue Dec 26 01:44:10 4248\n</code></pre>\n\n<p>after 1 min another output 2:</p>\n\n<pre><code>message_receive.Ref_T: 4232652250\nmessage_receive.Ref_Tp2: 684824910\nmessage_receive.Origin_T: 0\nmessage_receive.Origin_Tp2: 0\nmessage_receive.Receive_T: 3796706778\nmessage_receive.Receive_Tp2: 260377675\nmessage_receive.T_T: 3796706778\nmessage_receive.T_Tp2: 3180073547\nToday time is: Mon Dec 11 17:18:34 4197\n</code></pre>\n\n<p>Pls Help!!!</p>\n"}, {"tags": ["c", "linux", "segmentation-fault", "ncurses", "coredump"], "answers": [{"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 2, "last_activity_date": 1450887800, "creation_date": 1450887800, "answer_id": 34439861, "question_id": 34439776, "link": "https://stackoverflow.com/questions/34439776/post-menu-segmentation-fault-core-dump/34439861#34439861", "title": "post_menu segmentation fault (core dump)", "body": "<p>You are not filling <code>mainMenu_items</code> correctly inside the loop.</p>\n\n<p>You are doing</p>\n\n<pre><code>mainMenu_items = ...\n</code></pre>\n\n<p>but you probably meant</p>\n\n<pre><code>mainMenu_items[i] = ...\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5401479, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-_7NgMbxvyvs/AAAAAAAAAAI/AAAAAAAAADI/01dEjA8VhG8/photo.jpg?sz=128", "display_name": "Matteo Guglielmetti", "link": "https://stackoverflow.com/users/5401479/matteo-guglielmetti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34439861, "answer_count": 1, "score": 1, "last_activity_date": 1450887800, "creation_date": 1450887503, "question_id": 34439776, "link": "https://stackoverflow.com/questions/34439776/post-menu-segmentation-fault-core-dump", "title": "post_menu segmentation fault (core dump)", "body": "<p>I just started to program with Ncurses, but, when i launch this program, I get \"Segmentation fault (core dump)\".\nIt occurs when I call function post_menu(...).</p>\n\n<pre><code>char *mainMenu_choices[] = {\n           \"Say Hello!\",\n           \"Close\", \n           };\nITEM **mainMenu_items = (ITEM **)NULL;\nMENU *mainMenu = (MENU *)NULL;\nint mainMenu_choices_COUNT, i = 0;\nint mainMenu_status = TRUE;\nITEM *mainMenu_selectedItem = (ITEM *)NULL;\n\nint draw_mainMenu()\n{\n     mainMenu_status = TRUE;\n     mainMenu_choices_COUNT = ARRAY_SIZE(mainMenu_choices);\n     mainMenu_items = (ITEM **)calloc(mainMenu_choices_COUNT + 1, sizeof(ITEM *));\n     for(i = 0; i &lt; mainMenu_choices_COUNT; i = i + 1)\n     {                              \n          mainMenu_items = new_item(mainMenu_choices[i], mainMenu_choices[i]);\n     }\n     mainMenu_items[mainMenu_choices_COUNT] = (ITEM *)NULL;     \n     mainMenu = new_menu((ITEM **)mainMenu_items);\n     post_menu(mainMenu);\n     refresh();\n     return 0;\n}\n</code></pre>\n\n<p>Thanks in advance.\nPS: Sorry if I didn't put comments.</p>\n"}, {"tags": ["c", "encryption"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1450885965, "post_id": 34439249, "comment_id": 56619472, "body": "What does &quot;can&#39;t get it to work&quot; mean? In the main file do you call the function? If so please add tat to the question."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1450885976, "post_id": 34439249, "comment_id": 56619478, "body": "What do you mean with &quot; i can&#39;t get it to work?&quot; doesn&#39;t compile? Also show the .h file"}, {"owner": {"reputation": 33, "user_id": 5701667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c76240a3bff478e364b1b828c94bcd5?s=128&d=identicon&r=PG&f=1", "display_name": "pottsork", "link": "https://stackoverflow.com/users/5701667/pottsork"}, "edited": false, "score": 0, "creation_date": 1450886666, "post_id": 34439249, "comment_id": 56619901, "body": "Sorry for bad explanation, hope you understand better now!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450886754, "post_id": 34439249, "comment_id": 56619954, "body": "Note that <code>fgets</code> retains the <code>newline</code> which you can remove with <code>plainText [ strcspn(plainText, &quot;\\r\\n&quot;) ] = 0;</code>"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1450887000, "post_id": 34439249, "comment_id": 56620088, "body": "@pottsork, don&#39;t worry ;). You can make it even better by adding the actual output and what did you expected!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450887110, "post_id": 34439249, "comment_id": 56620147, "body": "Note: <code>sentece</code> --&gt; <code>sentence</code>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5701667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c76240a3bff478e364b1b828c94bcd5?s=128&d=identicon&r=PG&f=1", "display_name": "pottsork", "link": "https://stackoverflow.com/users/5701667/pottsork"}, "edited": false, "score": 0, "creation_date": 1450887131, "post_id": 34439612, "comment_id": 56620170, "body": "This worked! I will study the code to learn what i did wrong! Thank you Mike!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450887140, "post_id": 34439612, "comment_id": 56620178, "body": "Good point about the <code>newline</code> <b>before</b> the text (as well as after)."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 4, "last_activity_date": 1450886955, "creation_date": 1450886955, "answer_id": 34439612, "question_id": 34439249, "link": "https://stackoverflow.com/questions/34439249/caesar-cipher-in-c-wont-work/34439612#34439612", "title": "Caesar cipher in C won&#39;t work", "body": "<ul>\n<li>You forgot to inclement <code>plainText</code> in the for loop in <code>encrypted()</code>.</li>\n<li>Be careful not to have <code>fgets()</code> read newline character <strong>before</strong> the plain text.</li>\n</ul>\n\n<p>Try this <code>main</code> function</p>\n\n<pre><code>int main(){\n    int key, arrLength, menu=0;\n    char keyText[100],plainText[100], cipherText[100], result[100];\n\n\n    printf(\"Encrypt\\n\");\n    printf(\"Enter your key (1-25): \");\n    fgets(keyText, 100, stdin);\n    sscanf(keyText, \"%d\", &amp;key);\n    printf(\"Write the word or sentece you want to encrypt: \");\n    fgets(plainText, 100, stdin);\n    arrLength=strlen(plainText);\n    encrypted(plainText, arrLength, key, result);\n\n    return 0;\n}\n</code></pre>\n\n<p>and changing the loop <code>for(int i = 0; i &lt; arrLength; i++)</code><br>\nto <code>for(int i = 0; i &lt; arrLength; i++, plainText++)</code></p>\n"}], "owner": {"reputation": 33, "user_id": 5701667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c76240a3bff478e364b1b828c94bcd5?s=128&d=identicon&r=PG&f=1", "display_name": "pottsork", "link": "https://stackoverflow.com/users/5701667/pottsork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 34439612, "answer_count": 1, "score": -1, "last_activity_date": 1450886955, "creation_date": 1450885747, "last_edit_date": 1450886512, "question_id": 34439249, "link": "https://stackoverflow.com/questions/34439249/caesar-cipher-in-c-wont-work", "title": "Caesar cipher in C won&#39;t work", "body": "<p>I've got an assignment from school to make a program that will encrypt and decrypt a text. I have to use this declaration:</p>\n\n<pre><code>int encrypted(char *plainText, int arrLength, int key, char *cipherText);\n</code></pre>\n\n<p>For the moment i can make the caesar cipher work when i have the for-loop (the one i show in myfunctions.c) in main.c, but when i write the for-loop in another file (myfunctions.c) with the declaration above, it compiles and runs, but it seems like the for-loop in myfunctions.c doesn't executes like it should. </p>\n\n<p>Here is my main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"myfunctions.h\"\n\nint main(){\n    int key, arrLength, menu=0;\n    char plainText[100], cipherText[100], result[100];\n\n\n    printf(\"Encrypt\\n\");\n    printf(\"Enter your key (1-25): \");\n    scanf(\"%d\", &amp;key);\n    printf(\"Write the word or sentece you want to encrypt: \");\n    fgets(plainText, 100, stdin);\n    arrLength=strlen(plainText);\n    encrypted(plainText, arrLength, key, result);\n\ngetchar();\nreturn 0;\n}\n</code></pre>\n\n<p>myfunctions.c:</p>\n\n<pre><code>#include \"myfunctions.h\"\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint encrypted(char *plainText, int arrLength, int key, char *cipherText){\nint result = 0;\n\nfor(int i = 0; i &lt; arrLength; i++)\n{\n\n    // encryption\n    result = (*plainText + key);\n\n    // wrapping after Z for uppercase letters\n    if (isupper(*plainText) &amp;&amp; (result &gt; 'Z'))\n    {\n        result = (result - 26);\n    }\n\n    // wrapping after z for lowercase letters\n    if (islower(*plainText) &amp;&amp; (result &gt; 'z'))\n    {\n        result = (result - 26);\n    }\n\n\n    if (isalpha(*plainText))\n    {\n        printf(\"%c\", result);\n    }\n\n\n    else\n    {\n        printf(\"%c\", *plainText);\n    }\n\n}\nreturn 1;\n}\n</code></pre>\n\n<p>myfunctions.h</p>\n\n<pre><code>#ifndef myfunctions_h\n#define myfunctions_h\n\nint encrypted(char *plainText, int arrLength, int key, char *cipherText);\n\n#endif\n</code></pre>\n"}, {"tags": ["c", "makefile", "linker"], "comments": [{"owner": {"reputation": 844, "user_id": 1677270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c634cd03921a567ba850d7c53202e3ee?s=128&d=identicon&r=PG", "display_name": "SergA", "link": "https://stackoverflow.com/users/1677270/serga"}, "edited": false, "score": 0, "creation_date": 1450888336, "post_id": 34439063, "comment_id": 56620940, "body": "you should link with math library: <code>gcc -lm &lt;object files&gt;</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 844, "user_id": 1677270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c634cd03921a567ba850d7c53202e3ee?s=128&d=identicon&r=PG", "display_name": "SergA", "link": "https://stackoverflow.com/users/1677270/serga"}, "edited": false, "score": 0, "creation_date": 1450890941, "post_id": 34439063, "comment_id": 56622502, "body": "@SergA: That is an <b>answer</b> and because you instead posted it as a comment, an incorrect answer has been accepted. :("}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5674725, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b5f085bb4a24fe0acaf2fcbbc4091d42?s=128&d=identicon&r=PG&f=1", "display_name": "rotemhas", "link": "https://stackoverflow.com/users/5674725/rotemhas"}, "edited": false, "score": 0, "creation_date": 1450888508, "post_id": 34439973, "comment_id": 56621036, "body": "Thank you very much. No, main related to 6 files (c files)."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1450948860, "last_edit_date": 1450948860, "creation_date": 1450888170, "answer_id": 34439973, "question_id": 34439063, "link": "https://stackoverflow.com/questions/34439063/undefined-reference-to-pow-makefile/34439973#34439973", "title": "undefined reference to `pow&#39; - makefile", "body": "<p><code>pow</code> is a stdlib function, but to use it you should link the stdlib itself (math lib).</p>\n\n<p>Usually gcc does it automatically, but try adding <code>-lm</code> link flag:</p>\n\n<pre><code>gcc -lm Update.o ScanData.o &lt;..the rest of object files..&gt;\n</code></pre>\n\n<p>Also make sure that libc is present in system (on debian/ubuntu - <code>dpkg -s libc6-dev</code> should tell that it is installed)</p>\n\n<p>Not directly related to question:\ndoes <code>main.o</code> really depend on all the sources? it only builds from <code>main.c</code></p>\n"}], "owner": {"reputation": 61, "user_id": 5674725, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b5f085bb4a24fe0acaf2fcbbc4091d42?s=128&d=identicon&r=PG&f=1", "display_name": "rotemhas", "link": "https://stackoverflow.com/users/5674725/rotemhas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 0, "closed_date": 1450890955, "accepted_answer_id": 34439973, "answer_count": 1, "score": 0, "last_activity_date": 1450948860, "creation_date": 1450885169, "last_edit_date": 1450888815, "question_id": 34439063, "link": "https://stackoverflow.com/questions/34439063/undefined-reference-to-pow-makefile", "closed_reason": "Duplicate", "title": "undefined reference to `pow&#39; - makefile", "body": "<p>I have a problem building a program using a makefile.</p>\n\n<p>Upon running <code>make</code> I'm getting an error:</p>\n\n<pre><code>ScanData.o: In function `CheckGrade':\nScanData.c:(.text+0x1ef): undefined reference to `pow'\n</code></pre>\n\n<p>This is the makefile:</p>\n\n<pre><code>a.out: Update.o ScanData.o ReallocAndFree.o PrintStudentMaxGrade.o PrintAllStudents.o DeleteStudent.o AddStudent.o AddOrUpdate.o main.o\n gcc Update.o ScanData.o ReallocAndFree.o PrintStudentMaxGrade.o PrintAllStudents.o DeleteStudent.o AddStudent.o AddOrUpdate.c main.o\n\nAddOrUpdate.o: AddOrUpdate.c AddOrUpdate.h\n    gcc -c AddOrUpdate.c\n\nAddStudent.o: AddStudent.c AddStudent.h\n    gcc -c AddStudent.c\n\nDeleteStudent.o: DeleteStudent.c DeleteStudent.h\n    gcc -c DeleteStudent.c\n\nPrintAllStudents.o: PrintAllStudents.c PrintAllStudents.h\n    gcc -c PrintAllStudents.c\n\nPrintStudentMaxGrade.o: PrintStudentMaxGrade.c PrintStudentMaxGrade.h\n    gcc -c PrintStudentMaxGrade.c\n\nReallocAndFree.o: ReallocAndFree.c ReallocAndFree.h\n    gcc -c ReallocAndFree.c\n\nScanData.o: ScanData.c ScanData.h\n    gcc -c ScanData.c -lm\n\nUpdate.o: Update.c Update.h\n    gcc -c Update.c\n\nmain.o: main.c AddOrUpdate.c AddStudent.c DeleteStudent.c PrintAllStudents.c PrintStudentMaxGrade.c ReallocAndFree.c ScanData.c Update.c\n    gcc -c main.c\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "arm", "stm32"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 2, "creation_date": 1450887111, "post_id": 34438947, "comment_id": 56620148, "body": "The makefile for the other project links against some external libraries which this code does not; one of those is almost certainly providing an implementation of <code>_exit()</code> that <a href=\"http://stackoverflow.com/a/12574400/3156750\">keeps the linker happy</a>."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1450887124, "post_id": 34438947, "comment_id": 56620164, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1450921592, "post_id": 34438947, "comment_id": 56634540, "body": "just add a few lines to define the exit function have it do nothing, infinite loop, whatever..."}, {"owner": {"reputation": 6436, "user_id": 39444, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d75f8af878f069a3b5939894c2e57ab?s=128&d=identicon&r=PG", "display_name": "poseid", "link": "https://stackoverflow.com/users/39444/poseid"}, "edited": false, "score": 0, "creation_date": 1451307317, "post_id": 34438947, "comment_id": 56729406, "body": "thanks dwelch and Notlikethat, including _exit() manually solves the problem. However, looking deeper, I see _exit() is part of libs such as newlib <a href=\"http://wiki.osdev.org/Porting_Newlib\" rel=\"nofollow noreferrer\">wiki.osdev.org/Porting_Newlib</a> - how/what options are there to re-use _exit() ?"}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1451347330, "post_id": 34438947, "comment_id": 56747052, "body": "Be aware that the C runtime typically does a whole bunch of work both before <code>main()</code> is called, and after it returns - on Linux and friends <a href=\"http://man7.org/linux/man-pages/man2/exit.2.html\" rel=\"nofollow noreferrer\"><code>_exit()</code> is the syscall wrapper</a> which is used to finally tell the OS &quot;OK, this whole process is finished, stop running it and clean up.&quot; If you don&#39;t <i>have</i> an OS, nor ever expect <code>main()</code> to return, there&#39;s really nothing to do except placate the C runtime code&#39;s demand for a symbol to link to."}, {"owner": {"reputation": 103, "user_id": 4529417, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KhM_1sniceE/AAAAAAAAAAI/AAAAAAAAA8o/9PhKXTVGOjE/photo.jpg?sz=128", "display_name": "Lak Fu", "link": "https://stackoverflow.com/users/4529417/lak-fu"}, "edited": false, "score": 0, "creation_date": 1503284960, "post_id": 34438947, "comment_id": 78535469, "body": "Added a Linker flag &quot;--specs=nosys.specs&quot;&lt;br&gt; Refer to <a href=\"https://stackoverflow.com/questions/19419782/exit-c-text0x18-undefined-reference-to-exit-when-using-arm-none-eabi-gcc\" title=\"exit c text0x18 undefined reference to exit when using arm none eabi gcc\">stackoverflow.com/questions/19419782/&hellip;</a>"}], "owner": {"reputation": 6436, "user_id": 39444, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d75f8af878f069a3b5939894c2e57ab?s=128&d=identicon&r=PG", "display_name": "poseid", "link": "https://stackoverflow.com/users/39444/poseid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2766, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451307396, "creation_date": 1450884794, "last_edit_date": 1451307396, "question_id": 34438947, "link": "https://stackoverflow.com/questions/34438947/what-library-to-include-to-prevent-undefined-reference-to-exit-what-is-ne", "title": "What library to include to prevent &quot;Undefined reference to &#39;_exit&#39;&quot; ? What is newlib?", "body": "<p>Based on the <a href=\"https://github.com/LimiFrog/LimiFrog-SW/tree/master/projects/LimiFrog-BringUp-0\" rel=\"nofollow\">Limifrog STM32L board examples</a>, I am trying to setup my own toolchain for ARM development (STM32F40x based).</p>\n\n<p>I get an error:</p>\n\n<pre>\nC:\\Users\\pmu\\embedded\\empty_stm32>make\narm-none-eabi-gcc  -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 -I\n./inc -I./../Libraries/CMSIS/Device/ST/STM32F4xx/Include -I./../Libraries/CMSIS/\nInclude -Os -Wall -ffunction-sections -fdata-sections -fno-exceptions -Wno-write\n-strings -o main src/main.c\nc:/program files (x86)/gnu tools arm embedded/4.9 2015q3/bin/../lib/gcc/arm-none\n-eabi/4.9.3/../../../../arm-none-eabi/lib/armv7e-m/fpu\\libc.a(lib_a-exit.o): In\nfunction `exit':\nexit.c:(.text.exit+0x16): undefined reference to `_exit'\ncollect2.exe: error: ld returned 1 exit status\nmake: *** [main] Error 1\n</pre>\n\n<p>when compiling:</p>\n\n<pre>\n#include \"My_Globals.h\"\n\nint main(void) {\n\n  while(1) {\n\n  }\n\n  return 0;\n}\n</pre>\n\n<p>What does this error mean? Why does it not occur in the Board examples above?</p>\n\n<p>The Makefile</p>\n\n<pre>\n# Compilation Tools\nCC      = arm-none-eabi-gcc\nLD      = arm-none-eabi-ld\nCP      = arm-none-eabi-objcopy\nOD      = arm-none-eabi-objdump\nSIZE    = arm-none-eabi-size\n\n# Optimization (\u00df,1,2,s)\nOPT = s\n\nROOT        = ./..\nCMSIS_DIR   = $(ROOT)/Libraries/CMSIS\nHAL_DIR     = $(ROOT)/Libraries/CMSIS/Include\nSRC         = ./src\nINC_LOCAL  = ./inc\n\nINCLUDES   =  \\\n    $(INC_LOCAL) \\\n    $(CMSIS_DIR)/Device/ST/STM32F4xx/Include \\\n    $(CMSIS_DIR)/Include\n\nARCH_FLAGS = -mthumb -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16\n\nLD_FLAGS   = \n\n# Compiler flags\nCFLAGS =  \\\n    $(ARCH_FLAGS) \\\n    $(addprefix -I,$(INCLUDES)) \\\n    -O$(OPT) \\\n    -Wall \\\n    -ffunction-sections \\\n    -fdata-sections \\\n    -fno-exceptions \\\n    -Wno-write-strings\n\nmain:\n    @echo \"start\"\n    @echo $@\n    $(CC) $(LDFLAGS) $(CFLAGS) -o $@ src/main.c\n</pre>\n\n<p>Now, what libraries can be used to re-use the implementation of _exit() from elsewhere?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1450884142, "post_id": 34438459, "comment_id": 56618239, "body": "In C, the type of <code>*&quot;FOO&quot;</code> is <code>char</code>. Is <code>-Wwrite-strings</code> supposed to change this (making the compiler nonstandard)? If it&#39;s not, the bug is displaying the type of <code>&amp;x</code> as  <code>const char (*)[4]</code>: there is no <code>const</code>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1450884165, "post_id": 34438459, "comment_id": 56618252, "body": "Seems like a bug. Consider filing a bug report."}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1450884528, "post_id": 34438459, "comment_id": 56618484, "body": "@PascalCuoq: Even so, a <code>char (*)[4]</code> is convertible to a <code>const char (*)[4]</code> correct? Why would it be an &quot;incompatible pointer type&quot;?"}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1450884712, "post_id": 34438459, "comment_id": 56618603, "body": "@R_Kapp you&#39;re right. In gcc 5 (and clang 3.7), turning off <code>-Wwrite-strings</code> compiles without warnings, but there is <i>another</i> bug in gcc 4 which doesn&#39;t convert properly the <code>char (*)[4]</code> to <code>const char (*)[4]</code>. See <a href=\"http://stackoverflow.com/questions/33376481/gcc-incompatible-pointer-type-using-a-typedef\">this SO question</a>"}, {"owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1450884818, "post_id": 34438459, "comment_id": 56618678, "body": "@PascalCuoq, yes, <code>-Wwrite-strings</code> does exactly that. Updated the question."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1450884845, "post_id": 34438459, "comment_id": 56618699, "body": "@R_Kapp I would guess that <code>-Wwrite-string</code> is implemented by making <code>&quot;FOO&quot;</code> an array of some weird type that is printed as <code>const char</code> but isn&#39;t really and they didn&#39;t implement the conversions right for that weird type."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 1, "creation_date": 1450885740, "post_id": 34438459, "comment_id": 56619312, "body": "@R_Kapp Nope. Not convertible. A <code>const</code> qualifier may only be added through conversion after one indirection, so <code>char (*)[4]</code> can be assigned to <code>char(*const)[4]</code> but not <code>const chr(*)[4]</code>."}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450885840, "post_id": 34438459, "comment_id": 56619391, "body": "@FUZxxl: Huh... did not know that. Is there a reason for this restriction?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1450885938, "post_id": 34438459, "comment_id": 56619452, "body": "Its a bug related to <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57475\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=57475</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 1, "creation_date": 1450886053, "post_id": 34438459, "comment_id": 56619527, "body": "@R_Kapp If I recall correctly, any slightly more complex rule could violate <code>const</code> correctness and the WG14 thought that the very complex set of rules C++ has for implicit <code>const</code> are too complex for C."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1450886114, "post_id": 34438459, "comment_id": 56619560, "body": "@haccks I don&#39;t think this is related to the scope of types, no types are defined or declared by OP."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1450887051, "last_edit_date": 1450887051, "creation_date": 1450886334, "answer_id": 34439435, "question_id": 34438459, "link": "https://stackoverflow.com/questions/34438459/type-incompatible-with-itself-in-gcc-5-when-using-wwrite-strings/34439435#34439435", "title": "Type incompatible with itself in GCC 5 when using -Wwrite-strings", "body": "<p>For me it's indeed a bug in <code>gcc</code> <code>5</code>.</p>\n\n<p><code>gcc</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow\">documentation</a> says</p>\n\n<blockquote>\n  <p>-Wwrite-strings</p>\n  \n  <p>When compiling C, give string constants the type const char[length] so that copying the address of one into a non-const char * pointer produces a warning.</p>\n</blockquote>\n\n<p>So with this declaration:</p>\n\n<pre><code>typeof(*\"FOO\") x[4];\n</code></pre>\n\n<p>then <code>&amp;x</code> is of type <code>const char (*)[4]</code> when <code>-Wwrite-strings</code> is present. In Standard C, <code>&amp;x</code> is of type <code>char (*)[4]</code>.</p>\n\n<p>This small function:</p>\n\n<pre><code>void foo(void) {\n    typeof(*\"FOO\") x[4];\n    printf(\"%d\\n\", __builtin_types_compatible_p(typeof(&amp;x), const char (*)[4]));\n    printf(\"%d\\n\", __builtin_types_compatible_p(typeof(&amp;x), char (*)[4]));\n}\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>1\n0\n</code></pre>\n\n<p>with <code>gcc</code> <code>5.3</code> and <code>-Wwrite-strings</code>. So we can see that <code>gcc</code> <code>5.3</code> correctly identifies <code>&amp;x</code> as of type <code>const char (*)[4]</code> with <code>-Wwrite-strings</code>. </p>\n\n<p><code>gcc</code> should then accept argument <code>&amp;x</code> when calling a function that has a <code>const char (*)[4]</code> parameter. Warning for incompatible type is IMHO then a bug in <code>gcc</code>.</p>\n\n<p>(This bug probably didn't show in previous versions of <code>gcc</code> simply because <code>gcc</code> failed (another bug) to identify <code>&amp;x</code> as a <code>const char (*)[4]</code> with <code>-Wwrite-strings</code> in previous <code>gcc</code> versions. I tested with <code>gcc</code> <code>4.9.2</code> and <code>gcc-6-20151206</code>.)</p>\n"}], "owner": {"reputation": 15004, "user_id": 562906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a15f15ed0023f4177a518b6c15ca4b6?s=128&d=identicon&r=PG", "display_name": "sinelaw", "link": "https://stackoverflow.com/users/562906/sinelaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1450887051, "creation_date": 1450883107, "last_edit_date": 1450884799, "question_id": 34438459, "link": "https://stackoverflow.com/questions/34438459/type-incompatible-with-itself-in-gcc-5-when-using-wwrite-strings", "title": "Type incompatible with itself in GCC 5 when using -Wwrite-strings", "body": "<p>Consider:</p>\n\n<pre><code>char f(const char (*x)[4]);\n\nvoid foo(void) {\n    typeof(*\"FOO\") x[4];\n    f(&amp;x);\n}\n</code></pre>\n\n<p>Compile with <code>-Wwrite-strings</code>:</p>\n\n<pre><code>gcc-5 -c gcc5.c  -Wwrite-strings\n</code></pre>\n\n<p>You get:</p>\n\n<pre><code>gcc5.c: In function \u2018foo\u2019:\ngcc5.c:5:7: warning: passing argument 1 of \u2018f\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n     f(&amp;x);\n       ^\ngcc5.c:1:6: note: expected \u2018const char (*)[4]\u2019 \n   but argument is of type \u2018const char (*)[4]\u2019\n char f(const char (*x)[4]);\n      ^\n</code></pre>\n\n<p>Looks like a bug in gcc, unless I'm missing something?</p>\n\n<p>Note: <code>-Wwrite-strings</code> changes the type of literal strings:</p>\n\n<blockquote>\n  <p>When compiling C, give string constants the type \"const char[length]\"</p>\n</blockquote>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 27, "user_id": 5711530, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/775a575547a7059e41c3621e66869150?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5711530/anna"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450882303, "post_id": 34438102, "comment_id": 56617232, "body": "But then it doesn&#39;t work with double-digit numbers, it doesn&#39;t look like a straight table..."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1450890652, "last_edit_date": 1450890652, "creation_date": 1450882483, "answer_id": 34438291, "question_id": 34438102, "link": "https://stackoverflow.com/questions/34438102/printing-a-multi-dimensional-array-with-additional-rows-and-columns/34438291#34438291", "title": "Printing a multi-dimensional array with additional rows and columns", "body": "<p>Use <em>format specifiers</em> and <em>escape sequences</em> to place text where you need it to appear.  For example this code: (from a tutorial on printf and formatting)  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    int a,b;\n    float c,d;\n\n    a = 15;\n    b = a / 2;\n    printf(\"%d\\n\",b);\n    printf(\"%3d\\n\",b);\n    printf(\"%03d\\n\",b);\n\n    c = 15.3;\n    d = c / 3;\n    printf(\"%3.2f\\n\",d);\n}\n</code></pre>\n\n<p>Produces this output: </p>\n\n<pre><code>7\n   7\n007\n5.10\n</code></pre>\n\n<p>Of particular interest to you, as you are using integers, note the modifiers that can  be used with the \"%d\" specifier below in the Format specifiers section:  </p>\n\n<p>Escape sequences:</p>\n\n<pre><code>\\n (newline)\n\\t (tab)\n\\v (vertical tab)\n\\f (new page)\n\\b (backspace)\n\\r (carriage return)\n\\n (newline)\n</code></pre>\n\n<p>Example Format specifiers:</p>\n\n<pre><code>%d (print as a decimal integer)\n%6d (print as a decimal integer with a width of at least 6 wide)    \n%06d (same as previous, but buffered with zeros) (added)\n%f (print as a floating point)\n%4f (print as a floating point with a width of at least 4 wide)\n%.4f (print as a floating point with a precision of four characters after the decimal point)\n%3.2f (print as a floating point at least 3 wide and a precision of 2)\n</code></pre>\n\n<p><strong><em><a href=\"http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output\" rel=\"nofollow\">There is more here</a></em></strong></p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1450884144, "post_id": 34438304, "comment_id": 56618241, "body": "format string needs to include %s to accommodate 3rd argument in example."}, {"owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1450894055, "post_id": 34438304, "comment_id": 56624175, "body": "Aaah, quite so.  Should have tested if first."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1450990860, "post_id": 34438304, "comment_id": 56657683, "body": "Almost:  for the arguments to be printed, an <code>int</code> and a <code>string literal</code>, the format specifier needs to contain both the <code>d</code> and <code>s</code> specifiers.  Something like:  <code>&quot;%d %s&quot;</code> will work.  Or with padding modifiers: <code>&quot;%7d %s&quot;</code>."}, {"owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451075399, "post_id": 34438304, "comment_id": 56674363, "body": "Actually, the * modifier chews up length and the s format uses the string &quot;-----&quot;"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1451086471, "post_id": 34438304, "comment_id": 56676683, "body": "I just verified your <code>printf()</code> statement on my compiler.  I really did not think it would work. But you are correct, it does.  Thanks.  I learned something.  +1 for sticking with it."}], "tags": [], "owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "is_accepted": false, "score": 2, "last_activity_date": 1450894086, "last_edit_date": 1450894086, "creation_date": 1450882524, "answer_id": 34438304, "question_id": 34438102, "link": "https://stackoverflow.com/questions/34438102/printing-a-multi-dimensional-array-with-additional-rows-and-columns/34438304#34438304", "title": "Printing a multi-dimensional array with additional rows and columns", "body": "<p>You can control the width of the labels (number on right side and bottom) of the graph by specifying a width specifier on the printf format strings.  That way, all the labels come out the same size.  You can also specify a string like \"--------------\" (make it long enough to print your longest bar) and just print out the number limited by a width specifier.</p>\n\n<p>Example:</p>\n\n<pre><code>printf(\"%*s \", length, \"----------------------------------------\");\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5711530, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/775a575547a7059e41c3621e66869150?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5711530/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 34438291, "answer_count": 2, "score": 1, "last_activity_date": 1450894086, "creation_date": 1450881831, "question_id": 34438102, "link": "https://stackoverflow.com/questions/34438102/printing-a-multi-dimensional-array-with-additional-rows-and-columns", "title": "Printing a multi-dimensional array with additional rows and columns", "body": "<p>I have a multidimensional array that stores some data, and I want to print it in a matrix form (so far no prolem), thing is I want to add a few columns and rows to make it readable. Something like this:</p>\n\n<pre><code>3 |\n\n2 |\n\n1 |\n   _  _  _\n   1  2  3\n</code></pre>\n\n<p>(the \"inside square\" is my actual 2d array)</p>\n\n<p>My question is, what is the best way to do this?</p>\n\n<p>My current code looks like this:</p>\n\n<pre><code>void printBoard(char board[N][N]) {\n    for (int i = N-1; i &gt;= 0; i--) {\n        printf(\"%d %c \", i, BAR);\n        for (int j = 0; j &lt; N; j++) {\n            printf(\"%c \", board[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    for (int l = 0; l &lt; 2; l++) {\n        for(int k = -4; k &lt; N; k++) {\n            if(k &lt; 0) {\n                printf(\"%c\", SPACE);\n            }\n            else {\n               if(l == 0) {\n                    printf(\"%c \", EMDASH);\n                }\n                else {\n                    printf(\"%d \", k);\n                }\n            }\n        }\n            printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>It works fine but feels rather messy. Also, if I change the size of my array to be more than 10 rows/columns, the numbers don't fit right.\nIs there a way to format this properly without changing the original array (the one I'm passing into the function)?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "static", "initialization", "structure"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 2, "creation_date": 1450881269, "post_id": 34437849, "comment_id": 56616602, "body": "What do you mean with &quot;another way&quot;? Checking for NULL and using malloc()?"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450881570, "post_id": 34437849, "comment_id": 56616769, "body": "You need to allocate memory to the pointer, see this <a href=\"http://stackoverflow.com/questions/11709929/how-to-initialize-a-pointer-to-a-struct-in-c\" title=\"how to initialize a pointer to a struct in c\">stackoverflow.com/questions/11709929/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 5711479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d26c778b1c9e171911ebd3d0693d5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "Divanov", "link": "https://stackoverflow.com/users/5711479/divanov"}, "edited": false, "score": 0, "creation_date": 1450881654, "post_id": 34437849, "comment_id": 56616817, "body": "I mean another way to initialize the request_ptr than this one: static SRequest* request_ptr = {.buffer = request-&gt;buffer,                                      .bufferLength = 0}; And my intention is not to initialize the buffer pointer to NULL"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450881697, "post_id": 34437849, "comment_id": 56616841, "body": "You have to point the pointer at a valid, initialized structure.  A <i>pointer</i> is, well, a <i>pointer</i>.  It has to <i>point</i> to something real."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450882799, "post_id": 34437849, "comment_id": 56617512, "body": "Why do you need <code>request_ptr</code> ? How do you plan to use that pointer later?"}, {"owner": {"reputation": 11, "user_id": 5711479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d26c778b1c9e171911ebd3d0693d5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "Divanov", "link": "https://stackoverflow.com/users/5711479/divanov"}, "edited": false, "score": 0, "creation_date": 1450884567, "post_id": 34437849, "comment_id": 56618508, "body": "I will make a new function call with this <code>request_ptr</code> as parameter. My intention is to get the <code>request-&gt;buffer</code> pointer and depending on some conditions the <code>request_ptr-&gt;bufferLength</code> will be either equal to <code>request-&gt;bufferLength</code> or to some other pre-calculated value."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450888386, "post_id": 34437849, "comment_id": 56620972, "body": "We are probably dealing with an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a> here."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1450890890, "last_edit_date": 1450890890, "creation_date": 1450885036, "answer_id": 34439021, "question_id": 34437849, "link": "https://stackoverflow.com/questions/34437849/initialize-static-structure/34439021#34439021", "title": "Initialize static structure", "body": "<p>You are trying to initialize a pointer with a value that is not a pointer but rather a <code>struct</code>.  That cannot possibly work.</p>\n\n<p>Moreover, initializers for objects with static storage duration must be compile-time constants.  This constraint makes sense when you recognize that initialization of such objects happens (logically) before program execution starts.  All file-scope variables have static duration, as do local variables declared <code>static</code>, such as your <code>request_ptr</code>.  You are trying to initialize your static pointer with a value that is not a compile-time constant.</p>\n\n<p>It is unclear what you are really after, here, but if you are trying to create, on each call, an <code>SRequest</code> that points to the same buffer that the argument does, then that could be this:</p>\n\n<pre><code>void somefunction(const SRequest* request)\n{\n    SRequest local_request = {.buffer = request-&gt;buffer, \n                              .bufferLength = 0};\n    .\n    .\n    .\n}\n</code></pre>\n\n<p>Note there that I make <code>local_request</code> an automatic variable rather than a static one, so that its initializer is applied on every call, and that I make it a <code>struct</code>, not a pointer to one.</p>\n\n<p>On the other hand, if your objective is to have an <code>SRequest</code> that is initialized on the first call to the function with values derived from the argument to that call, and thereafter persists across function calls, then you want something like this:</p>\n\n<pre><code>void somefunction(const SRequest* request)\n{\n    static int initialized = 0;\n    static SRequest local_request;\n\n    if (!initialized) {\n        local_request.buffer = request-&gt;buffer;\n        local_request.buffer_length = 0;\n        initialized = 1;\n    }\n    .\n    .\n    .\n}\n</code></pre>\n\n<p>You might be able to do without the <code>initialized</code> variable if a member of <code>local_request</code> would be suitable in its stead.  For instance, perhaps it would work for your purposes to instead test weather <code>local_request.buffer</code> is <code>NULL</code>.</p>\n\n<p>In any event, it's unclear to me why you would want the local variable to designate a pointer instead of a structure.  There are potential reasons why you might indeed want that, but it's not evident that any of those apply.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450885321, "post_id": 34439050, "comment_id": 56619034, "body": "Using a compound literal that way is kinda cool, but it does not work here because the initializer is not a compile-time constant."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1450885478, "post_id": 34439050, "comment_id": 56619152, "body": "Also, it&#39;s a bit roundabout to declare a static pointer to (necessarily) static and otherwise unreferenced data, when you could instead just declare the data directly (i.e. <code>static SRequest request_data = ...</code>) and obtain a pointer to it at need via the address-of operator."}], "tags": [], "owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "is_accepted": false, "score": 0, "last_activity_date": 1450885118, "creation_date": 1450885118, "answer_id": 34439050, "question_id": 34437849, "link": "https://stackoverflow.com/questions/34437849/initialize-static-structure/34439050#34439050", "title": "Initialize static structure", "body": "<p>As the title of the question seems more explicit than the cited one by terence hill, it might be interesting to have the answer here.</p>\n\n<p>You have to use \"compound literal\", which is defined in the C99 standard:</p>\n\n<pre><code>void somefunction(const SRequest* request)\n{\n    //The following initialization of the pointer to static structure is not working\n    static SRequest* request_ptr = &amp;(SRequest){\n        .buffer = request-&gt;buffer,\n        .bufferLength = 0};\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5711479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d26c778b1c9e171911ebd3d0693d5e3c?s=128&d=identicon&r=PG&f=1", "display_name": "Divanov", "link": "https://stackoverflow.com/users/5711479/divanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1450890890, "creation_date": 1450880982, "question_id": 34437849, "link": "https://stackoverflow.com/questions/34437849/initialize-static-structure", "title": "Initialize static structure", "body": "<p>I have the following structure:</p>\n\n<pre><code>typedef struct\n{\n    uint8* buffer;\n    uint32 bufferLength;\n} SRequest;\n</code></pre>\n\n<p>and a function:</p>\n\n<pre><code>void somefunction(const SRequest* request)\n{\n    //The following initialization of the pointer to static structure is not working\n    static SRequest* request_ptr = {.buffer = request-&gt;buffer, \n                                    .bufferLength = 0};\n    .\n    .\n}\n</code></pre>\n\n<p>Is there another way I can initialize the request_ptr?</p>\n"}, {"tags": ["c", "kernel", "kernel-module", "taint"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1450889142, "post_id": 34437837, "comment_id": 56621441, "body": "This warning is <b>unrelated to tainted kernel</b>. It just says that you have fired warning condition at <a href=\"http://lxr.free-electrons.com/source/block/blk.h?v=3.16#L231\" rel=\"nofollow noreferrer\">block/blk.h:231</a>. Looking into sources reaveals, that function is not expected to be called with irq disabled (e.g. after <code>spin_lock_irqsave</code> or within interrupt). And description of the function tells the reason of such requirement."}], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1451283782, "creation_date": 1450880950, "last_edit_date": 1495541388, "question_id": 34437837, "link": "https://stackoverflow.com/questions/34437837/kernel-module-raised-warning-and-taints-kernel", "title": "Kernel module raised warning and taints kernel", "body": "<p>I'm just writing a Linux kernel module and getting a warning message that my kernel is tainted:</p>\n\n<pre><code>[ 1194.552013] ------------[ cut here ]------------\n[ 1194.552639] WARNING: CPU: 0 PID: 176 at /build/linux-mcJ30I/linux-3.16.7-ckt20/block/blk.h:231 generic_make_request_checks+0x46a/0x480()\n[ 1194.552639] Modules linked in: &lt;my kernel muldule&gt;(O) &lt;various other Standard kernel modules&gt;\n[ 1194.552639] CPU: 0 PID: 176 Comm: systemd-udevd Tainted: G           O  3.16.0-4-586 #1 Debian 3.16.7-ckt20-1+deb8u1\n[ 1194.552639] Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006\n[ 1194.552639]  ebeb3b70 ebeb3b70 c103bf71 c14f2d68 00000000 000000b0 c1520644 000000e7\n[ 1194.552639]  c11ddd1a 000000e7 c11ddd1a ec0d4800 edcb5c00 ffffffff ebeb3b80 c103c032\n[ 1194.552639]  00000009 00000000 ebeb3bf8 c11ddd1a 06010006 000001a7 00000000 00000000\n[ 1194.552639] Call Trace:\n[ 1194.552639]  [&lt;c103bf71&gt;] ? warn_slowpath_common+0x81/0xa0\n[ 1194.552639]  [&lt;c11ddd1a&gt;] ? generic_make_request_checks+0x46a/0x480\n[ 1194.552639]  [&lt;c11ddd1a&gt;] ? generic_make_request_checks+0x46a/0x480\n...\n</code></pre>\n\n<p>The message just appears once, my module is working as it should and I'm not getting any Oops message or kernel Panic or similar.</p>\n\n<p>I read several questions, answers and tutorials (<a href=\"https://unix.stackexchange.com/questions/118116/linux-what-is-a-tainted-kernel\">here</a>, <a href=\"https://stackoverflow.com/questions/27252165/what-does-kernel-tainted-mean\">here</a> or <a href=\"http://timedigit.blogspot.co.at/2013/03/tainted-kernel-what-to-do.html\" rel=\"nofollow noreferrer\">here</a>) but basically all I found out is that the currently running kernel is not supported by the community (anymore) and can't be debugged by the community. For me, this is obvious since my kernel module is installed and they don't have the source of it.</p>\n\n<p>So for me it seems like there is nothing dangerous with that warning message, is that correct? I already tried to find an error for several hours but I didn't find one. So is the message just showing up because I'm using my kernel module?</p>\n\n<p><strong>Edit:</strong> I don't know if it's important but I'm running Linux kernel 3.16.0-4-586</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11, "user_id": 5711521, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SGyWxf9wC9s/AAAAAAAAAAI/AAAAAAAAAVc/OF-zXifdZ54/photo.jpg?sz=128", "display_name": "Max Warman", "link": "https://stackoverflow.com/users/5711521/max-warman"}, "edited": false, "score": 0, "creation_date": 1450881123, "post_id": 34437766, "comment_id": 56616517, "body": "Thanks for your help :) The code has been fixed"}, {"owner": {"reputation": 2427, "user_id": 222131, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d3ff4ce3070fbfa81ff65ab53309dbd4?s=128&d=identicon&r=PG", "display_name": "Woodrow Douglass", "link": "https://stackoverflow.com/users/222131/woodrow-douglass"}, "edited": false, "score": 2, "creation_date": 1450883802, "post_id": 34437766, "comment_id": 56618061, "body": "you should accept the answer that helped you by clicking the green &#39;check&#39; next to it."}], "answers": [{"tags": [], "owner": {"reputation": 3062, "user_id": 5115872, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lyXg.jpg?s=128&g=1", "display_name": "wrangler", "link": "https://stackoverflow.com/users/5115872/wrangler"}, "is_accepted": false, "score": 0, "last_activity_date": 1450880911, "creation_date": 1450880911, "answer_id": 34437822, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf/34437822#34437822", "title": "Trouble with C else, if and scanf", "body": "<p>Use <strong>strcmp</strong> to compare two strings:</p>\n\n<p><code>if(!strcmp(usernametry,username))</code></p>\n"}, {"tags": [], "owner": {"reputation": 7085, "user_id": 47461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3980d1eb309c7669ef8fb3d0234adc03?s=128&d=identicon&r=PG", "display_name": "cadrian", "link": "https://stackoverflow.com/users/47461/cadrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1450880932, "creation_date": 1450880932, "answer_id": 34437829, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf/34437829#34437829", "title": "Trouble with C else, if and scanf", "body": "<p>Your variables are not the same pointer.</p>\n\n<p>Replace by:</p>\n\n<pre><code>if (!strcmp(usernametry, username))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450885380, "post_id": 34437834, "comment_id": 56619086, "body": "Minor:  if someone enters a name longer than 9 characters leads to problems too."}], "tags": [], "owner": {"reputation": 1457, "user_id": 2326817, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x4kjE.jpg?s=128&g=1", "display_name": "Karel Kubat", "link": "https://stackoverflow.com/users/2326817/karel-kubat"}, "is_accepted": false, "score": 1, "last_activity_date": 1450880940, "creation_date": 1450880940, "answer_id": 34437834, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf/34437834#34437834", "title": "Trouble with C else, if and scanf", "body": "<p>You can't compare strings using ==, this is not a that-high-level-language. See strcmp() for comparing strings.</p>\n\n<p>Incidentally, what if someone enters a name longer than 10 characters? You're drifting towards a buffer overflow bug in your code ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1450881627, "post_id": 34437891, "comment_id": 56616801, "body": "Better use <code>9</code> in the scanf to account for the terminator: <code>scanf(&quot;%9s&quot;, usernametry);</code>"}], "tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": false, "score": 3, "last_activity_date": 1450881689, "last_edit_date": 1450881689, "creation_date": 1450881151, "answer_id": 34437891, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf/34437891#34437891", "title": "Trouble with C else, if and scanf", "body": "<p><code>usernametry</code> and <code>username</code> are arrays of type <code>char</code>. When you do <code>usernametry == username</code>, you are not comparing if two strings are equal, you are comparing the memory address of the first <code>char</code> in <code>usernametry</code> with the memory address of the first <code>char</code> in <code>username</code>. In order to compare if two strings are equal, you should use <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow\"><code>strcmp</code></a>. Also, consider replacing <code>%s</code> in your <code>scanf</code> with <code>%9s</code> so that <code>usernametry</code> will never exceed 9 <code>char</code>s (which would have been a buffer overflow, as the 10th <code>char</code> needs to be <code>'\\0'</code>, the null character, which is used to terminate C-style strings).</p>\n"}, {"tags": [], "owner": {"reputation": 4148, "user_id": 781252, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ec72210a7b6a543152fa32b770d1eed0?s=128&d=identicon&r=PG&f=1", "display_name": "developer", "link": "https://stackoverflow.com/users/781252/developer"}, "is_accepted": false, "score": 1, "last_activity_date": 1450887192, "creation_date": 1450887192, "answer_id": 34439672, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf/34439672#34439672", "title": "Trouble with C else, if and scanf", "body": "<p>use <code>strcmp()</code> functions to compare 2 strings instead of <code>==</code> </p>\n\n<p>use of <code>==</code> is wrong because in this case you compare address of <code>usernametry</code> and <code>username</code> and of course they are always differents.</p>\n\n<pre><code>if(strcmp(usernametry, username) == 0) // return 0 if equal !=0 if not equal\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5711521, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SGyWxf9wC9s/AAAAAAAAAAI/AAAAAAAAAVc/OF-zXifdZ54/photo.jpg?sz=128", "display_name": "Max Warman", "link": "https://stackoverflow.com/users/5711521/max-warman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1450887192, "creation_date": 1450880767, "last_edit_date": 1450881471, "question_id": 34437766, "link": "https://stackoverflow.com/questions/34437766/trouble-with-c-else-if-and-scanf", "title": "Trouble with C else, if and scanf", "body": "<p>I am new to C and I'm making my first \"decent\" program. I am facing trouble with my code.</p>\n\n<pre><code>char username[] = \"root\";\nchar usernametry[10];\n\nscanf(\"%s\",usernametry);\n\nif (usernametry == username)\n{\n    printf(\"Welcome ROOT user\\n\");\n}\nelse\n{\n    printf(\"Try again\\n\");\n}\n</code></pre>\n\n<p>Whenever I execute my program, everything works; however, when I try to log in and type <code>root</code> as the username, it returns <code>Try again</code>. Can someone suggest why this is happening? I am very new to C so I apologize for my lack of C knowledge.</p>\n"}, {"tags": ["c#", "c++", "c"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1450880563, "post_id": 34437686, "comment_id": 56616193, "body": "It&#39;s not C#, but Clang will probably help with this."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4361260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa8dadbfb7418733a5d5e1f942042f1?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Nouman", "link": "https://stackoverflow.com/users/4361260/muhammad-nouman"}, "edited": false, "score": 0, "creation_date": 1450883536, "post_id": 34437735, "comment_id": 56617909, "body": "That looks like perfect solution. But i am a beginner in C#. Can you please guide me how to use code over here ! <a href=\"https://github.com/SimonRichards/clang-sharp\" rel=\"nofollow noreferrer\">github.com/SimonRichards/clang-sharp</a>"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 85, "user_id": 4361260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa8dadbfb7418733a5d5e1f942042f1?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Nouman", "link": "https://stackoverflow.com/users/4361260/muhammad-nouman"}, "edited": false, "score": 0, "creation_date": 1450883773, "post_id": 34437735, "comment_id": 56618045, "body": "No, you need to learn the language before using it for your projects. I suggest reading <a href=\"https://rads.stackoverflow.com/amzn/click/com/073568183X\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">C# Step By Step</a> and then getting up-to-date with the latest C# standards."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 85, "user_id": 4361260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa8dadbfb7418733a5d5e1f942042f1?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Nouman", "link": "https://stackoverflow.com/users/4361260/muhammad-nouman"}, "edited": false, "score": 0, "creation_date": 1452187295, "post_id": 34437735, "comment_id": 57068074, "body": "@MuhammadNouman: if you are satisfied, do you mind accepting this answer so that the question can be marked as &quot;solved&quot;? Thanks."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 9, "last_activity_date": 1450880654, "creation_date": 1450880654, "answer_id": 34437735, "question_id": 34437686, "link": "https://stackoverflow.com/questions/34437686/parsing-a-c-c-c-file-in-c/34437735#34437735", "title": "Parsing a c/c++/c# file in c#", "body": "<p><code>libclang</code> is probably the easiest-to-use and most mature option to parse C++.</p>\n\n<p>There are several C# wrappers available - here are some results of a quick Google search:</p>\n\n<ul>\n<li><p><a href=\"http://www.clangsharp.org/\" rel=\"noreferrer\">http://www.clangsharp.org/</a></p></li>\n<li><p><a href=\"https://github.com/SimonRichards/clang-sharp\" rel=\"noreferrer\">https://github.com/SimonRichards/clang-sharp</a></p></li>\n</ul>\n"}], "owner": {"reputation": 85, "user_id": 4361260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa8dadbfb7418733a5d5e1f942042f1?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Nouman", "link": "https://stackoverflow.com/users/4361260/muhammad-nouman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 34437735, "answer_count": 1, "score": 1, "last_activity_date": 1450880654, "creation_date": 1450880451, "question_id": 34437686, "link": "https://stackoverflow.com/questions/34437686/parsing-a-c-c-c-file-in-c", "title": "Parsing a c/c++/c# file in c#", "body": "<p>I have a c file, which has many functions in it.</p>\n\n<p>I want to separate out each function and get all of them in a List(lets say, list_code), and also get name of each function in a different List(lets say, fun_code). E.g</p>\n\n<p>Lets say, a c file has following code:</p>\n\n<pre><code>void main()\n{\n//some code here\n}\n\nint count (int abc)\n{\n///some code here\n}\n\nint adder(int def)\n{\n///some code here\n}\n</code></pre>\n\n<p>I want the following two lists <strong>list_code</strong> and <strong>fun_code</strong> !!\nThe elements of <strong>list_code</strong> would be a list with three element, containing,</p>\n\n<ol>\n<li>void main()\n{\n//some code here\n}</li>\n<li>int count (int abc)\n{\n///some code here\n}</li>\n<li>int adder(int def)\n{\n///some code here\n}</li>\n</ol>\n\n<p>The elements of <strong>fun_code</strong> would be a list with three element, containing,</p>\n\n<ol>\n<li>void main() </li>\n<li>int count (int abc)</li>\n<li>int adder(int def)</li>\n</ol>\n\n<p>I have already written a code, which keep tracks of braces(\"{\" and \"}\") and separate out full functions. But it would fail, if comments contain braces. \nMoreover i wasn't able to get the function names this way.</p>\n\n<p>Kindly, let me know how can i achieve this. Any library or builtin functions would be of great help, as it would have taken care of all minor details like comments, new line and similar scenarios.</p>\n"}, {"tags": ["c", "qt", "include", "iostream", "bits"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 5, "creation_date": 1450880758, "post_id": 34437483, "comment_id": 56616303, "body": "Does <a href=\"http://stackoverflow.com/questions/4643197/missing-include-bits-cconfig-h-when-cross-compiling-64-bit-program-on-32-bit\">this</a> help?"}], "answers": [{"comments": [{"owner": {"reputation": 3898, "user_id": 1755628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05ce71f3fb8e71b8a3d6bc9c3198a88?s=128&d=identicon&r=PG", "display_name": "MikeW", "link": "https://stackoverflow.com/users/1755628/mikew"}, "edited": false, "score": 1, "creation_date": 1557934076, "post_id": 36556287, "comment_id": 98935164, "body": "Or just &#39;sudo apt-get install g++-multilib&#39;"}, {"owner": {"reputation": 143, "user_id": 4934867, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1a954d9d9625b2705b4d1b21c0cfb256?s=128&d=identicon&r=PG&f=1", "display_name": "IGR94", "link": "https://stackoverflow.com/users/4934867/igr94"}, "reply_to_user": {"reputation": 3898, "user_id": 1755628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05ce71f3fb8e71b8a3d6bc9c3198a88?s=128&d=identicon&r=PG", "display_name": "MikeW", "link": "https://stackoverflow.com/users/1755628/mikew"}, "edited": false, "score": 0, "creation_date": 1558699483, "post_id": 36556287, "comment_id": 99196916, "body": "@MikeW or just &quot;apt&quot; instead of &quot;apt-get&quot;"}], "tags": [], "owner": {"reputation": 4257, "user_id": 1349673, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4ee321232e2b4700138d891f6d2f004?s=128&d=identicon&r=PG", "display_name": "James Hirschorn", "link": "https://stackoverflow.com/users/1349673/james-hirschorn"}, "is_accepted": false, "score": 6, "last_activity_date": 1460398838, "last_edit_date": 1495542760, "creation_date": 1460398838, "answer_id": 36556287, "question_id": 34437483, "link": "https://stackoverflow.com/questions/34437483/bits-cconfig-h-no-such-file-or-directory/36556287#36556287", "title": "bits/c++config.h no such file or directory", "body": "<p>It does look like a cross-platform compilation issue. Did you install the multilib packages:</p>\n\n<pre><code>sudo apt-get install gcc-4.8-multilib g++-4.8-multilib\n</code></pre>\n\n<p>(or replace 4.8 with your current version of c++), as suggested <a href=\"https://stackoverflow.com/a/14391677/1349673\">here</a>?</p>\n"}], "owner": {"reputation": 71, "user_id": 5708293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d109cc0c0bf0050ad20f309faf5d165?s=128&d=identicon&r=PG&f=1", "display_name": "paulinhok14", "link": "https://stackoverflow.com/users/5708293/paulinhok14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16366, "favorite_count": 1, "closed_date": 1468311529, "answer_count": 1, "score": 6, "last_activity_date": 1460398838, "creation_date": 1450879789, "last_edit_date": 1450881211, "question_id": 34437483, "link": "https://stackoverflow.com/questions/34437483/bits-cconfig-h-no-such-file-or-directory", "closed_reason": "Duplicate", "title": "bits/c++config.h no such file or directory", "body": "<p>I'm trying to compile my code including iostream lib on ubuntu 14.04, using qt creator, but when I execute it I got this error message:</p>\n\n<pre><code>/usr/include/c++/4.8/iostream:38: error: bits/c++config.h: No such file or directory #include &lt;bits/c++config.h&gt;\n</code></pre>\n\n<p>Even if I try to compile it by terminal, I have the same trouble.\nThis is a c code that i got from my friend, not c++, but I still need to include this iostream. I made a huge research and can't find anything useful on internet, just posts talking about 64 or 32 bits OS. I'm new on programming scene, I'm glad for your patience, thanks.</p>\n"}, {"tags": ["c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1450880446, "post_id": 34437470, "comment_id": 56616129, "body": "I think that when you use this function you should already know that the section exist, because it is intended to retrive the value associated with the key. Maybe there is another function that check for the section?"}, {"owner": {"reputation": 159, "user_id": 1013092, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4944696ddf439c1e5265a3e210c01898?s=128&d=identicon&r=PG", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1013092/chrisj"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450882022, "post_id": 34437470, "comment_id": 56617031, "body": "As Martin Bonner reminded me below, there is a function that can be used to read in the full section. I&#39;ll try us this and see if it helps."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1450882249, "post_id": 34437470, "comment_id": 56617186, "body": "Yes, I think is the correct way to do this, see also GetPrivateProfileSectionNames that returns all the section names."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1450886037, "post_id": 34437470, "comment_id": 56619516, "body": "The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724345.aspx\" rel=\"nofollow noreferrer\">documentation</a> doesn&#39;t say, that the last error code is set to any specific value in case a key cannot be retrieved. Don&#39;t rely on it, as the behavior can change without prior notice."}, {"owner": {"reputation": 159, "user_id": 1013092, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4944696ddf439c1e5265a3e210c01898?s=128&d=identicon&r=PG", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1013092/chrisj"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1450886978, "post_id": 34437470, "comment_id": 56620073, "body": "@IInspectable, it mentions it in the documentation for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724353(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetPrivateProfileString()</a> which I am also using. Anyway, neither work and I&#39;m going with the solution suggested by others."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1450887386, "post_id": 34437470, "comment_id": 56620328, "body": "Do what msdn says and stop using these functions. It&#39;s nearly 2016. You were meant to stop 20 years ago."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1450889504, "post_id": 34437470, "comment_id": 56621651, "body": "@DavidHeffernan: Good advice, in general. Not so good, when the question is about maintaining a legacy application. This is true in particular, since there is no recommended replacement for the functionality in question: Storing information in configuration files alongside the application."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1450892854, "post_id": 34437470, "comment_id": 56623551, "body": "@IInspectable there are many good libraries for working with ini files"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 1013092, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4944696ddf439c1e5265a3e210c01898?s=128&d=identicon&r=PG", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1013092/chrisj"}, "edited": false, "score": 0, "creation_date": 1450880730, "post_id": 34437644, "comment_id": 56616283, "body": "The values of this INI file are not mapped to the registry. It is located in application directory, and contains information relating to the application but it is not initialisation information. These keys or sections will only be there if the user enables a specific function of the app (I know, bad design, but it&#39;s what I have to work with). So I would like to find out programmatically what is causing the default value to be returned so I can handle it."}, {"owner": {"reputation": 159, "user_id": 1013092, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4944696ddf439c1e5265a3e210c01898?s=128&d=identicon&r=PG", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1013092/chrisj"}, "edited": false, "score": 0, "creation_date": 1450881249, "post_id": 34437644, "comment_id": 56616597, "body": "The tip to use GetPrivateProfileSection to check if the section exists first is a good one. I know the file should exist, otherwise there would be a much, much bigger issue. I&#39;ll try this. Thanks."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1450880308, "creation_date": 1450880308, "answer_id": 34437644, "question_id": 34437470, "link": "https://stackoverflow.com/questions/34437470/how-to-know-why-getprivateprofileint-string-fail/34437644#34437644", "title": "How to know why GetPrivateProfileInt/String fail", "body": "<p>If GetLastError() won't help, then you need to do some detective work.  You should check yourself if the registry key or file exists (you know that most ini files are mapped to the registry, right?), or if the section doesn't exist (GetPrivateProfileSection), and if neither of those apply, then the key doesn't exist.</p>\n"}], "owner": {"reputation": 159, "user_id": 1013092, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4944696ddf439c1e5265a3e210c01898?s=128&d=identicon&r=PG", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1013092/chrisj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1761, "favorite_count": 0, "accepted_answer_id": 34437644, "answer_count": 1, "score": 1, "last_activity_date": 1450886243, "creation_date": 1450879755, "last_edit_date": 1450886243, "question_id": 34437470, "link": "https://stackoverflow.com/questions/34437470/how-to-know-why-getprivateprofileint-string-fail", "title": "How to know why GetPrivateProfileInt/String fail", "body": "<p>I am working on a piece of code in the old application, using C++ in Visual Studio 2008. It attempts to read some values from an INI file, and I'm trying to do some error handling in the case of the section or key I am trying to read does not exist in the file. </p>\n\n<p>Here is the code snippet:</p>\n\n<pre><code>int nValue = GetPrivateProfileInt (SECTION, KEY, -1, sINIFile);\nif(nValue == -1)  // default value\n{\n    int nLastError = GetLastError();\n    if(nLastError != 0)\n    {\n        // do something\n    }\n}\n</code></pre>\n\n<p>sINIFile contains the full path to my required INI file.</p>\n\n<p>After some testing, I've found that GetLastError() returns 2 (ERROR_FILE_NOT_FOUND) if:</p>\n\n<ol>\n<li><p>the file doesn't exist OR,</p></li>\n<li><p>the section doesn't exist OR,</p></li>\n<li><p>the key doesn't exist. </p></li>\n</ol>\n\n<p>I would like to know the specific reason the GetPrivateProfileInt returned the default value - is this possible?</p>\n\n<p>Note: I've looked into checking the value of 'errno' (or errorno, as it says on the MSDN page) but this is always 0 for any of the above cases. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1450877019, "post_id": 34436609, "comment_id": 56614120, "body": "Remove the 26 icky if statements and replace them with <code>if ( isalpha(str[i]) ){ size_t index = toupper(str[i]) - &#39;A&#39;; a[index]++; }</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450877280, "post_id": 34436609, "comment_id": 56614264, "body": "Also replace the loop with <code>if( a[a0] &gt; 0 ) c++;</code> with <code>bool pangram = true; for(int i=0; i&lt;26; i++) { if(a[i] == 0){ pangram=false; break} }</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1450877311, "post_id": 34436609, "comment_id": 56614282, "body": "<i>Remove the 26 icky if statements and replace them with if ( isalpha(str[i]) ){ size_t index = toupper(str[i]) - &#39;A&#39;; a[index]++; }</i>  No.  Do not do this.  Alphabetic characters are not guaranteed to be represented contiguously.  <code>&#39;Z&#39; - &#39;A&#39;</code> is not guaranteed to be 25.  The <b>5.2.1 Charater Sets</b> of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C Standard</a> merely guarantees the numeric characters 0-9 are contiguous."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1450877526, "post_id": 34436609, "comment_id": 56614416, "body": "@user3121023 <code>scanf ( &quot;%s&quot;</code> skips white-spaces and <i>then</i> will stop at first whitespace (after scanning non-white-space)  Recommending <code>fgets()</code> is still a good idea."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450878274, "post_id": 34436609, "comment_id": 56614846, "body": "@Lundin <i>Yes absolutely do this. If you are some token table fetishist you can add something like #ifdef EBCDIC #error Your system is crap. #endif or #if &#39;Z&#39; - &#39;A&#39; != 0 #error Your system is crap #endif. If you suspect your token table to be designed by people who lack common sense, add static assertions.</i>  So the C Standard committee &quot;lack[s] common sense&quot;?  Should we assume that indicates the weight one should give to your comments?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1450878501, "post_id": 34436609, "comment_id": 56614984, "body": "In addition of what has been said, you should indent your program properly for your own sake."}, {"owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450879224, "post_id": 34436609, "comment_id": 56615444, "body": "@AndrewHenle, it looks to me like you are trying to be more catholic than the pope. Sure, there is no guarantee for A-Z being sequential in the standard, but realistically, there is not a single implementation that isn&#39;t so, and there will never be."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "edited": false, "score": 0, "creation_date": 1450880294, "post_id": 34436609, "comment_id": 56616055, "body": "@Aganju <i>it looks to me like you are trying to be more catholic than the pope. Sure, there is no guarantee for A-Z being sequential in the standard, but realistically, there is not a single implementation that isn&#39;t so, and there will never be.</i>  <a href=\"https://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">Oh?  Are you sure?</a>  But if you want to make unsupportable assumptions when you code, go ahead."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450878995, "post_id": 34436727, "comment_id": 56615285, "body": "&quot;scanf with &quot;%s&quot; does stop reading at the first blank.&quot; is not so.  <a href=\"http://stackoverflow.com/questions/34436609/why-this-pangram-program-is-not-giving-correct-anwer/34437034#comment56614416_34436609\">Comment</a>."}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 0, "last_activity_date": 1450878769, "last_edit_date": 1450878769, "creation_date": 1450877065, "answer_id": 34436727, "question_id": 34436609, "link": "https://stackoverflow.com/questions/34436609/why-this-pangram-program-is-not-giving-correct-anwer/34436727#34436727", "title": "Why this pangram program is not giving correct anwer?", "body": "<ol>\n<li><p>scanf with \"%s\" does stop reading at the first blank. As you don't need formatted reading anyway, use fgets() instead (or change the format code to something that <em>allows</em> blanks, like \"%[^\\n]\", which stops only at a return)</p></li>\n<li><p>Because of the condition in the for loop, it ends at the first blank. You should test for the blank inside the loop and bypass processing it, but still keep the loop running - the way you coded it, the whole loop ends when it is found.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1450879240, "last_edit_date": 1450879240, "creation_date": 1450878253, "answer_id": 34437034, "question_id": 34436609, "link": "https://stackoverflow.com/questions/34436609/why-this-pangram-program-is-not-giving-correct-anwer/34437034#34437034", "title": "Why this pangram program is not giving correct anwer?", "body": "<p>Read the input with <code>fgets()</code> as that will read a <em>line</em> of input.  <code>scanf(\"%s\", str);</code> will only save <code>\"We\"</code> with input like <code>\" We promptly ...\"</code>.</p>\n\n<pre><code>if (fgetc(str, 1000, stdin)) {\n  // drop test for ' '\n  // for( int i = 0; str[i]!= '\\0' &amp;&amp; str[i]!= ' ' ; i++) {\n  for(int i = 0; str[i]; i++) {\n    ....\n  }\n\n  // To only print letters\n  for(int i = 0; str[i]; i++) {\n    if (isalpha(str[i]) fputc(str[i], stdout);\n  }\n  fputc('\\n', stdout);\n</code></pre>\n\n<hr>\n\n<p>On a separate issue: the repeated 26 tests certainly can be simplified.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\nif (isalpha((unsigned char) str[i])) {\n  size_t index = toupper((unsigned char) str[i]) - 'A';\n  a[index]++;\n}\n</code></pre>\n\n<p>Or portably with</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\nconst char AZ[]= \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nchar *p = strchr(AZ, toupper((unsigned char) str[i]));\nif (p &amp;&amp; *p) {\n  a[p-AZ]++;\n}\n</code></pre>\n\n<p>or various other schemes.</p>\n"}], "owner": {"reputation": 1, "user_id": 5674089, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s8h5P7_TIFo/AAAAAAAAAAI/AAAAAAAAAOQ/b0n-FHIpFME/photo.jpg?sz=128", "display_name": "Aditya Kakliya", "link": "https://stackoverflow.com/users/5674089/aditya-kakliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1450886668, "answer_count": 2, "score": -3, "last_activity_date": 1450879240, "creation_date": 1450876698, "question_id": 34436609, "link": "https://stackoverflow.com/questions/34436609/why-this-pangram-program-is-not-giving-correct-anwer", "closed_reason": "Not suitable for this site", "title": "Why this pangram program is not giving correct anwer?", "body": "<p>Please help me to find the error in this code.\nAnd also tell me how to remove a specific character (e.x. a space) from an array of characters/string.\nIf the input string is \n\" We promptly judged antique ivory buckles for the next prize \"\nThen how to make an array of characters on which I have to work like this \n\" Wepromptlyjudgedantiqueivorybucklesforthenextprize \"</p>\n\n<p>Thank You!!   </p>\n\n<pre><code>int a[26] = {0};\nint c = 0;\nchar* str = (char *)malloc(1000 * sizeof(char));\nscanf(\"%s\", str);\n\nfor( int i = 0; str[i]!= '\\0' &amp;&amp; str[i]!= ' ' ; i++) {\nif( str[i] == 'a' || str[i] == 'A') {\n    a[0]++;\n\n};\nif( str[i] == 'b' || str[i] == 'B') {\n    a[1]++;\n\n};\nif( str[i] == 'c' || str[i] == 'C') {\n    a[2]++;\n\n};\nif( str[i] == 'd' || str[i] == 'D') {\n    a[3]++;\n\n};\nif( str[i] == 'e' || str[i] == 'E') {\n    a[4]++;\n\n};\nif( str[i] == 'f' || str[i] == 'F') {\n    a[5]++;\n\n};\nif( str[i] == 'g' || str[i] == 'G') {\n    a[6]++;\n\n};\nif( str[i] == 'h' || str[i] == 'H') {\n    a[7]++;\n\n};\nif( str[i] == 'i' || str[i] == 'I') {\n    a[8]++;\n\n};\nif( str[i] == 'j' || str[i] == 'J') {\n    a[9]++;\n\n};\nif( str[i] == 'K' || str[i] == 'k') {\n    a[10]++;\n\n};\nif( str[i] == 'l' || str[i] == 'L') {\n    a[11]++;\n\n};\nif( str[i] == 'm' || str[i] == 'M') {\n    a[12]++;\n\n};\nif( str[i] == 'n' || str[i] == 'N') {\n    a[13]++;\n\n};\nif( str[i] == 'o' || str[i] == 'O') {\n    a[14]++;\n\n};\nif( str[i] == 'p' || str[i] == 'P') {\n    a[15]++;\n\n};\n\nif( str[i] == 'q' || str[i] == 'Q') {\n    a[16]++;\n\n};\nif( str[i] == 'r' || str[i] == 'R') {\n    a[17]++;\n\n};\nif( str[i] == 's' || str[i] == 'S') {\n    a[18]++;\n\n};\nif( str[i] == 't' || str[i] == 'T') {\n    a[19]++;\n\n};\nif( str[i] == 'u' || str[i] == 'U') {\n    a[20]++;\n\n};\nif( str[i] == 'v' || str[i] == 'V') {\n    a[21]++;\n\n};\nif( str[i] == 'w' || str[i] == 'W') {\n    a[22]++;\n\n};\nif( str[i] == 'x' || str[i] == 'X') {\n    a[23]++;\n\n};\nif( str[i] == 'y' || str[i] == 'Y') {\n    a[24]++;\n\n};\nif( str[i] == 'z' || str[i] == 'Z') {\n    a[25]++;\n\n};\n};\nfor( int a0 = 0; a0 &lt; 26; a0++) {\nif( a[a0] &gt; 0 ) c++;\n};\nif( c == 26 ) printf(\"pangram\");\nelse printf(\"not pangram\");\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 7, "creation_date": 1450876144, "post_id": 34436381, "comment_id": 56613672, "body": "First thing I would suspect is fishy benchmarking methods."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1450876172, "post_id": 34436381, "comment_id": 56613689, "body": "Have you ried less agressive optimization levels, like <code>-O3</code> or <code>-O2</code>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1450876182, "post_id": 34436381, "comment_id": 56613693, "body": "One measurement is not enough for forming a statistic"}, {"owner": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "edited": false, "score": 3, "creation_date": 1450876438, "post_id": 34436381, "comment_id": 56613815, "body": "I think you need to be more rigorous with your benchmarking.  A still-back-of-the-envelope but easy improvement would be to modify the code so that it would repeatedly execute the measured code in a loop.  have the loop execute the code a million times in that loop and time compare THOSE results.  Also get rid of the printf statement."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450876667, "post_id": 34436381, "comment_id": 56613934, "body": "In addition of what has already been said, you can inspect the generated assemble code."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "edited": false, "score": 3, "creation_date": 1450876685, "post_id": 34436381, "comment_id": 56613946, "body": "@KenClement: Please do wait a half a million seconds, and tell us the results."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1450876878, "post_id": 34436381, "comment_id": 56614060, "body": "I confirmed the difference on my machine using GCC 4.9. The generated assembly code is completely different (I get 359 lines of assembly without the global, and 676 lines with it) so it&#39;s hard to tell what exactly changed here."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450876890, "post_id": 34436381, "comment_id": 56614064, "body": "I suspect it&#39;s because when you&#39;re compiling your code, there&#39;s no way the compiler at that time knows that the global is never used.  That would be optimized away at link time.  What&#39;s the result if you use <code>-flto</code>? (I&#39;m no expert in this, so that might not be complete) See <a href=\"https://gcc.gnu.org/onlinedocs/gccint/LTO-Overview.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gccint/LTO-Overview.html</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1450877041, "post_id": 34436381, "comment_id": 56614133, "body": "With <code>-O2</code>, the results switch places."}, {"owner": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1450877636, "post_id": 34436381, "comment_id": 56614473, "body": "@Karoly Horvath, what exactly is your point above?"}, {"owner": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "edited": false, "score": 0, "creation_date": 1450877708, "post_id": 34436381, "comment_id": 56614511, "body": "Multiple runs show similar results. So, for &#39;fib1&#39; I can see an average of 0.5 seconds while multiple runs of &#39;fib2&#39; show an average of 0.26 seconds. Overall, the second program is twice as fast as the first."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1450877897, "post_id": 34436381, "comment_id": 56614607, "body": "The results are very fragile. Changing tiny little things changes them drastically. For example, change the order of the <code>a =</code> and <code>b =</code> lines and the effect vanishes."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "edited": false, "score": 3, "creation_date": 1450877898, "post_id": 34436381, "comment_id": 56614609, "body": "@KenClement His point is that running code that takes half a second to run a million times is not feasible. The code already essentially runs repeatedly due to being recursive."}, {"owner": {"reputation": 700, "user_id": 3474568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/he5ME.png?s=128&g=1", "display_name": "Ken Clement", "link": "https://stackoverflow.com/users/3474568/ken-clement"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1450880943, "post_id": 34436381, "comment_id": 56616413, "body": "@interjay, The reason for removing the I/O and running the function a large number of times with a fixed argument is to remove or at least greatly reduce sources of random noise and bias in the timings that may not be obvious going in.  Relying only on the recursion to achieve this introduces other possible biases in the result which is eliminated by a brute force execution of the function itself.  Vary the argument to the function as necessary (I used 10).  Sorry, I assumed this was self-evident."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1450884431, "post_id": 34436381, "comment_id": 56618433, "body": "<a href=\"http://stackoverflow.com/q/32974625/1918193\">stackoverflow.com/q/32974625/1918193</a> (uses an asm instead of a global, but the result is the same)."}, {"owner": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1450904877, "post_id": 34436381, "comment_id": 56629186, "body": "@MarcGlisse a very good link. It actually answers my question (2). After using the compiler flag &#39;-fno-optimize-sibling-calls&#39; both programs show the same execution time (second one slightly slower, as expected). Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1450880713, "post_id": 34437731, "comment_id": 56616274, "body": "I get the same weird behavior with -O3, doesn&#39;t have to be -Ofast."}, {"owner": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1450880914, "post_id": 34437731, "comment_id": 56616397, "body": "Yes. I think @Peter can take a look at <a href=\"http://stackoverflow.com/questions/14737371/how-to-find-out-which-optimizations-are-actually-applied-when-using-gcc\" title=\"how to find out which optimizations are actually applied when using gcc\">stackoverflow.com/questions/14737371/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1450880634, "creation_date": 1450880634, "answer_id": 34437731, "question_id": 34436381, "link": "https://stackoverflow.com/questions/34436381/gcc-optimization-differences-in-recursive-functions-using-globals/34437731#34437731", "title": "GCC optimization differences in recursive functions using globals", "body": "<p>On my machine (<code>gcc (Ubuntu 5.2.1-22ubuntu2) 5.2.1 20151010</code>) I've got this:<br>\n<code>time ./fib1 0,36s user 0,00s system 98% cpu 0,364 total</code><br>\n<code>time ./fib2 0,20s user 0,00s system 98% cpu 0,208 total</code></p>\n\n<p>From <code>man gcc</code>:  </p>\n\n<blockquote>\n  <p>-Ofast<br>\n  Disregard strict standards compliance.  -Ofast enables all -O3 optimizations.  It also enables optimizations that are not valid for all standard-compliant programs.  It turns on -ffast-math and the Fortran-specific -fno-protect-parens and -fstack-arrays.</p>\n</blockquote>\n\n<p>Not so safe option, let's try <code>-O2</code>:<br>\n<code>time ./fib1 0,38s user 0,00s system 99% cpu 0,377 total</code><br>\n<code>time ./fib2 0,47s user 0,00s system 99% cpu 0,470 total</code></p>\n\n<p>I think, that some of aggressive optimizations weren't applied to <code>fib1</code>, but were applied to <code>fib2</code>. When I switched <code>-Ofast</code> for <code>-O2</code> - some of optimizations weren't applied to <code>fib2</code>, but were applied to <code>fib1</code>.</p>\n\n<p>Let's try <code>-O0</code>:<br>\n<code>time ./fib1 0,81s user 0,00s system 99% cpu 0,812 total</code><br>\n<code>time ./fib2 0,81s user 0,00s system 99% cpu 0,814 total</code>  </p>\n\n<p>They are equal without optimizations.<br>\nSo introducing global variable in recursive function can break some optimizations on one hand and improve other optimizations on other hand.</p>\n"}, {"comments": [{"owner": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "edited": false, "score": 0, "creation_date": 1450884664, "post_id": 34438407, "comment_id": 56618571, "body": "&gt; -O2 doesn&#39;t do this Take a look at my answer, <code>-O2</code> just swaps <code>fib1</code> and <code>fib2</code>. Only <code>-O0</code> make them equal. And they must be equal in my opinion, because we can safely exclude global variable - it&#39;s value never got read."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1450885170, "post_id": 34438407, "comment_id": 56618940, "body": "You can ask gcc which optimizations are enabled with <code>gcc -Q -O3 --help=optimizers</code> or get a list of differences using <code>diff</code>. Possibly easier than sifting through the manual, and has the advantage of corresponding to the actual version of gcc you&#39;re using, in case your manual doesn&#39;t."}, {"owner": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "edited": false, "score": 0, "creation_date": 1450896230, "post_id": 34438407, "comment_id": 56625195, "body": "Thanks Art. It&#39;s confusing and worrying that the second program is almost <i>twice</i> as fast. One would expect that &#39;-Ofast&#39; would give more or less the same result for both programs. Actually, I&#39;m tempted to look at this kind of optimization behavior as a bug."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "edited": false, "score": 0, "creation_date": 1450921041, "post_id": 34438407, "comment_id": 56634429, "body": "@Peter It could be a bug. Or it could be just an optimization that works well in some cases that just doesn&#39;t work well here. I don&#39;t want to call it a bug, just a secret craft knowledge that gcc -O3 applies some dubious optimizations that sometimes make things much worse."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "edited": false, "score": 0, "creation_date": 1450921128, "post_id": 34438407, "comment_id": 56634451, "body": "@RomanZaytsev On the gcc version I used the only difference between -O2 and -O3 was one instruction writing to the global variable. I didn&#39;t want to trust the timing because the differences I saw were pretty close to noise."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 1, "last_activity_date": 1450883714, "last_edit_date": 1450883714, "creation_date": 1450882935, "answer_id": 34438407, "question_id": 34436381, "link": "https://stackoverflow.com/questions/34436381/gcc-optimization-differences-in-recursive-functions-using-globals/34438407#34438407", "title": "GCC optimization differences in recursive functions using globals", "body": "<p>I believe you hit some very clever and very weird gcc (mis-?)optimization. That's about as far as I got in researching this.</p>\n\n<p>I modified your code to have an <code>#ifdef G</code> around the global:</p>\n\n<pre><code>$ cc -O3 -o foo foo.c &amp;&amp; time ./foo\n102334155\n\nreal    0m0.634s\nuser    0m0.631s\nsys     0m0.001s\n$ cc -O3 -DG -o foo foo.c &amp;&amp; time ./foo\n102334155\n\nreal    0m0.365s\nuser    0m0.362s\nsys     0m0.001s\n</code></pre>\n\n<p>So I have the same weird performance difference.</p>\n\n<p>When in doubt, read the generated assembler.</p>\n\n<pre><code>$ cc -S -O3 -o foo.s -S foo.c\n$ cc -S -DG -O3 -o foog.s -S foo.c\n</code></pre>\n\n<p>Here it gets truly bizarre. Normally I can follow gcc-generated code pretty easily. The code that got generated here is just incomprehensible. What should be pretty straightforward recursion and addition that should fit in 15-20 instructions, gcc expanded to a several hundred instructions with a flurry of shifts, additions, subtractions, compares, branches and a large array on the stack. It looks like it tried to partially convert one or both recursions into an iteration and then unrolled that loop. One thing struck me though, the non-global function had only one recursive call to itself (the second one is the call from main):</p>\n\n<pre><code>$ grep 'call.*f1' foo.s | wc\n      2       4      18\n</code></pre>\n\n<p>While the global one one had:</p>\n\n<pre><code>$ grep 'call.*f1' foog.s | wc\n     33      66     297\n</code></pre>\n\n<p>My educated (I've seen this many times before) guess? Gcc tried to be clever and in its fervor the function that in theory should be easier to optimize generated worse code while the write to the global variable made it sufficiently confused that it couldn't optimize so hard that it led to better code. This happens all the time, many optimizations that gcc (and other compilers too, let's not single them out) uses are very specific to certain benchmarks they use and might not generate faster running code in many other cases. In fact, from experience I only ever use -O2 unless I've benchmarked things very carefully to see that -O3 makes sense. It very often doesn't.</p>\n\n<p>If you really want to research this further, I'd recommend reading gcc documentation about which optimizations get enabled with <code>-O3</code> as opposed to <code>-O2</code> (<code>-O2</code> doesn't do this), then try them one by one until you find which one causes this behavior and that optimization should be a pretty good hint for what's going on. I was about to do this, but I ran out of time (must do last minute christmas shopping).</p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "edited": false, "score": 1, "creation_date": 1450895633, "post_id": 34439092, "comment_id": 56624938, "body": "Actually, it makes both programs perform worse, though indeed the one without the global variable is faster. But we know how fast the program can actually perform using a (meaningless) global variable. So the question remains, how can the original (best) speed be achieved without adding meaningless global variables?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "edited": false, "score": 0, "creation_date": 1450963500, "post_id": 34439092, "comment_id": 56648401, "body": "@Peter In my benchmark the non-inline version performs faster."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1450885604, "last_edit_date": 1450885604, "creation_date": 1450885260, "answer_id": 34439092, "question_id": 34436381, "link": "https://stackoverflow.com/questions/34436381/gcc-optimization-differences-in-recursive-functions-using-globals/34439092#34439092", "title": "GCC optimization differences in recursive functions using globals", "body": "<p>This results from inline limits kicking in earlier in the second version. Because the version with the global variable does more. That strongly suggests that inlining makes run-time performance worse in this particular example.</p>\n\n<p>Compile both versions with <code>-Ofast -fno-inline</code> and the difference in time is gone. In fact, the version without the global variable runs faster.</p>\n\n<p>Alternatively, just mark the function with <code>__attribute__((noinline))</code>.</p>\n"}], "owner": {"reputation": 189, "user_id": 2157085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d516dfc06957d73db95c6960bf384f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2157085/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1450885604, "creation_date": 1450875899, "question_id": 34436381, "link": "https://stackoverflow.com/questions/34436381/gcc-optimization-differences-in-recursive-functions-using-globals", "title": "GCC optimization differences in recursive functions using globals", "body": "<p>The other day I ran into a weird problem using GCC and the '-Ofast' optimization flag. Compiling the below program using 'gcc -Ofast -o fib1 fib1.c'.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f1(int n) {\n    if (n &lt; 2) {\n        return n;\n    }\n    int a, b;\n    a = f1(n - 1);\n    b = f1(n - 2);\n    return a + b;\n}\n\nint main(){\n    printf(\"%d\", f1(40));\n}\n</code></pre>\n\n<p>When measuring execution time, the result is:</p>\n\n<pre><code>peter@host ~ $ time ./fib1\n102334155\nreal    0m0.511s\nuser    0m0.510s\nsys     0m0.000s\n</code></pre>\n\n<p>Now let's introduce a global variable in our program and compile again using 'gcc -Ofast -o fib2 fib2.c'.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint global;\n\nint f1(int n) {\n    if (n &lt; 2) {\n        return n;\n    }\n    int a, b;\n    a = f1(n - 1);\n    b = f1(n - 2);\n\n    global = 0;\n\n    return a + b;\n}\n\nint main(){\n    printf(\"%d\", f1(40));\n}\n</code></pre>\n\n<p>Now the execution time is:</p>\n\n<pre><code>peter@host ~ $ time ./fib2\n102334155\nreal    0m0.265s\nuser    0m0.265s\nsys     0m0.000s\n</code></pre>\n\n<p>The new global variable does not do anything meaningful. However, the difference in execution time is considerable.</p>\n\n<p>Apart from the question (1) what the reason is for such behavior, it also would be nice if (2) the last performance could be achieved without introducing meaningless variables. Any suggestions?</p>\n\n<p>Thanks\nPeter</p>\n"}, {"tags": ["c", "gcc", "clang", "ieee-754", "fma"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450875686, "post_id": 34436233, "comment_id": 56613424, "body": "Might be a compiler bug. Consider reporting it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1450875846, "post_id": 34436233, "comment_id": 56613526, "body": "I&#39;m pretty sure what gcc is doing is ok.  After reading the FLT_EVAL_METHOD doc about contracting FP expressions, I&#39;m surprised <code>clang</code> <i>doesn&#39;t</i> do this.  I&#39;m not posting this as an answer, since it&#39;s not based on any real standards documentation, just my understanding of how <i>I</i> think things should work / should have been designed, given the material in the question."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450876016, "post_id": 34436233, "comment_id": 56613613, "body": "@FUZxxl, do you think the floating point tag would be more appropriate than ieee-754? (if so feel free to change it). I feel like I should be using the floating point tag as well."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450877037, "post_id": 34436233, "comment_id": 56614130, "body": "&quot;Does fusing violate strict IEEE floating-point behavior?&quot; --&gt; IMO, yes.  Use <code>double fma(double x, double y, double z);</code>instead as that is a function call that in an optimized compiler will call the expected assembly code.  This does not violate &quot;IEEE floating-point behaviour&quot;."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1450880494, "post_id": 34436233, "comment_id": 56616157, "body": "<a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=37845\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=37845</a>"}, {"owner": {"reputation": 2531, "user_id": 1398479, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/19650dc2ffcc590635f65387a9b53f39?s=128&d=identicon&r=PG", "display_name": "transang", "link": "https://stackoverflow.com/users/1398479/transang"}, "edited": false, "score": 0, "creation_date": 1587338074, "post_id": 34436233, "comment_id": 108465772, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/43352510/difference-in-gcc-ffp-contract-options\">Difference in gcc -ffp-contract options</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1450901043, "post_id": 34436977, "comment_id": 56627477, "body": "I think this to some degree answers my first question about if GCC is justified in just fma with <code>-O3</code>. But it&#39;s still not clear if it&#39;s IEEE compliant. And since GCC defines <code>__STDC_IEC_559__</code> then I can assume it&#39;s IEEE compliant but other people claim fma breaks this (which would argue GCC is not justified in doing this when <code>__STDC_IEC_559__</code> is defined). So I am still confused."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1450912104, "post_id": 34436977, "comment_id": 56632062, "body": "@Zboson: I noticed that stuff about the pragma in the doc I linked you, but didn&#39;t know how new or widely supported that was.  That&#39;s why I didn&#39;t mention it earlier."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1450966022, "post_id": 34436977, "comment_id": 56649441, "body": "@PeterCordes, that&#39;s okay, GCC does not seem to care about that pragma anyway so it&#39;s a moot issue. And in anycase it says nothing about it being IEEE compliant.  GCC returns <code>__STDC_IEC_559__</code> and at the same uses <code>-ffp-contract=fast</code> so I still want to know if this is a contradiction."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 4, "last_activity_date": 1450878041, "creation_date": 1450878041, "answer_id": 34436977, "question_id": 34436233, "link": "https://stackoverflow.com/questions/34436233/fused-multiply-add-and-default-rounding-modes/34436977#34436977", "title": "Fused multiply add and default rounding modes", "body": "<p>When you quoted that fused multiply-add is allowed, you left out the important condition \"unless pragma FP_CONTRACT is off\". Which is a newish feature in C (I think introduced in C99) and was made absolutely necessary by PowerPC, which <em>all</em> had fused multiply-add from the start - actually, x*y was equivalent to fma (x, y, 0) and x+y was equivalent to fma (1.0, x, y). </p>\n\n<p>FP_CONTRACT is what controls fused multiply/add, not FLT_EVAL_METHOD. Although if FLT_EVAL_METHOD allows higher precision, then contracting is always legal; just pretend that the operations were performed with very high precision and then rounded. </p>\n\n<p>The fma function is useful if you don't want the speed, but the precision. It will calculate the contracted result slowly but correctly even if it isn't available in hardware. And should be inlined if it is available in hardware. </p>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452970703, "post_id": 34817983, "comment_id": 57403355, "body": "What do you mean by &quot;Not supporting that means not adhering to the C standard&quot;? Incidentally, GCC seems to ignore <code>STDC FP_CONTRACT</code>. Instead it only uses <code>-ffp-contract</code>. Clang recognizes both."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452973128, "post_id": 34817983, "comment_id": 57404143, "body": "I mean that FP_CONTRACT is part of the C standard.  To ignore it is to not conform."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452974701, "post_id": 34817983, "comment_id": 57404665, "body": "Oh, I did you realized you were referring to GCC not supporting <code>FP_CONTRACT</code> (or any compiler which does not support it). Now I understand."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452974912, "post_id": 34817983, "comment_id": 57404724, "body": "So <a href=\"http://stackoverflow.com/questions/15933100/how-to-use-fused-multiply-add-fma-instructions-with-sse-avx/15933677#15933677\">this answer</a> is wrong then &quot;the compiler will violate strict IEEE floating-point behavior by fusing&quot;?   That&#39;s what through me off."}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452975213, "post_id": 34817983, "comment_id": 57404831, "body": "The standard defers to languages to set policy for this, so if an implementation doesn&#39;t adhere to the language standard, it&#39;s definitely at least violating the spirit of IEEE 754."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1452975661, "post_id": 34817983, "comment_id": 57404975, "body": "If GCC did recognize <code>FP_CONTRACT</code> it would be free to have <code>ON</code> as default so then the answer would be wrong. And in any case GCC supports <code>-ffp-contract</code> which effectively does the same thing.  Let me put it a different way.  Clang recognizes <code>FP_CONTRACT </code> and defaults to <code>OFF</code>. Would Clang violate IEEE if it defaulted to <code>FP_CONTRACT ON</code>?"}, {"owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1452975853, "post_id": 34817983, "comment_id": 57405039, "body": "The default can be either ON or OFF.  But you need to support the pragma to conform to the standard."}], "tags": [], "owner": {"reputation": 97003, "user_id": 142434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGcat.jpg?s=128&g=1", "display_name": "Stephen Canon", "link": "https://stackoverflow.com/users/142434/stephen-canon"}, "is_accepted": true, "score": 6, "last_activity_date": 1452884623, "creation_date": 1452884623, "answer_id": 34817983, "question_id": 34436233, "link": "https://stackoverflow.com/questions/34436233/fused-multiply-add-and-default-rounding-modes/34817983#34817983", "title": "Fused multiply add and default rounding modes", "body": "<p>It doesn't violate IEEE-754, because IEEE-754 defers to languages on this point:</p>\n\n<blockquote>\n  <p>A language standard should also define, and require implementations to provide, attributes that allow and disallow value-changing optimizations, separately or collectively, for a block. These optimizations might include, but are not limited to:</p>\n  \n  <p>...</p>\n  \n  <p>\u2015 Synthesis of a fusedMultiplyAdd operation from a multiplication and an addition.</p>\n</blockquote>\n\n<p>In standard C, the <code>STDC FP_CONTRACT</code> pragma provides the means to control this value-changing optimization.  So GCC is licensed to perform the fusion by default, so long as it allows you to disable the optimization by setting <code>STDC FP_CONTRACT OFF</code>.  Not supporting that means not adhering to the C standard.</p>\n"}], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1867, "favorite_count": 8, "accepted_answer_id": 34817983, "answer_count": 2, "score": 15, "last_activity_date": 1452884623, "creation_date": 1450875461, "last_edit_date": 1592644375, "question_id": 34436233, "link": "https://stackoverflow.com/questions/34436233/fused-multiply-add-and-default-rounding-modes", "title": "Fused multiply add and default rounding modes", "body": "<p>With GCC 5.3 the following code compield with <code>-O3 -fma</code></p>\n<pre><code>float mul_add(float a, float b, float c) {\n  return a*b + c;\n}\n</code></pre>\n<p>produces the following assembly</p>\n<pre><code>vfmadd132ss     %xmm1, %xmm2, %xmm0\nret\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/21650876/2542702\">I noticed GCC doing this with <code>-O3</code> already in GCC 4.8</a>.</p>\n<p>Clang 3.7 with <code>-O3 -mfma</code> produces</p>\n<pre><code>vmulss  %xmm1, %xmm0, %xmm0\nvaddss  %xmm2, %xmm0, %xmm0\nretq\n</code></pre>\n<p>but Clang 3.7 with <code>-Ofast -mfma</code> produces the same code as GCC with <code>-O3 fast</code>.</p>\n<p>I am surprised that GCC does with <code>-O3</code> because from <a href=\"https://stackoverflow.com/a/15933677/2542702\">this answer</a> it says</p>\n<blockquote>\n<p>The compiler is not allowed to fuse a separated add and multiply unless you allow for a relaxed floating-point model.</p>\n<p>This is because an FMA has only one rounding, while an ADD + MUL has two. So the compiler will violate strict IEEE floating-point behaviour by fusing.</p>\n</blockquote>\n<p>However, from <a href=\"http://en.cppreference.com/w/c/types/limits/FLT_EVAL_METHOD\" rel=\"noreferrer\">this link</a> it says</p>\n<blockquote>\n<p>Regardless of the value of FLT_EVAL_METHOD, any floating-point expression may be contracted, that is, calculated as if all intermediate results have infinite range and precision.</p>\n</blockquote>\n<p>So now I am confused and concerned.</p>\n<ol>\n<li>Is GCC justified in using FMA with <code>-O3</code>?</li>\n<li>Does fusing violate strict IEEE floating-point behaviour?</li>\n<li>If fusing does violate IEEE floating-point beahviour and since <a href=\"https://stackoverflow.com/questions/31181897/status-of-stdc-iec-559-with-modern-c-compilers\">GCC returns <code>__STDC_IEC_559__</code></a> isn't this a contradiction?</li>\n</ol>\n<p>Since FMA <a href=\"https://stackoverflow.com/questions/28630864/how-is-fma-implemented/30121217#30121217\">can be emulated in software</a> it seems to be there should be two compiler switches for FMA: one to tell the compiler to use FMA in calculations and one to tell the compiler that the hardware has FMA.</p>\n<hr />\n<p>Apprently this can be controlled with the option <code>-ffp-contract</code>. With GCC the default is <code>-ffp-contract=fast</code> and with Clang it's not. Other options such as <code>-ffp-contract=on</code> and <code>-ffp-contract=off</code> do no produce the FMA instruction.</p>\n<p>For example Clang 3.7 with <code>-O3 -mfma -ffp-contract=fast</code> produces <code>vfmadd132ss</code>.</p>\n<hr />\n<p>I checked some permutations of <code>#pragma STDC FP_CONTRACT</code> set to <code>ON</code> and <code>OFF</code> with <code>-ffp-contract</code> set to <code>on</code>, <code>off</code>, and <code>fast</code>. IN all cases I also used <code>-O3 -mfma</code>.</p>\n<p>With GCC the answer is simple. <code>#pragma STDC FP_CONTRACT</code> ON or OFF makes no difference. Only <code>-ffp-contract</code> matters.</p>\n<p>GCC it uses <code>fma</code> with</p>\n<ol>\n<li><code>-ffp-contract=fast</code> (default).</li>\n</ol>\n<p>With Clang it uses <code>fma</code></p>\n<ol>\n<li>with <code>-ffp-contract=fast</code>.</li>\n<li>with <code>-ffp-contract=on</code> (default) and <code>#pragma STDC FP_CONTRACT ON</code> (default is <code>OFF</code>).</li>\n</ol>\n<p>In other words with Clang you can get <code>fma</code> with <code>#pragma STDC FP_CONTRACT ON</code> (since <code>-ffp-contract=on</code> is the default) or with <code>-ffp-contract=fast</code>. <code>-ffast-math</code> (and hence <code>-Ofast</code>) set <code>-ffp-contract=fast</code>.</p>\n<hr />\n<p>I looked into MSVC and ICC.</p>\n<p>With MSVC it uses the fma instruction with <code>/O2 /arch:AVX2 /fp:fast</code>. With MSVC <code>/fp:precise</code> is the default.</p>\n<p>With ICC it uses fma with <code>-O3 -march=core-avx2</code> (acctually <code>-O1</code> is sufficient). This is because by default ICC uses <code>-fp-model fast</code>. But ICC uses fma even with <code>-fp-model precise</code>. To disable fma with ICC use <code>-fp-model strict</code> or <code>-no-fma</code>.</p>\n<p>So by default GCC and ICC use fma when fma is enabled (with <code>-mfma</code> for GCC/Clang or <code>-march=core-avx2</code> with ICC) but Clang and MSVC do not.</p>\n"}, {"tags": ["c", "pointers", "buffer-overflow", "heap-corruption"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450878380, "post_id": 34436155, "comment_id": 56614909, "body": "If you want memory on the stack, create a local (stack) variable."}, {"owner": {"reputation": 45, "user_id": 5708039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a4995ea834057f72a7e12c25e7307?s=128&d=identicon&r=PG&f=1", "display_name": "user5708039", "link": "https://stackoverflow.com/users/5708039/user5708039"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1450881955, "post_id": 34436155, "comment_id": 56616999, "body": "I have a stack variable and I have its address as well but if I replace <code>0x0804b008</code>  with the &quot;New Address&quot; then I get error.  I suspect <code>0x0804000a</code>  may be causing a problem. Because <code>0x0804000a</code>   corresponds to <code>char* bufferPtr;</code>  and <code>0x0804b008</code>  is the actual address in heap.  So if I am changing this address then  I also need to change <code>0x0804000a</code> , But I don&#39;t know with what value should I replace it with"}, {"owner": {"reputation": 1854, "user_id": 224935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/59h0o.jpg?s=128&g=1", "display_name": "Jay Elston", "link": "https://stackoverflow.com/users/224935/jay-elston"}, "edited": false, "score": 0, "creation_date": 1450924339, "post_id": 34436155, "comment_id": 56635048, "body": "What did you try when you got the segmentation fault? A little more code would be helpful. See <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask a good question</a>, and <a href=\"http://stackoverflow.com/help/mcve\">how to create a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5708039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a4995ea834057f72a7e12c25e7307?s=128&d=identicon&r=PG&f=1", "display_name": "user5708039", "link": "https://stackoverflow.com/users/5708039/user5708039"}, "edited": false, "score": 0, "creation_date": 1450876350, "post_id": 34436193, "comment_id": 56613774, "body": "The problem that I am facing is that memory is allocated at runtime, I forgot to mention in the code, which I have edited now, another 4 bytes are kept extra for memory allocation, so in this way I am not able to reach the stack even If I pass a large length argument."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 45, "user_id": 5708039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a4995ea834057f72a7e12c25e7307?s=128&d=identicon&r=PG&f=1", "display_name": "user5708039", "link": "https://stackoverflow.com/users/5708039/user5708039"}, "edited": false, "score": 1, "creation_date": 1450877712, "post_id": 34436193, "comment_id": 56614514, "body": "@user5708039 Isn&#39;t it lucky that this bug is much harder to exploit than you thought? I don&#39;t think you can smash the stack with these constraints. You could try to see if any interesting values reside in memory after the buffer and overwrite these, but I do not want to help you exploit a program."}, {"owner": {"reputation": 45, "user_id": 5708039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a4995ea834057f72a7e12c25e7307?s=128&d=identicon&r=PG&f=1", "display_name": "user5708039", "link": "https://stackoverflow.com/users/5708039/user5708039"}, "edited": false, "score": 0, "creation_date": 1450878454, "post_id": 34436193, "comment_id": 56614951, "body": "Can you help me to get an idea why 2 pointers are generated, in actual I have used malloc only once."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1450875337, "creation_date": 1450875337, "answer_id": 34436193, "question_id": 34436155, "link": "https://stackoverflow.com/questions/34436155/change-pointer-to-point-to-stack-address-instead-of-heap-address/34436193#34436193", "title": "Change pointer to point to stack address instead of heap address", "body": "<p>Memory allocated with <code>malloc()</code> is typically allocated on the heap. There isn't really a way to make a pointer you get from <code>malloc()</code> point to the stack. You could add a sufficiently large offset to reach the stack though.</p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 661526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1104b30026c34d94580715a79fed46?s=128&d=identicon&r=PG", "display_name": "csd", "link": "https://stackoverflow.com/users/661526/csd"}, "is_accepted": true, "score": 2, "last_activity_date": 1450910668, "creation_date": 1450910668, "answer_id": 34444855, "question_id": 34436155, "link": "https://stackoverflow.com/questions/34436155/change-pointer-to-point-to-stack-address-instead-of-heap-address/34444855#34444855", "title": "Change pointer to point to stack address instead of heap address", "body": "<p>if you just want to point to stack location, you don't need to allocate memory for it. For example</p>\n\n<pre><code>int myfunction(void)\n{\n    char buf_on_stack[32];\n    char *ptr_to_buf_on_stack;\n\n    ptr_to_buf_on_stack = buf_on_stack;\n    myotherfunction(buf_on_stack);\n}\n\nchar *global_ptr;\nvoid myotherfunction(char *buf_on_caller_stack)\n{\n    global_ptr = buf_on_caller_stack;\n}\n</code></pre>\n\n<p>will have both <em>global_ptr</em> and <em>ptr_to_buf_on_stack</em> pointing to a stack allocated variable (<em>buf_on_stack</em> in this example)</p>\n\n<p>Now if you want the caller's address, where that resides on the stack is architecture dependent. But gcc provides for some builtins that allow you to access it in case you're using gcc as the compiler. See here for details: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html</a></p>\n"}], "owner": {"reputation": 45, "user_id": 5708039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374a4995ea834057f72a7e12c25e7307?s=128&d=identicon&r=PG&f=1", "display_name": "user5708039", "link": "https://stackoverflow.com/users/5708039/user5708039"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 34444855, "answer_count": 2, "score": 2, "last_activity_date": 1450910668, "creation_date": 1450875168, "last_edit_date": 1450876182, "question_id": 34436155, "link": "https://stackoverflow.com/questions/34436155/change-pointer-to-point-to-stack-address-instead-of-heap-address", "title": "Change pointer to point to stack address instead of heap address", "body": "<p>In a <code>c</code> program I am trying to change the pointer address i.e. heap address to stack address so that I can reach return address from the stack. I am able to pass the desired address through the input.</p>\n\n<p>The code is using a pointer for memory allocation in heap using malloc.</p>\n\n<pre><code>char* bufferPtr;\nbufferPtr= (char*)malloc(strlen(arg2)+4);\n</code></pre>\n\n<p>In GDB values related to above code are <code>0x0804000a 0x0804b008</code></p>\n\n<pre><code>0xbfffcf80: 0x41414141  0x0804000a  0x0804b008  0x4ef9dd66\n</code></pre>\n\n<p>What these two addresses correspond to because I need to change this pointer to point to some  address(say <code>0xbfffcfd0</code>) on stack. So which of these two values I have to touch.</p>\n\n<p>I tried many possibilities but then I get the following error:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n__strcpy_sse2 () at ../sysdeps/i386/i686/multiarch/strcpy-sse2.S:2211\n</code></pre>\n"}, {"tags": ["c", "file", "microcontroller", "pic", "pic32"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450876098, "post_id": 34436068, "comment_id": 56613654, "body": "If you intend to read only one character, <code>int ch; ch = getc( p-&gt;filepointer); ... if (ch == EOF) break;</code> will probably be simpler. also, you should move the <code>G_RUNNING &amp;&amp; ephpubData-&gt;readedBytes &lt; 2520) </code> to the beginning of the condition, to avoid reading a character when you don&#39;t actually want it. (&quot;short-circuiting&quot; )"}, {"owner": {"reputation": 121, "user_id": 5235134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868433e23cd90495e394ddd0d60e9bff?s=128&d=identicon&r=PG&f=1", "display_name": "scuba", "link": "https://stackoverflow.com/users/5235134/scuba"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450876345, "post_id": 34436068, "comment_id": 56613771, "body": "Does it save the previous valid position in the file?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450876513, "post_id": 34436068, "comment_id": 56613847, "body": "getc() and fgetc() read exactly one character (if there is one) sequentially, so the next call will get the next character: no need to seek."}, {"owner": {"reputation": 121, "user_id": 5235134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868433e23cd90495e394ddd0d60e9bff?s=128&d=identicon&r=PG&f=1", "display_name": "scuba", "link": "https://stackoverflow.com/users/5235134/scuba"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450877066, "post_id": 34436068, "comment_id": 56614144, "body": "So when it reach the break sentence is there any guarantee that i will read from the latest position (and not from the beginning of the file again) the next time?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450881315, "post_id": 34436068, "comment_id": 56616632, "body": "Yes of course. (unless you close and reopen the file, in which case it would start again from the beginning)"}, {"owner": {"reputation": 121, "user_id": 5235134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868433e23cd90495e394ddd0d60e9bff?s=128&d=identicon&r=PG&f=1", "display_name": "scuba", "link": "https://stackoverflow.com/users/5235134/scuba"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1450882139, "post_id": 34436068, "comment_id": 56617128, "body": "That&#39;s the point. I need to save the exact position in the file to use it later."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1450889410, "post_id": 34436068, "comment_id": 56621592, "body": "&quot;.. but it gave me an error&quot;. You may want to <a href=\"https://stackoverflow.com/posts/34436068/edit\">edit</a> your post and tell us what the error message said. Unless you want to keep it a secret, of course, and you want us to guess."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 5235134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868433e23cd90495e394ddd0d60e9bff?s=128&d=identicon&r=PG&f=1", "display_name": "scuba", "link": "https://stackoverflow.com/users/5235134/scuba"}, "is_accepted": true, "score": 0, "last_activity_date": 1450884258, "creation_date": 1450884258, "answer_id": 34438796, "question_id": 34436068, "link": "https://stackoverflow.com/questions/34436068/read-from-a-certain-part-of-a-file-pic32mx/34438796#34438796", "title": "Read from a certain part of a file PIC32MX", "body": "<p>Sorry folks but I found the bug.</p>\n\n<p>Somewhere in the code I was doing:</p>\n\n<pre><code>    FSfseek( ephpubData-&gt;filetouart , 0 , SEEK_SET );\n</code></pre>\n\n<p>Which sets the reading position to 0.</p>\n"}], "owner": {"reputation": 121, "user_id": 5235134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868433e23cd90495e394ddd0d60e9bff?s=128&d=identicon&r=PG&f=1", "display_name": "scuba", "link": "https://stackoverflow.com/users/5235134/scuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 34438796, "answer_count": 1, "score": 0, "last_activity_date": 1450884258, "creation_date": 1450874875, "last_edit_date": 1450883435, "question_id": 34436068, "link": "https://stackoverflow.com/questions/34436068/read-from-a-certain-part-of-a-file-pic32mx", "title": "Read from a certain part of a file PIC32MX", "body": "<p>I am using PIC32MX in a design made by myself and everything is working perfectly.</p>\n\n<p>Now I am trying to implement a feature which is basically read from a file sequentially until I found a certain frame of characters, so I am doing:</p>\n\n<pre><code>    while( (readedBytes = FSfread((void *)&amp;c,sizeof(char),1,ephpubData-&gt;filetouart) != 0) &amp;&amp; G_RUNNING &amp;&amp; ephpubData-&gt;readedBytes &lt; 2520){\n    privData-&gt;txBuffer[privData-&gt;txBufferPos++] = c;\n    ephpubData-&gt;readedBytes = ephpubData-&gt;readedBytes + readedBytes;\n    if (privData-&gt;txBufferPos == TX_BUFFER_SIZE){\n        if (verifyDate (task) == 1){\n        *gpsState = GPS_STATE_VERIFY;\n        ephpubData-&gt;count++;\n        break;\n        }\n        FSfseek(ephpubData-&gt;filetouart , ephpubData-&gt;readedBytes , SEEK_SET);\n        privData-&gt;txBufferPos = 0;\n   }\n}\n</code></pre>\n\n<p>For the first time when it finds the frame (using the verifyDate function) everything is ok and it goes to break sentence.\nWhen it comes to read the second time in the while loop (after close/reopen the file and doing other things in the code) it goes to the first position again.\nSo I want to save the the latest position found until the break sentence. I already tried to use the seek function for every while iteration</p>\n\n<pre><code>    while( (readedBytes = FSfread((void *)&amp;c,sizeof(char),1,ephpubData-&gt;filetouart-&gt;seek) != 0) &amp;&amp; G_RUNNING &amp;&amp; ephpubData-&gt;readedBytes &lt; 2520)\n</code></pre>\n\n<p>but it gave me an error.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1450874953, "post_id": 34435886, "comment_id": 56612966, "body": "It did neither of the two things you expected. In fact, it did nothing at all."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1450875001, "post_id": 34435886, "comment_id": 56613001, "body": "@Spooler: The <code>scanf</code> function returns a value. You need to test it so you&#39;ll know if <code>scanf</code> successfully read (and assigned) a value. You should make a habit of checking return codes..."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1450875017, "post_id": 34435886, "comment_id": 56613012, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15228388/input-validation-using-scanf\">Input validation using scanf()</a>"}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875695, "post_id": 34435886, "comment_id": 56613433, "body": "The point of this question seems to have been entirely missed I don&#39;t want to know how to fix the problem I want to know what&#39;s actually going on here why does it give me the junk output it gives and why does it skip the second value ?"}], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450874722, "post_id": 34435989, "comment_id": 56612828, "body": "Not really sure what you&#39;re trying to say here. code works fine with any integer. The issue only arises when letters are used as input. All setting the vars to 0 did was change the output from 32765 to 0... which is interesting but doesn&#39;t help explain what&#39;s actually happening here ... or why the output 32765 was occurring and isn&#39;t now. If I go back and use a different letter the output is different B for example gives the output &quot;32767&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 1, "creation_date": 1450874892, "post_id": 34435989, "comment_id": 56612936, "body": "@Spooler <code>scanf(&quot;%d&quot;, &amp;v_1);</code> does not read <code>&quot;a&quot;</code> as it is not text that makes sense to interpret as an <code>int</code>.  That text remains in <code>stdin</code>.  <code>v_1</code> is not changed."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875097, "post_id": 34435989, "comment_id": 56613061, "body": "@Spooler 32765 is the sum of the numbers <i>before</i> scanf()` as well as after.  The numbers were not initialized.  Another run of the code may produce the same or difference results."}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875109, "post_id": 34435989, "comment_id": 56613069, "body": "So what is actually happening here, why is it giving me a different value for different letters what meaning does the value it&#39;s giving me actually have."}, {"owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 1, "creation_date": 1450875126, "post_id": 34435989, "comment_id": 56613078, "body": "@Spooler 32765 is just garbage value, you did not initialize the variable so it just got whatever left in that memory location. There is no magic there, if you reboot your machine and run your program again, it will surely get a different value than 32765."}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875258, "post_id": 34435989, "comment_id": 56613156, "body": "the value seems to correspond the letter entered and that&#39;s more or less where my confusion comes from, rebooting the machine made no difference a gives the same output each time as does b or c etc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450875396, "post_id": 34435989, "comment_id": 56613258, "body": "Entering non-numeric input for <code>scanf(&quot;%d&quot;, &amp;v_1);</code> like <code>&quot;a&quot;</code> or <code>&quot;b&quot;</code> <b>does not change</b> <code>v_1</code>."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 1, "creation_date": 1450875474, "post_id": 34435989, "comment_id": 56613304, "body": "@Spooler As verification, you can assign a given value to <code>v_1</code>, and see if it changes after inserting the wrong input. (It doesn&#39;t)."}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875599, "post_id": 34435989, "comment_id": 56613363, "body": "I totally get that it&#39;s not changing the value of v_1 but that doesn&#39;t answer my question about what is actually happening here, al right the output is junk data. Why is that junk data there what actually <i>is</i> it? Why does it cause the second input to be skipped ?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875680, "post_id": 34435989, "comment_id": 56613420, "body": "@Spooler: It&#39;s not a good use of your time to wonder about the value of an uninitialized variable. It&#39;s whatever (unknown) pattern of bits happened to be in the region of memory where the variable appears. Reading that value is a bug you need to fix and move on with your life."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875706, "post_id": 34435989, "comment_id": 56613443, "body": "@Spooler The 2nd input is skipped as this answers says &quot;Entering non-numeric input for <code>scanf(&quot;%d&quot;, &amp;v_1);</code> will neither consume that input ...&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450875935, "post_id": 34435989, "comment_id": 56613576, "body": "@Spooler Why is that junk data there what actually is it? --&gt; It could be anything.  It might be different each run, maybe also the same, Maybe a special value that aborts the program because code used an uninitialized value.  This all falls under <i>undefined Behavior</i> (UB).  In C, using uninitialized values has no specified result"}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450877054, "post_id": 34435989, "comment_id": 56614139, "body": "fair enough ... cost me a fair bit of rep but I&#39;m satisfied with this, cheers !"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1450876278, "last_edit_date": 1450876278, "creation_date": 1450874579, "answer_id": 34435989, "question_id": 34435886, "link": "https://stackoverflow.com/questions/34435886/un-expected-program-result-addition-of-letters/34435989#34435989", "title": "Un-expected program result (addition of letters)", "body": "<p>Check the result of <code>scanf(\"%d\", &amp;v_1);</code>.  If it is not 1, <code>v_1</code> is not updated.</p>\n\n<blockquote>\n  <p>Why does the second variable input get skipped ?</p>\n</blockquote>\n\n<p>Entering non-numeric input for <code>scanf(\"%d\", &amp;v_1);</code> will neither consume that input nor change <code>v_1</code>.   </p>\n\n<p>That is also why <code>scanf(\"%d\", &amp;v_2);</code> did not wait for input, it tried to use the same input and also failed.</p>\n\n<blockquote>\n  <p>Why am I getting unique junk data for each letter of the alphabet that I enter? i.e 32764 for every time I enter a and 32767 every-time I enter b ?</p>\n</blockquote>\n\n<p>Code is just getting the uninitialized values of <code>v_1, v_2</code>.  An optimizing compiler may not even \"create\" <code>v_1</code> until the <code>scanf(\"%d\", &amp;v_1);</code> and so the uninitialized <code>v_1</code> may be dependent on the text entered.  Since this is undefined behavior, the result may differ tomorrow or on another machine. </p>\n\n<p>Try the same thing with initialized values.</p>\n\n<pre><code>int v_1 = 0; /* first var */\nint v_2 = 0;\n</code></pre>\n"}], "owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34435989, "answer_count": 1, "score": -2, "last_activity_date": 1450876278, "creation_date": 1450874256, "last_edit_date": 1592644375, "question_id": 34435886, "link": "https://stackoverflow.com/questions/34435886/un-expected-program-result-addition-of-letters", "title": "Un-expected program result (addition of letters)", "body": "<p>In my recently begun quest to learn C one of the first things I have made is a very basic &quot;sum of 2 numbers program&quot;.</p>\n<pre><code>/* Basic addition prog */\n\n#include &lt;stdio.h&gt;\n\nint main(void) {\n\n  int v_1;    /* first var */\n  int v_2;    /* second var*/\n  int answer; /* Sum of 2 vars*/\n\n  printf(&quot;Simple addition calculator \\n&quot;);\n  printf(&quot;enter first number:  &quot;);\n  scanf(&quot;%d&quot;, &amp;v_1);\n  printf(&quot;enter second number:  &quot;);\n  scanf(&quot;%d&quot;, &amp;v_2);\n\n  answer = v_1 + v_2;\n\n  printf(&quot;%d\\n&quot;, answer);\n}\n</code></pre>\n<p>When I run this and enter 2 numbers everything runs fine and I will get the correct answer.\nThe output will look like:</p>\n<blockquote>\n<p>enter first number: 1</p>\n<p>enter second number: 1</p>\n<p>=2</p>\n</blockquote>\n<p>I decided I'd try and break it by using letters instead of numbers expecting at first that I'd input 2 letters and it'd either convert them into numeric values or would error out and crash.</p>\n<p>However this isn't what happens instead I get the following:</p>\n<blockquote>\n<p>enter first number: a</p>\n<p>enter second number: = 32765</p>\n</blockquote>\n<p>My question isn't so much &quot;how do I fix this&quot; as it is &quot;what is actually happening here?</p>\n<p><strong>EDIT</strong>\nAgain this question is more about trying to understand what is happening than trying to fix a problem. I'm not looking for &quot;how can this be avoided?&quot; I'm looking for &quot;what causes it and why?&quot;</p>\n<p>Tl;Dr\nI really can simplify what I want to know down to 2 questions.</p>\n<p>Why am I getting unique junk data for each letter of the alphabet that I enter?\ni.e 32764 for every time I enter a and 32767 every-time I enter b ?</p>\n<p>Why does the second variable input get skipped ?</p>\n"}, {"tags": ["c", "memory-leaks", "linked-list", "valgrind"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1450870253, "post_id": 34434690, "comment_id": 56610171, "body": "What do you think <code>curr-&gt;next = temp;                                     curr = temp;</code> will do?"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1450870410, "post_id": 34434690, "comment_id": 56610278, "body": "try using <code>curr-&gt;next = temp;                                     curr = curr-&gt;next</code> ; Also I have compiled it on my system, it&#39;s working fine. Which OS are you using?"}, {"owner": {"reputation": 3698, "user_id": 1848585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9JLaK.png?s=128&g=1", "display_name": "Brian Tiffin", "link": "https://stackoverflow.com/users/1848585/brian-tiffin"}, "edited": false, "score": 1, "creation_date": 1450872559, "post_id": 34434690, "comment_id": 56611551, "body": "You are setting temp to NULL then calling free().  Reverse the order.  There is that, and calling malloc inside a loop, and then freeing outside, so ... there are other control flow problems to work out at as well."}, {"owner": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 0, "creation_date": 1450873569, "post_id": 34434690, "comment_id": 56612160, "body": "This is just the createList function right? Do you have a freelist also? Are you calling it in main?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1450874693, "post_id": 34434690, "comment_id": 56612808, "body": "Use debug symbol to have the line number into your valgrind output. Use  <code>gcc -g</code>"}, {"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1450931876, "post_id": 34434690, "comment_id": 56636600, "body": "@rkm_Hodor_king: I too compiled the program on my system and it works fine. I am on Ubuntu 14.04."}, {"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "reply_to_user": {"reputation": 22021, "user_id": 236222, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cf4f3c341534395199d4dbe35a432f9d?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/236222/jay"}, "edited": false, "score": 0, "creation_date": 1450932058, "post_id": 34434690, "comment_id": 56636648, "body": "@Jay: Yes, there is a seperate function to free the list. My objective was to just create a list, traverse the list and print the data and in the end free the allocated memory. I thought pasting the entire code could be problematic as it is pretty long. Thanks all :)"}, {"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "reply_to_user": {"reputation": 3698, "user_id": 1848585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9JLaK.png?s=128&g=1", "display_name": "Brian Tiffin", "link": "https://stackoverflow.com/users/1848585/brian-tiffin"}, "edited": false, "score": 0, "creation_date": 1450933072, "post_id": 34434690, "comment_id": 56636871, "body": "@BrianTiffin: Thanks Brian :) valgrind gives same error without those two free() statements. I added it to check if not freeing the curr and temp pointers was the real issue. I have a seperate function to free elements of linked list. So i am really not sure why this issue is occuring."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "edited": false, "score": 0, "creation_date": 1450932191, "post_id": 34436545, "comment_id": 56636674, "body": "Thanks Tomislav :) I have a freeList() function which de-allocates memory which was previously allocated by malloc. Thats why this memory leak issue in createList() is a source of mystery to me."}], "tags": [], "owner": {"reputation": 68, "user_id": 5653519, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52M3o.png?s=128&g=1", "display_name": "Tomislav Kostic", "link": "https://stackoverflow.com/users/5653519/tomislav-kostic"}, "is_accepted": false, "score": 0, "last_activity_date": 1450877629, "last_edit_date": 1450877629, "creation_date": 1450876479, "answer_id": 34436545, "question_id": 34434690, "link": "https://stackoverflow.com/questions/34434690/memory-leak-in-createlist-function-linked-list/34436545#34436545", "title": "memory leak in CreateList function (linked list)", "body": "<p>First thing you should know is that for every allocation of memory(malloc()) you need to free that memory(free()),and that is exactly what valgrind returned as answer<a href=\"https://i.stack.imgur.com/iQESo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iQESo.png\" alt=\"enter image description here\"></a></p>\n\n<p>this lines of code would fix that</p>\n\n<pre><code>while(head!=NULL){\n    temp=head;\n    head=head-&gt;next;\n    free(temp);\n   }\n</code></pre>\n\n<p>But function createList() is supposed to create list not to delete it, so except for mental gymnastic I do not see purpose of creating list than immediately deleting. I recommend that you make new function removeList() that free memory which you call at the end of main function.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "edited": false, "score": 0, "creation_date": 1451017637, "post_id": 34447399, "comment_id": 56662112, "body": "Thanks a lot :) However, i found the error to be in the freeList() function that i had written. Since valgrind indicated source of memory leak as createList(), i didnt bother to check freeList() diligently. I fixed it and the memory leak error is gone. Thanks all for the suggestions and patience :)"}, {"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "edited": false, "score": 0, "creation_date": 1451019072, "post_id": 34447399, "comment_id": 56662294, "body": "@Tomislav Kostic;@All: I had placed a return statement within while loop of freeList() function which caused to free only a single node of the list. I removed the return statement which fixed the issue."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "edited": false, "score": 0, "creation_date": 1451052563, "post_id": 34447399, "comment_id": 56668824, "body": "@UmashankarVarma But you did not put code of <code>freeList()</code> function, so It&#39;s hard to get that :p"}, {"owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "edited": false, "score": 0, "creation_date": 1451126098, "post_id": 34447399, "comment_id": 56682518, "body": "Yes sir, my bad. Being a newbie, i did not think the error could be because of incorrect implementation of freeList(). Also, since this was going to be my first question on StackOverflow, i didnt want to make it longer by adding what i thought at the time to be &quot;Unnecessary&quot; code. Glad that i was proved wrong :)"}], "tags": [], "owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "is_accepted": false, "score": 1, "last_activity_date": 1450932688, "creation_date": 1450932688, "answer_id": 34447399, "question_id": 34434690, "link": "https://stackoverflow.com/questions/34434690/memory-leak-in-createlist-function-linked-list/34447399#34447399", "title": "memory leak in CreateList function (linked list)", "body": "<p>This line causes the problem</p>\n\n<pre><code>curr = temp = NULL;\n//curr-&gt;next = temp-&gt;next = NULL;\nfree(curr);free(temp);\n</code></pre>\n\n<p>Well here you are assigning <code>NULL</code> to struct node pointer <code>curr</code> and <code>temp</code>, henceforth the memory pointed by it goes garbage. you first free the memory using <code>free()</code> and the assign it to <code>NULL</code></p>\n\n<p><strong>Replace your above code with this</strong></p>\n\n<pre><code>free(curr);\nfree(temp);\ncurr = temp = NULL;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5710867, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJJugbkqP8A/AAAAAAAAAAI/AAAAAAAAACs/ZCssDM-3e_A/photo.jpg?sz=128", "display_name": "Umashankar Varma", "link": "https://stackoverflow.com/users/5710867/umashankar-varma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1450932688, "creation_date": 1450870115, "last_edit_date": 1450877331, "question_id": 34434690, "link": "https://stackoverflow.com/questions/34434690/memory-leak-in-createlist-function-linked-list", "title": "memory leak in CreateList function (linked list)", "body": "<p>I tried checking for memory leak using valgrind with below options:</p>\n\n<pre><code>valgrind --leak-check=full -v ./linkedlist2\n</code></pre>\n\n<p>Valgrind says there is a memory leak in <code>createList()</code> function, but I am not able to find the reason for it. Could you please help me to understand what is the reason for the memory leak?</p>\n\n<p>Relevant code:</p>\n\n<pre><code>struct node{\n    int data;\n    struct node* next;\n};\n\nstruct node* createList(int num)\n{\n    struct node* temp = NULL;\n    struct node* head = NULL;\n    struct node* curr = NULL;\n\n    int i = 0;\n    if(num &lt;= 0)\n    {\n        printf(\"Invalid size for createList\\n\");\n        return;\n    }\n\n    for(i=0;i&lt;num;i++)\n    {\n        temp = malloc(sizeof(struct node)); //allocate memory\n        temp-&gt;data = i+1;\n        temp-&gt;next = NULL;\n\n        if(i == 0)\n        {\n            head = temp;\n            curr = temp;\n        }else   {\n            curr-&gt;next = temp;\n            curr = temp;\n        }\n    }\n    curr = temp = NULL;\n    //curr-&gt;next = temp-&gt;next = NULL;\n    free(curr);free(temp);\n    return head;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8n2AR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8n2AR.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "string", "memcpy", "memcmp", "strchr"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 5, "creation_date": 1450869213, "post_id": 34434255, "comment_id": 56609541, "body": "<code>pose</code> is <b>not</b> a pointer, it <i>is</i> a <code>char</code>. If you want <code>pose</code> to be a pointer, you need to write <code>char *posb, *pose;</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1450869683, "post_id": 34434255, "comment_id": 56609846, "body": "This is not valid C, please submit compilable code."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1450869753, "post_id": 34434255, "comment_id": 56609887, "body": "Hi, welcome to stackoverflow. Please, post a minimal compilable version of the code: <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 4237237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36381d4962d1cbc2c568be70f8903f3?s=128&d=identicon&r=PG&f=1", "display_name": "Panagiotis Giannakis", "link": "https://stackoverflow.com/users/4237237/panagiotis-giannakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1450871909, "creation_date": 1450871909, "answer_id": 34435206, "question_id": 34434255, "link": "https://stackoverflow.com/questions/34434255/how-to-get-substring-in-c-with-strchr/34435206#34435206", "title": "how to get substring in c with strchr", "body": "<p>In order to get the second word, check this</p>\n\n<pre><code>char mystring[] = \"The quick brown fox jumps over the lazy dog\";\nchar word1[] = \"The\";\nchar * posb, pose;\nchar * word2;\nint b, e, n;\n\nn = memcmp(mystring, word1, sizeof(word1)-1);\nif (n == 0) printf(\"the first word is found!\\n\");\nposb = strchr(mystring, ' ');   // posb will be a pointer to the first character\n\nb = posb - mystring + 1;\n\nprintf(\"posb -&gt; %d\\n\", posb);\nprintf(\"b -&gt; %d\\n\", b);\nposb = strchr(posb + 1, ' ');   // pose will be a pointer to the second character\nprintf(\"calc e\\n\");\n\ne = posb - mystring + 1;\nprintf(\"e -&gt; %d\\n\", e);\n\nword2 = (char*)malloc(sizeof(char)*(e - b));\nmemcpy(word2, mystring + b, e - b);\nword2[e-b-1] = '\\0';\nprintf(\"%s:%i:%i:%i\\n\", word2, b, e, e - b);\nfree(word2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1454189943, "last_edit_date": 1454189943, "creation_date": 1454188678, "answer_id": 35107229, "question_id": 34434255, "link": "https://stackoverflow.com/questions/34434255/how-to-get-substring-in-c-with-strchr/35107229#35107229", "title": "how to get substring in c with strchr", "body": "<p>When searching a line for an occurrence of a word, you need a pointer to advance over each character in the line, a <em>search term</em>, comparison of the current character with the <em>first</em> character in <em>search term</em>, further comparison if there is a match, and then a set of delimiters to limit the comparisons as required to, for example, if searching for <code>'the'</code> only match <code>'the'</code> and not <code>'they'</code>, <code>'them'</code>, <code>'then'</code>, <code>'there'</code>, etc...</p>\n\n<p>You can use basic arithmetic to your advantage to insure you don't attempt to check lines shorter then the <em>search term</em> length, etc.. A short example (changing the initial <code>'The'</code> to <code>'the'</code> in your line for example purposes), you can do something similar to the following. Note, there are only basic optimization used int the search and it isn't intended to be an exhaustive example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main (int argc, char **argv)\n{\n    char line[] = \"the quick brown fox jumps over the lazy dog.\";\n    char *p = line;\n    char *sterm = argc &gt; 1 ? argv[1] : \"the\";\n    char *delim = \" \\t\\n\\'\\\".\";\n    size_t llen = strlen (line);\n    size_t count = 0, slen = strlen (sterm);\n\n    printf (\"\\n searching line for '%s'\\n\\n\", sterm);\n\n    for (;p &lt; (line + llen - slen + 1); p++) {\n\n        if (*p != *sterm)\n            continue;   /* char != first char in sterm  */\n        if (p &gt; line &amp;&amp; !strchr (delim, *(p - 1)))\n            continue;   /* prior char is not a delim    */\n        if (!strchr (delim, *(p + slen)))\n            continue;   /* next char is not a delim     */\n        if (strncmp (p, sterm, slen))\n            continue;   /* chars don't match sterm      */\n\n        printf (\"   match %2zu. '%s' at location %zu\\n\",\n                ++count, sterm, p - line);\n    }\n\n    printf (\"\\n total occurrences of '%s' in line : %zu\\n\\n\",\n            sterm, count);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Use/Output</strong></p>\n\n<pre><code>$ ./bin/searchline\n\n searching line for 'the'\n\n   match  1. 'the' at location 0\n   match  2. 'the' at location 31\n\n total occurrences of 'the' in line : 2\n\n$ ./bin/searchline fox\n\n searching line for 'fox'\n\n   match  1. 'fox' at location 16\n\n total occurrences of 'fox' in line : 1\n</code></pre>\n\n<p>Note the use of <code>strchr</code> with the delimiter string <code>delim</code> using the current character as the <code>char</code>. Look over the example and let me know if you have any questions. Your exact goal was a bit unclear from your question, so if I missed your intent, let me know.</p>\n\n<p><strong>Using Array Indexes Instead of Pointer</strong></p>\n\n<p>If you are more comfortable using character array indexes instead of pointers, you can always remove the pointer <code>p</code> and adjust the loop logic accordingly:</p>\n\n<pre><code>    for (i = 0; i &lt; (llen - slen + 1); i++) {\n\n        if (line[i] != *sterm)\n            continue;   /* char != first char in sterm  */\n        if (i &amp;&amp; !strchr (delim, line[i-1]))\n            continue;   /* prior char is not a delim    */\n        if (!strchr (delim, line[i+slen]))\n            continue;   /* next char is not a delim     */\n        if (strncmp (&amp;line[i], sterm, slen))\n            continue;   /* chars don't match sterm      */\n\n        printf (\"   match %2zu. '%s' at location %zu\\n\",\n                ++count, sterm, &amp;line[i] - line);\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5710670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e253005cf06cd9d71cd137ce2e3732d9?s=128&d=identicon&r=PG&f=1", "display_name": "spf", "link": "https://stackoverflow.com/users/5710670/spf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1968, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1454189943, "creation_date": 1450868701, "question_id": 34434255, "link": "https://stackoverflow.com/questions/34434255/how-to-get-substring-in-c-with-strchr", "title": "how to get substring in c with strchr", "body": "<p>I'm trying to fetch part of a string.<br>\nI have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar mystring[]=\"The quick brown fox jumps over the lazy dog\";\nchar word1[]=\"The\";\nchar * posb,pose;\nchar * word2;\nint b,e,n;\n\nn=memcmp(mystring, word1, sizeof(word1)-1);\nif (n==0) printf(\"the first word is found!\\n\");\nposb=strchr(mystring,' ');   // posb will be a pointer to the first character\nb=posb-mystring+1;\nprintf(\"posb -&gt; %d\\n\",posb);\nprintf(\"b -&gt; %d\\n\",b);\npose=strchr(mystring+b+1,' ');   // pose will be a pointer to the second character\nprintf(\"calc e\\n\");\ne=pose-sizeof(mystring)+1;\nprintf(\"pose -&gt; %s\\n\",pose);\nprintf(\"e -&gt; %d\\n\",e);\nword2 = (char*) malloc (sizeof(char)*(e-b));\nmemcpy(word2, posb, sizeof(word2));\nprintf(\"%s:%i:%i:%i\\n\",word2, b, e, e-b);\nfree (word2);\n</code></pre>\n\n<p>The problem is getting the second word and store it in word2. For this I try using <code>strchr</code> to locate the spaces. But the second time I use <code>strchr</code> I need an offset to find the second space. I tried the following:</p>\n\n<pre><code>pose=strchr(mystring+b+1,' ');\npose=strchr(&amp;mystring[b+1],' ');\n</code></pre>\n\n<p>The variables <code>b</code> and <code>e</code> should contain the positions of the space character in <code>mystring</code>. <code>word2</code> should contain <code>quick</code> eventually.<br>\nAnother solution would be to 'walk through' the string using a loop, but that would be cheating the <code>strchr</code> function.</p>\n"}, {"tags": ["c", "compilation", "cross-platform", "newlib"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1450869111, "post_id": 34433976, "comment_id": 56609483, "body": "It may be better to ask a question about implementing SSH on your particular target.  An implementation with minimal system dependencies (i.e. one that does not assume that it is on an POSIX platform) would advised.  However such a question may be off-topic for SO."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5690203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ded5d2028fb4cb859a69cc6157e8e0?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Iskratsch", "link": "https://stackoverflow.com/users/5690203/kai-iskratsch"}, "is_accepted": false, "score": 1, "last_activity_date": 1450868617, "creation_date": 1450868617, "answer_id": 34434226, "question_id": 34433976, "link": "https://stackoverflow.com/questions/34433976/is-there-a-difference-between-libc-newlib-and-uclibc-interface/34434226#34434226", "title": "Is there a difference between libc, newlib and uclibc interface?", "body": "<p>main difference is the size of the library, uclibc and newlib are focused on embedded systems so they want to be small and fast, while glibc is focused in full functionality.</p>\n\n<p>so basically there might not be all functions in the embedded versions, but the standard c interfaces should be same in all c libraries. the datatypes might be different, especially names of fields in a structures are often not standardized.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 8, "last_activity_date": 1450869035, "creation_date": 1450869035, "answer_id": 34434355, "question_id": 34433976, "link": "https://stackoverflow.com/questions/34433976/is-there-a-difference-between-libc-newlib-and-uclibc-interface/34434355#34434355", "title": "Is there a difference between libc, newlib and uclibc interface?", "body": "<p>GNU libc (glibc) includes ISO C, POSIX, System V, and XPG interfaces. uClibc provides ISO C, POSIX and System V, while Newlib provides only ISO C.</p>\n\n<p>While you might be able to port other libraries, they have specific OS dependencies.  Unless your OS itself is POSIX compliant, it will probably be an unrealistic prospect.</p>\n\n<p>Even with Newlib, it is your responsibility to implement the syscalls appropriately to support devices, file-systems and memory management.</p>\n"}], "owner": {"reputation": 1050, "user_id": 4720292, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab9634db96cbb4bc54c10cbe276ae411?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4720292/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3207, "favorite_count": 0, "accepted_answer_id": 34434355, "answer_count": 2, "score": 1, "last_activity_date": 1542354280, "creation_date": 1450867814, "question_id": 34433976, "link": "https://stackoverflow.com/questions/34433976/is-there-a-difference-between-libc-newlib-and-uclibc-interface", "title": "Is there a difference between libc, newlib and uclibc interface?", "body": "<p>I'm trying to cross-compile an SSH-server to port it on an home-made OS, using newlib (because the OS uses a lib which is based on newlib).</p>\n\n<p>I got some troubles with the RedHat Newlib, and I was wondering if I can do my porting with another library (for example uclibc) ? </p>\n\n<p>Is there differences between this 3 \"libc\" interfaces (libc, newlib, and uclibc) ?</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450869443, "post_id": 34433973, "comment_id": 56609695, "body": "This value seems very large. Please, show your code, see also this post <a href=\"http://stackoverflow.com/questions/19094626/process-memory-counters-is-giving-negative-values-about-memory-usage\" title=\"process memory counters is giving negative values about memory usage\">stackoverflow.com/questions/19094626/&hellip;</a>"}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450869797, "post_id": 34433973, "comment_id": 56609910, "body": "hi i took the complete code from here <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682050(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450870370, "post_id": 34433973, "comment_id": 56610247, "body": "you mean this printf( &quot;\\tWorkingSetSize: 0x%08X\\n&quot;, pmc.WorkingSetSize );?"}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450870644, "post_id": 34433973, "comment_id": 56610416, "body": "No i didn&#39;t use printf statement actually i was debugging so i got to know the value SIZE_T MemoryUsage = (info.WorkingSetSize); here i was getting memoryusage value as above mentioned."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450871181, "post_id": 34433973, "comment_id": 56610744, "body": "The field is in the struct (Windows Dev Center) PROCESS_MEMORY_COUNTERS and it returns the size in bytes as stated in the API page:  WorkingSetSize: The current working set size, in bytes. The problem lies somewhere else. The number should be in bytes. We can fully answer to your question only if you post the code that produce the above number."}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1450872053, "post_id": 34433973, "comment_id": 56611259, "body": "i added the code snippet above"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1450872218, "post_id": 34433973, "comment_id": 56611357, "body": "<i>Never</i> ignore the return value of a winapi function.  At a minimum you must assert() it.  Only way to find out that your code is borken, like it is here.  Initializing info.cb is not optional."}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "edited": false, "score": 0, "creation_date": 1450872925, "post_id": 34433973, "comment_id": 56611750, "body": "i don&#39;t think code is broken when i run this code i can see until PID 2088 values are same(big values) after that i am getting correct values  for other processes(resembles with taskmanager values )"}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1450874125, "post_id": 34433973, "comment_id": 56612465, "body": "I think what @HansPassant is saying is that GetProcessMemoryInfo function returns an error which you don&#39;t check"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1450875014, "post_id": 34433973, "comment_id": 56613010, "body": "14757395258967641292 is not an accidental value, it is 0xcccccccccccccccc in hex. The value used to initialize memory in the Debug build.  So you are looking at uninitialized data, GPMI failed.  Initializing info.cb really, <i>really</i> is not optional."}, {"owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "edited": false, "score": 0, "creation_date": 1450875524, "post_id": 34433973, "comment_id": 56613331, "body": "Sorry i got your point when i tried in release mode it started working i will make necessary changes"}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 1, "last_activity_date": 1450975116, "creation_date": 1450975116, "answer_id": 34455628, "question_id": 34433973, "link": "https://stackoverflow.com/questions/34433973/finding-memory-utilization-using-getprocessmemoryinfo/34455628#34455628", "title": "Finding Memory Utilization using GetProcessMemoryInfo", "body": "<p>Some windows processes require a lesser value than <code>PROCESS_QUERY_INFORMATION</code> (e.g. <code>PROCESS_QUERY_LIMITED_INFORMATION</code>).  </p>\n\n<p>The result is that OpenProcess may return NULL.  </p>\n\n<p>This is handled in your test, then however, you always call <code>GetProcessMemoryInfo</code>.  </p>\n\n<p>The result will be a failed call.  With un-initialized memory for <code>info</code> resulting in some random value (0xccccccccccccd000).</p>\n"}], "owner": {"reputation": 121, "user_id": 4314127, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/21714cd93517ace250a120267b3f96b7?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan", "link": "https://stackoverflow.com/users/4314127/darshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1450975116, "creation_date": 1450867813, "last_edit_date": 1450871937, "question_id": 34433973, "link": "https://stackoverflow.com/questions/34433973/finding-memory-utilization-using-getprocessmemoryinfo", "title": "Finding Memory Utilization using GetProcessMemoryInfo", "body": "<p>In my application i was trying to figure out memory utilization for a particular process in windows machine using below mentioned api.</p>\n\n<p>GetProcessMemoryInfo(hProcess, &amp;info, sizeof(info));\nwhen i checked the value of info.WorkingSetSize it was exactly 14757395258967641292.</p>\n\n<p>So i want to clear whether the returned value is in bytes(for naked eye this cannot be in bytes format)? if not how to convert it into bytes or kilobytes.</p>\n\n<p>void PrintProcessNameAndID( DWORD processID )</p>\n\n<p>{</p>\n\n<pre><code>TCHAR szProcessName[MAX_PATH] = TEXT(\"&lt;unknown&gt;\");\nPROCESS_MEMORY_COUNTERS info, info1, info2;\nSIZE_T MemoryUsage;\nSIZE_T one,two,three, four;\n// Get a handle to the process.\n\nHANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION |\n                               PROCESS_VM_READ,\n                               FALSE, processID );\n\n// Get the process name.\n\nif (NULL != hProcess )\n{\n    HMODULE hMod;\n    DWORD cbNeeded;\n\n    if ( EnumProcessModules( hProcess, &amp;hMod, sizeof(hMod), \n         &amp;cbNeeded) )\n    {\n        GetModuleBaseName( hProcess, hMod, szProcessName, \n                           sizeof(szProcessName)/sizeof(TCHAR) );\n    }\n}\n\n// Print the process name and identifier.\n//_tprintf( TEXT(\"%s  (PID: %u)\"), szProcessName, processID );\nGetProcessMemoryInfo(hProcess, &amp;info, sizeof(info));\nMemoryUsage = (info.WorkingSetSize);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 3, "creation_date": 1450867738, "post_id": 34433909, "comment_id": 56608614, "body": "Because fgets() returns a string in C (character array) and those need to be terminated with a \\0 character as per C standard."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450867742, "post_id": 34433909, "comment_id": 56608621, "body": "Because the <code>&#39;\\0&#39;</code> is required for string handling functions to operate. It marks the end of the array. Remember: you tell <code>fgets</code> the size of the buffer, but the string it reads may be shorter than that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1450868216, "post_id": 34433909, "comment_id": 56608922, "body": "read: &quot;I know that a null ends a string. But why does my string end with a null?&quot;"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1450868375, "post_id": 34433909, "comment_id": 56609002, "body": "@LightnessRacesinOrbit more like &quot;I know strings end with <code>\\0</code>, but why does fgets() also know that?&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1450868513, "post_id": 34433909, "comment_id": 56609082, "body": "@Magisch: &quot;f[ile] get s[tring]&quot; lol"}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450869825, "post_id": 34433909, "comment_id": 56609923, "body": "Ok, ok I get it I&#39;m a dunce. Making a fool of myself helped me better understand what was actually going on with both fgets() and strings in general with C so I&#39;m ok with that :P. Thanks for taking the time to respond !"}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1450867965, "post_id": 34433981, "comment_id": 56608769, "body": "<code>fgets</code> doesn&#39;t <i>get</i> a string, it <i>makes</i> a string."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1450868023, "post_id": 34433981, "comment_id": 56608801, "body": "It gets character(s) from a file, and makes them into a string. But I agree with your objection and reworded my answer."}, {"owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "edited": false, "score": 0, "creation_date": 1450868802, "post_id": 34433981, "comment_id": 56609277, "body": "Thanks for the concise explanation. That actually really makes sense and I feel kind of silly for not getting it &gt;.&lt;."}], "tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 5, "last_activity_date": 1450868031, "last_edit_date": 1450868031, "creation_date": 1450867828, "answer_id": 34433981, "question_id": 34433909, "link": "https://stackoverflow.com/questions/34433909/why-does-fgets-store-a-0-after-the-last-character-in-a-buffer/34433981#34433981", "title": "Why does fgets() store a \\0 after the last character in a buffer?", "body": "<p>As you already said, you are probably aware that <code>\\0</code> constitutes the end of all strings in C. As per the C standard, everything that is a string needs to be <code>\\0</code> terminated.</p>\n\n<p>Since <code>fgets()</code> makes a string, that string, of course, will be properly null terminated.</p>\n\n<p>Do note that for all string functions in C, any string you use or generate with them must be terminated with a <code>\\0</code> character.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1450868101, "post_id": 34434019, "comment_id": 56608848, "body": "Cite your sources, and use quote formatting to format quotes."}], "tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450868711, "last_edit_date": 1450868711, "creation_date": 1450867949, "answer_id": 34434019, "question_id": 34433909, "link": "https://stackoverflow.com/questions/34433909/why-does-fgets-store-a-0-after-the-last-character-in-a-buffer/34434019#34434019", "title": "Why does fgets() store a \\0 after the last character in a buffer?", "body": "<p>From <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1539.pdf\" rel=\"nofollow\">C standards</a>:</p>\n\n<blockquote>\n  <p>The fgets function <strong><em>reads at most one less than the number of\n  characters</em></strong> specified by n from the stream pointed to by stream into\n  the array pointed to by s. No additional characters are read after a\n  new-line character (which is retained) or after end-of-file. <strong><em>A null\n  character is written immediately after the last character read into\n  the array</em></strong>.</p>\n</blockquote>\n\n<p>This is to make sure that there is no buffer-overflow (characters/contents are not going beyond the provided storage) is in the created string.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1450868637, "creation_date": 1450868637, "answer_id": 34434236, "question_id": 34433909, "link": "https://stackoverflow.com/questions/34433909/why-does-fgets-store-a-0-after-the-last-character-in-a-buffer/34434236#34434236", "title": "Why does fgets() store a \\0 after the last character in a buffer?", "body": "<p>Because otherwise you do not know how long the resulting string is.</p>\n\n<p>One of the arguments to <code>fgets</code> is the maximum number of characters to read, but it's just that: a maximum. If you ask for 512 characters, but there are only 8 in the buffer, you will only get 8 characters &hellip; and a NULL in the 9th slot to demark the logical end of the C-string.</p>\n\n<p>Arguably, <code>fgets</code> could instead have been designed to return the number of characters read, but then for most purposes you'd only have to add the NULL byte yourself manually, and the function would have to find a way to signify an error other than returning a null pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1450869213, "creation_date": 1450869213, "answer_id": 34434414, "question_id": 34433909, "link": "https://stackoverflow.com/questions/34433909/why-does-fgets-store-a-0-after-the-last-character-in-a-buffer/34434414#34434414", "title": "Why does fgets() store a \\0 after the last character in a buffer?", "body": "<p>As all the people before me said, <code>fgets</code> reads bytes from a file and makes them into a standard C string, which is null-terminated. The termination with the <code>\\0</code> byte reflects the fact that this function is text-oriented.</p>\n\n<p>If you don't want to use null-termination for the data read from the file, it's not a string (not text), and also the end-of-line byte <code>\\n</code> has no significance. In this case, you can use <a href=\"http://en.cppreference.com/w/c/io/fread\" rel=\"nofollow\"><code>fread</code></a>.</p>\n\n<p>So C has two functions to read from file: <code>fgets</code> for text and <code>fread</code> for non-text (binary data).</p>\n\n<p>BTW if the input file has a genuine zero-valued byte, <code>fgets</code> will do an uncomfortable thing: it will continue reading until it reads an end-of-line byte <code>\\n</code>, and the output \"string\" will have two (or more) null-terminations. This doesn't make any sense as text, so it's another example of <code>fgets</code> being text-oriented and unsuitable for arbitrary data.</p>\n"}], "owner": {"reputation": 212, "user_id": 5241590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IILTj.jpg?s=128&g=1", "display_name": "Spooler", "link": "https://stackoverflow.com/users/5241590/spooler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "accepted_answer_id": 34433981, "answer_count": 4, "score": 0, "last_activity_date": 1450869213, "creation_date": 1450867612, "last_edit_date": 1495535242, "question_id": 34433909, "link": "https://stackoverflow.com/questions/34433909/why-does-fgets-store-a-0-after-the-last-character-in-a-buffer", "title": "Why does fgets() store a \\0 after the last character in a buffer?", "body": "<p>I've been doing abit of reading through the Linux programmer's manual looking up various functions and trying to get a deeper understanding of what they are/how they work.</p>\n\n<p>Looking at <code>fgets()</code> I read \"A '\\0' is stored after the last character in the buffer . </p>\n\n<p>I've read through <a href=\"https://stackoverflow.com/questions/14461695/what-does-0-stand-for\">What does \\0 stand for?</a> and have a pretty solid understanding of what <code>\\0</code> symbolizes (a null character right ?). But what I'm struggling to grasp is its relevance to <code>fgets()</code>, I don't really understand why it \"needs\" to end with a null character.</p>\n"}, {"tags": ["c", "linux-kernel"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1450869177, "post_id": 34433681, "comment_id": 56609522, "body": "Could you please put a link to the source code?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450873213, "post_id": 34433681, "comment_id": 56611932, "body": "Info about <code>__ARMEB__</code> may help divine the purpose.  Suspect some endian thing."}, {"owner": {"reputation": 1600, "user_id": 2335246, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/23f5a1946110781f69cd99570d4a1d7b?s=128&d=identicon&r=PG", "display_name": "GeekyJ", "link": "https://stackoverflow.com/users/2335246/geekyj"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1450968592, "post_id": 34433681, "comment_id": 56650492, "body": "@haccks Link has been added for source code."}], "answers": [{"comments": [{"owner": {"reputation": 1600, "user_id": 2335246, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/23f5a1946110781f69cd99570d4a1d7b?s=128&d=identicon&r=PG", "display_name": "GeekyJ", "link": "https://stackoverflow.com/users/2335246/geekyj"}, "edited": false, "score": 1, "creation_date": 1450867810, "post_id": 34433852, "comment_id": 56608674, "body": "&quot;Used carefully, a union within a struct can be used to produce a collection that can handle a whole family of slightly varied data types, such as the motorbikes and apples.&quot; I am not understanding this, Same can be achieved through only union. Why union inside structure? can you give some example?"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 2, "creation_date": 1450868207, "post_id": 34433852, "comment_id": 56608916, "body": "I don&#39;t see how the exemple answers the question: why wrapping the union in a struct, if the struct only contains the union ?"}, {"owner": {"reputation": 1600, "user_id": 2335246, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/23f5a1946110781f69cd99570d4a1d7b?s=128&d=identicon&r=PG", "display_name": "GeekyJ", "link": "https://stackoverflow.com/users/2335246/geekyj"}, "edited": false, "score": 2, "creation_date": 1450868267, "post_id": 34433852, "comment_id": 56608952, "body": "Example you have given is representing your point of view, you are correct, but my question is different, In the code snippet in question which is from Linux kernel, Why do we need to wrap up whole union inside structure instead we can typedef union and use it, What is the purpose of wrapper here?"}, {"owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "edited": false, "score": 0, "creation_date": 1450900339, "post_id": 34433852, "comment_id": 56627167, "body": "It is just a design choice whether to put union inside the structure or a structure inside a union."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1450912419, "post_id": 34433852, "comment_id": 56632154, "body": "@Vineet1982: Choice is between <b>union inside structure</b> or <b>union alone</b>. The second is obviousely shorter, but the first is actually used."}, {"owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "edited": false, "score": 0, "creation_date": 1450947287, "post_id": 34433852, "comment_id": 56641501, "body": "Its the choice of developer how to use things"}], "tags": [], "owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "is_accepted": false, "score": 0, "last_activity_date": 1450868001, "last_edit_date": 1592644375, "creation_date": 1450867381, "answer_id": 34433852, "question_id": 34433681, "link": "https://stackoverflow.com/questions/34433681/what-is-the-purpose-of-union-inside-structure-here/34433852#34433852", "title": "What is the purpose of union inside structure here?", "body": "<p>If I wanted to have several structs which were similar to each other but not identical - that had many common elements but then varied. An example might be a range of products for sale at a shop, where some of the items are sold in int units (I'll sell you one or two motorbikes, but not 1.5) and others are sold in float units (kgs of apples, for example)?</p>\n<p>A Union allows you to define a number of different variables, of different types and sizes, in parallel - i.e. sharing the same memory - within a collection.</p>\n<p>Used carefully, a union within a struct can be used to produce a collection that can handle a whole family of slightly varied data types, such as the motorbikes and apples.</p>\n<p>C's unions let you define a block of memory which has two (or more) names associated with it so that - when combined with structs - you can produce a whole family of defined variable types based on a common core, but then varying in parts where appropriate.</p>\n<h2>Edit: Adding Example</h2>\n<pre><code>typedef union {\n    int units;\n    float kgs;\n} amount ;\n\ntypedef struct {\n    char selling[15];\n    float unitprice;\n    int unittype;\n    amount howmuch;\n} product;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2373, "user_id": 407588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QCGmX.png?s=128&g=1", "display_name": "stochastic", "link": "https://stackoverflow.com/users/407588/stochastic"}, "edited": false, "score": 1, "creation_date": 1450868810, "post_id": 34434114, "comment_id": 56609282, "body": "Even if there is a deeper compatibility reason, having a struct at the top level to prevent inadvertent addition of fields to the union seems to be a good practice.  That may be reason enough."}], "tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1450868220, "creation_date": 1450868220, "answer_id": 34434114, "question_id": 34433681, "link": "https://stackoverflow.com/questions/34433681/what-is-the-purpose-of-union-inside-structure-here/34434114#34434114", "title": "What is the purpose of union inside structure here?", "body": "<p>Linux Kernel is a work-in-progress, rather than \"see-how-it-should-be-done\" thing.</p>\n\n<p>I believe there's no true reason behind this, other than the habit to pack everything in <code>struct</code>'s on the top level. If you used to think of \"everything is a <code>struct</code>\", you may accidently fail by adding some new field to the actual <code>union</code>, not to the <code>struct</code>, as you expected.</p>\n"}], "owner": {"reputation": 1600, "user_id": 2335246, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/23f5a1946110781f69cd99570d4a1d7b?s=128&d=identicon&r=PG", "display_name": "GeekyJ", "link": "https://stackoverflow.com/users/2335246/geekyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1450968553, "creation_date": 1450866828, "last_edit_date": 1450968553, "question_id": 34433681, "link": "https://stackoverflow.com/questions/34433681/what-is-the-purpose-of-union-inside-structure-here", "title": "What is the purpose of union inside structure here?", "body": "<pre><code>typedef struct {\n    union {\n        u32 slock;\n        struct __raw_tickets {\n#ifdef __ARMEB__\n            u16 next;\n            u16 owner;\n#else\n            u16 owner;\n            u16 next;\n#endif\n        } tickets;\n    };                                                                                                                                  \n} arch_spinlock_t;\n</code></pre>\n\n<p>Above is the code snippet from Linux kernel,What is the purpose of putting whole union inside structure, Why not simply union then?</p>\n\n<p>This is the <a href=\"http://lxr.free-electrons.com/source/arch/arm/include/asm/spinlock_types.h#L23\" rel=\"nofollow\">link</a> to source code.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1450867098, "post_id": 34433487, "comment_id": 56608257, "body": "This would be why you should avoid non-standard functions for trivial things."}, {"owner": {"reputation": 11, "user_id": 5710693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50918cce8ecf381fc9318ee89e168ed?s=128&d=identicon&r=PG&f=1", "display_name": "user5710693", "link": "https://stackoverflow.com/users/5710693/user5710693"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450868910, "post_id": 34433487, "comment_id": 56609347, "body": "Thanks for the reply. Since the OLDNAMES.lib is a system library , I don&#39;t have the source code with me. The file &#39;OLDNAMES.lib &#39; is present under C:\\Progra~1\\Micros~1\\Lib\\AMD64\\. So in this case what to do ?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5710693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50918cce8ecf381fc9318ee89e168ed?s=128&d=identicon&r=PG&f=1", "display_name": "user5710693", "link": "https://stackoverflow.com/users/5710693/user5710693"}, "edited": false, "score": 1, "creation_date": 1450868731, "post_id": 34433625, "comment_id": 56609224, "body": "Thanks for the reply. Since the OLDNAMES.lib is a system library , I don&#39;t have the source code with me. The file &#39;OLDNAMES.lib &#39; is present under C:\\Progra~1\\Micros~1\\Lib\\AMD64\\. So in this case what to do ?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1450866962, "last_edit_date": 1450866962, "creation_date": 1450866643, "answer_id": 34433625, "question_id": 34433487, "link": "https://stackoverflow.com/questions/34433487/unresolved-external-symbol-strcmpi-on-windows/34433625#34433625", "title": "Unresolved External Symbol &#39;strcmpi&#39; on Windows", "body": "<p>Use <code>stricmp</code> instead which is an extremely common extension to <code>&lt;string.h&gt;</code>, but note that it also is <strong>not</strong> a standard C function. Failing that, try <code>_stricmp</code>.</p>\n\n<p>You can <code>#DEFINE</code> <code>strcmpi</code> to <code>stricmp</code> which is quite a common thing to do when targeting multiple platforms.</p>\n\n<p>I tend to use <code>_stricmp</code> in my source code, and <code>#DEFINE</code> the relevant function to it in multiplatform headers.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1450871689, "creation_date": 1450871689, "answer_id": 34435154, "question_id": 34433487, "link": "https://stackoverflow.com/questions/34433487/unresolved-external-symbol-strcmpi-on-windows/34435154#34435154", "title": "Unresolved External Symbol &#39;strcmpi&#39; on Windows", "body": "<p>If you know what <code>strcmpi</code> does, you could implement it yourself and link the result into your program. If it does what I think it does, simply writing</p>\n\n<pre><code>extern int\nstrcmpi(const char *a, const char *b)\n{\n    return _stricmp(a, b);\n}\n</code></pre>\n\n<p>should do the trick on Windows.</p>\n"}], "owner": {"reputation": 11, "user_id": 5710693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50918cce8ecf381fc9318ee89e168ed?s=128&d=identicon&r=PG&f=1", "display_name": "user5710693", "link": "https://stackoverflow.com/users/5710693/user5710693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1450871689, "creation_date": 1450866188, "last_edit_date": 1450866520, "question_id": 34433487, "link": "https://stackoverflow.com/questions/34433487/unresolved-external-symbol-strcmpi-on-windows", "title": "Unresolved External Symbol &#39;strcmpi&#39; on Windows", "body": "<p>While compiling my C project on Windows-10 platform using the 'icl' compiler, I am getting the below error:</p>\n\n<blockquote>\n  <p>OLDNAMES.lib(strcmpi.obj) : error LNK2001: unresolved external symbol\n  strcmpi OLDNAMES.lib(strcmpi.obj) : error LNK2001: unresolved external\n  symbol _strcmpi</p>\n</blockquote>\n\n<p>Please help me to solve this issue. The value of LIB environment variable is:</p>\n\n<pre><code>echo %LIB%\n</code></pre>\n\n<blockquote>\n  <p>C:\\Progra~2\\Intel\\\\compiler\\lib;C:\\Progra~1\\Micros~1\\Lib\\AMD64\\atlmfc;C:\\Progra~1\\Micros~1\\Lib\\AMD64\\;C:\\Progra~1\\Micros~1\\Lib\\;C:\\Progra~2\\Intel\\\\compiler\\lib\\intel64;</p>\n</blockquote>\n\n<p>I am not sure which Library I have missed here.</p>\n"}, {"tags": ["android", "c++", "c", "linux", "ptrace"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1450871564, "post_id": 34433451, "comment_id": 56610964, "body": "Exactly what are you trying to achieve? A complete dump of the process can be done by reading the &quot;file&quot; <code>&#47;proc&#47;pid&#47;mem</code>"}, {"owner": {"reputation": 55, "user_id": 3908133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8abc7303b4dceb0b966ba38d41baebf1?s=128&d=identicon&r=PG&f=1", "display_name": "micha", "link": "https://stackoverflow.com/users/3908133/micha"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1451388830, "post_id": 34433451, "comment_id": 56761261, "body": "I want a dump of all writeable memory pages. I achieved now a dump of the heap using <i>open</i>, <i>lseek</i> and <i>read</i>. But when I try to access the other memory regions like stack I still get an I/O error."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3908133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8abc7303b4dceb0b966ba38d41baebf1?s=128&d=identicon&r=PG&f=1", "display_name": "micha", "link": "https://stackoverflow.com/users/3908133/micha"}, "edited": false, "score": 0, "creation_date": 1451388362, "post_id": 34438307, "comment_id": 56761011, "body": "<i>process_vm_readv</i> is not available in Android -&gt; results in <i>error: undefined reference to &#39;process_vm_readv&#39;</i> But thanks for your advice I managed it now to read the heap from <i>/proc/pid/mem</i> using open, lseek and read."}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": true, "score": 1, "last_activity_date": 1450882539, "creation_date": 1450882539, "answer_id": 34438307, "question_id": 34433451, "link": "https://stackoverflow.com/questions/34433451/linux-ptrace-read-whole-memory-page/34438307#34438307", "title": "Linux ptrace() read whole memory page", "body": "<p>There are two possible ways to read memory more efficiently from another process.</p>\n\n<p>If your kernel supports it (I have no idea about Android kernels) you can use <code>process_vm_readv</code>.</p>\n\n<p>Another way is to open the <code>/proc/.../mem</code> file of the target process and read from it.  gdb uses this method, though I think only because <code>process_vm_readv</code> is \"new\" (in gdb's terms).</p>\n"}], "owner": {"reputation": 55, "user_id": 3908133, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8abc7303b4dceb0b966ba38d41baebf1?s=128&d=identicon&r=PG&f=1", "display_name": "micha", "link": "https://stackoverflow.com/users/3908133/micha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 1, "accepted_answer_id": 34438307, "answer_count": 1, "score": 0, "last_activity_date": 1450882539, "creation_date": 1450866106, "last_edit_date": 1450870219, "question_id": 34433451, "link": "https://stackoverflow.com/questions/34433451/linux-ptrace-read-whole-memory-page", "title": "Linux ptrace() read whole memory page", "body": "<p>Hello I try to dump the memory of a process in Android/Linux. Right now I read the memory maps to get a memory region's address space and then I read every single word like this:</p>\n\n<pre><code>ptrace(PTRACE_ATTACH, pid, NULL, NULL);\nwait(NULL);\n\nread each word in this memory region:\nword = ptrace(PTRACE_PEEKDATA, pid, (void *)address, NULL);\n\nptrace(PTRACE_CONT, pid, NULL, NULL);\nptrace(PTRACE_DETACH, pid, NULL, NULL);\n</code></pre>\n\n<p>Isn't there a more efficient solution reading directly a whole memory page by specifying the start/end of a memory address space to read?</p>\n"}, {"tags": ["c++", "c", "gif"], "comments": [{"owner": {"reputation": 6651, "user_id": 996815, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2058dcdbff2ea9ea04aa1b42217a1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vertexwahn", "link": "https://stackoverflow.com/users/996815/vertexwahn"}, "edited": false, "score": 0, "creation_date": 1450867182, "post_id": 34433330, "comment_id": 56608314, "body": "What is your expected output? (i / 36) * 0x33; looks like random noise as can be seen in your image."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 1069041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42478d52d104580a1ae20f973975c2?s=128&d=identicon&r=PG", "display_name": "g.Eis", "link": "https://stackoverflow.com/users/1069041/g-eis"}, "edited": false, "score": 0, "creation_date": 1450945067, "post_id": 34434419, "comment_id": 56640659, "body": "tks, &quot;wb&quot; is right. now I need to know how to put my pixel into gif. gifsicle.c has too many function, and i havnt found where to convert my image into gif_stream."}], "tags": [], "owner": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "is_accepted": true, "score": 0, "last_activity_date": 1450869226, "creation_date": 1450869226, "answer_id": 34434419, "question_id": 34433330, "link": "https://stackoverflow.com/questions/34433330/any-example-to-use-giflossy-library-create-gif-file-in-c-c/34434419#34434419", "title": "Any example to use giflossy library create gif file in c/c++", "body": "<p>Even without a simple example, the github link you provided does contain all the <a href=\"https://github.com/pornel/giflossy/blob/master/src/gifsicle.c#L893\" rel=\"nofollow\">example code</a> you should need to get this working.</p>\n\n<p>I would start by changing </p>\n\n<pre><code>FILE* f = fopen(\"test.gif\", \"w\");\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>FILE* f = fopen(\"test.gif\", \"wb\");\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 1069041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42478d52d104580a1ae20f973975c2?s=128&d=identicon&r=PG", "display_name": "g.Eis", "link": "https://stackoverflow.com/users/1069041/g-eis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 34434419, "answer_count": 1, "score": 0, "last_activity_date": 1450869226, "creation_date": 1450865711, "question_id": 34433330, "link": "https://stackoverflow.com/questions/34433330/any-example-to-use-giflossy-library-create-gif-file-in-c-c", "title": "Any example to use giflossy library create gif file in c/c++", "body": "<p>My current attempt:</p>\n\n<pre><code>Gif_Stream* gfs = Gif_NewStream();\ngfs-&gt;screen_width = 640;\ngfs-&gt;screen_height = 480;\n\nGif_Colormap *cm = Gif_NewFullColormap(216, 256);\nGif_Color *col = cm-&gt;col;\nfor (int i = 0; i &lt; 216; i++) {\n    col[i].gfc_red = (i / 36) * 0x33;\n    col[i].gfc_green = ((i / 6) % 6) * 0x33;\n    col[i].gfc_blue = (i % 6) * 0x33;\n}\ngfs-&gt;global = cm;\n\n// load image\n...\nfor (int i = 0; i &lt; n; ++i)\n{\n    Gif_Image* gfi = Gif_NewImage();\n\n    // set width/height\n    gfi-&gt;width = imgW;\n    gfi-&gt;height = imgH;\n\n    Gif_SetUncompressedImage(gfi, pixelPtr, Gif_Free, 0);\n\n    Gif_AddImage(gfs, gfi);\n}\n\nFILE* f = fopen(\"test.gif\", \"w\");\nGif_WriteFile(gfs, f);\nfclose(f);\n</code></pre>\n\n<p>result (Just a screen shot): <a href=\"https://i.stack.imgur.com/oIJbw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oIJbw.png\" alt=\"enter image description here\"></a>just get some error color in top.\nThere is no simple example in <a href=\"https://github.com/pornel/giflossy\" rel=\"nofollow noreferrer\">https://github.com/pornel/giflossy</a>.</p>\n"}, {"tags": ["android", "c", "video"], "answers": [{"tags": [], "owner": {"reputation": 10666, "user_id": 3782392, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/yd8sw.jpg?s=128&g=1", "display_name": "bozzmob", "link": "https://stackoverflow.com/users/3782392/bozzmob"}, "is_accepted": false, "score": 1, "last_activity_date": 1450866201, "creation_date": 1450866201, "answer_id": 34433496, "question_id": 34433329, "link": "https://stackoverflow.com/questions/34433329/send-video-file-to-save-on-android-phone-using-c-program/34433496#34433496", "title": "Send video file to save on android phone using C program", "body": "<p>Here is one article which can help you to achieve what you are looking for-</p>\n\n<p><a href=\"http://www.drdobbs.com/jvm/java-and-c-socket-communication/222900697\" rel=\"nofollow\">Java and C socket communication</a></p>\n\n<p>I have worked on it once(long time back). They are using a Java client here, you can use your Android app. It's a brilliant article.</p>\n"}], "owner": {"reputation": 75, "user_id": 3731565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3a0f3ca3b238c1d182abd2a5f679aa63?s=128&d=identicon&r=PG&f=1", "display_name": "user3731565", "link": "https://stackoverflow.com/users/3731565/user3731565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1450880104, "answer_count": 1, "score": 0, "last_activity_date": 1450866201, "creation_date": 1450865708, "question_id": 34433329, "link": "https://stackoverflow.com/questions/34433329/send-video-file-to-save-on-android-phone-using-c-program", "closed_reason": "Needs more focus", "title": "Send video file to save on android phone using C program", "body": "<p>Using C program, I want to send a video file to my android mobile and save (or download) it on the phone.</p>\n\n<p>Right now I have made an android app from which I can send messages/text to C server. (using socket programming)\nAnd i want my C server to send video back to my android phone(client)  when it receive the message \"send video\"</p>\n\n<p>Guide me please. How can I achieve this ? Any related links would be appreciated...\nPlease help!</p>\n"}, {"tags": ["c", "dmalloc"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451035515, "post_id": 34433123, "comment_id": 56665150, "body": "The code contains undefined behaviour. even accessing <code>p[50]</code> is beyond the available offset because in C, array offsets start at 0 and continue to size of array  -1.   Undefined behaviour can lead to a seg fault event!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451038014, "post_id": 34433123, "comment_id": 56665629, "body": "you might want to read &lt;<a href=\"http://dmalloc.com/docs/5.3.0/online/dmalloc_23.html\" rel=\"nofollow noreferrer\">dmalloc.com/docs/5.3.0/online/dmalloc_23.html</a>&gt; and its&#39; related pages"}, {"owner": {"reputation": 11, "user_id": 5710551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edc85a45538d7457f2adba580551658?s=128&d=identicon&r=PG&f=1", "display_name": "venkatesh", "link": "https://stackoverflow.com/users/5710551/venkatesh"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451294835, "post_id": 34433123, "comment_id": 56723342, "body": "ya, intentionally , I am writing data into p[50] so that dmalloc gives me warning regarding the same. But my question is, even though it is giving the warning for me, when i by define HAVE_VPRINTF , HAVE_SNPRINTF and  HAVE_VSNPRINTF as 0, it is printing error messages but they are all unformatted. But if I make HAVE_VPRINTF , HAVE_SNPRINTF and  HAVE_VSNPRINTF as 1 , then dmalloc just prints its header info with formatted strings but not displays error details."}], "owner": {"reputation": 11, "user_id": 5710551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edc85a45538d7457f2adba580551658?s=128&d=identicon&r=PG&f=1", "display_name": "venkatesh", "link": "https://stackoverflow.com/users/5710551/venkatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450865160, "creation_date": 1450865160, "question_id": 34433123, "link": "https://stackoverflow.com/questions/34433123/dmalloc-log-is-not-formatting-stack-addresses", "title": "dmalloc log is not formatting stack addresses", "body": "<p>By building dmalloc lib with following setting in conf.h file </p>\n\n<pre><code>#define HAVE_VPRINTF 0\n#define HAVE_SNPRINTF 0\n#define HAVE_VSNPRINTF 0\n</code></pre>\n\n<p>and run my code after linking , log file content have unformatting address info to function names and line numbers.</p>\n\n<pre><code>Unformatted log o/p is given below.\n\n        Venkatesh:~/Dmalloc/dmalloc-5.5.2$ cat logfile\n        %ld: %lu: Dmalloc version '%s' from '%s'\n        %ld: %lu: flags = %#x, logfile '%s'\n        %ld: %lu: interval = %lu, addr = %#lx, seen # = %ld, limit = %ld\n        %ld: %lu: starting time = %s\n        %ld: %lu: process pid = %ld\n        %ld: %lu:   error details: %s\n        %ld: %lu:   pointer '%#lx' from '%s' prev access '%s'\n        %ld: %lu:   dump of proper fence-top bytes: '%.*s'\n        %ld: %lu:   dump of '%#lx'%+d: '%.*s'\n        %ld: %lu:   next pointer '%#lx' (size %u) may have run under from '%s'\n        %ld: %lu: ERROR: %s: %s (err %d)\n\n\nIf I define HAVE_VSNPRINTF to 1, then I log file has only dmalloc log header, no information about errors as given below.\n\n        Venkatesh:~/Dmalloc/dmalloc-5.5.2$ cat logfile\n        1450864250: 5: Dmalloc version '5.5.2' from 'http://dmalloc.com/'\n        1450864250: 11: flags = 0x4f4e503, logfile 'logfile'\n        1450864250: 17: interval = 100, addr = 0, seen # = 0, limit = 0\n        1450864250: 25: starting time = 1450864250\n        1450864250: 31: process pid = 10270\n</code></pre>\n\n<p>My test code is as below.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    #ifdef DMALLOC\n    #include \"dmalloc.h\"\n    #endif\n\n    int main ()\n    {\n            char *p;\n            p = malloc (50);\n            p[51] = 'c'; //Writing character beyond allocated range\n            return 0;\n    }\n</code></pre>\n\n<p>Dmalloc optins I am using is :\n        DMALLOC_OPTIONS=debug=0x4f4ed03,inter=100,log=logfile</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 4, "creation_date": 1450864164, "post_id": 34432766, "comment_id": 56606428, "body": "What are &quot;secondary constants&quot;?"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1450864352, "post_id": 34432766, "comment_id": 56606515, "body": "@zenith: <a href=\"http://www.cprogrambank.com/ctutch2t2\" rel=\"nofollow noreferrer\">cprogrambank.com/ctutch2t2</a> and <a href=\"http://r4r.co.in/c/basic_tutorials/06/CONSTANTS_VARIABLES.shtml\" rel=\"nofollow noreferrer\">r4r.co.in/c/basic_tutorials/06/CONSTANTS_VARIABLES.shtml</a>"}, {"owner": {"reputation": 11, "user_id": 5642769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WKomfsvyLW0/AAAAAAAAAAI/AAAAAAAADeQ/x-21_h5kml8/photo.jpg?sz=128", "display_name": "Harman Randhawa", "link": "https://stackoverflow.com/users/5642769/harman-randhawa"}, "edited": false, "score": 0, "creation_date": 1450864371, "post_id": 34432766, "comment_id": 56606522, "body": "This is what I am also looking for@zenith"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 5, "creation_date": 1450864526, "post_id": 34432766, "comment_id": 56606642, "body": "I think that categorisation is as arbitrary as it is unhelpful. The C standard doesn&#39;t use the terminology. Why invent more?"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "edited": false, "score": 0, "creation_date": 1450864563, "post_id": 34432766, "comment_id": 56606666, "body": "@HarmanRandhawa:- Its just a categorisation. Why does it matter?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "edited": false, "score": 0, "creation_date": 1450864751, "post_id": 34432766, "comment_id": 56606768, "body": "@RahulTripathi Anyone have the right to wonder why they split constants into two categories, even if IMO, they just copy terminology from another tutorial and don&#39;t know themselves what it means..."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 3, "creation_date": 1450864760, "post_id": 34432766, "comment_id": 56606775, "body": "Maybe get a better learning material that doesn&#39;t use made-up categorizations which they don&#39;t even explain?"}, {"owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1450864827, "post_id": 34432766, "comment_id": 56606815, "body": "@Holt:- Indeed, but I agree with Bathsheba that its just an aribitrary categorisation which has been done by few sites. Is there any official document you found somewhere?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "edited": false, "score": 0, "creation_date": 1450864886, "post_id": 34432766, "comment_id": 56606842, "body": "@RahulTripathi No, I totally agree with Bathsheba that this is arbitrary and should not be used except to confuse readers. I was just saying that the OP is not to blame to ask such question, but rather the author of the tutorials."}, {"owner": {"reputation": 11, "user_id": 5642769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WKomfsvyLW0/AAAAAAAAAAI/AAAAAAAADeQ/x-21_h5kml8/photo.jpg?sz=128", "display_name": "Harman Randhawa", "link": "https://stackoverflow.com/users/5642769/harman-randhawa"}, "edited": false, "score": 0, "creation_date": 1450864938, "post_id": 34432766, "comment_id": 56606872, "body": "Help me with question that why arrays and pointers are classified in secondry constant although they are not constants@zenith"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1450864979, "post_id": 34432766, "comment_id": 56606895, "body": "As far as I understand &quot;secondary constants&quot; are those constants whose value are not directly determined by the user but by the compiler or that are determined at run time. But I wouldn&#39;t bother about this pretty pointless categorisation."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450865065, "post_id": 34432766, "comment_id": 56606941, "body": "@HarmanRandhawa if you declare <code>int array[10]</code>, then <code>array</code> is basically  a constant pointer to <code>int</code>. There <i>are</i> pointers that are constant, but not <i>all</i> pointers are constant, most of them are not."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1450880291, "post_id": 34432766, "comment_id": 56616053, "body": "@MichaelWalz No, an array is not a pointer. It&#39;s an array."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1450880394, "post_id": 34432766, "comment_id": 56616100, "body": "@zenith correct, that&#39;s why I wrote &quot;...is <i>basically</i> a constant pointer...&quot;. Maybe I should have written <i>more or less</i> instead of <i>basically</i>."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1450882209, "post_id": 34432766, "comment_id": 56617164, "body": "I don&#39;t see how an array is more or less a pointer. An array is a contiguous block of elements of the same type. A pointer contains a memory address. Maybe you&#39;re confused by <a href=\"http://stackoverflow.com/q/1461432/3425536\">array-to-pointer decaying</a> which makes arrays seem like pointers in some contexts?"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1450865418, "post_id": 34433192, "comment_id": 56607174, "body": "Although <code>const</code> resides in a different part of the grammar (as a qualifier)."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1450865481, "post_id": 34433192, "comment_id": 56607213, "body": "@Bathsheba; Yes. <code>const int a = 5;</code> doesn&#39;t declare a constant in C."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1450865367, "creation_date": 1450865367, "answer_id": 34433192, "question_id": 34432766, "link": "https://stackoverflow.com/questions/34432766/why-array-and-pointers-are-classified-in-secondary-constants/34433192#34433192", "title": "Why array and pointers are classified in secondary constants?", "body": "<p>ISO C standard talks about only 4 types of constants (section \u00a76.4.4) </p>\n\n<pre><code>constant: \n    integer-constant\n    floating-constant \n    enumeration-constant \n    character-constant \n</code></pre>\n\n<p>There is nothing like <em>primary</em> or <em>secondary</em> constants. </p>\n"}], "owner": {"reputation": 11, "user_id": 5642769, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WKomfsvyLW0/AAAAAAAAAAI/AAAAAAAADeQ/x-21_h5kml8/photo.jpg?sz=128", "display_name": "Harman Randhawa", "link": "https://stackoverflow.com/users/5642769/harman-randhawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450865367, "creation_date": 1450864068, "last_edit_date": 1450864100, "question_id": 34432766, "link": "https://stackoverflow.com/questions/34432766/why-array-and-pointers-are-classified-in-secondary-constants", "title": "Why array and pointers are classified in secondary constants?", "body": "<p>I want to know why array and pointers are classified as secondary constants as am reading about constants.</p>\n"}, {"tags": ["c", "header"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1450859110, "post_id": 34431418, "comment_id": 56603778, "body": "What is the right order to say &quot;I&#39;m John Smith&quot; and &quot;Nice to meet you&quot;?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1450859129, "post_id": 34431418, "comment_id": 56603787, "body": "It is a matter of opinion. I prefer the second version because it doesn&#39;t potentially hide missing <code>#include</code>s."}, {"owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "edited": false, "score": 5, "creation_date": 1450860033, "post_id": 34431418, "comment_id": 56604182, "body": "See <a href=\"http://stackoverflow.com/questions/2762568/c-c-include-file-order-best-practices\" title=\"c c include file order best practices\">stackoverflow.com/questions/2762568/&hellip;</a>"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1450867739, "post_id": 34431418, "comment_id": 56608616, "body": "@immibis The correct way is to say &quot;I&#39;m John Smith&quot; first, followed by &quot;Nice to meet you.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1450859521, "creation_date": 1450859521, "answer_id": 34431523, "question_id": 34431418, "link": "https://stackoverflow.com/questions/34431418/whats-the-right-order-between-system-header-and-user-header-file-in-c-c-sourc/34431523#34431523", "title": "what&#39;s the right order between system header and user header file in C/C++ source?", "body": "<p>When it comes to header files, I have used the first approach exclusively as long as I can remember.</p>\n\n<p>When it comes to source files, I use the same approach unless there is a header file that corresponds to a source file. In the case, I <code>#include</code> the particular header file first.</p>\n\n<p>Let's say I have <code>A.h</code> that declares a class or some functions and <code>A.cc</code> implements them. In that case, I use:</p>\n\n<p>A.c:</p>\n\n<pre><code>#include \"A.h\"\n\n// Standard includes\n\n// User includes\n</code></pre>\n\n<p>This is useful in weeding out any missing forward declarations or standard include files that are necessary to make <code>A.h</code> a reusable header file without worrying about what else must be <code>#include</code>d to be able to use <code>#include \"A.h\"</code> in other source files.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1157391"}, "is_accepted": false, "score": 3, "last_activity_date": 1495195312, "last_edit_date": 1495195312, "creation_date": 1450859771, "answer_id": 34431583, "question_id": 34431418, "link": "https://stackoverflow.com/questions/34431418/whats-the-right-order-between-system-header-and-user-header-file-in-c-c-sourc/34431583#34431583", "title": "what&#39;s the right order between system header and user header file in C/C++ source?", "body": "<p>Properly written user headers should include whatever headers they need, because the user of a header shouldn't have to know which headers need to be included beforehand. This follows from the principle of encapsulation.</p>\n\n<p>For the same reason, properly written user headers should be protected against multiple inclusions. Imagine that the main program includes A and B and that A includes C, then it should be possible to modify B so that it too includes C without changing any other file.</p>\n\n<p>With properly written user headers then, the order of inclusion doesn't matter. It is purely a matter of preference. Personally I like to put system headers first, library headers second, and user headers third but you can do what you want.</p>\n"}], "owner": {"reputation": 93, "user_id": 1570557, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/657a969a3de8678c965b69afb37c9769?s=128&d=identicon&r=PG", "display_name": "zhengfish", "link": "https://stackoverflow.com/users/1570557/zhengfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "closed_date": 1450867649, "accepted_answer_id": 34431523, "answer_count": 2, "score": 2, "last_activity_date": 1495195312, "creation_date": 1450859003, "question_id": 34431418, "link": "https://stackoverflow.com/questions/34431418/whats-the-right-order-between-system-header-and-user-header-file-in-c-c-sourc", "closed_reason": "Duplicate", "title": "what&#39;s the right order between system header and user header file in C/C++ source?", "body": "<p>What is the right order between the following examples:</p>\n\n<p>A, system header go ahead</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include \"user-define.h\"\n</code></pre>\n\n<p>B, user header go ahead</p>\n\n<pre><code>    #include \"user-define.h\"\n    #include &lt;stdio.h&gt;\n</code></pre>\n"}, {"tags": ["c", "linux", "gtk"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1451048345, "post_id": 34431299, "comment_id": 56667837, "body": "What version of gtk+?"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1451248892, "post_id": 34431299, "comment_id": 56711090, "body": "2.x  I have the application working on hosts with gtk 2.0 up to 3.x"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450858415, "creation_date": 1450858415, "question_id": 34431299, "link": "https://stackoverflow.com/questions/34431299/checking-if-application-is-active", "title": "checking if application is active", "body": "<p>I'm writing an application in gtk and xlib\nI wanted to check if the application has focus or not(I want to make sure that if I type typing will go to another application not this one)\nI'm calling</p>\n\n<pre><code>if(gtk_window_is_active(main_window)) {\n</code></pre>\n\n<p>wher the main window has been declared globally\nand initialized:</p>\n\n<pre><code>main_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>gtk_window_set_keep_above ( (GtkWindow *) main_window, TRUE);\n</code></pre>\n\n<p>I'm calling this when a combobox changes, and it's running but it always returns false(even though I had just changed the combobox, which as far as I understand should make the application active again)\nmaybe I'm using the wrong function\nhow can I detect if my application is the active one?</p>\n"}, {"tags": ["c", "ubuntu", "gstreamer", "glib", "gobject"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1450923642, "post_id": 34438449, "comment_id": 56634906, "body": "recently\uff0cI learn gstreamer,I find out that many function pointers put into instance object structure and some put into class structure in gstreamer.I don&#39;t  entirely understand this case, I realize that one difference that  the function method pointers are mostly inherited by subclass  in parent class structure  and they aren&#39;t inherited by subinstance in parent instance structure."}, {"owner": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1450925344, "post_id": 34438449, "comment_id": 56635274, "body": "but I feel that for instance virtual method the subinstance structure also could overriden in parent instance structure, for example, I use subinstance initializer function to assignment new function pointer to parent instance structure &#39;s method pointer,I think this way also can implementate inheriting of parent virtual method. but it isn&#39;t only conventionally advise in GObject  that function method pointers are overridden in inheriting instance. do I not know that if I understand this correctly ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user473305"}, "reply_to_user": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1450953481, "post_id": 34438449, "comment_id": 56644324, "body": "I&#39;m not sure myself. I&#39;ve yet to see a GObject class with a function pointer in its instance structure. I&#39;m not sure what the purpose of that would be. Do you have an example of a GStreamer class like this you can point me to?"}, {"owner": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1451009565, "post_id": 34438449, "comment_id": 56661096, "body": "please see my modify this subject to add gstreamer GstPad.h code snippet again. thank you, thank you in advance,if you have any idea, please tell me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user473305"}, "reply_to_user": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1451043956, "post_id": 34438449, "comment_id": 56666778, "body": "I&#39;ve updated my answer. Briefly, these function pointers are used to register callback routines and are properties of the object, not methods defined by the object&#39;s class."}, {"owner": {"user_type": "does_not_exist", "display_name": "user473305"}, "reply_to_user": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "edited": false, "score": 0, "creation_date": 1451826559, "post_id": 34438449, "comment_id": 56898418, "body": "@zhang007z, have I answered your question?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user473305"}, "is_accepted": false, "score": 2, "last_activity_date": 1451043827, "last_edit_date": 1451043827, "creation_date": 1450883064, "answer_id": 34438449, "question_id": 34430659, "link": "https://stackoverflow.com/questions/34430659/how-do-i-decide-whether-a-method-function-pointer-belongs-in-the-instance-struct/34438449#34438449", "title": "How do I decide whether a method-function pointer belongs in the instance structure or class structure in GObject?", "body": "<p>Method-function pointers belong in the class structure. This is true for any virtual method (one that can be overridden in inheriting classes).</p>\n\n<p>Declaring a function pointer in the <em>instance</em> structure would imply the corresponding method is defined only on objects of this specific class and cannot be overridden (is non-virtual).</p>\n\n<p>However, in this case there is no need to expose a function pointer at all, since there can never be multiple implementations of the method and thus never any ambiguity about which implementation to invoke. Following GObject conventions, you would simply declare in the header file a function that corresponds to the method and then provide an implementation in the source file.</p>\n\n<p>The GObject reference manual <a href=\"https://developer.gnome.org/gobject/stable/howto-gobject-methods.html\" rel=\"nofollow\">illustrates these scenarios</a>, with <a href=\"https://developer.gnome.org/gobject/stable/howto-gobject-methods.html#non-virtual-public-methods\" rel=\"nofollow\">the \"Non-virtual public methods\" section</a> showing what is normally done instead of declaring a function pointer in the instance structure.</p>\n\n<hr>\n\n<p>The GStreamer code you pasted shows one exception to the above. In that code, the function pointers stored in the instance structure are effectively <em>properties</em> of a GstPad object, not methods defined on the object itself. <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstPad.description\" rel=\"nofollow\">The description of the class</a> states</p>\n\n<blockquote>\n  <p>A GstElement creating a pad will typically use the various gst_pad_set_*_function() calls to register callbacks for events, queries or dataflow on the pads.</p>\n</blockquote>\n\n<p>So the <code>activatefunc</code> member stores a pointer to a callback function that is invoked when the pad is activated, for instance, and similarly for the remaining function pointers. This makes sense, as a callback function is more something the object <em>has</em> than it is a part of the object's own nature.</p>\n\n<p>That said, it's true a more purely object-oriented implementation might either</p>\n\n<ul>\n<li>Implement the callback methods directly in the class itself, expecting them to be overridden in a subclass unique to each application; or</li>\n<li>Implement callbacks by invoking methods on an application-supplied object that implements a specific callback <a href=\"https://en.wikipedia.org/wiki/Interface_%28object-oriented_programming%29\" rel=\"nofollow\">interface</a>.</li>\n</ul>\n\n<p>My guess is the GStreamer designers chose the simpler implementation they did out of a desire to</p>\n\n<ul>\n<li>Allow GStreamer to be used with existing C code that may not itself use the GObject framework, and</li>\n<li>Keep latency low (critical in multimedia applications) by minimizing the number of chained function calls required to invoke a callback routine.</li>\n</ul>\n"}], "owner": {"reputation": 105, "user_id": 5570753, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/99b110a460075b5807b03ebaa65f0248?s=128&d=identicon&r=PG&f=1", "display_name": "zhang007z", "link": "https://stackoverflow.com/users/5570753/zhang007z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451043827, "creation_date": 1450855537, "last_edit_date": 1451011426, "question_id": 34430659, "link": "https://stackoverflow.com/questions/34430659/how-do-i-decide-whether-a-method-function-pointer-belongs-in-the-instance-struct", "title": "How do I decide whether a method-function pointer belongs in the instance structure or class structure in GObject?", "body": "<p>in glib GObject for example:</p>\n\n<pre><code>typedef struct _MyInstance MyInstance;\nstruct _MyInstance {\n        GObject parent;\n        ......//instance variable\n        ......//this place is method function pointer in instance structure.      \n};\n\ntypedef struct _MyInstanceClass MyInstanceClass;\nstruct _MyInstanceClass {\n        GObjectClass parent_class;\n       ......//class variable\n       ......//this place is method function pointer in class structure.\n};\n</code></pre>\n\n<p>I don't understand that the method function pointer puts in class or instance structure that it seen to same . what difference are they? I think that class function method pointers each of instance object is used to call same, so puting this functions to class structure. However, How to use instance object's function method pointers about method pointers of its own? because I think the function method pointers of instance object for itself is same, How to understand instance object function method?\nbelow I give that gstreamer Gstpad.h code snippet as example :</p>\n\n<pre><code>struct _GstPad {\n  GstObject         object;\n\n  /*&lt; public &gt;*/\n  gpointer          element_private;\n\n  GstPadTemplate        *padtemplate;\n\n  GstPadDirection        direction;\n\n  /*&lt; public &gt;*/ /* with STREAM_LOCK */\n  /* streaming rec_lock */\n  GStaticRecMutex       *stream_rec_lock;\n  GstTask           *task;\n  /*&lt; public &gt;*/ /* with PREROLL_LOCK */\n  GMutex            *preroll_lock;\n  GCond             *preroll_cond;\n\n  /*&lt; public &gt;*/ /* with LOCK */\n  /* block cond, mutex is from the object */\n  GCond             *block_cond;\n  GstPadBlockCallback        block_callback;\n  gpointer           block_data;\n\n  /* the pad capabilities */\n  GstCaps           *caps;\n  GstPadGetCapsFunction     getcapsfunc;\n  GstPadSetCapsFunction     setcapsfunc;\n  GstPadAcceptCapsFunction   acceptcapsfunc;\n  GstPadFixateCapsFunction   fixatecapsfunc;\n\n  GstPadActivateFunction     activatefunc;\n  GstPadActivateModeFunction     activatepushfunc;\n  GstPadActivateModeFunction     activatepullfunc;\n\n  /* pad link */\n  GstPadLinkFunction         linkfunc;\n  GstPadUnlinkFunction       unlinkfunc;\n  GstPad            *peer;\n\n  gpointer           sched_private;\n\n  /* data transport functions */\n  GstPadChainFunction        chainfunc;\n  GstPadCheckGetRangeFunction    checkgetrangefunc;\n  GstPadGetRangeFunction     getrangefunc;\n  GstPadEventFunction        eventfunc;\n\n  GstActivateMode        mode;\n\n  /* generic query method */\n  GstPadQueryTypeFunction    querytypefunc;\n  GstPadQueryFunction        queryfunc;\n\n  /* internal links */\n#ifndef GST_DISABLE_DEPRECATED\n  GstPadIntLinkFunction      intlinkfunc;\n#else\n#ifndef __GTK_DOC_IGNORE__\n  gpointer intlinkfunc;\n#endif\n#endif\n\n  GstPadBufferAllocFunction      bufferallocfunc;\n\n  /* whether to emit signals for have-data. counts number\n   * of handlers attached. */\n  gint               do_buffer_signals;\n  gint               do_event_signals;\n\n  /* ABI added */\n  /* iterate internal links */\n  GstPadIterIntLinkFunction     iterintlinkfunc;\n\n  /* free block_data */\n  GDestroyNotify block_destroy_data;\n\n  /*&lt; private &gt;*/\n  union {\n    struct {\n      gboolean                      block_callback_called;\n      GstPadPrivate                *priv;\n    } ABI;\n    gpointer _gst_reserved[GST_PADDING - 2];\n  } abidata;\n};\n\nstruct _GstPadClass {\n  GstObjectClass    parent_class;\n\n  /* signal callbacks */\n  void      (*linked)       (GstPad *pad, GstPad *peer);\n  void      (*unlinked)     (GstPad *pad, GstPad *peer);\n  void      (*request_link)     (GstPad *pad);\n  gboolean  (*have_data)        (GstPad *pad, GstMiniObject *data);\n\n  /*&lt; private &gt;*/\n  gpointer _gst_reserved[GST_PADDING];\n};\n</code></pre>\n\n<p>you can see function method pointer in instance structure and class structure from giving above code snippet. intance function method pointers are initialized by gst_pad_init function, as below:</p>\n\n<pre><code>static void\ngst_pad_init (GstPad * pad)\n{\n  ........//other no important code\n  GST_PAD_CHAINFUNC (pad) = NULL;    \n  GST_PAD_LINKFUNC (pad) = NULL;    \n  GST_PAD_CAPS (pad) = NULL;\n  GST_PAD_GETCAPSFUNC (pad) = NULL;  \n  GST_PAD_ACTIVATEFUNC (pad) = gst_pad_activate_default;\n  GST_PAD_EVENTFUNC (pad) = gst_pad_event_default;\n  GST_PAD_QUERYTYPEFUNC (pad) = gst_pad_get_query_types_default;\n  GST_PAD_QUERYFUNC (pad) = gst_pad_query_default;\n#ifndef GST_REMOVE_DEPRECATED\n  GST_PAD_INTLINKFUNC (pad) = gst_pad_get_internal_links_default;\n#endif\n  GST_PAD_ITERINTLINKFUNC (pad) = gst_pad_iterate_internal_links_default;\n\n  GST_PAD_ACCEPTCAPSFUNC (pad) = gst_pad_acceptcaps_default;\n\n ............//other no important code\n}\n</code></pre>\n\n<p>so I confuse this issue,why there are function method pointers in intance structure rather than puting into class class structure?</p>\n"}, {"tags": ["c", "linux", "environment-variables"], "comments": [{"owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 1, "creation_date": 1450855804, "post_id": 34430558, "comment_id": 56602369, "body": "dlopen makes me wonder if your application specific libraries are opened from LD_LIBRARY_PATH. The way i would proceed is to look at a installation and check the paths that are used in LD_LIBRARY_PATH. Check all locations that is pointed by the application and libraries present in them."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 0, "creation_date": 1450856447, "post_id": 34430558, "comment_id": 56602663, "body": "@Pradheep I&#39;m afraid that&#39;s not feasible. The value that <code>LD_LIBRARY_PATH</code> is being set to is not known at compile time."}, {"owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 0, "creation_date": 1450856778, "post_id": 34430558, "comment_id": 56602799, "body": "why not print it out to any of your logs and check the paths or load the program in gdb which is much easier and check the value when it sets"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450857553, "post_id": 34430558, "comment_id": 56603143, "body": "Numeric formatting is dependent on locale.  Time, date, money formatting are dependent on locale.  Some collation (sorting) algorithms are dependent on locale.  Character classification is dependent on locale (digits, upper, lower, etc).  Most of that is covered by the standard C library (money formatting doesn&#39;t have a standard C function for the task, but the necessary information is stored in the locale information)."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450857683, "post_id": 34430558, "comment_id": 56603203, "body": "@JonathanLeffler Yes, that&#39;s why I included them in general. What I hope is that these functions are not dependent on <code>LD_LIBRARY_PATH</code> as well."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 0, "creation_date": 1450858304, "post_id": 34430558, "comment_id": 56603457, "body": "@Pradheep There&#39;s two problems with that approach. First of all the value set to <code>LD_LIBRARY_PATH</code> is dependent on the command line arguments so I can&#39;t deduce the value that way. Second checking reading of the <code>environ</code> variable would require a test case with quite high coverage which I don&#39;t have."}, {"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1450858613, "post_id": 34430558, "comment_id": 56603582, "body": "You could try simply setting (extending) <code>PATH</code> on Windows instead of <code>LD_LIBRARY_PATH</code>. The <code>PATH</code> is considered as part of the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx\" rel=\"nofollow noreferrer\">DLL Search Order</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450925978, "post_id": 34430558, "comment_id": 56635402, "body": "Please post the related code.   getting and/or setting the environment is not &#39;legacy&#39; but rather something that often needs to be done on-the-fly."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451053116, "post_id": 34430558, "comment_id": 56668941, "body": "@user3629249 I&#39;m not going to post 400k lines of proprietary code here."}], "answers": [{"comments": [{"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1450858485, "post_id": 34431089, "comment_id": 56603528, "body": "There are a lot of valid use cases for LD_LIBRARY_PATH when you want to force loading a specific library, e.g. anytime the <code>dlopen</code> call is not under your control such as when it&#39;s in a third party library or when it&#39;s in a separate process."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1450858654, "post_id": 34431089, "comment_id": 56603598, "body": "Checking the documentation was a good idea. I ran <code>zgrep</code> on the man pages and also found the <code>uselib</code> function. However it would miss the cases <code>getenv</code> and the functions for launching other programs which are potential ways to be dependent on <code>LD_LIBRARY_PATH</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1450859549, "post_id": 34431089, "comment_id": 56603969, "body": "I think your question is answered; you&#39;d need to analyse the code to determine why it was doing this.  Without seeing the code, I would guess that <code>getenv()</code> is used to get the current <code>LD_LIBRARY_PATH</code>, it is pre-pended or appended with some application specific path, and then set with <code>setenv()</code> before calling <code>dlopen()</code>.  The way in which <code>LD_LIBRARY_PATH</code> is modified I think will be informative.  You seem to be looking for something at the system level, and I think this is entirely application specific.  You chose not to post any code, so we are left to guess."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1450857955, "last_edit_date": 1450857955, "creation_date": 1450857426, "answer_id": 34431089, "question_id": 34430558, "link": "https://stackoverflow.com/questions/34430558/which-code-is-potentially-sensitive-to-environment-variables/34431089#34431089", "title": "Which code is potentially sensitive to environment (variables)?", "body": "<p>You should check the documentation for each function.  That for <a href=\"http://linux.die.net/man/3/dlopen\" rel=\"nofollow\"><code>dlopen</code></a> clearly states that it uses <code>LD_LIBRARY_PATH</code> as a search list to locate shared libraries.</p>\n\n<p>It seems a rather clumsy way of forcing a specific library to be loaded when you can specify a path as an argument to <code>dlopen</code> in any case.</p>\n\n<p>Other than that it is a value used by the GNU linker <code>ld</code> to locate <em>static</em> libraries. So less likely but possible is that it is used by your application because it launches the linker or some other process that uses <code>dlopen</code>, which it may do via <code>exec</code>, <code>popen</code>, or <code>system</code> for example.  Given that your code has all of these functions it is quite clearly launching some external process. </p>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1450857981, "creation_date": 1450855129, "last_edit_date": 1450857981, "question_id": 34430558, "link": "https://stackoverflow.com/questions/34430558/which-code-is-potentially-sensitive-to-environment-variables", "title": "Which code is potentially sensitive to environment (variables)?", "body": "<p>I have some (legacy) code here that seem to call <code>setenv</code> on <code>LD_LIBRARY_PATH</code> (with a value not known at compile time, actually it will be got from the command line), now I have to port it to windows. My suspicion is that <code>setenv</code> is done for historical reason only and that it has no actual effect anymore and I want to confirm that.</p>\n\n<p>So my approach would be to review all uses of the environment and see if there's any one that would be affected by <code>LD_LIBRARY_PATH</code> (or any else). So I figure that unless the <code>environ</code> variable or certain functions are called the code would be insensitive to the environment (either directly, indirectly or in subsequent code).</p>\n\n<p>The functions that I've identified (as candidates) are:</p>\n\n<ul>\n<li><code>getenv</code></li>\n<li><code>exec*</code> </li>\n<li><code>popen</code></li>\n<li><code>system</code></li>\n<li><code>dlopen</code> and friends</li>\n<li>time functions that relies on the <code>TZ</code> variable only</li>\n<li>functions thats locale dependent and only retrieves the current locale</li>\n</ul>\n\n<p>The <code>getenv</code> is included for obvious reasons as the subsequent code would probably depend on the value of the environment variable. <code>exec*</code>, <code>popen</code> and <code>system</code> are included because first the linking of the (child) program may be affected by the environment, but also the (child) program itself may be dependent on environment, <code>dlopen</code> I think will search the <code>LD_LIBRARY_PATH</code> for the library (also here it's possible that the linked library itself accesses the environment during initialization or at a later point). The rest is because I'm aware that <code>TZ</code> and locale is being used at a lot of places in the standard libraries.</p>\n\n<p>Have I missed some function or some other case where code may depend on the environment? Of course I realize that this is affected by the libraries that are loaded, but as far as I see there's only \"standard\" libraries loaded plus <code>libsqlite3</code> (plus <code>libpthread</code>, <code>libdl</code> and <code>libm</code>). I guess that SQLite3 may be sensitive to some environment variables, but is <code>LD_LIBRARY_PATH</code> one of them?</p>\n\n<p>For the record this time the program doesn't seem to include <code>exec*</code> or <code>dlopen</code>, but I include them because in another case they might.</p>\n"}, {"tags": ["c", "global-variables", "local-variables"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1450853594, "post_id": 34430123, "comment_id": 56601394, "body": "the local definition overrides the external. It&#39;s in local scope. How could the compiler know which is which?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1450855254, "post_id": 34430123, "comment_id": 56602127, "body": "I have to wonder how you missed: <b><i>&quot;warning: variable &#39;var&#39; is uninitialized when used within its own initialization&quot;</i></b>."}, {"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1505935586, "post_id": 34430123, "comment_id": 79621378, "body": "As well as <b>warning: declaration shadows a variable in the global scope</b>."}], "answers": [{"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1450855145, "creation_date": 1450855145, "answer_id": 34430563, "question_id": 34430123, "link": "https://stackoverflow.com/questions/34430123/global-and-local-variable-with-the-same-name-unexpected-value/34430563#34430563", "title": "Global and local variable with the same name, unexpected value", "body": "<p>The <code>int var = var</code> in <code>main()</code> does not actually access the <code>var</code> at file scope.</p>\n\n<p>The result is actually undefined behaviour, since it tries to access the value of the local <code>var</code> which has not been initialised.  So any result you get (zero, 42, reformatting your hard drive) is valid.</p>\n\n<p>Try building your code with a different compiler, and you could well get a different output.</p>\n\n<p>Out of curiosity, I compiled, built, and ran the same code (other than adding <code>#include &lt;stdio.h&gt;</code>) and the output I received was <code>41944322</code>.     The compiler on my current machine is gcc 4.8.1 (mingw).</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1450861153, "post_id": 34430894, "comment_id": 56604753, "body": "Technically, the compiler found <code>var</code> in the <i>same</i> scope.  Undefined behavior is invoked by the initializer itself already, and again in the <code>printf</code> statement."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1450856571, "creation_date": 1450856571, "answer_id": 34430894, "question_id": 34430123, "link": "https://stackoverflow.com/questions/34430123/global-and-local-variable-with-the-same-name-unexpected-value/34430894#34430894", "title": "Global and local variable with the same name, unexpected value", "body": "<p>The global variable has nothing to do with it, you can comment out that line of code. When the compiler finds a local variable with the same name as a variable in another, outer scope, the local variable will always be used.</p>\n\n<p>Therefore both \"var\" in the expression <code>int var = var;</code> refers to itself: the local variable. It doesn't make any sense to initialize a variable to its own uninitialized value. The value will remain indeterminate and when you use the value in your program you invoke undefined behavior: anything can happen.</p>\n"}], "owner": {"reputation": 29, "user_id": 5709974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c62a844014e052afb1002dfc2982e06?s=128&d=identicon&r=PG&f=1", "display_name": "janardhan tj", "link": "https://stackoverflow.com/users/5709974/janardhan-tj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1450860922, "creation_date": 1450853250, "last_edit_date": 1450860922, "question_id": 34430123, "link": "https://stackoverflow.com/questions/34430123/global-and-local-variable-with-the-same-name-unexpected-value", "title": "Global and local variable with the same name, unexpected value", "body": "<p>I have both a local and a global variable with same name.</p>\n\n<pre><code>int var = 10;\nint main() {\n    int var = var;\n    printf(\"%d\", var);\n    return 0;\n}\n</code></pre>\n\n<p>Running the program gives this output: <code>0</code></p>\n\n<p>Why is that?</p>\n"}, {"tags": ["c", "performance", "for-loop"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1450852362, "post_id": 34429901, "comment_id": 56600871, "body": "<code>row[col] != NULL</code>...smells fishy..."}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852446, "post_id": 34429901, "comment_id": 56600914, "body": "thats because I had to ignore the null values before they are added. Any sugessions on that too. @SouravGhosh"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852478, "post_id": 34429901, "comment_id": 56600931, "body": "No offense, do you know what <code>NULL</code> means (type), anyway?"}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852594, "post_id": 34429901, "comment_id": 56600984, "body": "NULL means there is nothing. I did&#39;nt had a way of reading it from the database. So I had to use it. any idea on that please"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852654, "post_id": 34429901, "comment_id": 56601005, "body": "Ummm. basically, NULL is a pointer, so you can&#39;t compare that against an <code>int</code> (I suppose). Enable compiler warnings...."}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852785, "post_id": 34429901, "comment_id": 56601055, "body": "But this worked. will this cause future errors."}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852944, "post_id": 34429901, "comment_id": 56601121, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/98772/discussion-between-laksith-and-sourav-ghosh\">continue this discussion in chat</a>."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 1, "creation_date": 1450853123, "post_id": 34429901, "comment_id": 56601183, "body": "IF you do a direct sum in opposite order, you can save some calculations by re-using previous results: calculate <code>p1_2weeks = strtol(row[1], NULL, 10) + ... + strtol(row[14], NULL, 10);</code> first, then <code>p2_1months = p1_2weeks + strtol(row[15], NULL, 10) + ... strtol(row[31], NULL, 10);</code> and finally <code>p3_3months = p2_1months + strtol(row[32], NULL, 10) + ... strtol(row[91], NULL, 10);</code>. However if you expect <code>row[col] == NULL</code>, which case you handle in the loop, how would you handle it in a direct summation?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1450853707, "post_id": 34429901, "comment_id": 56601439, "body": "@SouravGhosh <code>row[col]</code> is being passed as the first argument to <code>strtol</code>, which means it must be of type <code>char *</code>. Hence, comparing with <code>NULL</code> is perfectly valid."}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1450853879, "post_id": 34429901, "comment_id": 56601514, "body": "@CiaPan yeah. Sorry thats what I had in mind. But I wrote another thing.thankz again. I ve edited the code according to your sugesstion"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450856783, "post_id": 34429901, "comment_id": 56602802, "body": "@SouravGhosh: <code>row[col]</code> is a pointer to a string, it is <code>NULL</code> if the database column is a <code>NULL</code> value.  The OP tests for <code>NULL</code> values in the loop but not in the additions...  one of several inconsistencies in this code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1450857737, "post_id": 34429901, "comment_id": 56603222, "body": "I&#39;d be more worried about the fact that you&#39;re inserting data into 100 tables than the performance of <code>for</code> loops in C.  The time taken to stuff the data into the database probably dwarfs the time taken in these loops.  At the least, you should have concrete evidence that these loops are an issue before optimizing them."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450857771, "post_id": 34429901, "comment_id": 56603239, "body": "It is not meaningful to discuss manual optimization of this code without a specific system in mind."}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1450862905, "post_id": 34429901, "comment_id": 56605682, "body": "Let&#39;s say the bottleneck of your code isn&#39;t the database transactions part. I would go with chqrlie&#39;s recommends. I want to add two things: 1. unrolling a loop with too many iterations may be slower, as the processor will need to read new instructions from cache or main memory. 2. Keeping the first one in mind, i would try to change the unroll count and find the optimum one for your CPU. probably it&#39;s value between 1 and 16."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1450864074, "post_id": 34429901, "comment_id": 56606379, "body": "@seleciii44: instead of unrolling the loop by hand, I would trust the compiler  to do it automatically if it so decides for <code>-O3</code>.  Your remark on the extra code size is quite pertinent, but if the code were the bottleneck, it would be executed many times and stay in the rather large cache current processors now have."}, {"owner": {"reputation": 1356, "user_id": 1632887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MU4Pe.jpg?s=128&g=1", "display_name": "seleciii44", "link": "https://stackoverflow.com/users/1632887/seleciii44"}, "edited": false, "score": 0, "creation_date": 1450864958, "post_id": 34429901, "comment_id": 56606884, "body": "@chrqlie: i have seen examples that unrolling by hand beats the compiler. I&#39;m assuming -o3 is being used anyway. By the way on some dsp&#39;s (Texas Instruments for example) there is a pragma which you can explicitly set the unroll count. To conclude, if i need something really fast i would see if doing by hand is better or not. If not i would definitely leave it to compiler."}], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 3, "creation_date": 1450853018, "post_id": 34429947, "comment_id": 56601155, "body": "Indeed and chances are this is going to be so dominated by <code>strtol</code> (let alone the query and insert times) that hand-unrolling that loop will make exactly zero difference."}, {"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1450853323, "post_id": 34429947, "comment_id": 56601255, "body": "sorry I didn&#39;t get you @pvg"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "reply_to_user": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "edited": false, "score": 0, "creation_date": 1450853583, "post_id": 34429947, "comment_id": 56601385, "body": "@Laksith basically, do what both answers tell you and measure first. The optimizations you are thinking of are very unlikely to make any difference."}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "edited": false, "score": 1, "creation_date": 1450853756, "post_id": 34429947, "comment_id": 56601459, "body": "Compilers these days are very very good and computer architectures are very very complicated. It&#39;s not impossible, but it is hard to do better than the compiler."}, {"owner": {"reputation": 4682, "user_id": 3935325, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jjwPe.jpg?s=128&g=1", "display_name": "villasv", "link": "https://stackoverflow.com/users/3935325/villasv"}, "edited": false, "score": 0, "creation_date": 1450854175, "post_id": 34429947, "comment_id": 56601648, "body": "I agree with @Turn. Although we can&#39;t guarantee by simple reasoning, it&#39;s very unlikely that manually writing a loop is going to give any performance gains. I think he would at most make the compiler&#39;s life harder."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1450854647, "post_id": 34429947, "comment_id": 56601860, "body": "The other thing is that 4 million+ inserts (or more? to 100 tables?) is surely going to end up doing i/o and make everything else, including a 4+ million row read from a db with hot caches look instant."}], "tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": false, "score": 3, "last_activity_date": 1450852518, "creation_date": 1450852518, "answer_id": 34429947, "question_id": 34429901, "link": "https://stackoverflow.com/questions/34429901/which-is-more-efficient-for-loop-or-just-regular-adding/34429947#34429947", "title": "which is more efficient, for loop or just regular adding", "body": "<p>The only reasonable answer to a question like this is to profile it. Write it in the way that makes the most intuitive sense and then see if it adds up to a significant amount of time worth spending the time optimizing and then debugging all of your optimizations.</p>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "edited": false, "score": 0, "creation_date": 1450853201, "post_id": 34430086, "comment_id": 56601214, "body": "so you mean that there is no need of a else part. is it ?"}, {"owner": {"reputation": 4682, "user_id": 3935325, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jjwPe.jpg?s=128&g=1", "display_name": "villasv", "link": "https://stackoverflow.com/users/3935325/villasv"}, "reply_to_user": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "edited": false, "score": 2, "creation_date": 1450853359, "post_id": 34430086, "comment_id": 56601272, "body": "I guess <code>sum</code> is some numeric type, so setting <code>sum = sum + 0</code> is the same as <code>sum = sum</code> which does nothing."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1450853527, "post_id": 34430086, "comment_id": 56601363, "body": "It&#39;s going to make it slower, since it&#39;s going to be <code>strtol</code> doiminated and as @CiaPan points out, the proposed unroll makes many more of them. 90-odd  (or more) <code>strtol</code> calls are going to turn a couple of int adds and comparisons, however you do them, into near-immesurable noise."}, {"owner": {"reputation": 4682, "user_id": 3935325, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jjwPe.jpg?s=128&g=1", "display_name": "villasv", "link": "https://stackoverflow.com/users/3935325/villasv"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1450854790, "post_id": 34430086, "comment_id": 56601922, "body": "@pvg what I propose won&#39;t increase the amount of <code>strtol</code>, but I believe that indeed the difference may be negligible. This would just save some equality tests."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 2, "creation_date": 1450855087, "post_id": 34430086, "comment_id": 56602063, "body": "@VillasV no (and you&#39;re right, I was unclear), but what the OP is proposing does. Either way, since the end result involves shoveling all this crap into another db, none of this will probably make any difference at all. Might as well write it in ruby with 7 layers of metaprogramming indirection."}], "tags": [], "owner": {"reputation": 4682, "user_id": 3935325, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jjwPe.jpg?s=128&g=1", "display_name": "villasv", "link": "https://stackoverflow.com/users/3935325/villasv"}, "is_accepted": false, "score": 4, "last_activity_date": 1450853452, "last_edit_date": 1450853452, "creation_date": 1450853089, "answer_id": 34430086, "question_id": 34429901, "link": "https://stackoverflow.com/questions/34429901/which-is-more-efficient-for-loop-or-just-regular-adding/34430086#34430086", "title": "which is more efficient, for loop or just regular adding", "body": "<p>I don't think that writing the additions yourself is going to make this any faster. But optimization is not made with guesses, it's made with measurements.</p>\n\n<p>What I would comment about your code is:</p>\n\n<pre><code>else\n   sum = sum + 0;\n</code></pre>\n\n<p>I hope your compiler get rid of this thing, otherwise you're just wasting time here.</p>\n\n<pre><code>        if (col == 14) {\n            p1_2weeks = sum;\n        } else if (col == 31) {\n            p2_1month = sum;\n        } else if (col == 90) {\n            p3_2month = sum;\n        }\n</code></pre>\n\n<p>Although branch prediction can help you a lot here, maybe it would be better to move this out of the for-loop. You can do it separating in several loops with each partial computation in the middle.\n(loop until 14, assign p1_2weeks, loop until 31, save p2_1month ...)</p>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "edited": false, "score": 0, "creation_date": 1450854195, "post_id": 34430178, "comment_id": 56601660, "body": "Is there a way of directly getting inigers from mysql. which would be more efficient?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1450854458, "post_id": 34430178, "comment_id": 56601782, "body": "A good and easy metric may be to check the CPU usage of the program, if it&#39;s significantly below 100% it&#39;s probably waiting for MySQL most of the time."}, {"owner": {"reputation": 4682, "user_id": 3935325, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jjwPe.jpg?s=128&g=1", "display_name": "villasv", "link": "https://stackoverflow.com/users/3935325/villasv"}, "edited": false, "score": 0, "creation_date": 1450854517, "post_id": 34430178, "comment_id": 56601815, "body": "I do think this is the first thing the OP should do (retrieve numeric types instead of strings), hence I upvoted. However, the question is whether manual additions are faster than loops :P"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 7, "last_activity_date": 1450911684, "last_edit_date": 1450911684, "creation_date": 1450853547, "answer_id": 34430178, "question_id": 34429901, "link": "https://stackoverflow.com/questions/34429901/which-is-more-efficient-for-loop-or-just-regular-adding/34430178#34430178", "title": "which is more efficient, for loop or just regular adding", "body": "<p>A <code>for</code> loop or manual unrolling with explicit additions is not going to make a significant difference.  Most of the time will be spent reading from MySQL and converting fields to strings, and inserting the result into Oracle. If the program spends 99% of the time in the database code, which would not surprise me, optimizing this loop would be a moot point.</p>\n\n<p>You might want to look for an different method for extracting values from MySQL that does not convert integers to strings.</p>\n\n<p>Profiling will tell you where the bottleneck is for a given combination of compiler / options / cpu / memory / dataset, but it might be tricky to tell time spent in your program and time spent waiting for the Oracle process or the MySQL connection.  Elapsed time is the final judge.</p>\n\n<p>Note that your proposed alternative is not semantically equivalent: in the sequence of explicit additions, you do not test for <code>NULL</code> fields. If the columns cannot be <code>NULL</code>, you can remove the <code>if (row[col] != NULL)</code> test, if they can be <code>NULL</code>, you must modify the addition to add more tests, which will make it very clumsy. In addition, as seleciii44 suggests, the proposed alternative generates much larger code, which has an impact as well.</p>\n\n<p>Node also that the loop is very straightforward, whereas the sequence of additions is error prone: it is easy to make cut and paste errors and miss an index or duplicate one. If you go for the additions, use a code layout that makes the indices stand out clearly.  Look at how I reformated your code.</p>\n\n<p>Indeed you have typos in the loop (<code>p2_1month</code>/<code>p2_1months</code>, <code>p3_2month</code>/<code>p3_3months</code>) and the addition does not compute <code>p3_3months</code> the same way: the loop sums <code>90</code> days, where the addition sums <code>91</code> days.  But of course the number of days in a quarter varies, from <code>89</code> to <code>92</code> days.</p>\n\n<p>Note also that <code>sum = sum + 0;</code> is a no op that should be removed, but the compiler most likely will not generate code for it.</p>\n\n<p>If you are concerned with the extra tests for 14, 31 and 90 days performed for each iteration, you can use this:</p>\n\n<pre><code>    long temp[92];\n    for (col = 1; col &lt; 92; col++) {\n        if (row[col] != NULL) {\n            sum += strtol(row[col], NULL, 10);\n        }\n        temp[col] = sum;\n    }\n    p1_2weeks = temp[14];\n    p2_1month = temp[31];\n    p3_3months = temp[90];\n</code></pre>\n\n<p>It may be more efficient than the version with tests, but only careful benchmarking will tell you, because modern processors' branch prediction will minimize the cost if these tests while storing <code>91</code> values into a local array is a small extra cost.</p>\n\n<p>By the way, are you sure about <code>col &lt; 92</code>? Your loop treats <code>91</code> columns, but you write that only <code>90</code> of the <code>92</code> columns are integers.</p>\n\n<p>Again, I would first look for a method for extracting values from MySQL as integers.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1450859119, "creation_date": 1450859119, "answer_id": 34431443, "question_id": 34429901, "link": "https://stackoverflow.com/questions/34429901/which-is-more-efficient-for-loop-or-just-regular-adding/34431443#34431443", "title": "which is more efficient, for loop or just regular adding", "body": "<p>Unrolling the loop may afford a small advantage by removing the loop overhead, however this would only be an advantage if the loop were <em>very large</em> and the operations within it were <em>very simple</em>, and neither is true in this instance.</p>\n\n<p>Addition is a <em>very simple</em> operation (one machine instruction), but you are missing the <em>elephant in the room</em> that is <code>strtol()</code> - there you have a function call overhead plus whatever is required to convert a string to an integer which will be <em>many</em> machine instructions (in a loop too).</p>\n\n<p>Moreover the compiler optimiser is quite capable of performing loop unrolling for itself if there is some likely significant advantage.  So this kind of hand-written micro-optimisation is almost always futile, and renders the code unreadable and difficult to maintain.  You would do better to consider overall design and algorithm complexity and let the compiler do <em>its</em> job. </p>\n\n<p>In any event, given that this is a database application it will do doubt be largely bound to disk and/or network performance, and <em>any</em> code optimisation may be insignificant overall.  A fast server and plenty of RAM may accelerate your application to a far greater extent than code optimisation of <em>any</em> kind.</p>\n"}], "owner": {"reputation": 344, "user_id": 5050086, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/42e7cf3c41fb2d5642f5b1b1044c5662?s=128&d=identicon&r=PG", "display_name": "Laksith", "link": "https://stackoverflow.com/users/5050086/laksith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 1, "accepted_answer_id": 34430178, "answer_count": 4, "score": 2, "last_activity_date": 1450911684, "creation_date": 1450852300, "last_edit_date": 1450856105, "question_id": 34429901, "link": "https://stackoverflow.com/questions/34429901/which-is-more-efficient-for-loop-or-just-regular-adding", "title": "which is more efficient, for loop or just regular adding", "body": "<p>I am developing a c app which reads data from a mysql table,process it and then inserts it in to 100 different tables in a oracle database. The thing is there is a huge concern for the performance of the app. In the mysql table I mentioned ,there are 4,800,000 and there are 92 columns in it. 90 of theme are just integers. So in my app for each entry of  4,800,000 , I'm running a for loop as given below.</p>\n\n<pre><code>    for (col = 1; col &lt; 92; col++) {\n        if (row[col] != NULL) {\n            sum += strtol(row[col], NULL, 10);\n        } else\n            sum = sum + 0;\n        if (col == 14) {\n            p1_2weeks = sum;\n        } else if (col == 31) {\n            p2_1month = sum;\n        } else if (col == 90) {\n            p3_2month = sum;\n        }\n    }\n</code></pre>\n\n<p>So since this runs that much of iterations I believe there might be a possibility that I would be able to reduce the time taken by using regular addition to do this like.</p>\n\n<pre><code> p1_2weeks = strtol(row[1], NULL, 10) +\n             strtol(row[2], NULL, 10) +\n             ... +\n             strtol(row[14], NULL, 10);\n p2_1months = p1_2weeks +\n             strtol(row[15], NULL, 10) + \n             ... +\n             strtol(row[31], NULL, 10);\n p3_3months = p2_1months +\n             strtol(row[32], NULL, 10) +\n             ... +\n             strtol(row[91], NULL, 10);\n</code></pre>\n\n<p>So can someone suggest which one is better or some other way of doing this right.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1450852404, "post_id": 34429877, "comment_id": 56600894, "body": "Computers might be powerful, but they do have limits. You can&#39;t just put in huge numbers and expect everything to run smoothly. If you really need to use huge numbers, try Ruby or Python 3."}, {"owner": {"reputation": 701, "user_id": 4049762, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ThdiP.jpg?s=128&g=1", "display_name": "dudu", "link": "https://stackoverflow.com/users/4049762/dudu"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1450852569, "post_id": 34429877, "comment_id": 56600975, "body": "@SouravGhosh I&#39;m not sure about that. I have seen pages  saying that this kind of error may be due to memory or swap limitation, or the stackoverflow thing. I don&#39;t know."}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1450854018, "post_id": 34429877, "comment_id": 56601574, "body": "Is a stack overflow,  add <code>-fsanitize=address</code>  to gcc and run it again. Also, I tested it with gcc optimizations <code>-O2</code> and it doesn&#39;t segv... gdb trace here <a href=\"http://pastebin.com/SyXWdrpt\" rel=\"nofollow noreferrer\">pastebin.com/SyXWdrpt</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450855709, "post_id": 34429877, "comment_id": 56602329, "body": "Also see <a href=\"http://stackoverflow.com/questions/22945647/why-does-a-large-local-array-crash-my-program\" title=\"why does a large local array crash my program\">stackoverflow.com/questions/22945647/&hellip;</a>"}, {"owner": {"reputation": 701, "user_id": 4049762, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ThdiP.jpg?s=128&g=1", "display_name": "dudu", "link": "https://stackoverflow.com/users/4049762/dudu"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450856258, "post_id": 34429877, "comment_id": 56602572, "body": "@Lundin Good explaination."}], "answers": [{"comments": [{"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1450854344, "post_id": 34429970, "comment_id": 56601722, "body": "Usually it works just to move the large arrays outside of main, thus moving them from the stack."}, {"owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1450854647, "post_id": 34429970, "comment_id": 56601861, "body": "@ThomasPadron-McCarthy yes good point. Global array would be stored in data segment and will be there until process terminate. While using malloc you have control of that memory and you can free when you want."}], "tags": [], "owner": {"reputation": 23469, "user_id": 775964, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/glHLl.jpg?s=128&g=1", "display_name": "Jeegar Patel", "link": "https://stackoverflow.com/users/775964/jeegar-patel"}, "is_accepted": true, "score": 3, "last_activity_date": 1450856993, "last_edit_date": 1450856993, "creation_date": 1450852618, "answer_id": 34429970, "question_id": 34429877, "link": "https://stackoverflow.com/questions/34429877/segmentation-fault-11-with-large-array/34429970#34429970", "title": "Segmentation fault: 11 with large array", "body": "<p>I think here stack memory is the issue here.</p>\n\n<p>Two solutions:</p>\n\n<ol>\n<li><p>Either increase the stack size for your process.\nNormally <code>ulimit -s</code> will show default size for any process in linux, mac</p></li>\n<li><p>Instead of such large array allocation in stack <code>double arr[num*length];</code>use <code>malloc</code> for such memory allocation in heap.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1450856237, "post_id": 34430548, "comment_id": 56602557, "body": "You&#39;re welcome.  FYI, I just sized your arrays and they totalled out at 11.2 MB"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1450855354, "last_edit_date": 1450855354, "creation_date": 1450855093, "answer_id": 34430548, "question_id": 34429877, "link": "https://stackoverflow.com/questions/34429877/segmentation-fault-11-with-large-array/34430548#34430548", "title": "Segmentation fault: 11 with large array", "body": "<p>You probably are overflowing the stack.  It's default is usually around 8MB.  Since your allocation sizes are fixed, you can move the big arrays to global space and switch many of your fixed values to defines.  Here's an example [please pardon the gratuitous style cleanup]:</p>\n\n<pre><code>#define LENGTH          10000\n#define NUM             100\n#define NUM1            20\n#define NTILE           (NUM / NUM1)\n\n#if 0\n#define DATABLOCKLEN    400002              // DATABLOCKLEN=2*NUM1*LENGTH+2\n#else\n#define DATABLOCKLEN    (2 * NUM1 * LENGTH + 2)\n#endif\n\ndouble arr[NUM * LENGTH];\ndouble res[NUM][NUM];\ndouble array_task[DATABLOCKLEN];\n\nint\nmain()\n{\n\n    for (int i = 0; i &lt; NUM; i++) {\n        for (int j = 0; j &lt; NUM; j++) {\n            res[i][j] = 0;\n        }\n    }\n\n    for (int i = 0; i &lt; (NUM * LENGTH); i++) {\n        arr[i] = i;\n    }\n\n    for (int i = 0; i &lt; NTILE; i++) {\n        for (int j = 0; j &lt; NTILE; j++) {\n            array_task[DATABLOCKLEN - 2] = i * NUM1 * LENGTH;\n            array_task[DATABLOCKLEN - 1] = j * NUM1 * LENGTH;\n            for (int k = 0; k &lt; (NUM1 * LENGTH); k++) {\n                array_task[k] = arr[i * NUM1 * LENGTH + k];\n                array_task[NUM1 * LENGTH + k] = arr[j * NUM1 * LENGTH];\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 4049762, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ThdiP.jpg?s=128&g=1", "display_name": "dudu", "link": "https://stackoverflow.com/users/4049762/dudu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "closed_date": 1450855698, "accepted_answer_id": 34429970, "answer_count": 2, "score": 3, "last_activity_date": 1450856993, "creation_date": 1450852178, "last_edit_date": 1450853595, "question_id": 34429877, "link": "https://stackoverflow.com/questions/34429877/segmentation-fault-11-with-large-array", "closed_reason": "Duplicate", "title": "Segmentation fault: 11 with large array", "body": "<p>A simple program compiles fine but gives run-time error: <code>segmentation fault: 11</code></p>\n\n<pre><code>int length=10000;\nint num=100;\nint num1=20;\nint datablocklen=400002; //datablocklen=2*num1*length+2\n\nint main(){\n  double arr[num*length];\n  double res[num][num];\n  for(int i=0;i&lt;num;i++){\n    for(int j=0;j&lt;num;j++){\n      res[i][j]=0;\n    }\n  }\n  for(int i=0;i&lt;(num*length);i++){\n    arr[i]=i;\n  }\n  int ntile=(int)(num/num1);\n  double array_task[datablocklen];\n  for(int i=0;i&lt;ntile;i++){\n    for(int j=0;j&lt;ntile;j++){\n    array_task[datablocklen-2]=i*num1*length;\n    array_task[datablocklen-1]=j*num1*length;\n      for(int k=0;k&lt;(num1*length);k++){\n        array_task[k]=arr[i*num1*length+k];\n        array_task[num1*length+k]=arr[j*num1*length];\n      }\n    }\n  }\nreturn 0;\n}\n</code></pre>\n\n<p><code>gcc -o test -std=c99 test.c</code> to get the executable.  </p>\n\n<p>Strange still, the error does not show up if length is assigned a small value, say, 1000. But when it is larger than 10000, segmentation fault occurs.  </p>\n\n<p>Please <strong>note</strong> that I always keep an eye on the the value of datablocklen to make sure that <code>datablocklen=2*num1*length+2</code>. So if <code>length</code> or <code>num1</code> changes, I will also change variable <code>datablocklen</code>.  </p>\n\n<p>I still have some problem dealing with gdb under mac, OS yosemite. So I have not debugged the program with gdb. But if I comment the inner for loop, the loop indexed by k, the program executes fine. I mean, no error message.  </p>\n"}, {"tags": ["c", "linux", "gcc", "cygwin", "cross-compiling"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451033838, "post_id": 34429630, "comment_id": 56664798, "body": "I just read the referenced link.  The instructions were crystal clear,  Exactly where are you in the process and exactly what did you not understand?"}, {"owner": {"reputation": 313, "user_id": 1412233, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/5cea7ec45a9049a0724edc2f358e732a?s=128&d=identicon&r=PG", "display_name": "Masthan Vali Syed", "link": "https://stackoverflow.com/users/1412233/masthan-vali-syed"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451109657, "post_id": 34429630, "comment_id": 56679700, "body": "I was trying to download the file &quot;cygwin-gcc-linux.tar.bz2&quot; (file size 62 MB) which is mentioned in the Step2. But given link file size is not more than 75 KB. Please tell me which is the right file that I should download."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1451149383, "post_id": 34429630, "comment_id": 56688130, "body": "I followed through the posted link.  It is NOT for compiling files on cygwin for linux.  It is some kind of plugin developer for game support.   I do not have a suggested link for the appropriate cross compiler.   sorry"}], "owner": {"reputation": 313, "user_id": 1412233, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/5cea7ec45a9049a0724edc2f358e732a?s=128&d=identicon&r=PG", "display_name": "Masthan Vali Syed", "link": "https://stackoverflow.com/users/1412233/masthan-vali-syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450854733, "creation_date": 1450850961, "last_edit_date": 1450854733, "question_id": 34429630, "link": "https://stackoverflow.com/questions/34429630/how-to-use-cygwin-cross-compiler-in-windows-to-linux", "title": "How to use cygwin cross compiler in Windows to Linux", "body": "<p>I am using Windows OS. I have C project (Eclipse IDE and GCC compiler). I want to generate Linux supported file (*.out file) using Cygwin from Windows. Please let me know how can I do that.</p>\n\n<p>So far I have tried this <a href=\"http://metamod-p.sourceforge.net/cross-compiling.on.windows.for.linux.html\" rel=\"nofollow\">link</a>.</p>\n\n<p>But the procedure given is not clear after installing Cygwin. </p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 4909, "user_id": 911550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WHa6T.jpg?s=128&g=1", "display_name": "parvus", "link": "https://stackoverflow.com/users/911550/parvus"}, "edited": false, "score": 0, "creation_date": 1450853280, "post_id": 34429547, "comment_id": 56601236, "body": "I think you&#39;re being confounded by several things: no increment in the second loop; different order of printf and scanf in the second loop; reading  a number in the first loop (which also eats the newline) vs reading a character in the second loop (which doesn&#39;t eat the newline, so you&#39;ll read that separately as well). Can you try to simplify things further, provide your real output, and state your expected output?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1450855823, "post_id": 34429547, "comment_id": 56602377, "body": "Always, <i>always</i> check return value of <code>scanf</code> (check what it means, if you don&#39;t know)."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5702749, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/60c1882015e42fffdc5419d7b1ecdfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas", "link": "https://stackoverflow.com/users/5702749/tejas"}, "edited": false, "score": 0, "creation_date": 1450851949, "post_id": 34429571, "comment_id": 56600701, "body": "can you explain me the internals of scanf"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 87, "user_id": 5702749, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/60c1882015e42fffdc5419d7b1ecdfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas", "link": "https://stackoverflow.com/users/5702749/tejas"}, "edited": false, "score": 0, "creation_date": 1450852172, "post_id": 34429571, "comment_id": 56600786, "body": "You can read some tutorial for c input/outputs functions. There you can find the details about data types and their corresponding format specifiers."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 0, "last_activity_date": 1450850677, "creation_date": 1450850677, "answer_id": 34429571, "question_id": 34429547, "link": "https://stackoverflow.com/questions/34429547/scanf-giving-random-behaviour/34429571#34429571", "title": "scanf giving random behaviour", "body": "<p><code>%c</code>specifier is for characters not for <code>int</code> data types. Using wrong format specifier for a data type invoke undefined behavior.  </p>\n\n<p>Also note that <code>i</code> is not incrementing in the second loop. This will lead to an infinite <code>while</code> loop.</p>\n"}], "owner": {"reputation": 87, "user_id": 5702749, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/60c1882015e42fffdc5419d7b1ecdfb8?s=128&d=identicon&r=PG&f=1", "display_name": "Tejas", "link": "https://stackoverflow.com/users/5702749/tejas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34429571, "answer_count": 1, "score": 0, "last_activity_date": 1450850677, "creation_date": 1450850535, "question_id": 34429547, "link": "https://stackoverflow.com/questions/34429547/scanf-giving-random-behaviour", "title": "scanf giving random behaviour", "body": "<p>Can someone explain me the working of scanf. If i am entering s as integer it would work fine but i enter a character it would run continuously till it exits the loop. So it is not removing the character from the buffer and not asking for input. Can you provide more insight on scanf and it's internal implementation  </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n   int s,i = 0;\n   while(i &lt; 10)\n   {\n     scanf(\"%d\",&amp;s);\n     i++;\n    printf(\"%d\",s);\n\n   }\n\n  while(i &lt; 20)\n  {\n    printf(\"%d\",s);\n    scanf(\"%c\",&amp;s); \n  }\n\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "sorting", "quicksort"], "comments": [{"owner": {"reputation": 15906, "user_id": 1172798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0c7b.jpg?s=128&g=1", "display_name": "devpro", "link": "https://stackoverflow.com/users/1172798/devpro"}, "edited": false, "score": 0, "creation_date": 1450852728, "post_id": 34429363, "comment_id": 56601038, "body": "In my last post i share the c++ example, don&#39;t consider it, for C, i am sharing a reference, read this: <a href=\"http://www.cquestions.com/2008/01/c-program-for-quick-sort.html\" rel=\"nofollow noreferrer\">cquestions.com/2008/01/c-program-for-quick-sort.html</a>"}, {"owner": {"reputation": 4376, "user_id": 2850543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2bb15c1da6de8180d9adc99954f167f7?s=128&d=identicon&r=PG&f=1", "display_name": "Millie Smith", "link": "https://stackoverflow.com/users/2850543/millie-smith"}, "edited": false, "score": 0, "creation_date": 1450853159, "post_id": 34429363, "comment_id": 56601197, "body": "<code>for (j = l+1; j &lt; len; j++)</code> looks wrong. What if <code>l</code> is 7 and <code>r</code> is something like 12? <code>len</code> is 6 but <code>j</code> starts at 8. The for loop will never run."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1450890812, "post_id": 34430158, "comment_id": 56622429, "body": "Thanks for pointing out the error in the line quicksort(ptr, low, p). In the loop where j runs from l+1 to r-l+1, I changed it to for (j = l+1; j &lt; r; j++), but it still doesn&#39;t work. Can you explain a little more? Thanks"}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "reply_to_user": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1451373590, "post_id": 34430158, "comment_id": 56754147, "body": "Sorry for delayed reply...Didn&#39;t check on SO for last few days. I&#39;ve edited the answer with a possible partition function."}], "tags": [], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "is_accepted": false, "score": 2, "last_activity_date": 1451373501, "last_edit_date": 1451373501, "creation_date": 1450853445, "answer_id": 34430158, "question_id": 34429363, "link": "https://stackoverflow.com/questions/34429363/quicksort-implementation-in-c-using-first-element-as-pivot/34430158#34430158", "title": "Quicksort implementation in C using first element as pivot", "body": "<p>2 corrections.</p>\n\n<p>Small one: Change 3rd line inside if block in QuickSort function</p>\n\n<p>from</p>\n\n<pre><code>quicksort(ptr, low, p);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>quicksort(ptr, low, p-1);\n</code></pre>\n\n<p>This will improve performance.</p>\n\n<p>Main error:</p>\n\n<p>Your partition function is wrong. Specifically the loop where <code>j</code> runs from <code>l+1</code> to <code>r-l+1</code>, because, <code>r-l+1</code> can be less than <code>l+1</code></p>\n\n<p>I'll write the partition function for you if you want (post a comment if you face any problem with that) though I'd advice you to do it yourself.</p>\n\n<p>EDIT:</p>\n\n<p>A possible partition function:</p>\n\n<pre><code>int partition(int *q, int l, int r){\n    int i,j;\n    int p = *(q + l);\n    for(i = l + 1, j = r; ;){\n        while(*(q + i) &lt;= p)\n            i++;\n        while(*(q + j) &gt;= p)\n            j--;\n        if(i &gt;= j)\n            break;\n        swap(q, i, j);\n    }\n    return i;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1451069345, "post_id": 34446673, "comment_id": 56672960, "body": "thanks. But, I was trying to implement the loops in the partition function so that both i and j start from the lower index, i.e. i from l+1 and j from l+1. Based on your partition function, it seems that my implementation is similar with the only difference being you are decresing the values of i and j in each loop while I am increasing. But, I cannot see why my implementation doesn&#39;t work."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1451084063, "post_id": 34446673, "comment_id": 56676220, "body": "@dwd - I updated my answer to show your implementation with just the changes, three fixes and one optimization. I&#39;ll delete this comment later."}, {"owner": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1451196508, "post_id": 34446673, "comment_id": 56697661, "body": "So, in the partition function, the only change from my implementation is that the for loop for j should be for (j = l+1; j &lt;= r; j++), right?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "edited": false, "score": 0, "creation_date": 1451206382, "post_id": 34446673, "comment_id": 56699543, "body": "@dwd - every line with a comment was a fix or in one case an optimization."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1451083943, "last_edit_date": 1451083943, "creation_date": 1450925662, "answer_id": 34446673, "question_id": 34429363, "link": "https://stackoverflow.com/questions/34429363/quicksort-implementation-in-c-using-first-element-as-pivot/34446673#34446673", "title": "Quicksort implementation in C using first element as pivot", "body": "<p>Changes noted in comments.</p>\n\n<pre><code>int partition(int *q, int l, int r)\n{\n    int i = l+1, j;\n    int p = l;\n                                    /* fix: int len = r-l+1; is not used */\n    for (j = l+1; j &lt;= r; j++)      /* fix: j &lt;= r */\n    {\n        if ( *(q+j) &lt;= *(q+p) )     /* fix: &lt;= */\n        {\n            swap(q, i, j);\n            i += 1;\n        }\n    }\n    swap(q, l, i-1);\n    return (i-1);\n}\n\nvoid quicksort(int *ptr, int low, int high)\n{\n    if (low &lt; high)\n    {\n        int p = partition(ptr, low, high);\n        quicksort(ptr, low, p-1);   /* optimization: p-1 */\n        quicksort(ptr, p+1, high);\n    }\n}\n</code></pre>\n\n<p>If interested, Hoare partition scheme is faster. If you switch to this, don't forget to change the two quicksort calls to quicksort(lo, p) and quicksort(p+1, hi) ). You might want to change the Hoare pivot to pivot = A[(lo+hi)/2], which will avoid worst case issue with sorted or reverse sorted array. </p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme</a></p>\n"}], "owner": {"reputation": 57, "user_id": 5709813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d838e8cd066f594a064edd1359f79d32?s=128&d=identicon&r=PG&f=1", "display_name": "dwd", "link": "https://stackoverflow.com/users/5709813/dwd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2057, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1451373501, "creation_date": 1450849474, "last_edit_date": 1450852071, "question_id": 34429363, "link": "https://stackoverflow.com/questions/34429363/quicksort-implementation-in-c-using-first-element-as-pivot", "title": "Quicksort implementation in C using first element as pivot", "body": "<p>I am a complete beginner to stackoverflow and this is my first post. Please forgive if this is not the correct place to post these kinds of queries. I have written code for the <code>Quicksort</code> algorithm, based on the algorithm given in the Algorithms course in Coursera(It is not for any assignments though). </p>\n\n<p>Basically, there are two functions <code>Quicksort</code> which is called <em>recursively and partition()</em> function that returns the index of the pivot. I select the pivot as the first element of the array every time. I checked the partition() function and it works fine but the array is not sorted even after I call the <code>Quicksort()</code> function. </p>\n\n<p>Any help is appreciated. Thanks. </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    void swap(int *p, int i, int j)\n    {\n        int temp = *(p+i);\n        *(p+i) = *(p+j);\n        *(p+j) = temp;\n    }\n\n    int partition(int *q, int l, int r)\n    {\n        int i = l+1, j;\n        int p = l;\n        int len  = r-l +1;\n        for (j = l+1; j &lt; len; j++)\n        {\n            /*printf(\"%d \\n\", j);*/\n            if ( *(q+j) &lt; *(q+p) )\n            {\n                swap(q, i, j);\n                i += 1;\n            }\n        }\n        swap(q, l, i-1);\n        /*printf(\"%d\", i-1);*/\n        return (i-1);\n    }\n\n    void quicksort(int *ptr, int low, int high)\n    {\n        if (low &lt; high)\n        {\n            int p = partition(ptr, low, high);\n            printf(\"%d\\n\", p);\n            quicksort(ptr, low, p);\n            quicksort(ptr, p+1, high);\n        }\n    }\n\n\n    int main(){\n        int i;\n        int a[] = {3, 8, 2, 5, 1, 4, 7, 6};\n        int len  = sizeof(a)/sizeof(a[0]);\n        for ( i = 0; i &lt; len; ++i)\n        {\n            printf(\"%d \", a[i]);\n        }\n        printf(\"\\n\");\n        int *ptr = a;\n        quicksort(ptr, 0, len-1);\n        for (i = 0; i &lt; sizeof(a)/sizeof(a[0]); ++i)\n        {\n            printf(\"%d \", a[i]);\n        }\n        printf(\"\\n\");\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp", "libpcap"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1450849978, "last_edit_date": 1450849978, "creation_date": 1450849602, "answer_id": 34429388, "question_id": 34429268, "link": "https://stackoverflow.com/questions/34429268/libpcap-printing-tcp-source-and-destination-ports/34429388#34429388", "title": "libpcap: printing tcp source and destination ports", "body": "<p>The ports are stored in <strong>network byte order</strong> (big endian) in the TCP header (most protocols send multi-byte numbers over a network using big endian, hence the nickname).  Wireshark is merely converting the bytes to <strong>host byte order</strong> (big or little endian, depending on your PC's hardware, hence the nickname) when it is translating the bytes into human-readable numbers.  In your code, you can use your platform's <code>ntohs()</code> function to do the same thing.</p>\n"}], "owner": {"reputation": 3, "user_id": 2545357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ab343791be63c6b4eec8a8dc02504b?s=128&d=identicon&r=PG&f=1", "display_name": "SurajHande", "link": "https://stackoverflow.com/users/2545357/surajhande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34429388, "answer_count": 1, "score": 0, "last_activity_date": 1450850538, "creation_date": 1450848954, "last_edit_date": 1450850538, "question_id": 34429268, "link": "https://stackoverflow.com/questions/34429268/libpcap-printing-tcp-source-and-destination-ports", "title": "libpcap: printing tcp source and destination ports", "body": "<p>I am facing a weird problem </p>\n\n<p>retrieving tcp header and trying to print source and destination ports \ncode :</p>\n\n<pre><code>src_p = tcp-&gt;th_sport;\ndest_p = tcp-&gt;th_dport;\noutput  (in hex):\n8e08 and 64a2\n</code></pre>\n\n<p>wireshark shows that the ports are\n088e and a264</p>\n\n<p>why is libpcap swapping the bytes?\nor is there something wrong with my code?</p>\n\n<p>PS: I am using structs shown in <a href=\"http://www.tcpdump.org/pcap.html\" rel=\"nofollow\">this program</a>.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1420, "user_id": 693416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b40373fe8f75f5eed0609e695042d528?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/693416/greg"}, "edited": false, "score": 2, "creation_date": 1450847770, "post_id": 34429038, "comment_id": 56599160, "body": "Any debugger should be able to help you walk through and identify the section of code generating the error.  Once you know that if you cannot determine the cause, you can provide a smaller code example we can help you with."}, {"owner": {"reputation": 1420, "user_id": 693416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b40373fe8f75f5eed0609e695042d528?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/693416/greg"}, "edited": false, "score": 0, "creation_date": 1450847853, "post_id": 34429038, "comment_id": 56599195, "body": "Consider some comments or other explanation of your code as well.  The while loop in your main function is particularly puzzling."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450848610, "post_id": 34429038, "comment_id": 56599447, "body": "Are you aware that a) you&#39;re flushing stdin for every char you read? b) flushing input streams is undefined behavior c) this will infinite loop on machines where char is unsigned because <code>c</code> isn&#39;t big enough to hold EOF (which is an <code>int</code>)? Of course that&#39;s not the cause of your crash. Learn the basics of debugging, or learn a different language ... it&#39;s almost 2016 and there&#39;s no excuse for using C ... especially the way you&#39;re writing in it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1450848776, "post_id": 34429038, "comment_id": 56599492, "body": "You seem to be confused about how <code>free</code> works. There should be exactly one <code>free</code> for each <code>malloc</code>. And you should only call <code>free</code> when you&#39;re done with the memory that <code>malloc</code> gave you."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450848809, "post_id": 34429038, "comment_id": 56599504, "body": "Oh, hey, this is certainly a bug: <code>for(int j=0;i&lt;_no_city;j++)</code> ... learn to put spaces around operators instead of cramming everything together like that and it will be easier to see. And for FSM&#39;s sake don&#39;t start variable names with underscores."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450849099, "post_id": 34429038, "comment_id": 56599587, "body": "Yeah, the frees in <code>display</code> and <code>total</code> are nonsensical, but it&#39;s hard to make sense of any of this. Either pick meaningful names, or document the semantics of everything. (The former is preferred where possible.)"}], "answers": [{"tags": [], "owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "is_accepted": true, "score": 0, "last_activity_date": 1450849351, "creation_date": 1450849351, "answer_id": 34429335, "question_id": 34429038, "link": "https://stackoverflow.com/questions/34429038/segmentation-fault-issue-unable-to-detect/34429335#34429335", "title": "Segmentation Fault issue, unable to detect", "body": "<p>There are quite a few bugs in your program, but this one</p>\n\n<blockquote>\n<pre><code>for(int j=0;i&lt;_no_city;j++)\n{\n    insert(link[i],x[j],pop[j]);\n}\n</code></pre>\n</blockquote>\n\n<p>will run off the end of <code>x</code> and <code>pop</code> because your loop condition is wrong, and is probably the cause of your crash. </p>\n"}], "owner": {"reputation": 3, "user_id": 1493276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jHBIK73gaIU/AAAAAAAAAAI/AAAAAAAAAPA/nDIAP_n-Xqk/photo.jpg?sz=128", "display_name": "Soham Chatterjee", "link": "https://stackoverflow.com/users/1493276/soham-chatterjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1450865193, "accepted_answer_id": 34429335, "answer_count": 1, "score": -4, "last_activity_date": 1450849351, "creation_date": 1450847606, "last_edit_date": 1450848216, "question_id": 34429038, "link": "https://stackoverflow.com/questions/34429038/segmentation-fault-issue-unable-to-detect", "closed_reason": "Not suitable for this site", "title": "Segmentation Fault issue, unable to detect", "body": "<p>Can someone help me with this piece of code. I am getting segmentation fault. Kindly help me out as to where I am going wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct city\n{\n    int x;\n    int pop;\n    struct city *next;\n};\nstruct list\n{\n    struct city *head;\n};\n\nvoid insert(struct list *list1,int a,int b)\n{\n    struct city *node = (struct city *)malloc(sizeof(struct city));\n    node-&gt;x=a;\n    node-&gt;pop = b;\n    if(list1-&gt;head!=NULL)\n    {\n        node-&gt;next=list1-&gt;head;\n    }\n    list1-&gt;head=node;\n}\n\nvoid initialize_list(struct list *list1)\n{\n    list1-&gt;head = NULL;\n}\n\nvoid display(struct list *list)\n{\n    struct city *temp = list-&gt;head;\n    while(temp!=NULL)\n    {\n        printf(\"%d %d\\n\",temp-&gt;x,temp-&gt;pop);\n        temp=temp-&gt;next;\n    }\n    free(temp);\n}\nvoid getdata(int *x)\n{\n    char s[1000];\n    char c;\n\n    scanf(\"%[^\\n]%*s\",s);\n\n    char *p=s;\n    int i =0;\n    while(*p!='\\0')\n    {\n        while(*p==' ' &amp;&amp; *p!='\\0')\n            p++;\n        if(*p!='\\0')\n            x[i] = atoi(p);\n        while(*p!=' ' &amp;&amp; *p!='\\0')\n            p++;\n        i++;\n    }\n}\nint max(int a,int b)\n{\n    if(a&gt;b)\n        return a;\n    else\n        return b;\n}\n\nint total(struct list *link)\n{\n    struct city *r1,*r2;\n    r1=link-&gt;head;\n    r2 = r1;\n    int S=0;\n    while(r1!=NULL)\n    {\n        r2 = r1;\n        while(r2!=NULL)\n        {   \n            S=S+max(r1-&gt;pop,r2-&gt;pop)*abs((r2-&gt;x)-(r1-&gt;x));\n            r2=r2-&gt;next;\n        }\n        r1=r1-&gt;next;\n\n    }\n    printf(\"\\n%d\",S);\n    free(r1);\n    free(r2);\n    return S;\n}\n\nint main()\n{\n    int T;\n    int *x,*pop;\n    int _no_city;\n    char c;\n    scanf(\"%d\",&amp;T);\n\n    struct list **link = (struct list **)malloc(T*sizeof(struct list*));\n    for(int i=0;i&lt;T;i++)\n    {\n        link[i]=(struct list *)malloc(sizeof(struct list));\n    }\n\n    for(int i =0;i&lt;T;i++)\n    {\n        scanf(\"%d\",&amp;_no_city);\n\n        x = (int *)malloc(_no_city*sizeof(int));\n        pop = (int *)malloc(_no_city*sizeof(int));\n        while((c= getchar()) != '\\n' &amp;&amp; c != EOF)\n\n        fflush(stdin);\n        getdata(x);\n        getdata(pop);\n\n        initialize_list(link[i]);\n        for(int j=0;i&lt;_no_city;j++)\n        {\n            insert(link[i],x[j],pop[j]);\n        }\n        free(x);\n        free(pop);\n    }\n\n    for(int i=0;i&lt;T;i++)\n    {\n        printf(\"%d\",total(link[i]));\n    }\n}\n</code></pre>\n\n<p>Is the problem lying with my declaring a pointer to pointer, I did that so that I can create an array of pointers of variable length.</p>\n"}, {"tags": ["c", "hash", "cryptography"], "comments": [{"owner": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450871946, "post_id": 34428734, "comment_id": 56611208, "body": "OK, I compiled both C source codes (from RFC 1320 and from link <a href=\"http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4\" rel=\"nofollow noreferrer\">openwall.info/wiki/people/solar/software/&hellip;</a>) and both .exe files produce correct output on my PC."}, {"owner": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450872125, "post_id": 34428734, "comment_id": 56611299, "body": "A few ideas: 1. check that <code>#define MD 4</code>, <code>#define MD_CTX MD4_CTX</code>, <code>#define MDInit MD4Init</code>, <code>#define MDUpdate MD4Update</code>, <code>#define MDFinal MD4Final</code> in mddriver.c. 2. check that you call <code>MD4_Init(ctx);</code> before computing hash in the second source code (the struct <code>MD4_CTX</code> could initially contain some unpredictable data if you call <code>malloc</code> instead of <code>calloc</code>)"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450893002, "post_id": 34428734, "comment_id": 56623638, "body": "Thanks for taking a look at this. Yes, I&#39;m using all of the MD4 functions and not any others. However, what&#39;s this about malloc vs calloc? The <code>typedef struct MD4_CTX</code> is has fields initialized as arrays, i.e. <code>UINT4 state[4];</code> and when testing, a context is simply initialized: <code>MD4_CTX context;</code>. Then of course, Init, Update and Final are called in that order. Is it possible that initializing variables as arrays instead of using <code>malloc</code> or <code>calloc</code> creates issues with passing local variables?"}, {"owner": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450895036, "post_id": 34428734, "comment_id": 56624660, "body": "What OS do you use? 32bit, or 64bit?"}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450895127, "post_id": 34428734, "comment_id": 56624701, "body": "running in a x86_64 Ubuntu build in Virtualbox on a 64 bit Windows."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1450896518, "post_id": 34428734, "comment_id": 56625349, "body": "...and <code>UINT4</code> etc. are typedef&#39;d to be unsigned longs, which are 64 bits on my processor. I&#39;m going to try changing this and see if it works..."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "reply_to_user": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 1, "creation_date": 1450896697, "post_id": 34428734, "comment_id": 56625444, "body": "That was the problem. Changing <code>typedef unsigned long int UINT4;</code> to <code>typedef uint32_t UINT4;</code> (and likewise to <code>uint16_t</code> for <code>UINT2</code>) fixed everything. Thank you for your help and for asking the obvious question for me!!"}, {"owner": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 1, "creation_date": 1450896746, "post_id": 34428734, "comment_id": 56625478, "body": "Great, post it as an answer, I will upvote it."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "reply_to_user": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 1, "creation_date": 1450901942, "post_id": 34428734, "comment_id": 56627910, "body": "@vojta It was posted :)"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1450903998, "post_id": 34428734, "comment_id": 56628798, "body": "Hint: <code>UINT4</code> is a horrible name for a variable, make names  indicate what they hold, not their type. <code>typedef uint32_t UINT4</code> is also bad because if <code>uint32_t</code> is used others will know what it is, <code>UINT4</code> is unclear and confusing. Writing good code is all about clarity and understandability for other developer, you never want the next developer to have a WTF moment."}, {"owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "edited": false, "score": 0, "creation_date": 1450904308, "post_id": 34428734, "comment_id": 56628925, "body": "UINT4 <i>is</i> a type, not a variable. And, to be clear, in my own code I would never create a type called UINT4 which is actually just a uint32_t, but I&#39;m modifying legacy code to work properly on my computer for the sole purpose of testing my own code. I appreciate that you&#39;re trying to be helpful, but I don&#39;t think you read the question."}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "is_accepted": true, "score": 2, "last_activity_date": 1450896990, "creation_date": 1450896990, "answer_id": 34442024, "question_id": 34428734, "link": "https://stackoverflow.com/questions/34428734/md4-rfc1320-giving-wrong-hashes/34442024#34442024", "title": "MD4 RFC1320 giving wrong hashes", "body": "<p>With help from @vojta, I figured out that the problem was in <code>global.h</code>, where <code>typedef unsigned long int UINT4</code> needed to be changed to <code>typedef uint32_t UINT4</code>. On my machine, an unsigned long int is a 64-bit entity, and that was messing everything up. </p>\n\n<p>(Of course, <code>UINT2</code> also needs to be typedef'd to <code>uint16_t</code>).</p>\n"}], "owner": {"reputation": 813, "user_id": 3543200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0e080d0d27c61c16444b17d0aae7b3c8?s=128&d=identicon&r=PG", "display_name": "gmoss", "link": "https://stackoverflow.com/users/3543200/gmoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 34442024, "answer_count": 1, "score": 2, "last_activity_date": 1450896990, "creation_date": 1450845537, "last_edit_date": 1450848809, "question_id": 34428734, "link": "https://stackoverflow.com/questions/34428734/md4-rfc1320-giving-wrong-hashes", "title": "MD4 RFC1320 giving wrong hashes", "body": "<p>I was trying to get my own implementation of the MD4 hash working, for the Matasano problems, and could not get the correct test vectors. I assumed I was messing up the endianness or something or other at some point.</p>\n\n<p>To figure out where I was going wrong, I decided to compile the reference implementation given in <a href=\"https://tools.ietf.org/html/rfc1320\" rel=\"nofollow\">RFC1320</a>, go through both programs with a debugger and play \"spot the difference.\" I copy/pasted that code, with no modifications, and ran it with -x (the \"test suite\" option). </p>\n\n<p>I got the wrong test vectors.</p>\n\n<p>Specifically, the output I got was</p>\n\n<pre><code>MD4 test suite:\nMD4 (\"\") = 3e8ce4256176cc6f23583a774a91316c\nMD4 (\"a\") = 40b4c066caa949d3e0576277d2d310df\nMD4 (\"abc\") = a013c51eca433daca5b2a594d21af1fe\nMD4 (\"message digest\") = 40de4367b3e76cee4dc5d90372ced0cf\nMD4 (\"abcdefghijklmnopqrstuvwxyz\") = d9b9fc5aa9bfcbefac96214ae64ede8b\nMD4 (\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\") = 44e0908e086752b6c2b8738212ce278f\nMD4 (\"12345678901234567890123456789012345678901234567890123456789012345678901234567890\") = d219055e9ccff0c40caa7efcef86e10f\n</code></pre>\n\n<p>which, if you compare to the test vectors on <a href=\"https://tools.ietf.org/html/rfc1320\" rel=\"nofollow\">RFC1320</a> (or on <a href=\"https://en.wikipedia.org/wiki/MD4#MD4_test_vectors\" rel=\"nofollow\">Wikipedia</a>), are totally incorrect.</p>\n\n<p>I then did the same thing with another implementation of the md4 hash which I found online (<a href=\"http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4\" rel=\"nofollow\">this one</a>), and got <em>the same erroneous test vectors</em>.</p>\n\n<p>How do I begin to figure out where the error is? Am I including some incorrect standard library? Is my processor architecture wrong? Googling the incorrect hashes gives me zero results, so I have to conclude I'm the only idiot who has ever had this problem. </p>\n\n<p>Really appreciate any suggestions on where to start looking. </p>\n"}, {"tags": ["c", "makefile", "clang"], "comments": [{"owner": {"reputation": 34900, "user_id": 493161, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef45d137e9629d3fbe9c5f84997ac5ff?s=128&d=identicon&r=PG", "display_name": "jcomeau_ictx", "link": "https://stackoverflow.com/users/493161/jcomeau-ictx"}, "edited": false, "score": 1, "creation_date": 1450846253, "post_id": 34428721, "comment_id": 56598651, "body": "wow, that&#39;s a tough one. did you try <code>make -n -d lisppair.o</code>, after removing it?"}, {"owner": {"reputation": 34900, "user_id": 493161, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef45d137e9629d3fbe9c5f84997ac5ff?s=128&d=identicon&r=PG", "display_name": "jcomeau_ictx", "link": "https://stackoverflow.com/users/493161/jcomeau-ictx"}, "edited": false, "score": 0, "creation_date": 1450846757, "post_id": 34428721, "comment_id": 56598826, "body": "dawsonc623: there&#39;s an implicit rule."}, {"owner": {"reputation": 34900, "user_id": 493161, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef45d137e9629d3fbe9c5f84997ac5ff?s=128&d=identicon&r=PG", "display_name": "jcomeau_ictx", "link": "https://stackoverflow.com/users/493161/jcomeau-ictx"}, "edited": false, "score": 1, "creation_date": 1450847082, "post_id": 34428721, "comment_id": 56598940, "body": "kaylum figured it out."}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 3893444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2f955bc2d01bc8ed99917c4ba9d4afe?s=128&d=identicon&r=PG", "display_name": "ptdecker", "link": "https://stackoverflow.com/users/3893444/ptdecker"}, "edited": false, "score": 0, "creation_date": 1450847231, "post_id": 34428945, "comment_id": 56598991, "body": "Well, I don&#39;t know what to say.  What an amazing thing.  I felt like such a dummy.  Thanks for catching that and all I can say is thank goodness I thought to post the link to the source in github."}, {"owner": {"reputation": 317, "user_id": 3893444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2f955bc2d01bc8ed99917c4ba9d4afe?s=128&d=identicon&r=PG", "display_name": "ptdecker", "link": "https://stackoverflow.com/users/3893444/ptdecker"}, "edited": false, "score": 0, "creation_date": 1450847568, "post_id": 34428945, "comment_id": 56599098, "body": "How did you see that on github? Were you using just the source viewer or did you have a tool that highlighted whitespace variances?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 317, "user_id": 3893444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2f955bc2d01bc8ed99917c4ba9d4afe?s=128&d=identicon&r=PG", "display_name": "ptdecker", "link": "https://stackoverflow.com/users/3893444/ptdecker"}, "edited": false, "score": 1, "creation_date": 1450847725, "post_id": 34428945, "comment_id": 56599141, "body": "Firstly, in my experience, strange Makefile problems are often caused by extra or missing tabs (great idea that was to make an invisible character so important! :-) So I had an idea what I was looking for. Then the trick is just to select all the text in the browser (with the mouse or Ctrl-a) and that will show up all whitespaces."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1450848041, "post_id": 34428945, "comment_id": 56599256, "body": "I turn on visible whitespace in all my code editors now .. I wish everyone did so that they don&#39;t leave messy tab/spaces intermixing or trailing whitespace about the place :("}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 3, "last_activity_date": 1450846898, "creation_date": 1450846898, "answer_id": 34428945, "question_id": 34428721, "link": "https://stackoverflow.com/questions/34428721/how-do-i-correct-my-makefile-so-that-it-builds-all-my-source-files-answer-che/34428945#34428945", "title": "How do I correct my Makefile so that it builds all my source files? (Answer: check for hidden tabs)", "body": "<p>The problem is only evident if you look at the original <code>Makefile</code> in github. There is an errant tab on line 37 (the line after the <code># clean</code> comment). Remove that tab and you should be good to go.</p>\n"}], "owner": {"reputation": 317, "user_id": 3893444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2f955bc2d01bc8ed99917c4ba9d4afe?s=128&d=identicon&r=PG", "display_name": "ptdecker", "link": "https://stackoverflow.com/users/3893444/ptdecker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34428945, "answer_count": 1, "score": 3, "last_activity_date": 1450847728, "creation_date": 1450845493, "last_edit_date": 1450847728, "question_id": 34428721, "link": "https://stackoverflow.com/questions/34428721/how-do-i-correct-my-makefile-so-that-it-builds-all-my-source-files-answer-che", "title": "How do I correct my Makefile so that it builds all my source files? (Answer: check for hidden tabs)", "body": "<p>In OS X v10.10.5 using clang v7.0.2 and make v3.81, I am having some problems with what I thought to be a straight-forward Makefile on a current project.</p>\n\n<p>The problem developed when I added one more .h/.c pair of files--everything seemed to be working fine prior. Now make will not 'pick up' and build the new source even though I can build it manually with success. Make seems to think that the .o file is up to date even though it does not appear to even exist.</p>\n\n<p>Here is a dump of my relevant project directories for reference:</p>\n\n<pre><code>$ ls -R\n.:\nLICENSE  Makefile  README.md  docs  include  src\n\n./docs:\nptscheme.ebnf\n\n./include:\nlispbool.h  lispchar.h  lisperr.h  lispint.h  lisppair.h  lispstr.h memmanager.h  ptscheme.h\n\n./src:\nlispbool.c  lispchar.c  lisperr.c  lispint.c  lisppair.c  lispstr.c  memmanager.c  ptscheme.c\n</code></pre>\n\n<p>And, here are the contents of my Makefile:</p>\n\n<pre><code>$ cat Makefile\n# Basic Makefile for ptscheme\n\n# Set our paths to traditional locations for files:\n#      ./src - c source files\n#      ./include - c header files\n\nvpath %.c src\nvpath %.h include\n\nCC = clang\nCPPFLAGS = -std=c99 -Wall -g -I include\nobjects = ptscheme.o memmanager.o lispbool.o lispchar.o lispint.o \\\n          lispstr.o lisperr.o lisppair.o\n\nall: ptscheme\n\nptscheme: $(objects)\n    clang $(CPPFLAGS) -o ptscheme $(objects)\n\nptscheme.o: ptscheme.h memmanager.h\n\nmemmanager.o: ptscheme.h memmanager.h\n\nlispbool.o: ptscheme.h memmanager.h lispbool.h\n\nlispchar.o: ptscheme.h memmanager.h lispchar.h\n\nlispint.o: ptscheme.h memmanager.h lispint.h\n\nlispstr.o: ptscheme.h memmanager.h lispstr.h\n\nlisperr.o: ptscheme.h memmanager.h lisperr.h\n\nlisppair.o: ptscheme.h memmanager.h lisppair.h\n\n# clean - Implement standard 'clean' target to clean up after ourselves\n\n.PHONY: clean\nclean:\n    rm -f ptscheme $(objects)\n</code></pre>\n\n<p>Here is what happens when I attempt to run make:</p>\n\n<pre><code>   $ make\n   clang  -std=c99 -Wall -g -I include  -c -o ptscheme.o src/ptscheme.c\n   clang  -std=c99 -Wall -g -I include  -c -o memmanager.o src/memmanager.c\n   clang  -std=c99 -Wall -g -I include  -c -o lispbool.o src/lispbool.c\n   clang  -std=c99 -Wall -g -I include  -c -o lispchar.o src/lispchar.c\n   clang  -std=c99 -Wall -g -I include  -c -o lispint.o src/lispint.c\n   clang  -std=c99 -Wall -g -I include  -c -o lispstr.o src/lispstr.c\n   clang  -std=c99 -Wall -g -I include  -c -o lisperr.o src/lisperr.c\n   clang   ptscheme.o memmanager.o lispbool.o lispchar.o lispint.o lispstr.o lisperr.o lisppair.o   -o ptscheme\n   clang: error: no such file or directory: 'lisppair.o'\n   make: *** [ptscheme] Error 1\n</code></pre>\n\n<p>Obviously, lisppair.o is not being built even though I have an entry for it in my Makefile that follows an identical pattern as the others.</p>\n\n<p>Here is a directory validating the file is missing:</p>\n\n<pre><code>$ ls -al *.o\n-rw-r--r-- 1 ptdecker  4392 Dec 22 22:00 lispbool.o\n-rw-r--r-- 1 ptdecker  3360 Dec 22 22:00 lispchar.o\n-rw-r--r-- 1 ptdecker  3376 Dec 22 22:00 lisperr.o\n-rw-r--r-- 1 ptdecker  3344 Dec 22 22:00 lispint.o\n-rw-r--r-- 1 ptdecker  3776 Dec 22 22:00 lispstr.o\n-rw-r--r-- 1 ptdecker  3244 Dec 22 22:00 memmanager.o\n-rw-r--r-- 1 ptdecker 15324 Dec 22 22:00 ptscheme.o\n</code></pre>\n\n<p>When I try to have make run just the lisppair.o receipt, make tells me it thinks the object file I want is up to date (!?):</p>\n\n<pre><code>$ make lisppair.o\nmake: `lisppair.o' is up to date.\n</code></pre>\n\n<p>I can compile it manually:</p>\n\n<pre><code>$ clang -std=c99 -Wall -g -I include -c -o lisppair.o src/lisppair.c\n</code></pre>\n\n<p>Which produces the object file:</p>\n\n<pre><code>$ ls -al *.o\n-rw-r--r-- 1 ptdecker  4392 Dec 22 22:00 lispbool.o\n-rw-r--r-- 1 ptdecker  3360 Dec 22 22:00 lispchar.o\n-rw-r--r-- 1 ptdecker  3376 Dec 22 22:00 lisperr.o\n-rw-r--r-- 1 ptdecker  3344 Dec 22 22:00 lispint.o\n-rw-r--r-- 1 ptdecker  5664 Dec 22 22:03 lisppair.o\n-rw-r--r-- 1 ptdecker  3776 Dec 22 22:00 lispstr.o\n-rw-r--r-- 1 ptdecker  3244 Dec 22 22:00 memmanager.o\n-rw-r--r-- 1 ptdecker 15324 Dec 22 22:00 ptscheme.o\n</code></pre>\n\n<p>Letting me then re-run make so my final build and linking completes:</p>\n\n<pre><code>$ make\nclang   ptscheme.o memmanager.o lispbool.o lispchar.o lispint.o lispstr.o lisperr.o lisppair.o   -o ptscheme\n</code></pre>\n\n<p>Getting me ultimately to where I want to be:</p>\n\n<pre><code>$ ./ptscheme\n&gt;\n</code></pre>\n\n<p>I appreciate your help and feedback!  Obviously, I'm missing something fundamental.</p>\n\n<p>The complete source for all this can be found <a href=\"https://github.com/ptdecker/ptscheme/tree/pairs\" rel=\"nofollow\">in my github repository</a>.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1450845622, "post_id": 34428674, "comment_id": 56598433, "body": "You need to link with <code>g++</code> when linking programs that have mixed C and C++  , this is because C++ has more startup requirements"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1450845721, "post_id": 34428674, "comment_id": 56598465, "body": "In the latter case you are attempting to invoke C++ code from C code. Have a read of: <a href=\"https://stackoverflow.com/questions/2744181/how-to-call-c-function-from-c\">How to call C++ function from C?</a>"}, {"owner": {"reputation": 83, "user_id": 5709643, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af562c507a7ae4aa41ba3d44a8b03289?s=128&d=identicon&r=PG&f=1", "display_name": "bvp147", "link": "https://stackoverflow.com/users/5709643/bvp147"}, "edited": false, "score": 0, "creation_date": 1450845933, "post_id": 34428674, "comment_id": 56598541, "body": "Thank you for your answer.  &gt;M.M: I tried to link with libstdc++, but it&#39;s not successfull. &gt;kaylum: I used C for lib and appl, I don&#39;t use C++."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1450849987, "post_id": 34428674, "comment_id": 56599907, "body": "@BinPhan You used <code>g++</code>. That will treat your code as C++. C and C++ are seperate languages but alot of code can be compiled as both C and C++. But the result is different. So yes, you are compiling as C++ (even though you may not have intended to) because you used <code>g++</code>."}], "owner": {"reputation": 83, "user_id": 5709643, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/af562c507a7ae4aa41ba3d44a8b03289?s=128&d=identicon&r=PG&f=1", "display_name": "bvp147", "link": "https://stackoverflow.com/users/5709643/bvp147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1450846064, "creation_date": 1450845160, "last_edit_date": 1450846064, "question_id": 34428674, "link": "https://stackoverflow.com/questions/34428674/incompatibility-between-g-object-file-and-gcc", "title": "Incompatibility between g++ object file and gcc", "body": "<ul>\n<li>Currently, I'm creating a linux library by C program, using pthread_cleanup_push/pthread_cleanup_pop to register a clean-up function in case pthread is cancelled suddenly.\nI compiled this library source code by using g++ compiler to create \".so\" file. </li>\n<li>I write an application in C for using this library, and build this application by g++ and gcc compiler. </li>\n<li>If apllication is compiled by g++, when thread is canceled then clean-up function is called successfully</li>\n<li>If apllication is compiled by gcc, when thread is canceled then clean-up function is NOT called</li>\n<li>I don't know whether g++ lib is compatible with gcc appliaction or not.\nPlease help.</li>\n</ul>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450842554, "post_id": 34428263, "comment_id": 56597606, "body": "Because &#39;A&#39; doesn&#39;t have a type.  It&#39;s being interpreted as an <code>int</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 2, "creation_date": 1450842875, "post_id": 34428263, "comment_id": 56597671, "body": "@DavidHoelzer it does have a type, and the type is <code>int</code>"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1450844064, "post_id": 34428263, "comment_id": 56597984, "body": "Fair enough.  Since &#39;A&#39; isn&#39;t cast in any way it is an <code>int</code> by definition.  I was focused more on the fact that there was a difference in how they were defined.  Thanks!"}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450849618, "post_id": 34428263, "comment_id": 56599782, "body": "There&#39;s no such thing as an expression without a type ... what a weird concept."}], "answers": [{"comments": [{"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450849741, "post_id": 34428287, "comment_id": 56599824, "body": "Back in the very olden days,  people used multibyte characters, like &#39;xy&#39;. The PDP11 UNIX code had a lot of that stuff. It mostly went away when they ported C to bigendian machines. C++ fixed this ... character constants are chars. This is one of the few ways in which C is not a proper subset of C++."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 6, "last_activity_date": 1450842119, "creation_date": 1450842119, "answer_id": 34428287, "question_id": 34428263, "link": "https://stackoverflow.com/questions/34428263/understanding-the-sizeof-operator-in-c/34428287#34428287", "title": "Understanding the sizeof operator in C", "body": "<p><code>c</code> is a variable of type <code>char</code>; its size is 1 byte.</p>\n\n<p><code>'A'</code> is an <code>int</code> literal - don't ask me why the standard says that. Its size is 4 bytes on your platform (the same as <code>sizeof(1)</code>).</p>\n"}], "owner": {"reputation": 2025, "user_id": 1359137, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1da62381332ae241f4a28acf7c2f5f52?s=128&d=identicon&r=PG", "display_name": "Animesh Kumar Paul", "link": "https://stackoverflow.com/users/1359137/animesh-kumar-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "closed_date": 1450842342, "accepted_answer_id": 34428287, "answer_count": 1, "score": 5, "last_activity_date": 1450842119, "creation_date": 1450841951, "question_id": 34428263, "link": "https://stackoverflow.com/questions/34428263/understanding-the-sizeof-operator-in-c", "closed_reason": "Duplicate", "title": "Understanding the sizeof operator in C", "body": "<pre><code>char c = 'A';\nprintf(\"%d\\n\",sizeof(c));// output = 1\nprintf(\"%d\\n\",sizeof('A')); // output = 4\n</code></pre>\n\n<p>Why the <code>sizeof</code> operator gives different output for same character? Please Help</p>\n"}, {"tags": ["c", "arrays", "printf", "loadrunner"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 1, "creation_date": 1450841040, "post_id": 34428108, "comment_id": 56597267, "body": "When you use sprintf it will append a null to the end of the string.  The problem is that you are overwriting neighboring variables with the nulls.  This is undefined behavior.  Check out the man page for sprintf."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1450841047, "post_id": 34428108, "comment_id": 56597268, "body": "Did you know that a 2-character string actually contains 3 characters? For example, &quot;ab&quot; is &#39;a&#39;, &#39;b&#39; and &#39;\\0&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1516194075, "last_edit_date": 1516194075, "creation_date": 1450845117, "answer_id": 34428669, "question_id": 34428108, "link": "https://stackoverflow.com/questions/34428108/unexpected-output-while-adding-characters-from-a-string-into-other-strings-using/34428669#34428669", "title": "Unexpected output while adding characters from a string into other strings using sprintf", "body": "<p>As per the <code>C11</code> standard, chapter \u00a77.21.6.6, <code>sprintf()</code> function, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>sprintf</code> function is equivalent to <code>fprintf</code>, except that the output is written into\n  an array (specified by the argument <code>s</code>) rather than to a stream. <strong>A null character is written\n  at the end of the characters written;</strong> [...]</p>\n</blockquote>\n\n<p>which indicates, in case of</p>\n\n<pre><code>sprintf(day, \"%c%c\", date[6], date[7]);\n</code></pre>\n\n<p><code>day</code> should have a minimum space allocated for 3 <code>char</code>s, including the terminating null to be written. Now, in your case, it does not have the room for the terminating null, and thereby, <code>sprintf()</code> try to write into past the allocated memory region, invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>You need to consider the space allocation for the terminating null also while defining the arrays.</p>\n\n<p>Same goes for other arrays, too.</p>\n"}], "owner": {"reputation": 69, "user_id": 2290628, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/69a6a3f29f7cfd52215b5ebc7643ed47?s=128&d=identicon&r=PG", "display_name": "Raghu Dev", "link": "https://stackoverflow.com/users/2290628/raghu-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516194075, "creation_date": 1450840838, "last_edit_date": 1592644375, "question_id": 34428108, "link": "https://stackoverflow.com/questions/34428108/unexpected-output-while-adding-characters-from-a-string-into-other-strings-using", "title": "Unexpected output while adding characters from a string into other strings using sprintf", "body": "<p>I have a string which is a date and comes in the format yyyymmdd. I need to find out the day,month, year and store them in separate strings and use them further.\nI have written the following code</p>\n<pre><code>char *date=&quot;20151221&quot;;\nchar day[2];\nchar month[2];\nchar year[4];\nsprintf(day, &quot;%c%c&quot;, date[6], date[7]);\nsprintf(month, &quot;%c%c&quot;, date[4], date[5]);\nsprintf(year, &quot;%c%c%c%c&quot;, date[0], date[1],date[2],date[3]);\nlr_output_message(&quot;day is %s&quot;,day);\nlr_output_message(&quot;month is %s&quot;,month);\nlr_output_message(&quot;year is %s&quot;,year);\n</code></pre>\n<p>But the output am getting is</p>\n<blockquote>\n<p>day is 21122015</p>\n<p>month is 122015</p>\n<p>year is 2015</p>\n</blockquote>\n<p>Maybe its a dumb question,but I am new to C. Can anybody please explain the reason for this?</p>\n"}, {"tags": ["c++", "c", "arrays", "runtime"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1450840855, "post_id": 34428084, "comment_id": 56597222, "body": "There is some missing context around those statements such as the definition and type of <code>array</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1450840916, "post_id": 34428084, "comment_id": 56597235, "body": "Don&#39;t check. Just don&#39;t throw away the information in the first place. A good way to handle dynamic arrays is to use <code>std::vector</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "edited": false, "score": 0, "creation_date": 1450840999, "post_id": 34428084, "comment_id": 56597252, "body": "This is the definition of DYNAMIC_ARRAY in mysql :     341    342 typedef struct st_dynamic_array   343 {   344   uchar *buffer;   345   uint elements,max_element;   346   uint alloc_increment;   347   uint size_of_element;   348 } DYNAMIC_ARRAY;"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1450841031, "post_id": 34428084, "comment_id": 56597262, "body": "@AliQajar can you link to the source you copied this from?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "edited": false, "score": 0, "creation_date": 1450841127, "post_id": 34428084, "comment_id": 56597285, "body": "this is where DYNAMIC_ARRAY is defined   <a href=\"http://www.iskm.org/mysql56/my__sys_8h_source.html\" rel=\"nofollow noreferrer\">iskm.org/mysql56/my__sys_8h_source.html</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1450841169, "post_id": 34428084, "comment_id": 56597295, "body": "One cannot confirm whether a variable is static or dynamic without knowing more information, such as the address range of static memory or the range of addresses of dynamic memory.  Then again, nothing is stopping the compiler from placing static variable next to dynamic variables."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "edited": false, "score": 0, "creation_date": 1450841209, "post_id": 34428084, "comment_id": 56597308, "body": "and this is where it is being allocated and deleted. <a href=\"http://osxr.org:8080/mysql/source/mysys/array.c\" rel=\"nofollow noreferrer\">osxr.org:8080/mysql/source/mysys/array.c</a>"}, {"owner": {"reputation": 13757, "user_id": 2126755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8QFus.jpg?s=128&g=1", "display_name": "robbmj", "link": "https://stackoverflow.com/users/2126755/robbmj"}, "edited": false, "score": 0, "creation_date": 1450841247, "post_id": 34428084, "comment_id": 56597315, "body": "Good question. Is your question specific to indeterministic data? If yes I would amuse the answer is no. How can the compiler be aware of arbitrary data?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1450841401, "post_id": 34428084, "comment_id": 56597356, "body": "@AliQajar:  Code always looks better when placed into your question and not in the comments.  Look at my edit to your question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "edited": false, "score": 0, "creation_date": 1450841641, "post_id": 34428084, "comment_id": 56597412, "body": "@ Thomas Matthews; Sure. Thank you for editing the question and for the answers."}], "answers": [{"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 3, "last_activity_date": 1450842667, "last_edit_date": 1450842667, "creation_date": 1450841174, "answer_id": 34428158, "question_id": 34428084, "link": "https://stackoverflow.com/questions/34428084/c-c-how-to-check-if-an-array-is-static-or-dynamic-during-runtime/34428158#34428158", "title": "C/C++: How to check if an array is static or dynamic during runtime", "body": "<p>You can't.</p>\n\n<p>You're missing some context here. <em>In this particular case</em>, it's known that either <code>array-&gt;buffer</code> points to <code>(uchar*)(array + 1)</code> and is statically allocated, <em>or</em> it points somewhere else and is dynamically allocated.</p>\n\n<p>But there's nothing about <code>(uchar*)(array + 1)</code> that automatically means something is statically allocated.</p>\n\n<p>It's like asking how this function finds the length of the array (which is that <em>it doesn't</em>, unless the array ends with a 0):</p>\n\n<pre><code>int getArrayLength(int *a)\n{\n    for(int i = 0; ; i++)\n        if(a[i] == 0)\n            return i + 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": false, "score": 1, "last_activity_date": 1450843087, "last_edit_date": 1450843087, "creation_date": 1450842176, "answer_id": 34428292, "question_id": 34428084, "link": "https://stackoverflow.com/questions/34428084/c-c-how-to-check-if-an-array-is-static-or-dynamic-during-runtime/34428292#34428292", "title": "C/C++: How to check if an array is static or dynamic during runtime", "body": "<p>You can't - without additional information.</p>\n\n<p>For C, an array is just a bunch of memory addresses. <code>a[n]</code> actually means <code>(type(a))*((void*)&amp;a+n*sizeof(a))</code>. It couldn't care less about how (or if) it was allocated, even whether the addresses are real.</p>\n\n<p>The additional information may be:</p>\n\n<ul>\n<li>the variable is of a specific type which has fields you can check for the information you want\n\n<ul>\n<li>this is your case: the code you supplied \"knows\" the variable is <code>DYNAMIC_ARRAY</code></li>\n</ul></li>\n<li>getting hints from the allocation system\n\n<ul>\n<li>e.g. <code>free</code> and <code>realloc</code> are only supposed to be called with pointers previously given by <code>malloc</code>. Checking a pointer's validity, however, isn't a part of the public interface\n\n<ul>\n<li>Debugging tools like <code>valgrind</code>, however, typically wrap the functions with a checker to validate the use of the routines</li>\n</ul></li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "edited": false, "score": 0, "creation_date": 1450848139, "post_id": 34428518, "comment_id": 56599280, "body": "That was very informative. Now I see what is going on. The line that I copied was used a couple of times for memory management in array.c: it is accessible through  the following link: <a href=\"http://osxr.org:8080/mysql/source/mysys/array.c\" rel=\"nofollow noreferrer\">osxr.org:8080/mysql/source/mysys/array.c</a>"}], "tags": [], "owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1450843904, "creation_date": 1450843904, "answer_id": 34428518, "question_id": 34428084, "link": "https://stackoverflow.com/questions/34428084/c-c-how-to-check-if-an-array-is-static-or-dynamic-during-runtime/34428518#34428518", "title": "C/C++: How to check if an array is static or dynamic during runtime", "body": "<p>Just to explain what the mysql source code snippet is doing, which may help you.</p>\n\n<p>Firstly it is <strong>not</strong> a test for statically allocated arrays.  It attempts to test if an array and header were allocated contiguously ( one immediately following the other ).</p>\n\n<pre><code>if (array-&gt;buffer == (uchar *)(array + 1))\n    array-&gt;elements= 0;\n</code></pre>\n\n<p>This is actually taking a pointer to the structure <code>DYNAMIC_ARRAY</code> and checks if the address of the array is pointing to the address immediately after the structure itself.</p>\n\n<p>One way the test will be true is if the structure and array space were allocate in one single malloc() - a contiguous block.  For example :</p>\n\n<pre><code>DYNAMIC_ARRAY *dap = NULL ;\n\ndap = malloc( sizeof(DYNAMIC_ARRAY) + arraylength ) ;\ndap-&gt;buffer = (uchar *)(dap+1) ;\n</code></pre>\n\n<p>This, IMO, is an unsafe piece of code, as it makes a dangerous assumption.</p>\n\n<p>It assumes that two separate allocations, one of a header structure and one of array space, cannot follow each other in memory.  This is outside of the control of the application, unless they've explicitly coded their own memory manager to not do that.</p>\n\n<p>If this trick is being used elsewhere in the mysql sources I'd be quite alarmed, as it's just asking for trouble.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5709504"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 0, "accepted_answer_id": 34428158, "answer_count": 3, "score": 3, "last_activity_date": 1517811611, "creation_date": 1450840623, "last_edit_date": 1517811611, "question_id": 34428084, "link": "https://stackoverflow.com/questions/34428084/c-c-how-to-check-if-an-array-is-static-or-dynamic-during-runtime", "title": "C/C++: How to check if an array is static or dynamic during runtime", "body": "<p>I am wondering how can I check an array is static or dynamically allocated. I looked up online and found the following implementation in <a href=\"http://www.iskm.org/mysql56/my__sys_8h_source.html\" rel=\"nofollow\">mysql source code</a>, I don't know why this works ? (line 0303 checks if the array is static)</p>\n\n<pre><code>       /*\n\n0301     Just mark as empty if we are using a static buffer\n0302   */\n0303   if (array-&gt;buffer == (uchar *)(array + 1))\n0304     array-&gt;elements= 0;\n</code></pre>\n\n<p>This is the definition of DYNAMIC_ARRAY in mysql :</p>\n\n<pre><code>341  \n342 typedef struct st_dynamic_array\n343 { \n344     uchar *buffer; \n345     uint elements,max_element; \n346     uint alloc_increment; \n347     uint size_of_element; \n348 } DYNAMIC_ARRAY; \n</code></pre>\n"}, {"tags": ["c", "assembly", "xeon-phi"], "comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450844073, "post_id": 34428061, "comment_id": 56597990, "body": "Run thus intrinsic through the compiler with -S."}, {"owner": {"reputation": 287, "user_id": 5645605, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7de9d5679ce0b58323ffc33666b0ff6d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid_UMB", "link": "https://stackoverflow.com/users/5645605/hamid-umb"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450846234, "post_id": 34428061, "comment_id": 56598646, "body": "@Jeff: I don&#39;t have intel compiler, so I can not run the intrinsics. The only option that I have is to write code with inline assembly. If it is possible, please run the code with -S and gave me the results."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450846313, "post_id": 34428061, "comment_id": 56598673, "body": "GCC supports intrinsics."}, {"owner": {"reputation": 287, "user_id": 5645605, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7de9d5679ce0b58323ffc33666b0ff6d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid_UMB", "link": "https://stackoverflow.com/users/5645605/hamid-umb"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450846379, "post_id": 34428061, "comment_id": 56598699, "body": "@Jeff: Are you sure that GCC supports intrinsics for KNC???"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450846439, "post_id": 34428061, "comment_id": 56598717, "body": "Facepalm. Sorry. I forget that KNC is different. Ill try to remember to send you asm later."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1450849544, "post_id": 34428061, "comment_id": 56599755, "body": "ISPC (<a href=\"https://github.com/ispc/ispc\" rel=\"nofollow noreferrer\">github.com/ispc/ispc</a>) supports KNC (see e.g. <a href=\"https://github.com/ispc/ispc/blob/master/examples/intrinsics/knc-i1x16.h\" rel=\"nofollow noreferrer\">github.com/ispc/ispc/blob/master/examples/intrinsics/&hellip;</a>).  You might try that."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1451243407, "post_id": 34428061, "comment_id": 56709648, "body": "The reason Intel does not list the instruction is because this is one of those annoying compound instruction intrinsics which requires several instructions. You can implement this yourself in log(N) operations. I mean add high 256-bits to low 256-bits, add high 128-bits to low 128-bits, add high 64-bits to low 64-bits, add high 32-bits to low 32-bits."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1451725309, "post_id": 34428061, "comment_id": 56871883, "body": "Can you please give the accepted answer back to @Gilles. I would not have been able to create my answer without his answer and I think his answer answered your question."}], "answers": [{"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1451243224, "post_id": 34430176, "comment_id": 56709597, "body": "<code>vpermf32x4</code> and the <code>{abcd}</code> swizzle notation are unique to KNC. I wonder if <code>k1om-mpss-linux-gcc</code> implements them."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1451380665, "post_id": 34430176, "comment_id": 56757161, "body": "If you can, would you mind posting the result for AVX512? It would be interesting to see how Intel implements this with AVX512 compared to KNC."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1453725402, "post_id": 34430176, "comment_id": 57713681, "body": "I&#39;m sorry the OP switched the accepted answer to mine. That was not my intention. I asked the OP to switch it back but it did not happen."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1453725729, "post_id": 34430176, "comment_id": 57713872, "body": "@Zboson Don&#39;t worry, I&#39;m cool with that, absolutely no problem."}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": false, "score": 4, "last_activity_date": 1450853532, "creation_date": 1450853532, "answer_id": 34430176, "question_id": 34428061, "link": "https://stackoverflow.com/questions/34428061/inline-assembly-of-reduce-operation-for-xeon-phi/34430176#34430176", "title": "inline assembly of reduce operation for Xeon Phi", "body": "<p>I know close to nothing when it comes to reading assembly, so I simply did that:</p>\n\n<p>Created a foo.c file like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include \"immintrin.h\"\n\nint foo(__m512i a) {\n    return _mm512_reduce_add_epi32(a);\n}\n</code></pre>\n\n<p>Which I complied with the Intel compiler version 16.0.1 using <code>-mmic -S</code>. And it gave me the following assembly code:</p>\n\n<pre><code># -- Begin  foo\n    .text\n# mark_begin;\n# Threads 4\n        .align    16,0x90\n    .globl foo\n# --- foo(__m512i)\nfoo:\n# parameter 1: %zmm0\n..B1.1:                         # Preds ..B1.0 Latency 53\n    .cfi_startproc\n..___tag_value_foo.1:\n..L2:\n                                                          #3.20\n        movl      $1, %eax                                      #4.12 c1\n        vpermf32x4 $238, %zmm0, %zmm1                           #4.12 c5\n        kmov      %eax, %k1                                     #4.12 c5\n        vpaddd    %zmm0, %zmm1, %zmm3                           #4.12 c9\n        nop                                                     #4.12 c13\n        vpermf32x4 $85, %zmm3, %zmm2                            #4.12 c17\n        vpaddd    %zmm3, %zmm2, %zmm4                           #4.12 c21\n        nop                                                     #4.12 c25\n        vpaddd    %zmm4{badc}, %zmm4, %zmm5                     #4.12 c29\n        nop                                                     #4.12 c33\n        vpaddd    %zmm5{cdab}, %zmm5, %zmm6                     #4.12 c37\n        nop                                                     #4.12 c41\n        vpackstorelps %zmm6, -8(%rsp){%k1}                      #4.12 c45\n        movl      -8(%rsp), %eax                                #4.12 c49\n        ret                                                     #4.12 c53\n        .align    16,0x90\n    .cfi_endproc\n                                # LOE\n# mark_end;\n    .type   foo,@function\n    .size   foo,.-foo\n    .data\n# -- End  foo\n    .data\n    .section .note.GNU-stack, \"\"\n// -- Begin DWARF2 SEGMENT .eh_frame\n    .section .eh_frame,\"a\",@progbits\n.eh_frame_seg:\n    .align 8\n# End\n</code></pre>\n\n<p>I guess you should be able to find your way in that...</p>\n"}, {"tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": true, "score": 4, "last_activity_date": 1451568275, "last_edit_date": 1495535411, "creation_date": 1451380534, "answer_id": 34507961, "question_id": 34428061, "link": "https://stackoverflow.com/questions/34428061/inline-assembly-of-reduce-operation-for-xeon-phi/34507961#34507961", "title": "inline assembly of reduce operation for Xeon Phi", "body": "<p>Doing a reduction of 16 integers with KNC is an interesting case to show why it differs from AVX512.</p>\n\n<p>The <code>_mm512_reduce_add_epi32</code> intrinsic is only supported by the Intel compile (currently). It's one of those annoying many instruction intrinsics like in SVML. But I think I understand why Intel implemented this intrinsic as in this case because the result for KNC and AVX512 are very different.</p>\n\n<p>With AVX512 I would do something like this</p>\n\n<pre><code>__m256i hi8 = _mm512_extracti64x4_epi64(a,1);\n__m256i lo8 = _mm512_castsi512_si256(a);\n__m256i vsum1 = _mm256_add_epi32(hi8,lo8);\n</code></pre>\n\n<p>and the then I would do a reduction just like in AVX2</p>\n\n<pre><code>__m256i vsum2  = _mm256_hadd_epi32(vsum1,vsum1);\n__m256i vsum3  = _mm256_hadd_epi32(vsum2,vsum2);\n__m128i hi4 = _mm256_extracti128_si256(vsum3,1);\n__m128i lo4 = _mm256_castsi256_si128(vsum3);\n__m128i vsum4 = _mm_add_epi32(hi4, lo4);\nint sum = _mm_cvtsi128_si32(vsum4);\n</code></pre>\n\n<p>It would be interesting to see how Intel implements <code>_mm512_reduce_add_epi32</code> with AVX512.</p>\n\n<p>But the KNC instruction set does not support AVX or SSE so everything has to be done with the full 512-bit vectors with KNC.  Intel has created instructions unique to KNC to do this.</p>\n\n<p>Looking at the assembly from Giles answer we can see what it does. First it permutes the upper 256-bits to the lower 256-bits using an instruction unique to KNC like this:</p>\n\n<pre><code>vpermf32x4 $238, %zmm0, %zmm1\n</code></pre>\n\n<p>The value <code>238</code> is <code>3232</code> in base 4. So <code>zmm1</code> in terms of the four 128-bit lanes is <code>(3,2,3,2)</code>.</p>\n\n<p>Next it does a vector sum </p>\n\n<pre><code>vpaddd    %zmm0, %zmm1, %zmm3\n</code></pre>\n\n<p>which gives the four 128-bit lanes <code>(3+3, 2+2, 3+1, 2+0)</code></p>\n\n<p>Then it permutes the second 128-bit lane giving <code>(3+1, 3+1, 3+1, 3+1)</code> like this</p>\n\n<pre><code>vpermf32x4 $85, %zmm3, %zmm2\n</code></pre>\n\n<p>where <code>85</code> is <code>1111</code> in base 4. Then it adds these together</p>\n\n<pre><code>vpaddd    %zmm3, %zmm2, %zmm4 \n</code></pre>\n\n<p>so that the lower 128-bit lane in <code>zmm4</code> contains the sum of the four 128-bit lanes <code>(3+2+1+0)</code>.</p>\n\n<p>At this point it needs to permute the 32-bit values within each 128-bit lane. Again it uses a unique feature of KNC which allows it to permute and add at the same time (or at least the notation is unique).</p>\n\n<pre><code>vpaddd    %zmm4{badc}, %zmm4, %zmm5 \n</code></pre>\n\n<p>produces <code>(a+b, a+b, c+d, c+d)</code></p>\n\n<p>and </p>\n\n<pre><code>vpaddd    %zmm5{cdab}, %zmm5, %zmm6\n</code></pre>\n\n<p>produces <code>(a+b+c+d , a+b+c+d , a+b+c+d, a+b+c+d)</code>. Now it is just a matter of extracting the lower 32-bits.</p>\n\n<hr>\n\n<p>Here is an alternative solution for AVX512 which is similar to the solution for KNC</p>\n\n<pre><code>#include &lt;x86intrin.h&gt;  \nint foo(__m512i a) {   \n    __m512i vsum1 = _mm512_add_epi32(a,_mm512_shuffle_i64x2(a,a, 0xee));\n    __m512i vsum2 = _mm512_add_epi32(a,_mm512_shuffle_i64x2(vsum1,vsum1, 0x55));\n    __m512i vsum3 = _mm512_add_epi32(a,_mm512_shuffle_epi32(vsum2, _MM_PERM_BADC));\n    __m512i vsum4 = _mm512_add_epi32(a,_mm512_shuffle_epi32(vsum3, _MM_PERM_CADB));\n    return _mm_cvtsi128_si32(_mm512_castsi512_si128(vsum4));\n}\n</code></pre>\n\n<p>With <code>gcc -O3 -mavx512f</code> this gives. </p>\n\n<pre><code>vshufi64x2      $238, %zmm0, %zmm0, %zmm1\nvpaddd          %zmm1, %zmm0, %zmm1\nvshufi64x2      $85, %zmm1, %zmm1, %zmm1\nvpaddd          %zmm1, %zmm0, %zmm1\nvpshufd         $78, %zmm1, %zmm1\nvpaddd          %zmm0, %zmm1, %zmm1\nvpshufd         $141, %zmm1, %zmm1\nvpaddd          %zmm0, %zmm1, %zmm0\nvmovd           %xmm0, %eax\nret\n</code></pre>\n\n<p>AVX512 uses <code>vshufi64x2</code> instead of <code>vpermf32x4</code> and KNC combines the permuting within lanes and the add with the {abcd} notation (e.g. <code>vpaddd    %zmm4{badc}, %zmm4, %zmm5</code>).  This is basically what is achieved using <code>_mm256_hadd_epi32</code>.</p>\n\n<hr>\n\n<p>I forgot I already had seen this question for AVX512. <a href=\"https://stackoverflow.com/a/26920294/2542702\">Here is another solution</a>.</p>\n\n<hr>\n\n<p>For what it's worth here is intrinsics (untested) for KNC.</p>\n\n<pre><code>int foo(__m512i a) {\n    __m512i vsum1 = _mm512_add_epi32(a,_mm512_permute4f128_epi32(a, 0xee));\n    __m512i vsum2 = _mm512_add_epi32(a,_mm512_permute4f128_epi32(vsum1, 0x55));\n    __m512i vsum3 = _mm512_add_epi32(a,_mm512_swizzle_epi32(vsum2, _MM_SWIZ_REG_BADC));\n    __m512i vsum4 = _mm512_add_epi32(a,_mm512_swizzle_epi32(vsum3, _MM_SWIZ_REG_CADB));\n    int32_t out[2];\n    _mm512_packstorelo_epi32(out, vsum4);\n    return out[0];\n}\n</code></pre>\n\n<p>I don't see a difference between in functionality between KNC's <code>_mm512_permute4f128_epi32(a,imm8</code>) and AVX512's <code>_mm512_shuffle_i32x4(a,a,imm8)</code>.</p>\n\n<p>The main difference in this case is that <code>_mm512_shuffle_epi32</code> generates <code>vpshufd</code> whereas <code>_mm512_swizzle_epi32</code> does not. That appears to \nbe an advantage of KNC over AVX512.</p>\n"}], "owner": {"reputation": 287, "user_id": 5645605, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7de9d5679ce0b58323ffc33666b0ff6d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid_UMB", "link": "https://stackoverflow.com/users/5645605/hamid-umb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 1, "accepted_answer_id": 34507961, "answer_count": 2, "score": 3, "last_activity_date": 1451568275, "creation_date": 1450840498, "question_id": 34428061, "link": "https://stackoverflow.com/questions/34428061/inline-assembly-of-reduce-operation-for-xeon-phi", "title": "inline assembly of reduce operation for Xeon Phi", "body": "<p>I am looking for inline assembly operation for add reduce operation for Xeon Phi. I found _mm512_reduce_add_epi32 intrinsic on intel intrinsic website (<a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#expand=3056,3056,3046,3030,189,4564,3030,37,3030,3030,77,241,5223,5221,857,885,76,801,76,5223,5221,801,240,801,857,77,5221,77,76,3030,76,115,115,649,5223,5223,5221,240,5221,5221,649,801,923,857,858,923,801,825,857,857,649,649,649,857,858,76,801,649,240,649,276,649,240,276,3748,649,240,5221,5284,5288,77,240,76,4218&amp;techs=KNC&amp;text=_mm512_red\" rel=\"nofollow\">link</a>). However in the website, they did not mentioned the actual assembly operation for it. </p>\n\n<p>Can anybody help me to found the inline assembly of reduction operation on Xeon Phi platform?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "memory-leaks", "zlib", "inflate"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450845241, "post_id": 34428052, "comment_id": 56598320, "body": "Have you checked that <code>inflateEnd</code> is indeed called? We can&#39;t tell from the code snippet you have provided."}, {"owner": {"reputation": 23, "user_id": 5709432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63e7f3406d00a9eeb29de607a1e7783?s=128&d=identicon&r=PG&f=1", "display_name": "Sathya", "link": "https://stackoverflow.com/users/5709432/sathya"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450937722, "post_id": 34428052, "comment_id": 56638208, "body": "Please see my response below... Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5709432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63e7f3406d00a9eeb29de607a1e7783?s=128&d=identicon&r=PG&f=1", "display_name": "Sathya", "link": "https://stackoverflow.com/users/5709432/sathya"}, "edited": false, "score": 0, "creation_date": 1450937603, "post_id": 34430227, "comment_id": 56638168, "body": "As per your advise, I have changed the code to not have static variable. Also initialize the stream when the first block is received and call inflateEnd after receiving the last block. Got rid of isFirstBlk and isLastBlk. Now valgrind does not report memory leak.  Thanks for the help and support."}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 1, "last_activity_date": 1450853702, "creation_date": 1450853702, "answer_id": 34430227, "question_id": 34428052, "link": "https://stackoverflow.com/questions/34428052/zlib-inflatereset-causes-memory-leak-not/34430227#34430227", "title": "zlib inflateReset causes memory leak (not)", "body": "<p>You are making an error in your use of your <code>inflateData()</code> routine.</p>\n\n<p>First off, using a static variable in this way is a horrible idea. If you call your <code>inflateData()</code> twice with <code>isFirstBlk</code> true without an intermediate call with <code>isLastBlk</code> true, then you will wipe out the reference to the first set of allocations, resulting in a memory leak.</p>\n\n<p>To avoid this sort of error, you should keep track of whether <code>zstrm</code> is initialized or not, and reject any attempt to initialize an already initialized stream. Better still would be to not even have an <code>isFirstBlk</code>, and simply initialize <code>zstrm</code> on the first call and on any call that immediately follows a call with <code>isLastBlk</code> true.</p>\n\n<p>So you are either doing the above, calling twice with <code>isFirstBlk</code> true, or failing to call with <code>isLastBlk</code> true.</p>\n"}], "owner": {"reputation": 23, "user_id": 5709432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63e7f3406d00a9eeb29de607a1e7783?s=128&d=identicon&r=PG&f=1", "display_name": "Sathya", "link": "https://stackoverflow.com/users/5709432/sathya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 34430227, "answer_count": 1, "score": 2, "last_activity_date": 1451029299, "creation_date": 1450840439, "last_edit_date": 1451029299, "question_id": 34428052, "link": "https://stackoverflow.com/questions/34428052/zlib-inflatereset-causes-memory-leak-not", "title": "zlib inflateReset causes memory leak (not)", "body": "<p>I am currently working on the below requirement.\nHere is the requirement: On the server side a large file is divided into 4000-byte blocks (frames). Each block is in turn compressed (using zlib) and sent to client process. For instance, if a file is 12000 bytes in size then it is divided into 3 blocks.</p>\n\n<p>Above file will have 3 blocks => Block-0, Block-1, Block-2</p>\n\n<p>On receipt, client decompresses each block (or frame) and writes to buffer allocated on the heap.When all the blocks corresponding to the entire file is received by the client, then the uncompressed version of the resultant file is written to the disk.</p>\n\n<p>I have written a routine inflateData that does the following based on the block # received:</p>\n\n<p>When the first block is received, \n  - inflateInit\n  - inflate\n  - inflateReset\nWhen the intermediate blocks are received,\n  - inflate\n  - inflateReset\nWhen the last block is received,\n  - inflate\n  - inflateEnd</p>\n\n<p>With the above routine, Decompression of blocks happens as expected. But the issue that I face is it consumes lots of memory and at some point entire system slows down. When checked with valgrind, memory leak is reported with inflateInit2_. This causes the system resources to be exhausted.</p>\n\n<blockquote>\n  <p>==30359== 57,312 bytes in 6 blocks are possibly lost in loss record 64 of 67</p>\n  \n  <p>==30359==    at 0x4A069EE: malloc (vg_replace_malloc.c:270)</p>\n  \n  <p>==30359==    by 0x3E57808F1E: inflateInit2_ (in /lib64/libz.so.1.2.3)</p>\n  \n  <p>==30359==    by 0x40C220: inflateData (productMaker.c:1668)</p>\n</blockquote>\n\n<p>Below is the routine inflateData. </p>\n\n<pre><code>    int inflateData(\n    char*    const    inBuf,                  \n    unsigned long     inLen,                  \n    unsigned int      isFirstBlk,\n    unsigned int      isLastBlk,\n    const    char*    outBuf,                 \n    unsigned long*     outLen)                 \n{\n\n  int have;\n  int readsz;\n  int bsize;\n  static z_stream zstrm;\n  int zerr;\n  int flush;\n  char out[CHUNK_SZ];\n  char in[CHUNK_SZ];\n  int ret,nwrite,idx = -1;\n  int savedByteCntr=0;\n  unsigned char *dstBuf;\n  int  firstCall = 1;\n  int totalBytesIn=0;\n  int inflatedBytes=0;\n  int decompByteCounter = 0;\n  int num=0;\n\n\n  ret = Z_OK;\n  readsz = 0;\n  bsize = CHUNK_SZ;\n\n  dstBuf = (unsigned char *) outBuf;\n\n  if(isFirstBlk){\n        memset(&amp;zstrm, '\\0', sizeof(z_stream));\n        zstrm.zalloc = Z_NULL;\n        zstrm.zfree = Z_NULL;\n        zstrm.opaque = Z_NULL;\n\n        if ((zerr = inflateInit(&amp;zstrm)) != Z_OK) {\n                uerror(\"ERROR %d inflateInit (%s)\",\n                        zerr, decode_zlib_err(zerr));\n                return -1;\n        }\n  }\n\n    while(totalBytesIn &lt; inLen ) {\n      int compChunkSize = ((inLen - totalBytesIn) &gt; 5120) ? 5120 :\n                                                  (inLen - totalBytesIn);\n      memcpy(in, inBuf + totalBytesIn, compChunkSize);\n\n      zstrm.avail_in = inLen - totalBytesIn;\n      zstrm.next_in = in ;\n\n      zstrm.avail_out = CHUNK_SZ;\n      zstrm.next_out = out;\n      inflatedBytes = 0;\n\n      while(ret != Z_STREAM_END) {\n         ret  = inflate(&amp;zstrm, Z_NO_FLUSH);\n         if(ret &lt; 0) {\n          uerror(\" Error %d inflate (%s)\", ret, decode_zlib_err(ret));\n          (void)inflateEnd(&amp;zstrm);\n           return ret;\n         }\n         inflatedBytes = CHUNK_SZ - zstrm.avail_out;\n\n         if(inflatedBytes == 0) {\n              unotice(\"\\n Unable to decompress data - truncated\");\n              break;\n         }\n     totalBytesIn += zstrm.total_in;\n     decompByteCounter += inflatedBytes;\n\n     memcpy(dstBuf + savedByteCntr, out, inflatedBytes);\n     savedByteCntr = decompByteCounter;\n   }\n\n   // Reset inflater for additional input\n   ret = inflateReset(&amp;zstrm);\n   if(ret == Z_STREAM_ERROR){\n      uerror(\" Error %d inflateReset (%s)\", ret, decode_zlib_err(ret));\n      (void)inflateEnd(&amp;zstrm);\n       return ret;\n   }\n  }\n\nif(isLastBlk){\n ret = inflateEnd(&amp;zstrm);\n if(ret &lt; 0) {\n   uerror(\"Fail inflateEnd %d [%s] \", ret, decode_zlib_err(ret));\n   return (ret);\n }\n}\n\n  *outLen = decompByteCounter;\n   return 0;\n}\n</code></pre>\n\n<p>Thanks in advance for the support.</p>\n\n<p>Thanks,\nSathya.</p>\n"}, {"tags": ["c", "linux", "caching"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450831851, "post_id": 34426921, "comment_id": 56595174, "body": "This is highly platform dependent. What platform are you programming for?"}, {"owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "edited": false, "score": 1, "creation_date": 1450832274, "post_id": 34426921, "comment_id": 56595276, "body": "Your question seems to be answered here  <a href=\"http://stackoverflow.com/questions/9544094/c-working-with-the-cpu-cache\" title=\"c working with the cpu cache\">stackoverflow.com/questions/9544094/&hellip;</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "edited": false, "score": 0, "creation_date": 1450832324, "post_id": 34426921, "comment_id": 56595290, "body": "@Abstraction The answer pertains Windows, but OP is using Linux. Also, wrong language."}, {"owner": {"reputation": 511, "user_id": 4500797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfdfe9b65dd36460208fd517ebaf8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/4500797/abstraction"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1450832804, "post_id": 34426921, "comment_id": 56595409, "body": "@FUZxxl only the most voted answer is about Windows. The second and the last answers are relevant to OP&#39;s question."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1450832809, "post_id": 34426921, "comment_id": 56595412, "body": "@FUZxxl One answer pertains to Windows and C++. Another <a href=\"http://stackoverflow.com/a/9544581/1899640\">details GCC cache bypass intrinsics</a> in C for Linux."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1450832903, "post_id": 34426921, "comment_id": 56595429, "body": "@thatotherguy The answer you link is not an answer as per policy as it does not explain anything, it only links to material without citing the relevant parts. Such answers are wrong according to site policy. I don&#39;t see OPs question answered in a satisfied manner anywhere."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1451045305, "post_id": 34426921, "comment_id": 56667066, "body": "This question is not asking for an off-site resource or a library. Why is it being closed as such? You are strange people."}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1503470850, "post_id": 34426921, "comment_id": 78622127, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/885658/is-it-possible-to-allocate-in-user-space-a-non-cacheable-block-of-memory-on-li\">Is it possible to allocate, in user space, a non cacheable block of memory on Linux?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 5717317, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r-BVq2e1Jdc/AAAAAAAAAAI/AAAAAAAAAPQ/QM-ngA_WkpI/photo.jpg?sz=128", "display_name": "Robert White", "link": "https://stackoverflow.com/users/5717317/robert-white"}, "is_accepted": true, "score": 6, "last_activity_date": 1451084909, "last_edit_date": 1451084909, "creation_date": 1451076710, "answer_id": 34466308, "question_id": 34426921, "link": "https://stackoverflow.com/questions/34426921/how-can-i-disable-cpu-cache-for-certain-memory-regions/34466308#34466308", "title": "How can i disable cpu cache for certain memory regions?", "body": "<p>That comment about non-caching doesn't mean what you think it means, and where it is used, it isn't usually a user-accessible feature. That is, CPU cache control is typically a privileged operation.</p>\n\n<p>That said...</p>\n\n<p>-- A normal user program can be build with functions who's attributes are \"hot\" or \"cold\" to let the compiler tell the loader to group the functions in ways that will utilize the cache most usefully.</p>\n\n<p>-- A normal program can use the madvise() function in linux to tell the paging function various things, including the fact that the memory just used is or is not likely to be used again soon.</p>\n\n<p>-- The kernel itself uses the Memory Type Range Regesters (mtrr) and Page Attribute Table (pat) flags in later kernels, to tell the hardware that particular ranges of memory (such as the memory mapped display buffer, and the various parts of the PCI bus) are not to be cached.</p>\n\n<p>\"Normal Data\u2122\" such as you are likely to use in any C program will <em>essentially</em> never benefit from marking any of its data not cache-worthy. The performance improvement that not-cached data enjoys is the subsequent absence of the various cache-flush and memory barrier operations that memory mapped devices and display buffers would need almost constantly. Laying a cache over a memory mapped device, for example, would require a cache invalidate command before every read and a cache forced write command after every single write to make sure that the reads and writes happen at the exact moment needed. This would \"poison\" the cache usage, using up and instantly discarding cache lines (a physically limited resource) in a most unfriendly and unhelpful way.</p>\n\n<p>In the rare case that you write a program that gains access to one of these cache harmful regions -- such as if you wrote part of the X display server on a linux system -- the kernel would have already set the registers for the device and the non-cache behavior would be transparent to you.</p>\n\n<p>There is effectively no time where your normal application grade program is going to benefit from any ability to mark a variable as harmful to cache beyond the various madvise() type of usage.</p>\n\n<p>Even then, the cases were you could gain <em>any</em> benefit are so rare that if you'd ever acutally run into one, the problem set would have included the need and methodology as part of your research and you'd have been told how and why so explicitly you'd never have needed to ask this question.</p>\n\n<p>To go back to the same example again, if you'd been writing the necessary driver, when you'd been reading up on the display adapter hardware or the PCI bus the various flags and techniques would have been documented and discussed in the hardware guide.</p>\n\n<p>There are ways to pull off cache ejection and such from user space with things like the CLCLEAR instruction on an intel platform. These techniques will <em>not</em> improve general performance.</p>\n\n<p>Since it's a privileged operation on a Linux system, you <em>could</em> write a kernel driver that acquired and marked a region of memory as uncacheable and then let you map it into your application. But the need for such a region is so rare, and so likely to be misused, that there isn't a normal methodology for doing it in place.</p>\n\n<p>So how do you do it? You don't, at least not the you that you are today. When you become a kernel driver writer with an intimate specialty knowledge of multi-threaded code and data synchronization issues, you'll know how you could do it, and at that point you'll know why you don't want to except as a last resort.</p>\n\n<p>TL;DR :: because of the way linux uses and manages data and code, there is never a benefit for marking any part of a normal application as uncacheable that doesn't cause more heartbreak than it saves. As such, there is no unprivileged API for doing this. </p>\n\n<p>P.S. Also, that said, someone already pointed to things that lead to this article <a href=\"http://lwn.net/Articles/255364/\" rel=\"noreferrer\">http://lwn.net/Articles/255364/</a> which covers ways to make your program very cache friendly and some of the ways that you can do some cache bypass operations very cheaply. For instance use of memset() tends to go around the cache while setting memory, and some operations can \"stream past\" the cache. This isn't the same thing as what you ask, but once you understand all of that article you'll have a much better understanding of why marking a region of memory as uncachable is usually, as the Jedi say, not the solution you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 7796, "user_id": 506073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCSdx.png?s=128&g=1", "display_name": "ahcox", "link": "https://stackoverflow.com/users/506073/ahcox"}, "edited": false, "score": 0, "creation_date": 1564992694, "post_id": 45359612, "comment_id": 101196377, "body": "Interesting! It would be good to try a write test using a set_memory_wc() write combining region."}, {"owner": {"reputation": 7796, "user_id": 506073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCSdx.png?s=128&g=1", "display_name": "ahcox", "link": "https://stackoverflow.com/users/506073/ahcox"}, "edited": false, "score": 0, "creation_date": 1564992896, "post_id": 45359612, "comment_id": 101196461, "body": "Your malloced memory might be hot in cache before testing starts. It would be interesting to get the cacheable memory from raw operating system virtual memory allocation functions, perhaps choosing the virtual address yourself, and/or flushing the cache by doing a r/w over a second large buffer immediately before timing begins."}, {"owner": {"reputation": 7796, "user_id": 506073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCSdx.png?s=128&g=1", "display_name": "ahcox", "link": "https://stackoverflow.com/users/506073/ahcox"}, "edited": false, "score": 0, "creation_date": 1564993137, "post_id": 45359612, "comment_id": 101196577, "body": "A more representative test would be one in which you have hot data you want kept in the cache and cold data which you access non-coherently."}], "tags": [], "owner": {"reputation": 891, "user_id": 1883178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e7ea841ff110275fae97f93e729473f?s=128&d=identicon&r=PG", "display_name": "lemonsqueeze", "link": "https://stackoverflow.com/users/1883178/lemonsqueeze"}, "is_accepted": false, "score": 2, "last_activity_date": 1501184277, "creation_date": 1501184277, "answer_id": 45359612, "question_id": 34426921, "link": "https://stackoverflow.com/questions/34426921/how-can-i-disable-cpu-cache-for-certain-memory-regions/45359612#45359612", "title": "How can i disable cpu cache for certain memory regions?", "body": "<p>Recently i needed to experiment with uncached memory in a cache-heavy multi-threaded application.</p>\n\n<p>I came up with this <a href=\"https://github.com/lemonsqueeze/uncached_ram_lkm\" rel=\"nofollow noreferrer\">kernel module</a> which allows to map uncached memory to userspace.</p>\n\n<p>User process requests uncached memory by calling mmap() on module's character device (see test directory for demo).</p>\n\n<p><a href=\"https://lwn.net/Articles/250967/\" rel=\"nofollow noreferrer\">What every programmer should know about memory</a> is indeed a must read !</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3692497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4135, "favorite_count": 2, "accepted_answer_id": 34466308, "answer_count": 2, "score": 9, "last_activity_date": 1501184277, "creation_date": 1450831781, "last_edit_date": 1450832345, "question_id": 34426921, "link": "https://stackoverflow.com/questions/34426921/how-can-i-disable-cpu-cache-for-certain-memory-regions", "title": "How can i disable cpu cache for certain memory regions?", "body": "<p>I read on wikipedia that disabling cpu-cache can improve performance:</p>\n\n<blockquote>\n  <p>Marking some memory ranges as non-cacheable can improve performance, by avoiding caching of memory regions that are rarely re-accessed.</p>\n</blockquote>\n\n<p>When I googled how to do it in c on linux however, I didn't find anything. It's not that I really need this feature but I'm interested anyways. </p>\n\n<p>And do you know of any projects which use this optimization?</p>\n\n<p>Edit: I'm programming for x86_64</p>\n"}, {"tags": ["c", "windows", "visual-studio", "fwrite"], "comments": [{"owner": {"reputation": 39, "user_id": 4804990, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202845523499672/picture?type=large", "display_name": "Richard Cheung", "link": "https://stackoverflow.com/users/4804990/richard-cheung"}, "edited": false, "score": 0, "creation_date": 1450831331, "post_id": 34426749, "comment_id": 56595037, "body": "I was wondering if there would be a stall or if it would just continue"}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450850407, "post_id": 34426749, "comment_id": 56600053, "body": "&quot;a stall&quot;? I&#39;m not sure what you&#39;re thinking of. The question is whether it will return an error condition. Contrary to the accepted answer, it won&#39;t because the data is buffered, first by stdio and second by the OS. In order to see the error you have to force the data to disk (fflush isn&#39;t enough because it only flushes the stdio buffer)."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450831487, "post_id": 34426881, "comment_id": 56595070, "body": "Can <code>fwrite</code> encounter an end-of-file condition? Or is it only <code>fread</code>? (I imagine it&#39;s possible in rare cases, like if you try to write past the end of /dev/sda (don&#39;t test that, btw))"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450831652, "post_id": 34426881, "comment_id": 56595113, "body": "@immibis <code>fwrite()</code> can encounter an end-of-file condition under certain conditions (e.g. writing to a block-device and encountering its end) but it&#39;s rare."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 2, "creation_date": 1450850047, "post_id": 34426881, "comment_id": 56599925, "body": "Actually, nothing happens because the output is buffered and the system doesn&#39;t find out until later that the disk is full, so no error is returned by <code>fwrite</code>."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450850172, "post_id": 34426881, "comment_id": 56599973, "body": "@FUZxxl That&#39;s not an EOF condition, it&#39;s a short write. fwrite will never set feof."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450862032, "post_id": 34426881, "comment_id": 56605208, "body": "@JimBalter A short write can be an EOF condition as far as I know."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450867073, "post_id": 34426881, "comment_id": 56608239, "body": "@FUZxxl &quot;as far as I know&quot; is an expression of ignorance. I just <i>told</i> you that it&#39;s not an EOF condition, so you <i>should</i> now know that it isn&#39;t. Here&#39;s what the C standard says: &quot;EOF which expands to an integer constant expression, with type int and a negative value, that is returned by several functions to indicate end-of-file, that is, no more input from a stream&quot;. Do you know what &quot;input&quot; is, and what &quot;fwrite&quot; does? Sheesh."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1450867363, "post_id": 34426881, "comment_id": 56608415, "body": "Since <code>fwrite()</code> can buffer the content the failure may not be immediately apparent.  Thus the return value from <a href=\"http://man7.org/linux/man-pages/man3/fflush.3.html\" rel=\"nofollow noreferrer\"><code>fflush()</code></a> (<a href=\"https://msdn.microsoft.com/en-us/library/9yky46tz.aspx\" rel=\"nofollow noreferrer\">MSDN link</a>) or <a href=\"http://man7.org/linux/man-pages/man3/fclose.3.html\" rel=\"nofollow noreferrer\"><code>fclose()</code></a> (<a href=\"https://msdn.microsoft.com/en-us/library/fxfsw25t.aspx\" rel=\"nofollow noreferrer\">MSDN link</a>) must also be checked for errors.  Read the man pages/MSDN documents.."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 1, "last_activity_date": 1450831353, "creation_date": 1450831353, "answer_id": 34426881, "question_id": 34426749, "link": "https://stackoverflow.com/questions/34426749/c-programming-fwrite-on-full-drive/34426881#34426881", "title": "C Programming fwrite on full drive", "body": "<p>If a write cannot be performed, <code>fwrite()</code> either returns a short item count (if some items have been written before an error occurred) or <code>0</code>. <code>fwrite()</code> does not block if an error occurs. To differentiate and end-of-file condition from an IO error, use the <code>feof()</code> and <code>ferror()</code> functions.</p>\n"}], "owner": {"reputation": 39, "user_id": 4804990, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202845523499672/picture?type=large", "display_name": "Richard Cheung", "link": "https://stackoverflow.com/users/4804990/richard-cheung"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1450914436, "accepted_answer_id": 34426881, "answer_count": 1, "score": -7, "last_activity_date": 1450831353, "creation_date": 1450830444, "question_id": 34426749, "link": "https://stackoverflow.com/questions/34426749/c-programming-fwrite-on-full-drive", "closed_reason": "Needs details or clarity", "title": "C Programming fwrite on full drive", "body": "<p>What happens to fwrite if it the drive is full? Assuming that it was compiled on a windows machine with visual studio.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "struct", "one-definition-rule"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1450830080, "post_id": 34426610, "comment_id": 56594725, "body": "Sure... as long as only one definition is visible in any given context.  But watch out with extern, that you don&#39;t link to an object created with a different definition than the one you access it with..."}, {"owner": {"reputation": 952, "user_id": 5548598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46ca4f3bb8b45761077cbfd9a6e9d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "Taelsin", "link": "https://stackoverflow.com/users/5548598/taelsin"}, "edited": false, "score": 0, "creation_date": 1450830407, "post_id": 34426610, "comment_id": 56594807, "body": "As dimitri said, techincally yes, but I would say it&#39;s less than ideal coding style."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 1, "creation_date": 1450850933, "post_id": 34426610, "comment_id": 56600266, "body": "There&#39;s nothing wrong with the coding style, and extern has nothing to do with it."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1450896240, "post_id": 34426610, "comment_id": 56625202, "body": "@JimBalter if &quot;file1.c&quot; contains, for example: <code>typedef float typeA; typeA x=1.2;</code> and &quot;file2.c&quot; contains <code>typedef int typeA; extern typeA x;</code> then what happens when they&#39;re compiled and linked together?  Both units access the same object from <code>file1.c</code> but <code>file2.c</code> does it with the wrong effective type, since it sees a different (incompatible) definition for <code>typeA</code> where its extern declaration for <code>x</code> is.  That&#39;s how extern is relevant... one needs to make sure any extern declarations use the same type definition that the actual external object does."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1450913162, "post_id": 34426610, "comment_id": 56632415, "body": "@Dmitri That has absolutely nothing to do with the issue here ... it has everything to do with having two different externally linked variables with the same name: <code>x</code>. The linker doesn&#39;t &quot;see&quot; any definition for <code>typeA</code> -- those types are completely local to the source file they are in. It would still be a bug if you simply did <code>float x=1.2;</code> in one file and <code>extern int x;</code> in the other, of course ... how could you not know this? It&#39;s fundamental. Look, I was on the C standards committee, and programmed in C since the mid 70&#39;s, so don&#39;t try to pull one over on me."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 1, "creation_date": 1450913861, "post_id": 34426610, "comment_id": 56632658, "body": "And people who mention &quot;coding style&quot; here have never worked on more than a toy program and don&#39;t understand the basics of programming. When you have programs with hundreds or thousands of modules, written by dozens of programmers, and linked with numerous libraries, then of course you will numerous different type definitions with the same name. Every tree implementation in the library is likely to have a struct called <code>Node</code>.  This is normal and good. Externally linked variables and functions are a <i>completely different matter</i>, not related to this question. [My last comment here.]"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 1, "creation_date": 1450931245, "post_id": 34426610, "comment_id": 56636444, "body": "@JimBalter Nobody&#39;s &quot;pulling one over on you&quot;, nor saying that the linker sees different definitions of the type.  The point was that when an extern object is to be linked to from different source files it&#39;s necessary to ensure that the different declarations actually refer to the same kind of data, and not just the same type name.  You obviously know this.. as you say, &quot;it&#39;s fundamental&quot;.. so I don&#39;t know what you&#39;re getting so worked up about."}], "answers": [{"comments": [{"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 1, "creation_date": 1450850799, "post_id": 34426905, "comment_id": 56600203, "body": "This is quite confused. C has nominal, not structural, types. The issue here has nothing to do with that, but rather is about scope. Since the symbols are defined in different scopes, they are independent."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1450831583, "creation_date": 1450831583, "answer_id": 34426905, "question_id": 34426610, "link": "https://stackoverflow.com/questions/34426610/are-different-translation-units-allowed-to-define-structures-with-the-same-name/34426905#34426905", "title": "Are different translation units allowed to define structures with the same name?", "body": "<p>In the C programming language, it doesn't matter what you call your types. Symbols are typed according to the structure of the type, not according to the type names. It is completely legal to use the same structure name for different structure types in different files. You can however not use different types to declare the same function.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 9, "last_activity_date": 1450832346, "creation_date": 1450832346, "answer_id": 34426994, "question_id": 34426610, "link": "https://stackoverflow.com/questions/34426610/are-different-translation-units-allowed-to-define-structures-with-the-same-name/34426994#34426994", "title": "Are different translation units allowed to define structures with the same name?", "body": "<p>Struct tags are identifiers with <em>no linkage</em> (C11 6.2.2/6)</p>\n\n<p>The rules about multiple definitions of identifiers with no linkage are found in 6.7/3:</p>\n\n<blockquote>\n  <p>If an identifier has no linkage, there shall be no more than one declaration of the identifier (in a declarator or type specifier) with the same scope and in the same name space, except that:</p>\n  \n  <ul>\n  <li>a typedef name may be redefined to denote the same type as it currently does, provided that type is not a variably modified type;</li>\n  <li>tags may be redeclared as specified in 6.7.2.3.</li>\n  </ul>\n</blockquote>\n\n<p>In your program, the two declarations of <code>foo</code> are in different scopes , so the condition \"with the same scope\" is not satisfied and therefore this rule  is not violated.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450836224, "post_id": 34427341, "comment_id": 56596121, "body": "Where you say &quot;namespace&quot;  , the Standard C term is &quot;scope&quot;.  In Standard C, &quot;namespace&quot; is not a thing, and &quot;name space&quot; means something else.  Your &quot;external namespace&quot; would be describing the collection of &quot;identifiers with external linkage&quot;"}, {"owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1450836653, "post_id": 34427341, "comment_id": 56596228, "body": "<code>namespace</code> as used here is a general term. There are systems (languages) where this term is explicitly adopted to imply similar semantics. But a <code>namespace</code> is a common term in computing."}], "tags": [], "owner": {"reputation": 8069, "user_id": 296923, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/cb7b3af2d2d967711454dc8d9c21798f?s=128&d=identicon&r=PG", "display_name": "Ziffusion", "link": "https://stackoverflow.com/users/296923/ziffusion"}, "is_accepted": false, "score": 2, "last_activity_date": 1450835377, "creation_date": 1450835377, "answer_id": 34427341, "question_id": 34426610, "link": "https://stackoverflow.com/questions/34426610/are-different-translation-units-allowed-to-define-structures-with-the-same-name/34427341#34427341", "title": "Are different translation units allowed to define structures with the same name?", "body": "<p>The way to think about this is in terms of <code>compilation units</code>. A <code>.c</code> file, along with nested hierarchy of included <code>.h</code> files, comprise a single <code>compilation unit</code>. The pre-processor expands all the <code>.h</code> files, and presents the entire <code>compilation unit</code> to the compiler.</p>\n\n<p>A <code>compilation unit</code> is a closed namespace for macros, type names, static identifiers, enums etc. These names cannot have duplicates within this namespace, <em>and</em> none of these names are visible outside this namespace. The implication is that a different <code>compilation unit</code> is a separate, closed namespace - and <em>may</em> reuse the same identifiers, as long as there are no duplicates within <em>that</em> namespace.</p>\n\n<p>Therefore, you may use the same name for certain identifiers, as long as these are in separate <code>compilation unit</code> namespaces.</p>\n\n<p>Note that externally visible identifiers like non-static global variables, functions etc. need to be unique across the entire <em>external</em> namespace, which spans all the <code>compilation units</code> linked together into a single executable.</p>\n"}], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 1, "accepted_answer_id": 34426994, "answer_count": 3, "score": 11, "last_activity_date": 1450835377, "creation_date": 1450829405, "last_edit_date": 1450834929, "question_id": 34426610, "link": "https://stackoverflow.com/questions/34426610/are-different-translation-units-allowed-to-define-structures-with-the-same-name", "title": "Are different translation units allowed to define structures with the same name?", "body": "<p>Suppose I have <code>a.c</code> and <code>b.c</code>, which both define types called <code>struct foo</code>, with different definitions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct foo {\n    int a;\n};\n\nint a_func(void) {\n    struct foo f;\n    f.a = 4;\n    printf(\"%d\\n\", f.a);\n    return f.a * 3;\n}\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct foo { // same name, different members\n    char *p1;\n    char *p2;\n};\n\nvoid b_func(void) {\n    struct foo f;\n    f.p1 = \"hello\";\n    f.p2 = \"world\";\n    printf(\"%s %s\\n\", f.p1, f.p2);\n}\n</code></pre>\n\n<p>In C, can these files both be linked together as part of a standards-conforming program?</p>\n\n<p>(In C++, I believe this is forbidden by the One Definition Rule.)</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1450829296, "post_id": 34426559, "comment_id": 56594546, "body": "If you don&#39;t understand pointers, please read a tutorial. Stack Overflow cannot replace a tutorial."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1450829301, "post_id": 34426559, "comment_id": 56594547, "body": "Then maybe you need to read-up on pointers first: <a href=\"http://www.praxagora.com/doc_model/understanding_c_pointers_1.0.html\" rel=\"nofollow noreferrer\">praxagora.com/doc_model/understanding_c_pointers_1.0.html</a>"}, {"owner": {"reputation": 1760, "user_id": 1583649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6bGxr.png?s=128&g=1", "display_name": "MaxOvrdrv", "link": "https://stackoverflow.com/users/1583649/maxovrdrv"}, "edited": false, "score": 0, "creation_date": 1450829365, "post_id": 34426559, "comment_id": 56594560, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3213827/how-to-iterate-over-a-string-in-c\">How to iterate over a string in C?</a>"}, {"owner": {"reputation": 192, "user_id": 5550195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7affe527d5d79e69fea9b97bcd4cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Peret Finctor", "link": "https://stackoverflow.com/users/5550195/peret-finctor"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450830156, "post_id": 34426559, "comment_id": 56594746, "body": "@FUZxxl maybe you know about a good collection of examples of working with pointers?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1450830532, "post_id": 34426559, "comment_id": 56594837, "body": "@PeretFinctor Only in German, sorry. But <a href=\"https://www.youtube.com/watch?v=6pmWojisM_E\" rel=\"nofollow noreferrer\">this video</a> might be somewhat enlighting."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831219, "post_id": 34426559, "comment_id": 56595005, "body": "regarding this line: <code>for( char* p = hello; p!=0; p++ ) printf(&quot;%x\\n&quot;, p);</code>  it is &#39;almost&#39; correct.  1) the pointer <code>p</code> will not be 0 until it overflows,  However, where it points will contain a &#39;\\0&#39; at the end of the string.  2) the &#39;p&#39; in the printf() statement is a pointer to &#39;the rest of&#39; the string.  I suspect you only want to print a single byte, in hex.  Suggest: <code>for( char* p = hello; *p; p++ ) printf(&quot;%x\\n&quot;, p[0]);</code>  where &#39;*p&#39; means where p points so will exit the for loop when at the NUL byte at the end of the string.  Where &#39;p[0]&#39; is the single byte currently pointed at by &#39;p&#39;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450831569, "post_id": 34426559, "comment_id": 56595088, "body": "Your fourth option is correct if you&#39;re on an ASCII system (likely) , you will get the ascii codes of each character in the string printed."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831623, "post_id": 34426559, "comment_id": 56595103, "body": "@user3629249 <code>p</code> will never compare equal to zero (Unless the program has already triggered undefined behaviour, of course)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831877, "post_id": 34426559, "comment_id": 56595184, "body": "@user3629249 I was responding to your claim &quot;the pointer p will not be 0 until it overflows&quot;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450832413, "post_id": 34426559, "comment_id": 56595314, "body": "@M.M,  &#39;p&#39; is a pointer, there are no negative pointers (a negative value will just wrap around memory as if it were a very large positive value % max memory address.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450832495, "post_id": 34426559, "comment_id": 56595329, "body": "The stuff you put in brackets isn&#39;t true . Maybe you describe some manifestation of undefined behaviour on some particular system."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831479, "post_id": 34426607, "comment_id": 56595067, "body": "well, not quite.   in the second parameter of the &#39;for()&#39; statement, this is comparing a single byte &#39;\\0&#39; to the (4 or 8 bytes) integer 0.   in the &#39;printf()&#39; statement the &#39;p&#39; is the address contained in &#39;p&#39;   However a pointer is properly printed with a &#39;%p&#39; not a &#39;%x&#39;; but the OP wants to print the char pointed to by &#39;p&#39; in a hex format, so it should be: &#39;p[0]&#39;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831558, "post_id": 34426607, "comment_id": 56595085, "body": "@user3629249 What do you know about implicit conversions?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450831595, "post_id": 34426607, "comment_id": 56595096, "body": "And yes, this should be <code>printf(&quot;%c\\n&quot;, c);</code> to print the characters (as opposed to the address of each character)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450831635, "post_id": 34426607, "comment_id": 56595105, "body": "I know a massive lot about implicit conversions.  I also know that the OP doesn&#39;t know, so the suggest answer is misleading the OP."}, {"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1450831685, "post_id": 34426607, "comment_id": 56595122, "body": "%x = hexadecimal representation. Failed, forgot to put *p in the printf."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450831691, "post_id": 34426607, "comment_id": 56595124, "body": "<code>printf(&quot;%x\\n&quot;, *p);</code> will cause undefined behaviour if any of the characters in the string have negative character codes"}, {"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "edited": false, "score": 0, "creation_date": 1450831744, "post_id": 34426607, "comment_id": 56595139, "body": "he is using the 1st ASCII table, good luck to find a negative value."}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "edited": false, "score": 0, "creation_date": 1450831757, "post_id": 34426607, "comment_id": 56595142, "body": "<code>%x</code> will not print the address of each character, just the hex representation of it. I&#39;m sure that&#39;s what you meant, but just being explicitly clear."}], "tags": [], "owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "is_accepted": true, "score": 3, "last_activity_date": 1450831660, "last_edit_date": 1450831660, "creation_date": 1450829397, "answer_id": 34426607, "question_id": 34426559, "link": "https://stackoverflow.com/questions/34426559/how-to-access-separate-characters-in-a-string/34426607#34426607", "title": "How to access separate characters in a string?", "body": "<p>None of them.</p>\n\n<p>The answer is : <code>for( char* p = hello; *p !=0; p++ ) printf(\"%x\\n\", *p);</code></p>\n\n<p>char *p = hello; // p is pointing on the first case of hello, it's exactly the same as <code>char *p = &amp;hello[0];</code></p>\n\n<p><code>if(*p == 0)</code> // check if *p == '\\0' ('\\0' == 0 in ASCII, which means end of string). *p is the value of the adress pointed per p.</p>\n\n<p>'p++' // increase p of sizeof(char) ( so it's += 1). With that you are on the adresse of hello[1] then hello[2] etc...</p>\n"}, {"comments": [{"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450831859, "post_id": 34426701, "comment_id": 56595177, "body": "D&#39;oh. Too rusty in C I guess."}], "tags": [], "owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "is_accepted": false, "score": 5, "last_activity_date": 1450832205, "last_edit_date": 1450832205, "creation_date": 1450830069, "answer_id": 34426701, "question_id": 34426559, "link": "https://stackoverflow.com/questions/34426559/how-to-access-separate-characters-in-a-string/34426701#34426701", "title": "How to access separate characters in a string?", "body": "<p><code>p</code> is a pointer to <code>char</code>. Therefore, dereferencing it with <code>*p</code> yields\na <code>char</code>.</p>\n\n<p>Adding 1 to <code>p</code> moves it to the next character in whatever string you\u2019re\ntraversing. Adding 1 to <code>*p</code> adds one to the character <code>p</code> is pointing\nto.</p>\n\n<p>Let\u2019s go through each of your tries and see what\u2019s wrong with it.</p>\n\n<pre><code>char* hello = \"Hello, world!\";\n</code></pre>\n\n<p>The common part: <code>hello</code> is a pointer to <code>char</code>, and it is pointing to a\nconstant string that the compiler will embed somewhere in the object\nfile. Note that such a string should not be changed; you will often get\nan error for doing so.</p>\n\n<p>If you want a string you can change, <code>char hello[] = \"Hello, world!\";</code>\nworks; this creates a buffer as a local variable that can be freely\nmanipulated.</p>\n\n<pre><code>for( char* p = hello; p!=0; p++ ) printf(\"%x\\n\", p);\n</code></pre>\n\n<p>Here, you correctly point <code>p</code> at the first character of <code>hello</code>.\nHowever, you then look for the end of the string by comparing <code>p</code> to\nzero. <code>p</code> is a pointer, and 0 as a pointer means a NULL pointer.</p>\n\n<pre><code>for( char* p = &amp;hello; p!=0; p++ ) printf(\"%x\\n\", p);\n</code></pre>\n\n<p>Here, you point <code>p</code> at the address of <code>hello</code>, meaning wherever the\nprocess is storing the pointer known as <code>hello</code>. Dereferencing this will\ngive you <code>hello</code>, not what it points to.</p>\n\n<pre><code>for( char* p = *hello; p!=0; p++ ) printf(\"%x\\n\", p);\n</code></pre>\n\n<p>Here, you dereference <code>hello</code>, giving a <code>char</code> with a value of <code>H</code>.\nAssigning this to <code>p</code> is a type mismatch and semantically incorrect as\nwell.</p>\n\n<pre><code>for( char* p = hello; *p!=0; *p++ ) printf(\"%x\\n\", *p);\n</code></pre>\n\n<p>Here, at last, you correctly compare what <code>p</code> points to, to zero. \n<s>However, you also increment <code>*p</code> instead of <code>p</code>, which is incorrect,\nand also (as mentioned above) will cause problems with a constant string\nsuch as this one.</s>\n<code>*p++</code> will increment <code>p</code> as well, returning what <code>p</code> pointed to before\nthe increment, which is moot since it isn\u2019t used.</p>\n\n<p><s>One other thing: do you want to print the value of the pointer <code>p</code>, or\nthe <code>char</code> it\u2019s pointing to? The first three print the pointer\ncorrectly. The last one uses <code>%x</code> to print the <code>char</code>. Not sure what\nthat will do, but it won\u2019t be correct.</s></p>\n\n<p>Since you used <code>%x</code>, I assume you want to print the character itself in\nhex? That would be <code>printf(\"%x\\n\", *p);</code> as in the last one. However, I\nwould recommend <code>%02x</code> to get a constant width with zero-padding.</p>\n\n<p>Assuming you want to print the character, here\u2019s a correct version:</p>\n\n<pre><code>for( char* p = hello; *p!=0; p++ ) printf(\"%x\\n\", *p);\n</code></pre>\n\n<p>Or, since <code>0</code> is false, we can say more briefly and idiomatically:</p>\n\n<pre><code>for( char* p = hello; *p; p++ ) printf(\"%x\\n\", *p);\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 5550195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7affe527d5d79e69fea9b97bcd4cbfdc?s=128&d=identicon&r=PG&f=1", "display_name": "Peret Finctor", "link": "https://stackoverflow.com/users/5550195/peret-finctor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 1, "accepted_answer_id": 34426607, "answer_count": 2, "score": 2, "last_activity_date": 1450832205, "creation_date": 1450829113, "last_edit_date": 1450831319, "question_id": 34426559, "link": "https://stackoverflow.com/questions/34426559/how-to-access-separate-characters-in-a-string", "title": "How to access separate characters in a string?", "body": "<p>I have a string like this:</p>\n\n<pre><code>char* hello = \"Hello, world!\";\n</code></pre>\n\n<p>And I have to loop through every character in this string. I tried these, but they either give me compile error, or access violation, or just never leave loop:</p>\n\n<pre><code>for( char* p = hello; p!=0; p++ ) printf(\"%x\\n\", p);\n\nfor( char* p = &amp;hello; p!=0; p++ ) printf(\"%x\\n\", p);\n\nfor( char* p = *hello; p!=0; p++ ) printf(\"%x\\n\", p);\n\nfor( char* p = hello; *p!=0; *p++ ) printf(\"%x\\n\", *p);\n</code></pre>\n\n<p>I don't really understand how pointers work in C, I'm just placing asterisk randomly until it works, and in this case it doesn't.</p>\n\n<p>I don't use <code>strlen</code> like that other question.</p>\n"}, {"tags": ["java", "c", "java-native-interface", "ipc"], "comments": [{"owner": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1450935521, "post_id": 34426507, "comment_id": 56637520, "body": "Is there a need for the code in Java and the one in C to run in two distinct processes?"}, {"owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "reply_to_user": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1450957250, "post_id": 34426507, "comment_id": 56645923, "body": "@SamuelAudet Yes, the data comes from a plugin for an IDS which has to process network packets as fast as possible. After processing a packet we send the decoded data to another process which does the graph handling. Furthermore the c process runs as a service while the java program should be independently startet or stopped when one desires to, without influencing the running c program."}, {"owner": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "edited": false, "score": 0, "creation_date": 1451033512, "post_id": 34426507, "comment_id": 56664740, "body": "So, I&#39;m guessing a memory mapped file would be the most efficiency way to do to this, and that appears to be the case: <a href=\"http://stackoverflow.com/a/6412333/523744\">stackoverflow.com/a/6412333/523744</a>"}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1450845509, "post_id": 34428357, "comment_id": 56598401, "body": "The problem is that the application where the information is coming from is in c and i (my team) is merely extending it. We have to use java because except for 2 people nobody really knows how to program in c/c++ so we chose java (6 people team).  The c part is responsible for decoding network packets for an intrusion detection system. This has to be as fast as possible and is done in c. Then we split off some data to the java program which builds a graph out of the data to visualize the network."}, {"owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "reply_to_user": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1450847780, "post_id": 34428357, "comment_id": 56599164, "body": "If your goal is building a graph to visualize the results, then speed, even in real time, is unlikely to be a major issue.  Have you actually encountered any real performance issue ?  It&#39;s also likely that you can build the graph in C and pass a minimum of data to Java ( the graph structure, as opposed to the individual data items )."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 1, "creation_date": 1450867737, "post_id": 34428357, "comment_id": 56608613, "body": "@MarkG <i>We have to use java because except for 2 people nobody really knows how to program in c/c++ so we chose java (6 people team).</i>  If you don&#39;t know how to program in C/C++, you&#39;re going to have a very tough time coding JNI, where you not only have to know how to code in Java <b>and</b> C, but you also have to understand how both languages work.  If you&#39;re already coding JNI, you know how to code C at least."}], "tags": [], "owner": {"reputation": 881, "user_id": 5635258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69b37f21456c0333195948af74563b9?s=128&d=identicon&r=PG&f=1", "display_name": "StephenG", "link": "https://stackoverflow.com/users/5635258/stepheng"}, "is_accepted": false, "score": 1, "last_activity_date": 1450842664, "creation_date": 1450842664, "answer_id": 34428357, "question_id": 34426507, "link": "https://stackoverflow.com/questions/34426507/sending-structs-from-c-to-java-process/34428357#34428357", "title": "Sending structs from c to java process", "body": "<p>If you <em>must</em> process the data eventually using Java, then remove as many intermediate steps as possible.</p>\n\n<p>If you can read the data directly into Java ( bypassing JNI and the C code ), then do so.  Avoid the JNI, message queue and (presumably) a stage where C receives the data.  The queue can't be helping latency either.</p>\n\n<p>If the data starts in a C-friendly form that is unfriendly to Java, then I;d consider switching entirely to C or C++ rather than processing in Java at all.</p>\n"}, {"comments": [{"owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "edited": false, "score": 0, "creation_date": 1450845356, "post_id": 34428675, "comment_id": 56598350, "body": "Thanks for the input. I&#39;ll try mashing toghether a test scenario and see if that works better."}], "tags": [], "owner": {"reputation": 20499, "user_id": 523391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c987dd5f0f5eadd8dff078c9e332bbb?s=128&d=identicon&r=PG", "display_name": "prunge", "link": "https://stackoverflow.com/users/523391/prunge"}, "is_accepted": false, "score": 0, "last_activity_date": 1450845168, "creation_date": 1450845168, "answer_id": 34428675, "question_id": 34426507, "link": "https://stackoverflow.com/questions/34426507/sending-structs-from-c-to-java-process/34428675#34428675", "title": "Sending structs from c to java process", "body": "<p>You can achieve high throughput by avoiding unnecessary copying of memory.  Transfer data between C and Java through <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#allocateDirect-int-\" rel=\"nofollow\">direct byte buffers</a>.  From the Java side, you can then read the data in the byte buffers and copy values into the object fields.  For two processes talking to each other, you could use a memory mapped file to do this (you would use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html\" rel=\"nofollow\">MappedByteBuffer</a> for this).</p>\n\n<p>For something simpler but with a bit more overhead, you could simply use the stdin/stdout of each process to communicate and send data that way.  Or, as you suggested, a socket is another option.</p>\n\n<p>With 10,000 structs at 100 bytes each, this will be 1 MB / second of data processed.  This really shouldn't be a problem on modern hardware (for one of my projects I have managed easily over 1GB / second between direct buffers and Java objects with primitive + array fields, but this was all in one process between JNI and Java).  </p>\n\n<p>You might want to use the simpler approach first (stdin/stdout) and see is that fast enough first before digging into using memory mapped files.</p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 1772736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fa1be7154446adab46f7dbcbb2d18a?s=128&d=identicon&r=PG", "display_name": "byteherder", "link": "https://stackoverflow.com/users/1772736/byteherder"}, "is_accepted": false, "score": 0, "last_activity_date": 1450905540, "creation_date": 1450905540, "answer_id": 34443876, "question_id": 34426507, "link": "https://stackoverflow.com/questions/34426507/sending-structs-from-c-to-java-process/34443876#34443876", "title": "Sending structs from c to java process", "body": "<p>This, I think, can be solved using typical IPC methods. I would use pipes over a message queue and sockets. The overhead of message queue is going to slow the processing. And pipes are faster than sockets but not by much. </p>\n\n<p>For your issue, 10,000 structs at 100 bytes per packet comes to 1 MB/s. A modern multicore processor will handle this without a problem. </p>\n"}], "owner": {"reputation": 221, "user_id": 5709170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54b02ad51350612622647d5fd5091e9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark G", "link": "https://stackoverflow.com/users/5709170/mark-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1450905540, "creation_date": 1450828825, "last_edit_date": 1450830353, "question_id": 34426507, "link": "https://stackoverflow.com/questions/34426507/sending-structs-from-c-to-java-process", "title": "Sending structs from c to java process", "body": "<p>I have a c process which needs to send a lot of c structs (roughly 10,000 per second) to a java process that needs to put the data into a matching class. </p>\n\n<p>The size of the data that needs to be sent will be around 50-100 Byte per packet.</p>\n\n<p>Latency is a concern as the data needs to be displayed in real time, which is why i am looking for alternatives to my current solution.</p>\n\n<p>Currently im doing this with JNI and a POSIX message queue. Is there a better way than using JNI and message queues/pipes? I read somewhere that calling JNI methods often has a lot of overhead. Could this become a problem when a lot of data has to be sent?</p>\n\n<p>Another solution i had in mind was to just write the data to a UNIX Socket and parse it in java.</p>\n"}, {"tags": ["c++", "c", "algorithm", "random"], "comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1450830824, "post_id": 34426499, "comment_id": 56594908, "body": "I found <a href=\"http://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html?showComment=1450389868643#c2004131565745698275\" rel=\"nofollow noreferrer\">this Sebastiano Vigna public comment</a> that references the different constant values. Both algorithms are &quot;right&quot;, you can contact the author to ask if he has a preferred version."}, {"owner": {"reputation": 814, "user_id": 5608223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040d9c81fc7a722b9f93cc492ab3a728?s=128&d=identicon&r=PG&f=1", "display_name": "N. Leavy", "link": "https://stackoverflow.com/users/5608223/n-leavy"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1450831422, "post_id": 34426499, "comment_id": 56595057, "body": "@blastfurnace - thanks, that looks like what I need."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1450831885, "post_id": 34426499, "comment_id": 56595186, "body": "@Blastfurnace: The comment seems (to me) to make his preference pretty clear, even though he does say it&#39;s mostly theoretical."}], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 5608223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040d9c81fc7a722b9f93cc492ab3a728?s=128&d=identicon&r=PG&f=1", "display_name": "N. Leavy", "link": "https://stackoverflow.com/users/5608223/n-leavy"}, "is_accepted": false, "score": 4, "last_activity_date": 1450861962, "creation_date": 1450861962, "answer_id": 34432126, "question_id": 34426499, "link": "https://stackoverflow.com/questions/34426499/what-is-the-real-definition-of-the-xorshift128-algorithm/34432126#34432126", "title": "What is the real definition of the xorshift128+ algorithm?", "body": "<p>Thanks to @Blastfurnace, it appears that the answer is that the most recent set of constants according to the author of the algorithm are: 23, 18, and 5. Apparently it doesn't matter too much, but those are theoretically better than the initial set of numbers he used. Sebastiano Vigna made these comments in response to the <a href=\"http://v8project.blogspot.co.uk/2015/12/theres-mathrandom-and-then-theres.html?showComment=1450389868643#c2004131565745698275\" rel=\"nofollow\">news that the V8 Javascript engine</a> is shifting to using this algorithm.</p>\n\n<p>The implementation that I am using is:</p>\n\n<pre><code>uint64_t a = s[0];\nuint64_t b = s[1];\n\ns[0] = b;\na ^= a &lt;&lt; 23;\na ^= a &gt;&gt; 18;\na ^= b;\na ^= b &gt;&gt;  5;\ns[1] = a;\n\nreturn a + b;\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5608223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040d9c81fc7a722b9f93cc492ab3a728?s=128&d=identicon&r=PG&f=1", "display_name": "N. Leavy", "link": "https://stackoverflow.com/users/5608223/n-leavy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2576, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1450861962, "creation_date": 1450828762, "question_id": 34426499, "link": "https://stackoverflow.com/questions/34426499/what-is-the-real-definition-of-the-xorshift128-algorithm", "title": "What is the real definition of the xorshift128+ algorithm?", "body": "<p>I have need of a good pseudo random number generator (PRNG), and it seems like the current state of the art is the xorshift128+ algoritm. Unfortunately, I have discovered 2 different versions. The one on wikipedia: <a href=\"https://en.wikipedia.org/wiki/Xorshift\" rel=\"noreferrer\">Xorshift</a> shows as:</p>\n\n<pre><code>uint64_t s[2];\n\nuint64_t xorshift128plus(void) {\n    uint64_t x = s[0];\n    uint64_t const y = s[1];\n    s[0] = y;\n    x ^= x &lt;&lt; 23; // a\n    s[1] = x ^ y ^ (x &gt;&gt; 17) ^ (y &gt;&gt; 26); // b, c\n    return s[1] + y;\n}\n</code></pre>\n\n<p>Which seems straight forward enough. What's more, the edit logs appear to show that this code snippet was added by a user named \"Vigna\", which is presumably \"Sebastiano Vigna\" who is the author of the paper on xorshift128+: <a href=\"http://vigna.di.unimi.it/ftp/papers/xorshiftplus.pdf\" rel=\"noreferrer\">Further scramblings of Marsaglia\u2019s xorshift generators</a>. Unfortunately, the implementation in that paper is slightly different:</p>\n\n<pre><code>uint64_t next(void) {\n    uint64_t s1 = s[0];\n    const uint64_t s0 = s[1];\n    s[0] = s0;\n    s1 ^= s1 &lt;&lt; 23; // a\n    s[1] = s1 ^ s0 ^ (s1 &gt;&gt; 18) ^ (s0 &gt;&gt; 5); // b, c\n    return s[1] + s0;\n}\n</code></pre>\n\n<p>Apart from some different names, these two snippets are identical except for the final two shifts. In the Wikipedia version those shifts are by 17 and 26, while the shifts in the paper are by 18 and 5.</p>\n\n<p>Does anyone know which is the \"right\" algorithm? Does it make a difference? This is apparently a fairly widely used algorithm - but which version is used?</p>\n"}, {"tags": ["c", "algorithm", "performance", "benchmarking"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1450828640, "post_id": 34426464, "comment_id": 56594340, "body": "Very similar to <a href=\"http://stackoverflow.com/questions/5148653/bit-operations-c\">stackoverflow.com/questions/5148653/bit-operations-c</a>"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1450829732, "post_id": 34426464, "comment_id": 56594641, "body": "If you want detailed information: compile the code in question to assembly, look at the assembly and see <a href=\"http://www.agner.org\" rel=\"nofollow noreferrer\"><i>Instruction tables: Lists of instruction latencies, throughputs and micro-operation breakdowns for Intel, AMD and VIA CPUs</i> on agner.org</a>."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1450875055, "post_id": 34426464, "comment_id": 56613031, "body": "write a small program, start a clock, do the same action millions of times, stop the clock and compare"}], "answers": [{"comments": [{"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1450848139, "post_id": 34426571, "comment_id": 56599281, "body": "This is a bit misleading because it doesn&#39;t account for multiple dispatch, instruction reordering, etc. Also, floating point ops often vary in spped with the values of the operands."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1450861987, "post_id": 34426571, "comment_id": 56605182, "body": "@Gene Which is why I say \u201cYour mileage may vary.\u201d"}, {"owner": {"reputation": 505, "user_id": 1163561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d56e278d04a38ab76f575eee249d41c4?s=128&d=identicon&r=PG", "display_name": "Wael Boutglay", "link": "https://stackoverflow.com/users/1163561/wael-boutglay"}, "edited": false, "score": 0, "creation_date": 1450869495, "post_id": 34426571, "comment_id": 56609735, "body": "@FUZxxl so if I implement an algorithm using SHIFT and BITWISE operators (one cycle), it will be more optimized than if it&#39;s implemented using / or % (20 cycles)?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 505, "user_id": 1163561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d56e278d04a38ab76f575eee249d41c4?s=128&d=identicon&r=PG", "display_name": "Wael Boutglay", "link": "https://stackoverflow.com/users/1163561/wael-boutglay"}, "edited": false, "score": 1, "creation_date": 1450869569, "post_id": 34426571, "comment_id": 56609774, "body": "@WaelBoutglay Potentially. The compiler is going to optimize stuff like <code>a &#47; 32</code> into <code>a &gt;&gt; 5</code> though, so you shouldn&#39;t worry about such small details."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1450829182, "creation_date": 1450829182, "answer_id": 34426571, "question_id": 34426464, "link": "https://stackoverflow.com/questions/34426464/can-we-compare-benchmark-performance-of-binary-operators/34426571#34426571", "title": "Can we compare benchmark/performance of binary operators?", "body": "<p>The performance of these operators depends on the platform. If an operation expresses with a \u201cslow\u201d operator can be implemented with a \u201cfast\u201d operator, you can generally expect the compiler to pick this up and emit fast code. Do not use \u201cfaster\u201d operands just because someone told you they are faster without benchmarking.</p>\n\n<p>Generally though, operators can be classified in speed roughly according to the following scale:</p>\n\n<ol>\n<li>Zero cycles: Addition immediately preceding dereferencing such as in an array expression <code>a[b]</code> is usually free. Unary <code>+</code> is free, too.</li>\n<li>One cycle: For integer operands: binary <code>+</code>, <code>-</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&amp;</code>, <code>|</code>, <code>^</code>, unary <code>-</code>, <code>~</code>, casts between integer types or pointers, if the result is not used numerically: <code>!</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>!=</code>, <code>&amp;&amp;</code>, <code>||</code></li>\n<li>Three to four cycles: binary <code>*</code> on integer operands, on floating point operands: binary <code>+</code>, <code>-</code></li>\n<li>20 cycles (?): integer binary <code>/</code>, <code>%</code></li>\n<li>50 cycles (?): floating point <code>/</code>, <code>fmod</code></li>\n</ol>\n\n<p>Your mileage may vary, do not rely on this table, benchmark when in doubt.</p>\n"}, {"tags": [], "owner": {"reputation": 436, "user_id": 5585340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203879452346033/picture?type=large", "display_name": "Anton Knyazyev", "link": "https://stackoverflow.com/users/5585340/anton-knyazyev"}, "is_accepted": false, "score": 3, "last_activity_date": 1450874918, "creation_date": 1450874918, "answer_id": 34436090, "question_id": 34426464, "link": "https://stackoverflow.com/questions/34426464/can-we-compare-benchmark-performance-of-binary-operators/34436090#34436090", "title": "Can we compare benchmark/performance of binary operators?", "body": "<p>A couple of additions to FUZxxl's answer:</p>\n\n<ul>\n<li>on modern Intels and AMDs both + and * have roughly the same (very fast) throughput, but * usually has higher latency. Throughput is how often you can issue a command, and latency is how long you'd have to wait before the results are ready (while the CPU executes something else out of order)</li>\n<li>some RISC CPUs have pretty expensive shifts (namely, the ones used on Xbox360 and PS3)</li>\n<li>they \"fixed\" the division some time ago, and it's no longer as horribly slow as it used to be. I think FP division is about 16 clocks now (integer might actually be slower)</li>\n<li>while comparisons are all fast per se, conditional jumps can be very slow if they are mispredicted (since the CPU will have to dump everything that it would have predictively executed ahead). Whether the CPU manages to predict the results of a comparison depends on how random they are (when the same check is executed many times). However, even if they tend to follow a pattern, each jump uses up a branch prediction slot, so it may evict another jump from it, and that other branch would suffer the misprediction penalty instead. In other words, comparisons can be pretty expensive. </li>\n</ul>\n"}], "owner": {"reputation": 505, "user_id": 1163561, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d56e278d04a38ab76f575eee249d41c4?s=128&d=identicon&r=PG", "display_name": "Wael Boutglay", "link": "https://stackoverflow.com/users/1163561/wael-boutglay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 34426571, "answer_count": 2, "score": 2, "last_activity_date": 1484254814, "creation_date": 1450828493, "last_edit_date": 1484254814, "question_id": 34426464, "link": "https://stackoverflow.com/questions/34426464/can-we-compare-benchmark-performance-of-binary-operators", "title": "Can we compare benchmark/performance of binary operators?", "body": "<p>My question is about the performance (execution time / benchmark) of binary operators, can we say by example that performing <code>a + b</code> is faster than <code>a % b</code>.\nMy question is not limited to only those operators (+ and %) but also:</p>\n\n<ul>\n<li>Additive operators (+ and -)</li>\n<li>Multiplicative operators (*, /, %...)</li>\n<li>Comparative operators (&lt;, >, &lt;=...)</li>\n<li>BITWISE and shift operators (&lt;&lt;, &lt;&lt;&lt;...)</li>\n<li>...</li>\n</ul>\n"}, {"tags": ["c", "compilation", "makefile", "linker"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 6, "creation_date": 1450828054, "post_id": 34426362, "comment_id": 56594171, "body": "Your <code>CFLAGS</code> has <code>-c</code> in it. Which means compile but don&#39;t link. And you are using those flags in the rule for the <code>game</code> target which is supposed to link."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1450831301, "post_id": 34426362, "comment_id": 56595031, "body": "You don&#39;t need the <code>$(SDL)</code> macro when you compile the object files; it only specifies libraries.  You do need the <code>$(SDL)</code> macro in the command line of your linking command.  You need a macro such as <code>OBJECTS = global.o display.o player.o entities.o controls.o sound.o menu.o</code> which you can then use in your link dependencies, and in the link command, which should probably be <code>$(CC) -o $@ $(CFLAGS) $(OBJECTS) $(LDFLAGS) $(LDLIBS)</code> where <code>LDFLAGS</code> might specify <code>-L&#47;usr&#47;local&#47;sdl&#47;lib</code> and <code>LDLIBS</code> would include <code>$(SDL)</code> and the <code>-lm</code> option too.  The CFLAGS macro should not include <code>-c</code>."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1450831113, "post_id": 34426484, "comment_id": 56594986, "body": "And better still to create a macro <code>OBJECTS = global.o display.o player.o entities.o controls.o sound.o menu.o</code> and then use the in both the dependency line and the link command line."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1450828617, "creation_date": 1450828617, "answer_id": 34426484, "question_id": 34426362, "link": "https://stackoverflow.com/questions/34426362/what-does-linker-input-file-unused-because-linking-not-done-mean-c-makefile/34426484#34426484", "title": "What does &quot;linker input file unused because linking not done&quot; mean? (C makefile)", "body": "<p>Do not put <code>-lm</code> or the SDL libraries into <code>CFLAGS</code>, library operands go to the end of the command line. Instead, use an extra variable <code>LDLIBS</code> and modify your <code>game</code> rule like this:</p>\n\n<pre><code>game: global.o display.o player.o entities.o controls.o sound.o menu.o\n    $(GCC) $(CFLAGS) -o $@ global.o display.o player.o entities.o controls.o sound.o menu.o $(LDLIBS)\n</code></pre>\n\n<p>The <code>-lm</code> operand (it's not an option) and the operands for SDL only apply when linking, thus it should not be part of <code>CFLAGS</code> and should not be specified when compiling without linking (i.e. when <code>-c</code> is supplied).</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 7, "last_activity_date": 1450828974, "creation_date": 1450828974, "answer_id": 34426529, "question_id": 34426362, "link": "https://stackoverflow.com/questions/34426362/what-does-linker-input-file-unused-because-linking-not-done-mean-c-makefile/34426529#34426529", "title": "What does &quot;linker input file unused because linking not done&quot; mean? (C makefile)", "body": "<p>Your linking command expands to:</p>\n\n<pre><code>gcc -c -std=c99 -lm -Wall -Wextra -pedantic -O3 -Wfloat-equal -g global.o display.o player.o entities.o controls.o sound.o menu.o -o game\n</code></pre>\n\n<p>which, as you can see, has the <code>-c</code> flag in it. The <code>-c</code> flag tells gcc <em>not</em> to do linking. So it has nothing to actually do. (<code>.o</code> files can only be used for linking, and you've disabled linking, which is why you get that message)</p>\n\n<p>You don't want to use the same flags for compiling and linking. For compiling you probably want <code>-c -std=c99 -Wall -Wextra -pedantic -O3 -Wfloat-equal -g</code>, and for linking you want <code>-lm -lSDL2 -lSDL2_ttf -lSDL2_image -lSDL2_mixer -g</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 337, "user_id": 5585774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1276d732fee2b7000db9c54ccceab500?s=128&d=identicon&r=PG&f=1", "display_name": "liamw9", "link": "https://stackoverflow.com/users/5585774/liamw9"}, "edited": false, "score": 0, "creation_date": 1450865838, "post_id": 34427391, "comment_id": 56607433, "body": "Thank you.  I had tried following tutorials and there were several things that I didn&#39;t understand. You have cleared them up for me"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 337, "user_id": 5585774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1276d732fee2b7000db9c54ccceab500?s=128&d=identicon&r=PG&f=1", "display_name": "liamw9", "link": "https://stackoverflow.com/users/5585774/liamw9"}, "edited": false, "score": 0, "creation_date": 1450911340, "post_id": 34427391, "comment_id": 56631821, "body": "the error message the OP received means the link step was not performed.   It was not performed due to the several &#39;oops&#39; in the OPs posted makefile."}, {"owner": {"reputation": 2648, "user_id": 318904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2a1bf085f9aa77a5e8a429dbaad0de?s=128&d=identicon&r=PG", "display_name": "user318904", "link": "https://stackoverflow.com/users/318904/user318904"}, "edited": false, "score": 0, "creation_date": 1524159088, "post_id": 34427391, "comment_id": 86869854, "body": "Downvoting because your final Makefile has several bad practices: hard-coding RM and CC, not using make&#39;s built-in rules, passing some linking flags in hard-coded, others through SDL, including &quot;.&quot; is un-needed, always append to CFLAGS so additional ones can be specified on command line, using &quot;LFLAGS&quot; as second set of cflags (w/ no warnings)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 2648, "user_id": 318904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2a1bf085f9aa77a5e8a429dbaad0de?s=128&d=identicon&r=PG", "display_name": "user318904", "link": "https://stackoverflow.com/users/318904/user318904"}, "edited": false, "score": 0, "creation_date": 1525976656, "post_id": 34427391, "comment_id": 87575081, "body": "@user318904, your understanding of &#39;best practices&#39; for the contents of a makefile and my understanding are significantly different.  Please post a link to a web page that lists &#39;best practices&#39; for makefiles"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 4, "last_activity_date": 1450835763, "creation_date": 1450835763, "answer_id": 34427391, "question_id": 34426362, "link": "https://stackoverflow.com/questions/34426362/what-does-linker-input-file-unused-because-linking-not-done-mean-c-makefile/34427391#34427391", "title": "What does &quot;linker input file unused because linking not done&quot; mean? (C makefile)", "body": "<p>there are several small oversights in the posted makefile.</p>\n\n<p>Amongst them:</p>\n\n<ol>\n<li>library names are only used during the link step, not the compile step</li>\n<li>suggest using the 'wildcard' make operator to get a list of the source files.  Then use a patterm replacement operator to get a list of the object files:</li>\n</ol>\n\n<p>for instance:</p>\n\n<pre><code>SRC := $(wildcard *.c)\nOBJ := $(SRC:.c=.o)\n</code></pre>\n\n<ol start=\"3\">\n<li>when a target (all, clean) will not produce a file of the same name, then insert a <code>.PHONY:</code> statement early in the make file:</li>\n</ol>\n\n<p>similarly to:</p>\n\n<pre><code>.PHONY : all clean\n</code></pre>\n\n<ol start=\"4\">\n<li><p>the posted make file has no facilities to handle the associated header files, There are several ways to handle that.  This follows the OPs lead and does not handle the header files, so changing a header file will not recompile/relink the effected source files.</p></li>\n<li><p>this line: <code>rm *o game</code> will not remove the name.o files as it is missing the '.' between the root name and the 'o' extension. Also, the '-f' flag should be used with the 'rm' command.  </p></li>\n</ol>\n\n<p>suggest:</p>\n\n<pre><code>rm -f *.o game \n</code></pre>\n\n<ol start=\"6\">\n<li>this line: <code>all: ./game</code> can create problems </li>\n</ol>\n\n<p>suggest:</p>\n\n<pre><code>all: game\n</code></pre>\n\n<ol start=\"7\">\n<li>once the list of object files is created (as above) then the compile rules can be reduced:</li>\n</ol>\n\n<p>by using the make operators:</p>\n\n<pre><code>%.o: %.c\n    $(CC) $(CFLAGS) -c $&lt; -o $@ -I.\n</code></pre>\n\n<ol start=\"8\">\n<li><p>the <code>-g</code> parameter to the compiler and linker allows for a debugger to be used.  If that debugger is <code>gdb</code> then a better parameter is <code>-ggdb</code></p></li>\n<li><p>almost always, there is no need to evaluate a macro definition more than once, so rather than using <code>=</code> in a macro definition, use <code>:=</code></p></li>\n<li><p>If you want the <code>game</code> to be executable, then insert a <code>chmod</code> command as the last line in the 'link' rule</p></li>\n</ol>\n\n<p>Suggest reading about the special operators that can be employed in a <code>makefile</code> to help you understand the following, suggested makefile</p>\n\n<p>It is usually best to replace calls to the shell recognized commands with macros.</p>\n\n<pre><code>CC := /user/bin/gcc\nRM := /usr/bin/rm\n\nCFLAGS := -c -std=c99 -Wall -Wextra -pedantic -O3 -Wfloat-equal -ggdb\nLFLAGS := -std=c99 -O3 -ggdb\n\nSDL := -lSDL2 -lSDL2_ttf -lSDL2_image -lSDL2_mixer\n\nSRC := $(wildcard *.c)\nOBJS := $(SRC:.c=.o)\n\n\n.PHONY : all clean\nall: game\n\n\ngame: $(OBJS)\n    $(CC) $(LFLAGS)  $(OBJS) -o $@ $(SDL) -lm\n\n%.o: %.c\n    $(CC) $(CFLAGS) -c $&lt; -o $@ -I.\n\n\nclean:\n    $(RM) -f *.o game\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 5585774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1276d732fee2b7000db9c54ccceab500?s=128&d=identicon&r=PG&f=1", "display_name": "liamw9", "link": "https://stackoverflow.com/users/5585774/liamw9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36471, "favorite_count": 3, "accepted_answer_id": 34427391, "answer_count": 3, "score": 7, "last_activity_date": 1450835763, "creation_date": 1450827884, "question_id": 34426362, "link": "https://stackoverflow.com/questions/34426362/what-does-linker-input-file-unused-because-linking-not-done-mean-c-makefile", "title": "What does &quot;linker input file unused because linking not done&quot; mean? (C makefile)", "body": "<p>I have created a makefile to compile and link my program, however, I can't figure out why I am getting this error. Is it to do with SDL?</p>\n\n<pre><code>GCC = gcc\nCFLAGS = -c -std=c99 -lm -Wall -Wextra -pedantic -O3 -Wfloat-equal -g\nSDL = -lSDL2 -lSDL2_ttf -lSDL2_image -lSDL2_mixer\n\nall: ./game\n\ngame: global.o display.o player.o entities.o controls.o sound.o menu.o\n    $(GCC) $(CFLAGS) global.o display.o player.o entities.o controls.o sound.o menu.o -o game\n\nglobal.o: global.c\n    $(GCC) $(CFLAGS) $(SDL) global.c\n\ndisplay.o: display.c\n    $(GCC) $(CFLAGS) $(SDL) display.c\n\nplayer.o: player.c\n    $(GCC) $(CFLAGS) $(SDL) player.c\n\nentities.o: entities.c\n    $(GCC) $(CFLAGS) $(SDL) entities.c\n\ncontrols.o: controls.c\n    $(GCC) $(CFLAGS) $(SDL) controls.c\n\nsound.o: sound.c\n    $(GCC) $(CFLAGS) $(SDL) sound.c\n\nmenu.o: menu.c\n    $(GCC) $(CFLAGS) $(SDL) menu.c\n\nclean:\n    rm *o game\n</code></pre>\n"}, {"tags": ["c", "sorting", "mergesort", "sorting-network"], "comments": [{"owner": {"reputation": 1760, "user_id": 1583649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6bGxr.png?s=128&g=1", "display_name": "MaxOvrdrv", "link": "https://stackoverflow.com/users/1583649/maxovrdrv"}, "edited": false, "score": 0, "creation_date": 1450827972, "post_id": 34426337, "comment_id": 56594155, "body": "Not sure how hard you are going to be on efficiency, but if the final result is accurate, does it really matter if it generates too many pairs during the process?"}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "reply_to_user": {"reputation": 1760, "user_id": 1583649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6bGxr.png?s=128&g=1", "display_name": "MaxOvrdrv", "link": "https://stackoverflow.com/users/1583649/maxovrdrv"}, "edited": false, "score": 0, "creation_date": 1450828567, "post_id": 34426337, "comment_id": 56594312, "body": "YES. In software it generates masses of compare operation with a big cache pollution. In hardware it increases area consumption and latency. Normally odd-even-merge sort has a O(N * log N * log N) size complexity. My diagram looks like N^3."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1450828585, "post_id": 34426337, "comment_id": 56594322, "body": "I don&#39;t understand: what do you dislike about the current algorithm?  Why do you claim it generates too many pairs?  Is there a particular pair that you are sure is unnecessary?  What is an odd-even merge sort?"}, {"owner": {"reputation": 1760, "user_id": 1583649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6bGxr.png?s=128&g=1", "display_name": "MaxOvrdrv", "link": "https://stackoverflow.com/users/1583649/maxovrdrv"}, "edited": false, "score": 0, "creation_date": 1450828843, "post_id": 34426337, "comment_id": 56594415, "body": "Right! I understand what you mean, the concept, etc... however I am not deeply knowledged enough in Math algorithms to help you much. Hopefully someone can help you."}, {"owner": {"reputation": 28158, "user_id": 356387, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91ef3904450f872af097e96e4aafe3f7?s=128&d=identicon&r=PG&f=1", "display_name": "some_id", "link": "https://stackoverflow.com/users/356387/some-id"}, "edited": false, "score": 1, "creation_date": 1450833899, "post_id": 34426337, "comment_id": 56595613, "body": "Maybe this helps? <a href=\"http://www.academia.edu/9035484/VLSI_Design_of_Parallel_Sorter_based_on_Modified_PCM_Algorithm_and_Batchers_Odd-Even_Mergesort\" rel=\"nofollow noreferrer\">academia.edu/9035484/&hellip;</a>. Try <a href=\"http://dsp.stackexchange.com/\">dsp.stackexchange.com</a>"}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 1, "creation_date": 1450835120, "post_id": 34426337, "comment_id": 56595869, "body": "I finished my result diagram as ASCII-art :)."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1450835876, "post_id": 34426337, "comment_id": 56596037, "body": "Thanks, Paebbels.  It is much clearer what the problem is now.  The 2-3, 4-5, and 6-7 sorts in the second column are clearly redundant."}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1450845785, "post_id": 34426337, "comment_id": 56598485, "body": "I think I found a solution. Can anybody check my code or should I ask this on CR.SE?"}], "answers": [{"tags": [], "owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "is_accepted": true, "score": 1, "last_activity_date": 1451175856, "last_edit_date": 1451175856, "creation_date": 1450845661, "answer_id": 34428749, "question_id": 34426337, "link": "https://stackoverflow.com/questions/34426337/how-to-fix-this-non-recursive-odd-even-merge-sort-algorithm/34428749#34428749", "title": "How to fix this non-recursive odd-even-merge sort algorithm?", "body": "<p>I think I found a solution. I checked it for <code>length = 2, 4, 8, 16</code>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>void sort(int length)\n{ int G = log2ceil(length);                      // number of groups\n  for (int g = 0; g &lt; G; g++)                    // iterate groups\n  { int B = 1 &lt;&lt; (G - g - 1);                    // number of blocks\n    for (int b = 0; b &lt; B; b++)                  // iterate blocks in a group\n    { for (int s = 0; s &lt;= g; s++)               // iterate stages in a block\n      { int d = 1 &lt;&lt; (g - s);                    // compare distance\n        int J = (s == 0) ? 0 : d;                // starting point\n        for (int j = J; j+d &lt; (2&lt;&lt;g); j += 2*d)  // iterate startpoints\n        { for (int i = 0; i &lt; d; i++)            // shift startpoints\n          { int x = (b * (length / B)) + j + i;  // index 1\n            int y = x + d;                       // index 2\n            printf(\"%2i cmp %2i\\n\", x, y);\n          }\n        }\n      }\n   }\n}\n</code></pre>\n\n<p>This solution introduces a fifth for-loop to handle subblocks in a group.\nThe j loop has a changed start and abort value to handle odd counts of post merge steps without generating doubled compare steps.</p>\n"}, {"comments": [{"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1451074819, "post_id": 34464919, "comment_id": 56674220, "body": "I&#39;ll try to find this book in the library."}], "tags": [], "owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "is_accepted": false, "score": 4, "last_activity_date": 1451065350, "last_edit_date": 1451065350, "creation_date": 1451064357, "answer_id": 34464919, "question_id": 34426337, "link": "https://stackoverflow.com/questions/34426337/how-to-fix-this-non-recursive-odd-even-merge-sort-algorithm/34464919#34464919", "title": "How to fix this non-recursive odd-even-merge sort algorithm?", "body": "<p>The following code works for arrays of any size and isn't recursive. It is a straight port from the implementation of <a href=\"https://github.com/jgamble/Algorithm-Networksort/blob/master/lib/Algorithm/Networksort.pm#L511-L555\" rel=\"nofollow\">the corresponding function</a> in Perl's <code>Algorithm::Networksort</code> module. The implementation happens to correspond to the algorithm as described by Knuth in <em>The Art of Computer Programming, vol 3</em> (algorithm 5.2.2M). It doesn't help to actually fix your algorithm, but it at least gives you a working non-recursive implementation of Batcher's odd-even mergesort with only three nested loops :)</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid oddeven_merge_sort(int length)\n{\n    int t = ceil(log2(length));\n    int p = pow(2, t - 1);\n\n    while (p &gt; 0) {\n        int q = pow(2, t - 1);\n        int r = 0;\n        int d = p;\n\n        while (d &gt; 0) {\n            for (int i = 0 ; i &lt; length - d ; ++i) {\n                if ((i &amp; p) == r) {\n                    printf(\"%2i cmp %2i\\n\", i, i + d);\n                }\n            }\n\n            d = q - p;\n            q /= 2;\n            r = p;\n        }\n        p /= 2;\n    }\n}\n</code></pre>\n\n<p>If you can get your hands on a copy of <em>The Art of Computer Programming, vol 3</em>, you will have a nice explanation of how and why the algorithm works, as well as a few additional details.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 1696120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/526732efd7704dc251cdb8cc19c863f8?s=128&d=identicon&r=PG", "display_name": "wkpark", "link": "https://stackoverflow.com/users/1696120/wkpark"}, "is_accepted": false, "score": 1, "last_activity_date": 1507647637, "last_edit_date": 1507647637, "creation_date": 1507643678, "answer_id": 46668611, "question_id": 34426337, "link": "https://stackoverflow.com/questions/34426337/how-to-fix-this-non-recursive-odd-even-merge-sort-algorithm/46668611#46668611", "title": "How to fix this non-recursive odd-even-merge sort algorithm?", "body": "<p>This is a fixed non-recursive subroutine.</p>\n\n<pre><code>void sort(int n)\n{\n  for (int p = 1; p &lt; n; p += p)\n    for (int k = p; k &gt; 0; k /= 2)\n      for (int j = k % p; j + k &lt; n; j += k + k)\n        //for (int i = 0; i &lt; n - (j + k); i++) // wrong\n        for (int i = 0; i &lt; k; i++) // correct\n          if ((i + j)/(p + p) == (i + j + k)/(p + p))\n            printf(\"%2i cmp %2i\\n\", i + j, i + j + k);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void sort(int n)\n{\n  for (int p = 1; p &lt; n; p += p)\n    for (int k = p; k &gt; 0; k /= 2)\n      for (int j = 0; j &lt; k; j++)\n        for (int i = k % p; i + k &lt; n; i += k + k)\n          if ((i + j)/(p + p) == (i + j + k)/(p + p))\n            printf(\"%2i cmp %2i\\n\", i + j, i + j + k);\n}\n</code></pre>\n"}], "owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 2, "accepted_answer_id": 34428749, "answer_count": 3, "score": 11, "last_activity_date": 1601218300, "creation_date": 1450827777, "last_edit_date": 1601218300, "question_id": 34426337, "link": "https://stackoverflow.com/questions/34426337/how-to-fix-this-non-recursive-odd-even-merge-sort-algorithm", "title": "How to fix this non-recursive odd-even-merge sort algorithm?", "body": "<p>I was searching for non-recursive odd-even-merge sort algorithm and found 2 sources:</p>\n\n<ul>\n<li>a book from <a href=\"https://flylib.com/books/en/3.55.1.112/1/\" rel=\"nofollow noreferrer\">Sedgewick R.</a></li>\n<li>this <a href=\"https://stackoverflow.com/questions/2938270/batchers-odd-even-merge-sort\">SO question</a></li>\n</ul>\n\n<p>Both algorithms are identical but false. The resulting sorting network is not an odd-even-merge sort network.</p>\n\n<p>Here is an image of the resulting network with 32 inputs. A vertical line between 2 horizontal lines means compare value a[x] with a[y], if greater then swap the values in the array.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dRNZx.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dRNZx.gif\" alt=\"odd-even-merge sort for 32 inputs\"></a><br>\n<sub>(source: <a href=\"http://flylib.com/books/3/55/1/html/2/images/11fig07.gif\" rel=\"nofollow noreferrer\">flylib.com</a>)</sub><br>\n (clickable)</p>\n\n<p>I copied the code from Java to C and replaced the <code>exch</code> function by a <code>printf</code> to print the exchange candidates.</p>\n\n<p>When one draws a diagram of the pairs, it can be seen that too many pairs are generated.</p>\n\n<p><strong>Has anyone an idea how to fix this algorithm?</strong></p>\n\n<p>Why do I need non-recursive version?<br>\nI want to transform this sorting network into hardware. It's easy to insert pipeline stages into a non-recursive algorithms.</p>\n\n<p>I also investigated the recursive version, but it's too complex to transform the algorithm into pipelined hardware.</p>\n\n<p>My C code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid sort(int l, int r)\n{ int n = r-l+1;\n\n  for (int p=1; p&lt;n; p+=p)\n    for (int k=p; k&gt;0; k/=2)\n      for (int j=k%p; j+k&lt;n; j+=(k+k))\n        for (int i=0; i&lt;n-j-k; i++)\n          if ((j+i)/(p+p) == (j+i+k)/(p+p))\n              printf(\"%2i cmp %2i\\n\", l+j+i, l+j+i+k);\n}\nint main(char* argv, int args)\n{ const int COUNT = 8;\n  sort(0, COUNT);\n}\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>0 -o--------o-------------------------o---------------o-------------------------\n   |        |                         |               |\n1 -o--------|-o------o----------------|-o-------------o-o-----------------------\n            | |      |                | |               |\n2 -o-o------o-|------o-o--------------|-|-o----o--------o-o---------------------\n   | |        |        |              | | |    |          |\n3 -o-o--------o--------o--------------|-|-|-o--|-o--------o-o-------o-----------\n                                      | | | |  | |          |       |\n4 -o-o-o----o---o----o-----o----------o-|-|-|--o-|-o--------o-o-----o-o---------\n   | | |    |   |    |     |            | | |    | |          |       |\n5 -o-o-o----|-o-|-o--o-o---o-o---o------o-|-|----o-|-o--------o-o-----o-o---o---\n            | | | |    |     |   |        | |      | |          |       |   |\n6 -o-o-o-o--o-|-o-|----o-o---o-o-o-o------o-|------o-|----------o-o-----o-o-o-o-\n   | | | |    |   |      |     |   |        |        |            |       |   |\n7 -o-o-o-o----o---o------o-----o---o--------o--------o------------o-------o---o-\n</code></pre>\n\n<p>When I know the correct exchange pairs and the algorithm is equal to the image, I'll translate it into VHDL for tests on my hardware platform.</p>\n\n<p>Other open source hardware sorting network implementations:</p>\n\n<ul>\n<li><a href=\"https://github.com/VLSI-EDA/PoC/blob/master/src/sort/sortnet/sortnet_OddEvenSort.vhdl\" rel=\"nofollow noreferrer\">PoC.sort.sortnet.oddevensort</a></li>\n<li><a href=\"https://github.com/VLSI-EDA/PoC/blob/master/src/sort/sortnet/sortnet_BitonicSort.vhdl\" rel=\"nofollow noreferrer\">PoC.sort.sortnet.bitonicsort</a></li>\n</ul>\n\n<hr>\n\n<p><strong>Appendix:</strong><br>\nOdd-even mergesort (a.k.a Batcher's sort) is like bitonic sort (not to confuse with Batcher's bitonic sort). But in hardware this algorithm has a better size complexity than bitonic sort, while latency is the same.</p>\n\n<p>These algorithm can be implemented with good resource usage compared to fast software algorithms like quicksort.</p>\n\n<p>Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Batcher_odd%E2%80%93even_mergesort\" rel=\"nofollow noreferrer\">odd-even mergesort</a></p>\n\n<p><strong>Note:</strong><br>\nBecause sorting networks are static and independent of the input values, no compare and swap is needed to generate the network. That's one reason why it can be transformed into hardware. My code generates the indices for the compare operations. In hardware, these vertical connections will be replaced by compare and swap circuits. So unsorted data will travel throught the network and on the output side it will be sorted.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450826783, "post_id": 34426041, "comment_id": 56593767, "body": "Why do you write <code>*(input+i)</code> rather than <code>input[i]</code>?"}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450827561, "post_id": 34426041, "comment_id": 56594011, "body": "only because our proffesor told us to write like that"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450827729, "post_id": 34426041, "comment_id": 56594075, "body": "@omri Please disregard your professors advice in this matter."}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450827799, "post_id": 34426041, "comment_id": 56594096, "body": "@FUZxxl although I do see your point, I also see pedagogic value in understanding that array indexing is just pointer addition. As long as the students know it&#39;s just pedagogic :)"}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450828117, "post_id": 34426041, "comment_id": 56594197, "body": "yeah i know :) , i&#39;m aware that the indexing can be done in various ways and he explained it to us as well, he just asked for it for us to show him we know what we do with the pointers"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450828432, "post_id": 34426041, "comment_id": 56594274, "body": "@omri Just remember, in production code always use <code>a[b]</code> instead of <code>*(a + b)</code> or your project partners are going to hate you."}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450828475, "post_id": 34426041, "comment_id": 56594285, "body": "lol thanks, i will keep that in mind :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450829106, "post_id": 34426041, "comment_id": 56594497, "body": "<code>size</code> too small by 1."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450829330, "post_id": 34426041, "comment_id": 56594552, "body": "<code>realloc(*(input+i), (size++)*sizeof(char))</code> does not allocate space for the null character."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450829497, "post_id": 34426041, "comment_id": 56594585, "body": "Also <code>size</code> may need to be reset within <code>while (i &lt; 5) {</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450836430, "post_id": 34426041, "comment_id": 56596169, "body": "regarding lines like: <code>char **input = (char **)calloc(1, sizeof(char))</code>  1) in C, when calling the memory allocation family of functions, do not cast the returned value.  It is already a <code>void*</code> so can be assigned to any other pointer.  Casting just clutters the code and creates headaches when debugging/maintaining the code.  2) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450836583, "post_id": 34426041, "comment_id": 56596212, "body": "When calling <code>realloc()</code>, never assign directly into the target pointer.  Rather assign to a temporary pointer, then check (!=NULL) that temporary pointer and if not NULL then assign to the target pointer.  Otherwise, when <code>realloc()</code> fails, the original pointer will be overlayed with NULL, resulting in a memory leak because the original pointer value cannot be passed to <code>free()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450836724, "post_id": 34426041, "comment_id": 56596251, "body": "the expression <code>sizeof( char )</code> is, by definition always 1.  multiplying anything by 1 has not effect.  Using that expression (multiplied by something else) in the parameter to a memory allocation function just clutters the code, has no effect, and adds headaches when debugging/maintaining the code.  It also makes the code harder to read/understand"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450837077, "post_id": 34426041, "comment_id": 56596346, "body": "The posted code fails to cleanly compile, resulting in the compiler raising 4 warnings.  When compiling, always enable all the warnings.  (for gcc, at a minimum use: <code>-Wall -Wextra -pedantic</code> I also use: <code>-std=c99 -Wconversion</code>. )  Then fix those warnings."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450837367, "post_id": 34426041, "comment_id": 56596412, "body": "for readability/understandability by us humans and for ease of documentation by tools like <code>doxygen</code>, please follow the axiom: only one statement per line and (at most) one variable declaration per statement."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450837596, "post_id": 34426041, "comment_id": 56596465, "body": "for readability, please consistently indent the code.  Suggest 4 spaces after every opening brace &#39;{&#39; and unindent before every closing brace &#39;}&#39;."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450837830, "post_id": 34426041, "comment_id": 56596529, "body": "regarding this line: <code>char **input = (char **)calloc(1, sizeof(char))</code>  This allocates a single char for what is expected.defined to be an array of pointers to char.  Suggest: <code>char **input = calloc(1, sizeof(char*))</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450838362, "post_id": 34426041, "comment_id": 56596672, "body": "this line: <code>*(input+i) = (char*)realloc(*(input+i), (size++)*sizeof(char));</code> is not correct because 1) it does not allow for the NUL termination byte I.E. the char array should be 2 bytes long before inserting the first byte.  It is a poor programming practice to use side effects.  suggest: <code>size++; char *temp =  realloc(*(input+i), size); if( NULL == temp ) { &#47;&#47; handle realloc error, cleanup, exit } *(input+i) = temp;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450838495, "post_id": 34426041, "comment_id": 56596708, "body": "Regarding this line: <code>*(*(input + i) + j++) = ch;</code>  do not use side effects.  Suggest: <code>*(*(input + i) + j) = ch; j++;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450838600, "post_id": 34426041, "comment_id": 56596734, "body": "when calling <code>scanf()</code>, always check the returned value (not the parameter value) to assure the operation was successful.  In the current scenario, any returned value other than 1 is an error"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1450838746, "post_id": 34426041, "comment_id": 56596785, "body": "regarding this line: <code>input = (char**)realloc(input, (sizeinput++)*sizeof(char*));</code>  it is poor programming practice to use side effects.  And the sizeinput is being incremented too late (postincrement)  suggest: <code>sizeinput++; input = realloc(input, (sizeinput)*sizeof(char*));</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450827469, "post_id": 34426175, "comment_id": 56593983, "body": "thanks for the suggestion but unfortunatly its stiil doesn&#39;t worked, it&#39;s just keep getting stuck after I type the second string"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450827785, "post_id": 34426175, "comment_id": 56594093, "body": "@omri What does &quot;it&#39;s just keep getting stuck&quot; mean?"}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450828252, "post_id": 34426175, "comment_id": 56594230, "body": "the program is freezing, like its out of the boundries of the array"}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1450828753, "post_id": 34426175, "comment_id": 56594380, "body": "By <i>freezing</i>, do you mean that it crashes or that it keeps prompting for values?"}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1450828766, "post_id": 34426175, "comment_id": 56594387, "body": "Maybe provide a sample session"}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450829094, "post_id": 34426175, "comment_id": 56594492, "body": "it just freezes and then crashes, I do know that it probably happen because of the &quot;realloc&quot; in the end, after this realloc, when i check the value of &quot;input&quot; durring debug it says &quot;error reading characters of string.&quot;"}, {"owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450829128, "post_id": 34426175, "comment_id": 56594504, "body": "try to run the code maybe you&#39;ll understand the problem better"}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1450829201, "post_id": 34426175, "comment_id": 56594520, "body": "I have, but I believe the reallocation problem happens in the first realloc, inside the while loops, not the last. But I&#39;m still looking into it"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 3, "last_activity_date": 1450829515, "last_edit_date": 1450829515, "creation_date": 1450826907, "answer_id": 34426175, "question_id": 34426041, "link": "https://stackoverflow.com/questions/34426041/i-tried-to-make-an-array-of-strings-and-now-i-have-an-issue-with-my-code-which-i/34426175#34426175", "title": "I tried to make an array of strings and now I have an issue with my code which I don&#39;t know how to fix", "body": "<p><code>(char **)calloc(1, sizeof(char))</code></p>\n\n<p>should be</p>\n\n<p><code>(char **)calloc(1, sizeof(char*))</code></p>\n\n<p>Also, after you reallocate <code>input</code>, the last element is an uninitialized pointer! Add this at the end of the loop, so it points to something useful and which you can reallocate later:</p>\n\n<pre><code>input[sizeinput - 1] = calloc(1, sizeof(char));\n</code></pre>\n\n<p>Cosmetic issues:</p>\n\n<p>There's no need to cast the results of <code>calloc</code> and <code>realloc</code> - although doing so won't prevent your program from working, it does make it uglier.</p>\n\n<p>Also, you can use <code>input[i]</code> instead of <code>*(input + i)</code> and <code>input[i][j]</code> instead of <code>*(*(input + i) + j)</code> - again, it won't affect how your program executes, but it can make it easier to read.</p>\n"}, {"comments": [{"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "reply_to_user": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "edited": false, "score": 0, "creation_date": 1450831112, "post_id": 34426664, "comment_id": 56594985, "body": "I&#39;m glad. Happy coding :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450833040, "post_id": 34426664, "comment_id": 56595459, "body": "You allocate the wrong amount of memory in the first <code>calloc</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450833139, "post_id": 34426664, "comment_id": 56595484, "body": "You write the <code>&#39;\\0&#39;</code> out of bounds of the allocated space"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450833282, "post_id": 34426664, "comment_id": 56595519, "body": "This code is pretty badly laid out - many lines are repeated (e.g. the two <code>scanf</code> lines, <code>j = 0</code> etc.), and obfuscated versions of pointer access are used"}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450833438, "post_id": 34426664, "comment_id": 56595539, "body": "@M.M the code is as originally posted by the OP. All I did was fix the error the OP asked for and, as mentioned in my answer, several other issues exist here (hint: you&#39;re not half the way there. There are memory leaks and I/O problems). However, as I said, I focused on solving the problem. If you want to suggest other fixes feel free to do so."}], "tags": [], "owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "is_accepted": true, "score": 0, "last_activity_date": 1450830152, "last_edit_date": 1450830152, "creation_date": 1450829804, "answer_id": 34426664, "question_id": 34426041, "link": "https://stackoverflow.com/questions/34426041/i-tried-to-make-an-array-of-strings-and-now-i-have-an-issue-with-my-code-which-i/34426664#34426664", "title": "I tried to make an array of strings and now I have an issue with my code which I don&#39;t know how to fix", "body": "<p>The problem is happening due to a reallocation happening in non-allocated memory. Consider your original code. When you call <code>realloc</code> for the first time, you call it for <code>*(input + i)</code>, which was previously allocated because <code>i</code> is zero at this point. This allocation happens in the second line of your <code>main</code> function. The problem is that you never allocate for position 1, which you try to (re!)allocate later. This fixes it:</p>\n\n<pre><code>int main()\n{\n    char **input = (char **)calloc(1, sizeof(char)), ch;\n\n    // Don't do it here\n    //*input = (char *)calloc(1, sizeof(char));\n\n    int size = 1,sizeinput=1,current = 0,currentarr=0,i=0,j=0;\n\n    while (i&lt;5)\n    {\n        printf(\"please enter a word\\n\");\n        scanf(\"%c\", &amp;ch);\n\n        // Do it here instead\n        *(input + i) = (char *)calloc(1, sizeof(char));\n\n        while (ch != '\\n')\n        {\n            // Now this reallocation is actually being given something that was allocated before\n            *(input+i) = (char*)realloc(*(input+i), (size++)*sizeof(char));\n            *(*(input + i) + j++) = ch;\n            scanf(\"%c\", &amp;ch);\n        }\n\n        *(*(input + i) + j) = '\\0';\n        j = 0;\n        input = (char**)realloc(input, (sizeinput++)*sizeof(char*));\n        i++;\n    }\n\n    free(input);\n}\n</code></pre>\n\n<p>There are several other issues with this, but as my first suggestion would be to take a different approach I'll leave other issues off the discussion. Let me know if you are interested, anyway.</p>\n\n<p>Note: This causes one extra reallocation per loop. But as I said, it's just a quick fix.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1450839889, "creation_date": 1450839889, "answer_id": 34427985, "question_id": 34426041, "link": "https://stackoverflow.com/questions/34426041/i-tried-to-make-an-array-of-strings-and-now-i-have-an-issue-with-my-code-which-i/34427985#34427985", "title": "I tried to make an array of strings and now I have an issue with my code which I don&#39;t know how to fix", "body": "<p>the following code incorporates the comments, compiles cleanly, uses a function: <code>cleanup()</code> which I did not define, however, <code>cleanup()</code> will pass each word to <code>free()</code> then pass the 'array of pointers to char' to <code>free()</code></p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n//#include &lt;conio.h&gt;\n\n// prototypes\nvoid cleanup( char ** input );\n\nint main()\n{\n    char **input = calloc(1, sizeof(char*));\n    char ch;\n    *input = calloc(1, sizeof(char));\n    size_t size = 1;\n    size_t sizeinput=1;\n    int i=0;\n    int j=0;\n\n    while (i&lt;5)\n    {\n\n        printf(\"please enter a word\\n\");\n        if( 1 != scanf(\"%c\", &amp;ch) )\n        {\n            perror( \"scanf failed\" );\n            cleanup( input );\n            exit( EXIT_FAILURE );\n        }\n\n        while (ch != '\\n')\n        {\n            size++;\n            char *temp = realloc(*(input+i), size);\n            if( NULL == temp)\n            {\n                perror( \"realloc for word failed\" );\n                cleanup( input );\n                exit( EXIT_FAILURE );\n            }\n            *(input+i) = temp;\n\n            *(*(input + i) + j) = ch;\n            j++;\n\n            if( 1 != scanf(\"%c\", &amp;ch) )\n            {\n                perror( \"scanf failed\" );\n                cleanup( input );\n                exit( EXIT_FAILURE );\n            }\n\n        }\n\n        // NUL terminate word\n        *(*(input + i) + j) = '\\0';\n        j = 0;\n\n        sizeinput++;\n        char** lineTemp = realloc(input, sizeinput*sizeof(char*));\n        if( NULL == lineTemp )\n        {\n            perror( \"realloc failed\" );\n            cleanup( input );\n            exit( EXIT_FAILURE );\n        }\n\n        input = lineTemp;\n        i++;\n    }\n    free(input);\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5709101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e6a3548f895dfe765f63d4509602b0?s=128&d=identicon&r=PG&f=1", "display_name": "omri", "link": "https://stackoverflow.com/users/5709101/omri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 34426664, "answer_count": 3, "score": 2, "last_activity_date": 1450839889, "creation_date": 1450826163, "last_edit_date": 1450833876, "question_id": 34426041, "link": "https://stackoverflow.com/questions/34426041/i-tried-to-make-an-array-of-strings-and-now-i-have-an-issue-with-my-code-which-i", "title": "I tried to make an array of strings and now I have an issue with my code which I don&#39;t know how to fix", "body": "<p>I'm trying to make an array of strings by using pointers but for some reason (which I hope you would know) the program is crashing after I type the second string. I have been trying for hours to find what's wrong with this code and I'm hoping for your help! During debugging, after I realloced the input it says \"error reading characters of string.\" Here is the code:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n\n\nint main()\n{\n    char **input = (char **)calloc(1, sizeof(char)), ch;\n    *input = (char *)calloc(1, sizeof(char));\n    int size = 1,sizeinput=1,current = 0,currentarr=0,i=0,j=0;\n    while (i&lt;5)\n{\n\n    printf(\"please enter a word\\n\");\n    scanf(\"%c\", &amp;ch);\n    while (ch != '\\n')\n    {\n        *(input+i) = (char*)realloc(*(input+i), (size++)*sizeof(char));\n        *(*(input + i) + j++) = ch;\n        scanf(\"%c\", &amp;ch);\n    }\n\n    *(*(input + i) + j) = '\\0';\n    j = 0;\n    input = (char**)realloc(input, (sizeinput++)*sizeof(char*));\n    i++;\n    }\n    free(input);\n}\n</code></pre>\n"}, {"tags": ["c", "x11", "sdl-2", "xlib"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 2705885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XYGqW.png?s=128&g=1", "display_name": "mio", "link": "https://stackoverflow.com/users/2705885/mio"}, "edited": false, "score": 0, "creation_date": 1450999864, "post_id": 34451512, "comment_id": 56659615, "body": "I&#39;m trying to use as little Xlib as possible, just enough to get the root window, pass it to <code>SDL_CreateWindowFrom()</code> and leave the rest to SDL. What exactly, apart from closing the display too early, is my code missing? Creating an X event loop doesn&#39;t seem to change anything."}], "tags": [], "owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "is_accepted": false, "score": 1, "last_activity_date": 1450984998, "last_edit_date": 1495540372, "creation_date": 1450953821, "answer_id": 34451512, "question_id": 34425799, "link": "https://stackoverflow.com/questions/34425799/use-root-x11-window-as-the-main-sdl2-window/34451512#34451512", "title": "Use root X11 window as the main SDL2 window", "body": "<p>You're closing the X Display right after you create the SDL window, so you lose the connection. That obviously isn't helping but you also <a href=\"https://stackoverflow.com/questions/32680312/how-to-create-a-game-loop-with-xlib/32682522#32682522\">left out about 95% of the code required to get X working</a>. Tutorial <a href=\"http://tronche.com/gui/x/xlib-tutorial/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 81, "user_id": 2705885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XYGqW.png?s=128&g=1", "display_name": "mio", "link": "https://stackoverflow.com/users/2705885/mio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1469112542, "creation_date": 1450824908, "last_edit_date": 1469112542, "question_id": 34425799, "link": "https://stackoverflow.com/questions/34425799/use-root-x11-window-as-the-main-sdl2-window", "title": "Use root X11 window as the main SDL2 window", "body": "<p>I'm trying to make SDL2 use the root X window to display things, but it doesn't seem to work - the window doesn't get changed in any way. Also, the whole program doesn't quit after the <code>SDL_Delay()</code> for some reason. Is it not possible? Am I doing something wrong?</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n\n#include &lt;X11/Xlib.h&gt;\n\n#include &lt;stdio.h&gt;\n\n// clang -lSDL2 -lX11 -I/usr/include/SDL2 -Weverything x11.c -o x11\n\nint main(void)\n{\n    Display *x11_d;\n    int x11_s;\n    Window x11_w;\n    SDL_Window *w;\n    SDL_Renderer *r;\n\n    x11_d = XOpenDisplay(NULL);\n\n    if(!x11_d) {\n        fprintf(stderr, \"couldn't open display\\n\");\n        return 1;\n    }\n\n    x11_s = DefaultScreen(x11_d);\n    x11_w = RootWindow(x11_d, x11_s);\n\n    if(SDL_Init(SDL_INIT_VIDEO) != 0) {\n        fprintf(stderr, \"couldn't initialize SDL: %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    w = SDL_CreateWindowFrom((void *)x11_w);\n\n    XCloseDisplay(x11_d);\n\n    if(!w) {\n        fprintf(stderr, \"couldn't attach to the root X11 window: %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    r = SDL_CreateRenderer(w, -1, 0);\n\n    SDL_SetRenderDrawColor(r, 255, 0, 0, 255);\n    SDL_RenderClear(r);\n    SDL_RenderPresent(r);\n\n    SDL_Delay(5700);\n\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1450824580, "post_id": 34425721, "comment_id": 56593009, "body": "&quot;I have an empty array &quot; That array isn&#39;t empty. The number of items in the array is <code>1024</code>."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450824790, "post_id": 34425721, "comment_id": 56593070, "body": "In C, the size of an array does not change after it&#39;s created. That array holds 1024 elements (either uninitialized or NULL, I forget which)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1450824812, "post_id": 34425721, "comment_id": 56593078, "body": "And since your edit, that array now holds 0 elements."}, {"owner": {"reputation": 71, "user_id": 5647358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qxKMAxLgzXk/AAAAAAAAAAI/AAAAAAAAKNk/3qtMESUDLcg/photo.jpg?sz=128", "display_name": "Adrian Webster", "link": "https://stackoverflow.com/users/5647358/adrian-webster"}, "edited": false, "score": 0, "creation_date": 1450824843, "post_id": 34425721, "comment_id": 56593088, "body": "I may just have to reinitialize the size of the array every item I add but how can I do that?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450824889, "post_id": 34425721, "comment_id": 56593106, "body": "@AdrianWebster That&#39;s what I just said... In C, the size of an array does not change after it&#39;s created. Ever. Your only option is to create a new array that&#39;s bigger, and to do that you&#39;ll probably need <code>malloc</code> (because local variables aren&#39;t flexible enough)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1450824943, "post_id": 34425721, "comment_id": 56593125, "body": "C doesn&#39;t support empty arrays. (Some compilers might permit them as an extension.)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1450824960, "post_id": 34425721, "comment_id": 56593130, "body": "@AdrianWebster In C you can&#39;t change an array&#39;s size after declaring it. What you can do is to allocate dynamic memory to make a new buffer, assign that to a pointer and use it like an array (even though it is not technically an array)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1450825228, "post_id": 34425721, "comment_id": 56593237, "body": "@KeithThompson C does in structure declarations as the last element. That&#39;s a new rule in C99."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450832540, "post_id": 34425721, "comment_id": 56595341, "body": "@FUZxxl: That&#39;s not an empty array."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1450832662, "post_id": 34425721, "comment_id": 56595377, "body": "@KeithThompson Well, okay, we are fighting with words here, but please read ISO 9899:2011 &#167;6.7.2.1 &#182;3."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1450845729, "post_id": 34425721, "comment_id": 56598466, "body": "@FUZxxl: Words are the only weapon we&#39;ve got. 8-)} But see the end of paragraph 18 in the same section: &quot;If this array would have no elements, it behaves as if it had one element but the behavior is undefined if any attempt is made to access that element or to generate a pointer one past it.&quot; The standard tries very hard to avoid empty arrays. Note also that a VLA with a length of 0 has undefined behavior (if I recall correctly)."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5647358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qxKMAxLgzXk/AAAAAAAAAAI/AAAAAAAAKNk/3qtMESUDLcg/photo.jpg?sz=128", "display_name": "Adrian Webster", "link": "https://stackoverflow.com/users/5647358/adrian-webster"}, "edited": false, "score": 0, "creation_date": 1450824739, "post_id": 34425746, "comment_id": 56593053, "body": "Edit: Ahh I see now. Thanks!"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450825004, "post_id": 34425746, "comment_id": 56593145, "body": "@cmaster I gave this answer before OP removed the 1024 from the array declaration."}, {"owner": {"reputation": 312, "user_id": 4937663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-YSvZC4-OU58/AAAAAAAAAAI/AAAAAAAAADc/VdJ7JGPckN4/photo.jpg?sz=128", "display_name": "Andrea Martinelli", "link": "https://stackoverflow.com/users/4937663/andrea-martinelli"}, "edited": false, "score": 0, "creation_date": 1450825016, "post_id": 34425746, "comment_id": 56593153, "body": "array[i] represent the i-item (+1 if you count from zero)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 312, "user_id": 4937663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-YSvZC4-OU58/AAAAAAAAAAI/AAAAAAAAADc/VdJ7JGPckN4/photo.jpg?sz=128", "display_name": "Andrea Martinelli", "link": "https://stackoverflow.com/users/4937663/andrea-martinelli"}, "edited": false, "score": 0, "creation_date": 1450825069, "post_id": 34425746, "comment_id": 56593173, "body": "@AndreaMartinelli Where do I say that?"}, {"owner": {"reputation": 71, "user_id": 5647358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qxKMAxLgzXk/AAAAAAAAAAI/AAAAAAAAKNk/3qtMESUDLcg/photo.jpg?sz=128", "display_name": "Adrian Webster", "link": "https://stackoverflow.com/users/5647358/adrian-webster"}, "edited": false, "score": 0, "creation_date": 1450825174, "post_id": 34425746, "comment_id": 56593214, "body": "Sorry for causing confusion. I&#39;ve figured it out. Thanks for all the help everyone!"}, {"owner": {"reputation": 312, "user_id": 4937663, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-YSvZC4-OU58/AAAAAAAAAAI/AAAAAAAAADc/VdJ7JGPckN4/photo.jpg?sz=128", "display_name": "Andrea Martinelli", "link": "https://stackoverflow.com/users/4937663/andrea-martinelli"}, "edited": false, "score": 0, "creation_date": 1450825175, "post_id": 34425746, "comment_id": 56593215, "body": "@FUZxxl Was for Adrian who edited hos reply to your post"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450825830, "post_id": 34425746, "comment_id": 56593449, "body": "@FUZxxl Ah, I didn&#39;t see the question before the change. Removed my comment and my downvote."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1450825433, "last_edit_date": 1450825433, "creation_date": 1450824608, "answer_id": 34425746, "question_id": 34425721, "link": "https://stackoverflow.com/questions/34425721/add-item-to-empty-array-in-c-and-getting-array-length/34425746#34425746", "title": "Add item to empty array in C and getting array length", "body": "<p>You cannot change the size of an array in C. You can however allocate a sufficiently large array and then fill it up with entries. First, declare an array with a sufficient size, say, 1024.</p>\n\n<pre><code>char *array[1024];\n</code></pre>\n\n<p>Then declare a variable <code>fill</code> that counts the number of used slots in <code>array</code>. Initialize it to <code>0</code> as 0 slots are used in the beginning. Then, each time you insert an item, increment <code>fill</code>:</p>\n\n<pre><code>array[fill++] = ...;\n...\narray[fill++] = ...;\n</code></pre>\n\n<p>Make sure that you never attempt to insert more than 1024 items into the array, C doesn't check that for you.</p>\n\n<p>For a more flexible approach, use <code>malloc()</code> to allocate memory for the array and then periodically enlarge it with <code>realloc()</code> when it's full. If you increase the array size in exponential steps (say, multiply with &Phi; = 0.5 + 0.5&thinsp;\u221a2 &approx; 1.61), this runs in O(1) amortised time per entry inserted.</p>\n"}, {"tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": false, "score": 2, "last_activity_date": 1450825367, "last_edit_date": 1450825367, "creation_date": 1450824956, "answer_id": 34425809, "question_id": 34425721, "link": "https://stackoverflow.com/questions/34425721/add-item-to-empty-array-in-c-and-getting-array-length/34425809#34425809", "title": "Add item to empty array in C and getting array length", "body": "<p>There is no way to do what you're asking directly with C. One option could be if you knew that only certain values were valid. For example, you have an array of <code>char *</code>s so often people use <code>NULL</code> as a flag/invalid value. In that case you could initialize your array to have all <code>NULL</code>s and use that to know the size of the array:</p>\n\n<pre><code>char *array[1024];\n\nmemset(array, 0, sizeof(array));\n\n/* .... */\n\nfor (int i = 0; i &lt; sizeof(array)/sizeof(char*); i++) {\n    if (array[i]) {\n        printf(\"%s\\n\", array[i]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "is_accepted": false, "score": 0, "last_activity_date": 1450825401, "creation_date": 1450825401, "answer_id": 34425886, "question_id": 34425721, "link": "https://stackoverflow.com/questions/34425721/add-item-to-empty-array-in-c-and-getting-array-length/34425886#34425886", "title": "Add item to empty array in C and getting array length", "body": "<pre><code>char *array[1024] = {};\n</code></pre>\n\n<p>First, that is an array with 1024 char pointers/strings. Those elements can be 0s or plain garbage. If you don't plan to set them all you may want to nullify the array. </p>\n\n<p>For the matter of storing the values and the count you might want to have a look at structs. For example:</p>\n\n<pre><code>typedef struct elem {\n    int count;\n    char *value;\n} elem;\n</code></pre>\n\n<p>Then <code>elem.count</code> would be the number and <code>elem.value</code> would be the value accordingly.</p>\n\n<p>And then initialize them in a for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1450825562, "creation_date": 1450825562, "answer_id": 34425920, "question_id": 34425721, "link": "https://stackoverflow.com/questions/34425721/add-item-to-empty-array-in-c-and-getting-array-length/34425920#34425920", "title": "Add item to empty array in C and getting array length", "body": "<p>The only really valid way to approach this, is to dynamically grow the array. Allocate the array on the heap, and manage two counts: 1. the count of currently used elements, and 2. the count of elements for which you currently have memory allocated. Something like this:</p>\n\n<pre><code>//the setup\nsize_t arrayLength = 0, allocatedSize = 8;\nint* array = malloc(sizeof(*array) * allocatedSize);\n\n//grow the array -&gt; first check that we have space to add an element\nif(arrayLength == allocatedSize) {\n    array = realloc(array, allocatedSize *= 2);\n    assert(array);\n}\nassert(arrayLength &lt; allocatedSize);\n\n//grow the array -&gt; add an element\narray[arrayLength++] = ...;\n</code></pre>\n\n<p>You see, the <code>realloc()</code> call is not too much hassle, but it will protect you from bugs when the requirements change. My experience is that any fixed limit in the code, as insanely large as it may seem to be, will eventually be exceeded, and miserable failure will result. The only safeguard is to use as much memory as needed everywhere.</p>\n"}], "owner": {"reputation": 71, "user_id": 5647358, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qxKMAxLgzXk/AAAAAAAAAAI/AAAAAAAAKNk/3qtMESUDLcg/photo.jpg?sz=128", "display_name": "Adrian Webster", "link": "https://stackoverflow.com/users/5647358/adrian-webster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4674, "favorite_count": 1, "accepted_answer_id": 34425746, "answer_count": 4, "score": 0, "last_activity_date": 1450825691, "creation_date": 1450824401, "last_edit_date": 1450825691, "question_id": 34425721, "link": "https://stackoverflow.com/questions/34425721/add-item-to-empty-array-in-c-and-getting-array-length", "title": "Add item to empty array in C and getting array length", "body": "<p>I've taking many attempts at solving this problem but failed every time.</p>\n\n<p>I have an array</p>\n\n<pre><code>char *array[1024] = {};\n</code></pre>\n\n<p>Now I would like to add an item to the array and would also access the items by numbers</p>\n\n<p>For example:\n<code>array[0]</code> would be the first item\n<code>array[1]</code> would be the second\n<code>array[2]</code> would be the third item</p>\n\n<p>But also I would like to know how many items are in the array so I could use something like</p>\n\n<pre><code>for(int i = 0; i &lt;= totalitemsinarray; i++) {\n    print(array[i]);\n}\n</code></pre>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 2, "creation_date": 1450828695, "post_id": 34425291, "comment_id": 56594362, "body": "Madness?? THIS IS C!"}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 3, "creation_date": 1450823481, "post_id": 34425331, "comment_id": 56592557, "body": "Note also that the jump table referenced by the JUMP_TABLE_INDEX macro is most likely an array of function pointers, so that macro returns the address, and the last line of the code above actually calls the function referenced by the 6th element of the jump table."}, {"owner": {"reputation": 8277, "user_id": 1682419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19B6c.png?s=128&g=1", "display_name": "Jerry101", "link": "https://stackoverflow.com/users/1682419/jerry101"}, "edited": false, "score": 0, "creation_date": 1450826235, "post_id": 34425331, "comment_id": 56593575, "body": "In cases like this, it&#39;s more readable to typedef the function pointer type, then cast <code>ptr</code> to that type."}], "tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": true, "score": 14, "last_activity_date": 1450822739, "last_edit_date": 1450822739, "creation_date": 1450822484, "answer_id": 34425331, "question_id": 34425291, "link": "https://stackoverflow.com/questions/34425291/what-madness-is-this-c-group-of-casts/34425331#34425331", "title": "What madness is this c group of casts", "body": "<p><code>ptr</code> is casted to a pointer to a function</p>\n\n<pre><code>uint8_t f(uint32_t, uint8_t *, uint8_t)\n</code></pre>\n\n<p>and the function gets called with parameters <code>addr</code>, <code>data</code>, <code>erase</code>.</p>\n"}], "owner": {"reputation": 573, "user_id": 4389807, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d07541cb20d34d05bbed11a0fbc27a98?s=128&d=identicon&r=PG", "display_name": "confused", "link": "https://stackoverflow.com/users/4389807/confused"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 34425331, "answer_count": 1, "score": 5, "last_activity_date": 1450822739, "creation_date": 1450822344, "question_id": 34425291, "link": "https://stackoverflow.com/questions/34425291/what-madness-is-this-c-group-of-casts", "title": "What madness is this c group of casts", "body": "<p>I was looking at this open source boot loader and I saw this line of code.  What is happening on the last line?  Is that some kind of pointer to a function, with a cast to an address?</p>\n\n<pre><code>    uint8_t ret = init_api();\n    uint16_t ptr;\n    ptr = PGM_READ_WORD(JUMP_TABLE_INDEX(6));\n\n    ret = ( (uint8_t(*)(uint32_t, uint8_t *, uint8_t)) ptr )(addr, data, erase);\n</code></pre>\n"}, {"tags": ["c", "gcc", "compilation", "64-bit"], "comments": [{"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1450822484, "post_id": 34425287, "comment_id": 56592141, "body": "And this is where your Python and C# experience is leading you astray."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1450822588, "post_id": 34425287, "comment_id": 56592184, "body": "Why do you think this should work exactly? Why would a Debian&#39;s GCC, by default, build executables in Windows format?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1450822636, "post_id": 34425287, "comment_id": 56592199, "body": "Debian is a Linux distro. An executable compiled for that platform won&#39;t run in any Windows."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1450822691, "post_id": 34425287, "comment_id": 56592220, "body": "You need <code>mingw</code>, not <code>virtual box+debian+gcc</code>...."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1450823292, "post_id": 34425287, "comment_id": 56592471, "body": "You forgot to install the linux VM on your Windows box"}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1450823927, "post_id": 34425287, "comment_id": 56592739, "body": "The title of this (not really a) question is very misleading.  Your compiler is compiling the code just fine.  You&#39;re just not targeting the right platform."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1450823025, "post_id": 34425358, "comment_id": 56592363, "body": "Some info on cross-compiling (might need an update for 64 bit): <a href=\"http://stackoverflow.com/a/182456/10077\">stackoverflow.com/a/182456/10077</a>"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 5, "last_activity_date": 1450822990, "last_edit_date": 1450822990, "creation_date": 1450822608, "answer_id": 34425358, "question_id": 34425287, "link": "https://stackoverflow.com/questions/34425287/gcc-cant-compile-c-program-at-64-bit/34425358#34425358", "title": "GCC can&#39;t compile C program at 64-bit", "body": "<p>There is absolutely no reason to expect a Debian installation of GCC to, by default, build Windows executables. If you run <code>file</code> on the output, you'll probably see something like this:</p>\n\n<blockquote>\n  <p>ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux)</p>\n</blockquote>\n\n<p>You need an executable like this:</p>\n\n<blockquote>\n  <p>PE32+ executable (GUI) x86-64, for MS Windows</p>\n</blockquote>\n\n<p>These are two completely different file formats. Windows will not run Linux executables (except using some kind of emulator) and Linux will not run Windows executables (except using some kind of emulator). You can use a cross-compiler to build a Linux application on Windows or a Windows application on Linux.</p>\n"}], "owner": {"reputation": 3, "user_id": 5091967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eef0fb4af74902cb7cd42f0b9196713?s=128&d=identicon&r=PG&f=1", "display_name": "TheShadlest", "link": "https://stackoverflow.com/users/5091967/theshadlest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "accepted_answer_id": 34425358, "answer_count": 1, "score": -2, "last_activity_date": 1450822990, "creation_date": 1450822335, "question_id": 34425287, "link": "https://stackoverflow.com/questions/34425287/gcc-cant-compile-c-program-at-64-bit", "title": "GCC can&#39;t compile C program at 64-bit", "body": "<p>So, the real deal is that I have researched a lot, inside and outside this website, and there was no such question or solution that could help me.</p>\n\n<p>I'm learning C coding. This is not a big deal since I know Python and C#(Unity) quite well. The thing is that I'm trying to do applications I did before on Python, but I'm facing a problem: I'm compiling my program on a Debian 8 Virtual Machine (Oracle's Virtual Box), as follow: <code>gcc -lm -m64 -o file.exe file.c</code>. \nWhat happens is that when I go back to my Windows 10 machine (not virtual) it returns me that the program I'm trying to run is an unsupported 16-bit version of the program, and it's unable to run it.\nI really researched a lot, and could find some things, witch I did... But nothing changes... So, I think that there is an error while contacting the GCC program or on my script, bhaskara.c(yes, it's a bhaskara formula calculator):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nfloat main(){\n    double a, b, c, x1, x2;\n    double delta;\n    double d, e;\n    printf(\"NOTE: If the numbers are integers, use .0 at the end(eg. 1 = 1.0)\\n\");\n\n    printf(\"A = \");\n    scanf(\"%f\", &amp;a);\n    printf(\"B = \");\n    scanf(\"%f\", &amp;b);\n    printf(\"C = \");\n    scanf(\"%f\", &amp;c);\n\n    d = b*b;\n    e = (d + 4*a*c);\n    delta = sqrt(e);\n    printf(\"Delta = %f\\n\", delta);\n\n    x1 = (-b + delta)/2;\n    printf(\"X1 = %f\\n\", x1);\n    x2 = (-b - delta)/2;\n    printf(\"X2 = %f\\n\", x2);\n}\n</code></pre>\n\n<p>the code is ugly, actually, it's just a test...</p>\n\n<p>Things I tried:\n-reinstalling GCC\n-running different options( -m32 and -m64)\n-compiling whith *.exe and without it to add just before use it (don't know if it makes any sense)\n-turning floats into doubles (code; till what I know, doubles use more bytes)</p>\n\n<p>My question:\nWhat can I do to fix it? Are there mistakes on my script, that make it unable to be 64-bit? Am I using an wrong version of GCC? (4.9.2; that's all I know about it...) Are there any other options that I can use to choose the processor type? And make it available for every kind of processor?\nThanks in advance, I would really appreciate if someone could answer me what is the problem, I'm really new to compiling... If my question is hard understanding, leave coments below, so I can edit it.</p>\n"}, {"tags": ["c", "external", "cython"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1450822570, "post_id": 34425131, "comment_id": 56592176, "body": "Pretty sure you can&#39;t compile half of it with gcc and half with MSVC. That tutorial was not done on Windows. You should compile both parts with MSVC or figure out how to make setup.py use gcc."}, {"owner": {"reputation": 491, "user_id": 5608122, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9663280a11ad10efec26c4fa646484f5?s=128&d=identicon&r=PG&f=1", "display_name": "fossekall", "link": "https://stackoverflow.com/users/5608122/fossekall"}, "reply_to_user": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1450824657, "post_id": 34425131, "comment_id": 56593033, "body": "Okay.  I have not found any place who explain how to do this on Windows. Have to search M&#248;re."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 0, "creation_date": 1450833780, "post_id": 34425131, "comment_id": 56595598, "body": "<a href=\"http://stackoverflow.com/a/2727463/2101267\">stackoverflow.com/a/2727463/2101267</a> - You may need other compiler options also. Perhaps start by reading up on the ones in the call made to <code>cl.exe</code> by cython as shown in your post."}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1516196431, "creation_date": 1516196431, "answer_id": 48302544, "question_id": 34425131, "link": "https://stackoverflow.com/questions/34425131/cython-link-fatal-error-lnk1181-cannot-open-input-file/48302544#48302544", "title": "Cython: LINK : fatal error LNK1181: cannot open input file", "body": "<p>I finally managed to get it to work by a very simple fix. Have to use the same name of the library as the pyx file:</p>\n\n<pre><code>ext_modules=[Extension(\"m\",\n   sources = [\"m.pyx\"],\n   library_dirs = ['.'],\n   libraries=[\"cmean\"])] # Unix-like specific\n</code></pre>\n\n<p>This as also stated in this post:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8024805/cython-compiled-c-extension-importerror-dynamic-module-does-not-define-init-fu\">Cython compiled C extension: ImportError: dynamic module does not define init function</a></p>\n\n<p>I also found that I can compile  the cmean.c file with setuptools: </p>\n\n<pre><code>#setup.py\nfrom setuptools import setup\nfrom setuptools import Extension\nfrom Cython.Build import cythonize\nfrom Cython.Distutils import build_ext\n\next_modules=[Extension(\"m\",\n    [\"m.pyx\",\"cmean.c\"] )] \n\n\nsetup(\n    name = \"Demos\",\n    ext_modules = cythonize(ext_modules),\n    cmdclass = {\"build_ext\": build_ext}\n    )\n</code></pre>\n\n<p>\u2013 fossekall</p>\n"}], "owner": {"reputation": 491, "user_id": 5608122, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/9663280a11ad10efec26c4fa646484f5?s=128&d=identicon&r=PG&f=1", "display_name": "fossekall", "link": "https://stackoverflow.com/users/5608122/fossekall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1573, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516196638, "creation_date": 1450821561, "last_edit_date": 1516196638, "question_id": 34425131, "link": "https://stackoverflow.com/questions/34425131/cython-link-fatal-error-lnk1181-cannot-open-input-file", "title": "Cython: LINK : fatal error LNK1181: cannot open input file", "body": "<p>Have tried to follow this example \"<a href=\"https://equatorialmaths.wordpress.com/2010/10/16/python-extensions-with-c-libraries-made-easy-by-cython/\" rel=\"nofollow noreferrer\">Python extensions with C libraries made easy by Cython</a>\" but I do not get it to work. My system works with normal Cython. With some small changes in setup.py (have to use setuptools instead of distutils since I am using Windows). Have made the following files:</p>\n\n<pre><code>* cmean.h */\ndouble mean(int, double*);\n\n\n/* cmean.c */\ndouble mean(int n, double* a)\n{\n  double s;\n  int i;\n  for (s=0., i=0; i&lt;n; i++) s+=*(a++);\n  return s/n;\n}   \n\n# m.pyx\ncdef extern from \"cmean.h\":\n    double mean(int, double*)\n\nfrom stdlib cimport *\ndef cmean(a):\n    n = len(a)\n    cdef double *v\n    v = malloc(n*sizeof(double))\n    for i in range(n):\n        v[i] = float(a[i])\n    m = mean(n, v)\n    free(v)\n    return m\n\n\n#setup.py\nfrom setuptools import setup\nfrom setuptools import Extension\nfrom Cython.Build import cythonize\nfrom Cython.Distutils import build_ext\n\next_modules=[Extension(\"lib\",\n    [\"m.pyx\"],\n    library_dirs = ['.'],    \n    libraries=[\"cmean\"]\n    )] # Unix-like specific\n\nsetup(\n    name = \"Demos\",\n    ext_modules = cythonize(ext_modules),\n    cmdclass = {\"build_ext\": build_ext}\n    )\n</code></pre>\n\n<p>Compile the cmean.c with this command:</p>\n\n<pre><code>gcc  -shared cmean.c -o libcmean.so\n</code></pre>\n\n<p>But when I run:</p>\n\n<pre><code>python setup.py build_ext --inplace\n</code></pre>\n\n<p>I get these error messages:</p>\n\n<pre><code>E:\\GD\\UD\\Software\\CythonTest\\calling-c\\test1&gt;python setup.py build_ext --inplace\nrunning build_ext\nbuilding 'lib' extension\nC:\\Users\\trofl\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -I. -IC:\\Anaconda2\\include -IC:\\Anaconda2\\PC /Tcm.c /Fobuild\\temp.win32-2.7\\Release\\m.objm.c\nC:\\Users\\trofl\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:. /LIBPATH:C:\\ /LIBPATH:C:\\Anaconda2\\libs /LIBPATH:C:\\Anaconda2\\PCbuild /LIBPATH:C:\\Anaconda2\\PC\\VS9.0 cmean.lib /EXPORT:initlib build\\temp.win32-2.7\\Release\\m.obj /OUT:E:\\GD\\UD\\Software\\CythonTest\\calling-c\\test1\\lib.pyd /IMPLIB:build\\temp.win32-2.7\\Release\\lib.lib /MANIFESTFILE:build\\temp.win32-2.7\\Release\\lib.pyd.manifest\nLINK : fatal error LNK1181: cannot open input file 'cmean.lib'\nerror: command 'C:\\\\Users\\\\trofl\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\link.exe' failed with exit status 1181 \n</code></pre>\n\n<p>I have followed the example as good as I can.</p>\n\n<p><strong>UPDATE</strong>\nI have made a cmean.lib file as the last error message said it did not find with the help of Microsoft Visual Studio 2008 x86 tools. Tried to use the same flags as cython have used. I have tried to read a lot abotu what this flags means, but I find a lot of it very technical:</p>\n\n<pre><code>cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG cmean.c\n</code></pre>\n\n<p>And then making the lib file with:</p>\n\n<p>lib.exe lib.exe /out:cmean cmean.obj</p>\n\n<p>But no I got this error:</p>\n\n<pre><code>E:\\GD\\UD\\Software\\CythonTest\\calling-c\\test1&gt;python setup.py build_ext --inplace\nrunning build_ext\nbuilding 'lib' extension\ncreating build\ncreating build\\temp.win32-2.7\ncreating build\\temp.win32-2.7\\Release\nC:\\Users\\trofl\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -IC:\\Anaconda2\\include -IC:\\Anaconda2\\PC /Tcm.c /Fobuild\\temp.win32-2.7\\Release\\m.objm.c\nC:\\Users\\trofl\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:. /LIBPATH:C:\\Anaconda2\\libs /LIBPATH:C:\\Anaconda2\\PCbuild /LIBPATH:C:\\Anaconda2\\PC\\VS9.0 cmean.lib /EXPORT:initlib build\\temp.win32-2.7\\Release\\m.obj /OUT:E:\\GD\\UD\\Software\\CythonTest\\calling-c\\test1\\lib.pyd /IMPLIB:build\\temp.win32-2.7\\Release\\lib.lib /MANIFESTFILE:build\\temp.win32-2.7\\Release\\lib.pyd.manifest\nLINK : error LNK2001: unresolved external symbol initlib\nbuild\\temp.win32-2.7\\Release\\lib.lib : fatal error LNK1120: 1 unresolved externals\nerror: command 'C:\\\\Users\\\\trofl\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\link.exe' failed with exit status 1120\n</code></pre>\n\n<p>I assume that I have to find out which arguments to use for visual c++ for windows in order to make the cmean.lib file in a correct format.</p>\n"}, {"tags": ["c++", "c", "arrays", "string", "strncmp"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1450820398, "post_id": 34424838, "comment_id": 56591281, "body": "<code>s[k]</code> is a <code>char</code>, not a <code>char*</code>. Did you intend to have <code>char** s</code> (which you can&#39;t use with your two-dimensional array)? (I suspect that you have thrown a cast or two into the mix to stop the compiler from complaining. That is a bad idea in general.)"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 6, "creation_date": 1450820489, "post_id": 34424838, "comment_id": 56591323, "body": "Unrelated note: &quot;Deus Ex Machina&quot; is 16 characters (including &#39;\\0&#39;) and you are storing it in an element of a <code>[10][10]</code> array"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450820531, "post_id": 34424838, "comment_id": 56591353, "body": "Please show how you ask for the input. If it was <code>fgets()</code>, did you clean off the trailing <code>newline</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450820594, "post_id": 34424838, "comment_id": 56591378, "body": "Oops - <code>main.cpp</code> - this isn&#39;t C is it?"}, {"owner": {"reputation": 69792, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 1, "creation_date": 1450820959, "post_id": 34424838, "comment_id": 56591526, "body": "What0s <code>compS</code> supposed to do again?"}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 1, "creation_date": 1450820963, "post_id": 34424838, "comment_id": 56591530, "body": "Should be <code>char usernames[User][nameLenght]</code> or something."}, {"owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "edited": false, "score": 0, "creation_date": 1450821196, "post_id": 34424838, "comment_id": 56591642, "body": "compS is supposed to compare the user inputed string to the predefined strings."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450822929, "post_id": 34424838, "comment_id": 56592321, "body": "The line <code>char usernames[User][User] = {{&quot;student&quot;}, {&quot;admin&quot;}, {&quot;Deus Ex Machina&quot;}};</code> is an error. Your compiler should tell you about this.  It&#39;s important that you fix all compiler messages before trying to run your program.   Messages should be treated as errors even if they &quot;only&quot; say &quot;warning&quot;"}, {"owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "edited": false, "score": 0, "creation_date": 1450823291, "post_id": 34424838, "comment_id": 56592469, "body": "It does not come up as an error."}, {"owner": {"reputation": 3046, "user_id": 1692584, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/91b95bf73cfe4dc84cf414371aabb825?s=128&d=identicon&r=PG", "display_name": "Czipperz", "link": "https://stackoverflow.com/users/1692584/czipperz"}, "edited": false, "score": 0, "creation_date": 1450825237, "post_id": 34424838, "comment_id": 56593240, "body": "Use <code>getch()</code> instead of <code>system(&quot;PAUSE&quot;)</code> to be cross platform btw"}], "answers": [{"tags": [], "owner": {"reputation": 69792, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 4, "last_activity_date": 1450821266, "creation_date": 1450821266, "answer_id": 34425060, "question_id": 34424838, "link": "https://stackoverflow.com/questions/34424838/c-invalid-conversion-from-char-to-const-char/34425060#34425060", "title": "C++ invalid conversion from &#39;char&#39; to &#39;const char&#39;", "body": "<p>Just use <code>std::vector</code> and <code>std::string</code> along the lines of:</p>\n\n<pre><code>std::vector&lt;std::string&gt; usernames({\"student\", \"admin\", \"Deus Ex Machina\"});\nstd::string input;\nstd::cin &gt;&gt; input;\nif (std::find(begin(usernames), end(usernames), input) != end(usernames))\n    std::cout &lt;&lt; \"Access Granted!\\n\";\nelse std::cout &lt;&lt; \"Access Denied!\\n\";\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a5a1f25ccc7a7214\" rel=\"nofollow\"><kbd>Live demo</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1450823100, "post_id": 34425392, "comment_id": 56592398, "body": "That means that if the user types <code>&quot;ad&quot;</code> then it will match <code>&quot;admin&quot;</code> because you limited the match to the length of the string...  not sure of this is what OP wants, but if not, it&#39;d be better to use <code>strcmp</code> without the length parameter."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1450823308, "post_id": 34425392, "comment_id": 56592479, "body": "@m-m that&#39;s right, and the code has other problems. My answer is mainly about the question asked (compile error)."}, {"owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "edited": false, "score": 0, "creation_date": 1452049708, "post_id": 34425392, "comment_id": 56995736, "body": "@Ilya Yes, I&#39;ve noticed that myself, could you elaborate on this particular problem if you could suggest a topic to read it will be wonderful.Sorry for the late response."}], "tags": [], "owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1450825293, "last_edit_date": 1495540747, "creation_date": 1450822709, "answer_id": 34425392, "question_id": 34424838, "link": "https://stackoverflow.com/questions/34424838/c-invalid-conversion-from-char-to-const-char/34425392#34425392", "title": "C++ invalid conversion from &#39;char&#39; to &#39;const char&#39;", "body": "<p>If you want (or need) to keep your C-style not-pretty-nor-very-safe code, you could write</p>\n\n<p><code>strncmp(s + (k+nameLenght), s1, strlen(s1))</code></p>\n\n<p>That would compile and perhaps work with some more efforts, but you'll have to correct the <code>usernames</code> sizes and actually call <code>compS</code>.</p>\n\n<p>See that <a href=\"https://stackoverflow.com/a/34425060/5695504\">other answer</a> for a safer C++-styled code.</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 5132248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w9I2j.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5132248/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1451218615, "creation_date": 1451218615, "answer_id": 34480293, "question_id": 34424838, "link": "https://stackoverflow.com/questions/34424838/c-invalid-conversion-from-char-to-const-char/34480293#34480293", "title": "C++ invalid conversion from &#39;char&#39; to &#39;const char&#39;", "body": "<p>There are a few ways you can accomplish this. This is the first way that comes to mind.</p>\n\n<pre><code>char* usernames[] = { \"student\" , \"admin\", \"Deus Ex Machina\", NULL };\n\nint compS(char **s, char *s1)\n{\n    for (int k = 0; s[k] != NULL; k++)\n    {\n        if (strncmp(s[k], s1, strlen(s1)) == 0)\n            return 0;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>You have to pass a pointer to a string to strncmp() so I changed your array to an array of pointers to strings. The array has a null pointer at the end to allow the loop to know when it has reached the end.</p>\n"}], "owner": {"reputation": 65, "user_id": 5708849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c5b9b90db4d03c87a169dadc31069fa?s=128&d=identicon&r=PG&f=1", "display_name": "Yavor Lulchev", "link": "https://stackoverflow.com/users/5708849/yavor-lulchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1451219544, "creation_date": 1450820286, "last_edit_date": 1451219544, "question_id": 34424838, "link": "https://stackoverflow.com/questions/34424838/c-invalid-conversion-from-char-to-const-char", "title": "C++ invalid conversion from &#39;char&#39; to &#39;const char&#39;", "body": "<p>I am having trouble with a two-dimensional array comparison. I need to create a pseudo login system that asks the user for a username and password and then compares the input to a predefined list of usernames. </p>\n\n<p>In the function, the predefined usernames are represented by the <code>*s</code> and the user input is <code>*s1</code>. When I try to compile it, this pesky trouble-maker appears:</p>\n\n<blockquote>\n  <p>68 D:\\Personal\\Dev-Cpp\\projects\\loginSysTest\\main.cpp\n  invalid conversion from <code>char' to</code>const</p>\n</blockquote>\n\n<p>regarding the <code>strncmp</code> function in the <code>if</code> statement.</p>\n\n<p>This is the code: </p>\n\n<pre><code>#define nameLenght 30\n#define User 10\n\nchar usernames[User][User] = {{\"student\"}, {\"admin\"}, {\"Deus Ex Machina\"}};\n\n//=====================================================================\nint main(int argc, char *argv[])\n{\n    char usernameInput[nameLenght + 1] = {0};\n    gets(usernameInput);\n    int login = compS(*usernames, usernameInput);\n\n    if(login == 0)\n        printf(\"Access Granted! \\n\");\n    else \n        printf(\"Access Denied!\");\n\n    system(\"PAUSE\");    \n    return 0;\n}\n//=====================================================================        \n\nint compS(char *s, char *s1)\n{ \n    for(int k = 0 ;k &lt; nameLenght; k++)\n    {\n        if(strncmp(s[k], s1, strlen(s1)) == 0)\n        return 1;  \n    }\n}\n</code></pre>\n\n<p>Thank you in advance. </p>\n"}, {"tags": ["c", "char", "int", "printf", "scanf"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1450819931, "post_id": 34424737, "comment_id": 56591092, "body": "Undefined behavior!!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450819940, "post_id": 34424737, "comment_id": 56591093, "body": "<code>char q[5];</code> --&gt; <code>char q[6];</code>. You forgot to allow room for string terminator after <code>qwerty</code> which is 5 characters, + 1 needed."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1450823103, "post_id": 34424737, "comment_id": 56592399, "body": "Because you&#39;re writing <b><i>6</i></b> characters to a char[5]."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450823351, "post_id": 34424737, "comment_id": 56592508, "body": "Hej, concerning &quot;why can I write more than 4 chars (+null) to a 5 char variable?&quot;  What did you expect should have happened?"}, {"owner": {"reputation": 13, "user_id": 5708846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mlPac.jpg?s=128&g=1", "display_name": "Jackiie", "link": "https://stackoverflow.com/users/5708846/jackiie"}, "edited": false, "score": 0, "creation_date": 1450866988, "post_id": 34424737, "comment_id": 56608179, "body": "I did not expect the printf to write out the whole input, but rather to just not read after the 4 first!"}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1450820494, "post_id": 34424778, "comment_id": 56591330, "body": "<code>scanf(&quot;%4s&quot;, q);</code> offers protection against this behaviour."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450820810, "post_id": 34424778, "comment_id": 56591465, "body": "Better to use <code>fgets(q, sizeof q, stdin);</code>.  Note that input <code>qwert\\n</code> will leave the <code>&#39;\\n&#39;</code> in <code>stdin</code>."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1450820961, "post_id": 34424778, "comment_id": 56591527, "body": "@chux Yeah, i have edited thankyou. As for the second point, true, but not really part of the OP&#39;s real problem. I am sure they will come up against this in the future."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 3, "last_activity_date": 1450821213, "last_edit_date": 1450821213, "creation_date": 1450820026, "answer_id": 34424778, "question_id": 34424737, "link": "https://stackoverflow.com/questions/34424737/writing-5-character-to-char5-affects-int/34424778#34424778", "title": "Writing 5 character to char[5] affects int", "body": "<blockquote>\n  <p>What have I missed - why can I write more than 4 chars (+null) to a 5 char variable?</p>\n</blockquote>\n\n<p>There is nothing stopping you from accessing out of bounds portions of an array in <code>c</code>. This will compile:</p>\n\n<pre><code>char a[2];\na[10000] = 10;\n</code></pre>\n\n<blockquote>\n  <p>Why is the integer affected?</p>\n</blockquote>\n\n<p>What you are causing is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behavior</em></a> and is likely the reason that your <code>int</code> is affected. You can learn more about this by reading about <a href=\"http://www.tutorialspoint.com/cprogramming/c_arrays.htm\" rel=\"nofollow\"><code>c arrays</code></a>. This is happening because you are putting a 5 character string plus a null terminating character ( ie 6 <code>chars</code>) into a space only meant for 5. You are going outside the bounds of your array. </p>\n\n<p>As a further note, <code>scanf(\"%s\"</code> offers no method of protecting against this behavior. If a user puts in a string that is too long then too bad. That is why you should protect your input by using something like a format string of <code>\"%4s\"</code> or use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow\"><code>fgets</code></a>:</p>\n\n<pre><code>fgets(q, sizeof q, stdin);\n</code></pre>\n\n<p>Which are both ways you can protect your input from entering more than 4 characters.</p>\n"}, {"tags": [], "owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1450820181, "creation_date": 1450820181, "answer_id": 34424810, "question_id": 34424737, "link": "https://stackoverflow.com/questions/34424737/writing-5-character-to-char5-affects-int/34424810#34424810", "title": "Writing 5 character to char[5] affects int", "body": "<p>The reason that the int userInput is affected is that you are writing past the end of the char array (q).  Since both of these are stack variables, the compiler you're using seems to be allocating memory on the stack for the local variables in \"reverse order\", it, they are being \"pushed\" in the order defined, so the first local variable listed is lower on the stack.  So, in your case, when you write past the end of q, you are writing in the memory space allocated for userInput, which is why it is affected.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1450821194, "last_edit_date": 1495539883, "creation_date": 1450820432, "answer_id": 34424881, "question_id": 34424737, "link": "https://stackoverflow.com/questions/34424737/writing-5-character-to-char5-affects-int/34424881#34424881", "title": "Writing 5 character to char[5] affects int", "body": "<p>[Edit] User/code <em>can</em> try to \"write more than 4 chars (+null) to a 5 char variable\".  C does not specify what should happen when code does not prevent such an event.  C is coding without the safety net/training wheels.  </p>\n\n<hr>\n\n<p><code>scanf(\"%s\", q);</code> reads and saves the 5 characters of <code>\"qwert\"</code> <em>and</em> it also appends a null character <code>'\\0'</code>.  <a href=\"https://stackoverflow.com/questions/34424737/writing-5-character-to-char5-affects-int/34424881#comment56591093_34424737\">@Weather Vane</a></p>\n\n<p>Since <code>q[]</code> has only room to 5 characters, undefined behavior occurs (UB). In OP's case, it appear to have over-written <code>userInput</code>.</p>\n\n<p>To avoid, use a width limit on <code>\"%s\"</code> such as below.  It will not consume more than 4 non-white-space from the user.  Unfortunately, extra text will remain in <code>stdin</code>.</p>\n\n<pre><code>char q[5];\nscanf(\"%4s\", q);\n</code></pre>\n\n<p>Or better, review <code>fgets()</code> for reading user input.</p>\n"}], "owner": {"reputation": 13, "user_id": 5708846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mlPac.jpg?s=128&g=1", "display_name": "Jackiie", "link": "https://stackoverflow.com/users/5708846/jackiie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 34424778, "answer_count": 3, "score": 0, "last_activity_date": 1450821213, "creation_date": 1450819869, "last_edit_date": 1450820414, "question_id": 34424737, "link": "https://stackoverflow.com/questions/34424737/writing-5-character-to-char5-affects-int", "title": "Writing 5 character to char[5] affects int", "body": "<p>Easy code down below.\nMac OS X 10.10.5, Xcode 7.2, C-file.\nIf I input 1, and afterwards qwert, I get 0 and qwert back.\n1 and qwer gives 1 and qwer.\n1 and e.g. qwerty gives 121 and qwerty.</p>\n\n<ul>\n<li>What have I missed - why can I write more than 4 chars (+null) to a 5 char variable?</li>\n<li>Why is the integer affected?</li>\n</ul>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {   \n    int userInput;\n    char q[5];\n\n    printf(\"Hello\\n\");\n    scanf(\"%d\", &amp;userInput);\n    printf(\"%d\\nAnd\\n\", userInput);\n    scanf(\"%s\", q);\n    printf(\"\\n\");\n    printf(\"%d\\n%s\", userInput, q);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1450818504, "post_id": 34424426, "comment_id": 56590519, "body": "What do you mean by &quot;transfer it&quot;?  Are you talking about moving the source file to a different computer?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450818966, "post_id": 34424426, "comment_id": 56590710, "body": "<code>while (!feof(pf))</code> please see the FAQ <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>. Better is the idiomatic <code>while ((c = getc(pf)) != EOF) {...}</code>"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1450819164, "post_id": 34424426, "comment_id": 56590791, "body": "the input and output do not match the description of your problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1450819221, "post_id": 34424426, "comment_id": 56590817, "body": "@ForeverStudent please explain why? (see title statement of problem)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1450819235, "post_id": 34424426, "comment_id": 56590825, "body": "If you found all vowels used in the text - the others must be the unused ones. Or what are you looking for?"}, {"owner": {"reputation": 1, "user_id": 5617484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abJcG.png?s=128&g=1", "display_name": "Bran", "link": "https://stackoverflow.com/users/5617484/bran"}, "edited": false, "score": 0, "creation_date": 1450819341, "post_id": 34424426, "comment_id": 56590871, "body": "No, if i have such text Input: awa a rea Output: o i u. Now my program finds all vowels which used in every word in the text. Ex: Input: awe aw. Output: a  (only a)."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450819487, "post_id": 34424426, "comment_id": 56590919, "body": "@WeatherVane you forgot the word &quot;never&quot; in the description"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1450819553, "post_id": 34424426, "comment_id": 56590939, "body": "@ForeverStudent <b>please</b> read the question title carefully. <i>&quot;Find all vowels which <b>never</b> used in all words in the text&quot;</i>"}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1450819649, "post_id": 34424426, "comment_id": 56590985, "body": "Read the description"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1450819735, "post_id": 34424426, "comment_id": 56591015, "body": "That&#39;s right , the description is correct, the code attempts to find all the vowels used, which is required to establish which are not used, as asked in the title, and illustrated in the example. Do you have anything useful to say?"}], "answers": [{"tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 1, "last_activity_date": 1450821014, "last_edit_date": 1450821014, "creation_date": 1450820627, "answer_id": 34424928, "question_id": 34424426, "link": "https://stackoverflow.com/questions/34424426/find-all-vowels-which-never-used-in-all-words-in-the-text/34424928#34424928", "title": "Find all vowels which never used in all words in the text", "body": "<p>There are many ways to do what you want. Below is one way. There may be better ways but hopefully it will give you some ideas to improve it.</p>\n\n<p>If I understand your code correctly, <code>mn</code> contains the bit mask of vowels present in the text. So you can write a function to check all the vowel bits that are not set. The following code checks for <code>a</code> and <code>e</code> only but I think it should be clear how to extend it for the other other vowels.</p>\n\n<pre><code>#define A_MASK (1u&lt;&lt;('a'-'a'))\n#define E_MASK (1u&lt;&lt;('e'-'a'))\n\n/*\n * Convenience struct for associating masks with characters.\n * Could be done without this by deriving the character from the mask\n * but this (IMHO) makes the code simpler to understand.\n */\nstruct {\n     unsigned int mask\n     char c;\n} masks[] =  { { A_MASK, 'a'} , { E_MASK, 'e'} };\n\nvoid vowels_not_present (unsigned int vowels_mask)\n{\n    int ix;\n    for (ix = 0; ix &lt; sizeof(masks) / sizeof(masks[0]); ix++) {\n        if (!(vowels_mask &amp; masks[ix].mask)) {\n            printf(\"vowel %c is not present\\n\", masks[ix].c);\n        }\n    }\n}\n</code></pre>\n\n<p>Then in your <code>main</code> invoke the above function:</p>\n\n<pre><code>vowels_not_present(mn);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5617484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abJcG.png?s=128&g=1", "display_name": "Bran", "link": "https://stackoverflow.com/users/5617484/bran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "accepted_answer_id": 34424928, "answer_count": 1, "score": -3, "last_activity_date": 1450821014, "creation_date": 1450818412, "last_edit_date": 1450818850, "question_id": 34424426, "link": "https://stackoverflow.com/questions/34424426/find-all-vowels-which-never-used-in-all-words-in-the-text", "title": "Find all vowels which never used in all words in the text", "body": "<p>I wrote code that find all vowels which used in all words in the text. And I do not know how to transfer it. Do I need to rewrite all code? \nSo, I need to have such results:</p>\n\n<p>Text:</p>\n\n<blockquote>\n  <p>wwe w fa</p>\n</blockquote>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>o u i</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#define vowel (1u&lt;&lt;('a'-'a') | 1u&lt;&lt;('e'-'a') | 1u&lt;&lt;('i'-'a') | 1u&lt;&lt;('o'-'a') | 1u&lt;&lt;('u'-'a'))\nunsigned int char_to_set(char c) \n{\n    c = tolower(c);\n    if (c &lt; 'a' || c &gt; 'z') \n        return 0; else return 1u&lt;&lt;(c-'a'); \n}\nint letter(int c) \n{\n    return (c &gt;= 'a' &amp;&amp; c &lt;= 'z') || (c &gt;= 'A' &amp;&amp; c &lt;= 'Z');\n}\nint sign(int c) \n{\n    return c == ' ' || c == ',' || c == '\\n' || c == '\\t';\n}\nint main () \n{\n    int c, flag=0;\n    char alpha;\n    unsigned int sl = 0, mn = vowel;\n    FILE *pf;\n    pf=fopen(\"l13.txt\",\"r\");\n    printf (\"Ishodnyi text:\\n\\n\");\n    while (!feof(pf)) \n    {\n        c=getc(pf);\n        printf(\"%c\",c);\n        switch (flag) \n        {\n            case (0): \n            {\n                if (letter(c)) \n                             { \n                               sl = sl | char_to_set(c); \n                               flag = 1;\n                            } \n                if (sign(c)) flag = 0;\n                break;\n            }\n            case (1): \n            {\n                if (letter(c)) \n                              { \n                                sl = sl | char_to_set(c); \n                                flag = 1;\n                              }\n                if (sign(c)) \n                             { \n                              mn = mn &amp; sl; \n                              sl = 0; \n                              flag = 0;\n                             }\n                break;\n            }\n        }\n    }\n\n    if (mn == 0) { printf (\"\\n\\n no vowels are included in all word\"); } else {                                                                         printf (\"\\n\\n vowels are included in all word:\\n\");                                                                         for(alpha='a'; alpha &lt;= 'z'; alpha++){                                                                                                                          if((mn &amp; char_to_set(alpha)) != 0){                                                                                                                             printf(\"%c \", alpha);\n    }  \n}\n} \nfclose(pf);\ngetchar();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "r"], "answers": [{"comments": [{"owner": {"reputation": 48116, "user_id": 2725969, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/t13vb.jpg?s=128&g=1", "display_name": "BrodieG", "link": "https://stackoverflow.com/users/2725969/brodieg"}, "edited": false, "score": 1, "creation_date": 1450819034, "post_id": 34424534, "comment_id": 56590735, "body": "Excellent.  I didn&#39;t realize you could do this (and had generally assumed anything not in Rinternals was off-bounds)."}], "tags": [], "owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "is_accepted": true, "score": 5, "last_activity_date": 1450819289, "last_edit_date": 1450819289, "creation_date": 1450818870, "answer_id": 34424534, "question_id": 34424025, "link": "https://stackoverflow.com/questions/34424025/r-extensions-in-c-consult-sexp-protect-stack-height/34424534#34424534", "title": "R extensions in C: Consult SEXP PROTECT Stack Height", "body": "<p>The top of the stack is not part of the public API but can be made visible</p>\n\n<pre><code>#include \"Rinternals.h\"\n\nextern int R_PPStackTop;\n\nSEXP stacktop()\n{\n    SEXP x;\n    Rprintf(\"%d\\n\", R_PPStackTop);\n    x = PROTECT(allocVector(INTSXP, 1));\n    Rprintf(\"%d\\n\", R_PPStackTop);\n    UNPROTECT(1);\n    Rprintf(\"%d\\n\", R_PPStackTop);\n    return Rf_ScalarInteger(R_PPStackTop);\n}\n</code></pre>\n\n<p>Leading to</p>\n\n<pre><code>$ R CMD SHLIB stacktop.c 2&amp;&gt; /dev/null\n$ R --vanilla -e \"dyn.load('stacktop.so'); .Call('stacktop')\"\n&gt; dyn.load('stacktop.so'); .Call('stacktop')\n3\n4\n3\n[1] 3\n</code></pre>\n"}], "owner": {"reputation": 48116, "user_id": 2725969, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/t13vb.jpg?s=128&g=1", "display_name": "BrodieG", "link": "https://stackoverflow.com/users/2725969/brodieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 34424534, "answer_count": 1, "score": 5, "last_activity_date": 1450819289, "creation_date": 1450816489, "question_id": 34424025, "link": "https://stackoverflow.com/questions/34424025/r-extensions-in-c-consult-sexp-protect-stack-height", "title": "R extensions in C: Consult SEXP PROTECT Stack Height", "body": "<p>I'm writing R extensions using the <code>.Call</code> interface, and I'm trying to track down a stack imbalance warning.  I would find it very helpful if I were able to consult the stack height at various points in the code to isolate internal C functions that are not returning at the same SEXP PROTECT stack height they were called with.</p>\n\n<p>Is there a way to do this?</p>\n\n<p>And yes, I realize that I wouldn't have to worry about any of this if I used Rcpp, but I'm in too deep here to change.</p>\n\n<p>One less than ideal possibility is a pattern like:</p>\n\n<pre><code>int start, end;\nPROTECT_WITH_INDEX(R_NilValue, &amp;start);\nUNPROTECT(1);\ncall_to_suspect_fun();\nPROTECT_WITH_INDEX(R_NilValue, &amp;end);\nUNPROTECT(1);\nif(start != end) error(\"Stack imbalance right here!\");\n</code></pre>\n\n<p>which seems super awkward.  I guess it's easy enough to turn into a function, but I would be surprised if there isn't a better built in option.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1450816250, "post_id": 34423893, "comment_id": 56589496, "body": "When you reduced  from 9999999 to 256? did you edit both <code>line[9999999];</code> and <code>fgets(line, 9999999,</code>?  Easier to use/maintain <code>while (fgets(line, sizeof line , fp) != NULL)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1450816266, "post_id": 34423893, "comment_id": 56589503, "body": "<i>Which</i> <code>9999999 to 256</code> did you try to reduce? Both of them?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1450816361, "post_id": 34423893, "comment_id": 56589545, "body": "I&#39;d have problems keeping it the same number of <code>9</code>s in both integers..."}, {"owner": {"reputation": 1, "user_id": 5576905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08bedd83edf50660ba47ceaa102ef96?s=128&d=identicon&r=PG&f=1", "display_name": "Phillsss", "link": "https://stackoverflow.com/users/5576905/phillsss"}, "edited": false, "score": 0, "creation_date": 1450816366, "post_id": 34423893, "comment_id": 56589548, "body": "Yes, I did change both of them. Still got the error."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1450816408, "post_id": 34423893, "comment_id": 56589568, "body": "Aside: you don&#39;t need to cast <code>(FILE*)fp</code> since the argument for <code>fgets</code> is ... <code>FILE*</code>."}, {"owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 2, "creation_date": 1450816423, "post_id": 34423893, "comment_id": 56589575, "body": "Does your <code>file.txt</code> file exist?"}, {"owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 4, "creation_date": 1450816434, "post_id": 34423893, "comment_id": 56589585, "body": "You dont check the return value of <code>fopen</code>. is <code>fp</code> definitely not <code>NULL</code>?"}, {"owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 1, "creation_date": 1450816664, "post_id": 34423893, "comment_id": 56589693, "body": "Also such a large array on the stack is generally a bad idea... the stack isn&#39;t that big. Better to dynamically allocate mem on the heap if you want to use such large buffers (i.e. use <code>malloc</code>)"}, {"owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "edited": false, "score": 0, "creation_date": 1450816831, "post_id": 34423893, "comment_id": 56589777, "body": "If I check the fp pointer to make sure the file exists and reduce the size of the <code>line</code> variable so it fits on the stack it works for me..."}, {"owner": {"reputation": 1, "user_id": 5576905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08bedd83edf50660ba47ceaa102ef96?s=128&d=identicon&r=PG&f=1", "display_name": "Phillsss", "link": "https://stackoverflow.com/users/5576905/phillsss"}, "edited": false, "score": 1, "creation_date": 1450816850, "post_id": 34423893, "comment_id": 56589785, "body": "Everyone, thank you so much for your response and help:) Dragosht was right, apparently I did not have file permission to open it. And due to the segmentation error I did not look into that but rather into finding mistakes in my script:)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1450857858, "post_id": 34423893, "comment_id": 56603283, "body": "<a href=\"http://stackoverflow.com/questions/571945/getting-a-stack-overflow-exception-when-declaring-a-large-array\" title=\"getting a stack overflow exception when declaring a large array\">stackoverflow.com/questions/571945/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4332, "user_id": 1517244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/69e56ba57db6774aa70eca1d8d5684aa?s=128&d=identicon&r=PG", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/1517244/jimbo"}, "is_accepted": true, "score": 1, "last_activity_date": 1450857651, "last_edit_date": 1450857651, "creation_date": 1450816057, "answer_id": 34423932, "question_id": 34423893, "link": "https://stackoverflow.com/questions/34423893/segmentation-fault-11-c/34423932#34423932", "title": "Segmentation fault 11 C", "body": "<p>I think there are 2 potential problems</p>\n\n<p>Problem 1 is the stack. The stack is a (relatively) small bit of memory used per thread to keep track of function automatically scoped variables, values in and out and such. It is not meant for large amounts of data. It is quite possible that your <code>line</code> buffer is just too large for the stack!</p>\n\n<p>If you want a buffer that large it is best to use <code>malloc()</code> to allocate on the heap. The heap is large and if the allocation fails you can detect it and handle it appropriately.</p>\n\n<p>Problem 2 is not checking the value of <code>fp</code>. <code>fopen()</code> may return <code>NULL</code> if it fails to open the file. If this is the case and you pass <code>fp</code> to <code>fgets()</code> you'll get a seg fault.</p>\n\n<p>When I addressed these two problems on my machine, your program worked...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFSIZE 99999\n\nint main()\n{\n    char *line = malloc(BUFSIZE);\n    FILE *fp = fopen(\"file.txt\", \"r\");\n    if(!line || !fp) {\n       printf(\"OOPS\");\n       free(line);\n       return 1;\n    }\n\n    while (fgets(line, BUFSIZE, fp) != NULL)\n    {\n        if (strstr(line, \"word\") != NULL)\n        {\n            printf(\"%s\", line);\n        }\n    }\n    fclose(fp);\n    free(line);\n    return 0;\n}\n</code></pre>\n\n<p>Note <code>fgets()</code> reads at most one less than the size parameter and will append a null terminator for you.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1450816998, "last_edit_date": 1495542193, "creation_date": 1450816998, "answer_id": 34424129, "question_id": 34423893, "link": "https://stackoverflow.com/questions/34423893/segmentation-fault-11-c/34424129#34424129", "title": "Segmentation fault 11 C", "body": "<p>In my tests under cygwin + gcc 4.9.3, my program crashes when the size of the array is <code>9999999</code> but not <code>999999</code>.</p>\n\n<p>The culprit here is that the array is too large to fit in stack memory.</p>\n\n<p>Simpler program that crashes:</p>\n\n<pre><code>#define SIZE 9999999\nint main()\n{\n    char line[SIZE];\n    line[SIZE-1] = '\\0';\n    return 0;\n}\n</code></pre>\n\n<p>It works fine when I change <code>SIZE</code> to:</p>\n\n<pre><code>#define SIZE 999999\n</code></pre>\n\n<p>Creating large arrays in stack memory is a well known problem. See <a href=\"https://stackoverflow.com/questions/22945647/why-does-a-large-local-array-crash-my-program\">Why does a large local array crash my program?</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5576905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08bedd83edf50660ba47ceaa102ef96?s=128&d=identicon&r=PG&f=1", "display_name": "Phillsss", "link": "https://stackoverflow.com/users/5576905/phillsss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 34423932, "answer_count": 2, "score": -4, "last_activity_date": 1450857651, "creation_date": 1450815839, "question_id": 34423893, "link": "https://stackoverflow.com/questions/34423893/segmentation-fault-11-c", "title": "Segmentation fault 11 C", "body": "<p>Having trouble with segmentation fault 11 error.</p>\n\n<pre><code>/* Create main function */\nint main()\n{\n    char line[9999999];\n    FILE *fp;\n    fp = fopen(\"file.txt\", \"r\");\n    while (fgets(line, 9999999, (FILE*)fp) != NULL)\n    {\n        if (strstr(line, \"word\") != NULL)\n        {\n            printf(\"%s\", line);\n        }\n    }\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>Already tried to reduce 9999999 to 256 but this also didn't work..</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 5, "creation_date": 1450814763, "post_id": 34423628, "comment_id": 56588856, "body": "<code>return num1,num2,num3;</code> isn&#39;t going to work. Use pointers instead."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1450817048, "post_id": 34423628, "comment_id": 56589889, "body": "Also, you have a printf after your return statement.  It will never be reached."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1450814793, "last_edit_date": 1495540749, "creation_date": 1450814793, "answer_id": 34423664, "question_id": 34423628, "link": "https://stackoverflow.com/questions/34423628/my-rand-function-didnt-work/34423664#34423664", "title": "My rand() function didn&#39;t work", "body": "<p>Returning multiple values is not allowed in <code>C</code>. So</p>\n\n<pre><code>return num1,num2,num3;\n</code></pre>\n\n<p>this will not work.</p>\n\n<hr>\n\n<p>You can use a <code>struct</code> with <code>3</code> numbers and return that instead. You can go through <a href=\"https://stackoverflow.com/a/3829206/1795279\">this</a> for an example of how do go about it.</p>\n\n<hr>\n\n<p>Also note that the statement inside <code>if</code> after the <code>return</code> statement will never get executed, and are thus useless..</p>\n\n<pre><code>return num1,num2,num3;\ni--;                                // &lt;-- this will never get executed\nprintf(\"%d %d %d\",num1,num2,num3);  // &lt;-- this will never get executed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1450817776, "creation_date": 1450817776, "answer_id": 34424285, "question_id": 34423628, "link": "https://stackoverflow.com/questions/34423628/my-rand-function-didnt-work/34424285#34424285", "title": "My rand() function didn&#39;t work", "body": "<p>Your function does not set the calling variables as you hoped for. You can't return more than one function value - and it makes no difference that you gave the same names to the variables in <code>main</code> and in the function - they are <em>different</em> variables, and as you wrote it, <code>main</code> just passes copies of those variable values.</p>\n\n<p>Instead I pass <em>pointers</em> to those variables in this example. I also removed the return value of the function, since it now always returns valid values as your spec.</p>\n\n<p>I removed <code>srand</code> within the function. It should be called once only, especially as I call the function 3 times in this example to show different results. If left in the function, all 3 calls would <em>probably</em> give the same result (unless a one-second timer boundary is bridged).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define HIGH_NUMBER 100\n\nvoid ValidNumbers(int *num1, int *num2, int *num3);     // pointer arguments\n\nint main(void)\n{\n    int num1 = 0;\n    int num2 = 0;\n    int num3 = 0;\n    int tries;\n    srand ((unsigned)time(NULL));           // call once\n    for(tries=0; tries&lt;3; tries++) {\n        ValidNumbers(&amp;num1, &amp;num2, &amp;num3);\n        printf(\"%-2d %-2d %-2d\\n\", num1, num2, num3);    \n    }\n    return 0;\n}\n\nvoid ValidNumbers(int *num1, int *num2, int *num3)\n{\n    do {\n        *num1 = rand() % HIGH_NUMBER;       // write through pointer of passed var\n    } while (*num1 &lt;= 50);                  // number &gt; 50\n\n    do {\n        *num2 = rand() % HIGH_NUMBER;\n    } while (*num2 % 2 != 0);               // even number\n\n    do {\n        *num3 = rand() % HIGH_NUMBER;\n    } while (*num3 % 2 == 0);               // odd number\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>79 16 79\n95 2  37\n73 28 93\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "is_accepted": false, "score": 0, "last_activity_date": 1450826731, "last_edit_date": 1450826731, "creation_date": 1450818756, "answer_id": 34424504, "question_id": 34423628, "link": "https://stackoverflow.com/questions/34423628/my-rand-function-didnt-work/34424504#34424504", "title": "My rand() function didn&#39;t work", "body": "<p>There are two ways in C to return multiple parameters\nOne is mentioned above using 1 struct to hold all the return values inside struct.</p>\n\n<p>Another is using pointer/address to hold the values.</p>\n\n<p>I revised the script to show both ways. I will add a positive comment for HelloWorld, you guys are too harsh, it is an important concepts in c:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define HIGH_NUMBER 100\ntypedef struct Random Random;\nRandom *isValidNumbers(int *num1,int *num2, int *num3);\nstruct Random{\n    int a;\n    int b;\n    int c;\n};\n\nint main(void)\n{\n    int num1 = 0;\n    int num2 = 0;\n    int num3 = 0;\n    /* pr to use as parameter, rr used as a return struct , just for demoo purpuse*/\n    Random *p;\n    p = isValidNumbers(&amp;num1,&amp;num2,&amp;num3);\n    printf(\"%d %d %d main return random numbers\\n\",num1,num2,num3);\n    printf(\"%d %d %d main return from struct   \\n\",p-&gt;a,p-&gt;b,p-&gt;c);\n    return 0;\n}\n\nRandom *isValidNumbers(int *num1,int *num2, int *num3)\n{\n    struct Random *r = malloc(sizeof(Random));\n    int i=1,ans = 0;\n    do\n    {\n        srand (time(NULL));\n        *num1 = rand()%HIGH_NUMBER;\n        *num2 = rand()%HIGH_NUMBER;\n        *num3 = rand()%HIGH_NUMBER;\n        r-&gt;a = *num1;\n        r-&gt;b = *num2;\n        r-&gt;c = *num3;\n\n        if ((*num1%2==0||*num2%2||*num3%2==0)&amp;&amp;(*num1%2==1||*num2%2==1||*num3%2==1)&amp;&amp;(*num1&gt;50||*num2&gt;50||*num3&gt;50))\n        {\n            i--;\n            printf(\"%d %d %d inside isValidNumber\\n\",*num1,*num2,*num3);\n            break;\n        }\n    }\n    while (i);\n    return r;\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>cmake28 ..\nmake\n[gliang@www build]$ ./src/random\n99 99 44 inside isValidNumber\n99 99 44 main return random numbers\n99 99 44 main return from struct\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5708649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8f5c4d9dec23ec72a5ad15984fd82?s=128&d=identicon&r=PG&f=1", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/5708649/helloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1450826731, "creation_date": 1450814639, "question_id": 34423628, "link": "https://stackoverflow.com/questions/34423628/my-rand-function-didnt-work", "title": "My rand() function didn&#39;t work", "body": "<p>this is my function: i need that every number that get random will be: one bigger than 50, one even, and one not even. i complied just with gcc and i'm using c99. It compiled well, but it when it print three random numbers it's print 0,0,and real random number. I want it to print for me three real numbers. thanks for who trying to help!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#define HIGH_NUMBER 100\n\n\nint isValidNumbers(int num1,int num2, int num3);\n\n\nint main(void)\n{\n    srand (time(NULL));\n    int num1 = 0;\n    int num2 = 0;\n    int num3 = 0;\n    num1,num2,num3 =isValidNumbers(num1,num2,num3);\n    printf(\"%d %d %d\\n\",num1,num2,num3);    \n    system(\"PAUSE\");\n    return 0;\n}\n\nint isValidNumbers(int num1,int num2, int num3)\n{\n    int i=1,ans = 0;\n    do \n    {\n        srand (time(NULL));\n        num1 = rand()%HIGH_NUMBER;\n        num2 = rand()%HIGH_NUMBER;\n        num3 = rand()%HIGH_NUMBER;\n        if ((num1%2==0||num2%2||num3%2==0)&amp;&amp;(num1%2==1||num2%2==1||num3%2==1)&amp;&amp;(num1&gt;50||num2&gt;50||num3&gt;50))\n        {\n            return num1,num2,num3;\n            i--;\n            printf(\"%d %d %d\",num1,num2,num3);\n        }\n    }\n    while (i);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "allocation"], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450812644, "post_id": 34423041, "comment_id": 56587816, "body": "So in my code i coppied array to function thats why it worked in my function and outside function it did not work and gave me segmentation fault because i wanted to print array that pointed nowhere? Dont know if i understand correctly. With the edited code compilator gives me  3 errors."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450812770, "post_id": 34423041, "comment_id": 56587891, "body": "Almost. <code>array</code> in <code>main</code> is pointing to <code>NULL</code> and it is not modified by function <code>load</code>. Dereferencing it will invoke undefined behavior."}, {"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450812961, "post_id": 34423041, "comment_id": 56587982, "body": "Getting 3 errors : slova.c:18:68: error: invalid conversion from \u2018void*\u2019 to \u2018char**\u2019 [-fpermissive]          <i>array = realloc ( array, ( *index + 1 ) * sizeof( char</i> ) );                                                                     ^ slova.c:19:63: error: invalid conversion from \u2018void*\u2019 to \u2018char**\u2019 [-fpermissive]          array[<i>index] = malloc ( (riadok + 1) * sizeof(char</i>) );                                                                ^ slova.c:20:39: error: cannot convert \u2018char**\u2019 to \u2018char*\u2019 for argument \u20181\u2019 to \u2018char* strcpy(char*, const char*)\u2019    strcpy( array[*index], buffer );"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450813580, "post_id": 34423041, "comment_id": 56588320, "body": "Can&#39;t say anything without looking at the complete code."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450814857, "post_id": 34423041, "comment_id": 56588885, "body": "@Michi; There is a <code>main</code> function in the question. Some serious issues with this code. I am working on it to fix."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1450819411, "post_id": 34423041, "comment_id": 56590897, "body": "It wouldn&#39;t be better if load() could return a char ** after allocating memory instead of passing a char*** ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450819838, "post_id": 34423041, "comment_id": 56591056, "body": "@kvway; How did you call the function?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1450820390, "post_id": 34423041, "comment_id": 56591277, "body": "You are not allocating memory for <code>buffer</code> before <code>getline()</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1450820523, "post_id": 34423041, "comment_id": 56591347, "body": "@Bob__; No need to allocate. <code>len</code> is zero. <code>getline</code> will allocate it by itself. Read <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">man page</a>: <i>If <code>*lineptr</code> is set to <code>NULL</code> and <code>*n</code> is set <code>0</code> before the call, then        <code>getline()</code> will allocate a buffer for storing the line.</i>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1450821022, "post_id": 34423041, "comment_id": 56591569, "body": "@Bob__; No. You need to free it explicitly. Added to the answer."}, {"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450822387, "post_id": 34423041, "comment_id": 56592112, "body": "I&#39;m calling function like u wrote , with load(&amp;array,&amp;index);"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450822498, "post_id": 34423041, "comment_id": 56592150, "body": "@kvway; I compiled it with xcode on my mac and it is running fine just giving a warning about <code>getline</code> (as it is not a standard library function)."}, {"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450822571, "post_id": 34423041, "comment_id": 56592178, "body": "I use g++ compiler and it gives me 2 errors slova.c: In function \u2018void load(char***, int*)\u2019: slova.c:21:69: error: invalid conversion from \u2018void*\u2019 to \u2018char**\u2019 [-fpermissive]          <i>array = realloc ( *array, ( *index + 1 ) * sizeof( char</i> ) );                                                                      ^ slova.c:25:45: error: invalid conversion from \u2018void*\u2019 to \u2018char*\u2019 [-fpermissive]          array[0][*index] = malloc(riadok + 1); , will try gcc"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1450822637, "post_id": 34423041, "comment_id": 56592200, "body": "@kvway; Check the extension of your program file. It must be <code>.cpp</code>. Change it to <code>.c</code> and use GCC instead of g++. g++ is a C++ compiler. In C++ you need to cast the return value of <code>malloc</code> family function."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 4, "last_activity_date": 1450823225, "last_edit_date": 1450823225, "creation_date": 1450812234, "answer_id": 34423041, "question_id": 34422996, "link": "https://stackoverflow.com/questions/34422996/passing-2d-array-of-char-as-argument/34423041#34423041", "title": "Passing 2D array of char as argument", "body": "<p>In C arguments are pass by value. When you pass <code>array</code> in <code>main</code> to the function then it just copied to the parameter <code>array</code> in function <code>load</code>. The statement  </p>\n\n<pre><code>array = (char**) realloc ( array, ( *index + 1 ) * sizeof( char* ) );  \n</code></pre>\n\n<p>modify the pointer <code>array</code> to new allocated memory.   </p>\n\n<p>Pass the address of <code>array</code> from <code>main</code> with some changes to <code>load</code> function</p>\n\n<pre><code>void load(char ***array, int *index) { // Use pointer to pointer to pointer\n\n    int riadok;\n    size_t len = 0;\n    char *buffer = NULL;\n\n    printf(\"Slova:\\n\");\n    while( ( riadok = getline(&amp;buffer,&amp;len,stdin) ) != -1 ) {\n        //printf(\"%d\\n\", riadok);\n        //printf(\"%s\\n\", buffer);\n        if (riadok == 1){\n            break;\n        }\n\n\n        *array = realloc ( *array, ( *index + 1 ) * sizeof( char* ) );\n        if(*array == NULL)\n            break;\n\n        array[0][*index] = malloc(riadok + 1);\n        if(array[0][*index])\n            strcpy( array[0][*index], buffer );\n        //else\n        //  printf(\"Memory Not allocated\\n\");\n\n\n        *index = *index + 1;\n    }\n    free(buffer);\n}\n</code></pre>\n\n<p>and call it from <code>main</code> as  </p>\n\n<pre><code>load(&amp;array,&amp;index);\n</code></pre>\n"}], "owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "accepted_answer_id": 34423041, "answer_count": 1, "score": 2, "last_activity_date": 1450823225, "creation_date": 1450812041, "last_edit_date": 1450813902, "question_id": 34422996, "link": "https://stackoverflow.com/questions/34422996/passing-2d-array-of-char-as-argument", "title": "Passing 2D array of char as argument", "body": "<p>I made a function that loads lines and save it to array which dinamically alocates everytime the getline function load a new line but It gives me segmentation fault when i want to print all saved lines from array in the end of my code. Could you please tell me where the problem is ? When i remove the function and put everything to main it works fine.</p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid load(char **array,int *index) {\n\n        int riadok;\n        size_t len = 0;\n        char *buffer = NULL;\n\n        printf(\"Slova:\\n\");\n        while( ( riadok = getline(&amp;buffer,&amp;len,stdin) ) != -1 ) {\n\n            if (riadok == 1){\n                break;  \n            }\n\n            array = (char**) realloc ( array, ( *index + 1 ) * sizeof( char* ) );\n            array[*index] = (char*) malloc ( (riadok + 1) * sizeof(char*) );\n            strcpy( array[*index], buffer );\n\n            *index = *index + 1;\n\n      }\n\n    }\n\nint main()\n{\n\n   int index = 0;\n   int i;\n   char **array = NULL;\n\n   load(array,&amp;index);\n\n   for (i = 0; i &lt; index; i++ )\n     printf(\"%s\",array[i]);\n\n\n   return 0;  \n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1450812087, "post_id": 34422933, "comment_id": 56587521, "body": "Did you read the documentation for <code>bind</code>? I&#39;m pretty sure it tells you how to figure out why a call failed."}, {"owner": {"reputation": 952, "user_id": 5625102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc184e0e79be57f4a76f0cc757ada884?s=128&d=identicon&r=PG&f=1", "display_name": "Shadowwolf", "link": "https://stackoverflow.com/users/5625102/shadowwolf"}, "edited": false, "score": 0, "creation_date": 1450812764, "post_id": 34422933, "comment_id": 56587889, "body": "Try calling WSAGetLastError to find out a more descriptive error code than &quot;failed&quot;."}, {"owner": {"reputation": 137, "user_id": 5708483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f148a5808bc7348b1e3694f5288f1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vale132", "link": "https://stackoverflow.com/users/5708483/vale132"}, "edited": false, "score": 0, "creation_date": 1450814494, "post_id": 34422933, "comment_id": 56588748, "body": "Thanks. Apparently &quot;An operation was attempted on something that is not a socket.&quot; But immediately above the offending code, I successfully created a socket (I get &quot;Socket created&quot; on execution). I&#39;m looking at other examples, and the SOCKET type seems to match that of the function&#39;s first parameter."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1450819377, "post_id": 34422933, "comment_id": 56590887, "body": "@Vale132 The results of a comparison are probably not a socket."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1450820956, "last_edit_date": 1450820956, "creation_date": 1450818721, "answer_id": 34424497, "question_id": 34422933, "link": "https://stackoverflow.com/questions/34422933/socket-fails-to-bind-c-with-winsock/34424497#34424497", "title": "Socket fails to bind (C with WinSock)", "body": "<p>This statement:</p>\n\n<pre><code>if (s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) == INVALID_SOCKET)\n</code></pre>\n\n<p>Needs an additional set of parenthesis around the assignment:</p>\n\n<pre><code>if ((s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET)\n</code></pre>\n\n<p>The <code>==</code> operator has a higher precedence then the <code>=</code> operator (see <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">Operator Precedence</a>), so your original statement implicitly acts as if you had written it like this instead:</p>\n\n<pre><code>if (s = (socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) == INVALID_SOCKET))\n</code></pre>\n\n<p>If <code>socket()</code> succeeds, the comparison would evaluate to <code>false</code>, which then assigns <code>0</code> to <code>s</code> (since <code>SOCKET</code> is just an alias for <code>UINT_PTR</code>, assigning a boolean value to a <code>SOCKET</code> variable is allowed), and then <code>bind()</code> would fail with the <code>WSAENOTSOCK</code> error (if <code>socket()</code> fails, the comparison would evaluate to <code>true</code>, which would assign <code>1</code> to <code>s</code>, then the <code>if</code> would evaluate as true and your process would exit).</p>\n\n<p>Personally, I dislike code that does assignments and comparisons in the same statement.  This would be clearer and safer:</p>\n\n<pre><code>s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\nif (s == INVALID_SOCKET)\n</code></pre>\n\n<p>Also, don't forget to call <code>closesocket()</code> on <code>new_socket</code> after <code>accept()</code> succeeds.</p>\n"}], "owner": {"reputation": 137, "user_id": 5708483, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f148a5808bc7348b1e3694f5288f1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vale132", "link": "https://stackoverflow.com/users/5708483/vale132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450820956, "creation_date": 1450811820, "question_id": 34422933, "link": "https://stackoverflow.com/questions/34422933/socket-fails-to-bind-c-with-winsock", "title": "Socket fails to bind (C with WinSock)", "body": "<p>This is supposed to bind a socket to a port on the local host and accept TCP connections. When I run it, I get my \"Bind error\" message. I used <a href=\"http://www.binarytides.com/winsock-socket-programming-tutorial/\" rel=\"nofollow\">this</a> tutorial (see the \"Accept connection\" section), and the only significant difference I can see between that and my code is the position of the server address and port member initializations, which shouldn't matter, as long as they come before the <code>bind()</code> call?</p>\n\n<p>I added a new rule in Windows Firewall (on Windows 7) to allow TCP connections from this executable, on port 8888, but that doesn't seem to help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock2.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n\nint main(int argc, char *argv[])\n{\n    WSADATA wsa;\n    SOCKET s, new_socket;\n    struct sockaddr_in server, client;\n    int c;\n\n    printf(\"\\nInitializing WinSock...\");\n    if (WSAStartup(MAKEWORD(2,2),&amp;wsa) != 0)\n    {\n    printf(\"Failed. Error code: %d\\n\\n\", WSAGetLastError());\n    exit(1);\n    }\n\n    printf(\"\\nInitialized.\");\n\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons(8888);\n    server.sin_family = AF_INET;\n\n\n    if (s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) == INVALID_SOCKET)\n    {\n    printf(\"\\nCould not create socket: %d\", WSAGetLastError());\n    exit(1);\n    }\n    printf(\"\\nSocket created.\\n\");\n\n    if (bind(s, (struct sockaddr *)&amp;server, sizeof(server)) == SOCKET_ERROR)\n    {\n    printf(\"\\nBind error.\\n\\n\");\n    exit(1);\n    }\n    printf(\"\\nSocket bound to port 8888.\\n\\n\");\n    listen(s, 3);\n\n    printf(\"\\nWaiting for incoming connections...\");\n\n    c = sizeof(struct sockaddr_in);\n    new_socket = accept(s, (struct sockaddr *)&amp;client, &amp;c);\n    if (new_socket == INVALID_SOCKET)\n    {\n    printf(\"\\nAccept failed.\\n\\n\");\n    exit(1);\n    }\n    printf(\"\\nConnection accepted.\");\n\n\n    closesocket(s);\n    WSACleanup();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "string", "segmentation-fault", "c-strings"], "comments": [{"owner": {"reputation": 15918, "user_id": 1115577, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/97919207da718e7edf547da40719ee10?s=128&d=identicon&r=PG", "display_name": "simonzack", "link": "https://stackoverflow.com/users/1115577/simonzack"}, "edited": false, "score": 0, "creation_date": 1450811491, "post_id": 34422800, "comment_id": 56587207, "body": "You&#39;re using C like java, C strings need manual memory allocation."}, {"owner": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450811648, "post_id": 34422800, "comment_id": 56587291, "body": "Thanks for taking the time.hmmmm... so not just <code>char buf[1000]; char *p;</code>? Why does the &quot;if&quot; version work?"}, {"owner": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450811753, "post_id": 34422800, "comment_id": 56587351, "body": "Sidenote: I&#39;m doing socket programming and using user inputs when programming to test protocol etc..."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1450811800, "post_id": 34422800, "comment_id": 56587382, "body": "Doesn&#39;t your compiler give any error messages or warnings? Most of that shouldn&#39;t compile at all."}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450812082, "post_id": 34422930, "comment_id": 56587519, "body": "Ok thank you. Can&#39;t a char be considered a non terminated char array of 1 element at position [0] though?"}, {"owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "reply_to_user": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450812194, "post_id": 34422930, "comment_id": 56587586, "body": "Sure, technically it can be. If you wanted to write the above code this way you could go with. <code>x=toupper(...); strncmp(&amp;x, &quot;Y&quot;, 1);</code> but you couldn&#39;t do something involving <code>&amp;toupper(...)</code>, that isn&#39;t valid C."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450812215, "post_id": 34422930, "comment_id": 56587601, "body": "@J-a-n-u-s No. You&#39;re confusing an array (one or more storage locations that can contain values) with the contents of an array (one or more values contained in a storage location). When you say &quot;char&quot;, you could mean a storage location (like <code>char a;</code>) or you could mean a value (like <code>&#39;a&#39;</code>). These are two different things."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450812673, "post_id": 34422930, "comment_id": 56587830, "body": "@J-a-n-u-s, to put it another way, you are confusing <i>converting</i> (i.e. casting) the value of an object to a pointer with <i>taking the address of</i> that object.  They are not at all the same thing."}, {"owner": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "edited": false, "score": 0, "creation_date": 1450817925, "post_id": 34422930, "comment_id": 56590263, "body": "Thanks for your time guys. I&#39;ll keep it simple and go with the if. All the best."}], "tags": [], "owner": {"reputation": 5358, "user_id": 3171657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J3bKr.png?s=128&g=1", "display_name": "Turn", "link": "https://stackoverflow.com/users/3171657/turn"}, "is_accepted": true, "score": 0, "last_activity_date": 1450811803, "creation_date": 1450811803, "answer_id": 34422930, "question_id": 34422800, "link": "https://stackoverflow.com/questions/34422800/c-segmentation-fault-on-linux-with-strncmp/34422930#34422930", "title": "C segmentation fault on linux with strncmp", "body": "<p>The return value of <code>toupper</code> is another character, not a pointer to a string. So you are trying access memory address 131 which is why you are getting a segfault. Since you are only interested in the one character, you can replace your offending line with:</p>\n\n<pre><code>if (toupper(user_input(2)) == 'Y') {\n   printf(\"You said yes\\n\");\n}\n</code></pre>\n\n<p>Notice that in the comparison <code>Y</code> is in single quotes which denotes you are dealing with a character value (as opposed to double quotes which denote a string value).</p>\n"}], "owner": {"reputation": 919, "user_id": 5437832, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i6WbN.png?s=128&g=1", "display_name": "J-a-n-u-s", "link": "https://stackoverflow.com/users/5437832/j-a-n-u-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 34422930, "answer_count": 1, "score": 0, "last_activity_date": 1450811803, "creation_date": 1450811307, "question_id": 34422800, "link": "https://stackoverflow.com/questions/34422800/c-segmentation-fault-on-linux-with-strncmp", "title": "C segmentation fault on linux with strncmp", "body": "<p>This works ('Y' must be single quotes):</p>\n\n<pre><code>if (toupper(user_input(2)) == 'Y') printf(\"you said y\");\n</code></pre>\n\n<p>This gives segmentation fault:</p>\n\n<pre><code>if (!strncmp((char *)toupper(user_input(2)), \"Y\", 1)) printf(\"you said y\");\n</code></pre>\n\n<p>strncmp must be going off the deep end but not sure why since I'm passing a casted toupper() as (char *). Without the casting, same error.</p>\n\n<p>FYI user_input() is (N.B. vars are global):</p>\n\n<pre><code>char* user_input(int size) { //size is the number of characters to capture. Remember to account for \\n or \\0\n    if (fgets(buf, size, stdin) != NULL) { //buf is char buf[1000];\n        if ((p = strchr(buf, '\\n')) != NULL) //Check if carriage return in string\n            *p = '\\0'; //Replace carriage return with NULL\n        p = buf; //Set pointer back to input for others to access\n        return *p;\n   } else {\n       p = buf;\n       p[0] = \"\\0\";\n       return \"\\0\"; //Return NULL if input fails\n   }\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}]