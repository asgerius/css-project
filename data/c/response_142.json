[{"tags": ["c", "pointers", "reference", "char"], "comments": [{"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1506556941, "post_id": 46458885, "comment_id": 79873232, "body": "Use strdup(), it&#39;s just allocated the memory for the ptr variable and then copy the content of ptr2 in it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1506556972, "post_id": 46458885, "comment_id": 79873242, "body": "&#39;this should work properly&#39; why?   You are copying to a null pointer."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1506557006, "post_id": 46458885, "comment_id": 79873250, "body": "You haven&#39;t allocated any memory to ptr."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1506557054, "post_id": 46458885, "comment_id": 79873263, "body": "&#39;I get no warnings, successfully compiles, yet when I run it the program crashes&#39; - yes, this is normal behaviour for undebugged programs.  If a progam works perfectly the first time it compiles cleanly, buy a lottery ticket!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1506557312, "post_id": 46458885, "comment_id": 79873331, "body": "In fact, you are copying to the address of a null pointer."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1506557480, "post_id": 46458885, "comment_id": 79873375, "body": "Also, you have gone overboard with the &#39;&amp;&#39; address operator;("}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3044193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe595a1867caccb10721e3026ed191e?s=128&d=identicon&r=PG&f=1", "display_name": "WheneverImOnHereImAnnoyed", "link": "https://stackoverflow.com/users/3044193/wheneverimonhereimannoyed"}, "edited": false, "score": 0, "creation_date": 1506557645, "post_id": 46458944, "comment_id": 79873414, "body": "Thank you for your answer. Can you go more into what stack-space is?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 3, "user_id": 3044193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe595a1867caccb10721e3026ed191e?s=128&d=identicon&r=PG&f=1", "display_name": "WheneverImOnHereImAnnoyed", "link": "https://stackoverflow.com/users/3044193/wheneverimonhereimannoyed"}, "edited": false, "score": 0, "creation_date": 1506557769, "post_id": 46458944, "comment_id": 79873441, "body": "@WheneverImOnHereImAnnoyed: <a href=\"https://stackoverflow.com/q/79923/364696\">What and where are the stack and heap?</a>"}], "tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": false, "score": 1, "last_activity_date": 1506557014, "creation_date": 1506557014, "answer_id": 46458944, "question_id": 46458885, "link": "https://stackoverflow.com/questions/46458885/c-printing-a-char-through-strcpy-is-acting-contradictory/46458944#46458944", "title": "C - printing a char* through strcpy is acting contradictory?", "body": "<p>First of all, you don't know how to use <code>strcpy</code>. The first parameter needs to point to space available to copy into, it doesn't allocate space for you.</p>\n\n<p>Your first example probably only \"works\" because it is copying into stack-space. This is undefined behavior and will cause all kinds of problems.</p>\n\n<p>Your second example (the more correct one) will generally cause a segfault because you are trying to copy into (or read from) a null address.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3044193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe595a1867caccb10721e3026ed191e?s=128&d=identicon&r=PG&f=1", "display_name": "WheneverImOnHereImAnnoyed", "link": "https://stackoverflow.com/users/3044193/wheneverimonhereimannoyed"}, "edited": false, "score": 0, "creation_date": 1506557574, "post_id": 46458960, "comment_id": 79873398, "body": "I wish I could accept all of these answers but you&#39;ve written the most detail for my problem. That makes sense. Thank you."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1506557217, "creation_date": 1506557217, "answer_id": 46458960, "question_id": 46458885, "link": "https://stackoverflow.com/questions/46458885/c-printing-a-char-through-strcpy-is-acting-contradictory/46458960#46458960", "title": "C - printing a char* through strcpy is acting contradictory?", "body": "<p>In your working code, you basically just treated part of your stack as a string buffer; it's flagrantly illegal by the standard, but it happens to work because you don't read from anything you stomp on after the stomping.</p>\n\n<p>You're correct that passing a <code>char**</code> to <code>strcpy</code> makes no sense, but what ends up happening is that it writes to the <code>char*</code> variable itself (and some neighboring memory if it's a 32 bit program), treating it as an array of <code>char</code> (after all, an eight byte pointer has enough room for a seven character string plus <code>NUL</code> terminator). Effectively, your code is incorrect code that still happens to behave like correct code, since this: </p>\n\n<pre><code>char* ptr = NULL;\nconst char* pt2 = \"hello\";\nstrcpy(&amp;ptr, pt2);\nprintf(\"%s\",&amp;ptr);\n</code></pre>\n\n<p>compiles to code that behaves almost exactly like this (aside from the warnings):</p>\n\n<pre><code>char ptr[sizeof(char*)];  // Your char* behaves like an array\nconst char* pt2 = \"hello\";\nstrcpy(ptr, pt2);\nprintf(\"%s\", ptr);\n</code></pre>\n\n<p>When you don't take the address of <code>ptr</code>, you pass a <code>NULL</code> pointer to <code>strcpy</code>, which crashes immediately (because you can't write to a <code>NULL</code> pointer's target on almost all systems).</p>\n\n<p>Of course, the correct solution would be to make <code>ptr</code> point to allocated memory, either global, automatic, or dynamically allocated memory. For example, using a stack buffer, this would be legal:</p>\n\n<pre><code>char buf[8];\n\nchar *ptr = buf; // = &amp;buf[0]; would be equivalent\nconst char* pt2 = \"hello\";\nstrcpy(ptr, pt2);\nprintf(\"%s\", ptr);\n</code></pre>\n\n<p>although it would be rather pointless, since <code>ptr</code> could just be replaced with <code>buf</code> everywhere and <code>ptr</code> removed:</p>\n\n<pre><code>char buf[8];\nconst char* pt2 = \"hello\";\nstrcpy(buf, pt2);\nprintf(\"%s\", buf);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "is_accepted": false, "score": 0, "last_activity_date": 1506557666, "last_edit_date": 1506557666, "creation_date": 1506557351, "answer_id": 46458976, "question_id": 46458885, "link": "https://stackoverflow.com/questions/46458885/c-printing-a-char-through-strcpy-is-acting-contradictory/46458976#46458976", "title": "C - printing a char* through strcpy is acting contradictory?", "body": "<p>You need to allocate memory for ptr variable (malloc). Then, a usefull function is strdup(). <br>\nIt take a string, allocate the good memory's space for a new string and copy the content of the source in it before returning the new string.<br>\nYou can do:</p>\n\n<pre><code>ptr = strdup(pt2);\n</code></pre>\n\n<p><em>The documentation: <a href=\"http://manpagesfr.free.fr/man/man3/strdup.3.html\" rel=\"nofollow noreferrer\">http://manpagesfr.free.fr/man/man3/strdup.3.html</a></em></p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1506557483, "post_id": 46458980, "comment_id": 79873376, "body": "Actually, <code>&amp;ptr</code> is not &quot;random&quot; memory. The OP is writing to the bytes of the pointer itself. It&#39;s terrible, and probably officially undefined behavior, but it&#39;s not &quot;random&quot; memory; it&#39;s a known location on the stack."}, {"owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1506557738, "post_id": 46458980, "comment_id": 79873435, "body": "@ShadowRanger &quot;hello&quot; is longer than 4 bytes, so on a 32-bit operating system this will overrun the bounds of the pointer. On a 64-bit machine, &quot;hello&quot; would fit within the pointer, but if it&#39;s longer than 7 characters, as the original code that the OP simplified to this example probably was, it&#39;ll overrun that too and write over who knows what. Either way it&#39;s bad juju."}], "tags": [], "owner": {"reputation": 15118, "user_id": 7258538, "user_type": "registered", "profile_image": "https://graph.facebook.com/10102111546405895/picture?type=large", "display_name": "Charles Srstka", "link": "https://stackoverflow.com/users/7258538/charles-srstka"}, "is_accepted": false, "score": 0, "last_activity_date": 1506557395, "creation_date": 1506557395, "answer_id": 46458980, "question_id": 46458885, "link": "https://stackoverflow.com/questions/46458885/c-printing-a-char-through-strcpy-is-acting-contradictory/46458980#46458980", "title": "C - printing a char* through strcpy is acting contradictory?", "body": "<p>You're writing to random memory, which is undefined behavior. This means that according to the C standard, the compiler is allowed to generate code that does literally anything, including but not limited to:</p>\n\n<ol>\n<li><p>Printing \"hello\".</p></li>\n<li><p>Printing random gibberish.</p></li>\n<li><p>Crashing.</p></li>\n<li><p>Corrupting some other variable in your app.</p></li>\n<li><p>Ripping a hole in the fabric of space-time, causing an invasion by evil space lemurs from the fifth dimension that ruin the market for Kopi Luwak coffee by causing a glut in the supply.</p></li>\n</ol>\n\n<p>Tl;dr: Don't do that.</p>\n"}], "owner": {"reputation": 3, "user_id": 3044193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe595a1867caccb10721e3026ed191e?s=128&d=identicon&r=PG&f=1", "display_name": "WheneverImOnHereImAnnoyed", "link": "https://stackoverflow.com/users/3044193/wheneverimonhereimannoyed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 46458960, "answer_count": 4, "score": -1, "last_activity_date": 1506557666, "creation_date": 1506556562, "question_id": 46458885, "link": "https://stackoverflow.com/questions/46458885/c-printing-a-char-through-strcpy-is-acting-contradictory", "title": "C - printing a char* through strcpy is acting contradictory?", "body": "<p>First post here, I've used this site for years but this dilemma is really annoying. So when I run this C code through the VS2015 Developer Command prompt with the C compiler:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n   char* ptr = NULL;\n   const char* pt2 = \"hello\";\n   strcpy(&amp;ptr, pt2);\n   printf(\"%s\",&amp;ptr);\n   return 0;\n}\n</code></pre>\n\n<p>I get these warnings:</p>\n\n<pre><code>midterm_c.c(35): warning C4047: 'function': 'char *' differs in levels of indirection from 'char **'\nmidterm_c.c(35): warning C4024: 'strcpy': different types for formal and actual parameter 1\nmidterm_c.c(36): warning C4477: 'printf' : format string '%s' requires an argument of type 'char *', but variadic argument 1 has type 'char **'\n</code></pre>\n\n<p>Yet when I run it, it prints \"hello\", which shouldn't happen because it doesn't make sense to use the reference operators on the ptr variable. But when I run this code without them:</p>\n\n<pre><code>char* ptr = NULL;\nconst char* ptr2 = \"hello\";\nstrcpy(ptr, ptr2);\nprintf(\"%s\",ptr);\nreturn 0;\n</code></pre>\n\n<p>I get no warnings, successfully compiles, yet when I run it the program crashes even though this should work properly. I'm getting really frustrated because this doesn't make any sense to me and one of the reasons why I'm really hating C right now. If anyone has any idea how this is happening I'd really appreciate it. Thank you.</p>\n"}, {"tags": ["c", "visual-studio", "winapi"], "comments": [{"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1506556506, "post_id": 46458849, "comment_id": 79873126, "body": "Then why does the official Microsoft example go with <code>DWORD WINAPI MyThreadFunction( LPVOID lpParam )</code>?"}, {"owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "edited": false, "score": 0, "creation_date": 1506556553, "post_id": 46458849, "comment_id": 79873135, "body": "@E&#228;rendilBaggins <code>WINAPI</code> is just a macro for <code>__stdcall</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1506556596, "post_id": 46458849, "comment_id": 79873143, "body": "the <code>WINAPI</code> is macro expanded to <code>__stdcall</code>. also you can use <code>CALLBACK</code> macro here. all this the same"}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506556603, "post_id": 46458849, "comment_id": 79873145, "body": "Isn&#39;t putting <code>WINAPI</code> after stuff deprecated? When I used <code>HANDLE WINAPI</code> I got a warning from the compiler"}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506556666, "post_id": 46458849, "comment_id": 79873154, "body": "It worked anyway, so I guess it was that. I just would like to understand what exactly the <code>__stdcall</code> is and why it&#39;s considered an archaism (or whatever the compiler defined it) if put after <code>HANDLE</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1506556900, "post_id": 46458849, "comment_id": 79873214, "body": "because __stdcall is calling convention. have sense only for functions. when you declare <code>HANDLE WINAPI h;</code> - this is really anachronism"}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506558581, "post_id": 46459011, "comment_id": 79873592, "body": "Is the <code>DWORD</code> really necessary? Cause <code>int __stdcall</code> was fine for the compiler, I wonder if it&#39;s actually any different as I don&#39;t really use the return value for the thread functions."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506558844, "post_id": 46459011, "comment_id": 79873645, "body": "@E&#228;rendilBaggins: yes, <code>DWORD</code> is really necessary. <code>int</code> and <code>unsigned long</code> are different data types. If you use <code>int</code>, you have to use a typecast to pass your functions to <code>CreateThread</code>, and you shouldn&#39;t be using a typecast at all. If you have to resort to a typecast to please the compiler, you are doing something wrong."}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506558902, "post_id": 46459011, "comment_id": 79873658, "body": "Guess I&#39;m changing it to DWORD then. Don&#39;t want to typecast to a smaller type."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506559131, "post_id": 46459011, "comment_id": 79873709, "body": "@E&#228;rendilBaggins: unless your compiler implements <code>long</code> as 64bit on Windows (most use 32bit, but some use 64bit), then <code>DWORD</code> and <code>int</code> will usually be the same size, but not the same signness. C and C++ are strongly typed languages. You have to use proper types."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1506674570, "post_id": 46459011, "comment_id": 79924412, "body": "Neither C nor C++ are strongly typed programming languages. They are statically typed, though, so the compiler can issue diagnostics for incompatible types."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1506557662, "creation_date": 1506557662, "answer_id": 46459011, "question_id": 46458849, "link": "https://stackoverflow.com/questions/46458849/conversion-error-in-createthread/46459011#46459011", "title": "Conversion error in CreateThread", "body": "<p>You are NOT following the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686736.aspx\" rel=\"nofollow noreferrer\">official documentation</a> when declaring your thread functions.</p>\n\n<p>Your original declarations were using <code>int</code> as the return value, and <code>__cdecl</code> (implicitly) as the calling convention.  When you changed the return value to <code>DWORD</code>, you did not change the calling convention.</p>\n\n<p>However, the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686736.aspx\" rel=\"nofollow noreferrer\">documentation</a> clearly shows the correct declaration:</p>\n\n<pre>\nDWORD WINAPI ThreadProc(\n  _In_ LPVOID lpParameter\n);\n</pre>\n\n<p><code>DWORD</code> is an <code>unsigned long</code>, and <code>WINAPI</code> is a macro that maps to the <code>__stdcall</code> calling convention (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751.aspx\" rel=\"nofollow noreferrer\">Windows Data Types</a>).</p>\n\n<p>So, the correct declaration of your functions would be:</p>\n\n<pre><code>unsigned long __stdcall printer_thread(void *args);\nunsigned long __stdcall receiver_thread(void *args);\nunsigned long __stdcall serverconn_thread(void *args);\n</code></pre>\n\n<p>However, since <code>CreateThread()</code> takes an <code>LPTHREAD_START_ROUTINE</code> as input, which is declared as <code>DWORD (WINAPI*)(LPVOID)</code> (see the actual declaration in <code>winbase.h</code>), you should declare your functions to match:</p>\n\n<pre><code>DWORD WINAPI printer_thread(LPVOID args);\nDWORD WINAPI receiver_thread(LPVOID args);\nDWORD WINAPI serverconn_thread(LPVOID args);\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506557662, "creation_date": 1506556238, "question_id": 46458849, "link": "https://stackoverflow.com/questions/46458849/conversion-error-in-createthread", "title": "Conversion error in CreateThread", "body": "<p>I have a weird bug when I try to use the <code>CreateThread</code> function. Here's my code:</p>\n\n<pre><code>HANDLE threads[3];  //threads[0] is printer, threads[1] is receiver, [2] is serverconn\n    DWORD  printer_id,  receiver_id, serverconn_id;\n    if(\n                      ((threads [0] = CreateThread(NULL, 0, printer_thread,    (LPVOID) thread_args, 0, &amp;printer_id)) == NULL) ||\n        ((recv_thread = threads [1] = CreateThread(NULL, 0, receiver_thread,   (LPVOID) thread_args, 0, &amp;receiver_id)) == NULL) ||\n                      ((threads [2] = CreateThread(NULL, 0, serverconn_thread, (LPVOID) thread_args, 0, &amp;serverconn_id)) == NULL)\n    )\n    {\n        IO_print_line(\"Initialization error\");\n        return FALSE;\n    }\n</code></pre>\n\n<p><code>printer_thread</code>, <code>receiver_thread</code> and <code>serverconn_thread</code> are functions defined like this:</p>\n\n<p><code>int serverconn_thread(LPVOID args);</code></p>\n\n<p>The Visual Studio compiler gives me this error:</p>\n\n<pre><code>Error   C2440   'function': cannot convert from 'int (__cdecl *)(LPVOID)' to 'LPTHREAD_START_ROUTINE'\n</code></pre>\n\n<p>And I really don't get it since I think I've done exactly <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682516(v=vs.85).aspx\" rel=\"nofollow noreferrer\">what the official documentation suggests</a>. </p>\n\n<p>And no, changing the thread functions' return type to <code>DWORD</code> doesn't solve anything, the error only changes to:</p>\n\n<pre><code>Error   C2440   'function': cannot convert from 'DWORD (__cdecl *)(LPVOID)' to 'LPTHREAD_START_ROUTINE'\n</code></pre>\n\n<p>Weird thing is if I change it like this:</p>\n\n<pre><code>if(\n                      ((threads [0] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) &amp;printer_thread,    (LPVOID) thread_args, 0, &amp;printer_id)) == NULL) ||\n        ((recv_thread = threads [1] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) &amp;receiver_thread,   (LPVOID) thread_args, 0, &amp;receiver_id)) == NULL) ||\n                      ((threads [2] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) &amp;serverconn_thread, (LPVOID) thread_args, 0, &amp;serverconn_id)) == NULL)\n    )\n</code></pre>\n\n<p>With a forced cast, compiler is ok but I don't think it's a good idea to brute-force it this way. How do I fix this?</p>\n"}, {"tags": ["python", "c", "embed"], "comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1506556486, "post_id": 46458833, "comment_id": 79873120, "body": "Check library dependency with <code>otool -L</code>. As a side note, use a debugger and step through it."}, {"owner": {"reputation": 9090, "user_id": 8379597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12eJq.png?s=128&g=1", "display_name": "jq170727", "link": "https://stackoverflow.com/users/8379597/jq170727"}, "edited": false, "score": 0, "creation_date": 1506557379, "post_id": 46458833, "comment_id": 79873347, "body": "Your code worked for me with one small change to the Makefile (see <a href=\"https://pastebin.com/DWgmkC3Q\" rel=\"nofollow noreferrer\">pastebin.com/DWgmkC3Q</a>)"}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "edited": false, "score": 0, "creation_date": 1506557884, "post_id": 46458833, "comment_id": 79873457, "body": "I made the same change but it still throws the same error."}, {"owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1506615308, "post_id": 46458833, "comment_id": 79902641, "body": "@YiFei thanks for the suggestion. It appears that <code>@rpath</code> is not able to find the libpython3.6 library. I&#39;m no longer getting this error if I set <code>DYLD_FALLBACK_LIBRARY_PATH</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "is_accepted": false, "score": 0, "last_activity_date": 1506616681, "creation_date": 1506616681, "answer_id": 46474235, "question_id": 46458833, "link": "https://stackoverflow.com/questions/46458833/embed-python-interpreter-in-c/46474235#46474235", "title": "Embed Python interpreter in C", "body": "<p>Adding this line worked for me.</p>\n\n<pre><code>export DYLD_FALLBACK_LIBRARY_PATH=/Users/$USER/miniconda3/lib\n</code></pre>\n\n<p>If anyone has a better way to do this let me know.</p>\n"}], "owner": {"reputation": 1079, "user_id": 5451769, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f31eddf72e779f7ba6fa057824f4758d?s=128&d=identicon&r=PG&f=1", "display_name": "kdheepak", "link": "https://stackoverflow.com/users/5451769/kdheepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506616681, "creation_date": 1506556045, "question_id": 46458833, "link": "https://stackoverflow.com/questions/46458833/embed-python-interpreter-in-c", "title": "Embed Python interpreter in C", "body": "<p>I'm trying to run a very simple example of a main.c file to include and run some Python code. I have tried to compile and run this program but I get a library not loaded error</p>\n\n<pre><code>./main\ndyld: Library not loaded: @rpath/libpython3.6m.dylib\n  Referenced from: /Users/$USER/GitRepos/python-embed/./main\n  Reason: image not found\n[1]    9323 abort      ./main\n</code></pre>\n\n<p>Any thoughts on what I might be missing? I've posted the code I'm using <a href=\"https://github.com/kdheepak/python-embed/blob/master/main.c\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["c", "arrays", "user-input"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1506555683, "post_id": 46458764, "comment_id": 79872950, "body": "Don&#39;t forget that <code>fgets()</code> will include the newline, and newline is not a digit. Also, don&#39;t forget that recalcitrant users might type some blanks or tabs before and/or after the number. You might want to allow that as valid, but not if there are spaces in the number. Inside your loop, you need to re-measure the length of the input after getting more data \u2014 you need a <code>lenOfInput1 = strlen(userInputM);</code> after the embedded <code>fgets()</code>. The loop condition <code>for (int i = 0; lenOfInput1; i++)</code> should probably be <code>for (int i = 0; i &lt; lenOfInput1; i++)</code> \u2014 or you might need to subtract one for <code>\\n</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1506555830, "post_id": 46458764, "comment_id": 79872969, "body": "<code>size_t len; if (!fgets(userInputM, sizeof(userInputM), stdin)) {&#47;*handle error*&#47;} len = strlen(userInputM); if (len &amp;&amp; userInputM[len-1] == &#39;\\n&#39;) userInputM[--len] = 0;</code> (don&#39;t forget <code>#include &lt;string.h&gt;</code> and do the same for both inputs)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8656514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d2256f75bded8330e4c7f046cd2344?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Duarte", "link": "https://stackoverflow.com/users/8656514/diego-duarte"}, "edited": false, "score": 0, "creation_date": 1506562201, "post_id": 46459372, "comment_id": 79874372, "body": "I was trying to avoid using scanf() because Visual Studios complaints that its not safe but I&#39;ll change the preprocessor definition and try it."}], "tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1506560918, "last_edit_date": 1506560918, "creation_date": 1506560575, "answer_id": 46459372, "question_id": 46458764, "link": "https://stackoverflow.com/questions/46458764/check-if-all-characters-in-an-array-are-integers/46459372#46459372", "title": "Check if all characters in an array are integers", "body": "<p>If you need to make sure that the number is an integer, you could read in the input into an <code>int</code> with <code>scanf()</code> and check the return value.</p>\n\n<pre><code>int M, rv=-1;\nwhile(rv!=1)\n{\n    if(rv==0)\n    {\n        getchar();\n    }\n    rv=scanf(\"%d\", &amp;M);\n}\n</code></pre>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\"><code>scanf()</code></a> would return the number of variables to which values were assigned successfully which will be <code>1</code> if the above <code>scanf()</code> is successful.</p>\n\n<p>If the input was not a number and hence the <code>scanf()</code> returns <code>0</code>, the entered value, which is not a number, is still left unconsumed in the input buffer and that needs to be consumed. It could be done with a <code>getchar()</code>.\nOtherwise, <code>scanf()</code> will keep trying to read the same value and <code>rv</code> will be <code>0</code> each time.</p>\n\n<p>In this way, you don't need a string buffer or a need to use <code>atoi()</code>.</p>\n\n<p>Have a look <a href=\"https://stackoverflow.com/questions/39119000/distinguish-between-a-letter-and-integer-in-c\">here</a> as well.</p>\n\n<hr>\n\n<p>As pointed out in the comments, <code>fgets()</code> will read in the trailing new line (<code>\\n</code>) into the string and <code>\\n</code> is not a digit.</p>\n\n<p>You could replace the <code>\\n</code> with <code>\\0</code> like</p>\n\n<pre><code>str[strlen(str)-1]='\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1029, "user_id": 8294109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WyaZ.png?s=128&g=1", "display_name": "josemartindev", "link": "https://stackoverflow.com/users/8294109/josemartindev"}, "is_accepted": false, "score": 0, "last_activity_date": 1506595360, "creation_date": 1506595360, "answer_id": 46467128, "question_id": 46458764, "link": "https://stackoverflow.com/questions/46458764/check-if-all-characters-in-an-array-are-integers/46467128#46467128", "title": "Check if all characters in an array are integers", "body": "<pre><code>int count = 0;\nint i = 0;\nwhile (userInputM[i])\n{\n    if (userInputM[i] &gt;= '0' &amp;&amp; userInputM[i] &lt;= '9') //if it's an integer\n     {\n        ++count;  //do something like creating new array and put the\n                  //data inside or in my case I count the # of ints\n        ++i;\n      }    \n    else\n        ++i;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8656514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d2256f75bded8330e4c7f046cd2344?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Duarte", "link": "https://stackoverflow.com/users/8656514/diego-duarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 783, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1506595360, "creation_date": 1506555406, "last_edit_date": 1506555730, "question_id": 46458764, "link": "https://stackoverflow.com/questions/46458764/check-if-all-characters-in-an-array-are-integers", "title": "Check if all characters in an array are integers", "body": "<p>I'm working on my first simple C program in Visual Studios 2017. The goal is to get two user inputs which have to be integers.</p>\n\n<p>I go through the array and check if every character is an integer but it still returns \"The input is not a valid number\". Also after retrying 3 times the console crashes.</p>\n\n<p>\"projectExample.exe has triggered a breakpoint. occurred\" is the displayed message.  </p>\n\n<pre><code>int main()\n{\n    char userInputM[10];\n    char userInputN[10];\n\n    //get the value of M from the user\n    printf(\"Enter a value for M: \");\n    fgets(userInputM, sizeof(userInputM), stdin);\n    //printf(userInputM);\n\n    //check that the entered value for M is a valid positive number\n    const int lenOfInput1 = strlen(userInputM);\n    for (int i = 0; lenOfInput1; i++) {\n\n        if (!isdigit(userInputM[i])) {\n            printf(\"The input is not a valid number. Try again\");\n\n            printf(\"Enter a value for M: \");\n            fgets(userInputM, sizeof(userInputM), stdin);\n            printf(userInputM);\n        }\n    }\n\n    //check that the entered value for N is a number \n\n    //convert the user input for M to an int for calculation\n    //int factorM = atoi(userInputM);\n    //printf(\"%d\", factorM);\n\n    //int result = calculate();\n    //int a;\n    //scanf(\"%d\", &amp;a);\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "process-management"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1506555223, "post_id": 46458684, "comment_id": 79872847, "body": "Use the <code>wait</code> or <code>waitpid</code> syscall."}], "answers": [{"comments": [{"owner": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506555309, "post_id": 46458743, "comment_id": 79872864, "body": "I read this already but not able to understand..can you help me with code?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506556555, "post_id": 46458743, "comment_id": 79873136, "body": "I have added a little code sample that I think should work at least on a basic level."}, {"owner": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506556982, "post_id": 46458743, "comment_id": 79873245, "body": "is it possible you to show with the example I mentioned in the question, im learning this, showing in code will help"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506557114, "post_id": 46458743, "comment_id": 79873284, "body": "That code is intended to be inserted into your own code sample after you break out of the <code>for-loop</code> and before <code>fprintf</code>"}, {"owner": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506557208, "post_id": 46458743, "comment_id": 79873303, "body": "im not getting it :("}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "edited": false, "score": 0, "creation_date": 1506557497, "post_id": 46458743, "comment_id": 79873382, "body": "edited one more time to insert it into your sample code."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506571886, "post_id": 46458743, "comment_id": 79876606, "body": "@JonathanLeffler I do not disagree with any of your comment.  Missing the argument in <code>wait()</code> was an error on my part.  As for the robustness of the code, I was only trying to illustrate a simple sample to give the OP an basic understanding of its usage.  You are more than welcome to improve upon it if you think it necessary and proper."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506572292, "post_id": 46458743, "comment_id": 79876695, "body": "I&#39;ll remove my previous comment shortly, but I strongly counsel that you ensure that all functions are declared before writing code in answers.  It&#39;s a good idea to test what you write \u2014 speaking from experience, it is too damn easy to make silly mistakes.  AFAIK, all my code on SO compiles cleanly under GCC using <code>gcc -O3 -std=c11 -g -Werror -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \u2026</code> unless there&#39;s a comment to the contrary.  It&#39;s possible that some earlier code (from 2008 to 2011, roughly) only compiles with <code>-std=c99</code>, or no longer compiles cleanly under a more modern GCC."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506572439, "post_id": 46458743, "comment_id": 79876726, "body": "The prototype options are stringent; you&#39;ll find I declare most functions (other than <code>main()</code>) as static because of them, and I never use <code>int main()</code>, for example \u2014 it&#39;s always <code>int main(void)</code>.  The basic rule, though, is that you shouldn&#39;t use a function that doesn&#39;t have a prototype in scope \u2014 so all system calls such as <code>wait()</code> should be properly prototyped."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506572776, "post_id": 46458743, "comment_id": 79876810, "body": "If it were my code, the <code>wait()</code> loop would not be protected by <code>if (childpid &gt; 0)</code> and would look more like: <code>int status; int corpse; while ((corpse = wait(&amp;status)) &gt; 0) printf(&quot;PID %d exited with status 0x%.4X\\n&quot;, corpse, status);</code>. There are extremely unusual circumstances under which a program can inherit children it didn&#39;t create. Note that I was careful to use &#39;program&#39; and not &#39;process&#39; \u2014 the circumstances involve a first program,  <code>program1</code>, forking some children and then executing the second program, <code>program2</code>, which has children it didn&#39;t know about because it didn&#39;t create them."}], "tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": true, "score": 4, "last_activity_date": 1506572074, "last_edit_date": 1506572074, "creation_date": 1506555224, "answer_id": 46458743, "question_id": 46458684, "link": "https://stackoverflow.com/questions/46458684/c-how-to-print-parent-process-at-the-end-of-child/46458743#46458743", "title": "C: How to print parent process at the end of child?", "body": "<p>To synchronize a parent process with child processes, you want to make use of <code>wait</code> or <code>waitpid</code></p>\n\n<p><a href=\"https://linux.die.net/man/3/wait\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/wait</a></p>\n\n<p>To start off simple, you could call <code>wait</code> in a loop that would iterate as many times as the number of children you spawned that you wish to wait for.  Perhaps something along these lines after you've finished spawning all the children could get you started:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nint main (int argc, char *argv[]) {\n   pid_t childpid = 0; \n   int i, n;\n\n   if (argc != 2){   /* check for valid number of command-line arguments */ \n      fprintf(stderr, \"Usage: %s processes\\n\", argv[0]);\n      return 1; \n   }     \n   n = atoi(argv[1]);  \n   for (i = 1; i &lt; n; i++)\n         if ((childpid = fork()) &lt;= 0)\n            break;\n\n   if (childpid&gt;0){ // parent process\n       while (i&gt;1) {\n           wait(NULL);\n           i--;\n       }\n   }\n\n   fprintf(stderr, \"i:%d  process ID:%ld  parent ID:%ld  child ID:%ld\\n\",\n           i, (long)getpid(), (long)getppid(), (long)childpid);\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1370, "user_id": 4682302, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/4187c619fda650f970566c5f47f3fe75?s=128&d=identicon&r=PG&f=1", "display_name": "JKLM", "link": "https://stackoverflow.com/users/4682302/jklm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 46458743, "answer_count": 1, "score": 1, "last_activity_date": 1506572074, "creation_date": 1506554726, "question_id": 46458684, "link": "https://stackoverflow.com/questions/46458684/c-how-to-print-parent-process-at-the-end-of-child", "title": "C: How to print parent process at the end of child?", "body": "<p>How to modify this code so that the parent process prints out its information, after all, child process done with execution.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;unistd.h&gt;\n\n    int main (int argc, char *argv[]) {\n       pid_t childpid = 0; \n       int i, n;\n\n       if (argc != 2){   /* check for valid number of command-line arguments */ \n          fprintf(stderr, \"Usage: %s processes\\n\", argv[0]);\n          return 1; \n       }     \n       n = atoi(argv[1]);  \n       for (i = 1; i &lt; n; i++)\n          if ((childpid = fork()) &lt;= 0)\n             break;\n\n       fprintf(stderr, \"i:%d  process ID:%ld  parent ID:%ld  child ID:%ld\\n\",\n               i, (long)getpid(), (long)getppid(), (long)childpid);\n       return 0; \n    }\n</code></pre>\n"}, {"tags": ["c", "linux", "printf"], "comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 1, "creation_date": 1506555420, "post_id": 46458591, "comment_id": 79872886, "body": "It&#39;s not possible to determine the type. Take a look at <a href=\"http://en.cppreference.com/w/cpp/utility/variadic/va_arg\" rel=\"nofollow noreferrer\">this</a>. (It&#39;s cppreference, but doesn&#39;t matter here.) Specifically, it says &quot;If the type of the next argument in ap (after promotions) is not compatible with T, the behavior is undefined&quot;."}, {"owner": {"reputation": 45, "user_id": 8599918, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154648318980806/picture?type=large", "display_name": "hans-1795", "link": "https://stackoverflow.com/users/8599918/hans-1795"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506555883, "post_id": 46458591, "comment_id": 79872978, "body": "@Yunnosch, thank you for editing this post!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506556183, "post_id": 46458591, "comment_id": 79873051, "body": "Why does your <code>printf.h</code> header include <code>my_put_char.h</code> header?  Are users of your <code>printf.h</code> going to use what&#39;s declared in it?  Note that the format string should be <code>const char *fmt</code> (with the added <code>const</code>); C99, C11 and POSIX would have it qualified with <code>restrict</code> too (<code>int printf(const char * restrict format, ...);</code>).  Your implementation file should include your <code>my_put_char.h</code> header; it calls the function.  Your other header should (probably) not include it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506556526, "post_id": 46458591, "comment_id": 79873132, "body": "Note that when using <code>va_arg</code>, you must specify a promoted type \u2014 <code>int</code> or <code>unsigned int</code> or <code>double</code> and not anything shorter (<code>char</code>, <code>short</code>, <code>float</code>, etc).  Your line <code>a = va_arg(print, char);</code> is immediately invoking undefined behaviour.  (The verbiage from the standard &#167;7.16.1.1 is: <i>\u2026or if type is not compatible with the type of the actual next argument (as promoted according to the default argument promotions), the behavior is undefined, except\u2026</i> and the exceptions don&#39;t apply here (they relate to signed vs unsigned integers and <code>void *</code> vs <code>char *</code>)."}, {"owner": {"reputation": 45, "user_id": 8599918, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154648318980806/picture?type=large", "display_name": "hans-1795", "link": "https://stackoverflow.com/users/8599918/hans-1795"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506556639, "post_id": 46458591, "comment_id": 79873149, "body": "@JonathanLeffler, Thank you so much for your answer. So basically I need to pass a = (int)va_Arg(print, int);  since char is automatically promoted to int?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1506556676, "post_id": 46458591, "comment_id": 79873155, "body": "There&#39;s a reason why the GCC compilers support the <code>__attribute__((format(printf,1,2))</code> notation for checking <code>printf()</code>-like functions \u2014 it&#39;s hard to do it otherwise."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1506556879, "post_id": 46458591, "comment_id": 79873208, "body": "You&#39;re welcome to my comments \u2014 they&#39;re much more comment than answer.  The comment by @YiFei contains the answer I&#39;d have to give \u2014 there isn&#39;t an easy way for you to spot the problem inside your code (though in the specific case of <code>%c</code>, you could decide that if the integer you receive is outside the applicable range of values for <code>char</code> (and/or <code>signed char</code> and/or <code>unsigned char</code>), then it is probably a bug).  That is, however, moderately hard to generalize \u2014 it couldn&#39;t be used to spot problems with integer types T where <code>sizeof(T) &gt;= sizeof(int)</code>, or with floating point types."}, {"owner": {"reputation": 45, "user_id": 8599918, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154648318980806/picture?type=large", "display_name": "hans-1795", "link": "https://stackoverflow.com/users/8599918/hans-1795"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506557012, "post_id": 46458591, "comment_id": 79873251, "body": "@JonathanLeffler, I&#39;ll start with that, thank you for giving me a lead! It&#39;s been almost a month with c language and still have lots to learn! Thank you again have a great day!"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8599918, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154648318980806/picture?type=large", "display_name": "hans-1795", "link": "https://stackoverflow.com/users/8599918/hans-1795"}, "edited": false, "score": 0, "creation_date": 1506606492, "post_id": 46469111, "comment_id": 79896714, "body": "Thank you so much for your answer Basile!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1506604249, "last_edit_date": 1506604249, "creation_date": 1506601498, "answer_id": 46469111, "question_id": 46458591, "link": "https://stackoverflow.com/questions/46458591/im-implementing-printf-function-in-c-linux/46469111#46469111", "title": "I&#39;m implementing printf function in C/Linux", "body": "<blockquote>\n  <p>when I do <code>my_print(\"%c\", \"hi\");</code> , it still compiles and displays a number</p>\n</blockquote>\n\n<p>You've got some <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><strong>undefined behavior</strong></a>, so be <a href=\"https://stackoverflow.com/a/25636788/841108\">scared</a>. Your <code>my_printf</code> would call <code>va_arg</code> with an argument of the bad type (expected <code>char</code> promoted to <code>int</code>, got <code>char*</code>).</p>\n\n<p>To explain what is happening you should dive into implementation details (look into the assembler code, e.g. with <code>gcc -Wall -fverbose-asm -O -S</code>; study your <a href=\"https://en.wikipedia.org/wiki/Processor_(computing)\" rel=\"nofollow noreferrer\">processor</a>, its <a href=\"https://en.wikipedia.org/wiki/Instruction_set_architecture\" rel=\"nofollow noreferrer\">instruction set architecture</a>, its <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">application binary interface</a> and <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a>). <strong>You don't want to do that</strong>, it could take years and is not reproducible.</p>\n\n<p>Read absolutely <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">Lattner's blog on UB</a>, right now!</p>\n\n<p>Then download <a href=\"https://en.wikipedia.org/wiki/C11_(C_standard_revision)\" rel=\"nofollow noreferrer\">C11</a> specification <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a>....</p>\n\n<p>You could also, with <code>gcc</code>, use some <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes\" rel=\"nofollow noreferrer\">function attributes</a>. Don't forget to compile with all warnings and debug info (<code>gcc -Wall -Wextra -g</code>)</p>\n\n<blockquote>\n  <p>after writing <code>a = va_arg(print, char);</code> Is there a way to check whether my input is a different data type?</p>\n</blockquote>\n\n<p>No, not really and not always. But the <code>format</code> function attribute could help. And you could also spend months customizing GCC with your own <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">plugin</a> or some <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">GCC MELT</a> extension (that is not worth your time). Be aware of the <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\"><strong>Halting Problem</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Rice%27s_theorem\" rel=\"nofollow noreferrer\">Rice's Theorem</a> (each makes <a href=\"https://en.wikipedia.org/wiki/Static_program_analysis\" rel=\"nofollow noreferrer\">static</a> source code <a href=\"https://en.wikipedia.org/wiki/Program_analysis\" rel=\"nofollow noreferrer\">program analysis</a> so challenging). Look also into source analyzing tools like <a href=\"http://frama-c.com/\" rel=\"nofollow noreferrer\">Frama-C</a>.</p>\n\n<blockquote>\n  <p>I'm implementing printf function</p>\n</blockquote>\n\n<p>BTW studying the source code of existing <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> implementations of the <a href=\"https://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow noreferrer\">C standard library</a> (such as <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">GNU glibc</a> and <a href=\"http://musl-libc.org/\" rel=\"nofollow noreferrer\">musl-libc</a>) could be inspirational; they are based upon <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a>.</p>\n"}], "owner": {"reputation": 45, "user_id": 8599918, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154648318980806/picture?type=large", "display_name": "hans-1795", "link": "https://stackoverflow.com/users/8599918/hans-1795"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 2, "accepted_answer_id": 46469111, "answer_count": 1, "score": 3, "last_activity_date": 1506604249, "creation_date": 1506554012, "last_edit_date": 1506601143, "question_id": 46458591, "link": "https://stackoverflow.com/questions/46458591/im-implementing-printf-function-in-c-linux", "title": "I&#39;m implementing printf function in C/Linux", "body": "<p>Program:</p>\n\n<pre><code> #ifndef PRINTF_H\n #define PRINTF_H\n #include \"my_put_char.h\"\n\n int my_printf(char *str, ...);\n\n #endif\n</code></pre>\n\n<p>This is my Header file for my function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"my_put_char.h\"\n\nvoid my_put_char(char c) \n{\n     fwrite(&amp;c, sizeof(char), 1, stdout);\n}\n</code></pre>\n\n<p>This is my putchar implementation(my_put_char.c).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include \"printf.h\"\n\nint my_printf(char *str, ...)\n{   \n    if(str == NULL)\n        return 0;\n\n    int i;\n    char a;\n\n    va_list print;\n    va_start(print,str);\n\n    for(i = 0; str[i] ; i++)\n    {\n        if(str[i] == '%')\n        {\n            i++;\n            switch(str[i])\n            {\n                case 'c':\n                a = va_arg(print, char);\n                my_put_char(a);\n                break;\n            }\n        }\n     }\n     va_end(print);\n     return 0;\n}\n</code></pre>\n\n<p>At last, this is a part of my printf implementation.\nI'm testing with <code>%c</code> to display a character. </p>\n\n<p>When I do <code>my_print(\"%c\", 'd');</code> from <code>main.c</code> \nit compiles and displays <code>d</code>. </p>\n\n<p>But when I do <code>my_print(\"%c\", \"hi\");</code> , it still compiles and displays a number.</p>\n\n<p>Question: </p>\n\n<p>After(or before) writing <code>a = va_arg(print, char);</code> Is there a way to check whether my input is a different data type? \nI'm trying to display an error if my input is a different data type. </p>\n\n<p>I'm on this subject for 2 days and couldn't find any answer.\nThank you so much for your time!</p>\n"}, {"tags": ["c", "eclipse", "mercurial"], "answers": [{"tags": [], "owner": {"reputation": 569, "user_id": 3309645, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/ApXf7.jpg?s=128&g=1", "display_name": "charles.cc.hsu", "link": "https://stackoverflow.com/users/3309645/charles-cc-hsu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507589927, "creation_date": 1507589927, "answer_id": 46656222, "question_id": 46458454, "link": "https://stackoverflow.com/questions/46458454/clone-mercurial-repository-of-eclipse-workspace-and-rebuild-in-another-place/46656222#46656222", "title": "Clone Mercurial repository of Eclipse workspace and rebuild in another place", "body": "<p>Use the Import Wizard to  command link import an existing project into workspace.</p>\n\n<ol>\n<li>From the main menu bar, select  command link File > Import.... The Import wizard opens.</li>\n<li>Select General > Existing Project into Workspace and click Next.</li>\n<li>Choose either Select root directory or Select archive file and click the associated Browse to locate the directory or file containing the projects.</li>\n<li>Under Projects select the project or projects which you would like to import.</li>\n<li>Click Finish to start the import.  </li>\n</ol>\n\n<p>It works for me.</p>\n\n<p><a href=\"http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm\" rel=\"nofollow noreferrer\">Importing existing projects</a></p>\n"}], "owner": {"reputation": 569, "user_id": 3309645, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/ApXf7.jpg?s=128&g=1", "display_name": "charles.cc.hsu", "link": "https://stackoverflow.com/users/3309645/charles-cc-hsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507589927, "creation_date": 1506553181, "last_edit_date": 1506560888, "question_id": 46458454, "link": "https://stackoverflow.com/questions/46458454/clone-mercurial-repository-of-eclipse-workspace-and-rebuild-in-another-place", "title": "Clone Mercurial repository of Eclipse workspace and rebuild in another place", "body": "<p>I work on a Eclipse workspace, then I clone the workplace to a backup repository, I want to continue to code and build it without any setting changed in Eclipse in the backup repository. </p>\n\n<pre><code>hg clone Eclipse-workspace Eclipse-backup-repo\n</code></pre>\n\n<p>File structure of <code>Eclipse-workspace</code></p>\n\n<pre><code>+- Eclipse-workspace\n   +- api-project\n      +- Debug\n      +- Release\n      +- src\n         +- api.c\n      +- inc\n         +- api.h\n   +- project2\n      +- Debug\n      +- Release\n      +- src\n         + main.c\n</code></pre>\n\n<p>The cloned file structure of <code>Eclipse-backup-repo</code></p>\n\n<pre><code>+- Eclipse-backup-repo\n   +- api-project\n      +- src\n         +- api.c\n      +- inc\n         +- api.h\n   +- project2\n      +- src\n         + main.c\n</code></pre>\n\n<p>This is my .hgignore</p>\n\n<pre><code># use glob syntax. syntax: glob\n\n.metadata/** \nDebug/** \nRelease/**\n.settings/** \n.cproject \n.project \n.hgignore\n\n# switch to regexp syntax.\n\nsyntax: regexp\n</code></pre>\n\n<p>Is it possible? How can I achieve my goal?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 1, "user_id": 8471128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1594619743929678/picture?type=large", "display_name": "DuKangaroo", "link": "https://stackoverflow.com/users/8471128/dukangaroo"}, "edited": false, "score": 0, "creation_date": 1506552355, "post_id": 46458207, "comment_id": 79872165, "body": "I want my stdout of the parent to be going to the terminal still but I think it is going to the children though"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506557136, "post_id": 46458207, "comment_id": 79873290, "body": "That comment should be in the question."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506557357, "post_id": 46458207, "comment_id": 79873341, "body": "If you want to keep the standard output of the parent going to the terminal, you can&#39;t afford to redirect the pipe it will write to the parent&#39;s standard output.  You have to keep it as a separate file descriptor.  Similarly, the parent can&#39;t afford to redirect its standard input to each of the children&#39;s pipe in turn \u2014 you need to keep that as a separate file descriptor too. You should probably (nominally) use <code>STDIN_FILENO</code> and <code>STDOUT_FILENO</code> instead of <code>0</code> and <code>1</code> for the second argument to <code>dup2()</code>.  You should close the unused descriptors, as you do \u2014 that&#39;s good."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506557438, "post_id": 46458207, "comment_id": 79873364, "body": "You should normally use <code>exit(EXIT_FAILURE);</code> (or a more specific exit code) if you fail to <code>execvp()</code>.  It is good that you exit; it is not good that you exit reporting success."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506557619, "post_id": 46458207, "comment_id": 79873408, "body": "FWIW: your children should send a more informative message, such as their process ID \u2014 and I&#39;d probably terminate the message with a newline, though there are some grounds for not doing so.  That will enable you to check which child sent you which message.  As it stands, only the last child could send you a message because you are busy closing the read end of the other children&#39;s standard output with your <code>dup2()</code> to standard input."}], "owner": {"reputation": 1, "user_id": 8471128, "user_type": "registered", "profile_image": "https://graph.facebook.com/1594619743929678/picture?type=large", "display_name": "DuKangaroo", "link": "https://stackoverflow.com/users/8471128/dukangaroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506551504, "creation_date": 1506551504, "question_id": 46458207, "link": "https://stackoverflow.com/questions/46458207/2-way-communication-between-a-parent-and-multiple-children-in-c-using-pipes", "title": "2 Way communication between a parent and multiple children in C using pipes", "body": "<p>I'm having a problem trying to make my pipes communicate properly.\n Any help would be greatly appreciated. In a for loop I have the setup:</p>\n\n<pre><code>else if (pid == 0) { //child\n    close(pipes[i][TOCHILD][1]);\n    dup2(pipes[i][TOCHILD][0], 0);\n    close(pipes[i][TOCHILD][0]);\n    close(pipes[i][FROMCHILD][0]);\n    dup2(pipes[i][FROMCHILD][1], 1);\n    close(pipes[i][FROMCHILD][1]);\n    //exec\n    ...\n    execvp(args[0], args);\n    exit(0);\n} else { //parent\n    close(pipes[i][TOCHILD][0]);\n    dup2(pipes[i][TOCHILD][1], 1);\n    close(pipes[i][TOCHILD][1]);\n    close(pipes[i][FROMCHILD][1]);\n    dup2(pipes[i][FROMCHILD][0], 0);\n    close(pipes[i][FROMCHILD][0]);\n}\n</code></pre>\n\n<p>Then I have how I am trying to read:</p>\n\n<pre><code>for (int i = 0; i &lt; numPlayers; i++) {\n    char buff[10];\n    read(pipes[i][FROMCHILD][0], buff, sizeof(buff));\n    fprintf(stderr, \"read %s\\n\", buff);\n}\n</code></pre>\n\n<p>And in the child I'm sending this for now:</p>\n\n<pre><code>printf(\"!\");\nfflush(stdout);\n</code></pre>\n"}, {"tags": ["c", "vim", "syntax-highlighting"], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506570956, "post_id": 46460519, "comment_id": 79876372, "body": "The command doesn&#39;t seem to have any effect, I&#39;ll look into it though."}, {"owner": {"reputation": 2989, "user_id": 2890575, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf081a960a38e14ed256c34b9495ca8e?s=128&d=identicon&r=PG&f=1", "display_name": "gzh", "link": "https://stackoverflow.com/users/2890575/gzh"}, "reply_to_user": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506573044, "post_id": 46460519, "comment_id": 79876868, "body": "@lalilulelo, maybe you should read <a href=\"https://github.com/vim/vim/blob/master/runtime/doc/syntax.txt\" rel=\"nofollow noreferrer\">syntax.txt</a> for making your own syntax files too."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "reply_to_user": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506583071, "post_id": 46460519, "comment_id": 79880984, "body": "@lalilulelo this is definitly the right way to go, what is your fileending?"}, {"owner": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "reply_to_user": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 1, "creation_date": 1506588618, "post_id": 46460519, "comment_id": 79884560, "body": "@lalilulelo: There was an extra space in between the event names; I&#39;ve fixed that."}, {"owner": {"reputation": 2989, "user_id": 2890575, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf081a960a38e14ed256c34b9495ca8e?s=128&d=identicon&r=PG&f=1", "display_name": "gzh", "link": "https://stackoverflow.com/users/2890575/gzh"}, "reply_to_user": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "edited": false, "score": 0, "creation_date": 1506594024, "post_id": 46460519, "comment_id": 79888247, "body": "@IngoKarkat, Thanks."}, {"owner": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506621718, "post_id": 46460519, "comment_id": 79906219, "body": "Oh, it works now with the fix! Thank you guys very much!"}], "tags": [], "owner": {"reputation": 2989, "user_id": 2890575, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf081a960a38e14ed256c34b9495ca8e?s=128&d=identicon&r=PG&f=1", "display_name": "gzh", "link": "https://stackoverflow.com/users/2890575/gzh"}, "is_accepted": true, "score": 3, "last_activity_date": 1506588567, "last_edit_date": 1506588567, "creation_date": 1506569416, "answer_id": 46460519, "question_id": 46458005, "link": "https://stackoverflow.com/questions/46458005/how-to-run-command-automatically-for-every-new-file-opened-in-vim/46460519#46460519", "title": "How to run command automatically for every new file opened in Vim", "body": "<p>vim load syntax highlight file according to filetype. usually it is judged by file name extension. ex. if your programming language file with extension as <code>.mine</code>, you should add following configuration to .vimrc</p>\n\n<pre><code>au BufRead,BufNewFile *.mine   set filetype=c\n</code></pre>\n\n<p>You can refer to <a href=\"https://github.com/vim/vim/blob/master/runtime/doc/filetype.txt\" rel=\"nofollow noreferrer\">filetype.txt</a> for more tricks.</p>\n"}, {"comments": [{"owner": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506570797, "post_id": 46460597, "comment_id": 79876320, "body": "I already have <code>syntax on</code> set in my <code>vimrc</code>, but of course I don&#39;t have a syntax file for this particular programming language -- that&#39;s something I was trying to avoid messing with. Since the syntax is quite C-like it suffices to just use the C syntax, and thus my usage of <code>set syntax=c</code>, which does work. My only problem -- and it&#39;s a really minor one -- is with opening with this syntax highlighting automatically at each new file I open in a same given Vim session."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506571071, "post_id": 46460597, "comment_id": 79876410, "body": "I apologize, it appeared you were looking for <code>syntax on</code>. Does the file have a distinct file extension or file type?"}, {"owner": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "edited": false, "score": 0, "creation_date": 1506621658, "post_id": 46460597, "comment_id": 79906187, "body": "It&#39;s alright. It&#39;s a text file with an <code>.mn</code> extension. I suspect the programming language itself was created by my professor &quot;in-house&quot; for usage in a Norma register machine simulator. Anyway, my problem has been solved by @gzh&#39;s answer."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1506570089, "creation_date": 1506570089, "answer_id": 46460597, "question_id": 46458005, "link": "https://stackoverflow.com/questions/46458005/how-to-run-command-automatically-for-every-new-file-opened-in-vim/46460597#46460597", "title": "How to run command automatically for every new file opened in Vim", "body": "<p>What you are looking for belongs in your <code>~/.vimrc</code>. You don't need to set syntax to a specific file type, all you need is:</p>\n\n<pre><code>syntax on\n</code></pre>\n\n<p>That will invoke syntax highlighting for each file you open -- with the proper syntax file (vim is pretty smart...)</p>\n\n<p>You can see the effect before you modify your <code>~/.vimrc</code> simply by issuing the following within vim in command-mode</p>\n\n<pre><code>:syntax on\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 3579346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14c9f329aec68d66f3d772094e0ab9a?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelost", "link": "https://stackoverflow.com/users/3579346/lalilulelost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "closed_date": 1506588645, "accepted_answer_id": 46460519, "answer_count": 2, "score": 2, "last_activity_date": 1506588567, "creation_date": 1506550277, "question_id": 46458005, "link": "https://stackoverflow.com/questions/46458005/how-to-run-command-automatically-for-every-new-file-opened-in-vim", "closed_reason": "Duplicate", "title": "How to run command automatically for every new file opened in Vim", "body": "<p>I have to edit a bunch of files in a programming language that has C-like syntax (and which may or may not be used only within the confines of my university). </p>\n\n<p>To get syntax highlighting without going through the hassle of creating a new syntax configuration in Vim, I just use <code>:set syntax=c</code> to force the C syntax highlighting.</p>\n\n<p>To get this automatically, I <code>set syntax=c</code> in my <code>.vimrc</code> file. The problem is, whenever I open a new file in a new window with <code>:sp</code> or <code>:vsp</code>, there is no syntax highlighting, which indicates that the <code>set</code> command in my <code>.vimrc</code> is only executed when I first open Vim itself.</p>\n\n<p>How do I make it so this gets executed for every new file opened?</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1506550287, "post_id": 46457997, "comment_id": 79871520, "body": "You can&#39;t destroy it. You asked for it to be <code>static</code>, so it is."}, {"owner": {"reputation": 99, "user_id": 3661273, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3ed154f2c2574a93f27590af9991943?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/3661273/ram"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506550841, "post_id": 46457997, "comment_id": 79871713, "body": "Thanks a lot...so i need not explicitly destroy it..but has to free all the struct pointers which i have used?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506551309, "post_id": 46457997, "comment_id": 79871879, "body": "You can initialize anything you need to on your <code>__init</code> and free it up on <code>__exit</code>. Test that you&#39;re not leaking memory by loading/unloading your module, generally <code>init_module()</code> and <code>cleanup_module()</code>. The footprint of that <code>static</code> property should be freed up, but anything inside of it is your responsibility, like iterating and deleting each node."}], "owner": {"reputation": 99, "user_id": 3661273, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3ed154f2c2574a93f27590af9991943?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/3661273/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506550238, "creation_date": 1506550238, "question_id": 46457997, "link": "https://stackoverflow.com/questions/46457997/how-to-destroy-hashtable-in-linux-kernel", "title": "How to destroy Hashtable in Linux kernel", "body": "<p>I have created a hashtable in a new module in Linux kernel using</p>\n\n<pre><code>static DEFINE_HASHTABLE(hash_ram, 14);\n</code></pre>\n\n<p>Then I have performed various functions on this hash table like iterating,insertion and deletion etc.</p>\n\n<p>Now I am not able to comprehend in how to destroy this hash table</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c", "linux", "ipc"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1506550465, "post_id": 46457905, "comment_id": 79871582, "body": "<a href=\"http://man7.org/linux/man-pages/man2/getrandom.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/getrandom.2.html</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1506550615, "post_id": 46457905, "comment_id": 79871628, "body": "Where are your error checks? <code>pipe</code>, <code>write</code>, <code>read</code>, <code>waitpid</code>, etc all can fail. (And <code>read</code>/<code>write</code> can read/write less data than requested.)"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1506550688, "post_id": 46457905, "comment_id": 79871657, "body": "Perhaps you should check the return values of more library calls to see if they succeeded or not.  Note <code>rand()</code> is a Pseudo-Random Number Generator (PRNG): It&#39;s actually deterministic, not truly random, so when given the same seed and after calling it the same number of times, it always gives the same results.  And forked processes will definitely start from the same state."}, {"owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1506550830, "post_id": 46457905, "comment_id": 79871707, "body": "Thanks for pointing out @melpomene . That code was written in hurry. It is a psuedo code, not actual implementation. I will incorporate it. For the second part, should i put the read/write section in an infinite loop?"}, {"owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1506550988, "post_id": 46457905, "comment_id": 79871764, "body": "@aschepler Is this means that I should call <code>srand()</code> inside child process, I mean in that fork loop. I tried it, but with little success."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1506551164, "post_id": 46457905, "comment_id": 79871822, "body": "@UmeshCG You can&#39;t <code>srand</code> with the current time because all the processes are created at the same time. You could have the parent use its <code>rand()</code> to generate a new seed for each of them in the parent process."}, {"owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1506551788, "post_id": 46457905, "comment_id": 79872019, "body": "@melpomene Does <code>getrandom()</code> supported by all glibc versions, I am in glibc version 2,17, but when I tried <code>man getrandom</code> in my linux box, it returned nothing."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1506552062, "post_id": 46457905, "comment_id": 79872090, "body": "<a href=\"http://man7.org/linux/man-pages/man2/getrandom.2.html#VERSIONS\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/getrandom.2.html#VERSIONS</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506552900, "post_id": 46457905, "comment_id": 79872279, "body": "There are a few problems with the posted code, all in the <code>main()</code> function: 1) the variable (note the uppercase &#39;D&#39;) is not used. <code>int groupID = 0;</code>  2)  this line: <code>for(i=1; i &lt; (NGROUPID - 1); i++)</code> only accesses index 1 and 2 of the array <code>groupId[]</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1506552999, "post_id": 46457905, "comment_id": 79872304, "body": "You could use something like <code>srand(time(NULL) + getpid())</code> in the child processes to get a different seed for each."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506553075, "post_id": 46457905, "comment_id": 79872327, "body": "cont: 3) this line: <code>groupId[i]= groupId[j] + 2;</code> sets groupId[1] and groupId[2] to 1002 and 1003 (respectively) and does nothing with  groupId[3].   Suggest replacing the init code with: <code>int groupId[] = { 1000, 1002, 1004, 1006 };</code> and removing all the run time initialization of that array."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1506553962, "post_id": 46457905, "comment_id": 79872552, "body": "this line: <code>pipe(parent_to_child);</code> is only creating one pipe.  The parent is &#39;blindly&#39; writing to that pipe.  It is anyones&#39; guess as to which child process will get to/read that pipe.  Suggest generating a separate pipe for each child.  Note: this statement: <code>close(parent_to_child[0]);</code> will fail after the first iteration."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506554071, "post_id": 46457905, "comment_id": 79872568, "body": "after the call to: <code>process()</code>  suggest (rather than a <code>break;</code> statement) calling: <code>exit();</code> then the later check after the loop: <code>if(pid &gt; 0)</code> is not needed"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506554235, "post_id": 46457905, "comment_id": 79872617, "body": "these kinds of statements: <code>for (i = 0; i &lt; (NGROUPID - 1); i++ ) are rather &#39;odd&#39;, especially since they never access the last entry in the array: groupId[].   Suggest using: </code>for (i = 0; i &lt; NGROUPID; i++ )`"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506554400, "post_id": 46457905, "comment_id": 79872652, "body": "this final statement: <code>if(pid &gt; 0)</code> is still looking at the &#39;pid&#39; from the last call to <code>fork()</code>.   It does NOT prove that there are no &#39;zombies&#39;  The calls to <code>waitpid()</code> do prove there are no zombies, IF each of those calls was successful.   For the code to know if the call is successful (or not) the code must check the returned value from the function."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506554505, "post_id": 46457905, "comment_id": 79872674, "body": "to use IPC with several processes, use a &#39;unique&#39; message ID when sending the packet and have the read(ers) of the packet only respond to those packets that have &#39;their&#39; message ID."}], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 1, "last_activity_date": 1506558296, "creation_date": 1506558296, "answer_id": 46459072, "question_id": 46457905, "link": "https://stackoverflow.com/questions/46457905/linux-ipc-passing-different-values-to-child-process-using-pipe-not-working-exc/46459072#46459072", "title": "LINUX IPC: Passing different values to CHILD process using PIPE not working, except for first time, in C", "body": "<p><strong>Random number.</strong> You call <code>srand</code> before you fork, so all children inherit the same seed, so their calls to <code>rand</code> will produce identical numbers. You can increment the seed inside the loop and have each child call <code>srand</code> on its own.</p>\n\n<p><strong>Communication.</strong> The parent closes <code>parent_to_child[0]</code> after spawning the first child, so later children inherit a closed pipe, and cannot receive <code>groupID</code> information through it. Only when all forking is finished should the parent close that pipe.</p>\n"}], "owner": {"reputation": 45, "user_id": 3027028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2771e6ef9ecc4eb00edfa947477355?s=128&d=identicon&r=PG", "display_name": "Umesh C G", "link": "https://stackoverflow.com/users/3027028/umesh-c-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506558296, "creation_date": 1506549753, "last_edit_date": 1506552799, "question_id": 46457905, "link": "https://stackoverflow.com/questions/46457905/linux-ipc-passing-different-values-to-child-process-using-pipe-not-working-exc", "title": "LINUX IPC: Passing different values to CHILD process using PIPE not working, except for first time, in C", "body": "<p>I have a set of taskids grouped in to several groups, each identified by a unique  <code>groupid</code>. </p>\n\n<ol>\n<li><p>For each <code>group</code>, I need to spawn a child process (<em>each of them act as servers - means they get messages from other processes and return the results after processing</em>).</p></li>\n<li><p>Each child is entitled to serve exclusively for the <code>GROUP</code> it is associated with. Hence I want to pass a unique <code>groupId</code> to each child process right after spawning, so that it will do only the tasks associated with its <code>groupId</code>.</p></li>\n<li><p>There's only writing of <code>groupId</code> by the PARENT to CHILD, that too only one time, at the time of CHILD spawn. CHILD is not supposed to write back anything to PARENT. (one way communication - <code>PARENT - write/CHILD -read</code>)</p></li>\n</ol>\n\n<p>After a bit research, I wrote a pseudo code as below. (this is a compilable code). </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;time.h&gt;\n#include&lt;sys/wait.h&gt;\n\nint process(int n);\n\n#define NGROUPID 5\n#define INIT_GROUPID 1000\n\nint parent_to_child[2];\nint main()\n{\n    pid_t pid;\n    pid_t pid_array[NGROUPID];  //Child pid array.\n    int groupId[NGROUPID];\n    int groupID = 0,i;\n\n    srand((unsigned int) time(NULL));  //random seed\n    groupId[0] = INIT_GROUPID;\n\n    printf(\"[0.1] \");\n    //set groupIds \n    for(i=1; i &lt; (NGROUPID - 1); i++)\n    {\n        int j = i -1;\n        groupId[i]= groupId[j] + 2;\n        printf(\"%d~%d\\t\",j,groupId[j]);\n\n    }\n    printf(\"%d~%d\\n\",i-1,groupId[i-1]);\n\n    fflush(stdout); //Flushing stdout before pipe call\n    pipe(parent_to_child);\n\n    // For each groupId, spawn child process \n    for (i = 0; i &lt; (NGROUPID - 1); i++ )\n    {\n\n        pid = fork();\n        if(pid &lt; 0)\n        {\n            perror(\"fork failed\\n\");\n            exit(1);\n        }\n        if(pid == 0)\n        {\n            process(i); //Child Process.\n            break;  //Is it necessory to break? Will it create Children of children?\n        }\n        if(pid &gt; 0)\n        {\n            close(parent_to_child[0]); //parent is not reading from child\n            printf(\"[1.1] writing to child: %d parent %d i %d groupId %d\\n\",pid,getpid(),i,groupId[i]);\n            write(parent_to_child[1], &amp;groupId[i], sizeof(int)); //Passing groupId to Child.\n            pid_array[i] = pid;  //To shutdown cleanly.\n        }\n    }\n    if(pid &gt; 0)\n    {\n\n        for (i = 0; i &lt; (NGROUPID - 1); i++ )\n        {\n            printf(\"[1.2] waiting for pid: %d\\n\",pid_array[i]);\n            waitpid(pid_array[i], NULL, 0);\n            printf(\"[1.3] Finished pid: %d\\n\",pid_array[i]);\n        }\n\n    }\n\n    printf(\"[0.2] Did we Finished total %d PID %d\\n\", NGROUPID, getpid());\n    if(pid &gt; 0)\n        printf(\"[1.4] There are no zombies\\n\");\n\n    return 0;\n\n}\n\n//This is a pseudo code. Actual code will consists of receiving messages\n// from other processes (using message queue) and return the results after processing.\n// This act like a SERVER process, which will not quit in usual scenario. \nint process(int n)\n{\n    int groupID = 0;\n    close(parent_to_child[1]); //we are not going to return to Parent.\n    read(parent_to_child[0], &amp;groupID, sizeof(int)); //Read from Parent\n    unsigned int sec = (rand() % 10) + 1;\n    printf(\"[2.1] Processing %d th Process pid: %d groupId %d sleep %d sec\\n\",n, getpid(), groupID, sec);\n    sleep(sec);\n    printf(\"[2.2] Returning from sleep %d Process pid: %d groupId %d sleep %d sec\\n\",n, getpid(), groupID, sec);\n}\n</code></pre>\n\n<p>The output of this program is below:</p>\n\n<pre><code>    [0.1] 0~1000    1~1002  2~1004  3~1006\n    [1.1] writing to child: 15068 parent 15067 i 0 groupId 1000\n    [2.1] Processing 0 th Process pid: 15068 groupId 1000 sleep 3 sec\n    [1.1] writing to child: 15069 parent 15067 i 1 groupId 1002\n    [2.1] Processing 1 th Process pid: 15069 groupId 0 sleep 3 sec\n    [1.1] writing to child: 15070 parent 15067 i 2 groupId 1004\n    [2.1] Processing 2 th Process pid: 15070 groupId 0 sleep 3 sec\n    [1.1] writing to child: 15071 parent 15067 i 3 groupId 1006\n    [1.2] waiting for pid: 15068\n    [2.1] Processing 3 th Process pid: 15071 groupId 0 sleep 3 sec\n\n    // This Gap is not a part of output. It indicates the sleep worked from here.\n\n    [2.2] Returning from sleep 0 Process pid: 15068 groupId 1000 sleep 3 sec\n    [0.2] Did we Finished total 5 PID 15068\n    [2.2] Returning from sleep 1 Process pid: 15069 groupId 0 sleep 3 sec\n    [0.2] Did we Finished total 5 PID 15069\n    [1.3] Finished pid: 15068\n    [1.2] waiting for pid: 15069\n    [1.3] Finished pid: 15069\n    [1.2] waiting for pid: 15070\n    [2.2] Returning from sleep 2 Process pid: 15070 groupId 0 sleep 3 sec\n    [0.2] Did we Finished total 5 PID 15070\n    [1.3] Finished pid: 15070\n    [1.2] waiting for pid: 15071\n    [2.2] Returning from sleep 3 Process pid: 15071 groupId 0 sleep 3 sec\n    [0.2] Did we Finished total 5 PID 15071\n</code></pre>\n\n<p>The numbering system in the output is as below.</p>\n\n<pre><code>    [0.*] - Indicate that Print from General part of code (neither parent or child)\n    [1.*] - Indicate that Print from PARENT process. (pid &gt; 0)\n    [2.*] - Indicate that Print from CHILD process.  (pid == 0)\n</code></pre>\n\n<p>There are few issues I am facing with this code.</p>\n\n<p><strong>1. Random Number</strong>\nI relied on random numbers to produce uneven sleep time for CHILD, which mimic the actual scenario. Even though I have put <code>srand(time(NULL))</code> function up above in the <code>main</code> function, But <code>rand()</code> in the <code>process() function</code> always generate same output (<code>3 seconds</code> in above output). Is it because the CPU is so fast??. If yes, Is there any better seeds available?</p>\n\n<p><strong>2. Reading PIPE</strong><br>\nBarring the first time, the <code>groupId</code>s read from CHILD process always become zero. As indicated by below output. </p>\n\n<p><code>[2.1] Processing 2 th Process pid: 15070 groupId 0 sleep 3 sec</code></p>\n\n<p>You can clearly see at the time of <code>write</code> by parent, <code>groupId</code> is picked up correctly. (as indicated below):</p>\n\n<p><code>[1.1] writing to child: 15070 parent 15067 i 2 groupId 1004</code></p>\n\n<p>How can I improve this code to achieve the results. OR is there  any flaw in this logic (I am asking this because I am a beginner in IPC without much prior experience). Should I need to implement a <code>critical section</code> for <code>groupId</code> array?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8291603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c7d02afce177faceed506f4f2b00c1?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/8291603/matt"}, "edited": false, "score": 0, "creation_date": 1506557656, "post_id": 46458472, "comment_id": 79873416, "body": "Thanks for your help, as you can see i&#39;m a C noob.  I used solution #1 and it&#39;s working correctly now."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 1, "last_activity_date": 1506553287, "creation_date": 1506553287, "answer_id": 46458472, "question_id": 46457665, "link": "https://stackoverflow.com/questions/46457665/parse-delimited-flat-file-to-doubly-linked-list-of-structs/46458472#46458472", "title": "Parse delimited flat file to doubly linked list of structs", "body": "<p>Your error lies in the function <code>struct node* createnewnode(char* ds, char* ts, char* msg)</code> The memory you allocate with at the line</p>\n\n<pre><code>char tds[LINESIZE], tts[LINESIZE],tmsg[LINESIZE];\n</code></pre>\n\n<p>is local to the function. It disappears when you leave the function, so the later lines</p>\n\n<pre><code>    newnode-&gt;datestring = tds;\n    newnode-&gt;timestring = tts;\n    newnode-&gt;message = tmsg;\n</code></pre>\n\n<p>will not do what you intended.</p>\n\n<p>You can do reserve some memory on the heap, e.g.:</p>\n\n<pre><code>    //char tds[LINESIZE], tts[LINESIZE],tmsg[LINESIZE];\n\n    char *tds = malloc(LINESIZE); // can be fixed if length is fixed\n    char *tts = malloc(LINESIZE); // can be fixed if length is fixed\n    char *tmsg = malloc(LINESIZE); // the message is probably variable, so measure it\n</code></pre>\n\n<p>but you have to free that memory later.</p>\n\n<p>Or reserve some stack memory by changing the <code>struct</code> e.g.:</p>\n\n<pre><code>struct node\n{\n   int jobid;   \n   char datestring[100];\n   char timestring[100];\n   char message[256];\n   struct node *prev;   //previous node\n   struct node *next; //next node \n};\n</code></pre>\n\n<p>but that enlarges the <code>struct</code> by a non-insignificant amount and is less flexible. The message, for example, might need more than 256 characters.</p>\n\n<p>Or use a mixed approach and use the stack for the date and timestring if they are always of the same fixed length and the heap for the message by measuring the length of the entry in the file and allocate memory accordingly. Don't forget to free the heap-memory when cleaning up!</p>\n"}], "owner": {"reputation": 17, "user_id": 8291603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c7d02afce177faceed506f4f2b00c1?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/8291603/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506553660, "creation_date": 1506548490, "last_edit_date": 1506553660, "question_id": 46457665, "link": "https://stackoverflow.com/questions/46457665/parse-delimited-flat-file-to-doubly-linked-list-of-structs", "title": "Parse delimited flat file to doubly linked list of structs", "body": "<p>I'm trying to write a C program to read a file, tokenize the input into a doubly linked list, and do stuff with it, ie: sort it, walk it, write it ...etc </p>\n\n<pre>\nmd@ubuntu:~/Documents/testproject$ cat test.txt\n2017-07-25,14:50:02:477, 12104,932,HOST, log message 1111111111111111111111111111\n2017-07-26,14:50:02:478, 12104,932,HOST, log message 22222222222222222222222222222222222222\n2017-07-27,14:50:03:095, 12104,932,HOST, log message 3333333333333333\n2017-07-28,14:50:04:587, 12104,932,HOST, log message 444444444444444444444444444444444444444444444\n2017-07-29,14:50:04:587, 12104,932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\njunk to be parsed out\nmore junk 1234567\n</pre>\n\n<p>However when I walk the list each node contains the last entry. Any suggests on where I'm going wrong here ? I've added <code>printf</code> in the <code>createnewnode()</code> function, and it seem that the correct strings are being set in the struct node. </p>\n\n<pre>\nmd@ubuntu:~/Documents/testproject$ ./doubly test.txt\n*****CREATE NODE*****(2017-07-25,14:50:02:477,932,HOST, log message 1111111111111111111111111111\n*****CREATE NODE*****(2017-07-26,14:50:02:478,932,HOST, log message 22222222222222222222222222222222222222\n*****CREATE NODE*****(2017-07-27,14:50:03:095,932,HOST, log message 3333333333333333\n*****CREATE NODE*****(2017-07-28,14:50:04:587,932,HOST, log message 444444444444444444444444444444444444444444444\n*****CREATE NODE*****(2017-07-29,14:50:04:587,932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n\n*****PRINT LINKED LIST*****\n0x557237b1a760 1986300429 2017-07-29 14:50:04:587 932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n0x557237b1a720 1986300429 2017-07-29 14:50:04:587 932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n0x557237b1a6e0 1986300429 2017-07-29 14:50:04:587 932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n0x557237b1a6a0 1986300429 2017-07-29 14:50:04:587 932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n0x557237b1a250 1986300429 2017-07-29 14:50:04:587 932,HOST, log message blah blah blahb 1234455e56456546 test test test ERrroRRRrrr$$4RRrr\n</pre>\n\n<p>Code:</p>\n\n<pre><code>/*\nParse a delimited log file and tokenized values in a doubly linked list. \nDo stuff with this doubly linked list of structures (ie: sort by time....etc)\n\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt; \n#include &lt;locale.h&gt;\n#include &lt;errno.h&gt;\n\n#define __USE_XOPEN\n#include &lt;time.h&gt; \n#include &lt;sys/time.h&gt;\n\n#define LINESIZE 1024\n\n//Linked List structure\nstruct node\n{\n    int jobid;   \n    char* datestring;\n    char* timestring;\n    char* message;\n    struct node *prev;  //previous node\n    struct node *next; //next node \n};\ntypedef struct node node;\n\nnode *head = NULL;  //declar pointer beginning of linked list\n\n//prototypes for linked list functions   \nstruct node* createnewnode(char* ds, char* ts, char* msg); //create a new node and return a pointer to it\nvoid insert_at_head(char* ds, char* ts, char* msg);\nvoid print_elements(); \nstatic void clean(); \nint parseFile(char* fname);\nchar **strsplit(const char* str, const char* delim, size_t* numtokens);\nint lensum(char **input);\n\n\n/* DOUBLY LINKED LISTS */\n\n\n//Node Generator \nstruct node* createnewnode(char* ds, char* ts, char* msg)\n{\n    node *newnode = malloc(sizeof(node));  //allocate memory on the heap and create a new node structure \n\n    //copy strings to local variables. Desperate hope to get this working, but probably not needed\n    char tds[LINESIZE], tts[LINESIZE],tmsg[LINESIZE];\n\n    strcpy(tds, ds); \n    strcpy(tts, ts); \n    strcpy(tmsg, msg); \n\n#ifdef DEBUG\n    printf(\"*****CREATE NODE*****(%s,%s,%s\\n\",tds,tts,tmsg);\n#endif  \n\n\n    newnode-&gt;datestring = tds;\n    newnode-&gt;timestring = tts;\n    newnode-&gt;message = tmsg;\n\n    srand(time(NULL));\n    newnode-&gt;jobid = rand(); //set to random value to see if it changes between iterations\n\n    newnode-&gt;prev = NULL;    \n    newnode-&gt;next = NULL;   \n\n    return newnode;\n}\n\n\n//Insert Node at the beginning of the list\nvoid insert_at_head(char* ds, char* ts, char* msg)\n{ \n\n    node *newnode = createnewnode(ds, ts, msg);\n\n    //If this is the first element being added to the linked list \n    if (head == NULL)\n    {\n        head = newnode;\n        return;\n    }\n    head-&gt;prev = newnode;\n    newnode-&gt;next = head;\n    head = newnode; \n}\n\n//print_elements() in linked list from the head to the tail (end)\nvoid print_elements() \n{\n    node *ptmp = head; //beginning of the list \n    if (ptmp == NULL)\n    {\n        printf(\"Warning: No elements in this list\\n\");\n        return;\n    }\n\n#ifdef DEBUG\n    printf(\"\\n*****PRINT LINKED LIST*****\\n\");\n#endif\n\n    while(ptmp != NULL)\n    {\n        printf(\"%p %d %s %s %s\\n\",ptmp, ptmp-&gt;jobid, ptmp-&gt;datestring, ptmp-&gt;timestring, ptmp-&gt;message );\n        ptmp = ptmp-&gt;next; \n    }\n    return; \n}\n\n\nstatic void clean() \n{\n    node *temp = NULL; \n\n    while(head != NULL) \n    {\n        temp = head; \n        head = head-&gt;next; \n        free(temp);\n    }\n}\n\n\n\n/* PARSE FILE */\nint parseFile(char* fname)\n{\n    FILE *in = fopen(fname, \"r\");\n    char line[LINESIZE];\n    struct tm date;\n    const char delim[] = \",\";\n    char *tok; \n    char dbuf[LINESIZE], tbuf[LINESIZE], mbuf[LINESIZE]; \n\n    while (fgets(line, sizeof(line), in) != NULL) {\n\n\n     if ((void *)strptime(line,\"%Y-%m-%d\",&amp;date) != NULL)\n       {\n           tok = strtok(line, delim);\n           strcpy((char*)dbuf, tok);\n\n           tok = strtok(NULL, delim);\n           if (NULL != tok)\n           {\n                strcpy((char*)tbuf, tok);\n                tok = strtok(NULL,delim);\n           }\n           tok = strtok(NULL,\"\\n\"); \n\n           if (NULL != tok)\n           {\n                strcpy((char*)mbuf, tok);\n           }\n\n           insert_at_head(dbuf, tbuf, mbuf);\n\n       }  \n\n    }\n    fclose(in); //close file pointer\n    return 0;   \n}\n\n\n\nint main(int argc, char const *argv[])\n{\n\n    parseFile(\"test.txt\"); \n    print_elements();   \n    clean();         \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["objective-c", "c", "memory-management", "struct", "xcode9"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1506549178, "post_id": 46457288, "comment_id": 79871146, "body": "I&#39;m inclined to guess that the warning is aimed at the possibility that whoever writes such code thinks that <code>delete</code> will operate on all the expressions of a comma-delimited list.  To the best of my (incomplete) knowledge, such an assumption is incorrect.  Furthermore, I am inclined to think that in your particular example, changing the comma to a semicolon will have no effect whatever on the observable behavior of the code."}, {"owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1506550763, "post_id": 46457288, "comment_id": 79871682, "body": "&quot;but what does that accomplish that the line below doesn&#39;t?&quot; - it obfuscates the code. I&#39;ll disagree with @JohnBollinger slightly, I suspect the compiler writers know there are few good uses for the comma operator and its easily misunderstood, while the code writer was being &quot;clever&quot; - but then maybe I&#39;m just a cynic ;-). Use the semicolon."}, {"owner": {"reputation": 7148, "user_id": 501439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Vq6Nw.jpg?s=128&g=1", "display_name": "GeneCode", "link": "https://stackoverflow.com/users/501439/genecode"}, "edited": false, "score": 0, "creation_date": 1506561495, "post_id": 46457288, "comment_id": 79874207, "body": "[myStruct release]; myStruct=nil; is the correct way. :D"}, {"owner": {"reputation": 13943, "user_id": 105717, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1a4723f0bcd9ea701a6a0f2e24075b4?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/105717/dov"}, "reply_to_user": {"reputation": 7148, "user_id": 501439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Vq6Nw.jpg?s=128&g=1", "display_name": "GeneCode", "link": "https://stackoverflow.com/users/501439/genecode"}, "edited": false, "score": 0, "creation_date": 1506561607, "post_id": 46457288, "comment_id": 79874243, "body": "@GeneCode it\u2019s a C struct, not an Objective-C object, and the project is ARC."}, {"owner": {"reputation": 7148, "user_id": 501439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Vq6Nw.jpg?s=128&g=1", "display_name": "GeneCode", "link": "https://stackoverflow.com/users/501439/genecode"}, "edited": false, "score": 1, "creation_date": 1506561676, "post_id": 46457288, "comment_id": 79874259, "body": "Then why did you add objective-c tag to your question? ;)"}, {"owner": {"reputation": 13943, "user_id": 105717, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1a4723f0bcd9ea701a6a0f2e24075b4?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/105717/dov"}, "reply_to_user": {"reputation": 7148, "user_id": 501439, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Vq6Nw.jpg?s=128&g=1", "display_name": "GeneCode", "link": "https://stackoverflow.com/users/501439/genecode"}, "edited": false, "score": 0, "creation_date": 1506561782, "post_id": 46457288, "comment_id": 79874283, "body": "@GeneCode I\u2019m not saying you\u2019re wrong, just making sure you caught that. It\u2019s still in an Objective-C class, so I thought that might have some bearing on the answer."}], "owner": {"reputation": 13943, "user_id": 105717, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1a4723f0bcd9ea701a6a0f2e24075b4?s=128&d=identicon&r=PG", "display_name": "Dov", "link": "https://stackoverflow.com/users/105717/dov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506546718, "creation_date": 1506546718, "question_id": 46457288, "link": "https://stackoverflow.com/questions/46457288/c-objective-c-delete-and-nil-with-comma-between-what-does-it-do", "title": "C/Objective-C delete and nil with comma between - what does it do?", "body": "<p>I upgraded an Objective-C project with some C underpinnings to Xcode 9, which is generating a new warning:</p>\n\n<blockquote>\n  <p>possible misuse of comma operator here [-Wcomma]</p>\n</blockquote>\n\n<p>I'm actually not sure what this statement is doing, so I'm not sure how to handle the warning. What is the effect of this statement?</p>\n\n<pre><code>@interface MyClass : NSObject {\n    struct CStruct *myStruct;\n}\n...\n@end\n\n@implementation MyClass\n\n- (void)myMethod {\n    delete myStruct, myStruct = 0;\n}\n\n@end\n</code></pre>\n\n<p>I can tell that the intent is to zero out the contents of the <code>struct</code> and then nil out the pointer to it, but what does that accomplish that the line below doesn't?</p>\n\n<pre><code>delete myStruct; myStruct = 0;\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation", "emulation", "intel-8080"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1506544784, "post_id": 46456836, "comment_id": 79869329, "body": "How do you &quot;know it&#39;s supposed to move all the bits to the right by 1 position&quot;?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1506544801, "post_id": 46456836, "comment_id": 79869337, "body": "<code>(x &gt;&gt; 1)</code> - moving everything right. <code>((x &amp; 1) &lt;&lt; 7)</code> moving the rightmost bit to the leftmost position. cyclic shifting right over 8 bits."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1506544807, "post_id": 46456836, "comment_id": 79869339, "body": "The <code>x &gt;&gt; 1</code> shifts the (unsigned) quantity in <code>x</code> by one bit to the right, leaving a zero in the most significant bit.  The <code>(x &amp; 1) &lt;&lt; 7)</code> moves the least significant bit to the most significant bit (leaving zeros in the less significant bits).  The <code>|</code> combination of the two has achieved the RRC."}, {"owner": {"reputation": 477, "user_id": 6629589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCdBc.jpg?s=128&g=1", "display_name": "criw", "link": "https://stackoverflow.com/users/6629589/criw"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506545537, "post_id": 46456836, "comment_id": 79869733, "body": "@JonathanLeffler @EugeneSh. Thanks! Now I get it, the problem was that I didn&#39;t understand <code>(x &amp; 1) &lt;&lt; 7)</code>. If you want you can give a proper answer so I can vote it."}, {"owner": {"reputation": 477, "user_id": 6629589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCdBc.jpg?s=128&g=1", "display_name": "criw", "link": "https://stackoverflow.com/users/6629589/criw"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1506545678, "post_id": 46456836, "comment_id": 79869791, "body": "@EOF copy-pasting the intel 8080 manual definition of RRC &quot;The contents of the accumulator are rotated one bit position to the right,with the low-order bit being transferred to the high-order bit position of the accumulator&quot;. Reading this now I see that it also provides an answer to my question, but I didn&#39;t understood it at first"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506545681, "post_id": 46457035, "comment_id": 79869793, "body": "The problematic point for the OP is the second one. It is missing the &quot;mask out everything but the rightmost bit&quot;. BTW, I don&#39;t see why it is done at all when working with 8-bit variable..."}, {"owner": {"reputation": 477, "user_id": 6629589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCdBc.jpg?s=128&g=1", "display_name": "criw", "link": "https://stackoverflow.com/users/6629589/criw"}, "edited": false, "score": 0, "creation_date": 1506546031, "post_id": 46457035, "comment_id": 79869935, "body": "Thanks for the explication! actually it was the second point the one I didn&#39;t understand, and the link will help me with future instructions"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506546177, "post_id": 46457035, "comment_id": 79870007, "body": "Interesting \u2014 the <a href=\"http://www.emulator101.com\" rel=\"nofollow noreferrer\">emulator101.com</a> site that the OP refers to has both RRC and RAR.  The RAR code copies the carry bit to the MSB instead of the MSB.  I&#39;d wondered why the RRC code adjusted the carry bit, but it is clearer if the LSB is copied to the carry bit."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506547526, "post_id": 46457035, "comment_id": 79870515, "body": "@JonathanLeffler: I&#39;m puzzled too: the implementation at emulator101.com is consistent with the documentation I linked, but seem inconsistent with the mnemonics: <code>RRC</code>, <i>Rotate Accumulator Right thru Carry</i> and <code>RAR</code> <i>Rotate Accumulator Right</i>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1506548075, "post_id": 46457035, "comment_id": 79870720, "body": "@JonathanLeffler: I got it: the card is incorrect and the mnemonics are poorly chosen. The original documentation by intel [ <a href=\"http://altairclone.com/downloads/manuals/8080%20Programmers%20Manual.pdf\" rel=\"nofollow noreferrer\">altairclone.com/downloads/manuals/&hellip;</a> ] has this description: <i>RLC               Rotate Accumulator Left. RRC               Rotate Accumulator Right. RAL               Rotate Accumulator Left through Carry. RAR               Rotate Accumulator Right through Carry.</i>"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 5, "last_activity_date": 1506546973, "last_edit_date": 1506546973, "creation_date": 1506545556, "answer_id": 46457035, "question_id": 46456836, "link": "https://stackoverflow.com/questions/46456836/what-is-doing-this-bitwise-operation-in-order-to-emulate-a-rrc-instruction/46457035#46457035", "title": "What is doing this bitwise operation in order to emulate a RRC instruction", "body": "<p>Lets study the steps in order:</p>\n\n<ul>\n<li><code>uint8_t x = state-&gt;a;</code> Use a temporary variable for the current value of the <code>A</code> register;</li>\n<li><code>(x &amp; 1) &lt;&lt; 7</code> shift the low order bit to the high order bit; <code>(x &amp; 1)</code> is the value of the low order bit as all other bits of <code>x</code> are masked off.</li>\n<li><code>(x &gt;&gt; 1)</code> shift the other bits one place to the right (towards the lower bits).</li>\n<li><code>state-&gt;a = ((x &amp; 1) &lt;&lt; 7) | (x &gt;&gt; 1);</code> combine the bits from the previous 2 steps and store as the new value of the <code>A</code> register;</li>\n<li><code>state-&gt;cc.cy = (1 == (x&amp;1));</code> store the low order bit from the original value into the carry bit (this is the bit that was rotated into the high order bit).</li>\n</ul>\n\n<p>The effect of these steps is a rotation of the 8 bits one step to the right, with the low order bit landing into the carry flag. The <a href=\"http://fms.komkon.org/comp/CPUs/8080.txt\" rel=\"nofollow noreferrer\">8080 reference card</a> describes this as <code>Rotate Accumulator Right thru Carry</code>.</p>\n\n<p>Note that the steps can be simplified:</p>\n\n<ul>\n<li><code>state-&gt;a = ((x &amp; 1) &lt;&lt; 7) | (x &gt;&gt; 1);</code> is the same as <code>state-&gt;a = (x &lt;&lt; 7) | (x &gt;&gt; 1);</code> because <code>state-&gt;a</code> is a <code>uint8_t</code>.</li>\n<li><code>state-&gt;cc.cy = (1 == (x&amp;1))</code> is the same as <code>state-&gt;cc.cy = x &amp; 1;</code></li>\n</ul>\n"}], "owner": {"reputation": 477, "user_id": 6629589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCdBc.jpg?s=128&g=1", "display_name": "criw", "link": "https://stackoverflow.com/users/6629589/criw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 46457035, "answer_count": 1, "score": 0, "last_activity_date": 1506546973, "creation_date": 1506544662, "question_id": 46456836, "link": "https://stackoverflow.com/questions/46456836/what-is-doing-this-bitwise-operation-in-order-to-emulate-a-rrc-instruction", "title": "What is doing this bitwise operation in order to emulate a RRC instruction", "body": "<p>I'm working on a personal project to improve my knowledge on how a CPU works. So I'm doing a Intel 8080 emulator, which is a 8 bits microprocessor.</p>\n\n<p>In the implementation of a RRC instruction, which <a href=\"http://www.emulator101.com/logical-group.html\" rel=\"nofollow noreferrer\">example</a> is this:</p>\n\n<pre><code>case 0x0f: {    \n  uint8_t x = state-&gt;a;    \n  state-&gt;a = ((x &amp; 1) &lt;&lt; 7) | (x &gt;&gt; 1);    \n  state-&gt;cc.cy = (1 == (x&amp;1));    \n}\n</code></pre>\n\n<p>I can't understand how this line is working.</p>\n\n<pre><code>state-&gt;a = ((x &amp; 1) &lt;&lt; 7) | (x &gt;&gt; 1);\n</code></pre>\n\n<p>I know it's supposed to move all the bits to the right by 1 position, but I can't figure out how.</p>\n\n<p>I would appreciate if someone could provide me an example of what it's actually doing step by step.</p>\n\n<hr>\n\n<ul>\n<li><p><code>state-&gt;a</code> is a <code>uint8_t</code> which emulate the intel 8080 register named\nA.</p></li>\n<li><p><code>0x0f</code> is the HEX value for RRC.</p></li>\n<li><p>The example has been provided by <a href=\"http://www.emulator101.com\" rel=\"nofollow noreferrer\">this</a> page.</p></li>\n</ul>\n"}, {"tags": ["python", "c", "python-3.x", "cython", "python-multiprocessing"], "comments": [{"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 1, "creation_date": 1506612928, "post_id": 46456499, "comment_id": 79901198, "body": "I cannot test this as the wrapper is not available but importing <code>MyWrapperClass</code> only in the <code>run</code> block of the new process should let it continue. If I understand correctly, the C library does not allow itself to be used in forked processes. Since the shared library is only loaded on <code>import</code> in python, importing it only in the newly spawned process but not its parent should be ok."}, {"owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "reply_to_user": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506613590, "post_id": 46456499, "comment_id": 79901596, "body": "Yes @danny exactly, so I had really hoped that would work, but for some reason it still throws that same error. That is, if I put the <code>from wrapper_module import MyWrapperClass</code> into the <code>MyProcess.run</code> method, it still has the same issue. Do you know if there&#39;s something unique about processes spawned by <code>multiprocessing</code> that is inherently different than the main process? Otherwise I cannot imagine how the process would even know to throw this error."}, {"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506613919, "post_id": 46456499, "comment_id": 79901828, "body": "They are processes that have a parent PID that is not 1 (the init process). In other words spawned by another process. But that applies to all processes spawned by any other process, like the shell. But I think what is happening is that the <code>import</code> statement causes it to be loaded in both the parent and new process. You could though run two separate python processes and connect them via IPC, meaning not spawn a process in python code at all but use two python scripts, one importing <code>MyWrapper</code>, one not, and a shared multiprocessing pipe/memory for communication between them."}, {"owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "reply_to_user": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506614171, "post_id": 46456499, "comment_id": 79902007, "body": "Hm I see what you mean, except I&#39;m not sure how I could implement that in the context of a package...the goal is for one to be able to simply import MyProcess from the package and use it."}, {"owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "reply_to_user": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506614194, "post_id": 46456499, "comment_id": 79902014, "body": "I do wonder whether this has anything to do with the fundamental issue: <a href=\"https://stackoverflow.com/questions/15991036/why-cant-i-use-cocoa-frameworks-in-different-forked-processes\" title=\"why cant i use cocoa frameworks in different forked processes\">stackoverflow.com/questions/15991036/&hellip;</a>"}, {"owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506614526, "post_id": 46456499, "comment_id": 79902208, "body": "There&#39;s no rule saying that you cannot spawn a python interpreter in a new multiprocessing process (other than that usually you do not need to). So that is an option. Eg, make the <code>run</code> be <code>python &lt;my wrapper using script&gt;</code> and communicate with it via IPC. But I wonder if this is even necessary. You have a C library and presumably releasing the GIL. Is <code>threading</code> not an option? Or does that not work either."}, {"owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "reply_to_user": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "edited": false, "score": 0, "creation_date": 1506615465, "post_id": 46456499, "comment_id": 79902714, "body": "Thanks @danny I suppose I should try a threading-based solution. I was avoiding this because I&#39;m trying to keep as much of this as possible in python. But that does seem like a possible workaround"}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "edited": false, "score": 0, "creation_date": 1506605621, "post_id": 46460050, "comment_id": 79896052, "body": "Yeah but this is not the scenario I&#39;m describing, as it does not raise the forked process error. As I mentioned, this error has to do with single-process restrictions in the underlying C library. Your example C code has no such restrictions and thus doesn&#39;t raise that error. When you import mylib, it runs that code in the main process, and it is able to fork it off when you start the new process. But that is not always the case-in fact it&#39;s not the case any time a non-shareable resource is used. In those cases, the relevant C code need be instantiated <i>only</i> in the run method of the process."}], "tags": [], "owner": {"reputation": 622, "user_id": 6610031, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7c0af37e745972b1aa14bd9abc9a1dec?s=128&d=identicon&r=PG&f=1", "display_name": "oz1", "link": "https://stackoverflow.com/users/6610031/oz1"}, "is_accepted": false, "score": 0, "last_activity_date": 1506565855, "creation_date": 1506565855, "answer_id": 46460050, "question_id": 46456499, "link": "https://stackoverflow.com/questions/46456499/how-can-i-use-an-external-c-library-wrapped-with-cython-in-a-separate-python-pro/46460050#46460050", "title": "How can I use an external C library wrapped with Cython in a separate Python process via multiprocessing?", "body": "<p>Codes in <code>cdef extern</code> are just delarations for external c functions(Let's only consider c), these delarations are put into the generated c file without any changes(almost), it has nothing to do with initializations.</p>\n\n<p>I also made a rather simple test(py3.6 windows):</p>\n\n<p><strong>lib.c:</strong></p>\n\n<pre><code>int add(int a, int b)\n{\n    return a + b ;\n}\n</code></pre>\n\n<p><strong>mylib.pyx:</strong></p>\n\n<pre><code>cdef extern from \"lib.c\":\n    int _add \"add\"(int a, int b)\n\ncdef class WrapperClass:\n    def add(self, a, b):\n        return _add(a, b)\n</code></pre>\n\n<p><strong>test_lib.py:</strong></p>\n\n<pre><code>from mylib import WrapperClass\nimport multiprocessing as mp\n\nclass MyProcess(mp.Process):\n    def __init__(self):\n        super().__init__()\n\n    def run(self):\n        self.mwc = WrapperClass()\n        print(self.mwc.add(1, 2))\n\n\nif __name__ == \"__main__\":\n    proc = MyProcess()\n    proc.start()\n</code></pre>\n\n<p>run <code>python test_lib.py</code> without any problem. Maybe my c code is too simple, but I have no idea what your c functions realy do, myabe that's the real problem.</p>\n"}], "owner": {"reputation": 393, "user_id": 1062535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3da3f86d2cd73643dbc6c90fbf228?s=128&d=identicon&r=PG", "display_name": "benson", "link": "https://stackoverflow.com/users/1062535/benson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1506619437, "creation_date": 1506543367, "question_id": 46456499, "link": "https://stackoverflow.com/questions/46456499/how-can-i-use-an-external-c-library-wrapped-with-cython-in-a-separate-python-pro", "title": "How can I use an external C library wrapped with Cython in a separate Python process via multiprocessing?", "body": "<p>I have wrapped a small C library in Cython, and can successfully call it from Python. Here's a simplified example representing how this is as of now:</p>\n\n<pre><code># wrapper_module.pyx\n\ncdef extern from \"my_c_library.h\":\n    void function1()\n    int function2(int param1, char *param2)\n\nclass MyWrapperClass():\n    def __init__(self):\n        pass\n    def do_func1(self):\n        function1()\n    def do_func2(self, p1, p2):\n        function2(p1, p2)\n</code></pre>\n\n<p>This all works well. My goal now is to create and use an instance of <code>MyWrapperClass</code> in a separate process, like this:</p>\n\n<pre><code># my_script.py\n\nimport multiprocessing as mp\nfrom wrapper_module import MyWrapperClass\n\nclass MyProcess(mp.Process):\n    def __init__(self):\n        super().__init__()\n\n    def run(self):\n        self.mwc = MyWrapperClass()\n        self.mwc.do_func1()\n        # ... do more\n\nif __name__ == '__main__':\n    proc = MyProcess()\n    proc.start()\n</code></pre>\n\n<p>When I run my_script.py, I get the following error:</p>\n\n<blockquote>\n  <p>The process has forked and you cannot use this CoreFoundation\n  functionality safely. You MUST exec(). Break on\n  <strong>THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC</strong>()\n  to debug.</p>\n</blockquote>\n\n<p>I think I understand generally why it does not allow this cython module to be forked into a different process (due to resources that the underlying C library uses). But generally when I have encountered this type of problem in the past, either in pure Python or using ctypes and calling DLLs, I can solve it by placing all the critical code in the <code>run</code> method of <code>MyProcess</code>, causing it only to be initialized in the newly forked process.</p>\n\n<p>In this Cython case, however, I don't know how to include the <code>cdef extern</code> code only in the forked process, to avoid this error. Any suggestions?</p>\n\n<p>(I am running python 3.6.2 on macOS 10.12)</p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2017", "header-files"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1506541531, "post_id": 46456019, "comment_id": 79867673, "body": "Please do not post pictures. Cut and paste the error message"}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1506541627, "post_id": 46456019, "comment_id": 79867730, "body": "<code>.c</code> files and <code>.h</code> files are the same language; functions can either be defined or declared (with or without bodies) in both.  You have an actual syntax error."}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506541907, "post_id": 46456019, "comment_id": 79867867, "body": "What&#39;s all these the syntax error then? I posted code for my header."}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1506542063, "post_id": 46456019, "comment_id": 79867960, "body": "You probably have a syntax error in another included (or including) file."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1506542073, "post_id": 46456019, "comment_id": 79867968, "body": "header files are pretty much copy/pasted into files that include them.  They&#39;re not really treated specially.  Perhaps a missing <code>;</code> or <code>}</code> in buffer.h?  Difficult to tell with what we&#39;ve been given to work with.  With, what was it, 400+ errors/warnings in the screenshot you originally posted, seems you&#39;ve got a lot of places to check for the culprit."}, {"owner": {"reputation": 452, "user_id": 5203369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c4tyb3Rgy_E/AAAAAAAAAAI/AAAAAAAAAGU/yWbbayFY_20/photo.jpg?sz=128", "display_name": "Mads Marquart", "link": "https://stackoverflow.com/users/5203369/mads-marquart"}, "edited": false, "score": 2, "creation_date": 1506542191, "post_id": 46456019, "comment_id": 79868021, "body": "Try making a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506542196, "post_id": 46456019, "comment_id": 79868025, "body": "Yeah, debugging code for a job is always full of wonders."}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "reply_to_user": {"reputation": 452, "user_id": 5203369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c4tyb3Rgy_E/AAAAAAAAAAI/AAAAAAAAAGU/yWbbayFY_20/photo.jpg?sz=128", "display_name": "Mads Marquart", "link": "https://stackoverflow.com/users/5203369/mads-marquart"}, "edited": false, "score": 0, "creation_date": 1506542265, "post_id": 46456019, "comment_id": 79868063, "body": "@MadsMarquart It&#39;s not always that simple. Sometimes you have small and tidy examples, sometimes it&#39;s a huge situation that gives you the error. Going to investigate a bit more and try to post more detail."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506542572, "post_id": 46456019, "comment_id": 79868219, "body": "Edit post to indicate line 28  or is that in <code>&quot;common.h&quot;  &quot;buffer.h&quot;</code>"}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506544079, "post_id": 46456019, "comment_id": 79868987, "body": "It&#39;s line 28 in the file I&#39;ve posted, which is called <code>client_socket.h</code> Edited btw"}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "edited": false, "score": 0, "creation_date": 1506544755, "post_id": 46456019, "comment_id": 79869316, "body": "The code you&#39;ve posted is 27 lines long.  There isn&#39;t anything wrong with the code you&#39;ve posted so far."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1506545007, "post_id": 46456019, "comment_id": 79869443, "body": "A function declaration that&#39;s not a definition is perfectly valid either in a <code>.h</code> file or in ` .c` file."}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "reply_to_user": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "edited": false, "score": 0, "creation_date": 1506545630, "post_id": 46456019, "comment_id": 79869774, "body": "@Stewart I&#39;m sorry, it&#39;s not line 28 here cause I excluded the license commented lines"}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506549086, "post_id": 46457758, "comment_id": 79871110, "body": "I actually just fixed it, the problem had (as usual) nothing to do with the error message: it seemed s_addr was a keyword and I couldn&#39;t call my variable like that. Should I make an answer and accept it?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506549369, "post_id": 46457758, "comment_id": 79871203, "body": "<code>s_addr</code> is not a keyword... is it defined as a macro in your header files or one of Visual Studio&#39;s"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506549752, "post_id": 46457758, "comment_id": 79871330, "body": "I updated the answer with the explanation. <code>s_addr</code> indeed cannot be used as an argument name, and the error message is cryptic."}, {"owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506550603, "post_id": 46457758, "comment_id": 79871623, "body": "not a keyword, I meant an already defined word, that&#39;s why the compiler didn&#39;t accept it as a variable name."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "edited": false, "score": 0, "creation_date": 1506551810, "post_id": 46457758, "comment_id": 79872022, "body": "Yes, and I was on the right track. Note however that <code>s_addr</code> could have been defined as a global variable or a function without any such consequences. The problem comes from the definition as a preprocessor macro, a pretty bad idea IMHO."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1506549682, "last_edit_date": 1506549682, "creation_date": 1506548959, "answer_id": 46457758, "question_id": 46456019, "link": "https://stackoverflow.com/questions/46456019/visual-studio-seems-to-compile-headers-as-c-files/46457758#46457758", "title": "Visual Studio seems to compile headers as .c files", "body": "<p>If line 28 in indeed the one you commented, the compilation error is quite surprising: there is no <code>.</code> on this line.</p>\n\n<p>A possible explanation is at least one of the identifiers on this line was defined in <code>common.h</code> or <code>buffer.h</code> as a macro and expanded into a structure member access.</p>\n\n<p>For example:</p>\n\n<pre><code>#define socket_create    socket.create\n</code></pre>\n\n<p>Check the contents of these header files.</p>\n\n<p><strong>EDIT:</strong> the problem was indeed a spurious macro definition in a system header file:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff556972(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff556972(v=vs.85).aspx</a></p>\n\n<p><code>s_addr</code> is defined in as <code>#define s_addr  S_un.S_addr</code></p>\n\n<p>Using <code>s_addr</code> as the name of an argument (or a local variable) leads to a cryptic error message from the compiler, because of the macro expansion...</p>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 3243563, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/100002431404708/picture?type=large", "display_name": "laurisvr", "link": "https://stackoverflow.com/users/3243563/laurisvr"}, "is_accepted": false, "score": 1, "last_activity_date": 1596739781, "creation_date": 1596739781, "answer_id": 63289982, "question_id": 46456019, "link": "https://stackoverflow.com/questions/46456019/visual-studio-seems-to-compile-headers-as-c-files/63289982#63289982", "title": "Visual Studio seems to compile headers as .c files", "body": "<p>I know this is an old question, but I ran in this issue today as well. And for me the issue was that the item type of the file was set to a source file. I managed to resolve it by going to the properties of the file and setting the item type to C/C++</p>\n"}], "owner": {"reputation": 490, "user_id": 8179718, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/064yN.jpg?s=128&g=1", "display_name": "E&#228;rendil Baggins", "link": "https://stackoverflow.com/users/8179718/e%c3%a4rendil-baggins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 46457758, "answer_count": 2, "score": 0, "last_activity_date": 1596739781, "creation_date": 1506541355, "last_edit_date": 1506544105, "question_id": 46456019, "link": "https://stackoverflow.com/questions/46456019/visual-studio-seems-to-compile-headers-as-c-files", "title": "Visual Studio seems to compile headers as .c files", "body": "<p>When I try to build a C project that contains .c and .h files, Visual Studio gives me weird errors, like this is the code for my header (which should be perfectly fine):</p>\n\n<pre><code>#ifndef _CLIENT_SOCKET_H_\n#define _CLIENT_SOCKET_H_\n\n#include \"common.h\"\n#include \"buffer.h\"\n\n#ifdef  __cplusplus\nextern \"C\" {\n#endif\n\ntypedef void* wsocket;\n\nint socket_create(wsocket* sock, int port, const char* addr, struct sockaddr_in *s_addr); //This is line 28\n\nint socket_connect(wsocket sock, struct sockaddr_in s_addr);\n\nbool socket_recv_buffer(wsocket, buffer_t*);\n\nbool socket_send_buffer(wsocket, buffer_t);\n\nint socket_destroy(wsocket* sock);\n\n#ifdef  __cplusplus\n}\n#endif\n\n#endif  /* _CLIENT_SOCKET_H_ */\n</code></pre>\n\n<p>And I get errors like:</p>\n\n<pre><code>syntax error: missing '{' before '.'    \n</code></pre>\n\n<p>or</p>\n\n<pre><code>syntax error: '.'   \n</code></pre>\n\n<p>both at line 28. </p>\n\n<p>It seems like it's trying to compile the header as if it was a .c file, since it wants a body for the function and such. Do you have any idea of what could be happening?</p>\n"}, {"tags": ["c", "struct", "io", "token"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1506541172, "post_id": 46455922, "comment_id": 79867486, "body": "check <code>token</code>. I bet it&#39;s <code>NULL</code> right after the second <code>strtok</code> call."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1506541300, "post_id": 46455922, "comment_id": 79867567, "body": "you&#39;re reading a line, so there can only be one token. At some point, <code>strtok</code> returns NULL but you&#39;re not testing against NULL each time you perform a <code>strtok</code> call."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1506550462, "post_id": 46455922, "comment_id": 79871578, "body": "<code>states[size]</code>is out of bounds."}], "answers": [{"comments": [{"owner": {"reputation": 1307, "user_id": 3159002, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/QjLl7.jpg?s=128&g=1", "display_name": "rationalcoder", "link": "https://stackoverflow.com/users/3159002/rationalcoder"}, "edited": false, "score": 1, "creation_date": 1506542620, "post_id": 46456085, "comment_id": 79868245, "body": "Or, better yet, initialize with <code>struct state_info *states[num_states] = { NULL };</code>"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1506543146, "last_edit_date": 1506543146, "creation_date": 1506541599, "answer_id": 46456085, "question_id": 46455922, "link": "https://stackoverflow.com/questions/46455922/c-tokenize-and-analyze-csv-file/46456085#46456085", "title": "C tokenize and analyze csv file", "body": "<p>Statement <code>struct state_info *states[num_states]</code> does not initialize the pointer array with <code>NULL</code>-values, such that it may contain \"garbage\" (i.e. pointers != <code>NULL</code> pointing to something not being a valid object).</p>\n\n<p>Hence, a comparison like <code>if(states[size] == NULL)</code> will probably never evaluate to true and will consequently never allocate a proper object. Subsequent access to <code>states[size]</code> will lead to undefined behaviour (actually the access <code>states[size]==...</code> already is undefined behaviour, yet I bet that the \"crash\" is due to the subsequent access) </p>\n\n<p>Maybe there are other issues as well; yet I think that this is the most obvious thing in your code.</p>\n\n<p>Fix it by initialising <code>states</code>, e.g. <code>struct state_info *states[num_states] = { NULL }</code></p>\n"}], "owner": {"reputation": 1, "user_id": 7254590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4251162312502f7b554c2f5339976130?s=128&d=identicon&r=PG&f=1", "display_name": "J.Johnff", "link": "https://stackoverflow.com/users/7254590/j-johnff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506550182, "creation_date": 1506540991, "last_edit_date": 1506550182, "question_id": 46455922, "link": "https://stackoverflow.com/questions/46455922/c-tokenize-and-analyze-csv-file", "title": "C tokenize and analyze csv file", "body": "<p>I am learning about how to use token to analyze file and put it in struct array. My code compiles fine, but it crashes while running it. Can someone please help?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>struct state_info {\n    char code[3];\n    unsigned long num_records;\n    unsigned long total_income;\n    unsigned long total_vehicles;\n    unsigned long total_population;\n    unsigned long total_rent;\n    unsigned long total_renter;\n};\n\nint main(int argc, char *argv[]) {\n    const int num_states = 100;\n    struct state_info *states[num_states];\n    FILE *file = fopen(argv[i], \"r\");\n    analyze_file(file, states, num_states);\n}\n\nvoid analyze_file(FILE *file, struct state_info *states[], int num_states) {\n    const int line_sz = 100;\n    char line[line_sz];\n    while (fgets(line, line_sz, file) != NULL) {\n        char* token = strtok(line, \" \\n\");\n        while(token != NULL) {\n            //allocate memory\n            int size = atoi(token);\n            if(states[size] == NULL) {\n                states[size] = malloc(sizeof(struct state_info));\n                states[size]-&gt;num_records = 0;\n                states[size]-&gt;total_income = 0;\n                states[size]-&gt;total_vehicles = 0;\n                states[size]-&gt;total_population = 0;\n                states[size]-&gt;total_rent = 0;\n                states[size]-&gt;total_renter = 0;\n            }\n            //add value to the states\n            token = strtok(NULL, \" \\n\");\n            strcpy(states[size]-&gt;code, token);\n            token = strtok(NULL, \" \\n\");\n            states[size]-&gt;total_population += atoi(token);\n            token = strtok(NULL, \" \\n\");\n            states[size]-&gt;total_income += atoi(token);\n            token = strtok(NULL, \" \\n\");\n            states[size]-&gt;total_vehicles += atoi(token);\n            token = strtok(NULL, \" \\n\");\n\n            //calculate total rent and total renter\n            if(atoi(token) != 0) {\n                states[size]-&gt;total_rent += atoi(token);\n                states[size]-&gt;total_renter++;\n            }\n        }\n        states[size]-&gt;num_records++;\n        token = strtok(NULL, \" \\n\");\n    }\n}\n</code></pre>\n\n<p>I think there should be something wrong with my pointer but I am not sure about it.</p>\n"}, {"tags": ["c", "printf", "microcontroller", "32-bit"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506538765, "post_id": 46455293, "comment_id": 79866173, "body": "once you add float from the language perspective it is going to explode in size and drop in performance, much of the time you can do everything in fixed point (the soft fpu is implemented using fixed point, if they can do the overkill stuff in fixed you can do exactly what you need in fixed with less overhead).  you can try to reduce the floating point you are using, and if you have a C library that supports snprintf or anything printf you are again looking for a big binary, just do it yourself."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1506539491, "post_id": 46455293, "comment_id": 79866569, "body": "Use <code>long long pi, e; ... pi = 3.14159265*1000.0; e = 2.718281828459*1000.0;</code> and then print the 2 integers.  IOWs, pay the price for code to do FP multiply and conversion to an integer, yet leave the formatting and print in the integer domain."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506539856, "post_id": 46455293, "comment_id": 79866770, "body": "@chux good thoughts, but I have real variables to print...  The &quot;pi&quot; and &quot;e&quot; are just examples of what I&#39;m starting with"}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506539999, "post_id": 46455293, "comment_id": 79866845, "body": "@old_timer I&#39;m onboard with a rewrite in fixed point, but the program does not have the calendar time for that"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1506540009, "post_id": 46455293, "comment_id": 79866855, "body": "@grambo I am counting on that as  &quot; pay the price for code to do FP multiply&quot;.  Had these been fixed values, there would be no need for run-time multiplication as the compiler would have done <code>pi = 31415;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506542231, "post_id": 46455293, "comment_id": 79868048, "body": "As compared to <code>void format2double_1(char *mystr, double pi, double e) {   snprintf(mystr, 22, &quot;{%+0.4f,%+0.4f}&quot;, pi, e); }</code>, my code was about 20x faster.  Look forward to comparing against your posted effort."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506542659, "post_id": 46455293, "comment_id": 79868261, "body": "@chux ...looking forward to your &quot;answer&quot;...."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1506543098, "post_id": 46455293, "comment_id": 79868495, "body": "if the speed of snprintf is essential - I think that the algorithm is just wrong. printf family functions are really well written and optimised."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1506543135, "post_id": 46455293, "comment_id": 79868512, "body": "<code>case (1):</code> - I saw something new. Like <code>return (length - 1);</code>. Parentheses are not necessary in both cases."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506544026, "post_id": 46455293, "comment_id": 79868963, "body": "With <code>void format2double_3(char *mystr, double pi, double e) {   mystr[0] = &#39;{&#39;;   int offset = 1;   offset += ftoa(mystr + offset , pi, 4);   mystr[offset++] = &#39;,&#39;;   offset += ftoa(mystr + offset , e, 4);   mystr[offset++] = &#39;}&#39;;   mystr[offset] = 0; }</code>  Your <code>ftoa()</code> code is rounding wrong and create a leading 0 <code>{+03.1415,+02.7182}</code>, unlike <code>snprintf(mystr, 22, \u201d{%+0.4f,%+0.4f}\u201c, 3.14159265, 2.718281828459);</code> --&gt; <code>{+3.1416,+2.7183}</code>.  With inconsistent functionality, the goal is unclear.  Your code about 10x faster than baseline."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1506544569, "post_id": 46455293, "comment_id": 79869215, "body": "@PeterJ_01: as well written as they may be, they have to handle several corner cases of FP, plus the parsing of the format string, and the code must be generic to handle all the possible formatting requirements; if this functionality is never required (say, you always have &quot;normal&quot; numbers, a fixed format and, once scaled, all your numbers can fit an integer) you can gain quite some performance."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506544853, "post_id": 46455293, "comment_id": 79869367, "body": "@chux the leading zero bug wasn&#39;t chased down as the performance was so poor..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506546261, "post_id": 46455293, "comment_id": 79870036, "body": "@grambo Your <code>ftoa(buf, x, 4)</code> fails many corner cases, primarily precision ones even exceeding 0.0001 difference, missing trailing zeros, extra leading zeros and an annoying <code>0.0001(16 zeros)5</code> converted to <code>&quot;+0&quot;</code> a total loss of precision,  Concern about performance maybe should be secondary."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506608056, "post_id": 46455293, "comment_id": 79897792, "body": "Tip: to make code <i>faster</i>, spend more time specifying the details of the goal.  The more you narrow the needed functionality, the more speed can be had.  The title&#39;s equivalent functionality is a good narrowing (yet could be more narrowed if restricted in type (e.g. <code>float</code>) and FP range. Narrowed functionality and speed comes at a price, more development time, less flexibility.  BTW: Is it fast as measured by averaging typical FP values or fast by worst case time - again, the more info --&gt; more speed."}, {"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1506692936, "post_id": 46455293, "comment_id": 79934857, "body": "Sorry that I am another one questioning the requirements of your code, but: why does the runtime of a routine which is essentially written to produce <i>human</i> readable output, matter at all? Who is (or are) these humans that are going read at the pace of your CPU output bandwidth?"}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506547095, "post_id": 46456777, "comment_id": 79870333, "body": "Impressive solution! should work for most floating point values smaller than <code>INT_MAX &#47; 10000</code>, but using <code>long long</code> would give more range, also one small detail: <code>-0.0</code> print as <code>+0.0000</code> instead of <code>-0.0000</code>."}, {"owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "edited": false, "score": 0, "creation_date": 1506547634, "post_id": 46456777, "comment_id": 79870545, "body": "Thanks, it looks good, I should be able to benchmark that tomorrow on my platform...  I will play with a couple of different variations on the choice of sign character too."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1506547829, "post_id": 46456777, "comment_id": 79870623, "body": "@chqrlie -Fie! ;-).  You may enjoy <a href=\"https://stackoverflow.com/q/25332133/2410359\">+0.0 and -0.0 give different ...</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506548128, "post_id": 46456777, "comment_id": 79870741, "body": "@chqrlie True about range, yet with a buffer of 22 for 2 FPs, I suspect OP is working in a <code>fabs(x) &lt; INT_MAX&#47;1000.0</code> range"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1506548478, "post_id": 46456777, "comment_id": 79870879, "body": "simpler fix for negative zero: <code>&quot;-+&quot;[!signbit(pi)]</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506548769, "post_id": 46456777, "comment_id": 79870999, "body": "@chqrlie Maybe <code>signbit(pi) ? &#39;-&#39; : &#39;+&#39;</code>?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506549232, "post_id": 46456777, "comment_id": 79871162, "body": "Definitely more portable than <code>46-2*!signbit(pi)</code>... ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506551847, "post_id": 46456777, "comment_id": 79872032, "body": "@chqrlie As it turns out, <code>signbit(f_in) ? &#39;-&#39; : &#39;+&#39;</code> is much better than <code>&quot;+-&quot;[pi_i &lt; 0]</code> for all sorts of values between <code>-0.00005 &lt; x &lt;= -0.0</code> as they all round to <code>0</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506552205, "post_id": 46456777, "comment_id": 79872120, "body": "Indeed! I wrote a test program to verify the behavior on <code>-0.0</code> and did test negative values smaller than <code>0.0001</code>, but I focussed on <code>-0.0</code> and did not even see the bigger picture."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506563723, "post_id": 46456777, "comment_id": 79874746, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/155468/discussion-between-chux-and-chqrlie\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1506610258, "last_edit_date": 1506610258, "creation_date": 1506544441, "answer_id": 46456777, "question_id": 46455293, "link": "https://stackoverflow.com/questions/46455293/how-to-execute-faster-than-snprintfmystr-22-0-4f-0-4f-double3-141/46456777#46456777", "title": "How to execute faster than &quot;snprintf(mystr, 22, &quot;{%+0.4f,%+0.4f}&quot;, (double)3.14159265, (double) 2.718281828459);&quot; on a 32 bit mcu", "body": "<p>Instead of using <code>*printf()</code> with FP arguments, convert the FP values first into scaled integers.<br>\nWith still calling <code>snprintf()</code>, yet with integer and simple character arguments, my code was about 20x faster than the baseline.</p>\n\n<p>Your mileage may vary. YMMV.</p>\n\n<pre><code>//baseline\nvoid format2double_1(char *mystr, double pi, double e) {\n  snprintf(mystr, 22, \"{%+0.4f,%+0.4f}\", pi, e);\n  //puts(mystr);\n}\n\nvoid format2double_2(char *mystr, double pi, double e) {\n  int pi_i = (int) lrint(pi * 10000.0);\n  int api_i = abs(pi_i);\n  int e_i = (int) lrint(e * 10000.0);\n  int ae_i = abs(e_i);\n  snprintf(mystr, 22, \"{%c%d.%04d,%c%d.%04d}\", //\n      \"+-\"[pi_i &lt; 0], api_i / 10000, api_i % 10000, //\n      \"+-\"[e_i &lt; 0], ae_i / 10000, ae_i % 10000);\n  //puts(mystr);\n}\n</code></pre>\n\n<p>[edit]</p>\n\n<p>For a <a href=\"https://stackoverflow.com/questions/46455293/how-to-execute-faster-than-snprintfmystr-22-0-4f-0-4f-double3-141/46456777?noredirect=1#comment79870333_46456777\">proper</a> <code>-0.0</code> text, use <code>\"+-\"[!!signbit(pi)]</code></p>\n\n<p>[edit]</p>\n\n<p>Some idea for OP to consider as a <code>ftoa()</code> replacement.  Central code is <code>lrint(f_in * fscale[precision]);</code> which rounds and scales.  Untested.</p>\n\n<pre><code>#define PRINTABLE_MAGNITUDE_LIMIT       1000000\n\nint ftoa_1(char *s, const float f_in, const uint8_t precision) {\n  int n;\n  sprintf(s, \"%+.*f%n\", precision, f_in, &amp;n);\n  return n;\n}\n\nint ftoa_2(char *s, const float f_in, const uint8_t precision) {\n  float fscale[] = { 1, 10, 100, 1000, 10000, 100000, 1000000 };\n  long iscale[] = { 1, 10, 100, 1000, 10000, 100000, 1000000 };\n  assert(precision &gt; 0 &amp;&amp; precision &lt; sizeof fscale / sizeof fscale[0]);\n  // gross range check\n  if (f_in &gt; -PRINTABLE_MAGNITUDE_LIMIT &amp;&amp; f_in &lt; PRINTABLE_MAGNITUDE_LIMIT) {\n    long value = lrint(f_in * fscale[precision]);\n    value = labs(value);\n    long scale = iscale[precision];\n    long ipart = value / scale;\n    long fpart = value % scale;\n    // fine range check\n    if (ipart &lt; PRINTABLE_MAGNITUDE_LIMIT) {\n      int n;\n      sprintf(s, \"%c%ld:%0*ld%n\", signbit(f_in) ? '-' : '+', ipart, precision,\n          fpart, &amp;n);\n      return n;\n    }\n  }\n  // Out of range values need not be of performance concern for now.\n  return ftoa_1(s, f_in, precision);\n}\n</code></pre>\n\n<p>[edit]</p>\n\n<p>To convert a positive or 0 integer to a string quickly without the need to shift the buffer or reverse it, see below.  It also returns the string length for subsequent string building.</p>\n\n<pre><code>// Convert an unsigned to a decimal string and return its length\nsize_t utoa_length(char *dest, unsigned u) {\n  size_t len = 0;\n  if (u &gt;= 10) {\n    len = utoa_length(dest, u/10);\n    dest += len;\n  }\n  dest[0] = '0' + u%10;\n  dest[1] = '\\0';\n  return len + 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506611928, "post_id": 46457955, "comment_id": 79900518, "body": "Yes, dropping <code>sprintf()</code> completely is even faster!  I coded something like yours with <code>utoa_length()</code> from <a href=\"https://stackoverflow.com/a/46456777/2410359\">here</a> and was about 1.3 faster than your fine solution. We could have fun all day, yet duty calls."}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 1, "last_activity_date": 1506551444, "last_edit_date": 1506551444, "creation_date": 1506550059, "answer_id": 46457955, "question_id": 46455293, "link": "https://stackoverflow.com/questions/46455293/how-to-execute-faster-than-snprintfmystr-22-0-4f-0-4f-double3-141/46457955#46457955", "title": "How to execute faster than &quot;snprintf(mystr, 22, &quot;{%+0.4f,%+0.4f}&quot;, (double)3.14159265, (double) 2.718281828459);&quot; on a 32 bit mcu", "body": "<p>In a similar vein of <em>@chux</em>'s answer, if the remaining <code>snprintf</code> is still slow you can go down the rabbit hole of hand-composing strings/hand-rendering integers.</p>\n\n<pre><code>char *fmtp04f(char *buf, char *lim, double d) {\n    // if there's no space at all don't bother\n    if(buf==lim) return buf;\n    // 10 characters in maximum 32 bit integer, one for the dot,\n    // one for the terminating NUL in debug prints\n    char b[12];\n    // current position in the buffer\n    char *bp = b;\n    // scale and round\n    int32_t i = lrint(d * 10000.);\n    // write sign and fix i sign\n    // (we do have at least one character available in buf)\n    if(signbit(d)) {\n        *buf++='-';\n        i = -i;\n    } else {\n        *buf++='+';\n    }\n    // *always* write down the last 4 digits, even if they are zeroes\n    // (they'll become the 4 digits after the decimal dot)\n    for(; bp!=b+4; ) {\n        *bp++ = '0' + i%10;\n        i/=10;\n    }\n    *bp++='.';\n    // write down the remaining digits, writing at least one\n    do {\n        *bp++ = '0' + i%10;\n        i/=10;\n    } while(i != 0);\n    // bp is at the character after the last, step back\n    --bp;\n    // data is now into b *in reversed order*;\n    // reverse-copy it into the user-provided buffer\n    while(buf!=lim) {\n        *buf++ = *bp;\n        // check before decrementing, as a pointer to one-before-first\n        // is not allowed in C\n        if(bp == b) break;\n        --bp;\n    }\n    if(buf!=lim) *buf=0;    // \"regular\" case: terminate *after*\n    else         lim[-1]=0; // bad case: truncate\n    return buf;\n}\n\nvoid doformat(char *buf, char *lim, double a, double b) {\n    if(buf==lim) return; // cannot do anything\n    *buf++='{';\n    if(buf==lim) goto end;\n    buf = fmtp04f(buf, lim, a);\n    if(buf==lim) return; // already terminated by fmtp04f\n    *buf++=',';\n    if(buf==lim) goto end;\n    buf = fmtp04f(buf, lim, b);\n    if(buf==lim) return; // idem\n    *buf++='}';\n    if(buf==lim) goto end;\n    *buf++=0;\nend:\n    lim[-1]=0;   // always terminate\n}\n</code></pre>\n\n<p>It passes <a href=\"https://ideone.com/w0RUjR\" rel=\"nofollow noreferrer\">some random tests</a>, so I'm reasonably confident that it is not too wrong.</p>\n\n<p>For some reason, <em>@chux</em> version on my machine (64 bit Linux, gcc 6.3) is generally 2/3 times faster than the baseline, while my version is usually 10/30 times faster than the baseline. I don't know if this is because my <code>snprintf</code> is particularly good or particularly bad. As said above, YMMV.</p>\n"}], "owner": {"reputation": 243, "user_id": 8401410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FC4M.png?s=128&g=1", "display_name": "grambo", "link": "https://stackoverflow.com/users/8401410/grambo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1506610258, "creation_date": 1506538538, "last_edit_date": 1506542600, "question_id": 46455293, "link": "https://stackoverflow.com/questions/46455293/how-to-execute-faster-than-snprintfmystr-22-0-4f-0-4f-double3-141", "title": "How to execute faster than &quot;snprintf(mystr, 22, &quot;{%+0.4f,%+0.4f}&quot;, (double)3.14159265, (double) 2.718281828459);&quot; on a 32 bit mcu", "body": "<p>I've tried a few things, any it seems that at best I'm 1.5x slower than the printf() family of functions, which boggles my mind a bit.  I think what I'm up against in this situation is the addressing of my device is 32bit, and I don't have an FPU.  I've tried a couple of \"ftoa()\" implementations and constrained them to only look for 2 digits on the left of the decimal point, and left myself some breadcrumbs as to what the total length is of a larger overall string that I'm trying to build.  At the end of the day, it seems like the nature of an array of 8-bit elements on a 32bit system is leading to a bunch of hidden shift operations, bitwise  \"OR\" and bitwise NAND operations that are just slowing things down ridiculously...  </p>\n\n<p>Anyone have any general tips for this situation?  (other than a re-architect to an 8.24 fixed point design)  I've tried the compiler optimizations from wysiwyg to execution speed focused, nothing seems to beat snprintf.</p>\n\n<p>Here's the fastest one that I had tried:</p>\n\n<pre><code>#if (__DEBUG)\n #define DATA_FIFO_SIZE         (8)\n#else\n #define DATA_FIFO_SIZE         (1024)\n#endif\n\ntypedef struct\n{\n    int32_t  rval[4];\n    double   cval[4];\n    uint16_t idx;\n    uint16_t padding; //@attention the compiler was padding with 2 bytes to align to 32bit\n} data_fifo_entry;\n\nconst char V_ERR_MSG[7] = \"ERROR,\\0\";\n\nstatic data_fifo_entry data_fifo[DATA_FIFO_SIZE];\nstatic char embed_text[256];\n\n/****\n * float to ASCII, adapted from\n * https://stackoverflow.com/questions/2302969/how-to-implement-char-ftoafloat-num-without-sprintf-library-function-i#7097567\n *\n ****/\n\n //@attention the following floating point #defs are linked!!\n#define MAX_DIGITS_TO_PRINT_FLOAT           (6)\n#define MAX_SUPPORTED_PRINTABLE_FLOAT       (+999999.99999999999999999999999999)\n#define MIN_SUPPORTED_PRINTABLE_FLOAT       (-999999.99999999999999999999999999)\n#define FLOAT_TEST6                         (100000.0)\n#define FLOAT_TEST5                         (10000.0)\n#define FLOAT_TEST4                         (1000.0)\n#define FLOAT_TEST3                         (100.0)\n#define FLOAT_TEST2                         (10.0)\n#define FLOAT_TEST1                         (1.0)\n\nstatic inline int ftoa(char *s, const float f_in, const uint8_t precision)\n{\n    float f_p    = 0.0001;\n    float n      = f_in;\n    int   neg    = (n &lt; 0.0);\n    int   length = 0;\n\n    switch (precision)\n    {\n        case (1):\n        {\n            f_p = 0.1;\n            break;\n        }\n        case (2):\n        {\n            f_p = 0.01;\n            break;\n        }\n        case (3):\n        {\n            f_p = 0.001;\n            break;\n        }\n        //case (4) is the default assumption\n        case (5):\n        {\n            f_p = 0.00001;\n            break;\n        }\n        case (6):\n        {\n            f_p = 0.000001;\n            break;\n        }\n        default:   //already assumed, no assignments here\n        {\n            break;\n        }\n    }              /* switch */\n    // handle special cases\n    if (isnan(n))\n    {\n        strcpy(s, \"nan\\0\");\n        length = 4;\n    }\n    else if ((isinf(n)) || (n &gt;= MAX_SUPPORTED_PRINTABLE_FLOAT) ||\n        ((-1.0 * n) &lt; MIN_SUPPORTED_PRINTABLE_FLOAT))\n    {\n        strcpy(s, \"inf\\0\");\n        length = 4;\n    }\n    else if (n == 0.0)\n    {\n        int idx;\n        s[length++] = '+';\n        s[length++] = '0';\n        s[length++] = '.';\n        for (idx = 0; idx &lt; precision; idx++)\n        {\n            s[length++] = '0';\n        }\n        s[length++] = '\\0';\n    }\n    else if (((n &gt; 0.0) &amp;&amp; (n &lt; f_p)) || ((n &lt; 0.0) &amp;&amp; ((-1.0 * n) &lt; f_p)))\n    {\n        int idx;\n        if (n &gt;= 0.0)\n        {\n            s[length++] = '+';\n        }\n        else\n        {\n            s[length++] = '-';\n        }\n        s[length++] = '0';\n        s[length++] = '.';\n        for (idx = 1; idx &lt; precision; idx++)\n        {\n            s[length++] = '0';\n        }\n        s[length++] = '\\0';\n    }\n    else\n    {\n        int digit, m;\n        if (neg)\n        {\n            n = -n;\n        }\n        // calculate magnitude\n        if (n &gt;= FLOAT_TEST6)\n        {\n            m = 6;\n        }\n        else if (n &gt;= FLOAT_TEST5)\n        {\n            m = 5;\n        }\n        else if (n &gt;= FLOAT_TEST4)\n        {\n            m = 4;\n        }\n        else if (n &gt;= FLOAT_TEST3)\n        {\n            m = 3;\n        }\n        else if (n &gt;= FLOAT_TEST2)\n        {\n            m = 2;\n        }\n        else if (n &gt;= FLOAT_TEST1)\n        {\n            m = 1;\n        }\n        else\n        {\n            m = 0;\n        }\n        if (neg)\n        {\n            s[length++] = '-';\n        }\n        else\n        {\n            s[length++] = '+';\n        }\n        // set up for scientific notation\n        if (m &lt; 1.0)\n        {\n            m = 0;\n        }\n        // convert the number\n        while (n &gt; f_p || m &gt;= 0)\n        {\n            double weight = pow(10.0, m);\n            if ((weight &gt; 0) &amp;&amp; !isinf(weight))\n            {\n                digit       = floor(n / weight);\n                n          -= (digit * weight);\n                s[length++] = '0' + digit;\n            }\n            if ((m == 0) &amp;&amp; (n &gt; 0))\n            {\n                s[length++] = '.';\n            }\n            m--;\n        }\n        s[length++] = '\\0';\n    }\n    return (length - 1);\n}                  /* ftoa */\n\n\nstatic inline void print2_and_idx(int8_t idx1, int8_t idx2, uint16_t fifo_idx)\n{\n    //@attention 10 characters already in the buffer, idx does NOT start at zero\n    uint8_t idx         = V_PREFIX_LENGTH;\n    char    scratch[16] = {'\\0'};\n    char *  p_fifo_id;\n\n    if ((idx1 &gt;= 0) &amp;&amp; (idx1 &lt; MAX_IDX) &amp;&amp; (idx2 &gt;= 0) &amp;&amp; (idx2 &lt; MAX_IDX) &amp;&amp;\n        (fifo_idx &gt;= 0) &amp;&amp; (fifo_idx &lt; DATA_FIFO_SIZE))\n    {\n        ftoa(scratch, data_fifo[fifo_idx].cval[idx1], 4);\n        memcpy((void *)&amp;embed_text[idx += 7], (void *)scratch, 7);\n        embed_text[idx++] = ',';\n        ftoa(scratch, data_fifo[fifo_idx].cval[idx2], 4);\n        memcpy((void *)&amp;embed_text[idx += 7], (void *)scratch, 7);\n        embed_text[idx++] = ',';\n        //!\\todo maybe print the .idx as fixed width, zero pad to 5 digits\n        p_fifo_id         = utoa((char *)&amp;embed_text[idx], (unsigned int)data_fifo[fifo_idx].idx, 10);\n        idx              += strlen(p_fifo_id);\n        embed_text[idx++] = ',';\n    }\n    else\n    {\n        memcpy((void *)&amp;embed_text[idx], (void *)V_ERR_MSG, 7);\n    }\n}                  /* print2_and_idx */\n</code></pre>\n"}, {"tags": ["c", "xml", "xml-parsing"], "comments": [{"owner": {"reputation": 93, "user_id": 1622974, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1cf3f4b883a25e204f47baa5b74a9c?s=128&d=identicon&r=PG", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/1622974/sleepy"}, "edited": false, "score": 0, "creation_date": 1507828936, "post_id": 46455000, "comment_id": 80377187, "body": "I was hoping that someone might be able to shed light on why min-ixml is unable to provide what i need."}], "owner": {"reputation": 93, "user_id": 1622974, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1cf3f4b883a25e204f47baa5b74a9c?s=128&d=identicon&r=PG", "display_name": "Sleepy", "link": "https://stackoverflow.com/users/1622974/sleepy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506630893, "creation_date": 1506537510, "last_edit_date": 1506630893, "question_id": 46455000, "link": "https://stackoverflow.com/questions/46455000/minixml-parsing-xml-for-attribute-value", "title": "MiniXML Parsing XML for attribute value", "body": "<p>I have a need for a compact XML parser to used in an embedded environment. Normally I would simply use XSL to extract the data that I need, but do not have the room for that. I have been looking at miniXML as a possible solution, but have ran into a problem that I am unable to resolve. </p>\n\n<p>The test file will load into a tree without a problem, and I can find a node(element) without a problem. However, when I try to get the value of an attribute for that element, miniXML returns a NULL value. Does anyone have any idea what might be wrong? </p>\n\n<pre><code>#include \"stdio.h\"\n\n#include \"mxml.h\"\n#include &lt;fcntl.h&gt;\n\n#ifndef O_BINARY\n#  define O_BINARY 0\n#endif /* !O_BINARY */\n\nint                 /* O - Exit status */\nmain(int  argc,             /* I - Number of command-line args */\n     char *argv[]) {\n    FILE *fp;\n    mxml_node_t *tree, *node;\n    const char *attribute;\n    fp = fopen(\"test2.xml\", \"r\");\n    tree = mxmlLoadFile(NULL, fp, MXML_TEXT_CALLBACK);\n    if (!tree) {\n        fputs(\"Unable to read XML file with default callback.\\n\", stderr);\n        return (1);\n    }\n    fclose(fp);\n\n    if ((node = mxmlFindPath(tree, \"SOAP-ENV:Envelope/SOAP-ENV:Body/g2swsdl:g2sRequest/g2s:g2sMessage/g2s:g2sBody\")) != NULL) {\n        fputs(\" Found g2sBody element in XML tree.\\n\", stderr);    \n    }\n\n    attribute = mxmlElementGetAttr(node, \"g2s:egmId\");  \n    fprintf(stderr, \"Attribute Text Value is %s.\\n\", attribute);\n}\n</code></pre>\n\n<p>Here is the test file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;SOAP-ENV:Envelope \n    xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \n    xmlns:g2s=\"http://www.gamingstandards.com/g2s/schemas/v1.0.3\" \n    xmlns:g2swsdl=\"http://www.gamingstandards.com/wsdl/g2s/v1.0\"&gt;\n&lt;SOAP-ENV:Body&gt;\n    &lt;g2swsdl:g2sRequest&gt;\n    &lt;g2s:g2sMessage &gt;\n     &lt;g2s:g2sBody \n                g2s:dateTimeSent=\"2017-09-08T01:21:52Z\" \n                g2s:egmId=\"ATI_B0321931\" \n                g2s:hostId=\"1\"&gt;\n     &lt;g2s:communications \n            g2s:timeToLive=\"30000\" \n            g2s:sessionMore=\"false\" \n            g2s:sessionRetry=\"false\" \n            g2s:sessionId=\"182908\" \n            g2s:sessionType=\"G2S_request\" \n            g2s:commandId=\"1\" \n            g2s:dateTime=\"2017-09-08T01:20:53Z\" \n            g2s:deviceId=\"1\"&gt;           \n        &lt;g2s:commsOnLine \n            g2s:metersReset=\"false\" \n            g2s:subscriptionLost=\"false\"\n            g2s:deviceChanged=\"false\"\n            g2s:deviceReset=\"false\"\n            g2s:egmLocation=\"http://192.169.200.11 21778\"&gt;\n        &lt;/g2s:commsOnLine&gt;\n     &lt;/g2s:communications&gt;\n     &lt;/g2s:g2sBody&gt;\n     &lt;/g2s:g2sMessage&gt;\n     &lt;/g2swsdl:g2sRequest&gt;\n     &lt;/SOAP-ENV:Body&gt;\n     &lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n"}, {"tags": ["c", "sorting", "case-sensitive", "case-insensitive"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1506531983, "post_id": 46453481, "comment_id": 79862645, "body": "MSVC has the case-insensitive <code>strncmp</code> not sure if it is standard. Aside: it can be more efficient to sort <i>pointers</i> not the data they point to. In which case you don&#39;t have to worry about string lengths."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1506532040, "post_id": 46453481, "comment_id": 79862679, "body": "Use <code>strcasecmp</code> instead of <code>strcmp</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1506532047, "post_id": 46453481, "comment_id": 79862685, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strcasecmp.html\" rel=\"nofollow noreferrer\">The <code>strcasecmp()</code> function is POSIX-standard.</a>"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 5, "creation_date": 1506532313, "post_id": 46453481, "comment_id": 79862820, "body": "Have you considered using <code>qsort</code> instead of rolling your own?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1506532704, "post_id": 46453481, "comment_id": 79863024, "body": "<a href=\"https://stackoverflow.com/q/5820810/995714\">Case Insensitive String comp in C</a>, and <a href=\"https://stackoverflow.com/q/605845/995714\">don&#39;t cast the result of <code>malloc</code> in C</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506538726, "post_id": 46453481, "comment_id": 79866160, "body": "An important consideration: Must the sort be <i>stable</i>?  With <code>&quot;abc&quot;, &quot;ABC&quot;</code>, is it OK that the resultant sorted data is of a different order?  @Sebivor <code>qsort()</code> does not provide that. OP&#39;s approach  could."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506577658, "post_id": 46453481, "comment_id": 79878282, "body": "@chux That which you&#39;re unaware of is not necessarily impossible. I suggest that you look up mechanisms to make <code>qsort</code> stable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506606104, "post_id": 46453481, "comment_id": 79896422, "body": "@Sebivor  <code>qsort()</code> itself is not specified to be stable sort of a data set D.     C11 &#167;J.1 1 identifies  the unspecified behavior of <code>qsort()</code> &quot;The order of two elements that compare as equal in an array sorted by the qsort function&quot;.  The various mechanisms for stable sort employ <i>auxiliary</i> unique members, structures or arrays A so that a <code>qsort(A)</code> results in a stable sort of <code>D</code> (the goal)."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506622489, "post_id": 46453481, "comment_id": 79906621, "body": "@chux Can you find me an <i>unstable</i> sort, in a commonly used standard library? That ought to be a pretty difficult challenge... If you can&#39;t do that, then can we agree that a stable <code>qsort</code> is like a twos complement integer representation? It may not be a guarantee, but it&#39;s <b>EXTREMELY COMMON</b> and as a result, most likely..."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506622567, "post_id": 46453481, "comment_id": 79906665, "body": "@chux In fact, if your standard library doesn&#39;t give you a stable sort and you need one, it&#39;s time to get a new standard library. Again, there&#39;s that whole &quot;choice&quot; thing we discussed earlier..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506624097, "post_id": 46453481, "comment_id": 79907532, "body": "@Sebivor    I choose not rely on <code>qsort()</code> to providing a stable sort as C does not specify that functionally.  For portably, if one needed a stable sort, I would employ another function.  Lots of sources available  for this task -- or a conditional call to the <code>qsort()</code> if that implementation provided stability. A wise programmer said &quot;I would rarely settle with anything less than the most portable, standard-compliant solution possible.&quot;"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506665100, "post_id": 46453481, "comment_id": 79919748, "body": "@chux What kind of sort would be both <b>stable</b> and <b>suitable for use with large files</b>?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1506666030, "post_id": 46453481, "comment_id": 79920091, "body": "@WeatherVane I think you meant <code>stricmp</code>; as I&#39;m sure will be made aware to you in a <i>d&#39;oh</i> moment, <code>strncmp</code> is something entirely different... ;)"}], "answers": [{"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 1, "creation_date": 1506533000, "post_id": 46453573, "comment_id": 79863161, "body": "Nice. Another significant performance enhancement might be reducing the number of calls to <code>calloc</code> by combining multiple allocations into one, though that&#39;s likely out of the scope for this question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1506539192, "post_id": 46453573, "comment_id": 79866405, "body": "<code>qsort()</code> is a good approach, yet may loose <a href=\"https://stackoverflow.com/questions/584683/stabilizing-the-standard-library-qsort\">sort stability</a>.  OP&#39;s code appears stable, if slow.  Unknown if that is important to to OP."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506577951, "post_id": 46453573, "comment_id": 79878405, "body": "I suppose <code>qsort</code> may <a href=\"https://www.google.com/search?q=define%3A+lose&amp;oq=define%3A+lose\" rel=\"nofollow noreferrer\"><i>lose</i></a> sort stability if you choose a standard library which doesn&#39;t have a stable sort. That&#39;s out of the scope for this question, though choice of standard library is nonetheless <i>a choice</i>, just like choice of stable sort function, and just like the <i>reinvent the wheel unnecessarily</i> choice. -drops mic-"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506606782, "post_id": 46453573, "comment_id": 79896949, "body": "Suggesting <code>qsort()</code> is a good idea, yet does impact OP&#39;s sort functionality.  The stability of <code>qsort()</code> is unspecified behavior.  To choose to rely on <code>qsort()</code> as stable, with a C library that provided it, reduces code portability.  Portable code would assume <code>qsort()</code> is unstable, yet if that functionality is needed, use additional code/data to insure stability."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506622697, "post_id": 46453573, "comment_id": 79906730, "body": "It&#39;s a good thing we can choose a different standard library, then, huh?!"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1506532484, "last_edit_date": 1506532484, "creation_date": 1506532138, "answer_id": 46453573, "question_id": 46453481, "link": "https://stackoverflow.com/questions/46453481/case-insensitive-sorting-in-c/46453573#46453573", "title": "Case insensitive sorting in C", "body": "<p>If your system has POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strcasecmp.html\" rel=\"nofollow noreferrer\"><code>strcasecmp</code></a> function available, replace <code>strcmp</code> with <code>strcasecmp</code> for a drop-in replacement.</p>\n\n<p>Otherwise, implement case-insensitive string comparison in your own code, and replace the call of <code>strcmp</code> with it. You can implement the required functionality by comparing strings character-by-character after converting characters on both sides to the same case (upper or lower).</p>\n\n<p><strong>Note 1:</strong> Your algorithm has an inefficiency: you allocate all your strings at max length to avoid undefined behavior when the strings are of unequal length. You can allocate strings at exact length and avoid undefined behavior, because you do not need copying the content at all: swapping string pointers will do the job, and it would be a lot faster.</p>\n\n<pre><code>if(strcasecmp(strData[j], strData[j+1]) &gt; 0) {\n    char *tmp = strData[j];\n    strData[j] = strData[j+1];\n    strData[j+1] = tmp;\n}\n</code></pre>\n\n<p><strong>Note 2:</strong> Bubble sort algorithm is pretty slow, unless the array is nearly sorted to begin with. For larger files, you can improve the speed considerably by using <a href=\"http://en.cppreference.com/w/c/algorithm/qsort\" rel=\"nofollow noreferrer\"><code>qsort</code></a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6646811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c5becc725c107cb502d2e81e520e6?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/6646811/mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506532484, "creation_date": 1506531788, "last_edit_date": 1506531870, "question_id": 46453481, "link": "https://stackoverflow.com/questions/46453481/case-insensitive-sorting-in-c", "title": "Case insensitive sorting in C", "body": "<p>I have a .txt file and I want to sort it using C programming. I have this code for sorting a .txt file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_LEN 100 // Length of each line in input file.\n\nint main(void)\n{\n    char *strFileName = \"/home/milad/Desktop/ddd.txt\";\n    char *strFileSummary = \"/home/milad/Desktop/ddd2.txt\";\n    char strTempData[MAX_LEN];\n    char **strData = NULL; // String List\n    int i, j;\n    int noOfLines = 0;\n\n    FILE * ptrFileLog = NULL;\n    FILE * ptrSummary = NULL;\n\n    if ( (ptrFileLog = fopen(strFileName, \"r\")) == NULL ) {\n        fprintf(stderr,\"Error: Could not open %s\\n\",strFileName);\n        return 1;\n    }\n    if ( (ptrSummary = fopen(strFileSummary, \"a\")) == NULL ) {\n        fprintf(stderr,\"Error: Could not open %s\\n\",strFileSummary);\n        return 1;\n    }\n\n    // Read and store in a string list.\n    while(fgets(strTempData, MAX_LEN, ptrFileLog) != NULL) {\n        // Remove the trailing newline character\n        if(strchr(strTempData,'\\n'))\n            strTempData[strlen(strTempData)-1] = '\\0';\n        strData = (char**)realloc(strData, sizeof(char**)*(noOfLines+1));\n        strData[noOfLines] = (char*)calloc(MAX_LEN,sizeof(char));\n        strcpy(strData[noOfLines], strTempData);\n        noOfLines++;\n    }\n    // Sort the array.\n    for(i= 0; i &lt; (noOfLines - 1); ++i) {\n        for(j = 0; j &lt; ( noOfLines - i - 1); ++j) {\n            if(strcmp(strData[j], strData[j+1]) &gt; 0) {\n                strcpy(strTempData, strData[j]);\n                strcpy(strData[j], strData[j+1]);\n                strcpy(strData[j+1], strTempData);\n            }\n        }\n    }\n    // Write it to outfile. file.\n    for(i = 0; i &lt; noOfLines; i++)\n        fprintf(ptrSummary,\"%s\\n\",strData[i]);\n    // free each string\n    for(i = 0; i &lt; noOfLines; i++)\n        free(strData[i]);\n    // free string list.\n    free(strData);\n    fclose(ptrFileLog);\n    fclose(ptrSummary);\n    return 0;\n} \n</code></pre>\n\n<p>This code is case sensitive and it sorts the upper-case letters first, then the lower case letters and That is not what I want. I want it to sort letters alphabetically and without any sensitivity to the case of the letter. I know about ASCII codes and why I have this problem, but I can't find a way to fix it.</p>\n\n<p>How can I change the code to make it case insensitive?</p>\n"}, {"tags": ["c", "assembly", "operating-system", "kernel", "bios"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6995009"}, "edited": false, "score": 1, "creation_date": 1506534458, "post_id": 46453398, "comment_id": 79863881, "body": "I don&#39;t think it is what you meant and i didn&#39;t know any way to make it work but, you may theoretically force compiler to produce code that you want. Otherwise, i don&#39;t think that operating system can support interrupts, task switching and lots of other features."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1506580532, "post_id": 46453398, "comment_id": 79879632, "body": "I am not sure that <a href=\"https://stackoverflow.com/questions/22794239/why-assembly-needed-to-kick-start-any-os-kernel\">Why assembly needed to kick-start any OS kernel</a> is an exact duplicate. That other question focus more on <i>initializing</i> and <i>kick-starting</i> a kernel."}], "answers": [{"comments": [{"owner": {"reputation": 2347, "user_id": 6039980, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b0b2c9fe841b1965d6bdcdd50c300c63?s=128&d=identicon&r=PG&f=1", "display_name": "user6039980", "link": "https://stackoverflow.com/users/6039980/user6039980"}, "edited": false, "score": 0, "creation_date": 1506546886, "post_id": 46453468, "comment_id": 79870262, "body": "I read the VM/sched parts of &quot;Operating Systems : Three Easy Pieces&quot; book, but I&#39;m still not getting why asm is required for these cases."}, {"owner": {"reputation": 2347, "user_id": 6039980, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b0b2c9fe841b1965d6bdcdd50c300c63?s=128&d=identicon&r=PG&f=1", "display_name": "user6039980", "link": "https://stackoverflow.com/users/6039980/user6039980"}, "edited": false, "score": 0, "creation_date": 1506547030, "post_id": 46453468, "comment_id": 79870311, "body": "The kernel is multi-tasking."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 2347, "user_id": 6039980, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b0b2c9fe841b1965d6bdcdd50c300c63?s=128&d=identicon&r=PG&f=1", "display_name": "user6039980", "link": "https://stackoverflow.com/users/6039980/user6039980"}, "edited": false, "score": 1, "creation_date": 1506547741, "post_id": 46453468, "comment_id": 79870588, "body": "Try to write your scheduler in pure C, you&#39;ll fail to do so."}, {"owner": {"reputation": 2347, "user_id": 6039980, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b0b2c9fe841b1965d6bdcdd50c300c63?s=128&d=identicon&r=PG&f=1", "display_name": "user6039980", "link": "https://stackoverflow.com/users/6039980/user6039980"}, "edited": false, "score": 0, "creation_date": 1506548231, "post_id": 46453468, "comment_id": 79870777, "body": "Ok, understood."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1506580597, "last_edit_date": 1506580597, "creation_date": 1506531737, "answer_id": 46453468, "question_id": 46453398, "link": "https://stackoverflow.com/questions/46453398/is-it-possible-to-make-a-kernel-image-without-using-asm-code/46453468#46453468", "title": "is it possible to make a kernel image without using asm code?", "body": "<p>You don't define what making a kernel in C means to you.</p>\n\n<p>You could use <code>asm</code> statements or declarations to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Using-Assembly-Language-with-C.html\" rel=\"nofollow noreferrer\">embed assembler</a> in C code (but that is \"cheating\" and is no more portable C).</p>\n\n<p>But you cannot write an entire <a href=\"https://en.wikipedia.org/wiki/Computer_multitasking\" rel=\"nofollow noreferrer\">multi-tasking</a> kernel in pure portable C, because some things (notably those manipulating tasks or <a href=\"https://en.wikipedia.org/wiki/Continuation\" rel=\"nofollow noreferrer\">continuations</a> or <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stacks</a> or <a href=\"https://en.wikipedia.org/wiki/Interrupt\" rel=\"nofollow noreferrer\">interrupts</a> - i.e. the <a href=\"https://en.wikipedia.org/wiki/Scheduling_(computing)#Process_scheduler\" rel=\"nofollow noreferrer\">scheduler</a> - or <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual memory</a>) cannot be coded in C. Notice that even <a href=\"http://man7.org/linux/man-pages/man3/longjmp.3.html\" rel=\"nofollow noreferrer\">longjmp(3)</a> cannot be implemented in pure C.</p>\n\n<p>See the <a href=\"http://osdev.org/\" rel=\"nofollow noreferrer\">OSDEV</a> wiki and read <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating Systems : Three Easy Pieces</em></a></p>\n\n<p><em>Study also the source code</em> of existing schedulers, interrupt handlers, VM subsystems, .... in <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\"><em>free software</em></a> operating systems (and ask yourself how would you recode in C the assembler code they are using). Assembler is required in them (and not only or not mostly for \"performance\" or \"readability\" reasons).</p>\n"}], "owner": {"reputation": 2347, "user_id": 6039980, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b0b2c9fe841b1965d6bdcdd50c300c63?s=128&d=identicon&r=PG&f=1", "display_name": "user6039980", "link": "https://stackoverflow.com/users/6039980/user6039980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "closed_date": 1506532476, "accepted_answer_id": 46453468, "answer_count": 1, "score": 0, "last_activity_date": 1506580597, "creation_date": 1506531545, "question_id": 46453398, "link": "https://stackoverflow.com/questions/46453398/is-it-possible-to-make-a-kernel-image-without-using-asm-code", "closed_reason": "Duplicate", "title": "is it possible to make a kernel image without using asm code?", "body": "<p>I've seen many tutorials on the net where <code>assembly language</code> is being used along with <code>C</code> in order to build a new kernel image. But I don't understand why assembly is that required, while a <code>C Compiler</code> can generate <code>asm</code> from c code.</p>\n\n<p>What's the reason of using <code>assembly</code> code for programming kernels? and how is it possible to develop a kernel under <code>C</code> without the need of writing a code in asm?</p>\n"}, {"tags": ["c", "emulation", "nfc", "rfid", "lib-nfc"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6165433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8029bd7b3e10859f423996bfa04e13d0?s=128&d=identicon&r=PG&f=1", "display_name": "Vadimchik", "link": "https://stackoverflow.com/users/6165433/vadimchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1509982743, "creation_date": 1509982743, "answer_id": 47140552, "question_id": 46453343, "link": "https://stackoverflow.com/questions/46453343/libnfc-emulate-tag-type414443b/47140552#47140552", "title": "libnfc emulate tag type4(14443b)", "body": "<ol>\n<li>You can't emulate 14443B with PN532. It is impossible on the firmware level. But you can use board, based on TI RF430CL330 or RF430CL331 for your application. I am not sure if such boards are sold somewhere, but there is no difficulty to develop custom one, there is RF430CL330 Arduino library on github. </li>\n<li>Not familiar with libnfc, but that 0xba seems to be sent from application level. If both of your cards runs libnfc-based software you could do search over the libnfc sources to see where it comes from.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 8684561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a07a4b1d65967cc52ac8621c301eda8?s=128&d=identicon&r=PG&f=1", "display_name": "user8684561", "link": "https://stackoverflow.com/users/8684561/user8684561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509982743, "creation_date": 1506531361, "last_edit_date": 1506541090, "question_id": 46453343, "link": "https://stackoverflow.com/questions/46453343/libnfc-emulate-tag-type414443b", "title": "libnfc emulate tag type4(14443b)", "body": "<p>I have 2 questions about emulate and libnfc.</p>\n\n<ol>\n<li><p>I saw on <a href=\"http://nfc-tools.org/index.php?title=PN53x\" rel=\"nofollow noreferrer\">PN53x</a> that  i can't emulate iso14443b with pn53x , why is that?  how can i emulate it on another way ?</p></li>\n<li><p>when i tried to emulate tag type 4 with the exmample that on site  with 2 reader of acr122u.</p></li>\n</ol>\n\n<p>when i put those 2 reader Close (1 for emulate 1 for read) i get on this <a href=\"https://github.com/nfc-tools/libnfc/blob/master/utils/nfc-emulate-forum-tag4.c#L141\" rel=\"nofollow noreferrer\">line</a>  <code>ba 00</code> every second.</p>\n\n<p>why is that? is that the reader looking for tag?</p>\n\n<p>I don't find the documentation of this command, what should i answer to this so i can start the conversation between the emulate and the reader?</p>\n"}, {"tags": ["c", "intel-mkl"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6312156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05883e70e4ff2c38e002496c02098db?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/6312156/aaa"}, "edited": false, "score": 0, "creation_date": 1506557466, "post_id": 46455458, "comment_id": 79873371, "body": "Thanks!. Finally I changed the matrix_size parameter (size of the array) to nByRow (size of the vector) and it worked as expected. :)"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 0, "last_activity_date": 1506539144, "creation_date": 1506539144, "answer_id": 46455458, "question_id": 46453133, "link": "https://stackoverflow.com/questions/46453133/strange-behavior-in-mkl-cblas-idamax/46455458#46455458", "title": "Strange behavior in MKL cblas_idamax", "body": "<p><code>maxPos</code> is the absolute position in the \"vector\" not the row index. And it also seems that you have one indirection too much.</p>\n\n<p>To obtain the element value you should do</p>\n\n<pre><code>// save the max value\ncolMaxs[i] = matrix[i + maxPos];\n</code></pre>\n\n<p>To obtain the row index, you'd need to compute <code>(maxPos-i)/nByRow</code> or so.</p>\n"}], "owner": {"reputation": 69, "user_id": 6312156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05883e70e4ff2c38e002496c02098db?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/6312156/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506539144, "creation_date": 1506530563, "question_id": 46453133, "link": "https://stackoverflow.com/questions/46453133/strange-behavior-in-mkl-cblas-idamax", "title": "Strange behavior in MKL cblas_idamax", "body": "<p>I am trying to use the <strong>cblas_idamax</strong> function from the <strong>Intel MKL library</strong> to get the maximum value for each column of a input matrix. In some executions I get the right answer, but in others I get wrong indexes. This is an example of my C code:</p>\n\n<pre><code>const MKL_INT nByRow = 2;\nconst MKL_INT matrix_size = nByRow*nByRow\ndouble * colMaxs = (double *)mkl_malloc(sizeof(double)*nByRow, 64);\ndouble * matrix = (double *)mkl_malloc(sizeof(double)*nByRow, 64);\n\n// matrix is CblasRowMajor\n// 1 2\n// 3 4\nmatrix[0]=1;\nmatrix[1]=2;\nmatrix[2]=3;\nmatrix[3]=4;\n\nfor(size_t i=0;i&lt;nByRow;i++){\n    // calculate the index of the max value in each column\n    maxPos = cblas_idamax(matrix_size, matrix + i , nByRow);\n\n    // save the max value\n    colMaxs[i] = (*matrix)[i + (maxPos * nByRow)];\n}\n</code></pre>\n\n<p>some times <strong>cblas_idamax</strong> returns index 1 for each column, which is correct, but other times returns 3 for each column. I supuse this is a memory-related problem. If someone has some clue about what is happening here I would be very grateful :)</p>\n\n<p>My computer is a MacBook Pro Retina early 2015</p>\n\n<p>OS: Sierra</p>\n\n<p>Processor: Intel 2.7 GHz Intel Core i5</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "timer", "linked-list", "fifo"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1506528423, "post_id": 46452434, "comment_id": 79860693, "body": "Delete <code>free(temp);</code> at <code>enq</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506528647, "post_id": 46452434, "comment_id": 79860838, "body": "Also <code>typedef struct A{</code> --&gt; <code>typedef struct QElement{</code>, <code>QElement* temp = (QElement*) malloc(sizeof(QElement)); temp = head;</code> --&gt; <code>QElement* temp = head;</code> at <code>Print</code>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1506529733, "post_id": 46452434, "comment_id": 79861474, "body": "Why are you initializing <code>temp</code> outside the for loop?  Just do <code>for (temp=head; ...</code>.  Also, there is no need to malloc memory for temp since you never use it."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1506529812, "post_id": 46452434, "comment_id": 79861519, "body": "and don&#39;t <code>malloc()</code> memory for <code>temp</code> if you reassign the pointer in the next line. That just causes a memory leak"}], "owner": {"reputation": 11, "user_id": 8684276, "user_type": "registered", "profile_image": "https://graph.facebook.com/1553289178027081/picture?type=large", "display_name": "Yi22588", "link": "https://stackoverflow.com/users/8684276/yi22588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506528195, "creation_date": 1506528195, "question_id": 46452434, "link": "https://stackoverflow.com/questions/46452434/c-fifo-queue-linked-list-with-timer", "title": "C FIFO Queue linked list with timer", "body": "<p>I need to implement the FIFO link-list queue that can layout with current elements and enqueue/dequeue/exit option for user selection.\nIf enqueue option is selected, enter a string and enqueue this string. If dequeue is selected, dequeue one element.\nIn the meantime, the program keeps dequeue one element per 5 seconds and enqueue one element (ex: a1, a2, a3,\u2026) per 10 seconds.\nAfter enqueue/dequeue to or from the link-list, show the current elements in queue and ready for the next selection.\nThe UI updates/refresh when enqueue(10sec)/dequeue(5sec)/exit. If there is no element in queue or no selection is input, no update is needed.</p>\n\n<p>Here\u2019s the data structure.</p>\n\n<pre><code>QElement* head;\nQElement* tail;\n\ntypedef struct{\n  char element[20];\n  QElement* next;\n}QElement;\n\nenq();\ndeq();\n</code></pre>\n\n<hr>\n\n<p>Example scenario:</p>\n\n<p>Current Element: N/A\nCurrent Time: 17:59:12\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):    \u00df No input\nElement: a1 is enqueued.                    \u00df 10 sec from 17:59:12</p>\n\n<p>Current Element: a1\nCurrent Time: 17:59:22\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):    \u00df No input\nElement: a1 is dequeued.                    \u00df 5 sec from 17:59:22</p>\n\n<p>Current Element: N/A\nCurrent Time: 17:59:27\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):1\nPlease enter the string: ABC\nElement: ABC is enqueued.</p>\n\n<p>Current Element: ABC\nCurrent Time: 17:59:28\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):1\nPlease enter the string: DEF\nElement: DEF is enqueued.</p>\n\n<p>Current Element: ABC->DEF\nCurrent Time: 17:59:29\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):\nElement: a2 is enqueued.                   \u00df 10 sec from 17:59:22\nElement: ABC is dequeued.                 \u00df 5 sec from 17:59:27</p>\n\n<p>Current Element: DEF->a2\nCurrent Time: 17:59:32\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):\nPlease enter the string: IJK\nElement: IJK is enqueued.</p>\n\n<p>Current Element: DEF->a2->IJK\nCurrent Time: 17:59:34\nPlease enter the option(1.Enq; 2. Deq, 3.Exit):</p>\n\n<p>my code is not completed:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;unistd.h&gt;\n\ntypedef struct A{\n    char element[20];\n    struct QElement* next;\n    }QElement;\n\nQElement* head = NULL;\nQElement* tail = NULL;\n\n\n\n\nint main()\n{\nchar data[] = \"a\";\nint i = 2;\nwhile(i--) {\n\n    if (Isitempty(head,tail)) {\n        printf(\"Current Element: N/A\\n\");\n    }\n    else {\n        Print();\n    }\n    time_t now = time(NULL);\n    printf(\"Current time: %s\",ctime(&amp;now));\n    printf(\"Please enter the option(1.Enq; 2. Deq, 3.Exit):\\n\");\n    //SetTimer(NULL, 1, 100, enq(data));\n\n    enq(data);\n    enq(data);\n}\n\n\n\n\nreturn 0;\n}\n\n\nint Isitempty(QElement* front,QElement* end) {\nif (front==NULL &amp;&amp; end == NULL) {\n    return 1;\n}\nreturn 0;\n}\n\nvoid enq(char data[]) {\nQElement* temp = (QElement*)malloc(sizeof(QElement));\n\nstrcpy(temp-&gt;element,data);\ntemp-&gt;next = NULL;\nif (head == NULL &amp;&amp; tail == NULL) {\n    head = temp;\n    tail = temp;\n\n    printf(\"Element: %s is enqueued\\n\", temp-&gt;element);\n\n\n    return;\n}\ntail-&gt;next = temp;\ntail = temp;\n\nprintf(\"Element: %s is enqueued\\n\", temp-&gt;element);\n\n\nfree(temp);\nreturn;\n}\n\nvoid Print() {\nQElement* temp = (QElement*) malloc(sizeof(QElement));\ntemp = head;\n\nfor (temp ; temp != NULL ; temp=temp-&gt;next) {\n    printf(\"Current Element: %s\",temp-&gt;element);\n    //temp = temp-&gt;next;\n}\n}\n</code></pre>\n\n<p>idk why in the Print() function, the for loop will not end? I think temp must be NULL at the end. But it doesn't work. I don't really know how to handle the timer and user select enq/deq/exit. Please can someone help me?</p>\n"}, {"tags": ["c++", "c", "qt", "variables", "global"], "answers": [{"comments": [{"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1506528056, "post_id": 46452209, "comment_id": 79860450, "body": "Would a brutal inclusion of the testcode in a number of namespaces be a solution? E.g. <code>namespace cpu1 { #include &quot;mycode.c&quot; }</code>. You would at least not be forced to change the test code and with some luck the C++ will produce logically the same code like the C compiler."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1506537499, "post_id": 46452209, "comment_id": 79865495, "body": "Yes, that is another option, if you can get the code to compile as C++. You could even wrap your C  module up in a C++ wrapper module file that declares the namespace (perhaps using a command-line macro for the name) and #includes the C file."}, {"owner": {"reputation": 45, "user_id": 5449145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/770b4000355d2b56186290e1ad4adc7c?s=128&d=identicon&r=PG&f=1", "display_name": "metty", "link": "https://stackoverflow.com/users/5449145/metty"}, "edited": false, "score": 0, "creation_date": 1506603163, "post_id": 46452209, "comment_id": 79894202, "body": "This is the first time I read about &quot;forks&quot; or &quot;monitor scripts&quot;. That&#39;s why I don&#39;t understand exactly what I can do.  I created a small test project after the example above: <a href=\"https://github.com/mettym/parallel_c_testproject\" rel=\"nofollow noreferrer\">github.com/mettym/parallel_c_testproject</a>.  In order for the error to appear, I had to increment several times in the function &quot;inc_a&quot;, with a time delay. I tried to make a brutal inclusion like this: <code>namespace cpu1 {extern &quot;C&quot;{ #include &quot;c_module.h&quot;} }</code> and calling the functions with: <code>cpu1::set_a(somevalue);</code> Unfortunately, it is not working. How would you do that in this example project?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1506608293, "post_id": 46452209, "comment_id": 79897966, "body": "You will find lots of information about process forks &quot;out there&quot; The &quot;monitor scripts&quot; idea is simply that another program, probably written in a scripting language with good threading support, simply launches multiple copies of your actual test program, and monitors and merges their output, so the problem of parallel execution is taken outside your program space."}, {"owner": {"reputation": 45, "user_id": 5449145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/770b4000355d2b56186290e1ad4adc7c?s=128&d=identicon&r=PG&f=1", "display_name": "metty", "link": "https://stackoverflow.com/users/5449145/metty"}, "edited": false, "score": 0, "creation_date": 1506668624, "post_id": 46452209, "comment_id": 79921227, "body": "These forks look a bit complicated at first glance, but seem to be a powerful tool. Thanks to your example (Gem Taylor) the sample program is now running correctly. Never crossed my mind to include a c-file via #include. It even works with a c-submodule that is only called from the c-modul. I updated the example to GitHub. Unfortunately it doesn&#39;t work on my test code, which is of course much more complicated. The functions still seem to have a problem. I still have to go behind that."}, {"owner": {"reputation": 45, "user_id": 5449145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/770b4000355d2b56186290e1ad4adc7c?s=128&d=identicon&r=PG&f=1", "display_name": "metty", "link": "https://stackoverflow.com/users/5449145/metty"}, "edited": false, "score": 0, "creation_date": 1506681167, "post_id": 46452209, "comment_id": 79928299, "body": "A problem in my code was that the header files (in C) have a <code>#ifdef HEADER_H</code>, followed by a <code>#define HEADER_H</code> in it. If there are several namespaces, I have to mark all these headers as undefined each time. Especially with library headers, this becomes immediately enormously confusing and unclean. I have to look for another solution. And I will, if I get around to it, take a closer look at the forks."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1506977924, "post_id": 46452209, "comment_id": 80022075, "body": "You could use several cpp files to include your c code multiple times, but I fear your problem with globals may also be in some of the other c modules?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1507218904, "post_id": 46452209, "comment_id": 80132907, "body": "If they are standard C headers that you know do not have globals issues, just #include them all before starting the namespaces, and your C test code then won&#39;t include them again because of the #ifdef."}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": true, "score": 1, "last_activity_date": 1506609194, "last_edit_date": 1506609194, "creation_date": 1506527468, "answer_id": 46452209, "question_id": 46451931, "link": "https://stackoverflow.com/questions/46451931/parallelizing-c-code-module-in-c-program/46452209#46452209", "title": "Parallelizing C-Code Module in C++ Program", "body": "<p>You are out of luck.\nIdeally, rewrite your testable asset so that it carries round a state struct containing all those pesky globals, and maybe you will get away with it.</p>\n\n<p>Vroomfondel also suggests that wrapping the offending C code in a namespace might hide the issue, if the code can be made to compile as C++.\nYou could create as many namespaces as you want parallel threads:</p>\n\n<pre><code> namespace TEST1\n {\n    #include \"offender.c\"\n }\n namespace TEST2\n {\n    #include \"offender.c\"\n }\n RetCode DoTest(int instance, TestId testid)\n {\n     switch (instance)\n     {\n     case 1: return TEST1::DoTest(testid);\n     case 2: return TEST2::DoTest(testid);\n     }\n     return OUT_OF_RANGE;\n }\n</code></pre>\n\n<p>If your target really uses global state and can't be changed, then you could consider using forks.</p>\n\n<p>In a fork, a complete copy of the current state is made for the child to run in, and they both resume with just enough info so you know which is the child and which is the owner. You can also set up a pipe for them to communicate with each other. When a test completes, it transmits its status and exits its forked process.</p>\n\n<p>Forks can be really good for test suites because each fork starts with a completely clean environment.</p>\n\n<p>There is a /lot/ more to getting forking right than I think is reasonable to put as an answer to this question.</p>\n\n<p>The third option is to drive the program externally, so that some monitor script or program launches multiple parallel instances that each run linearly through a subset of the test list. Ideally build in features so the monitor can dispatch tests on demand and load-balance.</p>\n"}], "owner": {"reputation": 45, "user_id": 5449145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/770b4000355d2b56186290e1ad4adc7c?s=128&d=identicon&r=PG&f=1", "display_name": "metty", "link": "https://stackoverflow.com/users/5449145/metty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 46452209, "answer_count": 1, "score": 1, "last_activity_date": 1506609194, "creation_date": 1506526544, "question_id": 46451931, "link": "https://stackoverflow.com/questions/46451931/parallelizing-c-code-module-in-c-program", "title": "Parallelizing C-Code Module in C++ Program", "body": "<p>My situation:\nI have C code running on a microcontroller. To test this code I have written a test program in C++ that checks the C-functions. Since the test functions are very slow, I wanted to do the whole thing in parallel. However, I don't have much experience.</p>\n\n<p>For example, I have a program module in C that looks like this:</p>\n\n<pre><code>/* c-code: */\nstatic int a=0;\nvoid set_a(int value){\n    a = value;\n}\nvoid inc_a(void){\n    a++;\n}\nint get_a(void){\nreturn a;\n}\n</code></pre>\n\n<p>Now I want to parallelize these functions in C++. However, I am bothered by the global variable a, which cannot be avoided in my situation.\nIn the QT environment I want to perform an \"asynchronous run\" of the function inc_a. This works but does not improve:</p>\n\n<pre><code>int foo(int somevalue){\n   set_a(somevalue);\n   inc_a();\n   return get_a();\n}\n\nint myinput = 1,myoutput;\nQFuture&lt;int&gt; future = QtConcurrent::run(foo,myinput);\nfuture.waitForFinished();\nmyoutput = future.result();\n</code></pre>\n\n<p>This is what I want:</p>\n\n<pre><code>int myinput1 = 1,myoutput1;\nint myinput2 = 8,myoutput2;\nQFuture&lt;int&gt; future1 = QtConcurrent::run(foo,myinput1);\nQFuture&lt;int&gt; future2 = QtConcurrent::run(foo,myinput2);\nfuture1.waitForFinished();\nfuture2.waitForFinished();\nmyoutput1 = future1.result();\nmyoutput2 = future2.result();\n</code></pre>\n\n<p>So my first question is (to be sure): is it correct that the variable a (in C) is now the same in both threads? If not, I have to look over my code again.If yes, how do I solve the problem as elegantly as possible? I thought of creating two C-program modules with the same functionality. However, this makes the program very maintenance-unfriendly:</p>\n\n<pre><code>/* c-code: */\nstatic int a1=0;\nvoid set_a1(int value){\n    a1 = value;\n}\nvoid inc_a1(void){\n    a1++;\n}\nint get_a1(void){\nreturn a1;\n}\n\n\nstatic int a2=0;\nvoid set_a2(int value){\n    a2 = value;\n}\nvoid inc_a2(void){\n    a2++;\n}\nint get_a2(void){\nreturn a2;\n}\n</code></pre>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["c", "visual-studio-code", "openmp"], "answers": [{"tags": [], "owner": {"reputation": 343, "user_id": 7092954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/j2Tts.png?s=128&g=1", "display_name": "Lucas Almeida Carotta", "link": "https://stackoverflow.com/users/7092954/lucas-almeida-carotta"}, "is_accepted": false, "score": 0, "last_activity_date": 1506534546, "creation_date": 1506534546, "answer_id": 46454202, "question_id": 46451831, "link": "https://stackoverflow.com/questions/46451831/why-my-omp-h-path-isnt-being-recognized/46454202#46454202", "title": "Why my omp.h path isn&#39;t being recognized?", "body": "<p>I've fixed changing the path to:</p>\n\n<pre><code>\"/usr/lib/gcc/x86_64-pc-linux-gnu/7.2.0/include/\"\n</code></pre>\n\n<p>Removing the omp.h file.</p>\n"}], "owner": {"reputation": 343, "user_id": 7092954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/j2Tts.png?s=128&g=1", "display_name": "Lucas Almeida Carotta", "link": "https://stackoverflow.com/users/7092954/lucas-almeida-carotta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1636, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1594782099, "creation_date": 1506526258, "question_id": 46451831, "link": "https://stackoverflow.com/questions/46451831/why-my-omp-h-path-isnt-being-recognized", "title": "Why my omp.h path isn&#39;t being recognized?", "body": "<p>My problems console in Visual Studio Code is showing me the following up message:</p>\n\n<pre><code>#include errors detected. Please update your includePath. InteliSense features for this translation unit\ncannot open source file \"omp.h\"\n</code></pre>\n\n<p>This message is being showed even after I linked the path of omp.h after found it with:</p>\n\n<pre><code>find /usr -name omp.h\n</code></pre>\n\n<p>My c_cpp_properties.json file:</p>\n\n<pre><code>{\n    \"configurations\": [\n    {\n        \"name\": \"Linux\",\n        \"includePath\": [\n            \"/usr/lib/gcc/x86_64-pc-linux-gnu/7.2.0/include/omp.h\",\n            \"/usr/include/c++/7.2.0\",\n            \"/usr/include/c++/7.2.0/x86_64-pc-linux-gnu\",\n            \"/usr/local/include\",\n            \"/usr/lib/clang/5.0.0/include\",\n            \"/usr/include\",\n            \"${workspaceRoot}\"\n        ],\n        \"defines\": [],\n        \"intelliSenseMode\": \"clang-x64\",\n        \"browse\": {\n            \"path\": [\n                \"/usr/lib/gcc/x86_64-pc-linux-gnu/7.2.0/include/omp.h\",\n                \"/usr/include/c++/7.2.0\",\n                \"/usr/include/c++/7.2.0/x86_64-pc-linux-gnu\",\n                \"/usr/local/include\",\n                \"/usr/lib/clang/5.0.0/include\",\n                \"/usr/include\",\n                \"${workspaceRoot}\"\n            ],\n            \"limitSymbolsToIncludedHeaders\": true,\n            \"databaseFilename\": \"\"\n        }\n    }\n    ]\n}\n</code></pre>\n\n<p>What am I missing out? And how to fix it?</p>\n"}, {"tags": ["c", "unix", "oracle11g", "ingres"], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 1594911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ba07527a46666f1e9e4b3736f4c3aa?s=128&d=identicon&r=PG", "display_name": "PaulM", "link": "https://stackoverflow.com/users/1594911/paulm"}, "is_accepted": false, "score": 0, "last_activity_date": 1506536138, "creation_date": 1506536138, "answer_id": 46454625, "question_id": 46451817, "link": "https://stackoverflow.com/questions/46451817/connecting-to-ingres-and-oracle-from-c/46454625#46454625", "title": "Connecting to Ingres and Oracle from C", "body": "<p>I can confirm they're not Ingres-specific API calls, which are things like IIapi_connect(). </p>\n\n<p>It's possible they're part of some 3rd party interface layer for which there's also an Oracle driver. Or they could be something they have written themselves and are in a library somewhere. </p>\n"}], "owner": {"reputation": 87, "user_id": 8235450, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/2c1a9df8c041ad3bddd3440682a8e8de?s=128&d=identicon&r=PG&f=1", "display_name": "user566", "link": "https://stackoverflow.com/users/8235450/user566"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506536138, "creation_date": 1506526217, "question_id": 46451817, "link": "https://stackoverflow.com/questions/46451817/connecting-to-ingres-and-oracle-from-c", "title": "Connecting to Ingres and Oracle from C", "body": "<p>My client given code is programmed in c language to connect to Ingres Database in Unix environment.\nThis code is using API's such DBconnect(), DBExecSQL,DBRollback()....</p>\n\n<p>I want to confirm that whether these API's are Ingres database specific API's?</p>\n\n<p>Can I use these API's for connecting to Oracle DB.</p>\n\n<p>If I cannot use those same API's to connect to Oracle DB, how to connect to Oracle Database from c program?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "yacc", "lex"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1506526451, "post_id": 46451503, "comment_id": 79859375, "body": "Your <code>main</code> does nothing except return - how are you expecting it to call the lexer code?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1506526899, "post_id": 46451503, "comment_id": 79859687, "body": "The first rule would be to <i>carefully compare your code with the examples</i>, even before posting to Stack Overflow."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8683981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc703c0852e6cd2a87ca12c97daa37?s=128&d=identicon&r=PG&f=1", "display_name": "Tex", "link": "https://stackoverflow.com/users/8683981/tex"}, "edited": false, "score": 0, "creation_date": 1506526673, "post_id": 46451851, "comment_id": 79859533, "body": "First off, thank you for your reply :)     Removed the quotations from &quot;hey&quot; and still gives nothing back. Removed the stdio.h and tried again, still nothing."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "reply_to_user": {"reputation": 19, "user_id": 8683981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc703c0852e6cd2a87ca12c97daa37?s=128&d=identicon&r=PG&f=1", "display_name": "Tex", "link": "https://stackoverflow.com/users/8683981/tex"}, "edited": false, "score": 0, "creation_date": 1506527076, "post_id": 46451851, "comment_id": 79859820, "body": "I missed the lack of call to <code>yylex()</code> too ... it happens"}], "tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": false, "score": 1, "last_activity_date": 1506527267, "last_edit_date": 1506527267, "creation_date": 1506526300, "answer_id": 46451851, "question_id": 46451503, "link": "https://stackoverflow.com/questions/46451503/why-is-my-lex-output-exe-not-returning-any-responds-failing-at-hello-world/46451851#46451851", "title": "Why is my lex output .exe not returning any responds? (Failing at hello world)", "body": "<p>It's the double quotes in the <code>\"hey\"</code> in your <em>.l</em> file they actually don't mean <code>\"hey\"</code> they mean <code>hey</code> so if you change your input file to just say <em>hey</em> rather than <em>\"hey\"</em> your code should work. If you want to parse <code>\"</code> then your rule should be: <code>\"\\\"hey\\\"\"</code> </p>\n\n<p>Also <code>lex</code> should auto include <code>stdio.h</code> so you probably don't need it.</p>\n\n<p>LOL you forgot to call yylex(); </p>\n\n<p>So:</p>\n\n<pre><code>%option noyywrap\n%%\n\n\"hey\"       printf(\"hello!\");\n\n%%\n\nint main()\n{\n    yylex();\n    return 0;\n}\n</code></pre>\n\n<h2>Important subtlety</h2>\n\n<p>You will see this behaviour occur and you may not notice it right away but </p>\n\n<p>Your <em>original</em> code will give you and output. The match <em>will</em> occur even with <em>\\\"hey\\\"</em> output and you will get:</p>\n\n<blockquote>\n  <p>\"hello!\"</p>\n</blockquote>\n\n<p>Notice the <code>\"</code>'s.</p>\n\n<p>That's because lex injects a <em>default</em> rule for any character matching to just spit it back out, and because your <code>\"hey\"</code> rule matches <code>hey</code> and you have <code>\"</code>'s around the input the quotes come out in the <code>\"hello!\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 8683981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc703c0852e6cd2a87ca12c97daa37?s=128&d=identicon&r=PG&f=1", "display_name": "Tex", "link": "https://stackoverflow.com/users/8683981/tex"}, "edited": false, "score": 0, "creation_date": 1506527030, "post_id": 46452036, "comment_id": 79859790, "body": "I am slightly ashamed right now... But yeah, this fixed it :P"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1506526841, "creation_date": 1506526841, "answer_id": 46452036, "question_id": 46451503, "link": "https://stackoverflow.com/questions/46451503/why-is-my-lex-output-exe-not-returning-any-responds-failing-at-hello-world/46452036#46452036", "title": "Why is my lex output .exe not returning any responds? (Failing at hello world)", "body": "<p>Your <code>main</code> does nothing - you need to call the lexer.</p>\n\n<pre><code>int main()\n{\n    yylex();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8683981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfcc703c0852e6cd2a87ca12c97daa37?s=128&d=identicon&r=PG&f=1", "display_name": "Tex", "link": "https://stackoverflow.com/users/8683981/tex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1508172988, "creation_date": 1506525256, "last_edit_date": 1508172988, "question_id": 46451503, "link": "https://stackoverflow.com/questions/46451503/why-is-my-lex-output-exe-not-returning-any-responds-failing-at-hello-world", "title": "Why is my lex output .exe not returning any responds? (Failing at hello world)", "body": "<p>I am trying to understand lex/yacc and currently I am failing at hello world. I probably messed something up, somewhere, but I can't seem to find it.</p>\n\n<p>Also, I am not experienced with C language or with lex/flex/yacc/bison so this is all new to me.</p>\n\n<p>test.l file;</p>\n\n<pre><code>%option noyywrap\n\n%{\n#include &lt;stdio.h&gt;\n%}\n\n%%\n\n\"hey\"       printf(\"hello!\");\n\n%%\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>I compile this on windows, with the commands;</p>\n\n<pre><code>lex test.l\n</code></pre>\n\n<p>This returns lex.yy.c file without errors or warnings.\nI then compile with;</p>\n\n<pre><code>cc lex.yy.c\n</code></pre>\n\n<p>Which without errors or warnings, creates the a.exe as supposed too.\nWhen i then run the file with input from another file;</p>\n\n<pre><code>a.exe &lt; input\n</code></pre>\n\n<p>It returns nothing.</p>\n\n<p>Input file;</p>\n\n<pre><code>\"hey\"\n</code></pre>\n\n<p>Any information is welcome, since every single guide I found either creates errors (when literally copy pasted, even after clean install and guided-install) or is simply outdated or listed for \"windows\" while it uses commands that are non-windows >.&lt;</p>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1506524560, "post_id": 46451225, "comment_id": 79858094, "body": "<code>&quot;%c %d&quot;</code> --&gt; <code>&quot; %c %d&quot;</code>, add space."}, {"owner": {"reputation": 9, "user_id": 8683848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wcmc5BIcp4g/AAAAAAAAAAI/AAAAAAAAF_8/WpE3-ptmFg4/photo.jpg?sz=128", "display_name": "vuppala srikar", "link": "https://stackoverflow.com/users/8683848/vuppala-srikar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506524892, "post_id": 46451225, "comment_id": 79858319, "body": "there is a space"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1506524940, "post_id": 46451225, "comment_id": 79858359, "body": "Add space before <code>%c</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506528275, "post_id": 46451225, "comment_id": 79860590, "body": "Kudos for testing the return value of <code>fscanf()</code> in <code>fscanf(fptr,&quot;%c %d&quot;,&amp;c,&amp;val))==2</code>.  Certainly helps narrow the problem quickly."}, {"owner": {"reputation": 9, "user_id": 8683848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wcmc5BIcp4g/AAAAAAAAAAI/AAAAAAAAF_8/WpE3-ptmFg4/photo.jpg?sz=128", "display_name": "vuppala srikar", "link": "https://stackoverflow.com/users/8683848/vuppala-srikar"}, "edited": false, "score": 0, "creation_date": 1506713149, "post_id": 46451225, "comment_id": 79945890, "body": "the answer for the solution is to place a \\n after reading %c %d  i.e., fscanf(fptr,&quot;%c %d\\n&quot;,&amp;c,&amp;val)==2"}], "owner": {"reputation": 9, "user_id": 8683848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wcmc5BIcp4g/AAAAAAAAAAI/AAAAAAAAF_8/WpE3-ptmFg4/photo.jpg?sz=128", "display_name": "vuppala srikar", "link": "https://stackoverflow.com/users/8683848/vuppala-srikar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1506525009, "answer_count": 0, "score": 0, "last_activity_date": 1506524883, "creation_date": 1506524463, "last_edit_date": 1506524883, "question_id": 46451225, "link": "https://stackoverflow.com/questions/46451225/fscanf-issue-while-reading-input-from-text-file", "closed_reason": "Duplicate", "title": "fscanf issue while reading input from text file", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\nFILE *fptr;\nint val;\nchar filename[100], c;\nprintf(\"Enter the filename to open \\n\");\nscanf(\"%s\", filename);\nfptr = fopen(filename, \"r\");\nif (fptr == NULL){\n    printf(\"error\\n\");\n    exit(0);\n}\n\nwhile((fscanf(fptr,\"%c %d\",&amp;c,&amp;val))==2)\n{\n    printf(\"%c %d\\n\",c,val);\n}\nfclose(fptr);\nreturn 0;\n}\n</code></pre>\n\n<p>I am trying to scan values from a text file using fscanf but i am able to read only one value even though i kept a loop.<br>\nsample input:</p>\n\n<pre><code>d 7\ni 10\ni 5\ni 10\nd 10\n</code></pre>\n\n<p>my output is:</p>\n\n<pre><code>d 7\n</code></pre>\n"}, {"tags": ["c", "windows"], "owner": {"reputation": 390, "user_id": 8071695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/DyYXS.jpg?s=128&g=1", "display_name": "Igor Pavkovic", "link": "https://stackoverflow.com/users/8071695/igor-pavkovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1506565822, "answer_count": 0, "score": 0, "locked_date": 1506781270, "last_activity_date": 1506535870, "creation_date": 1506524176, "last_edit_date": 1506525400, "question_id": 46451112, "link": "https://stackoverflow.com/questions/46451112/how-to-get-windows-username-and-use-it-in-a-system-function", "closed_reason": "Duplicate", "title": "How to get Windows username and use it in a system function", "body": "<p>I'd like to know how can I get someones Windows username, then store it somewhere so it can be used in a system function like this:</p>\n\n<p><code>system(\"netsh wlan show profile their_wifi_name key=clear &gt; C:\\\\Users\\\\their_username\\\\Desktop\\\\key.txt\");</code></p>\n\n<p>What do I need to use, something like <code>popen()</code> or? Is there even a function/way to to this?</p>\n\n<p>I'm not looking to print out the Windows username but to use it in another function.</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 467, "user_id": 2127202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0767d3ce64cd726e01990713b307517?s=128&d=identicon&r=PG", "display_name": "pazqo", "link": "https://stackoverflow.com/users/2127202/pazqo"}, "edited": false, "score": 0, "creation_date": 1506523965, "post_id": 46450989, "comment_id": 79857695, "body": "That&#39;s not recursion! Just a for-loop"}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "reply_to_user": {"reputation": 467, "user_id": 2127202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0767d3ce64cd726e01990713b307517?s=128&d=identicon&r=PG", "display_name": "pazqo", "link": "https://stackoverflow.com/users/2127202/pazqo"}, "edited": false, "score": 2, "creation_date": 1506524018, "post_id": 46450989, "comment_id": 79857732, "body": "@pazqo he asked for recursion though."}], "answers": [{"tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": false, "score": 2, "last_activity_date": 1506524792, "last_edit_date": 1506524792, "creation_date": 1506524268, "answer_id": 46451145, "question_id": 46450989, "link": "https://stackoverflow.com/questions/46450989/how-to-call-the-same-function-3-times-in-c/46451145#46451145", "title": "how to call the same function 3 times in C?", "body": "<p>This code works. Make sure you ask questions if you do not understand, and make sure you understand the code as this is your curriculum...    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid smiley_print(int times_to_call)\n{\n    printf(\"  * * * *\\n\");\n    printf(\"*          *\\n\");\n    printf(\"    .    .\\n\");\n    printf(\"*          *\\n\");\n    printf(\"*    \\\\_/   *\\n\");\n    printf(\"*          *\\n\");\n    printf(\"  * * * *\\n\");\n    getchar();\n    if(--times_to_call) smiley_print(times_to_call);\n}\n\nint main()\n{\n    smiley_print(3);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1506524450, "creation_date": 1506524450, "answer_id": 46451219, "question_id": 46450989, "link": "https://stackoverflow.com/questions/46450989/how-to-call-the-same-function-3-times-in-c/46451219#46451219", "title": "how to call the same function 3 times in C?", "body": "<p>To make a recursive function executing <code>doStuff()</code> <code>N</code> times:</p>\n\n<pre><code>void repeatDoStuff(int N)\n{\n    if (N &gt; 0)\n    {\n        doStuff();\n        repeatDoStuff(N-1);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/Y0p4Ol\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1506524672, "post_id": 46451239, "comment_id": 79858171, "body": "Wish I could give more than +1 for teaching a man to fish.  If he takes the time to understand your answer, he&#39;ll understand a lot more about functions and recursion."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 0, "creation_date": 1506524699, "post_id": 46451239, "comment_id": 79858192, "body": "@ScottMermelstein Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1506528009, "post_id": 46451239, "comment_id": 79860418, "body": "Corner: <code>factorial(0)</code> is <a href=\"https://math.stackexchange.com/questions/25333/why-does-0-1\">well defined</a>  Suggest <code>assert(n &gt;= 0); if (n &lt;= 1) ...</code>"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1506587396, "post_id": 46451239, "comment_id": 79883688, "body": "@chux I thought about that when I first wrote the answer and chose not to mention it, but on balance and with your link, I think it works better, especially as it more accurately reflects my description of how to solve the questioner&#39;s problem."}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 10, "last_activity_date": 1506587205, "last_edit_date": 1506587205, "creation_date": 1506524509, "answer_id": 46451239, "question_id": 46450989, "link": "https://stackoverflow.com/questions/46450989/how-to-call-the-same-function-3-times-in-c/46451239#46451239", "title": "how to call the same function 3 times in C?", "body": "<p>For recursion you need two things:</p>\n\n<ol>\n<li>A solution where the function calls itself but with a \"simpler\" version of the problem</li>\n<li>A base case where no recursion occurs</li>\n</ol>\n\n<p>The usual example is <code>factorial</code>. <code>n!</code> is <code>n * (n - 1)!</code> for all numbers greater than 0 (that's the first part) and <a href=\"https://math.stackexchange.com/a/25336/428865\"><code>0!</code> is defined as 1</a> (that's the second part).</p>\n\n<pre><code>int factorial(int n) \n{\n    assert(n &gt;= 0); // Otherwise, trouble!\n    if (n == 0)\n    {\n        return 1;\n    }\n    else\n    {\n        return n * factorial(n - 1);\n    }\n}\n</code></pre>\n\n<p>So to print your face three times, first print it twice and then print it again. To generalise, for n > 0, print your face n - 1 times and then print it again. And for n = 0, do nothing.</p>\n\n<p>So your recursive function should take a parameter <code>n</code> that tells it how many times to print the face. If <code>n</code> is greater than 0, it should recursively call itself to print the face <code>n - 1</code> times and then print the face again.</p>\n\n<p>The exact code, I'll leave to you.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1506607436, "last_edit_date": 1506607436, "creation_date": 1506531561, "answer_id": 46453403, "question_id": 46450989, "link": "https://stackoverflow.com/questions/46450989/how-to-call-the-same-function-3-times-in-c/46453403#46453403", "title": "how to call the same function 3 times in C?", "body": "<blockquote>\n  <p>how to call the same function 3 times in C? (using recursion)</p>\n</blockquote>\n\n<p>Recursion rightly receives a bad reputation when a simple loop would suffice.</p>\n\n<p>Consider the recursive solution below which has a maximum recursive depth of <code>O(n)</code></p>\n\n<pre><code>void print_face(int n) {  // recurse\n  if (n &gt; 0) {\n    printf(A_string_representing_a_face);\n    print_face(n-1);\n  }\n}\n\n// vs.\n\nvoid print_face(int n) {  // no recursion\n  while (n &gt; 0) {\n    n--; \n    printf(A_string_representing_a face);\n  }\n}\n\n//usage\nprint_face(3);\n</code></pre>\n\n<hr>\n\n<p>Some compilers will identify the pattern as <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\">tail-recursive</a>  and emit similar code as the loop.  Other compilers will not see this and incur potentially excessively deep recursion.  <a href=\"https://stackoverflow.com/\">Stack Overflow</a></p>\n\n<p><strong>Good recursion:</strong></p>\n\n<ol>\n<li>Detects when no more recursion is needed like <code>if (n == 0)</code></li>\n<li>Makes for <em>significantly</em> smaller tasks.</li>\n</ol>\n\n<p>Consider the recursive solution below which has a maximum recursive depth of <code>O(log2(n))</code>.  If <code>n</code> was 3 million, instead of a recursive depth of 3 million as above, the depth would be 22.  It is this <em>significantly</em> smaller task that makes for a good recursion solution - when a simply loop does not suffice.</p>\n\n<pre><code>void print_face(int n) {  // recurse\n  if (n &gt; 0) {\n    printf(A_string_representing_a_face);\n\n    n--; \n    print_face(n/2);\n    print_face(n - n/2);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8683911, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211939417574130/picture?type=large", "display_name": "David Scarpa", "link": "https://stackoverflow.com/users/8683911/david-scarpa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 1, "answer_count": 4, "score": -1, "last_activity_date": 1506607436, "creation_date": 1506523845, "last_edit_date": 1506524121, "question_id": 46450989, "link": "https://stackoverflow.com/questions/46450989/how-to-call-the-same-function-3-times-in-c", "title": "how to call the same function 3 times in C?", "body": "<p>I'm trying to figure out how to get a function (in my case a smiley face i made) to call itself 3 times using recursion. My teacher was not thorough in his teaching of it, and I do not know what to put in the code to make the function repeat via this method. My code looks like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"  * * * *\\n\");\n    printf(\"*          *\\n\");\n    printf(\"    .    .\\n\");\n    printf(\"*          *\\n\");\n    printf(\"*    \\\\_/   *\\n\");\n    printf(\"*          *\\n\");\n    printf(\"  * * * *\\n\");\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "malloc", "free", "sbrk"], "comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1506525456, "post_id": 46450968, "comment_id": 79858698, "body": "Without knowing for sure, this is likely because of what the program break represents for the operating system. The break represents the end of the initialised parts of the data segment of the program. After a free the OS might consider the area initialised and not reduce the decrement the program break."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1506527385, "post_id": 46450968, "comment_id": 79860000, "body": "<code>malloc</code> often uses <code>mmap</code> and prefer to re-use previously <code>free</code>-d memory"}, {"owner": {"reputation": 585, "user_id": 4617334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/GwUnw.jpg?s=128&g=1", "display_name": "Madhusoodan P", "link": "https://stackoverflow.com/users/4617334/madhusoodan-p"}, "edited": false, "score": 0, "creation_date": 1507033341, "post_id": 46450968, "comment_id": 80042884, "body": "According to my understanding the initially data-segment size is small(may also be of size zero). But when you <code>malloc</code> if memory&#39;s not available in program&#39;s data-segment then CRT uses the sbrk/brk to enlarge its data-segment. And <code>free</code> in CRT may be implemented so that it doesn&#39;t return/free small chunks back to OS as to reduce the overhead (as system calls have more overhead compared to these CRT internals)."}], "owner": {"reputation": 1, "user_id": 8597550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-g1uIMhW26iU/AAAAAAAAAAI/AAAAAAAAALM/NJM2RDOh0jM/photo.jpg?sz=128", "display_name": "Kartik Kalaghatgi", "link": "https://stackoverflow.com/users/8597550/kartik-kalaghatgi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "closed_date": 1506526954, "answer_count": 0, "score": 0, "last_activity_date": 1506526329, "creation_date": 1506523777, "last_edit_date": 1506526329, "question_id": 46450968, "link": "https://stackoverflow.com/questions/46450968/why-free-doesnt-decrease-programs-data-space", "closed_reason": "Duplicate", "title": "why free() doesn&#39;t decrease programs data space", "body": "<p>My understanding is that malloc internally uses sbrk() and sbrk(0) gives pointer to current location of the program break. then according to following code :-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\nint main()\n{\n    printf(\"Before allocation :- %u\\n\",sbrk(0));\n\n    int *ptr = malloc(sizeof(int)*100);\n    printf(\"After Allocation of 400Bytes :- %u\\n\",sbrk(0));\n\n    free(ptr);\n    printf(\"After free() :- %u\\n\",sbrk(0));\n\n    return 0;\n}\n</code></pre>\n\n<p>output is :</p>\n\n<pre><code>Before allocation :- 37367808\nAfter Allocation of 400Bytes :- 37502976\nAfter free() :- 37502976\n</code></pre>\n\n<p>But after call of free() it should print again <code>37367808</code> instead it is printing <code>37502976</code>.</p>\n"}, {"tags": ["c", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1506522407, "post_id": 46450391, "comment_id": 79856564, "body": "May not be the problem, but you need to initialise things esp <code>found</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1506522477, "post_id": 46450391, "comment_id": 79856595, "body": "You might like to read this: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 445, "user_id": 2723947, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100004556739052/picture?type=large", "display_name": "mualloc", "link": "https://stackoverflow.com/users/2723947/mualloc"}, "edited": false, "score": 0, "creation_date": 1506522660, "post_id": 46450391, "comment_id": 79856728, "body": "If key is not in the list, when ptr equals to tail in while loop check, in the body of the while loop  ptr = ptr-&gt;next will cause ptr to be NULL and in the next iteration, ptr-&gt;data will cause segmentation fault since you would be trying to derefence a NULL pointer."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1506523290, "post_id": 46450391, "comment_id": 79857198, "body": "<code>while(ptr-....</code> - <code>ptr</code> could be null!"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1506522517, "creation_date": 1506522517, "answer_id": 46450501, "question_id": 46450391, "link": "https://stackoverflow.com/questions/46450391/segmentation-fault-in-singly-linked-list/46450501#46450501", "title": "segmentation fault in singly linked list", "body": "<p>When you try to delete a node first thing you do, the list is empty and inside the <code>delete</code> function <code>*head</code> (notice the dereference!) is a null pointer.</p>\n\n<p>Since <code>*head</code> is a null pointer, so will <code>ptr</code> be, and you then dereference <code>ptr</code> without checking for that.</p>\n\n<p>You might want to modify the initial check to be <code>head == NULL || *head == NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 7235297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xVFW.jpg?s=128&g=1", "display_name": "Quentin Laill&#233;", "link": "https://stackoverflow.com/users/7235297/quentin-laill%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1506523052, "last_edit_date": 1506523052, "creation_date": 1506522733, "answer_id": 46450566, "question_id": 46450391, "link": "https://stackoverflow.com/questions/46450391/segmentation-fault-in-singly-linked-list/46450566#46450566", "title": "segmentation fault in singly linked list", "body": "<p><code>whenever the first letter is 'd' I get a segmentation fault.</code></p>\n\n<p>If the first letter is D,  your list is still empty when you call <code>delete</code>.</p>\n\n<p>In your first <code>if</code>, you need to dereference your pointer, as @SomeProgrammerDude mentionned.</p>\n"}], "owner": {"reputation": 29, "user_id": 6212035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1261476747213699/picture?type=large", "display_name": "M Mar", "link": "https://stackoverflow.com/users/6212035/m-mar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506523052, "creation_date": 1506522189, "question_id": 46450391, "link": "https://stackoverflow.com/questions/46450391/segmentation-fault-in-singly-linked-list", "title": "segmentation fault in singly linked list", "body": "<p>I am currently writing a program that implements a linked list to maintain a list on integers in sorted order.  The program reads the integers from a file in the format of</p>\n\n<pre><code>d [\\t] 7\ni [\\t] 8\ni [\\t] 7\ni [\\t] 10\n</code></pre>\n\n<p>with 'd' meaning delete from the list and 'i' inserting into the list, with no repeat integers allowed.  This is the code I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Node{\n        int data;\n        struct Node* next;\n};\n\nint delete(struct Node** head, int key){\n        if(head == NULL)\n        {\n                return -1;\n        }\n        struct Node* ptr = *head;\n        struct Node* prev = NULL;\n\n        while(ptr-&gt;data != key &amp;&amp; ptr-&gt;next!=NULL)\n        {\n                prev = ptr;\n                ptr = ptr-&gt;next;\n        }\n        if(ptr-&gt;data == key)\n        {\n                if(prev)\n                {\n                        prev-&gt;next = ptr-&gt;next;\n                }\n                else\n                {\n                        *head = ptr-&gt;next;\n                }\n                free(ptr);\n                return key;\n        }\nreturn -1;\n}\n\nint insert(struct Node** head, struct Node* newNode){\n        struct Node* ptr;\n        if(*head == NULL || (*head)-&gt;data &gt;= newNode-&gt;data)\n        {\n        newNode-&gt;next = *head;\n                *head = newNode;\n        }\n        else\n        {\n                ptr = *head;\n                while(ptr-&gt;next != NULL &amp;&amp; ptr-&gt;next-&gt;data &lt; newNode-&gt;data)\n                {\n                        ptr = ptr-&gt;next;\n                }\n                newNode-&gt;next = ptr-&gt;next;\n                ptr-&gt;next = newNode;\n        }\n        return 0;\n}\n\nint main(int argc, char* argv[]){\n        FILE *fp = fopen(argv[1], \"r\");\n        int num, found;\n        char c;\n        struct Node* head = NULL;\n struct Node* ptr = head;\n        while(fscanf(fp, \"%c\\t%d\\n\", &amp;c, &amp;num)!=EOF)\n        {\n                for(ptr=head; ptr!=NULL; ptr=ptr-&gt;next)\n                {\n                        if(ptr-&gt;data == num)\n                        {\n                                found = 1;\n                        }\n                }\n                if(found != 1)\n                {\n                        if(c == 'i')\n                        {\n                                struct Node *newNode = (struct Node*)malloc(sizeof(struct Node));\n                                newNode-&gt;data = num;\n                                newNode-&gt;next = NULL;\n                                insert(&amp;head, newNode);\n                        }\n                }\n                if(c == 'd')\n  delete(&amp;head, num);\n                }\n                found = 0;\n        }\n\n        for(ptr=head; ptr!=NULL; ptr=ptr-&gt;next)\n        {\n                printf(\"%d \", ptr-&gt;data);\n        }\nreturn 0;\n}\n</code></pre>\n\n<p>It works fine when the first letter is 'i', but whenever the first letter is 'd' I get a segmentation fault. Why is this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1506521550, "post_id": 46450093, "comment_id": 79855950, "body": "The seg fault means there is an error in the program - or the input depending on how you look at things. I can&#39;t guess the error without seeing the code"}, {"owner": {"reputation": 1229, "user_id": 2045438, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/lsTYn.png?s=128&g=1", "display_name": "Daemon", "link": "https://stackoverflow.com/users/2045438/daemon"}, "edited": false, "score": 0, "creation_date": 1506523679, "post_id": 46450093, "comment_id": 79857493, "body": "Segmentation fault occurs during run time, so compiler won&#39;t throw any errors if code syntax is proper. You need to add some code of what you tried."}], "answers": [{"tags": [], "owner": {"reputation": 2214, "user_id": 806808, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c0b2b7f56ea26e55834aeed7a16e989?s=128&d=identicon&r=PG", "display_name": "Andrey Belykh", "link": "https://stackoverflow.com/users/806808/andrey-belykh"}, "is_accepted": false, "score": -1, "last_activity_date": 1506521453, "creation_date": 1506521453, "answer_id": 46450126, "question_id": 46450093, "link": "https://stackoverflow.com/questions/46450093/program-not-in-work-segmentation-fault-is-occur/46450126#46450126", "title": "Program not in work : Segmentation fault is occur", "body": "<p>A segmentation fault (aka segfault) is a common condition that causes programs to crash. Segmentation faults are caused by a program trying to read or write an illegal memory location.</p>\n"}], "owner": {"reputation": 1, "user_id": 8483027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3963e0720e8de094317e4d710daa93d8?s=128&d=identicon&r=PG&f=1", "display_name": "Poonam.G", "link": "https://stackoverflow.com/users/8483027/poonam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1506522292, "answer_count": 1, "score": -6, "last_activity_date": 1506521453, "creation_date": 1506521358, "question_id": 46450093, "link": "https://stackoverflow.com/questions/46450093/program-not-in-work-segmentation-fault-is-occur", "closed_reason": "Duplicate", "title": "Program not in work : Segmentation fault is occur", "body": "<p>FACE faculty told us that sacnf, get() , etc like function don't work in TCS campus commune portal so instead of scanf() should used atoi() ,atof(), function which is in \"stdlib\" library, so I tried to run simple addition program on gcc compiler so there is Segmentation fault whereas there is no error in program.\nWhat is this Segmentation fault?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 2, "creation_date": 1506521339, "post_id": 46450042, "comment_id": 79855794, "body": "Can you please remove the lines of code not related to the question? We don&#39;t need to see all your file opening logic etc"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1506521531, "post_id": 46450042, "comment_id": 79855937, "body": "we didn&#39;t see the code of <code>get_indexrad</code>. If that function returns an out-of-bounds index, that would explain a lot. And yes, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be nice."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 7, "creation_date": 1506521548, "post_id": 46450042, "comment_id": 79855948, "body": "You&#39;re using <code>%i</code> to scan the first column, but it appears to be floating point, too."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1506521708, "post_id": 46450042, "comment_id": 79856061, "body": "@SteveSummit you just found the issue: <code>scanf</code> only succeeds scanning the integer data and stops there... some strange things occur then alterning 0 and decimal part of the float to read??"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1506521954, "post_id": 46450042, "comment_id": 79856252, "body": "the best way to avoid this is to enable <code>-Wall</code> (<code>-Wformat</code>) when compiling with gcc."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1506521966, "post_id": 46450042, "comment_id": 79856261, "body": "Always check the return value of <code>fscanf()</code>, it can fail (as it just demonstrated)."}, {"owner": {"reputation": 43, "user_id": 6696554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d894cc065228bd64c52cf5f133e532?s=128&d=identicon&r=PG&f=1", "display_name": "fdzglln", "link": "https://stackoverflow.com/users/6696554/fdzglln"}, "edited": false, "score": 0, "creation_date": 1506522489, "post_id": 46450042, "comment_id": 79856605, "body": "@SteveSumit it seems that you found it, I didnt realized on the input document being wrong"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506522611, "post_id": 46450042, "comment_id": 79856694, "body": "@fdzglln By following <a href=\"https://stackoverflow.com/questions/46450042/simple-program-gets-wrong-data-with-fscanf-from-all-files#comment79856261_46450042\">@unwind</a> advice, you will uncover more problems more rapidly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506523689, "post_id": 46450042, "comment_id": 79857502, "body": "BTW: Good use of <code>sizeof(ref_type[0])</code> idiom in <code>double (*d_r)[N]= malloc(sizeof(d_r[0])*DataFiles);</code>.  Could have used that later as <code>irad =   calloc(DataFiles*N, sizeof *irad);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506555028, "post_id": 46450042, "comment_id": 79872794, "body": "for ease of readability and understanding: 1) consistently indent the code.  Indent after every opening brace.  unindent before every closing brace.  Suggest each indent level be 4 spaces.  2) insert an appropriate space inside parens, around C operators, after commas, after semicolons.  3)  follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506555259, "post_id": 46450042, "comment_id": 79872855, "body": "when calling any of the heap allocation functions: (calloc, malloc, realloc) 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc. 3) variable names should indicate <code>content</code> or <code>usage</code> (or better, both)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506555420, "post_id": 46450042, "comment_id": 79872885, "body": "the posted code contains several &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis. I.E. 5, 100, 360, 6000.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using <code>#define</code> statements or an <code>enum</code> statement to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506555760, "post_id": 46450042, "comment_id": 79872958, "body": "this line: <code>double (*d_r)[N]= malloc(sizeof(d_r[0])*DataFiles);</code> is saying that <code>d_r[]</code> is an array of pointers to doubles and that there are <code>N</code> pointers.  In C, the valid index into an array is in the range of 0...(number of elements in array -1).  So setting the &#39;N&#39; element results in undefined behavior as the &#39;N&#39; element is one past the end of the array.  Also, none of those pointers have been initialized and the initial pointer to the array of pointers: <code>d_r</code> has not been initialized"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506556478, "post_id": 46450042, "comment_id": 79873117, "body": "this line: <code>fscanf(conf,&quot;%i %lf&quot;, &amp;j, &amp;irad[index]);</code> seems to be setting pointers in the array of pointers: <code>irad[]</code>  And it is setting the variable <code>j</code>.  However, <code>j</code> is never used in the loop where it is being repeatedly set.  And how is some external file going to know where some pointer should be assigned to point,  If the code really wants to ignore every even numbered data item in the input file, then suggest using some some input format specifier that will consume leading white space and ignore the data"}], "owner": {"reputation": 43, "user_id": 6696554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d894cc065228bd64c52cf5f133e532?s=128&d=identicon&r=PG&f=1", "display_name": "fdzglln", "link": "https://stackoverflow.com/users/6696554/fdzglln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506521222, "creation_date": 1506521222, "question_id": 46450042, "link": "https://stackoverflow.com/questions/46450042/simple-program-gets-wrong-data-with-fscanf-from-all-files", "title": "Simple program gets wrong data with fscanf from all files", "body": "<p>I have a simple code that just reads a file with a format like</p>\n\n<pre><code>0.000000 17.437500\n1.000000 17.441406\n2.000000 17.451172\n3.000000 17.458984\n4.000000 17.468750\n5.000000 17.486328\n</code></pre>\n\n<p>and have to work with this data. My problem is that even just after scanning the data the array doesnt have the same numbers as the text file, instead has something like:</p>\n\n<pre><code>0.000000 0.000000\n1.000000 0.480469\n2.000000 0.000000\n3.000000 0.482422\n4.000000 0.000000\n5.000000 0.486328\n6.000000 0.000000\n7.000000 0.490234\n8.000000 0.000000\n9.000000 0.498047\n10.000000 0.000000\n11.000000 0.507812\n12.000000 0.000000\n13.000000 0.515625\n14.000000 0.000000\n15.000000 0.527344\n16.000000 0.000000\n</code></pre>\n\n<p>Which to me seems pretty weird, with all even numbers being always 0, I thought it could be a clue but still can't find the problem.</p>\n\n<p>Here's my code, I have already been working with fscanf and after 2 days hunting for the source of error and looking at the internet I still could'nt find the problem.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;fftw3.h&gt;\n#include &lt;gsl/gsl_math.h&gt;\n#include &lt;gsl/gsl_interp2d.h&gt;\n#include &lt;gsl/gsl_spline2d.h&gt;\n\nconst int   N=360; // How many pairs of values in the file\nconst int   DataFiles=6000;  // How many data files are we going to read     \n\ndouble *irad;\n\nint get_indexrad(int,int);\n\nint main() {\nint i, j, kii , kjj , index,t,t0;\ndouble (*d_r)[N]= malloc(sizeof(d_r[0])*DataFiles);\nFILE * conf;\nFILE * op;\nchar file[100];\nint jump=5;\n// Initialization of the memory\nirad =   (double *) calloc(DataFiles*N, sizeof(double));\n\nt0=4500;\n/* open the file for reading and read the data into an array */\nfor (t=0; t&lt;DataFiles; t++){\n\n    sprintf(file,\"./interfase-%i.txt\",t0+t*jump);\n\n    conf=fopen(file,\"r\");\n    if(conf == NULL){\n        perror(\"Could not open input file\");\n        return -1;}\n\n    for(kii=0;kii&lt;N;kii++){\n        index=get_indexrad(t,kii);\n        fscanf(conf,\"%i %lf\", &amp;j, &amp;irad[index]);\n    }\n    fclose(conf);\n}\n\n// Writing the first read file in a new txt to see if it was properly read\nsprintf(file,\"./Data/irad_t0.txt\");\nop=fopen(file,\"w\");\nif(op == NULL){\n    perror(\"Could not create file\");\n    return -1;}\nt=0;\nfor(i=0;i&lt;N;i++){\n    index=get_indexrad(t,i);\n    fprintf(op,\"%f %lf\\n\", ((double)i), irad[index]);\n}\nfclose(op);\n}\n\nint get_indexrad(int t,int theta){\nint index3;\n\nindex3=t*N + theta;\nreturn index3;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "compilation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506521295, "post_id": 46449990, "comment_id": 79855758, "body": "How many source file are building successfully? How many are there is total? While you might not get errors from all that are left, that&#39;s seems to be the only metric you can provide. And it&#39;s a pretty stupid metric to begin with, which you (in diplomatic terms) should put forward to your project manager (in mail or some other medium that can be pointed to later), and then let the project manager deal with the higher up bosses."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1506521312, "post_id": 46449990, "comment_id": 79855771, "body": "you could write tests and count the number of greens you get. Given the huge spread in the size of source files imho the number of succesfully compiled files is not a good measure of progress"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506522582, "post_id": 46449990, "comment_id": 79856672, "body": "The quick way (probably some hour of work still) is to toss the whole project into an IDE that allows single file (translation unit) compilation. Go through all C files and compile that file alone, one at a time. Then simply count how many that compiled and how many that didn&#39;t. Some IDEs even have the option to compile the whole project and then display some manner of icon next to the files that didn&#39;t compile."}], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 3154719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff9d0bee6aec8ef2976cf0940244d17?s=128&d=identicon&r=PG&f=1", "display_name": "niralittle", "link": "https://stackoverflow.com/users/3154719/niralittle"}, "edited": false, "score": 0, "creation_date": 1506523347, "post_id": 46450087, "comment_id": 79857239, "body": "worked like a charm (but I changed extension to .c), thanx! (and to all - yes, I agree it is not a very useful metric, but I got 68%, having spent a few days on this, so it&#39;s something)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 114, "user_id": 3154719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff9d0bee6aec8ef2976cf0940244d17?s=128&d=identicon&r=PG&f=1", "display_name": "niralittle", "link": "https://stackoverflow.com/users/3154719/niralittle"}, "edited": false, "score": 0, "creation_date": 1506523527, "post_id": 46450087, "comment_id": 79857366, "body": "@niralittle Managers genuinely need metrics. And better a slightly inaccurate metric than no metric at all."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 114, "user_id": 3154719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff9d0bee6aec8ef2976cf0940244d17?s=128&d=identicon&r=PG&f=1", "display_name": "niralittle", "link": "https://stackoverflow.com/users/3154719/niralittle"}, "edited": false, "score": 0, "creation_date": 1506553226, "post_id": 46450087, "comment_id": 79872375, "body": "Downvoters, please say why so I could improve my answer."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 1, "last_activity_date": 1506521345, "creation_date": 1506521345, "answer_id": 46450087, "question_id": 46449990, "link": "https://stackoverflow.com/questions/46449990/how-to-measure-the-percentage-of-files-that-were-compiled-successfully/46450087#46450087", "title": "How to measure the percentage of files that were compiled successfully?", "body": "<p>I'd naively compare the number of .cpp files and .o files:</p>\n\n<pre><code>#!/bin/bash\n\nnumber_of_sources=$(find . -name \\*.cpp | wc -l)\nnumber_of_objects=$(find . -name \\*.o   | wc -l)\nprogress=$(echo \"${number_of_objects} * 100 / ${number_of_sources}\" | bc)\necho \"${progress}% of translation units successfully compiled.\"\n</code></pre>\n\n<p>This would need adaption related to your context (some subpath not to look into like <code>.git/</code>, some renaming, ...)</p>\n"}, {"tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": false, "score": 0, "last_activity_date": 1506523500, "creation_date": 1506523500, "answer_id": 46450846, "question_id": 46449990, "link": "https://stackoverflow.com/questions/46449990/how-to-measure-the-percentage-of-files-that-were-compiled-successfully/46450846#46450846", "title": "How to measure the percentage of files that were compiled successfully?", "body": "<p>Assuming you have a generic target to compile c++ files to object files, you can make some adjustments to the makefile to make it count compilations for you:</p>\n\n<pre><code>SHELL=/bin/bash\n[...]\nCOMPILED_FILES=0\n\nall:\n    #whatever you do to compile object files together\n    echo \"Total number of compiled files: \" $(COMPILED_FILES)\n\n%.o:%.cpp\n    #whatever you do to compile to object file\n    $(eval COMPILED_FILES=$(shell echo $$(($(COMPILED_FILES)+1))))\n</code></pre>\n\n<p>The <code>eval</code> line can be understood from <a href=\"https://stackoverflow.com/questions/34142638/makefile-how-to-increment-a-variable-when-you-call-it-var-in-bash\">this questions selected answer</a>.</p>\n"}], "owner": {"reputation": 114, "user_id": 3154719, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff9d0bee6aec8ef2976cf0940244d17?s=128&d=identicon&r=PG&f=1", "display_name": "niralittle", "link": "https://stackoverflow.com/users/3154719/niralittle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 46450087, "answer_count": 2, "score": 0, "last_activity_date": 1506523500, "creation_date": 1506521093, "last_edit_date": 1506523377, "question_id": 46449990, "link": "https://stackoverflow.com/questions/46449990/how-to-measure-the-percentage-of-files-that-were-compiled-successfully", "title": "How to measure the percentage of files that were compiled successfully?", "body": "<p>I am working on porting a large piece of software to a new platform, and basically at this point all I am doing is fixing compilation errors I stumble upon. My management is asking me \"how far you've got?\" - how can I measure how much I was able to compile successfully and how much is to go?</p>\n\n<p>This is c sources only, and the logs I get from 'make' are so insanely stuffed, that I don't even know what to grep to find this out.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506520217, "post_id": 46449568, "comment_id": 79854934, "body": "In the first example, where is <code>p</code> pointing? It&#39;s pointing to a <b><i>single</i></b> character. You write well beyond the bounds of that single character, leading to <i>undefined behavior</i>. You have the same problem in the second program, but there <code>p</code> points to a single character somewhere else in memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506520284, "post_id": 46449568, "comment_id": 79854989, "body": "Also note that for any pointer or array <code>p</code> and index <code>i</code>, the expression <code>*(p + i)</code> is exactly equal to <code>p[i]</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506520382, "post_id": 46449568, "comment_id": 79855069, "body": "Both are undefined behavior. <code>char t;         char *p = &amp;t;</code> --&gt; <code>char t[40];         char *p = t;</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506520545, "post_id": 46449568, "comment_id": 79855215, "body": "While <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> is really all you need to know (it makes your whole program <i>ill-formed</i> and invalid), what <i>actually</i> happening in your first program is that the compiler places local variable on the stack, and you simply overwrite your own local variables. In the second example, since the single character is allocated of the heap, it <i>seems</i> to work better."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506520764, "post_id": 46449568, "comment_id": 79855393, "body": "After the first lap in the loop, <code>p</code> is pointing out in la-la-land, that&#39;s why. There&#39;s only one character allocated where it points, but you try to store a whole array there. <code>p</code> needs to point at <i>an array of valid, allocated memory</i>. Either statically or dynamically allocated. The answer to the linked duplicate will explain this."}], "owner": {"reputation": 1, "user_id": 8683365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f8e496bc8b30fd74f2248330aa8850?s=128&d=identicon&r=PG&f=1", "display_name": "\uc11c\ub3d9\uc9c4", "link": "https://stackoverflow.com/users/8683365/%ec%84%9c%eb%8f%99%ec%a7%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1506520805, "answer_count": 0, "score": 0, "last_activity_date": 1506521109, "creation_date": 1506520056, "last_edit_date": 1506521109, "question_id": 46449568, "link": "https://stackoverflow.com/questions/46449568/string-partial-copy-by-strchr-in-c", "closed_reason": "Duplicate", "title": "String partial copy by strchr in C", "body": "<p>I want to get <strong>Code 2</strong> result, but if I use <strong>Code 1</strong> there is some strange result.</p>\n\n<p>I think number 116 is <code>t</code>'s <em>ASCII</em> code. But I can't understand what happened in <strong>Code 1</strong>. </p>\n\n<p><strong>Can you explain what's different between Code 1 and Code 2?</strong></p>\n\n<p><strong>Code 1</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n        char t;\n        char *p = &amp;t;\n        char *s;\n        int count=0;\n        char test[40] = \"Test String partial copy in C\\n\";\n        s = strchr(test,'S');\n        while(!isblank(*s)){\n                *(p+count) = *s;\n                s++;\n                printf(\"%d\\n\",count);\n                count++;\n        }\n        *(p+count) = '\\0';\n        printf(\"%s\\n\",p);\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>Result:</strong> 0 116 117 118 119 120 Sy</p>\n</blockquote>\n\n<p><strong>Code 2</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n        char *p = (char*)malloc(sizeof(char));\n        char *s;\n        int count=0;\n        char test[40] = \"Test String partial copy in C\\n\";\n        s = strchr(test,'S');\n        while(!isblank(*s)){\n                *(p+count) = *s;\n                s++;\n                printf(\"%d\\n\",count);\n                count++;\n        }\n        *(p+count) = '\\0';\n        printf(\"%s\\n\",p);\n}\n</code></pre>\n\n<blockquote>\n  <p>Result: 0 1 2 3 4 5 String</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "gcc", "virtual-machine", "nfs"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519703, "post_id": 46449414, "comment_id": 79854523, "body": "Are you compiling on the same system you are running on? Or you are compiling on the host when trying to run on VM (or vise-versa)? In the latter case you need to <i>cross-compile</i>."}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519825, "post_id": 46449414, "comment_id": 79854620, "body": "@EugeneSh. I am indeed compiling on the same machine I am trying to execute the output (the guest)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519898, "post_id": 46449414, "comment_id": 79854673, "body": "Make sure you don&#39;t have some <code>cc</code> locally in that folder."}, {"owner": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "edited": false, "score": 1, "creation_date": 1506519917, "post_id": 46449414, "comment_id": 79854693, "body": "I&#39;d be very curious whether the resulting executable differs (in terms of cmp or diff) in the NFS dir vs in /tmp.  Check to make sure that your nfs share is not mounted noexec, but I don&#39;t think that will change the file output"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519979, "post_id": 46449414, "comment_id": 79854746, "body": "@EugeneSh. No I don&#39;t. Even if I had, I am compiling from the same folder. Only the output directory differs."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "edited": false, "score": 0, "creation_date": 1506520037, "post_id": 46449414, "comment_id": 79854789, "body": "Then I will second what @SamHartman said. Check <code>exportfs</code> output."}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "reply_to_user": {"reputation": 5523, "user_id": 2594812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8f4767c6d139bb824167fa04b992e0?s=128&d=identicon&r=PG", "display_name": "Sam Hartman", "link": "https://stackoverflow.com/users/2594812/sam-hartman"}, "edited": false, "score": 0, "creation_date": 1506520183, "post_id": 46449414, "comment_id": 79854912, "body": "@SamHartman The two files differ. Here are the mounting options in /etc/fstab: defaults,user,exec,auto,noatime,intr"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506520274, "post_id": 46449414, "comment_id": 79854976, "body": "what <code>file</code> tells about the first one?"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506520464, "post_id": 46449414, "comment_id": 79855142, "body": "Nothing more than stated above: data :s"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506520649, "post_id": 46449414, "comment_id": 79855306, "body": "Weird one. Tried to delete it before recompiled?"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506521114, "post_id": 46449414, "comment_id": 79855618, "body": "Hum. Another clue. Let me edit the question, first."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1506521574, "post_id": 46449414, "comment_id": 79855968, "body": "Interesting edit. Is your host machine doing some funny stuff on the background?"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506522304, "post_id": 46449414, "comment_id": 79856491, "body": "@EugeneSh. Yes, nice try. My shared folder is synced with nextcloud. I shutdown the client, restarted the VM, but same behavior. How could I find out if there is any &quot;trigger&quot; on my folder ? Thanks again."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506522393, "post_id": 46449414, "comment_id": 79856557, "body": "What is happening to a file if you just copy it there? Is it becoming zeros again?"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506522648, "post_id": 46449414, "comment_id": 79856723, "body": "No. Copying is OK. But after editing it is zeroed. touch has no effect in this regard."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1506522727, "post_id": 46449414, "comment_id": 79856777, "body": "What are you using to edit? What if you use something else?"}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506523118, "post_id": 46449414, "comment_id": 79857070, "body": "@EugeneSh. I was using vim. I am not experiencing the issue using nano. This is weird."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506523188, "post_id": 46449414, "comment_id": 79857130, "body": "And I guess vim is working fine in the other directories? Now it sounds like black magic."}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506523757, "post_id": 46449414, "comment_id": 79857557, "body": "Yes... I am about to give up. I think I am going to go for a walk and I will come back later on this. Now that I have a clearer idea of the culprit, it shall be easier. Thanks for your help, I will give you an update when I am done."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1506525018, "post_id": 46449414, "comment_id": 79858413, "body": "Maybe<code>&#47;home</code> is on a filesytem that is mounted with the noexec-option?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1506540222, "post_id": 46449414, "comment_id": 79866986, "body": "You should probably move this to <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a>. Debian Chroot&#39;s suck. Most of them are broken. I stopped using them because I wasted so much time trying to get them to work. I never could figure out what broke with their signing keys or how to fix it. Just setup a 32-bit VM and install the 32-bit OS. Here are some field notes, if interested: <a href=\"https://cryptopp.com/wiki/Debian_Chroot\" rel=\"nofollow noreferrer\">Debian Chroot</a>."}, {"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506540661, "post_id": 46449414, "comment_id": 79867226, "body": "Yes, as stated this is my configuration: 32 bits VM running on 64 bits host OS. No chroot. I&#39;m using qemu/KVM. I noticed some strange things with tcpdump (NFS paquets). I will investigate further tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "edited": false, "score": 0, "creation_date": 1506606251, "post_id": 46470703, "comment_id": 79896514, "body": "Btw, what should I do with that question? Delete? Ask for closing? Amend?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506620797, "post_id": 46470703, "comment_id": 79905715, "body": "Leave it. It is interesting... maybe should be migrated though, but it&#39;s not your concern."}], "tags": [], "owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "is_accepted": false, "score": 0, "last_activity_date": 1506606128, "creation_date": 1506606128, "answer_id": 46470703, "question_id": 46449414, "link": "https://stackoverflow.com/questions/46449414/exec-format-error-when-compiling-in-nfs-shared-directory-inside-a-vm/46470703#46470703", "title": "Exec format error when compiling in nfs shared directory inside a VM", "body": "<p>Great! I eventually managed to solve the problem. This has nothing to do with compiling, editing or whatsoever. It was a network issue. </p>\n\n<p>I tcpdumped NFS frames on both sides (btw that made me notice my NFS was using TCP -- I was sure UDP was the default).</p>\n\n<p><strong>From the guest:</strong>\n<a href=\"https://i.stack.imgur.com/2VRkP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2VRkP.png\" alt=\"Guest\"></a></p>\n\n<ul>\n<li>Data written is what was actually written</li>\n<li>Wrong TCP checksum</li>\n</ul>\n\n<p><br/>\n<strong>From the host:</strong>\n<a href=\"https://i.stack.imgur.com/3GRt8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3GRt8.png\" alt=\"Host\"></a></p>\n\n<ul>\n<li>Message zeroed</li>\n<li>TCP checksum OK</li>\n</ul>\n\n<p><br/>\n<strong>Solution:</strong>\nI disabled offloading according to <a href=\"https://sokratisg.net/2012/04/01/udp-tcp-checksum-errors-from-tcpdump-nic-hardware-offloading/\" rel=\"nofollow noreferrer\">that procedure</a>. I have still to understand the details, but at last I got something functional.</p>\n\n<p>PS: The same behavior was happening when creating a file, but from the client side, as the file was not refreshed, everything was looking fine. But on the host, the same file was already zeroed.</p>\n"}], "owner": {"reputation": 386, "user_id": 7272253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca369b631d0b215c62ddb251aa671101?s=128&d=identicon&r=PG&f=1", "display_name": "Nicolas Garnier", "link": "https://stackoverflow.com/users/7272253/nicolas-garnier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1506606128, "creation_date": 1506519598, "last_edit_date": 1506523316, "question_id": 46449414, "link": "https://stackoverflow.com/questions/46449414/exec-format-error-when-compiling-in-nfs-shared-directory-inside-a-vm", "title": "Exec format error when compiling in nfs shared directory inside a VM", "body": "<p>I set up a 32 bits Debian VM on my host 64 bits OS. I shared the source code directory using NFS.</p>\n\n<p>When I compile inside that shared folder, I am unable to run the executable:</p>\n\n<pre><code>nicolas@vdeb32:~/Shared$ cc hello.c -o hello\nnicolas@vdeb32:~/Shared$ ./hello\n-bash: ./hello: cannot execute binary file: Exec format error\nnicolas@vdeb32:~/Shared$ file hello\nhello: data\n</code></pre>\n\n<p>But when the output is out of that shared folder, everything works fine:</p>\n\n<pre><code>nicolas@vdeb32:~/Shared$ cc hello.c -o /tmp/hello\nnicolas@vdeb32:~/Shared$ /tmp/hello\nhello\nnicolas@vdeb32:~/Shared$ file /tmp/hello\n/tmp/hello: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 2.6.32\n</code></pre>\n\n<p>What is the cause of that behavior? I found that <a href=\"https://askubuntu.com/a/697757/628976\">askubuntu reply</a> but there is no explanation and anyway my host is not running windows neither my executable is a link.</p>\n\n<p>Thanks.</p>\n\n<p>[EDIT] I found the reason why the file cannot be executed. Editing hello.c, I noticed that the file, once saved, was only contaning zeros:</p>\n\n<pre><code>nicolas@vdeb32 ~/Shared $ xxd hello.c \n00000000: 0000 0000 0000 0000 0000 0000 0000 0000  ................\n00000010: 0000 0000 0000 0000 0000 0000 0000 0000  ................\n00000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................\n00000030: 0000 0000 0000 0000                      ........\n</code></pre>\n\n<p>After some retries: when creating a file, everything works fine. But when I edit a file (in the shared directory), it is overwritten with zeros (same number of bytes as the original file). When compiling, the executable produced contains also only zeros. I am left with a different problem but the same question: what is the cause of that behavior?</p>\n\n<p>[EDIT2] No trouble with the same architecture when the guest is running Mint 64 bits.</p>\n"}, {"tags": ["c", "notifications", "console", "focus"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506520065, "post_id": 46449346, "comment_id": 79854813, "body": "You need to get your terminology straight: the thing Linux calls a &quot;console&quot; is probably not what you are thinking of, and in particular the concept of &quot;focus&quot; does not apply to it.  I am guessing that you actually mean &quot;terminal emulator window&quot;, in which case the answer is &quot;a program running in a pseudoterminal has no access to this information, you are going to need to rewrite this chat application as an X client&quot; but I suspect you don&#39;t know a number of the words I just used and you will need to research them before you even know how to begin..."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506520209, "post_id": 46449346, "comment_id": 79854924, "body": "Oh, also, depending on which windowing environment is in use, there may not <i>be</i> any way to &quot;display a notification&quot;.  Some GUI designers don&#39;t believe notifications should even be possible.  Yes, really."}, {"owner": {"reputation": 65, "user_id": 7808753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28d4b9dcf078eab1b1b3ddf7d8c7f55?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/7808753/django"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506520647, "post_id": 46449346, "comment_id": 79855303, "body": "Yes I was meaning the &quot;terminal emulator window&quot;. I will read about &quot;X client application&quot;. I don&#39;t care if the notifications doesn&#39;t work on all  platform, it is working on the system I target and that is enough for me."}, {"owner": {"reputation": 65, "user_id": 7808753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28d4b9dcf078eab1b1b3ddf7d8c7f55?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/7808753/django"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506530994, "post_id": 46449346, "comment_id": 79862115, "body": "For what I understand, an X application is like a graphic application and that not what I want to have. Also can you explain me what is the difference between what I called console and &quot;terminal emulator window&quot;"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506531194, "post_id": 46449346, "comment_id": 79862221, "body": "I cannot fit an explanation into the comment box.  Go to the library and get yourself a copy of <i>Advanced Programming in the UNIX Environment</i> by W. Richard Stevens and read it cover to cover.  That will get you started."}], "owner": {"reputation": 65, "user_id": 7808753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a28d4b9dcf078eab1b1b3ddf7d8c7f55?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/7808753/django"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506520665, "creation_date": 1506519407, "last_edit_date": 1506520665, "question_id": 46449346, "link": "https://stackoverflow.com/questions/46449346/notification-for-a-terminal-emulator-window-client-server-chat-in-c", "title": "Notification for a terminal emulator window client-server chat in C", "body": "<p>I want to find a way to know when a terminal emulator window has the focus in Linux. So when the client receives a message, if it doesn't have the focus I can display a notification like this:  </p>\n\n<pre><code>if(!have_focus()){\n    display_notification();\n}\n</code></pre>\n\n<p>How can I achieve this in C?</p>\n"}, {"tags": ["c", "arrays", "struct", "global-variables"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519382, "post_id": 46449315, "comment_id": 79854287, "body": "Where is the definition of <code>router </code>?"}, {"owner": {"reputation": 75, "user_id": 6948126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7661a1844f18803a8fef2ffc3f66092e?s=128&d=identicon&r=PG&f=1", "display_name": "Telanore", "link": "https://stackoverflow.com/users/6948126/telanore"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519675, "post_id": 46449315, "comment_id": 79854498, "body": "router is a very basic struct with one unsigned char for id, and a char* name"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506519788, "post_id": 46449315, "comment_id": 79854589, "body": "If it is that basic, you can put in the question to avoid comments like mine. Also <code>make_router</code> definition is needed."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1506519865, "post_id": 46449315, "comment_id": 79854646, "body": "There aren&#39;t any other variables called <code>routers</code> are there?"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1506519860, "last_edit_date": 1506519860, "creation_date": 1506519361, "answer_id": 46449329, "question_id": 46449315, "link": "https://stackoverflow.com/questions/46449315/subscripted-value-is-neither-array-nor-pointer-nor-vector-at-array-index/46449329#46449329", "title": "Subscripted value is neither array nor pointer nor vector at array index", "body": "<p>This:</p>\n\n<pre><code>struct router routers[ARRAY_SIZE] = {0};\n</code></pre>\n\n<p>means <code>routers</code> is an array of <code>ARRAY_SIZE</code> structures. Not pointers to structures, which is what this:</p>\n\n<pre><code>routers[new_router-&gt;id] = new_router; \n</code></pre>\n\n<p>is trying to assign into one of the elements.</p>\n\n<p>If <code>make_router()</code>  is dynamically allocating the memory, the fix is probably to change the array declaration into an array of pointers:</p>\n\n<pre><code>struct router * routers[ARRAY_SIZE];\n              ^\n              |\n             way\n          important\n</code></pre>\n\n<p><em>EDIT</em>: Of course, I assumed that there was an actual declaration of <code>struct router</code> somewhere that you just omitted. Might be a good idea to include it, just for completeness' sake.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1506520611, "last_edit_date": 1506520611, "creation_date": 1506520310, "answer_id": 46449669, "question_id": 46449315, "link": "https://stackoverflow.com/questions/46449315/subscripted-value-is-neither-array-nor-pointer-nor-vector-at-array-index/46449669#46449669", "title": "Subscripted value is neither array nor pointer nor vector at array index", "body": "<p>Assuming <code>make_router</code> allocates a struct dynamically, then </p>\n\n<pre><code>routers[new_router-&gt;id] = *new_router; // note *\n</code></pre>\n\n<p>solves the compiler error. </p>\n\n<p><strong>However, you cannot copy structs like this if they have pointer members</strong>. You say that \"Router is just a basic struct with an unsigned char for id, and a char* for name\" so this is the case. But with an assignment like this, you won't get a hard copy of the pointed-at data.</p>\n\n<p>Pointers are not data. They do not contain data. They point at data allocated elsewhere. </p>\n\n<p>So probably what you are actually looking for is an array of pointers, as suggested in another answer. If so, you have to re-write this program.</p>\n"}], "owner": {"reputation": 75, "user_id": 6948126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7661a1844f18803a8fef2ffc3f66092e?s=128&d=identicon&r=PG&f=1", "display_name": "Telanore", "link": "https://stackoverflow.com/users/6948126/telanore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 46449669, "answer_count": 2, "score": 0, "last_activity_date": 1506520611, "creation_date": 1506519281, "last_edit_date": 1506520267, "question_id": 46449315, "link": "https://stackoverflow.com/questions/46449315/subscripted-value-is-neither-array-nor-pointer-nor-vector-at-array-index", "title": "Subscripted value is neither array nor pointer nor vector at array index", "body": "<p>(Homework question)\nI'm just learning C, and I'm making a program that reads data from a file, creates routers of that data, and puts pointers to the routers in an array of size 255, but I keep getting the title error on the line where I'm trying to add them to the array</p>\n\n<pre><code>#define ARRAY_SIZE 255\nstruct router routers[ARRAY_SIZE] = {0};\n\nint main(int argc, char *argv[]){\n  unsigned char id;\n  char name[32];\n  struct router *new_router;\n\n  if(argc == 2){\n    //reads file with fread\n    //setting id and name which prints out as expected\n\n    new_router = make_router(id, name); //initialising method that returns a router pointer\n    routers[new_router-&gt;id] = new_router; \n    //error occurs here, at [new_router-&gt;id]. Have also tried just using id\n    }\n }\n</code></pre>\n\n<p>I've searched a lot of threads with the same error message, but they're all either someone who didn't declare an array, or were suggested to try it with unsigned char as index number, which is what I'm already using. Would love some insight into this.</p>\n\n<pre><code>struct router{\n  unsigned char id;\n  char name[32];\n}\n\nstruct router* make_router(unsigned char id, char* name){\n  struct router *r = malloc(sizeof(struct router));\n\n  r-&gt;id = id;\n  r-&gt;name = name;\n\n  return r;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "multidimensional-array", "cs50"], "comments": [{"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1506518782, "post_id": 46449067, "comment_id": 79853822, "body": "Why do you declare <code>void init(int dim, int arr[dim-1][dim-1]);</code> in <code>main</code> function?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 2, "creation_date": 1506518819, "post_id": 46449067, "comment_id": 79853846, "body": "It doesn&#39;t even compile.  did you mean to type <code>i&lt;dim-1</code> instead of <code>i&lt;d</code> in main?"}, {"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1506518879, "post_id": 46449067, "comment_id": 79853884, "body": "you need declare <code>void init(int dim, int arr[dim-1][dim-1]);</code> before <code>main</code>"}, {"owner": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1506518929, "post_id": 46449067, "comment_id": 79853925, "body": "What error do you have?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 3, "creation_date": 1506518991, "post_id": 46449067, "comment_id": 79853981, "body": "@IvanSheigets: It&#39;s not good style, but it is valid to declare prototypes inside functions. The error is described in the text: Elements are being overwritten."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1506519093, "post_id": 46449067, "comment_id": 79854057, "body": "You seem to confuse the dimension of an array with the possible indices. An array of dimension <code>N</code> has <code>N</code> elements with indices <code>0</code> through <code>N - 1</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506519804, "post_id": 46449067, "comment_id": 79854608, "body": "I will answer this if you edit the question and post the actual code that compiles, not some made-up code which is not the code you are using. You claim that it does compile and run, yet what you have posted here does not compile."}, {"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1506523425, "post_id": 46449067, "comment_id": 79857292, "body": "Yes @MOehm arr[i][j] has different meanings on initialization and assignment of value. I forgot that somehow"}, {"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "reply_to_user": {"reputation": 732, "user_id": 3779533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ceb7c47ce798288bf7e7baaa7129c?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Sheigets", "link": "https://stackoverflow.com/users/3779533/ivan-sheigets"}, "edited": false, "score": 0, "creation_date": 1506531883, "post_id": 46449067, "comment_id": 79862600, "body": "@IvanSheigets : why shouldn&#39;t you declare functions inside main()? What difference does it make than declaring it outside anyway"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "edited": false, "score": 0, "creation_date": 1506522767, "post_id": 46449684, "comment_id": 79856807, "body": "thank you, i had got confused with the array index starting from 0 and arr[i][j] denoting the array size on initialization."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 0, "last_activity_date": 1506520349, "creation_date": 1506520349, "answer_id": 46449684, "question_id": 46449067, "link": "https://stackoverflow.com/questions/46449067/2d-array-elements-changing-after-they-are-set/46449684#46449684", "title": "2D Array elements changing after they are set", "body": "<p>You define your array with <code>a[dim - 1][dim - 1]</code>, which is one short of the desired dimension. If the user enters \"4\", you create a 3&times;3 array.</p>\n\n<p>Your array is two-dimensional and of variable length. Therefore, you must pass the dimension alongside the array in functions, at least for the last dimension. You do this correctly, but the code in \u00b4init<code>behaves as if the array were</code>a[dim][dim]<code>, when it's actually</code>a[dim - 1][dim - 1]`.</p>\n\n<p>Define the array with the actual dimension, <code>dim</code> and access the elements with indices <code>0</code> through <code>dim - 1</code>. This is usually done in a loop like this:</p>\n\n<pre><code>for (int i = 0; i &lt; dim; i++) ...\n</code></pre>\n\n<p>Seeing <code>&gt;=</code> or <code>dim - 1</code> something similar should make you wary.</p>\n\n<p>Your program now looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid init(int dim, int arr[dim-1][dim-1]);\nvoid print(int dim, int arr[dim-1][dim-1]);\n\nint main(void)\n{\n    int dim;\n\n    printf(\"Enter board dimension: \");\n    scanf(\"%d\", &amp;dim);\n\n    int arr[dim][dim];\n\n    init(dim, arr);\n    print(dim, arr);\n\n    return 0;\n}\n\nvoid print(int dim, int arr[dim][dim])\n{\n    int i,j; \n\n    for(i = 0; i &lt; dim; i++) {\n        for(j = 0; j &lt; dim; j++) {\n            printf(\"%2d  \", arr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nvoid init(int dim, int arr[dim][dim])\n{\n    int i, j;\n\n    for(i = 0; i &lt; dim; i++) {\n        for(j = 0; j &lt; dim; j++) {\n            int ii = dim - 1 - i;\n            int jj = dim - 1 - j;\n\n            arr[i][j] = ii*dim + jj;\n        } \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 46449684, "answer_count": 1, "score": -1, "last_activity_date": 1507145697, "creation_date": 1506518654, "last_edit_date": 1507145697, "question_id": 46449067, "link": "https://stackoverflow.com/questions/46449067/2d-array-elements-changing-after-they-are-set", "title": "2D Array elements changing after they are set", "body": "<p>The program below is meant to print a square grid of integers based on the dimension which is inputted by the user (as part of the harvard cs50 course on edx). </p>\n\n<p>The array is being initialized correctly, but when it comes to printing it out, the last column always prints incorrectly. I tried debugging by putting 2 printf statements in the innermost for loop of the init() function.\nIt seems that after the outermost loop runs once, the entry in the last column gets decremented by one, although it was correct just before this.</p>\n\n<p>Why is this happening? Shouldn't it print correctly?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n main()\n{\n    void init(int dim, int arr[dim-1][dim-1]);\n    int dim;\n    printf(\"Enter board dimension(max 10): \");\n    scanf(\"%d\", &amp;dim);\n\n    int arr[dim-1][dim-1];\n\n    init(dim, arr);\n\n    int i,j;    \n    for(i=0;i&lt;dim;i++)\n    {\n        for(j=0;j&lt;dim;j++)\n        {\n            printf(\"%2d  \",arr[i][j]);\n        }\n        printf(\"\\n\");\n    }   \n}\n\nvoid init(int dim, int arr[dim-1][dim-1])\n{\n    int i,j,p;\n    for(i=0;i&lt;dim;i++)\n    {\n        for(j=0;j&lt;dim;j++)\n        {\n            arr[i][j] = (dim*dim-1)-i*dim-j;\n        }   \n            for(p=0;p&lt;dim;p++)\n            {\n                printf(\"%d \", arr[i][p]);\n                if(i&gt;=1)\n                printf(\"%d \", arr[i-1][p]);\n            }   \n\n    }\n    printf(\"\\n\");\n    if(dim%2==0)\n    {\n        arr[dim-1][dim-3] = 1;\n        arr[dim-1][dim-2] = 2;\n    }\n}\n</code></pre>\n\n<p>EDIT: it should compile now</p>\n"}, {"tags": ["c", "memory", "realloc"], "comments": [{"owner": {"reputation": 989, "user_id": 5016244, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bdZPE.jpg?s=128&g=1", "display_name": "Theophile Dano", "link": "https://stackoverflow.com/users/5016244/theophile-dano"}, "edited": false, "score": 0, "creation_date": 1506517614, "post_id": 46448653, "comment_id": 79852985, "body": "Please don&#39;t cast <code>malloc</code>&#39;s return value"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1506517772, "post_id": 46448653, "comment_id": 79853099, "body": "<code>pq=...</code> doesn&#39;t update caller&#39;s argument itself."}, {"owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "edited": false, "score": 0, "creation_date": 1506518894, "post_id": 46448653, "comment_id": 79853899, "body": "If I don&#39;t cast, I will get compile time error@Theophile Dano"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1506518915, "post_id": 46448653, "comment_id": 79853915, "body": "Given <code>if(MS==N)</code>, I&#39;d expect <code>pq[N++]=INT_MIN;</code> instead of <code>++N</code>.  Post declaration, initial value of <code>MS</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1506518953, "post_id": 46448653, "comment_id": 79853943, "body": "@AkhileshYadav &quot;Compile time error&quot; implies you are not using a C compiler but something else."}, {"owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506518994, "post_id": 46448653, "comment_id": 79853983, "body": "see this reference <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\">link</a> @BLUEPIXY"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1506519375, "post_id": 46448653, "comment_id": 79854280, "body": "@AkhileshYadav When BLUEPIXY said &quot;doesn&#39;t update&quot;, they meant that nothing gets updated <i>in the code that called <code>insert</code></i>.  And that&#39;s very likely what your problem is, since on the next call to <code>insert</code>, you end up writing into (and overflowing), the old, unresized (and probably deallocated) buffer."}, {"owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506519414, "post_id": 46448653, "comment_id": 79854309, "body": "@chux I am compiling this using ubuntu terminal with command &#39;gcc &lt;filename&gt;.C&#39;"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1506519494, "post_id": 46448653, "comment_id": 79854372, "body": "@AkhileshYadav Use <code>.c</code> (lowercase c).  <code>.C</code> is probably telling compiler to assume C++."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506521602, "post_id": 46448653, "comment_id": 79855995, "body": "If <code>realloc</code> is successful, old space(It is the area that the caller&#39;s pointer points to.) will be released. If you try to use it on the next call, it will be reported as an illegal area. Also, the new area, which is the return value of <code>realloc</code>, will no longer be referenced from anywhere after the scope of the function is over."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506522990, "post_id": 46448653, "comment_id": 79856979, "body": "@AkhileshYadav You still haven&#39;t followed chux&#39;s suggestion about <code>++N</code> vs. <code>N++</code>."}, {"owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506523176, "post_id": 46448653, "comment_id": 79857118, "body": "@SteveSummit my initial value of N=-1, so I had to pre-increment to make it 0 first and then insert."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1506523450, "post_id": 46448653, "comment_id": 79857311, "body": "Instead of guessing or randomly trying different solutions, use valgrind to diagnose out-of-bounds modifications when they occur. And then use a debugger f necessary to figure out why."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506524176, "post_id": 46448653, "comment_id": 79857820, "body": "@AkhileshYadav Starting at 0, and using postfix <code>++</code> as you&#39;re filling the array, is generally much cleaner.  It&#39;s the C Way.  I recommend it."}, {"owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506524609, "post_id": 46448653, "comment_id": 79858125, "body": "@Steve Summit You are right. It worked when I took N=0 and used post-increment operator."}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 8628824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae036890c556d6cc1500bc24fcf07a6?s=128&d=identicon&r=PG", "display_name": "Lisandro", "link": "https://stackoverflow.com/users/8628824/lisandro"}, "is_accepted": false, "score": 0, "last_activity_date": 1506524495, "creation_date": 1506524495, "answer_id": 46451235, "question_id": 46448653, "link": "https://stackoverflow.com/questions/46448653/doubling-the-size-of-array-with-realloc/46451235#46451235", "title": "doubling the size of array with realloc()", "body": "<p>If N start with -1 then you should try:</p>\n\n<pre><code>void insert(int key){\n      if(MS==N+1){\n           pq=realloc(pq,sizeof(int)*MS*2);\n           MS*=2;\n      }\n      pq[++N]=INT_MIN;\n      increase_key(N,key); \n}\n</code></pre>\n\n<p>But I agree that it would be better to start with 0.</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1506528039, "post_id": 46451242, "comment_id": 79860442, "body": "&quot;if your compiler complains, you&#39;re compiling this code as C++. If you intend for this code to be compiled as C++, you shouldn&#39;t be using <code>malloc</code> at all&quot;.  I like that syllogism. :-)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506529756, "post_id": 46451242, "comment_id": 79861492, "body": "@SteveSummit: Yup.  As I&#39;ve said before, the best way to avoid problems with memory management is to avoid memory management."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1506524525, "creation_date": 1506524525, "answer_id": 46451242, "question_id": 46448653, "link": "https://stackoverflow.com/questions/46448653/doubling-the-size-of-array-with-realloc/46451242#46451242", "title": "doubling the size of array with realloc()", "body": "<p>Several issues:</p>\n\n<ol>\n<li><p>You need an extra level of indirection on <code>pq</code> in the <code>insert</code> function - if you update the value with <code>realloc</code>, that new value of <code>pq</code> won't be updated in the function that called <code>insert</code>.  </p></li>\n<li><p>Never assign the result of <code>realloc</code> directly to the original pointer - if <code>realloc</code> fails, it will return <code>NULL</code>, and you'll wind up losing your reference to the previously allocated memory, leading to a memory leak.  Assign the result to a temporary, check the temporary to make sure the <code>realloc</code> succeeded, <em>then</em> update your original pointer and size variables. </p></li>\n<li><p>If you intend for <code>N</code> to be the index of the <em>next available element</em> in <code>*pq</code>, then you should update it as <code>N++</code>, not <code>++N</code>.  If you use <code>++N</code>, then <code>N</code> is the index the <em>last written element</em> (and you skip over element 0, and you risk indexing one past the last element in the array).  Based on how the <code>insert</code> function is written, it looks like you intend for <code>N</code> to represent the next available element in <code>*pq</code>, so you should update it as <code>N++</code>.  </p></li>\n<li><p>Don't cast the result of <code>malloc</code>/<code>calloc</code>/<code>realloc</code> - if your compiler complains, then you're compiling this code <em>as C++</em>, not C.  If you intend for this code to be compiled <strong>as C++</strong>, then you shouldn't be using <code>malloc</code> at all, but rather a <code>vector</code> or some other standard container.  If you intend for this code to be compiled <strong>as C</strong>, then lose the casts on <code>malloc</code> and <code>realloc</code> and double-check your compiler settings.</p></li>\n</ol>\n\n<p>Putting this all together:</p>\n\n<pre><code>void insert(int **pq, int key){\n      if(MS == N) {\n           int *tmp = realloc(*pq, sizeof **pq * MS * 2); // sizeof **pq == sizeof (int)\n           if (tmp)\n           {\n             *pq = tmp;\n             MS *= 2;\n           }\n           else\n           {\n             // realloc failed, original buffer is still intact.  Handle\n             // as appropriate.\n           }\n      }\n      (*pq)[N++] = INT_MIN; // parens are required here\n      increase_key(*pq, N, key); // assuming increase_key does not need to modify pq\n}\n</code></pre>\n\n<p>And you'd call it as:</p>\n\n<pre><code>int *q = malloc( sizeof *q * INITIAL_NUMBER_OF_ELEMENTS );\n...\ninsert( &amp;q, keyval );\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5419740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jHCan.jpg?s=128&g=1", "display_name": "Akhilesh Yadav", "link": "https://stackoverflow.com/users/5419740/akhilesh-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 46451242, "answer_count": 2, "score": 0, "last_activity_date": 1506524525, "creation_date": 1506517437, "last_edit_date": 1506522761, "question_id": 46448653, "link": "https://stackoverflow.com/questions/46448653/doubling-the-size-of-array-with-realloc", "title": "doubling the size of array with realloc()", "body": "<p>The following is an excerpt from my program.</p>\n\n<pre><code>void insert(int *pq,int key){\n      if(MS==N){\n           pq=(int*)realloc(pq,sizeof(int)*MS*2);\n           MS*=2;\n      }\n      pq[++N]=INT_MIN;\n      increase_key(pq,N,key); \n}\n\nint* priority_queue(){\n     int *heap=(int*)malloc(sizeof(int)*10);\n     MS=10;\n     return heap;\n} \n</code></pre>\n\n<p>While reallocating memory in insert function I am getting this error. I want to double the size of my array when it get filled completely.</p>\n\n<pre><code>(gdb) n\n46             pq=(int*)realloc(pq,sizeof(int)*MS*2);\n(gdb) n\n*** Error in `/home/akhileshydv/Documents/Cprog/a.out': realloc(): invalid next size: 0x0000000000602010 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7ffff7a847e5]\n/lib/x86_64-linux-gnu/libc.so.6(+0x834aa)[0x7ffff7a904aa]\n/lib/x86_64-linux-gnu/libc.so.6(+0x85ba9)[0x7ffff7a92ba9]\n/lib/x86_64-linux-gnu/libc.so.6(realloc+0x22f)[0x7ffff7a918ef]\n/home/akhileshydv/Documents/Cprog/a.out[0x4007d5]\n/home/akhileshydv/Documents/Cprog/a.out[0x4005e8]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7ffff7a2d830]\n/home/akhileshydv/Documents/Cprog/a.out[0x4004e9]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:09 3414051                            /home/akhileshydv/Documents/Cprog/a.out\n00600000-00601000 r--p 00000000 08:09 3414051                            /home/akhileshydv/Documents/Cprog/a.out\n00601000-00602000 rw-p 00001000 08:09 3414051                            /home/akhileshydv/Documents/Cprog/a.out\n00602000-00623000 rw-p 00000000 00:00 0                                  [heap]\n7ffff0000000-7ffff0021000 rw-p 00000000 00:00 0 \n7ffff0021000-7ffff4000000 ---p 00000000 00:00 0 \n7ffff77f7000-7ffff780d000 r-xp 00000000 08:09 3936807                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7ffff780d000-7ffff7a0c000 ---p 00016000 08:09 3936807                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7ffff7a0c000-7ffff7a0d000 rw-p 00015000 08:09 3936807                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7ffff7a0d000-7ffff7bcd000 r-xp 00000000 08:09 3938830                    /lib/x86_64-linux-gnu/libc-2.23.so\n7ffff7bcd000-7ffff7dcd000 ---p 001c0000 08:09 3938830                    /lib/x86_64-linux-gnu/libc-2.23.so\n7ffff7dcd000-7ffff7dd1000 r--p 001c0000 08:09 3938830                    /lib/x86_64-linux-gnu/libc-2.23.so\n7ffff7dd1000-7ffff7dd3000 rw-p 001c4000 08:09 3938830                    /lib/x86_64-linux-gnu/libc-2.23.so\n7ffff7dd3000-7ffff7dd7000 rw-p 00000000 00:00 0 \n7ffff7dd7000-7ffff7dfd000 r-xp 00000000 08:09 3938808                    /lib/x86_64-linux-gnu/ld-2.23.so\n7ffff7fdb000-7ffff7fde000 rw-p 00000000 00:00 0 \n7ffff7ff5000-7ffff7ff8000 rw-p 00000000 00:00 0 \n7ffff7ff8000-7ffff7ffa000 r--p 00000000 00:00 0                          [vvar]\n7ffff7ffa000-7ffff7ffc000 r-xp 00000000 00:00 0                          [vdso]\n7ffff7ffc000-7ffff7ffd000 r--p 00025000 08:09 3938808                    /lib/x86_64-linux-gnu/ld-2.23.so\n7ffff7ffd000-7ffff7ffe000 rw-p 00026000 08:09 3938808                    /lib/x86_64-linux-gnu/ld-2.23.so\n7ffff7ffe000-7ffff7fff000 rw-p 00000000 00:00 0 \n7ffffffde000-7ffffffff000 rw-p 00000000 00:00 0                          [stack]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff7a42428 in __GI_raise (sig=sig@entry=6)\n    at ../sysdeps/unix/sysv/linux/raise.c:54\n54  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n</code></pre>\n\n<p>Why I am getting this error? Please suggest any solution.</p>\n\n<p>EDIT: I have made my 'pq' variable global as suggested in the comment section but, the problem still persists.</p>\n\n<pre><code>void priority_queue(){\n     pq=malloc(sizeof(int)*10);\n     MS=10;\n}\n\nvoid insert(int key){\n      if(MS==N){\n           pq=realloc(pq,sizeof(int)*MS*2);\n           MS*=2;\n      }\n      pq[++N]=INT_MIN;\n      increase_key(N,key); \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506517338, "post_id": 46448539, "comment_id": 79852794, "body": "<code>scanf(&quot;%d&quot;, arr[i]);</code> --&gt; <code>scanf(&quot;%d&quot;, &amp;arr[i]);</code> or <code>scanf(&quot;%d&quot;, arr + i);</code>, Use <code>m</code> instead of <code>n</code>."}, {"owner": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 0, "creation_date": 1506517441, "post_id": 46448539, "comment_id": 79852860, "body": "Please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1506517410, "creation_date": 1506517410, "answer_id": 46448640, "question_id": 46448539, "link": "https://stackoverflow.com/questions/46448539/my-c-program-operation-is-stopped/46448640#46448640", "title": "My C Program operation is stopped", "body": "<ol>\n<li><p><code>scanf</code> requires a <em>pointer</em> to <code>arr[i]</code>: <code>arr + i</code> would suffice.</p></li>\n<li><p><code>sizeof(arr)</code> is actually <code>sizeof(int*)</code>. Use <code>m</code> for the number of elements. The idiom you're using only works for <em>array</em> types, <strong>not</strong> pointer types.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1506517423, "creation_date": 1506517423, "answer_id": 46448646, "question_id": 46448539, "link": "https://stackoverflow.com/questions/46448539/my-c-program-operation-is-stopped/46448646#46448646", "title": "My C Program operation is stopped", "body": "<p>The primary problem is in the statement</p>\n\n<pre><code>  scanf(\"%d\", arr[i]);\n</code></pre>\n\n<p>where <code>arr[i]</code> is of type <code>int</code>. You need to pass a pointer to type (<code>int</code>), like either</p>\n\n<pre><code>scanf(\"%d\", &amp;arr[i]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>scanf(\"%d\", arr+i);\n</code></pre>\n\n<p>Enable compiler warning to the highest level, your compiler should warn you about the expected type mismatch.</p>\n\n<p>After that, in this case, </p>\n\n<pre><code>  int n = sizeof(arr)/sizeof(arr[0]);\n</code></pre>\n\n<p>is erroneous, as <code>sizeof(arr)</code> is the same as <code>sizeof (int *)</code>. You don't need a new variable, at all. Use <code>m</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 8683101, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JfPyA.jpg?s=128&g=1", "display_name": "eeeeeeeeeeee", "link": "https://stackoverflow.com/users/8683101/eeeeeeeeeeee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1506517894, "answer_count": 2, "score": -1, "last_activity_date": 1506517423, "creation_date": 1506517109, "question_id": 46448539, "link": "https://stackoverflow.com/questions/46448539/my-c-program-operation-is-stopped", "closed_reason": "Duplicate", "title": "My C Program operation is stopped", "body": "<p>I wrote and ran this code to practice the basic algorithm. but this program operation is stopped. What is the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint bans(const void *a, const void *b) {\n    return (*(int *)a - *(int *)b);\n}\n\nint main() \n{ \n    int m, i;\n    int* arr;\n    scanf(\"%d\", &amp;m);\n    arr = (int*)malloc(sizeof(int) * m);\n    for (i = 0; i &lt; m; i++) {\n        scanf(\"%d\", arr[i]);\n    }\n    int n = sizeof(arr)/sizeof(arr[0]);\n    for (i = 0; i &lt; n; i++) printf(\"%d \", arr[i]);\n    qsort(arr, n, sizeof(arr[0]), bans);\n    for (i = 0; i &lt; n; i++) printf(\"%d \", arr[i]);\n    free(arr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "cmake", "clion"], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1506516139, "creation_date": 1506516139, "answer_id": 46448190, "question_id": 46448010, "link": "https://stackoverflow.com/questions/46448010/cmake-remove-arguments/46448190#46448190", "title": "CMake - Remove arguments", "body": "<p>No, the first string in <code>argv</code> is always the path of the executable. Actual parameters start at index 1.</p>\n\n<p>In your example <code>argv[1]</code> will contain \"-p\" and <code>argv[2]</code> will have \"8080\" since they are two separate parameters. If you want them to be passed as one parameter you either need to enclose them in quotes or remove the space between them.</p>\n"}], "owner": {"reputation": 259, "user_id": 5631039, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/03a7c72afaaea1bc33f12d411265d8b0?s=128&d=identicon&r=PG&f=1", "display_name": "gel", "link": "https://stackoverflow.com/users/5631039/gel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506516139, "creation_date": 1506515656, "question_id": 46448010, "link": "https://stackoverflow.com/questions/46448010/cmake-remove-arguments", "title": "CMake - Remove arguments", "body": "<p>I'm having some trouble with Cmake. It seems I'v done something that makes Cmake add arguments when I start my project. Below is my run configuration.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/oWcas.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oWcas.jpg\" alt=\"Current settings\"></a></p>\n\n<p>When I debug it I can see that <code>argv</code> has the value:</p>\n\n<pre><code>\"/home/gel/unix/DB1457--LAB2/cmake-build-debug/lab2\"\n</code></pre>\n\n<p>(It's the path to the compiled object-file).</p>\n\n<p>If anything, it should be <code>-p 8080</code>, right?</p>\n\n<p>Here is my CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(lab2)\n\nset(CMAKE_C_STANDARD 99)\n\nfile(GLOB_RECURSE SORUCE_FILES \"webserver/src/*.c\")\nfile(GLOB_RECURSE SOURCE_HEADERS \"webserver/includes/*.h\")\n\n\nset(INCLUDE_DIRS \"webserver/includes\")\nforeach (_headerFile $(SOURCE_HEADERS))\n    get_filename_component(_dir ${_headerFile} PATH)\n        list (APPEND INCLUDE_DIRS ${_dir})\nendforeach()\nlist(REMOVE_DUPLICATES INCLUDE_DIRS)\n\ninclude_directories(${INCLUDE_DIRS})\nadd_executable(lab2 ${SORUCE_FILES} ${HEADER_FILES})\n\nset(THREADS_PREFER_PTHREAD_FLAG ON)\nfind_package(Threads REQUIRED)\ntarget_link_libraries(lab2 Threads::Threads)\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1506515827, "post_id": 46447984, "comment_id": 79851666, "body": "Can you please elaborate on your problem and your question? Do you mean the (wrongly typed) line <code>printf(&quot;%s\\n&quot;) ptr[1]);</code>? (In the future, <b><i>copy-paste</i></b> code instead of rewriting it into the question.)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506515897, "post_id": 46447984, "comment_id": 79851719, "body": "Also note that <code>arr[1]</code> and <code>&amp;arr[1]</code> might be pointing to the same location, but sematically they are different. <code>arr[1]</code> is equal to <code>&amp;arr[1][0]</code> which is of type <code>char *</code>. <code>&amp;arr[1]</code> is of type <code>char (*)[10]</code>."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 1, "creation_date": 1506515908, "post_id": 46447984, "comment_id": 79851728, "body": "You are not dereferencing, printf() takes a pointer to string for &quot;%s&quot;. You are giving pointer in ptr[1]."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1506521623, "post_id": 46447984, "comment_id": 79856012, "body": "&quot;<i>Why can we dereference the pointer <code>ptr[1]</code> without the *</i>&quot; where you think this is done?"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1506517202, "creation_date": 1506517202, "answer_id": 46448567, "question_id": 46447984, "link": "https://stackoverflow.com/questions/46447984/pointer-in-array-of-pointer-print-value-without/46448567#46448567", "title": "pointer in array of pointer print value without *", "body": "<p><code>%s</code> specifier in printf expects and argument of type <code>char *</code> (it should point to a null terminated string). <code>ptr[1]</code> is of <code>char *</code> type. So, no need to apply dereference operator here.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8682847, "user_type": "registered", "profile_image": "https://graph.facebook.com/1301391153339893/picture?type=large", "display_name": "Quoc Anh Pham", "link": "https://stackoverflow.com/users/8682847/quoc-anh-pham"}, "edited": false, "score": 0, "creation_date": 1506521283, "post_id": 46448815, "comment_id": 79855747, "body": "so why i use *(ptr+1) it prints the same value"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506524187, "post_id": 46448815, "comment_id": 79857832, "body": "&quot;you are not dereferencing.&quot; --&gt; With <code>ptr[1]</code> looks like code <i>is</i> de-referencing <code>ptr</code> at offset 1.  Of course that results in a <code>char *</code>, which does not need another de-reference operation for printing with <code>&quot;%s&quot;</code>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 11, "user_id": 8682847, "user_type": "registered", "profile_image": "https://graph.facebook.com/1301391153339893/picture?type=large", "display_name": "Quoc Anh Pham", "link": "https://stackoverflow.com/users/8682847/quoc-anh-pham"}, "edited": false, "score": 0, "creation_date": 1506622775, "post_id": 46448815, "comment_id": 79906777, "body": "Because the end up at the same value @QuocAnhPham, check my updated answer, hope that helps! BTW, you have two helpful answers, consider <i>accepting</i> one by clicking on the Tick Mark on the left of an answer."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 0, "last_activity_date": 1506622542, "last_edit_date": 1506622542, "creation_date": 1506517894, "answer_id": 46448815, "question_id": 46447984, "link": "https://stackoverflow.com/questions/46447984/pointer-in-array-of-pointer-print-value-without/46448815#46448815", "title": "pointer in array of pointer print value without *", "body": "<p>You got it wrong. Here:</p>\n\n<pre><code>printf(\"%s\\n\", ptr[1]);\n</code></pre>\n\n<ul>\n<li>The format <code>%s</code> expects a pointer to <code>char</code>.</li>\n<li><code>ptr[1]</code> is a <code>char</code> pointer.</li>\n</ul>\n\n<blockquote>\n  <p>why I use *(ptr+1) it prints the same value?</p>\n</blockquote>\n\n<p>Because this will apply pointer arithmetics, which involve <code>ptr</code>, add 1 to it (by one here we mean the size of an <code>int</code>), and then use the <code>*</code> operator and refer to the content of this memory address (where it points) to, which is the same value as <code>ptr[1]</code>.</p>\n\n<hr>\n\n<p><code>arr[1]</code> and <code>&amp;arr[1]</code> might be pointing to the same location, but sematically they are different. <code>arr[1]</code> is equal to <code>&amp;arr[1][0]</code> which is of type <code>char*</code>. <code>&amp;arr[1]</code> is of type <code>char (*)[10]</code>, as Some programmer dude said.</p>\n"}], "owner": {"reputation": 11, "user_id": 8682847, "user_type": "registered", "profile_image": "https://graph.facebook.com/1301391153339893/picture?type=large", "display_name": "Quoc Anh Pham", "link": "https://stackoverflow.com/users/8682847/quoc-anh-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1506622542, "creation_date": 1506515616, "last_edit_date": 1506521325, "question_id": 46447984, "link": "https://stackoverflow.com/questions/46447984/pointer-in-array-of-pointer-print-value-without", "title": "pointer in array of pointer print value without *", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n char arr[3][10];\n char *ptr[3];\n strcpy(arr[1],\"abcde\");\n ptr[1]=arr[1];\n printf(\"%s\\n\",arr[1]);\n printf(\"%p\\n\", &amp;arr[1]);\n printf(\"%p\\n\", ptr[1]);\n printf(\"%p\\n\", &amp;ptr[1]);\n printf(\"%s\\n\",ptr[1]);\n printf(\"%s\\n\", *(ptr+1));\n return 0;\n}\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>abcde\n0x7ffdcbbd8daa\n0x7ffdcbbd8daa\n0x7ffc30ed1188\nabcde\nabcde\n</code></pre>\n\n<p>I know <code>ptr</code> is an array of pointer. Dereferencing a pointer needs a unary operator before it. Why can we dereference the pointer <code>ptr[1]</code> without the  <code>*</code>? Thanks</p>\n"}, {"tags": ["java", "c", "java-native-interface", "swig"], "answers": [{"tags": [], "owner": {"reputation": 6543, "user_id": 5171540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pAeRy.png?s=128&g=1", "display_name": "WillShackleford", "link": "https://stackoverflow.com/users/5171540/willshackleford"}, "is_accepted": true, "score": 1, "last_activity_date": 1506713420, "creation_date": 1506713420, "answer_id": 46495740, "question_id": 46447886, "link": "https://stackoverflow.com/questions/46447886/handle-function-pointer-in-a-structure-in-swig-java/46495740#46495740", "title": "Handle function pointer in a structure in SWIG java", "body": "<p>I think you will need to add some C code that will do the pointer dereference that you could then call. You can add a function in the interface file that will get pasted into the test_app_wrap.c.</p>\n\n<p>So test_app.i becomes:</p>\n\n<pre><code>%module  test_app \n%{\n#include \"example.h\"\n\n    void callwebsocketreq(sample_websocket_module *mod, \n               sample_websocket_handle * handle,\n                sample_websocket_config * config) {\n        (*mod-&gt;websocket_request)(handle,config);\n    }\n\n%}\n\n%include \"example.h\"\nvoid callwebsocketreq(sample_websocket_module *mod, \n               sample_websocket_handle * handle,\n                sample_websocket_config * config);\n</code></pre>\n\n<p>Now there  will be a callwebsocketreq method in the test_app.java that you can call to pass in those arguments.</p>\n"}], "owner": {"reputation": 53, "user_id": 8072584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-vN-O3-LeQ-M/AAAAAAAAAAI/AAAAAAAAAjA/YpfgN4si0L8/photo.jpg?sz=128", "display_name": "asharma", "link": "https://stackoverflow.com/users/8072584/asharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "accepted_answer_id": 46495740, "answer_count": 1, "score": 1, "last_activity_date": 1506713420, "creation_date": 1506515326, "last_edit_date": 1506515663, "question_id": 46447886, "link": "https://stackoverflow.com/questions/46447886/handle-function-pointer-in-a-structure-in-swig-java", "title": "Handle function pointer in a structure in SWIG java", "body": "<p>I am very new to this question answer forum and same in the swig. I am not sure if I am following correct steps to generate wrappers for java and C using swig interface file.</p>\n\n<p>my header <code>example.h</code> file looks like below</p>\n\n<pre><code>#ifndef INCLUDE_ARTIK_WEBSOCKET_H_\n#define INCLUDE_ARTIK_WEBSOCKET_H_\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\ntypedef enum {\n    SAMPLE_WEBSOCKET_CLOSED = 1,\n    SAMPLE_WEBSOCKET_CONNECTED,\n    SAMPLE_WEBSOCKET_HANDSHAKE_ERROR\n} sample_websocket_connection_state;\n\ntypedef void *sample_websocket_handle;\n\ntypedef struct {\n    char *uri;\nvoid *private_data;\n} sample_websocket_config;\n\n\ntypedef struct {\n    void(*websocket_request) (\n                sample_websocket_handle * handle,\n                sample_websocket_config * config\n                );\n\n} sample_websocket_module;\n\nextern const sample_websocket_module websocket_module;\n\n#ifdef __cplusplus\n}\n#endif\n#endif\n</code></pre>\n\n<p>And my interface file <code>test_app.i</code> looks like below:</p>\n\n<pre><code>%module  test_app \n%{\n#include \"example.h\"\n%}\n\n%include \"example.h\"\n</code></pre>\n\n<p>And when I generate wrappers using command <code>swig -java test_app.i</code> which generates following files </p>\n\n<ol>\n<li>sample_websocket_config.java</li>\n<li>sample_websocket_module.java</li>\n<li>SWIGTYPE_p_void.java</li>\n<li>test_app.java</li>\n<li>test_app_wrap.c</li>\n<li>sample_websocket_connection_state.java</li>\n<li>SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void.java</li>\n<li><p>test_appJNI.java</p>\n\n<pre><code>typedef struct {\nvoid(*websocket_request) (\n            sample_websocket_handle * handle,\n            sample_websocket_config * config\n            );\n</code></pre>\n\n<p>} sample_websocket_module;</p></li>\n</ol>\n\n<p>above code generates <code>sample_websocket_module.java</code> class which looks like below</p>\n\n<pre><code>public class sample_websocket_module {\n  private transient long swigCPtr;\n  protected transient boolean swigCMemOwn;\n\n  protected sample_websocket_module(long cPtr, boolean cMemoryOwn) {\n    swigCMemOwn = cMemoryOwn;\n    swigCPtr = cPtr;\n  }\n\n  protected static long getCPtr(sample_websocket_module obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n\n  protected void finalize() {\n    delete();\n  }\n\n  public synchronized void delete() {\n    if (swigCPtr != 0) {\n      if (swigCMemOwn) {\n        swigCMemOwn = false;\n        test_appJNI.delete_sample_websocket_module(swigCPtr);\n      }\n      swigCPtr = 0;\n    }\n  }\n\n  public void setWebsocket_request(SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void value) {\n    test_appJNI.sample_websocket_module_websocket_request_set(swigCPtr, this, SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void.getCPtr(value));\n  }\n\n  public SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void getWebsocket_request() {\n    long cPtr = test_appJNI.sample_websocket_module_websocket_request_get(swigCPtr, this);\n    return (cPtr == 0) ? null : new SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void(cPtr, false);\n  }\n\n  public sample_websocket_module() {\n    this(test_appJNI.new_sample_websocket_module(), true);\n  }\n\n}\n</code></pre>\n\n<p>So I am not sure how to provide arguments to this function as it has merged both the arguments and created a separate class <code>SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void.java</code>. </p>\n\n<pre><code>    public class SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void {\n  private transient long swigCPtr;\n\n  protected SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void(long cPtr, @SuppressWarnings(\"unused\") boolean futureUse) {\n    swigCPtr = cPtr;\n  }\n\n  protected SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void() {\n    swigCPtr = 0;\n  }\n\n  protected static long getCPtr(SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void obj) {\n    return (obj == null) ? 0 : obj.swigCPtr;\n  }\n}\n</code></pre>\n\n<p>and this is the function which is using above class. So how can I provide values to this function.</p>\n\n<pre><code>public void setWebsocket_request(SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void value) {\n    test_appJNI.sample_websocket_module_websocket_request_set(swigCPtr, this, SWIGTYPE_p_f_p_p_void_p_sample_websocket_config__void.getCPtr(value));\n  }\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "callback", "language-lawyer", "function-pointers"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506513740, "post_id": 46447211, "comment_id": 79850339, "body": "In my experience, compilers tend to do a poor job at inlining function pointer calls even if the function pointer&#39;s value can be determined at compile-time. You could try to toss in the <code>inline</code> keyword. As far as I know, there is nothing in the standard preventing the optimization."}], "answers": [{"comments": [{"owner": {"reputation": 8196, "user_id": 395851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7417d04460fbc27bc0ac99204cfce9c?s=128&d=identicon&r=PG", "display_name": "dbrank0", "link": "https://stackoverflow.com/users/395851/dbrank0"}, "edited": false, "score": 1, "creation_date": 1506515004, "post_id": 46447727, "comment_id": 79851148, "body": "This should also be resloved by using link time optimization (-flto with GCC) during compile and &quot;link&quot; steps."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1506516448, "post_id": 46447727, "comment_id": 79852096, "body": "I&#39;m thinking perhaps it&#39;s forbidden because of the possibility pointer comparison. <code>do_stuff()</code> might be trying to compare the received pointer to <code>my_callback_function()</code>. With the optimization on, the comparison will say <code>my_callback_function == my_callback_helper</code>, and it might not be legal for two different objects to have the same address. If it is illegal, then it&#39;s a little unfortunate the jump can&#39;t be eliminated. Maybe it&#39;d be better for fn-casts to be implementation-defined rather than undefined."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1506514804, "creation_date": 1506514804, "answer_id": 46447727, "question_id": 46447211, "link": "https://stackoverflow.com/questions/46447211/optimizing-out-helper-functions/46447727#46447727", "title": "Optimizing out helper functions", "body": "<p>There's nothing in the standard that directly prevents this optimization. But in practice, it's not always possible for compilers when they don't have a \"full picture\".</p>\n\n<p>You have taken the address of <code>my_callback_helper</code>. So compiler can't easily optimize it out because it doesn't know what <code>do_stuff</code> does with it. In a separate module where <code>do_stuff</code> is defined, compiler doesn't know that it can simply use/call <code>my_callback_function</code> in place of its argument (<code>my_callback_helper</code>). In order to optimize out <code>my_callback_helper</code> completely, compiler has to know what <code>do_stuff</code> does as well. But <code>do_stuff</code> is an external function whose definition isn't available to compiler. So this sort of optimization may happen if you provide a definition for <code>do_stuff</code> and all its uses.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1506514804, "creation_date": 1506513227, "last_edit_date": 1506513452, "question_id": 46447211, "link": "https://stackoverflow.com/questions/46447211/optimizing-out-helper-functions", "title": "Optimizing out helper functions", "body": "<p>This is more or less a request for clarification on\n<a href=\"https://stackoverflow.com/questions/559581/casting-a-function-pointer-to-another-type/561040#561040\">Casting a function pointer to another type</a> with example code</p>\n\n<pre><code>struct my_struct;\nvoid my_callback_function(struct my_struct* arg);\nvoid do_stuff(void (*cb)(void*));\n\nstatic void my_callback_helper(void* pv)\n{\n    my_callback_function(pv);\n}\nint main()\n{\n    do_stuff(&amp;my_callback_helper);\n}\n</code></pre>\n\n<p>The answer says a \"good\" compiler should be able to optimize out \nthe <code>my_callback_helper()</code> function but I found no compiler at <a href=\"https://godbolt.org/g/Km5nqy\" rel=\"noreferrer\">https://gcc.godbolt.org</a>\n that does it and the helper function gets always generated even if it's <a href=\"https://godbolt.org/g/Km5nqy\" rel=\"noreferrer\">just a jump to <code>my_callback_function()</code></a> (-O3):</p>\n\n<pre><code>my_callback_helper:\n        jmp     my_callback_function\nmain:\n        subq    $8, %rsp\n        movl    $my_callback_helper, %edi\n        call    do_stuff\n        xorl    %eax, %eax\n        addq    $8, %rsp\n        ret\n</code></pre>\n\n<p>So my question is: Is there anything in the standard that prevents compilers from eliminating the helper?</p>\n"}, {"tags": ["c", "linker", "config"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1506513317, "post_id": 46447206, "comment_id": 79850074, "body": "If and how this might work, is 100% depending on your compiler toolset."}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1506513381, "post_id": 46447206, "comment_id": 79850115, "body": "So what compiler/toolchain are you using?"}, {"owner": {"reputation": 1, "user_id": 8104151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34096020e8c8d54d65a112860e99605?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8104151/karol"}, "edited": false, "score": 0, "creation_date": 1506513920, "post_id": 46447206, "comment_id": 79850473, "body": "Ac6 STM32 MCU GCC, Gnu Make builder"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1506518688, "post_id": 46447206, "comment_id": 79853754, "body": "Usually it is done the opposite way. The C program can import symbols from linker script, which is making perfect sense, as the linker is the primary source of memory layout."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1506598490, "post_id": 46447206, "comment_id": 79891021, "body": "@Eugene Sh. is right, and it is done this way for many reasons. Just do it the ES way."}], "owner": {"reputation": 1, "user_id": 8104151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34096020e8c8d54d65a112860e99605?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/8104151/karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506514133, "creation_date": 1506513219, "last_edit_date": 1506514133, "question_id": 46447206, "link": "https://stackoverflow.com/questions/46447206/send-variable-to-linker-via-source-code", "title": "Send variable to linker via source code", "body": "<p>In some header I've got FLASH_BASE and FLASH_SIZE makro and I would like to use them in linker script. I have tried something like this:</p>\n\n<pre><code>    // main.c\n    long CURRENT_FLASH_START = FLASH_BASE + FLASH_SIZE / 2;\n    int main(void) {\n        return 0;\n    }\n\n    // s_FLASH.ld\n    MEMORY\n    {\n        RAM (xrw)      : ORIGIN = 0x20000000, LENGTH = 48K\n        RAM2 (xrw)      : ORIGIN = 0x10000000, LENGTH = 16K\n        FLASH (rx)      : ORIGIN = CURRENT_FLASH_START, LENGTH = 256K\n    }\n</code></pre>\n\n<p>But in map file I see that place for code in flash starts at address 0. Is there any possibilty to use variable from makro (from .h file) in linker script file? I use Ac6 STM32 MCU GCC with Gnu Make builder.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506513215, "post_id": 46447174, "comment_id": 79850008, "body": "&quot;is actually an ascii number&quot; - not necessarily."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506513314, "post_id": 46447174, "comment_id": 79850070, "body": "<code>if(int_value == char_value - &#39;0&#39;)</code>"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1506513518, "post_id": 46447174, "comment_id": 79850189, "body": "You should also cast the result (int)(char_value - &#39;0&#39;) or the compiler will issue warnings."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1506513260, "creation_date": 1506513260, "answer_id": 46447219, "question_id": 46447174, "link": "https://stackoverflow.com/questions/46447174/trouble-comparing-value-in-c/46447219#46447219", "title": "Trouble comparing value in C", "body": "<p>You can use the idiom <code>c - '0'</code> to convert a <code>char</code> <code>c</code> to its equivalent digit.</p>\n\n<p>This is an expression of type <code>int</code>.</p>\n\n<p>Note that it works in any character <em>encoding</em> supported by the C Standard, since such an encoding must order 0 to 9 consecutively.</p>\n"}], "owner": {"reputation": 15, "user_id": 7088959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mm7ce.gif?s=128&g=1", "display_name": "Clint.Westwood", "link": "https://stackoverflow.com/users/7088959/clint-westwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1506513402, "accepted_answer_id": 46447219, "answer_count": 1, "score": 0, "last_activity_date": 1506513334, "creation_date": 1506513132, "question_id": 46447174, "link": "https://stackoverflow.com/questions/46447174/trouble-comparing-value-in-c", "closed_reason": "Duplicate", "title": "Trouble comparing value in C", "body": "<p>I am having problem comparing an int value and a char value in C. Lets say I variable int value1 that is 0 and a char that has value '0'. I know that that char's value is actually an ascii number and that '0' is 48, but how do I compare int's 0 value with chars '0' value, in an if statement as a example?</p>\n"}, {"tags": ["c", "linux", "binary", "elf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506512635, "post_id": 46446957, "comment_id": 79849642, "body": "If you don&#39;t understand the usefulness of alignment (in general) then perhaps start your research there first? Then its use in an ELF file should become pretty obvious."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4188638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f30dc832f1cc4b3fb8ddb96c34c3c51?s=128&d=identicon&r=PG&f=1", "display_name": "vigneshbalu", "link": "https://stackoverflow.com/users/4188638/vigneshbalu"}, "edited": false, "score": 0, "creation_date": 1506575653, "post_id": 46460480, "comment_id": 79877572, "body": "i am trying to manipulate the reloc contents of .plt.got. this section has sh_addralign=3 and sh_entsize = 0, so i am trying to understand how sh_addralign works to disect the section contents data.. thanks for response.."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1506569127, "creation_date": 1506569127, "answer_id": 46460480, "question_id": 46446957, "link": "https://stackoverflow.com/questions/46446957/how-to-use-the-sh-addralign/46460480#46460480", "title": "How to use the sh_addralign?", "body": "<blockquote>\n  <p>I am working on elf reader, I couldn't understand the purpose of \"sh_addralign\"</p>\n</blockquote>\n\n<p>For an ELF <em>reader</em>, <code>sh_addralign</code> serves no purpose.</p>\n\n<p>Its only purpose is to tell the linker (which <em>writes</em> ELF) that it must arrange for the section contents to be properly aligned in memory.</p>\n"}, {"tags": [], "owner": {"reputation": 1180, "user_id": 4603507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98e667a16bc113e946a343dfa84de4c?s=128&d=identicon&r=PG&f=1", "display_name": "Olsonist", "link": "https://stackoverflow.com/users/4603507/olsonist"}, "is_accepted": false, "score": 0, "last_activity_date": 1548101867, "creation_date": 1548101867, "answer_id": 54297220, "question_id": 46446957, "link": "https://stackoverflow.com/questions/46446957/how-to-use-the-sh-addralign/54297220#54297220", "title": "How to use the sh_addralign?", "body": "<p>The <em>original creator</em> of that section expected that alignment.</p>\n\n<p>So for example, if it's 0, then the creator doesn't know or care. If it's a string table then the creator might use 1 but could use 0, 1, 2, 4, 8, ... If, as in the example, the section contains a double then the creator could say 8, 16, .... If it's RISC-V text then the alignment would be 4. If the section is being addressed with cache line aware code then it might want 64 byte alignment.</p>\n\n<p>Only the creator knows these requirements and they are expecting the next tool in the chain to respect those alignments. Recall that ELF was spec'd in the mid 90s. Today with GB memories, wasting a small amount of alignment space for better performance is a good tradeoff. Read that as a recommendation to over-align.</p>\n"}], "owner": {"reputation": 11, "user_id": 4188638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f30dc832f1cc4b3fb8ddb96c34c3c51?s=128&d=identicon&r=PG&f=1", "display_name": "vigneshbalu", "link": "https://stackoverflow.com/users/4188638/vigneshbalu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1548101867, "creation_date": 1506512440, "question_id": 46446957, "link": "https://stackoverflow.com/questions/46446957/how-to-use-the-sh-addralign", "title": "How to use the sh_addralign?", "body": "<p>I am working on elf reader, I couldn't understand the purpose of \"sh_addralign\" from the elf doc. it says as below</p>\n\n<blockquote>\n  <p>Some sections have address alignment constraints. For\n  example, if a section holds a doubleword, the system must ensure\n  doubleword alignment for the entire section. That is, the value of\n  sh_addr must be congruent to 0, modulo the value of sh_addralign.\n  Currently, only 0 and positive integral powers of two are allowed.\n  Values 0 and 1 mean the section has no alignment constraints. \"</p>\n</blockquote>\n\n<p>Can someone please explain me with some calcualation? and also why it is important ?</p>\n"}, {"tags": ["c", "linux", "glib", "dbus", "gio"], "answers": [{"comments": [{"owner": {"reputation": 712, "user_id": 552351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f875e89fdac3c49fd60df7bc01858429?s=128&d=identicon&r=PG", "display_name": "xXx_CodeMonkey_xXx", "link": "https://stackoverflow.com/users/552351/xxx-codemonkey-xxx"}, "edited": false, "score": 0, "creation_date": 1506589598, "post_id": 46453055, "comment_id": 79885230, "body": "Thank you for the reply. I understand almost all of what you are saying. But what is this &quot;any reason&quot;? Could you please make an example? When I am implementing the DBUS server this never happens. Also, I am requesting the property value long after the proxy is created."}], "tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1506530272, "creation_date": 1506530272, "answer_id": 46453055, "question_id": 46446919, "link": "https://stackoverflow.com/questions/46446919/glib-null-in-dbus-property/46453055#46453055", "title": "Glib: NULL in DBUS property", "body": "<p>The generated code uses <code>g_dbus_proxy_get_cached_property()</code> which will never do blocking I/O: if the property is not in cache for any reason, you will not get the correct value. A common gotcha would be fetching the property value immediately after creating the proxy: <code>g_dbus_proxy_new()</code> loads the property values asynchronously so they should not be available at that point.</p>\n\n<p>The best way to deal with properties is to use the property change notifications. The generated GObjects \"notify\" signal should be the easiest way in your case:</p>\n\n<pre><code>void\non_some_property_notify (GObject    *proxy,\n                         GParamSpec *pspec,\n                         gpointer    user_data)\n{\n    GVariant* data = interface_name_get_some_property(proxy);\n    // Do something with new prop value here\n}\n\n// TODO: check what the actual generated property name is\ng_signal_connect (proxy, \"notify::someProperty\",\n                  G_CALLBACK (on_some_property_notify), user_data);\n</code></pre>\n"}], "owner": {"reputation": 712, "user_id": 552351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f875e89fdac3c49fd60df7bc01858429?s=128&d=identicon&r=PG", "display_name": "xXx_CodeMonkey_xXx", "link": "https://stackoverflow.com/users/552351/xxx-codemonkey-xxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506530272, "creation_date": 1506512332, "last_edit_date": 1506513383, "question_id": 46446919, "link": "https://stackoverflow.com/questions/46446919/glib-null-in-dbus-property", "title": "Glib: NULL in DBUS property", "body": "<p>I am using <code>gdbus-codegen</code> to generate code for DBUS client.\nI have GVariant property in third party DBUS server <code>&lt;property name=\"someProperty\" type=\"(iiii)\" access=\"read\"/&gt;</code></p>\n\n<p>When I call the autogenerated method to get the property value:</p>\n\n<pre><code>GVariant* data = interface_name_get_some_property(proxy);\n</code></pre>\n\n<p>some times the data is <code>NULL</code>. The comment in the autogenerated code states: </p>\n\n<blockquote>\n  <p>Returns: (transfer none): The property value or %NULL if the property is not set. Do not free the returned value, it belongs to @object.</p>\n</blockquote>\n\n<p>What does \"not set\" means and how should I treat this situation?\nI thought that by default (if option G_DBUS_PROXY_FLAGS_DO_NOT_LOAD_PROPERTIES is not set) glib loads all properties and they all should be set.</p>\n"}, {"tags": ["c", "language-lawyer", "c99"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1506511780, "post_id": 46446726, "comment_id": 79849136, "body": "Never mind, I found a perfect duplicate: <a href=\"https://stackoverflow.com/questions/3430315/what-is-the-purpose-of-static-keyword-in-array-parameter-of-function-like-char\" title=\"what is the purpose of static keyword in array parameter of function like char\">stackoverflow.com/questions/3430315/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1506511782, "post_id": 46446726, "comment_id": 79849138, "body": "<a href=\"http://en.cppreference.com/w/c/language/array\" rel=\"nofollow noreferrer\">This array declaration reference</a> should be helpful."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1506511833, "post_id": 46446726, "comment_id": 79849164, "body": "I search SO for like one hour with all the possible ways to express my question without luck. I write the question: BAM! related question is perfect duplicate. Thanks SO."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506511843, "post_id": 46446726, "comment_id": 79849171, "body": "It means that the array passed must contain at least 10 elements (and it can&#39;t be a NULL pointer)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506511958, "post_id": 46446726, "comment_id": 79849242, "body": "The duplicate is good but what it doesn&#39;t mention is the actual language spec, found in C11 6.7.6.2:"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506512018, "post_id": 46446726, "comment_id": 79849274, "body": "<code>In addition to optional type qualifiers and the keyword static, the [ and ] may delimit an expression or *. If they delimit an expression (which specifies the size of an array), the expression shall have an integer type. If the expression is a constant expression, it shall have a value greater than zero. The element type shall not be an incomplete or function type. The optional type qualifiers and the keyword static shall appear only in a declaration of a function parameter with an array type, and then only in the outermost array type derivation.</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506512035, "post_id": 46446726, "comment_id": 79849284, "body": "@Lundin maybe you should add it to the duplicate for completeness."}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "closed_date": 1506511779, "answer_count": 0, "score": 2, "last_activity_date": 1506511647, "creation_date": 1506511647, "question_id": 46446726, "link": "https://stackoverflow.com/questions/46446726/what-does-static-mean-in-intstatic-10", "closed_reason": "Duplicate", "title": "What does static mean in int[static 10]?", "body": "<p>I found a rather strange and unfamiliar usage of the <code>static</code> keyword in C99 and could not find in the language specs nor by experimentation what does it mean:</p>\n\n<pre><code>void set(int t[static 10], int size)\n{\n    // do something with t, not important here\n    for (int i = 0 ; i &lt; size ; ++i) {\n        t[i] = size + i;\n    }\n}\n</code></pre>\n\n<p><kbd><a href=\"https://repl.it/Lh08\" rel=\"nofollow noreferrer\">It compiles and run fine (demo on repl.it)</a></kbd></p>\n\n<p>My question is then: <strong>what does the <code>static</code> keyword mean in C99 when applied to an array size?</strong></p>\n\n<hr>\n\n<p>Note: the following is illegal:</p>\n\n<pre><code>int t5[static 10];\n</code></pre>\n\n<blockquote>\n  <p>error: static or type qualifiers in non-parameter array declarator</p>\n</blockquote>\n"}, {"tags": ["c", "performance", "assembly", "time", "benchmarking"], "comments": [{"owner": {"reputation": 8196, "user_id": 395851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7417d04460fbc27bc0ac99204cfce9c?s=128&d=identicon&r=PG", "display_name": "dbrank0", "link": "https://stackoverflow.com/users/395851/dbrank0"}, "edited": false, "score": 0, "creation_date": 1506511223, "post_id": 46446529, "comment_id": 79848754, "body": "<a href=\"https://stackoverflow.com/questions/2588310/measuring-cpu-clocks-consumed-by-a-process\" title=\"measuring cpu clocks consumed by a process\">stackoverflow.com/questions/2588310/&hellip;</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1506511262, "post_id": 46446529, "comment_id": 79848781, "body": "When benchmarking and measuring, do it <i>multiple times</i>. Perhaps even thousands or <i>millions</i> of times. Then list the max, min, average and mean time. You need to do it multiple times because on modern multi-tasking systems it evens out the difference in what the system is doing when you measure."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506511426, "post_id": 46446529, "comment_id": 79848893, "body": "Basically, you have to use system-specific APIs for high resolution timers. Then also the result will vary depending on system. For example it is impossible to benchmark code with exact results on a desktop OS, because it is not a RTOS and there are other programs running on the computer. You can get a pretty good idea of efficiency though, particularly when comparing two different snippets."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506513218, "post_id": 46446529, "comment_id": 79850013, "body": "@Someprogrammerdude &quot;Millions&quot;.  The last time I did this I had to loop hundreds of millions of times.  See <a href=\"https://stackoverflow.com/questions/45380085/most-efficient-method-to-print-test/45381357#45381357\" title=\"most efficient method to print test\">stackoverflow.com/questions/45380085/&hellip;</a> ."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 4, "creation_date": 1506513535, "post_id": 46446529, "comment_id": 79850202, "body": "The duplicate answer is far from perfect.  @OP: on modern architecture CPUs like x86 you basically can&#39;t even measure single instruction meaningfully, as the single CPU core is capable to run several instructions at the same time, so without showing the code around instruction it doesn&#39;t make much sense to time just single one. An individual well separated instruction without dependencies may perform in benchmark at the same speed as other one, yet in real code one of them can be stalling CPU due to clash with other instructions over CPU resources, while the other may run together with them."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1506513812, "post_id": 46446529, "comment_id": 79850388, "body": "Basically on modern x86 CPU almost everything is 1 clock in ideal case (when measured separately), except few rare exceptions like division, etc. All the basic arithmetic and register manipulation is 1c, but when you write real code with them, the total performance is completely different, as the total time for N instructions may be like N/2 clocks on average easily, but you will get several tens-hundreds cycles stalls due to cache misses, mispredicted branches, register dependencies, etc. For good performance it&#39;s more important to design data/code structure well, than to use particular ins."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1506514109, "post_id": 46446529, "comment_id": 79850594, "body": "In short benchmarking is BS.  It is sooo easy to manipulate the results even if you are dealing with a fixed sequence of machine code instructions you can still manipulate their performance (in some cases, not always depends on the system).  High level code of course is very easy to manipulate and change the performance.  I recommend Michael Abrash the Zen of Assembly language, the 8088 was obsolete when it came out and is of course now but if that is all you see you are missing the whole point, the foundation applies to all of these performance questions..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506514265, "post_id": 46446529, "comment_id": 79850689, "body": "The only correct answer here is not using system timers, etc, it is to watch the code execute in a simulation, to be able to watch each step of the pipe, and manipulate the fetches, etc, to not stall the pipe or otherwise affect the code under test.  Anything short of that is not a very god measurement.  And again, yes, and is faster than add, absolutely, but they give enough room in the clock cycle to cover the longest pole in the tent, add is a short pole.  So to see the difference you would have to be able to see the actual analog of the logic which you cant but you can sim."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506514276, "post_id": 46446529, "comment_id": 79850691, "body": "you can try with pspice or something like that."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506514397, "post_id": 46446529, "comment_id": 79850769, "body": "you are running on top of an operating system against dram, even if bare metal you will see a variation in time against dram.  get it out of dram you still have operating system and your surrounding code possibly affecting the code under test.  at a minimum you need to put a loop of at least two around each test to get the test into the cache and off of dram.  if the test is remotely accurate the first one will be slower than the ones that follow and they may vary but by less of a percentage."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506515689, "post_id": 46446529, "comment_id": 79851587, "body": "@Lundin: This is not a duplicate.  Using high-rez timers won&#39;t make the OP&#39;s approach work in this case.  If those loops <i>don&#39;t</i> optimize away, then optimization is probably disabled and the results are just measuring loop overhead.  Short sequences of asm can&#39;t be fully characterized by just putting them in a loop and timing it, and the OP is doing that with C statements, not asm.  Working on an answer."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1506515938, "post_id": 46446529, "comment_id": 79851740, "body": "Are you sure that your loops aren&#39;t optimized away? See <a href=\"https://godbolt.org/g/GNY4PD\" rel=\"nofollow noreferrer\">here</a> the differences between the generated codes. Misuring unoptimized code doesn&#39;t seem really useful to me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1506516405, "post_id": 46446529, "comment_id": 79852068, "body": "@Bob__ I believe that the loops are not optimized because if I add another zero to the number of loops the execution of the loops takes 10 times more which. In my opinion this means that the code in the loop executes as many times as the loops says which means that the loops are not optimized. Is this correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506516474, "post_id": 46446529, "comment_id": 79852115, "body": "@old_timer Thank you for the information that you wrote here. Can you post an answer so I can accept it? I now understand that it is very hard to properly measure the performance of an instruction on modern architectures but your information is still interesting and relevant. Thank you."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519321, "post_id": 46446529, "comment_id": 79854241, "body": "Closed as a duplicate of your other question about this code.  The right answer is more or less what <a href=\"https://stackoverflow.com/a/46447910/224132\">@Art says</a>: This measure technique won&#39;t work for this small a chunk of code.  CPU performance doesn&#39;t work like that anymore, especially not when you&#39;re only looking indirectly through an optimizing compiler.  See <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a> and other links in the <a href=\"https://stackoverflow.com/tags/x86/info\">x86 tag wiki</a> if you&#39;re interested in x86."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506521248, "post_id": 46446529, "comment_id": 79855716, "body": "<a href=\"https://en.wikipedia.org/wiki/AND_gate\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/AND_gate</a> and <a href=\"https://en.wikipedia.org/wiki/Adder_(electronics)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Adder_(electronics)</a> assuming it takes the same amount of work to fetch the operands and store them and such and simply comparing and vs add.  and is one gate which you could expand into transistors, a full adder though is three levels, without any other knowledge you can assume it takes three times as long for the adder to resolve a bit, this is analog/physics.  In the digital domain you feed the inputs to the and or adder on a clock edge (change their input state) then you wait for them to settle then sample the result."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1506521370, "post_id": 46446529, "comment_id": 79855827, "body": "but you design your system such that at least add and and have enough time to finish in a prescribed number of clocks, ideally one, lets say it is one, so you do your timing analysis (very doubtful that add or and are the long poles in the tent) and determine from the things you designed to be latched in one clock cycle what is the longest/slowest one, and either change the design or call that the fastest you can go with this design.  that period of time is going to be long enough for add or and to settle so you wont be able to measure the differences in this way with existing silicon."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1506518343, "post_id": 46448460, "comment_id": 79853497, "body": "Also turbo and power-saving CPU frequency changes, since the OP is using wall-clock time instead of performance counters to count core clock cycles.  But more importantly, the OP is mostly just measuring loop overhead."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519653, "post_id": 46448460, "comment_id": 79854485, "body": "If you use <code>volatile counter</code>, you&#39;ll just be measuring store-forwarding latency.  Also, using <code>clock()</code> inside the loop is totally wrong.  <code>clock()</code> itself is <i>much</i> slower than the code under test here.  If you want to measure <code>+</code> throughput or latency, you need an unrolled loop.  Writing a microbenchmark like this in C just doesn&#39;t work if you really want to be measuring the x86 <code>add</code> or <code>lea</code> instructions vs. x86 <code>and</code> instructions."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519765, "post_id": 46448460, "comment_id": 79854569, "body": "This is the same problem as in <a href=\"https://stackoverflow.com/questions/46433208/which-is-faster-imm64-or-m64-for-x86-64\" title=\"which is faster imm64 or m64 for x86 64\">stackoverflow.com/questions/46433208/&hellip;</a>, which is asking about <code>mov rax, imm64</code> vs. <code>mov rax, [memory]</code> for getting constants into register.  At least the OP there wrote functions in asm, but <a href=\"https://stackoverflow.com/questions/46433208/which-is-faster-imm64-or-m64-for-x86-64#comment79853060_46433208\">the test method still buried the results</a>."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506521036, "post_id": 46448460, "comment_id": 79855566, "body": "@PeterCordes Good point; I&#39;ve removed that part of the answer.  I would have assumed that the volatile counter wouldn&#39;t make a difference since it was outside the sampled region, but you&#39;re almost certainly right about the overhead from <code>clock()</code> being more significant than the loop overhead.  Not much the OP <i>can</i> do to keep the benchmark mechanism from dominating with such a small amount of actual code, though."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506522495, "post_id": 46448460, "comment_id": 79856613, "body": "I replied to the part about <code>volatile</code> before I noticed you had <code>clock()</code> inside the loop.  It&#39;s mostly true that keeping a loop counter in memory wouldn&#39;t affect a loop body that used <code>call clock</code> / <code>and edx, ebp</code> / <code>call clock</code> (plus much more math for the <code>clock</code> results)...  x86&#39;s <code>rdtsc</code> instruction isn&#39;t serializing, though, so out-of-order execution can still overlap iterations.  It&#39;s slow enough that a <code>volatile</code> loop counter probably wouldn&#39;t still be the bottleneck, though."}], "tags": [], "owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1506520772, "last_edit_date": 1506520772, "creation_date": 1506516902, "answer_id": 46448460, "question_id": 46446529, "link": "https://stackoverflow.com/questions/46446529/what-is-the-most-efficient-and-correct-way-to-measure-the-time-it-takes-for-some/46448460#46448460", "title": "What is the most efficient and correct way to measure the time it takes for some instructions to execute?", "body": "<p>The reason the timings vary is because running your program isn't the only thing the computer is doing.  There are several things that might cause the program to take slightly longer or shorter:</p>\n\n<ol>\n<li>Other programs need to be given the CPU.  Even if you aren't running other programs, the operating system will be.  Any time it decides to switch contexts, there's a fair amount of work it needs to do, like backing up the registers to memory and restoring the other program's state.  This is likely the dominant factor for your program.</li>\n<li>Cache misses: not likely to be a major issue here, since most of your memory accesses are going to be in one of two pages: the top of the stack and the region where the loader puts your constants.  But those might not be in cache the <em>first</em> time they're loaded, and that would make a difference.  In a more complicated program, this would likely be a more significant factor.</li>\n<li>Blocking system calls.  Any function call that depends on a physical resource (network, file access, etc) may need to delay until that resource becomes available.  Depending on what other programs are using that resource, the time this takes could vary.</li>\n</ol>\n\n<p>The solution isn't to try to control for all these; that isn't practical.  Just run the benchmark a few million times to average out all the noise.  (My rule of thumb is to keep adding zeros to the count until it takes at least 20-30 seconds to finish, then run it twice and check that the results are roughly the same).  That'll give you a good idea of how long it'll <em>usually</em> take, and if you also calculate the variance or standard deviation, you know how much that'll vary from case to case.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506518544, "post_id": 46448950, "comment_id": 79853636, "body": "I tested gcc, clang, and MSVC on <a href=\"https://godbolt.org/g/FqTjHS\" rel=\"nofollow noreferrer\">godbolt.org/g/FqTjHS</a>.  They all optimize away the loop completely (which isn&#39;t a surprise, since the inputs are compile-time constants!).  So yeah, the loop is probably just bottlenecked on store-forwarding latency."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506518614, "post_id": 46448950, "comment_id": 79853683, "body": "A test like this is completely incapable of measuring anything useful about the C <code>+</code> operator, because it will compile to different instructions in different contexts on the same machine.  The first part of your answer is right, but the second part isn&#39;t useful for this question.  The approach is fundamentally flawed."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506518969, "post_id": 46448950, "comment_id": 79853958, "body": "@PeterCordes I injected your comments into my answer, how does it look now? :)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519438, "post_id": 46448950, "comment_id": 79854329, "body": "Your 2nd bullet point is still using this nonsense as an example.  It&#39;s good if the code under test was large enough to dominate the loop overhead, but that&#39;s not the case here."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506622438, "post_id": 46448950, "comment_id": 79906595, "body": "I agree @PeterCordes, that&#39;s why I said in general, and then mention specifically for this case what holds. Isn&#39;t that clear enough? If not please let me know."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506624012, "post_id": 46448950, "comment_id": 79907484, "body": "I added <a href=\"https://stackoverflow.com/questions/2349776/how-can-i-benchmark-c-code-easily\" title=\"how can i benchmark c code easily\">stackoverflow.com/questions/2349776/&hellip;</a> back into the list of duplicates to answer the general case.  Make your bullet point more generic, like &quot;one will use version <code>a</code>, while the other will use version <code>b</code>.  As written, right now you&#39;re suggesting that <code>+</code> vs. <code>&amp;</code> is an example of something you <i>can</i> benchmark this way."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1506624780, "last_edit_date": 1506624780, "creation_date": 1506518336, "answer_id": 46448950, "question_id": 46446529, "link": "https://stackoverflow.com/questions/46446529/what-is-the-most-efficient-and-correct-way-to-measure-the-time-it-takes-for-some/46448950#46448950", "title": "What is the most efficient and correct way to measure the time it takes for some instructions to execute?", "body": "<p>The numbers you get suggest that you did <em>not</em> compile with Optimization flags enabled, which makes your benchmarking useless.</p>\n\n<p>For example I compiled with:</p>\n\n<pre><code> gcc prog.c -Wall -Wextra -O2 -march=native\n</code></pre>\n\n<p>and got for <code>for(long long int i=0;i&lt;10000000000000;i++)</code> timings of 0 and 1.</p>\n\n<p>Which one gets the 1?</p>\n\n<p>The first for loop, whichever this is (I mean <code>&amp;</code> or <code>+</code> operator). The reason behind that is that the first loop might find program in a cold start phase, regarding for instance caching.</p>\n\n<blockquote>\n  <p>So, what is the correct way to benchmark a piece of code <em>in general</em>?</p>\n</blockquote>\n\n<ul>\n<li>Compile with <strong>Optimization flags</strong> (e.g. <code>-O3</code> in GCC).</li>\n<li>Run multiple and independent experiments. Create two programs, where\nthe one will use the first algorithm, while the other will use the second, competitive, algorithm.</li>\n<li>Increase the size of the iterations, so that you will be sure that OS\noverheads are negligible.</li>\n</ul>\n\n<p>For your particular case, <a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:%27%23include%3Cstdio.h%3E%0A%23include%3Ctime.h%3E%0A%0Aint+main()+%0A%7B%0A+++int+x%3D10%3B%0A+++int+y%3D25%3B%0A+++int+z%3Dx%2By%3B%0A+++printf(%22Sum+of+x%2By+%3D+%25i%22,+z)%3B%0A+++time_t+start+%3D+clock()%3B%0A+++for(int+i%3D0%3Bi%3C100000%3Bi%2B%2B)z%3Dx%2By%3B%0A+++time_t+stop+%3D+clock()%3B%0A%0A+++printf(%22%5Cn%5CnArithmetic+instructions+take:+%25d%22,stop-start)%3B%0A+++start+%3D+clock()%3B%0A+++for(int+i%3D0%3Bi%3C100000%3Bi%2B%2B)z%3Dx%26y%3B%0A+++stop+%3D+clock()%3B%0A%0A+++printf(%22%5Cn%5CnLogic+instructions+take:+%25d%22,stop-start)%3B%0A%7D%27),l:%275%27,n:%270%27,o:%27C%2B%2B+source+%231%27,t:%270%27)),k:34.357923497267755,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((g:!((g:!((h:compiler,i:(compiler:cl19_64,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,trim:%271%27),libs:!(),options:/Ox,source:1),l:%275%27,n:%270%27,o:%27x86-64+CL+19+2017+RTW+(Editor+%231,+Compiler+%231)%27,t:%270%27)),k:51.778242677824274,l:%274%27,m:62.127512127512134,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:clang401,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,trim:%271%27),libs:!(),options:%27-O3%27,source:1),l:%275%27,n:%270%27,o:%27x86-64+clang+4.0.1+(Editor+%231,+Compiler+%232)%27,t:%270%27)),header:(),k:48.221757322175726,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27)),l:%272%27,m:62.127512127512134,n:%270%27,o:%27%27,t:%270%27),(g:!((h:output,i:(compiler:1,editor:1),l:%275%27,n:%270%27,o:%27%231+with+x86-64+CL+19+2017+RTW%27,t:%270%27)),header:(),l:%274%27,m:37.872487872487866,n:%270%27,o:%27%27,s:0,t:%270%27)),k:65.64207650273222,l:%273%27,n:%270%27,o:%27%27,t:%270%27)),l:%272%27,n:%270%27,o:%27%27,t:%270%27)),version:4\" rel=\"nofollow noreferrer\">godbolt</a> optimizes away the loops completely. You didn't see it because you didn't compile with optimization flags enabled. Moreover, a test like yours is completely incapable of measuring anything useful about the C + operator, because it will compile to different instructions in different contexts on the same machine.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "closed_date": 1506519197, "answer_count": 2, "score": 1, "last_activity_date": 1506624780, "creation_date": 1506510988, "question_id": 46446529, "link": "https://stackoverflow.com/questions/46446529/what-is-the-most-efficient-and-correct-way-to-measure-the-time-it-takes-for-some", "closed_reason": "Duplicate", "title": "What is the most efficient and correct way to measure the time it takes for some instructions to execute?", "body": "<p>I would like to measure how much time it takes to execute a piece of code. What would be the most effective and correct way to do this.</p>\n\n<p>I wrote a code that looks like the one below and the results are not the same every time. There is a level of randomization occurring and I do not know why and how to remove this effect.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n\nint main() \n{\n   int x=10;\n   int y=25;\n   int z=x+y;\n   printf(\"Sum of x+y = %i\", z);\n   time_t start = clock();\n   for(int i=0;i&lt;100000;i++)z=x+y;\n   time_t stop = clock();\n\n   printf(\"\\n\\nArithmetic instructions take: %d\",stop-start);\n   start = clock();\n   for(int i=0;i&lt;100000;i++)z=x&amp;y;\n   stop = clock();\n\n   printf(\"\\n\\nLogic instructions take: %d\",stop-start);\n}\n</code></pre>\n\n<p>The results look like this:</p>\n\n<pre><code>Arithmetic instructions take: 327\nLogic instructions take: 360\n\nArithmetic instructions take: 271\nLogic instructions take: 271\n\nArithmetic instructions take: 287\nLogic instructions take: 294\n\nArithmetic instructions take: 279\nLogic instructions take: 266\n\nArithmetic instructions take: 265\nLogic instructions take: 296\n</code></pre>\n\n<p>What other ways are to measure the time it takes to execute the loops.</p>\n\n<p>NOTICE: The loops are NOT removed by the compiler optimization, I checked it.</p>\n\n<p>So, what is the correct way to benchmark a piece of code?</p>\n"}, {"tags": ["c", "swift", "database", "sqlite"], "comments": [{"owner": {"reputation": 589, "user_id": 4666492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-sFfs-H_U1MY/AAAAAAAAAAI/AAAAAAAAAB0/rbPi6lP6X-0/photo.jpg?sz=128", "display_name": "IOS Singh", "link": "https://stackoverflow.com/users/4666492/ios-singh"}, "edited": false, "score": 0, "creation_date": 1506508690, "post_id": 46445668, "comment_id": 79847031, "body": "use this library for sqlite <a href=\"https://github.com/ccgus/fmdb\" rel=\"nofollow noreferrer\">github.com/ccgus/fmdb</a>"}, {"owner": {"reputation": 19, "user_id": 8546446, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8970539b0e4fa6f904de0136b50e4480?s=128&d=identicon&r=PG&f=1", "display_name": "Sarwesh reddy", "link": "https://stackoverflow.com/users/8546446/sarwesh-reddy"}, "reply_to_user": {"reputation": 589, "user_id": 4666492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-sFfs-H_U1MY/AAAAAAAAAAI/AAAAAAAAAB0/rbPi6lP6X-0/photo.jpg?sz=128", "display_name": "IOS Singh", "link": "https://stackoverflow.com/users/4666492/ios-singh"}, "edited": false, "score": 0, "creation_date": 1506508936, "post_id": 46445668, "comment_id": 79847181, "body": "thanks for the suggestion but i need to do it using C API"}], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 0, "last_activity_date": 1506509187, "creation_date": 1506509187, "answer_id": 46445915, "question_id": 46445668, "link": "https://stackoverflow.com/questions/46445668/unable-to-open-database-sqlite-using-c-in-swift/46445915#46445915", "title": "Unable to Open Database (sqlite using c in swift)", "body": "<pre><code>sqlite3_open_v2(\"dbname\",\n</code></pre>\n\n<p>The first parameter is a string, consisting of the six letters <code>dbname</code>.</p>\n\n<p>If you want to use the <code>dbname</code> parameter, don't enclose it in quotes.</p>\n"}], "owner": {"reputation": 19, "user_id": 8546446, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8970539b0e4fa6f904de0136b50e4480?s=128&d=identicon&r=PG&f=1", "display_name": "Sarwesh reddy", "link": "https://stackoverflow.com/users/8546446/sarwesh-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 46445915, "answer_count": 1, "score": 0, "last_activity_date": 1506519820, "creation_date": 1506508513, "last_edit_date": 1506519820, "question_id": 46445668, "link": "https://stackoverflow.com/questions/46445668/unable-to-open-database-sqlite-using-c-in-swift", "title": "Unable to Open Database (sqlite using c in swift)", "body": "<pre><code>override func viewDidLoad() {\n    super.viewDidLoad()\n    let path = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first!\n    let db = \"\\(path)/ishop.sqlite3\"\n\n    let name: [CChar]? = db.cString(using: String.Encoding.utf8)\n    getInput(UnsafeMutablePointer&lt;Int8&gt;(mutating: name!))\n\n}\n</code></pre>\n\n<p>int getInput(char dbname[]) \n{</p>\n\n<pre><code>sqlite3 *db;\nsqlite3_stmt *res;\n\nint rc = sqlite3_open_v2(\"dbname\", &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE | SQLITE_OPEN_URI |SQLITE_OPEN_MAIN_DB , NULL);\n\nif (rc != SQLITE_OK) {\n\n\n    fprintf(stderr, \"Cannot open database: %s\\n\", sqlite3_errmsg(db));\n    sqlite3_close(db);\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "c", "memory-leaks", "java-native-interface"], "comments": [{"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 1, "creation_date": 1506511510, "post_id": 46445666, "comment_id": 79848952, "body": "From a quick glance through this, it seems okay. Is it possible that there is a leak in your outer project where the other data is being managed?  Have you tried running the app through valgrind or some other memory leak detector?"}, {"owner": {"reputation": 1381, "user_id": 459572, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/249f0361df87dd50f9292ea86ef55619?s=128&d=identicon&r=PG", "display_name": "Donz", "link": "https://stackoverflow.com/users/459572/donz"}, "reply_to_user": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1506513246, "post_id": 46445666, "comment_id": 79850031, "body": "Yes, you&#39;re right! I just have investigated this issue and wanted to write conclusion. The problem is that data of templ vector is stored in RAM in outer project. And the heap of outer project is limited to 1.3-2Gb. So after about 1400 iterations where 1Mb data was pushed out every time I got this error."}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1506513888, "post_id": 46445666, "comment_id": 79850442, "body": "Okay - I am voting to close this question as there is no error in the presented code, and it sounds like there really isn&#39;t an error in the other code either, just a limitation based on how the outer code is written. With that in mind, this question really isn&#39;t a help to anyone in the future."}], "owner": {"reputation": 1381, "user_id": 459572, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/249f0361df87dd50f9292ea86ef55619?s=128&d=identicon&r=PG", "display_name": "Donz", "link": "https://stackoverflow.com/users/459572/donz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1506513287, "creation_date": 1506508507, "last_edit_date": 1506513287, "question_id": 46445666, "link": "https://stackoverflow.com/questions/46445666/memory-leak-in-c-where-java-is-called-via-jni", "title": "Memory leak in C++ where Java is called via JNI", "body": "<p>There is Java project which is needed to be called from C++ project. So I wrote wrapper. Unfortunately my main language is Java and I didn't do anything in C or C++ for ages. And it seems I did memory leak somewhere in my code, but I have no idea where. </p>\n\n<p>Here is the code of wrapper:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include \"wrapperJava.h\"\n#include &lt;stdint.h&gt;\n\nusing namespace std;\n\nJNIEnv* env;\njmethodID javaMethodCreate;\njclass javaClass;\nint init = 0;\njint rate = 16000;\njint channels = 1;\njint bits = 16;\n\nJNIEnv* create_vm() \n{\n    JavaVM* jvm;\n    JNIEnv* env;\n    JavaVMInitArgs args;\n    JavaVMOption options[2];\n\n    args.version = JNI_VERSION_1_8;\n    args.nOptions = 2;\n    options[0].optionString = \"-Djava.class.path=./router-core-0.0.1-SNAPSHOT.jar:./cp:cp/antlr-2.7.7.jar:cp/aopalliance-1.0.jar:cp/asm-3.3.1.jar:cp/aspectjweaver-1.8.9.jar:cp/bcprov-jdk15on-1.51.jar:cp/cdi-api-1.1.jar:cp/classmate-1.3.3.jar:cp/commons-codec-1.10.jar:cp/commons-io-2.5.jar:cp/commons-lang3-3.4.jar:cp/commons-logging-1.1.1.jar:cp/cryptacular-1.0.jar:cp/cxf-core-3.0.12.jar:cp/cxf-rt-bindings-soap-3.0.12.jar:cp/cxf-rt-bindings-xml-3.0.12.jar:cp/cxf-rt-databinding-jaxb-3.0.12.jar:cp/cxf-rt-frontend-simple-3.0.12.jar:cp/cxf-rt-ws-addr-3.0.12.jar:cp/cxf-rt-ws-policy-3.0.12.jar:cp/cxf-rt-wsdl-3.0.12.jar:cp/dom4j-1.6.1.jar:cp/ehcache-2.10.3.jar:cp/el-api-2.2.jar:cp/geronimo-javamail_1.4_spec-1.7.1.jar:cp/guava-16.0.1.jar:cp/h2-1.0.60.jar:cp/hibernate-commons-annotations-5.0.1.Final.jar:cp/hibernate-core-5.2.2.Final.jar:cp/hibernate-entitymanager-5.2.2.Final.jar:cp/hibernate-jpa-2.1-api-1.0.0.Final.jar:cp/hibernate-validator-5.2.4.Final.jar:cp/hsqldb-2.3.3.jar:cp/httpclient-4.5.3.jar:cp/httpcore-4.4.5.jar:cp/httpmime-4.5.3.jar:cp/jackson-annotations-2.8.5.jar:cp/jackson-core-2.8.5.jar:cp/jackson-databind-2.8.5.jar:cp/jain-sip-ri-1.2.324.jar:cp/jandex-2.0.0.Final.jar:cp/jasypt-1.9.2.jar:cp/java-support-7.1.1.jar:cp/javassist-3.20.0-GA.jar:cp/javax.inject-1.jar:cp/javax.transaction-api-1.2.jar:cp/jaxb-core-2.2.11.jar:cp/jaxb-impl-2.2.11.jar:cp/jboss-interceptors-api_1.1_spec-1.0.0.Beta1.jar:cp/jboss-logging-3.3.0.Final.jar:cp/jcl-over-slf4j-1.7.25.jar:cp/jnotify-0.94.jar:cp/joda-time-2.9.6.jar:cp/jsr250-api-1.0.jar:cp/jul-to-slf4j-1.7.25.jar:cp/log4j-over-slf4j-1.7.25.jar:cp/logback-classic-1.1.8.jar:cp/logback-core-1.1.8.jar:cp/lombok-1.16.6.jar:cp/neethi-3.0.3.jar:cp/opensaml-2.5.1-1.jar:cp/opensaml-core-3.1.1.jar:cp/opensaml-profile-api-3.1.1.jar:cp/opensaml-saml-api-3.1.1.jar:cp/opensaml-saml-impl-3.1.1.jar:cp/opensaml-security-api-3.1.1.jar:cp/opensaml-security-impl-3.1.1.jar:cp/opensaml-soap-api-3.1.1.jar:cp/opensaml-xacml-api-3.1.1.jar:cp/opensaml-xacml-impl-3.1.1.jar:cp/opensaml-xacml-saml-api-3.1.1.jar:cp/opensaml-xacml-saml-impl-3.1.1.jar:cp/opensaml-xmlsec-api-3.1.1.jar:cp/opensaml-xmlsec-impl-3.1.1.jar:cp/openws-1.4.2-1.jar:cp/postgresql-9.4.1212.jre7.jar:cp/router-schema-0.0.1-SNAPSHOT.jar:cp/router-sip-0.0.1-SNAPSHOT.jar:cp/slf4j-api-1.7.25.jar:cp/snakeyaml-1.17.jar:cp/spring-aop-4.3.5.RELEASE.jar:cp/spring-aspects-4.3.5.RELEASE.jar:cp/spring-beans-4.3.5.RELEASE.jar:cp/spring-boot-1.4.3.RELEASE.jar:cp/spring-boot-autoconfigure-1.4.3.RELEASE.jar:cp/spring-boot-starter-1.4.3.RELEASE.jar:cp/spring-boot-starter-aop-1.4.3.RELEASE.jar:cp/spring-boot-starter-data-jpa-1.4.3.RELEASE.jar:cp/spring-boot-starter-jdbc-1.4.3.RELEASE.jar:cp/spring-boot-starter-logging-1.4.3.RELEASE.jar:cp/spring-boot-starter-security-1.4.3.RELEASE.jar:cp/spring-boot-starter-tomcat-1.4.3.RELEASE.jar:cp/spring-boot-starter-web-1.4.3.RELEASE.jar:cp/spring-context-4.3.5.RELEASE.jar:cp/spring-core-4.3.5.RELEASE.jar:cp/spring-data-commons-1.12.6.RELEASE.jar:cp/spring-data-jpa-1.10.6.RELEASE.jar:cp/spring-expression-4.3.5.RELEASE.jar:cp/spring-jdbc-4.3.5.RELEASE.jar:cp/spring-orm-4.3.5.RELEASE.jar:cp/spring-oxm-4.3.5.RELEASE.jar:cp/spring-security-config-4.1.4.RELEASE.jar:cp/spring-security-core-4.1.4.RELEASE.jar:cp/spring-security-web-4.1.4.RELEASE.jar:cp/spring-tx-4.3.5.RELEASE.jar:cp/spring-web-4.3.5.RELEASE.jar:cp/spring-webmvc-4.3.5.RELEASE.jar:cp/spring-ws-core-2.3.1.RELEASE.jar:cp/spring-ws-security-2.3.1.RELEASE.jar:cp/spring-xml-2.3.1.RELEASE.jar:cp/stax2-api-3.1.4.jar:cp/tomcat-embed-core-8.5.6.jar:cp/tomcat-embed-el-8.5.6.jar:cp/tomcat-embed-websocket-8.5.6.jar:cp/tomcat-jdbc-8.5.6.jar:cp/tomcat-juli-8.5.6.jar:cp/validation-api-1.1.0.Final.jar:cp/woodstox-core-asl-4.4.1.jar:cp/wsdl4j-1.6.3.jar:cp/wss4j-1.6.19.jar:cp/wss4j-ws-security-common-2.1.4.jar:cp/wss4j-ws-security-dom-2.1.4.jar:cp/xml-resolver-1.2.jar:cp/xmlschema-core-2.2.1.jar:cp/xmlsec-1.5.8.jar:cp/xmltooling-1.3.2-1.jar\";\n    options[1].optionString = \"-Xmx12000m\";\n    args.options = options;\n    args.ignoreUnrecognized = JNI_FALSE;\n\n    JNI_CreateJavaVM(&amp;jvm, (void **)&amp;env, &amp;args);\n    return env;\n}\n\nvoid invoke_main() \n{\n    jmethodID mainMethod;\n    jclass javaClass;\n    jobjectArray applicationArgs;\n\n    javaClass = env-&gt;FindClass(\"org/springframework/boot/loader/JarLauncher\");\n\n    mainMethod = env-&gt;GetStaticMethodID(javaClass, \"main\", \"([Ljava/lang/String;)V\");\n\n    applicationArgs = env-&gt;NewObjectArray(0, env-&gt;FindClass(\"java/lang/String\"), NULL);\n\n    env-&gt;CallStaticVoidMethod(javaClass, mainMethod, applicationArgs);\n}\n\nvoid init_jni_methods()\n{\n    javaClass = env-&gt;FindClass(\"com/some/direct/DirectEndpoint\");\n    javaMethodCreate = env-&gt;GetStaticMethodID(javaClass, \"createModel\", \"([BIII)[B\");\n}\n\nint invoke_create_model(std::shared_ptr&lt;uint8_t&gt; data, int length, std::vector&lt;uint8_t&gt; &amp;templ)\n{\n    jbyteArray baArg = env-&gt;NewByteArray(length);\n    env-&gt;SetByteArrayRegion(baArg, 0, length, data.get());\n    jbyteArray jValue = NULL;\n    jValue = (jbyteArray)env-&gt;CallStaticObjectMethod(javaClass, javaMethodCreate, baArg, rate, channels, bits);\n    env-&gt;DeleteLocalRef(baArg);\n    if (env-&gt;ExceptionOccurred()) // check if an exception occurred\n    {\n        if(jValue != NULL)\n        {\n           env-&gt;DeleteLocalRef(jValue);\n        }\n        return -1;\n    }\n\n    uint8_t* value = NULL;\n    int len = 0;\n    if(jValue != NULL)\n    {\n        len = env-&gt;GetArrayLength(jValue);\n        value = env-&gt;GetByteArrayElements(jValue, JNI_FALSE);\n        templ.assign(value, value + len);\n        env-&gt;ReleaseByteArrayElements(jValue, value, JNI_ABORT);\n        env-&gt;DeleteLocalRef(jValue);\n        return 0;\n    }\n    else\n    {\n        printf(\"No enough data for creation\");\n        return -1;\n    }\n}\n\nReturnStatus createModel(const Record &amp;record, std::vector&lt;uint8_t&gt; &amp;templ)\n{\n    ReturnStatus ret = ReturnStatus(ReturnCode::Success, std::string(\"OK\"));\n    try\n    {\n        int i = invoke_create_model(record.data, record.length, templ);\n        if( i != 0 )\n        {\n            ret = ReturnStatus(ReturnCode::CreationError, \"Error during creation: no enough data\");\n        }\n    }\n    catch(...)\n    {\n        ret = ReturnStatus(ReturnCode::CreationError, \"Error during creation: no enough data\");\n    }\n    return ret;\n}\n\nReturnStatus initialize(const std::string &amp;configDir)\n{\n    if( init ==0 )\n    {\n        env = create_vm();\n        invoke_main();\n        init_jni_methods();\n        init = 1;\n    }\n    return ReturnStatus(ReturnCode::Success, \"OK\");\n}\n</code></pre>\n\n<p>At first initialize is called and then createModel. Both calls are from outer project where record and templ arguments ara managed.</p>\n\n<p>There are no memory leaks in Java as Java code works in production with thousands calls. Project with this wrapper crashes after thousand and a half iterations of createModel call with:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::bad_alloc'\nwhat():  std::bad_alloc\nThe program has unexpectedly finished.\n/home/test/app crashed.\n</code></pre>\n\n<p>I have seen a lot of similar questions and checked eveything in this wrapper but it didn't give any effect.</p>\n\n<p>Have I forgot to free some memory? </p>\n\n<p>Do I understand right that everything what is created inside Java code and isn't returned to C++ wrapper is managed by Java GC?</p>\n\n<p><strong>UPD:</strong>\nSolved.\nThe problem is that data of \"templ\" vector is stored in RAM in outer project. And the heap of outer project is limited to 1.3-2Gb. So after about 1400 iterations where 1Mb data was pushed out every time I got this error.</p>\n"}, {"tags": ["java", "c", "eclipse", "hover", "markers"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 2116237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00d8b19ae9279d3678553fcad538cf07?s=128&d=identicon&r=PG", "display_name": "napets", "link": "https://stackoverflow.com/users/2116237/napets"}, "edited": false, "score": 0, "creation_date": 1520340464, "post_id": 46523649, "comment_id": 85266980, "body": "With Eclipse Neon3, in order to get this fix working one has to disable the &quot;Expand vertical ruler icons upon hovering (does not affect open editors)&quot; option inside the preferences."}], "tags": [], "owner": {"reputation": 133, "user_id": 2116237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00d8b19ae9279d3678553fcad538cf07?s=128&d=identicon&r=PG", "display_name": "napets", "link": "https://stackoverflow.com/users/2116237/napets"}, "is_accepted": true, "score": 0, "last_activity_date": 1506939525, "creation_date": 1506939525, "answer_id": 46523649, "question_id": 46445377, "link": "https://stackoverflow.com/questions/46445377/eclipse-custom-text-when-hovering-over-a-marker/46523649#46523649", "title": "Eclipse - custom text when hovering over a marker", "body": "<p>For those who have a similar problem - I have found a \"hacky\" solution. I have created my own class <code>MyAwesomeHover</code>:</p>\n\n<pre><code>public class MyAwesomeHover implements IAnnotationHover {\n    @Override\n    public String getHoverInfo(ISourceViewer sw, int ln) {\n        return \"Hey hoo\"\n    }   \n}\n</code></pre>\n\n<p>And then I use the reflection to set <code>MyAweseomeHover</code> as the displayed <code>AnnotationHover</code>.</p>\n\n<pre><code>    Field hm= SourceViewer.class.getDeclaredField(\"fVerticalRulerHoveringController\");\n    hm.setAccessible(true);\n    AnnotationBarHoverManager ma= (AnnotationBarHoverManager) hm.get(sourceViewer);\n    Field ah= AnnotationBarHoverManager.class.getDeclaredField(\"fAnnotationHover\");\n    ah.setAccessible(true);\n    ah.set(ma, MyAwesomeHover());\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 2116237, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/00d8b19ae9279d3678553fcad538cf07?s=128&d=identicon&r=PG", "display_name": "napets", "link": "https://stackoverflow.com/users/2116237/napets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 46523649, "answer_count": 1, "score": 1, "last_activity_date": 1506939525, "creation_date": 1506507608, "question_id": 46445377, "link": "https://stackoverflow.com/questions/46445377/eclipse-custom-text-when-hovering-over-a-marker", "title": "Eclipse - custom text when hovering over a marker", "body": "<p>I working on an Eclipse plugin and currently I am trying to make Eclipse (Luna) to show customized text when hovering over a marker. I know that I could achieve this by specifying the marker arguments, but <strong>I need to change the text dynamically</strong>, e.g:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EK1TA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EK1TA.png\" alt=\"Use case\"></a></p>\n\n<p>I have already tried these approaches <strong>without</strong> success:</p>\n\n<p>1) Having a custom <code>TextEditor</code> with custom <code>SourceViewerConfiguration</code>:</p>\n\n<pre><code>public class MyEditor extends TextEditor {\n\n    public MyEditor() {\n        setSourceViewerConfiguration(new SourceViewerConfiguration() {\n            @Override\n            public IAnnotationHover getAnnotationHover(ISourceViewer sourceViewer) {\n                return new IAnnotationHover() {\n                    @Override\n                    public String getHoverInfo(ISourceViewer sv, int ln) {\n                        return \"Hello world!\";\n                    }\n                };\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>and the plugin.xml like this:</p>\n\n<pre><code>&lt;extension\n        point=\"org.eclipse.ui.editors\"&gt;\n    &lt;editor\n            id=\"test\"\n            name=\"MyEditor\"\n            extensions=\"c\"\n            class=\"foo.bar.editors.MyEditor\"&gt;\n    &lt;/editor&gt;\n&lt;/extension&gt;\n</code></pre>\n\n<p>My method <strong>getHoverInfo</strong> is never called. Instead, the method <strong>getHoverInfo</strong> from the <strong>DefaultAnnotationHover</strong> is being called any time I open any *.c file and hover over the marker. I checked the available editors via the Eclipse->Preferences->General->Editors and the <code>MyEditor</code> is there.</p>\n\n<p>2) Adding the custom annotation hover dynamically. I found <a href=\"https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Feditors_hover.htm\" rel=\"nofollow noreferrer\">here</a> information that it is possible. So every time I open a \"*.c\" file, I have this code:</p>\n\n<pre><code>IPartListener2 partListener2 = new IPartListener2() {\n    @Override\n    public void partOpened(IWorkbenchPartReference partRef) {\n            if (\"org.eclipse.cdt.ui.editor.CEditor\".equals(((EditorReference) partRef).getDescriptor().getId())) {\n                CEditor currentCFileEditor = ((CEditor)((EditorReference) partRef).getEditor(false));\n                currentCFileEditor.getViewer().setAnnotationHover(new IAnnotationHover() {\n                    @Override\n                    public String getHoverInfo(ISourceViewer sourceViewer, int lineNumber) {\n                        return \"Hello world\";\n                    }\n                });\n            }\n        }\n</code></pre>\n\n<p>But again, I was not successful - my <code>getHoverInfo</code> is not called at all. </p>\n\n<p>Any idea what I am doing wrong?</p>\n"}, {"tags": ["c", "linux", "struct"], "comments": [{"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 5, "creation_date": 1506507452, "post_id": 46445294, "comment_id": 79846246, "body": "Just to indicate what the flags in that struct are. It&#39;s for the reader, not the compiler."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1506507525, "post_id": 46445294, "comment_id": 79846307, "body": "It&#39;s simply the locality of reference principle being applied for the sake of the human reader of this definition."}], "answers": [{"comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 1, "creation_date": 1506507567, "post_id": 46445320, "comment_id": 79846334, "body": "Why not use just comments to achieve the same?"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 1, "creation_date": 1506507850, "post_id": 46445320, "comment_id": 79846517, "body": "@CinCout, how can you use comments, which are replaced by a space prior to preprocessing, to achieve text substitution to whatever the preprocessor allows?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 1, "creation_date": 1506507862, "post_id": 46445320, "comment_id": 79846528, "body": "@CinCout - Changes to the macro list will not automatically update the comments. The macros have to be somewhere. Might as well be close to their intended purpose."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 7, "last_activity_date": 1506507817, "last_edit_date": 1506507817, "creation_date": 1506507451, "answer_id": 46445320, "question_id": 46445294, "link": "https://stackoverflow.com/questions/46445294/whats-the-purpose-of-embedding-defines-into-a-struct-definition/46445320#46445320", "title": "What&#39;s the purpose of embedding #define&#39;s into a struct definition?", "body": "<p>They are not \"embedded\", they just happen to be located there. This does nothing to the <code>struct</code> itself. Remember that the preprocessor runs <em>before</em> the compiler sees the code; those will have been removed before the code compiles.</p>\n\n<p>It makes sense for the code reader, since it keeps the <code>#define</code>s that deal with those fields close by.</p>\n\n<p>I think they are not optimal, since the names of the symbols don't refer back to the member in the <code>struct</code> that they relate to.</p>\n\n<p>So you'll have code doing:</p>\n\n<pre><code>struct serial_rs485 ser;\n\nser.flags = SER_RS485_ENABLED | SER_RS485_TERMINATE_BUS;\n</code></pre>\n\n<p>see how the right-hand side of the second line doesn't contain <code>FLAG</code>? If there are other <code>define</code>s for the same struct, it's easy to mix them up.</p>\n\n<p>Often you add the name of the field, making it:</p>\n\n<pre><code>ser.flags = SER_RS485_FLAGS_ENABLED | SER_RS485_FLAGS_TERMINATE_BUS;\n</code></pre>\n"}], "owner": {"reputation": 4962, "user_id": 231441, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/P2kt4.png?s=128&g=1", "display_name": "zzeroo", "link": "https://stackoverflow.com/users/231441/zzeroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1506508309, "accepted_answer_id": 46445320, "answer_count": 1, "score": 0, "last_activity_date": 1506507817, "creation_date": 1506507379, "last_edit_date": 1506507521, "question_id": 46445294, "link": "https://stackoverflow.com/questions/46445294/whats-the-purpose-of-embedding-defines-into-a-struct-definition", "closed_reason": "Duplicate", "title": "What&#39;s the purpose of embedding #define&#39;s into a struct definition?", "body": "<p>In a struct definition at: <a href=\"http://elixir.free-electrons.com/linux/latest/source/include/uapi/linux/serial.h#L116\" rel=\"nofollow noreferrer\">http://elixir.free-electrons.com/linux/latest/source/include/uapi/linux/serial.h#L116</a>\nI found this:</p>\n\n<pre><code>struct serial_rs485 {\n    __u32   flags;          /* RS485 feature flags */\n#define SER_RS485_ENABLED       (1 &lt;&lt; 0)    /* If enabled */\n#define SER_RS485_RTS_ON_SEND       (1 &lt;&lt; 1) /* Logical level for RTS pin when sending */\n#define SER_RS485_RTS_AFTER_SEND    (1 &lt;&lt; 2) /* Logical level for RTS pin after sent*/\n#define SER_RS485_RX_DURING_TX      (1 &lt;&lt; 4)\n#define SER_RS485_TERMINATE_BUS     (1 &lt;&lt; 5) /* Enable bus termination (if supported) */\n    __u32   delay_rts_before_send;  /* Delay before send (milliseconds) */\n    __u32   delay_rts_after_send;   /* Delay after send (milliseconds) */\n    __u32   padding[5];     /* Memory is cheap, new structs\n                       are a royal PITA .. */\n};\n</code></pre>\n\n<p>What's the purpose of embedding <code>#define</code>'s into the struct definition?</p>\n"}, {"tags": ["c", "gradle", "shared-objects"], "answers": [{"tags": [], "owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "is_accepted": false, "score": 0, "last_activity_date": 1506506609, "creation_date": 1506506609, "answer_id": 46445013, "question_id": 46444921, "link": "https://stackoverflow.com/questions/46444921/how-to-write-a-gradle-build-file-for-c-to-create-a-shared-object-library-so-f/46445013#46445013", "title": "how to write a gradle build file for c to create a shared object library (.so) file?", "body": "<p>Use a <code>NativeLibrarySpec</code> instead of a <code>NativeExecutableSpec</code> as described at <a href=\"https://docs.gradle.org/current/userguide/native_software.html#sec:building_a_library\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/native_software.html#sec:building_a_library</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8681033, "user_type": "registered", "profile_image": "https://graph.facebook.com/1878774448805739/picture?type=large", "display_name": "Lalith Kumar", "link": "https://stackoverflow.com/users/8681033/lalith-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506506609, "creation_date": 1506506343, "last_edit_date": 1506506505, "question_id": 46444921, "link": "https://stackoverflow.com/questions/46444921/how-to-write-a-gradle-build-file-for-c-to-create-a-shared-object-library-so-f", "title": "how to write a gradle build file for c to create a shared object library (.so) file?", "body": "<p>how to write a gradle build file for c code to create a shared object library (.so) file ?<br>\nFor creating C executables i can use the below , please guide for creating .so files</p>\n\n<pre><code>apply plugin : 'c' \n\nmodel { \n    components {\n        main(NativeExecutableSpec)   \n    }\n}\n</code></pre>\n"}, {"tags": ["java", "c", "openssl", "password-encryption", "encryption-symmetric"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8131224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82488948e3c18e6927c7d0fc6d007fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Edure", "link": "https://stackoverflow.com/users/8131224/edure"}, "edited": false, "score": 0, "creation_date": 1506563036, "post_id": 46447302, "comment_id": 79874567, "body": "I use <code>DES_ncbc_encrypt</code>, and it works well in decrypting password which is encrypted by DES/CBC/PKCS5Padding of Java."}], "tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 2, "last_activity_date": 1506514182, "last_edit_date": 1506514182, "creation_date": 1506513492, "answer_id": 46447302, "question_id": 46444137, "link": "https://stackoverflow.com/questions/46444137/what-is-api-in-openssl-like-java-des-cbc-pkcs5padding/46447302#46447302", "title": "What is API in OpenSSL like Java DES/CBC/PKCS5Padding?", "body": "<p>You should also use <code>EVP_*</code> functions; and not functions like <code>DES_ede3_cbc_encrypt</code> (and friends). See <a href=\"http://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki.</p>\n\n<p>To answer your question about DES symbols, you need to use <code>EVP_des_XXX</code>, where <code>XXX</code> is a mode of interest. I'm guessing you want <code>EVP_des_cbc</code>.</p>\n\n<p>If you are working on a CentOS machine with the FIPS version of OpenSSL <em>and</em> FIPS mode is active, then you probably won't have access to any DES or 2-key 3DES algorithms (3-key 3DES should be available).</p>\n\n<pre><code>$ cd openssl\n$ grep EVP_des include/openssl/evp.h\nconst EVP_CIPHER *EVP_des_ecb(void);\nconst EVP_CIPHER *EVP_des_ede(void);\nconst EVP_CIPHER *EVP_des_ede3(void);\nconst EVP_CIPHER *EVP_des_ede_ecb(void);\nconst EVP_CIPHER *EVP_des_ede3_ecb(void);\nconst EVP_CIPHER *EVP_des_cfb64(void);\nconst EVP_CIPHER *EVP_des_cfb1(void);\nconst EVP_CIPHER *EVP_des_cfb8(void);\nconst EVP_CIPHER *EVP_des_ede_cfb64(void);\nconst EVP_CIPHER *EVP_des_ede3_cfb64(void);\nconst EVP_CIPHER *EVP_des_ede3_cfb1(void);\nconst EVP_CIPHER *EVP_des_ede3_cfb8(void);\nconst EVP_CIPHER *EVP_des_ofb(void);\nconst EVP_CIPHER *EVP_des_ede_ofb(void);\nconst EVP_CIPHER *EVP_des_ede3_ofb(void);\nconst EVP_CIPHER *EVP_des_cbc(void);\nconst EVP_CIPHER *EVP_des_ede_cbc(void);\nconst EVP_CIPHER *EVP_des_ede3_cbc(void);\nconst EVP_CIPHER *EVP_desx_cbc(void);\nconst EVP_CIPHER *EVP_des_ede3_wrap(void);\n</code></pre>\n\n<hr>\n\n<p>Here are some references I keep cribbed away for OpenSSL and Java interop. Usually <a href=\"http://wiki.openssl.org/index.php/Manual:EVP_BytesToKey(3)\" rel=\"nofollow noreferrer\"><code>EVP_BytesToKey</code></a> causes some issues. </p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/q/21086103/608639\">Java AES 128 encrypting differently to openssl</a></li>\n<li><a href=\"http://stackoverflow.com/q/32508961/608639\">Java equivalent of an OpenSSL AES CBC encryption</a></li>\n<li><a href=\"http://stackoverflow.com/q/31947256/608639\">How to decode a string encoded with openssl aes-128-cbc using java?</a></li>\n<li><a href=\"http://stackoverflow.com/q/15594518/608639\">Using Java to decrypt openssl aes-256-cbc using provided key and iv</a></li>\n<li><a href=\"http://stackoverflow.com/q/12920740/608639\">Java equivalent of C++ encryption</a></li>\n<li><a href=\"http://security.stackexchange.com/q/9600/29925\">How to use OpenSSL generated keys in Java?</a></li>\n<li><a href=\"http://stackoverflow.com/q/34502705/608639\">Java openssl encryption / decryption key generation</a></li>\n<li><a href=\"http://stackoverflow.com/q/9488919\">Password to key function compatible with OpenSSL commands?</a></li>\n<li><a href=\"http://stackoverflow.com/q/11783062\">How to decrypt file in Java encrypted with openssl command using AES?</a></li>\n</ul>\n"}], "owner": {"reputation": 43, "user_id": 8131224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82488948e3c18e6927c7d0fc6d007fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Edure", "link": "https://stackoverflow.com/users/8131224/edure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506514182, "creation_date": 1506504222, "last_edit_date": 1506505224, "question_id": 46444137, "link": "https://stackoverflow.com/questions/46444137/what-is-api-in-openssl-like-java-des-cbc-pkcs5padding", "title": "What is API in OpenSSL like Java DES/CBC/PKCS5Padding?", "body": "<p>I want to decrypt password which was encrypted by \"DES/CBC/PKCS5Padding\" of javax.crypto.Cipher. I have  to use OpenSSL to decrypt the password. Which API in OpenSSL should I use?</p>\n\n<p>I know API for DES3 is <code>DES_ede3_cbc_encrypt</code>, and want to know DES.</p>\n"}, {"tags": ["c", "linux", "systems-programming"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1506504816, "post_id": 46444122, "comment_id": 79844455, "body": "You send SIGQUIT and the thread unlocks the mutex &amp; signals (<code>pthread_cond_signal</code>), thus the loop in the main thread break and it exits. Everything seems as expected to me. What did you expect and why?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1506507731, "post_id": 46444122, "comment_id": 79846442, "body": "What are you actually wondering about ? Are you wondering why sleep(20) did not wait a full 20 seconds ? Are you wondering why you have to press ctrl+\\ a few times instead of just 1 time ? Are you wondering why main quits after a few times instead of exiting immediately ? Are you wondering about something else that you can specifically tell us ?"}, {"owner": {"reputation": 11, "user_id": 8616413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806f32481f667369e15454e17f3f9623?s=128&d=identicon&r=PG&f=1", "display_name": "wislinon chen", "link": "https://stackoverflow.com/users/8616413/wislinon-chen"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1506507732, "post_id": 46444122, "comment_id": 79846443, "body": "@usr thanks\uff0cbut this code can due to signal lost\uff0cright?"}, {"owner": {"reputation": 11, "user_id": 8616413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806f32481f667369e15454e17f3f9623?s=128&d=identicon&r=PG&f=1", "display_name": "wislinon chen", "link": "https://stackoverflow.com/users/8616413/wislinon-chen"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1506508133, "post_id": 46444122, "comment_id": 79846704, "body": "@nos i have understand by @usr\uff0cso thanks\uff0conly for examining &quot;signal lost &quot;\uff0c my first purpose~"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1506508221, "post_id": 46444122, "comment_id": 79846761, "body": "Ok. So the sleep(20) was not important at all to your question ? (because if you do have a sleep(20), the 1. ctrl+\\ could interrupt sleep() and make it return)."}, {"owner": {"reputation": 11, "user_id": 8616413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806f32481f667369e15454e17f3f9623?s=128&d=identicon&r=PG&f=1", "display_name": "wislinon chen", "link": "https://stackoverflow.com/users/8616413/wislinon-chen"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1506509108, "post_id": 46444122, "comment_id": 79847312, "body": "@nos yes\uff0conly for testing &quot;signal lost&quot; because of child thread start before main thread(cond_singal before cond_wait)\uff0cbut i now think\uff0calthough main don&#39;t invoke pthread_cond_wait\uff0cbut &quot;signal quit&quot; still catch by child thread\uff0cso there is no &quot;sinal lost&quot;\uff0conly pthread_cond_wait not be invoked\uff5e"}], "owner": {"reputation": 11, "user_id": 8616413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806f32481f667369e15454e17f3f9623?s=128&d=identicon&r=PG&f=1", "display_name": "wislinon chen", "link": "https://stackoverflow.com/users/8616413/wislinon-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506504965, "creation_date": 1506504177, "last_edit_date": 1506504544, "question_id": 46444122, "link": "https://stackoverflow.com/questions/46444122/process-exit-automatically-when-signal-delivered-before-pthread-cond-wait", "title": "process exit automatically when signal delivered before pthread_cond_wait", "body": "<pre><code>#include \"apue.h\"\n#include &lt;pthread.h&gt;\n\nint     quitflag;\nsigset_t    mask;\npthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t wait  = PTHREAD_COND_INITIALIZER;\n\nvoid *\nthr_fn(void *arg)\n{\n    int err, signo;\n\n    for ( ; ; ) {\n    err = sigwait(&amp;mask, &amp;signo);\n    if (err != 0)\n        err_exit(err, \"sigwait failed\");\n    switch (signo) {\n        case SIGINT:\n        printf(\"\\ninterrupt\\n\");\n        break;\n\n        case SIGQUIT:\n        pthread_mutex_lock(&amp;lock);\n        quitflag = 1;\n        pthread_mutex_unlock(&amp;lock);\n        pthread_cond_signal(&amp;wait);\n        return 0;\n\n        default:\n        printf(\"unexpected signal %d\\n\", signo);\n        exit(1);\n    }\n    }\n}\n\nint\nmain(void)\n{\n    int     err;\n    sigset_t    oldmask;\n    pthread_t   tid;\n\n    sigemptyset(&amp;mask);\n    sigaddset(&amp;mask, SIGINT);\n    sigaddset(&amp;mask, SIGQUIT);\n    if ((err =  pthread_sigmask(SIG_BLOCK, &amp;mask, &amp;oldmask)) != 0)\n        err_exit(err, \"SIG_BLOCK error\");\n\n    err = pthread_create(&amp;tid, NULL, thr_fn, 0);\n    if (err != 0)\n        err_exit(err, \"can not create thread\");\n\n    **sleep(20);**  /* added code here */\n    pthread_mutex_lock(&amp;lock);\n    while (quitflag == 0)\n        pthread_cond_wait(&amp;wait, &amp;lock); /* first unlock, then suspend */\n    pthread_mutex_unlock(&amp;lock);\n\n    quitflag = 0;\n\n    if (sigprocmask(SIG_SETMASK, &amp;oldmask, NULL) &lt; 0)\n        err_sys(\"SIG_SETMASK error\");\n\n    exit(0);\n}    \n</code></pre>\n\n<p>This is the code of apue that examine \"sigwait\", i insert \"sleep(20)\" before pthread_cond_wait is invoked, start the program with ./a.out, then thread thr_fn start, before \"20 seconds\", i send \"signal quit\" when ctrl+\\, then thread exited, then after a few time, the main process exit automatically,\ni don't know why? could somebody explain this? my platform is centos, thanks</p>\n"}, {"tags": ["c++", "c", "gcc", "gcc-warning", "linker-flags"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1506504289, "post_id": 46444052, "comment_id": 79844082, "body": "It did work. But because you have a single translation unit, and <code>foo</code> is present, the call to <code>foo</code> is not an <b>undefined reference</b> to <code>foo</code>."}, {"owner": {"reputation": 922, "user_id": 6677950, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75145485f8eee7eeae1482ab79d2ecde?s=128&d=identicon&r=PG&f=1", "display_name": "eDeviser", "link": "https://stackoverflow.com/users/6677950/edeviser"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1506510501, "post_id": 46444052, "comment_id": 79848270, "body": "Well, I do not understand. The output of the example above seems wrong to me. <code>foo()</code> should output <code>&quot;wrap foo&quot;</code>! What am I doing wrong?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1506510584, "post_id": 46444052, "comment_id": 79848318, "body": "You are ignoring the &quot;undefined reference&quot; <b>requirement</b>."}, {"owner": {"reputation": 922, "user_id": 6677950, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75145485f8eee7eeae1482ab79d2ecde?s=128&d=identicon&r=PG&f=1", "display_name": "eDeviser", "link": "https://stackoverflow.com/users/6677950/edeviser"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1506510909, "post_id": 46444052, "comment_id": 79848559, "body": "Wohooo, that&#39;s it! ...going now to compose a complete answer..."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1506511705, "post_id": 46444052, "comment_id": 79849081, "body": "personal opinion: The correct way to use the <code>--wrap</code> stuff is not at all. It is a horrible workaround for when you just must link with certain libraries where you don&#39;t have the source and you have to do terrible things like this to make it work. It&#39;s a last ditch effort to save your sanity when you&#39;re out of all other options (including talking to the library vendor, then talking to your boss and threatening to quit if you have to keep using a bad library that requires hacks like this)."}, {"owner": {"reputation": 922, "user_id": 6677950, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75145485f8eee7eeae1482ab79d2ecde?s=128&d=identicon&r=PG&f=1", "display_name": "eDeviser", "link": "https://stackoverflow.com/users/6677950/edeviser"}, "edited": false, "score": 0, "creation_date": 1506511936, "post_id": 46444052, "comment_id": 79849230, "body": "That&#39;s all right with me. I&#39;m using <code>--wrap</code> just to create some stubs and mock objects when there is no other choice to implementing some unit tests."}], "answers": [{"tags": [], "owner": {"reputation": 922, "user_id": 6677950, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75145485f8eee7eeae1482ab79d2ecde?s=128&d=identicon&r=PG&f=1", "display_name": "eDeviser", "link": "https://stackoverflow.com/users/6677950/edeviser"}, "is_accepted": true, "score": 8, "last_activity_date": 1506511716, "creation_date": 1506511716, "answer_id": 46446749, "question_id": 46444052, "link": "https://stackoverflow.com/questions/46444052/how-to-wrap-functions-with-the-wrap-option-correctly/46446749#46446749", "title": "How to wrap functions with the `--wrap` option correctly?", "body": "<p>As StoryTeller told me, I ignored the \"undefined reference\" requirement which I already posted above:</p>\n\n<blockquote>\n  <p>... Any <strong>undefined reference</strong> to symbol will be resolved to \"__wrap_symbol\".  Any <strong>undefined reference</strong> to \"__real_symbol\" will be resolved to symbol.</p>\n</blockquote>\n\n<p>To use the <code>--wrap</code> option I rearranged my code example like this:</p>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nextern int foo();\nextern int __real_foo();\n\nint __wrap_foo() {\n    printf(\"wrap foo\\n\");\n    return 0;\n}\n\nint main () {\n    printf(\"foo:\");foo();\n    printf(\"wrapfoo:\");__wrap_foo();\n    printf(\"realfoo:\");__real_foo();\n    return 0;\n}\n</code></pre>\n\n<p>foo.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint foo() {\n    printf(\"foo\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Then compile:</p>\n\n<pre><code>gcc main.c foo.c -Wl,--wrap=foo -o main\n</code></pre>\n\n<p>And the the amazing output after running <code>./main</code>:</p>\n\n<pre><code>foo:wrap foo\nwrapfoo:wrap foo\nrealfoo:foo\n</code></pre>\n\n<p>The trick is (correct me if I am wrong) that the reference of <code>foo()</code> and <code>__real_foo()</code> is not defined at compile time. I. E. they have **undefined references\" which is the requierement for the linker to link <code>foo()</code> to <code>__wrap_foo()</code> and <code>__real_foo()</code> to <code>foo()</code>.</p>\n"}], "owner": {"reputation": 922, "user_id": 6677950, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/75145485f8eee7eeae1482ab79d2ecde?s=128&d=identicon&r=PG&f=1", "display_name": "eDeviser", "link": "https://stackoverflow.com/users/6677950/edeviser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6635, "favorite_count": 2, "accepted_answer_id": 46446749, "answer_count": 1, "score": 4, "last_activity_date": 1506511716, "creation_date": 1506504005, "question_id": 46444052, "link": "https://stackoverflow.com/questions/46444052/how-to-wrap-functions-with-the-wrap-option-correctly", "title": "How to wrap functions with the `--wrap` option correctly?", "body": "<p>The man page of gcc 6.3 says:</p>\n\n<pre><code>--wrap=symbol\n           Use a wrapper function for symbol.  Any undefined reference to\n           symbol will be resolved to \"__wrap_symbol\".  Any undefined\n           reference to \"__real_symbol\" will be resolved to symbol.\n           ...\n           If you link other code with this file using --wrap malloc, then all\n           calls to \"malloc\" will call the function \"__wrap_malloc\" instead.\n           The call to \"__real_malloc\" in \"__wrap_malloc\" will call the real\n           \"malloc\" function.\n</code></pre>\n\n<p>So I created a simple example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint foo() {\n    printf(\"foo\\n\");\n    return 0;\n}\n\nint __wrap_foo() {\n    printf(\"wrap foo\\n\");\n    return 0;\n}\n\nint main () {\n    printf(\"foo:\");foo();\n    printf(\"wrapfoo:\");__wrap_foo();\n    printf(\"realfoo:\");__real_foo();\n    return 0;\n}\n</code></pre>\n\n<p>And compiled it with:</p>\n\n<pre><code>gcc main.c -Wl,--wrap=foo -o main\n</code></pre>\n\n<p>This gave me a warning:</p>\n\n<pre><code>main.c:18:21: warning: implicit declaration of function \u2018__real_foo\u2019 [-Wimplicit-function-declaration]\n  printf(\"realfoo:\");__real_foo();\n                     ^~~~~~~~~~\n</code></pre>\n\n<p>Well going on. Now I would suggest an output like this:</p>\n\n<pre><code>foo:wrap foo\nwrapfoo:wrap foo\nrealfoo:foo\n</code></pre>\n\n<p>Instead I get this:</p>\n\n<pre><code>foo:foo\nwrapfoo:wrap foo\nrealfoo:foo\n</code></pre>\n\n<p>I hope the thing is clear. I am confused about the warning. Normally the <code>__real</code> function should be linked by the linker to <code>foo()</code>. Furthermore a call to <code>foo()</code> should be linked to <code>__wrap_foo</code>. But the output showes, that <code>foo()</code> is being executed instead.</p>\n\n<p>How to use <code>--wrap</code> correctly?</p>\n"}, {"tags": ["c", "hex", "fgets"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506501409, "post_id": 46443079, "comment_id": 79842184, "body": "You read 15 <b><i>characters</i></b> into <code>key</code>, not the full line, and you read it as a <b><i>string</i></b> not as separate integers."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1506501501, "post_id": 46443079, "comment_id": 79842250, "body": "In a typical ASCII environment <code>0a</code> is line feed (<code>LF</code> or <code>\\n</code>), which terminates your <code>fgets</code> call, so you don&#39;t read the remaining bytes. Use <code>fread</code> instead of <code>fgets</code>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 4, "creation_date": 1506501513, "post_id": 46443079, "comment_id": 79842257, "body": "Are these numbers stored as text or as binary values?"}, {"owner": {"reputation": 19, "user_id": 4859020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5752f379b729b11dcd54922de5376789?s=128&d=identicon&r=PG&f=1", "display_name": "Sherzod Elamanov", "link": "https://stackoverflow.com/users/4859020/sherzod-elamanov"}, "edited": false, "score": 0, "creation_date": 1506501901, "post_id": 46443079, "comment_id": 79842503, "body": "So, if 0a is equal to line feed, what could be the way to make it work properly?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506502611, "post_id": 46443079, "comment_id": 79842970, "body": "Use <code>fread</code> like <a href=\"https://wandbox.org/permlink/D6JnNHA4OPZyZ7Vd\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1506504644, "post_id": 46443079, "comment_id": 79844338, "body": "If this is a binary file, you should open it in binary mode <code>&quot;rb+&quot;</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1506504801, "post_id": 46443079, "comment_id": 79844444, "body": "@user694733 Good point, did not notice that is relevant in BLUEPIXY code. Thanks for pointing out."}], "answers": [{"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 2, "last_activity_date": 1506504736, "last_edit_date": 1506504736, "creation_date": 1506504415, "answer_id": 46444207, "question_id": 46443079, "link": "https://stackoverflow.com/questions/46443079/reading-hexadecimal-values-from-file-and-displaying-them-in-c/46444207#46444207", "title": "Reading hexadecimal values from file and displaying them in C", "body": "<p>Paul R.:<br>\nIn a typical ASCII environment <code>0a</code> is line feed (<code>LF</code> or <code>\\n</code>), which terminates your fgets call, so you don't read the remaining bytes.<br>\nUse fread instead of fgets.</p>\n\n<p>E.g.<br>\n(most relevant lines from code linked in comment by BLUEPIXY, which is a complete demonstrator):</p>\n\n<pre><code>secretkey = fopen(\"key.hex\", \"r+b\");\nfread(key, 1, sizeof key, secretkey);\n</code></pre>\n\n<p><em>(This compiles an answer from two comments, each of which would be a decent answer. I offer to delete if any of the two authors makes their own answer and asks me to.)</em></p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1506510320, "last_edit_date": 1506510320, "creation_date": 1506509584, "answer_id": 46446061, "question_id": 46443079, "link": "https://stackoverflow.com/questions/46443079/reading-hexadecimal-values-from-file-and-displaying-them-in-c/46446061#46446061", "title": "Reading hexadecimal values from file and displaying them in C", "body": "<p>You said that the file contains these hexadecimal values:</p>\n\n<pre><code>00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n</code></pre>\n\n<p>So the file contains precisely 16 bytes: the first has value <code>0x00</code>, the second has value <code>0x01</code>, etc.</p>\n\n<p>This is what's known as a <em>binary file</em>.  It is very much not a text file.  There are almost no ordinary, printable characters in that file.  If we were to print that file to the screen, we would see weird glyphs and garbage, or perhaps nothing.</p>\n\n<p>But the <code>fgets</code> function is intended for reading one line of <em>text</em> from a text file.  Specifically, it reads characters up to and including the end-of-line indication.  On Unix/Linux systems, the end-of-line indication is the linefeed character.  In ASCII, the linefeed character has the character code <code>0x0a</code>.  Also, since the <code>fgets</code> function is intended to work with text, it converts the text it reads into a C string, by appending a null byte (<code>0x00</code> or <code>'\\0'</code>) at the end of the output buffer.</p>\n\n<p>So what happened was that <code>fgets</code> read only the first 11 characters from the file, up to and including the <code>0A</code>, and wrote those characters plus the terminating null character to the <code>key</code> array.  So it filled in only the first 12 cells of the array.  The last 4 characters retained whatever uninitialized garbage values the array contained when you first defined it.  (In this case, it looks like they were <code>80</code>, <code>d2</code>, <code>73</code>, and <code>b7</code>.)</p>\n\n<p>But what you really want to do in this case, it looks like, is read 16 raw bytes, without assuming that they're text, without looking for a newline, without null-terminating the result.  That's a very different requirement, but it turns out there's another standard library function which does exactly what you want: <code>fread</code>.</p>\n\n<p>So rewrite your code like this:</p>\n\n<pre><code>FILE *secretkey;\nsecretkey = fopen(\"key.hex\", \"rb\");\nif(secretkey == NULL) {\n    fprintf(stderr, \"can't open %s\\n\", \"key.hex\");\n    exit(1);\n}\nint r = fread(key, 1, 16, secretkey);\nif(r != 16) {\n    fprintf(stderr, \"error reading key: read %d chars, expected %d\\n\", r, 16);\n    exit(1);\n}\nint j;\nfor(j = 0; j &lt; sizeof(key) ; j++) {\n    printf(\"%02x \", key[j]);\n}\n</code></pre>\n\n<p>You'll notice that I've also added code to check that <code>fread</code> did actually read 16 bytes as expected.  Also I've added code to check that the <code>fopen</code> call succeeded in opening the \"key.hex\" file.  Also I've changed the <code>fopen</code> call to open the file in binary mode (<code>\"rb\"</code>), and delete the <code>+</code> modifier, which you probably don't want.</p>\n\n<p>As a side note, if you want to do better error handling, when opening a file fails, it's always a good idea to print a more descriptive error message indicating <em>why</em> the file couldn't be opened:</p>\n\n<pre><code>if(secretkey == NULL) {\n    fprintf(stderr, \"can't open %s: %s\\n\", \"key.hex\", strerror(errno));\n    exit(1);\n}\n</code></pre>\n\n<p>To do that you'll also have to include the header files <code>&lt;string.h&gt;</code> for the <code>strerror()</code> function, and <code>&lt;errno.h&gt;</code> for the <code>errno</code> value.</p>\n"}], "owner": {"reputation": 19, "user_id": 4859020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5752f379b729b11dcd54922de5376789?s=128&d=identicon&r=PG&f=1", "display_name": "Sherzod Elamanov", "link": "https://stackoverflow.com/users/4859020/sherzod-elamanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2776, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506510320, "creation_date": 1506501221, "question_id": 46443079, "link": "https://stackoverflow.com/questions/46443079/reading-hexadecimal-values-from-file-and-displaying-them-in-c", "title": "Reading hexadecimal values from file and displaying them in C", "body": "<p>I have a key.hex file which contains:</p>\n\n<pre><code>00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F\n</code></pre>\n\n<p>as hexadecimal values. I try to read them and immediately print them:</p>\n\n<pre><code>unsigned char key[16];\nFILE *secretkey;\nsecretkey = fopen(\"key.hex\", \"r+\");\nfgets(key, 16, secretkey);\nint j = 0;\nfor(j = 0; j &lt; sizeof(key) ; j++) {\n    printf(\"%02x \", key[j]);\n}\n</code></pre>\n\n<p>However, as I get the following output:</p>\n\n<pre><code>00 01 02 03 04 05 06 07 08 09 0a 00 80 d2 73 b7\n</code></pre>\n\n<p>Why the output does not correspond to the content of the file?</p>\n"}, {"tags": ["c", "sockets", "network-programming", "telnet"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1506501000, "post_id": 46442846, "comment_id": 79841952, "body": "Beside the complete lack of error checking that you really want to add, you just want to send as many bytes as you received."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1506501441, "post_id": 46442846, "comment_id": 79842205, "body": "So besides adding error checking to all relevant system calls, drop these lines <code>memset( ...</code>. and replace <code>send(.., ..., sizeof ..., 0);</code> by <code>send(.., ..., len, 0);</code>."}, {"owner": {"reputation": 33, "user_id": 8624335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05cd10f82ad4ebc7e6be9b15bb6e7960?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8624335/sean"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1506501873, "post_id": 46442846, "comment_id": 79842478, "body": "Alk, you are the best. It works now. I really appreciate the help."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1506502791, "creation_date": 1506502791, "answer_id": 46443637, "question_id": 46442846, "link": "https://stackoverflow.com/questions/46442846/making-a-proxy-for-unix-using-c-socket/46443637#46443637", "title": "Making a proxy for unix using C socket", "body": "<p>Beside the complete lack of error checking that you really want to add, you just want to send as many bytes as you received.</p>\n\n<p>So besides adding error checking to all relevant system calls, drop these lines <code>memset( ....</code> and replace <code>send(.., ..., sizeof ..., 0);</code> by <code>send(.., ..., len, 0);</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1506512469, "creation_date": 1506512469, "answer_id": 46446966, "question_id": 46442846, "link": "https://stackoverflow.com/questions/46442846/making-a-proxy-for-unix-using-c-socket/46446966#46446966", "title": "Making a proxy for unix using C socket", "body": "<pre><code>len = recv(localTelnet_s, buf1, sizeof(buf1), 0);\nsend(sproxySocket, buf1, sizeof(buf1), 0);\n</code></pre>\n\n<p>You are ignoring:</p>\n\n<ol>\n<li>End of stream, signalled by <code>len == 0</code>.</li>\n<li>Errors, signalled by <code>len == -1</code>.</li>\n<li>The number of bytes received, signalled by <code>len</code> fif it is positive.</li>\n</ol>\n\n<p>It should be more like:</p>\n\n<pre><code>len = recv(localTelnet_s, buf1, sizeof(buf1), 0);\nif (len == 0)\n    // close both sockets and remove them from the FD sets\nelse if (len == -1)\n{\n    perror(\"recv\"); // at least\n    // close both sockets and remove them from the FD sets\n}\nelse\n{\n    send(sproxySocket, buf1, len, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8624335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05cd10f82ad4ebc7e6be9b15bb6e7960?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/8624335/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1506512469, "creation_date": 1506500481, "question_id": 46442846, "link": "https://stackoverflow.com/questions/46442846/making-a-proxy-for-unix-using-c-socket", "title": "Making a proxy for unix using C socket", "body": "<p>I am trying to create two proxies that connect two different virtual machines together. They should connect like this</p>\n\n<blockquote>\n  <p>vm1(telnet) &lt;--> proxy1 &lt;--> proxy2 &lt;--> vm2(telnet daemon)</p>\n</blockquote>\n\n<p>The user would open up vm1 and vm2 then another instance of vm1. On vm1 you would run proxy1, on vm2 run proxy2 then on the second vm1 connect to the proxy1 via telnet. </p>\n\n<p>Once the user is connected to proxy1 via vm1, proxy1 should then connect to proxy2. Proxy2 will send what vm2 has displayed which is a prompt to login. It will send that to proxy1 then to vm1. The user should be able to type into vm1 and send each line to proxy1 then proxy2 then vm2 as if they were at vm2 all along. Instead I am given a couple words from the vm2's login page but it is mostly random chars and some of the tv static chars. It keeps sending me massive amounts of random chars until I close everything down. </p>\n\n<p>Here is my code (cproxy.c is proxy1 and sproxy.c is proxy2)</p>\n\n<p>cproxy.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n\n#define MAX_PENDING 5\n#define MAX_LINE 1024\n\nstruct sockaddr_in LocalTelnetAddress;\nstruct sockaddr_in SproxyAddress;\nstruct hostent *hp;\nstruct timeval tv;\n\nint setUpTelnetConnection(int port){\n    bzero((char *)&amp;LocalTelnetAddress, sizeof(LocalTelnetAddress));\n    LocalTelnetAddress.sin_family = AF_INET;\n    LocalTelnetAddress.sin_addr.s_addr = INADDR_ANY;\n    LocalTelnetAddress.sin_port = htons(port); // Change 5200\n\n    // Create socket.\n    int localTelnetSocket = socket(PF_INET, SOCK_STREAM, 0);\n    if (localTelnetSocket &lt; 0) {\n        fprintf(stderr, \"ERROR: c telnet socket.\\n\");\n        exit(1);\n    }\n\n    // Bind socket.\n    if (bind(localTelnetSocket, (struct sockaddr *) &amp;LocalTelnetAddress, sizeof(LocalTelnetAddress)) &lt; 0) {\n        fprintf(stderr, \"ERROR: c telnet bind.\\n\");\n        exit(1);\n    }\n\n    return localTelnetSocket;\n}\n\nint setUpSproxyConnection(char *host, int port)\n{\n    hp = gethostbyname(host);\n    bzero((char *)&amp;SproxyAddress, sizeof(SproxyAddress));\n    SproxyAddress.sin_family = AF_INET;\n    bcopy(hp-&gt;h_addr, (char *)&amp;SproxyAddress.sin_addr, hp-&gt;h_length);\n    SproxyAddress.sin_port = htons(port);  //change 6200\n\n\n    // Create the socket.\n    int sproxySocket = socket(PF_INET, SOCK_STREAM, 0);\n    if (sproxySocket &lt; 0) {\n        fprintf(stderr, \"ERROR: sproxy socket.\\n\");\n        exit(1);\n    }\n\n    return sproxySocket;\n}\n\nint main(int argc, char * argv[]){\n\n    fd_set readfds;\n    int rv;\n    int n, len = 0;\n    struct timeval tv;\n\n    char buf1[MAX_LINE];\n    socklen_t len1;\n    char buf2[MAX_LINE];\n\n    int port1;\n    int port2;\n    int localTelnetSocket;\n    int sproxySocket;\n    if(argc == 4){\n        port1 = atoi(argv[1]);\n        port2 = atoi(argv[3]);\n        localTelnetSocket = setUpTelnetConnection(port1);\n        sproxySocket = setUpSproxyConnection(argv[2],port2);\n    }\n    else{\n        fprintf(stderr, \"illegal argc\\n\");\n        exit(1);\n    }\n\n    listen(localTelnetSocket, MAX_PENDING);\n  //  int len = sizeof(LocalTelnetAddress);\n    // Connect local telnet\n    int localTelnet_s = accept(localTelnetSocket, (struct sockaddr *)&amp;LocalTelnetAddress, &amp;len1);\n    if (localTelnet_s &lt; 0) {\n        perror(\"simplex-talk: accept\");\n        exit(1);\n    }\n\n    // Connect sproxy\n    int sproxy_s = connect(sproxySocket, (struct sockaddr *) &amp;SproxyAddress, sizeof(SproxyAddress));\n    if (sproxy_s &lt; 0) {\n        fprintf(stderr, \"ERROR connecting to sproxy.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    while(1){\n        // clear the set ahead of time\n        FD_ZERO(&amp;readfds);\n\n        // add our descriptors to the set\n        FD_SET(localTelnet_s, &amp;readfds);\n        FD_SET(sproxySocket, &amp;readfds);\n\n        // find the largest descriptor, and plus one.\n\n        if (localTelnet_s &gt; sproxySocket) n = localTelnet_s + 1;\n        else n = sproxySocket +1;\n\n\n        // wait until either socket has data ready to be recv()d (timeout 10.5 secs)\n        tv.tv_sec = 10;\n        tv.tv_usec = 500000;\n\n        rv = select(n, &amp;readfds, NULL, NULL, &amp;tv);\n\n\n        if (rv == -1) {\n            perror(\"select\"); // error occurred in select()\n        } else if (rv == 0) {\n            printf(\"Timeout occurred!  No data after 10.5 seconds.\\n\");\n        } else {\n            // one or both of the descriptors have data\n            if (FD_ISSET(localTelnet_s, &amp;readfds)) {\n                memset(buf1,0,strlen(buf1));\n                len = recv(localTelnet_s, buf1, sizeof(buf1), 0);\n                send(sproxySocket, buf1, sizeof(buf1), 0);\n               // printf(\"%s\", buf1);\n            }\n            if (FD_ISSET(sproxySocket, &amp;readfds)) {\n                memset(buf2,0,strlen(buf2));\n                len = recv(sproxySocket, buf2, sizeof(buf2), 0);\n                send(localTelnet_s, buf2, sizeof(buf2), 0);\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>sproxy.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n\n#define MAX_PENDING 5\n#define MAX_LINE 1024\n\nstruct sockaddr_in TelnetDaemonAddress;\nstruct sockaddr_in CproxyAddress;\nstruct hostent *hp;\nchar *ip = \"127.0.0.1\";\n//struct hostent *hp;\nstruct timeval tv;\n\nint setUpCproxyConnection(int port)\n{\n    bzero((char *)&amp;CproxyAddress, sizeof(CproxyAddress));\n    CproxyAddress.sin_family = AF_INET;\n    CproxyAddress.sin_addr.s_addr = INADDR_ANY;\n    CproxyAddress.sin_port = htons(port);\n\n    // Create  socket.\n    int cproxySocket = socket(PF_INET, SOCK_STREAM, 0);\n    if (cproxySocket &lt; 0) {\n        fprintf(stderr, \"ERROR: cproxy socket.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    // Bind socket\n    if (bind(cproxySocket, (struct sockaddr *) &amp;CproxyAddress, sizeof(CproxyAddress)) &lt; 0) {\n        fprintf(stderr, \"ERROR: cproxy bind.\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    return cproxySocket;\n}\n\nint setUpTelnetDaemonConnection()\n{\n    hp = gethostbyname(\"127.0.0.1\");\n    bzero((char *)&amp;TelnetDaemonAddress, sizeof(TelnetDaemonAddress));\n    TelnetDaemonAddress.sin_family = AF_INET;\n    bcopy(hp-&gt;h_addr, (char *)&amp;TelnetDaemonAddress.sin_addr, hp-&gt;h_length);\n    TelnetDaemonAddress.sin_port = htons(23);  //change 6200\n\n\n    // Create the socket.\n    int telnetDaemonSocket = socket(PF_INET, SOCK_STREAM, 0);\n    if (telnetDaemonSocket &lt; 0) {\n        fprintf(stderr, \"ERROR: telnetDaemonSocket.\\n\");\n        exit(1);\n    }\n\n    return telnetDaemonSocket;\n}\n\nint main(int argc, char * argv[]){\n\n    fd_set readfds;\n    int rv;\n    int n, len = 0;\n    struct timeval tv;\n\n    char buf1[MAX_LINE];\n    socklen_t len1;\n    char buf2[MAX_LINE];\n\n\n    int port;\n    int cproxySocket;\n    int telnetDaemonSocket;\n\n\n    if(argc == 2){\n        port = atoi(argv[1]);\n        cproxySocket = setUpCproxyConnection(port);\n        telnetDaemonSocket = setUpTelnetDaemonConnection();\n    }\n    else{\n        fprintf(stderr, \"illegal argc\\n\");\n        exit(1);\n    }\n\n    // Connect cproxy\n    listen(cproxySocket, MAX_PENDING);\n   // int len = sizeof(CproxyAddress);\n    int cproxy_s = accept(cproxySocket, (struct sockaddr *) &amp;CproxyAddress, &amp;len1);\n\n\n    if (cproxy_s &lt; 0) {\n        fprintf(stderr, \"ERROR: cproxy accept.\\n\");\n        exit(1);\n    }\n\n    // Connect telnet daemon\n    if (connect(telnetDaemonSocket, (struct sockaddr *) &amp;TelnetDaemonAddress, sizeof(TelnetDaemonAddress)) &lt; 0) {\n        fprintf(stderr, \"ERROR: telnet daemon connect.\\n\");\n        exit(1);\n    }\n\n    while(1){\n        // clear the set ahead of time\n        FD_ZERO(&amp;readfds);\n\n        // add our descriptors to the set\n        FD_SET(cproxy_s, &amp;readfds);\n        FD_SET(telnetDaemonSocket, &amp;readfds);\n\n\n        // find the largest descriptor, and plus one.\n\n        if (cproxy_s &gt; telnetDaemonSocket) n = cproxy_s + 1;\n        else n = telnetDaemonSocket +1;\n\n        // wait until either socket has data ready to be recv()d (timeout 10.5 secs)\n        tv.tv_sec = 10;\n        tv.tv_usec = 500000;\n        rv = select(n, &amp;readfds, NULL, NULL, &amp;tv);\n\n        if (rv == -1) {\n            perror(\"select\"); // error occurred in select()\n        } else if (rv == 0) {\n            printf(\"Timeout occurred!  No data after 10.5 seconds.\\n\");\n        } else {\n            // one or both of the descriptors have data\n            if (FD_ISSET(cproxy_s, &amp;readfds)) {\n                memset(buf1,0,strlen(buf1));\n                len = recv(cproxy_s, buf1, sizeof(buf1), 0);\n                send(telnetDaemonSocket, buf1, sizeof(buf1), 0);\n            }\n            if (FD_ISSET(telnetDaemonSocket, &amp;readfds)) {\n                memset(buf2,0,strlen(buf2));\n                len = recv(telnetDaemonSocket, buf2, sizeof(buf2), 0);\n                send(cproxy_s, buf2, sizeof(buf2), 0);\n                //printf(\"%s\", buf2);\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1506500640, "post_id": 46442843, "comment_id": 79841747, "body": "Have a look at Boost.Preprocessor"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 4, "creation_date": 1506502638, "post_id": 46442843, "comment_id": 79842979, "body": "Why do you use macros at all?"}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1506504606, "post_id": 46442843, "comment_id": 79844306, "body": "I&#39;m using macros for the QMK firmware = for embedded program, this kinddof declare local variables (it seems it&#39;s better like this for embedded stuff, it&#39;s not my cup of tea I dont know more, just a wild guess)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506505013, "post_id": 46442843, "comment_id": 79844583, "body": "&quot;it seems it&#39;s better like this for embedded stuff&quot; Most certainly not. This just looks like some crazy macro meta programming. Look at ways to get rid of the macros."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506505246, "post_id": 46442843, "comment_id": 79844765, "body": "Just had a look at that library. It is really horribly written, one big goo of somebody&#39;s secret garage marco language. Basically just a big wall of <code>BLIP BLOP X Y MACRO STUFF DO THINGS</code> without any identifier naming policy whatesover. Avoid that crap if you can."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506505589, "post_id": 46442843, "comment_id": 79844993, "body": "(Writing a keyboard driver for a MCU isn&#39;t rocket science. No need to bloat it to oblivion.)"}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1506506305, "post_id": 46442843, "comment_id": 79845484, "body": "QMK firmware developper and kiibohd firmware developper are one of the best C/embedded developpers around. Please be less cheeky and take a deeper look. Please think first &quot;if those guys are using tons of macros, there&#39;s a reason behind, <i>they&#39;re not stupid there must be a logical reason</i>&quot;. Instead of thinking &quot;avoid macros if you can, those who use them a lot make only crappy stuff&quot;. Thank you. If you&#39;ve taken a careful look at the qmk firmware, you would have seen how many keyboards they support, and how many drivers + keymap configuration they handle. Try to do 1/100th of what they&#39;ve done."}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506506685, "post_id": 46442843, "comment_id": 79845748, "body": "@Lundin I&#39;ll take your advice and try to make my own function to avoid big macros anyway, because I guess you&#39;re good too. Is there a way to see expanded macros before they&#39;re compiled (with gcc)?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1506507022, "post_id": 46442843, "comment_id": 79845980, "body": "<code>gcc -E</code> shows you the preprocessed source."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1506507937, "post_id": 46442843, "comment_id": 79846575, "body": "C and C++ are distinct languages, with distinct solutions. Pick one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506510242, "post_id": 46442843, "comment_id": 79848089, "body": "@OlivierPons The need for macros like these pop up when maintaining larger code bases that had a poor design from scratch - it is a certain sign of code rot. If you look at larger professional protocol stacks, RTOS and similar, they face the very same portability problems, yet they manage without some <code>BLIP(BLOP)</code> macros. There is not necessarily a relation between the end result of the application and the quality of the code. Linux for example, is a very successful application, yet it contains some of the most notorious C code ever written."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506510335, "post_id": 46442843, "comment_id": 79848158, "body": "Summary: It is important to call out bad code for what it is. Otherwise less experienced devs might think that the code is good and start to imitate it."}], "answers": [{"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1506504225, "post_id": 46443835, "comment_id": 79844032, "body": "<code>gcc</code> is not the only C compiler in the World and the question is not tagged <code>gcc</code>. I think your answer is right but it unnecessarily focuses on <code>gcc</code>."}, {"owner": {"reputation": 26, "user_id": 8681193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d3e894abb252f9356d48c0d88af263?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Alfonso Miranda S&#225;nchez", "link": "https://stackoverflow.com/users/8681193/diego-alfonso-miranda-s%c3%a1nchez"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1506504872, "post_id": 46443835, "comment_id": 79844488, "body": "He never said an specific compiler, so I take the GCC as example."}, {"owner": {"reputation": 26, "user_id": 8681193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d3e894abb252f9356d48c0d88af263?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Alfonso Miranda S&#225;nchez", "link": "https://stackoverflow.com/users/8681193/diego-alfonso-miranda-s%c3%a1nchez"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1506505414, "post_id": 46443835, "comment_id": 79844883, "body": "Also, for the most commercial compilers it is the same behavior, because the compiler programming enterprises or organizations has to follow the most important C standard, the ANSI C, if they want a comercial, functional and well software engineered compiler."}, {"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1506506021, "post_id": 46443835, "comment_id": 79845305, "body": "You could use italic instead of caps, to say &quot;never&quot;, I feel like you shout and I annoyed you with my question..."}, {"owner": {"reputation": 26, "user_id": 8681193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d3e894abb252f9356d48c0d88af263?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Alfonso Miranda S&#225;nchez", "link": "https://stackoverflow.com/users/8681193/diego-alfonso-miranda-s%c3%a1nchez"}, "edited": false, "score": 0, "creation_date": 1506506420, "post_id": 46443835, "comment_id": 79845568, "body": "Sorry It was not my intention, will keep it in mind next time I answer a question, I&#39;m new in stack overflow."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1506506731, "post_id": 46443835, "comment_id": 79845785, "body": "unless I missed something, this answer is not practically correct, because argument expansion can be emulated uo to some fixed arg count ..."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1506511149, "post_id": 46443835, "comment_id": 79848709, "body": "My point was that your answer appears to be specific to gcc, but it generally applies to all C compilers. If gcc is just an example, You should say so e.g. &quot;The answer is: No, For example, the GCC compiler... &quot; and everything else can be the same."}], "tags": [], "owner": {"reputation": 26, "user_id": 8681193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d3e894abb252f9356d48c0d88af263?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Alfonso Miranda S&#225;nchez", "link": "https://stackoverflow.com/users/8681193/diego-alfonso-miranda-s%c3%a1nchez"}, "is_accepted": true, "score": 0, "last_activity_date": 1506503352, "creation_date": 1506503352, "answer_id": 46443835, "question_id": 46442843, "link": "https://stackoverflow.com/questions/46442843/define-is-there-a-way-to-expand-arguments/46443835#46443835", "title": "define: is there a way to expand arguments?", "body": "<p>The answer is: No, The GCC can't do argument expansion. The C Preprocessor only supports 2 kind of macros: Object-like macros and function-like macros. What you are using is function-like macro. A Macro is code which has been given a name. A function-like macro expands its code trough the compiler, but take care about this, only its code, not its arguments, and if contains other macros the compiler will expand too the other macros code. The Official page of the GCC (<a href=\"https://gcc.gnu.org/\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/</a>), NEVER reports that it supports argument expansion, or what I see what you want, function argument separation at expansion time. The GCC supports only the normal macro code expansion (here is the specific article about supported macros: <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Macros.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/cpp/Macros.html</a>),  so there is no way to do function argument separation at expansion time. But you can perfectly define the macros like the second example you give, but of course will not do argument expansion.</p>\n"}, {"comments": [{"owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1506507748, "post_id": 46445020, "comment_id": 79846454, "body": "Can I use the boost library with the QMK firmware (I&#39;m sorry I&#39;m very new to C programming), it&#39;s using gcc and it&#39;s for my Infinity Ergodox"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "edited": false, "score": 0, "creation_date": 1506507914, "post_id": 46445020, "comment_id": 79846563, "body": "@OlivierPons boost is for <b>C++</b>, you&#39;ve erroneously tagged 2 unrelated languages to your question."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 1, "creation_date": 1506509142, "post_id": 46445020, "comment_id": 79847332, "body": "boost preprocessor should support both c and c++ compilers afaik"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1506511335, "post_id": 46445020, "comment_id": 79848824, "body": "Would that work if (as the question asked) the <code>TT(...)</code> was an argument to a macro? i.e. <code>SOME_MACRO(TT(A,B,C,D))</code> is the same as <code>SOME_MACRO(T(A), T(B), T(C),T(D))</code>?"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1506514963, "post_id": 46445020, "comment_id": 79851123, "body": "@JeremyP yep, for a general macro they&#39;re not equivalent of course; I assumed the MACRODOWN being a variadic pasting its <b>VA_ARGS</b> verbatim, in this case it would work. Otherwise, you&#39;d need to redefine the outer macro via something like BOOST_PP_EXPAND in order to delay evaluation ..."}], "tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": false, "score": 0, "last_activity_date": 1506506619, "creation_date": 1506506619, "answer_id": 46445020, "question_id": 46442843, "link": "https://stackoverflow.com/questions/46442843/define-is-there-a-way-to-expand-arguments/46445020#46445020", "title": "define: is there a way to expand arguments?", "body": "<p>a boost preprocessor solution could be</p>\n\n<pre><code>#include &lt;boost/preprocessor/variadic/to_seq.hpp&gt;\n#include &lt;boost/preprocessor/seq/enum.hpp&gt;\n#include &lt;boost/preprocessor/seq/transform.hpp&gt;\n\n\n#define TT(...) BOOST_PP_SEQ_ENUM( BOOST_PP_SEQ_TRANSFORM( TT_, _, BOOST_PP_VARIADIC_TO_SEQ(__VA_ARGS__) ) )\n#define TT_(_1,_2,E) T(E)\n\nTT(A,B,C,D) // T(A),T(B),T(C),T(D)\n</code></pre>\n\n<p>where is assumed variadic support and boost pp iteration limits.</p>\n"}], "owner": {"reputation": 13904, "user_id": 106140, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/f976af5e820922c8ebc645e42f8e17a4?s=128&d=identicon&r=PG", "display_name": "Olivier Pons", "link": "https://stackoverflow.com/users/106140/olivier-pons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 46443835, "answer_count": 2, "score": 3, "last_activity_date": 1506506619, "creation_date": 1506500478, "question_id": 46442843, "link": "https://stackoverflow.com/questions/46442843/define-is-there-a-way-to-expand-arguments", "title": "define: is there a way to expand arguments?", "body": "<p><code>T()</code> is a macro</p>\n\n<p>I have many things like:</p>\n\n<pre><code>MACRODOWN(T(P), T(E), T(X), T(R), T(T), T(H), T(A), T(F))\nMACRODOWN(T(H), T(A), T(F))\nMACRODOWN(T(Z), T(A))\n</code></pre>\n\n<p>I'd like to define a macro that would work like this:</p>\n\n<pre><code>MACRODOWN(TT(P,E,X,R,T,H,A,F))\nMACRODOWN(TT(H,A,F))\nMACRODOWN(TT(Z,A))\n</code></pre>\n\n<p>And they would exand, of course, to the first macros above.\nIs this possible, and if so, how?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1506500588, "post_id": 46442834, "comment_id": 79841720, "body": "If it&#39;s C, than tagging C++ is inappropriate. And vice-versa."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506500591, "post_id": 46442834, "comment_id": 79841725, "body": "It&#39;s undefined behavior."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1506500608, "post_id": 46442834, "comment_id": 79841734, "body": "You have undefined behaviour because the array <code>arr</code> doesn&#39;t have 7th element at index 6 (index range is 0 to 5)."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1506500671, "post_id": 46442834, "comment_id": 79841764, "body": "See: <a href=\"https://stackoverflow.com/q/15646973/4389800\">stackoverflow.com/q/15646973/4389800</a> and <a href=\"https://stackoverflow.com/q/9137157/4389800\">stackoverflow.com/q/9137157/4389800</a>"}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506500952, "post_id": 46442834, "comment_id": 79841926, "body": "in c there is no matter of index"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1506501330, "post_id": 46442834, "comment_id": 79842146, "body": "You have undefined behaviour because you assign and print outside the array bounds. It is likely that <code>num</code> is placed just after <code>a</code> on the stack. So when you print <code>a[6]</code> the code happens to print the value of <code>num</code>."}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506501626, "post_id": 46442834, "comment_id": 79842326, "body": "sory sir, but in c u can print the any index no. of an array like you declear an array like &quot;int arr[5];&quot; after that u insert the value on 10 index no. like &quot;arr[10]=20&quot; after that you print arr[10] the ans is 20 (so why this will happen)"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1506501854, "post_id": 46442834, "comment_id": 79842467, "body": "@AshishVerma You can <i>try</i> to print any index. However, if you use an index outside the area defined for the array undefined behaviour is invoked. That means that anything could happen. You could be afflicted by nasal demons. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Undefined_behavior</a>"}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506502251, "post_id": 46442834, "comment_id": 79842741, "body": "but sir, if we do like this a[0]=12;  and remove the scanf command is perfectly work (so what is the reason);"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1506507023, "post_id": 46442834, "comment_id": 79845981, "body": "@Ashish - There is no explanation. With undefined behavior <i>anything</i> can happen, including displaying what you expected. Or something totally different. There are no rules."}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506509033, "post_id": 46442834, "comment_id": 79847251, "body": "now the array contain 6 value  but when it contain 5 value the output us correct example now a[]={1,2,3,4,5,6} so the output of program is 12 1 2 3 4 5 12    and when a[]={1,2,3,4,5} so the output is 12 1 2 3 4 5 (in the condition when we take 5 element at initial time the result is up to mark it Insert in beginning correctly how????)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506500821, "post_id": 46442875, "comment_id": 79841849, "body": "no, if we do like this  a[0]=12;   is perfectly work"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506501006, "post_id": 46442875, "comment_id": 79841956, "body": "@AshishVerma in your code i&lt;=6 access the a[6] value, which out of bound."}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506501207, "post_id": 46442875, "comment_id": 79842070, "body": "sory sir, but in c u can print the any index no. of an array like you declear an array like &quot;int arr[5];&quot;  after that u insert the value on 10 index no. like &quot;arr[10]=20&quot; after that you print arr[10] the ans is 20"}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "reply_to_user": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506501342, "post_id": 46442875, "comment_id": 79842153, "body": "@AshishVerma Undefined Behavior means that &quot;anything can happen&quot;. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Undefined_behavior</a>"}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506501506, "post_id": 46442875, "comment_id": 79842253, "body": "sory, but any thing can&#39;t happen in programing for every output some logic is there i what that???"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 1, "creation_date": 1506502182, "post_id": 46442875, "comment_id": 79842696, "body": "@AshishVerma - read K&amp;R C book, in that it is mentioned. that output can be anything. Its not logical, for some device you can come up with one logic but with other device it may fail. that&#39;s why undefined behavior"}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506502651, "post_id": 46442875, "comment_id": 79842988, "body": "ok sir you are right , but that is condition of garbage value or increase datatype range ,,,,,,, if we do like this a[0]=12; and remove the scanf command is perfectly work (so what is the reason) the output is 12 1 2 3 4 5 6 and Insert in beginning is happen perfectly can u explain this"}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 2, "last_activity_date": 1506505304, "last_edit_date": 1506505304, "creation_date": 1506500577, "answer_id": 46442875, "question_id": 46442834, "link": "https://stackoverflow.com/questions/46442834/what-is-the-output-of-this-program-insert-in-beginning-of-an-array-in-c-and-reas/46442875#46442875", "title": "What is the output of this program Insert in beginning of an array in c and reason why is it?", "body": "<p>It is <strong>undefined behaviour</strong> because you are trying to access array out of the bound.</p>\n\n<p><strong>C11 standard say's :</strong></p>\n\n<blockquote>\n  <p><strong>J.2 Undefined behavor</strong></p>\n  \n  <p>An array subscript is out of range, even if an object is apparently\n  accessible with the given subscript (as in the lvalue expression\n  a<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">1</a>[7] given the declaration int a[4][5]) (6.5.6).</p>\n</blockquote>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a> means that \"anything can happen\".The program may crash or produce nothing or print expected output.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506503611, "post_id": 46443830, "comment_id": 79843603, "body": "i want to Insert in beginning of an array"}, {"owner": {"reputation": 720, "user_id": 6073148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6LMP5.jpg?s=128&g=1", "display_name": "Zahid Khan", "link": "https://stackoverflow.com/users/6073148/zahid-khan"}, "reply_to_user": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506503744, "post_id": 46443830, "comment_id": 79843695, "body": "What you want to insert?"}, {"owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506503952, "post_id": 46443830, "comment_id": 79843832, "body": "any number take input on the console"}, {"owner": {"reputation": 720, "user_id": 6073148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6LMP5.jpg?s=128&g=1", "display_name": "Zahid Khan", "link": "https://stackoverflow.com/users/6073148/zahid-khan"}, "reply_to_user": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "edited": false, "score": 0, "creation_date": 1506504157, "post_id": 46443830, "comment_id": 79843977, "body": "Thats what you are doing in <code>a[0] = num;</code> getting the number from user and assigning it to the a[0] thats first index ."}], "tags": [], "owner": {"reputation": 720, "user_id": 6073148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6LMP5.jpg?s=128&g=1", "display_name": "Zahid Khan", "link": "https://stackoverflow.com/users/6073148/zahid-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1506503325, "creation_date": 1506503325, "answer_id": 46443830, "question_id": 46442834, "link": "https://stackoverflow.com/questions/46442834/what-is-the-output-of-this-program-insert-in-beginning-of-an-array-in-c-and-reas/46443830#46443830", "title": "What is the output of this program Insert in beginning of an array in c and reason why is it?", "body": "<p>Analysing your code:</p>\n\n<pre><code>void main() \n{\nint a[]={1,2,3,4,5,6};  //Array of 5 elements\nint num,i;\n//for(i=6;i&gt;0;i--)         //i. Bound Checking Error.\nfor(i=5; i&gt;0; i--)           //correct.\n{\n   a[i]=a[i-1];          //Trying to insert element 6 value over element 5. However you have only 5 elements in consecutive memory location. In i. Reference`\n}\nprintf(\"enter any no, \");\nscanf(\"%d\",&amp;num); // insert 12\na[0]=num;\nfor(i=0;i&lt;=6;i++)  // you have only 5 elements trying to access 6 elements.\n{\n     printf(\"\\n\\n%d\",a[i]);\n}\ngetch();\n}\n</code></pre>\n\n<p><strong>According to C standard its undefined behavior and is not recommended.</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 8681285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/684f7506b9a81df27e310a9ad39be11d?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Verma", "link": "https://stackoverflow.com/users/8681285/ashish-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "answer_count": 2, "score": -4, "last_activity_date": 1506570141, "creation_date": 1506500460, "last_edit_date": 1506570141, "question_id": 46442834, "link": "https://stackoverflow.com/questions/46442834/what-is-the-output-of-this-program-insert-in-beginning-of-an-array-in-c-and-reas", "title": "What is the output of this program Insert in beginning of an array in c and reason why is it?", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main() \n{\n    int a[]={1,2,3,4,5,6};\n    int num,i;\n    for(i=6;i&gt;0;i--)\n    {\n        a[i]=a[i-1];\n    }\n    printf(\"enter any no, \");\n    scanf(\"%d\",&amp;num); // input 12\n    a[0]=num;\n    for(i=0;i&lt;=6;i++)\n    {\n        printf(\"\\n\\n%d\",a[i]);\n    }\n    getch();\n}\n</code></pre>\n\n<p>the output is \n12\n1\n2\n3\n4\n5\n12\nwhy???\nthere is no array memory problem when we do like this</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main() \n{\n    int a[]={1,2,3,4,5,6};\n    int num,i;\n    for(i=6;i&gt;0;i--)\n    {\n        a[i]=a[i-1];\n    }\n    printf(\"enter any no, \");\n    //scanf(\"%d\",&amp;num); \n    a[0]=12;\n    for(i=0;i&lt;=6;i++)\n    {\n        printf(\"\\n\\n%d\",a[i]);\n    }\n    getch();\n}\n</code></pre>\n\n<p>the memory of an array is same but the output is 12 1 2 3 4 5 6 (Now the output is change) \nso, when we use scanf so why the output is different </p>\n\n<p>there is no mistake of Undefined Behavior and no mistake in length of an array </p>\n\n<p>so plz give me the reason why this happen while using scanf????</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 3, "creation_date": 1506499109, "post_id": 46442411, "comment_id": 79840855, "body": "That would be <code>2^64 - 1</code>."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 2, "creation_date": 1506499190, "post_id": 46442411, "comment_id": 79840906, "body": "It is not fundamentally different from detecting overflow in a signed number. Instead of a negative number you would get a small integer."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1506499303, "post_id": 46442411, "comment_id": 79840982, "body": "Unsigned integers don&#39;t overflow; they <i>wrap around</i>."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1506499306, "post_id": 46442411, "comment_id": 79840985, "body": "See the discussion here: <a href=\"https://stackoverflow.com/questions/3944505/detecting-signed-overflow-in-c-c\" title=\"detecting signed overflow in c c\">stackoverflow.com/questions/3944505/&hellip;</a>  Best way is probably to use the CPU&#39;s overflow flags (but those are not exposed in a standard way so you need to use gcc compiler macros or something like that)."}, {"owner": {"reputation": 3337, "user_id": 5274567, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dZoJl.png?s=128&g=1", "display_name": "Worice", "link": "https://stackoverflow.com/users/5274567/worice"}, "edited": false, "score": 0, "creation_date": 1506499872, "post_id": 46442411, "comment_id": 79841312, "body": "Ok, wapping numbers make perfecly sense, now that you tell me."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506499966, "post_id": 46442411, "comment_id": 79841357, "body": "It is hard or impossible to detect by looking at a value. The problem is the maximum value plus even only one is still/again a valid value; i.e. 0. This is why most programmers avoid as much as possible. If you calculate <code>c=a+b;</code> and want to find out whether the result is affected, check whether <code>((max - b) &lt; a)</code>; with <code>max</code>being the appropriate compiler-provided symbol. Do not calculate it yourself as <code>2^64-1</code>."}, {"owner": {"reputation": 3337, "user_id": 5274567, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dZoJl.png?s=128&g=1", "display_name": "Worice", "link": "https://stackoverflow.com/users/5274567/worice"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506500452, "post_id": 46442411, "comment_id": 79841644, "body": "@Yunnosch your comment has the practical example that I need to have a better grasp on the problem. If you want to articulate your comment as an answer, I will gladly accept it."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506500523, "post_id": 46442411, "comment_id": 79841684, "body": "Just did so, with pleasure."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1506501873, "post_id": 46442411, "comment_id": 79842479, "body": "&quot;How big can a 64 bit unsigned integer be?&quot;  It can be 64 bits... For any binary (base 2) number, the digit number <code>n</code> has the the value <code>val * 2^n</code>, where <code>val</code> is 1 or 0 for binary. Note that the lsb is n=0. So a number with only the msb set to 1 would be <code>2^63</code> and a 64 bit number set to &quot;all ones&quot; would be <code>2^64 - 1</code>. This is the utterly basic stuff they teach in (decent) schools before you are allowed to take any programming classes whatsoever."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1506503745, "post_id": 46442411, "comment_id": 79843696, "body": "&quot;<i>How big can a 64 bit unsigned integer be?</i>&quot;: <code>UINT64_MAX</code> (see <code>&lt;stdint.h&gt;</code>)?"}, {"owner": {"reputation": 3337, "user_id": 5274567, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dZoJl.png?s=128&g=1", "display_name": "Worice", "link": "https://stackoverflow.com/users/5274567/worice"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506504025, "post_id": 46442411, "comment_id": 79843883, "body": "Thanks @Lundin for your straightforward examples, as always!"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1506519670, "post_id": 46442848, "comment_id": 79854495, "body": "How is the maximum value of a 64 bit unsigned integer implementation specific or platform specific?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506520984, "post_id": 46442848, "comment_id": 79855536, "body": "@chux Not the final maximum value is specific, but the calculation <code>2^64-1</code>. I believe that it is within what a compiler is allowed to do, to use an intermediate data type and/or a (hardware specific) register which can store the value or to detect by something like static code analysis that the final value fits into a 64bit unsigned and what that value is and (implementation specifically) use that as a constant. The compiler-provided symbols definition is different wherever I looked. But your question is valid and I admit having thought of something different, which is not applicable here."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506521212, "post_id": 46442848, "comment_id": 79855689, "body": "I can imagine the edge case of an implementation which has a trap representation at 2^64-1 and uses 2^64-2 as max values. But that I do not use as an argument here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506523585, "post_id": 46442848, "comment_id": 79857417, "body": "I like imagination, yet for <i>unsigned</i> types, a combination of <i>value bits</i> cannot be a trap. &quot;objects of that type shall be capable of representing values from 0 to 2N \u2212 1 using a pure binary representation&quot;  C11 &#167;6.2.6.2 1"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506528071, "post_id": 46442848, "comment_id": 79860461, "body": "@chux Good quote, thanks. Lucky that I did not use that as an argument."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 9, "last_activity_date": 1506500483, "creation_date": 1506500483, "answer_id": 46442848, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/46442848#46442848", "title": "How big can a 64 bit unsigned integer be?", "body": "<p>It is hard or impossible to detect by looking at a value.<br>\nThe problem is the maximum value plus even only 1 is still/again a valid value; i.e. 0.</p>\n\n<p>This is why most programmers avoid as much as possible, if it is actually a wrong value. For some applications, wrapping around is part of the logic and fine.</p>\n\n<p>If you calculate e.g. <code>c=a+b;</code> (a, b, c being 64bit unsigned ints and a,b being worryingly close to max, or migth be) and want to find out whether the result is affected,<br>\nthen check whether <code>((max - b) &lt; a)</code>; with <code>max</code> being the appropriate compiler-provided symbol.  </p>\n\n<p>Do not calculate the maximum value yourself as 2^64-1, it will be implementation specific and platform specific. On top of that, it will contain the wraparound twice (2^64 being beyond max, probably 0; and subtracting 1 going via 0 back...). And that applies even if <code>^</code> is understood to be an appropriate version of \"to the power of\".</p>\n"}, {"comments": [{"owner": {"reputation": 3337, "user_id": 5274567, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dZoJl.png?s=128&g=1", "display_name": "Worice", "link": "https://stackoverflow.com/users/5274567/worice"}, "edited": false, "score": 0, "creation_date": 1506500647, "post_id": 46442858, "comment_id": 79841754, "body": "Thanks a lot for your straightforward example!"}, {"owner": {"reputation": 1510, "user_id": 5971137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWmrf.jpg?s=128&g=1", "display_name": "Cole", "link": "https://stackoverflow.com/users/5971137/cole"}, "edited": false, "score": 0, "creation_date": 1530750576, "post_id": 46442858, "comment_id": 89346357, "body": "I think you forgot to subtract one from <code>2**64</code>, <code>((2**64) - 1) == 18446744073709551615</code>."}], "tags": [], "owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "is_accepted": false, "score": 12, "last_activity_date": 1530759514, "last_edit_date": 1530759514, "creation_date": 1506500521, "answer_id": 46442858, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/46442858#46442858", "title": "How big can a 64 bit unsigned integer be?", "body": "<p><strong>Signed</strong> integer can only go as far as <code>2^63-1</code> (9,223,372,036,854,775,807) because the bit of highest significance is reserved for the sign. If this bit is <code>1</code> then the number is negative, and can go as low as <code>-2^63</code> (-9,223,372,036,854,775,808).</p>\n\n<p>On a signed 64-bit integer, <code>2^64-1</code> is actually the number <code>-1</code>.</p>\n\n<p>If you use unsigned integers however, the value starts at <code>0</code> and <code>2^64-1</code> (18,446,744,073,709,551,615) becomes it's highest value, but unsigned integers cannot represent negative values.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1506520818, "last_edit_date": 1506520818, "creation_date": 1506520472, "answer_id": 46449742, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/46449742#46449742", "title": "How big can a 64 bit unsigned integer be?", "body": "<blockquote>\n  <p>How big can a 64 bit unsigned integer be?</p>\n</blockquote>\n\n<p>To code the maximum, best to use <code>UINT64_MAX</code>.  It is alway defined when 64-bits type are available.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#define MAX64BIT UINT64_MAX \nor \n#define MAX64BIT 0xFFFFFFFFFFFFFFFF\nor\n#define MAX64BIT 18446744073709551615u\n</code></pre>\n\n<blockquote>\n  <p>how can I detect an unsigned overflow?</p>\n</blockquote>\n\n<p>With N-bit <strong>unsigned</strong> types: <code>uintN_t a,b;</code></p>\n\n<p>Overflow detection:</p>\n\n<pre><code>// addition\nuintN_t sum = a + b;\nbool overflow = sum &lt; a;  // or sum &lt; b\n\n// subtraction\nbool overflow = b &gt; a;\nuintN_t diff = a - b;  //\n</code></pre>\n\n<p>Owing to <em>undefined behavior</em> (UB) of signed math, other code is needed with <em>signed</em> types.  <a href=\"https://codereview.stackexchange.com/questions/93687/test-if-arithmetic-operation-will-cause-undefined-behavior/93699#93699\">Example</a></p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 9118952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhrG4.png?s=128&g=1", "display_name": "codeguppy", "link": "https://stackoverflow.com/users/9118952/codeguppy"}, "is_accepted": false, "score": 2, "last_activity_date": 1528514622, "creation_date": 1528514622, "answer_id": 50770619, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/50770619#50770619", "title": "How big can a 64 bit unsigned integer be?", "body": "<h1>How big is 64 bit?</h1>\n\n<p>The answer the question how big is an unsigned 64 bit integer, I will propose to do a small comparative test in assembly or any programming language that supports 64 bit data types.</p>\n\n<p>Count from 0 to maximum value that can be stored in a variable. First time use a 32 bit wide variable and second time use a 64 bit wide variable. Try to estimate the results.</p>\n\n<p>In C#, the code may look like this for 32 bit variable (\u2026 ignore please the off by one issue):</p>\n\n<pre><code>for (uint i = 0; i &lt; uint.MaxValue; i++)\n{\n    Process(i);\n}\n</code></pre>\n\n<p>uint.MaxValue is the number that you obtain when you set all bits of the variable to 1. It is basically equal to 2^32 \u2013 1 = 4294967295. This is about 4.2 billion.</p>\n\n<p>The test code for the case with 64 bit variable is similar:</p>\n\n<pre><code>for (ulong i = 0; i &lt; ulong.MaxValue; i++)\n{\n    Process(i);\n}\n</code></pre>\n\n<p>ulong.MaxValue is this time 2^64 \u2013 1 = 18446744073709551615 (a 20 digit number).</p>\n\n<p>At about 1 billion Process() operations / second, the first program will finish its job in:</p>\n\n<p>2^32 / 1000000000 = 4.29 seconds</p>\n\n<p>At the same processing speed, the second program will finish its job in:</p>\n\n<p>2^64 / 1000000000 / 3600 / 24 / 365 = 585 years!</p>\n\n<p>That\u2019s quite a difference!!! Who has the time to wait 585 years for a basic for to finish its job!</p>\n\n<p>And the funny part is that 1 billion operations per second is quite aggressive! For a more realistic scenario where you execute from 1 million to a couple hundred million operations per second, the time explodes to thousands even hundreds of thousands of years to do a single for!!!</p>\n\n<p>For majority of people the above exercise is a fun visualization of 64 bit power. But this exercise also shows the reality faced by computer science engineers working with algorithms. A poorly implemented algorithm (e.g. search or computational problem), that takes a brute force approach, can very well ruin your software.</p>\n\n<h1>Other big numbers</h1>\n\n<p>As a recap, remember that the maximum number stored in a 64 bit register / variable is 2^64 \u2013 1 = 18446744073709551615 (a 20 digit number). As big at it seems this number is still small when compared for instance with 1 googol which is 10^100 (1 followed by 100 zeros) !</p>\n\n<p>And even the big googol is smaller than 70! (70 factorial which is 1 * 2 * \u2026 * 70). Wow! This really shows the power of multiplication!</p>\n\n<p>And you know what: the googol is well within the range of the double data type (IEEE 754 floating point) \u2013 also a 64 bit structure. How double manages to store such big numbers will be presented in a future article.</p>\n\n<p>I hope you had fun!</p>\n"}, {"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 5, "last_activity_date": 1528515435, "creation_date": 1528515435, "answer_id": 50770682, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/50770682#50770682", "title": "How big can a 64 bit unsigned integer be?", "body": "<p>Your assumption for the maximum size of signed and unsigned integers is correct. The actual values are 9223372036854775807 for signed and 18446744073709551615 for unsigned.</p>\n\n<p>Detecting overflow for unsigned addition is rather simple - if the result is less than either operand there was an overflow.</p>\n\n<p>Subtraction is similar, if the result is greater than the first operand then you had overflow.</p>\n\n<p>Multiplication is tough, I don't know a simple rule for that one.</p>\n\n<p>Overflow is impossible for division unless you divide by zero.</p>\n"}, {"tags": [], "owner": {"reputation": 66677, "user_id": 169992, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OeNfG.png?s=128&g=1", "display_name": "Lance Pollard", "link": "https://stackoverflow.com/users/169992/lance-pollard"}, "is_accepted": false, "score": 5, "last_activity_date": 1535136283, "creation_date": 1535136283, "answer_id": 52010143, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be/52010143#52010143", "title": "How big can a 64 bit unsigned integer be?", "body": "<p>It can be <a href=\"https://en.wikipedia.org/wiki/Integer_(computer_science)#Common_integral_data_types\" rel=\"noreferrer\"><code>18446744073709551615</code></a>.</p>\n\n<pre><code>18,446,744,073,709,551,615\nq5 q4  t   b   m   t   h\n</code></pre>\n"}], "owner": {"reputation": 3337, "user_id": 5274567, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dZoJl.png?s=128&g=1", "display_name": "Worice", "link": "https://stackoverflow.com/users/5274567/worice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44484, "favorite_count": 4, "accepted_answer_id": 46442848, "answer_count": 6, "score": 12, "last_activity_date": 1535136283, "creation_date": 1506499036, "last_edit_date": 1506503952, "question_id": 46442411, "link": "https://stackoverflow.com/questions/46442411/how-big-can-a-64-bit-unsigned-integer-be", "title": "How big can a 64 bit unsigned integer be?", "body": "<p>I am quite clear about <a href=\"https://stackoverflow.com/questions/6003492/how-big-can-a-64bit-signed-integer-be\">How big can a 64bit signed integer be?</a>\nThanks to this question and its straightforward answers.</p>\n\n<p>So, according to that, could I say that an <code>unsigned int</code> can be 2^64 - 1, rather than 2^63 - 1?</p>\n\n<pre><code>2^63 - 1:    0111111111111111111111111111111111111111111111111111111111111111\n\n2^64 - 1:    1111111111111111111111111111111111111111111111111111111111111111\n</code></pre>\n\n<p>If and only if I got it correctly,  how can I detect an unsigned overflow? An overflow of a signed integer in two's complement representation would invade the highest bit position, returning a negative number. But how about this unsigned case? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1506498599, "post_id": 46442220, "comment_id": 79840541, "body": "I salute you for wanting to write non-trivial programs. But you really should learn how <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">to debug your programs</a> instead of appealing to StackOverflow to do it for you."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1506498679, "post_id": 46442220, "comment_id": 79840586, "body": "Why do you want to use pointers here? Why isn&#39;t the loop variable <code>n</code> local to the function <code>fact</code>?"}, {"owner": {"reputation": 127, "user_id": 6294882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJlhg.jpg?s=128&g=1", "display_name": "Koolman", "link": "https://stackoverflow.com/users/6294882/koolman"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1506498756, "post_id": 46442220, "comment_id": 79840627, "body": "@MOehm I want to learn pointers"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1506498771, "post_id": 46442220, "comment_id": 79840636, "body": "Compile your program with all warnings and debug info (<code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...). Improve it to get no warnings. <b>Use the debugger</b>  <code>gdb</code> to run it step by step and understand its behavior, and <code>valgrind</code> to hunt memory leaks. Repeat till satisfied."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506498915, "post_id": 46442220, "comment_id": 79840732, "body": "@Koolman: The normal way of learning pointers is to build a <i>linked-list</i> of an arbitrary type."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1506498640, "post_id": 46442251, "comment_id": 79840566, "body": "<code>(*n)*(*num)</code> - All those asterisks make my eyes hurt. (Not a judgement of the answer)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1506498682, "post_id": 46442251, "comment_id": 79840589, "body": "Does <code>*n * *num</code> finish them off completely ;-) ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1506498822, "post_id": 46442251, "comment_id": 79840665, "body": "I just had to open my mouth and make matters worse... :)"}, {"owner": {"reputation": 127, "user_id": 6294882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJlhg.jpg?s=128&g=1", "display_name": "Koolman", "link": "https://stackoverflow.com/users/6294882/koolman"}, "edited": false, "score": 0, "creation_date": 1506499238, "post_id": 46442251, "comment_id": 79840937, "body": "okay , I have replaced in fact by void fact . but then also it is not working  properly"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506499294, "post_id": 46442251, "comment_id": 79840974, "body": "But what about the changes to <code>*n=(*n)*(*num);</code>? Really it would be simplest to get it working with non-pointers first, then introduce the pointers secondarily."}, {"owner": {"reputation": 127, "user_id": 6294882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJlhg.jpg?s=128&g=1", "display_name": "Koolman", "link": "https://stackoverflow.com/users/6294882/koolman"}, "edited": false, "score": 0, "creation_date": 1506499333, "post_id": 46442251, "comment_id": 79841001, "body": "I have written them as <i>n=*n*</i>num;"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506499430, "post_id": 46442251, "comment_id": 79841064, "body": "Can you not see that doing this breaks the counting variable in the <code>for</code> loop? You need to get your debugger out now; there&#39;s not much more I can do."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 127, "user_id": 6294882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJlhg.jpg?s=128&g=1", "display_name": "Koolman", "link": "https://stackoverflow.com/users/6294882/koolman"}, "edited": false, "score": 0, "creation_date": 1506499636, "post_id": 46442251, "comment_id": 79841171, "body": "@Koolman Use a separate loop variable. <code>i</code> seems to be popular.  <code>*n</code> is already being used for other things."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1506498499, "creation_date": 1506498499, "answer_id": 46442251, "question_id": 46442220, "link": "https://stackoverflow.com/questions/46442220/factorial-using-pointers-in-c-program/46442251#46442251", "title": "Factorial using pointers in C program", "body": "<p><code>*n=(*n)*(*num);</code> is changing the value of the counting variable used in the <code>for</code> loop!</p>\n\n<p>Whilst this is perfectly legal in C, it's leading to the incorrect answer.</p>\n\n<p>You also don't return a value explicitly from <code>fact</code> despite it having a non-<code>void</code> return type. That's <em>undefined behaviour</em>.</p>\n\n<p>Note also that the range for an <code>int</code> can be as small as -32767 to +32767, which only allows for 7! or lower. Consider using a <code>long long</code> type instead.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506500216, "post_id": 46442726, "comment_id": 79841506, "body": "Aside from your not checking the return value of <code>scanf</code>, and your not guarding against the vulnerability of <code>int</code> overflow, this is nice."}, {"owner": {"reputation": 71, "user_id": 8465163, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AH4v8loKzHc/AAAAAAAAAAI/AAAAAAAAACw/R4JJBPdfQOM/photo.jpg?sz=128", "display_name": "Bijjala Naga Nikhil", "link": "https://stackoverflow.com/users/8465163/bijjala-naga-nikhil"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1506501285, "post_id": 46442726, "comment_id": 79842122, "body": "ok .I changed it to long long unsigned it.So it will work for more numbers."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1506504512, "post_id": 46442726, "comment_id": 79844235, "body": "You might want to change the function return type too, and the calling site."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1609035851, "post_id": 46442726, "comment_id": 115735079, "body": "Calculating a <code>long long unsigned int</code> and then returning it as an <code>int</code> is counter-productive unless <code>sizeof(long long unsigned int) == sizeof(int)</code> which is seldom the case."}], "tags": [], "owner": {"reputation": 71, "user_id": 8465163, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AH4v8loKzHc/AAAAAAAAAAI/AAAAAAAAACw/R4JJBPdfQOM/photo.jpg?sz=128", "display_name": "Bijjala Naga Nikhil", "link": "https://stackoverflow.com/users/8465163/bijjala-naga-nikhil"}, "is_accepted": true, "score": 2, "last_activity_date": 1609035746, "last_edit_date": 1609035746, "creation_date": 1506500081, "answer_id": 46442726, "question_id": 46442220, "link": "https://stackoverflow.com/questions/46442220/factorial-using-pointers-in-c-program/46442726#46442726", "title": "Factorial using pointers in C program", "body": "<p>As you are using int function it must contain some return value. If you make following changes it runs perfectly.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint fact(int *num, int *n)\n{\n    long long unsigned int fact = 1;\n    for ((*n) = 1; (*n) &lt;= (*num); (*n)++)\n    {\n        fact = fact * (*n);\n    }\n    return fact;\n}\n\nint main()\n{\n    int num, n;\n    long long unsigned int b;\n    printf(&quot;Write the number to take factorial \\n&quot;);\n    scanf(&quot;%d&quot;, &amp;num);\n    b = fact( &amp;num, &amp;n);\n    printf(&quot;Factorial = %llu&quot;, b);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "is_accepted": false, "score": 1, "last_activity_date": 1506510688, "creation_date": 1506510688, "answer_id": 46446431, "question_id": 46442220, "link": "https://stackoverflow.com/questions/46442220/factorial-using-pointers-in-c-program/46446431#46446431", "title": "Factorial using pointers in C program", "body": "<p>Correct me if I am wrong,  but I think the logic itself is incorrect in your attempt : </p>\n\n<pre><code>for ((*n) = 1; (*n) &lt;= (*num); (*n)++)\n    {\n        *n = (*n)*(*num);\n    }\n</code></pre>\n\n<p>You are using the counting variable ('*n' in this case) for purpose of storing the result. If you check the flow the loop will end after first iteration then increment it giving you the value of (*num + 1). </p>\n\n<p>A good modification for your fact function could be : </p>\n\n<pre><code>void fact(int* num, int* n)\n{\n    int counter;\n    *n=1;\n    for (counter = 2 ; counter &lt;= (*num) ; counter++)\n    {\n        *n = (*n)*(counter);\n    }\n}\n</code></pre>\n\n<p>Can't see a reason to keep the return type of the function as int if you are using call by reference for the result as well.</p>\n\n<p>As in response to answer given by '@nikhil biijjala' , I can't understand your reason to pass the pointer (*n) in the first place.All that pointer does is works as a local counter for the loop.</p>\n\n<p>As in case of large integers you can add limits to input or use long long. </p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5295252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0194a24a21e52a5e8b018d85589ba87a?s=128&d=identicon&r=PG&f=1", "display_name": "Jatinder Singh", "link": "https://stackoverflow.com/users/5295252/jatinder-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1549844501, "creation_date": 1549844501, "answer_id": 54622512, "question_id": 46442220, "link": "https://stackoverflow.com/questions/46442220/factorial-using-pointers-in-c-program/54622512#54622512", "title": "Factorial using pointers in C program", "body": "<pre><code>C++ Version:\n\n#include &lt;iostream&gt;\nint abc(int *a);\nint main()\n{\n    int a,fact;\n    int *ptr;\n    std::cout &lt;&lt; \"Enter a:\"&lt;&lt; std::endl;\n    std::cin &gt;&gt; a;\n    ptr= &amp;a;\n    fact=*ptr;\n    while(*ptr!=1)\n    {   \n        fact = fact * abc(ptr); \n    }\n    std::cout &lt;&lt; \"Factorial is : &lt;&lt;\" &lt;&lt; fact &lt;&lt; std::endl;\n    return 0;\n}\nint abc(int *a)\n{\n    *a=*a-1;\n    return *a;\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 6294882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJlhg.jpg?s=128&g=1", "display_name": "Koolman", "link": "https://stackoverflow.com/users/6294882/koolman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3342, "favorite_count": 0, "accepted_answer_id": 46442726, "answer_count": 4, "score": -1, "last_activity_date": 1609035746, "creation_date": 1506498389, "last_edit_date": 1506501407, "question_id": 46442220, "link": "https://stackoverflow.com/questions/46442220/factorial-using-pointers-in-c-program", "title": "Factorial using pointers in C program", "body": "<p>I want to create a program to find the factorial of a number also I want to make it using pointers.</p>\n\n<p>I have tried to make a program but it is not giving the factorial of the number . Can anybody explains me why ?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint fact(int* num, int* n)\n{\n    for ((*n) = 1; (*n) &lt;= (*num); (*n)++)\n    {\n        *n = (*n)*(*num);\n    }\n}\n\nint main()\n{\n    int num, n;\n    printf(\"Write the number to take factorial \\n\");\n    scanf(\"%d\", &amp;num);\n    fact(&amp;num, &amp;n);\n    printf(\"Factorial = %d\", n);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "logical-operators", "instructions", "integer-arithmetic"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 7, "creation_date": 1506498724, "post_id": 46442178, "comment_id": 79840609, "body": "Considering that with any reasonable optimizations the compiler can throw away both loops, I would suspect the measurement to be wrong, not the actual operations. If you look at instruction timings for at least most x86 CPUs, AND and ADD instructions take exactly the same amount of time."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1506498948, "post_id": 46442178, "comment_id": 79840750, "body": "Measuring performance correctly is difficult. I would expect the two operations to take the same amount of time. You are measuring over a very short time. Try measuring over at least a second."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1506499682, "post_id": 46442178, "comment_id": 79841198, "body": "The method of measurement is somewhat flawed for these examples. For one, the number of iterations is way too short. But - if you are compiling without optimizations, it is not very interesting to compare performance here, as the compiler produces quite dumb code that is in no way usable to compare performance of 2 loops. On the other hand, if you enable optimization, the compiler might just eliminate the loops, and you have no basis for comparison.  Make sure you read the generated assembly code, and understand what you are measuring."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1506499792, "post_id": 46442178, "comment_id": 79841272, "body": "@nos the loops are not eliminated. If I increase the number of iterations the timing increases as well."}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 0, "creation_date": 1506500501, "post_id": 46442178, "comment_id": 79841672, "body": "@JenniferAnderson either you didn&#39;t read the comments completely, or you did not understand them. Turn ON optimization, and they will. iterate over a billion times. you will see they take about the same amount of time"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "edited": false, "score": 0, "creation_date": 1506502109, "post_id": 46442178, "comment_id": 79842641, "body": "@Tommylee2k I know that if I turned ON the optimization the loops will not run.  However user Art said that the compiler &quot;optimizes the loop away&quot; which is NOT the case if the optimization flags are not used."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1506502720, "post_id": 46442178, "comment_id": 79843027, "body": "@JenniferAnderson I said &quot;with any reasonable optimizations the compiler can throw away both loops&quot;. All those words are relevant. You can&#39;t make up a quote and use that to argue the exact opposite of what the person you&#39;re allegedly quoting said."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1506502760, "post_id": 46442178, "comment_id": 79843053, "body": "You didn&#39;t specify what CPU are you measuring. But with any modern CPU (either x86 or ARM) the <code>and</code> and <code>add</code> are of the same speed. If you measure anything different, your measuring+measured code is flawed, which wouldn&#39;t be of any surprise, as measuring performance on x86 with artificial code is very difficult and there&#39;s ton of tiny details which may skew the results either way. Reading <a href=\"http://www.agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog</a> articles on performance of x86 instructions would give you lot more accurate data, although it&#39;s sadly missing that feel of exploration with your own code."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1506509008, "post_id": 46442178, "comment_id": 79847230, "body": "there are a number of factors that could come into play here.  but basically the test is flawed.  you didnt show the disassembly, and even that may not tell the whole story, could have the same machine code in each loop with one being and and the other being add and they could still differ in speed for system and other reasons, you are just barely scratching the surface.  Bitwise is clearly faster yes, but designs do not take advantage of that the one clock for that alu operation is long enough to cover addition too (not necessarily multiply and divide though, depends on the implementation)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1506585142, "post_id": 46442178, "comment_id": 79882235, "body": "It is certainly <i>possible</i> for some code to produce faster performance with <code>add</code> rather than the same code with <code>and</code> since on x86 add can use also use <code>lea</code>, which allows 3 inputs (two reg and one constant) and a distinct destination. On the other hand, <code>add</code> and <code>and</code> are both 2-input and the destination is shared with one input. For some code using <code>lea</code> can be faster."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1506506759, "post_id": 46443129, "comment_id": 79845804, "body": "That <code>limit</code> literal should have a <code>ll</code> suffix."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1506553098, "post_id": 46443129, "comment_id": 79872339, "body": "@unwind: it would not help, as it would make it look deceptively similar to <code>1000000000011</code>. The <code>LL</code> suffix is not needed, <code>10000000000</code> is a <code>long long</code> literal unless type <code>int</code> or type <code>long</code> are wide enough to store this value. Very old compilers may parse it differently, but chances are they do not support <code>long long</code> at all."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1506585646, "post_id": 46443129, "comment_id": 79882529, "body": "@chqrlie D&#39;oh, you&#39;re right of course. Nevermind. Thanks."}], "tags": [], "owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "is_accepted": false, "score": 10, "last_activity_date": 1506503315, "last_edit_date": 1506503315, "creation_date": 1506501371, "answer_id": 46443129, "question_id": 46442178, "link": "https://stackoverflow.com/questions/46442178/how-is-it-possible-that-bitwise-and-operation-to-take-more-cpu-clocks-than-arith/46443129#46443129", "title": "How is it possible that BITWISE AND operation to take more CPU clocks than ARITHMETIC ADDITION operation in a C program?", "body": "<p>ok, let's take this \"measuring\" and blow it up, 100k is a bit few</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n#define limit 10000000000\n\nint main() \n{\n   int x=10, y=25, z;\n\n   time_t start = clock();\n   for(long long i=0;i&lt;limit;i++)z=x+y;\n   time_t stop = clock();\n   printf(\"Arithmetic instructions take: %ld\\n\",stop-start);\n\n   start = clock();\n   for(long long i=0;i&lt;limit;i++)z=x&amp;y;\n   stop = clock();\n   printf(\"Logic instructions take: %ld\\n\",stop-start);\n}\n</code></pre>\n\n<p>this will run a bit longer. First let's try with no optimization:</p>\n\n<pre><code>thomas@TS-VB:~/src$ g++ -o trash trash.c \nthomas@TS-VB:~/src$ ./trash \nArithmetic instructions take: 21910636\nLogic instructions take: 21890332\n</code></pre>\n\n<p>you see, both loops take about the same time. </p>\n\n<p>compiling with -S reveals why (only relevant part of .s file shown here) :</p>\n\n<pre><code>// this is the assembly for the first loop\n.L3:\n    movl    32(%esp), %eax\n    movl    28(%esp), %edx\n    addl    %edx, %eax             // &lt;&lt;-- ADD\n    movl    %eax, 40(%esp)\n    addl    $1, 48(%esp)\n    adcl    $0, 52(%esp)\n.L2:\n    cmpl    $2, 52(%esp)\n    jl  .L3\n    cmpl    $2, 52(%esp)\n    jg  .L9\n    cmpl    $1410065407, 48(%esp)\n    jbe .L3\n\n// this is the one for the second\n.L9:\n    movl    32(%esp), %eax\n    movl    28(%esp), %edx\n    andl    %edx, %eax             // &lt;&lt;--- AND\n    movl    %eax, 40(%esp)\n    addl    $1, 56(%esp)\n    adcl    $0, 60(%esp)\n.L5:\n    cmpl    $2, 60(%esp)\n    jl  .L6\n    cmpl    $2, 60(%esp)\n    jg  .L10\n    cmpl    $1410065407, 56(%esp)\n    jbe .L6\n.L10:\n</code></pre>\n\n<p>looking into the CPUs instruction set tells us, both ADD and AND will take the same amount of cycles --> the 2 loops will run the same amount of time</p>\n\n<p>Now with optimization:</p>\n\n<pre><code>thomas@TS-VB:~/src$ g++ -O3 -o trash trash.c \nthomas@TS-VB:~/src$ ./trash \nArithmetic instructions take: 112\nLogic instructions take: 74\n</code></pre>\n\n<p>The loop has been optimized away. The value calculated is never needed, so the compiler decided to not run it at all</p>\n\n<p>conclusion: If you shoot 3 times into the forest, and hit 2 boars and 1 rabbit, it doesn't mean there a twice as much boars than rabbits inside</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506518973, "post_id": 46447910, "comment_id": 79853962, "body": "To understand and make use of Agner Fog&#39;s instruction tables, you have to read his micorarch pdf as well.  Different CPUs have different front-end bottlenecks.  <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519182, "post_id": 46447910, "comment_id": 79854135, "body": "12800 is nonsense.  A 256b FMA instruction on 8 packed <code>float</code>s could count as 16 FLOPs, but it still retires as one uop.  SKL&#39;s FMA throughput is 2 per clock.  And you&#39;d have to be using 256b loads to feed it, so that would be 16 (in your counting) operations for one memory latency wait time.  Anyway, unless your loads are dependent, there will be multiple in flight, so it&#39;s never that bad."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506519610, "post_id": 46447910, "comment_id": 79854458, "body": "@PeterCordes I know, I wasn&#39;t aiming for the exact truth there. Using floating point instructions here was a complete lie because the number 64 was the only number I remembered and it is how many can be retired at the same time, not how long they actually take to decode and execute. The main point there is: there are many orders of magnitude between the best case and worst case of number of instructions per second and measuring individual instructions out of context doesn&#39;t really mean anything. Which instructions should I have used instead?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506520008, "post_id": 46447910, "comment_id": 79854766, "body": "But it&#39;s not 64 unless you count each SIMD element as a separate instruction, and that&#39;s nonsense.  Integer <code>ADD</code> would have been a good choice, since that&#39;s what the OP is asking for.  It has 4 per clock throughput on Intel Haswell and later, and AMD Ryzen.  And 1c latency, so if you bottleneck on latency it has 1/4 the throughput.  It makes little sense to talk about the total time to run one instruction, because out-of-order execution doesn&#39;t work like that.  A cache miss can add latency to a dependency chain sure, but it&#39;s just not the right way to think about it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506520251, "post_id": 46447910, "comment_id": 79854959, "body": "A single instruction or short sequence can be mostly characterized by 3 parameters: front-end uop count, latency, and which execution ports it needs.  (<i>Not</i> throughput, unless you&#39;re actually repeating that block with no other code mixed in.)  Microbenchmarks are definitely still a thing, though, if you write them in asm and construct them carefully to measure what you want to measure.  e.g. <a href=\"https://stackoverflow.com/questions/45660139/how-exactly-do-partial-registers-on-haswell-skylake-perform-writing-al-seems-to\" title=\"how exactly do partial registers on haswell skylake perform writing al seems to\">stackoverflow.com/questions/45660139/&hellip;</a>.  It helps a lot to use perf counters to count uops as well as cycles."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506521016, "post_id": 46447910, "comment_id": 79855553, "body": "&quot;But it&#39;s not 64 unless you count each SIMD element as a separate instruction&quot;. Isn&#39;t that what Intel does in their marketing materials? I&#39;m pretty sure that&#39;s where my brain remembered this number from."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506521334, "post_id": 46447910, "comment_id": 79855788, "body": "Stop reading marketing crap and start reading <a href=\"https://software.intel.com/en-us/articles/intel-sdm#optimization\" rel=\"nofollow noreferrer\">software.intel.com/en-us/articles/intel-sdm#optimization</a>.  It&#39;s interesting to talk about sustained FMA throughput in floats per clock (bottlenecked by execution unit throughput), but it makes no sense to talk about burst retirement of FMA instructions in elements per clock, only in uops per clock just like any other uops."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506521420, "post_id": 46447910, "comment_id": 79855862, "body": "SKX (Skylake-AVX512) and KNL can each sustain two 16-<code>float</code> FMAs per clock.  You could count that as 64 FLOP/cycle.  (But KNL has no room in the pipeline for anything else, so it usually bottlenecks on the front-end.)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 5, "last_activity_date": 1506515429, "creation_date": 1506515429, "answer_id": 46447910, "question_id": 46442178, "link": "https://stackoverflow.com/questions/46442178/how-is-it-possible-that-bitwise-and-operation-to-take-more-cpu-clocks-than-arith/46447910#46447910", "title": "How is it possible that BITWISE AND operation to take more CPU clocks than ARITHMETIC ADDITION operation in a C program?", "body": "<p>Let's start by looking at your code. The loops don't actually do anything. Any reasonable compiler will see that you don't use the variable <code>z</code> after the first call to <code>printf</code>, so it is perfectly safe to throw away. Of course, the compiler doesn't have to do it, but any reasonable compiler with any reasonable levels of optimisations enabled will do so.</p>\n\n<p>Let's look at what a compiler did to your code (standard clang with -O2 optimisation level):</p>\n\n<pre><code>    leaq    L_.str(%rip), %rdi\n    movl    $35, %esi\n    xorl    %eax, %eax\n    callq   _printf\n</code></pre>\n\n<p>This is the first printf (\"Sum of ...\"), notice how the generated code didn't actually add anything, the compiler knows the values of <code>x</code> and <code>y</code> and just calculated its sum and calls printf with 35.</p>\n\n<pre><code>    callq   _clock\n    movq    %rax, %rbx\n    callq   _clock\n</code></pre>\n\n<p>Call clock, save its result in a temporary register, call clock again, </p>\n\n<pre><code>    movq    %rax, %rcx\n    subq    %rbx, %rcx\n    leaq    L_.str.1(%rip), %rdi\n    xorl    %eax, %eax\n    movq    %rcx, %rsi\n</code></pre>\n\n<p>Subtract start from end, set up arguments for printf,</p>\n\n<pre><code>    callq   _printf\n</code></pre>\n\n<p>Call printf.</p>\n\n<p>The second loop is removed in an equivalent way. There are no loops because the compiler does the reasonable thing - it notices that <code>z</code> is not used after you modify it in the loop, so the compiler throws away any stores to it. And then since nothing is stored into it, it can also throw away <code>x+y</code>. And now, since the body of the loop is not doing anything, the loop can be thrown away. So your code essentially becomes:</p>\n\n<pre><code>printf(\"\\n\\nArithmetic instructions take: %d\", clock() - clock());\n</code></pre>\n\n<p>Now, why is this relevant. It is relevant to understand some important concepts. The compiler doesn't slavishly translate one statement at a time into code. The compiler reads all (or as much as possible) of your code, tries to figure out what you actually mean and then generates code that behaves \"as if\" it executed all those statements. The language and compiler only care about preserving what we could call observable side effects. If computing a value is not observable, it doesn't need to be computed. The time to execute some code is not a side effect we care about, so the compiler doesn't care about preserving it, after all we want our code to be as fast as possible, so we'd like the time to execute something to be not observable at all.</p>\n\n<p>The second part why this is relevant. It is pretty useless to measure how long something takes if you compiled it without optimisations. This is the loop in your code compiled without optimisations:</p>\n\n<pre><code>LBB0_1:\n        cmpl    $100000, -28(%rbp)\n        jge     LBB0_4\n        movl    -8(%rbp), %eax\n        addl    -12(%rbp), %eax\n        movl    %eax, -16(%rbp)\n        movl    -28(%rbp), %eax\n        addl    $1, %eax\n        movl    %eax, -28(%rbp)\n        jmp     LBB0_1\nLBB0_4:\n</code></pre>\n\n<p>You thought you were measuring the <code>addl</code> instruction here. But the whole loop contains so much more. In fact, most of the time in the loop is spent maintaining the loop, not actually executing your instruction. Most of the time is spent reading and writing values on the stack and calculating the loop variable. Any timing you happen to measure will be totally dominated by the infrastructure of the loop rather than operation you want to measure.</p>\n\n<p>You loop very few times. I'm pretty certain that most of the time you actually measure is spent in <code>clock()</code> and not the code you're actually trying to measure. <code>clock</code> needs to do quite some work, reading time is often quite expensive.</p>\n\n<p>Then we get to the question of the actual instructions you care about. They take the exact same amount of time. <a href=\"http://www.agner.org/optimize/instruction_tables.pdf\" rel=\"noreferrer\">Here's</a> the canonical source of everything related to instruction timing on x86.</p>\n\n<p>But. It's very hard and almost pretty useless to reason about individual instructions. Pretty much every CPU in the past few decades is superscalar. This means that it will execute many instructions at the same time. What matters for how much time things take is more dependencies between instructions (can't start executing an instruction before its inputs are ready if those inputs are computed by previous instructions) rather than the actual instruction. While you can do dozens of calculations in registers per nanosecond, it can take hundreds of nanoseconds to fetch data from main memory. So even if we know that an instruction takes one cycle and your CPU does two cycles per nanosecond (it's usually around that), it can mean that the number of instructions we can finish in 100ns can be anywhere between 1 (if you need to wait for main memory) and 12800 (I don't know the real exact numbers, but I remember that Skylake can retire 64 floating point operations per cycle).</p>\n\n<p>This is why microbenchmarks aren't seriously done anymore. If minor variations in how things are done can affect the outcome by a factor of twelve thousand, you can quickly see why measuring individual instructions is useless. Most measurements today are done on large parts of programs or whole programs. I do this a lot at work and I've had several situations where improving an algorithm changed memory access patterns that even though the algorithm could be mathematically proven faster, the behavior of the whole program suffered because of changed memory access patterns or such.</p>\n\n<p>Sorry for such a rambling answer, but I'm trying to get to why even though there is a simple answer to your question: \"your measurement method is bad\" and also a real answer: \"they are the same\", there are actually interesting reasons why the question itself is unanswerable.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506527656, "post_id": 46451447, "comment_id": 79860180, "body": "On Intel x86 chips, integer <code>div</code> is microcoded (<a href=\"https://stackoverflow.com/questions/26907523/branch-alignment-for-loops-involving-micro-coded-instructions-on-intel-snb-famil\">which can lead to weird performance effects</a>), but integer mul is implemented directly in hardware on all Intel/AMD CPUs.  Typically 3c latency, one per clock throughput, even for 64-bit operand-size.  (Yes, this takes a lot of transistors)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506527907, "post_id": 46451447, "comment_id": 79860338, "body": "Interestingly, FP <code>div</code> is not microcoded, at least not in the usual sense (it&#39;s iterative inside a dedicated execution unit).  It&#39;s not fully pipelined, but it is partially (e.g. Skylake can do a <code>float</code> division every 3 clocks, even without using SIMD, with latency=11c).  If you can hide the latency of an FP div, an occasional FP div is no more expensive than an FP add or mul (as far as throughput), if you don&#39;t bottleneck on divider throughput.  (<a href=\"https://stackoverflow.com/a/45899202/224132\">stackoverflow.com/a/45899202/224132</a>)."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1506535318, "post_id": 46451447, "comment_id": 79864332, "body": "Yep, was trying to be general and just say that in addition to other factors microcoding adds even more to performance variations.  x86 implementations keep changing so even if you could performance tune something it is really only tuned to your machine, put it on the same skylake on some other motherboard, or a sandy bridge or other and no reason to expect good or even similar performance.  what they microcode or not is just part of the fun."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 4, "last_activity_date": 1506525123, "creation_date": 1506525123, "answer_id": 46451447, "question_id": 46442178, "link": "https://stackoverflow.com/questions/46442178/how-is-it-possible-that-bitwise-and-operation-to-take-more-cpu-clocks-than-arith/46451447#46451447", "title": "How is it possible that BITWISE AND operation to take more CPU clocks than ARITHMETIC ADDITION operation in a C program?", "body": "<p>This is just a few minutes worth of work, would rather also demonstrate bare metal and other such things but not worth the time right now.</p>\n\n<p>Through testing of some functions to see what the calling convention is and also noting that for add it is generating</p>\n\n<pre><code>  400600:   8d 04 37                lea    (%rdi,%rsi,1),%eax\n  400603:   c3                      retq  \n</code></pre>\n\n<p>for and</p>\n\n<pre><code>  400610:   89 f8                   mov    %edi,%eax\n  400612:   21 f0                   and    %esi,%eax\n  400614:   c3                      retq \n</code></pre>\n\n<p>three instructions instead of two, five bytes instead of four, these bits if information both do and dont matter depending.  But to make it more fair will do the same thing for each operation.</p>\n\n<p>Also want the do it a zillion times loop closely coupled and not compiled as that may end up creating some variation.  And lastly the alignment try to make that fair.</p>\n\n<pre><code>.balign 32\nnop\n.balign 256\n.globl and_test\nand_test:\n    mov %edi,%eax\n    and %esi,%eax\n    sub $1,%edx\n    jne and_test\n    retq\n\n.balign 32\nnop\n.balign 256\n.globl add_test\nadd_test:\n    mov %edi,%eax\n    add %esi,%eax\n    sub $1,%edx\n    jne add_test\n    retq\n\n.balign 256\n    nop\n</code></pre>\n\n<p>derived from yours</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\nunsigned int add_test ( unsigned int a, unsigned int b, unsigned int x );\nunsigned int and_test ( unsigned int a, unsigned int b, unsigned int x );\nint main() \n{\n   int x=10;\n   int y=25;\n   time_t start,stop;\n   for(int j=0;j&lt;10;j++)\n   {\n       start = clock();\n       add_test(10,25,2000000000);\n       stop = clock();\n       printf(\"%u %u\\n\",j,(int)(stop-start));\n\n   }\n   for(int j=0;j&lt;10;j++)\n   {\n       start = clock();\n       and_test(10,25,2000000000);\n       stop = clock();\n       printf(\"%u %u\\n\",j,(int)(stop-start));\n\n   }\n   return(0);\n}\n</code></pre>\n\n<p>first run as expected the first loop took longer as it wasnt in the cache? should not have taken that much longer so that doesnt make sense, perhaps other reasons...</p>\n\n<pre><code>0 605678\n1 520204\n2 521311\n3 520050\n4 521455\n5 520213\n6 520315\n7 520197\n8 520253\n9 519743\n0 520475\n1 520221\n2 520109\n3 520319\n4 521128\n5 520974\n6 520584\n7 520875\n8 519944\n9 521062\n</code></pre>\n\n<p>but we stay fairly consistent.  second run, the times stay somewhat consistent.</p>\n\n<pre><code>0 599558\n1 515120\n2 516035\n3 515863\n4 515809\n5 516069\n6 516578\n7 516359\n8 516170\n9 515986\n0 516403\n1 516666\n2 516842\n3 516710\n4 516932\n5 516380\n6 517392\n7 515999\n8 516861\n9 517047\n</code></pre>\n\n<p>note that this is 2 billion loops. four instructions per.  my clocks per second is 1000000 at 3.4ghz 0.8772 clocks per loop or 0.2193 clocks per instruction, how is that possible?  superscaler processor.</p>\n\n<p>A LOT more work could be done, here, this was just a few minutes worth and hopefully it is just enough to demonstrate (as others have already as well) that you cant really see the difference with a test like this.</p>\n\n<p>I could do a demo with something more linear like an arm and something we could read the clock/timer register as part of the code under test, as the calling of the clock code are all part of the code under test and can vary here.  Hopefully that is not necessary, the results are much more consistent though using sram, controlling all the instructions under test, etc. and with that you can see alignment differences you can see the cost of the cache read on the first loop but not the remaining, etc...(a few clocks total although 10ms as we see here, hmm, might be on par for an x86 system dont know benchmarking x86 is a near complete waste of time, no fun in it and the results dont translate to other x86 computers that well)</p>\n\n<p>As pointed out in your other question that was closed as a duplicate, and I hate using links here, should learn how to cut and paste pictures (TODO).</p>\n\n<pre><code>https://en.wikipedia.org/wiki/AND_gate\nhttps://en.wikipedia.org/wiki/Adder_(electronics)\n</code></pre>\n\n<p>Assuming feeding the math/logic operation for add and and is the same and we are only trying to measure the difference between them you are correct the AND is faster not getting into further detail you can see an and only has one stage/gate.  Where a full adder takes three levels, back of the envelope math, three times as much time to settle the signals once the inputs change than the AND....BUT....Although there are some exceptions, chips are not designed to take advantage of this (well multiply and divide vs add/and/xor/etc, yes they are or are more likely to be).   One would design these simple operations to be one clock cycle, on a clock the inputs to the combinational logic (the actual AND or ADD) are latched, on the next clock cycle the result is latched from the other end and begins its journey to the register file or out the core to memory, etc...At some point in the design you do synthesis into the gates available for the foundry/process you are using then do a timing analysis/closure on that and look for long poles in the tent.  Extremely unlikely (impossible) that the add is a long pole, both add and and are very very short poles, but you determine at that point what your max clock rate is, if you wanted a 4ghz procerssor but the result is 2.7 well you need to take those long poles and turn them into two or more clock operations.  the time it takes to do an add vs and which should vary add should be longer, is so fast and in the noise that it is all within a clock cycle so even if you did a functional simulation of the logic design you would not see the difference you need to implement an and and a full adder in say pspice using transistors and other components, then feed step changes into the inputs and watch how long it takes to settle, that or build them from discrete components from radio shack and try, although the results might be too fast for your scope, so use pspice or other.</p>\n\n<p>think of writing equations to solve something you can write maybe a long equation or you can break that into multiple smaller ones with intermediate variables</p>\n\n<pre><code>this\na = b+c+d+e+f+g;\nvs\nx=b+c;\ny=d+e;\nz=f+g;\na=x+y;\na=a+z;\n</code></pre>\n\n<p>one clock vs 5 clocks, but each of the 5 clocks can be faster if this was the longest pole in the tent. all the other logic is that much faster too feeding this. (actually x,y,z can be one clock, then either a=x+y+z in the next or make it two more)</p>\n\n<p>multiply and divide are different simply because the logic explodes exponentially, there is no magic to multiply or divide they have to work the same way we do things on pencil and paper.  you can take shortcuts with binary if you think about it. as you can only multiply by 0 or 1 before shifing and adding to the accumulator.  the logic equations for one clock still explode exponentially and then you can do parallel things.  it burns a ton of chip realestate, so you may choose to make multiply as well as divide take more than one clock and hide those in the pipeline.  or you can choose to burn a significant amount of chip realestate...Look at the documentation for some of the arm cores you can at compile time (when you compile/synthesize the core) choose a one clock or multi-clock multiply to balance chip size vs performance.  x86 we dont buy the IP and make the chips ourselves so it is up to intel how they do it, and very likely microcoded so by just microcoding you can tweak how things happen or do it in an alu type operation.  </p>\n\n<p>So you might detect multiply or divide performance vs add/and with a test like this but either they did it in one clock and you cant ever see it, or they may have buried it in two or more steps in the pipe so that it averages out right and to see it you would need access to a chip sim.  using timers and running something a billion times is fun, but to actually see instruction performance you need a chip sim and need to tweak the code to keep the code not under test from affecting the results.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1506525123, "creation_date": 1506498276, "last_edit_date": 1506499438, "question_id": 46442178, "link": "https://stackoverflow.com/questions/46442178/how-is-it-possible-that-bitwise-and-operation-to-take-more-cpu-clocks-than-arith", "title": "How is it possible that BITWISE AND operation to take more CPU clocks than ARITHMETIC ADDITION operation in a C program?", "body": "<p>I wanted to test if bitwise operations really are faster to execute than arithmetic operation. I thought they were.</p>\n\n<p>I wrote a small C program to test this hypothesis and to my surprise the addition takes less on average than bitwise AND operation. This is surprising to me and I cannot understand why this is happening.</p>\n\n<p>From what I know for addition the carry from the less significant bits should be carried to the next bits because the result depends on the carry too. It does not make sense to me that a logic operator is slower than addition.</p>\n\n<p>My cod is below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n\nint main() \n{\n   int x=10;\n   int y=25;\n   int z=x+y;\n   printf(\"Sum of x+y = %i\", z);\n   time_t start = clock();\n   for(int i=0;i&lt;100000;i++)z=x+y;\n   time_t stop = clock();\n\n   printf(\"\\n\\nArithmetic instructions take: %d\",stop-start);\n   start = clock();\n   for(int i=0;i&lt;100000;i++)z=x&amp;y;\n   stop = clock();\n\n   printf(\"\\n\\nLogic instructions take: %d\",stop-start);\n}\n</code></pre>\n\n<p>Some of the results:</p>\n\n<pre><code>Arithmetic instructions take: 327\nLogic instructions take: 360\n\nArithmetic instructions take: 271\nLogic instructions take: 271\n\nArithmetic instructions take: 287\nLogic instructions take: 294\n\nArithmetic instructions take: 279\nLogic instructions take: 266\n\nArithmetic instructions take: 265\nLogic instructions take: 296\n</code></pre>\n\n<p>These results are taken from consecutive runs of the program.</p>\n\n<p>As you can see on average the logic operator takes longer on average than the arithmetic operator.</p>\n"}, {"tags": ["c", "fork", "shared-memory", "mmap", "memcpy"], "comments": [{"owner": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 1, "creation_date": 1506498282, "post_id": 46442060, "comment_id": 79840355, "body": "<code>shmem</code> is local variable. try make it global. also use <code>volatile</code> here is a good idea."}, {"owner": {"reputation": 43, "user_id": 5983936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f18e39a7a69e45e1ece200f3af10a2?s=128&d=identicon&r=PG&f=1", "display_name": "SPFort", "link": "https://stackoverflow.com/users/5983936/spfort"}, "reply_to_user": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 0, "creation_date": 1506498859, "post_id": 46442060, "comment_id": 79840690, "body": "I tried your suggestions and the result is the same as before."}, {"owner": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 1, "creation_date": 1506499304, "post_id": 46442060, "comment_id": 79840983, "body": "you allocate 4 bytes by <code>mmap</code> and tried to write 10 bytes... try allocate 10 bytes by <code>mmap</code>"}, {"owner": {"reputation": 43, "user_id": 5983936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f18e39a7a69e45e1ece200f3af10a2?s=128&d=identicon&r=PG&f=1", "display_name": "SPFort", "link": "https://stackoverflow.com/users/5983936/spfort"}, "reply_to_user": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 0, "creation_date": 1506499435, "post_id": 46442060, "comment_id": 79841065, "body": "Oops. That was left in from an early version. I fixed it, but still same problem."}, {"owner": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 0, "creation_date": 1506499594, "post_id": 46442060, "comment_id": 79841146, "body": "it seems like children does not have enough time to modify the value. try increase number of children to 100000."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506697697, "post_id": 46442060, "comment_id": 79937972, "body": "there are only two valid signatures for function: <code>main()</code>.   The posted code is using one of them.  When the parameters <code>argc</code> and <code>argv[]</code> are not used, then should use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506698572, "post_id": 46442060, "comment_id": 79938517, "body": "there are three kinds of returned value from <code>fork()</code>  1) &lt;0  when an error occurred  2) ==0 when in child process  3) &gt;0 when in parent process.  The posted code is failing to handle the error condition."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506698614, "post_id": 46442060, "comment_id": 79938538, "body": "the posted code is missing the statement: <code>#include &lt;unistd.h&gt;</code> for the <code>fork()</code> function prototype."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506698652, "post_id": 46442060, "comment_id": 79938552, "body": "the posted code is missing the handling of an error return condition from the call to <code>mmap()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1506698960, "post_id": 46442060, "comment_id": 79938719, "body": "since several different processes are accessing the char string that contains the number,  to avoid race conditions, each process should be using a named muted to protect that string while updating that string."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1506708762, "last_edit_date": 1506708762, "creation_date": 1506707944, "answer_id": 46494533, "question_id": 46442060, "link": "https://stackoverflow.com/questions/46442060/how-do-i-update-shared-data-from-a-child-process/46494533#46494533", "title": "How do I update shared data from a child process?", "body": "<p>the most obvious problem is:</p>\n\n<pre><code>sprintf(newNumString, \"%i\", origNum);\n</code></pre>\n\n<p>which is setting the 'new' string from the 'old' value, so the data in the shared memory is never being updated to the 'new' value.</p>\n\n<p>However, there are several other problems involving 'race' conditions.\nWhich can be corrected via a mutex with the 'share' attribute.</p>\n\n<p>Note: without the 'shared' attribute, multiple processes accessing the same mutex is undefined behavior.</p>\n\n<p>Caveat: I did not include checking all the returned values from the calls to the system functions, especially those functions handling the mutex setup.  You should add that checking.</p>\n\n<p>Caveat: I did not include code to destroy the mutex.  You should add that statement.</p>\n\n<p>Caveat: I did not include code to release the memory mapped memory.  You should add that statement.</p>\n\n<p>there is the problem of exiting the parent process before the child processes have all exited.  This results in Zombie processes, where the child processes used to be.</p>\n\n<p>there is the 'problem' of using 'magic' numbers.  'magic' numbers make the code much more difficult to understand, debug, etc.</p>\n\n<p>In the following code, I have documented why each header file is being included.  This makes certain activities much easier to accomplish.</p>\n\n<p>I left some of the original code (commented out) to illustrate some of the changes.</p>\n\n<p>I used a 'cast' when needed, to avoid 'implicit conversion' warnings from the compiler ( <code>gcc</code> on linux )\nThe following code corrects the problems, including those listed in the question's comments.</p>\n\n<pre><code>#include &lt;stdio.h&gt;     // printf(), perror(), sprintf()\n#include &lt;stdlib.h&gt;    // atoi(), exit(), EXIT_FAILURE\n#include &lt;sys/mman.h&gt;  // mmap(), MAP_FAILED\n#include &lt;string.h&gt;    // strcpy(), memset(), \n#include &lt;sched.h&gt;     // sched_yield()\n\n#include &lt;unistd.h&gt;    // fork(), pid_t, getpid(), getppid()\n#include &lt;pthread.h&gt;   // pthread_mutex_lock(),\n                       // pthread_mutex_unlock(),\n                       // pthread_mutexattr_init(),\n                       // pthread_mutex_init(),\n                       // pthread_mutexattr_setpshared(),\n                       // PTHREAD_PROCESS_SHARED,\n                       // pthread_mutex_t,\n                       // pthread_mutexattr_t\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;  // waitpid()\n\n#define MAX_CHILDREN 5\n#define MAX_NUM_LEN  10\n\nstruct shared\n{\n    char number[ MAX_NUM_LEN ];\n    pthread_mutex_t mutex;\n    pthread_mutexattr_t attr;\n};\n\nstruct shared *shmem;\n\n//int main (int argc, char* argv[])\nint main( void )\n{\n    //create shared memory with children and copy into it the starting number 0\n    if( MAP_FAILED == (shmem = (struct shared*)mmap(NULL, sizeof( struct shared), PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, -1, 0) ) )\n    {\n        perror( \"mmap failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, mmap successful\n\n    //char number[10] = \"0\";\n    memset( shmem, '\\0', sizeof( struct shared ) );\n    //memcpy(shmem, number, sizeof(number));\n\n    // setup the mutex, include the 'shared' attribute\n    pthread_mutexattr_init(&amp;shmem-&gt;attr);\n    pthread_mutexattr_setpshared( &amp;shmem-&gt;attr,  PTHREAD_PROCESS_SHARED );\n    pthread_mutex_init(&amp;shmem-&gt;mutex, &amp;shmem-&gt;attr );\n\n    //int i;\n    pid_t childPID[ MAX_CHILDREN ] = {0};\n\n    for( int i = 0; i &lt; 5; ++i )\n    {\n        childPID[i] = fork();\n\n        switch( childPID[i] )\n        {\n            case -1:\n                perror( \"fork failed\" );\n                break;\n\n            case 0:\n            {  // then child63\n\n                while( 1 )\n                {\n                    pthread_mutex_lock( &amp;shmem-&gt;mutex );\n\n                    //read a number in from shared memory\n                    int origNum = atoi( shmem-&gt;number );\n\n                    if( origNum &lt; 100 )\n                    {\n                        int newNum = origNum + 1;\n\n                        //cast the new number to a string to be sent to shared memory\n                        char newNumString[ MAX_NUM_LEN ] = {'\\0'};\n                        sprintf(newNumString, \"%i\", newNum);\n\n                        //send the new number to shared memory\n                        strcpy( &amp;shmem-&gt;number[0], newNumString );\n\n                        printf( \"I'm child %i. PID: %i. PPID: %i. Read in: %i and printed out %i\\n\",\n                            (i + 1),\n                            getpid(),\n                            getppid(),\n                            origNum,\n                            newNum );\n\n                        printf( \"Current value in shmem: %s\\n\", shmem-&gt;number );\n\n                        // allow other processes to access the number in shared memory\n                        pthread_mutex_unlock( &amp;shmem-&gt;mutex );\n\n                        //yield process to allow other processes to run\n                        sched_yield();\n                    }\n\n                    else\n                    {\n                        // allow other processes to access the number in shared memory\n                        pthread_mutex_unlock( &amp;shmem-&gt;mutex );\n                        exit(0);\n                    }\n                }\n            }\n            break;\n\n            default:\n                // then parent\n                printf(\"I'm a parent. PID: %i. Num: %s\\n\", getpid(), (char*)shmem);\n                break;\n        } // end switch\n    } // end for each child\n\n    for( int i=0; i&lt; MAX_CHILDREN; i++ )\n    {\n        int status;\n\n        if( -1 != childPID[i] )\n        { // then child process exists\n            waitpid( childPID[i], &amp;status, 0 );\n        }\n    }\n} // end function: main\n</code></pre>\n\n<p>here is an excerpt from the output of the corrected program:</p>\n\n<pre><code>I'm a parent. PID: 25961. Num: \nI'm a parent. PID: 25961. Num: 1\nI'm child 1. PID: 25962. PPID: 25961. Read in: 0 and printed out 1\nI'm a parent. PID: 25961. Num: 1\nCurrent value in shmem: 1\nI'm child 2. PID: 25963. PPID: 25961. Read in: 1 and printed out 2\nI'm a parent. PID: 25961. Num: 2\nCurrent value in shmem: 2\nI'm child 2. PID: 25963. PPID: 25961. Read in: 2 and printed out 3\nCurrent value in shmem: 3\nI'm a parent. PID: 25961. Num: 3\nI'm child 4. PID: 25965. PPID: 25961. Read in: 3 and printed out 4\nCurrent value in shmem: 4\n...\nI'm child 4. PID: 25965. PPID: 25961. Read in: 95 and printed out 96\nCurrent value in shmem: 96\nI'm child 3. PID: 25964. PPID: 25961. Read in: 96 and printed out 97\nCurrent value in shmem: 97\nI'm child 4. PID: 25965. PPID: 25961. Read in: 97 and printed out 98\nCurrent value in shmem: 98\nI'm child 3. PID: 25964. PPID: 25961. Read in: 98 and printed out 99\nCurrent value in shmem: 99\nI'm child 4. PID: 25965. PPID: 25961. Read in: 99 and printed out 100\nCurrent value in shmem: 100\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5983936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13f18e39a7a69e45e1ece200f3af10a2?s=128&d=identicon&r=PG&f=1", "display_name": "SPFort", "link": "https://stackoverflow.com/users/5983936/spfort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 46494533, "answer_count": 1, "score": 0, "last_activity_date": 1506708762, "creation_date": 1506497906, "question_id": 46442060, "link": "https://stackoverflow.com/questions/46442060/how-do-i-update-shared-data-from-a-child-process", "title": "How do I update shared data from a child process?", "body": "<p>I'm trying to make a program which forks 5 children. The children all access shared memory to read in a number and increase it by one until the number reaches 100. The children are able to read in the value in the shared memory, but they aren't updating it. What am I doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sched.h&gt;\n\nint main (int argc, char* argv[])\n{\n    //create shared memory with children and copy into it the starting number 0\n    void* shmem = mmap(NULL, 4, PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, -1, 0);\n    char number[10] = \"0\";\n    memcpy(shmem, number, sizeof(number));\n\n    int i;\n    for(i = 0; i &lt; 5; ++i)\n    {\n            int childPID = fork();\n\n            if(childPID == 0)\n            {\n                    //read a number in from shared memory\n                    int origNum = atoi(shmem);\n\n                    if(origNum &lt; 100)\n                    {\n                            int newNum = origNum + 1;\n                            //cast the new number to a string to be sent to shared memory\n                            char newNumString[10];\n                            sprintf(newNumString, \"%i\", origNum);\n                            //send the new number to shared memory\n                            memcpy(shmem, newNumString, sizeof(newNumString));\n\n                            printf(\"I'm child %i. PID: %i. PPID: %i. Read in: %i and printed out %i\\n\", (i + 1), getpid(), getppid(), origNum, newNum);\n                            printf(\"Current value in shmem: %s\\n\", shmem);\n\n                            //yield process to allow other processes to run\n                            sched_yield();\n                    }\n                    else\n                    {\n                            exit(0);\n                    }\n            }\n            else\n            {\n                    printf(\"I'm a parent. PID: %i. Num: %s\\n\", getpid(), shmem);\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "scanf"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 4, "creation_date": 1506497653, "post_id": 46441913, "comment_id": 79840013, "body": "First thing: fix undefined behavior such as <code>char y_n[1];</code> being not large enough to hold a character and a null terminator."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1506497702, "post_id": 46441913, "comment_id": 79840041, "body": "<code>char y_n[1];</code>: This char buffer is way too small. It cannot hold any sensible string. You need room for the null terminator. And what happens when the user enters &quot;yes&quot; or &quot;no&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1506498318, "post_id": 46441992, "comment_id": 79840378, "body": "Why not just <code>char y_n</code> instead?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 1, "creation_date": 1506498524, "post_id": 46441992, "comment_id": 79840493, "body": "@CinCout: Scanning chars has the problem that every char is considered. There are heaps of questions where the newline is read instead of the intended character. The method above that restricts reading to one character has problems, too: When the user enters &quot;yes&quot;, which is a reasonable answer to the question, only the &quot;y&quot; will be scanned and the next contact&#39;s first name will be &quot;es&quot;. <code>scanf</code> isn&#39;t really suited to interactive input, in my opinion."}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": true, "score": 4, "last_activity_date": 1506497769, "last_edit_date": 1506497769, "creation_date": 1506497663, "answer_id": 46441992, "question_id": 46441913, "link": "https://stackoverflow.com/questions/46441913/do-while-loop-always-exits-after-first-loop/46441992#46441992", "title": "Do While loop always exits after first loop", "body": "<pre><code>scanf(\"%s\", y_n);\n</code></pre>\n\n<p>You have undefined behaviour here when scanf() tries to put <code>'\\0'</code> in <code>y_n</code>, to which you allotted only one character. You should instead declare it as</p>\n\n<pre><code>char y_n[2];\n</code></pre>\n\n<p>and change the scanf statement to</p>\n\n<pre><code>scanf(\"%1s\", y_n);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8586917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa3cd426d599861f14120240424fa79?s=128&d=identicon&r=PG&f=1", "display_name": "dj6450", "link": "https://stackoverflow.com/users/8586917/dj6450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46441992, "answer_count": 1, "score": 0, "last_activity_date": 1506497769, "creation_date": 1506497405, "last_edit_date": 1506497514, "question_id": 46441913, "link": "https://stackoverflow.com/questions/46441913/do-while-loop-always-exits-after-first-loop", "title": "Do While loop always exits after first loop", "body": "<p>I'm trying to make a small address book program in C where users would enter contact info which is stored in a text file. If a user opts to add a new contact, the program should ask them if they want to add another when they're finished. I've made an if statement which I believe should end the loop if they enter 'n' or continue for another contact if they write anything else. However if the user types 'y' (or anything else) it always exits after only 1 loop. </p>\n\n<pre><code>void new_contact(void){\n    printf(\"Ready for new contact\\n\");\n    int enter_new_contact = 1;\n    char first_name[15];\n    char second_name[20];\n    char phone_number[12];\n    char email[50];\n    char y_n[1];\n    do{\n        printf(\"Enter the contacts first name.\\n\");\n        scanf(\"%s\", first_name);\n\n        printf(\"Enter the contacts second name.\\n\");\n        scanf(\"%s\", second_name);\n\n        printf(\"Enter the contacts phone number.\\n\");\n        scanf(\"%s\", phone_number);\n\n        printf(\"Enter the contacts email.\\n\");\n        scanf(\"%s\", email);\n\n        printf(\"%s\\t%s\\t%s\\t%s\\n\", first_name, second_name, phone_number, email);\n\n        printf(\"Would you like to add another contact?\\n\");\n        scanf(\"%s\", y_n);\n        printf(\"%s\\n\", y_n);\n\n        if(strcmp(y_n, \"n\")==0){\n            enter_new_contact=0;\n        }\n\n    }while(enter_new_contact==1);\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c#", "android", "c", "json", "xamarin"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1506667342, "post_id": 46441908, "comment_id": 79920647, "body": "Sorry, why do you tag this question as <code>C</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 12626, "user_id": 1102741, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1fc8cdf0e32ee9142baa67269d426b13?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar", "link": "https://stackoverflow.com/users/1102741/oscar"}, "is_accepted": true, "score": 1, "last_activity_date": 1506498070, "last_edit_date": 1506498070, "creation_date": 1506497684, "answer_id": 46442001, "question_id": 46441908, "link": "https://stackoverflow.com/questions/46441908/c-cannot-deserialize-the-current-json-object/46442001#46442001", "title": "c# Cannot deserialize the current JSON object", "body": "<p>The returned json is not an array, so it can't be deserialized as a <code>List&lt;Feed&gt;</code>, hence an exception is thrown. It is an <em>object</em>, and one of that object's members is the array that you are interested in. The backing C# class to deserialize should have the following members:</p>\n\n<pre><code>public class RootObject\n{\n    public Channel channel { get; set; }\n    public List&lt;Feed&gt; feeds { get; set; }\n}\n\npublic class Channel\n{\n    public int id { get; set; }\n    public string name { get; set; }\n    public string description { get; set; }\n    public string latitude { get; set; }\n    public string longitude { get; set; }\n    public string field1 { get; set; }\n    public DateTime created_at { get; set; }\n    public DateTime updated_at { get; set; }\n    public string elevation { get; set; }\n    public int last_entry_id { get; set; }\n}\n\npublic class Feed\n{\n    public DateTime created_at { get; set; }\n    public int entry_id { get; set; }\n    public string field1 { get; set; }\n}\n</code></pre>\n\n<p>Instead of deserializing to a <code>List&lt;Feed&gt;</code>, you would deserialize to a <code>RootObject</code> (or whatever you choose to call it):</p>\n\n<pre><code>var data = JsonConvert.DeserializeObject&lt;RootObject&gt;(content);\n_data = new ObservableCollection&lt;Feed&gt;(data.feeds);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7990814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7314bcbcae15d24ffb02fc21c6965aa8?s=128&d=identicon&r=PG", "display_name": "younes", "link": "https://stackoverflow.com/users/7990814/younes"}, "is_accepted": false, "score": -1, "last_activity_date": 1506509697, "last_edit_date": 1506509697, "creation_date": 1506509339, "answer_id": 46445971, "question_id": 46441908, "link": "https://stackoverflow.com/questions/46441908/c-cannot-deserialize-the-current-json-object/46445971#46445971", "title": "c# Cannot deserialize the current JSON object", "body": "<p>try this maybe it will work fine for you\nfirst: place this code on your activity and instanciate all var;you will create a javalist to deserialize your json, then you will the method webclient to get your json, then you will use the method runonuithread to excute the process in background.</p>\n\n<pre><code>articles = new JavaList&lt;RootObject&gt;();\n        mWebClient = new WebClient();\n        mUrl = new Uri(urlAddress);\n        mWebClient.DownloadDataAsync(\"https://thingspeak.com/channels/301726/field/1.json\");\n        mWebClient.DownloadDataCompleted += MWebClient_DownloadDataCompleted;\n</code></pre>\n\n<p>second: the method <code>mWebClient.DownloadDataCompleted</code> will generate this :</p>\n\n<pre><code>private void MWebClient_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)\n    {\n        RunOnUiThread(() =&gt;\n        {\n            try\n            {\n                string json = Encoding.UTF8.GetString(e.Result);\n                articles = JsonConvert.DeserializeObject&lt;JavaList&lt;RootObject&gt;&gt;(json);\n                mAdapter = new ArticleAdapterCostum(this, articles);\n                mListView.Adapter = mAdapter;\n            }\n            catch (Exception exception)\n            {\n                Toast.MakeText(this, \" Vueillez verifier votre connexion a internet puis reessayer \", ToastLength.Short).Show();\n            }\n        });\n    }\n</code></pre>\n\n<p>don't forget to create a costum adapter to your listview.</p>\n"}], "owner": {"reputation": 35, "user_id": 8681132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10208254300993928/picture?type=large", "display_name": "Carlo Chan", "link": "https://stackoverflow.com/users/8681132/carlo-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 46442001, "answer_count": 2, "score": 0, "last_activity_date": 1506509697, "creation_date": 1506497388, "last_edit_date": 1506498337, "question_id": 46441908, "link": "https://stackoverflow.com/questions/46441908/c-cannot-deserialize-the-current-json-object", "title": "c# Cannot deserialize the current JSON object", "body": "<p>Trying to get JSON data from ThingSpeak however getting the above error, \nworks well with JSON placeholder as the URL.</p>\n\n<p>Here is my main cs code:</p>\n\n<pre><code>namespace Drip\n{\n    public class Feed\n    {\n        public DateTime Created_at { get; set; }\n        public int Entry_id { get; set; }\n        public string Field1 { get; set; }\n    }\n\n    public partial class DripPage : TabbedPage\n    {\n        private const string Url = \"https://thingspeak.com/channels/301726/field/1.json\";\n        private HttpClient _client = new HttpClient();\n        private ObservableCollection&lt;Feed&gt; _data;\n\n        public DripPage()\n        {\n            InitializeComponent();\n        }\n\n        protected override async void OnAppearing()\n        {\n            var content = await _client.GetStringAsync(Url);\n            var data = JsonConvert.DeserializeObject&lt;List&lt;Feed&gt;&gt;(content);\n\n            _data = new ObservableCollection&lt;Feed&gt;(data);\n            postsListView.ItemsSource = _data;\n            base.OnAppearing();\n        }\n</code></pre>\n\n<p>Here is my JSON:</p>\n\n<pre><code>{\n  \"channel\": {\n    \"id\": 301726,\n    \"name\": \"Testing ESP8266\",\n    \"description\": \"Water meter pulse count\",\n    \"latitude\": \"0.0\",\n    \"longitude\": \"0.0\",\n    \"field1\": \"Water Pulse\",\n    \"created_at\": \"2017-07-12T12:19:38Z\",\n    \"updated_at\": \"2017-09-26T08:41:17Z\",\n    \"elevation\": \"54\",\n    \"last_entry_id\": 151\n  },\n  \"feeds\": [\n    {\n      \"created_at\": \"2017-08-15T13:14:28Z\",\n      \"entry_id\": 52,\n      \"field1\": \"13.00\\r\\n\\r\\n\"\n    },\n    {\n      \"created_at\": \"2017-08-15T13:14:44Z\",\n      \"entry_id\": 53,\n      \"field1\": \"13.00\\r\\n\\r\\n\"\n    },\n    {\n      \"created_at\": \"2017-08-15T13:14:59Z\",\n      \"entry_id\": 54,\n      \"field1\": \"13.00\\r\\n\\r\\n\"\n    }\n  ]\n}\n</code></pre>\n"}, {"tags": ["c", "process", "segmentation-fault", "fgetc"], "comments": [{"owner": {"reputation": 3071, "user_id": 3166697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGEWy.jpg?s=128&g=1", "display_name": "Dima Kozhevin", "link": "https://stackoverflow.com/users/3166697/dima-kozhevin"}, "edited": false, "score": 0, "creation_date": 1506497155, "post_id": 46441797, "comment_id": 79839731, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18701924/get-a-segment-fault-while-reading-a-file\">Get a segment fault while reading a file</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1506497172, "post_id": 46441797, "comment_id": 79839742, "body": "You have no check for buffer overflow. And when catching the crash in a debugger, where in <i>your</i> code does it happen? What is the input you read? How do you call your function? Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 473, "user_id": 4028638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3666e4dc1f9952bc22d1d77484497f?s=128&d=identicon&r=PG&f=1", "display_name": "vadim_hr", "link": "https://stackoverflow.com/users/4028638/vadim-hr"}, "edited": false, "score": 1, "creation_date": 1506498035, "post_id": 46441797, "comment_id": 79840211, "body": "maybe file handler is closed and you tried to read from broken handler. so error is not in function provided but in code above."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1506503407, "post_id": 46441797, "comment_id": 79843477, "body": "Warning, when returning <code>&quot;!&quot;</code>, your lost the position of allocated memory, and you won&#39;t be able to <code>free()</code> what <code>read_line</code> returns"}, {"owner": {"reputation": 35, "user_id": 7855802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc9eea5654d6a05874ff03159bd3d82?s=128&d=identicon&r=PG&f=1", "display_name": "lighthou", "link": "https://stackoverflow.com/users/7855802/lighthou"}, "edited": false, "score": 0, "creation_date": 1506548255, "post_id": 46441797, "comment_id": 79870788, "body": "Turns out the issue was my result variable wasn&#39;t being memset back to an empty string, so it was hitting a segfault. Adding memset solved my problem but I will try to fix memory leaks."}], "owner": {"reputation": 35, "user_id": 7855802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc9eea5654d6a05874ff03159bd3d82?s=128&d=identicon&r=PG&f=1", "display_name": "lighthou", "link": "https://stackoverflow.com/users/7855802/lighthou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506502825, "creation_date": 1506496992, "last_edit_date": 1506502825, "question_id": 46441797, "link": "https://stackoverflow.com/questions/46441797/segfault-attempting-fgetc-to-read-from-pipe", "title": "SEGFAULT attempting fgetc to read from pipe", "body": "<p>Currently, I have a parent process piping information to children and reading out of their STDOUT through <code>fgetc</code>. I iterate through rounds and store the file pointer from the first round using <code>fdopen</code> and call it again in the next round. </p>\n\n<p>The issue is, in the first round the <code>read_line</code> results in a perfectly fine read, but in the second round the fgetc hits a segfault.</p>\n\n<p>Error Message:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x00007ffff7791330 in __GI___uflow (fp=0x6041b0) at genops.c:381\n381     return *(unsigned char *) fp-&gt;_IO_read_ptr++;\n</code></pre>\n\n<p>Reading Function: (I know it's not the best)\nTo Clarify. It works the first time. Why won't it work the second?\nMany other questions seem to just have a different error.</p>\n\n<pre><code>char* read_line(FILE* file,int currentP, Players *players) {\n    char* result = malloc(sizeof(char) * 80);\n    int position = 0;\n    int next = 0;\n    for (int i = 0; i &lt; players-&gt;players[currentP].position; i++) {\n        next = fgetc(file);\n    }\n    while (1) {\n        next = fgetc(file);\n        //players-&gt;players[currentP].position++;\n        if (next == '!') {\n            return \"!\";\n        }\n        if (next == EOF || next == '\\n') {\n            result[position] = '\\0';\n            return result;\n        } else {\n            result[position++] = (char)next;\n        }\n    }  \n}\n</code></pre>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1506496066, "post_id": 46441233, "comment_id": 79839161, "body": "@Garf365 Please try not to teach askers that leaving out practically all helpful detail will give reasonable answers. Also, please make an answer for answering. If answering well is not possible, then use a comment to ask about the needed details, or about whatever kept you from making an answer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506505878, "post_id": 46441233, "comment_id": 79845203, "body": "CAN controllers tend to have an initialization mode where you can set everything up. You have to enter it and then exit it, and when you do you have to wait for a flag. How this works for a specific CAN controller should be stated in the manual - you can&#39;t &quot;figure it out&quot; without RTFM."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1506505364, "post_id": 46441736, "comment_id": 79844850, "body": "OP is clearly using Cube, that <code>h</code> in <code>hcan</code> means it&#39;s a pointer to a CAN &quot;handle&quot;, and that struct has the <code>Instance</code> member which is the actual pointer to the peripheral registers."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506506035, "post_id": 46441736, "comment_id": 79845315, "body": "Probably ST wrote the &quot;HAL&quot; in that way to allow the same code to run for several CAN peripherals on the same MCU. Quite a common case when writing CAN drivers."}, {"owner": {"reputation": 59, "user_id": 8035876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f144eac47be15bf90e420bade993d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek Wo\u017aniak", "link": "https://stackoverflow.com/users/8035876/bartek-wo%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1506506259, "post_id": 46441736, "comment_id": 79845451, "body": "Thanks for explanation, but it is not the &quot;HAL&quot; way. Is it from low layer libraries ? I haven&#39;t had an opportunity to test it yet. It doesn&#39;t look good :("}], "tags": [], "owner": {"reputation": 59, "user_id": 8035876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/377f144eac47be15bf90e420bade993d?s=128&d=identicon&r=PG&f=1", "display_name": "Bartek Wo\u017aniak", "link": "https://stackoverflow.com/users/8035876/bartek-wo%c5%baniak"}, "is_accepted": false, "score": -1, "last_activity_date": 1506496767, "creation_date": 1506496767, "answer_id": 46441736, "question_id": 46441233, "link": "https://stackoverflow.com/questions/46441233/access-of-register-stm32-can-communication/46441736#46441736", "title": "Access of register STM32 CAN communication", "body": "<p>It is the common way to check flags or more precisliy - if bit is set in some register. In this particular example:</p>\n\n<blockquote>\n  <p>INAK: Initialization acknowledge This bit is set by hardware and\n  indicates to the software that the CAN hardware is now in\n  initialization mode.</p>\n</blockquote>\n\n<p>So you are basically wait in the infinite loop until CAN enter initialization mode. </p>\n\n<p>BTW. I think you have way to much structures in your CAN configuration. If you use CMSIS macros package, it should look like this:</p>\n\n<pre><code>while((CAN-&gt;MSR &amp; CAN_MSR_INAK) == 0);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8680970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KtnATLgCeIY/AAAAAAAAAAI/AAAAAAAABqQ/2kIqVvzzTFs/photo.jpg?sz=128", "display_name": "Marko  ", "link": "https://stackoverflow.com/users/8680970/marko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1506496767, "creation_date": 1506495004, "last_edit_date": 1506495685, "question_id": 46441233, "link": "https://stackoverflow.com/questions/46441233/access-of-register-stm32-can-communication", "title": "Access of register STM32 CAN communication", "body": "<p>can you help  me to figure out what this line do :</p>\n\n<pre><code>while (hcan-&gt;Instance-&gt;MSR &amp; CAN_MSR_INAK) != CAN_MSR_INAK)\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "prototype", "math-functions"], "answers": [{"comments": [{"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 6, "creation_date": 1506532208, "post_id": 46441174, "comment_id": 79862760, "body": "Re: &quot;some C code (that by sheer coincidence also compiles with a C++ compiler)&quot;: And the award for most gratuitous use of the phrase &quot;sheer coincidence&quot; goes to . . ."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 7, "creation_date": 1506543300, "post_id": 46441174, "comment_id": 79868606, "body": "I&#39;m not sure I follow you, @ruakh.  It is not to be expected that an arbitrary, but valid, C translation unit can be successfully compiled unmodified as C++, unless it has been intentionally written to support that.  Where one can be, that is indeed a coincidence.  If such code happens to furthermore have the same semantics in both languages then that&#39;s even more of a coincidence.  How, then, is the use of the phrase &quot;sheer coincidence&quot; in this answer gratuitous?"}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1506545562, "post_id": 46441174, "comment_id": 79869744, "body": "@JohnBollinger: C++ grew out of C, and has maintained a high degree of backward-compatibility. Furthermore, even in those areas where the C++ standards have <i>not</i> maintained compatibility (or where the C standards have since changed and the C++ standards have not followed), C++ compilers often implicitly extend C++ for compatibility with C. As a result, many real-world C programs can be compiled, with no modifications at all, using many real-world C++ compilers. To claim that this is &quot;sheer coincidence&quot; requires willful obtuseness IMHO."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 7, "creation_date": 1506545771, "post_id": 46441174, "comment_id": 79869830, "body": "@ruakh - C++ has broken compatibility from the onset. The simplest (and idiomatic) <code>int *p = malloc(sizeof *p);</code> never did and never will compile in C++. And no compiler ever allowed the implicit conversion from <code>void*</code> back, to my knowledge. That&#39;s to name one example, anyway. Blame me of being obtuse if you will, but I think your argument stems out of an incomplete view of the languages."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 3, "creation_date": 1506545910, "post_id": 46441174, "comment_id": 79869890, "body": "@ruakh - Furthermore, since the context of my use of the phrase was C99. For the program to be compilable as C++, the person who wrote it would have had to intentionally avoid useful constructs like designated initializers and compound literals. Crippling oneself to be &quot;compatible&quot; with a completely separate language, is unlikely."}, {"owner": {"reputation": 393, "user_id": 6167592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ebe46676e6da9ac65b543a0015a7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobsleigh", "link": "https://stackoverflow.com/users/6167592/bobsleigh"}, "edited": false, "score": 1, "creation_date": 1506547763, "post_id": 46441174, "comment_id": 79870604, "body": "@StoryTeller C and C++ are not completely separate languages. They are overlapping languages. I feel like what you want to say is that one should not count on the fact that C will compile with a C++ compiler, which is totally right."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 393, "user_id": 6167592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ebe46676e6da9ac65b543a0015a7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Bobsleigh", "link": "https://stackoverflow.com/users/6167592/bobsleigh"}, "edited": false, "score": 2, "creation_date": 1506548017, "post_id": 46441174, "comment_id": 79870701, "body": "@Bobsleigh - If you compare them based on their philosophies, they don&#39;t overlap much at all. They are two languages, governed by two separate ISO committees. And that&#39;s not without reason. C++ may care to have some interoperability with C, but it certainly never set out to have its compilers be a drop in replacement for C compilers."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 2, "creation_date": 1506548108, "post_id": 46441174, "comment_id": 79870736, "body": "@ruakh, just how high is C++&#39;s compatibility with modern C -- or even with C99 -- is a qualitative question that you and I will not settle.  I&#39;m not even sure we would agree on how to measure.  Ultimately, the point for me is that many people erroneously assume that C++ is a superset of C, and therefore that all C code can safely be compiled as C++.  That assumption should be challenged at every opportunity, as it leads to grief, whether sooner or later.  I have no objection to StoryTeller engaging in a bit of hyperbole in that pursuit, if that&#39;s how you choose to regard it."}, {"owner": {"reputation": 774, "user_id": 1017090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f98f4b992380925c9e2391c7f058af89?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1017090/chris"}, "edited": false, "score": 2, "creation_date": 1507018774, "post_id": 46441174, "comment_id": 80034309, "body": "As a data point, I&#39;m in the process of converting a relatively small C project (around 10,000 lines) to C++.  The first cut was just using a C++11 compiler instead of a C99 compiler and fixing warnings/errors.  I&#39;m a fairly aggressive C99 user.  The changes I had to make: variables named new, casting *alloc(), static in array sizes in function declarations, compound literals, enum scoping in structs, variable-length arrays, string literals as const char[] vs char[], and designated initializers.  It was not a trivial exercise, although it wasn&#39;t particularly difficult."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1507060470, "post_id": 46441174, "comment_id": 80059223, "body": "I think that&#39;s the point -- it&#39;s hard to get a non-trivial program that&#39;s valid C and C++ accidentally, it takes deliberate work to like that. And the point of reconciling the libraries is presumably to make things a little easier for people who need to do this. It&#39;s not for programs that just happen to be lucky."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 774, "user_id": 1017090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f98f4b992380925c9e2391c7f058af89?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1017090/chris"}, "edited": false, "score": 0, "creation_date": 1507201393, "post_id": 46441174, "comment_id": 80120920, "body": "@Chris did you end up with something that is idiomatic C++? How sure are you that it does what the C version does?"}, {"owner": {"reputation": 774, "user_id": 1017090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f98f4b992380925c9e2391c7f058af89?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1017090/chris"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1517860475, "post_id": 46441174, "comment_id": 84257879, "body": "@Caleth No, I didn&#39;t wind up with idiomatic C++.  I made some fairly large changes, but not architectural ones (e.g. I do some custom I/O stuff; it was an opaque struct in the vein of C&#39;s FILE initially, but is now a class).  I&#39;ve decided a ground-up rewrite would be needed for idiomatic C++, but I&#39;m a lot happier now with a sort of hybrid approach.  I feel more comfortable using the STL instead of maintaining custom data structures.  As for correctness, I have various test data that I can run through the program, and it all passes.  Not definitive, but enough to make me confident."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1518095362, "post_id": 46441174, "comment_id": 84369957, "body": "@StoryTeller: <code>return f({});</code> what it does ? This seems strange syntax."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1518095551, "post_id": 46441174, "comment_id": 84370098, "body": "@Destructor - Depends on T. For a type like long, it value initializes it (to 0)."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 63, "last_activity_date": 1506496746, "last_edit_date": 1506496746, "creation_date": 1506494723, "answer_id": 46441174, "question_id": 46441123, "link": "https://stackoverflow.com/questions/46441123/what-exactly-is-stdlabs-there-for/46441174#46441174", "title": "What exactly is std::labs() there for?", "body": "<p>C++11 was when <code>std::labs</code> and <code>std::llabs</code> were added. This was part of the partial syncing done to the C++ standard library with the C99 standard library.</p>\n\n<p>You don't really need it in C++ code, because we had a <code>long</code> overload of <code>std::abs</code> since about forever. But if you have some C code (that by sheer coincidence also compiles with a C++ compiler), and it uses <code>labs</code>, you can build it with a C++11 compiler and standard library.</p>\n\n<hr>\n\n<p>In retrospect, there is one marginally useful use case for these functions. And that is when an attempt to use <code>std::abs</code> is ambiguous. For instance:</p>\n\n<pre><code>template&lt;typename T&gt;\nT run_func(T (&amp;f)(T)) {\n  return f({});\n}\n</code></pre>\n\n<p>Then trying to call <code>run_func(std::abs);</code> is ill-formed. We need to either specify the template argument explicitly or cast <code>std::abs</code> to the proper type. On the other hand <code>run_func(std::labs);</code> isn't ambiguous, and not too verbose.</p>\n\n<p>Still, not <em>too</em> useful.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3231, "favorite_count": 3, "accepted_answer_id": 46441174, "answer_count": 1, "score": 47, "last_activity_date": 1509108702, "creation_date": 1506494520, "last_edit_date": 1509108702, "question_id": 46441123, "link": "https://stackoverflow.com/questions/46441123/what-exactly-is-stdlabs-there-for", "title": "What exactly is std::labs() there for?", "body": "<p>I read about the <code>std::abs()</code> function when browsing <a href=\"http://en.cppreference.com/w/cpp/numeric/math/abs\" rel=\"noreferrer\">cppreference</a>.</p>\n\n<p>On that page I have also seen a <code>std::labs()</code> function. Which has the same prototype as one of the <code>std::abs()</code> overloads (the one for <code>long</code>).</p>\n\n<pre><code>long abs( long n );\n\nlong labs( long n );\n</code></pre>\n\n<p>and </p>\n\n<pre><code>long long abs( long long n );\n\nlong long llabs( long long n );\n</code></pre>\n\n<p>So,</p>\n\n<ul>\n<li>What exactly <code>std::labs()</code> does?</li>\n<li>Where and when do I use <code>std::labs()</code>?</li>\n<li>What is the difference between <code>std::abs()</code> and <code>std::labs()</code>?</li>\n</ul>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1506492515, "post_id": 46440486, "comment_id": 79837304, "body": "Related <a href=\"https://stackoverflow.com/q/4824342/694576\">stackoverflow.com/q/4824342/694576</a> if not a duplicate to."}, {"owner": {"reputation": 407, "user_id": 6566252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7772f443cf60b1154e74ff398fbbe41d?s=128&d=identicon&r=PG&f=1", "display_name": "Bizzu", "link": "https://stackoverflow.com/users/6566252/bizzu"}, "edited": false, "score": 0, "creation_date": 1506493955, "post_id": 46440486, "comment_id": 79838027, "body": "It is something which very hard to explain on one leg but i will tried to be simpale  The problem is when you create a variable without <b>malloc</b>  - Behind the Scenes you put the variable on the stack - Segment of memory which save somethings about your current code segment  ."}, {"owner": {"reputation": 407, "user_id": 6566252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7772f443cf60b1154e74ff398fbbe41d?s=128&d=identicon&r=PG&f=1", "display_name": "Bizzu", "link": "https://stackoverflow.com/users/6566252/bizzu"}, "edited": false, "score": 0, "creation_date": 1506493970, "post_id": 46440486, "comment_id": 79838037, "body": "when you jump to function you are add things to your stack from some point and when you finish (return from un-void function or finishes void function) you free all the things that you save from the enterance point.  That mean - in your specific code you try to return address of something that you save on the stack but when you return you freed the stack - you try to return somthing that you &quot;freed&quot;.  ."}, {"owner": {"reputation": 407, "user_id": 6566252, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7772f443cf60b1154e74ff398fbbe41d?s=128&d=identicon&r=PG&f=1", "display_name": "Bizzu", "link": "https://stackoverflow.com/users/6566252/bizzu"}, "edited": false, "score": 0, "creation_date": 1506493974, "post_id": 46440486, "comment_id": 79838040, "body": "Instead in malloc you have another code segment which called <b>Heap</b>  the difference between the heap - at the Heap when you allocates variable (do malloc) you tell to OS - &quot;Hey There, i&#39;m the boss and don&#39;t touch that variable while i don&#39;t tell else&quot;   I tried to be simple but the best advice is to read about function call, Stack segment , Heap Segment.."}], "answers": [{"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 0, "last_activity_date": 1506492760, "last_edit_date": 1506492760, "creation_date": 1506492306, "answer_id": 46440550, "question_id": 46440486, "link": "https://stackoverflow.com/questions/46440486/linked-list-function-returns-address-of-local-variable/46440550#46440550", "title": "Linked list function returns address of local variable", "body": "<p>The problem is that your <code>temp</code> variable is a <em>local</em> variable. It has function scope so it only exists as long as your program is in the function. This is usually implemented with a <em>stack</em>.</p>\n\n<p>You should use <code>malloc</code> to get memory from the <em>heap</em> which is where all dynamic allocations are made from. This way the list and its nodes will exist until you explicitly destroy them with <code>free</code>.</p>\n\n<p>The only other solution, which I don't recommend, is to build your list using recursive function calls. And as long as you use the list <em>never return</em>.</p>\n\n<p>I saw that done one time. It was hideous. But possible.</p>\n"}], "owner": {"reputation": 11, "user_id": 8680720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fm9fzzuidTU/AAAAAAAAAAI/AAAAAAAAAQ4/60jqPnjF9Kk/photo.jpg?sz=128", "display_name": "Conor Falvey", "link": "https://stackoverflow.com/users/8680720/conor-falvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "closed_date": 1506493603, "answer_count": 1, "score": 0, "last_activity_date": 1506494218, "creation_date": 1506492018, "last_edit_date": 1506494218, "question_id": 46440486, "link": "https://stackoverflow.com/questions/46440486/linked-list-function-returns-address-of-local-variable", "closed_reason": "Duplicate", "title": "Linked list function returns address of local variable", "body": "<p>I'm implementing a linked list program in C and the create_node function gives a warning: function returns address of local variable. I've read about using malloc, but I'd like to understand what the original problem and solution would be without it. Thanks.</p>\n\n<pre><code>struct list_node_s* Create_node(int val, struct list_node_s* node_p) {\n   struct list_node_s temp;\n\n   temp.data = val;\n   temp.next_p = node_p;\n   return &amp;temp;\n}  /* Create_node */\n</code></pre>\n"}, {"tags": ["c", "recursion", "count"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1506487386, "post_id": 46439631, "comment_id": 79835532, "body": "your values do not fit in an integer. try <code>long long</code>"}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1506487531, "post_id": 46439631, "comment_id": 79835568, "body": "Your program can fail with 10 digit number also, say <code>2147483647 + 1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 7586435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0NQPK.jpg?s=128&g=1", "display_name": "xyaz", "link": "https://stackoverflow.com/users/7586435/xyaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1506580648, "last_edit_date": 1506580648, "creation_date": 1506487546, "answer_id": 46439674, "question_id": 46439631, "link": "https://stackoverflow.com/questions/46439631/recursive-function-in-c-cant-handle-big-input-count-zeroes/46439674#46439674", "title": "Recursive function in C - can&#39;t handle big input [count zeroes]", "body": "<p>Each type of value in every programming language has a limit. In your case a 32-bit integer variable can handle a max value of 2,147,483,647. Anything more than that will cause an error.</p>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1506488689, "last_edit_date": 1506488689, "creation_date": 1506487582, "answer_id": 46439681, "question_id": 46439631, "link": "https://stackoverflow.com/questions/46439631/recursive-function-in-c-cant-handle-big-input-count-zeroes/46439681#46439681", "title": "Recursive function in C - can&#39;t handle big input [count zeroes]", "body": "<p><code>12040678091</code> is > <code>2**31</code>, your integers are probably 32-bit, and <code>scanf</code> doesn't handle the overflow properly. So it just doesn't work with <code>int</code>.</p>\n\n<p>The examples you used would fit in a <code>unsigned long long</code> or <code>uint64_t</code>. However, I suggest the string approach: don't convert to integers, just do a char by char parsing to count the zeroes, and you'll be able to handle any integer size (well, if your string buffer is big enough, that is)</p>\n\n<p>(counting the chars in a string with a recursive function is now officially overkill, but can be done for research purposes, by propagating the index of the string, not the divided value)</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 6336276, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/nejPw.jpg?s=128&g=1", "display_name": "Doherty", "link": "https://stackoverflow.com/users/6336276/doherty"}, "is_accepted": false, "score": 0, "last_activity_date": 1506490321, "last_edit_date": 1506490321, "creation_date": 1506488761, "answer_id": 46439866, "question_id": 46439631, "link": "https://stackoverflow.com/questions/46439631/recursive-function-in-c-cant-handle-big-input-count-zeroes/46439866#46439866", "title": "Recursive function in C - can&#39;t handle big input [count zeroes]", "body": "<p>I assume your compiler declares, <code>int</code> as 4 byte variable.\nYour number should be between the range:</p>\n\n<pre><code>signed  : -2,147,483,648 to 2,147,483,647\nunsigned: 0 to 4,294,967,295\n</code></pre>\n\n<p>If you want to perform the operation try using a <code>long long</code> integer.</p>\n"}], "owner": {"reputation": 1, "user_id": 8614278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4216794d2d74d457192e201d282b6c1?s=128&d=identicon&r=PG&f=1", "display_name": "solan", "link": "https://stackoverflow.com/users/8614278/solan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 46439681, "answer_count": 3, "score": -2, "last_activity_date": 1506580648, "creation_date": 1506487274, "question_id": 46439631, "link": "https://stackoverflow.com/questions/46439631/recursive-function-in-c-cant-handle-big-input-count-zeroes", "title": "Recursive function in C - can&#39;t handle big input [count zeroes]", "body": "<p>I am trying to learn how to write recursive functions in C and I wrote this function that counts the number of zeros in a specified positive number, as a practice. But, it can only handle input with a maximum length of 10. Input with 11 or more numbers fails and I can't see why.</p>\n\n<p>Ex. </p>\n\n<pre><code>input = 1204067809 (correct)\noutput = 3\n\ninput = 12040678091 (fails!!)\noutput = 0\n\ninput = 12040678091423401231 (fails!!)\noutput = 1\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint rCountZeros1(int num); \n\nint main()\n{\n  int number;\n  printf(\"Enter the number: \\n\");\n  scanf(\"%d\", &amp;number);\n  printf(\"rCountZeros(): %d\\n\", rCountZeros(number));\n  return 0;\n}\n\nint rCountZeros(int num) \n{  \n  if (num==0)\n    return 1;\n  else if (num&lt;10)\n    return 0;\n\n  if (num % 10 == 0)\n    return 1+rCountZeros(num/10);\n  else\n    return rCountZeros(num/10);\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "include", "global-variables"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1506487791, "post_id": 46439321, "comment_id": 79835635, "body": "You&#39;ve not shown how you think they are declared/defined in the headers.  How are we supposed to guess what you&#39;re doing?  Did you use the keyword <code>extern</code> in the headers?  If not, that&#39;s a major part of your problem.  Note that headers are a compile-time issue; multithreading is a run-time issue.  They&#39;re essentially unrelated."}, {"owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "edited": false, "score": 0, "creation_date": 1506489269, "post_id": 46439321, "comment_id": 79836096, "body": "Because \u201cThey&#39;re ... unrelated.\u201d"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1506491321, "post_id": 46439321, "comment_id": 79836823, "body": "If you are getting multiple definition errors, it probably means you forgot to use <code>extern</code>, and perhaps you are not guarding your header files from multiple inclusion."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1506493513, "post_id": 46439321, "comment_id": 79837785, "body": "The issue you seem to be facing is unrelated to whether the program is multi- or single-threaded."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1506493581, "post_id": 46439321, "comment_id": 79837819, "body": "@alk: The OP may be confused about how to declare or define thread specific variables, but that aspect was not raised in the post."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1506502827, "post_id": 46439321, "comment_id": 79843088, "body": "Which language are you using? The title says C, the <code>.cpp</code> extension suggests C++, both tags are present. But the two languages have (slightly) different rules."}, {"owner": {"reputation": 37, "user_id": 8465080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9ab25c049826416d30abd99f5d44631?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8465080/george"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1506503031, "post_id": 46439321, "comment_id": 79843237, "body": "@MSalters c++ tag added by an editor. and .cpp extension is by mistake. I am using visual studio 2015 and its default extension is .cpp. I know I am supposed to change it to .c which i will do right away."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1506503282, "post_id": 46439321, "comment_id": 79843400, "body": "@George: Ok, changed the tags. But please note that Visual Studio use the C++ compiler on .cpp files, unless you <b>explicitly</b> tell it not to. Just writing C code in .cpp files is <b>not sufficient</b>. And on a slightly unrelated note, C got threading in the C11 version of the language, but Microsoft only supports the much, much older C89 version. (That&#39;s 22 years older!). Visual Studio <i>does</i> support C++11."}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506502481, "post_id": 46440374, "comment_id": 79842881, "body": "This admittedly only answer &quot;1.&quot;. I believe however (agreeing with alk) that only &quot;1.&quot; is relevant for solving OPs problem."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 2, "last_activity_date": 1591693028, "last_edit_date": 1591693028, "creation_date": 1506491483, "answer_id": 46440374, "question_id": 46439321, "link": "https://stackoverflow.com/questions/46439321/what-is-the-correct-way-to-include-nested-header-files-in-multithreading-in-c/46440374#46440374", "title": "What is the correct way to include nested header files in multithreading in c", "body": "<p>Do follow these rules:</p>\n\n<ol>\n<li>Do not define variables in headers, only declare them. I.e. always use <code>extern</code> with variables.</li>\n<li>Define each variable (declared <code>extern</code> by 1.) exactly once in exactly one code file, i.e. without <code>extern</code>.</li>\n<li>Even declaring variables should only be done once, in one header. (Though the compiler will not complain if you do it consistently, it is still much cleaner and safer to do it only once.)</li>\n<li>Function prototypes go into headers, once; i.e. with <code>;</code> at the end.</li>\n<li>Function definitions go into code files, once; i.e. with function head (prototype without <code>;</code>) followed by function body ( <code>{...}</code>).</li>\n<li>Whatever you want to access or refer to, include the header which declares it into the file (header or code file you need it in).</li>\n<li>Use reinclusion guards for extra safety (mostly for macros etc.).</li>\n</ol>\n\n<p>Example of a reinclusion guard:</p>\n\n<p>MyHeader.h:</p>\n\n<pre><code>#ifndef MYHEADER_H\n#define MYHEADER_H\n\n/* only declarations */\n\n#endif /* MYHEADER_H */\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8465080, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c9ab25c049826416d30abd99f5d44631?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/8465080/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1591693028, "creation_date": 1506485167, "last_edit_date": 1506503262, "question_id": 46439321, "link": "https://stackoverflow.com/questions/46439321/what-is-the-correct-way-to-include-nested-header-files-in-multithreading-in-c", "title": "What is the correct way to include nested header files in multithreading in c", "body": "<p>I have the following header and source files. </p>\n\n<pre><code>clnt_thread.h        included in clnt_thread.cpp and main.c\njacc_sim.h           included in jacc_sim.cpp and main.c\nsrvr_info.h          included in srvr_info.cpp and main.c\nconstants.h          included in clnt_thread.h and in srvr_info.h, both see above\n                          and in global_variables.c\nglobal_variables.h   included in main.c\nmain.c\n</code></pre>\n\n<p>Some variables are declared as <code>extern</code> in <code>clnt_thread.h</code> and others in <code>jacc_sim.h</code>.</p>\n\n<p>My problem is, when I define the global variables as <code>extern</code> in some of the header files I get errors saying that either they are undefined or they are defined multiple times. Plus, some of the global variables are to be shared among threads while some are to be used by each thread independently.</p>\n\n<p>I know these errors are a result of the way the header files are nested(included) in the source files. </p>\n\n<p>So: </p>\n\n<ol>\n<li><p>What is the correct way to include these header files and define the <code>extern</code> variables?</p></li>\n<li><p>What distinguishes a variable shared among threads and another one which should not be shared between threads?</p></li>\n</ol>\n"}, {"tags": ["c++", "c", "visual-studio", "pch"], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1506495852, "post_id": 46439487, "comment_id": 79839043, "body": "That&#39;s not a nitpick - the code as written has a circular dependency."}], "tags": [], "owner": {"reputation": 314, "user_id": 2087280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/260eb56b4eeadb6e121c1a9d251e2c99?s=128&d=identicon&r=PG", "display_name": "Tasgall", "link": "https://stackoverflow.com/users/2087280/tasgall"}, "is_accepted": false, "score": 0, "last_activity_date": 1506486528, "last_edit_date": 1506486528, "creation_date": 1506486216, "answer_id": 46439487, "question_id": 46439271, "link": "https://stackoverflow.com/questions/46439271/first-time-using-pch-getting-linker-tool-error/46439487#46439487", "title": "First Time Using PCH, getting Linker Tool Error", "body": "<p>Nitpick: You should not need to #include stdafx.h in bitwise.h, though it should still have a #pragma once.</p>\n\n<p>Your code for <code>bw()</code> should still be in a separate bitwise.c file, not in the header. I think you may be confusing precompiled headers with function inlining? Right now, your code for <code>bw</code> is being compiled into what is supposed to be the dummy stdafx object, and again in the main object, and causing a conflict when linking.</p>\n\n<p>Also, did you remember to mark your stdafx.h as the precompiled header (/Yu), and the stdafx.cpp as... whatever /Yc is supposed to mean? Make sure both options are set for all project configurations for <em>both files</em> in Properties -> C/C++ -> Precompiled Headers.</p>\n"}, {"tags": [], "owner": {"reputation": 2365, "user_id": 611117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d70f88638c52101b1f0c5d9a87a803e?s=128&d=identicon&r=PG", "display_name": "vasek", "link": "https://stackoverflow.com/users/611117/vasek"}, "is_accepted": true, "score": 0, "last_activity_date": 1506489021, "creation_date": 1506489021, "answer_id": 46439906, "question_id": 46439271, "link": "https://stackoverflow.com/questions/46439271/first-time-using-pch-getting-linker-tool-error/46439906#46439906", "title": "First Time Using PCH, getting Linker Tool Error", "body": "<p>This is not much about PCH. You have mixed up header (.h) and implementation (.c) files. What you need to do is split implementation and declaration. You should do following:</p>\n\n<ol>\n<li><p>rename your <code>bitwise.h</code> to <code>bitwise.c</code> since this is your implementation file, not a header!</p></li>\n<li><p>create a new file <code>bitwise.h</code> and put only declaration there, it should look like this:</p>\n\n<pre><code>#pragma once\n\nint bw();\n</code></pre></li>\n</ol>\n\n<p>Your project should be able to compile after that.</p>\n\n<p>Please also note PCH file should contain includes that are infrequently changed, which is probably not your case since you are including also <code>bitwise.h</code>. You might want to remove this include from <code>stdafx.h</code> and include it into your <code>helloworld.c</code>.</p>\n\n<p>And just a side note, during learning C <em>do not</em> think of including .c file via <code>#include</code>! If it fixes some of your compilation errors, your project design is probably very wrong.</p>\n"}], "owner": {"reputation": 3, "user_id": 8680170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ee9da5704739a82f28870024595a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Calandracas", "link": "https://stackoverflow.com/users/8680170/calandracas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 46439906, "answer_count": 2, "score": 0, "last_activity_date": 1506489021, "creation_date": 1506484837, "question_id": 46439271, "link": "https://stackoverflow.com/questions/46439271/first-time-using-pch-getting-linker-tool-error", "title": "First Time Using PCH, getting Linker Tool Error", "body": "<p>I'm a pretty novice programmer, just learning a little bit of c, but I always did it on Linux with gcc and Vim but decided to try using visual studio and I'm getting LNK2005 and LNK1169 errors, I've tried looking up the errors and how to fix them and properly use PCH because I think it would be useful to learn even if my programs are too small to make use of it.</p>\n\n<p>From my understanding I need to <code>#include \"stdafx.h\"</code> at the top of my source file (called '<code>helloworld.c</code>') I haven't touched '<code>stdafx.c</code>' from the default that came when I create the project, I created a header file called '<code>bitwise.h</code>' and it has one function in it called '<code>int bw()</code>' I then have '<code>stdafx.h</code>' and all I added was <code>#include \"bitwise.h\"</code> In my header<code>bitwise.h</code> ive tried to include <code>#include \"stdafx.h\" #include \"stdafx.c\" #include &lt;stdio.h&gt;</code> and even not including anything. all of these break my program. The only way I can get it to compile is if i comment out<code>//bw();</code> then my program compiles just fine.</p>\n\n<p>here are the files that I think may be the culprit:</p>\n\n<h3>helloworld.c</h3>\n\n<pre><code>#include \"stdafx.h\"\n\nint main()\n{\n\n    printf(\"\\tHello World!\\n\");\n    getchar();\n    bw(); //If this line is commented out everything works just Honky-Dory\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<h3>bitwise.h</h3>\n\n<pre><code>#include \"stdafx.h\" //I've tried lots of diffrent lines here, nothing works\n\nint bw()\n{\n        int a = 1;\n        int x;\n\n        for (x = 0; x &lt; 7; x++)\n        {\n            printf(\"\\nNumber is Shifted By %i Bits: %i\", x, a &lt;&lt; x);\n        }\n        getchar();\n\n        return 0;\n}\n</code></pre>\n\n<h3>stdafx.c</h3>\n\n<pre><code>// stdafx.cpp : source file that includes just the standard includes\n// $safeprojectname$.pch will be the pre-compiled header\n// stdafx.obj will contain the pre-compiled type information\n\n#include \"stdafx.h\"\n\n// TODO: reference any additional headers you need in STDAFX.H\n// and not in this file\n</code></pre>\n\n<h3>stdafx.h</h3>\n\n<pre><code>// stdafx.h : include file for standard system include files,\n// or project specific include files that are used frequently, but\n// are changed infrequently\n//\n\n#pragma once\n\n#include \"targetver.h\"\n#include \"bitwise.h\"\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n\n\n\n// TODO: reference additional headers your program requires here\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1506486724, "post_id": 46439263, "comment_id": 79835366, "body": "Thank you Jean for your reply. Is there any way to generate the array like so ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1506486779, "post_id": 46439263, "comment_id": 79835376, "body": "what would be even better would be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your <code>str_split</code> method is missing so if someone wants to reproduce a working code for themselves, they cannot."}, {"owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "edited": false, "score": 0, "creation_date": 1506486836, "post_id": 46439263, "comment_id": 79835386, "body": "He doesn&#39;t reuse the free()&#39;d pointer that I can see. He&#39;s free()&#39;ing char *tokens[i], not char **tokens. Since I is iterated after the free(), it&#39;s a different pointer."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "edited": false, "score": 0, "creation_date": 1506486866, "post_id": 46439263, "comment_id": 79835391, "body": "@torstenvl you&#39;re right. He was just copying the pointer value (this is the main error), that misled me."}, {"owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "edited": false, "score": 0, "creation_date": 1506487277, "post_id": 46439263, "comment_id": 79835508, "body": "Sorry Jean, i have added the str_split method now"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "edited": false, "score": 0, "creation_date": 1506486655, "post_id": 46439442, "comment_id": 79835348, "body": "thank you Torstenvl for your reply. could you please tell me what can be done in this to achieve ?"}, {"owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "reply_to_user": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "edited": false, "score": 0, "creation_date": 1506486747, "post_id": 46439442, "comment_id": 79835370, "body": "I don&#39;t understand your follow-up question."}, {"owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "edited": false, "score": 0, "creation_date": 1506487418, "post_id": 46439442, "comment_id": 79835538, "body": "Sorry Torstenvl, let me try with the above"}, {"owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "edited": false, "score": 0, "creation_date": 1506487539, "post_id": 46439442, "comment_id": 79835569, "body": "Thank you Torstenvl for your code, its working :) Thank you so much :)"}], "tags": [], "owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "is_accepted": true, "score": 1, "last_activity_date": 1506487050, "last_edit_date": 1506487050, "creation_date": 1506485955, "answer_id": 46439442, "question_id": 46439263, "link": "https://stackoverflow.com/questions/46439263/how-to-create-an-unsigned-integer-array-in-c-from-the-arguments-passed-to-the-sc/46439442#46439442", "title": "How to create an unsigned integer array in c from the arguments passed to the script?", "body": "<p>Remember that <code>tokens</code> is a pointer-to-pointer type, <code>char **tokens</code>. Therefore <code>*(tokens+i)</code> is a pointer. You are treating that pointer (to a string) as if it were an integer. </p>\n\n<p>What you need to do is first convert the string to an integer type. <code>strtoul()</code> is a good starting point. You can even specify your base so it'll automatically convert from hexadecimal for you. </p>\n\n<pre><code>for (i = 0; tokens[i]; i++)\n{\n    char *endptr;\n    unsigned long tmp;\n    printf(\"val=[%s]\\n\", tokens[i]);\n    tmp = strtoul(tokens[i], &amp;endptr, 16);\n    if (endptr == tokens[i]) {\n        /* end of valid number is the beginning of the string */\n        /* that means there was no valid number */\n        /* insert error handling here (e.g. reprinting usage) */\n        in[i] = (uint8_t)0;\n    } else {\n        in[i] = (uint8_t)tmp;\n    }\n    free(tokens[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7489462, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b37c9ed00be46fedc19d596e323e6875?s=128&d=identicon&r=PG&f=1", "display_name": "Developers Staff", "link": "https://stackoverflow.com/users/7489462/developers-staff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 46439442, "answer_count": 1, "score": 0, "last_activity_date": 1506487216, "creation_date": 1506484755, "last_edit_date": 1506487216, "question_id": 46439263, "link": "https://stackoverflow.com/questions/46439263/how-to-create-an-unsigned-integer-array-in-c-from-the-arguments-passed-to-the-sc", "title": "How to create an unsigned integer array in c from the arguments passed to the script?", "body": "<p>I need to create an unsigned integer array like </p>\n\n<pre><code>char** str_split(char* a_str, const char a_delim)\n{\nchar** result    = 0;\nsize_t count     = 0;\nchar* tmp        = a_str;\nchar* last_comma = 0;\nchar delim[2];\ndelim[0] = a_delim;\ndelim[1] = 0;\n\n/* Count how many elements will be extracted. */\nwhile (*tmp)\n{\n    if (a_delim == *tmp)\n    {\n        count++;\n        last_comma = tmp;\n    }\n    tmp++;\n}\n\n/* Add space for trailing token. */\ncount += last_comma &lt; (a_str + strlen(a_str) - 1);\n\n/* Add space for terminating null string so caller\n   knows where the list of returned strings ends. */\ncount++;\n\nresult = malloc(sizeof(char*) * count);\n\nif (result)\n{\n    size_t idx  = 0;\n    char* token = strtok(a_str, delim);\n\n    while (token)\n    {\n        assert(idx &lt; count);\n        *(result + idx++) = strdup(token);\n        token = strtok(0, delim);\n    }\n    assert(idx == count - 1);\n    *(result + idx) = 0;\n}\n\nreturn result;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>uint8_t in[] = {0X08,0X3c,0Xe6,0Xe3,0Xb9,0X74,0X4a,0Xdc,0Xd7,0X29,0Xee,0X99,0X35,0X15,0X8a,0X77}; \n</code></pre>\n\n<p>from the arguments passed to the script. The arguments will be passed to the script like </p>\n\n<pre><code>./conversion 0X08,0X3c,0Xe6,0Xe3,0Xb9,0X74,0X4a,0Xdc,0Xd7,0X29,0Xee,0X99,0X35,0X15,0X8a,0X77\n</code></pre>\n\n<p>I created the following code to create the array from the argument</p>\n\n<pre><code>char** tokens;\ntokens = str_split(argv[1], ',');\nuint8_t hex[100];\nuint8_t in[100];\n\nif (tokens)\n{\n    int i;\n    for (i = 0; *(tokens + i); i++)\n    {\n            printf(\"val=[%s]\\n\", *(tokens + i));\n\n          in[i] = *(tokens + i);\n\n        free(*(tokens + i));\n    }\n    printf(\"\\n\");\n    free(tokens);\n}\n\nfor (i = 0; i &lt; 16;i++) \n printf(\"%02x \",in[i]);\n</code></pre>\n\n<p>I am getting the following warning when i executed the script</p>\n\n<pre><code>warning: assignment makes integer from pointer without a cast\n</code></pre>\n\n<p>But i am able to print out each value using the </p>\n\n<pre><code>printf(\"val=[%s]\\n\", *(tokens + i))\n</code></pre>\n\n<p>but unable to save this as an array like</p>\n\n<p>Is there anything wrong in my code ? could you please help me ?</p>\n"}, {"tags": ["c", "string", "char"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1506483121, "post_id": 46438901, "comment_id": 79834516, "body": "You&#39;re leaking memory in <code>halfSwap()</code> each time you call it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1506483339, "post_id": 46438901, "comment_id": 79834563, "body": "AFAICS, the specification of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strndup.html\" rel=\"nofollow noreferrer\"><code>strndup()</code></a> does not guarantee to allocate as much memory as the second argument.  If the input is shorter than the second argument, it may only allocate enough space for the input, including the null terminator.  Therefore, appending to the allocated space is undefined behaviour.  If you&#39;re on a platform where you can run <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">Valgrind</a>, use it."}, {"owner": {"reputation": 2060, "user_id": 3808573, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CmqrY.png?s=128&g=1", "display_name": "ssd", "link": "https://stackoverflow.com/users/3808573/ssd"}, "edited": false, "score": 0, "creation_date": 1506483369, "post_id": 46438901, "comment_id": 79834569, "body": "You&#39;ll probably get the answer on your own if you help yourself by debugging the code (via <i>code-blocks</i> for example). In addition, debugging and inspecting the values of variables &amp; pointers will help you learn faster."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1506484470, "post_id": 46438901, "comment_id": 79834815, "body": "<code>strndup</code> is not allocating the required <code>strlen(sample)+1</code> characters you need.  It is only allocating up to and including the terminating null charcter, starting from the middle of the string, i.e. half as much memory as you&#39;re actually using.  Once you write past what you&#39;ve allocated, anything can happen."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1506492247, "post_id": 46438901, "comment_id": 79837171, "body": "I think this question will not be closed. So would any of you like to make an answer? At least two of the comments seem to answer sufficiently, and I would appreciate getting this out of the list of unanswered questions."}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 3342248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8e382bd13ffcf46be4229173acd485?s=128&d=identicon&r=PG&f=1", "display_name": "SGeorgiades", "link": "https://stackoverflow.com/users/3342248/sgeorgiades"}, "is_accepted": true, "score": 0, "last_activity_date": 1506496789, "creation_date": 1506496789, "answer_id": 46441745, "question_id": 46438901, "link": "https://stackoverflow.com/questions/46438901/after-exceeding-24-characters-strncat-or-strndmp-adds-random-characters/46441745#46441745", "title": "After exceeding 24 characters strncat or strndmp adds random characters", "body": "<p>The call to strndup only allocates enough memory the the latter half of the string, so when you strncat to it, it goes beyond the space allocated for buff, and the behavior is undefined.  What you probably want instead us something along these lines:</p>\n\n<pre><code>int len = strlen(sample);\nint half = len / 2;\nbuff = (char*)malloc(len+1);\nstrcpy(buff,&amp;sample[half]);\nstrncat(buff,sample,half);\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 2485292, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/J3uV0.png?s=128&g=1", "display_name": "Some Dinosaur", "link": "https://stackoverflow.com/users/2485292/some-dinosaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 46441745, "answer_count": 1, "score": -2, "last_activity_date": 1506496789, "creation_date": 1506481955, "question_id": 46438901, "link": "https://stackoverflow.com/questions/46438901/after-exceeding-24-characters-strncat-or-strndmp-adds-random-characters", "title": "After exceeding 24 characters strncat or strndmp adds random characters", "body": "<p>I'm currently learning C and I decided to make a simple function which swaps the two halves of a string. I used strndmp to get one half of the string and used strncat to add the other half to the end of the strndmp result. After this I printed the output. The script outputted the string with its halves swapped but with the last few characters replaced with random characters. I'm really confused since this doesn't happen if I print something before printing the swapped string or if the inputted string is under 24 characters. Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid halfSwap(char * sample);\nvoid halfSwap(char * sample){\n    char * buff;\n    buff = strndup(sample+strlen(sample)/2,strlen(sample));\n    strncat(buff,sample,strlen(sample)/2);\n    printf(\"Sample length: %d\\n\",strlen(sample));\n    printf(\"Buffer output: %s\\n\",buff);\n}\nint main() {\n    //printf(\"Uncommenting this will remove the error\\n\\n\");\n    //Characters only go missing after sample exceeds 24 chars\n    halfSwap(\" worrrrrrrlddhellllllllooo\");\n    //Error does not occur after printng once\n    halfSwap(\" worrrrrrrlddhellllllllooo\");\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>Sample length: 26\nBuffer output: hellllllllooo worrrrrrrl\nSample length: 26\nBuffer output: hellllllllooo worrrrrrrldd\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "structure"], "comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506482126, "post_id": 46438851, "comment_id": 79834298, "body": "Why do you think I get the feeling you&#39;re not reading a book?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1506482238, "post_id": 46438851, "comment_id": 79834313, "body": "I&#39;ll tell you why... 1/ this problem is so basic that people who <i>do</i> read books generally don&#39;t have it, 2/ it&#39;s the kind of question I see from people who <i>don&#39;t</i> read books more often than not, 3/ I see this kind of question dozens of times a day and 4/ <b>rather than asking such question one after another after another, you could save lots of time by reading a book</b>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1506482983, "post_id": 46438851, "comment_id": 79834492, "body": "If your book tells you to use <code>gets</code>, burn it now! Get a new book. <code>gets</code> has been removed from the C11 standard due to its insecurity, use <code>fgets</code> instead."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1506483406, "post_id": 46438851, "comment_id": 79834587, "body": "@DavidC.Rankin You know as well as I do, this person most likely <i>isn&#39;t using a book</i>... There&#39;s nothing to <i>burn</i>, though that doesn&#39;t change the fact that <i>it isn&#39;t working for him/her</i>. Look past the <code>gets</code> issue, and you&#39;ll see, this is a <i>very basic</i> problem people who read books won&#39;t possibly have. People who read books will ask about the book long before they try to write code like this... <i>if they need to</i>..."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506485768, "post_id": 46438851, "comment_id": 79835077, "body": "like <a href=\"https://ideone.com/diaPYS\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 69, "user_id": 7438683, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/96471eca7d3852da9a344bb54f46d3e9?s=128&d=identicon&r=PG&f=1", "display_name": "skylight", "link": "https://stackoverflow.com/users/7438683/skylight"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1506489129, "post_id": 46438851, "comment_id": 79836053, "body": "Thank you so much. trying to understanding what u have coded. is it possible for u to write comment beside the code? @BLUEPIXY"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1506484704, "post_id": 46439046, "comment_id": 79834851, "body": "It may also be helpful to direct OP to the following link <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><b>How to debug small programs</b></a> and with the <b>note</b> to talk to the duck...<code>:)</code>"}], "tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1506483564, "last_edit_date": 1506483564, "creation_date": 1506483201, "answer_id": 46439046, "question_id": 46438851, "link": "https://stackoverflow.com/questions/46438851/changing-a-char-to-another-specified-char-in-a-specified-position-structure/46439046#46439046", "title": "Changing a Char to another specified Char in a specified position structure", "body": "<p>If you'd be so kind as to explain where you output any character <em>other than <code>a</code>, <code>z</code> or <code>d</code></em> within this code:</p>\n\n<pre><code>void encodeChar(Rule table[5], char *s, char *t)\n{\n    int j =0;\n\n    while(s[j] != '\\0')\n    {\n        if (s[j] == 'a')\n            putchar('d');\n        if (s[j] == 'b')\n            putchar('z');\n        if (s[j]=='z')\n            putchar('a');\n        j++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please show me where you <code>putchar</code> anything but <code>'a'</code>, <code>'d'</code> or '<code>z</code>' and you'll get some <strong>strong hints</strong> towards the answer to your question.</p>\n\n<p><strong>P.S. Most importantly, if my <em>rather educated</em> guess was correct, YOU NEED A BOOK!</strong> You can't safely learn C without one. It's not <em>theoretically impossible</em>, but <strong>it is practically unlikely</strong> that you'll get it right without wasting <em>heaps of time</em> writing <em>really unstable code</em>.</p>\n\n<p>I recommend K&amp;R2E. It's not <em>beginner friendly</em> in the sense that it assumes you know some other programming concepts, but then again, C is not a <em>beginner friendly</em> language in the sense that you can't just mash your face against a keyboard and win.</p>\n\n<p>If you're looking for something <em>beginner friendly</em>, choose a different language. C doesn't yet have any <em>beginner friendly</em> resources, or any reputable teachers that start from a <em>beginner</em> level, to the best of my knowledge.</p>\n\n<p>If you're going to program in C, it is expected that you be able to read... books, manuals and error messages from compilers and <em>valgrind</em> all need the same kind of attention to detail that your code needs.</p>\n\n<p>Anything you do manage to learn without a book, you're likely going to have to unlearn. So <strong>stop guessing immediately, start reading immediately</strong> and hopefully next time I hear from you it's not about something <em>basic</em> and <em>explained by the book</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 7438683, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/96471eca7d3852da9a344bb54f46d3e9?s=128&d=identicon&r=PG&f=1", "display_name": "skylight", "link": "https://stackoverflow.com/users/7438683/skylight"}, "edited": false, "score": 0, "creation_date": 1506489249, "post_id": 46439591, "comment_id": 79836089, "body": "This clearly has helped me a lot. clear my doubts and provide sufficient explanation. I am new to C and i hope one day when ive mastered C language, i will be able to share my knowledge to new programmer as i understand their situation. Thank you so much for your time sir! @david"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 69, "user_id": 7438683, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/96471eca7d3852da9a344bb54f46d3e9?s=128&d=identicon&r=PG&f=1", "display_name": "skylight", "link": "https://stackoverflow.com/users/7438683/skylight"}, "edited": false, "score": 0, "creation_date": 1506489765, "post_id": 46439591, "comment_id": 79836283, "body": "You will. Learning C is a journey, not a race, enjoy the ride."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1506487007, "creation_date": 1506487007, "answer_id": 46439591, "question_id": 46438851, "link": "https://stackoverflow.com/questions/46438851/changing-a-char-to-another-specified-char-in-a-specified-position-structure/46439591#46439591", "title": "Changing a Char to another specified Char in a specified position structure", "body": "<p>In addition to, and in agreement with, the other answer, there are fundamentals you are missing. </p>\n\n<p>When you get into <code>encodeChar</code>, what parameter are you using to tell you how many elements <code>table</code> has? (you do want to iterate over each element in <code>table</code> checking <code>table[i].source</code> against each character to determine if a substitution is needed, right?)</p>\n\n<p><strong>note:</strong> C generally uses all <em>lowercase</em> for variable and function names while reserving all <em>uppercase</em> for constants and macros. C avoids the use of <em>camelCase</em> and <em>MixedCase</em> names -- leave those for C++ or java. While it is a matter of style, so it is largely up to you, it does say a lot about your appreciation for C, just like using <code>gets</code> does....</p>\n\n<p>Don't use <em>magic numbers</em> in your code. If you need a constant, (e.g. <code>80</code>), declare one at the top of your code, e.g.</p>\n\n<pre><code>#define MAXC 80   /* maximum characters for input buffer */\n</code></pre>\n\n<p>If you have multiple constants to declare, using an <code>enum</code> is an orderly way to declare global constants. </p>\n\n<p>Using constants prevents having to pick through multiple array declarations to change their size. There is one convenient place up top to make the change.</p>\n\n<p>Don't use <code>gets</code>, it is helpless against buffer overrun and has been removed from C11. Use <code>fgets</code>. All valid <em>line-oriented</em> input functions (e.g. <code>fgets</code>, and POSIX <code>getline</code>) <em>read and include</em> the trailing <code>'\\n'</code> in the buffers they fill with input. Therefore, you need to trim the trailing newline from input, or you will have <code>'\\n'</code> dangling off the end of any string you store that can cause problems with comparisons, etc.. Simply get the length and check character <code>length - 1</code> to validate it is a <code>'\\n'</code>, then just overwrite it with a <em>nul-terminating</em> character (<code>'\\0'</code> or <code>0</code>, they are equivalent)</p>\n\n<p>It's quite simple, e.g.:</p>\n\n<pre><code>len = strlen (s);                  /* get length of s   */\nif (len &amp;&amp; s[len - 1] == '\\n')     /* check for \\n      */\n    s[--len] = 0;                  /* overwrite with \\0 */\n</code></pre>\n\n<p><strong>note:</strong> by using <code>--len</code> you now have the new length preserved in <code>len</code>.</p>\n\n<p>Finally, for your <code>encodechar</code> function, you need to know how many elements of <code>table</code> you have. For each character in <code>s</code> you will compare it to each <code>table[i].source</code> if a match is found, then you will assign <code>table[i].code</code> to <code>t</code> and go to the next character. If not found, you will simply assign the character in <code>s</code> to <code>t</code>.</p>\n\n<p><strong>note:</strong> there is no need for the 5th element of <code>table</code> (e.g. <code>'\\0'</code>, <code>'\\0'</code>), you can easily <em>nul-terminate</em> <code>t</code> without it -- and it is not a replacement.</p>\n\n<p>Putting that together, you could write <code>encodechar</code> similar to the following:</p>\n\n<pre><code>void encodechar (rule *table, size_t sz, char *s, char *t)\n{\n    size_t i;\n\n    while (*s) {                            /* for each character */\n        int replaced = 0;                   /* replaced flag */\n        for (i = 0; i &lt; sz; i++)            /* for each element of table */\n            if (*s == table[i].source) {    /* is char == table[i].source */\n                *t = table[i].code;         /* replace it */\n                replaced = 1;               /* set replaced flag */\n                break;                      /* get next character */\n            }\n        if (!replaced)                      /* if not replaced */\n            *t = *s;                        /* copy from s to t */\n        s++, t++;                           /* increment s and t */\n    }\n    *t = 0;                                 /* nul-terminate t */\n}\n</code></pre>\n\n<p>Putting it altogether, and noting <code>main()</code> is type <code>int</code> and therefore returns a value (See: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\"><strong>C11 Standard \u00a75.1.2.2.1 Program startup (draft n1570)</strong></a>. See also: <a href=\"http://stackoverflow.com/questions/204476/\"><strong>See What should main() return in C and C++?</strong></a>), you can do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXC 80   /* maximum characters for input buffer */\n\ntypedef struct {\n    char source;\n    char code;\n} rule;\n\nvoid encodechar (rule *table, size_t sz, char *s, char *t);\n\nint main (void) {\n\n    char s[MAXC] = \"\", t[MAXC] = \"\";\n    rule table[] = { {'a', 'd'}, {'b', 'z'}, {'z', 'a'}, {'d', 'b'} };\n    size_t len = 0, n = sizeof table/sizeof *table;\n\n    printf (\"Source string : \");\n    if (!fgets (s, MAXC, stdin)) {\n        fprintf (stderr, \"error: invalid input.\\n\");\n        return 1;\n    }\n\n    len = strlen (s);                  /* get length of s   */\n    if (len &amp;&amp; s[len - 1] == '\\n')     /* check for \\n      */\n        s[--len] = 0;                  /* overwrite with \\0 */\n\n    encodechar (table, n, s, t);\n\n    printf (\"Encoded string: %s\\n\", t);\n\n    return 0;\n}\n\nvoid encodechar (rule *table, size_t sz, char *s, char *t)\n{\n    size_t i;\n\n    while (*s) {                            /* for each character */\n        int replaced = 0;                   /* replaced flag */\n        for (i = 0; i &lt; sz; i++)            /* for each element of table */\n            if (*s == table[i].source) {    /* is char == table[i].source */\n                *t = table[i].code;         /* replace it */\n                replaced = 1;               /* set replaced flag */\n                break;                      /* get next character */\n            }\n        if (!replaced)                      /* if not replaced */\n            *t = *s;                        /* copy from s to t */\n        s++, t++;                           /* increment s and t */\n    }\n    *t = 0;                                 /* nul-terminate t */\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/encode\nSource string : abcdefghijklmnopqrstuvwxyz\nEncoded string: dzcbefghijklmnopqrstuvwxya\n</code></pre>\n\n<p>Always compile with <em>warnings enabled</em>, and <strong>do not</strong> accept code until it <em>compiles cleanly without warning</em>. To enable warnings add <code>-Wall -Wextra</code> to your <code>gcc</code> compile string. (add <code>-pedantic</code> for several additional warnings). For <em>VS</em> (<code>cl.exe</code> on windoze), add <code>/Wall</code>. For <code>clang</code>, add <code>-Weverything</code>. Read and understand each warning. They will identify any problems, and the exact line on which they occur. You can learn as much about coding by simply listening to what your compiler is telling you as you can from most tutorials.</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 69, "user_id": 7438683, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/96471eca7d3852da9a344bb54f46d3e9?s=128&d=identicon&r=PG&f=1", "display_name": "skylight", "link": "https://stackoverflow.com/users/7438683/skylight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 46439591, "answer_count": 2, "score": 0, "last_activity_date": 1506487007, "creation_date": 1506481540, "last_edit_date": 1506482894, "question_id": 46438851, "link": "https://stackoverflow.com/questions/46438851/changing-a-char-to-another-specified-char-in-a-specified-position-structure", "title": "Changing a Char to another specified Char in a specified position structure", "body": "<p>I need to change a specified characters eg: a->z, d->b in a string. for eg: input is abandoned; output is zbznboneb. This is my code.</p>\n\n<pre><code>typedef struct {\n    char source;\n    char code;\n} Rule;\n\nvoid encodeChar (Rule table[5], char *s, char *t);\n\nint main ()\n{\n    char s[80], t[80];\n    Rule table[5] = { 'a', 'd', 'b', 'z', 'z', 'a', 'd', 'b', '\\0', '\\0'\n    };\n\n    printf (\"Source string: \\n\");\n    gets (s);\n    encodeChar (table, s, t);\n    printf (\"Encoded string: %s\\n\", t);\n    return 0;\n}\n\nvoid encodeChar (Rule table[5], char *s, char *t)\n{\n    int j = 0;\n\n    while (s[j] != '\\0') {\n        if (s[j] == 'a')\n            putchar ('d');\n        if (s[j] == 'b')\n            putchar ('z');\n        if (s[j] == 'z')\n            putchar ('a');\n        j++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But it gives me output dz, only and does not return the whole word when, i type abandoned. </p>\n"}, {"tags": ["c", "unix", "data-structures", "tiff", "libtiff"], "comments": [{"owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "edited": false, "score": 0, "creation_date": 1506556714, "post_id": 46438841, "comment_id": 79873165, "body": "I have an image with 1IFD and which has 17 tag entries."}, {"owner": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1506582521, "post_id": 46438841, "comment_id": 79880671, "body": "How IFDs are stored in memory, is an implementation detail in the library. If want to know how it&#39;s done in libtiff for educational purposes, I suggest looking at the libtiff source code. Other libraries might do it differently, and it doesn&#39;t really matter, as long as the decoder has enough information to decode the image."}, {"owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "reply_to_user": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1506708093, "post_id": 46438841, "comment_id": 79943557, "body": "Thanks, @haraldK I need to understand it as we want to add one more tag/IFD to Tiff using libtiff as part of my project."}, {"owner": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1507110416, "post_id": 46438841, "comment_id": 80077110, "body": "It seems to me you should be looking at the libtiff API documentation, rather than worry about how the IFDs are stored in memory. I&#39;m sure you&#39;ll find a way to add a tag to an IFD there."}, {"owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "reply_to_user": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1507137516, "post_id": 46438841, "comment_id": 80094833, "body": "It seems there is no proper website/documents for libtiff, can you please provide me the link to get documentation"}, {"owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "reply_to_user": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1507836929, "post_id": 46438841, "comment_id": 80381401, "body": "@haraldK  Can you please give me the webiste links for libtiff API documentation if you have"}, {"owner": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1507839812, "post_id": 46438841, "comment_id": 80382861, "body": "Asking for documentation is off-topic for SO, and it\u2019s very easy to find. But anyway.. Second google hit for libtiff is the current official site, as far as I can see: <a href=\"http://www.simplesystems.org/libtiff/\" rel=\"nofollow noreferrer\">simplesystems.org/libtiff</a>"}, {"owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "reply_to_user": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1508193785, "post_id": 46438841, "comment_id": 80506193, "body": "Yeah, I have seen simplesystems link previously but there is no documentation for &quot;how it is working&quot;. Anyway thank you for your response @haraldK"}], "owner": {"reputation": 21, "user_id": 6127896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343ce9bdbf3222bee8106d49fe55604d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar", "link": "https://stackoverflow.com/users/6127896/bhaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506481467, "creation_date": 1506481467, "question_id": 46438841, "link": "https://stackoverflow.com/questions/46438841/how-tiff-image-ifds-are-stored-in-memory", "title": "How tiff image IFDs are stored in memory", "body": "<p>I am using \ntiff 4.0.8 (libtiff)\nUbuntu 14.04\nTiff 6.0 specifications</p>\n\n<p>When a tiff image is opened on the computer, how IFDs(Image File Directory) are stored in memory.</p>\n\n<p>I guess IFDs are stored randomly in memory with data structures linking.</p>\n"}, {"tags": ["c", "strtoull"], "comments": [{"owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 0, "creation_date": 1506480957, "post_id": 46438686, "comment_id": 79834049, "body": "String as in &quot;11767989860&quot; are characters?"}, {"owner": {"reputation": 609, "user_id": 609597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd7388bb9ba944ba3b4f545afbf7d3d7?s=128&d=identicon&r=PG", "display_name": "softwarevamp", "link": "https://stackoverflow.com/users/609597/softwarevamp"}, "reply_to_user": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 0, "creation_date": 1506481354, "post_id": 46438686, "comment_id": 79834121, "body": "yes, they are char*."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1506482002, "post_id": 46438686, "comment_id": 79834270, "body": "But 11767989860 is <code>{0x2, 0xbd6d4664}</code>, while <code>{0xaaaa, 0xbbbb}</code> is either 2863315899 or 187647121210299, depending on how you look at it."}, {"owner": {"reputation": 609, "user_id": 609597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd7388bb9ba944ba3b4f545afbf7d3d7?s=128&d=identicon&r=PG", "display_name": "softwarevamp", "link": "https://stackoverflow.com/users/609597/softwarevamp"}, "edited": false, "score": 0, "creation_date": 1506519040, "post_id": 46438686, "comment_id": 79854025, "body": "i am not sure if {0x2, 0xbd6d4664} is correct."}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 7948972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c7532feae477f9afbb10247cb6cfece?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Houle", "link": "https://stackoverflow.com/users/7948972/paul-houle"}, "is_accepted": false, "score": 0, "last_activity_date": 1506483438, "last_edit_date": 1506483438, "creation_date": 1506481092, "answer_id": 46438798, "question_id": 46438686, "link": "https://stackoverflow.com/questions/46438686/c-how-to-convert-string-of-unsigned-long-long-to-uint32-t/46438798#46438798", "title": "C how to convert string of unsigned long long to uint32_t[]?", "body": "<p>Ignoring overflow, this gives you an unsigned long long (which I believe is 64-bit, not 32):</p>\n\n<pre><code>unsigned long long r = 0;\nwhile (*pstr &gt;= '0' &amp;&amp; *pstr &lt;= '9') r = r * 10 + (*pstr++ - '0');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 609597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd7388bb9ba944ba3b4f545afbf7d3d7?s=128&d=identicon&r=PG", "display_name": "softwarevamp", "link": "https://stackoverflow.com/users/609597/softwarevamp"}, "edited": false, "score": 0, "creation_date": 1506519309, "post_id": 46439586, "comment_id": 79854230, "body": "this is very helpful. btw, is it possible return in one liner?"}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 0, "last_activity_date": 1506486962, "creation_date": 1506486962, "answer_id": 46439586, "question_id": 46438686, "link": "https://stackoverflow.com/questions/46438686/c-how-to-convert-string-of-unsigned-long-long-to-uint32-t/46439586#46439586", "title": "C how to convert string of unsigned long long to uint32_t[]?", "body": "<p>You have 11767989860 but in string form, and you want it to break into integer array <code>{0x2,0xBD6D4664}</code>.</p>\n\n<p>You can first convert string to long long, then copy 4 bytes from that long long variable into your integer array.</p>\n\n<p>Below is the sample program</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdint.h&gt;\nint main()\n{\nunsigned long long ll = 0;\nuint32_t arr[2];\nchar str[]=\"11767989860\";\nchar *tmpPtr = NULL;\ntmpPtr = &amp;ll;\n\nsscanf(str,\"%llu\",&amp;ll);\nprintf(\"ll=%llu\",ll);\n\n/*Big endian*/\nmemcpy(arr,&amp;ll,sizeof(ll));\nprintf(\"\\n%u %u\\n\",arr[0],arr[1]);\n/*Little endian*/\nmemcpy(&amp;arr,&amp;tmpPtr[4],sizeof(ll)/2);\nmemcpy(&amp;arr[1],&amp;tmpPtr[0],sizeof(ll)/2);\nprintf(\"\\n%u %u\\n\",arr[0],arr[1]);\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 609597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd7388bb9ba944ba3b4f545afbf7d3d7?s=128&d=identicon&r=PG", "display_name": "softwarevamp", "link": "https://stackoverflow.com/users/609597/softwarevamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1506486962, "creation_date": 1506480233, "question_id": 46438686, "link": "https://stackoverflow.com/questions/46438686/c-how-to-convert-string-of-unsigned-long-long-to-uint32-t", "title": "C how to convert string of unsigned long long to uint32_t[]?", "body": "<p>Is there any short code convert a string of unsigned long long to uint32_t[]?</p>\n\n<pre><code>eg, 11767989860 =&gt; uint32_t[] {0xaaaa, 0xbbbb}?\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "shell", "command-line"], "comments": [{"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 4, "creation_date": 1506480377, "post_id": 46438684, "comment_id": 79833920, "body": "Just don&#39;t compile it with the .out in the name?"}, {"owner": {"reputation": 1, "user_id": 7081602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88ceb2f31713c013bb6e8a3b48a16ae?s=128&d=identicon&r=PG&f=1", "display_name": "Furqan 695", "link": "https://stackoverflow.com/users/7081602/furqan-695"}, "reply_to_user": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1506480580, "post_id": 46438684, "comment_id": 79833962, "body": "no it says ./a  no such file exist in the directory but if i run it with ./a.out it works fine"}, {"owner": {"reputation": 4073, "user_id": 152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXFHS.jpg?s=128&g=1", "display_name": "Jonesinator", "link": "https://stackoverflow.com/users/152/jonesinator"}, "edited": false, "score": 2, "creation_date": 1506480917, "post_id": 46438684, "comment_id": 79834041, "body": "<code>gcc</code> accepts the <code>-o</code> flag allowing you to rename <code>a.out</code> to whatever you want."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1506481240, "post_id": 46438684, "comment_id": 79834096, "body": "if it&#39;s already compiled simply rename it to remove .out"}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 3, "last_activity_date": 1506503814, "last_edit_date": 1506503814, "creation_date": 1506481771, "answer_id": 46438880, "question_id": 46438684, "link": "https://stackoverflow.com/questions/46438684/how-can-i-give-command-line-arguments-without-using-out-extension-not-a-out-3/46438880#46438880", "title": "How can i give command line arguments without using out extension ,not ./a.out 3 4 but like ./a 3 4", "body": "<p>Assuming your source file was <code>a.c</code>, just use the <code>-o</code> (\"output\") flag when you compile it, like this:</p>\n\n<pre><code>cc -o a a.c\n</code></pre>\n\n<p>Or, if you already did</p>\n\n<pre><code>cc a.c\n</code></pre>\n\n<p>meaning it left it in <code>a.out</code> by default, you can always rename it:</p>\n\n<pre><code>mv a.out a\n</code></pre>\n\n<p>Of course you can call it anything you want:</p>\n\n<pre><code>cc -o mytestprogram a.c\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7081602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88ceb2f31713c013bb6e8a3b48a16ae?s=128&d=identicon&r=PG&f=1", "display_name": "Furqan 695", "link": "https://stackoverflow.com/users/7081602/furqan-695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46438880, "answer_count": 1, "score": -4, "last_activity_date": 1506503814, "creation_date": 1506480225, "last_edit_date": 1506480799, "question_id": 46438684, "link": "https://stackoverflow.com/questions/46438684/how-can-i-give-command-line-arguments-without-using-out-extension-not-a-out-3", "title": "How can i give command line arguments without using out extension ,not ./a.out 3 4 but like ./a 3 4", "body": "<pre><code>int main(int argc, char *argv[])\n{\n    if (argc &lt; 2) {\n        printf(\"missing argument\\n\");\n        exit(-1);\n    }\n    printf(\"%s %s %s\", argv[1], argv[2]);\n    return 0;\n}\n</code></pre>\n\n<p>Just want to give command line arguments like ./a 3 4 without using .out in linux terminal thanks!!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1506478996, "post_id": 46438477, "comment_id": 79833623, "body": "<code>*file = *fopen(</code> is not correct, is should be just <code>file = fopen(</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1506479138, "post_id": 46438477, "comment_id": 79833652, "body": "<code>text[i] = strdup(text);</code> is overwriting pointer after pointer after pointer. How about <code>char text[1000], *lines[1000];</code> and then <code>while (i &lt; 1000 &amp;&amp; fgets(text, sizeof(text), file)!= NULL){ lines[i] = strdup(text); i++; }</code>? Also See: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\"><b>C11 Standard &#167;5.1.2.2.1 Program startup (draft n1570)</b></a>. See also: <a href=\"http://stackoverflow.com/questions/204476/\"><b>See What should main() return in C and C++?</b></a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1506494659, "post_id": 46438477, "comment_id": 79838381, "body": "You should not declare huge arrays like those on the stack. That alone may give segmentation faults."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8679969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UJMPGCMfsMY/AAAAAAAAAAI/AAAAAAAAADI/uL93DNqwxVA/photo.jpg?sz=128", "display_name": "Sidney H", "link": "https://stackoverflow.com/users/8679969/sidney-h"}, "edited": false, "score": 0, "creation_date": 1506480587, "post_id": 46438675, "comment_id": 79833968, "body": "So can you explain why you are using the &quot;if&quot; clause?  Like what are you checking for and why do you have to check for it?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 8679969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UJMPGCMfsMY/AAAAAAAAAAI/AAAAAAAAADI/uL93DNqwxVA/photo.jpg?sz=128", "display_name": "Sidney H", "link": "https://stackoverflow.com/users/8679969/sidney-h"}, "edited": false, "score": 0, "creation_date": 1506480813, "post_id": 46438675, "comment_id": 79834013, "body": "When using <code>fgets</code> it will read up to and include the line ending (<code>&#39;\\n&#39;</code>) in <code>text</code>. You don&#39;t want <code>&#39;\\n&#39;</code> dangling off the end of each string you store or it will mess of comparisons, etc.. So you trim them by overwriting them with a <i>nul-terminating</i> character <code>&#39;\\0&#39;</code> (which is equivalent to zero) <code>text[length-1]</code> will always be <code>&#39;\\n&#39;</code> if an entire line has been read. If the line is <code>1025-chars</code>, then you will not find a <code>&#39;\\n&#39;</code> and you will know additional character remain in that line unread."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 8679969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UJMPGCMfsMY/AAAAAAAAAAI/AAAAAAAAADI/uL93DNqwxVA/photo.jpg?sz=128", "display_name": "Sidney H", "link": "https://stackoverflow.com/users/8679969/sidney-h"}, "edited": false, "score": 0, "creation_date": 1506488011, "post_id": 46438675, "comment_id": 79835693, "body": "@SidneyH, note the change to <code>if (len &amp;&amp; text[len-1] == &#39;\\n&#39;)</code>, it was missing <code>len</code> at the beginning to make sure length was at least <code>1</code> before checking <code>len - 1</code> and before <code>--len</code>. (otherwise Undefined Behavior will result if you reference a negative array index)"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1506487908, "last_edit_date": 1506487908, "creation_date": 1506480184, "answer_id": 46438675, "question_id": 46438477, "link": "https://stackoverflow.com/questions/46438477/why-am-i-getting-a-segmentation-fault-when-reading-in-a-text-file-and-storing-in/46438675#46438675", "title": "Why am I getting a Segmentation Fault when reading in a text file and storing into an array?", "body": "<p>Continuing from my comment,</p>\n\n<pre><code>text[i] = strdup (text);\n</code></pre>\n\n<p>Is wrong. It attempts to assign a pointer (the result of <code>strdup</code>) to <code>text[i]</code> a signed <code>char</code> value. You need to use a separate array of pointers (or declare a <em>pointer to pointer to char</em>, e.g. <code>char **lines;</code> and then allocate pointers and then for each line).</p>\n\n<p>The most important thing you can do is <em>Listen to what your compiler is telling you</em>. To make sure you are getting the benefit of your compilers help, <em>always compile with warnings enabled and do not accept code until it compiles without warning.</em> For <code>gcc</code> that means adding at minimum <code>-Wall -Wextra</code> to your compile string. For <code>clang</code>, <code>-Weverything</code> will do. For <code>cl.exe</code> (VS) add <code>/Wall</code>. Then read and understand the warnings. The compiler will give you the exact line where any problem occurs.</p>\n\n<p>If you are simply reading lines less than some number, you can avoid allocating pointer and just use an array of pointers, but you must keep track of the index (to avoid writing beyond the last element)</p>\n\n<p>Based on what you are attempting, it looks like you are trying to do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 1000\n\nint  main (void) {\n\n    FILE *file;\n    char text[MAX] = \"\", \n        *lines[MAX] = {NULL};\n    int i=0, j;\n\n    file = fopen (\"/home/Documents/xxxxxx_HW01/text.txt\", \"r\");\n\n    if(file == NULL) {\n        printf(\"cannot open file\");\n        exit(1);\n    }\n\n    while (i &lt; MAX &amp;&amp; fgets (text, sizeof(text), file)!= NULL){\n        size_t len = strlen (text);        /* get length */\n        if (len &amp;&amp; text[len-1] == '\\n')    /* check if last is '\\n' */\n            text[--len] = 0;               /* overwrite with '\\0' */\n        else {  /* line too long - character remain unread */\n            fprintf (stderr, \"error: line exceeds %d chars.\\n\", MAX - 2);\n            exit (EXIT_FAILURE);\n        }\n        lines[i] = strdup(text);\n        i++;\n    }\n\n    for (j = 0; j &lt; i; j++) {\n        printf (\"line[%3d]  %s\\n\", j, lines[j]);\n        free (lines[j]);    /* don't forget to free memory */\n    }\n\n    fclose(file);\n\n    return 0;   /* main() is type int and therefore returns a value */\n}\n</code></pre>\n\n<p><strong>note:</strong> you should also remove the trailing <code>'\\n'</code> included at the end of <code>text</code> by <code>fgets</code> -- example given above.</p>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8570994, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ovdk-A9i8RQ/AAAAAAAAAAI/AAAAAAAAB98/ZEmjxDlxmv0/photo.jpg?sz=128", "display_name": "Daniele Pe&#231;anha", "link": "https://stackoverflow.com/users/8570994/daniele-pe%c3%a7anha"}, "is_accepted": false, "score": 0, "last_activity_date": 1506480590, "creation_date": 1506480590, "answer_id": 46438734, "question_id": 46438477, "link": "https://stackoverflow.com/questions/46438477/why-am-i-getting-a-segmentation-fault-when-reading-in-a-text-file-and-storing-in/46438734#46438734", "title": "Why am I getting a Segmentation Fault when reading in a text file and storing into an array?", "body": "<p>From what I remember sizeof will give you the size of the object type, and the fgets expects the maximum amount of chars you want to read, so you probably don\u2019t want to use sizeof there.\nAlso you are increasing the index of your array indefinitely which is most likely going to give you a out of bounds exception.</p>\n\n<p>Summing up I think you should try passing directly the size you set on your array on the fgets, and if you dont need the file to be all stored at the same time, just don\u2019t increase i and handle each chunk in one iteration of the loop. If you do need the file all stored at once, make sure you have an array as big as your file size and perhaps use fread like <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fread.htm\" rel=\"nofollow noreferrer\">this</a></p>\n"}], "owner": {"reputation": 5, "user_id": 8679969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UJMPGCMfsMY/AAAAAAAAAAI/AAAAAAAAADI/uL93DNqwxVA/photo.jpg?sz=128", "display_name": "Sidney H", "link": "https://stackoverflow.com/users/8679969/sidney-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "closed_date": 1506494569, "accepted_answer_id": 46438675, "answer_count": 2, "score": 0, "last_activity_date": 1506487908, "creation_date": 1506478718, "last_edit_date": 1506481375, "question_id": 46438477, "link": "https://stackoverflow.com/questions/46438477/why-am-i-getting-a-segmentation-fault-when-reading-in-a-text-file-and-storing-in", "closed_reason": "Duplicate", "title": "Why am I getting a Segmentation Fault when reading in a text file and storing into an array?", "body": "<p>I need to read in a line of text, store it into an array.  When I compile the program, it works but then when I execute it, I receive a segmentation fault. I have read other questions and tried what they have suggested and nothing seems to be working. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid main() {\n\nFILE *file;\nchar text[10000000], *line[10000000];\nint i=0;\n\nfile = fopen(\"/home/Documents/xxxxxx_HW01/text.txt\", \"r\");\nif(file == NULL) {\n    printf(\"cannot open file\");\n    exit(1);\n}\n\nwhile (i&lt; 10000 &amp;&amp; fgets(text, sizeof(text), file)!= NULL){\n    line[i] = strdup(text);\n    i++;\n}\n\nfor (i=0; text[i] != '\\0'; i++)\n    printf(\"%c \", text[i]);\n\nfclose(file);\n\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "external", "interrupt", "stm32"], "comments": [{"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1506514661, "post_id": 46438464, "comment_id": 79850944, "body": "Where does <code>MX_GPIO_Init()</code> get called from?  When you set a breakpoint on <code>EXT15_10_IRQHandler()</code>, does the breakpoint get hit when you press the button?"}, {"owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "reply_to_user": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1506529988, "post_id": 46438464, "comment_id": 79861619, "body": "Oh yeah! I am sorry! It is called in the main() function, I shortened this code by removing a lot of stuff that is not related to this issue and I must have removed MX_GPIO_Init() by an accident, it is included in the actual code though. I&#39;m going to edit this to avoid confusion."}, {"owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "reply_to_user": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1506530545, "post_id": 46438464, "comment_id": 79861885, "body": "I noticed in the debugger that in memory view, the bit in PR (Pending Register) for the corresponding pins is 0 at all times and when I try setting it to 1, it remains 0."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "edited": false, "score": 0, "creation_date": 1506554116, "post_id": 46442230, "comment_id": 79872581, "body": "Thank you for the response. I added the volatile prefix and it did not help, for whatever reason the PR (Pending Register) bits for the two pins I&#39;m trying to use for EXTI, doesn&#39;t reset to 1, and I guess it should be set to 1 in order to wait for the External Interrupt Event. I will look deeper into the debugger and see if I find anything else."}, {"owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "edited": false, "score": 0, "creation_date": 1506648520, "post_id": 46442230, "comment_id": 79915860, "body": "You are absolutely right about reading &#39;GPIO-&gt;IDR&#39; ! on top of it I had my &#39;PUPDR&#39; set to pullup for both pins and expecting it to read &#39;1&#39; but I needed to read &#39;0&#39; from &#39;GPIO-&gt;IDR&#39; when button pressed in order for it to work. I tried setting bits in &#39;EXTI-&gt;SWIER&#39; and the ButtonFlag switched to 1 successfully, although still no luck with running it using External Interrupt. I will dig a little deeper and see what else is wrong..."}, {"owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "edited": false, "score": 0, "creation_date": 1506820752, "post_id": 46442230, "comment_id": 79971117, "body": "I found it!! It was <code>SYSCFG-&gt;EXTICR[x]</code> where <code>x</code> is supposed to be  2 for <code>EXTICR3</code>. I kept digging through the debugger and I noticed that I was setting bits in <code>EXTICR4</code> as opposed to <code>EXTICR3</code>. Just like I mentioned, it was a simple rookie mistake. Thanks for your help! I actually learned a ton by trying to solve this issue."}], "tags": [], "owner": {"reputation": 6873, "user_id": 5131711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z5oP7.png?s=128&g=1", "display_name": "followed Monica to Codidact", "link": "https://stackoverflow.com/users/5131711/followed-monica-to-codidact"}, "is_accepted": true, "score": 3, "last_activity_date": 1506589277, "last_edit_date": 1506589277, "creation_date": 1506498418, "answer_id": 46442230, "question_id": 46438464, "link": "https://stackoverflow.com/questions/46438464/external-interrupt-setup-on-stm32l1-doesnt-run-isr/46442230#46442230", "title": "External Interrupt Setup on STM32L1 doesn&#39;t run ISR", "body": "<p>You have to declare the flags as <code>volatile</code>. That's a hint to the compiler that the variable can change any time, independent of the normal program flow.</p>\n\n<pre><code>volatile bool RightButtonFlag = 0;\nvolatile bool LeftButtonFlag = 0;\n</code></pre>\n\n<p>When there is no <code>volatile</code> there, the compiler can assume that the flags never change in the main loop, and optimize it that way, that the variables will be loaded only once, before the loop.</p>\n\n<p>Declaring them <code>volatile</code> only in the scope of the interrupt handler does no good, because the optimization will still take place in <code>main()</code>, where the <code>volatile</code> declaration is not visible.</p>\n\n<p>It is good practice to move the declaration to a header file, and include that header everywhere the variable is referenced. Then the compiler can check that the types are indeed compatible.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The interrupt handler makes little sense. You set EXTI to detect a <em>falling</em> edge, then check if the input is <em>high</em>. Checking the GPIO data register is not reliable anyway, due to the bouncing effect of mechanical buttons.</p>\n\n<p>You should rather check <code>EXTI-&gt;PR</code> in the handler, and reset the pending bit with a simple assignment instead of <code>|=</code>, otherwise you could accidentally clear another pending bit too.</p>\n\n<pre><code>void EXTI15_10_IRQHandler(void)\n{\n    if(EXTI-&gt;PR &amp; EXTI_PR_PR10){\n        RightButtonFlag = 1;\n        EXTI-&gt;PR = EXTI_PR_PR10;\n    }\n\n    if(EXTI-&gt;PR &amp; EXTI_PR_11){\n        LeftButtonFlag = 1;\n        EXTI-&gt;PR = EXTI_PR_PR11;\n    }\n}\n</code></pre>\n\n<p>You can still check somewhere if <code>GPIOC-&gt;IDR</code> actually reflects the button state, to eliminate possible hardware problems.</p>\n\n<p>You can also try setting <code>EXTI-&gt;SWIER</code> from the debugger, or in the code, to simulate a button press.</p>\n"}], "owner": {"reputation": 35, "user_id": 8679648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wRXRq.jpg?s=128&g=1", "display_name": "Pawel_Sparky", "link": "https://stackoverflow.com/users/8679648/pawel-sparky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 46442230, "answer_count": 1, "score": 1, "last_activity_date": 1506589277, "creation_date": 1506478659, "last_edit_date": 1506534886, "question_id": 46438464, "link": "https://stackoverflow.com/questions/46438464/external-interrupt-setup-on-stm32l1-doesnt-run-isr", "title": "External Interrupt Setup on STM32L1 doesn&#39;t run ISR", "body": "<p>for 4 days now, I am struggling to set up External interrupt on my STM32 and I have gone through tons of reading and other people's code to get it. But no luck. \nI have two buttons and when pressing either one of them I expect to light up an LED, this example is only to get it working, I wanted to have something functional before proceeding and building rest of the code. \nI am sorry if the code is a little messy, but I am working on neating my coding skills. \nI've gone through manuals and datasheets but nothing seems to help. </p>\n\n<p>Here is my main.c</p>\n\n<pre><code>#include \"stm32l1xx_hal.h\"\n#include \"buttons.h\"\n\nstatic void MX_GPIO_Init(void);\n\nbool RightButtonFlag = 0;\nbool LeftButtonFlag = 0;\n\n\nint main(void)\n{\n  HAL_Init();\n  SystemClock_Config();\n  controls_Interrupt_Init();\n  MX_GPIO_Init();\n\n  while (1)\n  {\n      if(RightButtonFlag){\n          Blue_ON();\n      }\n      if(LeftButtonFlag){\n          Green_ON();\n      }\n  }\n\n}\nstatic void MX_GPIO_Init(void)\n{\n  GPIO_InitTypeDef GPIO_InitStruct;\n\n  /* GPIO Ports Clock Enable */\n  __HAL_RCC_GPIOC_CLK_ENABLE();\n\n\n  GPIO_InitStruct.Pin = GPIO_PIN_10|GPIO_PIN_11;\n  GPIO_InitStruct.Mode = GPIO_MODE_IT_FALLING;\n  GPIO_InitStruct.Pull = GPIO_PULLUP;\n  HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);\n{\n</code></pre>\n\n<p>Followed by part of stm32l1xx_it.c</p>\n\n<pre><code>#include \"stm32l1xx_hal.h\"\n#include \"stm32l1xx.h\"\n#include \"stm32l1xx_it.h\"\n#include \"buttons.h\"\n\nextern volatile uint8_t RightButtonFlag;\nextern volatile uint8_t RightButtonFlag;\n\nvoid EXTI15_10_IRQHandler(void)\n{\n    if(GPIOC-&gt;IDR &amp; GPIO_IDR_IDR_10){\n        RightButtonFlag = 1;\n        EXTI-&gt;PR |= EXTI_PR_PR10;\n    }\n\n    if(GPIOC-&gt;IDR &amp; GPIO_IDR_IDR_11){\n            LeftButtonFlag = 1;\n            EXTI-&gt;PR |= EXTI_PR_PR11;\n    }\n}\n</code></pre>\n\n<p>buttons.c </p>\n\n<pre><code>void controls_Interrupt_Init(void){\n\n    RCC-&gt;APB2ENR |= RCC_APB2ENR_SYSCFGEN; /* Enable System Configuration Register */\n\n\n    SYSCFG-&gt;EXTICR[3] |= SYSCFG_EXTICR3_EXTI11_PC; /* Set up External Interrupt for Pin 11 Port C */\n    SYSCFG-&gt;EXTICR[3] |= SYSCFG_EXTICR3_EXTI10_PC; /* Set up External Interrupt for Pin 10 Port C */\n\n    EXTI-&gt;IMR |= EXTI_IMR_MR11;\n    EXTI-&gt;IMR |= EXTI_IMR_MR10;\n\n    EXTI-&gt;FTSR  |= EXTI_FTSR_TR11; /* Falling trigger Selection Reg. Trigger 11 */\n    EXTI-&gt;FTSR  |= EXTI_FTSR_TR10; /* Falling trigger Selection Reg. Trigger 10 */\n\n    NVIC_SetPriority(EXTI15_10_IRQn,1); /* Set Interrupt priority for pins 10-15 */\n    NVIC_EnableIRQ(EXTI15_10_IRQn); /* Enable NVIC for Pins Between 10-15 */\n\n\n}\n</code></pre>\n\n<p>and buttons.h </p>\n\n<pre><code>void controls_Interrupt_Init(void);\n\n#define Blue_ON()           (HAL_GPIO_WritePin(BLUE_LED_PORT, BLUE_LED_PIN, 1))\n#define Green_ON()          (HAL_GPIO_WritePin(GREEN_LED_PORT, GREEN_LED_PIN, 1))\n</code></pre>\n\n<p>I am fairly new to coding and with my poor experience I expect to have screwed up something very simple. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1506478913, "post_id": 46438216, "comment_id": 79833601, "body": "This is a duplicate of the old issue of floating point inaccuracy.  Non-integer values are not represented exactly in floating point.  For instance, 0.01 cannot be exactly represented.  So when converting back to a string, you will sometimes see it round up or down when you don&#39;t expect it to.  The best solution is to keep everything in integers, i.e. pennies, so that you can perform exact arithmetic."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506535237, "post_id": 46438216, "comment_id": 79864283, "body": "What? No toonies? And what are these pennies of which you speak? ;)"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 7586435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0NQPK.jpg?s=128&g=1", "display_name": "xyaz", "link": "https://stackoverflow.com/users/7586435/xyaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1506477112, "creation_date": 1506477112, "answer_id": 46438274, "question_id": 46438216, "link": "https://stackoverflow.com/questions/46438216/new-at-programming-off-by-a-penny-in-c/46438274#46438274", "title": "New at programming, off by a penny? in C", "body": "<blockquote>\n  <p>(float)((int)(100 * quartreq) % (int)(100 * (dimes * .10))) / 100;</p>\n</blockquote>\n\n<p>I'm sure that changing types like float to int and vise versa can lose a some data throught the parsing part.</p>\n\n<p>example: you have a double variable set as 1.2 when you parse it to int it become 1 and not 1.2 and it won't become 1.2 when you parse it back to double.</p>\n\n<p>Do your calculations with the float type and if you want to change data type only parse it in the final result.</p>\n"}, {"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1506489223, "post_id": 46438290, "comment_id": 79836085, "body": "The actual reason is that many common values (e.g. 1/10, 2/10, 3/10, 4/10, 6/10, 7/10, 8/10, 9/10) are periodic in binary just like 1/3 is in decimal, so it would take infinite storage to store them accurately in a floating point number format, so a relatively close enough is used instead."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506492408, "post_id": 46438290, "comment_id": 79837258, "body": "@ilegami relatively close == rounding errors."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1506534898, "post_id": 46438290, "comment_id": 79864092, "body": "Not all numbers can be represented precisely in base 10 floating point either, but that doesn&#39;t stop us from using it for money. Your post wasn&#39;t so much wrong as it really say much of anything. I just clarified."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1506492496, "last_edit_date": 1506492496, "creation_date": 1506477215, "answer_id": 46438290, "question_id": 46438216, "link": "https://stackoverflow.com/questions/46438216/new-at-programming-off-by-a-penny-in-c/46438290#46438290", "title": "New at programming, off by a penny? in C", "body": "<p>Don't use float/double at all for money.  Computers are binary and use base 2 math.  Not all decimal values (base 10) can be represented precisely in base 2 floating point, causing rounding errors.  Do your math with int (or long long) representing pennies and it will be accurate up to the max value of a 32-bit signed int (millions) or 64-bit signed long long (quadrillions).</p>\n"}, {"comments": [{"owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "edited": false, "score": 0, "creation_date": 1506477291, "post_id": 46438294, "comment_id": 79833252, "body": "note you will need to use <code>#include &lt;math.h&gt;</code> in order for round to work"}], "tags": [], "owner": {"reputation": 2928, "user_id": 5927758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QmcMj.png?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/5927758/mitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1506477232, "creation_date": 1506477232, "answer_id": 46438294, "question_id": 46438216, "link": "https://stackoverflow.com/questions/46438216/new-at-programming-off-by-a-penny-in-c/46438294#46438294", "title": "New at programming, off by a penny? in C", "body": "<p>The rounding logic is not giving the correct answer. Say we have an input 123. The GST should be 15.99. However your code will give 16.00. To fix this try replacing <code>gstCost = cost * .13 + .005;</code> with <code>gstCost = (round(cost * .13 * 100) / 100);</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8679808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fff740cd6b5b73fb8d16183d4b92819?s=128&d=identicon&r=PG&f=1", "display_name": "asdfalala", "link": "https://stackoverflow.com/users/8679808/asdfalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1506492546, "answer_count": 3, "score": 0, "last_activity_date": 1506492496, "creation_date": 1506476638, "last_edit_date": 1506477695, "question_id": 46438216, "link": "https://stackoverflow.com/questions/46438216/new-at-programming-off-by-a-penny-in-c", "closed_reason": "Duplicate", "title": "New at programming, off by a penny? in C", "body": "<p>Hi so I'm struggling to figure out what's wrong with my code. I'm really new at this so bear with me. Comments might be a little messy atm. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    double cost, gstCost, newCost; // initial cost, cost of gst by itself, new cost after gst \n    int loonies, quarters, dimes, nickels, pennies; // used for quantity of coins\n    float loonreq, quartreq, dimereq, nickreq, penreq; //  cost required after deduction of the corresponding coin\n\n    printf(\"Please enter the amount to be paid: $\");\n    scanf(\"%lf\", &amp;cost); // scanf allows to input an amount as a double (\"%lf\")\n\n    gstCost = cost * .13 + .005; // .13 for gst and add 0.005 to round up or down\n    printf(\"GST: %.2lf\\n\", gstCost);\n\n    newCost = cost + gstCost;\n    printf(\"Balance owing: $%.2lf\\n\", newCost); // original cost + gst cost \n\n    loonies = newCost; // loonies will output as integer when cost has decimals \n    printf(\"Loonies required: %d\", loonies);\n    if (loonies == 0) // == used to compare equality\n        loonies = 1; // if loonies = 0, loonreq will be infinite causing code to crash and stop\n\n    loonreq = (float)((int)(100 * newCost) % (100 * loonies)) / 100; // casting int and * 100 on float values for modulo since it can only calculate for integer value\n    printf(\", balance owing $%.2f\\n\", loonreq); // %.2f shows a float with 2 decimal places \n\n    quarters = 100 * loonreq / 25; // 100*loonreq allows the code to find how many quarters by dividing by 25\n    printf(\"Quarters required: %d\", quarters);\n    if (quarters == 0)\n        quarters = 1;\n\n    quartreq = (float)((int)(100 * loonreq) % (int)(100 * (quarters * .25))) / 100;\n    printf(\", balance owing $%.2f\\n\", quartreq);\n\n    dimes = 100 * quartreq / 10;\n    printf(\"Dimes required: %d\", dimes);\n    if (dimes == 0)\n        dimes = 1;\n\n    dimereq = (float)((int)(100 * quartreq) % (int)(100 * (dimes * .10))) / 100;\n    printf(\", balance owing $%.2f\\n\", dimereq);\n\n    nickels = 100 * dimereq / 5;\n    printf(\"Nickels required: %d\", nickels);\n    if (nickels == 0)\n        nickels = 1;\n\n    nickreq = (float)((int)(100 * dimereq) % (int)(100 * (nickels * .05))) / 100;\n    printf(\", balance owing $%.2f\\n\", nickreq);\n\n    pennies = 100 * nickreq / 1;\n    printf(\"Pennies required: %d\", pennies);\n    if (pennies == 0)\n        pennies = 1;\n\n    penreq = (float)((int)(100 * nickreq) % (int)(100 * (pennies * .01))) / 100;\n    printf(\", balance owing $%.2f\\n\", penreq);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>When I run this code on Visual Studio, I get the correct outputs for certain inputs like <strong>8.68</strong> but when I submit this file through PuTTY for my professor, it tests it for me and I get an incorrect balance (a penny off) after dimes deducted. When I put in a value like <strong>76.54</strong>, I'm a penny off after the deduction of loonies. Inputting a value like <strong>76.76</strong>, I get the correct output. I don't exactly know what's happening. My professor looked at my code and said it's because of type changes? and recommended that I use this method instead, example </p>\n\n<pre><code>dimes = (balance / 100) / 0.1;\nbalance = (int)(balance) % 10;\n</code></pre>\n\n<p>I'm not sure how to use this method though. </p>\n\n<p>Edit: I need to use the modulus operator and casting for this assignment. gcc is used when I submit on PuTTy.</p>\n"}, {"tags": ["c", "postfix-mta", "infix-notation"], "owner": {"reputation": 11, "user_id": 5266859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac7860dd7ec30f693483ba2bc4a43b5?s=128&d=identicon&r=PG&f=1", "display_name": "Thanasukan Noklang", "link": "https://stackoverflow.com/users/5266859/thanasukan-noklang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535442669, "creation_date": 1506476380, "last_edit_date": 1535442513, "question_id": 46438187, "link": "https://stackoverflow.com/questions/46438187/infix-to-postfix-conversion-in-c-programming-abc-de", "title": "Infix to postfix conversion in C programming (A^B^C)/ (D*E)", "body": "<p>I'm coding in C that converts infix expression to postfix. I have run it without errors but it is not giving me the right output. The output is suppose to be in form:</p>\n\n<p><code>(A^B^C)/(D*E)</code> = <code>ABC^^DE*/</code> but the output is <code>AB^C^DE*/</code></p>\n\n<p>The convert method is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;ctype.h&gt;\n#define SIZE 50\nchar s[SIZE];\nint top=-1;      \npush(char elem)\n{                       \n    s[++top]=elem;\n}\n\nchar pop()\n{                      \n    return(s[top--]);\n}\n\nint pr(char elem)\n{                 \n    switch(elem)\n    {\n    case '#': return 0;\n    case '(': return 1;\n    case '+':\n    case '-': return 2;\n    case '*':\n    case '/': return 3;\n    }\n}\n\nvoid main()\n{                        \n    char infx[50],pofx[50],ch,elem;\n    int i=0,k=0;\n    clrscr();\n    printf(\"\\n\\nRead the Infix Expression ? \");\n    scanf(\"%s\",infx);\n    push('#');\n    while( (ch=infx[i++]) != '\\0')\n    {\n    if( ch == '(') push(ch);\n    else\n    if(isalnum(ch)) pofx[k++]=ch;\n      else\n    if( ch == ')')\n    {\n        while( s[top] != '(')\n      pofx[k++]=pop();\n        elem=pop(); \n    }\n    else\n    {       \n        while( pr(s[top]) &gt;= pr(ch) )\n      pofx[k++]=pop();\n        push(ch);\n    }\n    }\n    while( s[top] != '#')     \n  pofx[k++]=pop();\n    pofx[k]='\\0';          \n    printf(\"\\n\\nGiven Infix Expn: %s  Postfix Expn: %s\\n\",infx,pofx);\n    getch();\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "g++"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8639153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d580fb1f064057e3be965a719d4661?s=128&d=identicon&r=PG&f=1", "display_name": "JDollars", "link": "https://stackoverflow.com/users/8639153/jdollars"}, "is_accepted": false, "score": 0, "last_activity_date": 1506477762, "last_edit_date": 1506477762, "creation_date": 1506477362, "answer_id": 46438303, "question_id": 46438180, "link": "https://stackoverflow.com/questions/46438180/c-print-array-of-char/46438303#46438303", "title": "C - print array of char *", "body": "<p>All pointers in your array are getting set to the same char * (line) which is getting overwritten every iteration in the loop leaving you with an array of char pointers that has the same pointer in each index of the array and that pointer points to a location in memory that has been written over and over until you overwrite it with the last item in the dictionary. To do this the way you are wanting to line would need to use a different char * for each iteration in your loop.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 6302727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vxtpi.png?s=128&g=1", "display_name": "crlsktr", "link": "https://stackoverflow.com/users/6302727/crlsktr"}, "edited": false, "score": 0, "creation_date": 1506479095, "post_id": 46438308, "comment_id": 79833646, "body": "Thank you for the answer, I&#39;ll have to take a closer look to the doc. I&#39;m too noob to give an upvote but I&#39;ll give it someday."}], "tags": [], "owner": {"reputation": 3635, "user_id": 3477070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170877f680edb71f1fafb6001c46e4f0?s=128&d=identicon&r=PG&f=1", "display_name": "isp-zax", "link": "https://stackoverflow.com/users/3477070/isp-zax"}, "is_accepted": true, "score": 2, "last_activity_date": 1506477381, "creation_date": 1506477381, "answer_id": 46438308, "question_id": 46438180, "link": "https://stackoverflow.com/questions/46438180/c-print-array-of-char/46438308#46438308", "title": "C - print array of char *", "body": "<p>Take a look at description of <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>, which tells that it'll only allocate buffer if line passed is NULL. It'll only be NULL the first time and consequently will reuse the buffer or increase it if line doesn't fit. </p>\n\n<p>If you want it to allocate separate buffers for every word, do</p>\n\n<pre><code>printf(\"%s\", line);\nwords[count] =(unsigned char*) line;\nline = NULL;\ncount++;\n</code></pre>\n\n<p>and remove the </p>\n\n<pre><code>if (line)\n    free(line);\n</code></pre>\n\n<p>but don't forget to free all non-NULL entries of words somewhere later on.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 7586435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0NQPK.jpg?s=128&g=1", "display_name": "xyaz", "link": "https://stackoverflow.com/users/7586435/xyaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1506479310, "last_edit_date": 1506479310, "creation_date": 1506477401, "answer_id": 46438312, "question_id": 46438180, "link": "https://stackoverflow.com/questions/46438180/c-print-array-of-char/46438312#46438312", "title": "C - print array of char *", "body": "<p>to print a whole array/vector you need to iterate through all the items.\nexample:\nyou have a vector of 5 units, to print all of it you need to</p>\n\n<pre><code>//Pseudo code\nfor(int i = 0;i &lt; vectorex;i++)\n    {\n     print vectorex[i];\n    }\n</code></pre>\n\n<p>this way it will iterate throught all anwser's and print it all</p>\n"}], "owner": {"reputation": 85, "user_id": 6302727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vxtpi.png?s=128&g=1", "display_name": "crlsktr", "link": "https://stackoverflow.com/users/6302727/crlsktr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "accepted_answer_id": 46438308, "answer_count": 3, "score": 1, "last_activity_date": 1506479310, "creation_date": 1506476331, "question_id": 46438180, "link": "https://stackoverflow.com/questions/46438180/c-print-array-of-char", "title": "C - print array of char *", "body": "<p>I am trying to read thousands of words and print only the first 15 but the only word that it prints is the very last one in the array where I stored the words.</p>\n\n<p>g++ --version\ng++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3</p>\n\n<p>From the following answer I derived the code below to read a file line by line\n<a href=\"https://stackoverflow.com/questions/3501338/c-read-file-line-by-line#answer-3501681\">C read file line by line</a></p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nunsigned char *words[25143];\n\nint readDictionary(void)\n{\n    FILE * fp;\n    char * line = NULL;\n    size_t len = 0;\n        ssize_t read;\n        int count = 0;\n\n\n    fp = fopen(\"dictionary.txt\", \"r\");\n    if (fp == NULL)\n        {\n        printf(\"failed to open file\");\n        exit(EXIT_FAILURE);\n        }\n    while ((read = getline(&amp;line, &amp;len, fp)) != -1) {\n                printf(\"%s\", line);\n                words[count] =(unsigned char*) line;\n                count++;\n    }\n\n    fclose(fp);\n    if (line)\n        free(line);\n\n}\n\nint main (void)\n{\n\n  readDictionary();\n  printf(\"we just read the dictionary\\n\");\n  for (int k= 0; k &lt;15; k++)\n  {\n        printf(\"%d      %s\",k,(unsigned char*)words[k]);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "csv", "binaryfiles"], "comments": [{"owner": {"reputation": 898, "user_id": 3443596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01bc2c1a62bc4080906a1b194c538646?s=128&d=identicon&r=PG&f=1", "display_name": "eventHandler", "link": "https://stackoverflow.com/users/3443596/eventhandler"}, "edited": false, "score": 0, "creation_date": 1506472257, "post_id": 46437576, "comment_id": 79832154, "body": "What are those libraries you included? Please give it some format, and paste the libraries included."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1506474699, "post_id": 46437576, "comment_id": 79832722, "body": "Some problems are: you don&#39;t check the return value of <code>read</code> so we don&#39;t know if it works. The <code>size</code> you get is the number of bytes in the file, not the number of <code>float</code> values or structs, so the for-loop will run too many times. You also read into <code>time_pt</code> but byte swap <code>data</code> which is a different variable. You also seem to read 4 bytes (1 <code>float</code>) but then use 2 <code>floats</code> from <code>time_pt</code>."}, {"owner": {"reputation": 1, "user_id": 8679598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xa_h-kkxvk4/AAAAAAAAAAI/AAAAAAAABGw/CWcAY6U-6bI/photo.jpg?sz=128", "display_name": "Caitlyn96", "link": "https://stackoverflow.com/users/8679598/caitlyn96"}, "edited": false, "score": 0, "creation_date": 1506476473, "post_id": 46437576, "comment_id": 79833105, "body": "I have tried following your suggestions but it is still not the right output.  The first data set is altitude is 32500 and airspeed is 0."}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1506476878, "post_id": 46437576, "comment_id": 79833171, "body": "I wonder why people use C for csv processing while there&#39;s Python &amp; AWK."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1506668047, "post_id": 46437576, "comment_id": 79920960, "body": "@KarimManaouil, wtf????  Why not writing operating systems in python or awk, or compilers, for example?  In the beginning was C..."}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1507086472, "post_id": 46437576, "comment_id": 80066689, "body": "@LuisColorado i don&#39;t think CSV  could be part of an OS or a compiler. AWK was just invented and improved for that kind of thing. Then why not using it ?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1507177914, "post_id": 46437576, "comment_id": 80108725, "body": "@KarimManaouil CSV allow values to be double quote escaped, backslash escaped, allow space before and after commas.  Although the language is regular (can be matched by a regexp) is better to fully parse it.  But for simple CSVs, you can suffice with awk.  Anyway, if you prefer to write python code, then good luck, but don&#39;t be critic with C in a forum tagged C, it&#39;s you who are not in the proper forum.  Let&#39;s solve our problems with the tools we select."}], "owner": {"reputation": 1, "user_id": 8679598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xa_h-kkxvk4/AAAAAAAAAAI/AAAAAAAABGw/CWcAY6U-6bI/photo.jpg?sz=128", "display_name": "Caitlyn96", "link": "https://stackoverflow.com/users/8679598/caitlyn96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 665, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506476402, "creation_date": 1506471313, "last_edit_date": 1506476402, "question_id": 46437576, "link": "https://stackoverflow.com/questions/46437576/binary-file-to-csv-file-multiple-variables", "title": "binary file to csv file multiple variables", "body": "<p>I am trying to write a program to take input from a binary file full of data points of alternating Altitude and Airspeed numbers and convert that to a csv file.  The data needs to be byteswapped from big endian to little endian as well.  When I run my code I get the same number for all of them and it is not the right number either for printing out, and it will not print anything but weird greek letters to the csv file.  Can somebody tell me what I am doing wrong? </p>\n\n<p>Code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\nunion byteswap\n{\n    char c_num[4];\n    float f_num;\n};\nchar temp;\nunion byteswap data;\nint size;\nint i;\nstruct time\n{\n    //float time_s;\n    float Alt_ft;\n    float AS_knots;\n    //float mach_number;\n};\nstruct time time_pt;\nFILE *fp;\nfp = fopen(\"C:\\\\Users\\\\daxon\\\\eclipse-workspace\\\\Flight-Data-Proj\\\\Alt_AS.dat\", \"r+b\");\n\nFILE *csv;\ncsv = fopen(\"C:\\\\Users\\\\daxon\\\\eclipse-workspace\\\\Flight-Data-Proj\\\\Flight-Data.csv\", \"w+\");\n\nif (fp== NULL)\n{\n    fprintf(stderr, \"Data file would not open\");\n    return(-1);\n}\n\nfseek(fp, 0, SEEK_END);\nsize=ftell(fp);\nfprintf(stdout, \"The size of the file is %d\\n\", size);\nfseek(fp,0,SEEK_CUR);\n\n    for (i = 0; i&lt;= feof(fp); i++)\n    {\n        fread(&amp;time_pt, 8, 1, fp);\n        fprintf(stdout, \"Uswapped is %d\\n\", time_pt);\n\n        //byte swap\n        temp = data.c_num[0];\n        data.c_num[0] = data.c_num[3];\n        data.c_num[3]= temp;\n        temp = data.c_num[1];\n        data.c_num[1] = data.c_num[2];\n        data.c_num[2]= temp;\n\n        printf(\"Alt is %f,  AS is %f\\n\", time_pt.Alt_ft, time_pt.AS_knots);\n        fwrite(&amp;time_pt.Alt_ft, 4, 1, csv);\n        fwrite(&amp;time_pt.AS_knots, 4, 1, csv);\n    }\n\nfclose(fp);\nfclose(csv);\nfprintf(stdout, \"Done reading files\\n\");\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>output:</p>\n\n<p>The size of the file is 143208\nUswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Uswapped is 1986426061</p>\n\n<p>Alt is 1168552030029638100000000000000000.000000,  AS is 0.000000</p>\n\n<p>Done reading files</p>\n\n<p>I have tried multiple ways to split the file into two struct variables and this has gotten me the closest. </p>\n\n<p>Edit: Now it only repeats the for loop 17 times before completing when the file is much bigger.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 4, "creation_date": 1506471459, "post_id": 46437563, "comment_id": 79831991, "body": "You need to start from the very beginning. = and == are completely different an unrelated. == is used for comparisons, and = is used for assignments. And defining FALSE to be 1 will screw up everything."}, {"owner": {"reputation": 534, "user_id": 6683120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/d54Aq.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6683120/robert"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1506471645, "post_id": 46437563, "comment_id": 79832031, "body": "I think you don&#39;t understand my question, i know what = and == are for, i m just telling why this thing happen with inline operator, with a normal if i don&#39;t need to use == for b."}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1506472001, "post_id": 46437563, "comment_id": 79832113, "body": "By the way you can use <code>stdbool.h</code> and <code>bool a = false</code>. You don&#39;t need need define &amp; typedef anymore."}, {"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 1, "creation_date": 1506472961, "post_id": 46437563, "comment_id": 79832311, "body": "define FALSE 1???"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1506475479, "post_id": 46437563, "comment_id": 79832896, "body": "Please also read <a href=\"https://stackoverflow.com/questions/18767458/advantage-of-ternary-operator-over-if-else?noredirect=1&amp;lq=1\">Advantage of ternary operator over if else?</a> and see that the answer is None. It just makes code harder to understand - like in this case."}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 0, "creation_date": 1506495773, "post_id": 46437563, "comment_id": 79839010, "body": "<code>gcc -Wall</code> doesn&#39;t complain anything about either version. Perhaps this is not exactly the same code that you wanted to ask about."}], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 8667875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xNmc9e2imkA/AAAAAAAAAAI/AAAAAAAAAdc/vCrkcvf8s_Q/photo.jpg?sz=128", "display_name": "Aman Singh", "link": "https://stackoverflow.com/users/8667875/aman-singh"}, "reply_to_user": {"reputation": 534, "user_id": 6683120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/d54Aq.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6683120/robert"}, "edited": false, "score": 0, "creation_date": 1506472119, "post_id": 46437638, "comment_id": 79832131, "body": "Awesome! Could you please accept the answer?"}, {"owner": {"reputation": 654, "user_id": 8667875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xNmc9e2imkA/AAAAAAAAAAI/AAAAAAAAAdc/vCrkcvf8s_Q/photo.jpg?sz=128", "display_name": "Aman Singh", "link": "https://stackoverflow.com/users/8667875/aman-singh"}, "reply_to_user": {"reputation": 534, "user_id": 6683120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/d54Aq.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6683120/robert"}, "edited": false, "score": 0, "creation_date": 1506472662, "post_id": 46437638, "comment_id": 79832239, "body": "If this post is incorrect, please consider leaving a comment on how it could be improved. Thanks :)"}], "tags": [], "owner": {"reputation": 654, "user_id": 8667875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xNmc9e2imkA/AAAAAAAAAAI/AAAAAAAAAdc/vCrkcvf8s_Q/photo.jpg?sz=128", "display_name": "Aman Singh", "link": "https://stackoverflow.com/users/8667875/aman-singh"}, "is_accepted": true, "score": -2, "last_activity_date": 1506472441, "last_edit_date": 1506472441, "creation_date": 1506471773, "answer_id": 46437638, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool/46437638#46437638", "title": "Strange things happen with bool?", "body": "<p>This type of syntax is called a ternary operator. They are generally used to perform simple expressions, or assign things to ONE variable based on a condition, rather than handle assignment logic with two variables.</p>\n\n<p>This is why you can't have both <code>a = TRUE</code> and <code>b = TRUE</code> in the ternary operator. You should only have values or things that return values in there.</p>\n\n<p>e.g.</p>\n\n<pre><code>BOOL result = (num == 21 ? TRUE : FALSE);\nBOOL a = result;\nBOOL b = !result;\n</code></pre>\n\n<p>Read more on ternary operators on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\" rel=\"nofollow noreferrer\">Mozilla's documentation</a></p>\n\n<p>Also, slightly unrelated to your actual question, but still an issue you should fix; <a href=\"https://stackoverflow.com/users/2192494/lee-daniel-crocker\">Lee Daniel Crocker</a> made a good point. <code>FALSE</code> shouldn't really be defined as <code>1</code>, as it is usually defined as <code>0</code> in most programming contexts. <code>TRUE</code> is defined as any number other than <code>0</code>, i.e. <code>!FALSE</code>. Hence, try doing this to define your TRUE and FALSE:</p>\n\n<pre><code>#define FALSE 0\n#define TRUE !FALSE\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 830, "user_id": 8678309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391e8c24d30dbbf9d4489d3ba39b0822?s=128&d=identicon&r=PG", "display_name": "boriaz50", "link": "https://stackoverflow.com/users/8678309/boriaz50"}, "is_accepted": false, "score": 0, "last_activity_date": 1506820618, "last_edit_date": 1506820618, "creation_date": 1506472020, "answer_id": 46437664, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool/46437664#46437664", "title": "Strange things happen with bool?", "body": "<p>It is equivalent to</p>\n\n<pre><code>((num == 21) ? a = TRUE : b) = TRUE;\n</code></pre>\n\n<p>Thus, you are assigning to the result of expression, but not to the variable. Therefore compiler demands <code>==</code> operator.</p>\n\n<p>Use</p>\n\n<pre><code>(num == 21) ? a = TRUE : (b = TRUE);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1506475711, "post_id": 46437685, "comment_id": 79832959, "body": "How about <code>bool result = (num == 21);</code> and skip the ternary operator?"}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1506479060, "post_id": 46437685, "comment_id": 79833635, "body": "Yes it is the same, it was just to fit with the example :)"}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1506479148, "post_id": 46437685, "comment_id": 79833655, "body": "@BoPersson did you put -1 just because of it?"}], "tags": [], "owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "is_accepted": false, "score": 0, "last_activity_date": 1506479689, "last_edit_date": 1506479689, "creation_date": 1506472230, "answer_id": 46437685, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool/46437685#46437685", "title": "Strange things happen with bool?", "body": "<p>Here is a better code using <code>stdbool.h</code> library. <code>=</code> &amp; <code>==</code> are direfferent ! The first one is used for asignation and the second one for a comparing</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main(void){\n\nbool a = false;\nbool b = false;\n\nint num = 21; // random nr lol\n\nbool result = (num == 21) ? true : false;\na = result;\nb = !result;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": false, "score": 1, "last_activity_date": 1506472632, "creation_date": 1506472632, "answer_id": 46437732, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool/46437732#46437732", "title": "Strange things happen with bool?", "body": "<p>It's tricky at first. But there is a simple reason why GCC complains.</p>\n\n<p><code>(num == 21) ? a = TRUE : b = TRUE;</code></p>\n\n<p>Here, the colon operator takes precedence over equal to operator. So effectivey, this statement is evaluated as</p>\n\n<p><code>((num == 21) ? a = TRUE : b) = TRUE;</code></p>\n\n<p>which in turn is the same as</p>\n\n<p><code>TRUE = TRUE;</code></p>\n\n<p>So the compiler rightly complains that lvalue required as left operand of assignment. However, if you use parenthesis to correct the affinity, it won't complain.</p>\n\n<p><code>(num == 21) ? (a = TRUE) : (b = TRUE);</code> //No compiler error</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1506473760, "creation_date": 1506473760, "answer_id": 46437877, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool/46437877#46437877", "title": "Strange things happen with bool?", "body": "<p>If you were trying to do this:</p>\n\n<pre><code>(num == 21) ? a = TRUE : b = TRUE;\n</code></pre>\n\n<p>The syntax is invalid due to operator precedence.  The ternary operator <code>?:</code> has higher precedence than the assignment operator <code>=</code>.  So the expression above is the same as:</p>\n\n<pre><code>((num == 21) ? a = TRUE : b) = TRUE;\n</code></pre>\n\n<p>This is invalid syntax because you can't have an expression like this on the left side of an assignment.</p>\n\n<p>You need to add parenthesis to get the behavior you want.</p>\n\n<pre><code>(num == 21) ? a = TRUE : (b = TRUE);\n</code></pre>\n"}], "owner": {"reputation": 534, "user_id": 6683120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/d54Aq.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/6683120/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1506826783, "accepted_answer_id": 46437638, "answer_count": 5, "score": -5, "last_activity_date": 1506830055, "creation_date": 1506471201, "last_edit_date": 1506830055, "question_id": 46437563, "link": "https://stackoverflow.com/questions/46437563/strange-things-happen-with-bool", "closed_reason": "Not suitable for this site", "title": "Strange things happen with bool?", "body": "<p>Why with variable <code>a</code> do I need to use the symbol <code>=</code>, but with variable <code>b</code> GCC tells me to use <code>==</code>? Should they all being used with <code>=</code>, am I wrong or what? If I use a normal <code>if</code>, this thing doesn't happen.</p>\n\n<p>P.S: I know about the <code>&lt;stdbool.h&gt;</code>.</p>\n\n<p>Thanks everyone.</p>\n\n<pre><code>#define FALSE 0\n#define TRUE  1\n\ntypedef int BOOL;\n\nint main()\n{\n    BOOL a;\n    BOOL b;\n\n    int num = 21; // random number\n\n    (num == 21) ? a = TRUE : b = TRUE;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "fork"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8679613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26ac74ce1704c271c11ab9ad1e1cff79?s=128&d=identicon&r=PG&f=1", "display_name": "A K", "link": "https://stackoverflow.com/users/8679613/a-k"}, "edited": false, "score": 0, "creation_date": 1506610888, "post_id": 46437541, "comment_id": 79899773, "body": "And if I wanted to delete them from the bottom up (So delete all of 2&#39;s child processes then kill 1) How would I do that? Would I use SIGKILL? I tried running SIGKILL twice but it only prints &quot;killed&quot; once and then exits the program and I&#39;m not sure how to verify it did what I wanted."}], "tags": [], "owner": {"reputation": 834, "user_id": 744300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27f5a1a7ecdd65cda7916ebed1bed543?s=128&d=identicon&r=PG", "display_name": "Conrad Parker", "link": "https://stackoverflow.com/users/744300/conrad-parker"}, "is_accepted": false, "score": 0, "last_activity_date": 1506471956, "last_edit_date": 1506471956, "creation_date": 1506470962, "answer_id": 46437541, "question_id": 46437461, "link": "https://stackoverflow.com/questions/46437461/c-help-creating-a-process-tree/46437541#46437541", "title": "C Help creating a Process Tree", "body": "<p>Your main for loop is run in all forks, which doesn't match your diagram.\nWhat you actually want is that your if statements have the same structure as your tree:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\nint main()\n{\n    printf(\"root %d\\n\", getpid());\n\n    if (fork())\n    {\n        fork();\n    } else {\n        if (fork())\n        {\n            if (fork())\n            {\n                fork();\n            }\n        }\n    }\n\n    printf(\"child pid %d    parent pid %d\\n\", getpid(), getppid());\n\n    fflush(stdout);\n\n    sleep(10);\n\n    return 0;\n}\n</code></pre>\n\n<p>This gives the desired result:</p>\n\n<pre><code>root 5140\nchild pid 5140    parent pid 377\nchild pid 5147    parent pid 5141\nchild pid 5149    parent pid 5141\nchild pid 5146    parent pid 5140\nchild pid 5148    parent pid 5141\nchild pid 5141    parent pid 5140\n</code></pre>\n\n<p>NB. the <code>sleep()</code> is to ensure none of the processes exit before their children, at which point their children would be reparented to have <code>ppid</code> = 1 (init).</p>\n"}], "owner": {"reputation": 23, "user_id": 8679613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26ac74ce1704c271c11ab9ad1e1cff79?s=128&d=identicon&r=PG&f=1", "display_name": "A K", "link": "https://stackoverflow.com/users/8679613/a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1044, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506471956, "creation_date": 1506470202, "question_id": 46437461, "link": "https://stackoverflow.com/questions/46437461/c-help-creating-a-process-tree", "title": "C Help creating a Process Tree", "body": "<p>I am trying to create a process tree, but here is what my output is right now: <a href=\"https://gyazo.com/a71f4e095b69080a6d6a11edd2c0df27\" rel=\"nofollow noreferrer\">https://gyazo.com/a71f4e095b69080a6d6a11edd2c0df27</a>\nThe problem is I want to make it look like the diagram I drew on the right, but can't seem to figure out how. I am printing each child processes parent ID and then after doing so I am going to delete them starting with 2, then 1 (by sending a SIGKILL signal after 5 seconds).\nHow can I make the process tree look like the desired result? Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\nint main()\n{\n    int root, t1, t2, i;\n\n    root = getpid();\n    printf(\"root %d\\n\", root);\n    for (i = 1; i &lt; 3; i++)\n    {\n        t1 = fork();\n        //printf(\"%d\\n\", t1);\n        if(t1!=0)\n        {\n        t2 = fork();\n        }\n        if (t1 !=0 &amp;&amp; t2 != 0)\n        {\n            break;\n        }\n\n        printf(\"child pid %d    parent pid %d\\n\", getpid(), getppid());\n    }\n    sleep(10);\n\n    return 0;\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "arrays", "mpi"], "comments": [{"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1506470525, "post_id": 46437458, "comment_id": 79831802, "body": "Are you trying to implement parallel sorting?"}, {"owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "reply_to_user": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1506474000, "post_id": 46437458, "comment_id": 79832584, "body": "No, it is a simple exercice to sum the elements of a vector in parallel."}], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 3, "last_activity_date": 1506472705, "creation_date": 1506472705, "answer_id": 46437744, "question_id": 46437458, "link": "https://stackoverflow.com/questions/46437458/how-to-send-a-integer-array-via-mpi-send/46437744#46437744", "title": "How to send a integer array via MPI_Send?", "body": "<p>The issue is that <code>sub_vec</code> is not allocated on non zero rank.\nIt is up to you to do that (e.g. MPI does not allocate the receive buffer).</p>\n\n<p>the receive part should look like</p>\n\n<pre><code>if (my_rank != 0) {\n    sub_vec = (int *)malloc(n_over_p * sizeof(int));    \n    MPI_Recv(sub_vec, n_over_p, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n}\n</code></pre>\n\n<p>As you wrote, the natural way is via <code>MPI_Scatter()</code> (and once again, it is up to you to allocate the receive buffer before starting the scatter.</p>\n"}], "owner": {"reputation": 557, "user_id": 2309495, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fcf9763d7d12689c1bf54d77d6dee114?s=128&d=identicon&r=PG", "display_name": "Alexandre Krabbe", "link": "https://stackoverflow.com/users/2309495/alexandre-krabbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7973, "favorite_count": 0, "accepted_answer_id": 46437744, "answer_count": 1, "score": 1, "last_activity_date": 1506714828, "creation_date": 1506470185, "last_edit_date": 1506714828, "question_id": 46437458, "link": "https://stackoverflow.com/questions/46437458/how-to-send-a-integer-array-via-mpi-send", "title": "How to send a integer array via MPI_Send?", "body": "<p>I'm trying to create a program in regular C that divides an integer array equally between any amount of process. For debugging purposes I'm using an integer array with 12 numbers and only 2 process so that the master process will have [1,2,3,4,5,6] and the slave1 will have [7,8,9,10,11,12]. However I'm getting an error saying: <code>MPI_ERR_BUFFER: invalid buffer pointer</code>. </p>\n\n<p>After some research I found out that there is a function that does that (<code>MPI_Scatter</code>). Unfortunately, since I'm learning MPI the implementation is restricted to <code>MPI_Send</code> and <code>MPI_Recv</code> only. Anyway, both <code>MPI_Send</code> and <code>MPI_Recv</code> use a void*, and I'm sending a int* so it should work. Can anyone point out what am I doing wrong? Thank you.</p>\n\n<pre><code>int* create_sub_vec(int begin, int end, int* origin);\nvoid print(int my_rank, int comm_sz, int n_over_p, int* sub_vec);\n\nint main(void){\n\n    int comm_sz;\n    int my_rank;\n\n    int vec[12] = {1,2,3,4,5,6,7,8,9,10,11,12};\n    int* sub_vec = NULL;\n    int n_over_p;\n\n    MPI_Init(NULL, NULL);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;comm_sz);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);    \n\n    n_over_p = 12/comm_sz;\n    printf(\"Process %d calcula n_over_p = %d\\n\", my_rank, n_over_p);\n\n    if (my_rank != 0) {\n        MPI_Recv(sub_vec, n_over_p, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n        print(my_rank, comm_sz, n_over_p, sub_vec);\n\n    } else {\n\n        printf(\"Distribuindo dados\\n\");\n        for (int i = 1; i &lt; comm_sz; i++) {\n            sub_vec = create_sub_vec(i*n_over_p, (i*n_over_p)+n_over_p, vec);\n            MPI_Send(sub_vec, n_over_p, MPI_INT, i, 0, MPI_COMM_WORLD);\n        }\n        printf(\"Fim da distribuicao de dados\\n\");\n\n        sub_vec = create_sub_vec(0, n_over_p, vec);\n\n        print(my_rank, comm_sz, n_over_p, sub_vec);\n    }\n\n    MPI_Finalize();\n    return 0;\n\n}\n\nint* create_sub_vec(int begin, int end, int* origin){\n    int* sub_vec;\n    int size;\n    int aux = 0;\n    size = end - begin;\n    sub_vec = (int*)malloc(size * sizeof(int));\n    for (int i = begin; i &lt; end; ++i) {\n        *(sub_vec+aux) = *(origin+i);\n        aux += 1;\n    }\n    return  sub_vec;\n}\n\nvoid print(int my_rank, int comm_sz, int n_over_p, int* sub_vec){\n    printf(\"Process %d out of %d received sub_vecotr: [ \", my_rank, comm_sz);\n    for (int i = 0; i &lt; n_over_p; ++i)\n    {\n        printf(\"%d, \", *(sub_vec+i));\n    }\n    printf(\"]\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "xcode", "pointers", "printf"], "answers": [{"tags": [], "owner": {"reputation": 1037, "user_id": 6342463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/STRPB.jpg?s=128&g=1", "display_name": "Jabberwock", "link": "https://stackoverflow.com/users/6342463/jabberwock"}, "is_accepted": false, "score": 1, "last_activity_date": 1506469970, "creation_date": 1506469970, "answer_id": 46437440, "question_id": 46437418, "link": "https://stackoverflow.com/questions/46437418/printf-producing-warnings-when-printing-memory-location-yet-still-compiles-and-r/46437440#46437440", "title": "Printf producing warnings when printing memory location yet still compiles and runs in xcode", "body": "<p>You have declared p as a pointer to an int.  If you want to print the value it is pointing to (a[0], or 1, in this case), you need <code>*p</code>, not <code>p</code> as the parameter to printf()</p>\n"}, {"comments": [{"owner": {"reputation": 835, "user_id": 2788177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f77456e4009ae4c0c61f6d4b70d6d995?s=128&d=identicon&r=PG&f=1", "display_name": "Pwrcdr87", "link": "https://stackoverflow.com/users/2788177/pwrcdr87"}, "edited": false, "score": 0, "creation_date": 1506470238, "post_id": 46437441, "comment_id": 79831746, "body": "Your first point I should have noticed.  Thanks!  But what I&#39;m trying to do is to print up the memory address of the first index in the array.  That is where I&#39;m experiencing this warning.  If I do print <code>*p</code> it only produces &#39;1&#39; which is the value of the first index and not the memory location."}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "reply_to_user": {"reputation": 835, "user_id": 2788177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f77456e4009ae4c0c61f6d4b70d6d995?s=128&d=identicon&r=PG&f=1", "display_name": "Pwrcdr87", "link": "https://stackoverflow.com/users/2788177/pwrcdr87"}, "edited": false, "score": 0, "creation_date": 1506470483, "post_id": 46437441, "comment_id": 79831795, "body": "@Pwrcdr87 look out to my edit. <code>%p</code> and not %d anymore"}, {"owner": {"reputation": 835, "user_id": 2788177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f77456e4009ae4c0c61f6d4b70d6d995?s=128&d=identicon&r=PG&f=1", "display_name": "Pwrcdr87", "link": "https://stackoverflow.com/users/2788177/pwrcdr87"}, "edited": false, "score": 1, "creation_date": 1506470742, "post_id": 46437441, "comment_id": 79831847, "body": "Yeah I noticed your update after I submitted my response.  Appreciate it much!  That did the job.  I have a reference for C &#39;printf&#39; formats but didn&#39;t see <code>%p</code> in the list of available formats.  Thanks for that.  I found a list of codes that covers <code>%p</code> as well.  That&#39;s the fix and the answer.  Thanks again!"}], "tags": [], "owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "is_accepted": true, "score": 2, "last_activity_date": 1506470679, "last_edit_date": 1506470679, "creation_date": 1506469995, "answer_id": 46437441, "question_id": 46437418, "link": "https://stackoverflow.com/questions/46437418/printf-producing-warnings-when-printing-memory-location-yet-still-compiles-and-r/46437441#46437441", "title": "Printf producing warnings when printing memory location yet still compiles and runs in xcode", "body": "<pre><code>#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>using <code>\"\"</code> is for when you create your own .h file</p>\n\n<p>Moreover, p is pointer you have to derefenrence it <code>printf(\"Address of first element of a = %d\\n\", *p);</code></p>\n\n<p>Please, compile your .c file using flags <code>gcc -W -Wall -Wextra file.c</code></p>\n\n<p><strong>edit</strong> : If you're looking to print the adress of the pointer and not the value of what it points to,  look out for the <code>%p</code> flag in printf : <code>printf(\"Address of first element of a = %p\\n\", p);</code></p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1506470440, "post_id": 46437456, "comment_id": 79831792, "body": "Why do we must cast the pointer into (void *) if i do  <code>printf(&quot;adress : %p\\n&quot;, p)</code> it will already print the adress no?"}, {"owner": {"reputation": 835, "user_id": 2788177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f77456e4009ae4c0c61f6d4b70d6d995?s=128&d=identicon&r=PG&f=1", "display_name": "Pwrcdr87", "link": "https://stackoverflow.com/users/2788177/pwrcdr87"}, "reply_to_user": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1506471245, "post_id": 46437456, "comment_id": 79831948, "body": "I&#39;m interested in the response to @NicolasGuerin question as well."}, {"owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "edited": false, "score": 0, "creation_date": 1506471481, "post_id": 46437456, "comment_id": 79831996, "body": "I&#39;ve tried to print the adress of <code>p</code> and <code>(void *)p</code> and they are the same. So you don&#39;t need to cast into <code>(void *)</code> as soon as it is already a pointer."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1506472001, "post_id": 46437456, "comment_id": 79832112, "body": "Yes you do need the cast, even though it&#39;s already a pointer and even though it appears to work on your computer.  If you don&#39;t have the cast, you have &quot;undefined behavior&quot;, which means you can get away with it on some computers but on others demons will fly out of your nose.  I&#39;m not kidding about the demons."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 0, "last_activity_date": 1506472251, "last_edit_date": 1506472251, "creation_date": 1506470183, "answer_id": 46437456, "question_id": 46437418, "link": "https://stackoverflow.com/questions/46437418/printf-producing-warnings-when-printing-memory-location-yet-still-compiles-and-r/46437456#46437456", "title": "Printf producing warnings when printing memory location yet still compiles and runs in xcode", "body": "<p>The <code>printf</code> format code for pointers is <code>%p</code>.  To print the address of the first element of the array, you should use <code>%p</code> instead of <code>%d</code>, and you must also cast the pointer to <code>void *</code>:</p>\n\n<pre><code>printf(\"Address of first element of a = %p\\n\", (void *)p);\n</code></pre>\n\n<p>On many computers (including, I think, all computers for which Xcode can generate executables), pointers are passed to variadic functions exactly the same way that some size of integer is, which is why you got the \"expect result\".  But it is still incorrect to print pointers with %d instead of %p, which is why Xcode complains.</p>\n\n<p>(On nearly all computers, you can get away with leaving out the cast to <code>void *</code>, but it is still formally incorrect to do so.  It is treated with the same severity as any other kind of type mismatch between the <code>printf</code> format string and the arguments: <em>undefined behavior</em>, meaning that the program is allowed to work just fine but is also allowed to behave <em>arbitrarily wrong</em> - the stock joke is \"the compiler is allowed to make demons fly out of your nose\".)</p>\n"}], "owner": {"reputation": 835, "user_id": 2788177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f77456e4009ae4c0c61f6d4b70d6d995?s=128&d=identicon&r=PG&f=1", "display_name": "Pwrcdr87", "link": "https://stackoverflow.com/users/2788177/pwrcdr87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 46437441, "answer_count": 3, "score": 0, "last_activity_date": 1506472251, "creation_date": 1506469840, "question_id": 46437418, "link": "https://stackoverflow.com/questions/46437418/printf-producing-warnings-when-printing-memory-location-yet-still-compiles-and-r", "title": "Printf producing warnings when printing memory location yet still compiles and runs in xcode", "body": "<p>I'm new to C programming and am trying to work on pointers and arrays.  I have a rookie question I'd like to ask you all to help me understand.</p>\n\n<p>I'm using Xcode to run a very simple C program that I'm writing.  To help me understand how this works I'm starting off with a very basic program and slowly build onto it to help learn. Here is my sample code:</p>\n\n<pre><code>#include \"stdio.h\"\n\nint main(){\n\n    int a[10] = {1,2,3,4,5,6,7,8,9,10};\n    int *p = &amp;a[0];\n\n    printf(\"Address of first element of a = %d\\n\", p);\n    printf(\"Number of elements in array = %lu\\n\", sizeof(a) / sizeof(int));\n\n}\n</code></pre>\n\n<p>In Xcode, the first <code>printf</code> line produces a warning stating that \"Format specifies type 'int' but the argument has type 'int *'.  </p>\n\n<p>I'd appreciate it if I can get some clarity as to why this is occurring and what is the proper way for me to code this?  This still compiles and running it produces the expect result.  So while the results may be correct, I personally need to understand what the fix for these warnings are.</p>\n\n<p>Much appreciated!</p>\n"}, {"tags": ["c", "arrays", "stdin", "fgets", "feof"], "comments": [{"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 1, "creation_date": 1506491993, "post_id": 46437241, "comment_id": 79837062, "body": "Please note that <code>feof()</code> does NOT say whether you are at the end of the file; It says whether you&#39;ve encountered EOF yet or not. It is possible to be <i>exactly</i> at the end of a file and yet not have attempted to go past it, and in that case <code>feof()</code> will return <code>0</code> until such time as you attempt to read one more byte (and fail)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1506495287, "post_id": 46437241, "comment_id": 79838769, "body": "Consider using <code>getline</code> like <a href=\"https://stackoverflow.com/a/9171511/841108\">here</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1506516703, "post_id": 46437241, "comment_id": 79852287, "body": "Is there a symbol or string of characters in the file that will enable your code to distinguish between where the <i>letters</i> end, and the <i>words</i> begin?"}], "answers": [{"tags": [], "owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "is_accepted": false, "score": 1, "last_activity_date": 1506499196, "last_edit_date": 1506499196, "creation_date": 1506474180, "answer_id": 46437928, "question_id": 46437241, "link": "https://stackoverflow.com/questions/46437241/how-do-i-read-the-contents-of-a-file-in-c-and-store-it-into-an-array-using-fgets/46437928#46437928", "title": "How do I read the contents of a file in C and store it into an array using fgets()?", "body": "<p>One way to store the lines with characters or words is to store them in an array of pointers to arrays - lines,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLET 500\n#define MAXLINES 1000\n\nint main()\n{\n    char *lptr;\n    // Array with letters from a given line\n    char letters[MAXLET];\n    // Array with pointers to lines with letters\n    char *lineptr[MAXLINES];\n\n    // Length of current array\n    unsigned len = 0;\n    // Total number of lines\n    int nlines = 0;\n\n    // Read lines from stdin and store them in \n    // an array of pointers\n    while((fgets(letters,MAXLET,stdin))!=NULL)\n    {\n        len = strlen(letters);\n        letters[len-1] = '\\0';\n        lptr = (char*) malloc(len);\n        strcpy(lptr, letters);\n        lineptr[nlines++]=lptr;\n    }\n\n    // Print lines\n    for (int i = 0; i &lt; nlines; i++)\n        printf(\"%s\\n\", lineptr[i]);\n\n    // Free allocated memory\n    for (int i = 0; i &lt; nlines; i++)\n        free(lineptr[i]);\n}\n</code></pre>\n\n<p>In the following, pointer to every line from <code>stdin</code> is stored in <code>lineptr</code>. Once stored, you can access and manipulate each of the lines - in this simple case I only print them one by one but the examples of simple manipulation are shown later on. At the end, program frees the previously allocated memory. It is a good practice to free the allocated memory once it is no longer in use. </p>\n\n<p>The process of storing a line consists of getting each line from the <code>stdin</code>, collecting it's length with <code>strlen</code>, stripping it's <code>newline</code> character by replacing it with <code>\\0</code> (optional), allocating memory for it with <code>malloc</code>, and finally storing the pointer to that memory location in <code>lineptr</code>. During this process the program also counts the number of input lines.</p>\n\n<p>You can implement this sequence for both of your inputs - chars and words. It will result in a clean, ready to use input. You can also consider moving the line collection into a function, that may require making <code>lineptr</code> type arrays global. Let me know if you have any questions.</p>\n\n<p>Thing to remember is that <code>MAXLET</code> and especially <code>MAXLINES</code> may have to be increased for a given dataset (<code>MAXLINES 1000</code> literally assumes you won't have more than a 1000 lines). </p>\n\n<p>Also, while on Unix and Mac this program allows you to read from a file as it is by using <code>$ prog_name &lt; in_file</code> it can be readily modified to read directly from files.</p>\n\n<p>Here are some usage examples - <code>lineptr</code> stores pointers to each line (array) hence the program first retrieves the pointer to a line and then it proceeds as with any array:</p>\n\n<pre><code>// Print 3rd character of each line\n// then substitute 2nd with 'a'\nchar *p;\nfor (int i = 0; i &lt; nlines; i++){\n    p = lineptr[i];\n    printf(\"%c\\n\", p[2]);\n    p[1] = 'a';\n}\n\n// Print lines\nfor (int i = 0; i &lt; nlines; i++)\n    printf(\"%s\\n\", lineptr[i]);\n\n// Swap first and second element\n// of each line\nchar tmp;\nfor (int i = 0; i &lt; nlines; i++){\n    p = lineptr[i];\n    tmp = p[0];\n    p[0] = p[1];\n    p[1] = tmp;\n}\n\n// Print lines\nfor (int i = 0; i &lt; nlines; i++)\n    printf(\"%s\\n\", lineptr[i]);\n</code></pre>\n\n<p>Note that these examples are just a demonstration and assume that each line has at least 3 characters. Also, in your original input the characters are separated by a space - that is not necessary, in fact it's easier without it. </p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1506498713, "creation_date": 1506498713, "answer_id": 46442310, "question_id": 46437241, "link": "https://stackoverflow.com/questions/46437241/how-do-i-read-the-contents-of-a-file-in-c-and-store-it-into-an-array-using-fgets/46442310#46442310", "title": "How do I read the contents of a file in C and store it into an array using fgets()?", "body": "<p><code>value = fgets(stdin);</code> is a terrible expression! You don't respect at all the syntax of the <code>fgets</code> function. My man page says</p>\n\n<blockquote>\n  <p><code>char *\n       fgets(char * restrict str, int size, FILE * restrict stream);</code></p>\n</blockquote>\n\n<p>So here, as you do not pass the stream at the right place, you probably get an underlying io error and fgets returns <code>NULL</code>, which is converted to the <code>int</code> 0 value. And then the next loop is just a no-op.</p>\n\n<p>The correct way to read a line with fgets is:</p>\n\n<pre><code>if (NULL == fgets(letters, sizeof(letters), stdin) {\n    // indication of end of file or error\n    ...\n}\n// Ok letters contains the line...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1506515987, "creation_date": 1506515987, "answer_id": 46448142, "question_id": 46437241, "link": "https://stackoverflow.com/questions/46437241/how-do-i-read-the-contents-of-a-file-in-c-and-store-it-into-an-array-using-fgets/46448142#46448142", "title": "How do I read the contents of a file in C and store it into an array using fgets()?", "body": "<p>You said you want to read from a data file. If so, you should open the file.</p>\n\n<pre><code>FILE *fin=fopen(\"filename.txt\", \"r\");\nif(fin==NULL)\n{\n    perror(\"filename.txt not opened.\");\n}\n</code></pre>\n\n<p>In your input file, the first few lines have single alphabets each separated by a space.</p>\n\n<p>If you want to store each of these letters into the <code>letters</code> character array, you could load each line with the following loop.</p>\n\n<pre><code>char c;\nint i=0;\nwhile(fscanf(fin, \"%c\", &amp;c)==1 &amp;&amp; c!='\\n')\n{\n    if(c!=' ')\n    {\n        letters[i++]=c;\n    }\n}\n</code></pre>\n\n<p>This will only store the letters and is <i> not </i> a string as there is no <code>\\0</code> character.<br></p>\n\n<p>Reading the words which are at the bottom may be done with <code>fgets()</code>.</p>\n\n<p>Your usage of the <code>fgets()</code> function is wrong.</p>\n\n<p>Its prototype is</p>\n\n<pre><code>char *fgets(char *str, int n, FILE *stream);\n</code></pre>\n\n<p>See <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Note that <code>fgets()</code> will store the trailing newline(<code>\\n</code>) into string as well. You might want to remove it like</p>\n\n<pre><code>str[strlen(str)-1]='\\0';\n</code></pre>\n\n<p>Use <code>fgets()</code> to read the words at the bottom into a character array and replace the <code>\\n</code> with a <code>\\0</code>.</p>\n\n<p>and do</p>\n\n<pre><code>fgets(letters, sizeof(letters, fin);\n</code></pre>\n\n<p>You use <code>stdin</code> instead of the <code>fin</code> here when you want to accept input from the keyboard and store into <code>letters</code>.</p>\n\n<p>Note that <code>fgets()</code> will store the trailing newline(<code>\\n</code>) into <code>letters</code> as well. You might want to remove it like</p>\n\n<pre><code>letters[strlen(letters)-1]='\\0';\n</code></pre>\n\n<p><hr>\nJust saying, <code>letters[i]</code> will be a character and not a string.</p>\n\n<pre><code>scanf(\"%1s\", &amp;letters[i]);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>scanf(\"%c\", &amp;letters[i]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1506521383, "last_edit_date": 1506521383, "creation_date": 1506520607, "answer_id": 46449792, "question_id": 46437241, "link": "https://stackoverflow.com/questions/46437241/how-do-i-read-the-contents-of-a-file-in-c-and-store-it-into-an-array-using-fgets/46449792#46449792", "title": "How do I read the contents of a file in C and store it into an array using fgets()?", "body": "<p>The code in your post does not appear to match your stated goals, and indicates you have not yet grasp the proper application of the functions you are using.<br>\nYou have expressed an idea describing what you want to do, but the steps you have taken (at least those shown) will not get you there. Not even close.    </p>\n\n<p>It is always good to have a map in hand to plan to plan your steps.  An algorithm is a kind of software map. Before you can plan your steps though, you need to know where you are going.  </p>\n\n<p>Your stated goals:  </p>\n\n<pre><code>1) Open and read a file into lines.    \n2) Store the lines, somehow. (using fgets(,,)?)     \n3) Use some lines as content to search though.  \n4) Use other lines as objects to search for  \n</code></pre>\n\n<p>Some questions to answer:  </p>\n\n<p>a) How is the search content distinguished from the strings to search\n   for?<br>\n       b) How is the search content to be stored?<br>\n       c) How are the search words to be stored?<br>\n       d) How will the comparison between content and search word be done?<br>\n       e) How many lines in the file?  (<em><a href=\"http://www.dreamincode.net/forums/topic/34543-counting-lines-in-a-file/\" rel=\"nofollow noreferrer\">example</a></em>)<br>\n       f) Length of longest line?  (<em><a href=\"http://www.dreamincode.net/forums/topic/183768-getting-number-of-lines-and-length-of-longest-line-in-text-file/\" rel=\"nofollow noreferrer\">discussion and example</a></em>) (e &amp; f used to create storage)<br>\n       g) How is fgets() used. (maybe a google search: <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">How to use fgets</a></em>)<br>\n       h) Are there things to be aware of when using feof()?  (<em><a href=\"https://stackoverflow.com/a/8094723/645128\">discussion and examaple feof</a></em>)<br>\n       i) Why is my input not right after the second call to scanf? (<em><a href=\"https://stackoverflow.com/a/5240807/645128\">answer</a></em>)</p>\n\n<p>Finish identifying and crystallizing the list of items in your goals, then answer these (and maybe other) questions. At that point you will be ready to start identifying the steps to get there. </p>\n"}], "owner": {"reputation": 45, "user_id": 7589774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dfb52c37ada628512893e8da1033e3c8?s=128&d=identicon&r=PG&f=1", "display_name": "McLovinIt", "link": "https://stackoverflow.com/users/7589774/mclovinit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2093, "favorite_count": 0, "accepted_answer_id": 46448142, "answer_count": 4, "score": 0, "last_activity_date": 1506521383, "creation_date": 1506468472, "question_id": 46437241, "link": "https://stackoverflow.com/questions/46437241/how-do-i-read-the-contents-of-a-file-in-c-and-store-it-into-an-array-using-fgets", "title": "How do I read the contents of a file in C and store it into an array using fgets()?", "body": "<p>So I need to create a word search program that will read a data file containing letters and then the words that need to be found at the end \nfor example:</p>\n\n<p>f a q e g g e e e f</p>\n\n<hr>\n\n<p>o e q e r t e w j o</p>\n\n<hr>\n\n<p>t e e w q e r t y u</p>\n\n<hr>\n\n<p>government</p>\n\n<hr>\n\n<p>free</p>\n\n<p>and the list of letters and words are longer but anyway I need to save the letters into an array and i'm having a difficult time because it never stores the correct data. here's what I have so far</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nint value;\nchar letters[500];\n\nwhile(!feof(stdin))\n{\n   value = fgets(stdin);\n\n   for(int i =0; i &lt; value; i++)\n   {\n      scanf(\"%1s\", &amp;letters[i]);\n   }\n\n   for(int i=0; i&lt;1; i++)\n   {\n      printf(\"%1c\", letters[i]);\n   }\n}\n}\n</code></pre>\n\n<p>I also don't know how I am gonna store the words into a separate array after I get the chars into an array. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 2, "creation_date": 1506468314, "post_id": 46437203, "comment_id": 79831257, "body": "So, if <code>deck[c]</code> matching <code>deck[i+1]</code>, you decide to re-randomize <code>deck[i]</code>? What does that fix? You need to rerandomize the guy you are testing, and also, you need to then reset <code>c</code> to <code>0</code> and start from the beginning after you rerandomize a guy. Also this is not an efficient way of shuffling the deck, you might want to look up the knuth shuffle."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1506468628, "post_id": 46437203, "comment_id": 79831341, "body": "@ChrisBeck should I should make c = 0 after getting out the inner loop and compare deck[c] == deck[i]?"}, {"owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "edited": false, "score": 0, "creation_date": 1506468683, "post_id": 46437203, "comment_id": 79831353, "body": "You set <code>deck[i]</code> and then you are matching it with <code>deck[i+1]</code> which is not set yet. Why? Also looping once may not ensure you do not have duplicates. I agree with Chris on this being inefficient."}, {"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 1, "creation_date": 1506468758, "post_id": 46437203, "comment_id": 79831377, "body": "<a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle</a>"}, {"owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "reply_to_user": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 0, "creation_date": 1506468909, "post_id": 46437203, "comment_id": 79831411, "body": "@JeffMercado Nice, I didn&#39;t know that had a name."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1506470659, "post_id": 46437203, "comment_id": 79831834, "body": "<a href=\"https://stackoverflow.com/questions/6127503/shuffle-array-in-c\">stackoverflow.com/questions/6127503/shuffle-array-in-c</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1506470780, "post_id": 46437203, "comment_id": 79831859, "body": "in theory your way of doing it may be very slow. For the last card you need , say, 14 (its the only card left) so you have to keep calling <code>rnd</code> until you get 14, which might not happen for a long time. Better is to shuffle the array"}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506469454, "post_id": 46437253, "comment_id": 79831569, "body": "Doesn&#39;t the deck[c] == deck[I] give an infinite loop? So should I put the c = -1; outside the if statement?"}, {"owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "reply_to_user": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506469654, "post_id": 46437253, "comment_id": 79831626, "body": "No, it&#39;s comparing the item at c with the random number you just generated.   If it&#39;s the same, then you want to try another number and reset the loop variable.  It has to be -1 because the first thing that&#39;s going to happen when it loops is the c++, so the next time around c will be zero."}, {"owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "reply_to_user": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506469839, "post_id": 46437253, "comment_id": 79831666, "body": "It might actually be more clear to decrement <code>i</code> by one and then <code>break</code> out of the inner loop.  Then you wouldn&#39;t have write that line <code>deck[i] = (rand() % SIZE);</code> twice.  The <code>if</code> block would just consist of <code>i--; break;</code>"}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506470111, "post_id": 46437253, "comment_id": 79831713, "body": "I tried the code you linked and I got duplicates and if you do I-- how will you get to the 51th index? I am a little confused"}, {"owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "reply_to_user": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506470259, "post_id": 46437253, "comment_id": 79831747, "body": "Oh, you really don&#39;t want to bother with the case where c == i.  That&#39;s actually a huge bug.  I&#39;ll fix it."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1506470930, "post_id": 46437253, "comment_id": 79831888, "body": "In any case, it&#39;s totally the wrong approach. Just fill the array with 0..51 and shuffle it."}, {"owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1506471441, "post_id": 46437253, "comment_id": 79831986, "body": "@LeeDanielCrocker: It&#39;s not wrong, it&#39;s just not very good.  It works perfectly fine for a small array like this."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506471852, "post_id": 46437253, "comment_id": 79832068, "body": "Thanks @MattGregory , it works well am going to run it in eclipses and go step by step through the code, so I understand it better."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1506472125, "post_id": 46437253, "comment_id": 79832134, "body": "Even for a small array, this approach wastes a lot of time and a lot of random numbers. Think about the last one, for example: It&#39;s already generated every number except, say, 12. Now it sits in a loop generating random numbers, checking them against all 51 others every time, until it happens to generate 12. A proper fill-and-shuffle is probably hundreds of times more efficient.  There is a time to use random-and-check-for-dups, but then you should use Floyd&#39;s algorithm and and better checking method."}], "tags": [], "owner": {"reputation": 6054, "user_id": 10577, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0BfLf.png?s=128&g=1", "display_name": "Matt Gregory", "link": "https://stackoverflow.com/users/10577/matt-gregory"}, "is_accepted": true, "score": 3, "last_activity_date": 1506470296, "last_edit_date": 1506470296, "creation_date": 1506468572, "answer_id": 46437253, "question_id": 46437203, "link": "https://stackoverflow.com/questions/46437203/why-am-i-getting-duplicates-in-my-array/46437253#46437253", "title": "Why am I getting duplicates in my array?", "body": "<p>You can't try merely once for the random number in your inner for loop.  After you generate it, you have to check all the previously generated items again to make sure you didn't generate the same random number as another item.  This would do the trick (assuming SIZE = 52):</p>\n\n<pre><code>for(i=0; i &lt; SIZE; i++){\n    deck[i] = (rand() % SIZE);\n    for(c= 0; c &lt; i; c++ ){\n        if(deck[c] == deck[i]){\n            // Try another number\n            i--;\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>That said, it's not a very fast solution (it could potentially never end).  It's better to create an array of numbers 0 to 51 and then shuffle them by swapping two elements at a time.  I'm not going to write that for you, but it's a standard way of doing it.</p>\n"}, {"comments": [{"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1506552807, "post_id": 46437653, "comment_id": 79872254, "body": "In the future I will do this, as you did make valid reasons why I shouldn&#39;t do it the way I had it before"}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 2, "last_activity_date": 1506471901, "creation_date": 1506471901, "answer_id": 46437653, "question_id": 46437203, "link": "https://stackoverflow.com/questions/46437203/why-am-i-getting-duplicates-in-my-array/46437653#46437653", "title": "Why am I getting duplicates in my array?", "body": "<p>Totally the wrong approach. You don't want random numbers; you want precisely the numbers 0 to 51, in random order. To do this, fill the array with the values 0..51, and then <em>shuffle</em> it properly:</p>\n\n<pre><code>for (int i = 0; i &lt; 52; i += 1) deck[i] = i;\nfor (int i = 52; i &gt; 1; i -= 1) {\n    int j = rand() % i;\n    int temp = deck[j];\n    deck[j] = deck[i-1];\n    deck[i-1] = temp;\n}\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 46437253, "answer_count": 2, "score": 1, "last_activity_date": 1506471901, "creation_date": 1506468187, "question_id": 46437203, "link": "https://stackoverflow.com/questions/46437203/why-am-i-getting-duplicates-in-my-array", "title": "Why am I getting duplicates in my array?", "body": "<p>So I am making an array of 52 ints, I add in random numbers and make sure there all different. If there is a duplicate I would generate a new number so that current index that am at is different. Where am I going wrong?</p>\n\n<pre><code>for(i=0; i &lt; SIZE; i++){\n\n    deck[i] = (rand() % 52);\n\n    for(c= 0; c &lt;= i; c++ ){\n            if(deck[c] == deck[i+1]){\n\n            deck[i] = (rand() % 52);\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "ubuntu", "frama-c", "program-slicing"], "comments": [{"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1506618129, "post_id": 46437037, "comment_id": 79904194, "body": "As you can see in my edited message, the unfortunate answer is that, with such an old version of Frama-C (distributed in Ubuntu 14.04), you cannot use the Impact plug-in, you have to upgrade to a more recent Frama-C version."}, {"owner": {"reputation": 33, "user_id": 3948841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1f0081020cdc341c8bde4c7c995679?s=128&d=identicon&r=PG&f=1", "display_name": "shashibici", "link": "https://stackoverflow.com/users/3948841/shashibici"}, "reply_to_user": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "edited": false, "score": 0, "creation_date": 1506704840, "post_id": 46437037, "comment_id": 79941868, "body": "Thanks! I have used OPAM, and now everything is going correctly."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3948841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1f0081020cdc341c8bde4c7c995679?s=128&d=identicon&r=PG&f=1", "display_name": "shashibici", "link": "https://stackoverflow.com/users/3948841/shashibici"}, "edited": false, "score": 0, "creation_date": 1506613863, "post_id": 46470895, "comment_id": 79901781, "body": "I did the exact what you said (clicking on the statement instead of an expression) but I still cannot see the &quot;Impact analysis&quot; option. In addition, I run <code>frama-c -plugins</code> but it ends up telling me that option <code>-plugins</code> is unknown. I am wondering whether Frama-c has been installed correctly, by just using <code>apt-get install frama-c</code>."}, {"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "reply_to_user": {"reputation": 33, "user_id": 3948841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1f0081020cdc341c8bde4c7c995679?s=128&d=identicon&r=PG&f=1", "display_name": "shashibici", "link": "https://stackoverflow.com/users/3948841/shashibici"}, "edited": false, "score": 0, "creation_date": 1506614521, "post_id": 46470895, "comment_id": 79902206, "body": "You are probably using Frama-C Sodium or older, in which case <code>frama-c -help</code> should list the available plug-ins. Can you please run <code>frama-c -version</code> and tell which version you are using?"}, {"owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "reply_to_user": {"reputation": 33, "user_id": 3948841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1f0081020cdc341c8bde4c7c995679?s=128&d=identicon&r=PG&f=1", "display_name": "shashibici", "link": "https://stackoverflow.com/users/3948841/shashibici"}, "edited": false, "score": 0, "creation_date": 1506615167, "post_id": 46470895, "comment_id": 79902566, "body": "By the way, using the Frama-C Debian/Ubuntu packages is no longer the preferred way to install Frama-C (in particular, it will install an old release); the <a href=\"http://frama-c.com/install-phosphorus-20170501.html\" rel=\"nofollow noreferrer\">recommended way</a> is via OPAM, the OCaml Package Manager. It does however require more effort than using apt-get. The advantage is that you will be able to upgrade to newer releases of Frama-C."}], "tags": [], "owner": {"reputation": 6600, "user_id": 1173674, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/364e5d67e6deec7330fdd25dc205e945?s=128&d=identicon&r=PG", "display_name": "anol", "link": "https://stackoverflow.com/users/1173674/anol"}, "is_accepted": true, "score": 2, "last_activity_date": 1507792698, "last_edit_date": 1507792698, "creation_date": 1506606675, "answer_id": 46470895, "question_id": 46437037, "link": "https://stackoverflow.com/questions/46437037/how-to-install-impact-analysis-plug-in-for-frama-c-on-ubuntu-14-04/46470895#46470895", "title": "How to install Impact Analysis Plug-in for Frama-c on Ubuntu 14.04?", "body": "<p>The Impact plug-in is already installed with Frama-C since version Neon-20140301, and you do not need to do anything special to enable it, just select a statement and find the right context menu to activate it.</p>\n\n<p>From the Frama-C web page that you mentioned (highlighting in bold the relevant part):</p>\n\n<blockquote>\n  <p>Impact analysis is available through a <strong>contextual menu at each statement</strong> in the Frama-C graphical user interface.</p>\n</blockquote>\n\n<p>The left-hand side window in your screenshot contains the <em>filetree</em> (upper part, with file names and global variables/functions), and a list of plug-in panels, <em>for those plug-ins which registered their own GUI panels</em>. Note that not all plug-ins have associated panels; Impact, for instance, is a plug-in that is made available only via contextual menus.</p>\n\n<p>Looking closely at the Impact plug-in page in the Frama-C website, you'll notice that the screenshot shown does not include the part of the GUI in your screenshot, but instead, its left part is already the Cil code (omitted in your screenshot):</p>\n\n<p><a href=\"https://i.stack.imgur.com/IUQLX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IUQLX.png\" alt=\"Frama-C Impact plug-in GUI\"></a></p>\n\n<p>To obtain the popup menu indicated in the screenshot, you need to have a <em>statement</em> highlighted, not just an expression. Note that, in the screenshot, the entire <code>p = T;</code> statement is highlighted. Otherwise, the context menu will not show the \"Impact analysis\" item.</p>\n\n<p>An easy way to select a statement in the Frama-C GUI is to click <em>after</em> the semicolon. If it's an assignment statement, as in the screenshot above, you can also click on the equals sign to select the statement. However, if you click on <code>p</code> or <code>T</code> directly, you will select only the expression corresponding to those variables. Because Impact is based on statements, not expressions, it will not show its context menu in such cases.</p>\n\n<p>By the way, if you want to check if a given plug-in is available in your Frama-C installation, you can simply run <code>frama-c -plugins</code> to obtain the list of installed plug-ins, or open the Analyses panel in the GUI (menu Analyses/Analyses), which contains one entry per plug-in.</p>\n\n<p><strong>Edit</strong>: after testing with a VM, I realized that Ubuntu 14.04 (Trusty) has Frama-C Fluorine (from 2013) in its packages, which is a very old version that did have the Impact plug-in, but for some reason it was not included in the Debian package at the time (which is why you cannot use it). Frama-C is rapidly evolving, so using such an old version will result in several issues. I really recommend trying to install it via OPAM.</p>\n"}], "owner": {"reputation": 33, "user_id": 3948841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1f0081020cdc341c8bde4c7c995679?s=128&d=identicon&r=PG&f=1", "display_name": "shashibici", "link": "https://stackoverflow.com/users/3948841/shashibici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 46470895, "answer_count": 1, "score": 3, "last_activity_date": 1507792698, "creation_date": 1506466876, "last_edit_date": 1506468063, "question_id": 46437037, "link": "https://stackoverflow.com/questions/46437037/how-to-install-impact-analysis-plug-in-for-frama-c-on-ubuntu-14-04", "title": "How to install Impact Analysis Plug-in for Frama-c on Ubuntu 14.04?", "body": "<p>I installed Frama-c on Ubuntu 14.04, using the following commands:</p>\n\n<pre><code>sudo apt-get install frama-c\n</code></pre>\n\n<p>However, when I open the GUI of frama-c using the following command:</p>\n\n<pre><code>frama-c-gui\n</code></pre>\n\n<p>I cannot find the \"Impact Analysis\" plug-in on the left-hand side window. </p>\n\n<p>This figure shows currently available plug-in of my Frama-c:\n<a href=\"https://i.stack.imgur.com/eoiM0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eoiM0.png\" alt=\"Figure 1\"></a></p>\n\n<p>I also referred to the <a href=\"http://frama-c.com/impact.html\" rel=\"nofollow noreferrer\">Frama-c web page</a> but cannot find any links for me to download or install the Impact Analysis plug-in. </p>\n\n<p>How can I enable and use the Impact Analysis on Ubuntu 14.04?  </p>\n"}, {"tags": ["c", "linux", "file", "makefile"], "comments": [{"owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "edited": false, "score": 1, "creation_date": 1506466551, "post_id": 46436960, "comment_id": 79830876, "body": "Do not use screenshots of your code.  Put it in your question please.  <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-on-so-when-asking-a-question\" title=\"why not upload images of code on so when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>"}, {"owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "edited": false, "score": 0, "creation_date": 1506466711, "post_id": 46436960, "comment_id": 79830913, "body": "Remove the space between <code>$</code> and <code>(FILES)</code>.  It should be <code>$(FILES)</code>."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1506468040, "post_id": 46436960, "comment_id": 79831194, "body": "StackOverflow is about helping people fix their existing programming code. Please read  <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> , <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a> ,<a href=\"http://stackoverflow.com/help/dont-ask\">stackoverflow.com/help/dont-ask</a> ,  <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>  and take the <a href=\"http://stackoverflow.com/tour\">tour</a> before posting more Qs here. Good luck."}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 8497267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o8W1W.png?s=128&g=1", "display_name": "Nicolas Guerin", "link": "https://stackoverflow.com/users/8497267/nicolas-guerin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506468854, "last_edit_date": 1506468854, "creation_date": 1506466600, "answer_id": 46436996, "question_id": 46436960, "link": "https://stackoverflow.com/questions/46436960/how-do-i-configure-this-error-to-be-able-to-properly-do-a-makefile/46436996#46436996", "title": "How do I configure this error to be able to properly do a makefile?", "body": "<p>You can't compile a <code>.h</code> file. Include it in the main. <code>#include \"draw.h\"</code>. Also remove the space between $ and (FILES)</p>\n"}, {"tags": [], "owner": {"reputation": 38064, "user_id": 683080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ad2af1f028b1b7e76c14f83bdf26cb?s=128&d=identicon&r=PG", "display_name": "John Szakmeister", "link": "https://stackoverflow.com/users/683080/john-szakmeister"}, "is_accepted": false, "score": 0, "last_activity_date": 1506466805, "creation_date": 1506466805, "answer_id": 46437021, "question_id": 46436960, "link": "https://stackoverflow.com/questions/46436960/how-do-i-configure-this-error-to-be-able-to-properly-do-a-makefile/46437021#46437021", "title": "How do I configure this error to be able to properly do a makefile?", "body": "<p>Remove the space between <code>$</code> and <code>(FILES)</code>. It should be <code>$(FILES)</code>.  The same is true with the other variables too: there should be no space between the dollar sign and the beginning parenthesis.  It would be easier to show you a correct Makefile had you not posted it as an image.</p>\n"}], "owner": {"reputation": 1, "user_id": 5473013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6843e4cba230f9eb41348baf3eb4bbd?s=128&d=identicon&r=PG&f=1", "display_name": "john1986", "link": "https://stackoverflow.com/users/5473013/john1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "closed_date": 1506478877, "answer_count": 2, "score": -3, "last_activity_date": 1506468854, "creation_date": 1506466380, "question_id": 46436960, "link": "https://stackoverflow.com/questions/46436960/how-do-i-configure-this-error-to-be-able-to-properly-do-a-makefile", "closed_reason": "Not suitable for this site", "title": "How do I configure this error to be able to properly do a makefile?", "body": "<p>I am trying to build a makefile and this is my code. But I get the error: 'No rule to make target '(FILES)', needed by 'build'. Stop.\" Anyone know how I can fix that?</p>\n\n<p><a href=\"https://i.stack.imgur.com/0yyQL.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/0yyQL.png</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1506464904, "post_id": 46436683, "comment_id": 79830482, "body": "So, you want the arguments in arg[] to be string representations of the numbers, like &quot;2123&quot; and &quot;1233&quot; as above?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1506464951, "post_id": 46436683, "comment_id": 79830496, "body": "You are confused. Do you actually want to convert the number into its character representation (in which case you need something like sprintf())? Or does your function that takes char * know what to do with the address of an integer? Also, you need to allocate memory for arg[], and arg[0], and arg[1]."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1506465059, "post_id": 46436683, "comment_id": 79830518, "body": "Why you can&#39;t use <code>atoi</code> in the first place?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1506465160, "post_id": 46436683, "comment_id": 79830549, "body": "..becasue they are already integers?  This question needs clarification re. types, formats etc. before it gets closed as &#39;unclear&#39;."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1506466256, "post_id": 46436683, "comment_id": 79830801, "body": "A reasonable way of handlig such things is to declare a struct type to hold two integers, or two strings, (char[32], say), or both, depending on what it is you want, (which is still unclear), load it up and pass its address, (assuming that it&#39;s lifetime does not need to exceed that of your scope above, else malloc it)."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1506468438, "post_id": 46436683, "comment_id": 79831294, "body": "You don&#39;t want <code>atoi</code>.  You might want <code>itoa</code> (if it existed).  Or you can just use <code>snprintf</code>."}, {"owner": {"reputation": 45, "user_id": 4230968, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-GwKGwAjadCc/AAAAAAAAAAI/AAAAAAAAAA4/cMg8j4ZLe_Q/photo.jpg?sz=128", "display_name": "Eddy Y", "link": "https://stackoverflow.com/users/4230968/eddy-y"}, "edited": false, "score": 0, "creation_date": 1506477634, "post_id": 46436683, "comment_id": 79833320, "body": "just updated what I wanted sorry for the confusion!"}], "answers": [{"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506468315, "post_id": 46437019, "comment_id": 79831258, "body": "<i>Please</i> call it <code>itoa</code>!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506471314, "post_id": 46437019, "comment_id": 79831966, "body": "@SteveSummit .ekatsim a saw tahT.  Code amended."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1506471249, "last_edit_date": 1506471249, "creation_date": 1506466794, "answer_id": 46437019, "question_id": 46436683, "link": "https://stackoverflow.com/questions/46436683/converting-int-to-a-char-pointer/46437019#46437019", "title": "Converting Int to a char* pointer", "body": "<blockquote>\n  <p>to convert an integer to a <code>char*</code> pointer so I can properly send the argument into another function.</p>\n</blockquote>\n\n<p>Create a <em>string</em> representation of the number by calling a helper function with a <code>char</code> array via a <em>compound literal</em> to convert the number.  The string will be valid for the function and to the end of the block of code.  Adequate sizing of the string is important - leave that for a separate exercise.  Code here uses 41, enough for 128 bit <code>int</code>.  No need for a memory management via <code>malloc()/free()</code> for such a small buffer.</p>\n\n<pre><code>char *my_itoa(char *dest, int i) {\n  sprintf(dest, \"%d\", i);\n  return dest;\n}\n\n#define ITOA(n) my_itoa((char [41]) { 0 }, (n) )\n\nint main(void) {\n  int number=2123, number2= 1233;\n  printf(\"&lt;%s&gt; &lt;%s&gt;\\n\",  ITOA(number),  ITOA(number2));\n  printf(\"&lt;%s&gt; &lt;%s&gt; &lt;%s&gt;\\n\",  ITOA(INT_MIN),  ITOA(0),  ITOA(INT_MAX));\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;2123&gt; &lt;1233&gt;\n&lt;-2147483648&gt; &lt;0&gt; &lt;2147483647&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506467161, "post_id": 46437022, "comment_id": 79831017, "body": "<code>while (nb &gt; 0)</code> is a problem for negative <code>int</code> and for <code>0</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1506467303, "post_id": 46437022, "comment_id": 79831047, "body": "This function allocates heap memory to hold the resulting string. That&#39;s not necessarily a bad thing, but it needs to be documented so the caller can free the memory and avoid memory leaks."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1506467887, "post_id": 46437022, "comment_id": 79831164, "body": "@KeithThompson you&#39;re right, but to develop in C you must know how to manage the memory, and it&#39;s not the topic."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506468006, "post_id": 46437022, "comment_id": 79831187, "body": "Posted code does not compile (<code>sign</code> not declared).  <code>int_to_char(INT_MIN)</code> --&gt; <code>&quot;&quot;</code>."}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1506468201, "post_id": 46437022, "comment_id": 79831226, "body": "Yeah forgot to declare the sign variable"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1506468296, "post_id": 46437022, "comment_id": 79831251, "body": "Note that with <code>INT_MIN</code>, <code>nb *= -1;</code> is <i>undefined behavior</i>, yet usually that behaves as desired."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1506468377, "post_id": 46437022, "comment_id": 79831273, "body": "Why go to all that work?  Why not just call <code>snprintf</code>?"}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1506468507, "post_id": 46437022, "comment_id": 79831314, "body": "Yeah, I don&#39;t know how works its function. I&#39;m at Epitech and we are used to recoding everything ourselves O:) We are not lazy :D"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1506469444, "post_id": 46437022, "comment_id": 79831565, "body": "@YaatSuka: You introduced the topic of memory management when you wrote a call to <code>malloc</code>. And I&#39;d say that reinventing the wheel rather than learning how to use existing tools is a special kind of lazy. BTW, <code>nb *= -1</code> is better written as <code>nb = -nb</code>"}], "tags": [], "owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "is_accepted": false, "score": -2, "last_activity_date": 1506468219, "last_edit_date": 1506468219, "creation_date": 1506466807, "answer_id": 46437022, "question_id": 46436683, "link": "https://stackoverflow.com/questions/46436683/converting-int-to-a-char-pointer/46437022#46437022", "title": "Converting Int to a char* pointer", "body": "<p>Here is the function you\"re looking for:</p>\n\n<pre><code>char    *int_to_char(int nb)\n{\n  int   div;\n  char  *str;\n  int   i;\n  int   size;\n  int   sign;\n\n  i = -1;\n  sign = 1;\n  size = get_int_lenght(nb);\n  if (!(str = malloc(sizeof(char) * (size + 1))))\n    return (NULL);\n  if (nb &lt; 0)\n    {\n      sign *= -1;\n      nb *= -1;\n    }\n  if (nb == 0)\n    {\n      str[++i] = '0';\n      str[i + 1] = 0;\n      return (str);\n    }\n  while (nb &gt; 0)\n    {\n      str[++i] = (nb % 10) + '0';\n      nb /= 10;\n    }\n  if (sign &lt; 0)\n    str[++i] = '-';\n  str[i + 1] = 0;\n  return (my_revstr(str));\n}\n</code></pre>\n\n<p>With revstr function:</p>\n\n<pre><code>char    *my_revstr(char *str)\n{\n  int   i;\n  int   j;\n  char  tmp;\n\n  i = -1;\n  j = strlen(str);\n  while (++i &lt; j)\n    {\n      tmp = str[i];\n      str[i] = str[--j];\n      str[j] = tmp;\n    }\n  return (str);\n}\n</code></pre>\n\n<p>And get_int_lenght function:</p>\n\n<pre><code>int     get_int_lenght(int nb)\n{\n  int   size;\n\n  size = 0;\n  if (nb &lt;= 0)\n    {\n      size++;\n      nb *= -1;\n    }\n  while (nb &gt; 0)\n    {\n      size++;\n      nb /= 10;\n    }\n  return (size);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1518, "user_id": 985752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a0e637e6e686144f9c1dcc29bd8f99?s=128&d=identicon&r=PG", "display_name": "Fabel", "link": "https://stackoverflow.com/users/985752/fabel"}, "is_accepted": true, "score": 1, "last_activity_date": 1506473590, "last_edit_date": 1506473590, "creation_date": 1506472531, "answer_id": 46437720, "question_id": 46436683, "link": "https://stackoverflow.com/questions/46436683/converting-int-to-a-char-pointer/46437720#46437720", "title": "Converting Int to a char* pointer", "body": "<p>If you assume that a pointer is always at least the same size as an integer (are there any exceptions to this?) you can safely convert integers to pointers and back with these macros:</p>\n\n<pre><code>#define INT2POINTER(a) ((char*)(intptr_t)(a))\n#define POINTER2INT(a) ((int)(intptr_t)(a))\n</code></pre>\n\n<p>Or if that other function isn't your function, but a function that wants the integers as string you could use asprintf() like this:</p>\n\n<pre><code>asprintf(&amp;arg[0],\"%d\",number);\nasprintf(&amp;arg[1],\"%d\",number2);\n</code></pre>\n\n<p>But asprintf is not posix standard so it might not be available on all systems. You could use sprintf() (or snprintf() so be on the safe side) instead, but then you need to calculate the string length first.</p>\n"}], "owner": {"reputation": 45, "user_id": 4230968, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-GwKGwAjadCc/AAAAAAAAAAI/AAAAAAAAAA4/cMg8j4ZLe_Q/photo.jpg?sz=128", "display_name": "Eddy Y", "link": "https://stackoverflow.com/users/4230968/eddy-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6109, "favorite_count": 0, "accepted_answer_id": 46437720, "answer_count": 3, "score": 2, "last_activity_date": 1506477601, "creation_date": 1506464576, "last_edit_date": 1506477601, "question_id": 46436683, "link": "https://stackoverflow.com/questions/46436683/converting-int-to-a-char-pointer", "title": "Converting Int to a char* pointer", "body": "<p>I'm trying to convert an integer to a char* pointer so I can properly send the argument into another function. Is there anyway to do this without atoi?</p>\n\n<pre><code>int number=2123, number2= 1233; \nchar* arg[];\n\narg[0] = number;\narg[1] = number2;\n</code></pre>\n\n<p>**Sorry for not making things clear so basically I want the arg[0] to equal the string rep of the number, so that i can send it into a function like this: converted(char* arg); </p>\n\n<p>i would change the parameter data type but it has to be that pointer to send in. </p>\n"}, {"tags": ["c", "signal-handling"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1506464695, "post_id": 46436634, "comment_id": 79830423, "body": "See <a href=\"http://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler/\">How to avoid using <code>printf()</code> in signal handlers?</a> for basic information.  You should do as little as possible in a signal handler.  There are strict limits on which functions you may call in a signal handlier \u2014 and the <code>printf()</code> family of functions are not on the list of OK functions (neither, if it&#39;s any help, is <code>strlen()</code> \u2014 but there are good reasons for <code>printf()</code> et al and I&#39;m not aware of a good reason for <code>strlen()</code>)."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 1, "creation_date": 1506464819, "post_id": 46436634, "comment_id": 79830457, "body": "You&#39;re not &quot;nesting&quot; signal handlers, you&#39;ve installed handlers two for different signals. Also, you should look at the <code>sigsuspend(2)</code> and related calls, which allow waiting for a signal (rather than the busy-wait you&#39;ve got here with the <code>while</code> loop)."}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 6672509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8afc79ec49a7b5c692734aabd97d834?s=128&d=identicon&r=PG&f=1", "display_name": "user1048576", "link": "https://stackoverflow.com/users/6672509/user1048576"}, "is_accepted": true, "score": 1, "last_activity_date": 1506469417, "last_edit_date": 1506469417, "creation_date": 1506468339, "answer_id": 46437223, "question_id": 46436634, "link": "https://stackoverflow.com/questions/46436634/nested-signal-handlers-in-c/46437223#46437223", "title": "Nested signal handlers in C", "body": "<p>Is maybe nested <em>signals</em> actually what you meant, not nested <em>signal</em> <em>handlers</em> ? To clarify, what will happen if a SIGUSR2 is received while the handler for SIGUSR1 is executing, is that what you mean ? I assume so,</p>\n\n<p>I tested your code, with some modifications, to get the pid for the reader process into the writer process I used the args to main.</p>\n\n<p>The results I get is.</p>\n\n<ol>\n<li>First reader is quiet</li>\n<li>After receiving SIGUSR1 it starts continuously writing that it waits for SIGUSR2</li>\n<li>When receiving SIGUSR2, it prints \"reader received SIGUSR2\"</li>\n</ol>\n\n<p>This indicates that it is possible to have nested signals. However I would not say it is recommended as an intentional design.\nAs mentioned in the comments, you should do as little as possible in the signal handlers, definitely not loop in a while-loop.\nAnd as also mentioned in the comments, be very careful what functions you call in signal-context, printf() is not OK, even though it may seem to work fine.</p>\n\n<p>Tested on Linux, with the ancient kernel 3.16 and gcc 4.9</p>\n"}], "owner": {"reputation": 901, "user_id": 1030294, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a6d23ebc68b11282abea7c0d51ded53d?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/1030294/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 46437223, "answer_count": 1, "score": 0, "last_activity_date": 1506469417, "creation_date": 1506464240, "question_id": 46436634, "link": "https://stackoverflow.com/questions/46436634/nested-signal-handlers-in-c", "title": "Nested signal handlers in C", "body": "<p>I want to work on signal handlers in the context of two independent processes namely writer and reader for notification. The writer sends a first signal SIGUSR1 to the reader which loops till it hears the second signal SIGUSR2 from the writer.</p>\n\n<p>reader.c</p>\n\n<pre><code>static volatile sig_atomic_t done_waiting; \n\nint handler1(int signal){\n    done_waiting = 0;\n     while( !done_waiting ){\n            (void)fprintf(stdout, \" reader waiting for sigusr2: done_waiting = %d\\n\", done_waiting );\n    }\n(void)fprintf(stdout, \" reader received sigusr2 \\n);\n}\n\nint handler2 (int signal){\n         done_waiting = 1;\n}\n\nmain(){\n    signal(SIGUSR1, handler1);\n    signal(SIGUSR2, handler2);\n    sleep(5); // sleep till we start worker\n}\n</code></pre>\n\n<p>In writer.c, signals are sent to the reader as</p>\n\n<pre><code>main(){\n    kill(pid_reader, SIGUSR1);\n    sleep(5);\n    kill (pid_reader, SIGUSR2);\n}\n</code></pre>\n\n<p>When I execute reader first followed by worker, the program quits at the while loop. And the writer prints that \"No matching processes belonging to you were found\". </p>\n\n<p>Is nesting signal handlers allowed and if yes, is it recommended? Also, is there any another alternative mechanism for writer to notify reader that it is ready?    </p>\n"}]