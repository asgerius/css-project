[{"tags": ["c", "c-strings", "string-literals"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1499902866, "post_id": 45069163, "comment_id": 77111523, "body": "String literals are fixed at compile-time, what you ask is impossible."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1499902953, "post_id": 45069163, "comment_id": 77111540, "body": "&quot;returns them as a string literal (so no malloc and subsequent free)&quot; - that&#39;s not how it works. You can&#39;t retroactively preallocate these strings. You need to allocate them dynamically, and you need to free them dynamically."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499902964, "post_id": 45069163, "comment_id": 77111541, "body": "Your options include: memory allocation; using preallocated fixed-sized buffers; or also passing into the function enough information for the function to output the result to the device"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499903034, "post_id": 45069163, "comment_id": 77111562, "body": "&quot;Stack buffers&quot; are also possible but risky, in case the input happens to cause a stack overflow"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499903786, "post_id": 45069163, "comment_id": 77111739, "body": "He says &quot;literal&quot; but probably he thinks &quot;string&quot;"}, {"owner": {"reputation": 1775, "user_id": 3715151, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8gMtb.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3715151/daniel"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499904193, "post_id": 45069163, "comment_id": 77111850, "body": "@PeterJ: I think literal would be correct. I&#39;d like to send stuff into the function, parse it as I see fit, then return the result as a string literal which doesn&#39;t need to be freed. Davislor suggests the use of a static buffer, so that would not be a literal but should do what I want (essentially not having to worry about freeing memory)."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1499904390, "post_id": 45069163, "comment_id": 77111907, "body": "Not literal. Literal is something fixed for example &quot;5&amp;_&amp;_3&amp;_43&quot;. You can&#39;t change it as it is an UB"}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1499903691, "creation_date": 1499903691, "answer_id": 45069311, "question_id": 45069163, "link": "https://stackoverflow.com/questions/45069163/how-to-print-to-the-return-value-of-a-function-using-format-modifiers-in-c/45069311#45069311", "title": "How to print to the return value of a function, using format modifiers, in C?", "body": "<p>You can <code>snprintf</code> to a fixed-size, <code>static</code> buffer and return that.  Subsequent calls would then overwrite the previous return value.  Alternatively, pass in the destination buffer, owned by the caller. as an argument.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1499903697, "creation_date": 1499903697, "answer_id": 45069313, "question_id": 45069163, "link": "https://stackoverflow.com/questions/45069163/how-to-print-to-the-return-value-of-a-function-using-format-modifiers-in-c/45069313#45069313", "title": "How to print to the return value of a function, using format modifiers, in C?", "body": "<p>Abstracting from logic of such a solution you have version of the printf which \"prints\" to the given buffer it is called <strong><em>sprintf</em></strong> and another <strong><em>snprintf</em></strong> which is a bit more safe</p>\n"}], "owner": {"reputation": 1775, "user_id": 3715151, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8gMtb.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3715151/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 45069311, "answer_count": 2, "score": -1, "last_activity_date": 1499905031, "creation_date": 1499902729, "last_edit_date": 1499905031, "question_id": 45069163, "link": "https://stackoverflow.com/questions/45069163/how-to-print-to-the-return-value-of-a-function-using-format-modifiers-in-c", "title": "How to print to the return value of a function, using format modifiers, in C?", "body": "<p>Don't know if this is possible. I've been searching for it but nothing comes up.</p>\n\n<p>I'd like to have a function that <em>merges</em> multiple values and returns them <strong>as a string literal</strong> (so no malloc and subsequent free). This could be achieved by printing to the return value (if that makes sense and is possible), or maybe using fprintf with a literal as destination, instead of say <code>stdout</code>, and then that literal could be returned.</p>\n\n<p>The parameters of the function below are just an example, there could be other types such as long, etc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *format_and_return_literal(const char *s, int n, char c)\n{\n        int m = 7;\n\n        //(1):  Possible to fprintf to return value of function?\n        //fprintf(&lt;func-return-literal&gt;, \"hello %s: %d %d %c\", s, m, n, c);\n        //return &lt;func-return-literal&gt;;\n\n        // or\n\n        //(2):  Possible to return string literal made of above parameters?\n        //return \"hello %s: %d %d %c\", s, m, n, c)\n}\n\nint main()\n{\n        printf(\"%s\\n\", format_and_return_literal(\"foo\", 33, 'M'));\n        return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong> Thank you all. Perhaps the terminology I used wasn't the most correct, but I achieved what I wanted following @Davislor's suggestion of using a static buffer. I'm aware of snprintf but thank you anyway, @PeterJ.</p>\n\n<pre><code>char *format_and_return_literal(const char *s, int n, char c)\n{\n        static char buf[1024];\n        int m = 7;\n\n        snprintf(buf, sizeof(buf), \"hello %s: %d %d %c\", s, m, n, c);\n\n        return buf;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 6, "creation_date": 1499901420, "post_id": 45068965, "comment_id": 77111132, "body": "<code>matrix[i-1]</code> is undefined behavior for <code>i</code> == <code>0</code>."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1499901467, "post_id": 45068965, "comment_id": 77111145, "body": "<code>matrix_sum</code> is used without initialization, too."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 3, "creation_date": 1499901474, "post_id": 45068965, "comment_id": 77111148, "body": "Incidentally, 15 is 17 in octal."}], "answers": [{"comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1499901744, "post_id": 45068987, "comment_id": 77111233, "body": "Or initialise with just <code>matrix[i] = i+1;</code>, which is a lot clearer."}, {"owner": {"reputation": 11, "user_id": 8188931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863e0345df129d28fdb7f2e5f9beee7a?s=128&d=identicon&r=PG&f=1", "display_name": "baraa", "link": "https://stackoverflow.com/users/8188931/baraa"}, "edited": false, "score": 0, "creation_date": 1499910425, "post_id": 45068987, "comment_id": 77113313, "body": "Logically I should have undefined behaviour with  matrix[i]=matrix [i-1]+1;  , but I dont.  Thanks for the answer bro it&#39;s helpfull"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 4, "last_activity_date": 1499901476, "creation_date": 1499901476, "answer_id": 45068987, "question_id": 45068965, "link": "https://stackoverflow.com/questions/45068965/how-to-store-the-sum-of-two-integers-into-a-long-variable-in-c/45068987#45068987", "title": "How to store the sum of two integers into a long variable in C?", "body": "<p>Think about what happens on the first iteration of this loop:</p>\n\n<pre><code>for(i = 0; i &lt; m ; i++)  //filling the matrix\n    matrix[i] = matrix[i-1]+1;\n</code></pre>\n\n<p>Notice that you'll be reading from index -1 of this array (oops!) This leads to <em>undefined behavior</em>, which means that in principle <em>anything</em> can happen. Your program could get garbage data, get the wrong answer, or even outright crash!</p>\n\n<p>It's up to you to decide how to avoid this case. Consider changing the loop indices so that you start at a higher index.</p>\n\n<p>Also, look at the remaining variables in <code>main</code>. Are they initialized? If not, adding values to them will again result in undefined behavior and pretty much anything can happen to them.</p>\n\n<p>Finally, look at how you're <code>printf</code>ing things:</p>\n\n<pre><code>printf(\"%lo \\n\",matrix_sum);\n</code></pre>\n\n<p>The <code>%lo</code> specifier means \"the argument is a <code>long</code>, and it should be printed in octal (base-8).\" This means that you're not printing the value in decimal, so even if you'd expect to get the value 15<sub>dec</sub>, you'd instead see 17, the octal representation of the number.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8188931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863e0345df129d28fdb7f2e5f9beee7a?s=128&d=identicon&r=PG&f=1", "display_name": "baraa", "link": "https://stackoverflow.com/users/8188931/baraa"}, "edited": false, "score": 0, "creation_date": 1499910673, "post_id": 45069077, "comment_id": 77113366, "body": "Logically I shoud have undefined behaviour but I don&#39;t. Thanks  for answering I got this finally"}, {"owner": {"reputation": 37365, "user_id": 5683823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8551ed09606092a75f36b0638e5c318f?s=128&d=identicon&r=PG&f=1", "display_name": "mathguy", "link": "https://stackoverflow.com/users/5683823/mathguy"}, "reply_to_user": {"reputation": 11, "user_id": 8188931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863e0345df129d28fdb7f2e5f9beee7a?s=128&d=identicon&r=PG&f=1", "display_name": "baraa", "link": "https://stackoverflow.com/users/8188931/baraa"}, "edited": false, "score": 2, "creation_date": 1499911533, "post_id": 45069077, "comment_id": 77113555, "body": "@baraa - you <b>do</b> have undefined behavior. Just because on one system the initial value of an out-of-bounds array element is zero doesn&#39;t mean the behavior is &quot;defined&quot;. &quot;Undefined behavior&quot; simply means that on a different machine, with a different compiler, you <i>may</i> get garbage instead of zero. Even if you do get zero on all machines with all compilers currently in use, the behavior is still undefined: I may write a new compiler tomorrow where the initial value is -1, and that would still conform to the Standard."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1499902239, "creation_date": 1499902239, "answer_id": 45069077, "question_id": 45068965, "link": "https://stackoverflow.com/questions/45068965/how-to-store-the-sum-of-two-integers-into-a-long-variable-in-c/45069077#45069077", "title": "How to store the sum of two integers into a long variable in C?", "body": "<p>I have not seen a matrix. It seems you mean an array or a vector.</p>\n\n<p>For starters according to the C Standard the function main without parameters shall be declared like </p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>The variable <code>matrix_sum</code> was not initialized.</p>\n\n<p>In this loop </p>\n\n<pre><code>for(i = 0; i &lt; m ; i++)  //filling the matrix\nmatrix[i] = matrix[i-1]+1;\n                   ^^^^\n</code></pre>\n\n<p>there is an attempt to access memory beyond the array when the variable <code>i</code> is equal to 0.</p>\n\n<p>And it looks like you wanted to use the conversion specifier <code>%ld</code> in this statement</p>\n\n<pre><code>printf(\"%lo \\n\",matrix_sum);\n        ^^^\n</code></pre>\n\n<p>Otherwise the output will be as an octal number.</p>\n\n<p>I think you mean the following. At least the program output is exactly equal to 15.:)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N   5\n\nint main(void) \n{\n    int a[N];\n    int i;\n    long sum;\n\n    for ( i = 0; i &lt; N ; i++ ) a[i] = i + 1;\n\n    sum = 0;\n    for ( i = 0; i &lt; N ; i++ ) sum += a[i];\n\n    printf( \"%ld\\n\", sum );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8188931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863e0345df129d28fdb7f2e5f9beee7a?s=128&d=identicon&r=PG&f=1", "display_name": "baraa", "link": "https://stackoverflow.com/users/8188931/baraa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499905837, "creation_date": 1499901311, "last_edit_date": 1499905837, "question_id": 45068965, "link": "https://stackoverflow.com/questions/45068965/how-to-store-the-sum-of-two-integers-into-a-long-variable-in-c", "title": "How to store the sum of two integers into a long variable in C?", "body": "<p>I created a matrix of ints for example have {1 , 2 , 3 , 4 , 5}\nand then I'm trying  to store the sum of the matrix into a long variable:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#define m 5\nint main (){\n    int i;\n    int matrix[m];\n    long matrix_sum;\n\n    for(i = 0; i &lt; m ; i++)  //filling the matrix\n        matrix[i] = matrix[i-1]+1;\n\n    for(i = 0; i &lt; m ; i++)  //adding ints to long\n        matrix_sum += matrix[i];\n\n    printf(\"%lo \\n\",matrix_sum);\n    return 0;\n}\n</code></pre>\n\n<p>when I run this code I have \"17\" on output instead of \"15\" !!</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 5, "creation_date": 1499899577, "post_id": 45068663, "comment_id": 77110627, "body": "this <code>*ht-&gt;size = 3;</code> --&gt; <code>(*ht)-&gt;size = 3;</code>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1499900051, "post_id": 45068663, "comment_id": 77110770, "body": "<code>int table*;</code>???"}], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1499900476, "last_edit_date": 1499900476, "creation_date": 1499899660, "answer_id": 45068705, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer/45068705#45068705", "title": "Initializing C struct using pointer to pointer", "body": "<p>The problem is that </p>\n\n<p><code>-&gt;</code> has higher precedence than <code>*</code> in C as you can see from <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>using precedence rules <code>*ht-&gt;size</code> translates  to *(ht->size). That should make clear the reason why you get the error. Another way to see it is </p>\n\n<pre><code>*(ht-&gt;size)=(*(*ht).size)\n</code></pre>\n\n<p>Fix this using parenthesis as follows: <code>(*ht)-&gt;size</code></p>\n\n<p>There is another issue in the definition of <code>hashtable</code>:\n <code>int table*;</code> won't compile. Use <code>int *table;</code> instead to declare a <code>pointer to int</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "is_accepted": false, "score": 2, "last_activity_date": 1499899875, "creation_date": 1499899875, "answer_id": 45068731, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer/45068731#45068731", "title": "Initializing C struct using pointer to pointer", "body": "<p>You have 2 errors in your code :  </p>\n\n<ol>\n<li><p><code>int table*</code> --> <code>int *table</code> - Declare pointer to integer</p></li>\n<li><p>*ht->size  --> <code>(*ht)-&gt;size</code>  - Imp to put brackets when you are not sure of <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8298700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Dn7zDMcYD4/AAAAAAAAAAI/AAAAAAAAAJE/6rbNWYiSuU0/photo.jpg?sz=128", "display_name": "Dhairya Dalal", "link": "https://stackoverflow.com/users/8298700/dhairya-dalal"}, "edited": false, "score": 0, "creation_date": 1499900323, "post_id": 45068746, "comment_id": 77110847, "body": "Thanks that fixed the issue."}], "tags": [], "owner": {"reputation": 152, "user_id": 6421539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3670de2c372e2bfdcde4f38fba253b01?s=128&d=identicon&r=PG&f=1", "display_name": "PraMiD", "link": "https://stackoverflow.com/users/6421539/pramid"}, "is_accepted": true, "score": 2, "last_activity_date": 1499899990, "creation_date": 1499899990, "answer_id": 45068746, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer/45068746#45068746", "title": "Initializing C struct using pointer to pointer", "body": "<p>This is just a operator precedence problem.</p>\n\n<p>The compiler processes -> before the *. Therefore, it tries to access the size member of struct hashtable ** which is not possible.</p>\n\n<p>The code compiles if you exchange *ht->size with (*ht)->size.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8298700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Dn7zDMcYD4/AAAAAAAAAAI/AAAAAAAAAJE/6rbNWYiSuU0/photo.jpg?sz=128", "display_name": "Dhairya Dalal", "link": "https://stackoverflow.com/users/8298700/dhairya-dalal"}, "edited": false, "score": 0, "creation_date": 1499900395, "post_id": 45068767, "comment_id": 77110867, "body": "appreciate the feedback on returning the pointer. I&#39;m constrained here by my assignment specifications."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "reply_to_user": {"reputation": 33, "user_id": 8298700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Dn7zDMcYD4/AAAAAAAAAAI/AAAAAAAAAJE/6rbNWYiSuU0/photo.jpg?sz=128", "display_name": "Dhairya Dalal", "link": "https://stackoverflow.com/users/8298700/dhairya-dalal"}, "edited": false, "score": 0, "creation_date": 1499901058, "post_id": 45068767, "comment_id": 77111039, "body": "Oh I see. Well just keep this in mind for the future. This way is safer, because you&#39;re never meant to assign <code>NULL</code>. You just get the pointer directly from the function, without a chance to forget to call <code>init</code>."}], "tags": [], "owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1499900110, "creation_date": 1499900110, "answer_id": 45068767, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer/45068767#45068767", "title": "Initializing C struct using pointer to pointer", "body": "<p>That's a good start, and others have addresses the primary issues in your code. However, I would suggest a minor tweak:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct hashtable {\n  int size;\n  int entries;\n  int table*;   // pointer to table. Each entry will point to linked list \n                // of key-value nodes \n} hashtable;\n\n\n// note: freeing the hashtable is a caller responsibility!\nhashtable *new_hashtable() {\n    hashtable *ht = malloc( sizeof(hashtable) );\n    ht-&gt;size = 3; // since ht is only a single pointer, no need for (*ht)-&gt;foo \n\n    return ht;\n}\n\nint main(){\n\n  hashtable *ht = new_hashtable();\n\n  printf(\"ht.size: %i\", ht-&gt;size);\n\n  free(ht);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1499901074, "post_id": 45068821, "comment_id": 77111044, "body": "You&#39;ll probably want to use <code>calloc</code>"}], "tags": [], "owner": {"reputation": 33, "user_id": 8298700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Dn7zDMcYD4/AAAAAAAAAAI/AAAAAAAAAJE/6rbNWYiSuU0/photo.jpg?sz=128", "display_name": "Dhairya Dalal", "link": "https://stackoverflow.com/users/8298700/dhairya-dalal"}, "is_accepted": false, "score": 0, "last_activity_date": 1499901872, "last_edit_date": 1499901872, "creation_date": 1499900483, "answer_id": 45068821, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer/45068821#45068821", "title": "Initializing C struct using pointer to pointer", "body": "<p>Thanks all for the quick response. For future reference, here's a quick update of the original code with solutions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct hashtable {\n  int size;     // size of hash table\n  int entries;  // number of slots allocated in table\n  int *table;   /* pointer to table. Each entry will point to linked list\n                  of key-value nodes */\n} hashtable;\n\nvoid init(hashtable**);\n\nvoid init(hashtable** ht) {\n    *ht = (hashtable *) malloc( sizeof(hashtable) );\n    (*ht)-&gt;entries = 0;\n    (*ht)-&gt;size = 3; //replace this with better init size, ideally a prime number\n    (*ht)-&gt;table = malloc( (*ht)-&gt;size  * sizeof(int));\n}\n\nint main(){\n\n  hashtable *t = NULL;\n  init(&amp;t);\n  t-&gt;table[2] = 3;\n\n  printf(\"t.size: %i \\n\", t-&gt;size);\n  printf(\"t.arr:[2] %i \\n\", t-&gt;table[2]);\n  free(t);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8298700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2Dn7zDMcYD4/AAAAAAAAAAI/AAAAAAAAAJE/6rbNWYiSuU0/photo.jpg?sz=128", "display_name": "Dhairya Dalal", "link": "https://stackoverflow.com/users/8298700/dhairya-dalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 45068746, "answer_count": 5, "score": 3, "last_activity_date": 1499901872, "creation_date": 1499899342, "question_id": 45068663, "link": "https://stackoverflow.com/questions/45068663/initializing-c-struct-using-pointer-to-pointer", "title": "Initializing C struct using pointer to pointer", "body": "<p>I'm working on creating a hash table implementation for an assignment. I've defined my hashtable as struct as follows:</p>\n\n<pre><code>typedef struct hashtable {\n  int size;\n  int entries;\n  int table*;   // pointer to table. Each entry will point to linked list \n                // of key-value nodes \n} hashtable;\n</code></pre>\n\n<p>I have to initialize the hashtable struct in a method using double pointers, e.g.:</p>\n\n<pre><code>void init(hashtable** ht) {\n...\n}\n</code></pre>\n\n<p>I've written a basic implementation below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct hashtable {\n  int size;\n  int entries;\n  int table*;   // pointer to table. Each entry will point to linked list \n                // of key-value nodes \n} hashtable;\n\nvoid init(hashtable**);\n\nvoid init(hashtable** ht) {\n    *ht = (hashtable *) malloc( sizeof(hashtable) );\n    *ht-&gt;size = 3;\n}\n\nint main(){\n\n  hashtable *t = NULL;\n  init(&amp;t);\n\n  printf(\"t.size: %i\", t-&gt;size);\n}\n</code></pre>\n\n<p>However, I keep getting the following compile error:</p>\n\n<pre><code>ll.c:19:8: error: member reference base type 'hashtable *' (aka 'struct hashtable *') is not a\n      structure or union\n    *ht-&gt;size = 3;\n     ~~^ ~~~~\n1 error generated.\n</code></pre>\n\n<p>So I'm confused by the following:\n1. I'm not sure how to create a new struct in the init function when being passed a pointer to pointer.\n2. After allocating the struct, how do I modify the struct member attributes? </p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1499899538, "post_id": 45068641, "comment_id": 77110614, "body": "Yes, not enough field width. <code>%2.3f</code> is doomed to fail, since the 3 decimal places plus the point will always be wider than the <code>2</code> width specified. Time to read the <a href=\"https://msdn.microsoft.com/en-us/library/56e442dc.aspx\" rel=\"nofollow noreferrer\">man page</a>?"}, {"owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1499900029, "post_id": 45068641, "comment_id": 77110763, "body": "@xing It was that easy! Hoh!"}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1579803581, "post_id": 59884730, "comment_id": 105898519, "body": "<code>2.2</code>? What is the first <code>2</code> for? Digits before the comma, comma and digits after the comma all count into width. So if precision is 2, the number will have at least a comma and two digits after the comma, so at least 3 characters. So width of 2 is just ignored, the field is going to be at least widther then 3. Maybe <code>%+5.2f</code>?"}, {"owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1579808174, "post_id": 59884730, "comment_id": 105900568, "body": "@KamilCuk You&#39;re right! The width is optional and it&#39;ll be ignored in this case. As suggested by you, I changed it to the enough width for the above example. Also, from the man page, a small width never causes the value to be truncated. So, we can completely ignore the width and use something like <code>+.2f</code>. Thanks for your comment."}], "tags": [], "owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "is_accepted": false, "score": 2, "last_activity_date": 1579807866, "last_edit_date": 1579807866, "creation_date": 1579802967, "answer_id": 59884730, "question_id": 45068641, "link": "https://stackoverflow.com/questions/45068641/c-format-code-for-positive-and-negative-float-numbers/59884730#59884730", "title": "C format code for positive and negative float numbers", "body": "<p>From the <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/format-specification-syntax-printf-and-wprintf-functions?redirectedfrom=MSDN&amp;view=vs-2019\" rel=\"nofollow noreferrer\">format specification syntax</a>, the <code>printf</code> conversion specification follows</p>\n\n<pre><code>%[flags][width][.precision][size]type\n</code></pre>\n\n<p>So, if we set the flag directive to <code>+</code>, sign (+ or -) appears as a prefix of the output value. For example,</p>\n\n<pre><code>printf(\"%+5.2f\\n%+5.2f\\n\", -19.86, 19.86); // prints -19.86 \\newline +19.86\n</code></pre>\n"}], "owner": {"reputation": 1354, "user_id": 5412470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCzZm.png?s=128&g=1", "display_name": "hmofrad", "link": "https://stackoverflow.com/users/5412470/hmofrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579814851, "creation_date": 1499899177, "last_edit_date": 1579814851, "question_id": 45068641, "link": "https://stackoverflow.com/questions/45068641/c-format-code-for-positive-and-negative-float-numbers", "title": "C format code for positive and negative float numbers", "body": "<p>How can I force <code>printf</code> format codes like <code>%f</code> to produce aligned padded output for both positive and negative numbers. The following program is a minimal yet complete example of my problem:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int    step =    1;\n    float score =  0.1;\n    float phi   =  0.1;\n    float rho   =  0.2;\n    printf(\" # score phi  rho\\n\");\n    printf(\"%2d %2.3f %1.2f %1.2f\\n\", step, score, phi, rho);\n\n    step++;\n    score++;\n    phi++;\n    rho++;\n    printf(\"%2d %2.3f %1.2f %1.2f\\n\", step, score, phi, rho);\n\n    step++;\n    score -= 1.2;\n    phi++;\n    rho++;\n    printf(\"%2d %2.3f %1.2f %1.2f\\n\", step, score, phi, rho);\n\n    return 0;\n}\n</code></pre>\n\n<p>and here is the result:</p>\n\n<pre><code> # score phi  rho\n 1 0.100 0.10 0.20\n 2 1.100 1.10 1.20\n 3 -0.100 2.10 2.20\n</code></pre>\n\n<p>I wanted to have an output like</p>\n\n<pre><code> #  score phi  rho\n 1 +0.100 0.10 0.20\n 2 +1.100 1.10 1.20\n 3 -0.100 2.10 2.20\n</code></pre>\n\n<p>or </p>\n\n<pre><code> # score phi  rho\n 1 0.100 0.10 0.20\n 2 1.100 1.10 1.20\n 3 -0.10 2.10 2.20\n</code></pre>\n\n<p><strong>My current bad solution</strong> is an <code>if-else</code> statement conditioned on the sign of <em>score</em> variable to choose from two different <code>printf</code>s for plus and minus signs.</p>\n"}, {"tags": ["c", "gcc", "jump-table"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499899158, "post_id": 45068614, "comment_id": 77110485, "body": "too broad, you didnt specify the architecture, compiler, environment, but even with that information it is still too broad as one set of results on one test on one computer with one compiler is only valid in that scope"}, {"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499899239, "post_id": 45068614, "comment_id": 77110518, "body": "the question is labeled with gcc and the link to the generated assembly code specifies it as x86_64"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1499899402, "post_id": 45068614, "comment_id": 77110584, "body": "<code>case ADD: arg-&gt;val += func-&gt;operand;</code> you should <i>at least</i> add breaks to your switch. (that will make it faster, too ...)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 3, "creation_date": 1499899461, "post_id": 45068614, "comment_id": 77110596, "body": "It&#39;s already a jump table, you could add function call overhead to that if you want.."}, {"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1499899619, "post_id": 45068614, "comment_id": 77110639, "body": "@harold to clarify you are saying my assembly code already has a jump table? This was more of the basis of my question"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 3, "creation_date": 1499899770, "post_id": 45068614, "comment_id": 77110676, "body": "Yes you see that row of <code>.quad label</code>? That&#39;s the jump table.  The <code>jmp     rax</code> above it is the instruction that jumps to some label that it got out of the table."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499901387, "post_id": 45068614, "comment_id": 77111124, "body": "gcc and x86_64 is not remotely enough information and is still very limited in scope as to the answer, shouldnt be too hard to create a situation with one faster than the other.  one wins one time the other wins another..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499901403, "post_id": 45068614, "comment_id": 77111129, "body": "note links have little value here if you want to use the output then paste the output in the question."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 4, "last_activity_date": 1499900022, "last_edit_date": 1499900022, "creation_date": 1499899430, "answer_id": 45068675, "question_id": 45068614, "link": "https://stackoverflow.com/questions/45068614/is-it-faster-in-c-to-use-a-written-jump-table-or-switch-statement/45068675#45068675", "title": "Is it faster in C to use a written jump table or switch statement?", "body": "<p>A catchall answer to all these questions: you should measure.</p>\n\n<p>Practically though, I'm betting on the switch version. Function calls have overhead (and they can be hardly inlined in this context), which you could eliminate with <em>labels as values</em>, which is a common compiler extension*, but you should really try all your options and measure if the performance of this piece of code matters to you greatly.</p>\n\n<p>Otherwise, use whatever's most convenient to you. </p>\n\n<hr>\n\n<p>*a <strong>switch</strong> is likely to generate a jump table equivalent to what you could compose from <em>labels as values</em> but it could switch between different implementations depending on the particular case values and their number</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1499901276, "last_edit_date": 1499901276, "creation_date": 1499899976, "answer_id": 45068744, "question_id": 45068614, "link": "https://stackoverflow.com/questions/45068614/is-it-faster-in-c-to-use-a-written-jump-table-or-switch-statement/45068744#45068744", "title": "Is it faster in C to use a written jump table or switch statement?", "body": "<p>Can you spot the difference? Trust in compiler (it will do such a micro optimisations much better than you) - and do not forget break statements. Care about algorithm, not about such a small details.</p>\n\n<p><a href=\"https://godbolt.org/g/sPxse2\" rel=\"nofollow noreferrer\">https://godbolt.org/g/sPxse2</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/CIpzT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CIpzT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 2, "accepted_answer_id": 45068675, "answer_count": 2, "score": 1, "last_activity_date": 1499902586, "creation_date": 1499899013, "last_edit_date": 1499902586, "question_id": 45068614, "link": "https://stackoverflow.com/questions/45068614/is-it-faster-in-c-to-use-a-written-jump-table-or-switch-statement", "title": "Is it faster in C to use a written jump table or switch statement?", "body": "<p>So, I am trying to see if there is any difference between using a jump table of function pointers versus a switch statements for performing many, one command operations like these.</p>\n\n<p><a href=\"https://godbolt.org/g/SvWufP\" rel=\"nofollow noreferrer\">This is the code to assembly link i made</a></p>\n\n<p>Here is my actual code as well</p>\n\n<pre><code>enum code {\n    ADD,\n    SUB,\n    MUL,\n    DIV,\n    REM\n};\n\ntypedef struct {\n    int val;\n} Value;\n\n\ntypedef struct {\n    enum code ins;\n    int operand;\n} Op;\n\n\nvoid run(Value* arg, Op* func)\n{\n   switch(func-&gt;ins)\n   {\n     case ADD: arg-&gt;val += func-&gt;operand; break;\n     case SUB: arg-&gt;val -= func-&gt;operand; break;\n     case MUL: arg-&gt;val *= func-&gt;operand; break;\n     case DIV: arg-&gt;val /= func-&gt;operand; break;\n     case REM: arg-&gt;val %= func-&gt;operand; break;\n   }\n}\n</code></pre>\n\n<p>My question is, based on the generated assembly in that link or the code, would there be any difference from making a bunch of small functions to complete the operations in the cases of the switch statement, and making an array of pointers to those functions and calling them with the same enum?</p>\n\n<p><strong>Using gcc x86_64 7.1</strong></p>\n\n<pre><code>void add(Value* arg, Op* func)\n{\n   arg-&gt;val += func-&gt;operand;\n}\n\nstatic void (*jmptable)(Value*, Op*)[] = {\n     &amp;add\n}\n</code></pre>\n\n<p>Assembly code paste:</p>\n\n<pre><code>run(Value*, Op*):\n        push    rbp\n        mov     rbp, rsp\n        mov     QWORD PTR [rbp-8], rdi\n        mov     QWORD PTR [rbp-16], rsi\n        mov     rax, QWORD PTR [rbp-16]\n        mov     eax, DWORD PTR [rax]\n        cmp     eax, 4\n        ja      .L9\n        mov     eax, eax\n        mov     rax, QWORD PTR .L4[0+rax*8]\n        jmp     rax\n.L4:\n        .quad   .L3\n        .quad   .L5\n        .quad   .L6\n        .quad   .L7\n        .quad   .L8\n.L3:\n        mov     rax, QWORD PTR [rbp-8]\n        mov     edx, DWORD PTR [rax]\n        mov     rax, QWORD PTR [rbp-16]\n        mov     eax, DWORD PTR [rax+4]\n        add     edx, eax\n        mov     rax, QWORD PTR [rbp-8]\n        mov     DWORD PTR [rax], edx\n        jmp     .L2\n.L5:\n        mov     rax, QWORD PTR [rbp-8]\n        mov     edx, DWORD PTR [rax]\n        mov     rax, QWORD PTR [rbp-16]\n        mov     eax, DWORD PTR [rax+4]\n        sub     edx, eax\n        mov     rax, QWORD PTR [rbp-8]\n        mov     DWORD PTR [rax], edx\n        jmp     .L2\n.L6:\n        mov     rax, QWORD PTR [rbp-8]\n        mov     edx, DWORD PTR [rax]\n        mov     rax, QWORD PTR [rbp-16]\n        mov     eax, DWORD PTR [rax+4]\n        imul    edx, eax\n        mov     rax, QWORD PTR [rbp-8]\n        mov     DWORD PTR [rax], edx\n        jmp     .L2\n.L7:\n        mov     rax, QWORD PTR [rbp-8]\n        mov     eax, DWORD PTR [rax]\n        mov     rdx, QWORD PTR [rbp-16]\n        mov     esi, DWORD PTR [rdx+4]\n        cdq\n        idiv    esi\n        mov     edx, eax\n        mov     rax, QWORD PTR [rbp-8]\n        mov     DWORD PTR [rax], edx\n        jmp     .L2\n.L8:\n        mov     rax, QWORD PTR [rbp-8]\n        mov     eax, DWORD PTR [rax]\n        mov     rdx, QWORD PTR [rbp-16]\n        mov     ecx, DWORD PTR [rdx+4]\n        cdq\n        idiv    ecx\n        mov     rax, QWORD PTR [rbp-8]\n        mov     DWORD PTR [rax], edx\n        nop\n.L2:\n.L9:\n        nop\n        pop     rbp\n        ret\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2017", "sdl-2"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1499913409, "post_id": 45068430, "comment_id": 77113985, "body": "Do you really need to step through the first few instructions of your program as it&#39;s working its way through the C runtime?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1500024077, "post_id": 45068430, "comment_id": 77170078, "body": "Well, you could download SDL source and give VS the file it wants."}], "owner": {"reputation": 35, "user_id": 3616962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc79a0e0fd215057bb03ca46e16ef64b?s=128&d=identicon&r=PG&f=1", "display_name": "Bas Jansen", "link": "https://stackoverflow.com/users/3616962/bas-jansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511883129, "creation_date": 1499898066, "last_edit_date": 1499912993, "question_id": 45068430, "link": "https://stackoverflow.com/questions/45068430/step-debugging-sdl2-visual-studio-2017", "title": "Step Debugging SDL2 Visual Studio 2017", "body": "<p>I have been working with SDL2 in Visual Studio 2017 in the last few days. However, I ran into a problem with debugging. If I press 'F5' to debug/run the program, it works just fine. However, if I press 'F11' to do the Step debugging, it gives an error saying it cannot find sdl_windows_main.c and giving me a dialog to find it. Is there a different way to do the step-by-step debugging, or is it not possible in combination with SDL2?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 1, "creation_date": 1499896600, "post_id": 45068135, "comment_id": 77109596, "body": "this <code>#include&lt;stdio.h&gt;</code> --&gt; <code>#include &lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 6, "creation_date": 1499896647, "post_id": 45068135, "comment_id": 77109615, "body": "How are you running it?  The code is fine, so you must be trying to execute it incorrectly."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1499896753, "post_id": 45068135, "comment_id": 77109652, "body": "It can&#39;t both compile without errors and complain about syntax error. Syntax errors are checked at a time of compilation."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 14, "creation_date": 1499896800, "post_id": 45068135, "comment_id": 77109672, "body": "Execute <code>.&#47;helloworld1</code> instead of <code>.&#47;helloworld1.c</code>"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499898845, "post_id": 45068135, "comment_id": 77110391, "body": "&quot;no matter what I try, I keep on getting a syntax error&quot; that&#39;s cute"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499999461, "post_id": 45068135, "comment_id": 77159996, "body": "for ease of readability and understanding (the compiler does not care) 1) consistently indent the code.  indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces"}], "answers": [{"comments": [{"owner": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 0, "creation_date": 1499898730, "post_id": 45068501, "comment_id": 77110354, "body": "Can you explain how the OP&#39;s specific error message is happening?  Apparently whatever interpreter is being called makes it to the second line before hitting a syntax error."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499898841, "post_id": 45068501, "comment_id": 77110389, "body": "just curious, what are the permissions on your <code>minmax.c</code> file? .. I would expect to get a &quot;Permission denied&quot; error,,, unless perhaps the execute flag is set for the <code>.c</code> file for some reason"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499899549, "post_id": 45068501, "comment_id": 77110621, "body": "@yano: I was also curious about that, because I had to do it manually. But OP is probably using a non-unix/linux/mac-os system..."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1499902648, "post_id": 45068501, "comment_id": 77111459, "body": "ahh yeah could be. I know I&#39;ve experienced some permissions weirdness in the past with cygwin, mingw, and cross compilers"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 5, "last_activity_date": 1499899453, "last_edit_date": 1499899453, "creation_date": 1499898393, "answer_id": 45068501, "question_id": 45068135, "link": "https://stackoverflow.com/questions/45068135/what-is-the-syntax-error-near-in-my-program/45068501#45068501", "title": "What is the syntax error near &#39;(&#39; in my program?", "body": "<p>According to BLUEPIXY's comment, it's quite clear that you call <code>./helloworld1.c</code> instead of <code>./helloworld1</code>. Thereby, your shell is expecting a shell script, but the C source code isn't a valid script (like bash or something like that). Hence, the shell (and not the C compiler) gives you a syntax error which doesn't have anything to do with the lanaguage C at all. Tried it with a file <code>test.c</code> into which I copied exactly the following lines of code:</p>\n\n<p><strong>test.c</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nprintf(\"Hello World\");\nreturn 0;\n}\n</code></pre>\n\n<p>Then I called <code>chmod +ux test.c</code> to make it an executable, and finally called it in the terminal (which expects a bash script):</p>\n\n<pre><code>./test.c\n</code></pre>\n\n<p>yields:</p>\n\n<pre><code>./test.c: line 2: syntax error near unexpected token `('\n./test.c: line 2: `int main()'\n</code></pre>\n\n<p>The error is at line 2, because the first line <code>#include...</code> starts with a <code>#</code> and is therefore interpreted as a comment.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11342416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec452fc249059ef181143f5823f20b84?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil_BB", "link": "https://stackoverflow.com/users/11342416/nikhil-bb"}, "is_accepted": false, "score": 0, "last_activity_date": 1554927496, "last_edit_date": 1554927496, "creation_date": 1554924467, "answer_id": 55619988, "question_id": 45068135, "link": "https://stackoverflow.com/questions/45068135/what-is-the-syntax-error-near-in-my-program/55619988#55619988", "title": "What is the syntax error near &#39;(&#39; in my program?", "body": "<p>Don't execute the .c file, just execute the object code eg. <code>a.out</code></p>\n\n<p>In the terminal type: <code>./a.out</code></p>\n\n<p>Tip for C++:\nSince the gcc has not returned error in compilation, you don't have error in your header file.\nBut in the future if you encounter (say) <code>iostream.h</code> not found, try giving an absolute path like:\n<code>/usr/include/c++/7/iostream</code> instead of <code>iostream.h</code> in the header file</p>\n"}], "owner": {"reputation": 1, "user_id": 8298552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa9b58dd59989d6ca6d5ab76ee8e1a6?s=128&d=identicon&r=PG&f=1", "display_name": "hiyeman", "link": "https://stackoverflow.com/users/8298552/hiyeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1573, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554927496, "creation_date": 1499896512, "question_id": 45068135, "link": "https://stackoverflow.com/questions/45068135/what-is-the-syntax-error-near-in-my-program", "title": "What is the syntax error near &#39;(&#39; in my program?", "body": "<p>I've just started coding in C, but no no matter what I try, I keep on getting a syntax error. \"Syntax error near unexpected token '('\"</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nprintf(\"Hello World\");\nreturn 0;\n}\n</code></pre>\n\n<p>I've tried compiling it by using</p>\n\n<pre><code>gcc helloworld1.c -o helloworld1\ncc helloworld1.c -o helloworld1\n</code></pre>\n\n<p>and it compiles without errors, but it always screws up and gives me the syntax error message when I try to run it. Any help at all would be appreciated. Thanks!</p>\n"}, {"tags": ["c", "data-structures", "hashtable"], "comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1499896173, "post_id": 45068001, "comment_id": 77109443, "body": "Consider narrowing this down to a single question--you&#39;re all over the place, and it doesn&#39;t look like you&#39;ve attempted much of anything yet based on what you&#39;ve said. In addition, this appears to be more of a theory question than a software development question. By narrowing it down to one question and explaining anything you do understand, that appearance should improve and be more on-topic."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1499896298, "post_id": 45068001, "comment_id": 77109497, "body": "<a href=\"https://www.gnu.org/software/gperf/\" rel=\"nofollow noreferrer\">gnu.org/software/gperf</a>"}], "owner": {"reputation": 1, "user_id": 8298491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y8AaLPVMr9E/AAAAAAAAAAI/AAAAAAAAAC4/JccMxhOhiEM/photo.jpg?sz=128", "display_name": "user8298491", "link": "https://stackoverflow.com/users/8298491/user8298491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499895862, "creation_date": 1499895862, "question_id": 45068001, "link": "https://stackoverflow.com/questions/45068001/hash-tables-perfect-hashing", "title": "Hash tables - Perfect hashing", "body": "<p>I want to create a hash table with perfect hashing for a dictionary. The thing is I still don't quite get it. What I understand is that you have two universal function h1 and h2. Then you map the keys to a table with h1, and then you create a new table for every slot in the first table.</p>\n\n<p>That's all good. The thing is:\n1) h1 is a function that picks a random vector 'a' = {a1,a2,...,an}, then you dot-product this with the key(which is also a vector).\nQuestion 1:\nLet's say I have a String as my key, how would I pick vector 'a', and how would I pick the key?</p>\n\n<p>Question 2:\nSupposedly if h2 collides, you pick another h2 from the same family of functions. But then how would I find it when I search for it? I would have to go through the same process again?</p>\n\n<p>If someone decides to help me, examples (they don't have to be complex) would be very appreciated.</p>\n"}, {"tags": ["c", "cuda"], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 3, "last_activity_date": 1499896984, "last_edit_date": 1592644375, "creation_date": 1499896984, "answer_id": 45068224, "question_id": 45067835, "link": "https://stackoverflow.com/questions/45067835/non-deterministic-cuda-c-kernel/45068224#45068224", "title": "Non-deterministic CUDA C kernel", "body": "<h3>There is a giant race-condition</h3>\n<p>So <code>prime[i] &gt; 0</code> means <em>prime</em>, while <code>prime[i]=0</code> means <em>composite</em>.</p>\n<p><code>primes[i] = i;</code> is executed as first update on <code>primes</code> by each thread. Keep this in mind.</p>\n<p>Now let's see what happen when thread <code>16</code> executes. It marks <code>primes[16]=16</code> and and all multiples of <code>16</code> too. Something like the following</p>\n<pre><code>primes[16] = primes[32] = primes[48]=....=primes[k*16]=0\n</code></pre>\n<p>Imagine that thread <code>48</code> gets scheduled just after thread <code>16</code> completed its job (or when j&gt;3 in thread <code>16</code> loop`).</p>\n<p>Thread <code>48</code> sets <code>primes[48] = 48</code>. You have lost the update made by thread <code>16</code>.</p>\n<p>That is a race condition.</p>\n<hr />\n<p>When coding in CUDA you should make sure that the correctness of your code does not depend on a particular scheduling of warps.</p>\n<p>You should think as the order of execution as something non-deterministic.</p>\n"}], "owner": {"reputation": 384, "user_id": 4575668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32740f3b59ebdeefefd255925c682ba4?s=128&d=identicon&r=PG", "display_name": "Nubcake", "link": "https://stackoverflow.com/users/4575668/nubcake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 45068224, "answer_count": 1, "score": 1, "last_activity_date": 1499896984, "creation_date": 1499894995, "question_id": 45067835, "link": "https://stackoverflow.com/questions/45067835/non-deterministic-cuda-c-kernel", "title": "Non-deterministic CUDA C kernel", "body": "<p>I'm still a beginner with CUDA and I have been trying to write a simple kernel to perform a parallel prime sieve on the GPU. Originally I had written my code in C but I wanted to investigate the speed up on a GPU so I rewrote it:</p>\n\n<p>41.cu </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;cuda.h&gt;\n#include &lt;cuda_runtime.h&gt;\n\n#define B 1024\n#define T 256\n#define N (B*T)\n\n#define checkCudaErrors(error) {\\\n    if (error != cudaSuccess) {\\\n        printf(\"CUDA Error - %s:%d: '%s'\\n\",__FILE__,__LINE__,cudaGetErrorString(error));\\\n        exit(1);\\\n        }\\\n}\\\n\n__global__ void prime_sieve(int *primes) {\n    unsigned int i = threadIdx.x + blockIdx.x * blockDim.x;\n    primes[i] = i;\n    primes[0] = primes[1] = 0;\n    if (i &gt; 1 &amp;&amp; i&lt;N) { \n        for (int j=2; j&lt;N/2; j++) {\n            if (i*j &lt; N) {\n                primes[i*j] = 0;\n            }\n        }\n    }\n}\n\nint main() {\n    int *h_primes=(int*)malloc(N * sizeof(int));\n    int *d_primes;\n    checkCudaErrors(cudaMalloc( (void**)&amp;d_primes, N*sizeof(int)));\n    checkCudaErrors(cudaMemcpy(d_primes,h_primes,N*sizeof(int),cudaMemcpyHostToDevice));    \n    prime_sieve&lt;&lt;&lt;B,T&gt;&gt;&gt;(d_primes);\n    checkCudaErrors(cudaMemcpy(h_primes,d_primes,N*sizeof(int),cudaMemcpyDeviceToHost));\n    checkCudaErrors(cudaFree(d_primes));\n\n    int size = 0;\n    int total = 0;\n    for (int i=2; i&lt;N; i++) {\n        if (h_primes[i]) {\n            size++;\n        }\n        total++;\n    }\n    printf(\"\\n\");\n    printf(\"Length = %d\\tPrimes = %d\\n\",total,size);\n    free(h_primes);\n    return 0;\n}\n</code></pre>\n\n<p>I run the program on Ubuntu 16.04 (4.4.0-83-generic) and I compile using <code>nvcc 41.cu -o 41.o -arch=sm_30</code> under version 8.0.61. The program is run on a GeForce GTX 780 Ti but everytime it runs, it always produces non-deterministic results:</p>\n\n<pre><code>Length = 262142 Primes = 49477\nLength = 262142 Primes = 49486\nLength = 262142 Primes = 49596\nLength = 262142 Primes = 49589\n</code></pre>\n\n<p>There were no errors reported back. At first I thought it was a race condition but <code>cuda-memcheck</code> didn't report back any hazards for <code>racecheck</code>,<code>initcheck</code> or <code>synccheck</code> and I couldn't think of any problems with my assumptions. I was thinking this could be a synchronisation problem? </p>\n\n<p>This non-deterministic behaviour only occurs when I increase the block size and thread size as seen in the code. When I tried a block size and thread size of say 16, then there were no problems (as far as I could tell). It seems that not all threads get the chance to execute? I was planning to run this on very large array sizes (&lt; 1 billion integers) but I am stuck at this point.</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c", "matlab", "mex"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499888867, "post_id": 45066317, "comment_id": 77105941, "body": "Your function <i>doesn&#39;t</i> return &quot;an array of appropriate size&quot;, it returns <code>void</code> i.e. nothing at all."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499888922, "post_id": 45066317, "comment_id": 77105982, "body": "Where are you getting this mysterious address from? It is not clear to me from your code that is input and what is output here."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1499892769, "post_id": 45066317, "comment_id": 77107859, "body": "perhaps adding a <code>matlab</code> tag would find some matlab experts"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499894157, "post_id": 45066317, "comment_id": 77108549, "body": "This <code>p = *address; point = (void*) p;</code> makes no sense to me. Firstly, <code>p</code> is an <code>int</code> read from a pointer to <code>double</code>. Converting that to a <code>void*</code> pointer is suspicious. The <code>point</code> is a pointer to <code>double</code> so why cast it <code>(void*)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8298007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28307b5e7c78cd6a101e503aec666fbd?s=128&d=identicon&r=PG&f=1", "display_name": "user24848", "link": "https://stackoverflow.com/users/8298007/user24848"}, "edited": false, "score": 0, "creation_date": 1500487531, "post_id": 45068467, "comment_id": 77363086, "body": "Thanks for all the responses and sorry for getting back to this so late. To clarify my problem, I edited in more details regarding my specific circumstance. (See above)"}, {"owner": {"reputation": 240, "user_id": 2832768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uwee8.png?s=128&g=1", "display_name": "guilleamodeo", "link": "https://stackoverflow.com/users/2832768/guilleamodeo"}, "reply_to_user": {"reputation": 1, "user_id": 8298007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28307b5e7c78cd6a101e503aec666fbd?s=128&d=identicon&r=PG&f=1", "display_name": "user24848", "link": "https://stackoverflow.com/users/8298007/user24848"}, "edited": false, "score": 0, "creation_date": 1500579257, "post_id": 45068467, "comment_id": 77413637, "body": "Well, I can help you with C, but if you want to use matlab coding you should remove the C tag on the question and add a matlab one in order to get an answer from the matlab gurus.. ..might be you should close this one and ask directly a matlab one with the right tag."}], "tags": [], "owner": {"reputation": 240, "user_id": 2832768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uwee8.png?s=128&g=1", "display_name": "guilleamodeo", "link": "https://stackoverflow.com/users/2832768/guilleamodeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1499898617, "last_edit_date": 1499898617, "creation_date": 1499898236, "answer_id": 45068467, "question_id": 45066317, "link": "https://stackoverflow.com/questions/45066317/data-retrieval-from-known-memory-address-troubleshooting/45068467#45068467", "title": "Data Retrieval from known memory address: Troubleshooting", "body": "<p>As other people pointed out your code is not working because 'point' points to an arbitrary address. If you look closely to this code:</p>\n\n<pre><code>address = mxGetPr(prhs[0]); \nsize = mxGetPr(prhs[1]);\np = *address;\npoint = (void*) p;\n</code></pre>\n\n<p>You are getting the address of an array in 'address', then getting the value of the first element of that array in 'p' and then making that value in 'p' the address of an array in 'point' which you use to read the values. To be honest, unless you are sure that the first element is really the array's address that you are looking for, I am sure that would fail to read the real values of the array.</p>\n\n<p>If what I suspect is correct -mxGetPtr() gives you a pointer to the array like it does for the other array after create it- then those 4 lines of code should be written more like this two:</p>\n\n<pre><code>point = (double *)mxGetPtr(phrs[0]);\nsize = (double *)mxGetPtr(phrs[1]);\n</code></pre>\n\n<p>I say this because the returned array's address is obtained on the same way after creation.</p>\n\n<p>PS. forgot to say that you need a 'return' afther emitting the error for the wrong number of arguments. :-)</p>\n"}], "owner": {"reputation": 1, "user_id": 8298007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28307b5e7c78cd6a101e503aec666fbd?s=128&d=identicon&r=PG&f=1", "display_name": "user24848", "link": "https://stackoverflow.com/users/8298007/user24848"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1500486987, "creation_date": 1499888751, "last_edit_date": 1500486987, "question_id": 45066317, "link": "https://stackoverflow.com/questions/45066317/data-retrieval-from-known-memory-address-troubleshooting", "title": "Data Retrieval from known memory address: Troubleshooting", "body": "<p>I'm trying to pull a 1-dimensional array of doubles with a known size and address in memory. My current function (included below) returns an array of appropriate size, but composed entirely of zeros. Obviously, this is not the data array I'm looking for. Any ideas on how I may solve this problem (or at least some troubleshooting tips), would be greatly appreciated.</p>\n\n<p>P.S. I am using MATLAB R2015b for processing the data. In order to retrieve the data array, I'm writing a MatLab Executable (MEX) function written in C script.</p>\n\n<p>Thanks,</p>\n\n<p>Josh</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>To clarify, what I am trying to do is to pull data from an instrument; unfortunately, the only way to control and get data from this instrument is in the proprietary software that was bundled with the instrument and which happens to be an old compiled Matlab program in .exe format. Luckily, we can automate getting measurements from it through ActiveX control, but all that these controls give us is the size of the array containing the data we are interested in and the memory address that the array of doubles starts at. </p>\n\n<p>So, what my problem is, given this information, how can I read of this array so that I can process this data in my Matlab program? The approach that I was using is to write a small C program using the MEX functionality in Matlab but I am having trouble passing this memory location and successfully reading from it, if there is a better way to do this without having to use a small C program I would gladly use this as well. Thanks</p>\n\n<pre><code>#include \"mex.h\"\n\n\nvoid mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) \n{\n    double  *pointer;          /* pointer to real data in new array */\n    mwSize index;\n\n    double *address,*size,*point;\n    int p;\n\n    /* Check for proper number of arguments. */\n    if (nrhs != 2) \n     { \n        mexErrMsgIdAndTxt( \"MATLAB:yprime:invalidNumInputs\",\"Two input \narguments required.\");\n    }       \n\n    address = mxGetPr(prhs[0]); \n    size = mxGetPr(prhs[1]);\n    p = *address;\n    point = (void*) p;\n    //const void* point = mxGetPr(prhs[0]); //(double *)*address;\n\n\n\n    /* Create an m-by-n mxArray; you will copy existing data into it */\n    plhs[0] = mxCreateNumericMatrix(1, *size, mxDOUBLE_CLASS, mxREAL);\n    pointer = mxGetPr(plhs[0]);\n\n    /* Copy data into the mxArray */\n    for ( index = 0; index &lt; *size; index++ ) {\n        pointer[index] = point[index];\n    }\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "stm32", "encoder"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499889334, "post_id": 45066313, "comment_id": 77106208, "body": "You cannot remap pins on the STM32. You have to use the pins the peripheral you want to use is connected to internally."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499898449, "post_id": 45066313, "comment_id": 77110260, "body": "@Olaf of course you can but the choice is limited. in the old ones (like F1xx) it is done by remap redisters, in more modern ones by setting the correct AF mode (and you have usually more than one pin to choose)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499903900, "post_id": 45066313, "comment_id": 77111774, "body": "@PeterJ: Remapping as asked by OP would imply the GPIO function and all other peripheral functions are remapped, which is definitively not supported by the STM32 family. The AF is just a selector of different peripheral functions for a certain GPIO pin. Of course the same peripheral function might be available on <b>different</b> GPIOs."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499904220, "post_id": 45066313, "comment_id": 77111858, "body": "Sorry mate. But I really do not understand you. Even STM calls it remap on this micro. AF maps peripheral IO to the particular pin. I think that is obvious that if you map pin to peripheral it will stop to be something it was before that assignment. The OP wants to change the preassigned pins, an he of course can"}, {"owner": {"reputation": 11, "user_id": 8298005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166172615114cb8afcd2e131fb8ddf86?s=128&d=identicon&r=PG&f=1", "display_name": "Kyosanim", "link": "https://stackoverflow.com/users/8298005/kyosanim"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499922415, "post_id": 45066313, "comment_id": 77116184, "body": "@PeterJ: I agree. In my code I forgot to enable the clock to the AFIO register. However, still doesn&#39;t work :-("}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8298005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166172615114cb8afcd2e131fb8ddf86?s=128&d=identicon&r=PG&f=1", "display_name": "Kyosanim", "link": "https://stackoverflow.com/users/8298005/kyosanim"}, "edited": false, "score": 0, "creation_date": 1500624980, "post_id": 45207250, "comment_id": 77430571, "body": "I see, but I&#39;m not using SPL. I&#39;m using low level register programming. Seems that we are doing pretty much the same: disabling JTAG before remapping pins."}], "tags": [], "owner": {"reputation": 105, "user_id": 5400835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zKTVcHeDNCI/AAAAAAAAAAI/AAAAAAAAABE/aeNKd_LkDik/photo.jpg?sz=128", "display_name": "Bohdan Pakhaliuk", "link": "https://stackoverflow.com/users/5400835/bohdan-pakhaliuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1500533416, "creation_date": 1500533416, "answer_id": 45207250, "question_id": 45066313, "link": "https://stackoverflow.com/questions/45066313/issues-with-timer2-on-stm32f103-in-encoder-interface-mode/45207250#45207250", "title": "Issues with Timer2 on STM32F103 in encoder interface mode", "body": "<p>I had the same problem. My SPL implementation:</p>\n\n<p>Pins init and remaping</p>\n\n<pre><code>GPIO_InitTypeDef gpio_cfg;\nGPIO_StructInit(&amp;gpio_cfg);\n\n/* \u041a\u0430\u043d\u0430\u043b\u044b 1 \u0438 2 \u0442\u0430\u0439\u043c\u0435\u0440\u0430 TIM3 - \u043d\u0430 \u0432\u0445\u043e\u0434, \u043f\u043e\u0434\u0442\u044f\u043d\u0443\u0442\u044c \u043a \u043f\u0438\u0442\u0430\u043d\u0438\u044e */\nRCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB \n| RCC_APB2Periph_AFIO, ENABLE);\n\ngpio_cfg.GPIO_Mode = GPIO_Mode_IPU;\ngpio_cfg.GPIO_Pin = GPIO_Pin_15;\nGPIO_Init(GPIOA, &amp;gpio_cfg);\n\ngpio_cfg.GPIO_Mode = GPIO_Mode_IPU;\ngpio_cfg.GPIO_Pin = GPIO_Pin_3;\nGPIO_Init(GPIOB, &amp;gpio_cfg);\n\nGPIO_PinRemapConfig(GPIO_FullRemap_TIM2, ENABLE);\n</code></pre>\n\n<p>To use remapped pins and SWD for debug:</p>\n\n<pre><code>GPIO_PinRemapConfig(GPIO_Remap_SWJ_NoJTRST, ENABLE);\nGPIO_PinRemapConfig(GPIO_Remap_SWJ_JTAGDisable, ENABLE);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8298005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166172615114cb8afcd2e131fb8ddf86?s=128&d=identicon&r=PG&f=1", "display_name": "Kyosanim", "link": "https://stackoverflow.com/users/8298005/kyosanim"}, "is_accepted": true, "score": 1, "last_activity_date": 1500624812, "creation_date": 1500624812, "answer_id": 45232482, "question_id": 45066313, "link": "https://stackoverflow.com/questions/45066313/issues-with-timer2-on-stm32f103-in-encoder-interface-mode/45232482#45232482", "title": "Issues with Timer2 on STM32F103 in encoder interface mode", "body": "<p>I finally solved the problem by using:</p>\n\n<pre><code>AFIO-&gt;MAPR |= AFIO_MAPR_SWJ_CFG_JTAGDISABLE; // JTAG-DP Disabled, SW-DP Enabled\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>AFIO-&gt;MAPR &amp;= ~AFIO_MAPR_SWJ_CFG_0; // JTAG-DP Disabled, SW-DP Enabled\nAFIO-&gt;MAPR |= AFIO_MAPR_SWJ_CFG_1;  //                  \"\nAFIO-&gt;MAPR &amp;= ~AFIO_MAPR_SWJ_CFG_2; //                  \"\n</code></pre>\n\n<p>According to p. 176 in the reference manual (RM0008), I'm setting the correct registers. Can't figure out the difference though.\nPerhaps you are only permitted to set a single bit. Doesn't make sense though, since I tried setting CFG_1 by itself like this:</p>\n\n<pre><code>AFIO-&gt;MAPR |= AFIO_MAPR_SWJ_CFG_1;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8298005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166172615114cb8afcd2e131fb8ddf86?s=128&d=identicon&r=PG&f=1", "display_name": "Kyosanim", "link": "https://stackoverflow.com/users/8298005/kyosanim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 0, "accepted_answer_id": 45232482, "answer_count": 2, "score": -1, "last_activity_date": 1500624812, "creation_date": 1499888744, "question_id": 45066313, "link": "https://stackoverflow.com/questions/45066313/issues-with-timer2-on-stm32f103-in-encoder-interface-mode", "title": "Issues with Timer2 on STM32F103 in encoder interface mode", "body": "<p>I'm having an issue using the Timer2 on a STM32F103C8T6, as an interface for a quad incremental encoder. \nI cannot get the program to enter the IRQHandler and toggle an LED.</p>\n\n<p>I've made an almost identical initialization of Timer4 that works just fine. So the question is; what am I doing wrong when initializing Timer 2?</p>\n\n<p>Goes without saying; I've already checked the wiring.</p>\n\n<p>Note that I need to remap PA0 to PA15 and PA1 to PB3. As far as I can tell from the ST Reference Manual I need to do this in the AFIO register. Also I need to disable JTDI and JTDO in order to release PA15 and PB3. Am I correct in doing so?</p>\n\n<p>The code is as follows:</p>\n\n<pre><code>    /*------------------------------------------------------------------------------------\n                                            MACROS\n    ------------------------------------------------------------------------------------*/\n    #define GEARRATIO 9.68\n    #define ENCODERRESOLUTION 48\n    #define COUNTSPERREV GEARRATIO*ENCODERRESOLUTION // 9.68*48 = 465\n    /*------------------------------------------------------------------------------------\n                                        PREPROCESSOR\n    ------------------------------------------------------------------------------------*/\n    #include &lt;stm32f103xb.h&gt;\n    #include \"Timer2.h\"\n    #include \"IO.h\"\n    /*------------------------------------------------------------------------------\n                              Timer2 init (Encoder interface mode)\n     *------------------------------------------------------------------------------*/\n    void Timer2_init_Encoder(void)\n    {   /* Explain function here */\n                                    /* GPIO setup */\n        RCC-&gt;APB2ENR |= RCC_APB2ENR_IOPAEN; // Enable clock\n        RCC-&gt;APB2ENR |= RCC_APB2ENR_IOPBEN; // Enable clock\n\n        AFIO-&gt;MAPR |= (AFIO_MAPR_SWJ_CFG &amp; 0b100); // Disable JTAG-DP and SW_DP to release PA15 and PB3\n        AFIO-&gt;MAPR |= (AFIO_MAPR_TIM2_REMAP &amp; 0b01); // Remap PA0-&gt;PA15, PA1-&gt;PB3 (needs to be 5V tol.)\n\n        // PA15 (Timer 2 Input CH1)\n        GPIOA-&gt;CRH |= (GPIO_CRH_CNF15 &amp; 0b01);  // 01 =&gt; Floating input (default)\n        GPIOA-&gt;CRH &amp;= ~GPIO_CRH_MODE15; // 00 =&gt; Input mode (default)\n\n        // PB3 (Timer 2 Input CH2)\n        GPIOB-&gt;CRL |= (GPIO_CRL_CNF3 &amp; 0b01);   // 01 =&gt; Floating input (default)\n        GPIOB-&gt;CRL &amp;= ~GPIO_CRL_MODE3;  // 00 =&gt; Input mode (default)\n\n                                    /* Timer setup */\n        // Clock\n        RCC-&gt;APB1ENR |= RCC_APB1ENR_TIM2EN; // enable clock\n        TIM2-&gt;SMCR |= TIM_SMCR_SMS &amp; 0b011; //011 =&gt; Encoder mode 3. Count on both TI1 and TI2 edges (gives 48 CPR)\n\n        // Timebase unit\n        TIM2-&gt;ARR = COUNTSPERREV - 1;   // CNT counts to this value and restarts\n        TIM2-&gt;RCR = 0x0000;             // set repetition counter\n        TIM2-&gt;CNT = 0;              // Set initial counter value (optional)\n\n        // Control Register\n        TIM2-&gt;CR1 |= TIM_CR1_URS;   // 1 =&gt; ONLY overflow/underflow generates interrupt\n        TIM2-&gt;CR1 |= TIM_CR1_ARPE;  // 1 =&gt; ARR is updated at each UEV\n        TIM2-&gt;CR1 &amp;= ~TIM_CR1_UDIS; // 0 =&gt; Update Event (UEV) is generated at each overflow/underflow\n\n        TIM2-&gt;CCMR1 |= TIM_CCMR1_CC1S &amp; 0b01;   // 01 =&gt; CC1 Channel is configured as input\n        TIM2-&gt;CCMR1 |= TIM_CCMR1_CC2S &amp; 0b01;   // 01 =&gt; CC2 Channel is configured as input\n        TIM2-&gt;CCMR1 &amp;= ~TIM_CCMR1_IC1F; // 0000 =&gt; No Input Capture filter\n        TIM2-&gt;CCMR1 &amp;= ~TIM_CCMR1_IC2F; // 0000 =&gt; No Input Capture filter\n        TIM2-&gt;CCER &amp;= ~TIM_CCER_CC1P;   // 0 =&gt; Rising edge\n        TIM2-&gt;CCER &amp;= ~TIM_CCER_CC2P;   // 0 =&gt; Rising edge\n\n        // Interrupts\n        TIM2-&gt;DIER |= TIM_DIER_UIE; // DMA/Interrupt Register: Update Interrupt Enabled\n        NVIC-&gt;ISER[0] |= (1 &lt;&lt; (TIM2_IRQn &amp; 0x1F));  // enable interrupt globally\n\n        TIM2-&gt;CR1 |= TIM_CR1_CEN;   // enable timer (counter begins one clock-cycle after enabling)\n    }\n    /*------------------------------------------------------------------------------\n                                Timer2 Update Interrupt Handler\n     *------------------------------------------------------------------------------*/\n    void TIM2_IRQHandler(void)\n    {\n        if ((TIM2-&gt;SR &amp; TIM_SR_UIF) == 1)\n        {\n            IO_LED_Toggle();\n            TIM2-&gt;SR &amp;= ~TIM_SR_UIF;    // clear UIF flag\n        }\n    }\n</code></pre>\n\n<p>Hope you guys can help.</p>\n\n<p>Regards,\nMikkel</p>\n"}, {"tags": ["c", "memory", "flash-memory"], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 3, "last_activity_date": 1499888041, "creation_date": 1499888041, "answer_id": 45066143, "question_id": 45066040, "link": "https://stackoverflow.com/questions/45066040/c-read-values-of-entire-flash-memory-of-mcu/45066143#45066143", "title": "C: Read values of entire flash memory of MCU", "body": "<p>Consider you have a 4-byte flash memory with content</p>\n\n<pre><code>00 01 02 03\n</code></pre>\n\n<p>Adding by byte values will give you <code>0x000000000000006</code></p>\n\n<p>Adding by 32-bit <code>int</code> values will give you <code>0x0000000003020100</code> assuming little-endian.</p>\n"}], "owner": {"reputation": 55, "user_id": 5660881, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6441b75a658fb9f94a1bd4076fd83392?s=128&d=identicon&r=PG&f=1", "display_name": "Whitekang", "link": "https://stackoverflow.com/users/5660881/whitekang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 45066143, "answer_count": 1, "score": -1, "last_activity_date": 1499888041, "creation_date": 1499887647, "question_id": 45066040, "link": "https://stackoverflow.com/questions/45066040/c-read-values-of-entire-flash-memory-of-mcu", "title": "C: Read values of entire flash memory of MCU", "body": "<p>I want to read the values of the memory locations of the entire program flash memory of an MCU, in particular, the CC2538 on the OpenMote-CC2538. The read values are then computed into, currently, a large sum of all the values. </p>\n\n<p>At this moment, I have the following code working to traverse the memory and get the values</p>\n\n<pre><code>uint64_t readMemory() {\n\nunsigned char * bytes = (char *) 0x200000;\nsize_t size = 0x0007FFD4;\nsize_t i;\nuint64_t amount = 0;\nfor (i = 0; i &lt; size; i++) {\n    amount += bytes[i];\n    }\n\nreturn amount;\n}\n\nuint64_t readFlashMemory() {\n\nunsigned int * bytes = (int *) 0x200000;\nsize_t size = 0x0007FFD4; \nsize_t i;\nuint64_t amount = 0;\nfor (i = 0; i &lt; size; i+=4) {\n    amount += FlashGet(bytes);\n    bytes++;\n    }\n\nreturn amount;\n}\n</code></pre>\n\n<p>address 0x200000 and its size is 0x0007FFD4. The first function works with a char and goes to each address one by one, while the second one uses an existing function FlashGet(uint32_t) from the flash.c file, which is a direct access to a register (HWREG). </p>\n\n<p>FlashGet requires a uint32_t address and returns a uint32_t value, as such it has a length of 4 and the address should be moved with 4 in the loop .The first function uses char for the addressing, which is a length of 1 and so the address should also move by 1 in the loop. Am I correct in these statements? If so, am I executing them correctly? For the second function, incrementing the pointer with 1 should move it with 4 due to it being of type uint32_t (similar to int).</p>\n\n<p>However, the functions return a different value. \nThe first one returns: 674426297757\nThe second one returns: 8213668631160</p>\n\n<p>As both functions should be doing the same, one or both must be incorrect and is not reading the entire program flash memory.</p>\n\n<p>How can I fix both functions? Is there a better or easier way to read the entire memory when you have the starting address and size?</p>\n"}, {"tags": ["c++", "c", "telnet"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499887345, "post_id": 45065674, "comment_id": 77105200, "body": "&gt;default/design/magic   The word you are looking for is  &quot;luck&quot;, as there are no guarantees to that effect."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499888007, "post_id": 45065674, "comment_id": 77105546, "body": "In situations like this WireShark or <code>tcpdump</code> and a tried-and-true <code>telnet</code> client will provide some examples you can work from."}, {"owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1499900976, "post_id": 45065674, "comment_id": 77111015, "body": "@Frank Well I will explicitly setup those two arrays if needed but that isn&#39;t really the core of my question - I would like a walk-through of <a href=\"https://tools.ietf.org/html/rfc1143#section-7\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc1143#section-7</a> so as to work with the options structures (well, <i>arrays</i>) I propose."}], "owner": {"reputation": 264, "user_id": 4805858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LE4t8.png?s=128&g=1", "display_name": "SlySven", "link": "https://stackoverflow.com/users/4805858/slysven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1501094166, "creation_date": 1499886254, "last_edit_date": 1501094166, "question_id": 45065674, "link": "https://stackoverflow.com/questions/45065674/telnet-q-state-option-logic-rfc1143-example-code-explaination-sought", "title": "Telnet Q State Option Logic RFC1143 example code - explaination sought", "body": "<p>I need/want to implement a <a href=\"https://tools.ietf.org/html/rfc1143\" rel=\"nofollow noreferrer\">RFC1143</a> compliant Telnet sub-option negotiation system in the MUD client I am coding for but I am having difficulty translating the methodology in <a href=\"https://tools.ietf.org/html/rfc1143#section-7\" rel=\"nofollow noreferrer\">Section 7</a> into workable C/C++ code.  I have, as the text suggests as one way to do it, two six state enums - I understand that given the bit patterns chosen an option is considered to be active if, and only if, for a <code>TelnetQStateFlag</code> instance <code>state</code> , <code>state == QStateYes</code>:</p>\n\n<pre><code>    enum TelnetQStateFlag {\n                                      // +-----If set then we have a queued\n                                      // |     request for the opposite state\n                                      // |+----If set then we want the opposite\n                                      // ||+---Must be only one set for option\n                                      // |||   to be active\n                      QStateNo = 0x0, // 000 - No\n                  QStateWantNo = 0x2, // 010 - Want No and we/he do not want to change to Yes\n                 QStateWantYes = 0x3, // 011 - Want Yes and we/he do not want to change to No\n                     QStateYes = 0x1, // 001 - Yes\n    QStateWantYesQueueOpposite = 0x7, // 111 - Yes but we/he wants to change to no\n     QStateWantNoQueueOpposite = 0x6  // 110 - No but we/he wants to change to yes\n    };\n\n    TelnetQStateFlag[256] mMyOptions;\n    TelnetQStateFlag[256] mHisOptions;\n</code></pre>\n\n<p>By default/design/magic all the options will default to the <code>QStateNo</code> but I can see that I should, on initialisation set the ones (specific values of the <code>size_t</code> variable <code>optionIndex</code>) that MY end is prepared to handle by setting <code>mMyOptions[optionIndex] = QStateWantYes</code> and similarly the ones that we are prepared to accept from HIM as <code>mHisOptions[optionIndex] = QStateWantYes</code>.</p>\n\n<p>Can someone talk me through - slowly - how to handle requests from one party to negotiate to control an option at the other end - both for the cases where the other end will <em>and</em> will not accept such an option; and how this works for <em>both</em> directions possibly in an overlapping situation?</p>\n\n<p>I have been through and starting from the referred to RFC I have edited it to express the transitions in six-states:</p>\n\n<pre><code>There are two sides, we (us) and he (him).  Originally RFC1143 kept two\nsets of two variables:\n\nus:      state of option on our side (NO/WANTNO/WANTYES/YES)  \nusq:     a queue bit (EMPTY/OPPOSITE) if us is WANTNO or WANTYES  \n\nhim:     state of option on his side  \nhimq:    a queue bit if him is WANTNO or WANTYES  \n\nAn option is enabled if and only if its state is YES.\n\nNote that below us/usq and him/himq has been combined into two six-choice\nstates:    \n\n\u2219 NO              default (starting) state\n\u2219 WANTYES         no pending request for this option to be enabled\n\u2219 WANTYESQUEUEDNO already requested for this option to be enabled  \n\u2219 WANTNO          no pending request for this option to be disabled  \n\u2219 WANTNOQUEUEDYES already requested for this option to be disabled  \n\u2219 YES             state is enabled - ONLY state in which option is ACTIVE\n\n\"ERROR\" below means that producing diagnostic information may be a good idea,\nthough it isn't required.\n\nUpon receipt of WILL(for his state){DO(for our state)}, we choose based upon\nhim{us} state:\n\n\u2218 NO (if we agree)        ==&gt; YES and send DO{WILL}\n\u2218 NO (if we do not agree) ==&gt; NOCHANGE but still send DONT{WONT}\n\u2218 YES                     ==&gt; NOCHANGE\n\u2218 WANTNO                  ==&gt; NO; ERROR: DONT{WONT} answered by WILL{DO}\n\u2218 WANTNOQUEUEDYES         ==&gt; WANTYES; ERROR: DONT{WONT} answered by WILL{DO}\u2020\n\u2218 WANTYES                 ==&gt; YES\n\u2218 WANTYESQUEUEDNO         ==&gt; WANTNO and send DONT{WONT}\n\n\u2020 This behaviour is debatable; DONT{WONT} will never be answered by WILL{DO}\nover a reliable connection between TELNETs compliant with this RFC, so this\nwas chosen:\n  1. not to generate further messages, because if we know we're dealing with\n     a non-compliant TELNET we shouldn't trust it to be sensible;\n  2. to empty the queue sensibly.\n\nUpon receipt of WONT{DONT}, we choose based upon him{us} state:\n\u2219 NO                      ==&gt; NOCHANGE\n\u2219 YES                     ==&gt; NO and send DONT{WONT}\n\u2219 WANTNO                  ==&gt; NO\n\u2219 WANTNOQUEUEDYES         ==&gt; WANTYES and send DO{WILL}\n\u2219 WANTYES                 ==&gt; NO \u2021\n\u2219 WANTYESQUEUEDNO         ==&gt; NO \u203b\n\n\u2021 Here is the only spot a length-two queue could be useful; after a WILL{DO}\nnegotiation was refused, a queue of WONT{DONT} WILL{DO} would mean to request\nthe option again. This seems of too little utility and too much potential\nwaste; there is little chance that the other side will change its mind\nimmediately.\n\n\u203b Here we don't have to generate another request because we've{he's} been\n\"refused into\" the correct state anyway.\n\nIf we decide to ask him to enable {we want to enable ourself}:\n\u2218 NO              ==&gt; WANTYES and send DO{WILL}\n\u2218 YES             ==&gt; NOCHANGE; ERROR: already enabled\n\u2218 WANTNO          ==&gt; WANTNOQUEUEDYES\n\u2218 WANTNOQUEUEDYES ==&gt; NOCHANGE; ERROR: cannot initiate new request in the\n                      middle of negotiation.\n\u2218 WANTYES         ==&gt; NOCHANGE; ERROR: already negotiating for enable\n\u2218 WANTYESQUEUEDNO ==&gt; WANTYES\n\nIf we decide to ask him to disable {we want to disable ourself}:\n\u2219 NO              ==&gt; NOCHANGE; ERROR: already disabled\n\u2219 YES             ==&gt; WANTNO and send DONT{WONT}\n\u2219 WANTNO          ==&gt; NOCHANGE; error: already negotiating for disable\n\u2219 WANTNOQUEUEDYES ==&gt; WANTNO\n\u2219 WANTYES         ==&gt; WANTYESQUEUEDNO\n\u2219 WANTYESQUEUEDNO ==&gt; NOCHANGE; error: already queued a disable request\n                      and must not initiate new request in the middle of\n                      negotiation\n\nWe handle the option on our side by the same procedures, with DO&lt;-&gt;WILL,\nDONT&lt;-&gt;WONT, him&lt;-&gt;us swapped as shown above.\n</code></pre>\n\n<p>Update 2017/07/26:\nOne aspect that is a little confusing to me is the case when he has an option that is enabled (in YES state) and we want him to disable it - according to this we set our record of his state to WANTNO {and send him the DONT command} - but this has moved our record of the state <em>away from the YES state</em> and the guide suggests that the option is now to be considered <em>disabled</em> even though we have not yet got a WONT to confirm it - fair enough he MUST accept it as the disabled state corresponding to the vanilla NVT requires that - but surely it does not take effect until we get the acknowledgement?</p>\n"}, {"tags": ["c", "xcode", "strcat"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499881652, "post_id": 45064359, "comment_id": 77102055, "body": "1) <code>char String[256];</code> --&gt; <code>char String[256] = &quot;&quot;;</code> or <code>char String[256]; *String = 0;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499881697, "post_id": 45064359, "comment_id": 77102077, "body": "2) <code>i &lt; 257;</code> --&gt; <code>i &lt; sizeof(String)-1;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499881739, "post_id": 45064359, "comment_id": 77102106, "body": "3) <code>strcat(String,&amp;newChar);</code> --&gt; <code>strncat(String, &amp;newChar, 1);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499882228, "post_id": 45064359, "comment_id": 77102405, "body": "Aside: suggest either <code>char alphabets[27] = &quot;abcdefghijklmnopqrstuvxyz&quot;;</code> or <code>char alphabets[] = &quot;abcdefghijklmnopqrstuvxyz&quot;;</code> so a string terminator can be included."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1499882427, "post_id": 45064359, "comment_id": 77102534, "body": "@Chandrasekaran Dinesh Where is there the definition of the variable indexOfNewCha? Provide a minimum compiled function."}, {"owner": {"reputation": 273, "user_id": 3722559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50ae714cac6c3fe6897729aca735eaea?s=128&d=identicon&r=PG&f=1", "display_name": "schil227", "link": "https://stackoverflow.com/users/3722559/schil227"}, "edited": false, "score": 0, "creation_date": 1499885007, "post_id": 45064359, "comment_id": 77103955, "body": "side note, <code>for (int i = 0; i &lt; 257; i++)</code> should be checking for i &lt; 256. The char array &quot;String&quot; is 256 long, with indexes ranging from 0 to 255. your current for loop would access &quot;String&quot; out of bounds for the last round of i when i = 256."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 2, "last_activity_date": 1499881491, "creation_date": 1499881491, "answer_id": 45064397, "question_id": 45064359, "link": "https://stackoverflow.com/questions/45064359/random-spaces-added-when-using-strcat/45064397#45064397", "title": "Random spaces added when using strcat", "body": "<p><code>newChar</code> is a single <code>char</code>; <code>&amp;newChar</code> is <em>not</em> a string.  A string needs a null terminator; <code>strcat</code> is looking for one, and concatenating the stray characters it finds until it finds one (although this is undefined behavior, so it could cause the program to crash).</p>\n"}], "owner": {"reputation": 13, "user_id": 4027370, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chandrasekaran Dinesh", "link": "https://stackoverflow.com/users/4027370/chandrasekaran-dinesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 45064397, "answer_count": 1, "score": 0, "last_activity_date": 1499881491, "creation_date": 1499881371, "question_id": 45064359, "link": "https://stackoverflow.com/questions/45064359/random-spaces-added-when-using-strcat", "title": "Random spaces added when using strcat", "body": "<p>I am trying to continuously add char to the end of a string. I am doing this through running this in my main</p>\n\n<pre><code> char String[256];\nchar alphabets[26] = \"abcdefghijklmnopqrstuvxyz\";\nfor (int i = 0; i &lt; 257; i++) {\n\n            char newChar = alphabets[indexOfNewChar-1];\n            printf(\"new char = %c\\n\",newChar);\n            strcat(String,&amp;newChar);\n\n            printf(\"%s\\n\",String);\n}\n</code></pre>\n\n<p>when I ran this pile of code this is printed\n<code>\n    new char = b\nbk\u000bho\u000fbtj\ndfhhai bbdhgfcafgcfi   bbaccfeai   afebaci   aedgdddai   hei   hfedhbi   dabeedbi i   cfhi i   caddbhgbi   i   acfi cehbhcddcahbhbabi   aaadi   hi ffhhccbccfbbfggfdhebgeacecai cefdcdb</code></p>\n\n<p>As you can see there are spaces and new lines appearing randomly during the run.\nAfter realising the appearances of these random spaces, I tried to remove the blank spaces with</p>\n\n<pre><code>char* removeSpaces(char* input)\n{\n    int i,j;\n    char *output=input;\n    for (i = 0, j = 0; i&lt;strlen(input); i++,j++)\n    {\n        if (input[i]!=' ')\n            output[j]=input[i];\n        else\n            j--;\n    }\n    output[j]=0;\n    return output;\n}\n</code></pre>\n\n<p>However, this did not really affect the outcome as there were still appearances of blank spaces. How can I remove those blank spaces or better stop them from appearing.\nOn the side note, the code terminates after 160+ repeats of the for loop. How can I overcome this.</p>\n"}, {"tags": ["c", "floating-point", "rounding", "math.h", "trigonometry"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499883446, "post_id": 45063993, "comment_id": 77103104, "body": "Detail: as <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">typical float</a> cannot represent a number like <code>0.009</code>, <code>float x = 0.009;</code> will result in <code>x</code> with the exact value of <code>0.0089999996125698089599609375</code>.  In this case, the 3rd digit of the <code>float</code> is 8 and not 9.  Is that OK?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1499883873, "post_id": 45063993, "comment_id": 77103298, "body": "Re, &quot;I don&#39;t want to print it.&quot;  That&#39;s going to be a problem because <code>float</code> values don&#39;t have decimal digits.  Decimal digits only appear in the printed representation of <code>float</code> values.  There is no <code>float</code> value that is exactly equal to 0.003."}], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499880325, "post_id": 45064028, "comment_id": 77101245, "body": "I don&#39;t want the number to be rounded, the digits must stay the same. For example your way if I do 0.0036 the result becomes 0.004. I want it to be 0.003."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499880462, "post_id": 45064028, "comment_id": 77101323, "body": "The <code>floor</code> function will do that, at least for positive values.  I&#39;ve updated to use <code>trunc</code> instead which will work for positive and negative values."}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499880775, "post_id": 45064028, "comment_id": 77101504, "body": "And is there a way to output the result like exactly 0.003, no zeroes after it. Looks okay until now."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 1, "creation_date": 1499880947, "post_id": 45064028, "comment_id": 77101625, "body": "@KarinaK You need to use the <code>%.3f</code> format specifier for it to look that way.  The value 0.003 can&#39;t be exactly represented an a binary floating point number.  It might actually be 0.003000001 or 0.002999999."}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499881016, "post_id": 45064028, "comment_id": 77101667, "body": "But can it be stored as a value of 0.003, I mean I need it for calculation of  the third digit, not printing it anywhere."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 1, "creation_date": 1499881085, "post_id": 45064028, "comment_id": 77101716, "body": "@KarinaK As a floating point number, no not exactly.  Perhaps you should update your question regarding what you&#39;re <i>really</i> trying to accomplish by doing this."}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499881271, "post_id": 45064028, "comment_id": 77101823, "body": "Updated it, maybe it will be easier to understand."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499881645, "post_id": 45064028, "comment_id": 77102050, "body": "@KarinaK See my edit regarding how to get a particular digit."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 1, "creation_date": 1499884300, "post_id": 45064028, "comment_id": 77103531, "body": "@KarinaK, re &quot;I don&#39;t want the number to be rounded&quot;  It sounds like you are trying to convert a <code>float</code> value to an <code>int</code>.  The term of art for that conversion is always &quot;rounding.&quot;  Different <i>kinds</i> of rounding are specified as &quot;round up,&quot; &quot;round down,&quot; &quot;round toward zero,&quot; &quot;round to nearest&quot;,... but it&#39;s always called &quot;rounding.&quot;"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499884401, "post_id": 45064028, "comment_id": 77103594, "body": "@KarinaK, Re, &quot;the digits must stay the same.&quot;  Floating point values do not <i>have</i> decimal digits.  The only way you get decimal digits is by printing the number.  If you don&#39;t print it, then there are no &quot;digits&quot; that can &quot;stay the same.&quot;"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1499881496, "last_edit_date": 1499881496, "creation_date": 1499880042, "answer_id": 45064028, "question_id": 45063993, "link": "https://stackoverflow.com/questions/45063993/save-float-result-number-to-third-digit-no-rounding-in-c/45064028#45064028", "title": "Save float result number to third digit, no rounding in C", "body": "<p>You can scale the value up, use <code>trunc</code> to truncate toward zero, then scale down:</p>\n\n<pre><code>float result = trunc(cos(number) * 1000) / 1000;\n</code></pre>\n\n<p>Note that due to the inexact nature of floating point numbers, the result won't be the exact value.</p>\n\n<p>If you're looking to specifically extract the third decimal digit, you can do that as follows:</p>\n\n<pre><code>int digit = (int)(result * 1000) % 10;\n</code></pre>\n\n<p>This will scale the number up so that the digit in question is to the left of the decimal point, then extract that digit.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499880242, "post_id": 45064059, "comment_id": 77101200, "body": "Given that <code>0.001</code> cannot be exactly represented by binary floating point I&#39;d be surprised if this always gave the right result. I&#39;d ask for some argument for it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499880313, "post_id": 45064059, "comment_id": 77101238, "body": "@EOF You are right, I didn&#39;t want to go into this, given the OP is asking to place the result in <code>float</code>, which makes the whole requirement of having the &quot;truncated&quot; value in it somewhat questionable. I would propose to use fixed-point representation at all."}, {"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 0, "creation_date": 1499880949, "post_id": 45064059, "comment_id": 77101626, "body": "Look at the question, I updated it. It gives good enough result but i want the number to be saved as 0.00digit not 0.00digit00."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499883855, "post_id": 45064059, "comment_id": 77103289, "body": "@EOF Good point, yet I&#39;d expect the &quot;wrong&quot; result is uncommon as <code>result</code> is <code>float</code> and this answer uses <code>double</code> math which will cope with many edge cases.  Still  OP&#39;s goal is only partially clear."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1499881173, "last_edit_date": 1592644375, "creation_date": 1499880162, "answer_id": 45064059, "question_id": 45063993, "link": "https://stackoverflow.com/questions/45063993/save-float-result-number-to-third-digit-no-rounding-in-c/45064059#45064059", "title": "Save float result number to third digit, no rounding in C", "body": "<p>You can subtract from the number it's remainder from division by <code>0.001</code>:</p>\n<pre><code>result -= fmod(result, 0.001);\n</code></pre>\n<p><a href=\"https://ideone.com/VT9Zyx\" rel=\"nofollow noreferrer\">Demo</a></p>\n<p><strong>Update:</strong></p>\n<p>The question is updated with very conflicting requirements. If you have an <em>exact</em> <code>0.003</code> number, there will be <em>infinite</em> numbers of zeroes after it, and it is a mathematical property of numbers. OTOH, <code>float</code> representation cannot guarantee that every exact number of 3 decimal digits will be represented exactly. To solve this problem you will need to give up on using the <code>float</code> type and switch to a some sort of fixed point representation.</p>\n"}, {"comments": [{"owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "edited": false, "score": 1, "creation_date": 1499884651, "post_id": 45064566, "comment_id": 77103756, "body": "Thank you, the last code gist was what I needed but everything was appreciated."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1499884320, "last_edit_date": 1499884320, "creation_date": 1499882049, "answer_id": 45064566, "question_id": 45063993, "link": "https://stackoverflow.com/questions/45063993/save-float-result-number-to-third-digit-no-rounding-in-c/45064566#45064566", "title": "Save float result number to third digit, no rounding in C", "body": "<blockquote>\n  <p>0.00367 -> 0.003</p>\n</blockquote>\n\n<p>A <code>float</code> can typically represent about 2<sup>32</sup> different values exactly.  <code>0.00367</code> and <code>0.003</code> are not in that set.</p>\n\n<p>The closest <code>float</code> to <code>0.00367</code> is 0.0036700000055134296417236328125<br>\nThe closest <code>float</code> to <code>0.003__</code> is 0.0030000000260770320892333984375</p>\n\n<blockquote>\n  <p>I want to save the result up to the third digit</p>\n</blockquote>\n\n<p>This goal needs a compromise.  Save the result to a <code>float</code> near a multiple of  0.001.</p>\n\n<p>Scaling by 1000.0, truncating and dividing by 1000.0 will work for <em>most</em> values. </p>\n\n<pre><code>float y1 = truncf(x * 1000.0f) / 1000.0f;\n</code></pre>\n\n<p>The above gives a slightly wrong answer with some values near <code>x.xxx000...</code> and <code>x.xxx999...</code>.  Using higher precision can solve that.</p>\n\n<pre><code>float y2 = (float) (trunc(x * 1000.0) / 1000.0);\n</code></pre>\n\n<blockquote>\n  <p>I want to get the 3 and use it as an int in some calculation.</p>\n</blockquote>\n\n<p>Skip the un-scaling part and only keep 1 digit with <code>fmod()</code>.</p>\n\n<pre><code>int digit = (int) fmod((trunc(x * 1000.0), 10);\ndigit = abs(digit);\n</code></pre>\n\n<hr>\n\n<p>In the end, I suspect this approach will not completely satisfy OP's unstated \"use it as an <code>int</code> in some calculation.\".  There are many subtitles to FP math, especially when trying to use a <em>binary</em> FP, as are most <code>double</code>, in some sort of <em>decimal</em> way.</p>\n\n<p>Perhaps the following will meet OP's goal, even though it does <em>some</em> rounding.:</p>\n\n<pre><code>int third_digit = (int) lround(cos(number)*1000.0) % 10;\nthird_digit = abs(third_digit);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1499891424, "creation_date": 1499891424, "answer_id": 45066970, "question_id": 45063993, "link": "https://stackoverflow.com/questions/45063993/save-float-result-number-to-third-digit-no-rounding-in-c/45066970#45066970", "title": "Save float result number to third digit, no rounding in C", "body": "<p>Overkill, using sprintf()</p>\n\n<pre><code>double /* or float */ val = 0.00385475337;\nif (val &lt; 0) exit(EXIT_FAILURE);\nif (val &gt;= 1) exit(EXIT_FAILURE);\nchar tmp[55];\nsprintf(tmp, \"%.50f\", val);\nint third_digit = tmp[4] - '0';\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 7946648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q2VPH.jpg?s=128&g=1", "display_name": "Karina Kozarova", "link": "https://stackoverflow.com/users/7946648/karina-kozarova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 45064566, "answer_count": 4, "score": 1, "last_activity_date": 1499891424, "creation_date": 1499879931, "last_edit_date": 1499881186, "question_id": 45063993, "link": "https://stackoverflow.com/questions/45063993/save-float-result-number-to-third-digit-no-rounding-in-c", "title": "Save float result number to third digit, no rounding in C", "body": "<p>How to round result to third digit after the third digit.</p>\n\n<pre><code>float result = cos(number);\n</code></pre>\n\n<p>Note that I want to save the result up to the third digit, no rounding. And no, I don't want to print it with .3f, I need to save it as new value;</p>\n\n<p>Example:</p>\n\n<pre><code> 0.00367 -&gt; 0.003\n</code></pre>\n\n<p>N.B. No extra zeroes after 3 are wanted.</p>\n\n<p>Also, I need to be able to get the 3rd digit. For example if it is 0.0037212, I want to get the 3 and use it as an int in some calculation.</p>\n"}, {"tags": ["c", "header"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499879059, "post_id": 45063706, "comment_id": 77100587, "body": "The same way you write any library. Include whatever you need from the standard library. It has nothing to do with the specifics of what this library is doing."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1499879493, "post_id": 45063787, "comment_id": 77100796, "body": "Pretty sure having functions with the names of standard library functions is technically undefined behavior."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499987199, "post_id": 45063787, "comment_id": 77157069, "body": "@EOF  It is not UB.  I would not recommend it either."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1499879184, "creation_date": 1499879184, "answer_id": 45063787, "question_id": 45063706, "link": "https://stackoverflow.com/questions/45063706/how-should-i-extend-standard-functionality-like-string-functions-in-c/45063787#45063787", "title": "How should I extend standard functionality, like string functions in C?", "body": "<p>If you're creating a new set of functions, then you'll need to create your own header file with the declarations of those functions.</p>\n\n<p>If on the other hand you're <em>replacing</em> some existing string functions, i.e. the names and parameters are the same, then you don't need your own header as the system header will work for those functions.  And since the standard library functions are <em>weak symbols</em>, you can link these replacement functions normally and they will override the system functions.</p>\n"}], "owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571897922, "creation_date": 1499878905, "last_edit_date": 1499881651, "question_id": 45063706, "link": "https://stackoverflow.com/questions/45063706/how-should-i-extend-standard-functionality-like-string-functions-in-c", "title": "How should I extend standard functionality, like string functions in C?", "body": "<p>If I am writing my own string functions, the first instinct is to create a string.h header to contain the prototypes for those functions. Of course, there is already a string.h file which is part of the standard set of libraries in C. This library has functions like strcat and strlen, etc.</p>\n\n<p>If I am adding my own string handling functions, essentially extending what is already in the standard libraries, what is the right way to do that? Should I just create mystring.h and include string.h in it, or keep my stuff completely separate from the existing string.h? If I don't want to use string.h can I just implement my own string.h, or is that a bad idea?</p>\n\n<p>Note that I not re-writing strcat, I writing different functions that would ADDITIONAL to the existing ones, not replacements for them.</p>\n"}, {"tags": ["c", "algorithm", "probability", "probability-distribution"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1499878798, "post_id": 45063552, "comment_id": 77100463, "body": "What are the individual <code>exp(a*F(k))</code> values like? Are they very big? Very small? Are they a mixture of very big and very small? The last one is most likely to cause precision issues ..."}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1499879016, "post_id": 45063552, "comment_id": 77100570, "body": "This might help you: <a href=\"https://www.tutorialspoint.com/cprogramming/c_data_types.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_data_types.htm</a>"}, {"owner": {"reputation": 113, "user_id": 7170612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99272788a4d8fc055dfbea3f4135f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/7170612/scott"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1499879861, "post_id": 45063552, "comment_id": 77100999, "body": "@Useless The values vary a good bit, and can end up being rather large. I&#39;d say that typically 1&lt;a&lt;20 and .25&lt;F(k)&lt;36, which means rough worst case scenario for the last entry would be N*exp(720). Since all these terms are positive I was thinking of making some of the doubles unsigned. That should help right?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499879936, "post_id": 45063552, "comment_id": 77101033, "body": "@Scot Have you tried to see whether <code>exp(720)</code> is even different from <code>INFINITY</code> in your C implementation?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1499880967, "post_id": 45063552, "comment_id": 77101640, "body": "<code>exp(720)</code> is way too big for a <code>double</code> but apparently <code>long double</code> should be able to handle it."}, {"owner": {"reputation": 113, "user_id": 7170612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99272788a4d8fc055dfbea3f4135f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/7170612/scott"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499881119, "post_id": 45063552, "comment_id": 77101735, "body": "@EOF I have tried it and it registers <code>exp(720)</code> as infinity."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499881160, "post_id": 45063552, "comment_id": 77101756, "body": "@Scot I&#39;d say that confirms that the code you have provided is <i>not</i> acceptable."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1499883092, "post_id": 45063552, "comment_id": 77102903, "body": "Unsigned doubles are not a thing, btw, and one bit wouldn&#39;t make that much of a difference anyway"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1499883202, "post_id": 45063552, "comment_id": 77102966, "body": "Oh, and since you&#39;re trying to store the cdf values in your array, have you tried just calculating this in python (or something else with bignums) ahead of time, and seeing if you can scale the values back down while keeping the proportions?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499884977, "post_id": 45063552, "comment_id": 77103938, "body": "To match the formula I&#39;d expect <code>F(k+1);</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1499888901, "post_id": 45063552, "comment_id": 77105970, "body": "@Patrick87 There is no guarantee <code>long double</code> can represent it."}], "answers": [{"tags": [], "owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "is_accepted": false, "score": 0, "last_activity_date": 1499881685, "creation_date": 1499881685, "answer_id": 45064457, "question_id": 45063552, "link": "https://stackoverflow.com/questions/45063552/issue-of-precision-when-coding-discrete-distribution-in-c/45064457#45064457", "title": "Issue of precision when coding discrete distribution in c", "body": "<p>Given that your current code could cause evaluation of sub-expressions that fall outside of the finite range of representable values for <code>double</code>, I'd recommend rewriting the expression. Consider something like this:</p>\n\n<p>P(k) = [e<sup>a*F(k)</sup>]/[&Sigma;<sub>i=1,...,N</sub>e<sup>a * F(i)</sup>]</p>\n\n<p>P<sup>-1</sup>(k) = [&Sigma;<sub>i=1,...,N</sub>e<sup>a * F(i)</sup>]\n/ [e<sup>a*F(k)</sup>]</p>\n\n<p>P<sup>-1</sup>(k) = &Sigma;<sub>i=1,...,N</sub>[e<sup>a * F(i)</sup>\n/ e<sup>a*F(k)</sup>]</p>\n\n<p>P<sup>-1</sup>(k) = &Sigma;<sub>i=1,...,N</sub>[e<sup>a * F(i) - a * F(k)</sup>]</p>\n\n<p>P<sup>-1</sup>(k) = &Sigma;<sub>i=1,...,N</sub>[e<sup>a * (F(i) - F(k))</sup>]</p>\n\n<p>P(k) = [&Sigma;<sub>i=1,...,N</sub>[e<sup>a * (F(i) - F(k))</sup>]]<sup>-1</sup></p>\n\n<p>If you could provide a minimal, complete and testable example, you could probably get considerably better advice.</p>\n"}], "owner": {"reputation": 113, "user_id": 7170612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99272788a4d8fc055dfbea3f4135f25b?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/7170612/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499885865, "creation_date": 1499878386, "question_id": 45063552, "link": "https://stackoverflow.com/questions/45063552/issue-of-precision-when-coding-discrete-distribution-in-c", "title": "Issue of precision when coding discrete distribution in c", "body": "<p>I am relatively new to C and so when it comes to issues of precision I am always a bit worried. I am working with a rather larger code and at a specific point I need to select a value based off of a discrete probability distribution. Essentially what I need to do is select a value k=1,2,...N with probabilities given by the formula </p>\n\n<p>P(k) = [e<sup>a*F(k)</sup>]/[&Sigma;<sub>i=1,...,N</sub>e<sup>aF(i)</sup>],  </p>\n\n<p>where F is just some function that uses k as an input and a is a real number. [Sorry the formula looks rough I wasn't sure how to format it.] My code looks (roughly) like this so far. I've had to make some changes to aid readability out of context.</p>\n\n<pre><code>int k;\nint N=10;\ndouble a=5.5; //In the code it is just a positive real number\ndouble xtemp=0;\ndouble X[10];\ndouble fk;\n\nfor(k=0;k&lt;N;k++){\n  fk = F(k); // Here F returns a double\n  xtemp += exp(a*fk);\n  X[k]=xtemp;\n}\nxtemp = xtemp*U01(); //U01 returns a uniformly random number on [0,1]\nfor(k=0;k&lt;K;k++){\n   if(xtemp&lt;=X[k]){\n     return k;\n   }\n}\n</code></pre>\n\n<p>This should give the desired result from a mathematical perspective, however someone better at coding than me said the xtemp could become problematic and become imprecise. I was wondering how you could do error handling for this? I'd also be open to a better way to implement the idea. I appreciate any help and advice.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499877435, "post_id": 45063257, "comment_id": 77099731, "body": "I don&#39;t see how the length varies here. Pass the length as a parameter to the function which needs to know it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499877532, "post_id": 45063257, "comment_id": 77099793, "body": "This code does not make sense, nor does it correspond to the title. Learn C from a good textbook, not some obscure online courses/tutorials or - worst - youtube videos."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499877605, "post_id": 45063257, "comment_id": 77099826, "body": "@Olaf deleted them."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499877620, "post_id": 45063257, "comment_id": 77099835, "body": "The number of command line arguments can be known with <code>argc</code> as <code>int main(int argc, char *argv[])</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499877707, "post_id": 45063257, "comment_id": 77099882, "body": "@BLUEPIXY: There is nothing passed to <code>main</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499877776, "post_id": 45063257, "comment_id": 77099921, "body": "The <code>tile_numbers</code> array that your <code>print</code> function sees is the global <code>tile_numbers</code> array of length 1. But your <code>print</code> function is printing 10 elements, going past the end of the array. That results in <i>undefined behavior</i>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499877820, "post_id": 45063257, "comment_id": 77099936, "body": "@Olaf So, OP need to change the <code>main</code> signature."}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 0, "creation_date": 1499879051, "post_id": 45063257, "comment_id": 77100584, "body": "I was just trying to show the point, this isn&#39;t the actual code."}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 0, "creation_date": 1499879099, "post_id": 45063257, "comment_id": 77100601, "body": "theoretically, if I want to use an array globally, but won&#39;t know the size till later, how do I do that?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499879823, "post_id": 45063257, "comment_id": 77100972, "body": "Theoretically, the effective size must be determined before using the array. Use variable intended for size, or if you can use it, set a sentinel."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499880539, "post_id": 45063257, "comment_id": 77101371, "body": "Also You can&#39;t create a dynamically sized array(E.g VLA) with file scope(as globally) on pure arrays. Use a pointer instead."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499888617, "post_id": 45063257, "comment_id": 77105831, "body": "@BLUEPIXY: He needs to clarify. As-is, it is not clear what he wants."}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499888977, "post_id": 45063257, "comment_id": 77106023, "body": "@Olaf What I wanted is the one that I starred as the answer."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499878017, "post_id": 45063406, "comment_id": 77100045, "body": "I think OP wants <code>tile_numbers</code> to be a global variable."}, {"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499878051, "post_id": 45063406, "comment_id": 77100054, "body": "@IanAbbott It can be declared globally and allocated when needed? Or have I misunderstood?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499878236, "post_id": 45063406, "comment_id": 77100163, "body": "If it is declared globally, you can&#39;t call <code>malloc</code> in the initializer, so you&#39;d need a separate assignment statement in the code. I mean as the statement is currently written, it would only work for a variable of automatic storage class. (I&#39;m sure <i>you</i> know that, but OP seems to be a beginner.)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 2, "creation_date": 1499879291, "post_id": 45063406, "comment_id": 77100692, "body": "If your Compiler tells you that you need that cast on Malloc, then you should start looking for a C compiler."}, {"owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "edited": false, "score": 0, "creation_date": 1499880940, "post_id": 45063406, "comment_id": 77101618, "body": "&gt; char *tile_numbers;  This is what I was looking for, that&#39;s all I needed. Thank you."}], "tags": [], "owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "is_accepted": true, "score": 0, "last_activity_date": 1499878899, "last_edit_date": 1499878899, "creation_date": 1499877873, "answer_id": 45063406, "question_id": 45063257, "link": "https://stackoverflow.com/questions/45063257/how-to-use-an-array-in-multiple-functions-when-you-dont-know-what-the-length-wi/45063406#45063406", "title": "How to use an array in multiple functions when you don&#39;t know what the length will be at the start of your program", "body": "<p>Instead of arrays, you can dynamically allocate memory using <code>malloc()</code>. Suppose at run time you have the size of the array stored in an <code>int</code> variable <code>n</code>. Then, you can allocate memory using</p>\n\n<pre><code>char *tile_numbers = (char*)malloc(sizeof(char)*n);\n</code></pre>\n\n<p>Then, you can index the memory locations as before, as <code>tile_numbers[i]</code> for any <code>i</code> in the range <code>0</code> to <code>n-1</code>.</p>\n\n<hr>\n\n<p>If you need it to declare it globally, separate the declaration and assignment. Globally, use</p>\n\n<pre><code>char *tile_numbers;\n</code></pre>\n\n<p>In the function where you get the size,</p>\n\n<pre><code>tile_numbers = (char*)malloc(sizeof(char)*n);\n</code></pre>\n\n<p>In addition, if you need to resize the amount of memory, you can use <code>realloc()</code>,</p>\n\n<pre><code>tile_numbers = (char*)realloc(tile_numbers,new_size);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1499889351, "creation_date": 1499889351, "answer_id": 45066461, "question_id": 45063257, "link": "https://stackoverflow.com/questions/45063257/how-to-use-an-array-in-multiple-functions-when-you-dont-know-what-the-length-wi/45066461#45066461", "title": "How to use an array in multiple functions when you don&#39;t know what the length will be at the start of your program", "body": "<p><strong>Don't use a global</strong> - define the array in <code>main</code> (or wherever it is initially allocated), then pass it as an argument to the functions that need to use it:</p>\n\n<pre><code>void print( size_t size, const char *arr)\n{\n  for ( size_t i = 0; i &lt; size; i++ )\n    printf( \"char: %c\\n\", arr[i] );\n}\n\nint main( int argc, char **argv )\n{\n  // define tileNumbers here -- we'll get into details below\n\n  print( arraySize, tileNumbers );\n  return 0;\n}\n</code></pre>\n\n<p>Do not get in the habit of using global (file scope) variables - it leads to code that's hard to maintain and extend.  <em>Sometimes</em> it's justified, but you don't know what those times are yet.  As a rule, functions should only share information through parameters or return values; they should not share global state.  </p>\n\n<p>Since you don't know how big <code>tileNumbers</code> needs to be until runtime, you can't allocate it as a fixed-size array and resize it later.  You'll need to defer the definition of the array until you know the size.  </p>\n\n<p>Prior to C99, your only option was to use dynamic memory (i.e., <code>malloc</code> or <code>calloc</code>):</p>\n\n<pre><code>#include &lt;stdlib.h&gt; // for malloc declaration\n...\nsize_t arraySize = getArraySize( );  // where getArraySize is a stand in for any code that sets arraySize\n\nchar *tileNumbers = malloc( sizeof *tileNumbers * arraySize );\nif ( tileNumbers )\n{\n  // code to initialize tileNumbers goes here\n\n  print( arraySize, tileNumbers );\n\n  // deallocate memory when we're done with it\n  free( tileNumbers );\n}\n</code></pre>\n\n<p>Since C99, you can use what's called a <em>variable-length array</em> (VLA).  A VLA behaves <em>mostly</em> like a regular fixed-length array, but since its size isn't known until runtime, it can't be declared at file scope (can't use it as a global), can't be a member of a <code>struct</code> or <code>union</code> type, and can't have an initializer in its declaration.</p>\n\n<pre><code>size_t arraySize = getArraySize( );  // where getArraySize is a stand in for any code that sets arraySize;\n\nchar tileNumbers[arraySize];\n\n// code to initialize tileNumbers goes here\n\nprint( arraySize, tileNumbers );\n</code></pre>\n\n<p>Either way, the prototype for <code>print</code> will stay the same.  In the first case, we're passing a pointer.  In the second case, we're passing an array expression, which <em>decays</em> to a pointer expression when evaluated.  </p>\n"}], "owner": {"reputation": 115, "user_id": 5708929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ECmq7YAftyc/AAAAAAAAAAI/AAAAAAAAAFs/kqtYYLdUyGc/photo.jpg?sz=128", "display_name": "sruly", "link": "https://stackoverflow.com/users/5708929/sruly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 45063406, "answer_count": 2, "score": -1, "last_activity_date": 1499889351, "creation_date": 1499877333, "last_edit_date": 1499878206, "question_id": 45063257, "link": "https://stackoverflow.com/questions/45063257/how-to-use-an-array-in-multiple-functions-when-you-dont-know-what-the-length-wi", "title": "How to use an array in multiple functions when you don&#39;t know what the length will be at the start of your program", "body": "<p>I have a project where I need to use an array within two different functions, but the length of it varies based on command line arguments, so I won't know what it is until later. How can I initialize the array globally, but then when I know the length later I can change the length. Here is the most simplified version of the problem I could make: </p>\n\n<pre><code>#define _XOPEN_SOURCE 500\n\n#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n\nchar tile_numbers[1];\nvoid print (void);\n\nint main (void)\n{\n    int x = 7;\n    char tile_numbers[x];\n    tile_numbers[0] = 'h';\n    tile_numbers[1] = 'e';\n    tile_numbers[2] = 'l';\n    tile_numbers[3] = 'l';\n    tile_numbers[4] = 'o';\n    tile_numbers[5] = '!';\n\n    print();\n\n}\n\nvoid print (void)\n{\n\n    for(int i = 0; i &lt; 10 ; i++)\n    {\n        printf(\"char: %c\", tile_numbers[i]);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1499880661, "post_id": 45062925, "comment_id": 77101445, "body": "Does the first sentence have anything to do with your question? The second seems unrelated and missing information. What input are you given?"}, {"owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1499880751, "post_id": 45062925, "comment_id": 77101487, "body": "Yes, here the students are the objects. Is it clear now?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1499880935, "post_id": 45062925, "comment_id": 77101611, "body": "No, it\u2018s not. What input are you given?"}, {"owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1499880951, "post_id": 45062925, "comment_id": 77101630, "body": "Sorry for the poor presentation, i will modify it to make it more clear"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499880990, "post_id": 45062925, "comment_id": 77101652, "body": "Also, I don&#39;t understand how this is not self-contradictory: &quot;Also, if the class leader has to arrange the students in a line where each student would have lost the match with the student in front of him. student may or may not have won the match with the student front of front of him.&quot;"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499881073, "post_id": 45062925, "comment_id": 77101706, "body": "@MadPhysicist It is clear... See let 1 defeat 2 and 2 defeat three. And there is no information about 1 and 3 relationship. So this means they will in order 1 2 3."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499881089, "post_id": 45062925, "comment_id": 77101720, "body": "You don&#39;t need an explicit directed graph. If every student plays every other student, the structure can be represented by half of an NxN matrix."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499881137, "post_id": 45062925, "comment_id": 77101745, "body": "@VidorVistrom. Can you please update the question to reflect that? The sentences you have now do not mean that at all."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1499881176, "post_id": 45062925, "comment_id": 77101767, "body": "@VidorVistrom. It also says &quot;each student plays against all other students in the class&quot;, meaning that you do have information about 1 and 3."}, {"owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "edited": false, "score": 0, "creation_date": 1499881234, "post_id": 45062925, "comment_id": 77101799, "body": "Please give me 5 minutes i will check the source and update the question"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499881647, "post_id": 45062925, "comment_id": 77102051, "body": "@MadPhysicist I have edited the question, now it has to be peer reviewed"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 2, "creation_date": 1499884418, "post_id": 45062925, "comment_id": 77103611, "body": "I am not sure about what to do when the graph is cyclic, but if it is acyclic, best thing would be make a priority queue arrange from highest to lowest. Make a directed graph of same priority members, do its topological sort to determine its order. Is this a homework?"}], "answers": [{"comments": [{"owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "edited": false, "score": 0, "creation_date": 1499882798, "post_id": 45064693, "comment_id": 77102723, "body": "OK, but can you specify how to sort the list"}, {"owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "edited": false, "score": 0, "creation_date": 1499883306, "post_id": 45064693, "comment_id": 77103024, "body": "in my structure i was keeping &quot;wins&quot; as the sum. And what if 2 student have same wins then how to sort. And if this case never arises i will need to prove the same."}, {"owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "reply_to_user": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "edited": false, "score": 0, "creation_date": 1499885343, "post_id": 45064693, "comment_id": 77104138, "body": "to prove you have a correct answer is trivial: go down the list and check that each person lost to the person in front. for i = 1;i&lt;n if(que[i].win[i-1]). note that you don&#39;t care who beat the person in front and you don&#39;t care who the last person beat, so cyclic wins is fine. when that easy solution doesn&#39;t work you can treat this as collections of nodes with one-way connections to other nodes. you need to use a path finding system looking for a path that trverses each node only once."}], "tags": [], "owner": {"reputation": 494, "user_id": 3407289, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpLSX.png?s=128&g=1", "display_name": "Supamee", "link": "https://stackoverflow.com/users/3407289/supamee"}, "is_accepted": false, "score": 1, "last_activity_date": 1499883090, "last_edit_date": 1499883090, "creation_date": 1499882541, "answer_id": 45064693, "question_id": 45062925, "link": "https://stackoverflow.com/questions/45062925/data-structure-required-for-arranging-objects-based-on-a-rule/45064693#45064693", "title": "Data structure required for arranging objects based on a rule", "body": "<p>That data structure won't work. Whatever structure you chose must be able to store who the student beat/was beaten by. Something like this world work:</p>\n\n<pre><code>struct node{\n    int student_id\n    bool wins[n]\n}\n</code></pre>\n\n<p>where wins[n] would represent a win against student ID==n\n from  there, it is path finding but in \"normal\" circumstances you could sum wins, sort by that and check that that is correct making changes if it is not</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499890169, "post_id": 45065803, "comment_id": 77106628, "body": "Not sure if your algorithm provides a general solution."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499890540, "post_id": 45065803, "comment_id": 77106815, "body": "@MadPhysicist there can be multiple solutions to this problem. Even if you do a topological sort, multiple solutions exist. This should work because alphabetically you are starting from lowest and placing losers after. And this will give you one of the solutions"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499893150, "post_id": 45065803, "comment_id": 77108064, "body": "At the very least you should start by checking if there is a student that won all their games and if there is a student that lost all their games. There can only be one of each, and they must be placed at the beginning and end of the list, respectively, or the solution will not work."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1499893906, "post_id": 45065803, "comment_id": 77108423, "body": "@MadPhysicist It shall automatically place, since you are looking up both the current string and the win list(in Alphabetical order). I tried that too"}], "tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1499887146, "last_edit_date": 1499887146, "creation_date": 1499886769, "answer_id": 45065803, "question_id": 45062925, "link": "https://stackoverflow.com/questions/45062925/data-structure-required-for-arranging-objects-based-on-a-rule/45065803#45065803", "title": "Data structure required for arranging objects based on a rule", "body": "<blockquote>\n  <p>First student will play against N-1 players</p>\n  \n  <p>Second student shall play against N-2 remaining players</p>\n  \n  <p>.</p>\n  \n  <p>.</p>\n  \n  <p>.</p>\n  \n  <p>N-1 shall play against 1 remaining player.</p>\n  \n  <p>Nth player has played against all by now.</p>\n</blockquote>\n\n<p>Hence number of matches played: </p>\n\n<blockquote>\n  <p>N-1+N-2....+1+0= N(N-1)/2</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>I'm thinking of keeping a Directed graph based on who wins on whom,\n  and then do a topological sort, will it work?</p>\n</blockquote>\n\n<p>It should work when the graph is Acyclic. Just make sure that direction is from A to B when A def. B. Else you will have to reverse the stack trace. </p>\n\n<p>I am skeptical about cyclic scenario. But there is a simpler way:</p>\n\n<p>Let there be 5 players: A B C D E</p>\n\n<p>Sort the list on the basis of wins like this:</p>\n\n<p>x def y(x->y)</p>\n\n<p>A->B</p>\n\n<p>A->D</p>\n\n<p>B->C</p>\n\n<p>B->D</p>\n\n<p>B->E</p>\n\n<p>C->A</p>\n\n<p>D->C</p>\n\n<p>D->E</p>\n\n<p>E->A</p>\n\n<p>E->C</p>\n\n<p>Now start by first win listed above.</p>\n\n<p>A->B\nString: A B</p>\n\n<p>A->D\nNow D can come either before B or after B.\nOn look-up, B->D. Implies String: A B D</p>\n\n<p>B->C\nOn look-up, D->C\nString: A B D C</p>\n\n<p>B->E\nOn look-up, E->C\nThis implies E has to come before C. \nOn-look up D->E</p>\n\n<p>String: A B D E C</p>\n\n<p>String length is 5. STOP.</p>\n"}], "owner": {"reputation": 250, "user_id": 8043039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bca7dce08cb21d2682ab600231c95a5e?s=128&d=identicon&r=PG&f=1", "display_name": "trim24", "link": "https://stackoverflow.com/users/8043039/trim24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 1, "accepted_answer_id": 45065803, "answer_count": 2, "score": 2, "last_activity_date": 1499887146, "creation_date": 1499876170, "last_edit_date": 1499884574, "question_id": 45062925, "link": "https://stackoverflow.com/questions/45062925/data-structure-required-for-arranging-objects-based-on-a-rule", "title": "Data structure required for arranging objects based on a rule", "body": "<p>N students in a class play a game against each other, where each student plays against all other students in the class.</p>\n\n<p>Also, the class leader has to arrange the students in a line, where each student lost the match with the student immediately in front of him.</p>\n\n<blockquote>\n  <p>For example: </p>\n  \n  <p>Let there be 4 students A, B, C, and D</p>\n  \n  <p>Total number of matches: 6( (A,B), (A,C), (A,D), (B,C), (B,D), (C,D) )</p>\n  \n  <p>Match results:</p>\n  \n  <p>A def B</p>\n  \n  <p>C def A</p>\n  \n  <p>A def D</p>\n  \n  <p>C def B</p>\n  \n  <p>B def D</p>\n  \n  <p>C def D</p>\n  \n  <p>So the order is: C A B D</p>\n</blockquote>\n\n<p>For storing the student objects, I am using the following data structure:</p>\n\n<pre><code>struct node {\n    int student_id;\n    int wins;\n}\n</code></pre>\n\n<p>I am using a priority queue to arrange the students, with more priority given to those who have more wins.</p>\n\n<p>If two or more objects have same priority then how do I arrange them?</p>\n\n<p>I'm thinking of keeping a directed graph based on who wins against whom, and then doing a topological sort. Will it work?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499876278, "post_id": 45062866, "comment_id": 77099128, "body": "Your loop that calculates <code>Total</code> isn&#39;t adding the amounts from each month. It&#39;s just adding the last month <code>NUMMONTHS</code> times."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499876707, "post_id": 45062866, "comment_id": 77099379, "body": "Why are you printing the total in the input function, not the print function?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499877598, "post_id": 45062866, "comment_id": 77099820, "body": "Curious why 12 in <code>char months[NUMMONTHS][12]</code>?  Suggest <code>const char *months[NUMMONTHS] = {   &quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, ...};</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499876591, "post_id": 45063015, "comment_id": 77099309, "body": "He wants to start afresh each year, to get the yearly totals."}, {"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499876626, "post_id": 45063015, "comment_id": 77099333, "body": "@Barmar I seem to misunderstand - isn&#39;t that what I did?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1499876672, "post_id": 45063015, "comment_id": 77099363, "body": "Sorry, misread what you wrote."}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1499877181, "post_id": 45063015, "comment_id": 77099600, "body": "Jeesus... I somewhat knew that I had to re-assign total = 0 somewhere but was obviously too blind to see.  Thanks for the inputs guys :)"}, {"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "reply_to_user": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1499877295, "post_id": 45063015, "comment_id": 77099664, "body": "@BanjoFox Look at it this way - each iteration of the outer loop represents a year, and each iteration of the inner loop represents a month in the particular year represented by the current iteration. You want to refresh each year. So you do it in the outer loop."}, {"owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "edited": false, "score": 0, "creation_date": 1499881603, "post_id": 45063015, "comment_id": 77102021, "body": "@GoodDeeds - That makes sense."}], "tags": [], "owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "is_accepted": true, "score": 2, "last_activity_date": 1499877423, "last_edit_date": 1499877423, "creation_date": 1499876506, "answer_id": 45063015, "question_id": 45062866, "link": "https://stackoverflow.com/questions/45062866/how-to-clear-the-value-of-a-sum-after-a-given-number-of-iterations/45063015#45063015", "title": "How to clear the value of a sum after a given number of iterations?", "body": "<p>Just after you leave the inner loop, but inside the outer loop, reset the value of <code>Total</code> by setting it to <code>0</code>.</p>\n\n<pre><code>for (int year = 0; year &lt; NUMYEARS; year++) {\n  total = 0.0;\n  for (int month = 0; month &lt; NUMMONTHS; month++) {\n    printf(\"Enter rain for %d, %d:\\n\", year + 1, month + 1);\n    scanf(\"%f\", &amp; Rain);\n    Raindata[year][month] = Rain;\n    total = total + Rain;\n  }\n  printf(\"Total rainfall: %.2f\\t\\n\", total);\n}\n</code></pre>\n\n<p>This way, you start afresh from zero each year.</p>\n"}, {"comments": [{"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499876847, "post_id": 45063022, "comment_id": 77099440, "body": "small typo on your 8th line: <code>Randata</code> should be <code>Raindata</code>."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1499876967, "last_edit_date": 1499876967, "creation_date": 1499876531, "answer_id": 45063022, "question_id": 45062866, "link": "https://stackoverflow.com/questions/45062866/how-to-clear-the-value-of-a-sum-after-a-given-number-of-iterations/45063022#45063022", "title": "How to clear the value of a sum after a given number of iterations?", "body": "<p>Calculate the total in <code>printdata()</code>, and set it to <code>0</code> at the beginning of each year.</p>\n\n<pre><code>void printdata() {\n  // Print data\n  printf(\"year\\t month\\t rain\\n\");\n  for (int year = 0; year &lt; NUMYEARS; year++) {\n    float total = 0;\n    for (int month = 0; month &lt; NUMMONTHS; month++) {\n      printf(\"%s\\t %s\\t %5.2f\\n\", years[year], months[month], Raindata[year][month]);\n      total += Raindata[year][month];\n    }\n    printf(\"%s Total\\t %6.2f\\n\", total);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 224, "user_id": 6779209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cpqbN.jpg?s=128&g=1", "display_name": "BanjoFox", "link": "https://stackoverflow.com/users/6779209/banjofox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1499919618, "accepted_answer_id": 45063015, "answer_count": 2, "score": 1, "last_activity_date": 1499877423, "creation_date": 1499875964, "question_id": 45062866, "link": "https://stackoverflow.com/questions/45062866/how-to-clear-the-value-of-a-sum-after-a-given-number-of-iterations", "closed_reason": "Needs details or clarity", "title": "How to clear the value of a sum after a given number of iterations?", "body": "<p>Please pardon the wording as I am struggling to describe the issue properly.</p>\n\n<p>I am working on a program to create monthly rainfall summaries across a number of years. Right now the program loops through 12 months over 5 years and will print the results.</p>\n\n<p>Unfortunately I am not able to figure out how to properly calculate the yearly totals. For example: If I input 1 for the first 12 values (i.e. Year 1) then the total is 12. If I do the same for Year 2 then the total becomes 24. It -looks- as though it is printing the sum of values from all years and not just the sum WITHIN a year.</p>\n\n<p>This is a summarized version of what I am seeing:</p>\n\n<pre><code>Do you want to input Precipitation data? (y for yes)\ny\nEnter rain for 1, 1:\n1\nEnter rain for 1, 2:\n1\n... \n1\nEnter rain for 1, 11:\n1\nEnter rain for 1, 12:\n1\nTotal rainfall: 12.00   \nEnter rain for 2, 1:\n1\nEnter rain for 2, 2:\n1\n...\nEnter rain for 2, 12:\n1\nTotal rainfall: 24.00\n</code></pre>\n\n<p>When I tried building a separate loop such as the one below the values are always 0.00:</p>\n\n<pre><code>void inputdata() {\n    /* variable definition: */\n    float Rain = 1.0;\n    float total = 0.0;\n\n    // Input Data\n    for (int year = 0; year &lt; NUMYEARS; year++) {\n      for (int month = 0; month &lt; NUMMONTHS; month++) {\n        printf(\"Enter rain for %d, %d:\\n\", year + 1, month + 1);\n        scanf(\"%f\", &amp; Rain);\n        Raindata[year][month] = Rain;\n      }\n      printf(\"Total rainfall: %.2f\\t\\n\", total);\n    }\n    for (int month = 0; month &lt; NUMMONTHS; month++) {\n        total = total + Rain;\n    }\n  }\n</code></pre>\n\n<p>The biggest frustration is that I can almost see how it is performing the math operations but just not how to fix them.\n<br />\nHere is my full code:</p>\n\n<pre><code>#define NUMMONTHS 12\n#define NUMYEARS 5\n#include &lt;stdio.h&gt;\n\n// function prototypes\nvoid inputdata();\nvoid printdata();\n\n// Global variables\n// These are available to all functions\nfloat Raindata[NUMYEARS][NUMMONTHS];\nchar years[NUMYEARS][5] = {\n  \"2011\", \"2012\", \"2013\",\n  \"2014\", \"2015\"\n};\nchar months[NUMMONTHS][12] = {\n  \"Jan\", \"Feb\", \"Mar\", \"Apr\",\n  \"May\", \"Jun\", \"Jul\", \"Aug\",\n  \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n};\n\nint main() {\n    char enterData = 'y';\n    printf(\"Do you want to input Precipatation data? (y for yes)\\n\");\n    scanf(\"%c\", &amp; enterData);\n    if (enterData == 'y') {\n      // Call Function to Input data\n      inputdata();\n      // Call Function to display data\n      printdata();\n    } else {\n      printf(\"No data was input at this time\\n\");\n    }\n    printf(\"Please try the Precipitation program again. \\n\");\n    return 0;\n  }\n\n// function to inputdata\nvoid inputdata() {\n    /* variable definition: */\n    float Rain = 1.0;\n    float total = 0.0;\n\n    // Input Data\n    for (int year = 0; year &lt; NUMYEARS; year++) {\n      for (int month = 0; month &lt; NUMMONTHS; month++) {\n        printf(\"Enter rain for %d, %d:\\n\", year + 1, month + 1);\n        scanf(\"%f\", &amp; Rain);\n        Raindata[year][month] = Rain;\n        total = total + Rain;\n      }\n      printf(\"Total rainfall: %.2f\\t\\n\", total);\n    }\n  }\n\n// Function to printdata\nvoid printdata() {\n  // Print data\n  printf(\"year\\t month\\t rain\\n\");\n  for (int year = 0; year &lt; NUMYEARS; year++) {\n    for (int month = 0; month &lt; NUMMONTHS; month++) {\n\n      printf(\"%s\\t %s\\t %5.2f\\n\", years[year], months[month], Raindata[year][month]);\n    }    \n  }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1499874611, "post_id": 45062351, "comment_id": 77098067, "body": "How does that error mean it used the built-in library?"}, {"owner": {"reputation": 317, "user_id": 5701186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6352e97454d21a2dd25022d3daadfe5?s=128&d=identicon&r=PG&f=1", "display_name": "alsaleem", "link": "https://stackoverflow.com/users/5701186/alsaleem"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1499874776, "post_id": 45062351, "comment_id": 77098182, "body": "I am using SW4STM32 under eclipse."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1499874781, "post_id": 45062351, "comment_id": 77098185, "body": "it only uses the standard one cos you&#39;re not supplying an alternative"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 0, "creation_date": 1499874833, "post_id": 45062351, "comment_id": 77098219, "body": "You can include any header you want that defines <code>int printf(const char *format, ...)</code>."}, {"owner": {"reputation": 317, "user_id": 5701186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6352e97454d21a2dd25022d3daadfe5?s=128&d=identicon&r=PG&f=1", "display_name": "alsaleem", "link": "https://stackoverflow.com/users/5701186/alsaleem"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1499875015, "post_id": 45062351, "comment_id": 77098355, "body": "@Scott Hunter: it is not error. it is a warning only."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499875053, "post_id": 45062351, "comment_id": 77098379, "body": "Using the stream-IO functions on bare-metal embedded platforms is most times a bad idea. They just bloat the code, attract a lot of secondary functions and are slow. Use specialised functions to serialise data instead. And gcc is not a linker and that is not a linker warning."}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 5701186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6352e97454d21a2dd25022d3daadfe5?s=128&d=identicon&r=PG&f=1", "display_name": "alsaleem", "link": "https://stackoverflow.com/users/5701186/alsaleem"}, "edited": false, "score": 0, "creation_date": 1499874870, "post_id": 45062471, "comment_id": 77098242, "body": "Thanks. I will test it. Bear with me."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1499875542, "last_edit_date": 1499875542, "creation_date": 1499874775, "answer_id": 45062471, "question_id": 45062351, "link": "https://stackoverflow.com/questions/45062351/removing-reference-to-printf-built-in-function/45062471#45062471", "title": "removing reference to printf built-in function", "body": "<p>If you linked printf-stdarg.c into your executable, then that function will be called instead of the system defined <code>printf</code>.  The functions in standard library are <strong>weak symbols</strong>, which means you can define a function of the same name which will override the system function.</p>\n\n<p>Removing <code>#include &lt;stdio.h&gt;</code> doesn't prevent the system library from being linked in.  It just gets rid of the function prototypes your code needs.  </p>\n\n<p>Put the includes back in your code and link with printf-stdarg.c, and your code will use those functions.</p>\n"}], "owner": {"reputation": 317, "user_id": 5701186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6352e97454d21a2dd25022d3daadfe5?s=128&d=identicon&r=PG&f=1", "display_name": "alsaleem", "link": "https://stackoverflow.com/users/5701186/alsaleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 45062471, "answer_count": 1, "score": 0, "last_activity_date": 1499875542, "creation_date": 1499874476, "question_id": 45062351, "link": "https://stackoverflow.com/questions/45062351/removing-reference-to-printf-built-in-function", "title": "removing reference to printf built-in function", "body": "<p>I faced a stack overflow problem in my STM32F4xx project. It came out that printf is the cause. FreeRTOS support suggests to use printf-stdarg.c instead.\nI have removed all stdio.h includes in my project. It complains of \"incompatible implicit declaration of built-in function 'printf'\" but compiles OK meaning the linker has used the built-in library.</p>\n\n<p>My question is how to how to prevent linker (gcc) from using built-in printf/sprintf function.</p>\n"}, {"tags": ["c", "autotools", "automake"], "comments": [{"owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 2, "creation_date": 1499882277, "post_id": 45061490, "comment_id": 77102439, "body": "You do not hardcode the location of a convenience library in autotools."}, {"owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1499882408, "post_id": 45061490, "comment_id": 77102528, "body": "You might want to add a hook to move the library to the wished location after make. As i remember the rule was all-local. You can check it in the official documentation. I dont have computer at the moment"}, {"owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "reply_to_user": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1499887414, "post_id": 45061490, "comment_id": 77105242, "body": "@VicenteAdolfoBoleaS&#225;nchez I guess I could add a hook but according to <a href=\"https://www.lrde.epita.fr/~adl/dl/autotools.pdf\" rel=\"nofollow noreferrer\">this slide 34</a> <code>libdir = exec-prefix&#47;lib</code> so shouldnt the behaviour I am looking for be default if i use <code>AC_PREFIX_DEFAULT=(.)</code> ?  When I use <code>noinst_LIBRARIES=foo.a</code> with <code>AC_PREFIX_DEFAULT(.)</code> it builds to the directory of the Makefile.am (in my question example <code>top_srcdir&#47;foobar</code> where I want it to build to <code>top_srcdir&#47;lib</code>)"}, {"owner": {"reputation": 5591, "user_id": 5728095, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eef72e89aff5e243c30384af15ed51c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii", "link": "https://stackoverflow.com/users/5728095/sergii"}, "edited": false, "score": 0, "creation_date": 1499889501, "post_id": 45061490, "comment_id": 77106294, "body": "Add correspond programming language tag please!"}, {"owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "reply_to_user": {"reputation": 5591, "user_id": 5728095, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eef72e89aff5e243c30384af15ed51c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii", "link": "https://stackoverflow.com/users/5728095/sergii"}, "edited": false, "score": 0, "creation_date": 1499889626, "post_id": 45061490, "comment_id": 77106355, "body": "@Sergii My question is related to autotools though, I am coding in C I guess but that does that matter?"}, {"owner": {"reputation": 5591, "user_id": 5728095, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eef72e89aff5e243c30384af15ed51c7?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii", "link": "https://stackoverflow.com/users/5728095/sergii"}, "edited": false, "score": 0, "creation_date": 1499889925, "post_id": 45061490, "comment_id": 77106511, "body": "I know core <code>C</code>. And I think if you&#39;ve added some <code>C</code> fragments, it&#39;s has relation to question, and question should be tagged as good as it possible. Tag <code>autotools</code> I think has pure relation on your question header <code>noinst_LIBRARIES specify install path</code>. So please improve header name also."}, {"owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1499943896, "post_id": 45061490, "comment_id": 77129780, "body": "I see, prefix_default with just set the default prefix of the installation of binaries and libraries. In your case you have <code>noinst</code> library. Thus, it wont be installed.   Lets put it in a different way. What is the problem you want to solve by having a library placed in a specific folder of  the build directory?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1500050075, "post_id": 45061490, "comment_id": 77186808, "body": "Bad idea, because even if you get this working, it will break &#39;out-of-tree&#39; builds. Use <code>$(top_builddir)</code> or <code>$(builddir)</code>."}, {"owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "reply_to_user": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1500055534, "post_id": 45061490, "comment_id": 77189760, "body": "@VicenteAdolfoBoleaS&#225;nchez Strictly for personal preference, I want all of my compiled libraries to be in one directory.  @BrettHale Okay,  I will change over to <code>$(top_builddir)</code> if i get this working"}, {"owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1500056119, "post_id": 45061490, "comment_id": 77190072, "body": "Normally the way that the intermediate (build) files are organized is left to autotools to decide. As an exercise of expertise is good to tweak even those little detail but not for more serious stuff since you might end up with an ad-hoc solution which is hard to maintain or explain . For this specific error the problem is that / characters are not recognized by autotools for noinst_LDLIBRARIES. How about make the noinst library installable so that you  can easily place it in the directory you want"}, {"owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "reply_to_user": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1500060914, "post_id": 45061490, "comment_id": 77192356, "body": "@VicenteAdolfoBoleaS&#225;nchez The library doesnt need to be installed, it is solely needed to compile the application thats it. For own testing purposes I will just be using <code>make</code>, not <code>make install</code>, so it would be more convenient to keep it as <code>noinst</code> but if this proves be to much effort I will just leave it as is"}, {"owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1500106368, "post_id": 45061490, "comment_id": 77203178, "body": "Oh I see, so you need that library in an specific location to perform some tests which depends on that. I guess that there will be another program which uses those <code>noinst</code> libraries and expect it to find them in the specific directory. Is it correct? If so I will write an answer to solve that problem :)"}, {"owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "reply_to_user": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "edited": false, "score": 0, "creation_date": 1500305789, "post_id": 45061490, "comment_id": 77265683, "body": "@VicenteAdolfoBoleaS&#225;nchez Yes those are correct assumption thank you very much !"}], "answers": [{"tags": [], "owner": {"reputation": 1124, "user_id": 2420872, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a378319d0546fa481d6424821be9d5b1?s=128&d=identicon&r=PG", "display_name": "Vicente Bolea", "link": "https://stackoverflow.com/users/2420872/vicente-bolea"}, "is_accepted": true, "score": 0, "last_activity_date": 1500106935, "creation_date": 1500106935, "answer_id": 45116108, "question_id": 45061490, "link": "https://stackoverflow.com/questions/45061490/autotools-specifying-install-path-of-static-library/45116108#45116108", "title": "Autotools specifying install path of static library", "body": "<p>As the action you are trying to achieve is not standard, GNU/Autotools does not support that feature. Nevertheless, GNU/Autotools let the programmers to tweak their system by using local rules which extend the functionability of its Makefile rules. </p>\n\n<p>For instance, to copy your library to an specific location you can write:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code># Standard way\nnoinst_LDLIBRARIES = foo.a\n\n# Here is where you tweak, all-local will be performed\n# after compilation.\nall-local:\n  -cp $(builddir)/foo.* $(buildir)/libs\n</code></pre>\n\n<p><strong>Note</strong> that <code>$(srcdir)</code> and <code>$(builddir)</code> are identical when you call <code>configure</code> in the same directory the configure script is place. When\nyou call <code>configure</code> from a different directory <code>buildir</code> and <code>srcdir</code> will \ndiffer.</p>\n\n<h3>Links</h3>\n\n<ul>\n<li><a href=\"https://www.gnu.org/software/automake/manual/html_node/Extending.html\" rel=\"nofollow noreferrer\">Extending Autotools</a></li>\n</ul>\n"}], "owner": {"reputation": 45, "user_id": 8267019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvo2s.jpg?s=128&g=1", "display_name": "sp00kyb00g13", "link": "https://stackoverflow.com/users/8267019/sp00kyb00g13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 1, "accepted_answer_id": 45116108, "answer_count": 1, "score": 1, "last_activity_date": 1500106935, "creation_date": 1499872100, "last_edit_date": 1499890870, "question_id": 45061490, "link": "https://stackoverflow.com/questions/45061490/autotools-specifying-install-path-of-static-library", "title": "Autotools specifying install path of static library", "body": "<p>How can I install a library to <code>$(top_srcdir)/lib/foo.a</code>?</p>\n\n<p>If I try to use:</p>\n\n<p><code>noinst_LIBRARIES=$(top_srcdir)/lib/foo.a\nfoo_a_SOURCES= foo.c foo.h bar.c, bar.h</code></p>\n\n<p>I get <code>library has foo_a as canonical name (possible typo)</code></p>\n\n<p>I have foo.* and bar.* in <code>$(top_srcdir)/foobar/</code>.</p>\n\n<p>Any Ideas ?</p>\n"}, {"tags": ["c", "struct", "mpi"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1499931110, "post_id": 45061460, "comment_id": 77120800, "body": "The <code>MPI_Type_create_resized</code> call is useless since you are simply using whatever lower bound and extent <code>MPI_Type_get_extent</code> gives you. This is not the problem though, since there is no padding in your particular case (extent is <code>28</code>, which is equal to the offset of the last field + <code>sizeof int</code>). The output as shown is hard to read and understand - please at least display the Cartesian coordinates of the ranks."}, {"owner": {"reputation": 3, "user_id": 8044360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f388d2c6bf6dbbdeb982b55621f8b8?s=128&d=identicon&r=PG&f=1", "display_name": "AlKappa", "link": "https://stackoverflow.com/users/8044360/alkappa"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1499985917, "post_id": 45061460, "comment_id": 77156682, "body": "I made a completely new Question, which describes the core problem of my program. <a href=\"https://stackoverflow.com/questions/45091962/mpi-cartesian-topology-mpi-neighbor-alltoall-wrong-data-received\" title=\"mpi cartesian topology mpi neighbor alltoall wrong data received\">stackoverflow.com/questions/45091962/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1499930156, "post_id": 45069827, "comment_id": 77120129, "body": "<code>recvdata</code> is not used in the all-to-all call. It is a dope vector. <code>data0</code> is used, and it is contiguous."}, {"owner": {"reputation": 3, "user_id": 8044360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f388d2c6bf6dbbdeb982b55621f8b8?s=128&d=identicon&r=PG&f=1", "display_name": "AlKappa", "link": "https://stackoverflow.com/users/8044360/alkappa"}, "edited": false, "score": 0, "creation_date": 1499985648, "post_id": 45069827, "comment_id": 77156607, "body": "I had a look at mcve, i will keep that in mind, this is really hard to understand. And sorry if i am doing it wrong, but i made a new Question where i describe the core problem: <a href=\"https://stackoverflow.com/questions/45091962/mpi-cartesian-topology-mpi-neighbor-alltoall-wrong-data-received\" title=\"mpi cartesian topology mpi neighbor alltoall wrong data received\">stackoverflow.com/questions/45091962/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": false, "score": 2, "last_activity_date": 1499907880, "creation_date": 1499907880, "answer_id": 45069827, "question_id": 45061460, "link": "https://stackoverflow.com/questions/45061460/mpi-cartesian-topology-mpi-neighbor-alltoall-sends-wrong-data/45069827#45069827", "title": "MPI Cartesian Topology: MPI_Neighbor_alltoall sends wrong data", "body": "<p>if you want to use <code>MPI_Neighbor_alltoall</code>, then instead of</p>\n\n<pre><code>weatherdata **recvdata = malloc(4*sizeof(weatherdata *));\n</code></pre>\n\n<p>you should have</p>\n\n<pre><code>weatherdata recvdata[4];\n</code></pre>\n\n<p>if you need to use such indirections, then you should investigate <code>MPI_Neighbor_alltoallw</code> instead.</p>\n\n<p>and if you still need some help with that, then please post a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a> so you can get helped.</p>\n"}], "owner": {"reputation": 3, "user_id": 8044360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f388d2c6bf6dbbdeb982b55621f8b8?s=128&d=identicon&r=PG&f=1", "display_name": "AlKappa", "link": "https://stackoverflow.com/users/8044360/alkappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499907880, "creation_date": 1499872030, "question_id": 45061460, "link": "https://stackoverflow.com/questions/45061460/mpi-cartesian-topology-mpi-neighbor-alltoall-sends-wrong-data", "title": "MPI Cartesian Topology: MPI_Neighbor_alltoall sends wrong data", "body": "<p>I want to exchange a weatherdata struct between nodes in a grid with MPI_Neighbor_alltoall. My program compiles and runs, but the exchanged data is not correct.</p>\n\n<p><strong>my weatherdata struct</strong></p>\n\n<pre><code>typedef struct s_weatherdata{\n        // coordinates\n        float lon;\n        float lat;\n        // main\n        int pressure;\n        int humidity;\n        int temp;\n        // wind\n        int speed;\n        int deg;\n}weatherdata;\n</code></pre>\n\n<p><strong>my create cart snippet</strong></p>\n\n<pre><code>    // Create Dimensions\n    MPI_Dims_create(size, ndims, dims);\n\n    // Create Cartesian\n    MPI_Cart_create(mycomm, ndims, dims, periods, 1, &amp;cart_comm);\n\n    // Get the name of the processor\n    char processor_name[MPI_MAX_PROCESSOR_NAME];\n    int len;\n    MPI_Get_processor_name(processor_name, &amp;len);\n\n    // Get coordinates\n    MPI_Cart_coords(cart_comm, rank, ndims, coord);\n</code></pre>\n\n<p><strong>create MPI weatherdata struct</strong></p>\n\n<pre><code>    // create a type for weatherdata\n    const int nitems = 7;\n    int blocklengths[7] = {1,1,1,1,1,1,1};\n    MPI_Datatype types[7] = {MPI_FLOAT, MPI_FLOAT, MPI_INT, MPI_INT, MPI_INT, MPI_INT, MPI_INT};\n    MPI_Datatype tmp_mpi_weatherdata, mpi_weatherdata;\n    MPI_Aint offsets[7];\n    MPI_Aint lb, extent;\n\n    offsets[0] = offsetof(weatherdata, lon);\n    offsets[1] = offsetof(weatherdata, lat);\n    offsets[2] = offsetof(weatherdata, pressure);\n    offsets[3] = offsetof(weatherdata, humidity);\n    offsets[4] = offsetof(weatherdata, temp);\n    offsets[5] = offsetof(weatherdata, speed);\n    offsets[6] = offsetof(weatherdata, deg);\n\n    MPI_Type_create_struct(nitems, blocklengths, offsets, types, &amp;tmp_mpi_weatherdata);\n    MPI_Type_get_extent(tmp_mpi_weatherdata, &amp;lb, &amp;extent);\n    MPI_Type_create_resized(tmp_mpi_weatherdata, lb, extent, &amp;mpi_weatherdata);\n    MPI_Type_commit(&amp;mpi_weatherdata);\n\n\n\n    weatherdata **recvdata = malloc(4*sizeof(weatherdata *));\n\n    weatherdata *data0 = malloc(4*(sizeof(weatherdata)));\n    weatherdata *data1 = data0+sizeof(weatherdata);\n    weatherdata *data2 = data1+sizeof(weatherdata);\n    weatherdata *data3 = data2+sizeof(weatherdata);\n\n    recvdata[0]=data0;\n    recvdata[1]=data1;\n    recvdata[2]=data2;\n    recvdata[3]=data3;\n\n\n    MPI_Neighbor_alltoall(my_data , 1, mpi_weatherdata, data0, 1, mpi_weatherdata, cart_comm);\n\n    printf(\"data0: %i %i\\n\", recvdata[0]-&gt;speed, recvdata[0]-&gt;deg);\n    printf(\"data1: %i %i\\n\", recvdata[1]-&gt;speed, recvdata[1]-&gt;deg);\n    printf(\"data2: %i %i\\n\", recvdata[2]-&gt;speed, recvdata[2]-&gt;deg);\n    printf(\"data3: %i %i\\n\", recvdata[3]-&gt;speed, recvdata[3]-&gt;deg);\n</code></pre>\n\n<p>all i need is 'speed' and 'deg' from the weatherdata struct.\nmy output looks something like:</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>mpicc -o prog_weather weather.c tools_weather.c jsmn/libjsmn.a -lm\nmpirun -np 80 prog_weather 5.0 47.0 14.0 55.0 1\ndims: [9] [8]\nProcess rank: 40, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][0]\ndata0: 64 0\ndata1: 0 0\ndata2: 32660 1\ndata3: 0 29807328\nProcess rank: 41, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][1]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 42, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][2]\ndata0: 64 0\ndata1: 0 0\ndata2: 32606 1\ndata3: 0 32248544\nProcess rank: 43, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][3]\ndata0: 64 0\ndata1: 0 0\ndata2: 32741 1\ndata3: 0 8250080\nProcess rank: 44, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][4]\ndata0: 64 0\ndata1: 0 0\ndata2: 32643 1\ndata3: 0 14066400\nProcess rank: 45, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][5]\ndata0: 64 0\ndata1: 0 0\ndata2: 32646 1\ndata3: 0 31564512\nProcess rank: 46, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][6]\ndata0: 64 0\ndata1: 32583 28214128\ndata2: 0 25712112\ndata3: 0 0\nProcess rank: 47, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [5][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 48, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][0]\ndata0: 64 0\ndata1: 32712 1938112176\ndata2: 0 25453888\ndata3: 0 25409520\nProcess rank: 49, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][1]\ndata0: 64 0\ndata1: 32739 172736176\ndata2: 0 12830016\ndata3: 0 12785648\nProcess rank: 50, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][2]\ndata0: 64 0\ndata1: 32557 36845344\ndata2: 32557 1\ndata3: 0 33977056\nProcess rank: 51, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][3]\ndata0: 64 0\ndata1: 32722 -1205793104\ndata2: 0 37106912\ndata3: 0 37062544\nProcess rank: 52, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][4]\ndata0: 64 0\ndata1: 32745 1562607280\ndata2: 0 35345632\ndata3: 0 35301264\nProcess rank: 53, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][5]\ndata0: 64 0\ndata1: 32547 -746242384\ndata2: 0 29332800\ndata3: 0 29288432\nProcess rank: 54, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][6]\ndata0: 64 0\ndata1: 32763 1657695920\ndata2: 0 18199776\ndata3: 0 18155408\nProcess rank: 55, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [6][7]\ndata0: 64 0\ndata1: 32675 99397296\ndata2: 0 14841152\ndata3: 0 14796784\nProcess rank: 56, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][0]\ndata0: 64 0\ndata1: 32549 434941616\ndata2: 0 40248640\ndata3: 0 40204272\nProcess rank: 57, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][1]\ndata0: 64 0\ndata1: 32676 28069552\ndata2: 0 34342256\ndata3: 0 34297888\nProcess rank: 58, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][2]\ndata0: 64 0\ndata1: 32620 -1602105680\ndata2: 0 37168352\ndata3: 0 37123984\nProcess rank: 59, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][3]\ndata0: 64 0\ndata1: 32563 17697648\ndata2: 32563 1\ndata3: 0 14828256\nProcess rank: 60, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][4]\ndata0: 64 0\ndata1: 32643 19327824\ndata2: 32643 1\ndata3: 0 16458464\nProcess rank: 61, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][5]\ndata0: 64 0\ndata1: 32668 25882288\ndata2: 0 39998784\ndata3: 0 39954416\nProcess rank: 62, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][6]\ndata0: 64 0\ndata1: 32542 29244144\ndata2: 32543 1\ndata3: 0 26374880\nProcess rank: 63, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [7][7]\ndata0: 64 0\ndata1: 32621 478269104\ndata2: 0 28558656\ndata3: 0 28514288\nProcess rank: 64, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][0]\ndata0: 64 0\ndata1: 0 33\ndata2: 0 17102144\ndata3: 0 17057776\nProcess rank: 65, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][1]\ndata0: 64 0\ndata1: 0 33\ndata2: 0 20526400\ndata3: 0 20482032\nProcess rank: 66, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][2]\ndata0: 64 0\ndata1: 32618 22001504\ndata2: 0 19498480\ndata3: 0 0\nProcess rank: 67, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][3]\ndata0: 64 0\ndata1: 32633 27649920\ndata2: 0 25146896\ndata3: 0 0\nProcess rank: 68, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][4]\ndata0: 64 0\ndata1: 32624 33851264\ndata2: 0 31348208\ndata3: 0 0\nProcess rank: 69, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][5]\ndata0: 64 0\ndata1: 0 33\ndata2: 32756 -1639239568\ndata3: 0 0\nProcess rank: 70, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][6]\ndata0: 64 0\ndata1: 0 33\ndata2: 32558 1921785968\ndata3: 0 0\nProcess rank: 71, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [8][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 37767920\nProcess rank: 0, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][0]\nlb: 0\nextent: 28\noffsets: 0\noffsets: 4\noffsets: 8\noffsets: 12\noffsets: 16\noffsets: 20\noffsets: 24\ndata0: 0 0\ndata1: 32553 13450944\ndata2: 32553 1\ndata3: 0 10580704\nProcess rank: 1, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][1]\ndata0: 0 0\ndata1: 0 0\ndata2: 32684 1\ndata3: 0 30442208\nProcess rank: 2, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][2]\ndata0: 0 0\ndata1: 0 0\ndata2: 32631 1\ndata3: 0 7869152\nProcess rank: 3, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][3]\ndata0: 0 0\ndata1: 0 0\ndata2: 32594 1\ndata3: 0 24773344\nProcess rank: 4, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][4]\ndata0: 0 0\ndata1: 0 0\ndata2: 32514 1\ndata3: 0 16143072\nProcess rank: 5, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][5]\ndata0: 0 0\ndata1: 0 0\ndata2: 32584 1\ndata3: 0 17621728\nProcess rank: 6, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][6]\ndata0: 0 0\ndata1: 0 0\ndata2: 32632 1\ndata3: 0 40121056\nProcess rank: 7, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [0][7]\ndata0: 0 0\ndata1: 0 0\ndata2: 32550 1\ndata3: 0 39789280\nProcess rank: 8, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][0]\ndata0: 64 0\ndata1: 0 0\ndata2: 32669 1\ndata3: 0 38523616\nProcess rank: 9, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][1]\ndata0: 64 0\ndata1: 0 0\ndata2: 32654 1\ndata3: 0 11518688\nProcess rank: 10, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][2]\ndata0: 64 0\ndata1: 0 0\ndata2: 32666 1\ndata3: 0 21218016\nProcess rank: 11, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][3]\ndata0: 64 0\ndata1: 0 0\ndata2: 32607 1\ndata3: 0 18789088\nProcess rank: 12, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][4]\ndata0: 64 0\ndata1: 0 0\ndata2: 32626 1\ndata3: 0 25527008\nProcess rank: 13, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][5]\ndata0: 64 0\ndata1: 0 0\ndata2: 32634 1\ndata3: 0 17969888\nProcess rank: 14, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][6]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 15, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [1][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 32509 1\ndata3: 0 34927328\nProcess rank: 16, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][0]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 17, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][1]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 18, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][2]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 19, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][3]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 20, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][4]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 21, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][5]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 22, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][6]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 23, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [2][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 24, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][0]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 25, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][1]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 26, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][2]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 27, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][3]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 28, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][4]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 29, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][5]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 30, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][6]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 31, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [3][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 32, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][0]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 33, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][1]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 34, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][2]\ndata0: 64 0\ndata1: 0 0\ndata2: 32617 1\ndata3: 0 28934880\nProcess rank: 35, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][3]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 36, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][4]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 37, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][5]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 38, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][6]\ndata0: 64 0\ndata1: 0 0\ndata2: 0 0\ndata3: 0 0\nProcess rank: 39, Total Processes in Comm: 72, Process Name: HP-250-G5-Notebook-PC, Coordinates [4][7]\ndata0: 64 0\ndata1: 0 0\ndata2: 32678 1\ndata3: 0 39498464\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "netlink"], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 6412242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b066b0bffdc0a3599f9ae71da1b88a00?s=128&d=identicon&r=PG&f=1", "display_name": "trigger", "link": "https://stackoverflow.com/users/6412242/trigger"}, "edited": false, "score": 0, "creation_date": 1499874831, "post_id": 45062001, "comment_id": 77098216, "body": "Thanks! This fixed the issue straight away. I guess I didn&#39;t read the man pages properly!"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499873489, "creation_date": 1499873489, "answer_id": 45062001, "question_id": 45061159, "link": "https://stackoverflow.com/questions/45061159/retrieve-unaligned-netlink-message-size-in-kernel-space/45062001#45062001", "title": "Retrieve unaligned netlink message size in kernel space", "body": "<p>See <a href=\"http://man7.org/linux/man-pages/man3/netlink.3.html\" rel=\"nofollow noreferrer\">man 3 netlink</a>: you need to use <code>NLMSG_LENGTH(len)</code> (and not <code>NLMSG_SPACE(len)</code>) to calculate the <code>nlmsg_len</code> field of the <code>nlmsghdr</code>.</p>\n"}], "owner": {"reputation": 98, "user_id": 6412242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b066b0bffdc0a3599f9ae71da1b88a00?s=128&d=identicon&r=PG&f=1", "display_name": "trigger", "link": "https://stackoverflow.com/users/6412242/trigger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 45062001, "answer_count": 1, "score": 0, "last_activity_date": 1499873645, "creation_date": 1499871283, "last_edit_date": 1499873645, "question_id": 45061159, "link": "https://stackoverflow.com/questions/45061159/retrieve-unaligned-netlink-message-size-in-kernel-space", "title": "Retrieve unaligned netlink message size in kernel space", "body": "<p>I am working on a Linux kernel module which has a bi-directional communication link with a userspace module provided by netlink.</p>\n\n<p>I have an issue with an incorrect message length calculation on messages sent from userspace to kernel space. The message is sent from userspace like this:</p>\n\n<pre><code>this-&gt;sendLock.lock();\nthis-&gt;netlinkTxHeader-&gt;nlmsg_len = NLMSG_SPACE(len);\nthis-&gt;netlinkTxIov.iov_len = this-&gt;netlinkTxHeader-&gt;nlmsg_len;\n\nmemcpy(NLMSG_DATA(this-&gt;netlinkTxHeader), buf, len);\n\nint32_t status = sendmsg(this-&gt;netlinkSock, &amp;this-&gt;netlinkTxMsg, 0);\n</code></pre>\n\n<p>And is received in kernel space like this:</p>\n\n<pre><code>unsigned char* buf = (unsigned char*)NLMSG_DATA(nlh);\nint len = NLMSG_PAYLOAD(nlh, 0);\n</code></pre>\n\n<p>However the calculated value of <code>len</code> always seems to be the aligned size, which I don't want. For example, I can see from debug information that the userspace process sends a message with a payload of 14 bytes (excluding netlink headers). When this is received in the kernel module, however, <code>NLMSG_PAYLOAD</code> returns a length of 16 bytes.</p>\n\n<p>Is there any way to get the unaligned payload length (i.e. the actual payload length) back in the kernel module? I looked through the macros in <code>netlink.h</code> but I don't see anything which would help.</p>\n\n<p>Note that the <code>nlmsghdr</code> object is derived using the <code>netlink_rcv_skb()</code> function in the kernel module.</p>\n\n<p>The only other way I can see to fix this is to prefix the actual length in the payload information which I think would work, but doesn't really feel \"correct\".</p>\n"}, {"tags": ["c", "gnu", "strptime"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1499870483, "post_id": 45060653, "comment_id": 77094913, "body": "This is entirely predictable if you read <a href=\"http://www.cplusplus.com/reference/ctime/tm/\" rel=\"nofollow noreferrer\">docs for <code>struct tm</code></a>: <code>tm_year\tint\tyears since 1900</code> The format stored in <code>struct tm</code> vs the format parsed by <code>strptime()</code> need not be the same, and indeed are not."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499870738, "post_id": 45060653, "comment_id": 77095108, "body": "Thanks, Underscore!"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499870979, "post_id": 45060653, "comment_id": 77095302, "body": "&quot;Last time I checked, the Gregorian calendar didn&#39;t start at 1900A.D.&quot; It was not in use in year 1 anyway. ;)"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499871163, "post_id": 45060653, "comment_id": 77095450, "body": "While you only mentioned the &quot;weird&quot; year, you might notice that the month and day are not consistent. Another WTF detail about <code>struct tm</code> is, that month starts at 0 but day of month starts at 1. Crazy stuff this struct..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499871167, "post_id": 45060653, "comment_id": 77095454, "body": "@Gerhardh The <a href=\"https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar\" rel=\"nofollow noreferrer\">proleptic Gregorian calendar</a> could be used for such early dates before Gregorian calendar&#39;s initial use in 1582."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499871329, "post_id": 45060653, "comment_id": 77095595, "body": "@Gerhardh Starting <code>tm_mon</code> at zero allows ease of displaying a month by name, which is common.  <code>puts(month_names_array[timedata.tm_mon]);</code>.  Such were the early design choices of the standard C library."}], "answers": [{"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1499874761, "post_id": 45061003, "comment_id": 77098165, "body": "(Actually, POSIX.1 functions are in the standard C library, on all POSIXy systems, sometimes requiring preprocessor macros to <a href=\"http://man7.org/linux/man-pages/man7/feature_test_macros.7.html\" rel=\"nofollow noreferrer\">expose the features</a>; so, perhaps change the final sentence to <i>&quot;It&#39;s not in the C standard.&quot;</i> instead? Again, apologies for being a pain in the butt.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1499875527, "post_id": 45061003, "comment_id": 77098714, "body": "@NominalAnimal &quot;standard C&quot;, without attribution, refers to current ISO spec like ISO/IEC 9899:201x.   The &quot;standard C library&quot; I refer to is the functions, macros, variables, etc. as specified in <i>C11 7 Library</i>.  So I respectfully  disagree with the suggested change.  Yet leaving your <a href=\"https://stackoverflow.com/questions/45060653/strptime-reads-years-relative-to-1900ad/45061003?noredirect=1#comment77098165_45061003\">comment</a> does provide detail."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1499882003, "post_id": 45061003, "comment_id": 77102278, "body": "I suggested that change only because I typically assume (and I suspect most developers assume) the &quot;standard C library&quot; refers to the library or libraries that are automatically included and linked with compiled binaries, in a hosted C environment."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1499874241, "last_edit_date": 1499874241, "creation_date": 1499870929, "answer_id": 45061003, "question_id": 45060653, "link": "https://stackoverflow.com/questions/45060653/strptime-reads-years-relative-to-1900ad/45061003#45061003", "title": "strptime() reads years relative to 1900AD", "body": "<p>Code works correctly.  <code>struct tm</code> does not use the same offsets as OP thought.  <a href=\"https://stackoverflow.com/questions/45060653/strptime-reads-years-relative-to-1900ad#comment77094913_45060653\">@underscore_d</a></p>\n\n<pre><code>// C11dr \u00a77.27.1 4\nint tm_mon; // months since January \u2014 [0, 11]\nint tm_year; // years since 1900\n</code></pre>\n\n<hr>\n\n<pre><code>int main() {\n    struct tm timedata;\n    char *p = strptime(\"1/1/1\", \"%d/%m/%Y\", &amp;timedata);\n    if (p) {\n      printf(\"day: %d\\nmonth since January: %d\\nyear since 1900: %d\\n\",\n        timedata.tm_mday, timedata.tm_mon, timedata.tm_year);\n      printf(\"day: %d\\nmonth: %d\\nyear: %d\\n\", \n        timedata.tm_mday, timedata.tm_mon + 1, timedata.tm_year + 1900);\n    } else {\n      puts(\"Failed\");\n    }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>day: 1\nmonth since January: 0\nyear since 1900: -1899\nday: 1\nmonth: 1\nyear: 1\n</code></pre>\n\n<hr>\n\n<p>Note: <code>strptime()</code> is defined in POSIX.1-2001 and POSIX.1-2008, also documented in POSIXy systems using man 3 strptime.  It is not in the standard C library.</p>\n"}], "owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 45061003, "answer_count": 1, "score": 1, "last_activity_date": 1499874548, "creation_date": 1499870058, "last_edit_date": 1499874548, "question_id": 45060653, "link": "https://stackoverflow.com/questions/45060653/strptime-reads-years-relative-to-1900ad", "title": "strptime() reads years relative to 1900AD", "body": "<p>I'm using a function that I've understood is not part of the standard C library. I found information about it here: <a href=\"https://www.gnu.org/software/libc/manual/html_node/Low_002dLevel-Time-String-Parsing.html#Low_002dLevel-Time-String-Parsing\" rel=\"nofollow noreferrer\">21.4.6.1 Interpret string according to given format</a>.</p>\n\n<p>It is a very helpful function and does exactly what I need. However, when using it in this very simple way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    struct tm timedata;\n    strptime(\"1/1/1\", \"%d/%m/%Y\", &amp;timedata);\n    printf(\"day: %d\\nmonth: %d\\nyear: %d\\n\", \n        timedata.tm_mday, timedata.tm_mon, timedata.tm_year);\n}\n</code></pre>\n\n<p>strange data is placed in the <code>struct tm</code> <code>timedata</code>. Output is:</p>\n\n<pre><code>day: 1\nmonth: 0\nyear: -1899\n</code></pre>\n\n<p>Which doesn't make much sense to me. <code>1/1/1</code> should result in:</p>\n\n<pre><code>day: 1\nmonth: 1\nyear: 1\n</code></pre>\n\n<p>From what I can see, this behaviour isn't to be expected when reading the GNU manual. For example:</p>\n\n<blockquote>\n  <p>%Y The year as a decimal number, using the Gregorian calendar.</p>\n</blockquote>\n\n<p>Last time I checked, the Gregorian calendar didn't start at 1900A.D.</p>\n\n<p>EDIT:</p>\n\n<p>Rewrote code to check return value of function. Same problem persists.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main()\n{\n    struct tm timedata;\n    if(strptime(\"1/1/1\", \"%d/%m/%Y\", &amp;timedata))\n    {\n        printf(\"day: %d\\nmonth: %d\\nyear: %d\\n\", \n            timedata.tm_mday, timedata.tm_mon, timedata.tm_year);\n    }else{\n        printf(\"Error\");\n    }\n }\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>day: 1\nmonth: 0\nyear: -1899\n</code></pre>\n"}, {"tags": ["c", "arrays", "sorting", "pointers", "recursion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499870037, "post_id": 45060561, "comment_id": 77094569, "body": "<code>&amp;*(a+i)</code> - Are you trying to obfuscate your code? And I don&#39;t understand your recursion. Merge sort is working by first sorting two halves, an then merging them. But you have something totally different. <code>merge</code> should be linear. <code>sort</code> should be recursive and call <code>merge</code>.."}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1499870219, "post_id": 45060561, "comment_id": 77094705, "body": "Try to work with indices like aux[i]. Can you post a sample output!"}, {"owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "edited": false, "score": 0, "creation_date": 1499870423, "post_id": 45060561, "comment_id": 77094855, "body": "Why do you print the output of a in sort before changing the content of a?"}, {"owner": {"reputation": 23, "user_id": 6300041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031058493653996/picture?type=large", "display_name": "Catalin", "link": "https://stackoverflow.com/users/6300041/catalin"}, "edited": false, "score": 0, "creation_date": 1499876099, "post_id": 45060561, "comment_id": 77099041, "body": "I switched the names by mistake, it should have been sort for the recursive function and merge for the other. As I said, I was trying to debug it, see where it goes wrong. I believe the mistake is in the way i try to transmit parameter a further into the sort and merge function, but I am not sure of that and if that is the problem i am not sure what to write instead. As for the &amp;*(a+i), it&#39;s just another way of writing arrays using subscript notation, i was told it&#39;s faster in big programs."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1499895035, "post_id": 45060561, "comment_id": 77108980, "body": "Do you think this bit of code <code>if(*(a+lim1)&lt;=*(a+lim2))</code> is readable?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1499895095, "post_id": 45060561, "comment_id": 77109020, "body": "Your code is gibberish. Throw it away and start again"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1499895741, "post_id": 45060561, "comment_id": 77109280, "body": "Also I rarely see <code>&lt;=</code> in C code when invoked in loops"}, {"owner": {"reputation": 23, "user_id": 6300041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031058493653996/picture?type=large", "display_name": "Catalin", "link": "https://stackoverflow.com/users/6300041/catalin"}, "edited": false, "score": 0, "creation_date": 1499896009, "post_id": 45060561, "comment_id": 77109386, "body": "Can I ask why it&#39;s gibberish?"}], "owner": {"reputation": 23, "user_id": 6300041, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031058493653996/picture?type=large", "display_name": "Catalin", "link": "https://stackoverflow.com/users/6300041/catalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499896302, "creation_date": 1499869811, "last_edit_date": 1499896302, "question_id": 45060561, "link": "https://stackoverflow.com/questions/45060561/passing-arrays-and-recursive-functions-error", "title": "Passing arrays and recursive functions error", "body": "<p>I am trying to make a merge sort work, I have been trying to debug the problem on my own, but i can't see it. I could use some help.\nAs I said, I have a merge sort which gives me totally random numbers. I believe it's because of the array parameter that I try to transmit through 2 functions but I am not sure. </p>\n\n<p>EDIT: So I found 2 errors</p>\n\n<p>First i was not incrementing i while going through the array parts</p>\n\n<pre><code>while(lim1&lt;=mid &amp;&amp; lim2&lt;=end)\n{\n    if(*(a+lim1)&lt;=*(a+lim2))\n    {\n        *(aux+i)=*(a+lim1);\n        lim1++;\n    }\n    else\n    {\n        *(aux+i)=*(a+lim2);\n        lim2++;\n    }\n    i++;\n}\n</code></pre>\n\n<p>Second was that I was adding random values because aux array was bigger that it was supposed to (At first i thought it wouldn't matter)\nchanged by this:</p>\n\n<pre><code>int s=end-start;\nint aux[s];/*So I wil only have \n             the required value \n             without any random values\n            */\n</code></pre>\n\n<p>But I still get wrong values, no more randoms though, seems like it duplicates the values now. \nEdit2: Changed the names of my 2 functions.</p>\n\n<p>Edit3: Spaced out the code</p>\n\n<pre><code>/*\nProgram description: Program that sorts an array using merge sort\nAuthor: Andrei Negura\nDate: 12/07/2017\nOs: win 10\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define START 0\n#define SIZE 10\nvoid sort(int *, int, int);\nvoid merge(int *, int, int, int);\nvoid read(int *);\nvoid display(int *);\n\nint main()\n{\n   int array[ SIZE ];\n\n    read( array );\n    display( array );\n    printf(\"\\n\");\n    merge( array, START, SIZE-1);\n    display( array );\n    return 0;\n}\n\nvoid read(int *a)\n{\n    int i;\n    printf(\"Enter %d elements\\n\", SIZE);\n    for(i= START; i&lt; SIZE; i++)\n        scanf(\"%d\", &amp;*(a+i) );\n}\n\nvoid display(int *a)\n{\n    int i;\n    printf(\"\\nElements\\n\");\n    for( i= START; i&lt; SIZE; i++)\n        printf(\"%d \", *(a+i) );\n\n}\n/*\n  Function that divides the array into subarrays\n  Divide and conquer method\n  Recursive function\n*/\nvoid sort(int *a, int start, int end)\n{\n    int mid;\n    if( start&lt; end)\n    {\n        mid= ( start + end) / 2;\n        merge( a, start, mid);\n        merge( a, mid+1, end);\n        sort( a, start, mid, end);\n    }\n}\n/*\n  Function that actually sorts the elements\n  lim1 and lim2 will act as index values,\n  that's why Idon't use the parameters\n  The parameters will be my limits(until\n  what point lim1 and lim2 go)\n  Auxiliary Array to store the sorted array\n*/\nvoid merge(int *a, int start, int mid, int end)\n{\n    int s= end - start;\n    int aux[s];//So I wil only have \\\n                the required value \\\n                without any random values\n\n    int i=0;\n    int lim1= start, lim2= mid+1;\n    /*\n    The I does not reset, If i reset i,\n    I lose the count for the auxiliary array\n    */\n    /*\n    Go through both parts of the array at once\n    until one of them is finished\n    */\n    while(lim1 &lt;= mid &amp;&amp; lim2 &lt;= end)\n    {\n        if( *( a + lim1 ) &lt;= *( a + lim2 ) )\n        {\n            *( aux + i ) = *( a + lim1 );\n            lim1++;\n        }\n        else\n        {\n            *( aux + i ) = *( a + lim2 );\n            lim2++;\n        }\n        i++;\n    }\n    //Go through first part, if not finished already\n    while( lim1 &lt;= mid)\n    {\n        *( aux + i ) = *( a + lim1 );\n        i++;\n        lim1++;\n    }\n    //Go through second part, if not finished already\n    while( lim2 &lt;= end)\n    {\n        *( aux + i )= *( a + lim2);\n        i++;\n        lim2++;\n    }\n\n    //Rewrite the sorted array back into a\n    for( i = START; i &lt;= s; i++)\n        *( a + i )= *( aux + i );\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499868971, "post_id": 45060158, "comment_id": 77093704, "body": "Can you please edit your question to contain a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>? Also when doing that also include, for some specified input, the actual and the expected output."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1499868990, "post_id": 45060158, "comment_id": 77093721, "body": "For a start: <code>... &amp;&amp; temp-&gt;name == data</code> you cannot compare character arrays and strings like this."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 2, "creation_date": 1499869032, "post_id": 45060158, "comment_id": 77093758, "body": "Use <code>strcmp</code> to compare char arrays. <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\">strcmp</a>"}, {"owner": {"reputation": 1, "user_id": 5687115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df3679df30166db3e24864925f2bf2ce?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/5687115/mahesh"}, "edited": false, "score": 0, "creation_date": 1499869520, "post_id": 45060158, "comment_id": 77094156, "body": "please help me with the code to modify"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1499870345, "creation_date": 1499870345, "answer_id": 45060776, "question_id": 45060158, "link": "https://stackoverflow.com/questions/45060158/c-program-to-remove-elements-from-given-linked-list-and-print-the-entire-list-af/45060776#45060776", "title": "c program to remove elements from given linked list and print the entire list after removing", "body": "<p>You have to pass the head node to the function by reference because it can be changed within the function.</p>\n\n<p>Also you have to use the standard function <code>strcmp</code> to compare strings.</p>\n\n<p>In this expression</p>\n\n<pre><code>temp-&gt;name == data\n</code></pre>\n\n<p>there are compared addresses of the first characters of two arrays and it is obvious that they are unequal.</p>\n\n<p>Here is a demonstrative program that shows how the function can be implemented.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Stud\n{\n    char name[20];\n    struct Stud *next;\n};\n\nint deleteKey( struct Stud **head, const char *name )\n{\n    while ( *head &amp;&amp; strcmp( ( *head )-&gt;name, name ) != 0 )\n    {\n        head = &amp;( *head )-&gt;next;\n    }\n\n    int success = *head != NULL;\n\n    if ( success )\n    {\n        struct Stud *node = *head;\n        *head = ( *head )-&gt;next;\n        free( node );\n    }\n\n    return success;\n}\n\nint push_front( struct Stud **head, const char *name )\n{\n    struct Stud *node = malloc( sizeof( *node ) );\n    int success = node != NULL;\n\n    if ( success )\n    {\n        strncpy( node-&gt;name, name, sizeof( node-&gt;name ) );\n        node-&gt;name[sizeof( node-&gt;name ) - 1] = '\\0';\n        node-&gt;next = *head;\n        *head = node;\n    }\n\n    return success;\n}\n\nvoid display_list( struct Stud **head )\n{\n    for ( struct Stud *current = *head; current != NULL; current = current-&gt;next )\n    {\n        printf( \"%s \", current-&gt;name );\n    }\n}\n\nint main(void) \n{\n    struct Stud *head = NULL;\n\n    push_front( &amp;head, \"Bob\" );\n    push_front( &amp;head, \"Peter\" );\n    push_front( &amp;head, \"Margarite\" );\n\n    display_list( &amp;head );\n    putchar( '\\n' );\n\n    deleteKey( &amp;head, \"Margarite\" );\n\n    display_list( &amp;head );\n    putchar( '\\n' );\n\n    deleteKey( &amp;head, \"Bob\" );\n\n    display_list( &amp;head );\n    putchar( '\\n' );\n\n    deleteKey( &amp;head, \"Peter\" );\n\n    display_list( &amp;head );\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Margarite Peter Bob \nPeter Bob \nPeter \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5687115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/df3679df30166db3e24864925f2bf2ce?s=128&d=identicon&r=PG&f=1", "display_name": "mahesh", "link": "https://stackoverflow.com/users/5687115/mahesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499870543, "creation_date": 1499868858, "last_edit_date": 1499870543, "question_id": 45060158, "link": "https://stackoverflow.com/questions/45060158/c-program-to-remove-elements-from-given-linked-list-and-print-the-entire-list-af", "title": "c program to remove elements from given linked list and print the entire list after removing", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nstruct Stud\n{\n    char name[20];\n    struct Stud *next;\n};\n\nstruct Stud *hptr=NULL,*tptr;\n//char data[20];\n\n\nvoid deleteKey(struct Stud *hptr,char data[20])\n{\n    struct Stud * temp = hptr, *prev;\n    while (temp != NULL &amp;&amp; temp-&gt;name == data)\n    {\n        hptr = temp-&gt;next;\n        free(temp);\n        temp = hptr;\n    }\n    while (temp != NULL)\n    {\n        while (temp != NULL &amp;&amp; temp-&gt;name != data)\n        {\n            prev = temp;\n            temp = temp-&gt;next;\n        }\n\n\n        if (temp == NULL) return;\n\n\n        prev-&gt;next = temp-&gt;next;\n\n        free(temp);\n\n\n        temp = prev-&gt;next;\n    }\n}\n\n\n\n\nvoid createList(char *s)\n{\n    struct Stud *nptr;\n    nptr=(struct Stud *)malloc(sizeof(struct Stud));\n    strcpy(nptr-&gt;name,s);\n    if(hptr==NULL)\n    hptr=tptr=nptr;\n    else\n        tptr-&gt;next=nptr;\n    tptr=nptr;\n    nptr-&gt;next=NULL;\n}\n\n\nvoid display(){\n    while(hptr!=NULL)   {\n        printf(\"%s \",hptr-&gt;name);\n        hptr=hptr-&gt;next;\n    }\n\n\n}\n\n\nvoid main(){\n    int i,n;\n    char str1[20];\n    char s[20];\n    scanf(\"%d\",&amp;n);\n    for(i = 0; i &lt; n; i++)  {\n        scanf(\"%s\",str1);\n        createList(str1);\n    }\n    scanf(\"%s\",s);\n    display();\n    deleteKey(hptr, s);\n    display();\n}\n</code></pre>\n\n<p>I am not getting the desired output.please correct me in passing the arguments to deleteKey and suggest me if there is anything wrong in the code.\n        for example:\n            input:\n        5\n        kmit\n        jntu\n        snist\n        cbit\n        ngit\n        cbit\n        output:\n        kmit\n        jntu\n        snist\n        ngit</p>\n"}, {"tags": ["c", "arrays", "pointers", "sizeof"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499868012, "post_id": 45059789, "comment_id": 77092969, "body": "maybe something like <code>*(&amp;a + 1) - 1</code> (not checked/tested and I doubt this is well-defined)"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1499868115, "post_id": 45059789, "comment_id": 77093059, "body": "See my question: <a href=\"https://stackoverflow.com/questions/32537471/is-array-1-1-safe-to-use-to-get-the-last-element-of-an-automatic\">Is <code>*((*(&amp;array + 1)) - 1)</code> safe to use to get the last element of an automatic array?</a>. In short, <code>*(&amp;array + 1)</code> invokes UB."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499868129, "post_id": 45059789, "comment_id": 77093070, "body": "Not clear what you mean. There is no &quot;trick&quot; involved. (&quot;Tricks&quot; are most times a bad idea anyway.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 1, "creation_date": 1499868139, "post_id": 45059789, "comment_id": 77093077, "body": "@kay I doubt it because although it&#39;s ok to have a pointer pointing one after the end of an object, for my &quot;trick&quot; here, I need to dereference this pointer ...."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1499868346, "post_id": 45059789, "comment_id": 77093226, "body": "<code>((int *)(&amp;a + 1))[-1]</code> would be well-defined though (avoids the problem of dereferencing the past-the-end pointer)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1499868425, "post_id": 45059789, "comment_id": 77093277, "body": "@M.M is <code>(int *)(&amp;a + 1)</code> cast valid? The pointer types are incompatible, I think..."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 3, "creation_date": 1499868632, "post_id": 45059789, "comment_id": 77093442, "body": "Is there a good reason to avoid <code>sizeof()</code>? Or is it a pure academical question?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1499868702, "post_id": 45059789, "comment_id": 77093503, "body": "Is <code>a[sizeof a &#47; sizeof *a - 1]</code> not concise enough?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499868719, "post_id": 45059789, "comment_id": 77093519, "body": "@EugeneSh. the whole purpose of a pointer cast is to cast between incompatible types"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499869310, "post_id": 45059789, "comment_id": 77093989, "body": "@M.M But then there is a pointer arithmetic performed on it. Technically it is within the boundaries of <code>a</code>, but <code>a</code> has a different type of the one pointed by the pointer the arithmetic is performed on. So it looks a bit suspicious to me."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499869354, "post_id": 45059789, "comment_id": 77094025, "body": "@IanAbbott detail <code>a[sizeof a &#47; sizeof *a - 1]</code> is the last element of the array.  OP wants &quot;pointer to last element of array&quot;.  Presumable <code>&amp;a[sizeof a &#47; sizeof *a - 1]</code> would work."}, {"owner": {"reputation": 61, "user_id": 8296172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c4bf482c8113cce381bf0aff8e7402?s=128&d=identicon&r=PG&f=1", "display_name": "Raul Grigora\u0219cu", "link": "https://stackoverflow.com/users/8296172/raul-grigora%c8%99cu"}, "edited": false, "score": 0, "creation_date": 1499869480, "post_id": 45059789, "comment_id": 77094123, "body": "Wow, thanks guys! I knew it was something remarkably simple. Thanks alot!"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499869978, "post_id": 45059789, "comment_id": 77094520, "body": "@chux <code>a + sizeof a &#47; sizeof *a - 1</code> is a pointer"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1499869722, "post_id": 45060012, "comment_id": 77094308, "body": "Note: the <code>int*</code> cast appears ok per &quot;A pointer to an object type may be converted to a pointer to a different object type. If the resulting pointer is not correctly aligned for the referenced type, the behavior is undefined.&quot;  C11 &#167;6.3.2.3 7."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 6, "last_activity_date": 1499868510, "last_edit_date": 1499868510, "creation_date": 1499868450, "answer_id": 45060012, "question_id": 45059789, "link": "https://stackoverflow.com/questions/45059789/c-pointer-to-last-element-of-array/45060012#45060012", "title": "C pointer to last element of array", "body": "<p>I can suggest the following solution</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    int a[4] = { 0, 1, 2, 3, };\n\n    int *p = (int *)(&amp;a + 1) - 1;\n\n    printf(\"*p = %d\\n\", *p);\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>*p = 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 5, "last_activity_date": 1499868615, "creation_date": 1499868615, "answer_id": 45060067, "question_id": 45059789, "link": "https://stackoverflow.com/questions/45059789/c-pointer-to-last-element-of-array/45060067#45060067", "title": "C pointer to last element of array", "body": "<p>You're probably thinking of something that involved <code>&amp;a + 1</code>, which is a pointer to the memory just past the end of the struct.</p>\n\n<p>However, <code>(&amp;a)[1][-1]</code>, or the identical expression but substituting pointer notation for array notation, <code>*(&amp;a + 1))[-1]</code> or <code>*(*(&amp;a + 1) - 1)</code>, is <a href=\"https://stackoverflow.com/questions/32537471/is-array-1-1-safe-to-use-to-get-the-last-element-of-an-automatic\">technically undefined behaviour</a>. But someone might have written this as a \"clever trick\" not realizing it was undefined.</p>\n\n<p><code>((int *)(&amp;a + 1))[-1]</code> is well-defined and does the job, although arguably harder to read than just writing straightforward code.</p>\n"}], "owner": {"reputation": 61, "user_id": 8296172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c4bf482c8113cce381bf0aff8e7402?s=128&d=identicon&r=PG&f=1", "display_name": "Raul Grigora\u0219cu", "link": "https://stackoverflow.com/users/8296172/raul-grigora%c8%99cu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11156, "favorite_count": 2, "accepted_answer_id": 45060012, "answer_count": 2, "score": 2, "last_activity_date": 1499868615, "creation_date": 1499867901, "question_id": 45059789, "link": "https://stackoverflow.com/questions/45059789/c-pointer-to-last-element-of-array", "title": "C pointer to last element of array", "body": "<p>Lets say we have an array</p>\n\n<p><code>int a[4];</code></p>\n\n<p>there was a neat trick using pointer arithmetics to find the last element. As far as i can recall it was using the address of 'a' and incrementing it so that it will go point immediately after the array and then going one position back.\nThe thought behind the incrementing was that that there was an implicit <code>sizeof</code> being done. There was nowhere any explicit <code>sizeof</code>. </p>\n\n<p>Anyone have any idea how it was done?</p>\n\n<p>Thanks a bunch!</p>\n"}, {"tags": ["c", "postfix-notation", "infix-notation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499867947, "post_id": 45059612, "comment_id": 77092917, "body": "Have you tried stepping through the code line by line in a debugger? Perhaps you should take some time to read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1499867962, "post_id": 45059612, "comment_id": 77092933, "body": "Enable your warnings, then you will (probably) realize, that <code>x=pop(&amp;s)!=&#39;(&#39;</code> does not do what you expect due to operator precedence."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 5027489, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-ZxHEZZunve4/AAAAAAAAAAI/AAAAAAAAAKs/W7vMJL7RvQw/photo.jpg?sz=128", "display_name": "WhiteSword", "link": "https://stackoverflow.com/users/5027489/whitesword"}, "is_accepted": true, "score": 0, "last_activity_date": 1499868092, "creation_date": 1499868092, "answer_id": 45059878, "question_id": 45059612, "link": "https://stackoverflow.com/questions/45059612/unkown-characters-in-place-of-operators-in-the-output-for-infix-to-postfix-conve/45059878#45059878", "title": "Unkown characters in place of operators in the output for Infix to Postfix conversion", "body": "<p>A very minor mistake, <code>while(x=pop(&amp;s)!='(')</code> change it to <code>while( (x=pop(&amp;s)) !='(')</code> . And now, it's giving the output desired by you.\n: )</p>\n"}], "owner": {"reputation": 321, "user_id": 4234538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeoIP.png?s=128&g=1", "display_name": "Karthik Bhat", "link": "https://stackoverflow.com/users/4234538/karthik-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45059878, "answer_count": 1, "score": 0, "last_activity_date": 1499868092, "creation_date": 1499867468, "question_id": 45059612, "link": "https://stackoverflow.com/questions/45059612/unkown-characters-in-place-of-operators-in-the-output-for-infix-to-postfix-conve", "title": "Unkown characters in place of operators in the output for Infix to Postfix conversion", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#define max 10\nvoid eval(char []);\nstruct stack\n{\n   int top;\n   int info[max];\n};\nint main()\n{\n    char inf[20];\n    printf(\"\\n Enter the string \");\n    scanf(\"%s\",inf);\n    printf(\"%s\",inf);\n    eval(inf);\n    return 0;\n}\nvoid eval(char inf[])\n{\n   struct stack s; s.top=-1;\n   int instack(char);\n   int incoming(char);\n   void push(struct stack *, char);\n   char pop(struct stack *);\n   int i,j=0,ip,is,k;\n   char pst[20],ch,x;\n   for(i=0;i&lt;strlen(inf);i++)\n   {\n        ch=inf[i];\n        if(isdigit(ch))\n        {\n            pst[j]=ch; \n            j++;\n        }\n        else if(ch==')')\n        {\n           while(x=pop(&amp;s)!='(')\n           {\n                pst[j]=x; j++;\n           }\n        }\n       else if(s.top==-1)\n        {\n              push(&amp;s,ch);\n        }\n        else\n        {\n              ip=incoming(ch);\n              is=instack(s.top);\n              if(ip&gt;is)\n              {\n                  push(&amp;s,ch);\n              }\n              else\n              {\n                while((incoming(k=pop(&amp;s))&lt;(instack(s.top))))\n                {\n                  pst[j]=pop(&amp;s);\n                  j++; \n                }\n                push(&amp;s,ch);\n              }\n         }\n    }\n  while(s.top!=-1)\n  {\n        pst[j]=pop(&amp;s);\n        j++;\n  }\n  pst[j]='\\0';\n  printf(\"\\n%s\",pst);\n}\nvoid push(struct stack *s,char ch)\n{\n    s-&gt;top=s-&gt;top+1;\n    s-&gt;info[s-&gt;top]=ch;\n}\nchar pop(struct stack *s)\n{\n    char ch;\n    ch=s-&gt;info[s-&gt;top];\n    s-&gt;top=s-&gt;top-1;\n    return ch;\n}\nint incoming(char ch)\n{\n    switch(ch)\n    {\n        case '+': \n        case '-': return 1; break;\n        case '*':\n        case '/': return 2; break;\n        case '(':  return 4; break;\n    }\n}\nint instack(char ch)\n{\n    switch(ch)\n    {\n        case '+':\n        case '-': return 1;break;\n        case '*': \n        case '/': return 2; break;\n        case '(': return 0; break;\n    }\n}\n</code></pre>\n\n<p>The output I am getting for the i/p- (5+6)*(3-2) is 56?32?(asterix). I am using GCC compiler on a linux machine. The output consists of ? and ? inplace of a + and a - operator. Simple inputs like 5+6 are being converted correctly. The output I am getting there is 56+. Only inputs with brackets are making these ? to appear.</p>\n"}, {"tags": ["c", "perl", "winapi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499867852, "post_id": 45059300, "comment_id": 77092847, "body": "try <code>WINAPI</code> or <code>__stdcall</code> in the definition of your C function"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1499876833, "post_id": 45060797, "comment_id": 77099430, "body": "When no calling convention is specified in the C code, the compiler&#39;s default convention is used, which is <i>usually</i> <code>cdecl</code>, but may be something else, depending on the user&#39;s compiler setup. So you can&#39;t always assume <code>cdecl</code>, unless you never change the default."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499880395, "post_id": 45060797, "comment_id": 77101281, "body": "@ikegami thanks for the edit, I&#39;m not familiar with <code>Win32::API</code> and so didn&#39;t know it supports <code>cdecl</code> as well."}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499937461, "post_id": 45060797, "comment_id": 77125137, "body": "@FelixPalmen Thanks. _cdecl worked. But i am getting same error even when i use _cdecl. WE cant use WINAPI as this is windows dll.Below is the code <code>my $CreateProcess =  new Win32::API(&quot;kernel32.dll&quot;, &quot;CreateProcess&quot;,       [ &#39;P&#39;, &#39;P&#39;, &#39;P&#39;, &#39;P&#39;, &#39;N&#39;, &#39;N&#39;, &#39;P&#39;, &#39;P&#39;, &#39;P&#39;, &#39;P&#39; ], &#39;N&#39;);     $rc = $CreateProcess-&gt;Call($dbengineCodeFile, $cmdLine, 0, 0, 0,         NORMAL_PRIORITY_CLASS, 0, &quot;.&quot;, $startInfo, $procInfo);</code> any suggestion for this?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1499937875, "post_id": 45060797, "comment_id": 77125451, "body": "Also worth noting: When targeting 64-bit, there is only a single calling convention. Thus, the issue auto-magically disappears, when writing 64-bit code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499937938, "post_id": 45060797, "comment_id": 77125507, "body": "@Prateek I really <b>don&#39;t</b> understand this comment, especially &quot;<i>WE cant use WINAPI as this is windows dll</i>&quot; ..."}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499939888, "post_id": 45060797, "comment_id": 77126966, "body": "@FelixPalmen I mean that we dont have that code to change the method CreateProcess and create the dll."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499939940, "post_id": 45060797, "comment_id": 77127017, "body": "@Prateek <code>CreateProcess</code> <b>is</b> a WINAPI call, so it already uses <code>stdcall</code> calling convention."}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499940498, "post_id": 45060797, "comment_id": 77127465, "body": "@FelixPalmen yes correct, but i am still getting <b>Win32::API a function was called with the wrong prototype and caused a C stack consistency EBP=18fde0 ESP=18fdd0</b> for this call"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1499940658, "post_id": 45060797, "comment_id": 77127598, "body": "@Prateek in this case, your prototype <b>is</b> wrong. (Note that <code>BOOL</code> is a typedef to <code>int</code>, not to <code>long</code>, so according to <a href=\"http://search.cpan.org/~acalpini/Win32-API-0.41/API.pm\" rel=\"nofollow noreferrer\"><code>Win32::API</code> docs</a>, you should be using <code>&#39;I&#39;</code> instead of <code>&#39;N&#39;</code>, but I guess there must be another problem)"}, {"owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1500027167, "post_id": 45060797, "comment_id": 77171994, "body": "@FelixPalmen Changed to <code>&#39;I&#39;</code> . didnt work. Got same error"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "edited": false, "score": 0, "creation_date": 1500031705, "post_id": 45060797, "comment_id": 77174638, "body": "@Prateek this was just an example and I already doubted it&#39;s the reason. Something apart from the snippet you show in your comment must still be wrong. Again, according to the docs, you should only write <code>kernel32</code>, not <code>kernel32.dll</code>, but this probably isn&#39;t the cause either."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 5, "last_activity_date": 1499882860, "last_edit_date": 1499882860, "creation_date": 1499870407, "answer_id": 45060797, "question_id": 45059300, "link": "https://stackoverflow.com/questions/45059300/win32api-giving-wrong-prototype-error/45060797#45060797", "title": "Win32::API giving wrong prototype error", "body": "<p>On Windows, you have different <em>calling conventions</em>. One key difference is who cleans up the stack space occupied by parameters and return value after a function is called. The standard calling convention used in C (and commonly called <code>cdecl</code>) leaves this work to the <em>caller</em>.</p>\n\n<p>The Windows API functions use a different calling convention, named by Microsoft as <code>stdcall</code>. In this convention, the <em>callee</em> has the responsibility to cleanup the stack. As the perl module <code>Win32::API</code> is designed to call Windows API functions, this is the calling convention it uses by default.</p>\n\n<p>The message you get supports this: <code>EBP=18fde0</code> and <code>ESP=18fdd0</code> are exactly 16 bytes apart from each other, that's the size of your function arguments plus the return value. As your function declaration doesn't have any attribute denoting a calling convention, it uses <code>cdecl</code>, so it doesn't do any stack cleanup at all, but <code>Win32::API</code> expected it to do.</p>\n\n<p>One solution is to notify <code>Win32::API</code> of the calling convention.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>Win32::API-&gt;new($dllfile, \"CheckSqlAnyWindow\", [ 'N', 'P', 'P' ], 'N', '__cdecl');\n</code></pre>\n\n<p>The other solution is change your library to use the <code>stdcall</code> convention.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>BOOL __stdcall CheckSqlAnyWindow(DWORD pid, char *winTitle, DWORD * hwnd)\n</code></pre>\n\n<p>Note that <code>__stdcall</code> is the notation adopted by MSVC, GCC, clang, probably some other compilers as well. Other compilers <em>might</em> use a different syntax for declaring a function as <code>stdcall</code>. You can avoid the whole issue by using the following since you include <code>windows.h</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>BOOL WINAPI CheckSqlAnyWindow(DWORD pid, char *winTitle, DWORD * hwnd)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7316139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ea70fc01db62d564ab1025002834b262?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/7316139/prateek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499882860, "creation_date": 1499866670, "last_edit_date": 1499882778, "question_id": 45059300, "link": "https://stackoverflow.com/questions/45059300/win32api-giving-wrong-prototype-error", "title": "Win32::API giving wrong prototype error", "body": "<p>Facing </p>\n\n<blockquote>\n  <p>Win32::API a function was called with the wrong prototype and caused a C stack consistency EBP=18fde0 ESP=18fdd0</p>\n</blockquote>\n\n<p>Below are the perl and C code </p>\n\n<pre><code>my $CheckSqlAnyWindow = new Win32::API($dllfile,\n                   \"CheckSqlAnyWindow\", [ 'N', 'P', 'P' ], 'N');\n    my $hwndSqlany = pack(\"L\", 0);\n    my ($i, $sqlanyWinId);\n    START:\n    for ($i = 0; $i &lt; $numRetries; $i++) \n    {\n\n        $rc = $CheckSqlAnyWindow-&gt;Call($procId,\"$engine - Adaptive Server Anywhere - 12.0.1 (3817)\", $hwndSqlany);\n        if ($rc &lt;= 0)\n        {\n                $Cisco::DbUtils::errstr =  Win32::FormatMessage( Win32::GetLastError());\n                return 1;\n        }\n}\n</code></pre>\n\n<p>c Code</p>\n\n<pre><code>BOOL CheckSqlAnyWindow(DWORD pid, char *winTitle, DWORD * hwnd)\n{\n    StartDbInfo startDbBuf;\n    BOOL rc;\n\n    startDbBuf.pid = pid;\n    startDbBuf.hwnd = NULL;\n    strcpy(startDbBuf.winTitle, winTitle);\n\n    rc = EnumWindows((WNDENUMPROC) getWindowId, (LPARAM) &amp;startDbBuf);\n    memcpy((DWORD *) hwnd, (DWORD *) &amp;startDbBuf.hwnd, sizeof(DWORD));\n    return (TRUE);\n}\n</code></pre>\n\n<p>Can anyone point out the correction to be done here please?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1499866435, "post_id": 45059085, "comment_id": 77091724, "body": "seems like you forgot to call <code>sprintf</code> or the like."}, {"owner": {"reputation": 4665, "user_id": 6383857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPDaW.jpg?s=128&g=1", "display_name": "StaticBeagle", "link": "https://stackoverflow.com/users/6383857/staticbeagle"}, "edited": false, "score": 1, "creation_date": 1499866459, "post_id": 45059085, "comment_id": 77091743, "body": "You might want to look into sprintf( ... ) or use std::string"}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 1, "creation_date": 1499866471, "post_id": 45059085, "comment_id": 77091754, "body": "Look into using a <code>stringstream</code> -- <a href=\"http://www.cplusplus.com/doc/tutorial/basic_io/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/basic_io</a> I think you&#39;re using too much C library stuff when there&#39;s perfectly good C++ solutions"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 0, "creation_date": 1499866501, "post_id": 45059085, "comment_id": 77091781, "body": "@Peri461 or the question is mistagged ;)"}, {"owner": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499866562, "post_id": 45059085, "comment_id": 77091831, "body": "@Borgleader the title of the question itself addresses a &quot;file in <code>cpp</code>&quot;"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 5359, "user_id": 7851115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uyswM.jpg?s=128&g=1", "display_name": "Joshua Detwiler", "link": "https://stackoverflow.com/users/7851115/joshua-detwiler"}, "edited": false, "score": 1, "creation_date": 1499866618, "post_id": 45059085, "comment_id": 77091889, "body": "@Peri461 I know but I&#39;ve seen a few users say &quot;theyre doing c++&quot; when in fact theyre learning/programming in C, hence the question should be retagged as C."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1499867581, "post_id": 45059085, "comment_id": 77092640, "body": "Surely the rename will fail in the second time around the loop"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499871231, "post_id": 45059085, "comment_id": 77095506, "body": "<code>return(0)</code> - <code>return</code> is a statement, not a function. The parentheses are unnecessary and obfuscatory. Besides, your <code>while</code> loop seems pointless: it would loop forever, which would be bad, but then you defeat it by unconditionally <code>return</code>ing at the end of the 1st iteration, which means there&#39;s no point having a loop."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1499871253, "post_id": 45059085, "comment_id": 77095535, "body": "I&#39;m surprised this code even compiles. There is an illegal variable redeclaration."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1499871379, "post_id": 45059085, "comment_id": 77095636, "body": "Please try to take a bit longer to make your writing legible."}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1499872901, "post_id": 45059085, "comment_id": 77096854, "body": "All i needed was a hint and i got it.Thank you @Borgleader and RatHat was your valuable suggestions."}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "edited": false, "score": 0, "creation_date": 1499873064, "post_id": 45059085, "comment_id": 77096983, "body": "the while loop forms a part of my code, the header and this part of code was used for testing purpose only."}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1500118774, "post_id": 45061075, "comment_id": 77206637, "body": "What is the point of <code>k++;</code>? What is the point of <code>k</code>. Why not just write <code>rename(&quot;file.txt&quot;, &quot;file1.txt&quot;)</code>"}, {"owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520438394, "post_id": 45061075, "comment_id": 85317086, "body": "just as I mentioned in my question i have over 500 files and i cant rename everything manually. Wanted them to be renamed incrementally."}], "tags": [], "owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "is_accepted": true, "score": 0, "last_activity_date": 1500118494, "last_edit_date": 1500118494, "creation_date": 1499871103, "answer_id": 45061075, "question_id": 45059085, "link": "https://stackoverflow.com/questions/45059085/simple-renaming-of-file-in-cpp-without-the-need-to-write-anything-in-it/45061075#45061075", "title": "simple renaming of file in cpp without the need to write anything in it", "body": "<p>thank you for your valuable suggestions.sprintf() was the solution to my problem.Hears the code for future help for somebody.</p>\n\n<pre><code>    int k = 1;\n    char filename[16]; \n    sprintf( filename, \"file%d.txt\", k );  \n    rename(\"file.txt\", filename);\n    k++;\n    return(0);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7171776, "user_type": "registered", "profile_image": "https://graph.facebook.com/1273501836004750/picture?type=large", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7171776/chaitanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 45061075, "answer_count": 1, "score": -1, "last_activity_date": 1500118494, "creation_date": 1499866168, "last_edit_date": 1499871336, "question_id": 45059085, "link": "https://stackoverflow.com/questions/45059085/simple-renaming-of-file-in-cpp-without-the-need-to-write-anything-in-it", "title": "simple renaming of file in cpp without the need to write anything in it", "body": "<p>My <code>pcl</code> module produces an output file <code>result.pcd</code>. This said module runs in a loop, so it takes up to 100 <code>pcd</code> files and for each iteration produces an output file <code>result.pcd</code>. The thing is this <code>result.pcd</code> gets overwritten in every iteration, so before the next iteration I'm trying to rename this file. I want this file to be named incrementally (i.e <code>file1.pcd</code>, <code>file2.pcd</code>, <code>file3.pcd</code>...)</p>\n\n<p>My renaming code doesn't fit the syntax. Please help me with this.</p>\n\n<p>My aim is not to write anything in the new file, rather to rename an old one incrementally. (Please include comments and headers in code.)</p>\n\n<p>If my method of thinking is wrong, I need expert advice on pointing me to the right direction.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    while (true) \n    {\n        int k = 1;\n        char newname[] = \"file%i.txt\", k;\n        rename(\"result.pcd\", newname);\n        k++;\n        return 0;\n    }\n}\n</code></pre>\n\n<p>The new file gets renamed as <code>file%i.txt</code> rather than <code>file1.txt</code></p>\n"}, {"tags": ["c", "linux", "casting", "libxml2"], "comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1499871035, "post_id": 45058878, "comment_id": 77095343, "body": "It is bad design and they should be using <code>uint8_t</code> not <code>unsigned char</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1499931827, "post_id": 45058878, "comment_id": 77121261, "body": "C++17 and <code>std::byte</code> makes the situation even worse for those who have <code>typedef unsigned char byte;</code>. You can&#39;t <code>using byte = std::byte</code> because <code>std::byte</code> has so many restrictions. For example, trying to <code>std::byte b = ...;</code> then <code>b |= 0x20;</code> or <code>b -= 0x10;</code>  fails to compile."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1500208710, "post_id": 45058878, "comment_id": 77226931, "body": "@JeremyP libxml2 was first released in 1999 when the C99 standard, which introduced  <code>uint8_t</code>, wasn&#39;t even published. Even today, there are platforms without full support for C99. Besides, C99 makes no guarantee that any of the <code>uint*_t</code> types are available. Also, how would <code>uint8_t</code> help? On most platforms, it&#39;s typedef&#39;d to <code>unsigned char</code>, so you still have to cast things like string literals. One could only argue that libxml2 should have used plain <code>char</code>s for its public API, and cast to an unsigned type internally."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1500280858, "post_id": 45058878, "comment_id": 77248017, "body": "@nwellnhof Because uint8_t, if it exists, is guaranteed to be an eight bit unsigned integer value and it reflects much better the type of the individual octets than unsigned char - which needn&#39;t be eight bits."}, {"owner": {"reputation": 153, "user_id": 4168141, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iRrEzWMUwtc/AAAAAAAAAAI/AAAAAAAAAFE/scyQw-v7q4w/photo.jpg?sz=128", "display_name": "Danny Holstein", "link": "https://stackoverflow.com/users/4168141/danny-holstein"}, "edited": false, "score": 0, "creation_date": 1607618954, "post_id": 45058878, "comment_id": 115335702, "body": "For readability you can another macro definition such as <code>#define MY_CAST BAD_CAST</code>"}], "answers": [{"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1499870829, "post_id": 45060611, "comment_id": 77095190, "body": "You probably want to put <code>const</code> qualifiers on the parameter and the result."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1499873690, "post_id": 45060611, "comment_id": 77097414, "body": "@JeremyP: yes, you actually want a separate set of wrappers for const pointers  (with a different name for C) ."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1499874466, "post_id": 45060611, "comment_id": 77097946, "body": "It might be informative to add a short explanation as to exactly <i>why</i> the macro cast is bad (ie., no type checking on the argument), and that using a <code>static inline</code> function fixes that. (And that using current C compilers, <code>static inline</code> functions are just as fast as macros.)"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 6, "last_activity_date": 1499881776, "last_edit_date": 1499881776, "creation_date": 1499869934, "answer_id": 45060611, "question_id": 45058878, "link": "https://stackoverflow.com/questions/45058878/why-libxml2-uses-bad-cast-everywhere-in-a-c-c-code/45060611#45060611", "title": "Why libxml2 uses &quot;BAD_CAST&quot; everywhere in a C/C++ code?", "body": "<p>This design decision is unfortunate, but rooted in another unfortunate choice made 40 years ago: allowing <code>char</code> to be potentially signed by default, which is inconsistent with the behavior of <code>getchar()</code>, <code>strcmp()</code>...</p>\n\n<p>You can use an inline function to convert from <code>char *</code> to <code>unsigned char *</code> and vice-versa with a single hidden cast, and use these when passing arguments:</p>\n\n<pre><code>static inline unsigned char *c2uc(char *s) { return (unsigned char*)s; }\nstatic inline char *uc2c(unsigned char *s) { return (char*)s; }\n</code></pre>\n\n<p>These wrappers are much safer to use than basic casts as they can only be applied to one type and convert to its <code>unsigned</code> counterpart.  Regular casts are problematic as they can be applied to any type and hide type conversion errors.  <code>static inline</code> functions are expanded by the compiler at no runtime cost.</p>\n"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 0, "accepted_answer_id": 45060611, "answer_count": 1, "score": 3, "last_activity_date": 1499881776, "creation_date": 1499865675, "last_edit_date": 1499869958, "question_id": 45058878, "link": "https://stackoverflow.com/questions/45058878/why-libxml2-uses-bad-cast-everywhere-in-a-c-c-code", "title": "Why libxml2 uses &quot;BAD_CAST&quot; everywhere in a C/C++ code?", "body": "<p>It's said that because libxml2 uses <code>unsigned char</code> as storage to make encoding/decoding between char sets convenient ---- isn't it ugly to force users to write \"BAD_CAST\" everywhere in the code, when reading/creating xml node names, contents, text nodes, etc.</p>\n\n<p>It there a way to avoid writing such \"BAD_CAST\" everywhere? The design is really so bad.</p>\n"}, {"tags": ["c", "multiprocessing", "fork"], "comments": [{"owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "edited": false, "score": 1, "creation_date": 1499865990, "post_id": 45057537, "comment_id": 77091395, "body": "Since you <code>fork()</code>. It does not block the parent and both the child and parent run parallel. maybe before a process modifies the file, all the other threads have already read the file. This scheduling is done by the kernel and you cannot change it. You can use <code>vfork()</code> if you want the parent to be suspended till the child modifies the file."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499868372, "post_id": 45057537, "comment_id": 77093237, "body": "Be very cautious with <code>vfork()</code>; in the classic version, you can only exec or exit."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "edited": false, "score": 0, "creation_date": 1499868578, "post_id": 45057537, "comment_id": 77093402, "body": "You really need to show an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  It is fairly likely the synchronization problem identified by @SurajS.  There are many IPC mechanisms other than pipes that could be used. We can&#39;t tell which ones you&#39;re aware of and which might be appropriate to suggest."}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499870077, "post_id": 45057537, "comment_id": 77094606, "body": "I&#39;m aware of socket, shared memory, named pipe, pipe, message queues. But I don&#39;t want to use them at this level. gradually wanna apply them. Think of a directory and includes text files, maybe dir in another dir, I count the words and sum up the total as a result. But, every file belongs to a child. Everything is okay except summation part. As I said every child runs the snippet into. Since I check pids, it&#39;s forking as intended. The issue is about managing them. I&#39;m just using the snippet to the sum part. @JonathanLeffler"}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499870085, "post_id": 45057537, "comment_id": 77094613, "body": "By the way, I can open files for every child to save counted number with their pids then read files and sum the values from the parent but it seems long for me. I&#39;m thinking easy way without the IPCs. @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499870403, "post_id": 45057537, "comment_id": 77094838, "body": "You&#39;re working with communicating processes; you can&#39;t avoid using IPC (inter-process communication).  Can the parent wait for the children to die?  Could child N (0, 1, 2, \u2026) write to position N in the file, so the parent reads the whole file as an array once the children complete and then sums it?"}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499870748, "post_id": 45057537, "comment_id": 77095117, "body": "<i>Can the parent wait for the children to die?</i> -&gt; of course, otherwise isn&#39;t it <i>zombie</i>? Shouldn&#39;t the parent always wait for its kids? I think the parent always should wait.  <i>Could child N (0, 1, 2, \u2026) write to position N in the file, so the parent reads the whole file as an array once the children complete and then sums it?</i> Yes it is possible. It&#39;s another good solution seemingly. But, can&#39;t we go with my code snippet? And what about <i>flock</i>? Can&#39;t we apply it on the snippet? @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499871080, "post_id": 45057537, "comment_id": 77095375, "body": "Note that your snippet reads the first four bytes and writes the second four bytes.  Do you simply need to seek back to the start before writing?  You&#39;d need to seek backwards one unit if treating the file as an array.  Note that treating the file as an array is a simple form of synchronization.  Each child works on its part and leaves every one else&#39;s part alone."}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499871842, "post_id": 45057537, "comment_id": 77095995, "body": "I&#39;m using for backward lseek, did I misunderstand what you mean? Frankly, I don&#39;t want to share my all code here, but I want you to inform me with your knowledge as well because I&#39;ve spent too much time for it.  <a href=\"http://sonerakar.com.tr/soner_code.txt\" rel=\"nofollow noreferrer\">This link</a>  is all my code. To answer your explanation, yes I want to do what you mean as array I think. @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499872135, "post_id": 45057537, "comment_id": 77096217, "body": "You do a seek before you read; once you&#39;ve read, you need to do another seek to overwrite what you read.  If you treat the file as an array, then child N will seek to <code>lseek(fd, N * sizeof(int), SEEK_SET)</code> before reading, and <code>lseek(fd, -sizeof(int), SEEK_CUR);</code> before writing.  After you read, the current position is after the last byte read; if you immediately write, the write goes there, after the data you read.  (Beware: standard I/O with <code>FILE *</code> streams mandates seeks or similar between reading and writing or vice versa on a stream for update.  File descriptor I/O does not.)"}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499872184, "post_id": 45057537, "comment_id": 77096254, "body": "OMG! It&#39;s worked when I put lseek before write(). But how come how why ? What about syncronazation? Don&#39;t I need flock ? @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499872269, "post_id": 45057537, "comment_id": 77096327, "body": "You can use any synchronization technique you like.  <code>flock()</code> is one; <code>fcntl()</code>, <code>locking()</code>, <code>lockf()</code> are other locking options which may be available.  Etc."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499872485, "post_id": 45057537, "comment_id": 77096513, "body": "A dead child is a zombie until orphaned by the death of the parent (whereupon a system process inherits the orphan and waits for it and it ceases to exist at all), or until the parent waits for (acknowledges) the child&#39;s death (and it ceases to exist at all)."}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499872767, "post_id": 45057537, "comment_id": 77096745, "body": "But, I wonder <i>isn&#39;t <code>write()</code> function automatically cleaning and overwriting the file?</i> However, It&#39;s not in append mode, it&#39;s just writing. For locking mechanism, when a child locks the common file to read-write, there will be dead lock. I mean once a child obtains lock, the another one also want to obtain it? How can I prevent/avoid from it? How can I block the other children up to releasing the lock? @JonathanLeffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499873059, "post_id": 45057537, "comment_id": 77096975, "body": "Unless the file is opened in append mode, the <code>write()</code> function writes at the current position in the file; the <code>read()</code> function reads from the current position in the file.  If one child locks the file descriptor, seeks, reads, seeks, writes, unlocks, no other child can do anything with the file while the first child holds the lock \u2014 as long as the other child also pays attention to the locks.  If the children ignore the locks, then all bets are off, but if they&#39;re dutiful obedient children and play by the rules and not wild anarchistic renegades, then all will be well."}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499873784, "post_id": 45057537, "comment_id": 77097490, "body": "I will strive for the synchronization. Thank you for your education for me. I hope I can take advantage of your training again whether I stuck or not. You must be alive version of Dennis Ritchie!  @JonathanLeffler"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1502276160, "post_id": 45057537, "comment_id": 78136098, "body": "@concurrencyboy btw, I found the book you copied the concurrency code from in <a href=\"https://stackoverflow.com/questions/45588250/reuse-the-variable-passed-to-as-thread-paramater\">here</a> and I think you could actually make it into a useful self-qa if you mention the source etc, then write an answer to it yourself and self-accept and ping me, I could upvote. As it was written now I didn&#39;t realize it was copied verbatim"}], "owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499861953, "creation_date": 1499861953, "question_id": 45057537, "link": "https://stackoverflow.com/questions/45057537/communicate-child-processes-without-pipe-dup-and-fifo", "title": "Communicate child processes without pipe,dup and fifo", "body": "<p>The program is forking, every child can be father then like grandfather. I want to communicate them by using a text file. They will read the number, sum up every time with prior one then write back to the file. I write <code>0</code> at first on the text file with <code>open()</code> in read-write mode. Afterwards, in a function call the code,</p>\n\n<pre><code>int sum = 0;\nlseek(fd, 0, 0);\nread(fd, &amp;sum, sizeof(sum));\nsum = sum + count;\nwrite(fd, &amp;sum, sizeof(sum));\n</code></pre>\n\n<p>All child go in the function but as a result always gotten <code>0</code>. I have printed <code>count</code> values, get rightly. I have also tried to lock to syncronize(<code>fcntl()</code>) them but not succeed.</p>\n"}, {"tags": ["c", "matrix", "linear-algebra", "gsl"], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 3963540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c331beaac3186a94a522a77586937cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Marouen", "link": "https://stackoverflow.com/users/3963540/marouen"}, "edited": false, "score": 0, "creation_date": 1500033383, "post_id": 45078924, "comment_id": 77175695, "body": "here is a practical code that does what you said <a href=\"https://github.com/RasmusFonseca/SVDcomparison/blob/master/SVDGSL.cpp\" rel=\"nofollow noreferrer\">github.com/RasmusFonseca/SVDcomparison/blob/master/SVDGSL.cp&zwnj;&#8203;p</a>"}], "tags": [], "owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "is_accepted": true, "score": 1, "last_activity_date": 1499944281, "creation_date": 1499944281, "answer_id": 45078924, "question_id": 45057406, "link": "https://stackoverflow.com/questions/45057406/computing-null-space-of-matrix-via-gsl-with-mn-gives-an-error/45078924#45078924", "title": "Computing null space of matrix via GSL with M&lt;N gives an error", "body": "<p>You can do this by computing the SVD of A' (A transpose) rather than A. The null space of A is spanned by the left singular vectors corresponding to zero singular values.</p>\n\n<p>For any matrix B, just as the right singular vectors corresponding to  zero singular values span the null-space of B, the left singular vectors corresponding to non-zero singular vectors span the range of B.</p>\n\n<p>So if we do an SVD of A', with</p>\n\n<pre><code>A' = U*S*V'\n</code></pre>\n\n<p>The range of A' is spanned by the columns of U corresponding to non-zero singular vectors. But the null-space of A is the set of vectors perpendicular to the range of A'. Therefore the null-space of A is spanned by the columns of U correspeonding to zero singular values.</p>\n"}], "owner": {"reputation": 756, "user_id": 3963540, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c331beaac3186a94a522a77586937cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Marouen", "link": "https://stackoverflow.com/users/3963540/marouen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 45078924, "answer_count": 1, "score": 0, "last_activity_date": 1499944281, "creation_date": 1499861584, "question_id": 45057406, "link": "https://stackoverflow.com/questions/45057406/computing-null-space-of-matrix-via-gsl-with-mn-gives-an-error", "title": "Computing null space of matrix via GSL with M&lt;N gives an error", "body": "<p>I am computing the null space of a matrix A(m,n) with gsl library in c.</p>\n\n<p>Following the documentation of singular value decomposition (SVD) function in gsl such as A = USVt</p>\n\n<p>\" For a rank-deficient matrix, the null space of A is given by the columns of V corresponding to the zero singular values. \"</p>\n\n<p>The corresponding function is</p>\n\n<pre><code>int gsl_linalg_SV_decomp(gsl_matrix * A, gsl_matrix * V, gsl_vector * S, gsl_vector * work)\n</code></pre>\n\n<p>the syntax is the following:</p>\n\n<pre><code>#include &lt;gsl/gsl_linalg.h&gt;\n#include &lt;gsl/gsl_blas.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n...\n\nint main(int argc, char **argv){\n    ...\n    gsl_linalg_SV_decomp(A,V,S,work);\n\nreturn 0;\n}\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>gsl: svd.c:60: ERROR: svd of MxN matrix, M&lt;N, is not implemented\nDefault GSL error handler invoked\n</code></pre>\n\n<p>Indeed A has M &lt; N. </p>\n\n<p>Are you aware of another library that would compute the Null space of a matrix of M &lt; N ? Is there a workaround with gsl?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1499861442, "post_id": 45057086, "comment_id": 77087776, "body": "<code>printf(&quot; %x\\n&quot;, (uint8_t)(ui8 &lt;&lt; 24));</code> -- and the value of type <code>uint8_t</code> is still going to be converted (to <code>int</code>) anyway."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499861661, "post_id": 45057086, "comment_id": 77087961, "body": "Why do you want to shift an 8-bit variable 24 steps?"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499932173, "post_id": 45057086, "comment_id": 77121483, "body": "@klutt To compose 32-bit value from 4 byte (serial communication) data buffer. Kind of parsing"}], "answers": [{"comments": [{"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499864374, "post_id": 45057186, "comment_id": 77090073, "body": "But I see this: &quot;If both operands have the same type, then no further conversion is needed.&quot;. Then how come they are still converted to int?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499864646, "post_id": 45057186, "comment_id": 77090315, "body": "@Hairi Where do you see that? None of my links say that."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499864758, "post_id": 45057186, "comment_id": 77090401, "body": "Here: <a href=\"https://stackoverflow.com/questions/50605/signed-to-unsigned-conversion-in-c-is-it-always-safe\" title=\"signed to unsigned conversion in c is it always safe\">stackoverflow.com/questions/50605/&hellip;</a>  Bullet #1"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 1, "creation_date": 1499865041, "post_id": 45057186, "comment_id": 77090634, "body": "@Hairi That answer is missing a little bit of preamble, namely a section saying &quot;Otherwise, the integer promotions are performed on both  operands. Then the following rules are applied to the promoted operands&quot;, where the &quot;following rules&quot; is the list you read. That means the integer promotion is done <i>first</i> and <i>then</i> if the types are the same no more conversions are made."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1499861371, "last_edit_date": 1499861371, "creation_date": 1499860973, "answer_id": 45057186, "question_id": 45057086, "link": "https://stackoverflow.com/questions/45057086/printf-prints-big-number-for-uint-8/45057186#45057186", "title": "printf prints big number for uint_8", "body": "<p>What happens is something called <a href=\"http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions\" rel=\"nofollow noreferrer\"><em>usual arithmetic conversion</em></a> which leads to <a href=\"http://en.cppreference.com/w/c/language/conversion#Integer_promotions\" rel=\"nofollow noreferrer\"><em>integer promotion</em></a> for both arguments of the <code>&lt;&lt;</code> operator.</p>\n\n<p>If you instead of using the shift expression directly in the <code>printf</code> argument, and instead stored it in a <code>uint8_t</code> variable, then the result would be zero. <em>However</em> when you call <code>printf</code> you would instead have a <a href=\"http://en.cppreference.com/w/c/language/conversion#Default_argument_promotions\" rel=\"nofollow noreferrer\"><em>default argument promotion</em></a> which would turn the <code>uint8_t</code> variable into an <code>int</code>. But that would lead to another problem because even though the format <code>\"%x\"</code> expects an <code>int</code> (an <code>unsigned int</code> actually, see e.g. <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">this <code>printf</code> and family reference</a>) the data is actually an <code>uint8_t</code>. That means you have mismatched format specifier and argument, leading to <em>undefined behavior</em>. The correct format specifier to print an <code>uint8_t</code> is <code>\"%hhx\"</code>, or better yet use the <code>PRI8x</code> macro:</p>\n\n<pre><code>uint8_t result = ...\nprintf(\"%\" PRI8x \"\\n\", result);\n</code></pre>\n\n<p>See e.g. <a href=\"http://en.cppreference.com/w/c/types/integer#Format_macro_constants\" rel=\"nofollow noreferrer\">this format macro reference</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499864401, "post_id": 45057195, "comment_id": 77090098, "body": "Where did you get this rule from?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499864433, "post_id": 45057195, "comment_id": 77090127, "body": "Have a look at this: <a href=\"https://stackoverflow.com/questions/7947982/c-standard-and-bitshifts\" title=\"c standard and bitshifts\">stackoverflow.com/questions/7947982/c-standard-and-bitshifts</a>"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499865000, "post_id": 45057195, "comment_id": 77090610, "body": "Wow, that was subtle."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1499865090, "post_id": 45057195, "comment_id": 77090664, "body": "@Hairi: Yes, it&#39;s one for the pub quiz, for certain."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1499860986, "creation_date": 1499860986, "answer_id": 45057195, "question_id": 45057086, "link": "https://stackoverflow.com/questions/45057086/printf-prints-big-number-for-uint-8/45057195#45057195", "title": "printf prints big number for uint_8", "body": "<p><em>Both</em> arguments of <code>&lt;&lt;</code> are converted to <code>int</code> prior to the evaluation, <em>despite</em> the fact that you've attempted to force the issue with <code>(uint8_t)24</code>.</p>\n\n<p>This is necessarily true since <code>uint8_t</code> is narrower than an <code>int</code> on any platform.</p>\n\n<p>So the result, <code>ff000000</code>, you observe is consistent with an <code>int</code> being at least 32 bits wide on your platform.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 45057195, "answer_count": 2, "score": 0, "last_activity_date": 1499868588, "creation_date": 1499860695, "last_edit_date": 1499868588, "question_id": 45057086, "link": "https://stackoverflow.com/questions/45057086/printf-prints-big-number-for-uint-8", "title": "printf prints big number for uint_8", "body": "<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main()\n{\n  uint8_t ui8 = 0xff;\n  printf(\" %x\\n\", ui8);\n  printf(\" %x\\n\", (uint8_t)24);\n  printf(\" %x\\n\", ui8 &lt;&lt; (uint8_t)24);\n}\n</code></pre>\n\n<p>The output is : </p>\n\n<pre><code> ff\n 18\n ff000000\n</code></pre>\n\n<p>The question is: If I have two <code>uint8_t</code> variables why the result is \"promoted\" to a higher rank. If it is not promoted, why do I get such a big number. I test it no MinGW win7-64bit platform  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1499859750, "post_id": 45056618, "comment_id": 77086425, "body": "since you are concatenating strings potentially 40-char long together into a 40-char long buffer, you&#39;re looking for trouble."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1499859928, "post_id": 45056618, "comment_id": 77086562, "body": "&quot;If the buffer is not large enough to hold the line, getline() resizes it with realloc, updating *lineptr and *n as necessary.&quot;"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1499859997, "post_id": 45056618, "comment_id": 77086616, "body": "@PaulOgilvie ok nice. The strcat part remains a problem, though, but the real issue is in the answer below."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499860053, "post_id": 45056618, "comment_id": 77086660, "body": "@Jean-Fran&#231;oisFabre, fully agree. Lots of problems here."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499860079, "post_id": 45056618, "comment_id": 77086683, "body": "although 40 chars are OK to read one number per line..."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1499859926, "creation_date": 1499859926, "answer_id": 45056794, "question_id": 45056618, "link": "https://stackoverflow.com/questions/45056618/stack-smashing-detected-aborted-core-dumped/45056794#45056794", "title": "Stack Smashing Detected - Aborted (core Dumped)", "body": "<p>Lets take a close look at these two lines:</p>\n\n<pre><code>char num[1];\n...\nsprintf(num,\"%d\",i);\n</code></pre>\n\n<p>You declare <code>num</code> as an array of a <em>single</em> character, forgetting that (<code>char</code>) strings in C are really called <strong><em>null terminated</em></strong> <em>byte strings</em>. That means a string of a single character needs space for <em>two</em> <code>char</code> elements, to fit the terminator.</p>\n\n<p>Since you don't have space for the terminator then <code>sprintf</code> will write <em>out of bounds</em> of your array, leading to <em>undefined behavior</em> and your smashed stack.</p>\n\n<p>If you are certain that the number will never be more than a single digit (which it wont, it will include the two-digit number <code>10</code>), then you need to have an array of at least two character elements.</p>\n\n<p>I also recommend you use <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>snprintf</code></a> to avoid buffer overflows like that.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7390580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff0a7d731fa44c97379dc5b5502bf18?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Ravenhall", "link": "https://stackoverflow.com/users/7390580/ben-ravenhall"}, "is_accepted": false, "score": 0, "last_activity_date": 1499862707, "creation_date": 1499862707, "answer_id": 45057794, "question_id": 45056618, "link": "https://stackoverflow.com/questions/45056618/stack-smashing-detected-aborted-core-dumped/45057794#45057794", "title": "Stack Smashing Detected - Aborted (core Dumped)", "body": "<p>thanks for all the help, what Some Programmer Dude said did help i think but i still had an issue. I found that the issue was the line</p>\n\n<pre><code>strcat(buffer4,buffer3);\n</code></pre>\n\n<p>As the buffer size for both was the same, it was creating a string which requires a buffer of 80?</p>\n\n<p>i amended the line </p>\n\n<pre><code>char *buffer4 =malloc(buffer_size * sizeof(char));\n</code></pre>\n\n<p>to read </p>\n\n<pre><code>char *buffer4 =malloc(80 * sizeof(char));\n</code></pre>\n\n<p>And this now works without stack smashing</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 1, "user_id": 7390580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fff0a7d731fa44c97379dc5b5502bf18?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Ravenhall", "link": "https://stackoverflow.com/users/7390580/ben-ravenhall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3888, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1499862707, "creation_date": 1499859450, "last_edit_date": 1499859856, "question_id": 45056618, "link": "https://stackoverflow.com/questions/45056618/stack-smashing-detected-aborted-core-dumped", "title": "Stack Smashing Detected - Aborted (core Dumped)", "body": "<p>I cannot seem to find why this is stack smashing, the code is meant to read in some files, read each line and cat other lines on the end. but i get a stack smashing detected error at the very end of code. </p>\n\n<p>Any ideas? </p>\n\n<p>Code is :</p>\n\n<pre><code>void main (int argc, char *argv[])\n{\n\nchar lineCount;\nint count = 0;\nsize_t buffer_size = 40;\nchar *buffer =malloc(buffer_size * sizeof(char));\nchar *buffer2 =malloc(buffer_size * sizeof(char));\nchar *buffer3 =malloc(buffer_size * sizeof(char));\nchar *buffer4 =malloc(buffer_size * sizeof(char));\nFILE *Dictionary, *Names;\nDictionary = fopen (\"/home/overdog/Documents/Coding/dictionary.txt\",\"r\");\nNames = fopen (\"/home/overdog/Documents/Coding/rawnames.txt\",\"r\");\n    while(-1 != getline(&amp;buffer,&amp;buffer_size,Dictionary))\n    {\n        count = count + 1;\n\n        for (int i =1; i &lt;= 10; i++)\n        {\n            memcpy(buffer2,buffer,buffer_size);\n            char num[1];\n            RemoveEndLine(buffer2);\n            sprintf(num,\"%d\",i);\n            strcat(buffer2,num);\n            printf(\"%s\\n\",buffer2);\n                while(-1 != getline(&amp;buffer3,&amp;buffer_size,Names))\n                {\n                    memcpy(buffer4,buffer2,buffer_size);\n                    printf(\"before break\\n\");\n                    strcat(buffer4,buffer3);\n                    printf(\"%s\",buffer4);\n\n\n\n\n                }\n\n\n        }\n\n\n\n    }\nprintf(\"Lines = %d \\n\",count);\nfree(buffer);\nfree(buffer2);\nfree(buffer3);\nfree(buffer4);\nfclose(Dictionary);\nfclose(Names);\nprintf(\"test\\n\");\n}\n</code></pre>\n\n<p>The output seems OK, and the print of <code>\"test\"</code> at the end of the code prints. And then the Stack smashing error is seen.</p>\n"}, {"tags": ["c", "sockets", "libcurl"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1500180850, "post_id": 45056310, "comment_id": 77220647, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499860704, "post_id": 45056750, "comment_id": 77087176, "body": "other than ffmpeg can&#39;t we use libcurl ?"}, {"owner": {"reputation": 9, "user_id": 8240374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d301ecea5128a02cea8e0bc790533498?s=128&d=identicon&r=PG&f=1", "display_name": "rtsg", "link": "https://stackoverflow.com/users/8240374/rtsg"}, "reply_to_user": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499861170, "post_id": 45056750, "comment_id": 77087528, "body": "But I think that ffmpeg is faster"}, {"owner": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499861386, "post_id": 45056750, "comment_id": 77087722, "body": "can we capture the streaming using socket connection? and How to do ?"}], "tags": [], "owner": {"reputation": 9, "user_id": 8240374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d301ecea5128a02cea8e0bc790533498?s=128&d=identicon&r=PG&f=1", "display_name": "rtsg", "link": "https://stackoverflow.com/users/8240374/rtsg"}, "is_accepted": false, "score": 0, "last_activity_date": 1499911287, "last_edit_date": 1499911287, "creation_date": 1499859800, "answer_id": 45056750, "question_id": 45056310, "link": "https://stackoverflow.com/questions/45056310/capturing-the-rtsp-streaming-using-libcurl/45056750#45056750", "title": "Capturing the RTSP streaming using libcurl", "body": "<p>Use FFmpeg </p>\n\n<p>ffmpeg -i rtsp://@HOST:PORT -acodec copy -vcodec copy  D:/test.mp4</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499921335, "post_id": 45071360, "comment_id": 77115781, "body": "can we do socket programming using this libcurl libraries?"}, {"owner": {"reputation": 73, "user_id": 1222534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6c831947e1e1cba9d875f44b19000f?s=128&d=identicon&r=PG", "display_name": "Pra", "link": "https://stackoverflow.com/users/1222534/pra"}, "reply_to_user": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499922213, "post_id": 45071360, "comment_id": 77116094, "body": "According to libcurl website <a href=\"https://curl.haxx.se/\" rel=\"nofollow noreferrer\">link</a>  DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, Telnet and TFTP.....and many more. So it is mainly targeting protocols developed on top of basic socket. if you want to do socket programming check BSD socket <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "edited": false, "score": 0, "creation_date": 1499922388, "post_id": 45071360, "comment_id": 77116171, "body": "How can we capture video data after streaming using libcurl? Is there any way to do ? Please suggest with an example...."}], "tags": [], "owner": {"reputation": 73, "user_id": 1222534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6c831947e1e1cba9d875f44b19000f?s=128&d=identicon&r=PG", "display_name": "Pra", "link": "https://stackoverflow.com/users/1222534/pra"}, "is_accepted": false, "score": 1, "last_activity_date": 1499919829, "creation_date": 1499919829, "answer_id": 45071360, "question_id": 45056310, "link": "https://stackoverflow.com/questions/45056310/capturing-the-rtsp-streaming-using-libcurl/45071360#45071360", "title": "Capturing the RTSP streaming using libcurl", "body": "<p>Please refer the libcurl example at below link</p>\n\n<p><a href=\"https://curl.haxx.se/libcurl/c/rtsp.html\" rel=\"nofollow noreferrer\">https://curl.haxx.se/libcurl/c/rtsp.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 8246480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41022f0dcea68996288efc8f6e551c97?s=128&d=identicon&r=PG&f=1", "display_name": "ansari", "link": "https://stackoverflow.com/users/8246480/ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499919829, "creation_date": 1499858565, "question_id": 45056310, "link": "https://stackoverflow.com/questions/45056310/capturing-the-rtsp-streaming-using-libcurl", "title": "Capturing the RTSP streaming using libcurl", "body": "<p>How can I capture the RTSP streaming using socket connection ? \nI don't want to use opencv libraries.\nIf there is any alternatives libraries please suggest. </p>\n\n<p>If we use libcurl how can we proceed? </p>\n\n<p>Please help me. I am new to this libraries. </p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499858268, "post_id": 45056165, "comment_id": 77085414, "body": "That <code>Enter</code> key you pressed after inputting the number will still be in the input buffer as a newline. Think about what happens to that in the next <code>scanf</code> call."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1499858372, "post_id": 45056165, "comment_id": 77085480, "body": "The first <code>scanf()</code> is leaving a newline character in the input stream, picked up by the second call. Try <code>scanf(&quot;%[^\\n]s&quot;,str);</code> --&gt; <code>scanf(&quot; %[^\\n]&quot;,str);</code>. Note the leading space in the format string to skip over the newline character; also note that the trailing <code>s</code> was not needed as it is not part of the <code>%[]</code> directive."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499858388, "post_id": 45056165, "comment_id": 77085487, "body": "<code>scanf(&quot;%[^\\n]s&quot;,str);</code> &lt;- wrong. 1. it&#39;s <b>either</b> <code>[]</code> <b>or</b> <code>s</code>, not both. 2. it overflows any buffer. 3. it can&#39;t scan the <code>\\n</code> that&#39;s left in the buffer from the <code>scanf()</code> call before."}, {"owner": {"reputation": 1, "user_id": 7536294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69002e29b12c6b52e98f3749bdd47ac0?s=128&d=identicon&r=PG&f=1", "display_name": "dkrity", "link": "https://stackoverflow.com/users/7536294/dkrity"}, "edited": false, "score": 0, "creation_date": 1499858425, "post_id": 45056165, "comment_id": 77085513, "body": "From where i will get to know these things ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499858532, "post_id": 45056165, "comment_id": 77085572, "body": "@dkrity If in doubt, from the C standard (eg, see <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">a draft here</a>), but this of course is a reference, hard to read if you don&#39;t know the issues already. And then, for learning, there are resources like on this site <a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\">How to read / parse input in C? The FAQ</a> and e.g. a <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">document I wrote myself</a>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1499858569, "post_id": 45056165, "comment_id": 77085596, "body": "<a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Get a good book</a>."}, {"owner": {"reputation": 1, "user_id": 7536294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69002e29b12c6b52e98f3749bdd47ac0?s=128&d=identicon&r=PG&f=1", "display_name": "dkrity", "link": "https://stackoverflow.com/users/7536294/dkrity"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499858837, "post_id": 45056165, "comment_id": 77085782, "body": "Thanks ! @David Bowling it&#39;s working ! and good books like ?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1499858882, "post_id": 45056165, "comment_id": 77085809, "body": "Follow the link in my last comment to a list."}], "owner": {"reputation": 1, "user_id": 7536294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69002e29b12c6b52e98f3749bdd47ac0?s=128&d=identicon&r=PG&f=1", "display_name": "dkrity", "link": "https://stackoverflow.com/users/7536294/dkrity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499858168, "creation_date": 1499858168, "question_id": 45056165, "link": "https://stackoverflow.com/questions/45056165/when-using-scanf-of-line5-then-scanf-ns-str-is-not-working-but-wit", "title": "when using &#39;scanf&#39; of line5 then &#39;scanf(&quot;%[^\\n]s&quot;,str); &#39; is not working but without scanf of &#39;line5&#39; it&#39;s working. How does this happen?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n int t,i,j,k;\n scanf(\"%d\",&amp;t); // 'line5'\n char str[10000];\n for(i=0;i&lt;t;i++)\n {\n   scanf(\"%[^\\n]s\",str);// 'line9'\n   k=strlen(str);\n   for(j=0;j&lt;k;j++)\n   {\n     printf(\"%c\",str[j]);\n   }\n   printf(\"\\n\");\n }\n  return 0;\n }\n</code></pre>\n\n<h2>## scanf function is not working</h2>\n\n<p>I have tried this question by another way but still not working.I am facing \n this problem for 1st time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1499857009, "post_id": 45055525, "comment_id": 77084610, "body": "<code>strtok()</code> modifies its argument. You are using pointers <code>y</code> and <code>t</code> that point somewhere inside the same (changing) object."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1499857167, "post_id": 45055525, "comment_id": 77084696, "body": "If you&#39;re learning to program, please forget you ever heard of <code>gets()</code>. It can never be used safely, and has been deprecated for some time. Most compilers will produce code that prints a warning message whenever your program runs. At some point in the future, this function will be removed altogether from stdio.h."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499857176, "post_id": 45055525, "comment_id": 77084702, "body": "You fail to take into account that the input string being pointed to by <code>y</code> is being broken into tokens. Make a copy of the input first. Also, you didn&#39;t reset <code>y</code> for the next token. Hence the program crash."}, {"owner": {"reputation": 35, "user_id": 8243160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JpIDgem6dsM/AAAAAAAAAAI/AAAAAAAACto/YhJaLWBFynQ/photo.jpg?sz=128", "display_name": "Prakhar Saxena", "link": "https://stackoverflow.com/users/8243160/prakhar-saxena"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499859362, "post_id": 45055525, "comment_id": 77086142, "body": "Thanks @WeatherVane it worked by pointing <code>y</code> to the copy of the string and resetting <code>y</code>at the end."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1499860279, "post_id": 45055525, "comment_id": 77086822, "body": "One problem is <code>strstr</code> is looking for substrings, not for words. <code>&quot;a marble&quot;</code>: 1. <code>&quot;a&quot;</code> is the first word <code>strtok</code> will find. 2. <code>&quot;strstr&quot;</code> will find <code>&quot;a&quot;</code> in <code>&quot;marble&quot;</code> as the second word."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499860389, "post_id": 45055525, "comment_id": 77086913, "body": "I was going to point out it is not a very good algorithm anyway. My corrected version when given the input &quot;two one two&quot; reports &quot;two appeared 2 times. one appeared 1 times. two appeared 2 times.&quot;"}, {"owner": {"reputation": 35, "user_id": 8243160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JpIDgem6dsM/AAAAAAAAAAI/AAAAAAAACto/YhJaLWBFynQ/photo.jpg?sz=128", "display_name": "Prakhar Saxena", "link": "https://stackoverflow.com/users/8243160/prakhar-saxena"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499860743, "post_id": 45055525, "comment_id": 77087204, "body": "@WeatherVane I have also made another algorithm to show the output without any repetition which worked perfectly. I was just wondering if it could&#39;ve worked with <code>strstr</code> and <code>strtok</code> functions."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499861041, "post_id": 45055525, "comment_id": 77087420, "body": "As ZDF wrote, it is flawed."}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499856828, "post_id": 45055654, "comment_id": 77084497, "body": "6th line: <code>gets(s);</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499856838, "post_id": 45055654, "comment_id": 77084505, "body": "Not even with the obsolete <code>get(s);</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 35, "user_id": 8243160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JpIDgem6dsM/AAAAAAAAAAI/AAAAAAAACto/YhJaLWBFynQ/photo.jpg?sz=128", "display_name": "Prakhar Saxena", "link": "https://stackoverflow.com/users/8243160/prakhar-saxena"}, "edited": false, "score": 0, "creation_date": 1499857255, "post_id": 45055654, "comment_id": 77084750, "body": "@PrakharSaxena please find a more modern text book."}], "tags": [], "owner": {"reputation": 1, "user_id": 7819220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81fc4a7a71843c1ca9be25db23113cb6?s=128&d=identicon&r=PG&f=1", "display_name": "M. AR.", "link": "https://stackoverflow.com/users/7819220/m-ar"}, "is_accepted": false, "score": -3, "last_activity_date": 1499856770, "creation_date": 1499856770, "answer_id": 45055654, "question_id": 45055525, "link": "https://stackoverflow.com/questions/45055525/frequency-of-every-word-in-a-string/45055654#45055654", "title": "Frequency of every Word in a String", "body": "<p>I think the main problem is that you don't provide a sentence to get the words.</p>\n\n<pre><code>char s[2222] = \"Enter here the sentence you want to check.\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": true, "score": 0, "last_activity_date": 1499863107, "last_edit_date": 1499863107, "creation_date": 1499861478, "answer_id": 45057370, "question_id": 45055525, "link": "https://stackoverflow.com/questions/45055525/frequency-of-every-word-in-a-string/45057370#45057370", "title": "Frequency of every Word in a String", "body": "<ol>\n<li>You cannot use <code>strstr</code> to search for words: the number of occurrence of <code>\"is\"</code> in <code>\"is this a test?\"</code> is two, not one.</li>\n<li>You cannot use <code>strtok</code> two times; first time to search for first occurrence and second time for subsequent occurrences, instead of <code>strstr</code>: <code>strtok</code> is using a static variable (see the note in this <a href=\"https://msdn.microsoft.com/en-us/library/2c8d19sb.aspx\" rel=\"nofollow noreferrer\">page</a>).</li>\n</ol>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>A begginner solution (<a href=\"http://ideone.com/bEUXAl\" rel=\"nofollow noreferrer\">run it</a>):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n#define MAXWORD 32\ntypedef struct\n{\n  char word[MAXWORD];\n  int count;\n} word_and_count_t;\n\n#define MAXWORDCOUNT 1024\nword_and_count_t table[MAXWORDCOUNT];\n\nint table_size;\n\nword_and_count_t* find( const char* word ) // range checking ignored\n{\n  int i;\n\n  for ( i = 0; i &lt; table_size; ++i )\n    if ( !strcmp( table[i].word, word ) )\n      return table + i;\n\n  strcpy( table[i].word, word );\n  table[i].count = 0;\n\n  ++table_size;\n\n  return table + i;\n}\n\nvoid display()\n{\n  for ( int i = 0; i &lt; table_size; ++i )\n    printf( \"%s - %d\\n\", table[i].word, table[i].count );\n}\n\nint main()\n{\n  //\n  char s[] = \"The greatness of a man is not in how much wealth he acquires, but in his integrity and his ability to affect those around him positively.\";\n\n  //\n  for ( char* word = strtok( s, \" ,.\" ); word; word = strtok( 0, \" ,.\" ) )\n    find( word )-&gt;count++;\n\n  //\n  display();\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8243160, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JpIDgem6dsM/AAAAAAAAAAI/AAAAAAAACto/YhJaLWBFynQ/photo.jpg?sz=128", "display_name": "Prakhar Saxena", "link": "https://stackoverflow.com/users/8243160/prakhar-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 45057370, "answer_count": 2, "score": 1, "last_activity_date": 1499863107, "creation_date": 1499856405, "last_edit_date": 1499856720, "question_id": 45055525, "link": "https://stackoverflow.com/questions/45055525/frequency-of-every-word-in-a-string", "title": "Frequency of every Word in a String", "body": "<p>I am writing some code which finds the frequency of every word in a given string using the strtok() and the strstr() functions. I don't know what is the problem with my code as no output is being displayed on the screen. Can anyone help me?I am new to C programming.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main(){\n\n  char s[2222];\n  gets(s);\n  char *t,*y=s;\n  int count=0;\n  t=strtok(s,\" ,.\");\n\n  while(t!=NULL)\n  {\n    count=0;\n    while(y=strstr(y,t))\n    {\n      y++;\n      count++;\n    }\n    printf(\"%s appeared %d times.\\n\",t,count);\n    t=strtok(NULL,\" ,.\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1499856171, "post_id": 45055398, "comment_id": 77084040, "body": "How about using <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead? Or if you&#39;re on a POSIX platform <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline</code></a>?"}], "answers": [{"comments": [{"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 1, "creation_date": 1499856971, "post_id": 45055473, "comment_id": 77084588, "body": "<code>scanf()</code> should never be used for input strings with spaces, but no problem to input numbers, characters and words (short strings), especially if it is formatted input"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499856993, "post_id": 45055473, "comment_id": 77084602, "body": "This is so much simplified, it can&#39;t be considered correct any more. As much as I appreciate the positive feedback on my document, you should improve your answer, e.g. show an example how to get input with <code>fgets()</code>. You&#39;re free to use citations when properly attributed."}, {"owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "edited": false, "score": 2, "creation_date": 1499858183, "post_id": 45055473, "comment_id": 77085367, "body": "Disagree. There is no reason to use scanf() for user input, ever. VolAnd, your response is self-contradictory, as the question is specifically about user input, not verified formatted input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499858773, "post_id": 45055473, "comment_id": 77085731, "body": "@torstenvl the problem with saying &quot;<i>never</i>&quot; is that very often, it&#39;s possible to construct (maybe exotic) examples proving you wrong. There are notable exceptions like &quot;<i>never use <code>gets()</code></i>&quot;, of course."}, {"owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "edited": false, "score": 0, "creation_date": 1499869874, "post_id": 45055473, "comment_id": 77094439, "body": "Felix: I invite you to construct such an example."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1500050104, "post_id": 45055473, "comment_id": 77186834, "body": "Seldom needed, yet usable cases of <code>scanf()</code>: 1) <code>scanf(&quot;%*[^\\n]&quot;)</code> to consume remaining non-<code>&#39;\\n&#39;</code>  after a <code>fgets()</code> than did not read a <code>&#39;\\n</code>&#39;. 2) <code>scanf(&quot;%99[^\\n]%n&quot;, ...)</code> as a step in reading input where null characters need to be discovered, something <code>fgets()</code> does not do well.  OTOH, with such esoteric <code>scanf()</code> use, I find <code>fgetc()</code> more clear."}], "tags": [], "owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "is_accepted": false, "score": 0, "last_activity_date": 1499856929, "last_edit_date": 1499856929, "creation_date": 1499856234, "answer_id": 45055473, "question_id": 45055398, "link": "https://stackoverflow.com/questions/45055398/how-to-scan-line-in-c-program-not-from-file/45055473#45055473", "title": "how to scan line in c program not from file", "body": "<p>scanf() should never be used for user input. The best way to get input from the user is with fgets(). </p>\n\n<p>Read more: <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1499857927, "creation_date": 1499857927, "answer_id": 45056072, "question_id": 45055398, "link": "https://stackoverflow.com/questions/45055398/how-to-scan-line-in-c-program-not-from-file/45056072#45056072", "title": "how to scan line in c program not from file", "body": "<blockquote>\n  <p>How to scan total line from user input with c program?</p>\n</blockquote>\n\n<p>There are many ways to <em>read</em> a line of input, and your usage of the word <em>scan</em> suggests you're already focused on the <code>scanf()</code> function for the job. This is unfortunate, because, although you can (to some extent) achieve what you want with <code>scanf()</code>, it's definitely not the best tool for reading a line.</p>\n\n<p>As already stated in the comments, your <code>scanf()</code> format string will <em>stop</em> at a newline, so the next <code>scanf()</code> will first find that newline and it can't match <code>[^\\n]</code> (which means anything <strong>except</strong> newline). As a newline is just another whitespace character, adding a blank in front of your conversion will silently <em>eat it up</em> ;)</p>\n\n<p>But now for the better solution: Assuming you only want to use standard C functions, there's already one function for <em>exactly</em> the job of reading a line: <a href=\"http://man7.org/linux/man-pages/man3/fgets.3p.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a>. The following code snippet should explain its usage:</p>\n\n<pre><code>char line[1024];\nchar *str = fgets(line, 1024, stdin); // read from the standard input\n\nif (!str)\n{\n    // couldn't read input for some reason, handle error here\n    exit(1); // &lt;- for example\n}\n\n// fgets includes the newline character that ends the line, but if the line\n// is longer than 1022 characters, it will stop early here (it will never \n// write more bytes than the second parameter you pass). Often you don't \n// want that newline character, and the following line overwrites it with\n// 0 (which is \"end of string\") **only** if it was there:\nline[strcspn(line, \"\\n\")] = 0;\n</code></pre>\n\n<p>Note that you <strong>might</strong> want to check for the newline character with <a href=\"https://linux.die.net/man/3/strchr\" rel=\"nofollow noreferrer\"><code>strchr()</code></a> instead, so you actually know whether you have the whole line or maybe your input buffer was to small. In the latter case, you might want to call <code>fgets()</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1500052101, "creation_date": 1500052101, "answer_id": 45108349, "question_id": 45055398, "link": "https://stackoverflow.com/questions/45055398/how-to-scan-line-in-c-program-not-from-file/45108349#45108349", "title": "how to scan line in c program not from file", "body": "<blockquote>\n  <p>How to scan total line from user input with c program?</p>\n</blockquote>\n\n<p><code>scanf(\"%99[^\\n]\",st)</code> reads a <em>line</em>, almost.</p>\n\n<p>With the C Standard Library a <em>line</em> is</p>\n\n<blockquote>\n  <p>A text stream is an ordered sequence of characters composed into <em>lines</em>, <strong>each line consisting of zero or more characters plus a terminating new-line character</strong>.  Whether the last line requires a terminating new-line character is implementation-defined.  C11dr  \u00a77.21.2 2</p>\n</blockquote>\n\n<p><code>scanf(\"%99[^\\n]\",st)</code> fails to read the end of the line, the <code>'\\n'</code>.</p>\n\n<p>That is why on the 2nd call, the <code>'\\n'</code> remains in <code>stdin</code> to be read and <code>scanf(\"%99[^\\n]\",st)</code> will not read it.</p>\n\n<p>There <em>are</em> ways to use  <code>scanf(\"%99[^\\n]\",st);</code>, or a variation of it as a step in reading user input, yet they suffer from 1) Not handling a blank line <code>\"\\n\"</code> correctly 2) Missing rare input errors 3) Long line issues and other nuances.</p>\n\n<hr>\n\n<p>The preferred portable solution is to use <code>fgets()</code>.  Loop example:</p>\n\n<pre><code>#define LINE_MAX_LENGTH 200\nchar buf[LINE_MAX_LENGTH + 1 + 1];  // +1 for long lines detection, +1 for \\0\nwhile (fgets(buf, sizeof buf, stdin)) {\n  size_t eol = strcspn(buf, \"\\n\");  **\n  buf[eol] = '\\0';  // trim potential \\n\n  if (eol &gt;= LINE_MAX_LENGTH) {\n    // IMO, user input exceeding a sane generous threshold is a potential hack\n    fprintf(stderr, \"Line too long\\n\");\n    // TBD : Handle excessive long line\n  }\n\n  // Use `buf[[]`\n}\n</code></pre>\n\n<hr>\n\n<p>Many platforms support <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a>  to read a line.   </p>\n\n<p>Short-comings: Non C-standard and allow a hacker to overwhelm system resources with insanely long lines.     </p>\n\n<hr>\n\n<p>In C, there is not a <em>great</em> solution.  What is best depends on the various coding goals.</p>\n\n<hr>\n\n<p>** I prefer <code>size_t eol = strcspn(buf, \"\\n\\r\");</code> to read lines in a *nix environment that may end with <code>\"\\r\\n\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4517500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8948a297fc8f8b434d9fb1cfa421b872?s=128&d=identicon&r=PG&f=1", "display_name": "\u015fevket &#246;zurfal\u0131", "link": "https://stackoverflow.com/users/4517500/%c5%9fevket-%c3%b6zurfal%c4%b1"}, "is_accepted": false, "score": -1, "last_activity_date": 1582184240, "creation_date": 1582184240, "answer_id": 60314960, "question_id": 45055398, "link": "https://stackoverflow.com/questions/45055398/how-to-scan-line-in-c-program-not-from-file/60314960#60314960", "title": "how to scan line in c program not from file", "body": "<pre><code>char str[1024];\nchar *alline = fgets(str, 1024, stdin);\nscanf(\"%[^'\\n']s\",alline);\n</code></pre>\n\n<p>I think the correct solution should be like this. It is worked for me.\nHope it helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 8295148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7ec053fb218dc3ed06382ebdb9f774c?s=128&d=identicon&r=PG&f=1", "display_name": "Adithya Yelloju", "link": "https://stackoverflow.com/users/8295148/adithya-yelloju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5275, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1582184240, "creation_date": 1499856036, "last_edit_date": 1499856071, "question_id": 45055398, "link": "https://stackoverflow.com/questions/45055398/how-to-scan-line-in-c-program-not-from-file", "title": "how to scan line in c program not from file", "body": "<p>How to scan total line from user input with c program?</p>\n\n<p>I tried <code>scanf(\"%99[^\\n]\",st)</code>, but it is not working when I scan something before this scan statment.It worked if this is the first scan statement.</p>\n"}, {"tags": ["c", "openssl"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499856098, "post_id": 45055380, "comment_id": 77083988, "body": "You do know that <a href=\"https://www.openssl.org/\" rel=\"nofollow noreferrer\">OpenSSL</a> is open source, which means you can easily <a href=\"https://github.com/openssl/openssl\" rel=\"nofollow noreferrer\">get the source</a>?"}, {"owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "edited": false, "score": 0, "creation_date": 1499861366, "post_id": 45055380, "comment_id": 77087703, "body": "Some source code is generated on-the-fly, and that is why the source code is difficult to find."}, {"owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "edited": false, "score": 0, "creation_date": 1499861487, "post_id": 45055380, "comment_id": 77087813, "body": "It looks like the perl script util/mkdef.pl generates some PEM_read_bio_* functions."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7186181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/86f319915cf11a0539484fd0ddb94f50?s=128&d=identicon&r=PG&f=1", "display_name": "cuihaikuo", "link": "https://stackoverflow.com/users/7186181/cuihaikuo"}, "edited": false, "score": 0, "creation_date": 1499911608, "post_id": 45059602, "comment_id": 77113571, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 2393, "user_id": 803422, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/51b462bd16ac918a8563fa50c6ce416f?s=128&d=identicon&r=PG", "display_name": "user803422", "link": "https://stackoverflow.com/users/803422/user803422"}, "is_accepted": true, "score": 0, "last_activity_date": 1499867436, "creation_date": 1499867436, "answer_id": 45059602, "question_id": 45055380, "link": "https://stackoverflow.com/questions/45055380/how-to-find-source-of-all-functions-in-openssl-e-g-pem-read-bio-rsa-pubkey/45059602#45059602", "title": "How to find source of all functions in openssl, e.g. PEM_read_bio_RSA_PUBKEY", "body": "<p>In crypto/pem/pem.h :</p>\n\n<pre><code>/*\n * These macros make the PEM_read/PEM_write functions easier to maintain and\n * write. Now they are all implemented with either: IMPLEMENT_PEM_rw(...) or\n * IMPLEMENT_PEM_rw_cb(...)\n */\n\n...\n\n# define IMPLEMENT_PEM_read_bio(name, type, str, asn1) \\\ntype *PEM_read_bio_##name(BIO *bp, type **x, pem_password_cb *cb, void *u)\\\n{ \\\nreturn PEM_ASN1_read_bio((d2i_of_void *)d2i_##asn1, str,bp,(void **)x,cb,u); \\\n}\n</code></pre>\n\n<p>And the RSA + PUBKEY part is in : <code>crypto/pem/pem_all.c</code></p>\n"}], "owner": {"reputation": 105, "user_id": 7186181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/86f319915cf11a0539484fd0ddb94f50?s=128&d=identicon&r=PG&f=1", "display_name": "cuihaikuo", "link": "https://stackoverflow.com/users/7186181/cuihaikuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 45059602, "answer_count": 1, "score": -2, "last_activity_date": 1499867436, "creation_date": 1499855980, "question_id": 45055380, "link": "https://stackoverflow.com/questions/45055380/how-to-find-source-of-all-functions-in-openssl-e-g-pem-read-bio-rsa-pubkey", "title": "How to find source of all functions in openssl, e.g. PEM_read_bio_RSA_PUBKEY", "body": "<p>I just find it in a .pod file but no more details, where the declaration in the c part?</p>\n"}, {"tags": ["c", "uncrustify"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499854593, "post_id": 45054801, "comment_id": 77082843, "body": "It could have something to do with you not using standard C syntax? See e.g. <a href=\"http://en.cppreference.com/w/c/language/struct_initialization\" rel=\"nofollow noreferrer\">this struct/union initialization reference</a> for valid designation syntax."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1499855268, "post_id": 45054801, "comment_id": 77083319, "body": "This is not uncrustify&#39;s fault because this is not valid C code."}, {"owner": {"reputation": 21, "user_id": 5427755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85904e38e42141c965d2898f0cee0e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Zauner", "link": "https://stackoverflow.com/users/5427755/robert-zauner"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499860118, "post_id": 45054801, "comment_id": 77086706, "body": "Thanx  @Someprogrammerdude for the hint. This is an obsolet gcc extension since GCC 2.5. I didn&#39;t recognized."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5427755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85904e38e42141c965d2898f0cee0e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Zauner", "link": "https://stackoverflow.com/users/5427755/robert-zauner"}, "is_accepted": false, "score": 0, "last_activity_date": 1500452421, "creation_date": 1500452421, "answer_id": 45184825, "question_id": 45054801, "link": "https://stackoverflow.com/questions/45054801/uncrustify-wrong-newline-after-member-initializer/45184825#45184825", "title": "uncrustify wrong newline after member initializer &#39;:&#39;", "body": "<p>Ok, this was my fault, i was using an old obsolete gcc extension.</p>\n\n<p>the correct struct initialization looks now</p>\n\n<pre><code>        *Servo=(APOS_typ){.Intern=(APOSINT_typ){.CCom=Servo-&gt;Intern.CCom,\n                                                .MasterOf=Servo-&gt;Intern.MasterOf,\n                                                .ClientOf=Servo-&gt;Intern.ClientOf,\n                                                .UpdateTime=Servo-&gt;Intern.UpdateTime,\n                                                .CycAbsMoveParID=ACP10PAR_USER_I4_VAR1,\n                                                .FromDrive=Servo-&gt;Intern.FromDrive,\n                                                .ToDrive=Servo-&gt;Intern.ToDrive}};\n</code></pre>\n\n<p>and Uncrustify works well ;-)</p>\n"}], "owner": {"reputation": 21, "user_id": 5427755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85904e38e42141c965d2898f0cee0e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Zauner", "link": "https://stackoverflow.com/users/5427755/robert-zauner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500452421, "creation_date": 1499854404, "question_id": 45054801, "link": "https://stackoverflow.com/questions/45054801/uncrustify-wrong-newline-after-member-initializer", "title": "uncrustify wrong newline after member initializer &#39;:&#39;", "body": "<p>anybody an idea to avoid the 'wrong' newlines after ':'?<br>\nnow it looks like this:</p>\n\n<pre><code>    *Servo=(APOS_typ){Intern:\n                      (APOSINT_typ){CCom:\n                                    Servo-&gt;Intern.CCom, MasterOf:\n                                    Servo-&gt;Intern.MasterOf, ClientOf:\n                                    Servo-&gt;Intern.ClientOf, UpdateTime:\n                                    Servo-&gt;Intern.UpdateTime, CycAbsMoveParID:\n                                    ACP10PAR_USER_I4_VAR1, FromDrive:\n                                    Servo-&gt;Intern.FromDrive, ToDrive:\n                                    Servo-&gt;Intern.ToDrive}};\n</code></pre>\n\n<p>i am lookin for something like this:</p>\n\n<pre><code>        *Servo=(APOS_typ){Intern : (APOSINT_typ){CCom : Servo-&gt;Intern.CCom,\n                                                 MasterOf : Servo-&gt;Intern.MasterOf,\n                                                 ClientOf : Servo-&gt;Intern.ClientOf, \n                                                 UpdateTime : Servo-&gt;Intern.UpdateTime,\n                                                 CycAbsMoveParID : ACP10PAR_USER_I4_VAR1,\n                                                 FromDrive : Servo-&gt;Intern.FromDrive,\n                                                 ToDrive : Servo-&gt;Intern.ToDrive}};\n</code></pre>\n\n<p>I couldn't find any parameter for this problem in <a href=\"http://uncrustify.sourceforge.net/default.cfg\" rel=\"nofollow noreferrer\">default.cfg</a> </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1499855228, "post_id": 45054609, "comment_id": 77083290, "body": "All of the issues are related to the fact that the <code>void</code> that a <code>void*</code> pointer points to has no meaningful size. Try cranking up the warning level (something like -Wall -Wextra -pedantic if you are using gcc or clang)."}, {"owner": {"reputation": 69, "user_id": 7975788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f303af3f1161d3d225febedc2266fc55?s=128&d=identicon&r=PG&f=1", "display_name": "MyLion", "link": "https://stackoverflow.com/users/7975788/mylion"}, "reply_to_user": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1499855571, "post_id": 45054609, "comment_id": 77083551, "body": "thanks, that did the trick!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1499856690, "post_id": 45054609, "comment_id": 77084394, "body": "&quot;Assume that all variables have been initialized&quot; --- they can&#39;t be initialized after their declaration (unless it&#39;s another (repeated) declaration). <code>int i; int i = 42; i = 0;</code> has a declaration, a definition (declaration + initialization), and an assignment. <i>add that in your answer for extra points</i>"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499854303, "post_id": 45054700, "comment_id": 77082664, "body": "Are you sure &quot;unknown&quot; is correct? I&#39;d say, incomplete type."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1499854551, "post_id": 45054700, "comment_id": 77082812, "body": "It would be worth while to add why his compiler doesn&#39;t show any error - because many compiler extensions treat <code>void</code> to be same size as <code>char</code> and define <code>sizeof(void)</code>. But it is error according to standard"}, {"owner": {"reputation": 69, "user_id": 7975788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f303af3f1161d3d225febedc2266fc55?s=128&d=identicon&r=PG&f=1", "display_name": "MyLion", "link": "https://stackoverflow.com/users/7975788/mylion"}, "edited": false, "score": 0, "creation_date": 1499854908, "post_id": 45054700, "comment_id": 77083068, "body": "Thank you, that makes sense! thanks also for explaining why there&#39;s no compilation error (@ Ajay)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1499854227, "last_edit_date": 1499854227, "creation_date": 1499854141, "answer_id": 45054700, "question_id": 45054609, "link": "https://stackoverflow.com/questions/45054609/declarations-initializations-instructions-in-c/45054700#45054700", "title": "Declarations, initializations, instructions in C", "body": "<p>Nearly correct.</p>\n\n<p>The wrong ones are (a), (c) and (e) (1,3,5, after the edit).</p>\n\n<p>The explanation for all of them is basically the same: (a) and (e) perform pointer arithmetics, this isn't possible on <code>void *</code>, because <code>void</code> is unknown and doesn't have a size. (c) is similar, <code>sizeof()</code> is given a <code>void</code> expression, again, <code>void</code> doesn't have a size.</p>\n"}, {"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 2, "last_activity_date": 1499855696, "last_edit_date": 1499855696, "creation_date": 1499854645, "answer_id": 45054885, "question_id": 45054609, "link": "https://stackoverflow.com/questions/45054609/declarations-initializations-instructions-in-c/45054885#45054885", "title": "Declarations, initializations, instructions in C", "body": "<p>The wrong ones are: 1,3,5 because </p>\n\n<h2>Arithmetic on a <code>void*</code> is illegal in both C and C++.</h2>\n\n<p>From the Standard:</p>\n\n<blockquote>\n  <p>6.5.6-2: For addition, either both operands shall have arithmetic type, or one operand shall be a pointer to an object type and the\n  other shall have integer type</p>\n  \n  <p>6.2.5.1: Types are partitioned into object types (types that fully describe objects) , function types (types that describe functions),\n  and incomplete types (types that describe objects but lack information\n  needed to determine their sizes).</p>\n  \n  <p>6.2.5-19: The void type comprises an empty set of values; it is an incomplete type that cannot be completed</p>\n</blockquote>\n\n<p><code>void</code> is incomplete (<strong>which translates to, the compiler does not know its size</strong>) so by <code>6.5.6-2</code> you can't use it in the aforementioned expressions.</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1499856373, "creation_date": 1499856373, "answer_id": 45055517, "question_id": 45054609, "link": "https://stackoverflow.com/questions/45054609/declarations-initializations-instructions-in-c/45055517#45055517", "title": "Declarations, initializations, instructions in C", "body": "<pre><code>vptr++\n</code></pre>\n\n<p>is incorrect because vptr is a pointer that points to an object of unknown size, so this expression will be desugared in <code>vptr+=sizeof(*vptr)</code> and the type of <code>*vptr</code> is void; <code>sizeof(void)</code> is undefined as the type is incomplete.  <code>gcc</code> considers <code>sizeof(void)=sizeof(char)=1</code> but this is gnu extension.</p>\n\n<pre><code>vsize = sizeof(*vptr);\n</code></pre>\n\n<p>is not correct as <code>*vptr</code> has the type <code>void</code> as described above.</p>\n\n<pre><code>s = vptr - 1;\n</code></pre>\n\n<p>is also incorrect as the pointer arithmetic means to subtract the <code>sizeof (typeof(*vptr))</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 7975788, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f303af3f1161d3d225febedc2266fc55?s=128&d=identicon&r=PG&f=1", "display_name": "MyLion", "link": "https://stackoverflow.com/users/7975788/mylion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 45054700, "answer_count": 3, "score": 2, "last_activity_date": 1499856373, "creation_date": 1499853875, "last_edit_date": 1499854047, "question_id": 45054609, "link": "https://stackoverflow.com/questions/45054609/declarations-initializations-instructions-in-c", "title": "Declarations, initializations, instructions in C", "body": "<p>I am preparing for an exam about C programming and came across the following question which I am not sure how to answer: </p>\n\n<p>\"The following syntactically correct declarations are given. Assume that all variables have been initialized in the subsequent instructions: </p>\n\n<pre><code>void *vptr, *wptr;\nchar *s;\nsize_t vsize, ssize;\nint cmp;\n</code></pre>\n\n<p>Three of these instructions are semantically incorrect and would lead to a compilation error, which?:</p>\n\n<ol>\n<li><code>vptr++;</code></li>\n<li><code>cmp = vptr == wptr;</code></li>\n<li><code>vsize = sizeof(*vptr);</code></li>\n<li><code>s = wptr;</code></li>\n<li><code>s = vptr - 1;</code></li>\n<li><code>vptr = malloc(ssize * sizeof *s);</code></li>\n</ol>\n\n<p>Somehow when I try to compile these (using the gnu compiler), I never get an error. My guesses however are that 3, 5 and 6 are incorrect because I am trying to get the size of void (3), accessing/assigning memory that has not been allocated (5) and allocating memory without freeing the previous memory (6). I'm rather unsure about my answers, plus I don't get why the compilation worked fine for all these instructions. Does anyone have an explanation?</p>\n"}, {"tags": ["c", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499853891, "post_id": 45054565, "comment_id": 77082378, "body": "Is it a <i>Linux</i> kernel module? Please edit your question to include proper tags."}, {"owner": {"reputation": 1, "user_id": 8248939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eK-181JZSFo/AAAAAAAAAAI/AAAAAAAAABE/89Qiu9WdP0Q/photo.jpg?sz=128", "display_name": "Bhagyesh Mulage", "link": "https://stackoverflow.com/users/8248939/bhagyesh-mulage"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499853998, "post_id": 45054565, "comment_id": 77082446, "body": "To read the buffer from my module I use   &quot;cat  /proc/module_name&quot;    command."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1499854218, "post_id": 45054565, "comment_id": 77082599, "body": "<code>do { ... } while (...)</code> is sometimes frowned upon. The code is executed at least once and what if the magical (global variable?) <code>current</code> has no parent in the first place?"}, {"owner": {"reputation": 1, "user_id": 8248939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eK-181JZSFo/AAAAAAAAAAI/AAAAAAAAABE/89Qiu9WdP0Q/photo.jpg?sz=128", "display_name": "Bhagyesh Mulage", "link": "https://stackoverflow.com/users/8248939/bhagyesh-mulage"}, "edited": false, "score": 0, "creation_date": 1499854219, "post_id": 45054565, "comment_id": 77082601, "body": "Yes!!!  It is Linux  Kernel module"}, {"owner": {"reputation": 1, "user_id": 8248939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eK-181JZSFo/AAAAAAAAAAI/AAAAAAAAABE/89Qiu9WdP0Q/photo.jpg?sz=128", "display_name": "Bhagyesh Mulage", "link": "https://stackoverflow.com/users/8248939/bhagyesh-mulage"}, "edited": false, "score": 0, "creation_date": 1499854468, "post_id": 45054565, "comment_id": 77082759, "body": "Actually <code>current</code>   I have used to read the current running process. But I have not used yet in my code."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499856071, "post_id": 45054565, "comment_id": 77083966, "body": "Seems to me that you keep overwriting <code>buf</code> in the loop, i.e. <code>buf</code> will only contain data from the last loop (which has pid equal zero)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1499857219, "post_id": 45054565, "comment_id": 77084731, "body": "Perhaps this can help <a href=\"https://stackoverflow.com/questions/2674312/how-to-append-strings-using-sprintf\" title=\"how to append strings using sprintf\">stackoverflow.com/questions/2674312/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8248939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eK-181JZSFo/AAAAAAAAAAI/AAAAAAAAABE/89Qiu9WdP0Q/photo.jpg?sz=128", "display_name": "Bhagyesh Mulage", "link": "https://stackoverflow.com/users/8248939/bhagyesh-mulage"}, "edited": false, "score": 0, "creation_date": 1499858178, "post_id": 45054565, "comment_id": 77085362, "body": "Thank you !!!!! so much ......my problem is get resolved ...The problem is with the buffer overwriting .....and it gets resolved by <code>strlen(buf)</code> function"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1499876058, "post_id": 45054565, "comment_id": 77099017, "body": "It&#39;s easier if you use <code>single_open</code> and the <code>seq_file</code> interface. See &quot;fs/proc/version.c&quot; in the Linux kernel sources for a very simple example."}], "owner": {"reputation": 1, "user_id": 8248939, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eK-181JZSFo/AAAAAAAAAAI/AAAAAAAAABE/89Qiu9WdP0Q/photo.jpg?sz=128", "display_name": "Bhagyesh Mulage", "link": "https://stackoverflow.com/users/8248939/bhagyesh-mulage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499857187, "creation_date": 1499853780, "last_edit_date": 1499857187, "question_id": 45054565, "link": "https://stackoverflow.com/questions/45054565/not-able-to-read-all-data-from-buffer-in-kernel-read-function", "title": "Not able to read all data from buffer in kernel read function", "body": "<p>Here is my code for read function in proc kernel module</p>\n\n<pre><code>int read_proc(struct file *filp,char *buf,size_t count,loff_t *offset ) \n{\n    struct task_struct *task = current;         \n    ssize_t bytes = count &lt; (MAX_MSG_LEN-(*offset)) ? count : (MAX_MSG_LEN-(*offset));\n\n    do\n    {\n        task = task-&gt;parent;\n        sprintf(buf, \"assignment: parent process: %s, PID: %d Utime: %d , stime: %ld \\n \", task-&gt;comm, task-&gt;pid,task-&gt;utime,task-&gt;stime) ;  \n    } while (task-&gt;pid != 0);\n\n    (*offset) += bytes;\n    return bytes;\n}\n</code></pre>\n\n<p>In this code I'm only able to read the last <strong>zero number PID process</strong> from the buffer but I want to read all the running processes and its PID</p>\n\n<p>I have modified the code from this link:\n<a href=\"https://jlmedina123.wordpress.com/2013/08/13/current-variable-and-task_struct/\" rel=\"nofollow noreferrer\">https://jlmedina123.wordpress.com/2013/08/13/current-variable-and-task_struct/</a></p>\n\n<p>My output:</p>\n\n<pre>\nassignment: parent process: swapper/0, PID: 0 Utime: 0 , stime: 1201744387 \n\n668726 \nassignment: parent process: swapper/0, PID: 0 Utime: 0 , stime: 1201761343 \n\n195869 \nassignment: parent process: swapper/0, PID: 0 Utime: 0 , stime: 1201791953\n</pre>\n\n<p><strong>I want to read all the process id and running process which i have copied into the   buffer !!! please tell me where I have done wrong?</strong></p>\n"}, {"tags": ["c", "sh"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5674845, "user_type": "registered", "profile_image": "https://graph.facebook.com/974103882648714/picture?type=large", "display_name": "agangwal", "link": "https://stackoverflow.com/users/5674845/agangwal"}, "edited": false, "score": 0, "creation_date": 1499855734, "post_id": 45054412, "comment_id": 77083683, "body": "Can you explain more how do I get progress information from my program directly??"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 23, "user_id": 5674845, "user_type": "registered", "profile_image": "https://graph.facebook.com/974103882648714/picture?type=large", "display_name": "agangwal", "link": "https://stackoverflow.com/users/5674845/agangwal"}, "edited": false, "score": 0, "creation_date": 1499856688, "post_id": 45054412, "comment_id": 77084392, "body": "Not really, this depends on what you need. You could for example calculate a percent value after each step und just <code>fprintf()</code> it to <code>stderr</code> ..."}, {"owner": {"reputation": 23, "user_id": 5674845, "user_type": "registered", "profile_image": "https://graph.facebook.com/974103882648714/picture?type=large", "display_name": "agangwal", "link": "https://stackoverflow.com/users/5674845/agangwal"}, "edited": false, "score": 0, "creation_date": 1499920909, "post_id": 45054412, "comment_id": 77115660, "body": "I just want to show my progress in percentage. Can you show me an example of how to do it??"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1499853414, "creation_date": 1499853414, "answer_id": 45054412, "question_id": 45054298, "link": "https://stackoverflow.com/questions/45054298/does-fprintf-in-c-prints-output-to-a-file-one-by-one-or-in-bulk/45054412#45054412", "title": "Does fprintf() in c prints output to a file one by one or in bulk?", "body": "<p>You're asking the wrong thing, but let me explain:</p>\n\n<p><code>(f)printf()</code> outputs to a <code>stdio</code> <em>stream</em>, and those streams can be either unbuffered or buffered in two different modes: <em>fully</em> buffered or <em>line</em> buffered.</p>\n\n<p>A <code>FILE *</code> stream opened with <code>fopen()</code> will typically be in full buffered mode. This means output only occurs when the buffer is full or when the stream is flushed (<code>fflush()</code> or implicitly when you close it).</p>\n\n<p>You can change the buffering mode with <a href=\"https://linux.die.net/man/3/setvbuf\" rel=\"nofollow noreferrer\"><code>setvbuf()</code></a> or you can just call <a href=\"https://linux.die.net/man/3/fflush\" rel=\"nofollow noreferrer\"><code>fflush()</code></a> after each output.</p>\n\n<hr>\n\n<p>As for what you want to achieve, I think it would be better to emit progress information directly from your program. You could for example use <code>stderr</code> for this.</p>\n"}], "owner": {"reputation": 23, "user_id": 5674845, "user_type": "registered", "profile_image": "https://graph.facebook.com/974103882648714/picture?type=large", "display_name": "agangwal", "link": "https://stackoverflow.com/users/5674845/agangwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 45054412, "answer_count": 1, "score": 2, "last_activity_date": 1499853414, "creation_date": 1499853107, "question_id": 45054298, "link": "https://stackoverflow.com/questions/45054298/does-fprintf-in-c-prints-output-to-a-file-one-by-one-or-in-bulk", "title": "Does fprintf() in c prints output to a file one by one or in bulk?", "body": "<p>I am using this code to print my output in a file</p>\n\n<pre><code>FILE * file;\nfile = fopen(\"output.txt\", \"a\");\nfor (int i=0; i&lt;10; i++){\n\n    loop(arr, a_d, Y_d, sample_d, A_d, y_d, res_d, res,x_d, R_d, A1_d, y1_d, Q_d, TAU_d, devInfo, m, n, i);\n\n    float s = minimum(arr, 7802);\n\n    fprintf(file,\"%f\\n\", s);\n}\n\nfclose(file);\n</code></pre>\n\n<p>But I need to get the number of lines filled in output.txt file by -wc command in a shell script for printing the progress of program in percentage. \nI don't know if fprinf() prints output one by one to a file or in last. So, can anyone suggest me to some alternative way to do this??</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499852477, "post_id": 45053996, "comment_id": 77081325, "body": "And you have a proper function prototype of the callback function before calling <code>sqlite3_exec</code>? There&#39;s no other <code>return</code> statements in the callback function? Can you at least <i>try</i> to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us?"}, {"owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499852775, "post_id": 45053996, "comment_id": 77081559, "body": "@Someprogrammerdude yes look above, i wrote it works while filling statements are commented, except return statement"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1499853012, "post_id": 45053996, "comment_id": 77081731, "body": "Hm, it seems like you are mixing up an abort-signal (e.g. raised by an <code>assert()</code>  or <code>abort()</code> and the value SQLITE_ABORT returned by <code>sqlite3_exec()</code>. These two do not have anything in common except the name. I suspect, that the abort is raised by libc due to memory corruption."}, {"owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499853169, "post_id": 45053996, "comment_id": 77081851, "body": "@Ctx more details added"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1499853574, "post_id": 45053996, "comment_id": 77082124, "body": "What catches my eye is, that there might be uninitialized pointers in <code>table-&gt;val[i]</code> because of <code>if(!argv[i]) continue;</code>. This will break somewhere in the future since you cannot distinguish between a valid and an invalid pointer then. Furthermore, your allocation is off-by-one for the strings (<code>malloc(strlen(argv[i]))</code>), better use <code>strdup()</code> to avoid such errors."}, {"owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1499853809, "post_id": 45053996, "comment_id": 77082322, "body": "@Ctx but what won&#39;t lead to carsh(SIGABRT) right?!"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1499853897, "post_id": 45053996, "comment_id": 77082384, "body": "@Error When corrupting the heap, an abort might very well occur. Did you fix the mentioned issues, still the same?"}, {"owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "edited": false, "score": 0, "creation_date": 1499854049, "post_id": 45053996, "comment_id": 77082490, "body": "that was insightful, thx, works now, add fully detailed answer"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1499854099, "post_id": 45053996, "comment_id": 77082523, "body": "yw, It&#39;s on the house ;)"}], "answers": [{"tags": [], "owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "is_accepted": true, "score": 0, "last_activity_date": 1499919451, "last_edit_date": 1592644375, "creation_date": 1499919451, "answer_id": 45071309, "question_id": 45053996, "link": "https://stackoverflow.com/questions/45053996/why-sqlite3-exec-fails-with-callback-abort-like-symptoms/45071309#45071309", "title": "why sqlite3_exec fails with callback abort-like symptoms?", "body": "<p><strong>problem has no direct relation with sqlite3, but with callback implementation.</strong></p>\n<p>as per @Ctx comment, I am mixing between SIGABRT, and SQLITE_ABORT, both has no implications on each others, SIGABRT returns in callback due to memory corruption caused by off by one uninitialized memory usage.</p>\n<pre><code>table-&gt;current-&gt;val[i] = malloc(strlen(argv[i]));\nstrcpy(table-&gt;current-&gt;val[i], (const char*) argv[i]);\n</code></pre>\n<p>has to be changed to</p>\n<pre><code>table-&gt;current-&gt;val[i] = malloc(strlen(argv[i])+1);\nstrcpy(table-&gt;current-&gt;val[i], (const char*) argv[i]);\n//or\ntable-&gt;current-&gt;val[i] = strdup(argv[i]);\n</code></pre>\n<p>the same question callback snippet above is actually rubbish, it has other bug unrelated to memory corruption.</p>\n"}], "owner": {"reputation": 808, "user_id": 5172114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-eqH2vTpGwmQ/AAAAAAAAAAI/AAAAAAAABe8/4XDha6fFlGw/photo.jpg?sz=128", "display_name": "Error", "link": "https://stackoverflow.com/users/5172114/error"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 45071309, "answer_count": 1, "score": 0, "last_activity_date": 1499919451, "creation_date": 1499852316, "last_edit_date": 1499862589, "question_id": 45053996, "link": "https://stackoverflow.com/questions/45053996/why-sqlite3-exec-fails-with-callback-abort-like-symptoms", "title": "why sqlite3_exec fails with callback abort-like symptoms?", "body": "<p><a href=\"https://sqlite.org/c3ref/exec.html\" rel=\"nofollow noreferrer\">from sqlite docuementation</a></p>\n\n<blockquote>\n  <p>If an sqlite3_exec() callback returns non-zero, the sqlite3_exec()\n  routine returns SQLITE_ABORT without invoking the callback again and\n  without running any subsequent SQL statements.</p>\n</blockquote>\n\n<p>gdbing function in which abort signal arise, it goes as follow</p>\n\n<pre><code>function() {\n ... // valid sql, valid non-null database pointer\n rc = sqlite3_exec(database, sql, callback, 0, &amp;err_msg);\n ... // address of where sqlite3-exec expected to return to, but SIGABRT returns\n}\n\ncallback(arguments***) {\n  ...//read arguments content\n  return 0; //the only local return statement\n}\n</code></pre>\n\n<p><strong>the strange thing is</strong>, if callback logic gets commented except return statement code works without SIGABRT, which implies that bug in the content, but gdbing callback function works without any errors until last return statement! </p>\n\n<p><strong>edited</strong></p>\n\n<p><strong>callback</strong></p>\n\n<pre><code>int readTable(void *pt, int argc, char **argv, char **colName)\n{\n  if(table == NULL) {\n    table = calloc(1, sizeof(Table));\n    table-&gt;ncol = argc;\n    table-&gt;colname = malloc(argc*sizeof(String));\n    table-&gt;coltype = malloc(argc*sizeof(int));\n    for(int i = 0; i &lt; argc; i++) {\n      table-&gt;colname[i] = colName[i];\n      table-&gt;coltype[i] = getDataType(colName[i]);\n    }\n    table-&gt;row = malloc(sizeof(Row));\n    table-&gt;current = table-&gt;row;\n    table-&gt;row-&gt;val = malloc(argc*sizeof(String));\n  }\n  else {\n    table-&gt;current-&gt;nxt = malloc(sizeof(Row));\n    table-&gt;current-&gt;nxt-&gt;val = malloc(argc*sizeof(String));\n    table-&gt;current = table-&gt;current-&gt;nxt;\n  }\n\n  for(int i = 0; i &lt; argc; i++) {\n    if(!argv[i])\n      continue;\n    table-&gt;current-&gt;val[i] = malloc(strlen(argv[i]));\n    strcpy(table-&gt;current-&gt;val[i], (const char*) argv[i]);\n  }\n\n  table-&gt;size++;\n  return 0; //otherwise gets aborted\n}\n</code></pre>\n\n<p>abort signal returns while sqlite3_exec, and not while callback executing, core dumped.</p>\n\n<p>per @Ctx comment below, I mixed SIGABRT, and SQLITE_ABORT(assumed it return abort signal, but it doesn't). what happen is abort signal returns, while sqlite3_exec executing</p>\n"}, {"tags": ["c", "recursion", "backtracking", "sudoku"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 5, "creation_date": 1499852345, "post_id": 45053903, "comment_id": 77081235, "body": "why are you expecting output? there is nothing in your code that outputs anything"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499853414, "post_id": 45053903, "comment_id": 77082014, "body": "This is Project Euler <a href=\"https://projecteuler.net/problem=96\" rel=\"nofollow noreferrer\">problem 96</a> which should be solved by your own efforts and research. BTW why do you load all 50 puzzles into a 3D array when they can be read and solved one at a time from the text file given? You&#39;ll need a solution stack, and loading all 50 at once makes it unnecessarily complicated."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 1, "creation_date": 1499853984, "post_id": 45053903, "comment_id": 77082437, "body": "Try making a print sudoku function. This is really time consuming for us to understand and then point out an error. Be specific in terms of your problem. You can&#39;t go to a doc and say <i>Hey somethings wrong with but I don&#39;t know what! Please check me up.</i>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1499854201, "post_id": 45053903, "comment_id": 77082591, "body": "<code>if (row == 8){     return 1; } </code> don&#39;t you think this is not enough? The last row won&#39;t be ever solved."}, {"owner": {"reputation": 1528, "user_id": 1526421, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/97Hjn.png?s=128&g=1", "display_name": "avmohan", "link": "https://stackoverflow.com/users/1526421/avmohan"}, "edited": false, "score": 1, "creation_date": 1499884418, "post_id": 45053903, "comment_id": 77103610, "body": "How does isValid work when it does not take the current state of the board (puzzles)? <code>isValid(sudokuNumber, row, col, nextNum)</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499891236, "post_id": 45053903, "comment_id": 77107128, "body": "for ease of readability and understanding, Please consistently indent the code.  indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}], "answers": [{"tags": [], "owner": {"reputation": 1528, "user_id": 1526421, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/97Hjn.png?s=128&g=1", "display_name": "avmohan", "link": "https://stackoverflow.com/users/1526421/avmohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1499885898, "creation_date": 1499885898, "answer_id": 45065583, "question_id": 45053903, "link": "https://stackoverflow.com/questions/45053903/recursive-backtracking-sudoku-solver/45065583#45065583", "title": "Recursive backtracking Sudoku solver", "body": "<p>First of all, I think the function signatures need to be fixed. They should take one board and not a list of boards. Iterate on the list outside of the solve function (in fact there is no need to load all the boards into memory, you only need to sum the numbers formed by (0,0) (0,1), (0,2) position from all boards)<br>\n<code>void solve(int board[][], int row, int col)</code>-> Try solving starting at board[row][col]<br>\n<code>bool is_valid(int board[][], int row, int col, int d)</code> -> is it ok to fill board[row][col] with d</p>\n\n<p>Second, the boundary condition seems to be not correct. Assuming row &amp; col take on values 0 through 8, it should be <code>row==9</code> and <code>col==9</code> instead of 8.</p>\n\n<p>Also, I think you'll have to skip the already filled cells. <code>if(board[row][col] != 0) solve(board, row, col+1)</code></p>\n\n<p>Also, depending on how is_valid is implemented, you'll have to make sure you're un-filling properly. In the problem, unfilled rows are represented as 0s. So before you backtrack after failing to fill board[row][col] with all numbers from 1 to 9, make sure to set board[row][col] back to 0.</p>\n"}], "owner": {"reputation": 1, "user_id": 8294769, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E4nKl7goojY/AAAAAAAAAAI/AAAAAAAABcA/IDtqimPHWLw/photo.jpg?sz=128", "display_name": "Leicester77", "link": "https://stackoverflow.com/users/8294769/leicester77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1499885898, "creation_date": 1499852096, "last_edit_date": 1499883027, "question_id": 45053903, "link": "https://stackoverflow.com/questions/45053903/recursive-backtracking-sudoku-solver", "title": "Recursive backtracking Sudoku solver", "body": "<p>I'm currently learning <strong>C</strong>, mainly with examples from Project Euler. (&lt;- check it out if you don't already know it!)</p>\n\n<p>Out of some sources on the internet and some self write code, I made a <strong>C</strong> program which should solve 50 Sudokus. I've defined an array like [number of sudoku][row][column]. The following is the solving function.</p>\n\n<pre><code>int solve(int puzzles[50][9][9], int sudokuNumber, int row, int col){\nint nextNum = 1;\n\nif (row == 8){\n    return 1;\n}\n\nif (puzzles[sudokuNumber][row][col]){\n    if (col == 8){\n        if (solve(puzzles, sudokuNumber, row+1, 0))\n            return 1;\n    }\n    else {\n        if (solve(puzzles, sudokuNumber, row, col+1))\n            return 1;\n    }\n    return 0;\n}\n\nfor (; nextNum &lt;= 9; nextNum++){\n    if (isValid(sudokuNumber, row, col, nextNum)){\n        puzzles[sudokuNumber][row][col] = nextNum;\n        if (col == 8){\n            if (solve(puzzles, sudokuNumber, row+1, 0))\n                return 1;\n        }\n        else {\n            if (solve(puzzles, sudokuNumber, row, col+1))\n                return 1;\n        }\n    }\n}\n}\n</code></pre>\n\n<p>Which unfortunately doesn't really  output anything and at this point and is quite frustrating... Am I making an obvious dumb mistake?\n<code>isValid</code> returns 1 if valid, this function is correct.</p>\n\n<p>Would really appreciate if someone would have a look at this.</p>\n"}, {"tags": ["c", "arrays", "search", "struct"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1499849249, "post_id": 45052763, "comment_id": 77078874, "body": "<code>Computer[j].ComputerName == &quot;NAME&quot;</code> won&#39;t work. You need <code>strcmp</code> to compare strings in C."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1499849502, "creation_date": 1499849502, "answer_id": 45052873, "question_id": 45052763, "link": "https://stackoverflow.com/questions/45052763/how-to-search-within-the-structure-and-display-it/45052873#45052873", "title": "How to search within the structure and display it", "body": "<p>Three things:</p>\n\n<ol>\n<li><p>With <code>scanf(\"%s\",&amp;NAME)</code> you read a <em>string</em> into a <em>single character</em>. Non-empty strings always needs at least two characters: At least one for the string contents <em>plus</em> one for the string terminator. A string of 49 characters needs an <em>array</em> of 50 <code>char</code>.</p></li>\n<li><p><code>\"NAME\"</code> is a <em>literal string</em> and not the variable <code>NAME</code></p></li>\n<li><p>With <code>Computer[j].ComputerName == \"NAME\"</code> you are comparing two pointers. With <code>Computer[j].ComputerName == NAME</code> you will be comparing a pointer to a single <code>char</code> value. If you change <code>NAME</code> to be an array, then again you are comparing two pointers. To compare strings you need to use <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\"><code>strcmp</code></a>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1499849600, "creation_date": 1499849600, "answer_id": 45052912, "question_id": 45052763, "link": "https://stackoverflow.com/questions/45052763/how-to-search-within-the-structure-and-display-it/45052912#45052912", "title": "How to search within the structure and display it", "body": "<p>You need to pass <code>i</code> into <code>PrintSelective</code>:</p>\n\n<pre><code>void PrintSelective(struct PCSpec Computer[100], int i)\n{\n    printf(\"Computer Package %d\\n\", i);\n    printf(\"Computer ID = \\t\\t%d\\n\",Computer[i].ComputerID);\n    printf(\"Computer Name = \\t%s\\n\",Computer[i].ComputerName);\n}\n</code></pre>\n\n<p>and then call it as:</p>\n\n<pre><code>    PrintSelective(Computer, i);\n</code></pre>\n\n<p><code>PrintAll</code> should call <code>PrintSelective</code> too.  </p>\n\n<p>Alternatively, I wouldn't print the index in <code>PrintSelective</code>, in which case, write as:</p>\n\n<pre><code>void PrintSelective(struct PCSpec *pComputer)\n{\n    printf(\"Computer ID = \\t\\t%d\\n\",pComputer-&gt;ComputerID);\n    printf(\"Computer Name = \\t%s\\n\",pComputer-&gt;ComputerName);\n}\n</code></pre>\n\n<p>and call as:</p>\n\n<pre><code>    PrintSelective(&amp;Computer[i]);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7259864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1715420898776149/picture?type=large", "display_name": "Kho Wesley", "link": "https://stackoverflow.com/users/7259864/kho-wesley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1499849600, "creation_date": 1499849217, "question_id": 45052763, "link": "https://stackoverflow.com/questions/45052763/how-to-search-within-the-structure-and-display-it", "title": "How to search within the structure and display it", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct PCSpec{\n    int ComputerID;\n    char ComputerName[50];\n    float Price;\n};\n\n\nvoid PrintAll(int count,struct PCSpec Computer[100]);\nint InputData(int count,struct PCSpec Computer[100]);\nvoid Search(int count,struct PCSpec Computer[100]);\nvoid SearchID(int count,struct PCSpec Computer[100]);\nvoid SearchNAME(int count,struct PCSpec Computer[100]);\nvoid MainMenu(int count,struct PCSpec Computer[100]);\nvoid Option1Menu();\nvoid Option2Menu();\nvoid PrintSelective(struct PCSpec Computer[100]);\n\nmain()\n{\nint count;\nstruct PCSpec Computer[100];\nprintf(\"Please enter the Number Of Computer (Max is 100) \");\nscanf(\"%d\",&amp;count);\nsystem(\"cls\");\nOption1Menu();\nMainMenu(count,Computer);\n}\n\nint InputData(int count,struct PCSpec Computer[100])\n{\n int i;\n for(i=0;i&lt;count;i++)\n{\n    printf(\"Enter the ComputerID = \");\n    scanf(\"%d\", &amp;Computer[i].ComputerID);\n    printf(\"Enter the ComputerName, Maximum 50 Characters = \");\n    scanf(\" %s\",Computer[i].ComputerName);\n    }\nprintf(\"Data was SUCCESSFULLY recorded!\");\n}\n\nvoid MainMenu(int count,struct PCSpec Computer[100])\n{\nwhile (1)\n{\n    int option;\n    printf(\"\\nEnter your choice : \");\n    scanf(\"%d\", &amp;option);\n    switch (option)\n    {\n    case 1:    \n        system(\"cls\");\n        InputData(count,Computer);\n        system(\"cls\");\n        Option1Menu();\n        break;\n    case 2:\n        system(\"cls\");    \n        PrintAll(count,Computer);\n        Option1Menu();\n        break;\n    case 3:\n        system(\"cls\");\n        Search(count,Computer);\n    case 4: \n        exit(0);\n       }\n    }\n}\n\n\nvoid Search(int count,struct PCSpec Computer[100])\n{\nint Option;\nOption2Menu();\nwhile(1)\n{\n    printf(\"\\nEnter your choice : \");\n    scanf(\"%d\",&amp;Option);\n    switch(Option)\n    {\n        case 1:\n            system(\"cls\");\n            SearchID(count,Computer);\n            Option2Menu();\n            break;\n        case 2:\n            system(\"cls\");\n            SearchNAME(count,Computer);\n            Option2Menu();\n            break;\n        case 3:\n            system(\"cls\");\n            MainMenu(count,Computer);\n        case 4:\n            exit(1);\n    }\n }\n}\n</code></pre>\n\n<p>Sorry for the long Code, the section below is the one that i'm having problem. I'm able to search successfully but i'm unable to display the searched structure. My initial plan was to search the ComputerID, and if it's found, i want it to display the ComputerName as well.</p>\n\n<p>The output that i wanted to get if the ID is found.\nComputer ID =  21\nComputer Name = Desktop</p>\n\n<pre><code>void SearchID(int count,struct PCSpec Computer[100])\n{\nint i,id;\nprintf(\"Please Enter Computer ID \");\nscanf(\"%d\",&amp;id);\nfor(i=0;i&lt;count;i++)\n{\nif(Computer[i].ComputerID == id)\n    {\n    printf(\"%d is found at %d\",id,i);   \n    //PrintSelective(Computer);           \n    break;\n    }\n}\nif( i == count )\nprintf(\"Unable to locate ComputerID\\n\");\n}\n</code></pre>\n\n<p>For this section, my intention is the same as the previous section, but this time i wanted to search the ComputerName, and is found it will print the ComputerID as well.</p>\n\n<p>Right now the problem that i faced is, the input i enter cannot be found.</p>\n\n<pre><code>void SearchNAME(int count,struct PCSpec Computer[100])\n{\nint j;\nchar NAME;\nprintf(\"Warning CASE Senstitive!\\n\");\nprintf(\"Please Enter Computer Name \");\nscanf(\"%s\",&amp;NAME);\nfor(j=0;j&lt;count;j++)\n{\nif(Computer[j].ComputerName == \"NAME\")\n    {\n    printf(\"%s is found at %d\",NAME,j); \n    //PrintSelective(Computer);\n    break;\n    }\n}\nif( j == count )\nprintf(\"Unable to locate ComputerID\\n\");\n}\n</code></pre>\n\n<p>The rest pretty much the declaration</p>\n\n<pre><code>void PrintAll(int count,struct PCSpec Computer[100])\n{\n    int j;\n    for(j=0;j&lt;count;j++)\n    {\n    printf(\"Computer Package %d\\n\", j);\n    printf(\"Computer ID = \\t\\t%d\\n\",Computer[j].ComputerID);\n    printf(\"Computer Name = \\t%s\\n\",Computer[j].ComputerName);\n    }\n}\n\nvoid PrintSelective(struct PCSpec Computer[100])\n{\nint i;\nprintf(\"Computer Package %d\\n\", i);\nprintf(\"Computer ID = \\t\\t%d\\n\",Computer[i].ComputerID);\nprintf(\"Computer Name = \\t%s\\n\",Computer[i].ComputerName);\n}\n\nvoid Option1Menu()\n{\n    printf(\"\\n1] Create a Record\\n\");\n    printf(\"2] Display Records\\n\");\n    printf(\"3] Search a Record\\n\");\n    printf(\"4] Exit\");\n}\n\nvoid Option2Menu()\n{\n    printf(\"\\n1] Search using ComputerID\\n\");\n    printf(\"2] Search using ComputerNAME\\n\");\n    printf(\"3] Back to Main Menu\\n\");\n    printf(\"4] Exit the Program\\n\");\n}\n</code></pre>\n\n<p>Sorry for my previous post which my question is unclear, as i'm still new in C all feedback toward my coding is appreciated! And another thing is, Which compiler did you guys used? or Standard for C so that other won't have any issue when compiling the code i wrote.</p>\n"}, {"tags": ["c", "gcc", "clang", "x86-64", "compiler-optimization"], "comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1499871772, "post_id": 45052282, "comment_id": 77095938, "body": "What I find interesting is the casual disregard for alignment; this may work with x86, but on other CPUs the optimization may not be valid."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 19, "creation_date": 1499872896, "post_id": 45052282, "comment_id": 77096845, "body": "@MatthieuM. it only has to be valid on the target architecture"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1499877113, "post_id": 45052282, "comment_id": 77099570, "body": "@Caleth: Agree, but it makes me wonder at what stage the transformation is done. That is, whether gcc uses target-specific optimization in its middle-end (abstracted, perhaps), or if it&#39;s part of the lowering."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 9, "creation_date": 1499882706, "post_id": 45052282, "comment_id": 77102691, "body": "@MatthieuM. You can find out by compiling with <code>-fdump-tree-all -fdump-rtl-all</code> (in addition to all the other switches). That will dump the intermediate representation after each stage of optimization to a file in the current working directory, numbered so you can read through them in sequence. (You will get roughly 300 files if you do this. The &quot;tree&quot; dumps are much easier to read than the &quot;RTL&quot; dumps. You&#39;ll probably want to skim the &quot;RTL&quot; and &quot;machine description&quot; chapters of the <a href=\"https://gcc.gnu.org/onlinedocs/gccint\" rel=\"nofollow noreferrer\">internals manual</a> before trying to read the RTL dumps.)"}], "answers": [{"comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 3, "creation_date": 1499862962, "post_id": 45052513, "comment_id": 77088973, "body": "That&#39;s true, but the question was about optimizing away the <code>memcmp()</code> call.  It could still be done by emitting byte-swap instructions before doing the comparison, right?"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 3, "creation_date": 1499864860, "post_id": 45052513, "comment_id": 77090480, "body": "@JohnZwinck I think byte-swapping for this would be handling of a <i>very special</i> case, which the compiler writers don&#39;t bother with."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 13, "creation_date": 1499871671, "post_id": 45052513, "comment_id": 77095859, "body": "@Ruslan: Compilers are full of such small optimizations; I&#39;m pretty sure the compiler developers would be happy to receive a patch to cover this... if it really works."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 1, "creation_date": 1499890138, "post_id": 45052513, "comment_id": 77106613, "body": "@MatthieuM.: if this is important in real code, you&#39;ll get better results from current compilers by using <code>endian.h</code> or similar byte-swap functions to get two <code>uint32_t</code> integers to compare.  <a href=\"https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45066631#45066631\">See my answer</a> for an example.  But then you have to worry about misaligned loads and stuff if writing portable code, so it would be nice if you could compare unknown-alignment big-endian integers using <code>memcmp</code> and get optimal code."}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 24, "last_activity_date": 1499848511, "creation_date": 1499848511, "answer_id": 45052513, "question_id": 45052282, "link": "https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45052513#45052513", "title": "Why is memcmp(a, b, 4) only sometimes optimized to a uint32 comparison?", "body": "<p>Endianness is the problem here. Consider this input:</p>\n\n<pre><code>a = 01 00 00 03\nb = 02 00 00 02\n</code></pre>\n\n<p>If you compare these two arrays by treating them as 32-bit integers, then you'll find that <code>a</code> is larger (because 0x03000001 > 0x02000002). On a big-endian machine, this test would probably work as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 12, "creation_date": 1499857942, "post_id": 45052519, "comment_id": 77085201, "body": "There&#39;s a <code>bswap</code> instruction in x86, and ARM has <code>rev</code>. One extra instruction, though."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1499863119, "post_id": 45052519, "comment_id": 77089093, "body": "I understand your point, and it is a good one, but as @MSalters says, it&#39;s simple to reverse the bytes before doing the comparison as integers.  Surely that would be better than calling <code>memcmp()</code>.  So I&#39;m not sure this really answers my question, which was &quot;Could a similar optimization be applied to the second case? What&#39;s the best assembly for this?&quot;"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 4, "creation_date": 1499865262, "post_id": 45052519, "comment_id": 77090797, "body": "@CodyGray: as dasblinkenlight points out, that&#39;s sufficient to tell <code>&lt;0</code> and <code>&gt;0</code> apart. Arithmetically, CMP looks for the most significant bit difference, while <code>memcmp</code> looks for the first differing byte in memory order. On big-endian systems, the first byte holds the MSB. <code>bswap</code> turns the native little-endian bit pattern into big-endian, what&#39;s why."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499866311, "post_id": 45052519, "comment_id": 77091637, "body": "Ah, sorry. It was failing my test cases because I was doing a <i>signed</i> comparison, rather than an unsigned comparison. Dumb mistake, but I didn&#39;t catch it even after going over my implementation a couple of times."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 13, "creation_date": 1499881239, "post_id": 45052519, "comment_id": 77101801, "body": "@Kevin: You wouldn&#39;t want to swap the bytes in memory (and then restore them) anyway!  The optimal asm might be something like: load both 4B blocks into registers, byte-swap them both.  So it&#39;s extra instructions for the decoders and extra fused-domain uops for the front-end to issue, because you can&#39;t use a memory operand with <code>cmp</code> like for the <code>== 0</code> case.  e.g.  <code>mov edi, [rdi]</code> / <code>mov esi, [rsi]</code> / <code>bswap edi</code> /<code>bswap esi</code> / <code>cmp edi, esi</code> / seta and movzx.  Those are all single-uop instructions on all recent Intel and AMD CPUs (<a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a>)"}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 5, "creation_date": 1499883091, "post_id": 45052519, "comment_id": 77102902, "body": "@Kevin and const-correct only applies to the source. The CPU can do whatever it likes as long as the end result is the same."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499886316, "post_id": 45052519, "comment_id": 77104687, "body": "@Peter You mean <code>setb</code> for the <code>&lt; 0</code> case discussed here, not <code>seta</code>. :-) I wonder, though, if you  might be better off with <code>cmp edi, esi</code> + <code>sbb eax, eax</code> + <code>neg eax</code>. The dependency chain is the same length, but the latter two instructions are 2 bytes, rather than 3 bytes. <code>SBB</code> is still 2 cycles pre-Broadwell (I thought <code>SETcc</code> was still high latency\u2014ICC <i>always</i> uses <code>CMOV</code>), but it can run on more ports than <code>SETcc</code>. There&#39;s no elision of <code>MOVZX</code>, is there? (Although I guess you could trivially rewrite with a 2-byte <code>XOR</code> instead, which could be renamed, and may be the fastest.)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499886773, "post_id": 45052519, "comment_id": 77104897, "body": "@CodyGray: xor/cmp/setcc is best, unless you really need to avoid a tmp register.  Skylake eliminates <code>movzx r32, r8-low</code>, except for extending in-place like here. :/  <code>sbb</code>/<code>neg</code> is only better on ancient CPUs where <code>setcc</code> is slow.  IDK what ICC is smoking when it puts 0 and 1 into two registers and uses <code>cmov</code>.  I have a whole section about setcc in my <a href=\"https://stackoverflow.com/questions/33666617/what-is-the-best-way-to-set-a-register-to-zero-in-x86-assembly-xor-mov-or-and/33668295#33668295\">xor-zeroing answer :P</a>.  But luckily this usually goes away when inlining into an <code>if()</code>: <code>cmp&#47;jcc</code>"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 2, "creation_date": 1499905899, "post_id": 45052519, "comment_id": 77112277, "body": "@OrangeDog - not really. If arguments are declared <code>const char *</code> they could very well be have been defined as <code>const</code> as well, which means they could be read-only and trying to modify them would cause a fault. In the real world, this is exactly what happens for things declared <code>const char *</code>: they are placed in the <code>.rodata</code> segment which is loaded without write-permissions. Working at the asm level does nothing to mitigate this."}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 2, "creation_date": 1499932250, "post_id": 45052519, "comment_id": 77121535, "body": "@BeeOnRope you&#39;re assuming writes to main memory, whereas the CPU can still do whatever it wants internally."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 0, "creation_date": 1499968181, "post_id": 45052519, "comment_id": 77147890, "body": "@OrangeDog - yes I&#39;m assuming writes to the <i>array</i> (not necessarily to &quot;main memory&quot;). I assume also Kevin was talking about writes to the array, since that&#39;s the thing that <code>const</code> protects at the source level, after all. Are you talking about something different? My point is that unlike many other languages, <code>const</code> in C is often enforced at the hardware level by putting const-defined data in read-only memory. Even at the assembly level you can&#39;t around that: the CPU is required to adhere to the memory protection settings (and of course in the case of real ROM, writes are impossible)."}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1500019645, "post_id": 45052519, "comment_id": 77167532, "body": "@BeeOnRope you made the same false assumptions as Kevin. You can mutate the array in registers or cache, and there is a level below assembly where the CPU can do whatever it wants. <code>const</code> is almost never enforced at the hardware level, because half the time it applies to parameters and local variables. Only your <code>const char *</code> string literals usually end up in read-only memory. For anything that doesn&#39;t you can change them there as long as you put it back afterwards (though that&#39;s would be pointlessly slow)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 0, "creation_date": 1500050455, "post_id": 45052519, "comment_id": 77187027, "body": "You <i>cannot</i> mutate the array in cache, the same protections are applied to memory that happens to be in cache as if it were not (after all it could be insane if the caches somehow bypassed memory protection). <i>Of course</i> you can mutate the array in a register, <i>and you can ask for the same at the source level</i> (e.g., by assigning to a temporary). The bottom line is that you can&#39;t write to a <code>const</code> object at the source level and often, neither can the CPU. Pointing out that you can read from it and manipulate the values in registers is simply obvious. @OrangeDog"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1500050649, "post_id": 45052519, "comment_id": 77187137, "body": "I have no idea where you got your idea that this somehow applies only to <code>const char *</code> string literals. Modern compilers like <code>gcc</code> and <code>clang</code> put essentially <i>all</i> objects with static storage duration defined as <code>const</code> into read-only memory which cannot be written even at the assembly level (and there is not &quot;even lower level magic&quot; that lets you bypass that). You are right that often <code>const</code> is not enforced when it is applied to a local or heap allocated object, but when you write a function you need it work for all inputs, right? It&#39;s probably not OK if it crashes once in a while..."}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 0, "creation_date": 1500050678, "post_id": 45052519, "comment_id": 77187155, "body": "It doesn&#39;t matter if an L1 cache bypasses memory protection as long as it doesn&#39;t affect anything else. Bottom line is the CPU can do whatever it wants as long as you cannot tell what it did. And the only person who ever mentioned the source level is Kevin."}, {"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1500050835, "post_id": 45052519, "comment_id": 77187239, "body": "@BeeOnRope there certainly are lower levels. Are you completely unaware of micro architectures? You think when you run x86 machine code the CPU will only use four of its general purpose registers? You think it does exactly the main memory stores you tell it to, exactly when you tell it? You&#39;re arguing about the source level again when you discuss function contracts."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1500051002, "post_id": 45052519, "comment_id": 77187327, "body": "Of course there is a hardware implementation with a lot of complexity, but it is generally invisible to the programmer and certainly doesn&#39;t let you bypass memory protection. Assembly (and related things like the layout and behavior of machine specific registers) is the lowest level you can reason about and the contract that the CPU provides. When you set up an area as read-only, userland code won&#39;t be able to bypass that without a serious flaw in the CPU despite any lower levels."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1500051128, "post_id": 45052519, "comment_id": 77187402, "body": "Listen - let me state what I understood to be your claim: &quot;<code>const</code> is only a source level construct, but if you work at a lower level (like assembly) you can bypass it&quot;. While this is true in some other languages, it is not true in general in C or C++, where the compiler, linker, runtime loader, and <i>CPU</i>  all conspire to prevent you from modifying some objects defined as const."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 73, "last_activity_date": 1499848944, "last_edit_date": 1499848944, "creation_date": 1499848528, "answer_id": 45052519, "question_id": 45052282, "link": "https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45052519#45052519", "title": "Why is memcmp(a, b, 4) only sometimes optimized to a uint32 comparison?", "body": "<p>If you generate code for a little-endian platform, optimizing four-byte <code>memcmp</code> for inequality to a single DWORD comparison is invalid.</p>\n\n<p>When <code>memcmp</code> compares individual bytes it goes from low-addressed bytes to high-addressed bytes, regardless of the platform.</p>\n\n<p>In order for <code>memcmp</code> to return zero all four bytes must be identical. Hence, the order of comparison does not matter. Therefore, DWORD optimization is valid, because you ignore the sign of the result.</p>\n\n<p>However, when <code>memcmp</code> returns a positive number, byte ordering matters. Hence, implementing the same comparison using 32-bit DWORD comparison requires a specific endianness: the platform must be big-endian, otherwise the result of comparison would be incorrect.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 10, "creation_date": 1499896735, "post_id": 45065908, "comment_id": 77109643, "body": "<code>memcmp</code> is required to compare as <code>unsigned char</code>, regardless of whether <code>char</code> is signed."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": -2, "last_activity_date": 1499887184, "creation_date": 1499887184, "answer_id": 45065908, "question_id": 45052282, "link": "https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45065908#45065908", "title": "Why is memcmp(a, b, 4) only sometimes optimized to a uint32 comparison?", "body": "<p>Endianness is <em>one</em> problem, but signed char is another. For example, consider that the four bytes you compare are 0x207f2020 and 0x20802020. The 80 as signed char is -128, the 7f as signed char is +127. But if you compare the four bytes, no comparison will give you the right order. </p>\n\n<p>Of course you can do an xor with 0x80808080 and then you can just use an unsigned compare. </p>\n"}, {"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1499896179, "post_id": 45066631, "comment_id": 77109445, "body": "I dug into the GCC source code a bit. This optimization is implemented by <a href=\"https://gcc.gnu.org/git/?p=gcc.git;a=blob;f=gcc/tree-ssa-strlen.c#l2078\" rel=\"nofollow noreferrer\"><code>handle_builtin_memcmp</code> in the somewhat inaccurately named <code>tree-ssa-strlen.c</code></a> and if I&#39;m reading it right, it only implements the <code>==</code> and <code>!=</code> cases: the checks on lines 2102-3 and 2108-9 cause it to bail out without doing anything if the comparison isn&#39;t <code>EQ_EXPR</code> or <code>NE_EXPR</code>, which mean what they sound like. Later it also bails out if <code>!SLOW_UNALIGNED_ACCESS (mode, align)</code> which means &quot;can we do this load without worrying about alignment?&quot;"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1499896458, "post_id": 45066631, "comment_id": 77109548, "body": "@zwol: thanks!  I&#39;m not surprised the first implementation of this new feature only handles <code>==</code> / <code>!=</code> comparisons.  It&#39;s too bad there aren&#39;t <i>truly</i> portable endian functions that would make it easy to write the <code>less4</code> in a compiler-friendly way without a mess of <code>#ifdef</code>s."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1499902165, "post_id": 45066631, "comment_id": 77111348, "body": "Incidentally, the aliasing rules are asymmetric: <code>char *</code> can alias anything, but <code>int *</code> officially <i>can&#39;t</i> alias <code>char</code>, at least when the <code>char</code> is declared as such; see <a href=\"https://stackoverflow.com/questions/30967447/undefined-behavior-on-reading-object-using-non-character-type-when-last-written\" title=\"undefined behavior on reading object using non character type when last written\">stackoverflow.com/questions/30967447/&hellip;</a>"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1499968753, "post_id": 45066631, "comment_id": 77148235, "body": "FWIW the portable snippets library has an <a href=\"https://github.com/nemequ/portable-snippets/tree/master/endian\" rel=\"nofollow noreferrer\">endian</a> module that seems to do a reasonable job at doing this &quot;fast&quot; (as does the rest of the library), and seems to be of high quality and active maintained."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 14, "last_activity_date": 1499910243, "last_edit_date": 1499910243, "creation_date": 1499889966, "answer_id": 45066631, "question_id": 45052282, "link": "https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45066631#45066631", "title": "Why is memcmp(a, b, 4) only sometimes optimized to a uint32 comparison?", "body": "<p>As discussed in other answers/comments, using <code>memcmp(a,b,4) &lt; 0</code> is equivalent to an <code>unsigned</code> comparison between big-endian integers.  It couldn't inline as efficiently as <code>== 0</code> on little-endian x86.</p>\n\n<p>More importantly, the current version of this behaviour in gcc7/8 <a href=\"https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison/45066631?noredirect=1#comment77109445_45066631\">only looks for <code>memcmp() == 0</code> or <code>!= 0</code></a>.  Even on a big-endian target where this could inline just as efficiently for <code>&lt;</code> or <code>&gt;</code>, gcc won't do it.  (Godbolt's newest big-endian compilers are PowerPC 64 gcc6.3, and MIPS/MIPS64 gcc5.4.  <code>mips</code> is big-endian MIPS, while <code>mipsel</code> is little-endian MIPS.)  If testing this with future gcc, use <code>a = __builtin_assume_align(a, 4)</code> to make sure gcc doesn't have to worry about unaligned-load performance/correctness on non-x86.  (Or just use <code>const int32_t*</code> instead of <code>const char*</code>.)</p>\n\n<p>If/when gcc learns to inline <code>memcmp</code> for cases other than EQ/NE, maybe gcc will do it on little-endian x86 when its heuristics tell it the extra code size will be worth it.  e.g. in a hot loop when compiling with <a href=\"https://stackoverflow.com/questions/4365980/how-to-use-profile-guided-optimizations-in-g\"><code>-fprofile-use</code></a> (profile-guided optimization).</p>\n\n<hr>\n\n<p><strong>If you want compilers to do a good job for this case</strong>, you should probably assign to a <code>uint32_t</code> and use an endian-conversion function like <code>ntohl</code>.  But make sure you pick one that can actually inline; apparently <a href=\"https://stackoverflow.com/questions/105252/how-do-i-convert-between-big-endian-and-little-endian-values-in-c/18333053#18333053\">Windows has an <code>ntohl</code> that compiles to a DLL call</a>.  See other answers on that question for some portable-endian stuff, and also <a href=\"https://gist.github.com/panzi/6856583\" rel=\"noreferrer\">someone's imperfect attempt at a <code>portable_endian.h</code></a>, and this <a href=\"https://gist.github.com/PkmX/63dd23f28ba885be53a5\" rel=\"noreferrer\">fork of it</a>.  I was working on a version for a while, but never finished/tested it or posted it.</p>\n\n<p>The pointer-casting may be Undefined Behaviour, <a href=\"https://stackoverflow.com/questions/30967447/undefined-behavior-on-reading-object-using-non-character-type-when-last-written\">depending on how you wrote the bytes and what the <code>char*</code> points to</a>.  If you're not sure about strict-aliasing and/or alignment, <code>memcpy</code> into <code>abytes</code>.  Most compilers are good at optimizing away small fixed-size <code>memcpy</code>.</p>\n\n<pre><code>// I know the question just wonders why gcc does what it does,\n// not asking for how to write it differently.\n// Beware of alignment performance or even fault issues outside of x86.\n\n#include &lt;endian.h&gt;\n#include &lt;stdint.h&gt;\n\nint equal4_optim(const char* a, const char* b) {\n    uint32_t abytes = *(const uint32_t*)a;\n    uint32_t bbytes = *(const uint32_t*)b;\n\n    return abytes == bbytes;\n}\n\n\nint less4_optim(const char* a, const char* b) {\n    uint32_t a_native = be32toh(*(const uint32_t*)a);\n    uint32_t b_native = be32toh(*(const uint32_t*)b);\n\n    return a_native &lt; b_native;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSBnVAV2OUxAHIBSAJgGY8AO2QAbZlgDU3fgGEGBYsOAA6BDOzcADAEFtO4QUmYAjswCGogCwQ0QhZOQJzxAFSTzpR6ntGnL9wAjAEppAHYAIX1JGI9pfgARSQB9ZMDmPFECYWTzBgZmAFtMXNE8YCFMdAhPSQAOYJko3VjJQPik1PTM7KFc/KKSy3LK6sCvBqb9aNjiTAJWIUliwuRCgAcar3HJK1CZBIPJLSndbjDDs91DSVFMfJs7B383Dy8nv2dXkPDmnVbzB0UmkMlkcnkCsVSiMqlt6o1%2BH9Wu0jl1Qb1%2BpChmUKrCdpNEdMWrN5otlphVhs4Ts9vFZMdTnoLkS9GcBMIxBJMHTMEJ8OYhGoNNN2SJxFIZPICPghAQhfxNFcDLLjGZLFZkqh1tlCrYfM8vu5ah9HIa2vtIjMYhlZfxeMkjOZAgBPAj3IGuPW%2BSQ2gh2h2uYLmRmtX3%2BoyBF1uhger0OMP2giBwKMq2SOYLYhLJ2u90HI6R3MMVPMpX6G53B6a7V4XUml5G976z4Bc2/NMJh0eZJCczZABu3ILmDtRAQEE9Js7SaDCKRsWnbR7fbwg6BgRHvDHE7jRmnybnLNaGbJ5mXA6HciXvYvJcuOk4wVIoi4AFZOKQhFwtB/UFxZHwUS8BEkhMKw7DSAItAfgQ36Pk%2BADWID8PwKgoehGGYc%2BXBWB%2BX6cD%2BpB/pwH4MCAWikLBBGPqQcCwEgaAbJkmBkBQepMXcxAgHgyDILQYSkAAZj0LFkRAgRwaQjHFLKADyQiiM6kn4HMyAXmR1HkLKmAvtRT5atk%2BpcAAtAAHsgkjGbJ/CWaZAASskAMoACqkSwbAcLQT66e%2Bn6ScRpl1AAbMZQVWJIPEWfxkgQLghAkJB/D0JIsioBxLGJV5MFwcEiHIahmGFeh2GcLhfmacRpHkZROW0TAiAoGl6zMaxlCMc1nEgMAQX8EJInEGJEmadJvIEPJinKXgqnqZJhg6bVBl4EZnBmRZVk2cZADqliiJZhQuE4BzOAwADuOmiG54Ged5b54f5XCBSFYWSMAvGSEFaExXFRDEJlXipelv18HawTZXpeUoWhRWFSVZX4YRlWMNVVE/rlJW8HdFVcGDqNPoOA1LV%2BVhAA%3D%3D\" rel=\"noreferrer\">I checked on Godbolt</a>, and that compiles to efficient code (basically identical to what I wrote in asm below), especially on big-endian platforms, even with old gcc.  It also makes much better code than ICC17, which inlines <code>memcmp</code> but only to a byte-compare loop (even for the <code>== 0</code> case.</p>\n\n<hr>\n\n<p><strong>I think this hand-crafted sequence is an optimal implementation of <code>less4()</code></strong> (for the x86-64 SystemV calling convention, like used in the question, with <code>const char *a</code> in <code>rdi</code> and <code>b</code> in <code>rsi</code>).</p>\n\n<pre><code>less4:\n    mov   edi, [rdi]\n    mov   esi, [rsi]\n    bswap edi\n    bswap esi\n    # data loaded and byte-swapped to native unsigned integers\n    xor   eax,eax    # solves the same problem as gcc's movzx, see below\n    cmp   edi, esi\n    setb  al         # eax=1 if *a was Below(unsigned) *b, else 0\n    ret\n</code></pre>\n\n<p>Those are all single-uop instructions on Intel and AMD CPUs since K8 and Core2 (<a href=\"http://agner.org/optimize/\" rel=\"noreferrer\">http://agner.org/optimize/</a>).</p>\n\n<p>Having to bswap both operands has an extra code-size cost vs. the <code>== 0</code> case: we can't fold one of the loads into a memory operand for <code>cmp</code>.  (That saves code size, and uops thanks to micro-fusion.)  This is on top the two extra <code>bswap</code> instructions.</p>\n\n<p>On CPUs that support <code>movbe</code>, it can save code size:  <code>movbe ecx, [rsi]</code> is a load + bswap.  On Haswell, it's 2 uops, so presumably it decodes to the same uops as <code>mov ecx, [rsi]</code> / <code>bswap ecx</code>.  On Atom/Silvermont, it's handled right in the load ports, so it's fewer uops as well as smaller code-size.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/33666617/what-is-the-best-way-to-set-a-register-to-zero-in-x86-assembly-xor-mov-or-and/33668295#33668295\">the <code>setcc</code> part of my xor-zeroing answer</a> for more about why xor/cmp/setcc  (which clang uses) is better than cmp/setcc/movzx (typical for gcc).</p>\n\n<p>In the usual case where this inlines into code that branches on the result, the <a href=\"http://felixcloutier.com/x86/SETcc.html\" rel=\"noreferrer\">setcc</a> + zero-extend are replaced with a <a href=\"http://felixcloutier.com/x86/Jcc.html\" rel=\"noreferrer\">jcc</a>; the compiler optimizes away creating a boolean return value in a register.    <strong>This is yet another advantage of inlining: the library <code>memcmp</code> does have to create an integer boolean return value which the caller tests</strong>, because no x86 ABI/calling convention allows for returning boolean conditions in flags.  (I don't know of any non-x86 calling conventions that do that either).  For most library <code>memcmp</code> implementations, there's also significant overhead in choosing a strategy depending on length, and maybe alignment checking.  That can be pretty cheap, but for size 4 it's going to be more than the cost of all the real work.</p>\n"}], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4421, "favorite_count": 6, "accepted_answer_id": 45066631, "answer_count": 4, "score": 69, "last_activity_date": 1499910243, "creation_date": 1499847912, "last_edit_date": 1499856102, "question_id": 45052282, "link": "https://stackoverflow.com/questions/45052282/why-is-memcmpa-b-4-only-sometimes-optimized-to-a-uint32-comparison", "title": "Why is memcmp(a, b, 4) only sometimes optimized to a uint32 comparison?", "body": "<p>Given this code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n\nint equal4(const char* a, const char* b)\n{\n    return memcmp(a, b, 4) == 0;\n}\n\nint less4(const char* a, const char* b)\n{\n    return memcmp(a, b, 4) &lt; 0;\n}\n</code></pre>\n\n<p>GCC 7 on x86_64 introduced an optimization for the first case (Clang has done it for a long time):</p>\n\n<pre><code>    mov     eax, DWORD PTR [rsi]\n    cmp     DWORD PTR [rdi], eax\n    sete    al\n    movzx   eax, al\n</code></pre>\n\n<p>But the second case still calls <code>memcmp()</code>:</p>\n\n<pre><code>    sub     rsp, 8\n    mov     edx, 4\n    call    memcmp\n    add     rsp, 8\n    shr     eax, 31\n</code></pre>\n\n<p>Could a similar optimization be applied to the second case?  What's the best assembly for this, and is there any clear reason why it isn't being done (by GCC or Clang)?</p>\n\n<p>See it on Godbolt's Compiler Explorer: <a href=\"https://godbolt.org/g/jv8fcf\" rel=\"noreferrer\">https://godbolt.org/g/jv8fcf</a></p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499846872, "post_id": 45051769, "comment_id": 77077264, "body": "&quot;<i>I think my scanf looks right</i>&quot; -- <code>%s</code> in <code>scanf()</code> is never <i>right</i>, it&#39;s always a <i>buffer overflow</i>. It <b>needs a field width</b>. And <code>\\n</code> is just another whitespace character, which are not distiguished by <code>scanf()</code>, so you could as well put a simple space instead."}, {"owner": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1499846933, "post_id": 45051769, "comment_id": 77077313, "body": "@dasblinkenlight I did declared this way ` struct Eleve *array;` and entered &#39;test&#39; as nom. You are right, I forgot to specify this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499847000, "post_id": 45051769, "comment_id": 77077360, "body": "The problem <i>could</i> be that it&#39;s actually advancing to the next <code>printf()</code> and you just don&#39;t see the text because the output buffer isn&#39;t flushed. Then, the <code>scanf(&quot;%d&quot;)</code> is waiting for more input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1499847093, "post_id": 45051769, "comment_id": 77077421, "body": "Interactive input with <code>scanf()</code> is in general a bad idea and has <b>many</b> pitfalls. Read for example <a href=\"https://stackoverflow.com/questions/35178520/how-to-read-parse-input-in-c-the-faq\">How to read / parse input in C? The FAQ</a>. I also wrote a document on the subject: <a href=\"http://sekrit.de/webdocs/c/beginners-guide-away-from-scanf.html\" rel=\"nofollow noreferrer\">A beginners&#39; guide away from <code>scanf()</code></a>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 1034, "user_id": 6280433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245a781c8e21350a17c5e0919cb0431f?s=128&d=identicon&r=PG&f=1", "display_name": "Arpit Svt", "link": "https://stackoverflow.com/users/6280433/arpit-svt"}, "edited": false, "score": 3, "creation_date": 1499847822, "post_id": 45051769, "comment_id": 77077940, "body": "@ArpitSvt <a href=\"https://stackoverflow.com/a/605858/335858\">No, you don&#39;t cast the result of <code>malloc</code> in C</a>. (C++ is a different story)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1499847936, "post_id": 45051769, "comment_id": 77078017, "body": "Try adding a call to ` fflush(stdout)` after both <code>printf</code> calls in the loop, and see if this fixes your problem."}, {"owner": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "edited": false, "score": 0, "creation_date": 1499848420, "post_id": 45051769, "comment_id": 77078383, "body": "@FelixPalmen good read (not finished yet). Indeed, removing the \\n solved the problem, but I will investigate on your statement about  interactive input. Tahnks"}], "answers": [{"tags": [], "owner": {"reputation": 1565, "user_id": 3384522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ecxkf.png?s=128&g=1", "display_name": "gior91", "link": "https://stackoverflow.com/users/3384522/gior91"}, "is_accepted": false, "score": 1, "last_activity_date": 1499849744, "creation_date": 1499849744, "answer_id": 45052957, "question_id": 45051769, "link": "https://stackoverflow.com/questions/45051769/scanf-wont-continue-after-i-seized-an-input-text/45052957#45052957", "title": "Scanf won&#39;t continue after I seized an input text", "body": "<p>Remove the <code>\\n</code> from <code>scanf(\"%s\\n\", array[i].Nom);</code> and <code>scanf(\"%d\\n\", &amp;array[i].Note);</code> or press <code>CTRL + D</code> after you inserted the value.</p>\n"}, {"comments": [{"owner": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "edited": false, "score": 0, "creation_date": 1499851329, "post_id": 45053268, "comment_id": 77080452, "body": "I am not there yet in my courses, so maybe I am asking someting obvious but, which stream is the cmd? Because all I found is about files, even when the function is about streams. Is it STDIN? So basically I should get a  <code>fgets (array[i].Nom, 100, STDIN)</code> ?"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "edited": false, "score": 0, "creation_date": 1499851519, "post_id": 45053268, "comment_id": 77080591, "body": "@Zaphod yes you can say that console is stdin(Standard Input) in general. Its okay to ask obvious questions, have to learn this way or the other :) You can use fgets to get input from a file stream too. For standard console input you must use stdin. You want me on how to use fgets I can show you an example if you want?"}, {"owner": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "edited": false, "score": 0, "creation_date": 1499851644, "post_id": 45053268, "comment_id": 77080686, "body": "Tahnks. I indeed would like an example with fgets in my situation. I already had the code with scanf with the comments on my ask, but I would love to get a good way of doing it with fgets."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "reply_to_user": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "edited": false, "score": 0, "creation_date": 1499853332, "post_id": 45053268, "comment_id": 77081954, "body": "@Zaphod Check this out:  <a href=\"http://www.tutorialspoint.com/compile_c_online.php?PID=0Bw_CjBb95KQMMmtYNUM0dVFUWkE\" rel=\"nofollow noreferrer\">tutorialspoint.com/&hellip;</a> Just hit compile and then execute"}], "tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": true, "score": 2, "last_activity_date": 1499851658, "last_edit_date": 1499851658, "creation_date": 1499850505, "answer_id": 45053268, "question_id": 45051769, "link": "https://stackoverflow.com/questions/45051769/scanf-wont-continue-after-i-seized-an-input-text/45053268#45053268", "title": "Scanf won&#39;t continue after I seized an input text", "body": "<p>You should not use scanf! This is an age old discussion that use of scanf requires care and is dangerous. <a href=\"https://stackoverflow.com/questions/2430303/disadvantages-of-scanf\">Disadvantages of scanf</a>.</p>\n\n<p>Instead use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">fgets()</a>.</p>\n\n<p>Check this answer <a href=\"https://stackoverflow.com/questions/3919009/how-to-read-from-stdin-with-fgets\">How to read from stdin with fgets()?</a> or this \n<a href=\"https://stackoverflow.com/questions/45038176/not-able-to-input-a-string-with-spaces-in-a-loop-in-c/45038767?noredirect=1#comment77052162_45038767\">Not able to input a string with spaces in a loop in C</a></p>\n\n<p>But if you still insist on using scanf(), this may be useful:</p>\n\n<pre><code> while(i&lt;nbEleves){\n        printf(\"Nom? \");\n        scanf(\" %[^\\n]\",array[i].Nom);// remove the \\n and notice the space before %[^\\n]\n        printf(\"La note? \");\n        scanf(\"%d\", &amp;array[i].Note);\n        total = total + array[i].Note;\n        i++;\n}\n</code></pre>\n\n<p>Also I suggest that you must free the memory you allocated using free() in order to prevent memory leaks.</p>\n\n<pre><code>free(array);\n</code></pre>\n"}], "owner": {"reputation": 1318, "user_id": 1439453, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f0def02eda94bdb5bcaf254cfcd76ea1?s=128&d=identicon&r=PG", "display_name": "proven&#231;al le breton", "link": "https://stackoverflow.com/users/1439453/proven%c3%a7al-le-breton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 45053268, "answer_count": 2, "score": 1, "last_activity_date": 1499866046, "creation_date": 1499846373, "last_edit_date": 1499866046, "question_id": 45051769, "link": "https://stackoverflow.com/questions/45051769/scanf-wont-continue-after-i-seized-an-input-text", "title": "Scanf won&#39;t continue after I seized an input text", "body": "<p>so, I am basically building an array of students with their evaluation.</p>\n\n<p>I made a basic struct :</p>\n\n<pre><code>struct Eleve{\n    char Nom[100];\n    int Note;\n};\n\nstruct Eleve *array;\n</code></pre>\n\n<p>Then asking for how many children I want to input into my array, then loop and asking information for each child. But, when I enter an input into <code>scanf(\"%s\\n\", array[i].Nom);</code> the code stop. </p>\n\n<pre><code>    int nbEleves;\n    float total = 0;\n    printf(\"Nombre?!\\n\");\n    scanf(\"%d\", &amp;nbEleves);\n\n    array = malloc(nbEleves * sizeof(struct Eleve));\n    int i = 0;\n    while (i &lt; nbEleves) {\n        printf(\"Nom? \");\n        scanf(\"%s\\n\", array[i].Nom);\n        printf(\"La note? \");\n        scanf(\"%d\\n\", &amp;array[i].Note);\n        total = total + array[i].Note;\n        i++;\n    }\n</code></pre>\n\n<p>It doesn't even go on the next <code>printf</code>. I don't understand why, because I don't get any build error or execution errors on this line. Eventually I would have looked at the format if by any chance I'd get an error there, but nothing. No errors, just not getting to the next step of the program.</p>\n\n<p>I think my <code>scanf</code> looks right, and I've got no warnings on it. So, what can prevent the code to go further?</p>\n\n<p>The data I entered in Nom is <code>test</code>.</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1499843845, "post_id": 45050819, "comment_id": 77075246, "body": "select&#39;s first argument is the highest socket descriptor (plus one) in the fdset&#39;s.  Here&#39;s a snippit from its man page: &quot;nfds should be set to the highest-numbered file descriptor in any of the three sets, plus 1.&quot;"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1499844070, "post_id": 45050819, "comment_id": 77075410, "body": "What would the argument be if there are no file descriptors in any of the sets? What if the highest file descriptor was &#39;0&#39;?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499844465, "post_id": 45050819, "comment_id": 77075662, "body": "If there is no desriptor in any of the sets, why should anyone call <code>select</code> at all? If the highest is 0, it will obviously be 1."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1499844996, "post_id": 45050819, "comment_id": 77075961, "body": "@Gerhardh Because you might have a general event loop that also uses the timeout for some things. It would be silly to have a special case for that."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1499843851, "creation_date": 1499843851, "answer_id": 45050897, "question_id": 45050819, "link": "https://stackoverflow.com/questions/45050819/why-is-socket-file-descriptor-argument-incremented-by-one-when-calling-select/45050897#45050897", "title": "Why is socket file descriptor argument incremented by one when calling select?", "body": "<p>From the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html\" rel=\"noreferrer\">POSIX specification of <code>select</code></a>:</p>\n\n<blockquote>\n  <p>The <code>nfds</code> argument specifies the range of descriptors to be tested. The first <code>nfds</code> descriptors shall be checked in each set; that is, the descriptors from zero through <code>nfds-1</code> in the descriptor sets shall be examined.</p>\n</blockquote>\n\n<p>That is, you give the <em>size</em> of the set, where each descriptor is an <em>index</em>.</p>\n\n<p>Descriptors sets are basically implemented as arrays, and <code>sock_fd</code> (in your case) is an <em>index</em> into that array, while <code>sock_fd + 1</code> is the <em>size</em> of the array to check.</p>\n"}], "owner": {"reputation": 864, "user_id": 4624725, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-KB3KYmNbWw4/AAAAAAAAAAI/AAAAAAAAEpU/BgqrUE_Kev8/photo.jpg?sz=128", "display_name": "PoVa", "link": "https://stackoverflow.com/users/4624725/pova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 45050897, "answer_count": 1, "score": 0, "last_activity_date": 1499843851, "creation_date": 1499843627, "question_id": 45050819, "link": "https://stackoverflow.com/questions/45050819/why-is-socket-file-descriptor-argument-incremented-by-one-when-calling-select", "title": "Why is socket file descriptor argument incremented by one when calling select?", "body": "<p>Whenever I see a <code>select</code> call in C, I see it written as:</p>\n\n<pre><code>select(sock_fd + 1, &amp;fdset, NULL, NULL, &amp;tv)\n</code></pre>\n\n<p>or something similar. What is the meaning behind incrementing the file descriptor?</p>\n"}, {"tags": ["c", "embedded", "bit-shift"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499841765, "post_id": 45050196, "comment_id": 77073983, "body": "I suggest you write out some example values in binary on paper, then do the operations <i>on paper</i> and see what results you get."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499866066, "post_id": 45050196, "comment_id": 77091460, "body": "note this assumes that the variable temp is unsigned and/or if signed that the compiler does not sign extend (and/or the msbit is never set).  otherwise it may mess up the result."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1499887044, "post_id": 45050196, "comment_id": 77105041, "body": "I would generally avoid the final right shift. The point of left-justification is to make the system largely independent of the actual ADC resolution.  If say you had a 10 bit sensor or a 16 bit sensor, the <i>magnitude</i> would be the same, so any signal processing  code could be the same - you treat it all as if it were a 16 bit sensor.  If you shift-right by 4 you loose that <i>sample resolution independence</i> and will have to modify the code for each different sensor you use."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499944024, "post_id": 45050196, "comment_id": 77129873, "body": "@old_timer :  I guess for the bandwidth of an I2C  temperature sensor it is not critical from a performance point of view, for high speed DSP however it is just an unnecessary <i>per_sample</i> operation.  I am not saying it is wrong; just that it is that way because it has distinct advantages and few disadvantages, and it should be considered."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499952795, "post_id": 45050196, "comment_id": 77137013, "body": "I agree the extra shift is not required if the lower bits are known to be fixed, ideally zero.  And depending on architecture a mask might be cheaper than the shift if those bits are not fixed nor zero.  Depending on the i2c master if any or code that bit bangs none of this may be required, the two bytes might be able to be accumulated by the shifter and you are done there is your value..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499952858, "post_id": 45050196, "comment_id": 77137061, "body": "Was simply trying extra support for your comment, guess I failed..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1499953089, "post_id": 45050196, "comment_id": 77137233, "body": "Rereading this doc (I have used this sensor in the past) the msbyte is first the lsbyte so depending on how the i2c logic/software works none of this may be required, this sensor is also one of those that it is either a 12 bit or 13 bit with zero padding (well maybe the zero bit is set).  Also as pointed out in the documentation you could just read the msbyte and use it, you lose some precision but as pointed out above you can simply adjust your scaling to deal with the weight of each bit."}], "answers": [{"comments": [{"owner": {"reputation": 569, "user_id": 4779809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/74baa69bbcd3c150eed8eaa48191f675?s=128&d=identicon&r=PG&f=1", "display_name": "craig-nerd", "link": "https://stackoverflow.com/users/4779809/craig-nerd"}, "edited": false, "score": 0, "creation_date": 1499845728, "post_id": 45050362, "comment_id": 77076473, "body": "Thanks for the wonderful explanation. But is this not right-aligned? i see the <code>v</code> temperature bits are aligned to the right in the final result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 569, "user_id": 4779809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/74baa69bbcd3c150eed8eaa48191f675?s=128&d=identicon&r=PG&f=1", "display_name": "craig-nerd", "link": "https://stackoverflow.com/users/4779809/craig-nerd"}, "edited": false, "score": 0, "creation_date": 1499845807, "post_id": 45050362, "comment_id": 77076531, "body": "@Jspake the values you get from the sensor are left-aligned. Of course you need &quot;right aligned&quot; in the end, this is how integer representation works, the least significant bit is the one all to the right."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 569, "user_id": 4779809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/74baa69bbcd3c150eed8eaa48191f675?s=128&d=identicon&r=PG&f=1", "display_name": "craig-nerd", "link": "https://stackoverflow.com/users/4779809/craig-nerd"}, "edited": false, "score": 0, "creation_date": 1499847874, "post_id": 45050362, "comment_id": 77077974, "body": "@Jspake: As Felix said, the sensor data are left-aligned: <code>vvvvvvvv vvvvpppp</code> and the result has to be right-aligned for sure."}, {"owner": {"reputation": 569, "user_id": 4779809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/74baa69bbcd3c150eed8eaa48191f675?s=128&d=identicon&r=PG&f=1", "display_name": "craig-nerd", "link": "https://stackoverflow.com/users/4779809/craig-nerd"}, "edited": false, "score": 0, "creation_date": 1499863453, "post_id": 45050362, "comment_id": 77089337, "body": "Aah yes, the data needs to go back to being right-aligned. Thanks!"}, {"owner": {"reputation": 188, "user_id": 3620376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097ea8097575470909514404793a7150?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3620376/jan"}, "edited": false, "score": 0, "creation_date": 1592573207, "post_id": 45050362, "comment_id": 110481412, "body": "How would we make that portable and working for signed integer as well? Right shift is implementation defined."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 7, "last_activity_date": 1499842540, "last_edit_date": 1499842540, "creation_date": 1499842134, "answer_id": 45050362, "question_id": 45050196, "link": "https://stackoverflow.com/questions/45050196/reading-msb-and-lsb-if-data-is-left-justified/45050362#45050362", "title": "Reading MSB and LSB if data is left-justified", "body": "<p>Let <code>v</code> be a bit of the temperature value and <code>p</code> be a padding bit on the right, then you have</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>MSB = vvvvvvvv\nLSB = vvvvpppp\n\n---\n\n  MSB &lt;&lt; 8               = vvvvvvvv 00000000\n (MSB &lt;&lt; 8) | LSB        = vvvvvvvv vvvvpppp\n((MSB &lt;&lt; 8) | LSB) &gt;&gt; 4  = 0000vvvv vvvvvvvv\n</code></pre>\n\n<p>In the last line, you see the correct representation as a 16bit value (with the upper 4 bits always <code>0</code>).</p>\n"}], "owner": {"reputation": 569, "user_id": 4779809, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/74baa69bbcd3c150eed8eaa48191f675?s=128&d=identicon&r=PG&f=1", "display_name": "craig-nerd", "link": "https://stackoverflow.com/users/4779809/craig-nerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3401, "favorite_count": 0, "accepted_answer_id": 45050362, "answer_count": 1, "score": 2, "last_activity_date": 1499842540, "creation_date": 1499841545, "question_id": 45050196, "link": "https://stackoverflow.com/questions/45050196/reading-msb-and-lsb-if-data-is-left-justified", "title": "Reading MSB and LSB if data is left-justified", "body": "<p>While going through my coursework, I came across a function that reads temperature from the <a href=\"http://www.ti.com/lit/ds/symlink/tmp102.pdf\" rel=\"nofollow noreferrer\">TMP102 sensor</a> (only required to measure positive temperatures).<br>\nThe function first reads the MSB and LSB using I2C. Since the temperature data is <strong>12-bit and left-justified</strong>, the function proceeds as follows:  </p>\n\n<pre><code>temp = ( (MSB &lt;&lt; 8) | LSB) &gt;&gt; 4  \n</code></pre>\n\n<p>I do not understand why this is done. Could someone please help me explain how the above line of code is related to the data being 12-bit and left-justified?  </p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1499841080, "post_id": 45049995, "comment_id": 77073626, "body": "Could you fix the formatting while you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499841234, "post_id": 45049995, "comment_id": 77073696, "body": "<code>*abundants[count] = n;</code> --&gt; <code>(*abundants)[count] = n;</code>"}, {"owner": {"reputation": 464, "user_id": 3342248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8e382bd13ffcf46be4229173acd485?s=128&d=identicon&r=PG&f=1", "display_name": "SGeorgiades", "link": "https://stackoverflow.com/users/3342248/sgeorgiades"}, "edited": false, "score": 0, "creation_date": 1499841306, "post_id": 45049995, "comment_id": 77073737, "body": "Where is &quot;is_abundant&quot;?  It is likely to be the problem"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1499843184, "post_id": 45049995, "comment_id": 77074834, "body": "&quot;<i>a dynamic array which uses realloc every time it has to add a new element</i>&quot; -- not your question, but this is a <b>bad</b> allocation strategy with unnecessary overhead. Always <code>realloc</code> in chunks, an often used strategy is to double the capacity once you run out (whether this is the best depends on your usecase)."}, {"owner": {"reputation": 3, "user_id": 8281057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9fcc7e57bd3792a326c057840056fe?s=128&d=identicon&r=PG&f=1", "display_name": "Dan14", "link": "https://stackoverflow.com/users/8281057/dan14"}, "reply_to_user": {"reputation": 464, "user_id": 3342248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8e382bd13ffcf46be4229173acd485?s=128&d=identicon&r=PG&f=1", "display_name": "SGeorgiades", "link": "https://stackoverflow.com/users/3342248/sgeorgiades"}, "edited": false, "score": 0, "creation_date": 1499846478, "post_id": 45049995, "comment_id": 77077005, "body": "@SGeorgiades, is_abundant will either return 0 or 1 always, problem lies on the assigment"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499886766, "post_id": 45049995, "comment_id": 77104892, "body": "this line: <code>int *abundants;</code>, unless outside of any function,  leaves <code>abundants</code> uninitialized."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499886902, "post_id": 45049995, "comment_id": 77104952, "body": "regarding: <code>if (!(*abundants = (int*) malloc(sizeof(int)))</code> In C, when calling any of the heap allocation functions (malloc, calloc, realloc), the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1499887352, "post_id": 45049995, "comment_id": 77105203, "body": "regarding <code>int count = 0, n=14</code>, ... if( is_abundant(n)) { ... if (!(<i>abundants = (int</i>) realloc(*abundants,(count+1) * sizeof(int)))){`   1) this code, when <code>realloc()</code> fails, has lost the original pointer to the allocated memory.  so calling <code>exit( EXIT_FAILURE );</code> results in a memory leak.  Strongly suggest using: <code>void temp;  if (!( temp =  realloc(*abundants,(count+1) * sizeof(int)))){ perror(&quot;malloc error!\\n&quot;); free( abundants );       exit(EXIT_FAILURE);} &#47;&#47; implied else, realloc successful.  abundants = temp;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8281057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9fcc7e57bd3792a326c057840056fe?s=128&d=identicon&r=PG&f=1", "display_name": "Dan14", "link": "https://stackoverflow.com/users/8281057/dan14"}, "edited": false, "score": 0, "creation_date": 1499847171, "post_id": 45051027, "comment_id": 77077471, "body": "Thanks for the suggestions, i will follow your recommendation and change my whole implementation"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 1, "last_activity_date": 1499846155, "last_edit_date": 1499846155, "creation_date": 1499844250, "answer_id": 45051027, "question_id": 45049995, "link": "https://stackoverflow.com/questions/45049995/invalid-assignment-on-dynamic-array-c/45051027#45051027", "title": "Invalid assignment on dynamic array C", "body": "<p>Your problem is a simple one in these lines:</p>\n\n<pre><code>*abundants[0] = 12;\n\n*abundants[count] = n;\n</code></pre>\n\n<p>The indexing operator <code>[]</code> has higher precedence than the dereference operator <code>*</code>. So here you're treating your <code>abundants</code> as an array pointer directly and try to dereference the element. What you want instead is</p>\n\n<pre><code>(*abundants)[0] = 12;\n\n(*abundants)[count] = n;\n</code></pre>\n\n<p>This should solve your problem, the remaining code will work correctly.</p>\n\n<hr>\n\n<p>That being said, I would strongly suggest to use some data structure like this:</p>\n\n<pre><code>struct dynarr\n{\n    size_t count;\n    size_t capacity;\n    int entries[];\n}\n</code></pre>\n\n<p>and <code>realloc()</code> in larger chunks, always when your <code>count</code> reaches your <code>capacity</code>. <code>realloc()</code> is costly and you risk fragmenting your heap space in a typical heap-based implementation. Your code could look for example like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_NUM 1024\n\nint is_abundant(int x) { return x; } // simple fake to make it compile, replace\n\nstruct dynarr\n{\n    size_t count;\n    size_t capacity;\n    int entries[];\n};\n\nstruct dynarr *createarr(size_t capacity)\n{\n    struct dynarr *arr = malloc(sizeof(*arr) + capacity * sizeof(int));\n    if (!arr)\n    {\n        perror(\"malloc error!\\n\");\n        exit(EXIT_FAILURE);\n    }\n    arr-&gt;count = 0;\n    arr-&gt;capacity = capacity;\n    return arr;\n}\n\nstruct dynarr *expandarr(struct dynarr *arr)\n{\n    size_t capacity = arr-&gt;capacity * 2;\n    struct dynarr *newarr = realloc(arr,\n            sizeof(*newarr) + capacity * sizeof(int));\n    if (!newarr)\n    {\n        perror(\"malloc error!\\n\");\n        free(arr);\n        exit(EXIT_FAILURE);\n    }\n    newarr-&gt;capacity = capacity;\n    return newarr;\n}\n\nstruct dynarr *abundant_numbers(void){\n    struct dynarr *abundants = createarr(32);\n    abundants-&gt;entries[abundants-&gt;count++] = 12; //we know the very first abundant number\n\n    int n = 14;\n\n    while (n &lt; MAX_NUM){\n        if (is_abundant(n)) {\n            if (abundants-&gt;count == abundants-&gt;capacity)\n            {\n                abundants = expandarr(abundants);\n            }\n            abundants-&gt;entries[abundants-&gt;count++] = n;\n        }\n        n += 2;     //no odd abundant numbers\n    }\n\n    return abundants;\n}\n\nint main(void)\n{\n    struct dynarr *abundants = abundant_numbers();\n\n    for (size_t i = 0; i &lt; abundants-&gt;count; ++i)\n    {\n        printf(\"%d \", abundants-&gt;entries[i]);\n    }\n    free(abundants);\n    putchar('\\n');\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8281057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9fcc7e57bd3792a326c057840056fe?s=128&d=identicon&r=PG&f=1", "display_name": "Dan14", "link": "https://stackoverflow.com/users/8281057/dan14"}, "edited": false, "score": 0, "creation_date": 1499996730, "post_id": 45066647, "comment_id": 77159355, "body": "i agree you with the #define, i use it a lot, but not in this case, this is just a small program so i forgot to use, it was my bad not to put my whole code to avoid missunderstandings, also, there are odd abundant numbers!, my error again! Anyways i finished the problem successfully. Thanks for your time"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 3, "user_id": 8281057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9fcc7e57bd3792a326c057840056fe?s=128&d=identicon&r=PG&f=1", "display_name": "Dan14", "link": "https://stackoverflow.com/users/8281057/dan14"}, "edited": false, "score": 0, "creation_date": 1499999854, "post_id": 45066647, "comment_id": 77160098, "body": "@Dan14,  big program, small program, makes no difference.  bad programming habits should never be encouraged."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1499890032, "creation_date": 1499890032, "answer_id": 45066647, "question_id": 45049995, "link": "https://stackoverflow.com/questions/45049995/invalid-assignment-on-dynamic-array-c/45066647#45066647", "title": "Invalid assignment on dynamic array C", "body": "<pre><code>the biggest problem is that the code is expecting an array of pointers to int.\n\nBut the code is only producing an array of `int`s\n\nAnd the code contains several 'magic' numbers (2, 12, 14)\n\n\nint *abundants = NULL;\n\nint count = abundant_numbers(&amp;abundants);\n\n\n\nint abundant_numbers(int *abundants[])\n{\n\n     if (!( abundants = malloc(sizeof(int))))\n     {\n         perror(\"malloc error!\\n\");\n         exit(EXIT_FAILURE);\n     } \n\n     abundants[0] = 12;     //we know the very first abundant number\n     int count = 1;\n     int n = 14;\n\n     while (n &lt; MAX_NUM)\n     {\n        if (is_abundant(n))\n        {\n            void *temp;\n            if (!( temp = realloc(abundants,(count+1) * sizeof(int))))\n            {\n                perror(\"Error in realloc\\n\");\n                free( abundants );\n                exit(EXIT_FAILURE);\n            }\n\n            // implied else, realloc successful\n\n            abundants = temp;\n            abundants[count] = n;\n            count++;\n        }\n        n += 2;     //no odd abundant numbers\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>However, since MAX_NUM is a known value,\nit would be better to just allocate that much memory in the beginning.</p>\n\n<p>And strongly suggest to NOT have 'special' code\nfor special cases of the value of 'n'.</p>\n\n<p>And give 'magic' numbers meaningful names, suggest via <code>#define</code> statements.</p>\n\n<p>sample code follows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;   // malloc(), free()\n\n// use whatever value your program needs in the following statement.\n#define MAX_NUM 1024\n#define FIRST_ABUNDANT 12\n#define STEP_AMOUNT 2\n\n// prototypes\nint abundant_numbers( int * );\n\n\nint main( void )\n{\n     int *abundants = NULL;\n\n     if (!( abundants = malloc(sizeof(int) * MAX_NUM)))\n     {\n         perror(\"malloc error!\\n\");\n         exit(EXIT_FAILURE);\n     } \n\n     // implied else, malloc successful\n\n    int count = abundant_numbers( abundants  );\n} // end function: main\n\n\nint abundant_numbers( int *abundants )\n{\n     int count = 0;\n\n     for( int n=FIRST_ABUNDANT; n &lt; MAX_NUM; n+=STEP_AMOUNT )\n     {\n        if (is_abundant(n))\n        {\n            abundants[count] = n;\n            count++;\n        }\n    }\n\n    return count;\n}  // end function: abundant_numbers\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8281057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9fcc7e57bd3792a326c057840056fe?s=128&d=identicon&r=PG&f=1", "display_name": "Dan14", "link": "https://stackoverflow.com/users/8281057/dan14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 45051027, "answer_count": 2, "score": 0, "last_activity_date": 1499890032, "creation_date": 1499840925, "last_edit_date": 1499842969, "question_id": 45049995, "link": "https://stackoverflow.com/questions/45049995/invalid-assignment-on-dynamic-array-c", "title": "Invalid assignment on dynamic array C", "body": "<p>Hello i am making a program in C which stores integers on a dynamic array which uses realloc every time it has to add a new element, i declare the array on the main:</p>\n\n<p><code>int *abundants;</code></p>\n\n<p><code>int count = abundant_numbers(&amp;abundants);</code></p>\n\n<p>once finished, i want to pass the modified array to another function to make other calculations</p>\n\n<pre><code>int abundant_numbers(int *abundants[]){\n    if (!(*abundants = (int*) malloc(sizeof(int)))){\n        perror(\"malloc error!\\n\");\n        exit(EXIT_FAILURE);\n    } \n\n    *abundants[0] = 12;     //we know the very first abundant number\n    int count = 1, n = 14;  \n\n    while (n &lt; MAX_NUM){\n        if (is_abundant(n)) {\n            if (!(*abundants = (int*) realloc(*abundants,(count+1) * sizeof(int)))){\n                perror(\"Error in realloc\\n\");\n                exit(EXIT_FAILURE);\n            }\n\n            *abundants[count] = n;\n            count++;\n        }\n        n += 2;     //no odd abundant numbers\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>the first time it enters on the if statement gives no problems, but the second time on the assignment i get a <code>Segmentation Fault: 11</code>, when accesing abundants[2], i dont understand why its not a valid position if it worked fine for abundants[1]</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "c", "package", "cython"], "comments": [{"owner": {"reputation": 166, "user_id": 731351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ff7437b8556f211b9669ef8ca93e538?s=128&d=identicon&r=PG", "display_name": "darked89", "link": "https://stackoverflow.com/users/731351/darked89"}, "edited": false, "score": 0, "creation_date": 1499869538, "post_id": 45049979, "comment_id": 77094175, "body": "Please provide info about OS, compiler, errors (if any)/output while running <code>python setup.py build_ext --inplace</code> . Assuming linux, check if you got submodule2.so somewhere in your directory tree."}, {"owner": {"reputation": 166, "user_id": 731351, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ff7437b8556f211b9669ef8ca93e538?s=128&d=identicon&r=PG", "display_name": "darked89", "link": "https://stackoverflow.com/users/731351/darked89"}, "edited": false, "score": 0, "creation_date": 1499869985, "post_id": 45049979, "comment_id": 77094525, "body": "To be more precise: the compiled module name ends up with i.e.: *.cpython-36m-x86_64-linux-gnu.so"}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1499900367, "post_id": 45049979, "comment_id": 77110860, "body": "Have you tried <code>from . import submodule2</code> in submodule1.py?"}, {"owner": {"reputation": 1955, "user_id": 6037118, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0905961c4d6422eced39052412e7d703?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/6037118/matt"}, "edited": false, "score": 1, "creation_date": 1500177073, "post_id": 45049979, "comment_id": 77220066, "body": "@Rich Try compiling the PYX first using the <code>python setup.py build_ext --inplace</code> which should generate a PYD file.  Then you should be able from your first .py script to import it like <code>from submodule2 import {functionname}</code>.  Then it should import the module and be usable."}], "answers": [{"tags": [], "owner": {"reputation": 4536, "user_id": 4165324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d50177f8e05b2c515b26455ba250ce?s=128&d=identicon&r=PG&f=1", "display_name": "danny", "link": "https://stackoverflow.com/users/4165324/danny"}, "is_accepted": true, "score": 3, "last_activity_date": 1502117230, "creation_date": 1502117230, "answer_id": 45549756, "question_id": 45049979, "link": "https://stackoverflow.com/questions/45049979/python-package-cython-module/45549756#45549756", "title": "Python package Cython module", "body": "<p>The name given to cythonize is what Cython will use to call the module and what it will be have to be imported as.</p>\n\n<p>The above setup.py will generate a native extension called <code>zindex</code> and will have to be imported as <code>import zindex</code> <em>even within python files in the zindex package</em>.</p>\n\n<p>Here is an example of how to do this:</p>\n\n<pre><code>from distutils.core import setup\nfrom setuptools import setup\nfrom Cython.Distutils import build_ext\n\next_modules = cythonize(Extension(\n        \"ndmg.graph.zindex\",\n        sources=[\"ndmg/graph/zindex.pyx\"],\n        language=\"c\",\n))\n&lt;..&gt;\n</code></pre>\n\n<p>Build and install extension.</p>\n\n<p>In a python file under ndmg/graph/py_index.py you can then do.</p>\n\n<pre><code>from zindex import &lt;..&gt;\n</code></pre>\n\n<p>to import from the cython module.</p>\n"}], "owner": {"reputation": 747, "user_id": 4305702, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ca6d645fad4dabd2bc1e9d14fe7a70a0?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/4305702/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 45549756, "answer_count": 1, "score": 3, "last_activity_date": 1502117230, "creation_date": 1499840873, "question_id": 45049979, "link": "https://stackoverflow.com/questions/45049979/python-package-cython-module", "title": "Python package Cython module", "body": "<p>I have the following package structure:</p>\n\n<pre><code>+ repo/\n+ setup.py\n+ package/\n    + module1/\n        + submodule1.py\n        + submodule2.pyx\n    + module2/\n        + submodule3.py\n</code></pre>\n\n<p>I would like to use submodule2.pyx from submodule1.py by something like:</p>\n\n<pre><code>import submodule2\n</code></pre>\n\n<p>but I have absolutely no idea how to do this. I tried adding the following lines to my setup.py:</p>\n\n<pre><code>from distutils.core import setup\nfrom setuptools import setup\nfrom Cython.Distutils import build_ext\n\next_modules = cythonize(Extension(\n        \"zindex\",\n        sources=[\"ndmg/graph/zindex.pyx\"],\n        language=\"c\",\n))\nfor e in ext_modules:\n    e.pyrex_directives = {\"boundscheck\": False}\n\nsetup(\n    name='ndmg',\n    ext_modules = ext_modules,\n    packages=[\n        'package',\n        'package.module1',\n    ....\n)\n</code></pre>\n\n<p>but was unsuccessful. All of the tutorials I could find had very very simplified examples, so I am not sure how to include Cython modules in my python package when the rest of the package is all just normal python code. Does anybody have any good examples I could follow, or can somebody tell me what I'm doing wrong?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c", "glibc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499840444, "post_id": 45049756, "comment_id": 77073297, "body": "If you take a closer look you will see that the two macro definitions are mutually exclusive, using <i>conditional compilation</i>. You should also take some time to read about <i>wide characters</i> and <i>wide character strings</i>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499840505, "post_id": 45049756, "comment_id": 77073336, "body": "And what does the comparison have to do with the macros? Please show the <i>complete</i> lines you reference."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499840894, "post_id": 45049923, "comment_id": 77073537, "body": "On 32-bit (or larger) systems supporting Unicode, then <code>wchar_t</code> is <i>usually</i> 32 bits representing a Unicode code-point. The notable exception is Windows where <code>wchar_t</code> is a 16-bit type representing a UTF-16 encoded character. Otherwise <code>wchar_t</code> just has &quot;to be large enough to represent any supported character code point&quot; (quoted from <a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">this fundamental type reference</a>)."}, {"owner": {"reputation": 472, "user_id": 4459820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3bf2d73bba3bc541e2f6c08d5ccb292?s=128&d=identicon&r=PG&f=1", "display_name": "Palash Ahuja", "link": "https://stackoverflow.com/users/4459820/palash-ahuja"}, "edited": false, "score": 0, "creation_date": 1499841108, "post_id": 45049923, "comment_id": 77073635, "body": "Thanks for the help !!"}, {"owner": {"reputation": 1044, "user_id": 726506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUIvo.jpg?s=128&g=1", "display_name": "rkrahl", "link": "https://stackoverflow.com/users/726506/rkrahl"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499841292, "post_id": 45049923, "comment_id": 77073727, "body": "@Someprogrammerdude thanks, didn&#39;t know that. I&#39;ve changed my answer."}], "tags": [], "owner": {"reputation": 1044, "user_id": 726506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUIvo.jpg?s=128&g=1", "display_name": "rkrahl", "link": "https://stackoverflow.com/users/726506/rkrahl"}, "is_accepted": true, "score": 8, "last_activity_date": 1499841219, "last_edit_date": 1499841219, "creation_date": 1499840692, "answer_id": 45049923, "question_id": 45049756, "link": "https://stackoverflow.com/questions/45049756/l-macro-in-glibc-source-code/45049923#45049923", "title": "L_ macro in glibc source code", "body": "<p>It prepends macro argument with L prefix (wchar_t literal - it uses as large datatype as is needed to represent every possible character code point instead of normal 8 bit in char type) if you're compiling wscanf version of function (line 105). Otherwise it just passes argument as it is (line 130).</p>\n\n<p>## is string concatenation operator in c preprocessor, L##'$' will expand to L'$' eventually.</p>\n\n<p>To sum up: it is used to compile two, mutually exclusive versions of vscanf function - one operating on wchar_t, one on char.</p>\n\n<p>Check out this answer: <a href=\"https://stackoverflow.com/questions/13087219/what-exactly-is-the-l-prefix-in-c\">What exactly is the L prefix in C++?</a></p>\n"}, {"comments": [{"owner": {"reputation": 472, "user_id": 4459820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3bf2d73bba3bc541e2f6c08d5ccb292?s=128&d=identicon&r=PG&f=1", "display_name": "Palash Ahuja", "link": "https://stackoverflow.com/users/4459820/palash-ahuja"}, "edited": false, "score": 0, "creation_date": 1499841129, "post_id": 45050019, "comment_id": 77073648, "body": "Thanks for the help !!"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 2, "last_activity_date": 1499840989, "creation_date": 1499840989, "answer_id": 45050019, "question_id": 45049756, "link": "https://stackoverflow.com/questions/45049756/l-macro-in-glibc-source-code/45050019#45050019", "title": "L_ macro in glibc source code", "body": "<p>Let's read the code. (I have no idea what it does, but I can read code)</p>\n\n<p>First, why are there two defines as you point out? One of them is used when <code>COMPILE_WSCANF</code> is defined, the other is used otherwise. What is <code>COMPILE_WSCANF</code>? If we look further down the file, we can see that different functions are defined. When <code>COMPILE_WSCANF</code> is defined, the function we end up with (through various macros) is <code>vfwscanf</code> otherwise we get <code>vfscanf</code>.  This is a pretty good indication that this file might be used to compile two different functions one for normal characters, one for wide characters. Most likely, the build system compiles the file twice with different defines. This is done so that we don't have to write the same file twice since both the normal and wide character functions will be pretty similar. </p>\n\n<p>I'm pretty sure that means that this macro has something to do with wide characters. If we look at how it's used, it is used to wrap character constants in comparisons and such. When <code>'x'</code> is a normal character constant, <code>L'x'</code> is a wide character constant (<code>wchar_t</code> type) representing the same character.</p>\n\n<p>So the macro is used to wrap character constants inside the code so that we don't have to have <code>#ifdef COMPILE_WSCANF</code>.</p>\n"}], "owner": {"reputation": 472, "user_id": 4459820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3bf2d73bba3bc541e2f6c08d5ccb292?s=128&d=identicon&r=PG&f=1", "display_name": "Palash Ahuja", "link": "https://stackoverflow.com/users/4459820/palash-ahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 45049923, "answer_count": 2, "score": 2, "last_activity_date": 1499841219, "creation_date": 1499840082, "last_edit_date": 1499840861, "question_id": 45049756, "link": "https://stackoverflow.com/questions/45049756/l-macro-in-glibc-source-code", "title": "L_ macro in glibc source code", "body": "<p>I was reading through the source code of <a href=\"https://code.woboq.org/userspace/glibc/stdio-common/vfscanf.c.html#_M/L_\" rel=\"nofollow noreferrer\">glibc</a> and I found that it has two macros which have the same name<br/>\nThis one is on the line 105<br/>\n<code>#define L_(Str) L##Str</code><br/>\nand this on the line 130<br/>\n<code>#define L_(Str) Str</code></p>\n\n<p>What do these macros really mean ? The usage is only for comparing two characters <br/>\nFor example on line 494, you could see it is used for comparing character values between *f and '$' <br/>\n<code>if(*f == L_('$'))</code>. If we wanted to compare the two characters, we could have compared them directly, instead of directing them through a macro ? Also, what is the use case for the macro on line 105 ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 2, "creation_date": 1499838148, "post_id": 45049135, "comment_id": 77072191, "body": "Macro definition are globally. It doesn&#39;t care if you define it in the function or not. The preprocessor will replace the first occurrence of the macro and will go on."}], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": true, "score": 5, "last_activity_date": 1499929823, "last_edit_date": 1499929823, "creation_date": 1499838224, "answer_id": 45049298, "question_id": 45049135, "link": "https://stackoverflow.com/questions/45049135/define-macro-value-in-function/45049298#45049298", "title": "Define macro value in function", "body": "<p>The C Preprocessor is not a part of the compiler, but is a separate step in the compilation process. </p>\n\n<p>Now, because it's a separate step in the compilation process, it's not the same as assigning <code>i</code> with different values. When your code runs, it treats <code>i</code> as <code>20</code> because that was defined before <code>main</code>. But, as I said,it's a separate step, <strong>and</strong> it does not care about functions scope, so, there is <em>before main</em> (<code>i=20</code>) and <em>after main</em> (<code>i=30</code>). When the Preprocessor  runs it treats the whole scope as global.</p>\n\n<p>Try using the <code>#define</code> inside the main, not in a function, and check what happens... </p>\n\n<p>Example: </p>\n\n<pre><code>void f(){\n    #define a 5\n    printf(\"%d\\n\", a);\n    #undef a\n    #define a 10\n    printf(\"%d\\n\", a);\n}\n\nint main()\n{\n    printf(\"%d\\n\", a); // a can be printed even though f() was never called!!\n    #define i 20\n    printf(\"%d\\n\", i); // 20\n    #undef i\n    #define i 30\n    printf(\"%d\\n\", i); // 30! :)\n    return 0;\n}\n</code></pre>\n\n<p>You can find more info in this <a href=\"https://stackoverflow.com/questions/36968567/is-it-possible-to-use-define-inside-a-function\">Q&amp;A</a></p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1499847704, "creation_date": 1499847704, "answer_id": 45052206, "question_id": 45049135, "link": "https://stackoverflow.com/questions/45049135/define-macro-value-in-function/45052206#45052206", "title": "Define macro value in function", "body": "<p>defines are preprocessed before the compilation and they are global. If you want to assign a value in the function just use normal C assign operator &amp; the a global variable,.</p>\n"}], "owner": {"reputation": 121, "user_id": 8185708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SWziI.jpg?s=128&g=1", "display_name": "Sunny Lei", "link": "https://stackoverflow.com/users/8185708/sunny-lei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "accepted_answer_id": 45049298, "answer_count": 2, "score": 2, "last_activity_date": 1499929823, "creation_date": 1499837524, "last_edit_date": 1499838545, "question_id": 45049135, "link": "https://stackoverflow.com/questions/45049135/define-macro-value-in-function", "title": "Define macro value in function", "body": "<p>Below two programs give different results. I thought these two program should give the same result as 20..20 because macro define is in the fun(), it should not affect outside of fun(). Can you explain the reasons?</p>\n\n<p>A: result is 20..20</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# define i 20\nvoid fun();\nmain()\n{\n    printf(\"%d..\", i);\n    fun();\n    printf(\"%d\", i);\n}\n\nvoid fun()\n{\n    #undef i \n    #define i 30 \n}\n</code></pre>\n\n<p>B: result is 30..30</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# define i 20\n\nvoid fun()\n{\n#undef i \n#define i 30 \n}\n\nmain()\n{\n    printf(\"%d..\", i);\n    fun();\n    printf(\"%d\", i);\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop", "undefined-behavior", "post-increment"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1499837538, "post_id": 45049120, "comment_id": 77071939, "body": "why writing code that way in the first place?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1499837770, "post_id": 45049120, "comment_id": 77072031, "body": "probably missing a sequence point somewhere, but hurts my head trying to know why. When you code stuff like this, there&#39;s already undefined behaviour in your head. If you want speed why not trying assembly? at least it&#39;s deterministic"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1499837946, "post_id": 45049120, "comment_id": 77072114, "body": "@rsp <code>p</code> is only modified once in the expression"}, {"owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1499838307, "post_id": 45049120, "comment_id": 77072262, "body": "The actual definition of &quot;post&quot;, as in post-increment, is apparently left somewhat in the air. Some compilers apply it after the statement has been parsed and others after the left hand side. To be on the safe side, put p++ inside the while block so that you can guarantee what you&#39;re going to get."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499838482, "post_id": 45049120, "comment_id": 77072329, "body": "@Jean Short code, and it does the job. Let&#39;s say I want to modify a string buffer so all double quotes would be removed. With this idiom I can overwrite the dquote with next char, over and over again until the end."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499838597, "post_id": 45049120, "comment_id": 77072376, "body": "And I don&#39;t think I modify the <code>p</code> twice as @M.M said. It is <code>(p+1)</code> not <code>(++p)</code>."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1499838952, "post_id": 45049120, "comment_id": 77072529, "body": "@Mike Yeah, I think it&#39;s safer that way. BTW it seems SO really hate people write such code. I thought it&#39;s commonplace to do thing this way when you do low-level programming."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1499839374, "post_id": 45049120, "comment_id": 77072735, "body": "Downvoter, care to explain?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499839748, "post_id": 45049120, "comment_id": 77072952, "body": "I cannot see why this question gets downvoted. It&#39;s clear and interesting."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499841808, "post_id": 45049120, "comment_id": 77074001, "body": "&#39;and it does the job&#39; - aparrently not, since you are asking aboout it here. &#39;SO really hate people write such code. I thought it&#39;s commonplace to do thing this way when you do low-level programming&#39; - not if you want to be able to easily debug it, it&#39;s not.  &#39;Clever&#39; code is bad code."}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499842450, "post_id": 45049120, "comment_id": 77074384, "body": "@MartinJames That&#39;s why I want to confirm the correctness of such code, because I would be in big trouble if the code goes wrong due to UB. Code like <code>while(*p++ = *q++);</code> are very obscure, but at the same time they are so short and make your code clean, provided you&#39;re fully sure what it does."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499842836, "post_id": 45049120, "comment_id": 77074614, "body": "&#39;provided you&#39;re fully sure what it does&#39; - exactly.  You re not sure, so you ask here.  That makes is bad code, not clean code.  Imagine what some maintenance/enhancement developer thinks when hunting some obscure bug, and finds code like yours?  Such thoughts cannot be published on a public site:)"}, {"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1499843357, "post_id": 45049120, "comment_id": 77074938, "body": "@MartinJames Are you suggesting that if I have doubt on such code, I shall not ask it on SO? Seriously? I knew my code could be UB, that&#39;s why I asked, &quot;Is this UB?&quot;, yet you&#39;re saying as if I&#39;m promoting bad code by asking it here."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499844052, "post_id": 45049120, "comment_id": 77075397, "body": "@raymai97 By all means ask on SO, and you have.  My comment on it is that your code is bad, whether correct or not.  Also, I&#39;m not suggesting that you are promoting bad code, merely publishing it here.  If the result is that, in the future, fewer developers write code that is difficult-to-debug, and possibly incorrect, then I call that a win overall."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1499850825, "post_id": 45049120, "comment_id": 77080076, "body": "If you know the string length (you do know in the example scenario), use <code>memmove()</code>: <code>memmove(szTest, szTest+1, sizeof szTest - 1); </code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1499860842, "post_id": 45049120, "comment_id": 77087286, "body": "Please don&#39;t edit the answer into the question, it makes it confusing for future readers. The format of the site is that you accept the answer that best answers the question"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499860975, "post_id": 45049120, "comment_id": 77087382, "body": "@klutt once you&#39;ve read a few thousand questions about stacking increment operators with other increment/assignment operators, it is much less interesting...  &quot;don&#39;t do that, even if you think you have it figured out, other people reading the code will be confused&quot; applies to all such cases"}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1499839518, "post_id": 45049236, "comment_id": 77072823, "body": "My TDM-GCC would only show <code>warning: suggest parentheses around assignment used as truth value [-Wparentheses]</code> with the same command-line. What version of gcc do you use?"}], "tags": [], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "is_accepted": false, "score": 3, "last_activity_date": 1499837921, "creation_date": 1499837921, "answer_id": 45049236, "question_id": 45049120, "link": "https://stackoverflow.com/questions/45049120/is-whilep-p1-undefined-behavior/45049236#45049236", "title": "Is `while(*p++ = *(p+1));` undefined behavior?", "body": "<p>Use <code>-Wall</code> If you are using GCC compiler. It is indeed an undefined behaviour in both C &amp; C++.</p>\n\n<p>See live demo <a href=\"http://coliru.stacked-crooked.com/a/973d29bd2498b9dd\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>See the diagnosis given by compiler</p>\n\n<pre><code>main.cpp: In function 'int main()':\n\nmain.cpp:6:13: warning: operation on 'p' may be undefined [-Wsequence-point]\n\n     while(*p++ = *(p+1));\n\n            ~^~\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1499839057, "post_id": 45049250, "comment_id": 77072573, "body": "Thanks, so if I put the increment operator inside the while block, the code behavior will be well-defined, right?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1499860904, "post_id": 45049250, "comment_id": 77087330, "body": "@raymai97 if what you mean is <code>while( p[0] = p[1] ) { ++p; }</code> yes that would be well-defined (and infinitely more readable).  I&#39;m not sure whether you intended to increment <code>p</code> in the case that <code>p[0] == 0</code> though; if so then you&#39;d need to write something different"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1499838014, "creation_date": 1499838014, "answer_id": 45049250, "question_id": 45049120, "link": "https://stackoverflow.com/questions/45049120/is-whilep-p1-undefined-behavior/45049250#45049250", "title": "Is `while(*p++ = *(p+1));` undefined behavior?", "body": "<p>It is undefined behaviour, because the following two operations are unsequenced:</p>\n\n<ul>\n<li>The write to <code>p</code> in <code>p++</code></li>\n<li>The read of <code>p</code> in <code>(p+1)</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 0, "creation_date": 1499840325, "post_id": 45049374, "comment_id": 77073228, "body": "If I do it this way, the behavior will be well-defined, right?"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 1, "creation_date": 1499840363, "post_id": 45049374, "comment_id": 77073248, "body": "@raymai97 This is defined way in C"}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1499838528, "creation_date": 1499838528, "answer_id": 45049374, "question_id": 45049120, "link": "https://stackoverflow.com/questions/45049120/is-whilep-p1-undefined-behavior/45049374#45049374", "title": "Is `while(*p++ = *(p+1));` undefined behavior?", "body": "<p>It is <em>undefined behavior</em> as there is sequence point not defined.</p>\n\n<p>Workaround would be <code>while ((*p = *(p + 1)) &amp;&amp; p++);</code> if you want it in single line.</p>\n\n<p>Now you will first set your pointer and if assigned value is <em>non-zero</em>, you will continue with defined sequence to <code>p++</code> statement. If assignment value is <em>zero</em>, while loop will end means string was shifted.</p>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "edited": false, "score": 1, "creation_date": 1499842598, "post_id": 45049398, "comment_id": 77074473, "body": "I think I need a better compiler. My TDM-GCC just wouldn&#39;t tell me this even with <code>-Wall</code>. Thanks for showing me this."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 1, "last_activity_date": 1499840195, "last_edit_date": 1499840195, "creation_date": 1499838640, "answer_id": 45049398, "question_id": 45049120, "link": "https://stackoverflow.com/questions/45049120/is-whilep-p1-undefined-behavior/45049398#45049398", "title": "Is `while(*p++ = *(p+1));` undefined behavior?", "body": "<p>Yes, It is undefined behaviour, because <a href=\"http://rextester.com/l/cpp_online_compiler_clang\" rel=\"nofollow noreferrer\">Clang</a> compiler gives following error:</p>\n\n<pre><code>source_file.cpp:6:13: warning: unsequenced modification and access to 'p' [-Wunsequenced]\n    while(*p++ = *(p+1));\n            ^      ~\n</code></pre>\n\n<p><strong>C11: 6.5 Expressions:</strong></p>\n\n<blockquote>\n  <p>If a side effect on a scalar <strong>object is unsequenced</strong> relative to either\n  a different side effect on the same scalar object or a value\n  computation using the value of the same scalar object, the behavior is\n  <strong>undefined</strong>. If there are multiple allowable orderings of the\n  subexpressions of an expression, the behavior is undefined if such an\n  unsequenced side effect occurs in any of the orderings</p>\n</blockquote>\n"}], "owner": {"reputation": 767, "user_id": 1261956, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AmHrH.png?s=128&g=1", "display_name": "raymai97", "link": "https://stackoverflow.com/users/1261956/raymai97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 45049398, "answer_count": 4, "score": 0, "last_activity_date": 1499854799, "creation_date": 1499837464, "last_edit_date": 1499854799, "question_id": 45049120, "link": "https://stackoverflow.com/questions/45049120/is-whilep-p1-undefined-behavior", "title": "Is `while(*p++ = *(p+1));` undefined behavior?", "body": "<p>I have code that manipulate C-string with one-line <code>while</code> loop statement.\nIt works perfectly when compiled with MSVC2015, but gives different outcome when compiled with TDM-GCC (gcc (tdm-1) 5.1.0).</p>\n\n<p>Here is a minimal example that shows the problem. The code overwrites current char with next char, repeat over and over again until it sets the current char to <code>\\0</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char buf[999] = \"Foobar\", *p = buf;\n    while(*p++ = *(p+1));\n    printf(\"buf = %s\\n\", buf);\n    return 0;\n}\n</code></pre>\n\n<p>When the code is compiled with MSVC2015, the output is <code>buf = oobar</code> as expected. With TDM-GCC, however, the output is <code>buf = obar</code>.</p>\n\n<p>If I change the while statement to <code>while(*p = *(p+1)) { ++p; }</code>, both compiler will give the expected result <code>buf = oobar</code>. It seems that by putting the post-increment operator inside the expression, I have triggered undefined behavior somehow.</p>\n\n<p>My question is, <strong>why the code behaves differently when compiled with different compiler</strong>? Is it wrong (or non-standard) to put increment operator inside a non-trivial <code>while</code> statement? Did I trigger undefined behavior? If so, how should the code behave according to the C standard? If not, who is to blame here? TDM-GCC? MSVC?</p>\n\n<p>UPDATE: For those in future who have the same doubt as me, the answer is: <strong>Yes, the code invokes UB.</strong> The well-defined way is to do like this: <code>while(*p = *(p+1)){++p;}</code></p>\n\n<hr>\n\n<p>Someone asked why would we want to code like this. Here is a scenario where this idiom can be useful.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n\nstatic void EscapeDquote(char * const sz)\n{\n    char *p = sz;\n    BOOL bs = FALSE;\n    for (; *p; ++p)\n    {\n        if (*p == '\\\\') {\n            bs = !bs;\n            continue;\n        }\n        if (*p == '\\\"') {\n            if (bs) {\n                /*\n                    discard prev char (backslash before dquote)\n                    overwrite with next char until null-termi\n                */\n                char *q = --p;\n                /* OLD version, not OK for GCC */\n                /* while(*q++ = *(q+1)); */\n                /* Safer version, works in GCC as well: */\n                while(*q = *(q+1)){++q;}\n            }\n        }\n        bs = FALSE;\n    }\n}\n\nint main()\n{\n    /* \"call \\\"D:\\foo bar.exe\\\" */\n    char szTest[] = \"call \\\\\\\"D:\\\\foo bar.exe\\\\\\\"\";\n    printf(\"Before = %s\\n\", szTest);\n    EscapeDquote(szTest);\n    printf(\"After  = %s\\n\", szTest);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 7044, "user_id": 7670262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zdDY.jpg?s=128&g=1", "display_name": "Azeem", "link": "https://stackoverflow.com/users/7670262/azeem"}, "edited": false, "score": 4, "creation_date": 1499835187, "post_id": 45048574, "comment_id": 77071115, "body": "A successful <code>ping</code> to an IP address doesn&#39;t necessarily mean that a specific port (9734, in your case) is also available for incoming connections or a server is listening on that port. You should try with <code>telnet</code> e.g. <code>telnet &lt;ip&gt; &lt;port&gt;</code>."}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 1, "creation_date": 1499835193, "post_id": 45048574, "comment_id": 77071121, "body": "That port might not be accessible from outside, you need to check if you need to do port forwarding for that"}, {"owner": {"reputation": 967, "user_id": 210623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8760319801c4e5ebec5c4f1489ded9?s=128&d=identicon&r=PG", "display_name": "Cheatah", "link": "https://stackoverflow.com/users/210623/cheatah"}, "edited": false, "score": 2, "creation_date": 1499835299, "post_id": 45048574, "comment_id": 77071159, "body": "Looks like a firewall or router is blocking the traffic. Please check what kind of traffic is sent and returned using e.g. Wireshark. The &quot;connection refused&quot; message indicates that the traffic is actively blocked. This is not a programming problem at al."}, {"owner": {"reputation": 109227, "user_id": 641955, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Hg2nO.jpg?s=128&g=1", "display_name": "janos", "link": "https://stackoverflow.com/users/641955/janos"}, "edited": false, "score": 1, "creation_date": 1499835939, "post_id": 45048574, "comment_id": 77071338, "body": "Try to execute both server and client on the same machine to test your program works. If it does on the same machine but not on different machines, then you know it&#39;s a network issue."}, {"owner": {"reputation": 1, "user_id": 3958945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d13173dc1dab798543c252dd30998c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ponnarasu T", "link": "https://stackoverflow.com/users/3958945/ponnarasu-t"}, "edited": false, "score": 0, "creation_date": 1499836874, "post_id": 45048574, "comment_id": 77071691, "body": "Both  <code>server</code> and <code>client</code> working fine on same machine. Port 9734 is also available for connections. Seems to be issue with the firewall or router."}], "owner": {"reputation": 1, "user_id": 3958945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d13173dc1dab798543c252dd30998c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ponnarasu T", "link": "https://stackoverflow.com/users/3958945/ponnarasu-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1499937632, "creation_date": 1499834363, "last_edit_date": 1499937632, "question_id": 45048574, "link": "https://stackoverflow.com/questions/45048574/connection-refused-error-in-client-and-server-program", "title": "Connection refused error in client and server program", "body": "<p>I have a very simple <code>client</code> and <code>server</code> code:</p>\n\n<p><strong>Server:</strong></p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int server_sockfd, client_sockfd;\n    int server_len, client_len;\n    struct sockaddr_in server_address;\n    struct sockaddr_in client_address;\n\n    server_sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    server_address.sin_family = AF_INET;\n    server_address.sin_addr.s_addr = htonl(INADDR_ANY);\n    server_address.sin_port = htons(9734);\n    server_len = sizeof(server_address);\n\n    bind(server_sockfd, (struct sockaddr *)&amp;server_address, server_len);\n    listen(server_sockfd, 5);\n\n    while ( 1 )\n    {\n        char ch;\n        printf(\"server waiting\\n\");\n        client_len = sizeof(client_address);\n        client_sockfd = accept(server_sockfd, (struct sockaddr *)&amp;client_address, &amp;client_len);\n        read(client_sockfd, &amp;ch, 1);\n        ch += 4;\n        write(client_sockfd, &amp;ch, 1);\n        close(client_sockfd);\n    }\n}\n</code></pre>\n\n<p><strong>Client:</strong></p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int sockfd;\n    int len;\n    struct sockaddr_in address;\n    int result;\n    char ch = 'P';\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = inet_addr(argv[1]);\n    address.sin_port = htons(9734);\n\n    len = sizeof(address);\n    result = connect(sockfd, (struct sockaddr *)&amp;address, len);\n    if(result == \u22121)\n    {\n        perror(\"oops: client1\");\n        return 1;\n    }\n\n    write(sockfd, &amp;ch, 1);\n    read(sockfd, &amp;ch, 1);\n    printf(\"char from server = %c\\n\", ch);\n    close(sockfd);\n\n    return 0;\n}\n</code></pre>\n\n<p>Consider I have executed the <code>server</code> code in machine <code>A(10.18.17.26)</code>, and when I'm trying to execute the <code>client</code> in machine X I'm getting this error:</p>\n\n<pre><code>$ ./client 10.18.17.26\noops: client1: Connection refused\n</code></pre>\n\n<p>But I'm able to <code>ping</code> machine A from machine X and vice versa. Machine <code>A</code> and <code>X</code> were connected in a <code>intranet</code> network.</p>\n\n<p>But if I run the <code>client</code> code on peer servers of machine <code>A</code> it is working fine and generating this output:</p>\n\n<pre><code>$ ./client 10.18.17.26\nchar from server = T\n</code></pre>\n\n<p>Hope I can get a solution here to overcome this. Thanks in advance!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 2, "creation_date": 1499832410, "post_id": 45048210, "comment_id": 77070239, "body": "Please provide an MCVE; as it currently stands, without the file you&#39;re opening, we can&#39;t reproduce your issue."}, {"owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1499832912, "post_id": 45048210, "comment_id": 77070387, "body": "Sorry, amateur here.  I had just made up a random file with lines of text to use called testdata.c.  When I ran it i just put ./a.out testdata.c.  and it printed out the file line by line.  What should I do here?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1499833562, "post_id": 45048210, "comment_id": 77070559, "body": "@Seb: I believe the source code suffices as the input file.  Kaz, you need to count the number of lines you&#39;ve read.  When you&#39;ve read a multiple of 4 lines, you do your prompt and read a response.  Remember you&#39;ll need to get a newline from standard input; it isn&#39;t clear whether you care about what else you get."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1499833785, "post_id": 45048210, "comment_id": 77070638, "body": "Try changing <b>printf(argv[1],line)</b> to <b>printf(&quot;%s\\n&quot;, argv[1]);</b>  Printing line without initialization may cause some kind of lockup on the output"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1499835142, "post_id": 45048210, "comment_id": 77071097, "body": "What exactly is your question? Just &#39;This is where I&#39;m at....thoughts?&#39; is not a question."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1499835546, "post_id": 45048210, "comment_id": 77071224, "body": "@ckruczek It is really hart to understand the problem, but I suppose the question is, how to print not whole file in the <code>while</code> loop, but make pauses    after each 4 lines...."}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "edited": false, "score": 0, "creation_date": 1499835609, "post_id": 45048210, "comment_id": 77071240, "body": "@Kaz ... I hope I understand what the question is about"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500533247, "post_id": 45048210, "comment_id": 77380504, "body": "@JonathanLeffler You&#39;re free to <i>believe</i> what you like, however in this case as the file is open in <i>text</i> mode, we need to be able to see the <i>text</i> to ensure its contents are being read in full. See <a href=\"https://stackoverflow.com/a/20863975/1989425\">the accepted answer to this question</a> for more details..."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "edited": false, "score": 0, "creation_date": 1499835694, "post_id": 45048492, "comment_id": 77071259, "body": "You guys are the greatest.  I got it working but even better I actually understand it.  It&#39;s clicking a little bit, not even close to being half way crappy at programming but it&#39;s starting to sink in!!"}, {"owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "reply_to_user": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "edited": false, "score": 0, "creation_date": 1499836122, "post_id": 45048492, "comment_id": 77071400, "body": "@Kaz Since I guessed the essence of the question, I changed the title of the question (let it be an example about how important are the correct wording)"}], "tags": [], "owner": {"reputation": 6034, "user_id": 4460500, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7TTnO.jpg?s=128&g=1", "display_name": "VolAnd", "link": "https://stackoverflow.com/users/4460500/voland"}, "is_accepted": true, "score": 1, "last_activity_date": 1499835436, "last_edit_date": 1499835436, "creation_date": 1499833897, "answer_id": 45048492, "question_id": 45048210, "link": "https://stackoverflow.com/questions/45048210/change-the-logic-of-text-file-reading-program-to-suspend-output-after-4-lines/45048492#45048492", "title": "Change the logic of text file reading program to suspend output after 4 lines", "body": "<p>I start from strange line of your code, and then I will try to answer the question. </p>\n\n<p>Statement</p>\n\n<pre><code> printf(argv[1], line);\n</code></pre>\n\n<p>make me curious - what you what to print, actually?</p>\n\n<p>Here <code>line</code> is not initialized, and <code>argv[1]</code> can hardly be used as format line.</p>\n\n<p>So I suppose it should be just</p>\n\n<pre><code> printf(argv[1]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code> printf(\"Filename is %s\\n\", argv[1]);\n</code></pre>\n\n<p>As for reading from a file with name provided as <code>argv[1]</code> your code looks able to work, I mean your code read line by line till the end of file and prints these lines at the screen.</p>\n\n<p>If you want to change this logic, e.g. read only 4 first line, add condition with counter, e.g.:</p>\n\n<pre><code>int cnt;\nfor (cnt = 0; cnt &lt; 4; cnt++) // repeat reading 4 times\n{\n    if (fgets(line, 1000, pt) != NULL)\n        printf(\"%s\", line);\n    else\n        break; // stop when reading fails\n}\n</code></pre>\n\n<p>or (I prefer this version)</p>\n\n<pre><code>int cnt = 0;\nwhile (fgets(line, 1000, pt) != NULL &amp;&amp; cnt &lt; 4)\n{\n    printf(\"%s\", line);\n    cnt++;\n}\n</code></pre>\n\n<p>Such changes allows to stop reading (as well as output), so only 4 or less lines will be shown at console screen.</p>\n\n<p>Finally, for case when you want to show file by groups of 4 (or other constant value), consider the following snippet:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\n#define MAX_LINES_TO_PRINT 4\n\nint main(int argc, char *argv[])\n{\n\n    char line[1000];\n    FILE *pt;\n\n    pt = fopen(argv[1], \"r\");\n    if (pt == NULL) return -1;\n    printf(\"Filename is %s\\n\", argv[1]);\n    int cnt = 0;\n    while (fgets(line, 1000, pt) != NULL)\n    {\n        printf(\"%s\", line);\n        cnt++;\n        if (cnt % MAX_LINES_TO_PRINT == 0)\n        {\n            int answer;\n            printf(\"[%d lines printed] Continue? (Y/N) : \", cnt);\n            answer = getchar(); // get user's response\n            while (getchar() != '\\n'); // clean input buffer after getchar\n            if (toupper(answer) == 'N')\n            {\n                break; // stop reading the file\n            }\n        }\n    }\n    fclose(pt);\n    return 0;\n}\n</code></pre>\n\n<p>Try this program with your file and ask question if something is unclear.</p>\n\n<p>Changing the value in the line <code>#define MAX_LINES_TO_PRINT 4</code> you can regulate maximum number of lines printed at once (before the next request to continue), e.g.   <code>#define MAX_LINES_TO_PRINT 15</code> make your program printing up to 15 lines.</p>\n"}], "owner": {"reputation": 29, "user_id": 7572234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ebc80b7ed505f01e062fa5ce9c0b89be?s=128&d=identicon&r=PG&f=1", "display_name": "Kaz", "link": "https://stackoverflow.com/users/7572234/kaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 45048492, "answer_count": 1, "score": 0, "last_activity_date": 1499836021, "creation_date": 1499832170, "last_edit_date": 1499836021, "question_id": 45048210, "link": "https://stackoverflow.com/questions/45048210/change-the-logic-of-text-file-reading-program-to-suspend-output-after-4-lines", "title": "Change the logic of text file reading program to suspend output after 4 lines", "body": "<p>So what I'm basically doing here is using a command line argument to open a file but only open it 4 lines at a time, then a prompt to print out add'l lines.  I can get the file to print out but I cannot figure out how to get it to only print out a few lines at a time.  This is where I'm at....thoughts?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n\nchar line[1000];\nFILE *pt;\n\n  pt = fopen(argv[1], \"r\");\n  if(pt ==  NULL) return -1;\n  printf(argv[1], line);\n  while(fgets(line, 1000, pt) != NULL)\n    printf(\"%s\", line);\n  fclose(pt);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "binary-search-tree"], "comments": [{"owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "edited": false, "score": 2, "creation_date": 1499829991, "post_id": 45047847, "comment_id": 77069608, "body": "This algorithm is very inefficient at best. Why do you need a new array every time? you could keep two pointers to the start and end of the array and change them as you would like!"}, {"owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "edited": false, "score": 1, "creation_date": 1499830004, "post_id": 45047847, "comment_id": 77069613, "body": "Using a debugger is very helpful in such cases."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499830066, "post_id": 45047847, "comment_id": 77069637, "body": "1) <code>int new_size = n - middle;</code> --&gt; <code>int new_size = middle;</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499830497, "post_id": 45047847, "comment_id": 77069749, "body": "2) <code>values[j] &gt; values[j + 1]</code> : <code>values[j + 1]</code> might occurs out-of-bounds error."}, {"owner": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499832427, "post_id": 45047847, "comment_id": 77070244, "body": "@BLUEPIXY:  That should really be posted as an answer --- Rizwan Shirazi can&#39;t mark a comment accepted, so this question will remain &quot;open&quot;."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 3567, "user_id": 4116239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ksElS.png?s=128&g=1", "display_name": "Kevin J. Chase", "link": "https://stackoverflow.com/users/4116239/kevin-j-chase"}, "edited": false, "score": 0, "creation_date": 1499833068, "post_id": 45047847, "comment_id": 77070434, "body": "@KevinJ.Chase I basically think debugging questions are off topics. You can make better answers by adding improvements of code instead."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8293079, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OQ53ayNUx6E/AAAAAAAAAAI/AAAAAAAAAqE/Qc2CXaTguPw/photo.jpg?sz=128", "display_name": "Rizwan Shirazi", "link": "https://stackoverflow.com/users/8293079/rizwan-shirazi"}, "edited": false, "score": 0, "creation_date": 1499871897, "post_id": 45048415, "comment_id": 77096027, "body": "Thank you kindly for your guidance Amrender! Using your suggestion, along with debugging out loud, I was able to get the implementation working."}, {"owner": {"reputation": 6922, "user_id": 6514231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7a1c907bbe5a869276a999ca9cda92?s=128&d=identicon&r=PG&f=1", "display_name": "amrender singh", "link": "https://stackoverflow.com/users/6514231/amrender-singh"}, "reply_to_user": {"reputation": 3, "user_id": 8293079, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OQ53ayNUx6E/AAAAAAAAAAI/AAAAAAAAAqE/Qc2CXaTguPw/photo.jpg?sz=128", "display_name": "Rizwan Shirazi", "link": "https://stackoverflow.com/users/8293079/rizwan-shirazi"}, "edited": false, "score": 0, "creation_date": 1499919136, "post_id": 45048415, "comment_id": 77115187, "body": "@RizwanShirazi if this answer is acceptable, than please mark it as accepted, else this question will remain open."}], "tags": [], "owner": {"reputation": 6922, "user_id": 6514231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7a1c907bbe5a869276a999ca9cda92?s=128&d=identicon&r=PG&f=1", "display_name": "amrender singh", "link": "https://stackoverflow.com/users/6514231/amrender-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1499834286, "last_edit_date": 1499834286, "creation_date": 1499833482, "answer_id": 45048415, "question_id": 45047847, "link": "https://stackoverflow.com/questions/45047847/binary-search-not-returning-last-value-in-array/45048415#45048415", "title": "Binary Search Not Returning Last Value in Array", "body": "<p>In your sort function index out-of-bounds error might occur:\n Change inner for loop to :</p>\n\n<pre><code>for(j =0; j &lt; n-1; j++)  \n</code></pre>\n\n<p>what i interpret is that in your sort function you are trying to implement <strong>Bubble</strong> sort algorithm,it`s correct implementation is :</p>\n\n<pre><code>void sort(int a[], int n){\n   int i,j,temp;\n   for(i =0; i &lt; n-1; i++){\n     for(j =0; j &lt; n-1-i; j++){\n        if(a[j] &gt; a[j+1]){\n          temp = a[j];\n          a[j] = a[j+1];\n          a[j+1] = temp;\n        }\n     }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8293079, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OQ53ayNUx6E/AAAAAAAAAAI/AAAAAAAAAqE/Qc2CXaTguPw/photo.jpg?sz=128", "display_name": "Rizwan Shirazi", "link": "https://stackoverflow.com/users/8293079/rizwan-shirazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 45048415, "answer_count": 1, "score": 0, "last_activity_date": 1499834286, "creation_date": 1499829754, "last_edit_date": 1499830557, "question_id": 45047847, "link": "https://stackoverflow.com/questions/45047847/binary-search-not-returning-last-value-in-array", "title": "Binary Search Not Returning Last Value in Array", "body": "<p>I've been working on implementing a binary search function in C, and it seems to work in every case except in finding the last value in the array being searched. Would anyone please be so kind as to point me in the right direction. Thanks aplenty!</p>\n\n<p>I realize this is likely some awful and inefficient code, (I'm only a few days in, forgive me!) so I'll be taking all of your guidance into consideration going forward.</p>\n\n<pre><code>bool search(int value, int values[], int n)\n{\nint middle = (n / 2);\nif (n &lt; 0) \n{\n    return false;\n} \n\nif (n &lt; 2 &amp;&amp; n &gt; 0) \n{\n    if (value == values[0])\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n} \n\nconst int MAX = 65536;\nint half[MAX];\n\nif (value &gt; values[middle])\n{\n    int new_size = n - middle - 1;\n    for (int i = 0, m = middle + 1; i &lt; new_size; i++, m++)\n    {\n        half[i] = values[m];\n    }\n    return search(value, half, new_size);\n    }\n\nelse if (value &lt; values[middle])\n{\n    int new_size = n - middle;\n    for (int i = 0, m = 0; i &lt; middle; i++, m++)\n    {\n       half[i] = values[m];\n    }\n    return search(value, half, new_size);\n}\n\nelse if (value == values[middle])\n{\n    return true;\n}\nreturn false;\n}\n\nvoid sort(int values[], int n)\n{\nint swap;\n\nfor (int i = 0; i &lt; n; i++)\n{\n    for (int j = 0; j &lt; n; j++)\n    {\n        if (values[j] &gt; values[j + 1])\n        {\n            swap = values[j + 1];\n            values[j + 1] = values [j];\n            values[j] = swap;\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "objective-c", "c", "macos", "notifications"], "comments": [{"owner": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499909301, "post_id": 45047776, "comment_id": 77113046, "body": "I registered for the nsnotification from the sample cocoa application and the observer is notified as expected.  Is this a limitation for console apps or am I doing something wrong ? <a href=\"https://gist.github.com/anonymous/b7f9f9d0402447c49c59e30f0a6e8977\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/b7f9f9d0402447c49c59e30f0a6e8977</a>"}], "answers": [{"comments": [{"owner": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499902568, "post_id": 45056510, "comment_id": 77111437, "body": "<a href=\"https://gist.github.com/anonymous/b7f9f9d0402447c49c59e30f0a6e8977\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/b7f9f9d0402447c49c59e30f0a6e8977</a>  @stefanf  used the NSNotificationCenter, and distributednotification center both doesnt yeild the callback."}, {"owner": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499902642, "post_id": 45056510, "comment_id": 77111458, "body": "I created a simple application using xcode, IS there anything my console app needs to do to start receiving these notifications ?"}, {"owner": {"reputation": 1603, "user_id": 403478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Systn.png?s=128&g=1", "display_name": "Stefanf", "link": "https://stackoverflow.com/users/403478/stefanf"}, "reply_to_user": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499941449, "post_id": 45056510, "comment_id": 77128184, "body": "Added an objective-c sample to your gist."}, {"owner": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499977563, "post_id": 45056510, "comment_id": 77153086, "body": "Thanks for the sample, is there a way to do this without sharedApplication? sharedApplication seems to be singleton and may be shared by other modules in the process.  <a href=\"https://developer.apple.com/documentation/uikit/uiapplication/1622975-sharedapplication?language=objc\" rel=\"nofollow noreferrer\">developer.apple.com/documentation/uikit/uiapplication/&hellip;</a>"}, {"owner": {"reputation": 1603, "user_id": 403478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Systn.png?s=128&g=1", "display_name": "Stefanf", "link": "https://stackoverflow.com/users/403478/stefanf"}, "reply_to_user": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "edited": false, "score": 0, "creation_date": 1499981795, "post_id": 45056510, "comment_id": 77155162, "body": "Found this: <a href=\"https://stackoverflow.com/questions/2154600/run-nsrunloop-in-a-cocoa-command-line-program\" title=\"run nsrunloop in a cocoa command line program\">stackoverflow.com/questions/2154600/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1603, "user_id": 403478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Systn.png?s=128&g=1", "display_name": "Stefanf", "link": "https://stackoverflow.com/users/403478/stefanf"}, "is_accepted": false, "score": 0, "last_activity_date": 1499859116, "creation_date": 1499859116, "answer_id": 45056510, "question_id": 45047776, "link": "https://stackoverflow.com/questions/45047776/installapplicatoneventhandler-nsnotificationcenter-doesnt-notify-events-nsn/45056510#45056510", "title": "InstallApplicatonEventHandler/NSNotificationCenter doesnt notify events (NSN)", "body": "<p>If you just want to be notified when the clock is changed, you can listen to the com.apple.MenuBarClock.ClockNotification.</p>\n\n<pre><code>[[NSDistributedNotificationCenter defaultCenter] addObserver:self selector:@selector(timeChanged:) name:@\"com.apple.MenuBarClock.ClockNotification\" object:nil suspensionBehavior:NSNotificationSuspensionBehaviorDeliverImmediately];\n</code></pre>\n"}], "owner": {"reputation": 384, "user_id": 3279954, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/80709059b82c169c0518d2c0c190ba03?s=128&d=identicon&r=PG&f=1", "display_name": "user3279954", "link": "https://stackoverflow.com/users/3279954/user3279954"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499902731, "creation_date": 1499829344, "last_edit_date": 1499902731, "question_id": 45047776, "link": "https://stackoverflow.com/questions/45047776/installapplicatoneventhandler-nsnotificationcenter-doesnt-notify-events-nsn", "title": "InstallApplicatonEventHandler/NSNotificationCenter doesnt notify events (NSN)", "body": "<p>I want to register for time change notifications in mac os. usng C Api's. I tried the ApplicaitonEventHandler api which seemed to be the api for this case, but I am not getting notified for any events</p>\n\n<p>code shared at,</p>\n\n<p><a href=\"https://gist.github.com/anonymous/a0b3e24e02b844bfb11e2b5d02e47d83\" rel=\"nofollow noreferrer\">https://gist.github.com/anonymous/a0b3e24e02b844bfb11e2b5d02e47d83</a></p>\n\n<p>I registered for all possible event but triggering any of the event doesnt seem to create a notificaion for me.</p>\n\n<p>I am using .mm extension as I want my code exposed as a c style api so and if I can interop with a private objective c class if possible (i.e if objective c object can be instantiated inside a c++ method and a suitable objective c api is available for such notifcations).</p>\n\n<p>[Note] Used the NSNotification suggested below, it doesnt send any notifcations either.</p>\n"}, {"tags": ["c++", "c", "gcc", "compile-time"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 11, "creation_date": 1499829106, "post_id": 45047704, "comment_id": 77069373, "body": "Your program will become unportable if you determine this at compile time."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1499829322, "post_id": 45047704, "comment_id": 77069424, "body": "You can use cmake to fill in a templated header that you include into your program that defines this:  <a href=\"https://cmake.org/cmake/help/v3.0/module/ProcessorCount.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/module/ProcessorCount.html</a>  and <a href=\"https://cmake.org/cmake/help/v3.0/command/configure_file.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/command/configure_file.html</a>  This works on any platform (that cmake supports)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1499847632, "post_id": 45047704, "comment_id": 77077802, "body": "Note that this only retrieves the core count of the PC that the compiler is running on. The compiled EXE can still be run on other PCs with different core counts."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516214719, "post_id": 45047704, "comment_id": 83601204, "body": "-DNCORES=8. How do you expect the compiler to know that on its own?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1542910464, "post_id": 45047704, "comment_id": 93746472, "body": "@Henri the program source won&#39;t necessarily become unportable (he could simply use a macro for example). And the program itself won&#39;t be any ore unportable than without it (ELF / PE executable)."}], "answers": [{"comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 2, "creation_date": 1499829446, "post_id": 45047786, "comment_id": 77069456, "body": "For the method of <code>PROC_COUNT</code> you can substitute in any method proposed here: <a href=\"https://stackoverflow.com/questions/6481005/how-to-obtain-the-number-of-cpus-cores-in-linux-from-the-command-line\" title=\"how to obtain the number of cpus cores in linux from the command line\">stackoverflow.com/questions/6481005/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1499847588, "post_id": 45047786, "comment_id": 77077778, "body": "Note that this only retrieves the core count of the PC that the compiler is running on. The compiled EXE can still be run on other PCs with different core counts."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1516214843, "post_id": 45047786, "comment_id": 83601265, "body": "That would be the build machine, not the target machine, but who cares..."}], "tags": [], "owner": {"reputation": 11451, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "is_accepted": true, "score": 6, "last_activity_date": 1542909782, "last_edit_date": 1542909782, "creation_date": 1499829393, "answer_id": 45047786, "question_id": 45047704, "link": "https://stackoverflow.com/questions/45047704/determine-the-number-of-cores-at-compile-time-in-c-c/45047786#45047786", "title": "Determine the number of cores at compile time in C/C++", "body": "<p>You can query information during the build processes and pass it into the program as a pre-processor definition.</p>\n\n<p><strong>Example</strong></p>\n\n<p><code>g++ main.cpp -D PROC_COUNT=$(grep -c ^processor /proc/cpuinfo)</code></p>\n\n<p>where <code>main.cpp</code> is</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    std::cout &lt;&lt; PROC_COUNT &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>As pointed out in the comments. If the target machine differs from the build machine then you'll need to replace the method <code>grep -c ^processor /proc/cpuinfo</code> with something that queries the number of processors on the target machine. The details would depend on what form of access you have to the target machine during build.</p>\n"}], "owner": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 2, "accepted_answer_id": 45047786, "answer_count": 1, "score": 4, "last_activity_date": 1542909782, "creation_date": 1499828957, "last_edit_date": 1516214462, "question_id": 45047704, "link": "https://stackoverflow.com/questions/45047704/determine-the-number-of-cores-at-compile-time-in-c-c", "title": "Determine the number of cores at compile time in C/C++", "body": "<p>Is there a way to determine how many physical cores a target machine has at compile time in C/C++ in Linux under GCC?</p>\n\n<p>I am aware of other methods like <code>td::thread::hardware_concurrency()</code> in C++11 or <code>sysconf(_SC_NPROCESSORS_ONLN)</code> but I am curious to know if there is actually a way to obtain this information at compile time.</p>\n"}, {"tags": ["c", "list", "struct", "linked-list"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 1, "creation_date": 1499827735, "post_id": 45047499, "comment_id": 77069047, "body": "didn&#39;t you mean <code>list-&gt;tail-&gt;val</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499827753, "post_id": 45047499, "comment_id": 77069049, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16764024/comparing-structure-element-to-int\">Comparing structure element to int</a>"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1499827754, "post_id": 45047499, "comment_id": 77069050, "body": "You are comparing apples with oranges, why you are directly comparing <code>list-&gt;tail</code>, which is pointer, with a specific value? maybe you want the value, <code>list-&gt;tail-&gt;val</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499827814, "post_id": 45047499, "comment_id": 77069064, "body": "<code>if(*(list-&gt;tail) == i){</code> --&gt; <code>if(list-&gt;tail &amp;&amp; list-&gt;tail-&gt;val == i){</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499827815, "post_id": 45047499, "comment_id": 77069065, "body": "The error message is very clear. If you don&#39;t understand the dup, you should consult a good C book about the basics."}, {"owner": {"reputation": 157, "user_id": 6232777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfMwD.jpg?s=128&g=1", "display_name": "Stealing", "link": "https://stackoverflow.com/users/6232777/stealing"}, "reply_to_user": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1499828048, "post_id": 45047499, "comment_id": 77069123, "body": "@Jack yes this is what I was looking for"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1499828494, "post_id": 45047499, "comment_id": 77069224, "body": "<code>printf(&quot;%i&quot;,*(list-&gt;tail))</code> is also not correct anyway."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 6232777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfMwD.jpg?s=128&g=1", "display_name": "Stealing", "link": "https://stackoverflow.com/users/6232777/stealing"}, "edited": false, "score": 0, "creation_date": 1499827922, "post_id": 45047513, "comment_id": 77069090, "body": "Yes this is exactly what I wanted. Why does this work and the previous way not?"}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "reply_to_user": {"reputation": 157, "user_id": 6232777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfMwD.jpg?s=128&g=1", "display_name": "Stealing", "link": "https://stackoverflow.com/users/6232777/stealing"}, "edited": false, "score": 0, "creation_date": 1499828001, "post_id": 45047513, "comment_id": 77069111, "body": "Like I said, @steal_1234: you&#39;re trying to compare things that can&#39;t be compared."}], "tags": [], "owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "is_accepted": false, "score": 0, "last_activity_date": 1499828320, "last_edit_date": 1499828320, "creation_date": 1499827750, "answer_id": 45047513, "question_id": 45047499, "link": "https://stackoverflow.com/questions/45047499/compare-struct-element-to-integer-in-c/45047513#45047513", "title": "Compare struct element to integer in c", "body": "<blockquote>\n  <p>error: invalid operands to binary expression ('element_t' (aka 'struct element') and 'int')</p>\n</blockquote>\n\n<p>This error means that you're trying to compare an <code>element_t</code> to an <code>int</code> and that doesn't make any sense because they aren't comparable to each other.</p>\n\n<blockquote>\n  <p>Why does comparing the dereferenced pointer not work, even though <code>printf(\"%i\",*(list-&gt;tail))</code> prints it out? Is this just the way 'C' works?</p>\n</blockquote>\n\n<p>I don't think <code>printf(\"%i\",*(list-&gt;tail))</code> should work because that would cast an <code>element_t</code> to an <code>int</code> and that wouldn't make sense. Either of these make sense.</p>\n\n<ul>\n<li><code>printf(\"%i\",list-&gt;tail-&gt;val);</code></li>\n<li><code>printf(\"%p\",list-&gt;tail);</code></li>\n</ul>\n\n<blockquote>\n  <p>Is there a way around this?</p>\n</blockquote>\n\n<p>Isn't this what you'd want?</p>\n\n<pre><code>list_t *list;\n\n// ...\n\nif(list-&gt;tail-&gt;val == i){\n    //do something;\n}\n</code></pre>\n\n<p>You get the list's <code>tail</code> and then you get the <code>tail</code>'s <code>val</code>.</p>\n"}], "owner": {"reputation": 157, "user_id": 6232777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfMwD.jpg?s=128&g=1", "display_name": "Stealing", "link": "https://stackoverflow.com/users/6232777/stealing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1246, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499828320, "creation_date": 1499827652, "question_id": 45047499, "link": "https://stackoverflow.com/questions/45047499/compare-struct-element-to-integer-in-c", "title": "Compare struct element to integer in c", "body": "<p>I am working with linked lists. These are the structs I'm working with:</p>\n\n<pre><code>// List element: a list is a chain of these\ntypedef struct element\n{\n  int val;\n  struct element* next;\n} element_t;\n\n// List header - keep track of the first and last list elements\ntypedef struct list\n{\n  element_t* head;\n  element_t* tail;\n} list_t;\n</code></pre>\n\n<p>I need to do something along the lines of this:</p>\n\n<pre><code>int i = 5;\nif(*(list-&gt;tail) == i){\n    //do something;\n}\n</code></pre>\n\n<p>I know that <code>*(list-&gt;tail)</code> dereferences the pointer and returns the last element in the list, however I keep getting this error:</p>\n\n<pre><code>error: invalid operands to binary expression ('element_t' (aka 'struct element') and 'int')\n                if(*(list-&gt;tail) != i){\n</code></pre>\n\n<p>I realize that comparing a struct to an int is invalid. My questions are:</p>\n\n<ol>\n<li><p>Why does comparing the dereferenced pointer not work, even though <code>printf(\"%i\",*(list-&gt;tail))</code> prints it out? Is this just the way 'C' works?</p></li>\n<li><p>Is there a way around this?</p></li>\n</ol>\n\n<p>I understand that this question has been answered <a href=\"https://stackoverflow.com/questions/16764024/comparing-structure-element-to-int\">here</a>, but I don't quite understand how they are comparing the struct variable to the int. Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "string", "projects"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1499823576, "post_id": 45046917, "comment_id": 77068006, "body": "C-String must end with NUL."}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499823702, "post_id": 45046917, "comment_id": 77068043, "body": "I thought it automatically filled the end of the string with null characters so I dont understand what to do to fix the problem"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499823824, "post_id": 45046917, "comment_id": 77068081, "body": "<a href=\"http://en.cppreference.com/w/c/string/byte/strncpy\" rel=\"nofollow noreferrer\">strncpy</a> fills NUL when the actual string is short."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1499823841, "post_id": 45046917, "comment_id": 77068085, "body": "It will null terminate if there&#39;s room, but if your string is longer than the size you give for the buffer it will not."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1499823907, "post_id": 45046917, "comment_id": 77068104, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1453876/why-does-strncpy-not-null-terminate\">Why does strncpy not null terminate?</a>"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1499823965, "post_id": 45046917, "comment_id": 77068114, "body": "<code>strncpy</code> is easy to misuse. Might as well use <code>memcpy</code> and manually add the NUL terminator."}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 0, "creation_date": 1499823997, "post_id": 45046917, "comment_id": 77068124, "body": "BUF = 255. When i look at this first_half would only have 3 characters in it. 3 is less than 255. Just wanted to explain my thinking so you guys would understand how I am confused."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499824182, "post_id": 45046917, "comment_id": 77068170, "body": "If there&#39;s no NUL within the first &quot;length&quot; bytes of the source the destination won&#39;t be NUL terminated."}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 0, "creation_date": 1499824276, "post_id": 45046917, "comment_id": 77068188, "body": "Okay can someone help me fix the problem. I understand it&#39;s not null terminating."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499824398, "post_id": 45046917, "comment_id": 77068226, "body": "Perhaps <code>memcpy</code> the the left half of the source and add your own NUL. <code>strcpy</code> the right half, it will correctly terminate the destination."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499824770, "post_id": 45046917, "comment_id": 77068313, "body": "fix like <a href=\"http://ideone.com/Bws7In\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 0, "creation_date": 1499825371, "post_id": 45046917, "comment_id": 77068445, "body": "BLUEPIXY thank you man."}], "answers": [{"comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499825680, "post_id": 45047138, "comment_id": 77068518, "body": "My issue with this is zeroing the entire buffer may be more work than necessary and if you reuse the buffer you can have incorrectly terminated strings from <code>strncpy</code> again."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499826397, "post_id": 45047138, "comment_id": 77068703, "body": "@Blastfurnace I agree:  <i><code>strncpy</code> is easy to misuse. Might as well use memcpy and manually add the NUL terminator</i>. In the example above the buffer is not reused though."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499830990, "post_id": 45047138, "comment_id": 77069881, "body": "What happens with <code>&quot;123456789&quot;</code> or <code>&quot;apple&quot;</code>?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499865354, "post_id": 45047138, "comment_id": 77090887, "body": "@David C. Rankin All cases are covered! The solutions work for even, odd and empty strings. Thanks for asking."}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 0, "last_activity_date": 1499865240, "last_edit_date": 1499865240, "creation_date": 1499825012, "answer_id": 45047138, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45047138#45047138", "title": "Random letters at the end of my string?", "body": "<p>It is enough if you initialize the buffers with 0 as shown in <code>split1(...)</code></p>\n\n<pre><code>char first_half[BUF] = {0}; // whole buffer is full of zeroes\nchar sec_half[BUF] = {0};\n</code></pre>\n\n<p>Then termination will be automatic.</p>\n\n<p>The uninitialized buffer contains random characters.\nIf buffers are not zeroed the termination is needed as shown in <code>split2(...)</code></p>\n\n<p>The solutions are as close as possible to the original code. They work for even, odd and empty strings.</p>\n\n<p>Please note the symmetry of the solutions with <code>memcpy</code> and <code>strncpy</code>.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define BUF 255\n\nvoid split1(char array[], int bUseMemcpy)\n{\n    /* use zeroed buffers to automatically terminated the copied strings */\n    int length, length2; \n    char first_half[BUF] = {0};\n    char sec_half[BUF] = {0};\n\n    length = strlen( array );\n    length2 = length / 2;\n    length -= length2;\n\n    if(bUseMemcpy)\n        memcpy(  first_half, array, length); \n    else    \n        strncpy( first_half, array, length); \n\n    if(bUseMemcpy)   \n        memcpy(  sec_half, (array + length), length2);\n    else    \n        strncpy( sec_half, (array + length), length2);\n\n    printf( \"&lt;%s&gt;\\n\", first_half );\n    printf( \"&lt;%s&gt;\\n\", sec_half );\n}\n\nvoid split2(char array[], int bUseMemcpy)\n{\n    /* Do not initialize the buffers\n     Use 0 to terminate the buffers after the copy */\n    int length, length2;\n    char first_half[BUF];\n    char sec_half[BUF];  \n\n    length = strlen(array);\n    length2 = length / 2;\n    length -= length2;\n\n    if(bUseMemcpy)\n        memcpy(  first_half, array, length); \n    else    \n        strncpy( first_half, array, length);\n\n    first_half[length]=0; /*zero termination needed, since buffers are not initialized to 0*/\n\n    if(bUseMemcpy)   \n        memcpy(  sec_half, (array + length), length2);\n    else    \n        strncpy( sec_half, (array + length), length2);\n\n    sec_half[length2]=0; // zero termination\n\n    printf( \"&lt;%s&gt;\\n\", first_half );\n    printf( \"&lt;%s&gt;\\n\", sec_half );\n  }\n\nint main(void) {\n    split1(\"123456789\",0);\n    split1(\"\",1);\n\n    split2(\"people\",0);\n    split2(\"1\",1);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;12345&gt;\n&lt;6789&gt;\n&lt;&gt;\n&lt;&gt;\n&lt;peo&gt;\n&lt;ple&gt;\n&lt;1&gt;\n&lt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499840364, "post_id": 45048089, "comment_id": 77073249, "body": "Looks like great minds were thinking alike and hit on the VLA as an attractive alternative. Good to be with you."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1499865941, "post_id": 45048089, "comment_id": 77091358, "body": "@chux Small typo: <code>left_half[l_length] = &#39;\\0&#39;;</code> should be <code>l_half[l_length] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1499866313, "post_id": 45048089, "comment_id": 77091638, "body": "@sg7 Yes.  Code amended."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1499866471, "last_edit_date": 1499866471, "creation_date": 1499831410, "answer_id": 45048089, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45048089#45048089", "title": "Random letters at the end of my string?", "body": "<p>OP's trouble is that <code>first_half[BUF], sec_half[BUF]</code> are not certainly null character terminated - a short coming of <code>strncpy()</code>.</p>\n\n<pre><code>strncpy( first_half, array, length);\n// printf( \"%s\\n\", first_half );\n// alternative limited width print, even if `first_half` lacks a null character.\nprintf( \"%.*s\\n\", length, first_half );\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>trying to split a <strike>word</strike>string in half and put the two halves in two strings.</p>\n</blockquote>\n\n<p>Below is a variable length array (VLA) approach.  </p>\n\n<p>I recommend <code>memcpy()</code> as that is often fastest for long strings and lest error prone than <code>strncpy()</code>  <a href=\"https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45048089?noredirect=1#comment77068114_45046917\">@Blastfurnace</a>.  <a href=\"https://en.wiktionary.org/wiki/YMMV\" rel=\"nofollow noreferrer\">YMMV</a>.</p>\n\n<pre><code>void split(const char array[]) {\n  size_t a_length = strlen(array);\n  size_t l_length = a_length / 2;\n  size_t r_length = a_length - l_length;\n  char l_half[l_length + 1], r_half[r_length + 1];  // + 1 for null character\n\n  memcpy(l_half, array, l_length);\n  l_half[l_length] = '\\0';\n  memcpy(r_half, array + l_length, r_length + 1); // +1 for null character\n\n  printf(\"&lt;%s&gt;\\n\", l_half);\n  printf(\"&lt;%s&gt;\\n\", r_half);\n}\n</code></pre>\n\n<p><code>size_t</code>, an <em>unsigned type</em>, is the right sized integer type to use for array indexing.  <code>int</code> maybe insufficient.  Note that <code>strlen()</code> returns type <code>size_t</code>.</p>\n\n<hr>\n\n<p>If all that is wanted is to print the 2 halves, not much code needed:</p>\n\n<pre><code>void split_print(const char array[]) {\n  int half = strlen(array) / 2;\n  printf(\"%.*s\\n\", half, array);\n  printf(\"%s\\n\", array + half);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499834547, "post_id": 45048274, "comment_id": 77070892, "body": "Not a bad approach, but you can simply use <code>while (l_length--)</code> (it will test false when it hits <code>0</code> anyway <code>:)</code>"}, {"owner": {"reputation": 282, "user_id": 8192755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjqyP.jpg?s=128&g=1", "display_name": "m0h4mm4d", "link": "https://stackoverflow.com/users/8192755/m0h4mm4d"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499839971, "post_id": 45048274, "comment_id": 77073060, "body": "@DavidC.Rankin You are absolutely  right. I edit my code snippet accordingly."}], "tags": [], "owner": {"reputation": 282, "user_id": 8192755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NjqyP.jpg?s=128&g=1", "display_name": "m0h4mm4d", "link": "https://stackoverflow.com/users/8192755/m0h4mm4d"}, "is_accepted": false, "score": 1, "last_activity_date": 1499954819, "last_edit_date": 1499954819, "creation_date": 1499832543, "answer_id": 45048274, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45048274#45048274", "title": "Random letters at the end of my string?", "body": "<p>Since I see that there is a concern about performance, I'd say get rid of <strong>strncpy</strong> altogether.</p>\n\n<pre><code>fist_half[l_length] = '\\0';\nwhile(l_length--)\n  first_half[l_length] = array[l_length];\n</code></pre>\n\n<p>The same method can be applied to the right side with some index modification.\nThis way you can get rid of overhead and <em>HEADACES</em> of <strong>strncpy</strong>.</p>\n\n<p>If you use pointers the code can be even further simplified.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499864489, "post_id": 45048317, "comment_id": 77090180, "body": "Unclear why <code>!*s</code> test needed: <code>split_vla (&quot;&quot;)</code> seems like an OK call.  <code>n = (l % 2 == 0) ? l &#47; 2 : l &#47; 2 + 1;</code> can be simplified to <code>n = (l + 1)&#47;2;</code> in this case. <code>s2[n + 1]</code> is OK yet 1 larger than needed with odd <code>l</code>.  Still a useful post."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1499832886, "creation_date": 1499832886, "answer_id": 45048317, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45048317#45048317", "title": "Random letters at the end of my string?", "body": "<p>One other issue not yet considered is \"<em>How do I handle words with an odd number of characters?</em>\". It's easy to split <code>1234</code> into <code>12</code> and <code>34</code>, but how do you split <code>123</code>? You must decide how to test for odd/even and decide which half gets the extra character (generally the first half, but it's up to you). You should also consider splitting strings of any size (and validate against processing a NULL pointer or empty-string passed to your function).</p>\n\n<p>To handle checking odd/even length, all you need to do is check the 1st-bit of length on little-endian systems, or for complete portability just use <em>modulo</em> <code>2</code>. If the 1st-bit (on little-endian) or the result of <code>len % 2</code> is <code>0</code> it's even, otherwise the length is odd. (if odd, just add <code>+1</code> character to the first half).</p>\n\n<p>If your compiler supports <em>Variable Length Array</em> C99 extensions, the problem becomes simply a matter of declaring the two VLAs and letting the compiler handle the work, e.g.</p>\n\n<pre><code>void split_vla (char *s)\n{\n    if (!s || !*s) {  /* validate parameter not NULL or empty-string */\n        fprintf (stderr, \"error: s NULL or empty-string.\\n\");\n        return;\n    }\n\n    size_t l = strlen (s), \n        n = (l % 2 == 0) ? l / 2 : l / 2 + 1;\n    char s1[n + 1], s2[n + 1];  /* declare VLAs */\n\n    memcpy (s1, s, n);          /* memcpy chars to each half */\n    memcpy (s2, s + n, l - n);\n\n    s1[n] = 0;                  /* affirmatively nul-terminate */\n    s2[l - n] = 0;\n\n    printf (\"s  : %s\\ns1 : %s\\ns2 : %s\\n\", s, s1, s2);\n}\n</code></pre>\n\n<p>If it doesn't, you can always <em>dynamically allocate</em> storage for each of the halfs (and if you choose <code>calloc</code> over <code>malloc</code>, then your storage is initialized to all zeros (providing a <em>nul-byte</em> at the end of each half), e.g.</p>\n\n<pre><code>void split_dyn (char *s)\n{\n    if (!s || !*s) {  /* validate parameter not NULL or empty-string */\n        fprintf (stderr, \"error: s NULL or empty-string.\\n\");\n        return;\n    }\n\n    size_t l = strlen (s),\n        n = (l % 2 == 0) ? l / 2 : l / 2 + 1;\n    char *s1, *s2;\n\n    /* allocate storage for s1 &amp; s2 and validate allocation */\n    if (!(s1 = calloc (n + 1, 1)) || !(s2 = calloc (n + 1, 1))) {\n        fprintf (stderr, \"error: virtual memory exhausted.\\n\");\n        exit (EXIT_FAILURE);\n    }\n\n    memcpy (s1, s, n);          /* memcpy chars to each half */\n    memcpy (s2, s + n, l - n);\n\n    printf (\"s  : %s\\ns1 : %s\\ns2 : %s\\n\", s, s1, s2);\n\n    free (s1);    /* don't forget to free the memory you allocate */\n    free (s2);\n}\n</code></pre>\n\n<p>Either way is fine depending on what your compiler supports. You are free to use <code>malloc</code> and affirmatively <em>nul-terminate</em> as was done in the VLA example. Also be aware that <code>alloca</code> gives similar functionality to what you get with VLAs, but provides a bit more flexibility in the scope for your arrays (not relevant here since the VLAs are declared with function scope but be aware of the additional method).  Give both examples a try and let me know if you have further questions.</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/str_split_half 123456789\ns  : 123456789\ns1 : 12345\ns2 : 6789\n\n$ ./bin/str_split_half 1234567890\ns  : 1234567890\ns1 : 12345\ns2 : 67890\n\n$ ./bin/str_split_half 1\ns  : 1\ns1 : 1\ns2 :\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1500243431, "last_edit_date": 1500243431, "creation_date": 1499866922, "answer_id": 45059406, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string/45059406#45059406", "title": "Random letters at the end of my string?", "body": "<p>There is a simple way to output the string split on 2 separate lines: use <code>printf</code> with the <code>%.*s</code> conversion format. It prints a initial portion of the string argument:</p>\n\n<pre><code>void split(const char *array) {\n    int half = strlen(array) / 2;\n    printf(\"%.*s\\n%s\\n\", half, array, array + half);\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1500243431, "creation_date": 1499823409, "last_edit_date": 1499866787, "question_id": 45046917, "link": "https://stackoverflow.com/questions/45046917/random-letters-at-the-end-of-my-string", "title": "Random letters at the end of my string?", "body": "<pre><code>void split(char array[]) {\n    int length, length2, half; \n    char first_half[BUF], sec_half[BUF];\n\n    length = strlen(array);\n    length2 = length / 2;\n    length -= length2;\n\n    strncpy(first_half, array, length - 1);\n    strncpy(sec_half, (array + length), length2 - 1);\n\n    printf(\"%s\\n\", first_half);\n    printf(\"%s\\n\", sec_half);\n}\n</code></pre>\n\n<p><strong>If input is \"People\", it outputs:</strong>\n<strong>Pe0z\n  plcy etc... Just wondering what's the problem here.</strong></p>\n\n<p>My question is not the same as the question mentioned. I am not trying to insert a word in the middle of another word, I am trying to split a word in half and put the two halves in two strings.</p>\n"}, {"tags": ["java", "c", "eclipse", "multiple-languages"], "comments": [{"owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "edited": false, "score": 0, "creation_date": 1500073618, "post_id": 45046377, "comment_id": 77197022, "body": "Sorry, I&#39;m a little confused here.  Why are you talking about a C main function?  Is your question about calling any C function from Java and it just happens that the function you&#39;re trying to call is named <code>main</code>?  Or do you have a standalone app written in C and want to invoke it from Java?"}, {"owner": {"reputation": 153, "user_id": 8032968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/501e9d8f692ae8b233aafb18b0107571?s=128&d=identicon&r=PG&f=1", "display_name": "CS2020", "link": "https://stackoverflow.com/users/8032968/cs2020"}, "reply_to_user": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "edited": false, "score": 0, "creation_date": 1500088153, "post_id": 45046377, "comment_id": 77199449, "body": "I have an app that&#39;s basically a single function that needs to be written in C rather than Java. I wrote the function and call it from a <code>main</code> C function."}, {"owner": {"reputation": 4371, "user_id": 5196056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e60f19699f947713c612d70b80524a?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoli P", "link": "https://stackoverflow.com/users/5196056/anatoli-p"}, "edited": false, "score": 0, "creation_date": 1500338926, "post_id": 45046377, "comment_id": 77280396, "body": "You can call, from Java, the C <code>main</code> function or that single function you call from <code>main</code>.  To do this you can use JNI, see <a href=\"https://stackoverflow.com/questions/5963266/call-c-function-from-java\" title=\"call c function from java\">stackoverflow.com/questions/5963266/call-c-function-from-jav&zwnj;&#8203;a</a>.  Alternatively, you can build your C app and then invoke it from Java as an external process, see <a href=\"https://stackoverflow.com/questions/5604698/java-programming-call-an-exe-from-java-and-passing-parameters\" title=\"java programming call an exe from java and passing parameters\">stackoverflow.com/questions/5604698/&hellip;</a>."}], "owner": {"reputation": 153, "user_id": 8032968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/501e9d8f692ae8b233aafb18b0107571?s=128&d=identicon&r=PG&f=1", "display_name": "CS2020", "link": "https://stackoverflow.com/users/8032968/cs2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1499824212, "creation_date": 1499818690, "question_id": 45046377, "link": "https://stackoverflow.com/questions/45046377/building-a-project-with-multiple-languages", "title": "Building a project with multiple languages", "body": "<p>I am trying to build a project in Eclipse (Neon.2 Release (4.6.2)) and am trying to use Java and C. I'm not asking how to code in either language, but I'm not sure how to call a C main function passing it a param from a Java class or function. I know projects are made from multiple languages but I'm not sure how it's done and I haven't found a very solid answer from Google.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "sockets", "tcp", "server", "localhost"], "comments": [{"owner": {"reputation": 834, "user_id": 3169277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bb1594eb0c9b20a84b5ad02665c705b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Goodfellow", "link": "https://stackoverflow.com/users/3169277/tom-goodfellow"}, "edited": false, "score": 0, "creation_date": 1499818025, "post_id": 45046080, "comment_id": 77066749, "body": "What error do you get, and from where?"}, {"owner": {"reputation": 9, "user_id": 6923756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1768572746715450/picture?type=large", "display_name": "Kunjan Patel", "link": "https://stackoverflow.com/users/6923756/kunjan-patel"}, "reply_to_user": {"reputation": 834, "user_id": 3169277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bb1594eb0c9b20a84b5ad02665c705b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Goodfellow", "link": "https://stackoverflow.com/users/3169277/tom-goodfellow"}, "edited": false, "score": 0, "creation_date": 1499818618, "post_id": 45046080, "comment_id": 77066875, "body": "No error just hangs keeps waiting to connect"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1499819166, "post_id": 45046080, "comment_id": 77066969, "body": "Assuming the above is the ACTUAL code you used in your test, port_num in serv.c hasn&#39;t been initialized... Can we assume you started &quot;serv&quot; first, and then &quot;client&quot;... which &quot;hung&quot;...???"}, {"owner": {"reputation": 9, "user_id": 6923756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1768572746715450/picture?type=large", "display_name": "Kunjan Patel", "link": "https://stackoverflow.com/users/6923756/kunjan-patel"}, "edited": false, "score": 0, "creation_date": 1499819426, "post_id": 45046080, "comment_id": 77067025, "body": "Yes spot on  ! Ther serv.c and client.c both take port number as argument in --port= option in getopt long"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1499819990, "post_id": 45046080, "comment_id": 77067142, "body": "perhaps your &quot;getopt&quot; handling is the problem... we have no idea because you didn&#39;t include that code... you should provide MCVE [link] (<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>)     Additional suggestion: add a newline to your &quot;printf()&quot; statements, otherwise they may not appear until your program exits."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499820450, "post_id": 45046080, "comment_id": 77067242, "body": "You can simply catch error in server client application by checking return values of send() connect() write() read() or etc.. functions.  see <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xns/syssocket.h.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/7908799/xns/syssocket.h.html</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499820547, "post_id": 45046080, "comment_id": 77067257, "body": "for write () see: <a href=\"http://gd.tuwien.ac.at/languages/c/programming-bbrown/c_075.htm\" rel=\"nofollow noreferrer\">gd.tuwien.ac.at/languages/c/programming-bbrown/c_075.htm</a>"}, {"owner": {"reputation": 9, "user_id": 6923756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1768572746715450/picture?type=large", "display_name": "Kunjan Patel", "link": "https://stackoverflow.com/users/6923756/kunjan-patel"}, "edited": false, "score": 0, "creation_date": 1499823493, "post_id": 45046080, "comment_id": 77067986, "body": "I am checking as u can see but it doesnt send anything"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 1, "creation_date": 1499827688, "post_id": 45046080, "comment_id": 77069031, "body": "Do you see your server listening on given port in output of netstat command?"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1499834848, "post_id": 45046080, "comment_id": 77070999, "body": "Please provide a minimal, <i>runnable</i> demonstration of the problem."}, {"owner": {"reputation": 9, "user_id": 6923756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1768572746715450/picture?type=large", "display_name": "Kunjan Patel", "link": "https://stackoverflow.com/users/6923756/kunjan-patel"}, "edited": false, "score": 0, "creation_date": 1499898534, "post_id": 45046080, "comment_id": 77110289, "body": "ok guys i have put up full code with getopt hope you cn help me now"}], "answers": [{"tags": [], "owner": {"reputation": 834, "user_id": 3169277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bb1594eb0c9b20a84b5ad02665c705b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Goodfellow", "link": "https://stackoverflow.com/users/3169277/tom-goodfellow"}, "is_accepted": false, "score": 1, "last_activity_date": 1499906707, "creation_date": 1499906707, "answer_id": 45069698, "question_id": 45046080, "link": "https://stackoverflow.com/questions/45046080/the-server-on-localhost-doesnt-seen-to-accept-connection/45069698#45069698", "title": "The server on localhost doesnt seen to accept connection", "body": "<p>The \"full code\" you posted clearly isn't full, since it won't compile (hint: client.c doesn't include a single header file). With trivial fixes made, an important clue comes from compiling with warnings enabled:</p>\n\n<pre><code>$ gcc -g serv.c -o serv -Wall -Wextra\nserv.c: In function 'main':\nserv.c:94:71: warning: pointer targets in passing argument 3 of 'accept' differ in signedness [-Wpointer-sign]\n     int newsocket_fd=accept(socket_fd,(struct sockaddr *)&amp;client_addr,&amp;client_len);\n                                                                       ^\nIn file included from serv.c:7:0:\n/usr/include/x86_64-linux-gnu/sys/socket.h:243:12: note: expected 'socklen_t * __restrict__' but argument is of type 'int *'\n extern int accept (int __fd, __SOCKADDR_ARG __addr,\n            ^\nserv.c:79:5: warning: unused variable 'opt' [-Wunused-variable]\n int opt = 0, port_num, client_len;\n     ^\nserv.c:23:36: warning: variable 'port_flag' set but not used [-Wunused-but-set-variable]\n     struct hostent* server;    int port_flag=0;\n                                    ^\nserv.c:23:21: warning: unused variable 'server' [-Wunused-variable]\n     struct hostent* server;    int port_flag=0;\n                     ^\nserv.c:21:9: warning: variable 'port_no' set but not used [-Wunused-but-set-variable]\n     int port_no;\n         ^\nserv.c:20:11: warning: variable 'log' set but not used [-Wunused-but-set-variable]\n     FILE *log;\n           ^\nserv.c:111:1: warning: control reaches end of non-void function [-Wreturn-type]\n }\n ^\nserv.c:85:28: warning: 'port_num' may be used uninitialized in this function [-Wmaybe-uninitialized]\n     server_addr.sin_port = htons(port_num);\n</code></pre>\n\n<p>Look at that last warning - \"port_num\" uninitialised? Look further up:  \"port_no\" initialised but not used? So that argument processing is in vain and you're listening on an arbitrary port - the suggestion of checking \"netstat -l -p\" by @Pras would have shown this too. </p>\n\n<p>As a debugging strategy it's worth compiling with pedantic warnings (and try with a more diagnostic compiler like clang) to look for clues. As a common development strategy reduce the time spent debugging by always enabling warnings and fixing them before even running the code.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7862781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1389df5d49ae586ef6e3f8053d4d58d7?s=128&d=identicon&r=PG&f=1", "display_name": "Turtles4All", "link": "https://stackoverflow.com/users/7862781/turtles4all"}, "is_accepted": false, "score": 0, "last_activity_date": 1500569381, "creation_date": 1500569381, "answer_id": 45220752, "question_id": 45046080, "link": "https://stackoverflow.com/questions/45046080/the-server-on-localhost-doesnt-seen-to-accept-connection/45220752#45220752", "title": "The server on localhost doesnt seen to accept connection", "body": "<p>Since you are asking about the server here is what I noticed. </p>\n\n<p>Both \"port_no\" and \"port_num\" declared, the user input it assigned to \"port_no\" but you are using \"port_num\" when calling htons().    </p>\n\n<p>You have a redeclaration of \u2018server_addr\u2019 after your switch case, and are also missing newsocket_fd</p>\n\n<pre><code>$gcc -o server server.c \nserver.c: In function \u2018main\u2019:\nserver.c:80:24: error: redeclaration of \u2018server_addr\u2019 with no linkage\n     struct sockaddr_in server_addr, client_addr;\n                        ^~~~~~~~~~~\nserver.c:22:24: note: previous declaration of \u2018server_addr\u2019 was here\n     struct sockaddr_in server_addr;\n                        ^~~~~~~~~~~\nserver.c:81:5: error: \u2018socket_fd\u2019 undeclared (first use in this function)\n     socket_fd = socket(AF_INET, SOCK_STREAM, 0);\n     ^~~~~~~~~\nserver.c:81:5: note: each undeclared identifier is reported only once for each function it appears in\nserver.c:94:5: error: \u2018newsocket_fd\u2019 undeclared (first use in this function)\n     newsocket_fd=accept(socket_fd,(struct sockaddr *)&amp;client_addr,&amp;client_len);\n</code></pre>\n\n<p>Either way I removed the switch case and manually assigned the port number to get it running, you need to check your inputs and clean up a few more errors but here is a working example of your code with comments about the changes.</p>\n\n<p>I used netcat as a client to test the connection. </p>\n\n<pre><code>$ netcat 127.0.0.1 5555\ntest message\nI got your message \n</code></pre>\n\n<p>The output code was not changed from what you provided, this is what it will display. use \"\\n\" for a newline.</p>\n\n<pre><code>$gcc -o server server.c \nexample@pc:~$./server\nacceptingHere is the message: test message\n</code></pre>\n\n<p>Here is the modified code:</p>\n\n<pre><code>//serv.c\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;poll.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\nint main(int argc, char *argv[])\n{\n\n    FILE *log;\n    // Added socket_fd and newsocket_fd\n    int socket_fd, newsocket_fd;\n    // use uint16_t for port number    \n    uint16_t port_no;\n    //Removed struct sockaddr_in server_addr;\n    struct hostent* server;    int port_flag=0;\n    int c;\n\n    port_no = 5555;\n    /* removed switch to show server does function\n    while(1)\n    {\n        static struct option long_options[]=\n        {\n            {\"port\",required_argument,0,'p'},\n            {\"log\",required_argument,0,'l'},\n        };\n        c= getopt_long(argc,argv,\"p:l\",long_options,NULL);\n        if(c==-1)\n            break;\n        switch(c)\n        {\n            case 'l':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        log= fopen(optarg,\"w\");\n                    }\n                    else\n                    {\n                        fprintf(stderr,\"log requires argument\\n\");\n                    }\n\n                }\n                break;\n            case 'p':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        port_no= atoi(optarg);\n                        port_flag=1;\n                    }\n                    else{\n                        printf(\"Usage --port=PORT_NUMBER\\n\");\n                    }\n                }\n                else\n                {\n                    printf(\"Usage --port=PORT_NUMBER\\n\");\n                }\n                break;\n            case '?':\n                write(STDOUT_FILENO,\"\\r\",1);\n                exit(1);\n                break;\n            default:\n                break;\n\n        }\n\n    }\n    */\n\n    // Removed port_num\n    int opt = 0, client_len;\n    struct sockaddr_in server_addr, client_addr;\n    socket_fd = socket(AF_INET, SOCK_STREAM, 0);\n    if(socket_fd &lt; 0) { perror(\"Error opening socket\"); exit(1); }\n    memset((char*) &amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    // using port_no in htons\n    server_addr.sin_port = htons(port_no);\n    server_addr.sin_addr.s_addr = INADDR_ANY;\n    if(bind(socket_fd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr)) &lt; 0)\n    {\n        perror(\"Error binding socket\");\n        exit(1);\n    }\n    listen(socket_fd,5);\n    client_len=sizeof(client_addr);\n    newsocket_fd=accept(socket_fd,(struct sockaddr *)&amp;client_addr,&amp;client_len);\n    printf(\"accepting\");\n    if(newsocket_fd&lt;0)\n    {\n        fprintf(stderr,\"error on accept\");\n\n    }\n    char buffer[256];\n    memset(buffer,0,256);\n    int n=read(newsocket_fd,buffer,255);\n    if(n&lt;0)\n    {\n        fprintf(stderr,\"Error reading from socket\");\n\n    }\n    printf(\"Here is the message: %s\\n\",buffer);\n    n=write(newsocket_fd,\"I got your message\",18);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6923756, "user_type": "registered", "profile_image": "https://graph.facebook.com/1768572746715450/picture?type=large", "display_name": "Kunjan Patel", "link": "https://stackoverflow.com/users/6923756/kunjan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1500569381, "creation_date": 1499816234, "last_edit_date": 1499904991, "question_id": 45046080, "link": "https://stackoverflow.com/questions/45046080/the-server-on-localhost-doesnt-seen-to-accept-connection", "title": "The server on localhost doesnt seen to accept connection", "body": "<pre><code>//serv.c\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;poll.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\nint main(int argc, char *argv[])\n{\n\n    FILE *log;\n    int port_no;\n    struct sockaddr_in server_addr;\n    struct hostent* server;    int port_flag=0;\n    int c;\n    while(1)\n    {\n        static struct option long_options[]=\n        {\n            {\"port\",required_argument,0,'p'},\n            {\"log\",required_argument,0,'l'},\n        };\n        c= getopt_long(argc,argv,\"p:l\",long_options,NULL);\n        if(c==-1)\n            break;\n        switch(c)\n        {\n            case 'l':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        log= fopen(optarg,\"w\");\n                    }\n                    else\n                    {\n                        fprintf(stderr,\"log requires argument\\n\");\n                    }\n\n                }\n                break;\n            case 'p':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        port_no= atoi(optarg);\n                        port_flag=1;\n                    }\n                    else{\n                        printf(\"Usage --port=PORT_NUMBER\\n\");\n                    }\n                }\n                else\n                {\n                    printf(\"Usage --port=PORT_NUMBER\\n\");\n                }\n                break;\n            case '?':\n                write(STDOUT_FILENO,\"\\r\",1);\n                exit(1);\n                break;\n            default:\n                break;\n\n        }\n\n    }\n\nint opt = 0, port_num, client_len;\n    struct sockaddr_in server_addr, client_addr;\n    socket_fd = socket(AF_INET, SOCK_STREAM, 0);\n    if(socket_fd &lt; 0) { perror(\"Error opening socket\"); exit(1); }\n    memset((char*) &amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    server_addr.sin_port = htons(port_num);\n    server_addr.sin_addr.s_addr = INADDR_ANY;\n    if(bind(socket_fd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr)) &lt; 0)\n    {\n        perror(\"Error binding socket\");\n        exit(1);\n    }\n    listen(socket_fd,5);\n    client_len=sizeof(client_addr);\n    newsocket_fd=accept(socket_fd,(struct sockaddr *)&amp;client_addr,&amp;client_len);\n    printf(\"accepting\");\n    if(newsocket_fd&lt;0)\n    {\n        fprintf(stderr,\"error on accept\");\n\n    }\n    char buffer[256];\n    memset(buffer,0,256);\n    int n=read(newsocket_fd,buffer,255);\n    if(n&lt;0)\n    {\n        fprintf(stderr,\"Error reading from socket\");\n\n    }\n    printf(\"Here is the message: %s\\n\",buffer);\n    n=write(newsocket_fd,\"I got your message\",18);\n}\n</code></pre>\n\n<p>client.c</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n\n    FILE *log;\n    int port_no;\n    struct sockaddr_in server_addr;\n    struct hostent* server;    int port_flag=0;\n    int c;\n    while(1)\n    {\n        static struct option long_options[]=\n        {\n            {\"port\",required_argument,0,'p'},\n            {\"log\",required_argument,0,'l'},\n        };\n        c= getopt_long(argc,argv,\"p:l\",long_options,NULL);\n        if(c==-1)\n            break;\n        switch(c)\n        {\n            case 'l':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        log= fopen(optarg,\"w\");\n                    }\n                    else\n                    {\n                        fprintf(stderr,\"log requires argument\\n\");\n                    }\n\n                }\n                break;\n            case 'p':\n                if(optarg)\n                {\n                    if(optarg[0]!='-')\n                    {\n                        port_no= atoi(optarg);\n                        port_flag=1;\n                    }\n                    else{\n                        printf(\"Usage --port=PORT_NUMBER\\n\");\n                    }\n                }\n                else\n                {\n                    printf(\"Usage --port=PORT_NUMBER\\n\");\n                }\n                break;\n            case '?':\n                write(STDOUT_FILENO,\"\\r\",1);\n                exit(1);\n                break;\n            default:\n                break;\n\n        }\n\n    }\n    char buffer[256];\n            socket_fd = socket(AF_INET, SOCK_STREAM, 0);\n            if(socket_fd &lt; 0) { perror(\"Error opening socket\"); exit(0); }\n            server = gethostbyname(\"localhost\");\n            if(server == NULL) { fprintf(stderr, \"Cannot find host\"); exit(0); }\n            //Initialize the server address to zero and then correctly assign it\n            memset((char*) &amp;server_addr,0, sizeof(server_addr));\n            server_addr.sin_family = AF_INET;\n            memcpy((char *) &amp;server_addr.sin_addr.s_addr,\n                   (char*) server-&gt;h_addr,\n                   server-&gt;h_length);\n            server_addr.sin_port = htons(port_no);\n\n\nif(connect(socket_fd,(struct sockaddr *) &amp;server_addr, sizeof(server_addr)) &lt; 0) { perror(\"Error connecting\"); exit(0); }\n        printf(\"Please enter the message\");\n        memset(buffer,0,256);\n        fgets(buffer,255,stdin);\n        int n=write(socket_fd,buffer,strlen(buffer));\n        if(n&lt;0)\n        {\n            fprintf(stderr,\"error writing to socket\");\n        }\n        memset(buffer,0,256);\n        n=read(socket_fd,buffer,255);\n        if(n&lt;0)\n        {\n            printf(\"Error reading\");\n        }\n        printf(\"%s\\n\",buffer);}\n</code></pre>\n\n<p>}</p>\n\n<p>I don't know why but the server doesn't seem to accept the socket\nconnection from client. I have tried port numbers more than 1024. Just\ndoesn't work. port number is user entered. Is there a port_no only for which it will work?</p>\n"}, {"tags": ["c", "date", "time", "strptime"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1499810468, "post_id": 45045086, "comment_id": 77064718, "body": "try <code>struct tm timedata1;</code>.. <code>strptime(date1, format1, &amp;timedata1);</code>"}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1499810691, "post_id": 45045086, "comment_id": 77064805, "body": "That did the trick. I don&#39;t understand why, though. To me, <code>timedata1</code> if declared as <code>struct tm *timedata;</code> is the same as <code>&amp;timedata1</code> if <code>timedata1</code> is declared as <code>struct tm timedata;</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499810734, "post_id": 45045086, "comment_id": 77064815, "body": "The <code>strptime()</code> function wants to write in a <code>struct tm</code> that you are supposed to pass to it.  You passed a null pointer; it got upset."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1499811456, "post_id": 45045086, "comment_id": 77065034, "body": "<code>struct tm *timedata1 = 0;</code> defines a pointer, and you initialize it to 0 which is NULL.  Dereferencing a NULL pointer causes the exception."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499811577, "post_id": 45045086, "comment_id": 77065080, "body": "Okay. How come the problem persists even if I don&#39;t initialise <code>timedata1</code> and only declare it? (See my question under Stephan Lechner&#39;s answer)"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499810760, "post_id": 45045210, "comment_id": 77064823, "body": "So the fix is\u2026?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499811149, "post_id": 45045210, "comment_id": 77064945, "body": "@Jonathan Leffler: OP did not ask for the fix :-) ; no - I just had a look whether initialisation is required."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499811358, "post_id": 45045210, "comment_id": 77065005, "body": "Got it, thanks. However, the same problem remains even if I write <code>struct tm *timedata1</code> (no <code>0</code>). I just wonder, why is that so? Because I thought that <code>type *var; var;</code> and <code>type var; &amp;var;</code> were equivalent."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1499811612, "post_id": 45045210, "comment_id": 77065097, "body": "No, they are no equivalent. <code>type *var;</code> reserves memory for a pointer value, which remains uninitialised and &quot;points to somewhere&quot; (actually dereferencing it is undefined behaviour, probably bad access). <code>type var;</code>, in contrast, reserves memory for a value of type <code>type</code>, and <code>&amp;var</code> gives then the address of this (valid) memory."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1499810963, "last_edit_date": 1499810963, "creation_date": 1499810739, "answer_id": 45045210, "question_id": 45045086, "link": "https://stackoverflow.com/questions/45045086/strptime-causes-exc-bad-access/45045210#45045210", "title": "strptime() causes EXC_BAD_ACCESS", "body": "<p>In your code: </p>\n\n<pre><code>struct tm *timedata1 = 0;\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>struct tm *timedata1 = NULL;\n</code></pre>\n\n<p>Consequently, statement</p>\n\n<pre><code>strptime(date1, format1, timedata1);\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>strptime(date1, format1, NULL);\n</code></pre>\n\n<p>i.e., in your code, you pass <code>NULL</code> as argument to <code>strptime</code>, which will dereference the pointer and yield undefined behaviour / bad access.</p>\n\n<p>So you should write something like the following:</p>\n\n<pre><code>struct tm timedata1 = {0};\nstrptime(date1, format1, &amp;timedata1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1500073314, "last_edit_date": 1500073314, "creation_date": 1499811732, "answer_id": 45045389, "question_id": 45045086, "link": "https://stackoverflow.com/questions/45045086/strptime-causes-exc-bad-access/45045389#45045389", "title": "strptime() causes EXC_BAD_ACCESS", "body": "<p>You are passing a null pointer to <code>strptime()</code> as a destination <code>tm</code> structure. This has undefined behavior.  You should instead pass a pointer to a <code>tm</code> structure defined as a local variable:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, const char *argv[]) {\n    char raw_date1[100];\n    char date1[100];\n    struct tm timedata1;\n\n    printf(\"please provide the first date:\");\n    if (fgets(raw_date1, sizeof(raw_date1), stdin)) {\n        strip_newline(date1, raw_date1, sizeof(raw_date1));\n\n        char format1[50] = \"%d-%m-%Y\";\n\n        strptime(date1, format1, &amp;timedata1);\n\n        ...\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note that <code>strptime</code> is not a standard C function, although it is widely available as part of POSIX-1.2001.</p>\n"}], "owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 45045210, "answer_count": 2, "score": 0, "last_activity_date": 1500073314, "creation_date": 1499810063, "question_id": 45045086, "link": "https://stackoverflow.com/questions/45045086/strptime-causes-exc-bad-access", "title": "strptime() causes EXC_BAD_ACCESS", "body": "<p>I'm trying to parse a string into a <code>tm</code> struct using the <code>strptime()</code> function.</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    char raw_date1[100];\n    char date1[100];\n    struct tm *timedata1 = 0;\n\n    printf(\"please provide the first date:\");\n    fgets(raw_date1, sizeof(raw_date1), stdin);\n\n    strip_newline(date1, raw_date1, sizeof(raw_date1));\n\n    char format1[50] = \"%d-%m-%Y\";\n\n    strptime(date1, format1, timedata1);\n</code></pre>\n\n<p>On the last line, the program crashes with the message: <code>EXC_BAD_ACCESS (code=1, address=0x20)</code>.</p>\n\n<p>Why? </p>\n\n<p>Some extra info: According to the debugger, at the time of the crash, <code>date1</code> is <code>23/23/2323</code>, <code>format1</code> is <code>\"%d-%m-%Y\"</code> and <code>timedata1</code> is <code>NULL</code>.</p>\n"}, {"tags": ["c", "function", "for-loop", "struct"], "comments": [{"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 8, "creation_date": 1499808110, "post_id": 45044611, "comment_id": 77063733, "body": "this <code>for (int i; i &lt; 8; i++)</code> --&gt; <code>for (int i = 0; i &lt; 8; i++)</code>"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 2, "creation_date": 1499808345, "post_id": 45044611, "comment_id": 77063839, "body": "Turn up your compiler warning level, it should have emitted a warning about using an uninitialized variable."}, {"owner": {"reputation": 305, "user_id": 6776633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92156df10b094c5327337f530df7e0fd?s=128&d=identicon&r=PG&f=1", "display_name": "w_jay", "link": "https://stackoverflow.com/users/6776633/w-jay"}, "edited": false, "score": 0, "creation_date": 1499808520, "post_id": 45044611, "comment_id": 77063934, "body": "ahhh cheers yeah that did it. As if that didn&#39;t come up as a warning."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1499808680, "post_id": 45044611, "comment_id": 77064010, "body": "@Blastfurnace: Strangely, I did not get a warning on the OP&#39;s code either on Windows using MinGW 4.9.2 or on CentOS Linux using gcc 4.8.5. I used -Wall and -Wextra."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1499809115, "post_id": 45044611, "comment_id": 77064197, "body": "... doing debug builds. I do get the warning building a release build. Weird."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1499809225, "post_id": 45044611, "comment_id": 77064236, "body": "@FredLarson That is odd. I just tested this code on gcc.godbolt.org and saw the same behavior you did."}], "answers": [{"tags": [], "owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "is_accepted": true, "score": 3, "last_activity_date": 1499817406, "last_edit_date": 1499817406, "creation_date": 1499808377, "answer_id": 45044737, "question_id": 45044611, "link": "https://stackoverflow.com/questions/45044611/why-c-function-returning-struct-attribute-returns-0-after-first-loop-iteration/45044737#45044737", "title": "Why C function returning struct attribute returns 0 after first loop iteration?", "body": "<p>In your for loop you have an uninitialised value <code>i</code>. The uninitialised value contains garbage.</p>\n\n<pre><code> for (int i = 0; i &lt; 8; i++)\n</code></pre>\n\n<p>If you have turn on a compiler option for your compiler it would have warned you. Example with <code>gcc -Wall -Werror</code></p>\n\n<blockquote>\n  <p>error: variable 'i' is uninitialized when used here\n  [-Werror,-Wuninitialized]</p>\n\n<pre><code>for (int i; i &lt; 8; i++)\n         ^\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 305, "user_id": 6776633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92156df10b094c5327337f530df7e0fd?s=128&d=identicon&r=PG&f=1", "display_name": "w_jay", "link": "https://stackoverflow.com/users/6776633/w-jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 45044737, "answer_count": 1, "score": 0, "last_activity_date": 1499817406, "creation_date": 1499807828, "question_id": 45044611, "link": "https://stackoverflow.com/questions/45044611/why-c-function-returning-struct-attribute-returns-0-after-first-loop-iteration", "title": "Why C function returning struct attribute returns 0 after first loop iteration?", "body": "<p>So I am quite knew to C so forgive me if this is a obvious question. I can't work out why in the <code>selectedNode</code> function returns a correct value the first time but 0 for all others. It is being accessed from inside a struct by the length attribute. Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct { int x; int y; } VECTOR;\ntypedef struct { VECTOR nodes[8]; int length; } NODE_LIST;\n\nVECTOR Deltas[8] = {{-2, 1}, {-2,-1}, {-1,-2}, { 1,-2},\n                    { 2,-1}, { 2, 1}, { 1, 2}, {-1, 2}};\n\nNODE_LIST NodeSuccessors(VECTOR node)\n{\n    NODE_LIST successors;\n    int count = 0;\n    for (int i; i &lt; 8; i++)\n    {\n        VECTOR N = {node.x + Deltas[i].x, node.y + Deltas[i].y};\n        if ((N.x &lt;  8) &amp;&amp; (N.y &lt;  8) &amp;&amp; (N.x &gt;= 0) &amp;&amp; (N.y &gt;= 0))\n        {\n            successors.nodes[count] = N;\n            count++;\n        }\n    }\n    successors.length = count;\n    return successors;\n}\n\nint SelectedNode(NODE_LIST nodelist)\n{\n    int bestNode = 8; // the most a node could have.\n    int len = 0;\n    for (int n = 0; n &lt; nodelist.length; n++)\n    {\n        len = NodeSuccessors(nodelist.nodes[n]).length;\n        printf(\"%d, \", len);\n        if (len &lt; bestNode)\n        {\n            bestNode = len;\n        }\n    }\n    return bestNode;\n}\n\nint main()\n{\n    VECTOR node = {4,4};\n    NODE_LIST nNodes = NodeSuccessors(node);\n\n    int best = SelectedNode(nNodes);\n    printf(\"\\nresult: %d\\n\", best);\n}\n</code></pre>\n\n<p>The current resulting output is: </p>\n\n<pre><code>8, 0, 0, 0, 0, 0, 0, 0, result: 0\n</code></pre>\n\n<p>Cheers.</p>\n"}, {"tags": ["c", "bluetooth", "debian"], "comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500029467, "post_id": 45044504, "comment_id": 77173302, "body": "<a href=\"https://stackoverflow.com/questions/6494006/how-to-send-and-receive-data-in-android-programming-using-bluetooth-without-pair\" title=\"how to send and receive data in android programming using bluetooth without pair\">stackoverflow.com/questions/6494006/&hellip;</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500029763, "post_id": 45044504, "comment_id": 77173483, "body": "<a href=\"https://electronics.stackexchange.com/questions/47273/is-bluetooth-communication-possible-without-pairing\" title=\"is bluetooth communication possible without pairing\">electronics.stackexchange.com/questions/47273/&hellip;</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1500030269, "post_id": 45044504, "comment_id": 77173818, "body": "<a href=\"http://pages.iu.edu/~rwisman/c490/html/pythonandbluetooth.htm\" rel=\"nofollow noreferrer\">pages.iu.edu/~rwisman/c490/html/pythonandbluetooth.htm</a>    <a href=\"https://stackoverflow.com/questions/14820004/bluetooth-pairing-in-c-bluez-on-linux\" title=\"bluetooth pairing in c bluez on linux\">stackoverflow.com/questions/14820004/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499821534, "post_id": 45044802, "comment_id": 77067511, "body": "I think we must archive DrDobbs materials on BT. I heard this website may be discontinued."}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 3, "last_activity_date": 1499808696, "creation_date": 1499808696, "answer_id": 45044802, "question_id": 45044504, "link": "https://stackoverflow.com/questions/45044504/bluetooth-programming-in-c-secure-connection-and-data-transfer/45044802#45044802", "title": "Bluetooth programming in C - Secure Connection and Data transfer", "body": "<p>There are a few more resources which you could check:</p>\n\n<p><a href=\"http://affix.sourceforge.net/overview.shtml\" rel=\"nofollow noreferrer\"><strong>Bluetooth Protocol Stack for Linux developed by Nokia Research Center</strong></a>.</p>\n\n<p><a href=\"http://www.drdobbs.com/mobile/using-bluetooth/232500828\" rel=\"nofollow noreferrer\"><strong>Using Bluetooth - DrDobbs</strong></a>.</p>\n\n<p><a href=\"http://isplanet.dyndns-office.com:8081/wiki/images/f/f0/Bluetooth_programming_for_Linux.pdf\" rel=\"nofollow noreferrer\"><strong>Bluetooth programming for Linux</strong></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 605, "user_id": 940662, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9795c33498695e4c01e61e1a3a43c8ee?s=128&d=identicon&r=PG", "display_name": "sachin", "link": "https://stackoverflow.com/users/940662/sachin"}, "edited": false, "score": 1, "creation_date": 1499866288, "post_id": 45046480, "comment_id": 77091623, "body": "Thanks for you response. you answered a part of my confusion but the other part i am concerned is authentication for the connection. You too are using socket programming here right ? Is socket programming the only way to implement bluetooth connection? I dont know if its secure as there are no authentication and thats my main concern."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 605, "user_id": 940662, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9795c33498695e4c01e61e1a3a43c8ee?s=128&d=identicon&r=PG", "display_name": "sachin", "link": "https://stackoverflow.com/users/940662/sachin"}, "edited": false, "score": 0, "creation_date": 1500025631, "post_id": 45046480, "comment_id": 77171030, "body": "Yes i just use socket programming for bluetooth communication [Bluetooth socket programming]. Before run these code i paired two system with Ubuntu setting &gt; bluetooth menu. Authentication performed manually not by codes."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 605, "user_id": 940662, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9795c33498695e4c01e61e1a3a43c8ee?s=128&d=identicon&r=PG", "display_name": "sachin", "link": "https://stackoverflow.com/users/940662/sachin"}, "edited": false, "score": 0, "creation_date": 1500029124, "post_id": 45046480, "comment_id": 77173140, "body": "Yes we have other option for bluetooth programming. use especial packages instead of socket programming. see <a href=\"http://blog.kevindoran.co/bluetooth-programming-with-python-3/\" rel=\"nofollow noreferrer\">blog.kevindoran.co/bluetooth-programming-with-python-3</a> but i think this package also use sockets."}, {"owner": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 1, "creation_date": 1537028773, "post_id": 45046480, "comment_id": 91638781, "body": "I need the same work for Windows 10, Can anyone provide me ?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 0, "creation_date": 1537772707, "post_id": 45046480, "comment_id": 91889921, "body": "@AkhzarNazir \u0650You can google some combination like this: &quot;Bluetooth programming in C  windows&quot;."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 0, "creation_date": 1537772763, "post_id": 45046480, "comment_id": 91889940, "body": "@AkhzarNazir :  <a href=\"https://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancedotherprotocol4j.html\" rel=\"nofollow noreferrer\">Windows BT device finding</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 0, "creation_date": 1537773147, "post_id": 45046480, "comment_id": 91890105, "body": "@AkhzarNazir <a href=\"https://docs.microsoft.com/en-us/windows/desktop/bluetooth/bluetooth-programming-with-windows-sockets\" rel=\"nofollow noreferrer\">Windows documentation ob BT</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 0, "creation_date": 1537773265, "post_id": 45046480, "comment_id": 91890151, "body": "@AkhzarNazir <a href=\"https://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancedotherprotocol4g.html\" rel=\"nofollow noreferrer\">example</a>   <a href=\"https://www.winsocketdotnetworkprogramming.com/winsock2programming/winsock2advancedotherprotocol4k.html\" rel=\"nofollow noreferrer\">example2</a>"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "reply_to_user": {"reputation": 503, "user_id": 8080276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nu3y.jpg?s=128&g=1", "display_name": "Akhzar Nazir", "link": "https://stackoverflow.com/users/8080276/akhzar-nazir"}, "edited": false, "score": 0, "creation_date": 1537773795, "post_id": 45046480, "comment_id": 91890377, "body": "@AkhzarNazir <a href=\"https://code.msdn.microsoft.com/windowsdesktop/Bluetooth-Connection-e3263296\" rel=\"nofollow noreferrer\">C++ code</a>"}], "tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 1, "last_activity_date": 1499821683, "last_edit_date": 1499821683, "creation_date": 1499819655, "answer_id": 45046480, "question_id": 45044504, "link": "https://stackoverflow.com/questions/45044504/bluetooth-programming-in-c-secure-connection-and-data-transfer/45046480#45046480", "title": "Bluetooth programming in C - Secure Connection and Data transfer", "body": "<p>First you must do a search for all BT devices.</p>\n\n<p>Second check is the Name of any funded devices match to your specific name or not.</p>\n\n<p>If true perform send to server codes.</p>\n\n<h1>Client</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n// POSIX sys lib: fork, pipe, I/O (read, write)\n#include &lt;unistd.h&gt;\n// superset of unistd, same\n#include &lt;stdlib.h&gt;\n\n//Bluetooth\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/rfcomm.h&gt;\n#include &lt;bluetooth/hci.h&gt;\n#include &lt;bluetooth/hci_lib.h&gt;\n#include &lt;bluetooth/sdp.h&gt;\n#include &lt;bluetooth/sdp_lib.h&gt;\n#include &lt;bluetooth/sco.h&gt;\n\n//socket\n#include &lt;sys/socket.h&gt;\n\n\nint main(int argc, char **argv)\n{\n        int flag=0;\n\n    struct sockaddr_rc addrress = { 0 };\n    int s, status;\n\n    char dest[18]=\"\";// = \"B0:10:41:3F:6E:80\";//My destination address Laptop\n    char namelaptop[20]=\"ss\";\n\n\n    // allocate a socket\n    s = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);\n    ///create a socket\n\n    // set the connection parameters (who to connect to)\n    addrress.rc_family = AF_BLUETOOTH;\n    addrress.rc_channel = (uint8_t) 1;//must use sdp to work in real devices\n    //may this channel not ready\n\n\n    printf(\"Search for BT Devices...\\n\");\n\n///search   \n\n    inquiry_info *ii = NULL;\n    int max_rsp, num_rsp;\n    int dev_id, sock, len, flags;\n    int i;\n\n    char addr[18] = { 0 };\n    char name[248] = { 0 };\n\n    dev_id = hci_get_route(NULL);\n    sock = hci_open_dev( dev_id );\n    if (dev_id &lt; 0 || sock &lt; 0) {\n        perror(\"opening socket\");\n        exit(1);\n    }\n\n    len = 8;\n    max_rsp = 2;\n    flags = IREQ_CACHE_FLUSH;\n    ii = (inquiry_info*)malloc(max_rsp * sizeof(inquiry_info));\n\n    num_rsp = hci_inquiry(dev_id, len, max_rsp, NULL, &amp;ii, flags);\n    if( num_rsp &lt; 0 ) {\n        perror(\"hci_inquiry\");\n    }\n\n    for (i = 0; i &lt; num_rsp; i++) {\n        ba2str(&amp;(ii+i)-&gt;bdaddr, addr);\n        memset(name, 0, sizeof(name));\n        if (hci_read_remote_name(sock, &amp;(ii+i)-&gt;bdaddr, sizeof(name),\n            name, 0) &lt; 0)\n        strcpy(name, \"[unknown]\");\n\n        else{\n        printf(\"\\nFind #%d\\n\",i);\n\n        printf(\"Addr:%s    Name:%s\\n\", addr, name);\n\n        int a=strcmp(name, namelaptop);\n        //printf(\"compare:%d\\n\",a);\n\n        if (!a){   // if name mached \n            str2ba( addr, &amp;addrress.rc_bdaddr );//copy dest--&gt;addr.rc_bdaddr    \n            flag =1;\n        }\n        }\n\n    }\n\n\n/// End Search \n\n\n\n///Connect and send\n\n    if (flag==0){\n        printf(\"Not find dest: %s\\n\",name);\n        exit(0);\n    }\n\n    // connect to server, throw socket s\n    status = connect(s, (struct sockaddr *)&amp;addrress, sizeof(addrress));\n    //successful, connect() returns 0.\n\n    printf(\"connection status: %d\\n\\n\",status);//0 show OK\n\n    // send a message to server\n    if( status == 0 ) {\n        status = write(s, \"hello!\", 6);\n        if (status == 6){\n            printf(\"Send data to server done\\n\");\n        }\n    }\n    else \n        if( status &lt; 0 ){ \n            perror(\"send message to server Failed\\n\");\n    }\n\n    printf(\"Closing socket\\n\");\n\n    ///close the socket\n    close(s);\n\n///End connect and send\n\n\n    free( ii );\n    close( sock );\n\n    return 0;\n}\n</code></pre>\n\n<h1>Server</h1>\n\n<p>just only use</p>\n\n<pre><code>rfcomm-server.c\n</code></pre>\n\n<p>in <a href=\"https://people.csail.mit.edu/albert/bluez-intro/x502.html\" rel=\"nofollow noreferrer\">Albert Huang Good BT tutorial</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bluetooth/bluetooth.h&gt;\n#include &lt;bluetooth/rfcomm.h&gt;\n\nint \nmain(int argc, char **argv)\n{\n    struct sockaddr_rc loc_addr = { 0 }, rem_addr = { 0 };\n    char buf[1024] = { 0 };\n    int s, client, bytes_read;\n    socklen_t opt = sizeof(rem_addr);\n\n    // allocate socket\n    s = socket(AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM);\n\n    // bind socket to port 1 of the first available \n    // local bluetooth adapter\n    loc_addr.rc_family = AF_BLUETOOTH;\n    loc_addr.rc_bdaddr = *BDADDR_ANY;\n    loc_addr.rc_channel = (uint8_t) 1;\n    bind(s, (struct sockaddr *)&amp;loc_addr, sizeof(loc_addr));\n\n    //get local address ?\n    //~ ba2str( &amp;loc_addr.rc_bdaddr, buf );\n    //~ fprintf(stdout, \"local %s\\n\", buf);\n\n    // put socket into listening mode\n    listen(s, 1);\n\n    // accept one connection\n    client = accept(s, (struct sockaddr *)&amp;rem_addr, &amp;opt);\n\n\n    ba2str( &amp;rem_addr.rc_bdaddr, buf );\n    fprintf(stderr, \"accepted connection from %s\\n\", buf);\n\n\n    memset(buf, 0, sizeof(buf));\n\n    // read data from the client\n    bytes_read = read(client, buf, sizeof(buf));\n\n    if( bytes_read &gt; 0 ) {\n        printf(\"received [%s]\\n\", buf);\n    }\n\n    // close connection\n    close(client);\n    close(s);\n    return 0;\n}\n</code></pre>\n\n<p>These two code work for me.</p>\n\n<p>I run <code>rfcomm-client.c</code> in my PC, and <code>rfcomm-server.c</code> on A laptop.\nmy laptop BT name is <code>\"ss\"</code> that i hard coded it on <code>rfcomm-client.c</code> </p>\n\n<p>client send a hello massage and server show it if receives. </p>\n"}], "owner": {"reputation": 605, "user_id": 940662, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/9795c33498695e4c01e61e1a3a43c8ee?s=128&d=identicon&r=PG", "display_name": "sachin", "link": "https://stackoverflow.com/users/940662/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11269, "favorite_count": 5, "answer_count": 2, "score": 5, "last_activity_date": 1499821683, "creation_date": 1499807389, "question_id": 45044504, "link": "https://stackoverflow.com/questions/45044504/bluetooth-programming-in-c-secure-connection-and-data-transfer", "title": "Bluetooth programming in C - Secure Connection and Data transfer", "body": "<p>I am trying write program in C to send/receive data over bluetooth.\nI got a reference to a book by Albert Huang which has sample programs and also good source of information.\nLink: <a href=\"https://people.csail.mit.edu/albert/bluez-intro/index.html\" rel=\"noreferrer\">https://people.csail.mit.edu/albert/bluez-intro/index.html</a>\nThe example 4.2 in (<a href=\"https://people.csail.mit.edu/albert/bluez-intro/x502.html\" rel=\"noreferrer\">https://people.csail.mit.edu/albert/bluez-intro/x502.html</a>) shows the RFCOMM connection using socket programming. Also is there a way to connect using Bluetooth name of the device instead of BD address ?\nHere I dont see how to set up PIN or authentication for the communication over bluetooth connection. Is there a way to implement it. Also is the socket connection secured enough as there is no authentication process?</p>\n\n<p>I am using debian machine and Bluez package for my development.\nTopology I am trying to achieve is - 1 Master/server connected to N(max 7 as per bluetooth protocol spec) clients which may be any embeded simple chip computer and should be able to communicate untill the connection is terminated by either one(source or client).</p>\n\n<p>Has anyone done something similar or may be any reference/s.</p>\n\n<p>I found few refernces on SO but everything pointed me back to the same as described in the book.I couldn't find anything similar to what I was looking for.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks for you time and help.</p>\n"}, {"tags": ["c", "performance", "gnu", "glibc", "memcpy"], "comments": [{"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499805617, "post_id": 45043993, "comment_id": 77062553, "body": "Thanks.  Hmm, wonder what the downvote is about..."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 5, "creation_date": 1499805769, "post_id": 45043993, "comment_id": 77062633, "body": "I&#39;m pretty sure, you&#39;re looking a the wrong <code>memcpy()</code>. The real ones are mostly all assembler. (e.g. <a href=\"https://github.com/lattera/glibc/blob/a2f34833b1042d5d8eeb263b4cf4caaea138c4ad/sysdeps/x86_64/memcpy.S#L56\" rel=\"nofollow noreferrer\">amd64</a>). <code>PAGE_COPY_FWD</code> seems only to exist for <a href=\"https://github.com/lattera/glibc/blob/a2f34833b1042d5d8eeb263b4cf4caaea138c4ad/sysdeps/mach/pagecopy.h#L26\" rel=\"nofollow noreferrer\">Mach</a> (where it calls <code>__vm_copy()</code>). And that one sounds fishily like OS/X <code>vm_copy()</code> that fiddles with the page map to COW-duplicate a page."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "edited": false, "score": 0, "creation_date": 1499805848, "post_id": 45043993, "comment_id": 77062666, "body": "@lurker -- Oops, I called it a function in 1 place.  I&#39;ll go edit it out right now.  But the macro defined in the header file is <i>not</i> PAGE_COPY_FWD, but PAGE_COPY_FWD_MAYBE.  Which in turn <i>calls</i> the PAGE_COPY_FWD macro, which I can&#39;t find."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1499805970, "post_id": 45043993, "comment_id": 77062728, "body": "The implementation of <code>PAGE_COPY_FWD</code> must be in another header file in the files associated with that project."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1499805990, "post_id": 45043993, "comment_id": 77062741, "body": "@dhke Is there any way to get access to an assembler memcpy?  I am just curious if I can use the page copy command directly for my programs."}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1499806056, "post_id": 45043993, "comment_id": 77062769, "body": "@lurker Since you deleted and reposted, I&#39;ll post my answer after your comment.  How can I find <i>any</i> project, where it is defined?  That&#39;s the essence of my question."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499806063, "post_id": 45043993, "comment_id": 77062773, "body": "@Alex macros are not &quot;called&quot;. They are not functions. They are text substitution, before even compiling."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1499806086, "post_id": 45043993, "comment_id": 77062783, "body": "@Alex See link in comment. For glibc, those are all in <code>sysdeps&#47;&lt;arch&gt;&#47;memcpy*.S</code>"}, {"owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1499806153, "post_id": 45043993, "comment_id": 77062820, "body": "@dhke Wow, never knew comments can include links...  And I have a couple thousand combined reputation already...  You can post those links as an answer, and I would accept."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499806588, "post_id": 45043993, "comment_id": 77063027, "body": "@Alex link from a comment with <code>[description](URL)</code> without space padding (or monospace formatting which I used to defeat the link mechanism for this example)."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1499806880, "post_id": 45043993, "comment_id": 77063162, "body": "You can thank Roland McGrath for adding * string/Makefile (distribute): Add pagecopy.h on 1995-02-21 See: <a href=\"https://sourceware.org/git/?p=glibc.git;a=commit;h=67a87b936eaab25dc983e979e5a548256d1a527a\" rel=\"nofollow noreferrer\"><b>glibc commit</b></a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499807566, "post_id": 45043993, "comment_id": 77063479, "body": "@Alex NMDV  Good luck"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499807706, "post_id": 45043993, "comment_id": 77063551, "body": "What for? Fast memory copy is hardware &amp; optimisation dependant as in many compilers it one of the built in functions. So compiler can inline it, call it or replace by number of reads and writes depending on the size  and compiler options"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1499811038, "post_id": 45044657, "comment_id": 77064910, "body": "Where did you find it?"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 0, "last_activity_date": 1499837315, "last_edit_date": 1499837315, "creation_date": 1499808023, "answer_id": 45044657, "question_id": 45043993, "link": "https://stackoverflow.com/questions/45043993/understanding-page-copying-in-c/45044657#45044657", "title": "Understanding page copying in C", "body": "<p>I found this definition of <code>PAGE_COPY_FWD</code></p>\n\n<pre><code>#define PAGE_COPY_FWD(dstp, srcp, nbytes_left, nbytes)  \\ \n     ((nbytes_left) = ((nbytes) - \\\n      (__vm_copy (__mach_task_self (),  \\\n       (vm_address_t) srcp, trunc_page (nbytes), \\\n        (vm_address_t) dstp) == KERN_SUCCESS    \\\n                 ? trunc_page (nbytes) \\\n                 : 0)))\n</code></pre>\n\n<p>Found it here <a href=\"https://www.sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/mach/pagecopy.h\" rel=\"nofollow noreferrer\">https://www.sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/mach/pagecopy.h</a></p>\n"}], "owner": {"reputation": 826, "user_id": 1715099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/623042c376d81e406a14cfd5607b127c?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1715099/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 45044657, "answer_count": 1, "score": 1, "last_activity_date": 1499837315, "creation_date": 1499805223, "last_edit_date": 1499805924, "question_id": 45043993, "link": "https://stackoverflow.com/questions/45043993/understanding-page-copying-in-c", "title": "Understanding page copying in C", "body": "<p>I heard that <code>memcpy</code> was a very efficient algorithm for copying data.  To try to learn some lessons for my code, I decided to study its implementation in GNU.  However, for large memory blocks, it does some checks, and then <a href=\"https://github.com/lattera/glibc/blob/master/sysdeps/generic/pagecopy.h\" rel=\"nofollow noreferrer\">calls a PAGE_COPY_FWD macro</a>-- which I cannot find defined anywhere.</p>\n\n<p>Last link of the source code of mem_cpy says:</p>\n\n<pre><code>System-specific pagecopy.h files should define these macros and then\n  #include this file:\n\n  ...\n\n  PAGE_COPY_FWD (dstp, srcp, nbytes_left, nbytes)\n</code></pre>\n\n<p>Two questions:</p>\n\n<p>1) How can I find the implementation of this macro? (anywhere-- either on my machine, or on someone else's-- even if that means I have to read the assembly code.)</p>\n\n<p>2) What do I have to include to be able to call this macro directly, i.e. without going through memcpy first?</p>\n"}, {"tags": ["c", "debugging", "gdb", "lldb"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499804666, "post_id": 45043826, "comment_id": 77062093, "body": "Sidenote: `return is a statement, not a function. Parenthtising the expression to make it look like a function is missleading and enables typo-errors to pass-by undetected."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499804925, "post_id": 45043826, "comment_id": 77062232, "body": "And if you compile with g++ it is C++, not C. Different languages!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1499805217, "post_id": 45043826, "comment_id": 77062364, "body": "I don&#39;t understand.  You say it is a C file, has a C extension, yet you compile as C++.  C and C++ are different languages.  For example, C++ has <code>std::cout</code>, and C doesn&#39;t.  Try using <code>gcc</code>."}, {"owner": {"reputation": 61, "user_id": 8291753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119e64d3bd6898d5b68cb4c11b35e721?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.W", "link": "https://stackoverflow.com/users/8291753/dr-w"}, "edited": false, "score": 0, "creation_date": 1499805340, "post_id": 45043826, "comment_id": 77062434, "body": "That isn&#39;t the problem: the behavior is identical if I compile with gcc."}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 1, "creation_date": 1499885330, "post_id": 45043826, "comment_id": 77104131, "body": "For lldb, the commands in your command file are getting run in &quot;Asynchronous&quot; mode, which means any command that continues the process you are debugging returns as soon as the process has started up again, and then the next command is fetched.  That&#39;s not working since the &quot;frame variable&quot; commands get executed when the process hasn&#39;t stopped yet.  You can switch modes by putting &#39;script lldb.debugger.SetAsync(False)&#39; in your command file before the first <code>run</code> command.  If I do that your command file works for me."}, {"owner": {"reputation": 61, "user_id": 8291753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119e64d3bd6898d5b68cb4c11b35e721?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.W", "link": "https://stackoverflow.com/users/8291753/dr-w"}, "reply_to_user": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1499896929, "post_id": 45043826, "comment_id": 77109733, "body": "@Jim Ingham Thank you for your reply. I tried adding <code>script lldb.debugger.SetAsync(False)</code> before <code>run</code> (while making no changes to the rest of the command file) but the behavior is still the same; only the first breakpoint is hit. The command I&#39;m using to start LLDB with the command file is <code>lldb --source commands.txt</code> (which I forgot to mention in my question); perhaps I need to start LLDB with some additional parameters?"}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1499906061, "post_id": 45043826, "comment_id": 77112316, "body": "Passing the command file through the -s option works correctly for me too.  I tried using both the llvm.org TOT lldb, and the lldb from the latest Xcode 9 Beta.  I can&#39;t remember fixing anything along these lines recently, but if you have an older lldb it might be worth trying a newer version.  I&#39;m also using macOS and this may be a problem with the Linux port of lldb.  In that case it would be worth reporting this to the llvm.org bug reporter: <a href=\"http://bugs.llvm.org\" rel=\"nofollow noreferrer\">bugs.llvm.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8291753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119e64d3bd6898d5b68cb4c11b35e721?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.W", "link": "https://stackoverflow.com/users/8291753/dr-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1500412310, "creation_date": 1500412310, "answer_id": 45177166, "question_id": 45043826, "link": "https://stackoverflow.com/questions/45043826/both-gdb-and-lldb-failing-to-reliably-execute-breakpoint-commands-in-simple-c-fi/45177166#45177166", "title": "Both GDB and LLDB failing to reliably execute breakpoint commands in simple C file", "body": "<p>I still haven't figured out <em>why</em> gdb and lldb were acting the way they were, but I did devise an alternative approach to accomplish what I want. I wrote a script to communicate with lldb using two named pipes whereby the script's stdout is linked to lldb's stdin and vice-versa, so the script can send lldb commands (<code>frame variable -L</code>, <code>bt</code>, <code>step</code>, etc.) then get lldb's output and parse it. The script can of course loop all it wants, so this bypasses the problem where I couldn't get gdb or lldb command files to loop properly.</p>\n"}], "owner": {"reputation": 61, "user_id": 8291753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119e64d3bd6898d5b68cb4c11b35e721?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.W", "link": "https://stackoverflow.com/users/8291753/dr-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 45177166, "answer_count": 1, "score": 4, "last_activity_date": 1500412310, "creation_date": 1499804523, "last_edit_date": 1499880828, "question_id": 45043826, "link": "https://stackoverflow.com/questions/45043826/both-gdb-and-lldb-failing-to-reliably-execute-breakpoint-commands-in-simple-c-fi", "title": "Both GDB and LLDB failing to reliably execute breakpoint commands in simple C file", "body": "<p>As part of a research project, I am trying to write a gdb command file that outputs certain information on every line of code in arbitrary C source files until the program terminates. This seems easily accomplished with a while loop, outputting whatever data I want within the loop, and then calling \"next\" at the end of the loop. (I know I would want \"step\" to enter function calls; I'm not concerned about that at the moment.)</p>\n\n<p>However, in addition to the data I output on every line, I also want to execute special commands at certain breakpoints. This seems easily accomplished with \"command\". However, I'm encountering a problem where the while loop and breakpoint commands won't both work.</p>\n\n<p>Here is the extremely simple C file I'm working with for testing purposes:</p>\n\n<pre><code>int global;\n\nint main() {\n  int x;\n  x=-1;\n  global = 5;\n  return(0);\n}\n</code></pre>\n\n<p>I compile it with <code>gcc -g -o simple simple.c</code>. Then I run <code>gdb -x commands.txt</code>. If the contents of commands.txt are the following:</p>\n\n<pre><code>set confirm off\n\nexec-file simple\nfile simple\n\nset logging file gdb_output.txt\nset logging on\nset pagination off\n\n#Special commands I want to execute on certain breakpoints\nbreak 5\ncommand\n  echo COMMAND 1 ACTIVATED\\n\nend\n\nbreak 6\ncommand\n  echo COMMAND 2 ACTIVATED\\n\nend\n\nbreak 7\ncommand\n  echo COMMAND 3 ACTIVATED\\n\nend\n\nrun\n\nnext\nnext\nnext\ncontinue\n\nquit\n</code></pre>\n\n<p>...then the contents of gdb_output.txt are the following, as expected:</p>\n\n<pre><code>Breakpoint 1 at 0x4004da: file simple.c, line 5.\nBreakpoint 2 at 0x4004e1: file simple.c, line 6.\nBreakpoint 3 at 0x4004eb: file simple.c, line 7.\n\nBreakpoint 1, main () at simple.c:5\n5     x=-1;\nCOMMAND 1 ACTIVATED\n\nBreakpoint 2, main () at simple.c:6\n6     global = 5;\nCOMMAND 2 ACTIVATED\n\nBreakpoint 3, main () at simple.c:7\n7     return(0);\nCOMMAND 3 ACTIVATED\n8   }\n[Inferior 1 (process 29631) exited normally]\n</code></pre>\n\n<p>However, if I edit the command file to try to execute as a loop, replacing</p>\n\n<pre><code>next\nnext\nnext\ncontinue\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while true\n  next\nend\n</code></pre>\n\n<p>but leaving the rest of the script exactly the same, then the commands I specified for the breakpoints on lines 6&amp;7 never execute, as evidenced by the contents of gdb_output.txt after running the modified command file:</p>\n\n<pre><code>Breakpoint 1 at 0x4004da: file simple.c, line 5.\nBreakpoint 2 at 0x4004e1: file simple.c, line 6.\nBreakpoint 3 at 0x4004eb: file simple.c, line 7.\n\nBreakpoint 1, main () at simple.c:5\n5     x=-1;\nCOMMAND 1 ACTIVATED\n\nBreakpoint 2, main () at simple.c:6\n6     global = 5;\n\nBreakpoint 3, main () at simple.c:7\n7     return(0);\n8   }\n__libc_start_main (main=0x4004d6 &lt;main()&gt;, argc=1, argv=0x7fffffffe128, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffe118) at ../csu/libc-start.c:325\n325 ../csu/libc-start.c: No such file or directory.\n[Inferior 1 (process 29652) exited normally]\ncommands.txt:30: Error in sourced command file:\nThe program is not being run.\n</code></pre>\n\n<p>I know that the loop in its current form is problematic in that it will just keep calling \"next\" until the program terminates (so it never reaches \"quit\" at the bottom of the script), but that doesn't seem like it should stop the breakpoint commands from being run -- yet that is what appears to be happening. (If the breakpoint commands <i>were</i> being executed, I could condition my while loop to terminate once it hit breakpoints set before the C program's exit points.)</p>\n\n<p>Is this a bug in GDB, or am I misunderstanding something? If this construction fundamentally won't work, then is there a way to execute a canned series of GDB commands on every step of a program run until the program terminates, while also executing commands specified at certain breakpoints -- or is this fundamentally impossible with a GDB script?</p>\n\n<p>(My gdb version is 7.11.1 and if it matters, my OS is Linux.)</p>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I decided to give lldb a shot and ran into some more perplexing issues (using the same C file as above, compiled with the same command). Here is my lldb script:</p>\n\n<pre><code>target create --no-dependents --arch x86_64 simple\n\nbreakpoint set --file simple.c --line 5\nbreakpoint command add\n  script print \"COMMAND 1 ACTIVATED\"\nDONE\n\nbreakpoint set --file simple.c --line 6\nbreakpoint command add\n  script print \"COMMAND 2 ACTIVATED\"\nDONE\n\nbreakpoint set --file simple.c --line 7\nbreakpoint command add\n  script print \"COMMAND 3 ACTIVATED\"\nDONE\n\nrun\n\nframe variable x\ncontinue\n\nframe variable x\ncontinue\n\nframe variable x\ncontinue\n\nquit\n</code></pre>\n\n<p>This is exhibiting rather strange behavior. The above version hits the first breakpoint, executes the associated command, then ignores all the following breakpoints. If I comment out <em>just the second breakpoint</em>, its associated command, and the corresponding <code>frame variable x</code>, <code>continue</code>, then breakpoints 1 and 3 both get hit and their corresponding commands are executed. Commenting out only the 1st or 3rd breakpoint and its associated command and <code>frame variable x</code>, <code>continue</code> results in <em>just the first uncommented breakpoint</em> getting hit, and its associated command run. In short, it appears that having breakpoints on two consecutive lines of code causes all breakpoints after the first to be ignored.</p>\n\n<p>Does anyone know what is going on here? Is there a way I can have a breakpoint on every line and have them all get hit? And is this problem in any way related to the gdb issues described above?</p>\n"}, {"tags": ["c", "gmp"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1499804640, "post_id": 45043815, "comment_id": 77062080, "body": "Don&#39;t forget to use long literals."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499805158, "post_id": 45043815, "comment_id": 77062334, "body": "Decimal <code>100000000000000000000000000</code> is hex <code>DCC80CD2E4000000</code> which only fits <code>**unsigned** long long</code> 64 bit type."}, {"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499805571, "post_id": 45043815, "comment_id": 77062533, "body": "I mean that, &quot;n&quot; might be written in gmp"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1499808352, "post_id": 45043815, "comment_id": 77063844, "body": "correct code indentation"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499810935, "post_id": 45043815, "comment_id": 77064874, "body": "You&#39;ll need to do what the compiler does \u2014 break down computations into operations.  Each operation will be a GMP function call.  Initialization, comparison, assignment, computation, convert to string, convert from string, etc.  Find the right function calls and use appropriately."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1499998406, "post_id": 45043815, "comment_id": 77159735, "body": "@MariannaKalwat Could you post the C code for <code>palindrome(...)</code>? Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499885327, "post_id": 45046522, "comment_id": 77104129, "body": "But how to write this &quot;r = r*10 + n%10;&quot; in gmp?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499888295, "post_id": 45046522, "comment_id": 77105670, "body": "@MariannaKalwat &quot;r = r*10 + n%10;&quot; added above."}, {"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499891992, "post_id": 45046522, "comment_id": 77107511, "body": "I didn&#39;t know that it must be in several steps. Thank you ;) But i don&#39;t know what to do with &quot;long long rev(long long n)&quot;?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499899122, "post_id": 45046522, "comment_id": 77110476, "body": "@MariannaKalwat You can return result as <code>mpz_t result</code> as in function <code>myfunction</code> above. I suggest to read more documentation, try to write and debug small programs and analyze gmp sample examples. Process of learning requires great deal of self studies."}, {"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1499981988, "post_id": 45046522, "comment_id": 77155226, "body": "I&#39;ve write in gmp but i&#39;ve two errors and two warnings. What i have to correct in my code?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1500001049, "post_id": 45046522, "comment_id": 77160337, "body": "@MariannaKalwat Full solution in gmp is given. Enjoy!"}, {"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1500035530, "post_id": 45046522, "comment_id": 77177113, "body": "Thank you very much for help ;) I wanted to loop the program to reverse and add until get a palindrome"}, {"owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1500037607, "post_id": 45046522, "comment_id": 77178579, "body": "How can i get a loop in this program to reverse and add until get a palindrome?"}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1500040689, "post_id": 45046522, "comment_id": 77180733, "body": "@MariannaKalwat I take a look at it later on when I get back to my computer...What is inside C function   <code>if(palindrome(n))</code> ? The gmp version is incorrect there is no bool value returned and it does not check anything."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "edited": false, "score": 0, "creation_date": 1500054324, "post_id": 45046522, "comment_id": 77189133, "body": "@MariannaKalwat Full solution added with <code>while</code> loop! Enjoy! :)"}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 1, "last_activity_date": 1500066231, "last_edit_date": 1500066231, "creation_date": 1499820005, "answer_id": 45046522, "question_id": 45043815, "link": "https://stackoverflow.com/questions/45043815/from-c-to-gmp-implementation/45046522#45046522", "title": "From C to GMP implementation", "body": "<p>You need to read some tutorials on GMP.</p>\n\n<p>For example:</p>\n\n<p><a href=\"https://www.cs.colorado.edu/~srirams/courses/csci2824-spr14/gmpTutorial.html\" rel=\"nofollow noreferrer\"><strong>GMP Tutorial</strong></a></p>\n\n<p><a href=\"https://gmplib.org/gmp-man-6.0.0a.pdf\" rel=\"nofollow noreferrer\"><strong>Advanced GMP Tutorial</strong></a></p>\n\n<p><a href=\"http://sepwww.stanford.edu/sep/claudio/Research/Prst_ExpRefl/ShtPSPI/intel/mkl/10.0.3.020/examples/gmp/source/\" rel=\"nofollow noreferrer\"><strong>Code examples per gmp function</strong></a> - my favorite!</p>\n\n<p><a href=\"https://www.mitchr.me/SS/exampleCode/GMP.html\" rel=\"nofollow noreferrer\"><strong>More  GMP Examples</strong></a></p>\n\n<p>Some simple functions in GMP:</p>\n\n<pre><code>mpz_t t; // this is the type of statement is needed to declare a variable\nmpz_init (t); // initialization of a variable\nmpz_set_ui (t, 2); // assignment of 2 to already initialized variable t\nmpz_set_str (t, \"1234\"); // string assignment\nmpz_add (t, a , b); // a + b is assigned to t, that is, t = a + b\nmpz_sub (t, a, b); // subtraction\nmpz_mul (t, a, b); // multiplication\ngmp_printf (\"% Zd \", t); // print output t\n</code></pre>\n\n<p>A simple GMP program:</p>\n\n<pre><code>#include &lt;gmp.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n\nint main(){\n\n  /* The basic operation is to initialize the number */\n  /* 1. Initialize the number r */\n  mpz_t r;\n  mpz_init(r);\n  mpz_set_ui(r,15);   /*r = 15 now */\n\n  mpz_mul_ui(r,r,10); /* r = r * 10 */\n\n  printf (\" r = \");\n  mpz_out_str(stdout,10,r);\n  printf (\"\\n\");\n\n}\n</code></pre>\n\n<p><code>r = r * 10 + n % 10;</code>  has to be done in steps:</p>\n\n<pre><code>mpz_mul_ui(r,r,10); /* r = r * 10 */\n\nmpz_mod_ui(n,n,10); /* n = n % 10 */\n\nmpz_add(r,r,n);     /* r = r + n */ /* r = r * 10 + n % 10 */\n</code></pre>\n\n<p><code>mpz_t</code> variable can be used as a function parameter.</p>\n\n<p>Quoting from documentation:\nWhen a variable of type <code>mpz_t</code> is used as a function parameter, it's effectively a call-by-reference, meaning anything the function does to it will be be done to the original in the caller. When a function is going to return an <code>mpz_t</code> result, it should provide a separate parameter or parameters that it sets, like the GMP library functions do. A return of an <code>mpz_t</code> doesn't return the object, only a pointer to it, and this is almost certainly not what you want. All this applies to <code>mpq_t</code> and <code>mpf_t</code> too.</p>\n\n<p>Here's an example function accepting an <code>mpz_t</code> parameter, doing a certain calculation, and returning a result.</p>\n\n<pre><code>void\nmyfunction (mpz_t result, mpz_t param, unsigned long n)\n{\n  unsigned long  i;\n\n  mpz_mul_ui (result, param, n);\n  for (i = 1; i &lt; n; i++)\n    mpz_add_ui (result, result, i*7);\n}\n\nint\nmain (void)\n{\n  mpz_t  r, n;\n  mpz_init (r);\n  mpz_init_set_str (n, \"123456\", 0);\n\n  myfunction (r, n, 20L);\n  mpz_out_str (stdout, 10, r); printf (\"\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<p>This example will work if result and param are the same variable, just like the library functions. But sometimes this is tricky to arrange, and an application might not want to bother for its own subroutines.</p>\n\n<p>Example: How to reverse the number using GMP:</p>\n\n<pre><code>void rev(mpz_t r, mpz_t param, mpz_t n)\n{\n    mpz_t nm10;        /* introduce temporary variable to hold n%10 result */ \n    mpz_init (nm10);  /* init */\n\n    mpz_set_ui(r,0);  /* set r to 0 */\n\n    /*    Call mpz_cmp_ui to compare op1 and op2.                        */\n    /*    Return a positive value if op1 &gt; op2, zero if op1 = op2,       */\n    /*            or a negative value if op1 &lt; op2                       */\n    /*                                                                   */\n\n    while ( mpz_cmp_ui(n,0) &gt; 0)  /*    Call mpz_cmp_ui to compare op1 and op2 */\n    {\n        mpz_mul_ui(r,param,10);  /* r = r * 10  */\n\n        mpz_mod_ui(nm10,n,10);   /* nm10 = n%10 */\n\n        mpz_add(r,r,nm10);       /* r = r*10 + n%10; */\n\n        mpz_div_ui(n,n,10);      /* n = n/10 */\n    }\n}\n\nvoid reverseAdd(mpz_t n)\n{\n       mpz_t r;\n       mpz_init (r);\n\n       mpz_set_ui(r,0);\n\n       mpz_out_str(stdout,10,n); printf (\"  n: input value \\n\");\n\n       rev(r, r, n);\n\n       mpz_out_str(stdout,10,n);\n       printf (\"      n: after calculations value \\n\");\n\n       mpz_out_str(stdout,10,r);\n       printf (\"  r: reversed value\\n\");\n\n}\n\nint main()\n{\n    mpz_t l;\n    mpz_init (l);\n\n    printf(\"Give number to analyze:\");\n    gmp_scanf(\"%Zd\",l);\n\n    reverseAdd(l);\n\n    return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code> Give number to analyze:12345\n 12345  n: input value \n 0      n: after calculations value \n 54321  r: reversed value\n</code></pre>\n\n<p>Example: Check if given number is a Palindrome:</p>\n\n<pre><code>void rev(mpz_t r, mpz_t param, mpz_t n)\n{\n    mpz_t nm10;        /* introduce temporary variable to hold n%10 result */\n    mpz_init (nm10);  /* init */\n\n    mpz_set_ui(r,0);  /* set r to 0 */\n\n    while ( mpz_cmp_ui(n,0) &gt; 0)  /*    Call mpz_cmp_ui to compare op1 and op2 */\n    {\n        mpz_mul_ui(r,param,10);  /* r = r * 10  */\n        mpz_mod_ui(nm10,n,10);   /* nm10 = n%10 */\n        mpz_add(r,r,nm10);       /* r = r*10 + n%10; */\n        mpz_div_ui(n,n,10);      /* n = n/10 */\n    }\n}\n\nvoid analyze(mpz_t n)\n{\n       mpz_t r;\n       mpz_init (r);\n\n       mpz_t input;\n       mpz_init (input);\n\n       mpz_set(input, n);  /* remember the input */\n\n       mpz_out_str(stdout,10,n);\n       printf (\"  n: input value \\n\");\n\n       rev(r, r, n);\n\n       mpz_out_str(stdout,10,r);\n       printf (\"  r: reversed value value\\n\");\n\n       if (  mpz_cmp(input,r) == 0) {\n            mpz_out_str(stdout,10,input);\n            printf(\"  is a Palindrome! \\n\");\n       }\n       else{\n            printf(\"The input number was not a Palindrome.\\n\");\n       }\n }\n\nint main()\n{\n    mpz_t l;\n    mpz_init (l);\n\n    printf(\"Give number to analyze: \");\n    gmp_scanf(\"%Zd\",l);\n\n    analyze(l);\n\n    return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Give number to analyze: 123454321\n123454321  n: input value \n123454321  r: reversed value value\n123454321  is a Palindrome!\n</code></pre>\n\n<p><strong>This is equivalent of the Marianna's C code using loop and GMP implementation:</strong></p>\n\n<pre><code>void rev(mpz_t r, mpz_t n)\n{\n    mpz_t nm10;       /* introduce temporary variable to hold n%10 result */\n    mpz_init (nm10);  /* init */\n\n    mpz_t nn;\n    mpz_init (nn);   /* init */\n\n    mpz_set(nn, n);   /* do not use n  directly, use nn for divisions '/' */\n    mpz_set_ui(r,0);  /* set r to 0! */\n\n    while ( mpz_cmp_ui(nn,0) &gt; 0)  /*    Call mpz_cmp_ui to compare op1 and op2 */\n    {\n        mpz_mul_ui(r,r,10);      /* r = r * 10  */\n        mpz_mod_ui(nm10,nn,10);  /* nm10 = n%10 */\n        mpz_add(r,r,nm10);       /* r = r*10 + n%10; */\n        mpz_div_ui(nn,nn,10);    /* n = n/10 */\n    }\n}\n\nbool palindrome(mpz_t r, mpz_t n)\n{\n    /* calculate the reverse number */\n    rev(r, n);\n    return( (mpz_cmp(r,n) == 0));\n}\n\nvoid analyzeAdd(mpz_t n)\n{\n    mpz_t r;\n    mpz_init (r);\n\n    mpz_set_ui(r,0);  /* set r to 0! */\n\n/* loop */\n\n    while (1)\n    {\n       int compare = mpz_cmp_ui(n,100000000000000);\n        /*    Return a positive value if op1 &gt; op2, zero if op1 = op2,       */\n        /*    or a negative value if op1 &lt; op2                               */\n\n       if (compare &gt; 0)\n       {\n         printf(\"Not a palindrome!\\n\");\n         break; /* break the while loop */\n       }\n\n       rev(r, n); /* r is returned, n is not modified */\n\n       printf(\"stage:  \");\n       mpz_out_str(stdout,10,n);\n       printf(\" + \");\n       mpz_out_str(stdout,10,r);\n       printf(\"\\n\");\n\n       /*  !!!  */\n       mpz_add(n,n,r); /*   n = n + r; */\n\n\n       if (palindrome(r,n))\n       {\n            printf(\"Palindrome: \");\n            mpz_out_str(stdout,10,n);\n            printf(\"\\n\");\n\n            break;\n        }\n        else if ( mpz_cmp_ui(n,100000000000000) &gt; 0 )\n        {\n            printf(\"Not a palindrome\\n\");\n        }\n    }/*while*/\n}\n\nint main()\n{\n    mpz_t l;\n    mpz_init (l);\n\n    printf(\"Give number to analyze: \");\n    gmp_scanf(\"%Zd\",l);\n\n    analyzeAdd(l);\n\n    return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<p>a)</p>\n\n<pre><code>Give number to analyze: 77\nstage:  77 + 77\nstage:  154 + 451\nstage:  605 + 506\nPalindrome: 1111\n</code></pre>\n\n<p>b)</p>\n\n<pre><code>Give number to analyze: 123456788999000 \nNot a palindrome!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 1, "last_activity_date": 1500254089, "creation_date": 1500254089, "answer_id": 45134755, "question_id": 45043815, "link": "https://stackoverflow.com/questions/45043815/from-c-to-gmp-implementation/45134755#45134755", "title": "From C to GMP implementation", "body": "<p>To print <code>mpz_t</code> variables use <code>gmp_printf</code>. GMP adds types <code>\u2018Z\u2019</code>, <code>\u2018Q\u2019</code> and <code>\u2018F\u2019</code> for <code>mpz_t, mpq_t and mpf_t</code> respectively.</p>\n\n<pre><code>The GMP types are:\n\nF   mpf_t, float conversions\nQ   mpq_t, integer conversions\nM   mp_limb_t, integer conversions\nN   mp_limb_t array, integer conversions\nZ   mpz_t, integer conversions\n</code></pre>\n\n<p><code>gmp_printf</code> accepts format strings similar to the standard C <code>printf</code> (see <a href=\"http://www.gnu.org/software/libc/manual/html_node/Formatted-Output.html#Formatted-Output\" rel=\"nofollow noreferrer\"><strong>Formatted Output</strong></a> in The GNU C Library Reference Manual). </p>\n\n<p>Referring to your last question and your posted program, you can use <code>gmp_printf</code> to print <code>l</code>.\n See the program modified below: </p>\n\n<pre><code>//....\n\nint main()\n{\n   int k;\n    mpz_t l;\n    mpz_t n;\n    mpz_init (n);  /* remember to init mpz variables */\n    mpz_init (l);\n\n    printf(\"Number to analysis: \");\n    gmp_scanf(\"%Zd\",l);\n\n    gmp_printf (\"%s the mpz number %Zd\\n\", \"You have entered\", l);\n\n    do\n    {\n        mpz_set(n, l);\n        analyzeAdd(n);\n        mpz_add_ui(l,l,1);\n\n     }while(false);\n\n    gmp_printf (\"%s is equal %Zd\\n\", \"Now the n\", n);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Number to analysis: 123321\nYou have entered the mpz number 123321\nNow the n is equal 246642\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "is_accepted": false, "score": 0, "last_activity_date": 1500323350, "creation_date": 1500323350, "answer_id": 45153144, "question_id": 45043815, "link": "https://stackoverflow.com/questions/45043815/from-c-to-gmp-implementation/45153144#45153144", "title": "From C to GMP implementation", "body": "<p>I wanted that program would show OUTPUT when k > 20 like this, for example:</p>\n\n<pre><code>Number: 89 Number of stage: 24 Palindrome: 8813200023188\n</code></pre>\n\n<p>And it's ok because k = 24.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;math.h&gt;\n#include &lt;gmp.h&gt;\n\nvoid rev(mpz_t r, mpz_t n)\n{\n    mpz_t nm10;\n    mpz_init (nm10);\n\n    mpz_t nn;\n    mpz_init (nn);\n\n    mpz_set(nn, n);\n    mpz_set_ui(r,0);\n\n    while ( mpz_cmp_ui(nn,0) &gt; 0)\n    {\n        mpz_mul_ui(r,r,10);      /* r = r * 10  */\n        mpz_mod_ui(nm10,nn,10);  /* nm10 = n%10 */\n        mpz_add(r,r,nm10);       /* r = r*10 + n%10; */\n        mpz_div_ui(nn,nn,10);    /* n = n/10 */\n    }\n}\n\nbool palindrome(mpz_t r, mpz_t n)\n{\n    rev(r, n);\n    return( (mpz_cmp(r,n) == 0));\n}\n\nvoid analyzeAdd(mpz_t n)\n{\n    mpz_t l;\n    mpz_t r;\n    mpz_init (r);\n\n    mpz_set_ui(r,0);\n\n    int k = 0;\n\n    while (1)\n    {\n\n       k = k + 1;\n\n       if (k &gt; 400)\n       {\n         /*printf(\"It's not a palindrome!\\n\");*/\n         break;\n       }\n\n       rev(r, n);\n\n       /*printf(\"Krok:  \");\n       mpz_out_str(stdout,10,n);\n       printf(\" + \");\n       mpz_out_str(stdout,10,r);\n       printf(\"\\n\");*/\n\n\n       mpz_add(n,n,r); /*   n = n + r; */\n\n\n       if (palindrome(r,n))\n       {\n            if (k &gt; 20) {\n            printf(\"Number of stage: %d \",k);\n            printf(\"Palindrome: \");\n            mpz_out_str(stdout,10,n);\n\n\n            printf(\"\\n\");\n            }\n\n            break;\n        }\n    }\n}\n\nint main()\n{\n    mpz_t l;\n    mpz_t n;\n    mpz_init (l);\n\n    printf(\"Give number: \");\n    gmp_scanf(\"%Zd\",l);\n\ndo\n{\n       mpz_set(n, l);\n       gmp_printf(\"Number: %Zd \\n\",l);\n       analyzeAdd(n);\n       mpz_add_ui(l,l,1);\n\n\n}while(1);\n\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5953250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63176e4bb0f2f03976697b18bb1e7f46?s=128&d=identicon&r=PG&f=1", "display_name": "Marianna Kalwat", "link": "https://stackoverflow.com/users/5953250/marianna-kalwat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 45134755, "answer_count": 3, "score": -4, "last_activity_date": 1500323350, "creation_date": 1499804452, "last_edit_date": 1500056671, "question_id": 45043815, "link": "https://stackoverflow.com/questions/45043815/from-c-to-gmp-implementation", "title": "From C to GMP implementation", "body": "<p>I would ask you how this code written in c would look in GMP. I tried something to write but the library is hard to understand. I don't know how to write operation: <code>r = r*10 + n%10;</code> in gmp. I would be very grateful for help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;gmp.h&gt;\n\nlong long rev(long long n)\n{\n    long long r = 0;\n    while (n &gt; 0)\n    {\n        r = r*10 + n%10;\n        n = n/10;\n    }\n    return r;\n}\n\nbool palindrome(long long n)\n{\n    return (rev(n) == n);\n}\n\nvoid reverseAdd(long long n)\n{\n    long long r=0;\n    while (n &lt;= 100000000000000)\n    {\n        r = rev(n);\n        printf(\"stage: %lld + %lld\\n\",n,r); \n\n        n = n + r;\n\n        if (palindrome(n))\n        {\n            printf(\"Palindrom: %lld\\n\",n);\n            break;\n        }\n        else if (n &gt; 100000000000000)\n        {\n            printf(\"Not a palindrome\\n\");\n        }\n    }\n}\n\n\nint main()\n{\n    long long l;\n\n    printf(\"Give the number to analyze:\");\n    scanf(\"%lld\",&amp;l);\n    reverseAdd(l);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "assembly", "hook", "trampolines"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1499821310, "post_id": 45042998, "comment_id": 77067452, "body": "The hook and trampoline can&#39;t be written in pure C alone, some low-level assembly is required, since the call stack has to be manipulated directly. You can&#39;t avoid that. There are plenty of hooking libraries available that handle this kind of stuff for you.  Why not use one of them?"}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1499823728, "post_id": 45042998, "comment_id": 77068049, "body": "@RemyLebeau I was under the impression you can do it using memcpy and memset? At least one of the programmers I&#39;ve talked to implied that."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1499825476, "post_id": 45042998, "comment_id": 77068468, "body": "Sure, if you allocate a block of memory and memcpy the raw assembly instructions into it at runtime.  But that does not change the fact that the hook and transpoline are still using assembly instructions at runtime, they are not written in pure C."}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1499827110, "post_id": 45042998, "comment_id": 77068877, "body": "@RemyLebeau That is essentially what I am trying to do, yes."}], "answers": [{"comments": [{"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499872968, "post_id": 45061320, "comment_id": 77096899, "body": "I will test this out. Thank you."}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499876024, "post_id": 45061320, "comment_id": 77098991, "body": "Can you please explain the lines <code>uint32_t jmpDest = (uint32_t)originalFunc + 5; &#47;* Skip original prologue *&#47;     uint32_t jmpSrc = (uint32_t)trampoline + 10; &#47;* Starting after the JMP *&#47;</code> I&#39;m not sure exactly how you got the +10 from trampoline?"}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "reply_to_user": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499877325, "post_id": 45061320, "comment_id": 77099678, "body": "@Annabelle The displacement of the JMP instruction is relative to <code>EIP</code> <i>after</i> the instruction executes (<a href=\"https://c9x.me/x86/html/file_module_x86_id_147.html\" rel=\"nofollow noreferrer\">see here</a>). <code>+10</code> is the distance in bytes from the beginning of the trampoline function to the end of the JMP instruction. (Or you can just think of it as the total size of the trampoline, <code>5+5</code>)"}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "reply_to_user": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499878530, "post_id": 45061320, "comment_id": 77100332, "body": "@Annabelle I&#39;ve added a diagram to the answer, hopefully that makes it more clear what&#39;s going on."}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499880055, "post_id": 45061320, "comment_id": 77101099, "body": "Right! Okay that +10 makes sense. I knew it was 5+5 is size of trampoline, but for some reason I did not make the connection that, that +10 is the 5+5 I already knew about."}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499911065, "post_id": 45061320, "comment_id": 77113457, "body": "Could you please take a look at my code and explain why it is not letting the original patched function run afterwards, and how to fix it? Accepted by the way!"}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "reply_to_user": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1499914216, "post_id": 45061320, "comment_id": 77114153, "body": "@Annabelle Looks like you missed some asterisks -- <code>unsigned char</code> should be <code>unsigned char *</code> (I prefer just using <code>uint32_t</code> for this reason)"}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "reply_to_user": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 0, "creation_date": 1499914849, "post_id": 45061320, "comment_id": 77114287, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149064/discussion-between-annabelle-and-andrew-sun\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "is_accepted": true, "score": 4, "last_activity_date": 1499878467, "last_edit_date": 1499878467, "creation_date": 1499871675, "answer_id": 45061320, "question_id": 45042998, "link": "https://stackoverflow.com/questions/45042998/how-to-make-a-hook-and-trampoline-function-in-one-for-winapi-hooking/45061320#45061320", "title": "How to make a Hook and Trampoline function in one for WinAPI hooking", "body": "<p>If I understood the question correctly, you want to avoid \"hard-coding\" the trampoline function in assembly, presumably so you could have multiple trampolines in use at the same time without duplicating the code. You can achieve this using <code>VirtualAlloc</code> (<code>malloc</code> won't work since the returned memory won't be executable).</p>\n\n<p>I wrote this from memory without access to a compiler so it might have some minor bugs, but the general idea is here. Normally you would also use <code>VirtualProtect</code> to change the page permissions to <code>r-x</code> instead of <code>rwx</code> once you're done modifying it, but I've left that out for the sake of simplicity:</p>\n\n<pre><code>void *CreateTrampoline(void *originalFunc)\n{\n    /* Allocate the trampoline function */\n    uint8_t *trampoline = VirtualAlloc(\n        NULL,\n        5 + 5, /* 5 for the prologue, 5 for the JMP */\n        MEM_COMMIT | MEM_RESERVE,\n        PAGE_EXECUTE_READWRITE); /* Make trampoline executable */\n\n    /* Copy the original function's prologue */\n    memcpy(trampoline, originalFunc, 5);\n\n    /* JMP rel/32 opcode */\n    trampoline[5] = 0xE9;\n\n    /* JMP rel/32 operand */\n    uint32_t jmpDest = (uint32_t)originalFunc + 5; /* Skip original prologue */\n    uint32_t jmpSrc = (uint32_t)trampoline + 10; /* Starting after the JMP */\n    uint32_t delta = jmpDest - jmpSrc;\n    memcpy(trampoline + 6, &amp;delta, 4);\n\n    return trampoline;\n}\n</code></pre>\n\n<p>Your <code>InstallHook</code> function would then just call <code>CreateTrampoline</code> to create a trampoline, then patch the first 5 bytes of the original function with a <code>JMP rel/32</code> to your hook.</p>\n\n<p>Be warned, this only works on WinAPI functions, because Microsoft requires that they have a 5-byte prologue to enable hot-patching (which is what you're doing here). Normal functions do not have this requirement -- usually they only start with <code>push ebp; mov ebp, esp</code> which is only 3 bytes (and sometimes not even that, if the compiler decides to optimize it out).</p>\n\n<p>Edit: here's how the math works:</p>\n\n<pre><code>                          _______________delta______________\n                         |                                  |\ntrampoline               |                  originalFunc    |\n    |                    |                        |         |\n    v                    |                        v         v\n    [prologue][jmp delta]                         [prologue][rest of func]\n    |________||_________|                         |________|\n         5    +    5                                   5\n</code></pre>\n"}], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2193, "favorite_count": 2, "accepted_answer_id": 45061320, "answer_count": 1, "score": 2, "last_activity_date": 1500036895, "creation_date": 1499801180, "question_id": 45042998, "link": "https://stackoverflow.com/questions/45042998/how-to-make-a-hook-and-trampoline-function-in-one-for-winapi-hooking", "title": "How to make a Hook and Trampoline function in one for WinAPI hooking", "body": "<p>So I have been learning about the concept of hooking and using trampolines in order to bypass/execute data in a WinAPI hook function (In a different executable file, using DLL injection). So far I know how to make it (the trampoline and hook) using a mixture of assembly and C, but I can't seem to do it with just using C, as I seem to be missing something. I'd appreciate if someone could tell me what I'm doing wrong and how to fix it up.</p>\n\n<p>Right now my code:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n\nunsigned char* address = 0;\n\n__declspec(naked) int __stdcall MessageBoxAHookTrampoline(HWND Window, char* Message, char* Title, int Type) {\n    __asm\n    {\n        push ebp\n        mov ebp, esp\n        mov eax, address\n        add eax, 5\n        jmp eax\n    }\n}\n\nint __stdcall MessageBoxAHook(HWND Window, char* Message, char* Title, int Type) {\n    wchar_t* WMessage = L\"Hooked!\";\n    wchar_t* WTitle = L\"Success!\";\n    MessageBoxW(0, WMessage, WTitle, 0);\n    return MessageBoxAHookTrampoline(Window, Message, Title, Type);\n}\n\nunsigned long __stdcall Thread(void* Context) {\n    address = (unsigned char*)GetProcAddress(LoadLibraryA(\"user32\"), \"MessageBoxA\");\n    ULONG OP = 0;\n    if (VirtualProtect(address, 1, PAGE_EXECUTE_READWRITE, &amp;OP)) {\n        memset(address, 0x90, 5);\n        *address = 0xE9;\n        *(unsigned long*)(address + 1) = (unsigned long)MessageBoxAHook - (unsigned long)address - 5;\n    }\n    else {\n        MessageBoxA(0, \"Failed to change protection\", \"RIP\", 0);\n    }\n    return 1;\n}\n\n// Entry point.\nBOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved) {\n    if (fdwReason == DLL_PROCESS_ATTACH) {\n        CreateThread(0, 0, Thread, 0, 0, 0);\n    }\n    else if (fdwReason == DLL_PROCESS_DETACH) {\n\n    }\n    return true;\n}\n</code></pre>\n\n<blockquote>\n  <p>So question is: How would I make a function say <code>InstallHook</code> that will install the hook and return a trampoline so I can use it easily?\n  Function prototype probably would be: <code>void* InstallHook(void* originalFunc, void* targetFunc, int jumpsize)</code>, or so I've understood reading online, but unsure what <code>jumpsize</code> would be used for.</p>\n</blockquote>\n\n<p>So far I know that the first 5 bytes must be preserved and restored, and then there's a jump to the address of the original hooked function. So I'd have to use malloc to allocate memory, memcpy to copy bytes over, the <code>0xE9</code> is the value of a jump instruction and such, but I just don't know how to implement it using just pure C. <a href=\"https://stackoverflow.com/questions/8099660/writing-a-trampoline-function\">I figure it would be something similar to the code in this question.</a> So how can I write a hook function that returns a trampoline using pure C for WinAPI functions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 3, "creation_date": 1499800527, "post_id": 45042799, "comment_id": 77059943, "body": "C++ has a <a href=\"http://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\">chrono&#39;s high_resolution_clock</a> whose duration you can cast to milliseconds as easy as <i>&quot;A, B, C, 1, 2, 3&quot;</i>. That being said please consider removing the <code>c++</code> tag from your C question. They are two different languages."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1499800625, "post_id": 45042799, "comment_id": 77059996, "body": "Are you using C or C++?  They are different languages."}, {"owner": {"reputation": 880, "user_id": 4515030, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3EsAY.jpg?s=128&g=1", "display_name": "izaak_pyzaak", "link": "https://stackoverflow.com/users/4515030/izaak-pyzaak"}, "edited": false, "score": 0, "creation_date": 1499801052, "post_id": 45042799, "comment_id": 77060208, "body": "Check repo: <a href=\"https://github.com/izaak-coleman/chronoBench\" rel=\"nofollow noreferrer\">github.com/izaak-coleman/chronoBench</a>. If you can use C++, you can use this."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1499801057, "post_id": 45042799, "comment_id": 77060209, "body": "From C++17 you can use timespec_get: <a href=\"http://en.cppreference.com/w/cpp/chrono/c/timespec_get\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono/c/timespec_get</a> which retrieves a timespec <a href=\"http://en.cppreference.com/w/c/chrono/timespec\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/chrono/timespec</a> which contains a field for nanoseconds"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1499801065, "post_id": 45042799, "comment_id": 77060213, "body": "Have you tried your Operating System <code>sort</code> utility (if available)? ... or why not sort text?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499801080, "post_id": 45042799, "comment_id": 77060217, "body": "In C, all the clocks with a higher resolution than 1 second granularity are somewhat system dependent, and there are frequently a myriad options available.  Very often, the integral seconds part is based on the <code>time_t</code> that can be converted to <code>struct tm</code>.  The subseconds part be based on milliseconds, microseconds or nanoseconds (and probably others).  POSIX is headed in the direction of &#39;nanoseconds for subseconds&#39; but still has legacy interfaces using other resolutions.  However, you have to fix the formatting for subsecond data."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1499801316, "post_id": 45042799, "comment_id": 77060336, "body": "C11 does specify a <code>struct timespec</code> (&#167;7.27.1 <b>Date and time <code>&lt;time.h&gt;</code></b>) which is compatible with POSIX <code>struct timespec</code> and supports nanosecond resolution.  The function to get the current time in a <code>struct timespec</code> is <code>timespec_get()</code>.  C11 doesn&#39;t mandate that <code>struct tm</code> has a subsecond component, and <code>strftime()</code> has no way to format subsecond components, etc."}, {"owner": {"reputation": 17, "user_id": 8291603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c7d02afce177faceed506f4f2b00c1?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/8291603/matt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499801375, "post_id": 45042799, "comment_id": 77060367, "body": "Hello @NathanOliver, i&#39;m using C.... the C++ tag was added by mistake.. and i don&#39;t know how to remove it. New to stackoverflow."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1499801402, "post_id": 45042799, "comment_id": 77060381, "body": "@Matt No problem.  It has been fixed."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1499801650, "post_id": 45042799, "comment_id": 77060503, "body": "Did you try the command line program <a href=\"http://man7.org/linux/man-pages/man1/sort.1.html\" rel=\"nofollow noreferrer\">sort</a>. It may well do good job without you needing to write code for it. <code>$ cat file1.log file2.log file3.log|sort &gt; sorted.logs</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1499803814, "last_edit_date": 1499803814, "creation_date": 1499800717, "answer_id": 45042898, "question_id": 45042799, "link": "https://stackoverflow.com/questions/45042799/time-h-struct-tm-and-milliseconds/45042898#45042898", "title": "time.h - struct tm and milliseconds", "body": "<p>You can take the result you get back from <code>mktime</code> and convert it to milliseconds.</p>\n\n<pre><code>if ((result = mktime(&amp;tv)) == (time_t)-1) {\n    fprintf(stderr, \"Conversion Error\\n\");\n}\nlong long resultmilli = (result * 1000LL) + ms;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1499801254, "creation_date": 1499801254, "answer_id": 45043013, "question_id": 45042799, "link": "https://stackoverflow.com/questions/45042799/time-h-struct-tm-and-milliseconds/45043013#45043013", "title": "time.h - struct tm and milliseconds", "body": "<p>I don't understand why you need to convert those timestamps into a <code>struct tm</code>, or into any other representation. They will already lexicographically sort just the way you want, in their current string form. So just do that.</p>\n"}], "owner": {"reputation": 17, "user_id": 8291603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2c7d02afce177faceed506f4f2b00c1?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/8291603/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499803814, "creation_date": 1499800356, "last_edit_date": 1499801313, "question_id": 45042799, "link": "https://stackoverflow.com/questions/45042799/time-h-struct-tm-and-milliseconds", "title": "time.h - struct tm and milliseconds", "body": "<p>I have log data ranging from 1000 to 100000 entries all from different sources. The objective is to sort this data by time (quickly). I was prototyping in C and i'm stuck because it looks like tm doesn't support milliseconds. Am i missing something here ? Any suggestions ? </p>\n\n<p>Idea:</p>\n\n<ol>\n<li><p>Open file. Parse line-by-line and tokenize fields to c struct via strtok</p>\n\n<p>1.1 Convert Date &amp; Time to \"struct tm\".</p>\n\n<p>1.2 Build linked list </p></li>\n<li>Sort linked list based on time (don't know which sort algorithm i'd use)</li>\n<li>Output </li>\n</ol>\n\n<p>[Example]</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>YYYY-MM-DD,HH:MM:SS:MS , PID, TID , COMPONENT, Message \n2017-03-29,20:56:27:088, 3436,2568,COMPONENT, Message String blah blah\n2017-03-29,20:56:27:089, 3436,2568,COMPONENT, Message String baaaaa\n2017-03-29,20:56:27:079, 3436,2568,COMPONENT, Message String roarrr\n2017-03-29,20:56:28:061, 3436,2568,COMPONENT, Message String meow\n2017-03-29,20:56:25:044, 3436,2568,COMPONENT, Message String ruff ruff \n.\n.\n.\n100000 entries \n</code></pre>\n\n<hr>\n\n<pre><code>const char T[] = \"2017-03-29,20:56:27:088\"; //Test String\ntime_t result = 0;\nint year = 0, month = 0, day = 0;\nint hour = 0, min = 0, sec = 0, ms = 0;\n\nif (sscanf(T, \"%4d-%2d-%2d,%2d:%2d:%2d\", &amp;year, &amp;month, &amp;day, &amp;hour, &amp;min, &amp;sec) == 6) {\n    struct tm tv = {0};\n    tv.tm_year = year;\n    tv.tm_mon = month;\n    tv.tm_mday = day;\n    tv.tm_hour = hour;\n    tv.tm_min = min;\n    tv.tm_sec = sec;\n    //Crap, it doesn't look like tm handles milliseconds ????\n\n    if ((result = mktime(&amp;tv)) == (time_t)-1) {\n        fprintf(stderr, \"Conversion Error\\n\");\n    }\n    puts(ctime(&amp;result));\n}\nelse {\n    fprintf(stderr, \"Invalid Format\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "batch-file", "compiler-errors"], "comments": [{"owner": {"reputation": 7714, "user_id": 6083222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/io3di.png?s=128&g=1", "display_name": "Jeff Zeitlin", "link": "https://stackoverflow.com/users/6083222/jeff-zeitlin"}, "edited": false, "score": 1, "creation_date": 1499800642, "post_id": 45042791, "comment_id": 77060011, "body": "This appears to be an error in the way the compiler parses the command line. You will need to contact the manufacturer of the compiler for assistance."}, {"owner": {"reputation": 68521, "user_id": 2128947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ASTM.jpg?s=128&g=1", "display_name": "Magoo", "link": "https://stackoverflow.com/users/2128947/magoo"}, "edited": false, "score": 1, "creation_date": 1499800669, "post_id": 45042791, "comment_id": 77060038, "body": "Are you sure that your batch has been saved in ASCII, not Unicode?"}, {"owner": {"reputation": 11, "user_id": 6345171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a73a0a4714cdcfe55b2b1d244729156?s=128&d=identicon&r=PG&f=1", "display_name": "B. Zhao", "link": "https://stackoverflow.com/users/6345171/b-zhao"}, "reply_to_user": {"reputation": 68521, "user_id": 2128947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ASTM.jpg?s=128&g=1", "display_name": "Magoo", "link": "https://stackoverflow.com/users/2128947/magoo"}, "edited": false, "score": 0, "creation_date": 1499946211, "post_id": 45042791, "comment_id": 77131461, "body": "@Magoo I just use the default settings. Does it make difference? I found that I made a mistake. I used &quot;ppc-vle-as -fno-inline -o sample.o sample.c&quot; not ppc-vle-gcc. So -as gave me the error and -gcc not. But I don&#39;t know the difference between -gcc -c and the direct invocation of -as."}, {"owner": {"reputation": 68521, "user_id": 2128947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ASTM.jpg?s=128&g=1", "display_name": "Magoo", "link": "https://stackoverflow.com/users/2128947/magoo"}, "edited": false, "score": 0, "creation_date": 1499952490, "post_id": 45042791, "comment_id": 77136763, "body": "Yes. Batch was designed for ASCII, not unicode. Feeding instructions in unicode to <code>cmd</code> can have unexpected and unpredictable effects. This is related to the mode in which whatever editor you are using is set, nothing to do with the actual <i>code</i> you are using."}], "owner": {"reputation": 11, "user_id": 6345171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a73a0a4714cdcfe55b2b1d244729156?s=128&d=identicon&r=PG&f=1", "display_name": "B. Zhao", "link": "https://stackoverflow.com/users/6345171/b-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499800326, "creation_date": 1499800326, "question_id": 45042791, "link": "https://stackoverflow.com/questions/45042791/wrong-compiler-options-accepted-via-batch-when-compiling-c-code-using-hightec-co", "title": "Wrong compiler options accepted via Batch when compiling c code using Hightec compiler", "body": "<p>I'm trying to compiler c code using Hightec compiler under win7 64bit operating system. Here is my sample Batch code for compiling:</p>\n\n<pre><code>Root\\HightecInstall\\bin\\ppc-vle-gcc -fno-inline -c -o sample.o sample.c\n</code></pre>\n\n<p>This is only a sample code with the compiler options \"-fno-inline\". After I run the batch file, I got an error saying \"unknown compiler options -no-inline\". But what I input is \"-fno-inline\". So there is a missing letter \"f\". I have tried with other options and the output always gave me \"unknown compiler options ***\" which misses one or two letter at the beginning. For example. -DDefault -> unknown -efault. I don't really understand how that could happen and how could the compiler discard the first one or two letters. Does anyone have some suggestions? Thanks.</p>\n\n<p>Bo</p>\n"}, {"tags": ["c", "arrays", "string", "strcpy", "strlen"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1499795280, "post_id": 45041402, "comment_id": 77056885, "body": "arrays are one element short of being strings here."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1499795305, "post_id": 45041402, "comment_id": 77056901, "body": "<code>strlen(a)</code> would be UB..most likely."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1499795350, "post_id": 45041402, "comment_id": 77056924, "body": "If you try <code>&quot;raj&quot;</code> instead of <code>&quot;rajeev&quot;</code>, it will work. This is because you did not count null terminator."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499795372, "post_id": 45041402, "comment_id": 77056938, "body": "<code>strcpy(a,&quot;rajeev&quot;);</code> is UB, as it is accessing past the allocated memory."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499795451, "post_id": 45041402, "comment_id": 77056977, "body": "Formatting/indentation:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499795590, "post_id": 45041402, "comment_id": 77057062, "body": "&#39;a[6],b[6]&#39; - bean-counting error:("}, {"owner": {"reputation": 59, "user_id": 8203129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b12bfdd93d68626432097a1e89552a?s=128&d=identicon&r=PG&f=1", "display_name": "Anjali", "link": "https://stackoverflow.com/users/8203129/anjali"}, "edited": false, "score": 0, "creation_date": 1499795974, "post_id": 45041402, "comment_id": 77057296, "body": "sorry i cant get the term UB. can you please help me to get it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1499796091, "post_id": 45041402, "comment_id": 77057376, "body": "<a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a>"}, {"owner": {"reputation": 59, "user_id": 8203129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b12bfdd93d68626432097a1e89552a?s=128&d=identicon&r=PG&f=1", "display_name": "Anjali", "link": "https://stackoverflow.com/users/8203129/anjali"}, "edited": false, "score": 0, "creation_date": 1499796112, "post_id": 45041402, "comment_id": 77057392, "body": "Actually my doubt is why the Array &quot;a&quot; is empty after implementing the strcpy(b,a)?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499796172, "post_id": 45041402, "comment_id": 77057435, "body": "Any reasoning about the program semantics won&#39;t be valid as long as it&#39;s behavior is undefined."}, {"owner": {"reputation": 59, "user_id": 8203129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b12bfdd93d68626432097a1e89552a?s=128&d=identicon&r=PG&f=1", "display_name": "Anjali", "link": "https://stackoverflow.com/users/8203129/anjali"}, "edited": false, "score": 0, "creation_date": 1499796233, "post_id": 45041402, "comment_id": 77057480, "body": "but, if am using char *a=malloc(6) instead of a[6] it work properly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499796260, "post_id": 45041402, "comment_id": 77057489, "body": "That is an unlucky illusion. You still need 7 bytes. 6 for the characters and 1 for the string terminator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499796717, "post_id": 45041402, "comment_id": 77057753, "body": "An analogy: you book 6 seats on a train for your party of 7. You all sit down in reserved seats, but nobody turns up to claim the seat you didn&#39;t book before you reach the destination. That is lucky, but in C is unlucky because you imagine you can continue to use unbooked seats."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499795836, "post_id": 45041520, "comment_id": 77057224, "body": "Your are onto something but the order of <code>a</code> and <code>b</code> (on the stack, if there is a stack) is undefined."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499795973, "post_id": 45041520, "comment_id": 77057295, "body": "I guessed it from the program results :) to explain why first byte of a became 0."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499796145, "post_id": 45041520, "comment_id": 77057413, "body": "Better to focus on improving the code than trying to explain <i>undefined behaviour</i>. Can you convert your &quot;comment&quot; to a proper answer?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499796276, "post_id": 45041520, "comment_id": 77057502, "body": "Sometimes when you see the result it is easier to understand the UB. I wrote that tables a &amp; b are too small to accommodate the string"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499796407, "post_id": 45041520, "comment_id": 77057579, "body": "So what is the proper answer, the solution?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499797009, "post_id": 45041520, "comment_id": 77057932, "body": "@Weather Vane - read 5 first words of the answer and there is the sollution. Hint - if something is too small ..... ?? If you have too small trousers you need to buy .........."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499797130, "post_id": 45041520, "comment_id": 77057991, "body": "Sorry, this is a comment, not answer, which should have provided a solution, instead of speculating about UB."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499797288, "post_id": 45041520, "comment_id": 77058078, "body": "@Weather Vane It is the answer for the question asked: <b><i>&#39;Can you please help me to understand the phenomena behind this?&#39;</i></b>. He did not ask for the solution. Knowing it quite intelligent human being cam work out the solution himself."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499797621, "post_id": 45041520, "comment_id": 77058254, "body": "Sorry my DV because you refused to be prompted into providing a good answer. If you can edit the answer I will retract the DV."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499797763, "post_id": 45041520, "comment_id": 77058333, "body": "@ Weather Vane - Who cares?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1499797997, "post_id": 45041520, "comment_id": 77058475, "body": "Well, if you care about providing useful answers you would also have addressed the OP&#39;s question about why <code>malloc</code> worked."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1499798770, "last_edit_date": 1499798770, "creation_date": 1499795712, "answer_id": 45041520, "question_id": 45041402, "link": "https://stackoverflow.com/questions/45041402/strcpy-function-not-working-properly/45041520#45041520", "title": "strcpy function not working properly", "body": "<p>a &amp; b are too small and because a is just after b the first byte of it is zero after the strcpy execution. </p>\n\n<p>malloc has worked because this chunk of memory was allocated in the other place in the memory. But it was just accidental, as you wrote more memory than you have allocated.</p>\n\n<p>Any access to the memory which was not somehow allocated is illegal and it is an UB.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1499795951, "creation_date": 1499795951, "answer_id": 45041593, "question_id": 45041402, "link": "https://stackoverflow.com/questions/45041402/strcpy-function-not-working-properly/45041593#45041593", "title": "strcpy function not working properly", "body": "<p>Your arrays aren't being enough to hold the string you're trying to store.</p>\n\n<p>String in C are defined as a <em>null terminated sequence of characters</em>, meaning that a proper string has a null byte at the end.</p>\n\n<p>Your arrays can hold 6 bytes, but your string <code>\"rajeev\"</code> needs 7 bytes (6 for the letters and one for the implicit null byte at the end.  As a result, you write past the end of the array.  Writing outside the bounds of an array invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>In the case where you dynamically allocate memory, you are again invoking undefined behavior.  In this case it <em>appears</em> to work properly.  That's one of the ways undefined behavior can manifest.</p>\n\n<p>To fix this, your arrays need to be at least 7 elements long:</p>\n\n<pre><code>char a[7], b[7];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1499798208, "last_edit_date": 1499798208, "creation_date": 1499796330, "answer_id": 45041697, "question_id": 45041402, "link": "https://stackoverflow.com/questions/45041402/strcpy-function-not-working-properly/45041697#45041697", "title": "strcpy function not working properly", "body": "<p>The string literal <code>\"rajeev\"</code> has type char[7]. That is it has the static storage duration and is stored as an array initialized like </p>\n\n<pre><code>char unnamed[] = { 'r', 'a', 'j', 'e', 'e', 'v', '\\0' };\n</code></pre>\n\n<p>So if you are going to copy its content as a string using the function <code>strcpy</code> you need provide enough memory in the destination array. For example</p>\n\n<pre><code>char a[7], b[7];\n\nstrcpy(a,\"rajeev\");\nprintf(\"print A:\");\nfor ( size_t i = 0, n = strlen( a ); i &lt; n; i++ )\n{\n     printf(\"%c\",a[i]);\n}\n\n//... and so on\n</code></pre>\n\n<p>Take into account that the function <code>strlen</code> counts characters until the terminating zero is encountered. So if a character array does not include this character then the function's behavior is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "edited": false, "score": 0, "creation_date": 1582178575, "post_id": 60313694, "comment_id": 106689704, "body": "null byte is <code>\\0</code> not <code>&quot;&#47;0&quot;</code>"}, {"owner": {"reputation": 21, "user_id": 12824263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2eee7231fac945b52f6b2ac49d38510?s=128&d=identicon&r=PG", "display_name": "Kate Sinclair", "link": "https://stackoverflow.com/users/12824263/kate-sinclair"}, "reply_to_user": {"reputation": 1569, "user_id": 1694593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9ec320e3d57fdbde4b7ecc8194b2a2d1?s=128&d=identicon&r=PG", "display_name": "Wander3r", "link": "https://stackoverflow.com/users/1694593/wander3r"}, "edited": false, "score": 0, "creation_date": 1605447344, "post_id": 60313694, "comment_id": 114646870, "body": "yeah. my bad :D. Updated! Thanks for info"}], "tags": [], "owner": {"reputation": 21, "user_id": 12824263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2eee7231fac945b52f6b2ac49d38510?s=128&d=identicon&r=PG", "display_name": "Kate Sinclair", "link": "https://stackoverflow.com/users/12824263/kate-sinclair"}, "is_accepted": false, "score": 0, "last_activity_date": 1605447355, "last_edit_date": 1605447355, "creation_date": 1582178063, "answer_id": 60313694, "question_id": 45041402, "link": "https://stackoverflow.com/questions/45041402/strcpy-function-not-working-properly/60313694#60313694", "title": "strcpy function not working properly", "body": "<p>The array you defined  <code>char a[6], b[6]</code> don't have enough space to fit the string you are trying to store.</p>\n<p>Kindly remember that every array in C has a null byte <code>\\0</code> at the end.</p>\n<p>You can fix it by giving enough space to the array:</p>\n<pre><code>char a[7], b[7];\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8203129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b12bfdd93d68626432097a1e89552a?s=128&d=identicon&r=PG&f=1", "display_name": "Anjali", "link": "https://stackoverflow.com/users/8203129/anjali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3714, "favorite_count": 0, "accepted_answer_id": 45041697, "answer_count": 4, "score": 0, "last_activity_date": 1605447355, "creation_date": 1499795240, "last_edit_date": 1499796474, "question_id": 45041402, "link": "https://stackoverflow.com/questions/45041402/strcpy-function-not-working-properly", "title": "strcpy function not working properly", "body": "<p>Please consider the below code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\n    char a[6], b[6];\n\n    strcpy(a,\"rajeev\");\n    printf(\"print A:\");\n    for(int i=0;i&lt;strlen(a);i++)\n    {\n         printf(\"%c\",a[i]);\n    }\n\n    strcpy(b,a);\n    printf(\"print B:\");\n    for(int i=0;i&lt;strlen(b);i++)\n    {\n        printf(\"%c\",b[i]);\n    }\n\n    printf(\"trying to print A again\");\n    for(int i=0;i&lt;strlen(a);i++)\n    {\n        printf(\"%c\",a[i]);\n    }\n</code></pre>\n\n<p>While running this program,in the \"trying to print A again\" section prints nothing, and the <code>strlen(a)</code> will be 0.  That means the source array will be empty.</p>\n\n<p>Can you please help me to understand the phenomena behind this?\nBut, change the declaration of <code>a[6]</code> to <code>char* a=malloc(6)</code> works properly.</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499795277, "post_id": 45041397, "comment_id": 77056880, "body": "It is using pointers...."}, {"owner": {"reputation": 9, "user_id": 8291094, "user_type": "registered", "profile_image": "https://graph.facebook.com/1969323486426508/picture?type=large", "display_name": "Marvin Panemalaythong", "link": "https://stackoverflow.com/users/8291094/marvin-panemalaythong"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499795793, "post_id": 45041397, "comment_id": 77057192, "body": "that&#39;s what i thought too but my professor handed it back to me saying that I needed pointers where i have &quot;string[i]&quot; and &quot;string[j]... so confused"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499799435, "post_id": 45041397, "comment_id": 77059325, "body": "You professor should read a good C book. You cannot use arrays for anything usefull, it is all pointers. He better should point you at writing const-correct code and not use obsolesecence function declarators like <code>main()</code>, which should be the prototype-style <code>main(void)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499799362, "post_id": 45041598, "comment_id": 77059290, "body": "The index operator is defined to wok on pointers anyway. I don&#39;t see a problekm writing readable code instead of the much less clear addition/derefence syntax."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499802318, "post_id": 45041598, "comment_id": 77060830, "body": "@Olaf: I agree that there are better ways to teach how pointers work."}], "tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1499795975, "creation_date": 1499795975, "answer_id": 45041598, "question_id": 45041397, "link": "https://stackoverflow.com/questions/45041397/how-would-i-modify-rmchr-to-use-pointers-ive-been-able-to-get-my-code-to-run-t/45041598#45041598", "title": "How would I modify rmchr to use pointers. I&#39;ve been able to get my code to run the way it is but the assignment requires pointers to be used", "body": "<p>The expression <code>a[i]</code> is defined to be equivalent to <code>*(a + i)</code>. Modifying your code with that transformation would be sufficient to satisfy the pointer requirement as I understand your question to be about.</p>\n\n<p>If you want to be incrementing and decrementing pointer variables rather than integer indexes, then consider that:</p>\n\n<pre><code>char *p = string;\nint i = 0;\n\nwhile (string[i]) {\n    assert(*p == string[i]);\n    ++i;\n    ++p;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8291094, "user_type": "registered", "profile_image": "https://graph.facebook.com/1969323486426508/picture?type=large", "display_name": "Marvin Panemalaythong", "link": "https://stackoverflow.com/users/8291094/marvin-panemalaythong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499795975, "creation_date": 1499795227, "question_id": 45041397, "link": "https://stackoverflow.com/questions/45041397/how-would-i-modify-rmchr-to-use-pointers-ive-been-able-to-get-my-code-to-run-t", "title": "How would I modify rmchr to use pointers. I&#39;ve been able to get my code to run the way it is but the assignment requires pointers to be used", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid rmchr(char *string, char a) \n{\n    int i, j;\n    for (i = 0; string[i] != '\\0'; i++) //loop till '\\0' character \n    { \n        if (string[i] == a) { //check given character  is equal to chr at i\n            for (j = i; string[j] != '\\0'; j++)  // loop from i till string end\n            {\n                string[j] = string[j+ 1]; // swap value with next char\n            }\n            string[j] = '\\0';  //assign terminating char to lasts index of string\n            i--; //decrement i\n        }\n\n    }\n}\n\nint main() \n{\n    char str1[] = \"abracadabra\";\n    char str2[] = \"abracadabra\";\n    char str3[] = \"abracadabra\";\n    char str4[] = \"aaaa\";\n    char str5[] = \"aaaa\";\n    printf(\"Before rmchr function call string= %s\\n\", str1);\n    rmchr(str1, 'a');\n    printf(\"After rmchr function call string= %s\\n\\n\", str1);\n\n    printf(\"Before rmchr function call string= %s\\n\", str2);\n    rmchr(str2, 'b');\n    printf(\"After rmchr function call string= %s\\n\\n\", str2);\n\n    printf(\"Before rmchr function call string= %s\\n\", str3);\n    rmchr(str3, 'n');\n    printf(\"After rmchr function call string= %s\\n\\n\", str3);\n\n    printf(\"Before rmchr function call string= %s\\n\", str4);\n    rmchr(str4, 'a');\n    printf(\"After rmchr function call string= %s\\n\\n\", str4);\n\n    printf(\"Before rmchr function call string= %s\\n\", str5);\n    rmchr(str5, 'n');\n    printf(\"After rmchr function call string= %s\\n\", str5);\n}\n</code></pre>\n\n<p>/*Output</p>\n\n<p>Before rmchr function call string= abracadabra\nAfter rmchr function call string= brcdbr</p>\n\n<p>Before rmchr function call string= abracadabra\nAfter rmchr function call string= aracadara</p>\n\n<p>Before rmchr function call string= abracadabra\nAfter rmchr function call string= abracadabra</p>\n\n<p>Before rmchr function call string= aaaa\nAfter rmchr function call string=</p>\n\n<p>Before rmchr function call string= aaaa\nAfter rmchr function call string= aaaa</p>\n\n<hr>\n\n<p>Process exited after 0.015 seconds with return value 0\nPress any key to continue . . .\n*/</p>\n"}, {"tags": ["c", "switch-statement", "selection"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1499794613, "post_id": 45041175, "comment_id": 77056499, "body": "Start with a shorter loop, and then step through the code line by line in a debugger to see what happens and what it does. And please take some time to read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> by Eric Lippert."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1499794677, "post_id": 45041175, "comment_id": 77056545, "body": "i believe the game is called craps. crap is a totally different game"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499794762, "post_id": 45041175, "comment_id": 77056591, "body": "You should reset <code>ctrl</code> to <code>1</code> within the for loop"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1499794776, "post_id": 45041175, "comment_id": 77056598, "body": "Put <code>ctrl= 1;</code> inside the for loop. The way you have it, once it gets assigned <code>0</code> it never changes."}, {"owner": {"reputation": 333, "user_id": 6168549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04203874c94da7b9bcd58f6096ae8375?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/6168549/carlos"}, "edited": false, "score": 0, "creation_date": 1499796128, "post_id": 45041175, "comment_id": 77057402, "body": "Just want to be clear on the game above.  You are getting the percentage of win/loss on the come out roll?  All other aspects of the game are disregarded?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1499799123, "post_id": 45041175, "comment_id": 77059154, "body": "...and I assume you know that you&#39;re only counting wins and losses on the come-out roll here, and ignoring all games with a point."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6317336"}, "edited": false, "score": 0, "creation_date": 1499801110, "post_id": 45041175, "comment_id": 77060227, "body": "If you get 4,5,6,8,9 or 10, you will have one extra chance to try, this will go on until you get 7,11-win or 2,3,12-loss. So, i counted these extras as one game because they will eventually be a win or a loss."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 3, "last_activity_date": 1499795446, "last_edit_date": 1499795446, "creation_date": 1499794878, "answer_id": 45041308, "question_id": 45041175, "link": "https://stackoverflow.com/questions/45041175/switch-case-statement-in-c-does-not-give-result/45041308#45041308", "title": "switch case statement in c does not give result", "body": "<p>You need to change this</p>\n\n<pre><code>for(i=0;i&lt;100000;i++) {\n    while(ctrl!=0) {\n</code></pre>\n\n<p>into</p>\n\n<pre><code>for(i=0;i&lt;100000;i++) {\n    ctrl = 1;             // Restart the game\n    while(ctrl!=0) {\n</code></pre>\n\n<p>In this way you restart the game. If you don't the game is over after the first succesful completion of the game.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6317336"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1499795446, "creation_date": 1499794426, "last_edit_date": 1499795287, "question_id": 45041175, "link": "https://stackoverflow.com/questions/45041175/switch-case-statement-in-c-does-not-give-result", "title": "switch case statement in c does not give result", "body": "<p>edit: the name of the game is game of craps, not crap.\nThanks to everyone who tried to help, i forgot to put ctrl= 1 assignment into the for loop. </p>\n\n<p>i cannot get the wanted result from this game of crap. Here is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n#include&lt;stdlib.h&gt;\nint rolldice();\n\nint main() {\nsrand(time(NULL));\nint n;\nfloat winrate;\nfloat lossrate;\nlong int i;\nlong int ctrw,ctrloss;\nctrw= 0;\nctrloss= 0;\nint ctrl= 1;\nfor(i=0;i&lt;100000;i++) {\n    while(ctrl!=0) {\n        n= rolldice();\n        switch(n) {\n            case 7:\n            case 11:\n            ctrw++;\n            ctrl= 0;\n            break;\n            case 2:\n            case 3:\n            case 12:\n            ctrloss++;\n            ctrl= 0;\n            break;\n            default:\n            ctrl= 1;\n            break;\n        }\n    }\n}\nwinrate= (float)ctrw/i * 100.0;\nlossrate= (float)ctrloss/i * 100.0;\nprintf(\"Win rate is %.2f, loss rate is %.2f.\",winrate,lossrate);\nsystem(\"pause\");\nreturn 0;\n}\n\nint rolldice() {\n    int a= (rand()%6)+1;\n    int b= (rand()%6)+1;\n    return a+b;\n}\n</code></pre>\n\n<p>As seen, i am trying to calculate win and loss rate of this game by playing it 100000 times. But what is printed is this: Win rate is 0.00, loss rate is 0.00.\nProbably a simple mistake, but i couldn't find and don't want to lose more time for it. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1499793374, "post_id": 45040858, "comment_id": 77055813, "body": "Depends on the processor - Arm, Sparc, Power, Mips, x86, x86-64,  Alpha, system z, Itanium, and many more.. They are all different."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1499793428, "post_id": 45040858, "comment_id": 77055850, "body": "You don&#39;t need to use the <code>register</code> keyword, as the compiler will automatically place variables in registers."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 4, "creation_date": 1499793442, "post_id": 45040858, "comment_id": 77055861, "body": "<code>register</code> in C is only a hint. It does not require the compiler keep the object in a register"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 5, "creation_date": 1499793459, "post_id": 45040858, "comment_id": 77055872, "body": "In C ++ <code>register</code> is not a storage class specifier and does nothing."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1499793484, "post_id": 45040858, "comment_id": 77055888, "body": "Is this a C question or a C++ question? The answers will be very different."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1499793488, "post_id": 45040858, "comment_id": 77055889, "body": "Don&#39;t use the <code>register</code> storage class. It&#39;s pretty much obsoleted by optimizing compilers."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499793622, "post_id": 45040858, "comment_id": 77055953, "body": "@Felix Palmen C with no extensions you are right. But sometimes in  uController  programming it is needed to permanently bind variable to the register. Nowadays actually it is not used as often as in 8 bit era but it is possible for example avr gcc <b><code>register unsigned char counter asm(&quot;r3&quot;);</code></b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 3, "creation_date": 1499793856, "post_id": 45040858, "comment_id": 77056067, "body": "@PeterJ if you need it, you <i>know</i> it. If you have to ask how many registers there are, you don&#39;t need it :)"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499793954, "post_id": 45040858, "comment_id": 77056114, "body": "@Felix Palmen :D"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1499795175, "post_id": 45040858, "comment_id": 77056828, "body": "The number and size of processor registers is architecture dependent.  Refer to your processor user manual.  This is a hardware question, and so off-topic for SO."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 9, "last_activity_date": 1499793745, "creation_date": 1499793745, "answer_id": 45040991, "question_id": 45040858, "link": "https://stackoverflow.com/questions/45040858/what-is-the-size-of-processor-register-and-how-many-processor-registers-are-ther/45040991#45040991", "title": "What is the size of processor register and how many processor registers are there?", "body": "<blockquote>\n  <p>When a variable is declared as register, its allocation would be done in the processor by which my computer is running.</p>\n</blockquote>\n\n<p>This is ancient knowledge from many decades ago. Nowadays, the keyword <code>register</code> in C is a largely-ignored hint, and in C++ it does literally nothing; since C++17 you're not even allowed to write it any more (it's \"unused and reserved\").</p>\n\n<p>Compilers since the 1990s are smart enough to decide where to put (or not put!) data, and they more or less ignore your insistence that you know better (unless you have very specific hardware requirements, which would require more specific code anyway).</p>\n\n<p>Instead of trying to leak physical factors into your codebase, just write nice code that describes the <em>semantics</em> of your program, remembering that both C++ and (to a slightly lesser extent) C are <em>abstractions</em>, not a one-to-one mapping to machine instructions.</p>\n\n<p>As for how many processor registers exist and with what size, that depends entirely on which processor you have. You can probably find out from its datasheet, if you are <em>really</em> curious.</p>\n"}], "owner": {"reputation": 9, "user_id": 8255573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e845b118948f06b263fb58ecd14427e?s=128&d=identicon&r=PG", "display_name": "user8255573", "link": "https://stackoverflow.com/users/8255573/user8255573"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499793816, "creation_date": 1499793321, "last_edit_date": 1499793816, "question_id": 45040858, "link": "https://stackoverflow.com/questions/45040858/what-is-the-size-of-processor-register-and-how-many-processor-registers-are-ther", "title": "What is the size of processor register and how many processor registers are there?", "body": "<p>I declared an <code>int</code> variable as follows:</p>\n\n<pre><code>register int count;\n</code></pre>\n\n<p>When a variable is declared as <code>register</code>, its allocation would be done in the processor on which my computer is running.</p>\n\n<p>My question is, how many processor registers are there, and what is the size of those registers?</p>\n"}, {"tags": ["c", "system-calls", "allocator", "kernighan-and-ritchie", "sbrk"], "comments": [{"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 0, "creation_date": 1499793602, "post_id": 45040807, "comment_id": 77055946, "body": "K&amp;R is mostly based on unix, <code>sbrk</code> is Unix system call. I thought <code>unistd.h</code> is also Unix only stuff. Did your code compile through it before linking."}], "answers": [{"comments": [{"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1499793973, "post_id": 45040911, "comment_id": 77056120, "body": "Other programs of his book use syscalls, such as <code>open</code>, <code>read</code>, <code>write</code> etc.  These work on my Win system. But I think it&#39;s because Windows has ones with the same name, am i right?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1499794208, "post_id": 45040911, "comment_id": 77056258, "body": "@RestlessC0bra Yes, that&#39;s correct. See e.g. <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/open\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/c-runtime-library/reference/ope&zwnj;&#8203;n</a> for the <code>open</code> function on windows."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499795103, "post_id": 45040911, "comment_id": 77056778, "body": "As I remember K&amp;R malloc implementation in the book (maybe it was later changed) was not a very good example how to write the malloc function. At least it was full or constructions we consider now as a bad programming practice (many returns etc etc). So you can probably skip this example or you should take a look on any modern implementation instead :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1499795254, "post_id": 45040911, "comment_id": 77056869, "body": "You&#39;re probably right in general, but &quot;many returns&quot; is a good thing."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 2, "last_activity_date": 1499793506, "creation_date": 1499793506, "answer_id": 45040911, "question_id": 45040807, "link": "https://stackoverflow.com/questions/45040807/tdm-gcc-undefined-reference-to-sbrk-in-kernighan-ritchies-storage-allocat/45040911#45040911", "title": "TDM-GCC - undefined reference to sbrk() in Kernighan &amp; Ritchie&#39;s Storage Allocator implementation program", "body": "<p>Yes, <code>sbrk</code> is a unix system call. It's not available on Windows.</p>\n\n<p>(Side note: Functions themselves aren't inside headers; headers generally only contain declarations. The actual functions are in some library (libc in this case).)</p>\n"}], "owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 45040911, "answer_count": 1, "score": 0, "last_activity_date": 1499794517, "creation_date": 1499793128, "last_edit_date": 1499794517, "question_id": 45040807, "link": "https://stackoverflow.com/questions/45040807/tdm-gcc-undefined-reference-to-sbrk-in-kernighan-ritchies-storage-allocat", "title": "TDM-GCC - undefined reference to sbrk() in Kernighan &amp; Ritchie&#39;s Storage Allocator implementation program", "body": "<p>I am trying to understand the storage allocator program shown in Kernighan and Ritchie's book \"The C Programming Language, 2nd edition\". I think I understood most, but when I code the program in <code>Windows 8.1 x86_64 with TDM GCC version 5.1.0</code>. It outputs error <code>undefined reference to 'sbrk'</code>. These are my includes: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n</code></pre>\n\n<p>I've searched quite a lot, but no other answers have helped me. It is supposed to be inside <code>unistd.h</code> but it's not. Is it because, since it is a system call it cannot be found in Windows? What is wrong? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1499792937, "post_id": 45040732, "comment_id": 77055555, "body": "How do you get <code>pnum</code>?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1499793013, "post_id": 45040732, "comment_id": 77055609, "body": "you need &amp;&amp; not ||. Think: if class is &#39;t&#39; then it is not &#39;c&#39; so your while is always true"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499793018, "post_id": 45040732, "comment_id": 77055610, "body": "It&#39;s time to learn about the <a href=\"https://msdn.microsoft.com/en-us/library/66k51h7a.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\"><code>switch</code> statement</a>."}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1499793051, "post_id": 45040732, "comment_id": 77055629, "body": "Now is a good time to learn how to debug a simple program. Either get an IDE with a debugger, or add some more printfs into your code to see the other variable values.  Don&#39;t you mean to do an &quot;&amp;&amp;&quot; of the p[i].class values?"}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499793067, "post_id": 45040732, "comment_id": 77055642, "body": "Also you don&#39;t need two loops to iterate over your <code>players</code> array."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "reply_to_user": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499793207, "post_id": 45040732, "comment_id": 77055725, "body": "I think he do @woz because he needs to make sure input is ok."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "reply_to_user": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1499793263, "post_id": 45040732, "comment_id": 77055751, "body": "@Yonlif you can achieve it by using just one loop and adding an increment condition (<code>if (condition) i++</code>)"}, {"owner": {"reputation": 21, "user_id": 8290873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401ff09e6a03a5363605b40ec4c527f5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle", "link": "https://stackoverflow.com/users/8290873/pavle"}, "edited": false, "score": 0, "creation_date": 1499793292, "post_id": 45040732, "comment_id": 77055772, "body": "indeed, it was &amp;&amp; and not ||, like i said, simple, but its a very specific question"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499793309, "post_id": 45040732, "comment_id": 77055786, "body": "If you&#39;re looking to make games, consider, at the absolute least, using something like <a href=\"https://en.wikipedia.org/wiki/Curses_(programming_library)\" rel=\"nofollow noreferrer\">Curses</a> to make an interactive text-mode application. One of the first things you should get a handle on is how to work with a simple event-loop and make an event-driven program."}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "reply_to_user": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 1, "creation_date": 1499793374, "post_id": 45040732, "comment_id": 77055814, "body": "Well you are right @woz it&#39;s just that some people prefer to do not mess with the indexing inside of a for loop"}, {"owner": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 0, "creation_date": 1499793460, "post_id": 45040732, "comment_id": 77055874, "body": "Don&#39;t you need to malloc stuff?"}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "reply_to_user": {"reputation": 1646, "user_id": 7501501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24ed8d70ce334750ebb5f7e387d402b5?s=128&d=identicon&r=PG&f=1", "display_name": "Yonlif", "link": "https://stackoverflow.com/users/7501501/yonlif"}, "edited": false, "score": 1, "creation_date": 1499793462, "post_id": 45040732, "comment_id": 77055875, "body": "@Yonlif that&#39;s why a <code>while</code> loop would be great for it. Also it&#39;d make the code easier to read."}], "answers": [{"tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": false, "score": 2, "last_activity_date": 1499798764, "creation_date": 1499798764, "answer_id": 45042382, "question_id": 45040732, "link": "https://stackoverflow.com/questions/45040732/why-does-the-do-while-loop-never-ends/45042382#45042382", "title": "Why does the do-while loop never ends?", "body": "<p>Replace the ||(ORs) by &amp;&amp;(ANDs) </p>\n\n<pre><code>for(i=0;i&lt;pnum;i++) {\n    do {\n      printf(\"Player %d insert your class:\\n\", i+1);\n      p[i].class=getc(stdin);\n    } while(p[i].class!='c' &amp;&amp; p[i].class!='t' &amp;&amp; p[i].class!='a' &amp;&amp; p[i].class!='d');\n}\n</code></pre>\n\n<p>Imagine the user enter <code>char t</code>. If it were OR instead of AND, first condition would be true which is enough to proceed with the loop again. But if it's AND all conditions needs to be TRUE in order to proceed with the loop. Since second will be FALSE, so the do-while loop shall terminate.</p>\n\n<p>In short, </p>\n\n<pre><code>(p[i].class!='c' || p[i].class!='t' || p[i].class!='a' || p[i].class!='d')\n</code></pre>\n\n<p>would mean that <strong>ANY</strong> of them being <strong>TRUE</strong> is sufficient to <strong>PROCEED</strong> with the loop</p>\n\n<p>but,</p>\n\n<pre><code>(p[i].class!='c' &amp;&amp; p[i].class!='t' &amp;&amp; p[i].class!='a' &amp;&amp; p[i].class!='d')\n</code></pre>\n\n<p>would mean that <strong>ANY</strong> of them being <strong>FALSE</strong> is sufficient to <strong>STOP</strong> the loop</p>\n"}], "owner": {"reputation": 21, "user_id": 8290873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401ff09e6a03a5363605b40ec4c527f5?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle", "link": "https://stackoverflow.com/users/8290873/pavle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1499841255, "creation_date": 1499792850, "last_edit_date": 1499841255, "question_id": 45040732, "link": "https://stackoverflow.com/questions/45040732/why-does-the-do-while-loop-never-ends", "title": "Why does the do-while loop never ends?", "body": "<p>I am making a text-based game. One of the things I take input is a Class of the players which needs to be a specific character. I do this for each of the existing number of players that they have input(that is the pnum variable).</p>\n\n<pre><code>typedef struct players {\n  char class, upgrade1, upgrade2, upgrade3;\n  int secondwarD, secondwarS;\n  int funds; \n} players;\n\nstruct players p[pnum];\n\nfor(i=0;i&lt;pnum;i++) {\n    do {\n      printf(\"Player %d insert your class:\\n\", i+1);\n      p[i].class=getc(stdin);\n    } while(p[i].class!='c' || p[i].class!='t' || p[i].class!='a' || p[i].class!='d');\n}\n</code></pre>\n\n<p>Unfortunately it gets stuck on the do+while loop for the same player despite me inserting one of the possible characters. Its a simple thing but I wasn't able to find an existing question that matches this. Any help is appreciated :)</p>\n"}, {"tags": ["c", "assembly", "x86"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1499792796, "post_id": 45040663, "comment_id": 77055462, "body": "<code>if (new_cpu) while(1);</code>"}, {"owner": {"reputation": 307, "user_id": 4920739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0771c643189144477a376f168c3adda8?s=128&d=identicon&r=PG&f=1", "display_name": "vguberinic", "link": "https://stackoverflow.com/users/4920739/vguberinic"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499793170, "post_id": 45040663, "comment_id": 77055697, "body": "Ha! That is the worst abuse of CPUID I have seen!"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1499793359, "post_id": 45040663, "comment_id": 77055805, "body": "You consider a P4 a &quot;newer cpu&quot;?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1499793759, "post_id": 45040663, "comment_id": 77056018, "body": "A more recent example is using vector shuffles, which had a throughput of 2 on Nehalem and the bridges, but it&#39;s back to 1 on the wells and lakes."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1499794524, "post_id": 45040663, "comment_id": 77056444, "body": "By syncing memory modifications and clearing caches you would be probably able to slow down to the memory speed on any future architecture, and as the speed of memories is growing slower, it will feel as degradations in terms of CPU performance (but in absolute time it will still be faster in the future). And of course some idling loop based on <code>CPUID</code> returned value.... will probably render your SW unusable in few years."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499802840, "post_id": 45040663, "comment_id": 77061088, "body": "Haswell has higher latency on lane-crossing AVX shuffles than Sandybridge/IvB.  (3c vs. 2c).  Also, Haswell only has one shuffle unit, while earlier Intel could run 2 vector shuffles per clock."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499803055, "post_id": 45040663, "comment_id": 77061213, "body": "More generally, look at <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog&#39;s instruction tables</a> for something with higher latency in a newer CPU than an older CPU, and use it in a loop-carried dependency chain.  Related: <a href=\"https://stackoverflow.com/questions/37361145/deoptimizing-a-program-for-the-pipeline-in-intel-sandybridge-family-cpus\">Deoptimizing a program for the pipeline in Intel Sandybridge-family CPUs</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499810050, "post_id": 45040663, "comment_id": 77064571, "body": "The title seems clear, but the text isn&#39;t.  You mean you want a program that will take more core clock cycles on a newer CPU, right?  So 1 sec on a 4GHz Skylake is the same performance as 4 seconds on a 1GHz Pentium III, 4 gigacycles when both are running at their rated clock speeds.  Also, the new/old pair can be anything, like IvyBridge -&gt; Haswell, or 80286 -&gt; Skylake?  What about across vendors, like Intel Pentium II vs. AMD Bulldozer?  Hrm, actually I can see why this got closed as too broad.  There are a zillion possible answers.  OTOH, I could give a generic answer for how to find cases."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1499810263, "post_id": 45040663, "comment_id": 77064639, "body": "Does the program have to do anything useful, or can it just run a synthetic loop that does a chain of dependent <code>BSF</code> instructions for 100M iterations and then exit?.  (Big perf drop from Intel to recent AMD)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1499887235, "post_id": 45040663, "comment_id": 77105146, "body": "I think you could clarify your question by adding some ranges for what you mean by &quot;new&quot; and &quot;old&quot;. For example, are you interested in today&#39;s architectures versus 5 years ago, 10 years, 20 years? It is clear enough to me from the title, but you should probably also clarify that you are interesting in measuring in <i>cycles</i> and not in <i>time</i> (and then your clarification on how to convert between <i>cycles</i> and <i>time</i> makes sense)."}], "answers": [{"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499885219, "post_id": 45040874, "comment_id": 77104073, "body": "Yeah, that ALU chain might be doubly fast on P4, but as soon as you hit one mispredicted branch (inevitable at least once), virtually all of that speed advantage will evaporate. The processor&#39;s pipeline is as long as the earth\u201431 stages on Prescott."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499886971, "post_id": 45040874, "comment_id": 77104996, "body": "@CodyGray of course :). No one is arguing that the P4 is somehow generally better than current architectures, but the loop above can be made almost arbitrarily long (larger body and/or bigger tripcount), at which point the mispredict penalty for this loop will be almost arbitrarily small. I think the example is interesting because it&#39;s one which actually uses common operations and is faster both in cycles and in &quot;real time&quot;. Many examples like memory access are faster on older stuff in cycles but only because frequencies were very low, so they are not faster when measured in time."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1499887122, "post_id": 45040874, "comment_id": 77105080, "body": "... and I&#39;m also curious why we have never seen a double-pumped ALU make a re-appearance. I don&#39;t think a long pipeline was a prerequisite for the double pumped ALU, but more orthogonal (indeed, the fact that the <i>latency</i> of dependent operations was 0.5 cycles shows that the ALU itself wasn&#39;t really pipelined (in the traditional sense - I think there was some &quot;width pipelining&quot; where the first half of the result fed into the next operation in the first cycle, with the second half coming in the next cycle). I guess it&#39;s just too restrictive to design an ALU like that."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1499887565, "post_id": 45040874, "comment_id": 77105313, "body": "I&#39;m sort of surprised we haven&#39;t seen it re-emerge, also. There were basically two ideas in P4/Netburst that were good: the double-pumped ALU and the &#181;op cache. The latter made it into Sandy Bridge, but the former is still MIA. <i>My</i> guess would be that it&#39;s simply too expensive. The only reason they had a double-pumped ALU in Netburst was because they had no choice if they wanted real-world performance anywhere close to the same ballpark as the P6, especially in the earlier revisions. They aren&#39;t forced into doing it anymore, so they haven&#39;t. We&#39;ve got more cores now to play with, I guess."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1499888804, "post_id": 45040874, "comment_id": 77105911, "body": "Yeah, although the uop cache in SnB is quite different than the trace-cache in P4 (neither is strictly better than the other, but I think the trace-cache had more glass jaws). I don&#39;t remember if the 64-bit variants of the P4 were also double pumped with the same performance? Maybe the width-pipelining that was feasible for 32-bit ops (using 2 chained 16-bit ALUs) just didn&#39;t work for 64-bit operations (since effectively you need to propagate across 128 bits in a single cycle for something like <code>add</code>). Asked <a href=\"https://stackoverflow.com/q/45066299/149138\">over here</a>."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": false, "score": 3, "last_activity_date": 1499820139, "last_edit_date": 1499820139, "creation_date": 1499793382, "answer_id": 45040874, "question_id": 45040663, "link": "https://stackoverflow.com/questions/45040663/write-a-code-which-runs-in-more-cpu-cycles-on-newer-cpu-than-on-old-cpu/45040874#45040874", "title": "Write a code which runs in more cpu cycles on newer cpu than on old cpu", "body": "<p>The Pentium 4 had a double pumped ALU, so pretty much any simple chain of dependent ALU ops will execute at two ops per cycle on a P4, but one op per cycle on all recent architectures.   </p>\n\n<p>For example: </p>\n\n<pre><code>top:\nor eax, eax\nor eax, eax\nor eax, eax\nor eax, eax\n...\nsub ecx, 1\njnz top\n</code></pre>\n\n<p>Beyond that, (much) older architectures had single cycle memory access, and later access in a handful of cycles, while today memory access is hundreds of cycles. So anything which depends on memory latency will often run in fewer cycles on older architectures. The simple example is a pointer chasing loop. </p>\n\n<p>Similarly for mispredicted branches: the short(er) pipelines of older architectures meant that mispredicted branches had a shorter penalty in cycles. This penalty probably peaked around the P4, then came down to around 15 cycles had has been relatively steady since. </p>\n"}], "owner": {"reputation": 307, "user_id": 4920739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0771c643189144477a376f168c3adda8?s=128&d=identicon&r=PG&f=1", "display_name": "vguberinic", "link": "https://stackoverflow.com/users/4920739/vguberinic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1499793605, "answer_count": 1, "score": -1, "last_activity_date": 1499820139, "creation_date": 1499792601, "last_edit_date": 1499793590, "question_id": 45040663, "link": "https://stackoverflow.com/questions/45040663/write-a-code-which-runs-in-more-cpu-cycles-on-newer-cpu-than-on-old-cpu", "closed_reason": "Needs more focus", "title": "Write a code which runs in more cpu cycles on newer cpu than on old cpu", "body": "<p>I'm looking for a code which will cause perf degradation when moving to newer cpu. I know this is theoretically possible, but I'm having hard time finding example which would work.</p>\n\n<p>Some constraints:</p>\n\n<ul>\n<li><p>It should be single threaded</p></li>\n<li><p>It should be compiled for either i386 or oldset x86_64 or be handwritten assembly</p></li>\n<li><p>If compiled it should statically link against all libraries so that libc can't load optimised versions of libraries at runtime</p></li>\n<li><p>Clock cycles can be approximated as time of execution / max frequency. Or some perf tool can be used. This is in order to avoid some RISC code which would run blazingly fast on 4GHz pentium 4s.</p></li>\n</ul>\n\n<p>My current idea is to overload instruction issue buffer with branches, but have no idea how to implement that effectively. Other approaches are welcome. The more ways to sink perf, the better.</p>\n"}, {"tags": ["c", "variables", "initialization"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1499791762, "post_id": 45040329, "comment_id": 77054823, "body": "any optimization step would initialize your variables in whatever way is best, do whatever makes your code clear"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1499791883, "post_id": 45040329, "comment_id": 77054897, "body": "always initalize your variables when you declare them. Always declare them as close to where you need them (ie not at the start). The second is a style issue, but is the generally accepted one"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 4, "creation_date": 1499792119, "post_id": 45040329, "comment_id": 77055032, "body": "Stop worrying about optimizing (<i>wasting processor time</i>) unless you&#39;ve got a performance issue in your code and a profiler says something is a bottleneck. When you&#39;ve gotten your code so well written that the only bottlenecks you&#39;ve hit are variable initializations, you can stop coding, because you&#39;ve become a true Programming God."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499793721, "post_id": 45040329, "comment_id": 77056002, "body": "My preference is to define variables at the start of the function. Given that functions should ideally not be too complicated, is there any real need to define variables at block scope? Aside: another &quot;advance&quot; in C which I can&#39;t see the need for (and never use) is the formal boolean type."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1499793928, "post_id": 45040329, "comment_id": 77056097, "body": "@pm100 &#39;always initalize your variables when you declare them&#39; well, what it you don&#39;t know what to initialize them to at that time?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499793977, "post_id": 45040329, "comment_id": 77056127, "body": "@MartinJames a sensible &quot;default&quot; value? Or a specific out-of-limit value that you can trap without relying on the compiler to find an uninitialised value?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499794412, "post_id": 45040329, "comment_id": 77056375, "body": "@MArtinJames then declare them when you do know the value. By definition you dont need them till then"}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 1, "creation_date": 1499796384, "post_id": 45040329, "comment_id": 77057566, "body": "a) Consider that if you do write dummy values to your variables <i>just for the sake of initialization</i>, tools like Valgrind may fail to detect actual errors. Valgrind will detect reading  &#39;unwritten&#39; memory.  b) If you keep your functions short, the problem tends to go away since the code is so much clearer. c) If you use C89 decl (at top of block) and you want to assert() some condition before assigning, well, then you have a problem if you initialize at declaration..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1499801048, "post_id": 45040329, "comment_id": 77060206, "body": "@BjornA. Very interesting <a href=\"https://stackoverflow.com/questions/45040329/alway-initialize-variables-in-c/45040827#comment77057566_45040329\">1st point</a>."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499792838, "post_id": 45040415, "comment_id": 77055492, "body": "@chux I removed that example, it was faulty on it&#39;s own."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1499794405, "post_id": 45040415, "comment_id": 77056372, "body": "Sometimes <code>&#47;* &quot;old-style&quot; comments *&#47;</code> are preferable :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1499838187, "last_edit_date": 1499838187, "creation_date": 1499791841, "answer_id": 45040415, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c/45040415#45040415", "title": "Always initialize variables in C", "body": "<p>In general, yes, it is always better choice to initialize variables (<em>local scoped, automatic storage, specifically</em>) upon definition. Doing so avoids the possibility of using unitialized values, which <em>may</em> lead to undefined behaviour.</p>\n\n<p>For example, a simple case,</p>\n\n<pre><code>int x;\n\n//...after some code\nif (/*some options*/) x = 0;\n\n//after some more code\n\nif (x == 5) {....\n</code></pre>\n\n<p>the above snippet can certainly lead to UB in case the <code>if</code> evaluates to false. However, while defining <code>x</code>, if we initialize, like</p>\n\n<pre><code> int x = -1;\n</code></pre>\n\n<p>then, at least, we can avoid the UB.</p>\n\n<p><em>Note: This does not justify ignoring compiler warning (possible use of unitialized variable) though, it's just an example.</em></p>\n\n<p>That said, with proper optimization enabled, for a compiler it does not matter where you define your variable, but for the readability purpose, you should always define the variables close/prior to it's usage. That's again, a <em>recommendation</em>, not a <em>rule</em>.</p>\n\n<p>There's a nice Q&amp;A on <a href=\"https://softwareengineering.stackexchange.com/q/223862/110624\">softwareengineering SE</a>, do read that.</p>\n"}, {"comments": [{"owner": {"reputation": 201, "user_id": 8039793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d552f2bf1e94d5401e06452aa51477a?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Weinert", "link": "https://stackoverflow.com/users/8039793/henry-weinert"}, "edited": false, "score": 0, "creation_date": 1499793233, "post_id": 45040725, "comment_id": 77055734, "body": "Thank you for your advice! But no, I&#39;ve actually understand the difference between an initialization and declaration. I would say declaration means &quot;creating&quot; a variable and initialization gives the variable a start value (just like you). I personally have chosen to follow the old rule. Based on good designating names which you see first then it is easier to guess what the sequence of code does, I think."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 201, "user_id": 8039793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d552f2bf1e94d5401e06452aa51477a?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Weinert", "link": "https://stackoverflow.com/users/8039793/henry-weinert"}, "edited": false, "score": 0, "creation_date": 1499794380, "post_id": 45040725, "comment_id": 77056357, "body": "@HenryWeinert also the difference between &quot;declaration&quot; and &quot;implementation&quot;. For a variable <code>extern int i;</code> is a declaration but <code>int i;</code> is its implementation. For a function the prototype <code>int myfunc(int val);</code> is a declaration but <code>int myfunc(int val) { return val + 1; }</code> is its implementation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499795893, "post_id": 45040725, "comment_id": 77057260, "body": "@WeatherVane There is also the difference of variables  <code>int i_at_file_scope;</code> as a <i>tentative definition</i> and <code>int i_at_function_scope;</code> as a <i>definition</i>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499795987, "post_id": 45040725, "comment_id": 77057307, "body": "@chux indeed a variable (unintialised) may be defined more than once at file scope, but not at function scope."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1499792833, "creation_date": 1499792833, "answer_id": 45040725, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c/45040725#45040725", "title": "Always initialize variables in C", "body": "<p>You confuse <em>initialization</em> with <em>declaration</em>. Initialization is giving a variable its initial value, and if you can, it's good style to initialize variables. You <strong>must</strong> give a variable a value before you use it anyways.</p>\n\n<p>But your question seems to be about <em>where to declare</em> variables. The commonly accepted best practice is <em>as close to the usage as possible</em>.</p>\n\n<p>With C89, variables must be declared at the beginning of a block. The only reason I could think of to stick to this rule (short of being compatible with a very old standard) is that it encourages you to keep your functions and blocks short. But I'm not in favor of such arguments, because you can still keep functions and blocks short (definitely good practice) while declaring variables only when they're actually used, which makes the code slightly better readable.</p>\n"}, {"tags": [], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "is_accepted": false, "score": 1, "last_activity_date": 1499793130, "creation_date": 1499793130, "answer_id": 45040809, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c/45040809#45040809", "title": "Always initialize variables in C", "body": "<p>Compilers are smart enough to optimize your code doesn't matter whether you define variables at the beginning or at the middle of a code scope. </p>\n\n<p>In many cases, defining a variable right the time you need it looks more readable since you can easily trace back what type of the variable is and what is the variable used for (especially with very-long code snippet).</p>\n\n<p>However, initializing variables as soon as defining it is a good behavior since it help avoiding undefined behaviors due to accessing un-initialized variables.</p>\n"}, {"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1499924505, "post_id": 45040827, "comment_id": 77116982, "body": "as automatic variables are normally declared without initializing them, allocating a large array is the same as allocating a small variable.... only the value added to the stack pointer to reserve the space needed changes.  This is different if you have to initialize automatic variables, or with parameters (that are always initialized)."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1499793823, "last_edit_date": 1499793823, "creation_date": 1499793202, "answer_id": 45040827, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c/45040827#45040827", "title": "Always initialize variables in C", "body": "<blockquote>\n  <p>Some programmers say that you should always declare all variables in a beginning of a sequence (function) first in C ...</p>\n</blockquote>\n\n<p>I find declaring variables close to  where there are used first is better. <a href=\"https://stackoverflow.com/questions/45040329/alway-initialize-variables-in-c#comment77054897_45040329\">@pm100</a></p>\n\n<p>Yet this is a style issue.  Best to follow your group's coding standard.</p>\n\n<blockquote>\n  <p>Is it also a good idea to initialize all variables at the beginning or is it a waste of processor time?</p>\n</blockquote>\n\n<p>With simple variables this is not a \"waste of processor time\".</p>\n\n<p>With long arrays, there is a small chance of significant delay.</p>\n\n<pre><code>#define N 4096\nchar buf[N];\n// or\nchar buf[N] = { 0 };\nif (fread(buf, sizeof buf[0], N, ...\n</code></pre>\n\n<p>Perform \"unneeded\" initialization per your group's coding standard.</p>\n\n<p>Consider 4 cases: 3 have potential UB</p>\n\n<pre><code>// No initialization\nchar buf1[N];\nfgets(buf1, sizeof buf1, stdin);\nfputs(buf1, stdout);\n\n// Initialization\nchar buf2[N] = {0};\nfgets(buf2, sizeof buf2, stdin);\nfputs(buf2, stdout);\n\n// No initialization, early assignment\nchar buf3[N];\nbuf3[0] = '\\0';\nfgets(buf3, sizeof buf3, stdin);\nfputs(buf3, stdout);\n\n// No initialization, test function result that populates buf4\nchar buf4[N];\nif (fgets(buf4, sizeof buf4, stdin)) {\n  fputs(buf4, stdout);\n}\n</code></pre>\n\n<blockquote class=\"spoiler\">\n  <p> Only <code>if (fgets(buf4, sizeof buf4, stdin))</code> is proper protection against a read error which ends with \"the array contents are indeterminate\".</p>\n</blockquote>\n\n<p>I neither critique for nor against unnecessary initialization as 1) compilers often (not always) detect and warn about missing initialization/assignment 2) Coding problems I see tend to exist in not examining error status and 3) as with holy war issues like <a href=\"https://en.wikipedia.org/wiki/Indent_style\" rel=\"nofollow noreferrer\">Indent style</a>  this, I follow my group's coding standard - whatever it is.</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1499795583, "creation_date": 1499795583, "answer_id": 45041484, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c/45041484#45041484", "title": "Always initialize variables in C", "body": "<p><em>Just to point out a dissonant view (I agree initialization is good).</em></p>\n\n<p>When the variable is going to be used as the counter in a <code>for</code> loop, I find that initializing it looks worse than assignment</p>\n\n<pre><code>int i = 0;              // initialization\nfor (; i &lt; 100; i++) {\n    // code, code, code\n    if (foo == bar) i = 999;\n    // code, code, code\n}\nif (i == 999) exit(EXIT_FAILURE);\n</code></pre>\n\n<hr>\n\n<pre><code>int i;\nfor (i = 0; i &lt; 100; i++) { // assignment\n    // code, code, code\n    if (foo == bar) i = 999;\n    // code, code, code\n}\nif (i == 999) exit(EXIT_FAILURE);\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 8039793, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d552f2bf1e94d5401e06452aa51477a?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Weinert", "link": "https://stackoverflow.com/users/8039793/henry-weinert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3204, "favorite_count": 1, "accepted_answer_id": 45040827, "answer_count": 5, "score": 3, "last_activity_date": 1499838187, "creation_date": 1499791574, "last_edit_date": 1499805878, "question_id": 45040329, "link": "https://stackoverflow.com/questions/45040329/always-initialize-variables-in-c", "title": "Always initialize variables in C", "body": "<p>Some programmers say that you should always declare all variables in a beginning of a sequence (function) first in C although it is not necessary anymore since C99. Is it also a good idea to initialize all variables at the beginning or is it a waste of processor time?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 1, "creation_date": 1499791543, "post_id": 45040135, "comment_id": 77054684, "body": "It looks like he statement <code>while((s[0] = c = getch()) == &#39; &#39; || c == &#39;\\t&#39;);</code> is used to remove any leading white space before a token.  Given you input, yes the first character read is <code>1</code>, which is assigned to c <i>and</i> s[0].  also 1 != &#39; &#39; and 1 != &#39;\\t&#39; so the check will fail, and we fall through to the rest of the function.  The next if is used to catch operators.  Finally, the lines after <code>i=0</code> is used to extract the numbers."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1499791555, "post_id": 45040135, "comment_id": 77054692, "body": "I don&#39;t understand what you&#39;re asking but <a href=\"https://stackoverflow.com/questions/31630268/k-and-r-reverse-polish-notation?rq=1\" title=\"k and r reverse polish notation\">stackoverflow.com/questions/31630268/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/33299349/getop-function-kr-book-p-78?rq=1\" title=\"getop function kr book p 78\">stackoverflow.com/questions/33299349/&hellip;</a> are related."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1499811096, "post_id": 45040135, "comment_id": 77064928, "body": "It&#39;s not clear that the function handles EOF properly."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7122060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5136039dc24105af61c732e3fe815f19?s=128&d=identicon&r=PG&f=1", "display_name": "nikumbh tyagi", "link": "https://stackoverflow.com/users/7122060/nikumbh-tyagi"}, "edited": false, "score": 0, "creation_date": 1499792277, "post_id": 45040456, "comment_id": 77055127, "body": "Now where does s[++i] = c gets it&#39;s remaining input. Like if we input 123, s[0] will have &#39;1&#39; and s[1] will be &#39;\\0&#39;. what about remaining &#39;23&#39;. where does it get saved ?"}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 39, "user_id": 7122060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5136039dc24105af61c732e3fe815f19?s=128&d=identicon&r=PG&f=1", "display_name": "nikumbh tyagi", "link": "https://stackoverflow.com/users/7122060/nikumbh-tyagi"}, "edited": false, "score": 0, "creation_date": 1499793451, "post_id": 45040456, "comment_id": 77055866, "body": "S[1] gets null but then what happen? The program does not return and infact it will overwrite S[1] with 2. Try to execute the code with a debugger line by line and you will get it :)"}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 0, "last_activity_date": 1499792003, "creation_date": 1499792003, "answer_id": 45040456, "question_id": 45040135, "link": "https://stackoverflow.com/questions/45040135/how-does-the-function-getop-from-the-c-programming-book-work/45040456#45040456", "title": "How does the function getop() from &quot;The C Programming Book&quot; work?", "body": "<p>Lets break it down piece by piece:</p>\n\n<ul>\n<li><code>while((s[0] = c = getch()) == ' ' || c == '\\t')</code> skips all spaces and tabulation from the beginning fo the string. At the end of this loop <code>s[0]</code> contains the first char which is not either of the two mentioned before.</li>\n</ul>\n\n<p>Now if <code>c</code> is something other than <code>.</code> or a digit we simply return that.</p>\n\n<pre><code>   if(!isdigit(c) &amp;&amp; c != '.') {\n        return c;\n    }\n</code></pre>\n\n<p>If <code>c</code> is not a digit we are done and it's quite right to set  <code>s[1]</code> to <code>null</code>! </p>\n\n<p>Otherwise, if <code>c</code> is a digit we read as much digit chars as we can overwriting <code>s</code> from position <code>1</code>. s[1] was '\\0' but it does not matter because s[++i] would be s[1] at the very first iteration of </p>\n\n<pre><code> i = 0;\n    if(isdigit(c))\n        while(isdigit(s[++i] = c = getch()))\n</code></pre>\n\n<p>so <code>s</code> is kept in a consistent status.</p>\n"}], "owner": {"reputation": 39, "user_id": 7122060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5136039dc24105af61c732e3fe815f19?s=128&d=identicon&r=PG&f=1", "display_name": "nikumbh tyagi", "link": "https://stackoverflow.com/users/7122060/nikumbh-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499792365, "creation_date": 1499790921, "last_edit_date": 1499792365, "question_id": 45040135, "link": "https://stackoverflow.com/questions/45040135/how-does-the-function-getop-from-the-c-programming-book-work", "title": "How does the function getop() from &quot;The C Programming Book&quot; work?", "body": "<pre><code>int getop(char *s) {\n    int i, c;\n\n    while((s[0] = c = getch()) == ' ' || c == '\\t')\n           ;\n\n    s[1] = '\\0';\n\n    if(!isdigit(c) &amp;&amp; c != '.') {\n        return c;\n    }\n\n    i = 0;\n    if(isdigit(c))\n        while(isdigit(s[++i] = c = getch()))\n                ;\n\n    if(c == '.')\n        while(isdigit(s[++i] = c = getch()))\n                ;\n\n    s[i] = '\\0';\n\n    if(!isdigit(c))\n        ungetch(c);\n\n    return NUMBER;\n\n}\n</code></pre>\n\n<p>I came across this fucntion while working on an example named \"Reverse polish calculator\".\nwe can input numbers for calculator operations via this function, but I'm not getting the working of this function. Like.,</p>\n\n<p>if we enter some input like ----></p>\n\n<pre><code>12.34 11.34 +\n</code></pre>\n\n<p>From</p>\n\n<pre><code>while((s[0] = c = getch()) == ' ' || c == '\\t')\n    ;\ns[1] = '\\0';\n</code></pre>\n\n<p>s will contain 1. But from where does the remaining input goes inside s ?</p>\n\n<p>I've gone through this function well and I came to know it's working but then I want to know the deep working, like the complete flow.\nAny help is highly appriciated.</p>\n\n<p>edit:-\nAfter testing various inputs I came to the conclusion that what is the need for getch() and ungetch(), I mean yeah they are there to unread character that is not needed but than look at the test cases.,</p>\n\n<pre><code>  int getop(char *s) {\n    int i, c;\n\n    while((s[0] = c = getchar()) == ' ' || c == '\\t')\n        ;\n\n    s[1] = '\\0';\n\n    if(!isdigit(c) &amp;&amp; c != '.') {\n        return c;\n    }\n\n    i = 0;\n    if(isdigit(c))\n        while(isdigit(s[++i] = c = getchar()))\n                ;\n\n    if(c == '.')\n        while(isdigit(s[++i] = c = getchar()))\n                ;\n\n    s[i] = '\\0';\n\n   /* if(!isdigit(c))\n        ungetch(c);*/\n\n    return NUMBER;\n\n\n}\n</code></pre>\n\n<p>Here I replaced getch() with getchar() and it still accepted the input</p>\n\n<pre><code>12a 12 -\n</code></pre>\n\n<p>and the output was absolutely correct and it unread 'a' character as well</p>\n\n<pre><code>144\n</code></pre>\n\n<p>and so was the case when I was using getch() ?</p>\n"}, {"tags": ["c", "arrays", "string", "while-loop"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499791079, "post_id": 45040024, "comment_id": 77054397, "body": "<code>while(array[j][k] != &#39;\\0&#39;)</code> ==&gt; <code>if(array[j][k] == &#39;\\0&#39;) {break;}</code> because you are already looping <code>k</code>. The following lines should use index <code>k</code> not <code>1</code>, assuming you want to uppercase every <code>&#39;a&#39;</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1499791080, "post_id": 45040024, "comment_id": 77054399, "body": "Why are you expecting any results? Your code doesn&#39;t output anything."}, {"owner": {"reputation": 67, "user_id": 8285107, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/aa5492c370a84de77c9f5d32dcd1e222?s=128&d=identicon&r=PG&f=1", "display_name": "Ram Sharma", "link": "https://stackoverflow.com/users/8285107/ram-sharma"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1499791170, "post_id": 45040024, "comment_id": 77054462, "body": "@ChrisTurner the programme does not terminate, it keeps on taking inputs"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499791287, "post_id": 45040024, "comment_id": 77054524, "body": "No - it only takes in <code>num_test</code> lines of input. It doesn&#39;t terminate because of the unnecessary <code>while</code> loop as per @WeatherVane&#39;s comment"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1499791374, "post_id": 45040024, "comment_id": 77054568, "body": "Indeed the <code>while</code> loop will never terminate, once begun because its body changes nothing that will cause it to terminate."}, {"owner": {"reputation": 67, "user_id": 8285107, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/aa5492c370a84de77c9f5d32dcd1e222?s=128&d=identicon&r=PG&f=1", "display_name": "Ram Sharma", "link": "https://stackoverflow.com/users/8285107/ram-sharma"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1499791405, "post_id": 45040024, "comment_id": 77054589, "body": "tx @WeatherVane it was a stupid one sorry for that"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1499791662, "post_id": 45040024, "comment_id": 77054768, "body": "This is a good time to learn how to use a debugger - you can step through your code line by line and see what it is doing"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1499794146, "post_id": 45040024, "comment_id": 77056211, "body": "This is also a good time to learn how to give meaningful names to variables. &#39;array&#39;, &#39;i,j,k&#39; and the like are unhelpful:("}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1499792365, "creation_date": 1499792365, "answer_id": 45040576, "question_id": 45040024, "link": "https://stackoverflow.com/questions/45040024/the-program-does-not-terminate/45040576#45040576", "title": "the program does not terminate", "body": "<p>In this code block </p>\n\n<pre><code>for (j=0;j&lt;num_test;j++){\n    for (k=0;k&lt;35;k++){\n        while(array[j][k] != '\\0'){\n            if (array[j][1] == 'a'){\n                array[j][1] = 'A';\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>You have an unnecessary <code>while</code> loop which will never terminate, once begun, because nothing within that loop will change the result of loop condition. Assuming your aim is to change every occurrence of <code>'a'</code> to <code>'A'</code> I suggest</p>\n\n<pre><code>for(j = 0; j &lt; num_test; j++) {\n    for(k = 0; k &lt; 35; k++) {\n        if(array[j][k] == '\\0') {\n            break;                      // quit when terminator found\n        }\n        if(array[j][k] == 'a') {        // changed 1 to k\n            array[j][k] = 'A';          // changed 1 to k\n        }\n    }\n}\n</code></pre>\n\n<p>I would also suggest replacing the \"magic number\" <code>35</code> with a <code>#define</code> or <code>const int</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 8285107, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/aa5492c370a84de77c9f5d32dcd1e222?s=128&d=identicon&r=PG&f=1", "display_name": "Ram Sharma", "link": "https://stackoverflow.com/users/8285107/ram-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1499792365, "creation_date": 1499790545, "last_edit_date": 1499791110, "question_id": 45040024, "link": "https://stackoverflow.com/questions/45040024/the-program-does-not-terminate", "title": "the program does not terminate", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\n\nint main(){\n\n    int num_test,i,j,k;\n    scanf(\"%d \",&amp;num_test);\n    char array[num_test][35];\n    for (i=0;i&lt;num_test;i++){\n        fgets(array[i],35,stdin);\n        array[i][strcspn(array[i],\"\\n\")]='\\0';\n    }\n    for (j=0;j&lt;num_test;j++){\n        for (k=0;k&lt;35;k++){\n            while(array[j][k] != '\\0'){        // I am seeing when the name entered ends then this loop should stop. \n                if (array[j][1] == 'a'){\n                    array[j][1] = 'A';\n                }\n            }\n        }           \n    }\n    return 0;\n}\n</code></pre>\n\n<p>The above code does not terminate but keeps on taking inputs and shows no result. The problem does not persist if I remove the second for loop. I am inputting 2 to scanf and then james and then bond to the two fgets but it just keeps on asking for more inputs.</p>\n"}, {"tags": ["c", "function", "pointers", "struct", "member"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1499790262, "post_id": 45039864, "comment_id": 77053885, "body": "<code>s-&gt;message</code> : <code>char message[];</code> doesn&#39;t have spaces."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 2, "creation_date": 1499790582, "post_id": 45039864, "comment_id": 77054089, "body": "The problem is that you have two variables named s. The inner int s shadows the outer Solution *s. If you use gcc, the -Wshadow flag is nifty to locate issues like this one."}, {"owner": {"reputation": 252, "user_id": 8290688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0c22c02dedc177740890e4e3dfd2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/8290688/henry"}, "reply_to_user": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1499791214, "post_id": 45039864, "comment_id": 77054485, "body": "@BjornA. Thanks I though it would be something simple I can&#39;t believe I didn&#39;t notice the conflict. Thanks for the compiler tip too."}], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": true, "score": 0, "last_activity_date": 1499791009, "last_edit_date": 1499791009, "creation_date": 1499790692, "answer_id": 45040075, "question_id": 45039864, "link": "https://stackoverflow.com/questions/45039864/c-error-when-assigning-structure-member-in-function/45040075#45040075", "title": "c- Error when assigning structure member in function", "body": "<p>The problem is that you are not closing the <code>for(int s=...</code> correctly and the compiler thinks that by <code>s-&gt;</code> you are referring to the loop variable <code>s</code> instead of the <code>Solution* s</code> function parameter.</p>\n\n<p>That is why you get that <em>invalid type</em> error.</p>\n\n<p>The following is a fixed (and better indented) version:</p>\n\n<pre><code>void Ceaser(struct Solution *s, char cipherText[], int mode) {\n  int len = strlen(cipherText);\n  int c;\n  int key = s-&gt;key;\n\n  for (int s = 0; s &lt;= 26; ++s) {\n    if (mode == DECRYPT) {\n      key *= -1;\n    }\n\n    for (int i = 0; i &lt; len; ++i) {\n      c = cipherText[i];\n\n      if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n        cipherText[i] = 'A' + ((c + key - 'A') % 26);\n      } else if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n        cipherText[i] = 'a' + ((c + key - 'a') % 26);\n      }\n    }\n  } //&lt;--------was missing \n\n  strcpy(s-&gt;message, cipherText);\n}\n</code></pre>\n\n<p>If you let the compiler warning <code>-Wshadow</code> works what you get is very informative.</p>\n\n<pre><code>g++\ntest.cpp:65:30: note: shadowed declaration is here\n void Ceaser(struct Solution *s, char cipherText[], int mode) {\n\nclang++\nnote: previous declaration is here\nvoid Ceaser(struct Solution *s, char cipherText[], int mode) {\n\n\nicpc\nwarning #1599: declaration hides parameter \"s\" (declared at line 65)\n    for (int s = 0; s &lt;= 26; ++s) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1499790866, "creation_date": 1499790866, "answer_id": 45040123, "question_id": 45039864, "link": "https://stackoverflow.com/questions/45039864/c-error-when-assigning-structure-member-in-function/45040123#45040123", "title": "c- Error when assigning structure member in function", "body": "<pre><code>void Ceaser(struct Solution *s, char cipherText[], int mode){\n....\nfor (int s = 0; s &lt;= 26; ++s){\n</code></pre>\n\n<p>Can you not see the obvious conflict here - you are using the same variable name twice. The <code>int s</code> will override the previous declaration of <code>s</code> for the scope of the for loop so your code won't be able to interact with the one declared previously.</p>\n\n<p>Change the first <code>s</code> into a proper variable name (ie \"solution\") so that you avoid the conflict and also is obvious what the purpose of the variable is. Single character variables aren't very clear what they're for, even if they're just used in for loops.</p>\n"}], "owner": {"reputation": 252, "user_id": 8290688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0c22c02dedc177740890e4e3dfd2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/8290688/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 45040075, "answer_count": 2, "score": 0, "last_activity_date": 1499818831, "creation_date": 1499790057, "last_edit_date": 1499818831, "question_id": 45039864, "link": "https://stackoverflow.com/questions/45039864/c-error-when-assigning-structure-member-in-function", "title": "c- Error when assigning structure member in function", "body": "<p>I am writing a program in C to find the shift in a ceaser cipher. </p>\n\n<p>As part of this I first perform every possible shift, 0-26, on the message to decipher, I use a struct to store the shift and the message. To do this I have passed a structure to a function as a pointer. However, when I try to change the message member of the struct to the deciphered message I get the error: invalid type argument of '->' (have 'int') on the line 'strcpy(s->message, cipherText);'.</p>\n\n<p>In the function I also assign a local variable to a structure member and this works fine.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define ENCRYPT 0\n#define DECRYPT 1\n\nstruct Solution {\n    int key;\n    char message[];\n};\n\nvoid Ceaser(struct Solution *s, char cipherText[], int mode);\n\nvoid main(){\n    struct Solution solutions[26];\n    char cipherText[] = \"lipps, asvph.\";\n\n    for (int i = 0; i &lt;= 26; ++i) {\n        solutions[i].key = i;\n        Ceaser(&amp;solutions[i], cipherText, DECRYPT);\n        printf(\"Key: %d\\tPlain text: %s\\n\", solutions[i].key, \n        solutions[i].message);\n    }\n}\n\nvoid Ceaser(struct Solution *s, char cipherText[], int mode) {\n\n    int len = strlen(cipherText);\n    int c;\n    int key = s-&gt;key;\n\n    for (int s = 0; s &lt;= 26; ++s) {\n        if (mode == DECRYPT) {\n            key *= -1;\n        }\n\n        for (int i = 0; i &lt; len; ++i) {\n            c = cipherText[i];\n\n            if (c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n                cipherText[i] = 'A' + ((c + key - 'A') % 26);           \n            } else if (c &gt;= 'a' &amp;&amp; c &lt;= 'z') {\n                cipherText[i] = 'a' + ((c + key - 'a') % 26);           \n            }\n        }\n    //Error occurs below\n    strcpy(s-&gt;message, cipherText);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1499789794, "post_id": 45039746, "comment_id": 77053616, "body": "Maybe <code>while (fgets(line, sizeof(line), file) &amp;&amp; *line != &#39;\\n&#39;)</code>? Can&#39;t say more without you presenting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 2, "creation_date": 1499789847, "post_id": 45039746, "comment_id": 77053638, "body": "It&#39;s not missed, it&#39;s saved into <code>line</code>. are you calling <code>fgets</code>again inside the loop?"}, {"owner": {"reputation": 31, "user_id": 8271870, "user_type": "registered", "profile_image": "https://graph.facebook.com/1193051860798803/picture?type=large", "display_name": "Dina Gurevich", "link": "https://stackoverflow.com/users/8271870/dina-gurevich"}, "reply_to_user": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 0, "creation_date": 1499790023, "post_id": 45039746, "comment_id": 77053741, "body": "@IlBeldus Yes, that was the problem. Thanks :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1499794251, "post_id": 45039746, "comment_id": 77056283, "body": "<code>while (fgets(line, sizeof(line), file))</code> does not move the cursor.  It is other unposted code that is the issue - likely the <code>&#39;\\n&#39;</code> in <code>line[]</code> getting printed."}], "owner": {"reputation": 31, "user_id": 8271870, "user_type": "registered", "profile_image": "https://graph.facebook.com/1193051860798803/picture?type=large", "display_name": "Dina Gurevich", "link": "https://stackoverflow.com/users/8271870/dina-gurevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1499789714, "creation_date": 1499789635, "last_edit_date": 1499789714, "question_id": 45039746, "link": "https://stackoverflow.com/questions/45039746/reading-txt-file-in-c-to-lines", "title": "reading .txt file in c to lines", "body": "<p>I'm trying to read a .txt file to char arrays with a while loop: </p>\n\n<pre><code>while (fgets(line, sizeof(line), file))\n</code></pre>\n\n<p>the problem is that every-time the condition of the loop is checked the cursor is moved to the next line, meaning that a line is missed. Is there another condition I can use or a way to stop fgets from moving the cursor?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 4, "creation_date": 1499789600, "post_id": 45039683, "comment_id": 77053485, "body": "Just use the first one.  Forget the others."}, {"owner": {"reputation": 31124, "user_id": 1427124, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/900fad0b78afca7d8fafdd3d2e414182?s=128&d=identicon&r=PG", "display_name": "DaoWen", "link": "https://stackoverflow.com/users/1427124/daowen"}, "edited": false, "score": 5, "creation_date": 1499789640, "post_id": 45039683, "comment_id": 77053515, "body": "<code>x[y]</code> is the same as <code>*(x+y)</code> <i>by definition</i>. The others just follow from the commutative property of the integer <code>+</code> operation in C."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1499789883, "post_id": 45039683, "comment_id": 77053660, "body": "Awfully close, if not a duplicate: <a href=\"https://stackoverflow.com/q/381542/10077\">stackoverflow.com/q/381542/10077</a>"}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 1, "creation_date": 1499789905, "post_id": 45039683, "comment_id": 77053671, "body": "Please clarify your question.  As others have indicated, it&#39;s this way by design, so what sort of answer are you looking for when you ask &quot;why is it this way?&quot;  Are you asking &quot;Why was the language designed this way instead of that way?&quot;  Or are you asking something else entirely?"}, {"owner": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "reply_to_user": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1499790538, "post_id": 45039683, "comment_id": 77054054, "body": "@Brian I am not asking why language&#39;s syntax is so. I read that there are 4 ways to implement a same task  but unable to understand the fourth notation."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1499789626, "creation_date": 1499789626, "answer_id": 45039744, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45039744#45039744", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>They are the same because the C language specification says so. Read <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">n1570</a></p>\n"}, {"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499791314, "post_id": 45040054, "comment_id": 77054539, "body": "<code>i[arr]</code> is perfectly valid, for the same reason <code>*(i + arr)</code> is valid."}, {"owner": {"reputation": 484, "user_id": 5286400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S9mD3PopoHM/AAAAAAAAAAI/AAAAAAAAABo/26dEwCk8xr0/photo.jpg?sz=128", "display_name": "VIX", "link": "https://stackoverflow.com/users/5286400/vix"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1499791388, "post_id": 45040054, "comment_id": 77054581, "body": "Yes, I fixed. Thanks for you observation."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499791429, "post_id": 45040054, "comment_id": 77054606, "body": "You could edit your answer and say that <code>arr[i] = *(arr+i)</code> is the very definition of what the <code>[]</code> notation means."}, {"owner": {"reputation": 484, "user_id": 5286400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S9mD3PopoHM/AAAAAAAAAAI/AAAAAAAAABo/26dEwCk8xr0/photo.jpg?sz=128", "display_name": "VIX", "link": "https://stackoverflow.com/users/5286400/vix"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499791688, "post_id": 45040054, "comment_id": 77054785, "body": "@klutt I already edited it, thanks for your recommendation."}], "tags": [], "owner": {"reputation": 484, "user_id": 5286400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S9mD3PopoHM/AAAAAAAAAAI/AAAAAAAAABo/26dEwCk8xr0/photo.jpg?sz=128", "display_name": "VIX", "link": "https://stackoverflow.com/users/5286400/vix"}, "is_accepted": false, "score": 3, "last_activity_date": 1499791608, "last_edit_date": 1499791608, "creation_date": 1499790652, "answer_id": 45040054, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45040054#45040054", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>Each element in the array, have a position in memory. The positions in the arrays are sequential. The arrays in C are pointers and always point the first direction on memory for the collection (first element of the array).</p>\n\n<p><strong>arr[i]</strong> => Gets value of \"i-position\" in the array. It is the same that <code>arr[i] = *(arr + i)</code></p>\n\n<p><strong>*(arr+i)</strong> => Gets value that is in memory by adding the position in memory that point <code>arr</code> and <code>i value</code>.</p>\n\n<p><strong>*(i+arr)</strong> => Is the same that <code>*(arr+i)</code>. The sum is commutative.</p>\n\n<p><strong>i[arr]</strong> => Is the same that <code>*(i+arr)</code>. It's another way of representing.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1499791192, "last_edit_date": 1499791192, "creation_date": 1499790840, "answer_id": 45040117, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45040117#45040117", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>Lets take a look at how your array is laid out in memory:</p>\n\n<pre>\nlow address                   high address\n|                             |\nv                             v\n+----+----+----+----+----+----+\n| 34 | 65 | 23 | 75 | 76 | 33 |\n+----+----+----+----+----+----+\n^    ^    ^    ^\n|    |    |    ...etc\n|    |    |\n|    |    arr[2]\n|    |\n|    arr[1]\n|\narr[0]\n</pre>\n\n<p>That the first elements is <code>arr[0]</code>, the second <code>arr[1]</code> is pretty clear, that's what everybody learns. What is less clear is that the compiler actually translates an expression such as <code>arr[i]</code> to <code>*(arr + i)</code>.</p>\n\n<p>What <code>*(arr + i)</code> does is first get a pointer to the first element, then do pointer arithmetic to get a pointer to the wanted element at index <code>i</code>, and then dereference the pointer to get its value.</p>\n\n<p>Due to the <a href=\"https://en.wikipedia.org/wiki/Commutative_property\" rel=\"noreferrer\">commutative</a> property of addition, the expression <code>*(arr + i)</code> is equal to <code>*(i + arr)</code> which due to the above mentioned translation is equal to <code>i[arr]</code>.</p>\n\n<hr>\n\n<p>The equivalence of <code>arr[i]</code> and <code>*(arr + i)</code> is also what's behind the <em>decay</em> of an array to a pointer to its first element.</p>\n\n<p>The pointer to the arrays first element would be <code>&amp;arr[0]</code>. Now we know that <code>arr[0]</code> should be equal to <code>*(arr + 0)</code> which means <code>&amp;arr[0]</code> has to be equal to <code>&amp;*(arr + 0)</code>. Adding zero to anything is a no-op, so leading to the expression <code>&amp;*(arr)</code>. Parentheses with only one term and no operator can also be removed, leaving <code>&amp;*arr</code>. And lastly the address-of and dereference operator are each other opposites and cancel out each other, leaving us with simply <code>arr</code>. So <code>&amp;arr[0]</code> is equal to <code>arr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 1, "last_activity_date": 1499792037, "creation_date": 1499792037, "answer_id": 45040471, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45040471#45040471", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>The notation <code>a[i]</code> is syntactic sugar for <code>*(a+i)</code>.</p>\n\n<p>The first one is mathematical syntax (symbolics closer of what human brain is educated with) while the second one corresponds directly to one assembler instruction.</p>\n\n<p>On the other hand <code>*(a+i)=*(i+a)=i[a]</code> because the <a href=\"https://stackoverflow.com/questions/13668014/c-array-arithmetic-and-pointers\">arithmetic of pointers is commutative</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 1028560, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/1028560/sanjeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1552502947, "last_edit_date": 1552502947, "creation_date": 1499793845, "answer_id": 45041023, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45041023#45041023", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>It works because an array variable in C (i.e. arr in your example) is just a pointer to the beginning of an array of memory locations.  A pointer is number which represents the address of a specific memory location.  When you put and '*' in front of a pointer, it means \"give me the data in that memory location\".  </p>\n\n<ul>\n<li>So, if arr is a pointer to the beginning of the array, *(arr) or *(arr + 0) is the <strong>data in the 0th index</strong> of the array, and *(arr + 1) is the <strong>data in the 1st index</strong>, and so on.</li>\n<li>An expression which looks like <strong>A[B]</strong> essentially gets translated into something like <strong>*(A+B)</strong>.  So, <strong>arr[0] = *(arr + 0)</strong> and <strong>arr[i] = *(arr+i)</strong>, etc.  </li>\n<li>And because <strong>A+B = B+A</strong>, the two are interchangeable.  Meaning <strong>*(arr+i) = *(i+arr)</strong>.  </li>\n<li>And because <strong>arr[i] = *(arr+i)</strong> and <strong>*(arr+i) = *(i+arr)</strong>, it should make sense that <strong>arr[i] = i[arr]</strong>.  </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1499794596, "creation_date": 1499794596, "answer_id": 45041227, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same/45041227#45041227", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>These are the same because of how the array subscript operator <code>[]</code> is defined.</p>\n\n<p>From sectino 6.5.2.1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><em>2</em> A postfix expression followed by an expression in square brackets <code>[]</code>\n  is a subscripted designation of an element of an array object. <strong>The\n  definition of the subscript operator <code>[]</code> is that <code>E1[E2]</code> is\n  identical to <code>(*((E1)+(E2)))</code></strong>. Because of the conversion rules that\n  apply to the binary <code>+</code> operator, if <code>E1</code> is an array object\n  (equivalently, a pointer to the initial element of an array object)\n  and <code>E2</code> is an integer, <code>E1[E2]</code> designates the <code>E2</code>-th element of\n  <code>E1</code> (counting from zero).</p>\n</blockquote>\n\n<p>The expression <code>arr[i]</code> in your example is of the form <code>E1[E2]</code>.  Because the standard states that this is the same as <code>*(E1+E2)</code> that means that <code>arr[i]</code> is the same as <code>*(arr + i)</code>.</p>\n\n<p>Because of the commutative property of addition, <code>*(arr + i)</code> is the same as <code>*(i + arr)</code>.  Applying the equivalence rule above to this expression gives <code>i[arr]</code>.</p>\n\n<p>So in short, those 4 expressions are equivalent because of how the standard defines array subscripting and because of the commutative property of addition.</p>\n"}], "owner": {"reputation": 144, "user_id": 8216303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a06fe902da0b8f3c637f121bc6bc97fd?s=128&d=identicon&r=PG&f=1", "display_name": "daya", "link": "https://stackoverflow.com/users/8216303/daya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1499811328, "accepted_answer_id": 45040117, "answer_count": 6, "score": 1, "last_activity_date": 1552502947, "creation_date": 1499789444, "last_edit_date": 1499789742, "question_id": 45039683, "link": "https://stackoverflow.com/questions/45039683/cant-understand-why-these-four-notations-are-same", "closed_reason": "Duplicate", "title": "Can&#39;t understand why these four notations are same?", "body": "<p>Array declaration:</p>\n\n<pre><code>int arr [ ]={34, 65, 23, 75, 76, 33}; \n</code></pre>\n\n<p>Four notations: (consider i=0)</p>\n\n<pre><code>arr[i]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>*(arr+i)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>*(i+arr)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>i[arr]\n</code></pre>\n"}, {"tags": ["c", "tcp", "libcurl", "traffic"], "owner": {"reputation": 367, "user_id": 2439679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ede1c01f6af2c08c29aadc91b263051?s=128&d=identicon&r=PG", "display_name": "imen bhiri", "link": "https://stackoverflow.com/users/2439679/imen-bhiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499786011, "creation_date": 1499786011, "question_id": 45038419, "link": "https://stackoverflow.com/questions/45038419/get-syn-timestamp-using-lbcurl", "title": "get SYN timestamp using lbcurl", "body": "<p>using libcurl, I can perform file download.\nUsing libcurl, I can get some utile information like BytesReceived, download status ...<br>\nIs it possible to get SYN (TCP level) timestamps using libcurl?</p>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499783281, "post_id": 45037369, "comment_id": 77048670, "body": "<code>float* a= x[i];   float* b= x[j];</code> are actually constaint violation, IIRC."}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499783407, "post_id": 45037369, "comment_id": 77048780, "body": "Oh, I&#39;ve made a typo I will fixe it."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499783479, "post_id": 45037369, "comment_id": 77048845, "body": "<code>a ^= b;</code> is invalid. You cannot possibly use XOR on pointers and even if you could, it&#39;d be meaningless."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1499783482, "post_id": 45037369, "comment_id": 77048850, "body": "What is not clear in the error message? Bitwise operations are defined for integer types only."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1499783510, "post_id": 45037369, "comment_id": 77048868, "body": "@A.nechi  First of all it is in general a bad idea to use the XOR operator for swapping and moreover trying to use it for float numbers.:)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1499783545, "post_id": 45037369, "comment_id": 77048899, "body": "@VladfromMoscow On <i>pointers</i> to float numbers - is even a worse idea..."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 3, "creation_date": 1499784001, "post_id": 45037369, "comment_id": 77049254, "body": "Why do you think it is efficient? Usually, a regular swap with a temp variable is faster."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1499784087, "post_id": 45037369, "comment_id": 77049337, "body": "Actually XOR swapping is the exception to the rule that XOR on pointers is meaningless. You can also use AND and OR at a low level to force pointer alignment, though you have to fool the C compiler."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1499784119, "post_id": 45037369, "comment_id": 77049355, "body": "@klutt It <i>can</i> be more efficient. One can claim it is using less memory. But it is micro-optimization, and an arguable one."}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "edited": false, "score": 0, "creation_date": 1499784144, "post_id": 45037369, "comment_id": 77049377, "body": "I thought that the Xor swap uses fewer registers ...  The method that I&#39;m posting uses a lot of registers ... Or does the compiler handles this process??"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1499784316, "post_id": 45037369, "comment_id": 77049520, "body": "I suggest you read the entire Wikipedia XOR swap page that you linked to, particularly <a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm#Reasons_for_use_in_practice\" rel=\"nofollow noreferrer\">this section</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499784538, "post_id": 45037369, "comment_id": 77049718, "body": "Don&#39;t do premature optimisations. Leave this to the compiler in the first place. If your code is indeed not fast enough, profile to identify hotspots and optimise those using common patterns the compiler will recognise."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 3, "creation_date": 1499785193, "post_id": 45037369, "comment_id": 77050288, "body": "From the link you posted,  <i>Most modern compilers can optimize away the temporary variable in the native swap, in which case <b>*the native swap uses the same amount of memory and the same number of registers as the XOR swap and is at least as fast, and often faster*</b>. The XOR swap is also much less readable and completely opaque to anyone unfamiliar with the technique.</i>  In short then, just use a native swap, i.e. rotate values using a temp variable."}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4959494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ead0f7a03c24bbc1b0fae8cc0706f7e?s=128&d=identicon&r=PG&f=1", "display_name": "zerek", "link": "https://stackoverflow.com/users/4959494/zerek"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499783687, "post_id": 45037546, "comment_id": 77049005, "body": "Oh sorry, I add the rest of the answer"}, {"owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "edited": false, "score": 0, "creation_date": 1499783695, "post_id": 45037546, "comment_id": 77049010, "body": "I&#39;ve fixed it in my post please have a look again!!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1499783760, "post_id": 45037546, "comment_id": 77049058, "body": "Still, the proposed method of swapping is not going to work on floats"}], "tags": [], "owner": {"reputation": 243, "user_id": 4959494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ead0f7a03c24bbc1b0fae8cc0706f7e?s=128&d=identicon&r=PG&f=1", "display_name": "zerek", "link": "https://stackoverflow.com/users/4959494/zerek"}, "is_accepted": false, "score": -1, "last_activity_date": 1499783841, "last_edit_date": 1499783841, "creation_date": 1499783581, "answer_id": 45037546, "question_id": 45037369, "link": "https://stackoverflow.com/questions/45037369/pointer-issue-when-applying-the-xor-swap-algorithm/45037546#45037546", "title": "Pointer issue when applying the XOR swap algorithm", "body": "<p>It is normal.</p>\n\n<pre><code>  float* a= x[i];\n</code></pre>\n\n<p>is invalid. Your array of float is x.\nYou are trying to get a value from the array.\nSo it should be :</p>\n\n<pre><code>float a = x[i];\nfloat b = x[j];\n</code></pre>\n\n<p>If you put an '*', you make a pointer.\nAnyway, as <a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm\" rel=\"nofollow noreferrer\">Wikipedia</a> shows, it should not work. Only on integers.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499783849, "post_id": 45037590, "comment_id": 77049130, "body": "Floats <b>are</b> numbers. It seems OP just made another typo."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1499783906, "post_id": 45037590, "comment_id": 77049180, "body": "@Olaf cxw is talking about pointers, not floats. The op is using BW operation on pointers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1499783929, "post_id": 45037590, "comment_id": 77049195, "body": "@EugeneSh. read my comment again. The code is not what the text states, The question is unclear missing a correct mcve."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1499784353, "post_id": 45037590, "comment_id": 77049555, "body": "1) There is no &quot;_XOR trick&quot;. 2) Don&#39;t use that way at all. Leave optimizations to the compiler. 3) it is not guaranteed to be faster, could be slower as well."}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 2, "last_activity_date": 1499784370, "last_edit_date": 1499784370, "creation_date": 1499783694, "answer_id": 45037590, "question_id": 45037369, "link": "https://stackoverflow.com/questions/45037369/pointer-issue-when-applying-the-xor-swap-algorithm/45037590#45037590", "title": "Pointer issue when applying the XOR swap algorithm", "body": "<h3>Edit</h3>\n\n<p>The short answer: You cannot perform bitwise operations on pointers.  Unfortunately, you <a href=\"https://stackoverflow.com/q/1723575/2877364\">cannot perform bitwise operations on floats, either</a>!  Don't use the XOR swap for <code>float</code> values.</p>\n\n<h3>Original</h3>\n\n<p>The commenters gave you the short answer.  Now for my take on the long answer &mdash;</p>\n\n<p>Bitwise operations such as <code>^</code> are defined for integers.  However, a pointer is not necessarily an integer.  On real-mode x86, a pointer includes, or is in some way related to, two integers: a segment and an offset (<a href=\"https://en.wikipedia.org/wiki/Intel_Memory_Model\" rel=\"nofollow noreferrer\">additional info</a>). \n Worse, those two integers overlap, so changes to one also change the other.  Therefore, there is no single, unambiguous way to define <code>^</code> or other bitwise operations for pointers.</p>\n\n<p>Lots of code does assume that pointers can be treated as integers, since segmented addressing is less common than it used to be.  However, the C standard still has to support less-common architectures, so does not define bitwise operations on pointers.</p>\n\n<h3>Rest of edit</h3>\n\n<p>I see that the example you linked uses pointers.  That is because, in C, you have to use pointers to pass values back to the caller of a function through parameters.  The <a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm#Code_example\" rel=\"nofollow noreferrer\">code you linked</a> is:</p>\n\n<pre><code>void xorSwap (int *x, int *y) {\n     if (x != y) {\n         *x ^= *y;\n         *y ^= *x;\n         *x ^= *y;\n     }\n }\n</code></pre>\n\n<p>(enwiki, CC-BY-SA 3.0).  You could call that in your context as </p>\n\n<pre><code>if(x[i]!=x[j]) xorSwap(&amp;x[i], &amp;x[j]);\n</code></pre>\n\n<p>if <code>x</code> were an array of <code>int</code>s, and it would swap the contents of the array elements, as I think you expect.  When you are using XOR swap directly, rather than via a function, you do not need to use pointers at all.  For example:</p>\n\n<pre><code>if(x[i]!=x[j]) {\n    x[i] ^= x[j];\n    x[j] ^= x[i];\n    x[i] ^= x[j];\n}\n</code></pre>\n\n<p>should work, again, provided that <code>x</code> is <code>int</code> and not <code>float</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1499784965, "post_id": 45037760, "comment_id": 77050092, "body": "Why do you recommend XOR swapping for ints? It is clearly an inferior solution."}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1499785144, "post_id": 45037760, "comment_id": 77050248, "body": "@geza I don&#39;t wanted to recommend it, maybe I choose the words a bit misleading. I wanted to say that you can use it with integers if you want."}], "tags": [], "owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "is_accepted": false, "score": 2, "last_activity_date": 1499785058, "last_edit_date": 1499785058, "creation_date": 1499784135, "answer_id": 45037760, "question_id": 45037369, "link": "https://stackoverflow.com/questions/45037369/pointer-issue-when-applying-the-xor-swap-algorithm/45037760#45037760", "title": "Pointer issue when applying the XOR swap algorithm", "body": "<p>You want to swap the address and not the actual value if you do <code>a ^= b</code> with pointers. Instead you should use the values. The next problem is that you want to XOR floats and that is not possible. Instead you could take the single bytes of your float and XOR them:</p>\n\n<pre><code>void swap( float * one, float * two){\n    unsigned char* a= (unsigned char *)one;\n    unsigned char* b= (unsigned char *)two;\n\n    for(int i = 0; i &lt; sizeof(float); i++){\n        *a ^= *b;\n        *b ^= *a;\n        *a ^= *b;\n        a++;\n        b++;\n    }\n}\n\nint main(void) {\n    float one = 1.0, two = 2.0;\n\n    swap(&amp;one, &amp;two);\n    printf(\"%f    %f\", one, two); // prints 2.0000    1.0000\n    return 0;\n}\n</code></pre>\n\n<p>This is much additional work, not worth the effort and pretty sure slower. You can use XOR swapping for integer and regular swapping with a temp variable for floats.</p>\n"}], "owner": {"reputation": 187, "user_id": 8204704, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dfa102dc7018ec1ccb28ebd5b3e88000?s=128&d=identicon&r=PG&f=1", "display_name": "A.nechi", "link": "https://stackoverflow.com/users/8204704/a-nechi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 45037590, "answer_count": 3, "score": 1, "last_activity_date": 1499808063, "creation_date": 1499783198, "last_edit_date": 1499783426, "question_id": 45037369, "link": "https://stackoverflow.com/questions/45037369/pointer-issue-when-applying-the-xor-swap-algorithm", "title": "Pointer issue when applying the XOR swap algorithm", "body": "<p>I have an array of floats where I want to do some swapping. So, I looked around on the net and I found out that the most efficient way of doing it is through XOR swapping <a href=\"https://en.wikipedia.org/wiki/XOR_swap_algorithm#Code_example\" rel=\"nofollow noreferrer\">XOR swap algorithm</a></p>\n\n<p>So I have this code snippet:</p>\n\n<pre><code>  float tmp;\n  tmp   = x[i];\n  x[i]  = x[j];\n  x[j]  = tmp;\n</code></pre>\n\n<p>And I've tried to change it to the XOR swap way:</p>\n\n<pre><code>  /*Made sure that address x[i] is different than the one of x[j] */\n  float* a= &amp;x[i];\n  float* b= &amp;x[j];\n  a ^= b;\n  b ^= a;\n  a ^= b;\n</code></pre>\n\n<p>But I get this : <code>error: invalid operands to binary ^ (have \u2018float *\u2019 and \u2018float *\u2019)</code>.</p>\n\n<p>Honestly, I'm not such an expert with pointers and sometimes it confuses me, So, can someone tell me what I'm doing wrong.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1499781909, "post_id": 45036764, "comment_id": 77047572, "body": "The result is undefined. This is violation of the <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing rule</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1499781921, "post_id": 45036764, "comment_id": 77047581, "body": "Do you know <i>anything</i> about floating pointer number or how they are stored on computers? About <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">the IEEE-754 standard</a>? Continue with that after you read about strict aliasing (of which there are ways around)."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1499782092, "post_id": 45036764, "comment_id": 77047717, "body": "Which result did you expect?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1499782100, "post_id": 45036764, "comment_id": 77047726, "body": "Please try not to use both the <code>c++</code> and <code>c</code> tags. Those are two separate languages."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1499782147, "post_id": 45036764, "comment_id": 77047752, "body": "Read this literally: a float variable <code>f</code>, take its address (pointer to float), force it to pointer to int, get its contents (i.e. read the bits of the float as it were bits of an int), print it as hex number. This may work if <code>sizeof (int)</code> is <code>sizeof (float)</code> but that&#39;s not granted but compiler/platform dependend."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1499782547, "post_id": 45036764, "comment_id": 77048071, "body": "You also have to understand endianness..."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1499782060, "last_edit_date": 1499782060, "creation_date": 1499781944, "answer_id": 45036839, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number/45036839#45036839", "title": "Printf() of a float as hexadecimal number", "body": "<p>The behaviour of your code is undefined due to <code>(int*)&amp;f</code>. The C-style cast is invalid as the types are unrelated.</p>\n\n<p>If you want to inspect the memory associated with <code>f</code>, then both C and C++ allow your to cast to <code>const unsigned char*</code>, and track through the memory with pointer arithmetic up to <code>sizeof(f)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 9, "last_activity_date": 1499782188, "creation_date": 1499782188, "answer_id": 45036945, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number/45036945#45036945", "title": "Printf() of a float as hexadecimal number", "body": "<p>This is undefined behavior: the standard does not guarantee pointers to <code>int</code> and <code>float</code> to have the same alignment, so <code>(int*)&amp;f</code> cast is invalid (<a href=\"https://stackoverflow.com/a/30276722/335858\">Q&amp;A</a>).</p>\n\n<p>In your case, the cast produced a value that is consistent with IEEE-754 representation of 0.5 (5e-1) below:</p>\n\n<pre><code>bin:    0011 1111 0000 0000 0000 0000 0000 0000\n        +--- ---- -=== ==== ==== ==== ==== ====\nhex:       3    f    0    0    0    0    0    0\n</code></pre>\n\n<p>where <code>+</code> is the sign bit, <code>-</code> are exponent bits, and <code>=</code> are mantissa bits.</p>\n\n<p>However, there is absolutely no guarantee that the same program is going to produce the same result when you run it on other systems, or even that the program is going to run to completion.</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 5, "last_activity_date": 1499782234, "creation_date": 1499782234, "answer_id": 45036966, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number/45036966#45036966", "title": "Printf() of a float as hexadecimal number", "body": "<p>You may prefer</p>\n\n<pre><code>void dump(const void *data, size_t len) {\n    const unsigned char *x = data;\n    printf(\"%02x\", x[0]);\n    for (size_t k = 1; k &lt; len, k++) printf(\" %02x\", x[k]);\n    puts(\"\");\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>float f = 5e-1;\ndump(&amp;f, sizeof f);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499785776, "post_id": 45037181, "comment_id": 77050691, "body": "There is no &quot;C/C++ language&quot;. The question is about a C standard function, so it is safe to assume C only."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1499785877, "post_id": 45037181, "comment_id": 77050778, "body": "&quot;n those cases, the results or effects of the behaviors are completely rely on implementations&quot; - That would be implementation defined behaviour. UB means the behaviour can depend on the weather, state of the sun or anything else."}], "tags": [], "owner": {"reputation": 3868, "user_id": 2589553, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/490f0b6836112dc8929c72ed3f03bf68?s=128&d=identicon&r=PG", "display_name": "duong_dajgja", "link": "https://stackoverflow.com/users/2589553/duong-dajgja"}, "is_accepted": false, "score": 2, "last_activity_date": 1499782774, "creation_date": 1499782774, "answer_id": 45037181, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number/45037181#45037181", "title": "Printf() of a float as hexadecimal number", "body": "<p>Since you are new to <code>C / C++</code> - I guess - you may not have any ideas with respect to <code>undefined behaviors</code>. In short, there are some corners at which the <code>C / C++</code> languages do not <code>define</code> what should happen exactly. Why? There are a lot of reasons behind, e.g. performance. In those cases, the results or effects of the behaviors are completely rely on implementations (compilers - more specifically (e.g. gcc, vc++)).</p>\n\n<p>What you are doing here is listed at item 7 of the accepted answer to <a href=\"https://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a\">What are all the common undefined behaviours that a C++ programmer should know about?</a></p>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1499789647, "last_edit_date": 1499789647, "creation_date": 1499783434, "answer_id": 45037475, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number/45037475#45037475", "title": "Printf() of a float as hexadecimal number", "body": "<p>Others have already addressed the undefined behavior so I'll only address this part:</p>\n\n<blockquote>\n  <p>I'm having difficulties in understanding why this code results in 3f000000</p>\n</blockquote>\n\n<p>The code tries to print the binary representation of the float value 0.5 (or 5e-1).</p>\n\n<p>(<em>it does that in an illegal way though - see other answers for the correct way</em> - see this answer <a href=\"https://stackoverflow.com/a/45036945/4386427\">https://stackoverflow.com/a/45036945/4386427</a> )</p>\n\n<p>The explanation for the value 3f000000 is that your system seem to use IEEE 754 single-precision binary floating-point format (see <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Single-precision_floating-point_format</a>).</p>\n\n<p>The format uses</p>\n\n<ul>\n<li>bit 31 as sign bit (0 in your case)</li>\n<li>bit 30..23 as exponent (01111110 binary = 7e hex = 126 decimal in your case)</li>\n<li>bit 22..0 as fraction (all zero in your case)</li>\n</ul>\n\n<p>So in your case</p>\n\n<ul>\n<li>sign is 0</li>\n<li>exponent is 126</li>\n<li>fraction is 0</li>\n</ul>\n\n<p>In general the value is calculated as:</p>\n\n<blockquote>\n  <p>value = (-1)^sign * (1 + fraction) * 2^(exponent - 127)</p>\n</blockquote>\n\n<p>Since sign and fraction is 0, it is pretty easy to calculate the value: </p>\n\n<blockquote>\n  <p>value = 1 * 1 * 2^(126 - 127) = 2^-1 = 0.5</p>\n</blockquote>\n\n<p>So with IEEE 754 single-precision binary floating-point a float with value 0.5 is stored with the binary pattern 3f000000</p>\n"}], "owner": {"reputation": 61, "user_id": 7274411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M52rb.png?s=128&g=1", "display_name": "smiljanic997", "link": "https://stackoverflow.com/users/7274411/smiljanic997"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1394, "favorite_count": 0, "accepted_answer_id": 45036945, "answer_count": 5, "score": -1, "last_activity_date": 1499789647, "creation_date": 1499781799, "last_edit_date": 1499785683, "question_id": 45036764, "link": "https://stackoverflow.com/questions/45036764/printf-of-a-float-as-hexadecimal-number", "title": "Printf() of a float as hexadecimal number", "body": "<p>I'm having difficulties in understanding why this code results in <code>3f000000</code>.</p>\n\n<pre><code>float f = 5e-1;\nprintf(\"%x\", *(int*)&amp;f);\n</code></pre>\n"}, {"tags": ["c", "memory", "memory-management", "malloc", "mmap"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499781612, "post_id": 45036514, "comment_id": 77047355, "body": "I afraid no easy answer.... eg for file reading or writing usually mmap."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1499781971, "post_id": 45036514, "comment_id": 77047621, "body": "The above code won&#39;t try to allocate more than 30Mb <i>unless you ask it to</i>. Is there a reason you can&#39;t just avoid requesting too much memory in the first place?"}, {"owner": {"reputation": 170, "user_id": 2859891, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/aea1cbf521eb982eb9ab0c3b4db06b3b?s=128&d=identicon&r=PG&f=1", "display_name": "nicwhitts", "link": "https://stackoverflow.com/users/2859891/nicwhitts"}, "edited": false, "score": 0, "creation_date": 1499788329, "post_id": 45036514, "comment_id": 77052643, "body": "I&#39;m calling an encryption method which causes a termination due to memory issue, as I&#39;m crossing my given 30mb threshold. So i traced the allocation to this function. Are you saying that if i just tell it to allocate 20mb it can still perform the operation with just 20mb allocated? I have updated my original post to show the call to alloc_region"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1499788684, "post_id": 45036514, "comment_id": 77052915, "body": "why not write your own malloc that keeps track of how much is allocated"}, {"owner": {"reputation": 170, "user_id": 2859891, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/aea1cbf521eb982eb9ab0c3b4db06b3b?s=128&d=identicon&r=PG&f=1", "display_name": "nicwhitts", "link": "https://stackoverflow.com/users/2859891/nicwhitts"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1499801376, "post_id": 45036514, "comment_id": 77060369, "body": "@Useless i think your right now reviewing code, I&#39;m having errors when trying to allocate less memory now though. I think a new question would be needed."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1499789571, "last_edit_date": 1499789571, "creation_date": 1499781366, "answer_id": 45036609, "question_id": 45036514, "link": "https://stackoverflow.com/questions/45036514/memory-allocation-threshold-mmap-vs-malloc/45036609#45036609", "title": "Memory allocation threshold (mmap vs malloc)", "body": "<blockquote>\n  <p>I am basically trying to figure out if its possible to keep memory allocation under a threshold due to memory limitation of my project.</p>\n</blockquote>\n\n<p>On Linux or POSIX systems, you might consider using <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a> with <code>RLIMIT_AS</code>:</p>\n\n<blockquote>\n<pre><code>         This is the maximum size of the process's virtual memory\n          (address space) in bytes.  This limit affects calls to brk(2),\n          mmap(2), and mremap(2), which fail with the error ENOMEM upon\n          exceeding this limit.  \n</code></pre>\n</blockquote>\n\n<p>Above this limit, the <code>mmap</code> would fail, and so would fail for instance the call to  <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow noreferrer\">malloc(3)</a> that triggered that particular use of <code>mmap</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>I'm under the impression i can either use mmap </p>\n</blockquote>\n\n<p>Notice that <a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow noreferrer\">malloc(3)</a> will call <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a> (or sometimes <a href=\"http://man7.org/linux/man-pages/man2/sbrk.2.html\" rel=\"nofollow noreferrer\">sbrk(2)</a>...) to retrieve (virtual) memory from the kernel, thus growing your <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow noreferrer\">virtual address space</a>. However, <code>malloc</code> often prefer to reused previously <code>free</code>-d memory (when available). And <code>free</code> usually won't call  <a href=\"http://man7.org/linux/man-pages/man2/munmap.2.html\" rel=\"nofollow noreferrer\">munmap(2)</a> to release memory chunks but prefer to keep it for future <code>malloc</code>-s. Actually most C standard libraries segregate between \"small\" and \"large\" allocation (in practice a <code>malloc</code> for a gigabyte will use <code>mmap</code>, and the corresponding <code>free</code> would <code>mmap</code> immediately).</p>\n\n<p>See also <a href=\"http://man7.org/linux/man-pages/man3/mallopt.3.html\" rel=\"nofollow noreferrer\">mallopt(3)</a> and <a href=\"http://man7.org/linux/man-pages/man2/madvise.2.html\" rel=\"nofollow noreferrer\">madvise(2)</a>. In case you need to lock some pages (obtained by <code>mmap</code>) into <em>physical</em> RAM, consider <a href=\"http://man7.org/linux/man-pages/man2/mlock.2.html\" rel=\"nofollow noreferrer\">mlock(2)</a>.</p>\n\n<p>Look also into <a href=\"https://unix.stackexchange.com/a/375893/50557\">this</a> answer (explaining that the notion of RAM used by a particular process is not that easy).</p>\n\n<p>For <code>malloc</code> related bugs (including <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">memory leaks</a>) use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>.</p>\n"}], "owner": {"reputation": 170, "user_id": 2859891, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/aea1cbf521eb982eb9ab0c3b4db06b3b?s=128&d=identicon&r=PG&f=1", "display_name": "nicwhitts", "link": "https://stackoverflow.com/users/2859891/nicwhitts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499789571, "creation_date": 1499781136, "last_edit_date": 1499788360, "question_id": 45036514, "link": "https://stackoverflow.com/questions/45036514/memory-allocation-threshold-mmap-vs-malloc", "title": "Memory allocation threshold (mmap vs malloc)", "body": "<p>Id like to point out I'm new to this so I'm trying to understand / explain it best i can.</p>\n\n<p>I am basically trying to figure out if its possible to keep memory allocation under a threshold due to memory limitation of my project.</p>\n\n<p>Here is how memory is allocated currently using third party libsodium:</p>\n\n<pre><code>alloc_region(escrypt_region_t *region, size_t size)\n{\n    uint8_t *base, *aligned;\n#if defined(MAP_ANON) &amp;&amp; defined(HAVE_MMAP)\n    if ((base = (uint8_t *) mmap(NULL, size, PROT_READ | PROT_WRITE,\n#ifdef MAP_NOCORE\n                                 MAP_ANON | MAP_PRIVATE | MAP_NOCORE,\n#else\n                                 MAP_ANON | MAP_PRIVATE,\n#endif\n                                 -1, 0)) == MAP_FAILED)\n        base = NULL; /* LCOV_EXCL_LINE */\n    aligned  = base;\n#elif defined(HAVE_POSIX_MEMALIGN)\n    if ((errno = posix_memalign((void **) &amp;base, 64, size)) != 0) {\n        base = NULL;\n    }\n    aligned = base;\n#else\n    base = aligned = NULL;\n    if (size + 63 &lt; size)\n        errno = ENOMEM;\n    else if ((base = (uint8_t *) malloc(size + 63)) != NULL) {\n        aligned = base + 63;\n        aligned -= (uintptr_t) aligned &amp; 63;\n    }\n#endif\n    region-&gt;base    = base;\n    region-&gt;aligned = aligned;\n    region-&gt;size    = base ? size : 0;\n\n    return aligned;\n}\n</code></pre>\n\n<p>So for example, this currently calls posix_memalign to allocate (e.g.) 32mb of memory.\n32mb exceeds my 'memory cap' given to me (but does not throw memory warnings as the memory capacity is far greater, its just what I'm 'allowed' to use)</p>\n\n<p>From some googling, I'm under the impression i can either use mmap and virtual memory.\nI can see that the function above already has some mmap implemented but is never called.</p>\n\n<p>Is it possible to convert the above code so that i never exceed my 30mb memory limit?</p>\n\n<p>From my understanding, if this allocation would exceed my free memory, it would automatically allocate in virtual memory? So can i force this to happen and pretend that my free space is lower than available?</p>\n\n<p>Any help is appreciated</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>/* Allocate memory. */\n    B_size = (size_t) 128 * r * p;\n    V_size = (size_t) 128 * r * N;\n    need   = B_size + V_size;\n    if (need &lt; V_size) {\n        errno = ENOMEM;\n        return -1;\n    }\n    XY_size = (size_t) 256 * r + 64;\n    need += XY_size;\n    if (need &lt; XY_size) {\n        errno = ENOMEM;\n        return -1;\n    }\n    if (local-&gt;size &lt; need) {\n        if (free_region(local)) {\n            return -1;\n        }\n        if (!alloc_region(local, need)) {\n            return -1;\n        }\n    }\n    B  = (uint8_t *) local-&gt;aligned;\n    V  = (uint32_t *) ((uint8_t *) B + B_size);\n    XY = (uint32_t *) ((uint8_t *) V + V_size);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 1, "creation_date": 1499781381, "post_id": 45036504, "comment_id": 77047171, "body": "<code>scanf(&quot; %c&quot;, &amp;result);</code> - mind the space between the first <code>&quot;</code> and <code>%</code>."}, {"owner": {"reputation": 57, "user_id": 8289954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cdd6a578bb857429b28113c3be19cd60?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Jane", "link": "https://stackoverflow.com/users/8289954/bob-jane"}, "reply_to_user": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499781564, "post_id": 45036504, "comment_id": 77047317, "body": "Thank you. That seems to have worked.How come that&#39;s needed ? It usually works without it from my little experience."}, {"owner": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499781674, "post_id": 45036504, "comment_id": 77047402, "body": "<a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-buffer\">Read this question</a>. You&#39;ll find the answers on the accepted answer :)"}, {"owner": {"reputation": 57, "user_id": 8289954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cdd6a578bb857429b28113c3be19cd60?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Jane", "link": "https://stackoverflow.com/users/8289954/bob-jane"}, "reply_to_user": {"reputation": 524, "user_id": 2123477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/M59hC.jpg?s=128&g=1", "display_name": "woz", "link": "https://stackoverflow.com/users/2123477/woz"}, "edited": false, "score": 0, "creation_date": 1499781912, "post_id": 45036504, "comment_id": 77047574, "body": "oh yes, that&#39;s perfect. Thanks"}], "owner": {"reputation": 57, "user_id": 8289954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cdd6a578bb857429b28113c3be19cd60?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Jane", "link": "https://stackoverflow.com/users/8289954/bob-jane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1499781445, "answer_count": 0, "score": 0, "last_activity_date": 1499781108, "creation_date": 1499781108, "question_id": 45036504, "link": "https://stackoverflow.com/questions/45036504/not-receiving-input-via-scanf-in-while-loop", "closed_reason": "Duplicate", "title": "Not receiving input via scanf in while loop", "body": "<p>The program takes two inputs and if the result is N then it goes through the while loop until the user types N five times. If Y is pressed then it exits the loop.</p>\n\n<p>This while loop executes perfectly if the input is Y, however, if the input is N, it executes properly the first time it runs but the second time it executes line 13 twice before moving on. It seems to miss getting an input the second time, but then it fixes after returning, thus the result is shown as:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kO8ko.png\" rel=\"nofollow noreferrer\">result when the program runs</a></p>\n\n<p>Here is my code:</p>\n\n<pre><code>// Preprocessor commands\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//-----------------------------\n\nint main(){ \n    int attempts=0;\n    char result;\n\n    while(attempts &lt; 5){\n        printf(\"\\n\");\n        printf(\"Entered Loop\\n\");\n        printf(\"Enter result (P/F)\\n\");\n        scanf(\"%c\", &amp;result);\n        if(result == 'P'){\n            printf(\"Passed\\n\");\n            attempts++;\n            break;\n        }\n        else if(result == 'F'){\n            printf(\"Entered F Loop\\n\");\n            printf(\"Try again\\n\");\n            attempts++;\n            continue;\n        }\n        printf(\"Exited F Loop\\n\");\n    }\n\n    if(attempts == 5){\n        printf(\"QUIT!\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1499781008, "post_id": 45036415, "comment_id": 77046829, "body": "Related: <a href=\"https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s\" title=\"what is the difference between char s and char s\">stackoverflow.com/questions/1704407/&hellip;</a>"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1499781042, "post_id": 45036415, "comment_id": 77046854, "body": "So what happened when you tried it? You should also be aware that strings are terminated with <code>\\0</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1499781078, "post_id": 45036415, "comment_id": 77046888, "body": "note that <code>&#39;&#47;0&#39;</code> should probably be <code>\\0</code>"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 6, "creation_date": 1499781082, "post_id": 45036415, "comment_id": 77046889, "body": "Honestly, how about just trying it?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1500132099, "post_id": 45036415, "comment_id": 77210347, "body": "&quot;<i>Does changing the string &#39;out&#39;  [...]</i>&quot; <code>out</code> isn&#39;t a string, but a pointer, a pointer to a <code>char</code>."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499781139, "post_id": 45036472, "comment_id": 77046946, "body": "<code>str</code> doesn&#39;t hold an address. It&#39;s an array."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499781202, "post_id": 45036472, "comment_id": 77047002, "body": "@StoryTeller What&#39;s the difference in C?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1499781267, "post_id": 45036472, "comment_id": 77047059, "body": "@klutt - <a href=\"https://stackoverflow.com/questions/4607128/in-c-are-arrays-pointers-or-used-as-pointers\">You won&#39;t find a better explanation than this</a>"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499781306, "post_id": 45036472, "comment_id": 77047091, "body": "@StoryTeller I used that since str == &amp;str. I tried to correct my answer"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1499781401, "post_id": 45036472, "comment_id": 77047188, "body": "@CIsForCookies - <code>str == &amp;str</code> should raise several compiler warnings about comparing incompatible pointer types. The fact <code>str</code> decays to the address of its first byte when used in an expression, doesn&#39;t make it a pointer."}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1499781627, "post_id": 45036472, "comment_id": 77047366, "body": "@StoryTeller Indeed, but the values are the same, so what I was thinking is that I can look at &#39;str&#39; as an array and as a pointer to the first element and thus I can say str holds an address. I&#39;m just rationalizing my mistake... clearly it was wrong :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499781783, "post_id": 45036472, "comment_id": 77047483, "body": "@ClsForCookies a <i>pointer</i> is a stored object itself, so you have some location containing the value of the pointer. As a consequence, you can for example <b>assign a different value</b> to a pointer. The stored object of the array is just the sequence of its elements. Evaluating the identifier of the array results in a pointer to its first element, but that doesn&#39;t make the array a pointer. You can&#39;t assign to it, for example."}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1499781212, "last_edit_date": 1499781212, "creation_date": 1499781041, "answer_id": 45036472, "question_id": 45036415, "link": "https://stackoverflow.com/questions/45036415/pointers-of-strings-in-c/45036472#45036472", "title": "Pointers of strings in C", "body": "<p>No. <code>out</code> is a different variable that holds the same address <code>str</code> is at, i.e. it points to the same location. Note that changing <code>*str</code> will change <code>*out</code>.</p>\n\n<p>In C, assignment takes the value of the right end and stores it in the left end, it does not makes the right \"become\" left</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 1738687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/66c05f5aa82187085525b2d866831473?s=128&d=identicon&r=PG", "display_name": "user1738687", "link": "https://stackoverflow.com/users/1738687/user1738687"}, "is_accepted": false, "score": 5, "last_activity_date": 1499781490, "creation_date": 1499781490, "answer_id": 45036656, "question_id": 45036415, "link": "https://stackoverflow.com/questions/45036415/pointers-of-strings-in-c/45036656#45036656", "title": "Pointers of strings in C", "body": "<p>It depends.  If you write:</p>\n\n<pre><code>out = \"hello!\";\n</code></pre>\n\n<p>you do not change the string <code>str</code>, but simply make <code>out</code> point to another memory location.</p>\n\n<p>But if you write into <code>out</code> like in this:</p>\n\n<pre><code>sprintf(out, \"abcd\");\n</code></pre>\n\n<p>then you do change <code>str</code>. But beware of overflow! </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1499782118, "last_edit_date": 1499782118, "creation_date": 1499781558, "answer_id": 45036680, "question_id": 45036415, "link": "https://stackoverflow.com/questions/45036415/pointers-of-strings-in-c/45036680#45036680", "title": "Pointers of strings in C", "body": "<p>For starters I think you mean the terminating zero <code>'\\0'</code> instead of the multibyte character literal '/0'.</p>\n\n<p>To escape such an error it is better to initialize character arrays with string literals (if you are going to store a string in an array). For example</p>\n\n<pre><code>char str[] = { \"good\" };\n</code></pre>\n\n<p>or just like</p>\n\n<pre><code>char str[] = \"good\";\n</code></pre>\n\n<p>As for the question then after this assignment</p>\n\n<pre><code>char* out=str;\n</code></pre>\n\n<p>the pointer <code>out</code> points to the first character of the array <code>str</code>.  Thus using this pointer and the pointer arithmetic you can change the array. For example</p>\n\n<pre><code>char str[] = \"good\";\nchar *out = str;\n\nout[0] = 'G';\n*( out + 3 ) = 'D';\n\nputs( str );          \n</code></pre>\n\n<p>Moreover an array passed as an argument to a function is implicitly converted to pointer to its first character. So you can use interchangeably either an array itself as an argument or a pointer that initialized by the array designator. For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n//...\n\nchar str[] = \"good\";\nchar *out = str;\n\nsize_t n1 = strlen( str );\nsize_t n2 = strlen( out ); \n\nprintf( \"n1 == n2 is %s\\n\", n1 == n2 ? \"true\" : \"false\" );\n</code></pre>\n\n<p>The output of this code snippet is <code>true</code>.</p>\n\n<p>However there is one important difference. The size of the array is the number of bytes allocated to all its elements while the size of the pointer usually either equal to 4 or 8 based on used system and does not depend on the number of elements in the array. That is</p>\n\n<pre><code>sizeof( str ) is equal to 5\nsizeof( out ) is equal to 4 or 8\n</code></pre>\n\n<p>Take into account that according to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 5027489, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-ZxHEZZunve4/AAAAAAAAAAI/AAAAAAAAAKs/W7vMJL7RvQw/photo.jpg?sz=128", "display_name": "WhiteSword", "link": "https://stackoverflow.com/users/5027489/whitesword"}, "is_accepted": false, "score": 1, "last_activity_date": 1499781964, "creation_date": 1499781964, "answer_id": 45036849, "question_id": 45036415, "link": "https://stackoverflow.com/questions/45036415/pointers-of-strings-in-c/45036849#45036849", "title": "Pointers of strings in C", "body": "<p>I think there's a typo in your code, you have written <code>'/0'</code> but it's not a null character but <code>'\\0'</code> is.\nAs far as <code>out</code> &amp; <code>str</code> are concerned, <code>str[]</code> is a char array, whereas <code>out</code> is a pointer to it. If you make <code>out</code> point to some other <code>char array</code> there'll be no effect on <code>str</code>. But you can use <code>out</code> pointer to change the values inside the <code>str[]</code>, like this,</p>\n\n<pre><code>int main( void )\n{\n  char str[]={'g','o','o','d','\\0'}; // There was a typo, you wrote '/0', I guess you meant '\\0'\n  //char special[]={'o','\\0'};\n  char* out=str;\n  for(int i=0; out[i] != '\\0'; i++)\n  {\n     out[i] = 'a';\n     // This will write 'a' to the str[] \n  }\n  printf(\"out: %s\\n\", out);\n  printf(\"str: %s\", str);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1499782465, "creation_date": 1499780912, "last_edit_date": 1499782465, "question_id": 45036415, "link": "https://stackoverflow.com/questions/45036415/pointers-of-strings-in-c", "title": "Pointers of strings in C", "body": "<p>In the case down below.\nDoes changing the string 'out' change the string 'str' respectively? In other words, do they have the same pointer?</p>\n\n<p>Thank you in advance.</p>\n\n<pre><code>int main() {\n  char str[]={'g','o','o','d','/0'};\n  char special[]={'o','/0'};\n  char* out=str;\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "sockets", "tcp"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 4, "creation_date": 1499777022, "post_id": 45034981, "comment_id": 77043507, "body": "Try running under <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>."}, {"owner": {"reputation": 743, "user_id": 5091033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0737443a012e096ab556ef60a197f?s=128&d=identicon&r=PG&f=1", "display_name": "simo-r", "link": "https://stackoverflow.com/users/5091033/simo-r"}, "edited": false, "score": 2, "creation_date": 1499777678, "post_id": 45034981, "comment_id": 77044121, "body": "You <b>must</b> lock the <code>mutex</code> before call <code>pthread_cond_wait</code>."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "reply_to_user": {"reputation": 743, "user_id": 5091033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0737443a012e096ab556ef60a197f?s=128&d=identicon&r=PG&f=1", "display_name": "simo-r", "link": "https://stackoverflow.com/users/5091033/simo-r"}, "edited": false, "score": 0, "creation_date": 1499780668, "post_id": 45034981, "comment_id": 77046524, "body": "@BetaRunner <a href=\"https://stackoverflow.com/questions/16522858/understanding-of-pthread-cond-wait-and-pthread-cond-signal\">Agreed</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1499788931, "post_id": 45034981, "comment_id": 77053073, "body": "Always test the outcome of relevant functions calls (here <code>pthread_*()</code> functions). This is debugging for <i>free</i>!"}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 3, "last_activity_date": 1499780705, "creation_date": 1499780705, "answer_id": 45036323, "question_id": 45034981, "link": "https://stackoverflow.com/questions/45034981/multi-threaded-tcp-server-in-c-crashes/45036323#45036323", "title": "multi threaded TCP server in C crashes", "body": "<p>In your worker thread, the first thing that happens is either a <code>pthread_cond_wait</code> without having first locked the mutex or a <code>pthread_mutex_unlock</code> without having first locked the mutex. In both cases, this is undefined behaviour according to the POSIX docs. </p>\n\n<p>Your worker function should start thus:</p>\n\n<pre><code>    /* worker thread */\nwhile (1)\n{\n    /* wait for work to do */\n    pthread_mutex_lock(&amp;mtx);\n    while (worker-&gt;state == 0)\n    {\n        pthread_cond_wait(&amp;worker-&gt;cond, &amp;mtx);\n    }\n    int sd = worker-&gt;sd; /* get the updated socket fd */\n    pthread_mutex_unlock(&amp;mtx);\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5946284, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e33e8de9ac5e188f872db3c44a17c847?s=128&d=identicon&r=PG&f=1", "display_name": "Mass", "link": "https://stackoverflow.com/users/5946284/mass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1499780705, "creation_date": 1499776961, "question_id": 45034981, "link": "https://stackoverflow.com/questions/45034981/multi-threaded-tcp-server-in-c-crashes", "title": "multi threaded TCP server in C crashes", "body": "<p>I wrote a multi threaded TCP server in C. It crashes when I run multiple test client against it. I get 2 type of crashes which both seems to have same root cause. The attached crash happens in main. In the other flavor, I get the crash in client part when it wants to lock in order to close the socket.\nCan somebody please tell me what causes the crash?</p>\n\n<p>TCP Server code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;arpa/inet.h&gt; //inet_addr\n#include &lt;pthread.h&gt; //for threading , link with lpthread\n\n#define BUFSIZE     2048 // TODO\n#define MAXWORKERS 10\n\npthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;\nconst pthread_cond_t condInit = PTHREAD_COND_INITIALIZER;\npthread_cond_t idle = PTHREAD_COND_INITIALIZER;\n\ntypedef struct {\n    pthread_t       tid;\n    int             sd;\n    pthread_cond_t  cond;\n    uint8_t         num;\n    uint8_t         state;\n} worker_t;\n\nworker_t     workers[MAXWORKERS]; //  reference to worker\n\nvoid error(const char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\n/* worker thread */\nvoid *handle_client(void *arg)\n{\n    worker_t* worker = (worker_t *) arg;\n    int n;\n    char buf[BUFSIZE];\n\n    /* By default a new thread is joinable, we don't\n     really want this (unless we do something special we\n     end up with the thread equivalent of zombies). So\n     we explicitly change the thread type to detached\n     */\n\n    pthread_detach(pthread_self());\n\n    printf(\"Thread %ld started for client number %d (sd %d)\\n\", pthread_self(),\n            worker-&gt;num, worker-&gt;sd);\n\n    /* worker thread */\n    while (1)\n    {\n        /* wait for work to do */\n        while (worker-&gt;state == 0)\n        {\n            pthread_cond_wait(&amp;worker-&gt;cond, &amp;mtx);\n        }\n        int sd = worker-&gt;sd; /* get the updated socket fd */\n        pthread_mutex_unlock(&amp;mtx);\n\n         n = read(sd, buf, BUFSIZE);\n         if (n &lt; 0)\n             error(\"ERROR reading from socket\");\n\n         n = write(sd, \"I got your message\",18);\n         if (n &lt; 0)\n             error(\"ERROR writing to socket\");\n\n        /* work done - set itself idle assumes that read returned EOF */\n        pthread_mutex_lock(&amp;mtx);\n        close(sd);\n        worker-&gt;state = 0;\n        printf(\"Worker %d has completed work \\n\", worker-&gt;num);\n        pthread_cond_signal(&amp;idle); /* notifies dispatcher*/\n        pthread_mutex_unlock(&amp;mtx);\n    } /* end while */\n\n}\n\nint main() { /* Dispatcher */\n    int ld, sd;\n    struct sockaddr_in skaddr;\n    struct sockaddr_in from;\n    int addrlen, length;\n    int i;\n\n    if ((ld = socket( AF_INET, SOCK_STREAM, 0)) &lt; 0) {\n        perror(\"Problem creating socket\\n\");\n        exit(1);\n    }\n\n    skaddr.sin_family = AF_INET;\n    skaddr.sin_addr.s_addr = htonl(INADDR_ANY);\n\n    //skaddr.sin_port = htons(0);\n    skaddr.sin_port = htons(41332);\n\n    if (bind(ld, (struct sockaddr *) &amp;skaddr, sizeof(skaddr)) &lt; 0) {\n        perror(\"Problem binding\\n\");\n        exit(0);\n    }\n\n    /* find out what port we were assigned and print it out */\n\n    length = sizeof(skaddr);\n    if (getsockname(ld, (struct sockaddr *) &amp;skaddr, &amp;length) &lt; 0) {\n        perror(\"Error getsockname\\n\");\n        exit(1);\n    }\n    in_port_t pport = ntohs(skaddr.sin_port);\n    printf(\"%d\\n\", pport);\n\n    /* put the socket into passive mode (waiting for connections) */\n\n    if (listen(ld, 5) &lt; 0) {\n        perror(\"Error calling listen\\n\");\n        exit(1);\n    }\n\n    /* do some initialization */\n\n    for (i = 0; i &lt; MAXWORKERS; i++) {\n        workers[i].state    = 0;\n        workers[i].num      = i;\n        workers[i].sd       = 0;\n        workers[i].cond     = condInit;\n        pthread_create(&amp;workers[i].tid, NULL, handle_client, (void *) &amp;workers[i]);\n    }\n\n    /* Dispatcher now processes incoming connections forever ... */\n    while (1) {\n        printf(\"Ready for a connection...\\n\");\n        addrlen = sizeof(skaddr);\n\n        printf(\"trying to accept a new connection\\n\");\n        if ((sd = accept(ld, (struct sockaddr*) &amp;from, &amp;addrlen)) &lt; 0) {\n            perror(\"Problem with accept call\\n\");\n            exit(1);\n        }\n        printf(\"Got a connection - processing...\\n\");\n        for (i = 0; i &lt; MAXWORKERS; i++) {\n            pthread_mutex_lock(&amp;mtx);\n            if (workers[i].state == 0) /* worker i is idle \u2013 dispatch him to work */\n            {\n                printf(\"dispatch to worker number: %d \\n\", i);\n                pthread_mutex_unlock(&amp;mtx);\n                break;\n            }\n            printf(\"worker number: %d was busy\\n\", i);\n\n            pthread_mutex_unlock(&amp;mtx);\n        }\n\n        if (i == MAXWORKERS) {\n            /* all workers busy */\n            pthread_mutex_lock(&amp;mtx);\n            pthread_cond_wait(&amp;idle, &amp;mtx); /* wait for one idle; */\n            pthread_mutex_unlock(&amp;mtx);\n        } else { /* dispatch worker */\n            pthread_mutex_lock(&amp;mtx);\n            workers[i].state = 1;\n            workers[i].sd = sd;\n            pthread_cond_signal(&amp;workers[i].cond); /* wake up worker */\n            pthread_mutex_unlock(&amp;mtx);\n        }\n    }\n}\n</code></pre>\n\n<p>crash:</p>\n\n<pre><code>Thread 11 (Thread 0x7fae90004700 (LWP 16318)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602408 &lt;workers+648&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae90004700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 10 (Thread 0x7fae90805700 (LWP 16317)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x6023c0 &lt;workers+576&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae90805700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 9 (Thread 0x7fae9400c700 (LWP 16310)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x6021c8 &lt;workers+72&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae9400c700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 8 (Thread 0x7fae91006700 (LWP 16316)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602378 &lt;workers+504&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae91006700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 7 (Thread 0x7fae91807700 (LWP 16315)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602330 &lt;workers+432&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae91807700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 6 (Thread 0x7fae9300a700 (LWP 16312)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602258 &lt;workers+216&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae9300a700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 5 (Thread 0x7fae92008700 (LWP 16314)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x6022e8 &lt;workers+360&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae92008700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 4 (Thread 0x7fae92809700 (LWP 16313)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x6022a0 &lt;workers+288&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae92809700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 3 (Thread 0x7fae9380b700 (LWP 16311)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602210 &lt;workers+144&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae9380b700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 2 (Thread 0x7fae9480d700 (LWP 16309)):\n#0  pthread_cond_wait@@GLIBC_2.3.2 () at ../sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185\n#1  0x0000000000401024 in handle_client (arg=0x602180 &lt;workers&gt;) at main.c:87\n#2  0x00007fae94bdf6ba in start_thread (arg=0x7fae9480d700) at pthread_create.c:333\n#3  0x00007fae949153dd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n\nThread 1 (Thread 0x7fae94ff3700 (LWP 16308)):\n#0  0x00007fae94843428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#1  0x00007fae9484502a in __GI_abort () at abort.c:89\n#2  0x00007fae9483bbd7 in __assert_fail_base (fmt=&lt;optimized out&gt;, assertion=assertion@entry=0x7fae94beb015 \"mutex-&gt;__data.__owner == 0\", file=file@entry=0x7fae94beaff8 \"../nptl/pthread_mutex_lock.c\", line=line@entry=81, \n    function=function@entry=0x7fae94beb180 &lt;__PRETTY_FUNCTION__.8623&gt; \"__pthread_mutex_lock\") at assert.c:92\n#3  0x00007fae9483bc82 in __GI___assert_fail (assertion=assertion@entry=0x7fae94beb015 \"mutex-&gt;__data.__owner == 0\", file=file@entry=0x7fae94beaff8 \"../nptl/pthread_mutex_lock.c\", line=line@entry=81, \n    function=function@entry=0x7fae94beb180 &lt;__PRETTY_FUNCTION__.8623&gt; \"__pthread_mutex_lock\") at assert.c:101\n#4  0x00007fae94be1f68 in __GI___pthread_mutex_lock (mutex=mutex@entry=0x602140 &lt;mtx&gt;) at ../nptl/pthread_mutex_lock.c:81\n#5  0x0000000000400cfa in main () at main.c:173\n</code></pre>\n"}, {"tags": ["c", "multithreading", "posix"], "comments": [{"owner": {"reputation": 562, "user_id": 3397643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c2da19655be5ceac32773d3be31bae20?s=128&d=identicon&r=PG&f=1", "display_name": "J0hn", "link": "https://stackoverflow.com/users/3397643/j0hn"}, "edited": false, "score": 0, "creation_date": 1499776886, "post_id": 45034907, "comment_id": 77043362, "body": "<a href=\"https://stackoverflow.com/questions/11468333/linux-threads-suspend-resume\" title=\"linux threads suspend resume\">stackoverflow.com/questions/11468333/&hellip;</a> This might have what you need."}], "answers": [{"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 0, "last_activity_date": 1499781983, "last_edit_date": 1499781983, "creation_date": 1499781165, "answer_id": 45036528, "question_id": 45034907, "link": "https://stackoverflow.com/questions/45034907/suspend-and-resume-in-posix-thread/45036528#45036528", "title": "Suspend and Resume in POSIX thread", "body": "<blockquote>\n  <p>How to suspend and resume pthread ? Like threads in Java, is there any\n  function like wait, notify etc?</p>\n</blockquote>\n\n<p>Read about conditional variables in <a href=\"https://en.wikipedia.org/wiki/POSIX_Threads\" rel=\"nofollow noreferrer\">pthread</a>. Basically, conditional variables allow you to check for a condition before a thread can proceed further. Say for example there are 3 threads which will only proceed if some condition is true. In case, this condition is false, the threads will release the mutex lock they are holding and \"wait\". As the lock on the shared object of type <code>pthread_mutex_t</code> is released, some other thread(s) will go ahead and do their stuff thus at some point in time the condition will become true (hopefully). Check the function called <code>pthread_cond_wait</code>.</p>\n\n<p>Once the said condition becomes true (or is satisfied), then the functions <code>pthread_cond_signal</code> / <code>pthread_cond_broadcast</code> could be used to \"notify\" the threads which were waiting on the <code>pthread_cond_t</code> object. These threads (3 threads in this simple explanation) then acquire the mutex lock automatically (of course, one thread at a time) and go about their business.</p>\n\n<p>Check <a href=\"https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables\" rel=\"nofollow noreferrer\">this</a> tutorial.</p>\n\n<blockquote>\n  <p>I want to run the single pthread multiple times according to some\n  situations.</p>\n</blockquote>\n\n<p>Care to explain further?</p>\n"}], "owner": {"reputation": 882, "user_id": 3391982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000539153274/picture?type=large", "display_name": "charlotte", "link": "https://stackoverflow.com/users/3391982/charlotte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1499781983, "creation_date": 1499776775, "question_id": 45034907, "link": "https://stackoverflow.com/questions/45034907/suspend-and-resume-in-posix-thread", "title": "Suspend and Resume in POSIX thread", "body": "<p>I am learning POSIX threads. My question - How to suspend and resume pthread ? Like threads in Java, is there any function like wait, notify etc? I want to run the single pthread multiple times according to some situations.</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1499776608, "post_id": 45034826, "comment_id": 77043125, "body": "<code>a==2 &amp;&amp; 5&lt;b &amp;&amp; b&lt;=10</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1499776620, "post_id": 45034826, "comment_id": 77043146, "body": "You probably mean <code>if(a==2 &amp;&amp; 5 &lt; b &amp;&amp; b &lt;=10)</code>. Methinks it&#39;s time for you to get your book out and read it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1499776846, "post_id": 45034826, "comment_id": 77043324, "body": "Read this: <a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">What does the comma operator , do?</a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1499776848, "post_id": 45034826, "comment_id": 77043326, "body": "...this kind of question was asked barely an hour ago :O"}], "answers": [{"tags": [], "owner": {"reputation": 1226, "user_id": 6324080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUqTh.jpg?s=128&g=1", "display_name": "K. Kirsz", "link": "https://stackoverflow.com/users/6324080/k-kirsz"}, "is_accepted": false, "score": 1, "last_activity_date": 1499776698, "creation_date": 1499776698, "answer_id": 45034879, "question_id": 45034826, "link": "https://stackoverflow.com/questions/45034826/multiple-conditions-in-same-if-statement-in-c/45034879#45034879", "title": "multiple conditions in same if statement in C", "body": "<p><code>if(a==1,b&lt;=8)</code> should be <code>if(a==1 &amp;&amp; b&lt;=8)</code></p>\n\n<p><code>if(a==2,5&lt;b&lt;=10)</code> should be <code>if(a==2 &amp;&amp; 5&lt;b &amp;&amp; b&lt;=10)</code></p>\n\n<p>Please read some beginner book or some tutorial before asking such questions please.</p>\n"}, {"comments": [{"owner": {"reputation": 2327, "user_id": 3938395, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bc7fb2849c95ac9f211671b7c83cb07?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/3938395/adam"}, "edited": false, "score": 0, "creation_date": 1499959642, "post_id": 45034880, "comment_id": 77142545, "body": "Please explain the downvote and how I can improve my answer for you!"}], "tags": [], "owner": {"reputation": 2327, "user_id": 3938395, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9bc7fb2849c95ac9f211671b7c83cb07?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/3938395/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1499776699, "creation_date": 1499776699, "answer_id": 45034880, "question_id": 45034826, "link": "https://stackoverflow.com/questions/45034826/multiple-conditions-in-same-if-statement-in-c/45034880#45034880", "title": "multiple conditions in same if statement in C", "body": "<p>Logical operators in C for <code>or</code>/<code>and</code> are <code>||</code> and <code>&amp;&amp;</code> respectively, so you would for example rewrite</p>\n\n<p><code>if(a==1,b&lt;=8)</code> as <code>if(a==1 &amp;&amp; b&lt;=8)</code> or <code>if(a==1 || b&lt;=8)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1499776982, "post_id": 45034895, "comment_id": 77043473, "body": "Please: at least format the code correctly"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1499859310, "post_id": 45034895, "comment_id": 77086102, "body": "<b><code>void</code></b> <code>main()</code>?  Either write portable C, or be specific about what limitations you&#39;re imposing.  Don&#39;t just perpetuate the asker&#39;s errors without comment, please!"}], "tags": [], "owner": {"reputation": 61, "user_id": 5746352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00605f8aa20c40379409e91e0ab4a28?s=128&d=identicon&r=PG&f=1", "display_name": "Swapnil Udamale", "link": "https://stackoverflow.com/users/5746352/swapnil-udamale"}, "is_accepted": true, "score": 0, "last_activity_date": 1499776743, "creation_date": 1499776743, "answer_id": 45034895, "question_id": 45034826, "link": "https://stackoverflow.com/questions/45034826/multiple-conditions-in-same-if-statement-in-c/45034895#45034895", "title": "multiple conditions in same if statement in C", "body": "<p>hi try this hope its work</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;cono.h&gt;\n#include&lt;iostream.h&gt;\n#include&lt;stdlib.h&gt;\nvoid main(void)\n{\n int a,b;\n printf(\"enter a\");\n scanf(\"%d\",&amp;a);\n printf(\"enter b\");\n scanf(\"%d\",&amp;b);\n if(a==1 &amp;&amp; b&lt;=8)\n {\n  printf(\"you\");\n  exit(0);\n  } else if(a==2 &amp;&amp; 5&lt;b &amp;&amp; b&lt;=10)\n {\n  printf(\"you\");\n }\nelse{\n  printf(\"me\");\n  }\n  getch();\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1499776886, "post_id": 45034906, "comment_id": 77043363, "body": "Note that <code>(3&lt;a&lt;8)</code> is 1 for all <code>a</code>."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1499776982, "last_edit_date": 1499776982, "creation_date": 1499776773, "answer_id": 45034906, "question_id": 45034826, "link": "https://stackoverflow.com/questions/45034826/multiple-conditions-in-same-if-statement-in-c/45034906#45034906", "title": "multiple conditions in same if statement in C", "body": "<p>What you need is <code>&amp;&amp;</code></p>\n\n<p>The comma operator compiles, but it does not do what you want.</p>\n\n<pre><code>if(a==1,b==2)\n   printf(\"hello\\\");\n</code></pre>\n\n<p>will print \"hello\" if b is 2, regardless of the value of a.</p>\n\n<p>The construct:</p>\n\n<pre><code>if(3&lt;a&lt;8)\n</code></pre>\n\n<p>does not work either. It compiles, but it does not do what you want. What it does it does is to compare 3 &lt; a and calculate the result, which is true or false, that is, 1 or 0. After that, the result is compared to 8, and since both 0 and 1 is less than 8, this will always do what's inside the if statement.</p>\n"}], "owner": {"reputation": 177, "user_id": 7203238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1837625303223749/picture?type=large", "display_name": "shoaib sabir", "link": "https://stackoverflow.com/users/7203238/shoaib-sabir"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15459, "favorite_count": 0, "closed_date": 1499777052, "accepted_answer_id": 45034895, "answer_count": 4, "score": -7, "last_activity_date": 1563207103, "creation_date": 1499776531, "last_edit_date": 1563207103, "question_id": 45034826, "link": "https://stackoverflow.com/questions/45034826/multiple-conditions-in-same-if-statement-in-c", "closed_reason": "Duplicate", "title": "multiple conditions in same if statement in C", "body": "<p>I write code in <code>c</code> and  </p>\n\n<p>I am beginner in the case I think <code>if(a==1,b&lt;=8)</code> work like the control first check the value of <code>a</code> if and it is true then check <code>b</code>condition if both conditions are true then come into body but I think I did not know the accurate syntax to write that can anyone give me correct syntax. </p>\n\n<p>here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cono.h&gt;\n#include &lt;iostream.h&gt;\n#include &lt;stdlib.h&gt;\nvoid main(void)\n{\n    int a, b;\n    printf(\"enter a\");\n    scanf(\"%d\",&amp;a);\n    printf(\"enter b\");\n    scanf(\"%d\",&amp;b);\n    if(a==1, b&lt;=8)\n    {\n        printf(\"you\");\n        exit(0);\n    }\n    if(a==2, 5&lt;b&lt;=10)\n    {\n        printf(\"you\");\n    else\n        printf(\"me\");\n    }\n    getch();\n}\n</code></pre>\n\n<p>Expected result example:</p>\n\n<p>If <code>a</code> is equal to 2 so control check if <code>b</code> is less than 10 and greater than 5 if it is so, control run if's true condition if not so control run else statement </p>\n"}, {"tags": ["c", "int", "printf", "double", "format-specifiers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1499776271, "post_id": 45034704, "comment_id": 77042860, "body": "It&#39;s undefined behaviour."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499776390, "post_id": 45034704, "comment_id": 77042954, "body": "A possible reason is that <code>double</code> is larger than <code>int</code> (e.g. 8 bytes vs 4 bytes) on your platform. But there are <b>many</b> possible reasons for behavior you see when your code&#39;s behavior is <b>undefined</b>."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1499780535, "post_id": 45034704, "comment_id": 77046426, "body": "minus for asking ridiculous questions, not worth to answer. if you are curious what did not you take a look on the assembly listing, which can be generated by the most of the compilers."}], "answers": [{"comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1499776278, "post_id": 45034732, "comment_id": 77042866, "body": "And if OP turned on their compiler&#39;s warnings and errors, it wouldn&#39;t even compile!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1499776320, "post_id": 45034732, "comment_id": 77042894, "body": "@JohnZwinck it should not, yes, agree."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1499776383, "post_id": 45034732, "comment_id": 77042948, "body": "It might be worth noting that <code>%f</code> specifically expects to receive a <code>double</code>, not a <code>float</code>, and that varargs rules make that happen when a <code>float</code> is passed.  So before anyone thinks that passing <code>int</code> where <code>float</code> is expected isn&#39;t really so terrible, think again, because <code>int</code> is actually being passed instead of <code>double</code>, and those two are not the same size on most platforms."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776482, "post_id": 45034732, "comment_id": 77043031, "body": "I&#39;m interested in what happens though. For example, I can write <code>printf(&quot;%c&quot;, 100)</code> and get <code>d</code>printed out, even though I entered an int. So surely, even though it is undefined behaviour, <code>printf(&quot;%f&quot;, 20)</code> points to the memory location where the <code>int</code> is stored? If so, one should be able to explain what is going on under the hood.  EDIT: This was in response to Sourav Gosh&#39;s initial answer."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776580, "post_id": 45034732, "comment_id": 77043104, "body": "@Sandi what&#39;s the problem with <code>printf(&quot;%c&quot;, 100)</code>? it&#39;s a valid statement, no UB."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 1, "creation_date": 1499776583, "post_id": 45034732, "comment_id": 77043107, "body": "@Sandi 100 is a perfectly valid value for a <code>char</code> so that isn&#39;t UB at all."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776677, "post_id": 45034732, "comment_id": 77043188, "body": "@Sandi What&#39;s going on under the hood is that floating point arguments are passed differently than integer arguments. If you&#39;re on a relatively modern architecture function arguments are passed in registers and completely different registers are used for normal values and floating point."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1499776693, "post_id": 45034732, "comment_id": 77043199, "body": "<code>printf(&quot;%c&quot;, 100)</code> is equivalent to printf(&quot;%c&quot;, &#39;d&#39;);.  i.e. both <code>100</code> and <code>d</code> are within the range of a valid <code>char</code> (0-255)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499776755, "post_id": 45034732, "comment_id": 77043250, "body": ".......and <code>%c</code> actually expects and <code>int</code> type argument, which is <b><i>&quot;converted to an unsigned char, and the resulting character is written.&quot;</i></b>"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776777, "post_id": 45034732, "comment_id": 77043263, "body": "@sandi But that&#39;s under the hood. The correct answer is UB because peeking under the hood is dangerous until you really know what you&#39;re doing (and that often leads to not needing to peek under the hood)."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 2, "creation_date": 1499776854, "post_id": 45034732, "comment_id": 77043329, "body": "Yup, understood, Art. The point of this question, however, is to learn more about C and computers, not to take wild risks in programming."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1499776886, "post_id": 45034732, "comment_id": 77043365, "body": "@Art - Depending on a person&#39;s learning style, sometimes peeking under the hood is <i>precisely how</i> to become knowledgeable about what you are doing. :)"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1499777260, "post_id": 45034732, "comment_id": 77043737, "body": "@ryyker Absolutely. That&#39;s how I learn. That&#39;s also how I learned that it&#39;s dangerous. Explain the dark art, follow by &quot;don&#39;t do this at home&quot;."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1499778299, "last_edit_date": 1592644375, "creation_date": 1499776260, "answer_id": 45034732, "question_id": 45034704, "link": "https://stackoverflow.com/questions/45034704/why-does-an-integer-interpreted-as-a-double-render-zero/45034732#45034732", "title": "Why does an integer interpreted as a double render zero?", "body": "<p>First of all, this is  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. <code>%f</code> expects an argument of type <code>float</code>/<code>double</code>. Passing an <code>int</code> makes incompatible type and hence it invokes UB.</p>\n<p>Quoting <code>C11</code>, chapter \u00a77.21.6.1, <em><code>fprintf()</code></em></p>\n<blockquote>\n<p><code>f</code>,<code>F</code></p>\n<p>A <code>double</code> argument representing a floating-point number [...]</p>\n</blockquote>\n<p>a <code>float</code> is also allowed, as due to default argument promotion rule, it will get promoted to a <code>double</code> which is the expected type there, so either a <code>double</code> or a <code>float</code> is acceptable, but not an <code>int</code>.</p>\n<p>...and that's all. UB, is, well, UB. You cannot try to justify anything with a code producing UB.</p>\n<hr />\n<p>That said, with proper warning levels enabled, the code should not compile, at all. Though, if you choose to make the code compile and produce a binary/assembly code you can see different code generated for different platforms. One of such cases is explained in <a href=\"https://stackoverflow.com/a/45034882/2173917\">the other answer by Matteo Italia</a>, considering x86_64 arch on Linux/OS X.</p>\n"}, {"comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 3, "creation_date": 1499776573, "post_id": 45034787, "comment_id": 77043099, "body": "It&#39;s not &quot;probably&quot;, the compiler has to treat it as an int because otherwise it wouldn&#39;t be C. Also, float is incorrect because <code>%f</code> requires a double argument."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1499782353, "post_id": 45034787, "comment_id": 77047917, "body": "@Art <i>Also, float is incorrect because <code>%f</code> requires a double argument.</i> No. A <code>float</code> works just as well as a <code>double</code> because a <code>float</code> is promoted to a <code>double</code> for variadic arguments per default argument promotion. See <b>6.5.2.2 Function calls</b>, paragraph 6 of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the C Standard</a> and also <a href=\"https://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\" title=\"default argument promotions in c function calls\">stackoverflow.com/questions/1255775/&hellip;</a>  That&#39;s <i>why</i> there are no <code>float</code> format specifier strings."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1499782924, "post_id": 45034787, "comment_id": 77048367, "body": "@AndrewHenle yeah, I know. Just being pedantic. It&#39;s wrong from a readability point of view. Why cast to a type different than what the format specifier requires?"}], "tags": [], "owner": {"reputation": 77, "user_id": 1936582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c387c0f01f31cd5b17b845f92302d055?s=128&d=identicon&r=PG", "display_name": "TorqueNoFriction", "link": "https://stackoverflow.com/users/1936582/torquenofriction"}, "is_accepted": false, "score": 0, "last_activity_date": 1499776863, "last_edit_date": 1499776863, "creation_date": 1499776411, "answer_id": 45034787, "question_id": 45034704, "link": "https://stackoverflow.com/questions/45034704/why-does-an-integer-interpreted-as-a-double-render-zero/45034787#45034787", "title": "Why does an integer interpreted as a double render zero?", "body": "<p>The problem is your compiler is assuming the <code>20</code> is an <code>int</code>. Your options are to either declare a <code>float</code> variable and input it here OR add a typecast.</p>\n\n<p><strong>e.g.</strong></p>\n\n<pre><code>printf(\"%f\", (double)20);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776794, "post_id": 45034882, "comment_id": 77043280, "body": "Thanks, this is the kind of answer I was looking for!"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776855, "post_id": 45034882, "comment_id": 77043331, "body": "Out of curiosity, on what platform are you compiling?"}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776904, "post_id": 45034882, "comment_id": 77043385, "body": "I&#39;m on a 2,5 GHz Intel Core i7 Macbook Pro."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499776996, "post_id": 45034882, "comment_id": 77043484, "body": "Ok, so most probably it&#39;s like I said; OS X follows the System V ABI, which works as I described."}, {"owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499777026, "post_id": 45034882, "comment_id": 77043512, "body": "Okay. Could you point me in the direction of literature where I can learn more about these things?"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1499777364, "post_id": 45034882, "comment_id": 77043834, "body": "@Sandi The documentation for how functions are handled on your particular system is here: <a href=\"https://software.intel.com/sites/default/files/article/402129/mpx-linux64-abi.pdf\" rel=\"nofollow noreferrer\">software.intel.com/sites/default/files/article/402129/&hellip;</a>  But it&#39;s not very easy reading for a beginner."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1499777503, "post_id": 45034882, "comment_id": 77043971, "body": "Heh, difficult to say; I mostly learnt this stuff from debugging (live and post mortem) and doing reverse engineering, plus reading around on the internet (all the details of the System V ABI are published) and digging in the Intel manuals. Also, there was a nice book called &quot;Reversing&quot; that helped me getting started a few years ago."}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 4, "last_activity_date": 1499777195, "last_edit_date": 1499777195, "creation_date": 1499776700, "answer_id": 45034882, "question_id": 45034704, "link": "https://stackoverflow.com/questions/45034704/why-does-an-integer-interpreted-as-a-double-render-zero/45034882#45034882", "title": "Why does an integer interpreted as a double render zero?", "body": "<p>Most probably you are compiling your code on a platform/ABI where even for varargs functions data is passed into registers, and in particular different registers for integer/floating point values. x86_64 on Linux/OS X behaves like that.</p>\n\n<p>The caller has an integer to pass, so it puts it into <code>rsi</code>; on the other side, <code>printf</code> expects a floating point value, so it tries to read it from <code>xmm0</code>. No matter how you change your integer argument to any other value <code>printf</code> will be unaffected - if will just print whatever happens to stay into <code>xmm0</code> at the moment of the call. </p>\n\n<p>You can actually check if this is the case by changing your call to:</p>\n\n<pre><code>printf(\"%f\", 20, 123.45);\n</code></pre>\n\n<p>if it's working as I described, you should see 123.45 printed (the caller here puts 123.45 into <code>xmm0</code>, as it is the first floating point parameter passed to the function; <code>printf</code> behaves as before, but this time finds another value into <code>xmm0</code>). </p>\n"}], "owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 45034882, "answer_count": 3, "score": -2, "last_activity_date": 1499778299, "creation_date": 1499776186, "last_edit_date": 1499776814, "question_id": 45034704, "link": "https://stackoverflow.com/questions/45034704/why-does-an-integer-interpreted-as-a-double-render-zero", "title": "Why does an integer interpreted as a double render zero?", "body": "<p><code>printf(\"%f\", 20);</code> results in the output <code>0.000000</code>, not <code>20.000000</code>. I'm guessing this has to do with how an int is represented in memory and how a double is represented in memory. Surprisingly for me, no matter how I alter <code>20</code>, for example by making the number larger, the output is still <code>0.000000</code>. Could someone please explain the underlying mechanics of this?</p>\n"}, {"tags": ["c", "arrays", "function", "function-calls"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1499775612, "post_id": 45034423, "comment_id": 77042288, "body": "<code>displayArray(myarray[size], size);</code> =&gt; <code>displayArray(myarray, size);</code> and check compiler warnings!!!"}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "edited": false, "score": 1, "creation_date": 1499775621, "post_id": 45034423, "comment_id": 77042297, "body": "You need to type <code>displayArray(myarray, size);</code>. This error would not have gone unnoticed if your forward declaration of the function had included its full prototype (assuming your compilation command-line enables warnings)."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 6210457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df49a936eb4ec9289eff0b4da06641ef?s=128&d=identicon&r=PG&f=1", "display_name": "user6210457", "link": "https://stackoverflow.com/users/6210457/user6210457"}, "edited": false, "score": 0, "creation_date": 1499775910, "post_id": 45034475, "comment_id": 77042537, "body": "Yes, that makes sense. I should be more careful writing functions. Thanks a lot."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1499776446, "post_id": 45034475, "comment_id": 77042990, "body": "@SouravGhosh: yes."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1499776087, "last_edit_date": 1499776087, "creation_date": 1499775627, "answer_id": 45034475, "question_id": 45034423, "link": "https://stackoverflow.com/questions/45034423/displayarray-function-for-c/45034475#45034475", "title": "displayArray Function For c", "body": "<p>You have a problem in the function call (<strong><em>which your compiler should have warned you about, read the footnote later</em></strong>)</p>\n\n<pre><code>   displayArray(myarray[size], size);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>   displayArray(myarray, size);\n</code></pre>\n\n<p>because, </p>\n\n<ol>\n<li><strong>Type mismatch between formal parameter and actual argument:</strong>  you function expects <em>an array</em> (a pointer to the first element of the array, to be precise), not an element of the array.</li>\n<li><strong><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</strong> For an array defined as <code>int myarray[size]</code>, accessing element like <code>myarray[size]</code> is off-by-one, as C arrays are 0-based indexing.</li>\n</ol>\n\n<hr>\n\n<p>Footnote:</p>\n\n<p>If you try to compile <em>your</em> code, compiler should complain about the mismatch. It can happen either</p>\n\n<ul>\n<li><p>You did not turn up the compiler warning level (which is a mistake from your side)</p></li>\n<li><p>or, you chose to ignore the warnings (which is an \"offense\" from your side)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1499778361, "post_id": 45035427, "comment_id": 77044662, "body": "This should be a comment, not an answer."}], "tags": [], "owner": {"reputation": 43, "user_id": 8289587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t8_MyqkcJbs/AAAAAAAAAAI/AAAAAAAAABo/EbHcX_jtC-g/photo.jpg?sz=128", "display_name": "VVV", "link": "https://stackoverflow.com/users/8289587/vvv"}, "is_accepted": false, "score": 0, "last_activity_date": 1499778248, "creation_date": 1499778248, "answer_id": 45035427, "question_id": 45034423, "link": "https://stackoverflow.com/questions/45034423/displayarray-function-for-c/45035427#45035427", "title": "displayArray Function For c", "body": "<p>It's a common mistake which beginners commit.\nWhile calling a function in which you pass an array, you only need to specify the name of the array you want to pass.</p>\n"}], "owner": {"reputation": 187, "user_id": 6210457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df49a936eb4ec9289eff0b4da06641ef?s=128&d=identicon&r=PG&f=1", "display_name": "user6210457", "link": "https://stackoverflow.com/users/6210457/user6210457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 1, "accepted_answer_id": 45034475, "answer_count": 2, "score": 1, "last_activity_date": 1499778248, "creation_date": 1499775493, "last_edit_date": 1499776681, "question_id": 45034423, "link": "https://stackoverflow.com/questions/45034423/displayarray-function-for-c", "title": "displayArray Function For c", "body": "<p>I am new in c programming and I am studying arrays right now. I saw that unlike java you can't print them automatically by using <code>Arrays.toString()</code> method. I want to write a simple function that prints the array. </p>\n\n<p>In the program it asks us the size of the array and when we write it, it asks what is the value for each element and then the program calls the <code>displayArray()</code> function to print the array on a single line.</p>\n\n<p>For example : </p>\n\n<pre><code>Hello. What will be the size of the new array?\n\n3\n\nEnter the 1. element\n\n7\n\nEnter the 2. element\n\n5\n\nEnter the 3. element\n\n1\n</code></pre>\n\n<p>The result should be <strong>\"Your array is: 7 5 1</strong>\" but instead of that I get <strong>\"Your array is: 3 6356728 2\"</strong> as a result. Can you help?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid displayArray();\n\nint main()\n{\n    int size;\n    printf(\"Hello. What will be the size of the new array?\\n\");\n    scanf(\"%d\", &amp;size);\n\n    int myarray[size];\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        printf(\"Enter the %d. element\\n\" , (i + 1));\n        scanf(\"%d\", &amp;myarray[i]);\n    }\n\n    displayArray(myarray[size], size);\n\n    return 0;\n}\n\nvoid displayArray(int myarray[], int size)\n{\n    printf(\"Your array is: \");\n    for (int i = 0; i &lt; size; i++)\n    {\n         printf(\"%d \", myarray[i]);\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 5, "creation_date": 1499775048, "post_id": 45034244, "comment_id": 77041850, "body": "<code>printf(&quot;hello&quot;);</code> -----&gt; <code>printf(&quot;hello\\n&quot;);</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1499775068, "post_id": 45034244, "comment_id": 77041866, "body": "or <code>fflush(stdout);</code>"}, {"owner": {"reputation": 59, "user_id": 7127098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4569f98c37461a51b51c5e29a81df2f2?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Jha", "link": "https://stackoverflow.com/users/7127098/aditya-jha"}, "edited": false, "score": 0, "creation_date": 1499775156, "post_id": 45034244, "comment_id": 77041938, "body": "No@LPs . In 1st,2nd,3rd second I want to print Hello. But the code is printing hellohellohello in 3rd second."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1499775818, "post_id": 45034244, "comment_id": 77042462, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34275041/the-sleep-command-executes-not-how-i-expected\">The sleep command executes not how i expected</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "is_accepted": false, "score": 5, "last_activity_date": 1499776383, "last_edit_date": 1499776383, "creation_date": 1499775200, "answer_id": 45034310, "question_id": 45034244, "link": "https://stackoverflow.com/questions/45034244/sleep-in-a-thread-in-c/45034310#45034310", "title": "Sleep() in a Thread in c", "body": "<p>Try this, You need to flush the stream which can be either done by <code>fflush</code> or by adding <code>\\n</code>. </p>\n\n<p><code>printf</code> does not always call <code>write</code> for performance reason as system calls are costly. It rather buffers it and write at once when required. By adding, <code>\\n</code> or <code>fflush</code> make the buffer to be printed on stdout everytime.</p>\n\n<pre><code>void *myThreadFun(void *vargp)\n{\n    while(1){\n        printf(\"hello\\n\");\n        sleep(1);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 7127098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4569f98c37461a51b51c5e29a81df2f2?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Jha", "link": "https://stackoverflow.com/users/7127098/aditya-jha"}, "edited": false, "score": 0, "creation_date": 1499775871, "post_id": 45034422, "comment_id": 77042501, "body": "Thanks. But If i say printf(&quot;hi&quot;) without \\n it prints wothout flushing. Why ?"}, {"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 0, "creation_date": 1499775873, "post_id": 45034422, "comment_id": 77042504, "body": "Great, I was looking for this to update in the answer. Plus one from me"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 59, "user_id": 7127098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4569f98c37461a51b51c5e29a81df2f2?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Jha", "link": "https://stackoverflow.com/users/7127098/aditya-jha"}, "edited": false, "score": 1, "creation_date": 1499775935, "post_id": 45034422, "comment_id": 77042566, "body": "@AdityaJha Most likely because the program exits and the buffers are flushed on exit."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 3, "last_activity_date": 1499775491, "creation_date": 1499775491, "answer_id": 45034422, "question_id": 45034244, "link": "https://stackoverflow.com/questions/45034244/sleep-in-a-thread-in-c/45034422#45034422", "title": "Sleep() in a Thread in c", "body": "<p>C <code>stdio</code> is <strong>buffered</strong> with three different modes supported:</p>\n\n<ul>\n<li><em>unbuffered</em>: everything is read or written directly</li>\n<li><em>line buffered</em>: data is held in the buffer until it's full or a newline is encountered</li>\n<li><em>full buffered</em>: data is held in the buffer until it's full</li>\n</ul>\n\n<p>You can always force a buffer flush with <code>fflush()</code>. So, adding <code>fflush(stdout)</code> after your <code>printf()</code> will work.</p>\n\n<p>As <code>stdout</code> is <em>by default</em> in <em>line buffered</em> mode, you can also just append <code>\\n</code> (a newline) to your string, the newline will trigger a buffer flush.</p>\n"}], "owner": {"reputation": 59, "user_id": 7127098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4569f98c37461a51b51c5e29a81df2f2?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Jha", "link": "https://stackoverflow.com/users/7127098/aditya-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1753, "favorite_count": 0, "accepted_answer_id": 45034422, "answer_count": 2, "score": 0, "last_activity_date": 1499776383, "creation_date": 1499775012, "last_edit_date": 1499775148, "question_id": 45034244, "link": "https://stackoverflow.com/questions/45034244/sleep-in-a-thread-in-c", "title": "Sleep() in a Thread in c", "body": "<p>I want my program to print </p>\n\n<ul>\n<li>Hello in 1st second </li>\n<li>Hello in 2nd second </li>\n<li>Hello in 3rd second.</li>\n</ul>\n\n<p>So I have written the below code.\nWhats actually happening is </p>\n\n<ul>\n<li>1st second - nothing</li>\n<li>2nd second - nothing</li>\n<li>3rd second - HelloHelloHello</li>\n</ul>\n\n<p>How to correct it ?</p>\n\n<p>Whats actually happening is i</p>\n\n<pre><code>void *myThreadFun(void *vargp)\n{\n    while (1)\n    {\n        sleep(1);\n        printf(\"hello\");\n    }\n}\n</code></pre>\n"}]