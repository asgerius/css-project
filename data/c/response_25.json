[{"tags": ["c", "compiler-errors", "syntax-error"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1435794728, "creation_date": 1435794728, "answer_id": 31173524, "question_id": 31173498, "link": "https://stackoverflow.com/questions/31173498/what-is-my-syntax-error-in-this-c-code/31173524#31173524", "title": "What is my syntax error in this c code?", "body": "<p>Because it should be </p>\n\n<pre><code>const char board[][8];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4688352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wME_r8vxW0g/AAAAAAAAAAI/AAAAAAAAAJk/c1RKuyjaCUA/photo.jpg?sz=128", "display_name": "Mahsa Akbari", "link": "https://stackoverflow.com/users/4688352/mahsa-akbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435796157, "creation_date": 1435794618, "last_edit_date": 1435796157, "question_id": 31173498, "link": "https://stackoverflow.com/questions/31173498/what-is-my-syntax-error-in-this-c-code", "title": "What is my syntax error in this c code?", "body": "<p>I have just written some C code for checking for a checkmate (in chess), but I really can't understand what's wrong with my syntax, this is the compile error:</p>\n\n<pre><code>main.c:2:30: error: expected ';', ',' or ')' before 'board'           \nint is_check(const char[][8] board,int i,int j){                      \n\n                               ^                                                                                                                                                  main.c:117:27: error: expected ';', ',' or ')' before 'board'         \n\nint check(const char[][8] board)\n</code></pre>\n\n<p>and this is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint is_check(const char[][8] board,int i,int j){\nint row = i;\nint clmn = j;\n//check clmn , up\n  do{\n  i--;\n  }\n  while(board[i][j] == 'z');\n   if(i&gt;=0){\n  if(board[i][j] == 'H'){\n    return 1;\n   }\n}\n\ni = row;//init\n\n//check clmn , down\n  do{\n  i++;\n }\nwhile(board[i][j] == 'z');\nif(i&lt;8){\n if(board[i][j] == 'H'){\n   return 1;\n   }\n}\n\ni = row;//init\n\n//check row , up\n do{\n  j--;\n  }\n  while(board[i][j] == 'z');\nif(j&gt;=0){\n  if(board[i][j] == 'H'){\n    return 1;\n   }\n}\n\nj = clmn;//init\n\n//check row , down\n do{\n  j++;\n  }\n  while(board[i][j] == 'z');\nif(j&lt;8){\n  if(board[i][j] == 'H'){\n    return 1;\n   }\n }\n\nj = clmn;//init\n\n//check orib!4\ndo{\nj++;\ni++;\n}\nwhile(board[i][j] == 'z');\nif(j&lt;8 &amp;&amp; i&lt;8){\nif(board[i][j] == 'H'){\nreturn 1;\n}\n}\n\nj = clmn;\ni = row;\n\n//check orib!1\ndo{\nj++;\ni--;\n}\nwhile(board[i][j] == 'z');\nif(j&lt;8 &amp;&amp; i&gt;=0){\nif(board[i][j] == 'H'){\nreturn 1;\n}\n}\n\nj = clmn;\ni = row;\n\n//check orib!3\ndo{\nj--;\ni++;\n}\nwhile(board[i][j] == 'z');\nif(j&gt;=0 &amp;&amp; i&lt;8){\nif(board[i][j] == 'H'){\nreturn 1;\n}\n}\n\nj = clmn;\ni = row;\n\n//check orib!2\ndo{\nj--;\ni--;\n}\nwhile(board[i][j] == 'z');\nif(j&gt;=0 &amp;&amp; i&gt;=0){\nif(board[i][j] == 'H'){\nreturn 1;\n}\n}\nreturn 0;\n\n}//end func\n\nint check(const char[][8] board)\n{\nint i = 0;\nint j = 0;\nfor(;i&lt;8;i++){\n for(;j&lt;8;j++){\n  if(board[i][j] == 'q')\n   return is_check(board,i,j);\n}\n}\nreturn 0;\n}\n\nint main(){\nchar x[8][8] ={{'R','z','B','Q','H','z','q','R'},\n               {'A','A','A','A','z','z','A','A'},\n               {'z','z','z','d','z','z','D','z'},\n               {'z','z','z','z','z','z','z','b'},\n               {'z','z','z','z','a','z','z','z'},\n               {'a','z','z','a','z','z','z','z'},\n               {'z','a','a','z','z','a','a','a'},\n               {'r','d','b','z','h','z','z','r'}};\nprintf(\"%d\",check(x));\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "output"], "comments": [{"owner": {"reputation": 2273, "user_id": 2865240, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2abe6600f57815d1f238c51436c67a7?s=128&d=identicon&r=PG&f=1", "display_name": "aleksandar", "link": "https://stackoverflow.com/users/2865240/aleksandar"}, "edited": false, "score": 0, "creation_date": 1435794602, "post_id": 31173477, "comment_id": 50354582, "body": "What should it output?"}, {"owner": {"reputation": 134258, "user_id": 785065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAbxM.jpg?s=128&g=1", "display_name": "loganfsmyth", "link": "https://stackoverflow.com/users/785065/loganfsmyth"}, "edited": false, "score": 7, "creation_date": 1435794693, "post_id": 31173477, "comment_id": 50354614, "body": "You are invoking undefined behavior by moving <code>x</code> out of bounds."}, {"owner": {"reputation": 43256, "user_id": 36866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5de8fa45f79815c64b98690088a48d?s=128&d=identicon&r=PG", "display_name": "some", "link": "https://stackoverflow.com/users/36866/some"}, "edited": false, "score": 0, "creation_date": 1435794770, "post_id": 31173477, "comment_id": 50354632, "body": "What are you trying to do?"}], "answers": [{"comments": [{"owner": {"reputation": 9031, "user_id": 57318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/268c166e748438dcf5ed4e405280be62?s=128&d=identicon&r=PG", "display_name": "Xymostech", "link": "https://stackoverflow.com/users/57318/xymostech"}, "edited": false, "score": 0, "creation_date": 1435795614, "post_id": 31173506, "comment_id": 50354886, "body": "Your last statement is (sometimes) incorrect, <code>char *x = &quot;&quot;; x = &amp;x[1]</code> can work: <a href=\"http://codepad.org/zCTXXGnj\" rel=\"nofollow noreferrer\">codepad.org/zCTXXGnj</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 9031, "user_id": 57318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/268c166e748438dcf5ed4e405280be62?s=128&d=identicon&r=PG", "display_name": "Xymostech", "link": "https://stackoverflow.com/users/57318/xymostech"}, "edited": false, "score": 0, "creation_date": 1435796326, "post_id": 31173506, "comment_id": 50355037, "body": "I don&#39;t see any proof at the link, tested the code with gcc it doesn&#39;t work."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1435797913, "post_id": 31173506, "comment_id": 50355380, "body": "It is a good point that in certain special cases it is possible to predict the outcome of undefined behaviour, but as a reminder to the OP and any other readers, such predictions are (by definition of undefined behaviour) never applicable to all compilers and platforms, or even different versions of the same compiler. In some cases (e.g., certain kinds of signed integer overflow) the behaviour may be fairly consistent across popular compilers and platforms, so it may be tempting to occasionally rely on such things, but strictly speaking such programs are never correct (standard) C."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1435796333, "last_edit_date": 1495539840, "creation_date": 1435794649, "answer_id": 31173506, "question_id": 31173477, "link": "https://stackoverflow.com/questions/31173477/c-why-does-this-output-s/31173506#31173506", "title": "C - Why does this output &quot;%s&quot;", "body": "<p>Because the format string is stored after <code>\"world\"</code> immediately in the <a href=\"https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go\">read only data section</a>, so after</p>\n\n<pre><code>x = &amp;x[6];\n</code></pre>\n\n<p>now <code>x</code> points to the format string.</p>\n\n<p>That's just a coincidence, in practice it should be not possible to predict the output of that program, but it turns out there is a way to arrange the program in memory and the knowledge of that way, allows someone to write such an interesting code.</p>\n\n<p>This</p>\n\n<pre><code>char *x = \"\";\nx = &amp;x[1];\n</code></pre>\n\n<p>would not cause the same behavior for example, but anything with more than <code>0</code> characters will.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435794822, "post_id": 31173511, "comment_id": 50354649, "body": "I am sure that it will always print <code>&quot;%s&quot;</code> because that is intended, since the string literals are stored next to each other."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1435794888, "post_id": 31173511, "comment_id": 50354667, "body": "It&#39;s an undefined operation.  It doesn&#39;t HAVE to do anything."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 2, "creation_date": 1435794937, "post_id": 31173511, "comment_id": 50354682, "body": "It is implementation dependent as far as I know, but indeed most compilers might simply implement it the same way I guess."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435794968, "post_id": 31173511, "comment_id": 50354692, "body": "I understand what undefined behavior is, but I bet you to try this with any compilation flags without changing the code, it will print <code>&quot;%s&quot;</code>."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1435795149, "post_id": 31173511, "comment_id": 50354745, "body": "The point is it&#39;s not guaranteed.  Someone can have a compiler that meets the spec and not behave in this manner."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1435795282, "post_id": 31173511, "comment_id": 50354785, "body": "@iharob You lose the bet, here&#39;s an example where I didn&#39;t change the function but creating another function in the same file changes the behaviour (at least with my compiler): <a href=\"https://gist.github.com/arkku/6c4586cc05f510ceb551\" rel=\"nofollow noreferrer\">gist.github.com/arkku/6c4586cc05f510ceb551</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1435796270, "post_id": 31173511, "comment_id": 50355024, "body": "@Arkku I said without changing the code, you can change the string, but not the code. The program at the link is a completely different one."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435796562, "post_id": 31173511, "comment_id": 50355093, "body": "@iharob I didn&#39;t change the code, only the original code is executed, it&#39;s merely the presence of another function (which is never called) that breaks it. Not adding any other code cannot have been a constraint since the OP&#39;s code is not a complete program. But of course my point was merely to illustrate how fragile the construction is, I&#39;ll concede that I took liberties with the interpretation of your \u201cbet\u201d. =)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435796732, "post_id": 31173511, "comment_id": 50355140, "body": "My &quot;<i>bet</i>&quot; was if you only use the code the OP posted in the <code>main()</code> function, not adding a single line of code to it. I don&#39;t discuss the fragility of the construction, it&#39;s very fragile of course, because it depends on the memory layout of the loaded program, which depends on many many things, adding another string literal will also change the behavior and that&#39;s what <b>undefined behavior</b> means."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435796797, "post_id": 31173511, "comment_id": 50355160, "body": "@iharob Ok, pasting only the OP&#39;s code into <code>main</code> and compiling with icc on Linux does not print <code>%s</code> (meanwhile compiling with gcc on the same computer does print <code>%s</code>). You still lose the bet. =)"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435796825, "post_id": 31173511, "comment_id": 50355168, "body": "Yes I didn&#39;t specify the compiler hence, I do lose. :), and I do know that it&#39;s compiler dependent, I don&#39;t have icc though."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1436834797, "post_id": 31173511, "comment_id": 50767641, "body": "<code>Your array is of length 6 (0-5) and you&#39;re accessing 6th member (your last available is 5th).</code> The last available is 5th member? But you said you have 6 elements. That doesn&#39;t make sense."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 4, "last_activity_date": 1435794676, "creation_date": 1435794676, "answer_id": 31173511, "question_id": 31173477, "link": "https://stackoverflow.com/questions/31173477/c-why-does-this-output-s/31173511#31173511", "title": "C - Why does this output &quot;%s&quot;", "body": "<p>Because you are reading beyond the array boundary.  Your array is of length 6 (0-5) and you're accessing 6th member (your last available is 5th).  That is an undefined operation and will do unpredictable things like print out portion of your printf statement.</p>\n"}, {"tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": false, "score": 3, "last_activity_date": 1436733429, "last_edit_date": 1436733429, "creation_date": 1435794872, "answer_id": 31173538, "question_id": 31173477, "link": "https://stackoverflow.com/questions/31173477/c-why-does-this-output-s/31173538#31173538", "title": "C - Why does this output &quot;%s&quot;", "body": "<p>Coincidence. It is undefined behaviour. Your are addressing a wrong memory.</p>\n\n<p><code>&amp;x[6]</code> is equivalent to <code>&amp;(*(x+6))</code>. I.e. you are addressing just after the string's end value which is <code>'\\0'</code> and it seems that the string <code>\"s%\"</code> starts there.</p>\n"}], "owner": {"reputation": 35, "user_id": 5030213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b8d7b4a348b474b14a7c6c1a41e047eb?s=128&d=identicon&r=PG&f=1", "display_name": "nb023", "link": "https://stackoverflow.com/users/5030213/nb023"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1436733429, "creation_date": 1435794502, "last_edit_date": 1435794604, "question_id": 31173477, "link": "https://stackoverflow.com/questions/31173477/c-why-does-this-output-s", "title": "C - Why does this output &quot;%s&quot;", "body": "<pre><code>char *x = \"world\";\nx = &amp;x[6];  \nprintf(\"%s\", x);\n</code></pre>\n\n<p>Hi I can't understand why the above code is outputting the first argument in the printf statement. If I change it to <code>printf(\"f%s\",x);</code> it outputs \"ff%s\" why does it output ff twice?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "pointers", "scope", "c99"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 4, "creation_date": 1435793990, "post_id": 31173388, "comment_id": 50354433, "body": "Well, apparently <code>MISCTYPE</code> is just another name for <code>void</code>. How and where is <code>MISCTYPE</code> defined?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435794512, "post_id": 31173388, "comment_id": 50354560, "body": "@Olaf: Difference from C++? I&#39;m not aware of any differences between C and C++ when it comes to general status of typedef names. In both C and C++ a typedef name is just an alias for an existing type, not a new type."}, {"owner": {"reputation": 23845, "user_id": 147320, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bde11522cb4c83bfb7b5e7835b318ba8?s=128&d=identicon&r=PG", "display_name": "ewall", "link": "https://stackoverflow.com/users/147320/ewall"}, "edited": false, "score": 0, "creation_date": 1435794645, "post_id": 31173388, "comment_id": 50354596, "body": "Ah-ha! That&#39;s what I get for not digging into the header file! Sure enough, it&#39;s defined as <code>typedef void MISCTYPE</code>. Now to figure out how that works..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1435795110, "post_id": 31173388, "comment_id": 50354736, "body": "@AnT: Ok, I take g++ for conforming. As I do not get an error for a test, I assume you are right. Thanks for correcting me!"}, {"owner": {"reputation": 23845, "user_id": 147320, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bde11522cb4c83bfb7b5e7835b318ba8?s=128&d=identicon&r=PG", "display_name": "ewall", "link": "https://stackoverflow.com/users/147320/ewall"}, "edited": false, "score": 0, "creation_date": 1435796448, "post_id": 31173388, "comment_id": 50355066, "body": "Okay, found my solution: since the MISCTYPE was indeed void, I can make the global an array of void pointers with <code>static MISCTYPE **handles;</code> and allocate it as such with <code>handles = malloc(nthreads * sizeof(MISCTYPE *));</code> and the compiler likes it and the code works. Thanks, all!"}], "answers": [{"tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 2, "last_activity_date": 1435794226, "creation_date": 1435794226, "answer_id": 31173435, "question_id": 31173388, "link": "https://stackoverflow.com/questions/31173388/how-can-this-be-dereferencing-void-when-the-pointer-was-declared-with-a-type/31173435#31173435", "title": "How can this be dereferencing \u2018void *\u2019 when the pointer was declared with a type?", "body": "<p>Yeah, there must be something goofy with MISCTYPE because the example below works fine:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic int *handles;\n\nint main(int argc, char **argv)\n{\n\n    int i = 0;\n    handles = malloc(20 * sizeof(int));\n    for(i = 0; i &lt; 20; i++) {\n        handles[i] = i;\n    }\n\n    free(handles);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1435794640, "post_id": 31173450, "comment_id": 50354594, "body": "@Charlie Martin: This is C. In C <code>void *</code> is freely and implicitly convertible to any data pointer type. The fact that <code>malloc</code> returns <code>void *</code> does allows us to deduce anything about <code>handles</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435795219, "post_id": 31173450, "comment_id": 50354765, "body": "@Olaf: I presume that was a typo; I fixed it."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1435845056, "post_id": 31173450, "comment_id": 50378224, "body": "@AnT &quot;... from which we deduce the assignment isn&#39;t doing what you think.&quot; Whatever MISCTYPE is, the result of the assignment is still a <code>void*</code>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1435848540, "post_id": 31173450, "comment_id": 50380840, "body": "@Charlie Martin: The target of the assignment is indeed <code>void *</code> as we can deduce <i>from the compiler&#39;s error mesage</i> (which you correctly noted in the first sentence of your answer). But the return type of <code>malloc</code> has nothing to do with this deduction and does not contribute to it in any way. That&#39;s all I wanted to point out."}], "tags": [], "owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "is_accepted": true, "score": 1, "last_activity_date": 1435795203, "last_edit_date": 1435795203, "creation_date": 1435794319, "answer_id": 31173450, "question_id": 31173388, "link": "https://stackoverflow.com/questions/31173388/how-can-this-be-dereferencing-void-when-the-pointer-was-declared-with-a-type/31173450#31173450", "title": "How can this be dereferencing \u2018void *\u2019 when the pointer was declared with a type?", "body": "<p>Okay, to start with, if the compiler tells you <code>handles</code> is a <code>void *</code>, you should believe it.  Now, it turns out that <code>malloc</code> returns a <code>void *</code>, from which we deduce that <code>handles</code> is still a <code>void *</code> after assignment.</p>\n\n<p>From this we may deduce that the assignment isn't doing what you think it is. At this point we have to ask \"so what is <code>MISCTYPE</code>\", and we, using the code you've posted, can't deduce that.  But if you grok what the <code>MISCTYPE</code> is, I bet you'll find the answer.</p>\n"}], "owner": {"reputation": 23845, "user_id": 147320, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bde11522cb4c83bfb7b5e7835b318ba8?s=128&d=identicon&r=PG", "display_name": "ewall", "link": "https://stackoverflow.com/users/147320/ewall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 31173450, "answer_count": 2, "score": 1, "last_activity_date": 1435795203, "creation_date": 1435793896, "question_id": 31173388, "link": "https://stackoverflow.com/questions/31173388/how-can-this-be-dereferencing-void-when-the-pointer-was-declared-with-a-type", "title": "How can this be dereferencing \u2018void *\u2019 when the pointer was declared with a type?", "body": "<p>I'm trying to make an array with file-level or global scope whose size is determined at runtime. Various articles like <a href=\"http://forum.codecall.net/topic/51010-dynamic-arrays-using-malloc-and-realloc/\" rel=\"nofollow\">this one</a> suggest this pattern for such a dynamic array:</p>\n\n<pre><code>static MISCTYPE *handles;\nstatic int nthreads;\n\nint main(int argc, char **argv) {\n    // nthreads set from from argv\n    handles = malloc(nthreads * sizeof(MISCTYPE));\n    for(i = 0; i &lt; nthreads; i++) {\n        handles[i] = miscfunction();\n    ...\n    free(handles);\n    return 0;\n}\n\nint otherfunction(...) {\n    for(i = 0; i &lt; nthreads; i++) {\n        handles[i] = miscfunction();\n    ...\n}\n</code></pre>\n\n<p>However, everywhere I use the pointer like an array (i.e. <code>handles[i]</code>) the compiler says <code>warning: dereferencing \u2018void *\u2019 pointer</code> and then <code>error: invalid use of void expression</code>.</p>\n\n<p>But it's not a void pointer! It definitely has a type (MISCTYPE in this pseudocode), and re-casting it into the same type doesn't stop the errors. Nowhere do I pass it as a <code>void *</code> or anything like that.</p>\n\n<p>What's going on here? More importantly, what can I do about it?</p>\n"}, {"tags": ["c", "linux", "macos", "gcc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1435794146, "post_id": 31173385, "comment_id": 50354471, "body": "<code>char c;     while((c = fgetc(inputFile)) != EOF){</code> c should be an int."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1435794487, "post_id": 31173385, "comment_id": 50354552, "body": "<code>for(i = 0; i &lt; 100; i++){             if(currentLine[i] == &#39;\\0&#39;){                 &#47;&#47;&#47;found end of string                 break;             }</code> There is a strlen() function. You are free to use it."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1435794653, "post_id": 31173385, "comment_id": 50354599, "body": "<code>fileNumberString[0] = tempNumberString[0];             fileNumberString[1] = tempNumberString[1];             fileNumberString[2] = tempNumberString[2];</code> There is a function memcpy() you are free to use it. Also: sprintf() could be useful here."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3451184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510ec15f2bfb9b495e13367ae478c582?s=128&d=identicon&r=PG&f=1", "display_name": "Youj Ying", "link": "https://stackoverflow.com/users/3451184/youj-ying"}, "edited": false, "score": 0, "creation_date": 1435851142, "post_id": 31173487, "comment_id": 50382660, "body": "I can&#39;t believe I missed this! Thank you"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": true, "score": 1, "last_activity_date": 1435794556, "creation_date": 1435794556, "answer_id": 31173487, "question_id": 31173385, "link": "https://stackoverflow.com/questions/31173385/different-results-on-each-system-using-file-functions-in-c-linux-vs-mac/31173487#31173487", "title": "Different results on each system using file functions in C. Linux vs. Mac", "body": "<p>There are 4 bytes allocated for <code>numberSring</code>. Who knows what character immediately follows the last one. There is a possibility that it looks like a digit. Make it <code>numberString[5]</code> and initialize <code>numberString[4] = 0</code>, to tell <code>strtol</code> where to stop.</p>\n"}], "owner": {"reputation": 3, "user_id": 3451184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/510ec15f2bfb9b495e13367ae478c582?s=128&d=identicon&r=PG&f=1", "display_name": "Youj Ying", "link": "https://stackoverflow.com/users/3451184/youj-ying"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 31173487, "answer_count": 1, "score": 0, "last_activity_date": 1435794556, "creation_date": 1435793877, "question_id": 31173385, "link": "https://stackoverflow.com/questions/31173385/different-results-on-each-system-using-file-functions-in-c-linux-vs-mac", "title": "Different results on each system using file functions in C. Linux vs. Mac", "body": "<p>I currently am writing a file parsing program to parse some data. However, it needs to be run natively on a Mac OS machine. However, while the code will run fine on both Ubuntu 14.04 and Mac 10.10. The Mac machine will give some garbage data, sometimes. Using GCC on linux gives correct data all the time.</p>\n\n<p>The source data is as follows,</p>\n\n<pre><code>[6/30/2015 11:20:09 PM] Stream Begin\n[6/30/2015 11:20:09 PM] 00-00-FF-70-FC-A9-01-EC-FF-6C-FC-CC-01-FB-FF-70-FC-D4-01-FB\n[6/30/2015 11:20:09 PM] 00-01-FF-74-FC-C8-02-0B-FF-68-FC-B5-01-FF-FF-70-FC-B5-02-03\n[6/30/2015 11:20:09 PM] 00-02-FF-6C-FC-B9-02-03-FF-6C-FC-D0-02-17-FF-64-FC-C4-01-F4\n[6/30/2015 11:20:10 PM] 00-03-FF-68-FC-C4-01-FF-FF-59-FC-C8-01-EC-FF-5C-FC-E0-02-1B\n[6/30/2015 11:20:10 PM] 00-04-FF-5C-FC-DC-02-22-FF-5C-FC-D4-02-1E-FF-59-FC-C4-02-17\n[6/30/2015 11:20:10 PM] 00-05-FF-60-FC-C4-02-13-FF-60-FC-C8-02-1B-FF-5C-FC-D0-02-1E\n[6/30/2015 11:20:10 PM] 00-06-FF-68-FC-D4-02-1E-FF-68-FC-C0-02-22-FF-60-FC-C4-02-0F\n[6/30/2015 11:20:10 PM] 00-07-FF-5C-FC-D0-02-03-FF-64-FC-B1-02-13-FF-59-FC-BD-01-FF\n</code></pre>\n\n<p>The desired output is as Follows. The first number is the sample number determined by line number. Each source line contains 3 output lines. Each number is represented by 4 hexadecimal characters. </p>\n\n<pre><code>1,-144,-855,492\n2,-148,-820,507\n3,-144,-812,507\n4,-140,-824,523\n5,-152,-843,511\n6,-144,-843,515\n7,-148,-839,515\n8,-148,-816,535\n9,-156,-828,500\n10,-152,-828,511\n11,-167,-824,492\n12,-164,-800,539\n13,-164,-804,546\n14,-164,-812,542\n15,-167,-828,535\n16,-160,-828,531\n17,-160,-824,539\n18,-164,-816,542\n19,-152,-812,542\n20,-152,-832,546\n21,-160,-828,527\n22,-164,-816,515\n23,-156,-847,531\n</code></pre>\n\n<p>However, on my mac, it's processing as follows.</p>\n\n<pre><code>1,-144,-855,492\n2,-2368,-13114,507\n3,-2293,-812,507\n4,-140,-824,523\n5,-2432,-13482,511\n6,-2293,-843,515\n7,-148,-839,515\n8,-2368,-13050,535\n9,-2485,-828,500\n10,-152,-828,511\n11,-2672,-13178,492\n12,-2613,-800,539\n13,-164,-804,546\n14,-2624,-12986,542\n15,-2661,-828,535\n16,-160,-828,531\n17,-2560,-13178,539\n18,-2613,-816,542\n19,-152,-812,542\n20,-2432,-13306,546\n21,-2549,-828,527\n22,-164,-816,515\n23,-2496,-13546,531\n24,-2661,-835,511\n</code></pre>\n\n<p>I have tried compiling using clang, and gcc. Also tried using c99. Sometimes using xcode to compile I can get it to work, but if I move it from the source folder then it breaks again. </p>\n\n<p>code source following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\nstatic short readHexNumber(char * inputString);\nstatic void processFile(FILE * inputFile);\n//Main Function\nint main (int argc, char **argv)\n{\n    char c;\n    char *input = argv[1];\n    FILE *input_file, *output_file;\n    char defaultOut[] = \"output000.csv\";\n    char fileNumber = 0;\n    char *fileNumberString;\n    fileNumberString = defaultOut + 6;\n    input_file = fopen(input, \"r\");\n    output_file = fopen(defaultOut, \"w\");\n    if (input_file == 0 || output_file == 0)\n    {\n        //fopen returns 0, the NULL pointer, on failure\n        perror(\"Canot open file!!!\\n\");\n        exit(-1);\n    }\n    else\n    {\n    processFile(input_file);\n    char currentLine[100];\n    while (fgets(currentLine,100,input_file))\n    {\n        unsigned short lineNumber;\n        short xNumber;\n        short yNumber;\n        short zNumber;\n\n        char isNewFile = 0;\n        char i;\n        for(i = 0; i &lt; 100; i++){\n            if(currentLine[i] == '\\0'){\n                ///found end of string\n                break;\n            }\n        }\n        if(i &lt; 60){\n            ///line is short, so we assume it's a new stream\n            fileNumber+=1;\n            char tempNumberString[4] = \"000\";\n            sprintf(tempNumberString, \"%03d\",fileNumber);\n            fileNumberString[0] = tempNumberString[0];\n            fileNumberString[1] = tempNumberString[1];\n            fileNumberString[2] = tempNumberString[2];\n            fclose(output_file);\n            output_file = fopen(defaultOut, \"w\");\n            if(output_file == '\\0'){\n                //fopen returns 0, the NULL pointer, on failure\n                perror(\"Canot open file!!!\\n\");\n                exit(-1);\n            }\n            continue;\n        }\n\n        for(i = 0; i &lt; 100; i ++){\n            c = currentLine[i];\n            if(c == 0){\n                ///reached end of line\n                break;\n            }\n            if(c == ']'){\n                ///found end of header\n                i+=2;\n                break;\n            }\n        }\n\n        lineNumber = (unsigned short)readHexNumber(currentLine + i);\n        i += 6;\n        char j;\n        for(j = 0; j &lt; 3; j++){\n            xNumber = readHexNumber(currentLine + i + (18 * j));\n            yNumber = readHexNumber(currentLine + i + (18 * j) + 6 );\n            zNumber = readHexNumber(currentLine + i + (18 * j) + 12);\n            fprintf(output_file,\"%d,%d,%d,%d\\n\",3*lineNumber + j + 1, xNumber,yNumber,zNumber);\n        }\n\n    }\n    }\n\n    fclose(input_file);\n    remove(\"interimFile\");\n\n    return 0;\n}\nstatic void processFile(FILE * inputFile){\n    char * medianFile = \"interimFile\";\n    FILE * interimFile;\n    interimFile = fopen(medianFile,\"w\");\n    char c;\n    while((c = fgetc(inputFile)) != EOF){\n        if(c == '\\r'){\n                ///if our character is a carriage return. check the next character\n            if((c = fgetc(inputFile)) == '\\n'){\n                    ///if it's a new line, we just eat the carriage return character\n                fputc(c,interimFile);\n            }else{\n                    ///if the next character isn't a newline character, we make it so\n                fputc('\\n',interimFile);\n                fputc(c,interimFile);\n            }\n        }else{\n                ///put the character into the next file\n            fputc(c,interimFile);\n        }\n    }\n    fclose(interimFile);\n    fclose(inputFile);\n    inputFile = fopen(medianFile, \"r\");\n}\nstatic short readHexNumber(char * inputString){\n    char numberString[4] = \"0000\";\n\n    numberString[0] = inputString[0]; //get MSB\n    numberString[1] = inputString[1];//get next byte\n    numberString[2] = inputString[3]; //get next byte\n    numberString[3] = inputString[4];//get LSB\n\n    short number = (short)strtol(numberString, NULL, 16);\n    return number;\n}\n</code></pre>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435833327, "post_id": 31173211, "comment_id": 50370046, "body": "You have another serious bug: <code>char *curr_line;    fgets(curr_line,</code> . A decent compiler would catch this, try turning up your warning level, e.g. try <code>-Wextra</code>.    This code should trigger red flags with you. C uses pass-by-value. You have a pointer that is uninitialized, and you sent a copy of it to a function ... what do you think <code>fgets</code> will do with this copy?   You should also be aware that using uninitialized variables usually causes undefined behaviour ."}, {"owner": {"reputation": 1583, "user_id": 3503032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1176862391/picture?type=large", "display_name": "Max Segal", "link": "https://stackoverflow.com/users/3503032/max-segal"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1435836378, "post_id": 31173211, "comment_id": 50371948, "body": "Yea, thanks I fixed this with malloc.."}], "answers": [{"comments": [{"owner": {"reputation": 1583, "user_id": 3503032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1176862391/picture?type=large", "display_name": "Max Segal", "link": "https://stackoverflow.com/users/3503032/max-segal"}, "edited": false, "score": 0, "creation_date": 1435794774, "post_id": 31173221, "comment_id": 50354638, "body": "OMG Im gonna sue gcc for most ridiculous head_scratches/error_complexity ratio..  thanks!"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 1583, "user_id": 3503032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1176862391/picture?type=large", "display_name": "Max Segal", "link": "https://stackoverflow.com/users/3503032/max-segal"}, "edited": false, "score": 1, "creation_date": 1435795031, "post_id": 31173221, "comment_id": 50354714, "body": "@MaxSegal: I have some bad news for you, my friend: &quot;There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE&quot;. :-)"}, {"owner": {"reputation": 614, "user_id": 2537102, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/8TNp9.png?s=128&g=1", "display_name": "Bregalad", "link": "https://stackoverflow.com/users/2537102/bregalad"}, "reply_to_user": {"reputation": 1583, "user_id": 3503032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1176862391/picture?type=large", "display_name": "Max Segal", "link": "https://stackoverflow.com/users/3503032/max-segal"}, "edited": false, "score": 2, "creation_date": 1435831208, "post_id": 31173221, "comment_id": 50368699, "body": "@MaxSegal Don&#39;t hesitate to use the&#180; --save-temps&#180; option in order to see  the pre-processed source code (it&#39;s a &#180;.i&#180; file), it&#39;s always interesting."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 5, "last_activity_date": 1435792831, "creation_date": 1435792831, "answer_id": 31173221, "question_id": 31173211, "link": "https://stackoverflow.com/questions/31173211/fgets-compilation-error/31173221#31173221", "title": "Fgets compilation error", "body": "<p>change</p>\n\n<pre><code>#define MAX_LINE_LENGTH 128;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>#define MAX_LINE_LENGTH 128\n</code></pre>\n\n<p>(without the <code>;</code>).  Easy mistake to make.</p>\n\n<p>The C preprocessor does very simple, textual substitution, so with the wrongly-defined macro, you end up with</p>\n\n<pre><code>fgets(curr_line, 128;, file);\n</code></pre>\n\n<p>which is obviously a syntax error.</p>\n"}], "owner": {"reputation": 1583, "user_id": 3503032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/1176862391/picture?type=large", "display_name": "Max Segal", "link": "https://stackoverflow.com/users/3503032/max-segal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 31173221, "answer_count": 1, "score": 0, "last_activity_date": 1435830281, "creation_date": 1435792730, "last_edit_date": 1435830281, "question_id": 31173211, "link": "https://stackoverflow.com/questions/31173211/fgets-compilation-error", "title": "Fgets compilation error", "body": "<p>I'm stuck with what seems a beginner's compilation error:</p>\n\n<p>My simple program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"Tiles_Circular_Linked_List.h\"\n\n#define MAX_LINE_LENGTH 128;\n\nint main(int argc, char **argv) {\n    struct node *head_tail;\n    FILE *file;\n    /*char filename[] = \"/home/student/Desktop/Studies/C/testing_fodder/tiles\";*/\n\n    argv++; /*go to second character-array argument*/\n\n    file = fopen(*argv, \"r\");\n    char *curr_line;\n\n    fgets(curr_line, MAX_LINE_LENGTH, file);\n\n    return 0;\n}\n</code></pre>\n\n<p>I try to compile it using this command:</p>\n\n<blockquote>\n  <p>gcc -g -Wall -ansi launch_tiles.c -o tiles_prog</p>\n</blockquote>\n\n<p>and get these errors:</p>\n\n<blockquote>\n  <p>launch_tiles.c: In function \u2018main\u2019:</p>\n  \n  <p>launch_tiles.c:17:19: error: expected \u2018)\u2019 before \u2018;\u2019 token </p>\n  \n  <p>launch_tiles.c:17:19: error: too few arguments to function \u2018fgets\u2019 /usr/include/stdio.h:628:14: note: declared here </p>\n  \n  <p>launch_tiles.c:9:8: warning: variable \u2018file\u2019 set but not used [-Wunused-but-set-variable] </p>\n  \n  <p>launch_tiles.c:8:15: warning: unused variable \u2018head_tail\u2019 [-Wunused-variable]</p>\n</blockquote>\n\n<p>I am interested about the errors, not the warnings.</p>\n\n<p>I can count three arguments that I pass to <code>fgets</code> and don't understand where do I miss parentheses so what's the problem?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 6, "creation_date": 1435792309, "post_id": 31173128, "comment_id": 50353993, "body": "There will definitely be cases (and it&#39;s probably the common case) where a header gets included more than once (via multiple include paths) and shouldn&#39;t be considered an error."}, {"owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "edited": false, "score": 2, "creation_date": 1435796048, "post_id": 31173128, "comment_id": 50354974, "body": "I second Oliver&#39;s comment and I would not classify having an include file added more than once sloppy.  In fact I would classify relying on one include file to include something that another file needs as sloppy."}, {"owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435817609, "post_id": 31173128, "comment_id": 50360289, "body": "@OliverCharlesworth yeah, that is why I was careful to put in my description &quot;some include files&quot;.  It is obviously a common case to include more than once (so obvious that I did not point it out in my question) because gcc has a special pragma for it.  I am asking about the case where I want to ensure that it is not included twice."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1435818332, "post_id": 31173128, "comment_id": 50360636, "body": "How about adhering to Header guards?"}, {"owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1435818689, "post_id": 31173128, "comment_id": 50360822, "body": "@WedaPashi Header Guards are for the common case of wanting to allow a header file to be included more than once.  I am asking about the case when I want to have an error when they are included more than once."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435819917, "post_id": 31173128, "comment_id": 50361433, "body": "Michael, why do you think it matters that some headers should not be included more than once?  What concern do you have that isn&#39;t cured by doing what everyone else does \u2014 using some form of header guard (<code>#ifndef</code> or <code>#pragma</code>)?  What is the benefit you perceive from not having a specific header included twice?"}, {"owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435820645, "post_id": 31173128, "comment_id": 50361841, "body": "@JonathanLeffler I am doing what everyone else does: I use #pragma once or code guards on include files that are included more than once.    I do this quite often.  Because of our coding standard, many of our include files do not have any reason to be included twice. I keep a tidy code repository and I don&#39;t want extra includes. I would add the trap to those files.   An example of a include file that has no reason to be included more than once is one that only contains function prototypes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435821032, "post_id": 31173128, "comment_id": 50362033, "body": "I&#39;m not wholly on-board with your assertion that a header that only declares function prototypes need only be included once.  Actually, it is headers that define enumerations or structure types that can only be included once; headers that just define function prototypes can be included as often as you like without incurring any damage except (perhaps) to compile time.  And the header guards avoid even that overhead.  Can you quote your coding standard that prevents you simply protecting headers with header guards.  Is there a rationale behind it?"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435818985, "post_id": 31173642, "comment_id": 50360987, "body": "Note that <code>#error</code> is part of Standard C.  Neither <code>#warning</code> nor <code>#pragma message</code> is part of Standard C.  How much that matters depends on how much portability matters to you."}, {"owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "edited": false, "score": 0, "creation_date": 1435819009, "post_id": 31173642, "comment_id": 50360997, "body": "@Eve Thank you for #pragma message().  For our include files that have structures we use #pragma once.  I am thinking about include files that are not subject to being included more than once such as include files that only include function prototypes.  Because of our coding standards, that is a common case for us.  I want to avoid a tangled mess of include files and trap that condition."}, {"owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "edited": false, "score": 0, "creation_date": 1435820157, "post_id": 31173642, "comment_id": 50361550, "body": "@Eve Do you have a reference for which compilers have deprecated pregma once?  I found some references in 2003, but then I found that it was undeprecated.  I use it even tho it is not standard because it is widely supported and less subject to typos.  If sometime it is removed, then it would be trivial to replace with code guards."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "edited": false, "score": 0, "creation_date": 1435852187, "post_id": 31173642, "comment_id": 50383410, "body": "@MichaelPotter: The basic idea is that the <code>#ifndef</code> / <code>#define</code> header guard is covered by the language standard, while <code>#pragma once</code> is not."}], "tags": [], "owner": {"reputation": 46, "user_id": 5062455, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3mQOd5SGrQ4/AAAAAAAAAAI/AAAAAAAAADg/CtzklsXeFD8/photo.jpg?sz=128", "display_name": "Eve Keksdose", "link": "https://stackoverflow.com/users/5062455/eve-keksdose"}, "is_accepted": false, "score": 1, "last_activity_date": 1435818940, "last_edit_date": 1435818940, "creation_date": 1435795688, "answer_id": 31173642, "question_id": 31173128, "link": "https://stackoverflow.com/questions/31173128/output-error-when-include-file-included-twice/31173642#31173642", "title": "Output Error When include file included twice", "body": "<p><strong>tl;dr</strong> you may not be able to avoid multiple includes</p>\n\n<hr>\n\n<h2>Some more explanation why...</h2>\n\n<p>It's totally normal that different parts of a program include the same header. The goal an <code>#include</code> wants to achieve is that needed structures and functions are known before they get used. Since multiple includes of the same file slowdown the compilation and circular includes may result in infinite loops the <code>#pragma once</code> and <code>#ifndef - #define - #endif</code> construct got invented. You may read that <code>#pragma once</code> is deprecated and obsolete but it gets used anyway and anywhere...</p>\n\n<p>Similar there is/was an <code>#import</code> instead of <code>#include</code> that only includes the file once but that's a rarity AFAIK, at least in C/C++ code.</p>\n\n<p>Now let's say we produce clean code without double includes and slap each developer with warnings who may do it. The problem you get now is: what if multiple classes in different files need the same data structure? Since you stick to single includes only, you would need to know the sequence in which the files get included.</p>\n\n<h2>Example</h2>\n\n<p>Class A needs something from class B but both need Header X with a struct. You would include B before class A and within the file of class A you include header X. If you now change the dependencies of the classes you may need to move the header X include to another class on top of the chain.</p>\n\n<p>Now imagine this for a big project with many files and even more people who work on them independently. It gets pretty obvious that nobody wants to disentangle the dependencies if its possible at all. So you just use <code>#pragma once</code> and everybody is happy and that's basically the whole story about it.</p>\n\n<h2>Possible ways to print errors</h2>\n\n<p><code>#warning</code> not entirely platform-independent.</p>\n\n<p><code>#error</code> stops the compilation/preprocessing.</p>\n\n<p>This third way should be supported by GCC as well as MSVC:</p>\n\n<pre><code>#pragma message(\"double include\")\n#pragma message \"double include\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1435819454, "last_edit_date": 1495541041, "creation_date": 1435818752, "answer_id": 31177084, "question_id": 31173128, "link": "https://stackoverflow.com/questions/31173128/output-error-when-include-file-included-twice/31177084#31177084", "title": "Output Error When include file included twice", "body": "<p>I don't think you should do it (remind me not to use your headers, please, if you decide to go ahead with this scheme).</p>\n\n<p>However, if you start with the well-known mechanism for preventing damage when a header is included twice:</p>\n\n<pre><code>#ifndef FILE_FOO_SEEN\n#define FILE_FOO_SEEN\n\n\u2026the entire file\u2026\n\n#endif /* !FILE_FOO_SEEN */\n</code></pre>\n\n<p>then you can easily adapt it to generate an error when the file <em>is</em> included twice (as you recognize in the question):</p>\n\n<pre><code>#if defined(FILE_FOO_SEEN)\n#error File foo.h already included\n#else\n#define FILE_FOO_SEEN\n\n\u2026the entire file\u2026\n\n#endif /* FILE_FOO_SEEN */\n</code></pre>\n\n<p>Since <code>#error</code> is part of Standard C, it should work \u2014 at least to get a diagnostic message into the output from the compilation.  It should, but might not (Solaris of yesteryear \u2014 I'm looking at you!), prevent a successful compilation.</p>\n\n<p>Depending on your compilers, you may be able to fine-tune the error handling strategy, though frankly, it is best (by far) to simply allow the header to be included multiple times.</p>\n\n<p>Headers should be self-contained and idempotent.</p>\n\n<ul>\n<li>Self-contained means that you should not be required to include anything else explicitly in order to be able to use the header (you simply write <code>#include \"header.h\"</code> and it works).</li>\n<li>Idempotent means that if you include the file twice, by any mechanism, it works safely.</li>\n</ul>\n\n<p>The C Standard requires this for the standard headers.  Strictly, <code>&lt;assert.h&gt;</code> isn't strictly idempotent, but the others are all idempotent.  They're all self-contained, though <code>&lt;inttypes.h&gt;</code> is allowed to include <code>&lt;stdint.h&gt;</code>.</p>\n\n<p>You should follow the lead of the standard \u2014 it provides good techniques to use.</p>\n\n<hr>\n\n<h3>Related questions</h3>\n\n<p>I make no claim that this is either a complete list or an unbiassed list of links.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1804486/should-i-use-include-in-headers/1804719?s=4|0.2329#1804719\">Should I use #include in headers?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15622409/how-to-link-multiple-implementation-files-in-c/15622496#15622496\">How to link multiple implementation files in C</a></li>\n<li><a href=\"https://stackoverflow.com/questions/276386/how-to-structure-includes-in-c/276588#276588\">How to structure #includes in C</a></li>\n<li><a href=\"https://stackoverflow.com/questions/256277/what-is-a-good-reference-documenting-patterns-of-use-of-h-files-in-c/256440#256440\">What is a good reference documenting patterns of use of &quot;.h&quot; files in C?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23076334/c-how-to-manage-include-relationship-among-multiple-source-files-and-create-cor/23076495#23076495\">C How to manage #include relationship among multiple source files and create correct makefile</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27242341/breaking-up-large-c-program-in-header-files-and-c-files/27242454#27242454\">Breaking up large C program in Header files and C files</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8594954/repeated-typedefs-invalid-in-c-but-valid-in-c/8595191#8595191\">Repeated typedefs - invalid in C but valid in C++?</a></li>\n</ul>\n"}], "owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1451458336, "creation_date": 1435792120, "last_edit_date": 1435851897, "question_id": 31173128, "link": "https://stackoverflow.com/questions/31173128/output-error-when-include-file-included-twice", "title": "Output Error When include file included twice", "body": "<p><strong>[edit] It seems some people are commenting and voting without reading my post.  Please read it before commenting.  For instance: if you think I am against including files more than once, then you are missing the point of my post.</strong></p>\n\n<p>I would like to trap sloppy programming by outputting an error when some include files are included twice.</p>\n\n<p>I use <code>#pragma once</code> for include files that intend to include within other include files.  That works great.</p>\n\n<p>I know I can do a variation of \"guard macros\" to accomplish this.  But is there a better way?  Another #pragma or a gcc compile option?</p>\n\n<p>This is a sample of a guard macro:</p>\n\n<pre><code>#ifndef FILE_FOO_SEEN\n#define FILE_FOO_SEEN\n\nthe entire file\n\n#endif /* !FILE_FOO_SEEN */\n</code></pre>\n\n<p>This would work for me:</p>\n\n<pre><code>#ifdef FILE_FOO_SEEN\n\n#error \"FILE_FOO inappropriately included twice.\n\n#endif /* FILE_FOO_SEEN */\n\n#define FILE_FOO_SEEN\n/* Active Code */\n</code></pre>\n\n<p>[edit] Note: I am not asking for why it is necessary to support including header files multiple times.  That is a common case and supported with the a gcc pragma.  I am asking for the case when I have specific include files that I do not want included more than once.  If someone were to include them more than once, then it would be one of two actions: 1) Change the trap to a #pragma once, or 2) change the code to eliminate the dependency.</p>\n\n<p>Because there is a special pragma to support multiple include, I thought someone might have good techniques to avoid this as well.</p>\n\n<p>[edit] Add some of the rules we follow related to our use of header files:</p>\n\n<ol>\n<li><p>Each .c file has a companion .h file with the function prototypes. You can think of this .h file as the interface to the .c file.  This .h file may also contain structure definitions and enums that are consumed or returned by the functions.  This .h file does not need to be included in any other .h file because other .h files do not use functions.</p></li>\n<li><p>We do not create a companion .h file for .c files that contain main().</p></li>\n<li><p>Sometimes structures and enums are used independently of the functions that return or consume them.  For these cases the enums and structures are moved to an independent .h file.  This .h file will contain a <code>#pragma once</code> because it could be included multiple times.</p></li>\n<li><p>Opaque structures are preferred.</p></li>\n<li><p>Doxygen documentation that documents the interface is contained in the .h files.  This works well because the .h file contains the complete interface to the .c file.  </p></li>\n<li><p>We make exceptions to these rules as needed, but for the most part we adhere to these rules.</p></li>\n<li><p>Following these rules makes writing unit tests easier as the complete interface is easy to identify and understand.</p></li>\n</ol>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435790389, "post_id": 31172853, "comment_id": 50353385, "body": "What inputs exaclty? <code>0</code>? non-numeric input?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435790438, "post_id": 31172853, "comment_id": 50353399, "body": "When you declare your array, your dimensions are off by one.  You need an NxN array (highest indices will be (N-1) and (N-1))."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 1, "creation_date": 1435790453, "post_id": 31172853, "comment_id": 50353407, "body": "try declaring array of size [N][N]"}, {"owner": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "edited": false, "score": 0, "creation_date": 1435790655, "post_id": 31172853, "comment_id": 50353475, "body": "C arrays start with 0 index, so an array[N][N] will have its last element in array[N-1][N-1]. You are declarating an array of N-1xN-1 and accessing the position array[N-1][N-1], when the last element is at array[N-2][N-2]. This causes undefined behavior and, in some cases, SIGSEGV (Segmentation fault)."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435790659, "post_id": 31172891, "comment_id": 50353480, "body": "That is not the main problem. There is no check for <code>N == 0</code>, and there is no check for <code>scanf()</code> success."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435790794, "post_id": 31172891, "comment_id": 50353525, "body": "@iharob, that is the main problem if not the only problem."}, {"owner": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435790908, "post_id": 31172891, "comment_id": 50353561, "body": "@iharob if <code>N == 0</code> the program won&#39;t execute anything more than <code>0 - 0</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435790915, "post_id": 31172891, "comment_id": 50353565, "body": "The OP claims that it happens on some of the input."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435791000, "post_id": 31172891, "comment_id": 50353595, "body": "But that doesn&#39;t really tell us anything."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "edited": false, "score": 0, "creation_date": 1435791133, "post_id": 31172891, "comment_id": 50353631, "body": "@LuizEduardoF. <code>if (N == 0)</code> then <code>int array[-1][-1];</code> follows. Also, if the input is invalid the code will invoke undefined behavior for many reasons. See <a href=\"http://stackoverflow.com/a/31172947/1983495\">my answer</a>."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1435791420, "last_edit_date": 1435791420, "creation_date": 1435790581, "answer_id": 31172891, "question_id": 31172853, "link": "https://stackoverflow.com/questions/31172853/why-does-this-code-gives-segmentation-fault-with-some-inputs/31172891#31172891", "title": "Why does this code gives segmentation fault with some inputs?", "body": "<p>The main problem, I think, is that you're declaring your array of size <code>N - 1</code> &times; <code>N - 1</code>, but then filling in <code>N</code> elements.  Do try declaring it <code>N</code>&times;<code>N</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1435791518, "last_edit_date": 1435791518, "creation_date": 1435790660, "answer_id": 31172904, "question_id": 31172853, "link": "https://stackoverflow.com/questions/31172853/why-does-this-code-gives-segmentation-fault-with-some-inputs/31172904#31172904", "title": "Why does this code gives segmentation fault with some inputs?", "body": "<p>You declared array <code>array</code> as having <code>N-1</code> rows and <code>N-1</code> columns</p>\n\n<pre><code>int array[N-1][N-1], /*...*/;\n</code></pre>\n\n<p>So the valid range of indices for rows and columns of the array is <code>[0, N-2]</code></p>\n\n<p>However in the loops of the program you are trying to access elements of the array with indices <code>N-1</code>. For example</p>\n\n<pre><code>for(i=0;i&lt;N; i++)\n    {\n    for(j=0; j&lt;N; j++)\n        {\n        scanf(\"%d\",&amp;array[i][j]);\n    }\n}\n</code></pre>\n\n<p>that is you are trying to access memory beyond the array and as result the program has undefined behaviour.</p>\n\n<p>Simply write the declaration of the array like</p>\n\n<pre><code>int array[N][N], /*...*/;\n</code></pre>\n\n<p>Take into account that the sizes of the array shall be positive values.</p>\n\n<p>Also you may remove headers</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n</code></pre>\n\n<p>because no declaration from the headers is used in the program.</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435791197, "last_edit_date": 1435791197, "creation_date": 1435790890, "answer_id": 31172947, "question_id": 31172853, "link": "https://stackoverflow.com/questions/31172853/why-does-this-code-gives-segmentation-fault-with-some-inputs/31172947#31172947", "title": "Why does this code gives segmentation fault with some inputs?", "body": "<p>First of all, invalid input will cause Undefined Behavior.</p>\n\n<p>You need to ensure that the input is valid, for that you can check <code>scanf()</code>'s return value, like this</p>\n\n<pre><code>if (scanf(\"%d\", &amp;N) != 1)\n    return -1;\n</code></pre>\n\n<p>Then you need to ensure that <code>N &gt; 0</code>, because you allocate space for <code>N - 1</code> items, so</p>\n\n<pre><code>if (N &lt;= 1) /* this also prevents `int array[0][0];' */\n    return -1;\n</code></pre>\n\n<p>should be added.</p>\n\n<p>Then you have to fix your loops, you allocate space for <code>N - 1</code> items but you do <code>N</code> iterations from <code>0</code> to <code>N - 1</code>, <code>N - 1</code> is an invalid index if you have only allocated <code>N - 1</code> elements, you need to do one of two things</p>\n\n<ol>\n<li><p>Fix the loop</p>\n\n<pre><code>for (int i = 0 ; i &lt; N - 1 ; ++i) /* ... etc. */\n</code></pre></li>\n<li><p>Allocate space for <code>N</code> elements,</p>\n\n<pre><code>int array[N][N];\n</code></pre>\n\n<p>in this case you should change the check on <code>N</code>, to</p>\n\n<pre><code>if (N &lt; 1)\n    return -1;\n</code></pre></li>\n</ol>\n\n<p>The reason why different input triggers different behavior, is because accessing an array beyond it's limits causes <strong>undefined behavior</strong>. So it will sometimes work some other times it will cause a <em>segmentation fault</em> and even some other times something else because it's <em>undefined</em>.</p>\n\n<p>But there is yet another source of undefined behavrior that also depends on input and it's the way you used <code>scanf()</code>. If you type <code>asdasd</code> then <code>N</code> will be uninitialized when you declare your <code>array</code> variable, hence undefined behavior will happen too.</p>\n"}], "owner": {"reputation": 95, "user_id": 4112589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4694c5a076ddf842b2d75c4237a02c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi", "link": "https://stackoverflow.com/users/4112589/rashmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1435791518, "creation_date": 1435790326, "question_id": 31172853, "link": "https://stackoverflow.com/questions/31172853/why-does-this-code-gives-segmentation-fault-with-some-inputs", "title": "Why does this code gives segmentation fault with some inputs?", "body": "<pre><code>//difference of two diagonals of a N x N matrix\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    int N, j, i,k,l;\n    scanf(\"%d\",&amp;N);\n    int array[N-1][N-1], sum1=0, sum2=0, sum=0;\n    for(i=0;i&lt;N; i++)\n        {\n        for(j=0; j&lt;N; j++)\n            {\n            scanf(\"%d\",&amp;array[i][j]);\n        }\n    }\n    for(k = 0; k&lt;N; k++){\n        sum1 += array[k][k];\n    }\n    for(l=0; l&lt;N; l++){\n        sum2 += array[N-1-l][l];\n    }\n    sum = abs(sum1 - sum2);\n    printf(\"%d\",sum);   \n    return 0;\n}\n</code></pre>\n\n<p>The above code generates segmentation fault for some inputs. The program calculates absolute difference between the summation of all the values in the two main diagonal.  </p>\n"}, {"tags": ["c", "vigenere", "cs50"], "comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1435790618, "post_id": 31172831, "comment_id": 50353461, "body": "can you please elaborate on the input and what the expected output should be"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1435790760, "post_id": 31172831, "comment_id": 50353513, "body": "now, without looking too much into your code, let me ask you: are you providing the argument to the program enclosing the phrase between quotes? Please show how you call it from the command line."}, {"owner": {"reputation": 11, "user_id": 5006690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MpcfAPdwI1w/AAAAAAAAAAI/AAAAAAAAACA/oImS1lcqMAA/photo.jpg?sz=128", "display_name": "Neil Malley", "link": "https://stackoverflow.com/users/5006690/neil-malley"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1435791264, "post_id": 31172831, "comment_id": 50353672, "body": "Meet me at the park at eleven am Negh zf av huf pcfx bt gzrwep oz"}, {"owner": {"reputation": 11, "user_id": 5006690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MpcfAPdwI1w/AAAAAAAAAAI/AAAAAAAAACA/oImS1lcqMAA/photo.jpg?sz=128", "display_name": "Neil Malley", "link": "https://stackoverflow.com/users/5006690/neil-malley"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1435791390, "post_id": 31172831, "comment_id": 50353717, "body": "The english up to am should be encrypted as what follows. Sorry on my iphone now! I&#39;m not using quotes if I understand you correctly for the arguments."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 1, "creation_date": 1435795360, "post_id": 31172831, "comment_id": 50354807, "body": "Check all your <code>keyw</code> accesses. There&#39;s a couple of places where you forgot to do <code>(j % kl)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 11, "user_id": 5006690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MpcfAPdwI1w/AAAAAAAAAAI/AAAAAAAAACA/oImS1lcqMAA/photo.jpg?sz=128", "display_name": "Neil Malley", "link": "https://stackoverflow.com/users/5006690/neil-malley"}, "edited": false, "score": 0, "creation_date": 1435860819, "post_id": 31175122, "comment_id": 50388465, "body": "I updated the answer. The rest of is homework, you can finish that yourself."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 0, "last_activity_date": 1435861990, "last_edit_date": 1435861990, "creation_date": 1435807796, "answer_id": 31175122, "question_id": 31172831, "link": "https://stackoverflow.com/questions/31172831/whats-wrong-with-my-cs50-vigenere-code/31175122#31175122", "title": "What&#39;s wrong with my CS50 Vigenere code?", "body": "<pre><code>int allstralpha();\nint allstralpha(string s)\n{   \n...\n}\n</code></pre>\n\n<p>Your function definition and declaration don't match. You should declare <code>int allstralpha(string s);</code></p>\n\n<p>In first line of main:</p>\n\n<pre><code>int main(int argc, string argv[])\n{\n    string keyw = argv[1];\n    ...\n}\n</code></pre>\n\n<p>First you should check <code>if (argc &gt; 1)</code> before accessing <code>argv[1]</code></p>\n\n<p>For the actual code itself, you provide the plain text, but I can't see the keyword.</p>\n\n<p>I use these values from <a href=\"https://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher\" rel=\"nofollow\">wikipedia, vigen\u00e8re cipher</a> for testing:</p>\n\n<pre><code>Plaintext:  ATTACKATDAWN\nKey:        LEMONLEMONLE\nCiphertext: LXFOPVEFRNHR\n</code></pre>\n\n<p>Minimum code to finish this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, const char* argv[])\n{\n    const char *str = \"Meet me at the park at eleven am\";\n    const char *key = \"bacon\";\n\n    int keylen = strlen(key);\n    int len = strlen(str);\n    for (int i = 0, j = 0; i &lt; len; i++)\n    {\n        int c = str[i];\n        if (isalnum(c))\n        {\n            //int k = function of key and `j`...\n            //offset k...\n            if (islower(c))\n            {\n                c = (c - 'a' + k) % 26 + 'a';\n            }\n            else\n            {\n                c = (c - 'A' + k) % 26 + 'A';\n            }\n            j++;\n        }\n        putchar(c);\n    }\n    putchar('\\n');\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5006690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MpcfAPdwI1w/AAAAAAAAAAI/AAAAAAAAACA/oImS1lcqMAA/photo.jpg?sz=128", "display_name": "Neil Malley", "link": "https://stackoverflow.com/users/5006690/neil-malley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 31175122, "answer_count": 1, "score": 0, "last_activity_date": 1469854298, "creation_date": 1435790213, "last_edit_date": 1469854298, "question_id": 31172831, "link": "https://stackoverflow.com/questions/31172831/whats-wrong-with-my-cs50-vigenere-code", "title": "What&#39;s wrong with my CS50 Vigenere code?", "body": "<p>I've been going round in circles with this now for a few hours. It manages the first word of the recommended test (Meet me at the park at eleven am) gets over the first spaces, gives a correct letter for m then prints several spaces before ending. Many thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint allstralpha();\n\nint main(int argc, string argv[])\n{\n    string keyw = argv[1];\n    if(argc == 2 &amp;&amp; allstralpha(keyw))\n    {\n        string plaint = GetString();\n        int c = 0;\n        int kl = strlen(keyw);\n        int k = 0;\n        int p = 0;\n        int j = 0;\n        for(int i = 0, n = strlen(plaint); i &lt; n; i++)\n        {      \n            if(isalpha(plaint[i]))\n            {        \n                if(isupper(keyw[j]))\n                {\n                    k = keyw[(j % kl)] - 65;\n                    if(isupper(plaint[i]))\n                    {\n                        p = plaint[i] -65;\n                        c = ((k + p) % 26) + 65;\n                        printf(\"%c\", (char) c);                     \n                    }   \n                    else if(islower(plaint[i]))\n                    {\n                        p = plaint[i] -97;\n                        c = ((k + p) % 26) + 97;\n                        printf(\"%c\", (char) c);\n                    }\n                }\n                else if(islower(keyw[j]))\n                {   \n                    k = keyw[(j % kl)] - 97;\n                    if(isupper(plaint[i]))\n                    {  \n                        p = plaint[i] - 65;                                  \n                        c = ((k + p) % 26) + 65;             \n                        printf(\"%c\", (char) c);\n\n                    }\n                    else if(islower(plaint[i]))\n                    {\n                        p = plaint[i] - 97; \n                        c = ((k + p) % 26) + 97;\n                        printf(\"%c\", (char) c);\n                    }   \n                }\n                j++;    \n            }\n            else\n            {\n                printf(\"%c\", (char) plaint[i]);\n            }\n        }       \n    }\n    else\n    {\n        printf(\"Sorry that is not a vaild parameter\\n\");\n        return 1;\n    }  \n}\nint allstralpha(string s)\n{   \n    for(int i = 0, n = strlen(s); i &lt; n; i++)\n    {\n        if(!isalpha(s[i]))\n        {\n        return 0;\n        }\n    }\n    return 1; \n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "atmega", "atmel"], "answers": [{"tags": [], "owner": {"reputation": 264, "user_id": 5040271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08db145da5afbfe5c66193459d5de8e6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Shaw", "link": "https://stackoverflow.com/users/5040271/michael-shaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1435794599, "creation_date": 1435794599, "answer_id": 31173497, "question_id": 31172790, "link": "https://stackoverflow.com/questions/31172790/remove-bootloader-on-arduinos/31173497#31173497", "title": "Remove Bootloader on Arduinos", "body": "<p>The Arduino bootloader will be removed when you program the atmega using a programmer.</p>\n\n<p>When you program Arduino using the Arduino bootloader it knows how to write to the image such that the bootloader is preserved.</p>\n\n<p>When you create an image from AVR C and flash it to the atmega the image will overwrite the bootloader, when your atmega is next reset it will now run your image instead of the bootloader.</p>\n\n<p>The process will be the same regardless of the part however your project will need to be set up appropriately.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 5047641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQ7hj.jpg?s=128&g=1", "display_name": "Meet Desai", "link": "https://stackoverflow.com/users/5047641/meet-desai"}, "is_accepted": true, "score": 1, "last_activity_date": 1435807584, "creation_date": 1435807584, "answer_id": 31175101, "question_id": 31172790, "link": "https://stackoverflow.com/questions/31172790/remove-bootloader-on-arduinos/31175101#31175101", "title": "Remove Bootloader on Arduinos", "body": "<p>You can use AVR dude to erase the flash. This thread might help \n<a href=\"http://www.avrfreaks.net/forum/how-can-i-erase-chip-using-avrdude\" rel=\"nofollow\">http://www.avrfreaks.net/forum/how-can-i-erase-chip-using-avrdude</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5054569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3643, "favorite_count": 0, "accepted_answer_id": 31175101, "answer_count": 2, "score": 0, "last_activity_date": 1435807584, "creation_date": 1435789969, "question_id": 31172790, "link": "https://stackoverflow.com/questions/31172790/remove-bootloader-on-arduinos", "title": "Remove Bootloader on Arduinos", "body": "<p>I am trying to move from arduinos to AVR C. Would somebody know how to remove the arduino bootloader from the microcontroller? Is there a different process for the different atmega microcontrollers like the 32u4, 328, or 2560?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "mingw", "fread"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1435788292, "post_id": 31172446, "comment_id": 50352723, "body": "You could use <code>perror</code> to get an idea of what went wrong."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435788490, "post_id": 31172446, "comment_id": 50352801, "body": "You check <code>conn != 0</code> and still dereference <code>conn</code>, if this appears as it is in the book, stop reading it."}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1435788749, "creation_date": 1435788749, "answer_id": 31172570, "question_id": 31172446, "link": "https://stackoverflow.com/questions/31172446/fread-is-not-returning-successfully/31172570#31172570", "title": "fread() is not returning successfully", "body": "<p>Ideas:</p>\n\n<ol>\n<li>Double-check code that opens <code>conn-&gt;file</code>. (Is it open for reading, mode <code>\"r\"</code> or <code>\"rb\"</code>?)</li>\n<li>Set conn->file to NULL when you initially set up your database structure; this will help catch the case where you forget to open it. </li>\n<li>Temporarily change <code>fread</code> call to <code>fread(conn-&gt;db, 1, sizeof(struct Database), conn-&gt;file)</code> and inspect return value; see if it's greater than 0 but less than <code>sizeof(struct Database)</code>.</li>\n<li>Try calling <code>getc(conn-&gt;file)</code> to see if you get EOF or a character.</li>\n<li>Definitely call <code>perror()</code> or print out <code>strerror(errno)</code> after the error.</li>\n</ol>\n"}], "owner": {"reputation": 2602, "user_id": 1204749, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c7b2072c6586880fcb1e38a12de55ae?s=128&d=identicon&r=PG", "display_name": "cyber101", "link": "https://stackoverflow.com/users/1204749/cyber101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501914675, "creation_date": 1435788049, "last_edit_date": 1501914675, "question_id": 31172446, "link": "https://stackoverflow.com/questions/31172446/fread-is-not-returning-successfully", "title": "fread() is not returning successfully", "body": "<p>Im following the tutorial <a href=\"http://c.learncodethehardway.org/book/ex17.html\" rel=\"nofollow noreferrer\">http://c.learncodethehardway.org/book/ex17.html</a>, \"Learning C The Hard Way\", <strong>there seems to be a bug with the function called Database_load</strong>:</p>\n\n<pre><code>void Database_load(struct Connection *conn)\n{\n    int rc = fread(conn-&gt;db, sizeof(struct Database), 1, conn-&gt;file);\n    if(rc != 1) die(\"Failed to load database.\");\n}\n</code></pre>\n\n<p>The function returns \"Failed to load database.\".</p>\n\n<p>I tried using debugger, and looked at the <strong>fread()</strong> docs, but I'm unable to figure why this function is returning successfully. </p>\n\n<p><strong>I rewrote the function to print out some tests for sanity check:</strong></p>\n\n<pre><code>void Database_load(struct Connection *conn)\n{\n    printf(\"Database_load(struct Connection *conn)\\n\");\n    if (conn!=0)\n    {\n        printf(\"conn is not null\\n\");\n        if (conn-&gt;file!=0)\n        {\n            printf(\"conn-&gt;file is not null\\n\");\n        }//file is not null\n\n    }//end conn is not null\n\n    //actual read from filesystem \n    int rc = fread(conn-&gt;db, sizeof(struct Database), 1, conn-&gt;file);\n\n        if (!conn-&gt;db!=0)\n        {\n            printf(\"conn-&gt;db is not null\\n\");\n        }//db is not null\n\n        if(ferror(conn-&gt;file))\n        {\n      printf(\"Error in reading from file\\n\");\n        }\n\n    if(rc != 1) die(\"Failed to load database.\");\n}\n</code></pre>\n\n<p><strong>Below is cmd input:</strong></p>\n\n<pre><code>PS C:\\Users\\xyz\\workspace_cpp\\the_hard_way\\ex17&gt; .\\ex_17.exe db.dat s 1 ary ary@yahoo.com\n</code></pre>\n\n<p><strong>This is program output:</strong></p>\n\n<pre><code>Database_load(struct Connection *conn)\n\nconn is not null\n\nconn-&gt;file is not null\n\nERROR: Failed to load database.\n</code></pre>\n\n<p>How can i further explore this, what might be causing the issue?</p>\n"}, {"tags": ["c", "linux", "timer", "pthreads"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1435785398, "post_id": 31171697, "comment_id": 50351419, "body": "<code>man timer_create:  [...]The kernel preallocates a &quot;queued real-time signal&quot; for each timer created using timer_create().  Consequently, the number of timers is  limited by the RLIMIT_SIGPENDING resource limit (see setrlimit(2)).[...]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "is_accepted": true, "score": 2, "last_activity_date": 1435785419, "creation_date": 1435785419, "answer_id": 31171852, "question_id": 31171697, "link": "https://stackoverflow.com/questions/31171697/is-it-possible-to-have-multiple-timers-in-a-multithreaded-application-in-c-linux/31171852#31171852", "title": "Is it possible to have multiple timers in a multithreaded application in C Linux?", "body": "<p>Okay, so I found my mistake. I was not dereferencing the timer pointer.\nIn function <code>threadTask</code>, specifically in the <code>timer_settime</code> the first argument should be <code>*threadParams-&gt;timer</code>, emphasis on the *.</p>\n"}], "owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1362, "favorite_count": 0, "accepted_answer_id": 31171852, "answer_count": 1, "score": 1, "last_activity_date": 1435785419, "creation_date": 1435784860, "question_id": 31171697, "link": "https://stackoverflow.com/questions/31171697/is-it-possible-to-have-multiple-timers-in-a-multithreaded-application-in-c-linux", "title": "Is it possible to have multiple timers in a multithreaded application in C Linux?", "body": "<p>I'm writing a simple test to analyze the behavior of a multithreaded application when using POSIX timers. <br>\nI'm creating 3 threads, 3 timers, 3 events and 3 timerspecs. <br><br>\nWhat I'm trying to do is have each thread set a timer, wait for the timer to expire (which releases an unsafe lock) and finish the threads.<br>\nHowever, when I run the following program only the first timer expires which leads me to believe that perhaps it's not possible to have more than one timer per process. Is something wrong?</p>\n\n<p><code>handle(union sigval params)</code> is the callback for each timer when they expire.<br>\n<br>\n<code>threadTask(void *params)</code> is the callback executed by each thread.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;pthread.h&gt;\n\ntypedef struct TH_PARAMS\n{\n    uint threadNum;\n    pthread_t tid;\n    timer_t *timer;\n    struct sigevent *event;\n} ThreadParams_t;\n\nstatic timer_t timers[3];\nstatic struct itimerspec timeToWait[3];\nstatic struct sigevent events[3];\nstatic ThreadParams_t thParams[3];\nstatic char wait[3];\n\nstatic void handle(union sigval params)\n{\n    ThreadParams_t *threadParams = (ThreadParams_t *) params.sival_ptr;\n    printf(\"Timer %d expired. Thread num which sent %d. Thread %ld. Pthread %ld.\\n\",\n       *((int*) *(threadParams-&gt;timer)), threadParams-&gt;threadNum,\n       syscall(SYS_gettid), pthread_self());\n    wait[threadParams-&gt;threadNum] = 0;\n}\n\nstatic void *threadTask(void *params)\n{\n    ThreadParams_t *threadParams = (ThreadParams_t *) params;\n\n    printf(\"Thread num %d. Thread %ld. Pthread %ld.\\n\",\n       threadParams-&gt;threadNum, syscall(SYS_gettid),\n       pthread_self());\n\n    if (0 != timer_settime(threadParams-&gt;timer, 0, &amp;timeToWait[threadParams-&gt;threadNum], NULL))\n    {\n    printf(\"Failed to set timers. Error %d.\\n\", errno);\n    pthread_exit(NULL);\n    }\n\n    while(wait) sleep(1);\n\n    pthread_exit(NULL);\n}\n\nint main()\n{\n    int i;\n\n    printf(\"Main thread started. Thread: %ld. Pthread: %ld\\n\", syscall(SYS_gettid), pthread_self());\n\n    for (i = 0; i &lt; 3; ++i)\n    {\n    timeToWait[i].it_value.tv_sec = 2;\n    timeToWait[i].it_value.tv_nsec = 0;\n    timeToWait[i].it_interval.tv_sec = 0;\n    timeToWait[i].it_interval.tv_nsec = 0;\n\n    events[i].sigev_notify = SIGEV_THREAD;\n    events[i].sigev_notify_function = handle;\n    events[i].sigev_value.sival_ptr = &amp;thParams[i];\n\n    if (0 != timer_create(CLOCK_MONOTONIC, &amp;events[i], &amp;timers[i]))\n    {\n        printf(\"Failed to create timers. Error %d.\\n\", errno);\n        return 1;\n    }\n\n    wait[i] = 1;\n\n    thParams[i].threadNum = i;\n    thParams[i].event = &amp;events[i];\n    thParams[i].timer = &amp;timers[i];\n\n    if (0 != pthread_create(&amp;thParams[i].tid, NULL, threadTask, (void *) &amp;thParams[i]))\n    {\n        printf(\"Failed to create thread. Error %d.\\n\", errno);\n\n        for (i = 0; i &lt; 3; ++i)\n        {\n        if (timers[i])\n        {\n            timer_delete(timers[i]);\n        }\n        }\n\n        return 1;\n    }\n    }\n\n    for (i = 0; i &lt; 3; ++i)\n    {\n    pthread_join(thParams[i].tid, NULL);\n    }\n\n    for (i = 0; i &lt; 3; ++i)\n    {\n    if (timers[i])\n    {\n        timer_delete(timers[i]);\n    }\n    }\n\n    printf(\"Main thread finished. Thread: %ld.\\n\", syscall(SYS_gettid));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "openssl"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1435784108, "post_id": 31171396, "comment_id": 50350679, "body": "If you&#39;re just going to read in a loop, why do you need it to be non-blocking? Do you have anything better to do instead?"}, {"owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1435784287, "post_id": 31171396, "comment_id": 50350786, "body": "Because if not the SSL_read() will block (I have no end of line character to search for) and program execution stops. It needs to be non blocking..."}, {"owner": {"reputation": 1878, "user_id": 5021778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2abb60781f429ba36bbb2e9946c9d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tsui", "link": "https://stackoverflow.com/users/5021778/eric-tsui"}, "edited": false, "score": 0, "creation_date": 1435786574, "post_id": 31171396, "comment_id": 50351973, "body": "you must do <code>if (received &lt;= 0)</code> check immediately after <code>received = SSL_read (c-&gt;sslHandle, buffer, readSize);</code>"}, {"owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "edited": false, "score": 0, "creation_date": 1435787929, "post_id": 31171396, "comment_id": 50352567, "body": "Thanks for the help Eric, but I did that and it&#39;s still looping infinitely. How can I know the last byte has been read?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1435798472, "post_id": 31171396, "comment_id": 50355494, "body": "If <code>SSL_read()</code> returns <code>&lt;= 0</code>, DO NOT call <code>SSL_read()</code> a second time.  Call <code>SSL_get_error()</code> immediately, and then loop back to the <code>SSL_read()</code> at the top of the loop <b>only if</b> the error is not fatal (<code>SSL_ERROR_WANT_READ</code>, <code>SSL_ERROR_WANT_WRITE</code>, etc)."}, {"owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "edited": false, "score": 0, "creation_date": 1435799980, "post_id": 31171396, "comment_id": 50355824, "body": "Thanks Remy, but that&#39;s what I was doing initially and it didn&#39;t work. Are you able to tell me whats wrong with the code... ? Is there any special way the socket needs to be initialized? The socket was initialized using fcntl() for non blocking and after connect() I set the timeout to 5 seconds w/select()..."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1581411982, "post_id": 31171396, "comment_id": 106414593, "body": "I&#39;d like to add that the program above has a buffer overflow. Also, I feel this question is a X Y problem - the real problem is &quot;how do I read a variable-length record&quot;, because non-blocking mode will not help, as SSL_read can return more data than expected. The correct solution would be to read single bytes until the record is complete."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "edited": false, "score": 1, "creation_date": 1435801828, "post_id": 31174268, "comment_id": 50356241, "body": "Thanks Remy, this is correct! And thanks again for talking to me in code instead of a bunch of English, I appreciate that."}, {"owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "edited": false, "score": 0, "creation_date": 1435843786, "post_id": 31174268, "comment_id": 50377257, "body": "Hi Remy, after testing a while it works but there&#39;s a problem - this is going to wait 5 seconds even if data is available before that. So to send/receive data twice will take 20 seconds, when on a fast server it should take 1 - 2. Is there any way to make it read IF data is available, and make it wait ONLY if NO data is available? I&#39;d like to keep the 5 second timeout because some servers need it, but most don&#39;t. I&#39;d just like it so that it only waits that amount of time if necessary and not by default. Thanks."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "edited": false, "score": 0, "creation_date": 1435850210, "post_id": 31174268, "comment_id": 50381990, "body": "Obviously, you would have to tweak the <code>select()</code> timeout to suit your needs. But you do have to take network lag into account. Without a distinct delimiter between messages, timeouts are all you have to work with. What I gave you already does what you are asking for. As long as data is available, it does not need to wait. It only waits when data is not available. But what exactly is being sent that does not delimit its messages in <i>some</i> manner?"}, {"owner": {"reputation": 422, "user_id": 2817542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55d15a8d3fdade01f3ee2a3b2becc23?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Aveling", "link": "https://stackoverflow.com/users/2817542/ben-aveling"}, "edited": false, "score": 0, "creation_date": 1524574516, "post_id": 31174268, "comment_id": 87020577, "body": "From the man page: &quot;SSL_pending(3) can be used to find out whether there are buffered bytes available for immediate retrieval.&quot;"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1435809263, "last_edit_date": 1435809263, "creation_date": 1435800360, "answer_id": 31174268, "question_id": 31171396, "link": "https://stackoverflow.com/questions/31171396/openssl-non-blocking-socket-ssl-read-unpredictable/31174268#31174268", "title": "OpenSSL Non-Blocking Socket SSL_read() unpredictable", "body": "<p>Your loop is calling <code>SSL_read()</code> too many times, and your error handling is not breaking the loop when there really is no more data to read (the <code>SSL_ERROR_WANT_READ</code> condition).  Try something more like this instead:</p>\n\n<pre><code>char *sslRead (connection *c)\n{\n    const int readSize = 1024;\n    char *rc = NULL;\n    int received, count = 0;\n    int TotalReceived = 0;\n    fd_set fds;\n    struct timeval timeout;\n    char buffer[1024];\n\n    if (c)\n    {\n        while (1)\n        {\n            received = SSL_read (c-&gt;sslHandle, buffer, readSize);\n            if (received &gt; 0)\n            {\n                TotalReceived += received;\n                printf(\"Buffsize - %i - %.*s \\n\", received, received, buffer);\n            }\n            else\n            {\n                count++;\n\n                //printf(\" received equal to or less than 0\\n\")\n                int err = SSL_get_error(c-&gt;sslHandle, received);\n                switch (err)\n                {\n                    case SSL_ERROR_NONE:\n                    {\n                        // no real error, just try again...\n                        printf(\"SSL_ERROR_NONE %i\\n\", count);\n                        continue;\n                    }   \n\n                    case SSL_ERROR_ZERO_RETURN: \n                    {\n                        // peer disconnected...\n                        printf(\"SSL_ERROR_ZERO_RETURN %i\\n\", count);\n                        break;\n                    }   \n\n                    case SSL_ERROR_WANT_READ: \n                    {\n                        // no data available right now, wait a few seconds in case new data arrives...\n                        printf(\"SSL_ERROR_WANT_READ %i\\n\", count);\n\n                        int sock = SSL_get_rfd(c-&gt;sslHandle);\n                        FD_ZERO(&amp;fds);\n                        FD_SET(sock, &amp;fds);\n\n                        timeout.tv_sec = 5;\n                        timeou.tv_nsec = 0;\n\n                        err = select(sock+1, &amp;fds, NULL, NULL, &amp;timeout);\n                        if (err &gt; 0)\n                            continue; // more data to read...\n\n                        if (err == 0) {\n                            // timeout...\n                        } else {\n                            // error...\n                        }\n\n                        break;\n                    }\n\n                    case SSL_ERROR_WANT_WRITE: \n                    {\n                        // socket not writable right now, wait a few seconds and try again...\n                        printf(\"SSL_ERROR_WANT_WRITE %i\\n\", count);\n\n                        int sock = SSL_get_wfd(c-&gt;sslHandle);\n                        FD_ZERO(&amp;fds);\n                        FD_SET(sock, &amp;fds);\n\n                        timeout.tv_sec = 5;\n                        timeou.tv_nsec = 0;\n\n                        err = select(sock+1, NULL, &amp;fds, NULL, &amp;timeout);\n                        if (err &gt; 0)\n                            continue; // can write more data now...\n\n                        if (err == 0) {\n                            // timeout...\n                        } else {\n                            // error...\n                        }\n\n                        break;\n                    }\n\n                    default:\n                    {\n                        printf(\"error %i:%i\\n\", received, err); \n                        break;\n                    }\n                }     \n\n                break;\n            }\n        }\n    }\n\n    return rc;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5071297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d6d46881be836af0d861a9f43174c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinder230", "link": "https://stackoverflow.com/users/5071297/sinder230"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10952, "favorite_count": 2, "accepted_answer_id": 31174268, "answer_count": 1, "score": 0, "last_activity_date": 1435809263, "creation_date": 1435783729, "last_edit_date": 1435788165, "question_id": 31171396, "link": "https://stackoverflow.com/questions/31171396/openssl-non-blocking-socket-ssl-read-unpredictable", "title": "OpenSSL Non-Blocking Socket SSL_read() unpredictable", "body": "<p>I'm trying to make a non-blocking socket w/OpenSSL so I can loop over SSL_read() until there's no more data left, then break the loop. After a lot of work, I finally got the connection working, but now for the first thousand+ iterations SSL_read() will return -1. After, it will give me the actual data on the socket. SSL_read() also is not returning an accurate number of bytes read, it ALWAYS says -1 even when it's reading the correct bytes. I was able to get it working perfectly w/blocking sockets but non blocking seems problematic...</p>\n\n<pre><code>char *sslRead (connection *c)\n{\nconst int readSize = 1024;\nchar *rc = NULL;\nint r;\nint received = -1, count = 0;\nint TotalReceived = 0, ReallocSize = 0;\nchar buffer[1024];\n\nif (c)\n{\n    while (1)\n    {\n\n        received = SSL_read (c-&gt;sslHandle, buffer, readSize);\n\n    buffer[received] = '\\0';\n\n        TotalReceived += received;\n        printf(\"Buffsize - %i - %s \\n\", received, buffer);\n\n\n        if (received &lt;= 0)\n        {\n\n            // this line added per advice of Eric Tsui but does not\n            // change behaviour \n            received = SSL_read (c-&gt;sslHandle, buffer, readSize);\n\n\n\n            //printf(\" received equal to or less than 0\\n\")\n            switch (SSL_get_error(c-&gt;sslHandle, received))\n            {\n                case SSL_ERROR_NONE:\n                {\n                        printf(\"SSL_ERROR_NONE %i\\n\", count);\n                        //if (received != -1)\n                        //  goto END;\n                        break;\n                }   \n                case SSL_ERROR_ZERO_RETURN: \n                {\n                        printf(\"SSL_ERROR_ZERO_RETURN %i\\n\", count);\n                        goto END;\n                        break;\n                }   \n                case SSL_ERROR_WANT_READ: \n                {\n                        printf(\"SSL_ERROR_WANT_READ %i\\n\", count);\n\n                        break;\n                }\n                case SSL_ERROR_WANT_WRITE: \n                {\n                        printf(\"SSL_ERROR_WANT_WRITE %i\\n\", count);\n                        goto END;\n                        //break;\n                }\n                default:\n                {\n                        printf(\"error %i\\n\", received); \n                        break;\n                }\n            }     \n\n\n            count++;\n        }\n    }\n}\nEND:\nreturn rc;\n}\n</code></pre>\n\n<p>If you've done this before, I'd really appreciate if you could tell me what's wrong with this code. Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1435783801, "post_id": 31171241, "comment_id": 50350511, "body": "You are specifying a formatter for a string (C string) to printf.  The expected string should contain a terminating null at the end.  But your layout field does not contain one."}, {"owner": {"reputation": 77, "user_id": 5071224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-DKx2_Q8mpMc/AAAAAAAAAAI/AAAAAAAAAJI/JBIlTtxdgEw/photo.jpg?sz=128", "display_name": "Arthur Bouvier", "link": "https://stackoverflow.com/users/5071224/arthur-bouvier"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1435788914, "post_id": 31171241, "comment_id": 50352936, "body": "I&#39;m really surprised at how fast I got an answer. I usually need to wait a few days to get answers on forums. Is it because Stack Overflow is just really popular?"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1435840179, "post_id": 31171241, "comment_id": 50374604, "body": "It&#39;s more than popularity. Something about the structure leads to quality answers.  I think developers get a mental boost when providing a good accepted answer. Reputation points function like a score, to an extent."}], "answers": [{"comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "reply_to_user": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1435784205, "post_id": 31171410, "comment_id": 50350738, "body": "@technosaurus My answer asked the person to add one to the array for the null. If done the size of layout is now 17. 0..16."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 1, "creation_date": 1435784935, "post_id": 31171410, "comment_id": 50351166, "body": "Presumably you mean &quot;aren&#39;t&quot; rather than &quot;are&quot;. Please proofread your answers, especially for mistakes that invert meaning."}], "tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1435785041, "last_edit_date": 1435785041, "creation_date": 1435783785, "answer_id": 31171410, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c/31171410#31171410", "title": "printf char array in structure also prints next int in C", "body": "<ol>\n<li>You are not null terminating the layout string. If this string is has\n16 characters, add one to the layout array for the null. <code>layout[16]\n= '\\0'</code></li>\n<li>You need to convert ASCII strings to numbers if that is your intent. <code>arrowClr = buf[16] - '0';</code> </li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 0, "last_activity_date": 1435784599, "last_edit_date": 1435784599, "creation_date": 1435783887, "answer_id": 31171437, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c/31171437#31171437", "title": "printf char array in structure also prints next int in C", "body": "<p>In this line</p>\n\n<pre><code>printf(\"%s\\n\",tiles[i].layout);\n</code></pre>\n\n<p>there is expected to be a string terminator <code>'\\0'</code> at the end of the string. But you didn't put one. You built the string like this</p>\n\n<pre><code>for (int e=0;e&lt;16;e++) {\n    sprintf(&amp;tiles[i].layout[e],\"%c\",buf[e]);\n    ...\n</code></pre>\n\n<p>Your struct definition needs an extra char length</p>\n\n<pre><code>char layout[17];        // &lt;--- 16 to 17\n</code></pre>\n\n<p>and then after copying chars from the file, you need</p>\n\n<pre><code>tiles[i].layout[16] = '\\0';\n</code></pre>\n\n<p>to terminate the string so you can print it.</p>\n\n<p>Then, the last two fields which you obtain with</p>\n\n<pre><code>tiles[i].arrowClr = buf[16];\ntiles[i].spPlacing = buf[17];\n</code></pre>\n\n<p>should be like this, to convert the single digit ASCII value to an <code>int</code> type</p>\n\n<pre><code>tiles[i].arrowClr = buf[16] - '0';\ntiles[i].spPlacing = buf[17] - '0';\n</code></pre>\n\n<p>asuming that you intended the read value to be the number <code>1</code> or <code>2</code> and not the character <code>'1'</code> or <code>'2'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1435784059, "creation_date": 1435784059, "answer_id": 31171485, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c/31171485#31171485", "title": "printf char array in structure also prints next int in C", "body": "<p>As I and others mentioned, you need to allocate at least one more byte to your string.  But I would also recommend replacing your for loop (%c) with a simple call to <code>snprintf()</code>.  That will let you specify the 16 bytes you want from <code>buf</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1435784066, "creation_date": 1435784066, "answer_id": 31171490, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c/31171490#31171490", "title": "printf char array in structure also prints next int in C", "body": "<p>You need a nul character (<code>'\\0'</code>) at the end of your string if you want to use it with standard C string functions.</p>\n\n<p>Arrays in C don't have any length information associated with them, so in order for <code>printf</code> to know when it's reached the end of a string it needs some sort of marker.  The nul character is used for this (also by all other string related functions like <code>strlen</code>, <code>strcpy</code>, etc.).</p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1435784265, "post_id": 31171509, "comment_id": 50350773, "body": "<code>atoi()</code> needs a string, not a char.  It&#39;s a good idea, though.  Library calls are better supported (and portable), generally."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1435784347, "last_edit_date": 1435784347, "creation_date": 1435784131, "answer_id": 31171509, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c/31171509#31171509", "title": "printf char array in structure also prints next int in C", "body": "<p>You're using the <code>layout</code> field as an array of characters, but you're trying to print it as a string.  In C a string is a NULL terminated array of characters.  Since your array doesn't have a NULL terminator, <code>printf</code> keeps looking until it finds a 0 byte, which it ends up finding in the <code>arrowClr</code> field which is laid out next in memory.  That's why it's printing out the number.</p>\n\n<p>You need to either make <code>layout</code> one character bigger, i.e. <code>char layout[17]</code>, and set <code>layout[16] = 0</code>, or you would need to run <code>printf</code> in a loop to print each character individually.  I'd recommend the former.</p>\n\n<p>To get the numerical values of the last two characters, you need to do this:</p>\n\n<pre><code>tiles[i].arrowClr = buf[16] - '0';\ntiles[i].spPlacing = buf[17] - '0';\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5071224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-DKx2_Q8mpMc/AAAAAAAAAAI/AAAAAAAAAJI/JBIlTtxdgEw/photo.jpg?sz=128", "display_name": "Arthur Bouvier", "link": "https://stackoverflow.com/users/5071224/arthur-bouvier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 31171437, "answer_count": 5, "score": -1, "last_activity_date": 1435785041, "creation_date": 1435783182, "question_id": 31171241, "link": "https://stackoverflow.com/questions/31171241/printf-char-array-in-structure-also-prints-next-int-in-c", "title": "printf char array in structure also prints next int in C", "body": "<p>I am very new to C and I don't know that much about it, although I do have some experience with programming as a whole. Whenever I get warnings or errors I just look it up online. But this one doesn't give a warning or an error. It runs fine but it gives the wrong result.</p>\n\n<p>So I have a structure with a char[16] and 2 ints:</p>\n\n<pre><code>struct tile {\nchar layout[16];\nint arrowClr;\nint spPlacing;\n};\n</code></pre>\n\n<p>I make an array of 200 of them with <code>struct tile tiles[200];</code>. Then I open a file with a list of characters &amp; numbers:</p>\n\n<pre><code>char resourceName[5];\nscanf(\"%s\",&amp;*resourceName);\n\nchar rLoc[100];\nsprintf(rLoc,\"Resources/%s/\",resourceName);\n\nchar tileLoc[100];\nsprintf(tileLoc,\"%sTiles.txt\",rLoc);\nFILE *tile_list;\ntile_list = fopen(tileLoc,\"r\");\n</code></pre>\n\n<p>This is the list:</p>\n\n<pre><code>   w s d   d   w20\nwwwww   w s w  w10\nw  wws ww  ww  w10\nw  ww  ww sww  w10\n   w  sw   w   w20\nws ww  ww  ww  w21\nwwww     w  w  w10\nws  w   w   w   20\nwwwww   w  sw   20\nw  ww  dws dw  w10\nwwww  s         20\nw  ww sww  ww  w11\nwwww   w s w   w20\nwddw  sw   w   w10\nwwww    s       20\nw  wd swd  ww  w20\nw  w  s     w  w20\nwddww   w s w   20\nwddww sww  ww  w20\nw  ww  wws ww  w10\nwwww   w   ww  w10\n</code></pre>\n\n<p>After that, I cycle through each line, storing the 16 first characters in the structure layout char (I used sprintf to make it know it was a character, because otherwise it just gave ascii value) and the last two numbers in the two ints:</p>\n\n<pre><code>for (int i=0;fgets(buf,100,tile_list)!=NULL;i++) {\nstrtok(buf,\"\\n\");\n//printf(\"%s\",buf);\n//printf(\"%c\\n\",buf[0]);\nfor (int e=0;e&lt;16;e++) {\n    sprintf(&amp;tiles[i].layout[e],\"%c\",buf[e]);\n}\ntiles[i].arrowClr = buf[16];\ntiles[i].spPlacing = buf[17];\n}\n</code></pre>\n\n<p>Then, I display each of them to test it (without the two ints) with:</p>\n\n<pre><code>for (int i=0;i&lt;21;i++) {\nprintf(\"%s\\n\",tiles[i].layout);\n}\n</code></pre>\n\n<p>And this is the result:</p>\n\n<pre><code>   w s d   d   w2\nwwwww   w s w  w1\nw  wws ww  ww  w1\nw  ww  ww sww  w1\n   w  sw   w   w2\nws ww  ww  ww  w2\nwwww     w  w  w1\nws  w   w   w   2\nwwwww   w  sw   2\nw  ww  dws dw  w1\nwwww  s         2\nw  ww sww  ww  w1\nwwww   w s w   w2\nwddw  sw   w   w1\nwwww    s       2\nw  wd swd  ww  w2\nw  w  s     w  w2\nwddww   w s w   2\nwddww sww  ww  w2\nw  ww  wws ww  w1\nwwww   w   ww  w1\n</code></pre>\n\n<p>Removing the <code>tiles[i].arrowClr = buf[16];</code> makes that last number disappear from each line, and making the for loop before it go while <code>e&lt;15</code> instead of <code>e&lt;16</code> makes it disappear too, also making the last character before it vanish too.</p>\n\n<p>BTW I know <code>tiles[i].arrowClr = buf[16];</code> &amp; <code>tiles[i].spPlacing = buf[17];</code> give me the ascii values of the numbers, that's just another problem, if anybody knows how to fix that too that would be useful</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435782108, "post_id": 31170846, "comment_id": 50349603, "body": "If you know you&#39;re going to loose these lines soon (right after submitting), why not do that yourself? Any reasonable text editor can be quite good at doing that"}, {"owner": {"reputation": 747, "user_id": 1887231, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d427fcaf426ffb6912dd755665f1e068?s=128&d=identicon&r=PG", "display_name": "tomKPZ", "link": "https://stackoverflow.com/users/1887231/tomkpz"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435782163, "post_id": 31170846, "comment_id": 50349635, "body": "I want to keep these lines though.  I want to continue using them as I make future changes."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435782800, "post_id": 31170846, "comment_id": 50349974, "body": "Not sure if this is what you want, but I would consider submitting all the debug code to the VCS, but <i>not</i> submitting the makefile or header file or whatever it is that actually defines <code>SPECIAL_DEBUG_FLAG</code>.  So anybody ele who checks out and builds the code will not have the debugging code enabled unless they ask for it.  And then when you truly don&#39;t need the debugging code any more you can delete it all and resubmit a clean version of the source code without it."}, {"owner": {"reputation": 747, "user_id": 1887231, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d427fcaf426ffb6912dd755665f1e068?s=128&d=identicon&r=PG", "display_name": "tomKPZ", "link": "https://stackoverflow.com/users/1887231/tomkpz"}, "edited": false, "score": 0, "creation_date": 1435783095, "post_id": 31170846, "comment_id": 50350135, "body": "Yeah, that&#39;s what I actually had in mind to begin with, but it turns out I&#39;m not allowed to have the debugging code appear in my submission."}, {"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1435784150, "post_id": 31170846, "comment_id": 50350706, "body": "I know of no specific tool to do this, but with care in the construction of your special sections you could use something like sed to parse the code and omit the sections.  I used to work with someone who put a special comment at the end of every line containing temporary debug code.  He could then simply delete every line containing the special comment."}, {"owner": {"reputation": 747, "user_id": 1887231, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d427fcaf426ffb6912dd755665f1e068?s=128&d=identicon&r=PG", "display_name": "tomKPZ", "link": "https://stackoverflow.com/users/1887231/tomkpz"}, "edited": false, "score": 0, "creation_date": 1435785284, "post_id": 31170846, "comment_id": 50351362, "body": "Unifdef is exactly what I was looking for!  If you could make your comment an answer, I would mark it accepted."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1435785335, "post_id": 31170846, "comment_id": 50351388, "body": "No can do ... your question has already been closed as a duplicate."}], "owner": {"reputation": 747, "user_id": 1887231, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d427fcaf426ffb6912dd755665f1e068?s=128&d=identicon&r=PG", "display_name": "tomKPZ", "link": "https://stackoverflow.com/users/1887231/tomkpz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1435785257, "answer_count": 0, "score": 0, "last_activity_date": 1435781853, "creation_date": 1435781853, "question_id": 31170846, "link": "https://stackoverflow.com/questions/31170846/expanding-a-c-macro-selectively", "closed_reason": "Duplicate", "title": "Expanding a C macro selectively", "body": "<p>I have some code that I want to submit to a VCS, but I don't want to include my debugging code in my submitted file.  I test for a macro around all code I don't want submitted, something like this:</p>\n\n<pre><code>#ifdef SPECIAL_DEBUG_FLAG\n// code I don't want submitted\n#endif\n</code></pre>\n\n<p>I cannot simply include all my debug code in a header file, because it necessarily needs to be interlaced with the code I'd like to submit.  </p>\n\n<p>My question is: is there a way to selectively expand only the macro SPECIAL_DEBUG_FLAG, so that its contents get deleted before I submit my code to VCS?  I know gcc has the <code>-E</code> flag, which will preprocess everything.  But I don't want it to expand things like <code>#include</code> for example.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435781971, "post_id": 31170836, "comment_id": 50349537, "body": "And your problem is... ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435782293, "post_id": 31170836, "comment_id": 50349710, "body": "I don&#39;t think the code you posted is actually giving the output you say, since it outputs <code>newline</code> and not <code>,</code> (if it outputs anything)."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435782365, "post_id": 31170836, "comment_id": 50349740, "body": "yes, I meant &gt;47   and &lt;58   thanks for that"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435782435, "post_id": 31170836, "comment_id": 50349785, "body": "Please don&#39;t just tinker with the code in response to comments. We won&#39;t know what is real and what is mistyped. Post your effective code <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> Downvoted."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435782625, "post_id": 31170836, "comment_id": 50349884, "body": "It was a typo, what I have there now is the real code I&#39;m using"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1435783381, "post_id": 31170836, "comment_id": 50350294, "body": "What about inputs like <code>button 23</code>? Are you supposed to read the number <code>23</code> or two separate digits <code>2</code> and <code>3</code>?"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435783585, "post_id": 31170836, "comment_id": 50350395, "body": "that should be no big deal, I&#39;m modifying the code to multiply the integer byu 10 and adding the number to it so 0*10+2, then 2*10+3"}, {"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 1, "creation_date": 1435784491, "post_id": 31170836, "comment_id": 50350903, "body": "Tiny fix: <code>c&lt;255</code> (0..254) is 255 items."}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435784690, "post_id": 31170836, "comment_id": 50351027, "body": "good to know, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435783087, "post_id": 31170983, "comment_id": 50350133, "body": "the string terminator :):) didn&#39;t think of that you&#39;re answer is perfect, thank you very much, problem solved :D"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 1, "last_activity_date": 1435782946, "last_edit_date": 1435782946, "creation_date": 1435782284, "answer_id": 31170983, "question_id": 31170836, "link": "https://stackoverflow.com/questions/31170836/looking-for-numbers-in-a-character-array/31170983#31170983", "title": "looking for numbers in a character array", "body": "<p>Your if-statement is wrong.</p>\n\n<p>You can express it much clearer, and more correctly as:</p>\n\n<pre><code>if ('0' &lt;= line[c] &amp;&amp; line[c] &lt;= '9')\n{\n    printf(\"the character is: %c\\n\",line[c]);\n}\n</code></pre>\n\n<hr>\n\n<p>Your loop runs for 256 characters, even though the input of <code>\"buttons\"</code> only has 7 characters.  You're running off into memory that is not yours, and likely finding 9, 4, 4, there by random chance.</p>\n\n<p>You want:</p>\n\n<pre><code>for (int c=0; c &lt; 256; ++c)\n{\n    if (line[c] == '\\0')    // If the end of the input is found, stop the loop.\n    {\n        break;\n    }\n    if ('0' &lt;= line[c] &amp;&amp; line[c] &lt;= '9')\n    {\n        printf(\"the character is: %c\\n\",line[c]);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435784335, "post_id": 31171473, "comment_id": 50350813, "body": "A very good tip, I&#39;m trying to improve my code&#39;s readability and this should definitely help thank you both"}, {"owner": {"reputation": 41, "user_id": 2562183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461f843ee086438f89ac6d7a7abf4859?s=128&d=identicon&r=PG", "display_name": "hpatel71", "link": "https://stackoverflow.com/users/2562183/hpatel71"}, "reply_to_user": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435784455, "post_id": 31171473, "comment_id": 50350876, "body": "No problem! In the scope of readability, my comment regarding ASCII characters is very minimal. You only learn more advantageous techniques with practice!"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "edited": false, "score": 0, "creation_date": 1435784620, "post_id": 31171473, "comment_id": 50350977, "body": "Unfortunately, I never see these kinds of problems on my own, I always need someone to look at my code to point out readability problems"}], "tags": [], "owner": {"reputation": 41, "user_id": 2562183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461f843ee086438f89ac6d7a7abf4859?s=128&d=identicon&r=PG", "display_name": "hpatel71", "link": "https://stackoverflow.com/users/2562183/hpatel71"}, "is_accepted": false, "score": 1, "last_activity_date": 1435784020, "creation_date": 1435784020, "answer_id": 31171473, "question_id": 31170836, "link": "https://stackoverflow.com/questions/31170836/looking-for-numbers-in-a-character-array/31171473#31171473", "title": "looking for numbers in a character array", "body": "<p>An extension of abelenky's post:</p>\n\n<p>abelenky presents 2 (out of many) solutions to the problem. An important aspect of writing code is readability. abelenky's first solution maximizes readability.</p>\n\n<pre><code>if (line[c] &gt;= '0' &amp;&amp; line[c] &lt;= '9')\n{\n    printf(\"the character is: %c\\n\",line[c]);\n}\n</code></pre>\n\n<p>Everyone is aware that ASCII characters are mapped to integer values, but not everyone can readily recall the range of values associated with each types of character (numbers, letters, capital letters, etc.). </p>\n\n<p>This is why C supports the single quotes: ' '</p>\n\n<p>It is reasonable to assume that ASCII values for integers increment as do integers from 0-9, thus using '0' and '9' in your conditional statement improves readability. Adopting a more legible style of code <strong>will</strong> improve your and the life of anyone who views your code. </p>\n\n<p>Happy coding!</p>\n"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 31170983, "answer_count": 2, "score": -1, "last_activity_date": 1435784020, "creation_date": 1435781806, "last_edit_date": 1435782339, "question_id": 31170836, "link": "https://stackoverflow.com/questions/31170836/looking-for-numbers-in-a-character-array", "title": "looking for numbers in a character array", "body": "<p>I'm writing a program that reads lines from a file\nI need to print out the numbers, the lines read are stored in a character array:</p>\n\n<pre><code>char line[255];\n//code to read line from file here\nfor (c=0;c&lt;256;c++)\n{\n  if (line[c]&lt;58 &amp;&amp; line[c]&gt;47)\n    printf(\"the character is: %c\\n\",line[c]);\n}\n</code></pre>\n\n<p>the configuration file has the following lines:</p>\n\n<pre>buttons 3</pre>\n\n<p>the result I'd like to get is <code>the character is 3</code>, instead I get <code>3,9,4,4</code></p>\n\n<p>Hope I've provided sufficient information.\nthanks</p>\n"}, {"tags": ["c", "arrays", "pointers", "recursion", "sub-array"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1435786209, "post_id": 31170773, "comment_id": 50351805, "body": "this is impossible if &quot;The prototype of the function can&#39;t be modified.&quot;. because <code>int **</code> different from the real 2D-Array."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1435787422, "post_id": 31170773, "comment_id": 50352326, "body": "It is possible (<code>rotate(A,n11-2,n12-2);</code>) if necessary information is passed through global variables."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1435796934, "post_id": 31170773, "comment_id": 50355195, "body": "Along the diagonal, it is possible as a special case: a[1][1] = a + n11 * 1 + 1 etc... so you can pass &amp;a[1][1] if only diagonal is what you need... or maybe not :)"}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 2, "last_activity_date": 1435805771, "last_edit_date": 1435805771, "creation_date": 1435795064, "answer_id": 31173561, "question_id": 31170773, "link": "https://stackoverflow.com/questions/31170773/passing-a-2d-subarray-in-c/31173561#31173561", "title": "passing a 2d subarray in c", "body": "<p>According to your function parameter declaration (<code>int** A</code>), the 2D array is implemented as a \"jagged array\" (i.e. a top-level 1D array of pointers to 1D subarrays). </p>\n\n<p>It is not possible to create a jagged 2D subarray you described without introducing and initializing some extra data. In order to produce such 2D subarray, you will have to create a new top-level 1D array of pointers, initialize it accordingly and pass it further down the line</p>\n\n<pre><code>void rotate(int **A, int n11, int n12)\n{\n  //pass sub-array starting at A[1][1] having n11-2 rows and n12-2 columns\n\n  int *sub_A[n11 - 2];\n  for (int i = 0; i &lt; n11 - 2; ++i)\n    sub_A[i] = &amp;A[i + 1][1];\n\n  rotate(sub_A, n11 - 2, n12 - 2);\n}\n</code></pre>\n\n<p>As an additional note, you have to keep in mind that all modifications you do to <code>A[i][j]</code> inside <code>rotate</code> at any level of recursion will affect the primary 2D array in <code>main</code>. But modifications you do to <code>A[i]</code> pointers at lower levels of recursion will not affect the primary array (since we create a new independent copy of it at each level of recursion). But I assume that this is not a problem, since (judging by the function name) all modifications are probably done through <code>A[i][j]</code> interface. BTW, for this reason, it would actually make more sense to declare the function as</p>\n\n<pre><code>void rotate(int *const *A, int n11, int n12)\n</code></pre>\n\n<p>That <code>const</code> will prevent modifications of the top-level pointer array, i.e. it will let you modify the 2D array's contents, but not the array's structure.</p>\n\n<p>Anyway, here's a live example of this technique in action: <a href=\"https://ideone.com/Sm40iD\" rel=\"nofollow\">https://ideone.com/Sm40iD</a> (I simply print the 2D array there).</p>\n"}], "owner": {"reputation": 3, "user_id": 3425117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81b6d777a98282d27d8f5e4db454f9?s=128&d=identicon&r=PG&f=1", "display_name": "user3425117", "link": "https://stackoverflow.com/users/3425117/user3425117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 31173561, "answer_count": 1, "score": 0, "last_activity_date": 1435805771, "creation_date": 1435781553, "last_edit_date": 1435783198, "question_id": 31170773, "link": "https://stackoverflow.com/questions/31170773/passing-a-2d-subarray-in-c", "title": "passing a 2d subarray in c", "body": "<p>I have a 2D array A and a recursive function</p>\n\n<pre><code>`// A is a 2D array,n11: no. of rows in A, n12: no. of columns in A\nvoid rotate(int** A, int n11, int n12)\n{\n    //do something\n    //pass sub-array starting at A[1][1] having n11-2 rows and n12-2 columns\n    rotate(???,n11-2,n12-2);\n}`\n</code></pre>\n\n<p>the malloc for A has been done in the calling function.\nThe prototype of the function can't be modified.</p>\n"}, {"tags": ["c", "graph", "cycle"], "answers": [{"comments": [{"owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1435782720, "post_id": 31170943, "comment_id": 50349924, "body": "Actually no. Could you give me a short help about it, please ? I&#39;m reading everything I can find but maybe just the main idea. I&#39;m studying it by my own so its not that easy for me."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1435782847, "post_id": 31170943, "comment_id": 50350005, "body": "Are you comfortable with DFS in graphs?"}, {"owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1435783250, "post_id": 31170943, "comment_id": 50350218, "body": "Unfortunately I&#39;m not comfortable with DFS yet.. Couldnt find anyone to give me a hands up with it. That&#39;s why I decided to ask here.  Could you give me some help, just with the basic maybe. Like, DO I have to use stack/queue ? Do I use a matrix ? Thanks"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 1, "creation_date": 1435783491, "post_id": 31170943, "comment_id": 50350353, "body": "No, just a recursive call. Why not read a book or search google? You could also watch tutorial videos on youtube for further clarification. I often do that."}, {"owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1435784226, "post_id": 31170943, "comment_id": 50350751, "body": "+1 I&#39;m already doing it. If I don&#39;t use any of this. How do I mark a vertex as parent of other(s) vertex ? How do I mark it as visited ?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435784869, "post_id": 31170943, "comment_id": 50351131, "body": "Why is it totally different for directed graphs?  Surely it&#39;s exactly the same, except your DFS only follows outgoing edges."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435785191, "post_id": 31170943, "comment_id": 50351308, "body": "@Oliver Charlesworth: AFAIK ,undirected graphs are nothing but directed graphs with backedges. However that back edge could not be counted as a cycle. Hence the algorithms are different. Correct me If I am wrong."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435785767, "post_id": 31170943, "comment_id": 50351612, "body": "@oliver-charlesworth: Moreover A single DFS on directed graph doesn&#39;t guarantee the complete graph traversal (even if it is connected)."}, {"owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "edited": false, "score": 0, "creation_date": 1435786120, "post_id": 31170943, "comment_id": 50351761, "body": "How do I mark a vertex as parent of other(s) vertex ? How do I mark it as visited, vector  ?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1435789499, "post_id": 31170943, "comment_id": 50353121, "body": "@ARBY: Agreed on traversability, for that you&#39;re going to need to know the source nodes (but as you point out, you&#39;re going to need to have something like this anyway for the general disjoint case).  However, in terms of the DFS, I believe it&#39;s just a case of deciding which edges to follow at any given node."}], "tags": [], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "is_accepted": false, "score": 1, "last_activity_date": 1435782487, "last_edit_date": 1435782487, "creation_date": 1435782153, "answer_id": 31170943, "question_id": 31170769, "link": "https://stackoverflow.com/questions/31170769/verify-if-an-undirected-graph-has-cycles/31170943#31170943", "title": "Verify if an undirected graph has cycles", "body": "<p>A simple DFS with a little modification will do.</p>\n\n<p>Hint: We do a DFS traversal of the given graph. For every visited vertex \u2018v\u2019, if there is an adjacent \u2018u\u2019 such that u is already visited and u is not parent of v, then there is a cycle in graph.</p>\n\n<p>Also Note: cycles detection in undirected graphs follow algorithm which is totally different from the directed graphs. Cycle in directed graphs are diffent.</p>\n\n<p>(hope you are comfortable with DFS).</p>\n"}], "owner": {"reputation": 2302, "user_id": 2054434, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/e8f5c753d781ce498b857ec9b7ce366f?s=128&d=identicon&r=PG&f=1", "display_name": "PlayHardGoPro", "link": "https://stackoverflow.com/users/2054434/playhardgopro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1435809320, "answer_count": 1, "score": 0, "last_activity_date": 1435782487, "creation_date": 1435781535, "last_edit_date": 1495539837, "question_id": 31170769, "link": "https://stackoverflow.com/questions/31170769/verify-if-an-undirected-graph-has-cycles", "closed_reason": "Needs more focus", "title": "Verify if an undirected graph has cycles", "body": "<p>I know that this question has been asked some times. But I just can't understand yet and those questions are too old to reply...   </p>\n\n<p>I Read about <a href=\"https://stackoverflow.com/q/30850648/2054434\">Kahn's Algorithm</a><br>\nAlso about <a href=\"https://stackoverflow.com/a/526371/2054434\">DFS</a><br>\nPlus <a href=\"https://stackoverflow.com/a/261595/2054434\">Tarjan's strongly connected components algorithm</a><br>\nBut i Just can't understand the process to make it work.<br>\nAll I've done so far is to initialized and feed the graph.<br>\nAnd found the shortest path from vert\u00e9x A to B.</p>\n"}, {"tags": ["c", "arrays", "hex", "endianness"], "comments": [{"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 1, "creation_date": 1435781016, "post_id": 31170567, "comment_id": 50349011, "body": "So what exactly do you expect for -12?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1435781580, "post_id": 31170567, "comment_id": 50349325, "body": "Why do you think <code>FFFFFFFFFFFFFFF4</code> is wrong for <code>-12</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435789267, "post_id": 31170567, "comment_id": 50353048, "body": "&quot;... plain old sign bit.&quot; Ehm, I am very sure the electrons storing the sign are not older than those for 2s complement. Both are actually used in modern computer systems, along with a third representation: biased integer: 2s complement for most integer architectures, sing-bit for float mantissa and biased for float exponent (at least for IEEE754 floats as used by most modern CPUs)."}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 4139707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db33d8b5f9dd4c6d7948323f76254590?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Maloney", "link": "https://stackoverflow.com/users/4139707/jack-maloney"}, "edited": false, "score": 0, "creation_date": 1435788500, "post_id": 31170993, "comment_id": 50352804, "body": "I don&#39;t think I can use the cast though, because that will only work if the characters are arranged with the same endianness as the platform."}], "tags": [], "owner": {"reputation": 1977, "user_id": 5028977, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fLfAbWiOybA/AAAAAAAAAAI/AAAAAAAAA6o/F3lnvkMZNrQ/photo.jpg?sz=128", "display_name": "mziccard", "link": "https://stackoverflow.com/users/5028977/mziccard"}, "is_accepted": false, "score": 1, "last_activity_date": 1435782338, "creation_date": 1435782338, "answer_id": 31170993, "question_id": 31170567, "link": "https://stackoverflow.com/questions/31170567/convert-64bit-int-to-char-and-back/31170993#31170993", "title": "Convert 64bit Int to Char[] (and back)", "body": "<p>You are right. Intel 64 and IA-32 use 2 complement representation of signed numbers. See  <a href=\"http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-manual-325462.html\" rel=\"nofollow\">Intel 64 and IA-32 Architectures Software Developer\u2019s Manual</a> Section 4.2.1. Reading <code>FFFFFFFFFFFFFFF4</code> for -12 is therefore correct. In the 2 complement representation negative numbers are represented by taking the corresponding positive, inverting all the bits and adding 1:</p>\n\n<pre><code>12 = 000000000000000C -&gt; FFFFFFFFFFFFFFF3 -&gt; FFFFFFFFFFFFFFF4 = -12\n</code></pre>\n\n<p>If I can add something, you chould convert your char array to an <code>uint64_t</code> also by doing:</p>\n\n<pre><code>int64_t CharsToInt(uint8_t* chars) {\n    return *(int64_t*)chars;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 458, "user_id": 4139707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db33d8b5f9dd4c6d7948323f76254590?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Maloney", "link": "https://stackoverflow.com/users/4139707/jack-maloney"}, "is_accepted": true, "score": 0, "last_activity_date": 1435896838, "creation_date": 1435896838, "answer_id": 31198342, "question_id": 31170567, "link": "https://stackoverflow.com/questions/31170567/convert-64bit-int-to-char-and-back/31198342#31198342", "title": "Convert 64bit Int to Char[] (and back)", "body": "<p>After messing around with it some more, this is what I finally got working (I think). It actually avoids having to deal with endianness and 2s-compliment all together, by removing the sign and reapplying it after the conversion, using C masks and multiplication:</p>\n\n<pre><code>int64_t CharsToInt(uint8_t* chars) {\n    // Don't modify argument\n    uint8_t tmp;\n    tmp = chars[0];\n    bool neg = false;\n    if (tmp &amp; 0x80) {\n        tmp &amp;= 0x7f;\n        neg = true;\n    }\n\n    int64_t rv = chars[7] + (chars[6] * 0x100) + (chars[5] * 0x10000) + (chars[4] * 0x1000000) + (chars[3] * 0x100000000) + (chars[2] * 0x10000000000) + (chars[1] * 0x1000000000000) + (tmp * 0x100000000000000);\n\n    if (neg) {\n        rv *= -1;\n    }\n    return rv;\n\n}\n\nvoid IntToChars(int64_t i, uint8_t* chars) {\n    int64_t num = i;\n    bool neg = false;\n    if (i &amp; 0x8000000000000000) {\n        neg = true;\n        num *= -1;\n    }\n\n    chars[0] = num / 0x100000000000000;\n    num = num % 0x100000000000000;\n    chars[1] = num / 0x1000000000000;\n    num = num % 0x1000000000000;\n    chars[2] = num / 0x10000000000;\n    num = num % 0x10000000000;\n    chars[3] = num / 0x100000000;\n    num = num % 0x100000000;\n    chars[4] = num / 0x1000000;\n    num = num % 0x1000000;\n    chars[5] = num / 0x10000;\n    num = num % 0x10000;\n    chars[6] = num / 0x100;\n    num = num % 0x100;\n    chars[7] = num;\n\n    if (neg) {\n        chars[0] += 0x80;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 458, "user_id": 4139707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db33d8b5f9dd4c6d7948323f76254590?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Maloney", "link": "https://stackoverflow.com/users/4139707/jack-maloney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 31198342, "answer_count": 2, "score": 0, "last_activity_date": 1435896838, "creation_date": 1435780795, "question_id": 31170567, "link": "https://stackoverflow.com/questions/31170567/convert-64bit-int-to-char-and-back", "title": "Convert 64bit Int to Char[] (and back)", "body": "<p>I program that I would like to convert an array of big-endian (I believe that since I'm on a Mac, ints would be little-endian) chars (or rather uint8_ts) to an int64_t and back. Here is my code:</p>\n\n<pre><code>int64_t CharsToInt(uint8_t* chars) {\n    return chars[0] + (chars[1] * 0x100) + (chars[2] * 0x10000) + (chars[3] * 0x1000000) + (chars[4] * 0x100000000) + (chars[5] * 0x10000000000) + (chars[6] * 0x1000000000000) + (chars[7] * 0x100000000000000);\n}\n\nvoid IntToChars(int64_t i, uint8_t* chars) {\n    for(int k = 0; k &lt; 8; k++) {\n        chars[k] = i &gt;&gt; k*8;\n    }\n}\n\nint main() {\n\n    int64_t x;\n\n    unsigned char chars[8];\n\n    IntToChars(x, chars);\n\n    for (int k = 0; k &lt; 8; k++) {\n        printf(\"%0x\\n\", chars[k]);\n    }\n\n    // little endian\n    int64_t rv = CharsToInt(chars);\n\n    printf(\"%lld\\n\", rv);\n}\n</code></pre>\n\n<p>If <code>x</code> is 12, or any other zero or positive number, the code works perfectly fine, however if <code>x</code> is a negative number, it fails to work.</p>\n\n<p>Output for <code>x</code> = 12:</p>\n\n<pre><code>c\n0\n0\n0\n0\n0\n0\n0\nvalue: 12\n</code></pre>\n\n<p>output for <code>x</code> = -12:</p>\n\n<pre><code>f4\nff\nff\nff\nff\nff\nff\nff\nvalue: -4294967308\n</code></pre>\n\n<p>This seems to have something to do with the way the sign gets stored and converted, because I think Intel (I'm on a Mac) uses 2s-compliment instead of a plain old sign bit. However, I don't really know how to determine if this is true, and if it is, how to compensate for it (preferably in a portable way).</p>\n\n<p>I know that there are a lot of other questions like this, and I've read through them (in fact most of this code is from them), but I still can't get it to work, so I asked my own.</p>\n"}, {"tags": ["c", "lapack", "lapacke"], "comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 2, "creation_date": 1435810257, "post_id": 31170413, "comment_id": 50358024, "body": "DGEMM is not a LAPACK routine.  DGESV_ is the Fortran symbol assuming single underscore convention. You must use the right size integer for Fortran to call this."}], "answers": [{"comments": [{"owner": {"reputation": 1077, "user_id": 4420609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xB2by.png?s=128&g=1", "display_name": "jadhachem", "link": "https://stackoverflow.com/users/4420609/jadhachem"}, "edited": false, "score": 0, "creation_date": 1435865923, "post_id": 31192951, "comment_id": 50391245, "body": "Ah, I guess that makes sense now. Calling LAPACKE a &quot;C interface for LAPACK&quot; confused me, but I guess that just means the functions are more C-friendly. So does this mean that the performance difference is negligible? (assuming LAPACKE uses column-major order at least)"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 1077, "user_id": 4420609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xB2by.png?s=128&g=1", "display_name": "jadhachem", "link": "https://stackoverflow.com/users/4420609/jadhachem"}, "edited": false, "score": 1, "creation_date": 1435866625, "post_id": 31192951, "comment_id": 50391609, "body": "Yes, the performance difference is negligible as <code>LAPACK_COL_MAJOR</code> is used. Regarding <code>LAPACK_ROW_MAJOR</code> there are additionnal memory requirements due to the transposed matrices. The complexity of the transpose operation is <a href=\"http://cs.stackexchange.com/questions/10081/what-is-the-complexity-of-this-matrix-transposition\">O(n^2)</a> and the complexity of dgesv is <a href=\"http://stackoverflow.com/questions/12660052/time-complexity-of-scipy-linalg-solve-lapack-gesv-on-large-matrix\">O(n^3)</a>. So the performance difference can be neglected even if <code>LAPACK_ROW_MAJOR</code> is used."}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 2, "last_activity_date": 1435865640, "last_edit_date": 1435865640, "creation_date": 1435865020, "answer_id": 31192951, "question_id": 31170413, "link": "https://stackoverflow.com/questions/31170413/difference-between-xxxxx-lapack-xxxxx-and-lapacke-xxxxx-functions/31192951#31192951", "title": "Difference between xxxxx_(), LAPACK_xxxxx() and LAPACKE_xxxxx() functions", "body": "<ul>\n<li><p>Notice that <code>LAPACKE_dgesv()</code> features an additional flag which can be <code>LAPACK_COL_MAJOR</code> (usual fortran order) or <code>LAPACK_ROW_MAJOR</code> (usual c order). In case of <code>LAPACK_COL_MAJOR</code>, it just calls <code>LAPACK_dgesv()</code> directly. In case of <code>LAPACK_ROW_MAJOR</code>, <code>LAPACKE_dgesv()</code> will transpose the matrix before calling <code>LAPACK_dgesv()</code>. It is not a new implementation of <code>dgesv_()</code>. Take a look at <a href=\"http://www.netlib.org/lapack/explore-html/d7/dd9/lapacke__dgesv__work_8c.html\" rel=\"nofollow\">lapack-3.5.0/lapacke/src/dgesv_work.c</a> In this file, there are minor additional changes about error handling. </p></li>\n<li><p><code>LAPACK_dgesv()</code> is defined in the header <a href=\"http://www.netlib.org/lapack/explore-html/de/ddd/lapacke_8h.html\" rel=\"nofollow\">lapacke.h</a> as <code>LAPACK_GLOBAL(dgesv,DGESV)</code>. The macro <code>LAPACK_GLOBAL</code> is defined in lapacke_mangling.h : it just wraps <code>dgesv_</code> and cares for naming convention if other conventions are used.</p></li>\n</ul>\n\n<p>So, basically, the function <code>LAPACK_dgesv()</code> just requires the headers of lapacke. Compared to <code>dgesv_</code>, some problems related to naming conventions in libraries may be avoided. But <code>LAPACK_dgesv()</code> is exactly the same as <code>dgesv_()</code>. The function <code>LAPACKE_dgesv()</code> enlarges the scope of <code>LAPACK_dgesv()</code> to handle usual c matrix.But it still calls <code>dgesv_</code> in the end.</p>\n\n<p>The function <a href=\"http://www.netlib.org/lapack/explore-html/d7/d2b/dgemm_8f.html\" rel=\"nofollow\"><code>dgemm()</code></a> is part of the BLAS library. A wrapped c version <code>cblas_dgemm()</code> can be found in <a href=\"http://www.netlib.org/blas/#_cblas\" rel=\"nofollow\">CBLAS</a> . Again, an additionnal flag <code>CBLAS_ORDER</code> is required, with possible values <code>CblasRowMajor</code> and <code>CblasColMajor</code>.</p>\n"}], "owner": {"reputation": 1077, "user_id": 4420609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xB2by.png?s=128&g=1", "display_name": "jadhachem", "link": "https://stackoverflow.com/users/4420609/jadhachem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 31192951, "answer_count": 1, "score": 2, "last_activity_date": 1435865640, "creation_date": 1435780214, "last_edit_date": 1435798462, "question_id": 31170413, "link": "https://stackoverflow.com/questions/31170413/difference-between-xxxxx-lapack-xxxxx-and-lapacke-xxxxx-functions", "title": "Difference between xxxxx_(), LAPACK_xxxxx() and LAPACKE_xxxxx() functions", "body": "<p>Let's say I want to use LAPACK to solve a system of linear equations in C (GCC).\nI set up the problem as follows:</p>\n\n<pre><code>/* Want to solve Ax=b */\nint n = ...;      // size\ndouble *A = ...;  // nxn matrix\ndouble *b = ...;  // length-n vector\nint m = 1;        // number of columns in b (needs to be in a variable)\ndouble *pivot;    // records pivoting\nint info;         // return value\n</code></pre>\n\n<p>Now it seems I can use one of three functions to solve this problem.\nThe first one is this:</p>\n\n<pre><code>dgesv_( &amp;n, &amp;m, A, &amp;n, pivot, b, &amp;n, &amp;info );\n</code></pre>\n\n<p>I was surprised to see that this did not require any <code>#include</code>s, which seems... weird.</p>\n\n<p>The second function has almost the same signature, except for the prefix <code>LAPACK_</code> which I think causes less ambiguity and is possibly less error-prone:</p>\n\n<pre><code>#include &lt;lapack/lapacke.h&gt;\nLAPACK_dgesv( &amp;n, &amp;m, A, &amp;n, pivot, b, &amp;n, &amp;info );\n</code></pre>\n\n<p>Note that this requires me to include <code>lapacke.h</code>.</p>\n\n<p>The third function changes the signature somewhat by returning <code>info</code> and not taking all arguments as pointers:</p>\n\n<pre><code>#include &lt;lapack/lapacke.h&gt;\ninfo = LAPACKE_dgesv( LAPACK_COL_MAJOR, n, m, A, n, pivot, b, n);\n</code></pre>\n\n<p>Again, this function requires <code>lapacke.h</code>. It also requires linking to an extra library with <code>-llapacke</code>.\nAll three functions need <code>-llapack</code>.</p>\n\n<p>I'm trying to figure out the differences between these functions.\nI did some snooping around and I found the following macros in <code>lapacke.h</code> and related header files:</p>\n\n<pre><code>#define LAPACK_GLOBAL(name,NAME) name##_\n#define LAPACK_dgesv LAPACK_GLOBAL(dgesv,DGESV)\n</code></pre>\n\n<p>So it seems that <code>LAPACK_dgesv()</code> and <code>dgesv_()</code> are different names for the exact same function.\nHowever, it appears <code>LAPACKE_dgesv()</code> is something else with possibly a different implementation, especially considering the fact it needs an extra library.</p>\n\n<p>So my question is: what are the differences between these two functions?\nThe documentation says LAPACKE is a C interface for LAPACK, but then what about the function <code>dgesv_()</code>?\nClearly I can use it normally without needing LAPACKE and without compiling anything in Fortran, so how is that different?</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>Curiously, the function <code>dgemm_()</code> (matrix multiplication) does not have any <code>LAPACK_dgemm()</code> equivalent.\nWhat's going on?</p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1435779914, "post_id": 31170302, "comment_id": 50348367, "body": "Runt it and see what it prints and then analyse why it is?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435780029, "post_id": 31170302, "comment_id": 50348427, "body": "Read about boolena/logical expressions in C."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1435780129, "post_id": 31170302, "comment_id": 50348476, "body": "Try it:  <a href=\"http://ideone.com/IwUIZf\" rel=\"nofollow noreferrer\">ideone.com/IwUIZf</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435780131, "post_id": 31170302, "comment_id": 50348477, "body": "What did you think the <code>==2</code> was going to do in the switch statement?  Was the original intent simply to switch on the value of <code>i</code>?"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1435780202, "post_id": 31170302, "comment_id": 50348521, "body": "BTW: You declared <code>main</code> to return an <code>int</code>, but there is no <code>return</code> statement in your code.  I recommend ending with <code>return 0;</code>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1435780911, "post_id": 31170302, "comment_id": 50348944, "body": "@abelenky <code>return</code> in <code>main</code> (but not in other functions) is optional. In C99 it will return 0 if you omit it."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1435781486, "post_id": 31170302, "comment_id": 50349276, "body": "Suppose someone said &quot;I don&#39;t understand &#39;Bob sees Jane.&#39;&quot;. Since that&#39;s a very basic sentence in English, we would want to know what it is about it that they don&#39;t understand. Similarly for &quot;I don&#39;t understand &#39;i==2&#39;&quot;. What about it don&#39;t you understand?"}], "answers": [{"comments": [{"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1435781622, "post_id": 31170360, "comment_id": 50349351, "body": "To be complete, you should mention that boolean operators such as &#39;==&#39; evaluate to 0 when false and 1 when true."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1435782983, "last_edit_date": 1435782983, "creation_date": 1435780012, "answer_id": 31170360, "question_id": 31170302, "link": "https://stackoverflow.com/questions/31170302/what-will-be-the-output-of-program-switch-case/31170360#31170360", "title": "What will be the output of program - switch case?", "body": "<p>The expression <code>i==2</code> evaluates to only <code>0</code> or <code>1</code> - to <code>0</code> (<code>false</code>) when <code>i</code> is not equal to <code>2</code> and to <code>1</code> (<code>true</code>) when <code>i</code> is equal to <code>2</code>. The other cases under the switch statement are useless.</p>\n\n<p>In your case, where the value <code>i</code> is set to <code>1</code>, <code>i==2</code> evaluates to <code>0</code>. Hence, you should get <code>zero</code> as your output.</p>\n"}, {"tags": [], "owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783036, "creation_date": 1435783036, "answer_id": 31171192, "question_id": 31170302, "link": "https://stackoverflow.com/questions/31170302/what-will-be-the-output-of-program-switch-case/31171192#31171192", "title": "What will be the output of program - switch case?", "body": "<p>You are using a boolean expression in switch case <code>i==2</code> will always result either in <code>1</code>(True) or <code>0</code>(False). There wasn't any need of using <code>case 2:</code> and <code>default:</code> statement.  </p>\n\n<p>Now when executing switch expression <code>i==2</code> will jump to <code>case 0</code> since <code>i=1</code> and you are checking whether it is equal to 2.  </p>\n\n<p>Hence will result in false, 0 in case of C programming. And finally printing</p>\n\n<blockquote>\n  <p>Zero</p>\n</blockquote>\n"}], "owner": {"reputation": 7, "user_id": 4940992, "user_type": "registered", "profile_image": "https://graph.facebook.com/937295709626945/picture?type=large", "display_name": "\u03a7\u03ac\u03c1\u03b7\u03c2 \u03a4\u03bf\u03c5\u03bb\u03bf\u03cd\u03c0\u03b1\u03c2", "link": "https://stackoverflow.com/users/4940992/%ce%a7%ce%ac%cf%81%ce%b7%cf%82-%ce%a4%ce%bf%cf%85%ce%bb%ce%bf%cf%8d%cf%80%ce%b1%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1435785800, "creation_date": 1435779828, "last_edit_date": 1435785800, "question_id": 31170302, "link": "https://stackoverflow.com/questions/31170302/what-will-be-the-output-of-program-switch-case", "title": "What will be the output of program - switch case?", "body": "<pre><code>int main() {\n    int i = 1 ;\n    switch( i==2) { /* This line */\n        case  0: printf(\"zero \"); break;\n        case  1: printf(\"one \"); break;\n        case  2: printf(\"two \"); break;\n        default: printf (\"what?\"); break;\n   }\n}\n</code></pre>\n\n<p>What will be the output? I can't understand the expression in the switch parentheses.</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435779767, "post_id": 31170240, "comment_id": 50348289, "body": "<code>fgets</code> includes the trailing <code>newline</code>."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1435779807, "post_id": 31170240, "comment_id": 50348314, "body": "Why are you reversing the string? Work it from both ends until they do not match or you cross the middle"}, {"owner": {"reputation": 108835, "user_id": 15541, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/515ca9736a9a8ce65e58af764ccddf46?s=128&d=identicon&r=PG", "display_name": "leppie", "link": "https://stackoverflow.com/users/15541/leppie"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1435779845, "post_id": 31170240, "comment_id": 50348338, "body": "@EdHeal: Is that not what the <code>reverse</code> function does already?"}, {"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1435779976, "post_id": 31170240, "comment_id": 50348403, "body": "Unrelated but this is completely wrong: <code>if (c = 1) {</code>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1435780009, "post_id": 31170240, "comment_id": 50348416, "body": "It is using a copy. Just use the one string."}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "edited": false, "score": 2, "creation_date": 1435780126, "post_id": 31170240, "comment_id": 50348474, "body": "<code>if (c=1)</code>? <code>1&lt;=length</code>??"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435780264, "post_id": 31170240, "comment_id": 50348560, "body": "In your <code>testStrings</code> function, you want to initialize <code>c</code> to <code>0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1435782809, "last_edit_date": 1435782809, "creation_date": 1435779829, "answer_id": 31170305, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170305#31170305", "title": "Unable to get a palindrome check to work", "body": "<p>Function <code>fgets</code> includes also the new line character in the string that corresponds to pressed Enter key. You should remove it if it is present in the string. For example</p>\n\n<pre><code>size_t n = strlen( string );\n\nif ( n &amp;&amp; string[n-1] == '\\n' ) string[--n] = '\\0';\n</code></pre>\n\n<p>Take into account that it is better to exclude print statements from function\n<code>testStrings</code> and place them in main. The function should return either 1 or 0 depending on whether strings are equal each other. And there is no need to call <code>strlen</code> within the function. </p>\n\n<p>The function could ne written much simpler and look the following way</p>\n\n<pre><code>int testStrings( const char *s1, const char *s2 )\n{\n    while ( *s1 &amp;&amp; *s1 == *s2 ) ++s1, ++s2;\n\n    return *s1 == *s2;\n}\n</code></pre>\n\n<p>As for function reverse then it is better to write it such a way that it would copy the source string in the reverse order in the destination string. For example</p>\n\n<pre><code>char * reverse_copy( char *s1, const char *s2 )\n{\n    char *p = s1;\n    const char *q = s2 + strlen( s2 );\n\n    while ( q != s2 ) *p++ = *--q;\n\n    *p = '\\0';\n\n    return s1;\n}\n</code></pre>\n\n<p>The function calls woul look like</p>\n\n<pre><code>printf( \"Here's what you typed:%s\\n\", string );\nprintf( \"Here's the Reversed:%s\\n\", reverse_copy( string2, string ) );\n\nint isPalindrome = testStrings( string, string2 );\n\n// print stetements depending on whether the result is equal to 1 or 0\n</code></pre>\n\n<p>Now if to combine all together you can get the following program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint testStrings( const char *s1, const char *s2 )\n{\n    while ( *s1 &amp;&amp; *s1 == *s2 ) ++s1, ++s2;\n\n    return *s1 == *s2;\n}\n\nchar * reverse_copy( char *s1, const char *s2 )\n{\n    char *p = s1;\n    const char *q = s2 + strlen( s2 );\n\n    while ( q != s2 ) *p++ = *--q;\n\n    *p = '\\0';\n\n    return s1;\n}\n\n#define N   100\n\nint main( void ) \n{\n    char string[N];\n    char string2[N];\n\n    printf( \"Please Enter a string: \" );\n    fgets( string, N, stdin );\n\n    size_t n = strlen( string );\n\n    if ( n &amp;&amp; string[n-1] == '\\n' ) string[--n] = '\\0';\n\n    printf( \"\\nHere's what you typed: %s\\n\", string );\n    printf( \"Here's the Reversed: %s\\n\", reverse_copy( string2, string ) );\n\n    if ( testStrings( string, string2 ) )\n    {\n        printf( \"\\nThe input is a palindrome.\\n\" );\n    }\n    else\n    {\n        printf( \"\\nThe input is not a palindrome.\\n\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And if to enter for example </p>\n\n<pre><code>123454321\n</code></pre>\n\n<p>then the output will be</p>\n\n<pre><code>Please Enter a string: 123454321\n\nHere's what you typed: 123454321\nHere's the Reversed: 123454321\n\nThe input is a palindrome.\n</code></pre>\n\n<p>Take into account that you could determine whether a string is a palindrome without using the second character array. In this case the function could look the following way</p>\n\n<pre><code>int isPalindrome( const char *s )\n{\n    size_t n = strlen( s );\n    size_t i = 0;\n\n    while ( i &lt; n / 2 &amp;&amp; s[i] == s[n-1-i] ) ++i;\n\n    return i == n / 2;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 0, "last_activity_date": 1435780586, "last_edit_date": 1435780586, "creation_date": 1435779893, "answer_id": 31170332, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170332#31170332", "title": "Unable to get a palindrome check to work", "body": "<p>This does not work with <code>fgets</code> because it keeps the trailing <code>\\n</code> with the string; <code>gets</code> does not do that. </p>\n\n<p>From the <a href=\"http://www.cplusplus.com/reference/cstdio/fgets/\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>A newline character makes fgets stop reading, but it is considered a valid character by the function and included in the string copied to str.</p>\n</blockquote>\n\n<p>To fix this, adjust the length to account for the trailing <code>\\n</code> mark: go to the end of the string, and move back until you see a non-<code>\\n</code> character.</p>\n\n<p>I try to edit your code and it works. Errata <code>if (c=1)</code> and <code>1&lt;=length</code> I've fixed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid reverse(char *string);\nint testStrings(char *a, char *b);\n\nint main()\n{\n    char string[100];\n    char string2[100];\n\n    printf(\"Please Enter a string:\\n\");\n    fgets(string, 100, stdin);\n\n\n    size_t n = strlen( string );\n\n    if ( n &amp;&amp; string[n-1] == '\\n' ) string[--n] = '\\0';\n\n\n    strcpy(string2, string);\n    reverse(string);\n\n    printf(\"Here's what you typed:%s\\n\",string2);\n    printf(\"Here's the Reversed:%s\\n\",string);\n    testStrings(string, string2);\n\n    return 0;\n}\n\nvoid reverse(char *s)\n{\n    int c, i , j;\n    for (i = 0, j = strlen(s) - 1; i &lt; j; i++, j--) {\n        c = s[i];\n        s[i] = s[j];\n        s[j] = c;\n    }\n    return;\n}\n\nint testStrings(char *a, char *b)\n{\n    int i;\n    int length;\n    int c;\n\n    length = strlen(b) - 1;\n\n    for (i = 0; i &lt; length / 2; i++) {\n        if (b[i] != a[i]) {\n            c = 1;\n            break;\n        }\n    }\n\n    if (c == 1) {\n        printf(\"The input is not a palindrome.\\n\");\n    } else {\n        printf(\"The inpiy is a palindrome.\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1435781056, "last_edit_date": 1435781056, "creation_date": 1435779991, "answer_id": 31170354, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170354#31170354", "title": "Unable to get a palindrome check to work", "body": "<p>If you look carefully at your program output, you'll see there is an extra <code>newline</code>. I entered <code>abcdef</code> and it reported</p>\n\n<pre><code>Here's what you typed:abcdef\n          &lt;--- extra blank line here&gt;\nHere's the Reversed:\nfedcba\nThe input is not a palindrome.\n</code></pre>\n\n<p>the extra <code>newline</code> is not generated by your code, which prints a single newlines</p>\n\n<pre><code>printf(\"Here's what you typed:%s\\n\",string2);\nprintf(\"Here's the Reversed:%s\\n\",string);\n</code></pre>\n\n<p>This is because <code>fgets</code> holds the terminating <code>newline</code> as part of the string.</p>\n\n<p>My favourite way to remove the trailing <code>newline</code> included by <code>fgets</code> is</p>\n\n<pre><code>string [ strcspn(string, \"\\r\\n\") ] = 0;\n</code></pre>\n\n<p>since it will handle different OS conventions for text file end-of-line without grumble.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5071080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VAn4Xts-ki8/AAAAAAAAAAI/AAAAAAAAAKY/l06eNrh64aU/photo.jpg?sz=128", "display_name": "Tri Le", "link": "https://stackoverflow.com/users/5071080/tri-le"}, "edited": false, "score": 0, "creation_date": 1435783410, "post_id": 31170618, "comment_id": 50350313, "body": "Whats a much better way of doing this?"}, {"owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "reply_to_user": {"reputation": 13, "user_id": 5071080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VAn4Xts-ki8/AAAAAAAAAAI/AAAAAAAAAKY/l06eNrh64aU/photo.jpg?sz=128", "display_name": "Tri Le", "link": "https://stackoverflow.com/users/5071080/tri-le"}, "edited": false, "score": 0, "creation_date": 1435783663, "post_id": 31170618, "comment_id": 50350432, "body": "Simply start checking the string from both ends and move on till you cross the middle or find a mismatch."}], "tags": [], "owner": {"reputation": 2445, "user_id": 4390699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4fe7d756a92a20b8b49b05cc0f1bb628?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/4390699/raman"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783728, "last_edit_date": 1435783728, "creation_date": 1435781006, "answer_id": 31170618, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170618#31170618", "title": "Unable to get a palindrome check to work", "body": "<p>First thing you can do is replace <code>fgets(string, 100, stdin)</code> by <code>gets(string)</code> because of the trailing <code>\\n</code> character included by <code>fgets()</code></p>\n\n<p>more over, in <code>testStrings()</code> you should</p>\n\n<ul>\n<li><code>int c=0</code> Initialize c.</li>\n<li><code>for (i = 0; i &lt;= length; i++) {</code> Change 1 to i</li>\n<li><code>if (c == 1) {</code> change <code>=</code> to <code>==</code></li>\n</ul>\n\n<p>Here's the complete working code with above changes:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;string.h&gt;\n\n void reverse(char *string);\n int testStrings(char *a, char *b);\n int main()\n {\n   char string[100];\n   char string2[100];\n\n   printf(\"Please Enter a string:\\n\");\n   gets(string);\n   strcpy(string2, string);\n   reverse(string);\n\n   printf(\"Here's what you typed:%s\\n\",string2);\n   printf(\"Here's the Reversed:%s\\n\",string);\n   testStrings(string, string2);\n   return;\n }\n\nvoid reverse(char *s)\n{\n    int c, i , j;\n    for (i = 0, j = strlen(s)-1; i &lt; j; i++, j--) {\n        c = s[i];\n        s[i] = s[j];\n        s[j] = c;\n    }\n   return;\n}\n\nint testStrings(char *a, char *b)\n{\n   int i;\n   int length;\n   int c=0;\n\n   length=strlen(b)-1;\n   for(i=0;i &lt;=length; i++)\n   {\n         if(b[i]!=a[i])\n        {\n        c = 1;\n        break;\n        }\n   }\n   if(c==1)\n   {\n      printf(\"The input is not a palindrome.\\n\");\n   }\n   else\n   {\n      printf(\"The inpiy is a palindrome.\\n\");\n   }\n   return 0;\n}\n</code></pre>\n\n<p>Also to mention that you could have used much better algorithms to check palindrome.</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1435781450, "creation_date": 1435781450, "answer_id": 31170747, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170747#31170747", "title": "Unable to get a palindrome check to work", "body": "<p>That's an awful lot of code.  Do you have to reverse the string?  Is that a requirement?  An optional solution.</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    if (argc &lt; 2) {\n        printf(\"Need an argument\\n\");\n        return -1;\n    }\n\n    int len = strlen(argv[1]) - 1;\n    int i = 0;\n    int palindrome = 1;\n    for ( ; i &lt; len; ++i, --len) {\n        if (argv[1][i] != argv[1][len]) {\n            palindrome = 0;\n            break;\n        }\n    }\n\n    if (palindrome) {\n        printf(\"I am a Palindrome\\n\");\n    }\n    else {\n        printf(\"I am NOT a Palindrome\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1435783886, "post_id": 31170909, "comment_id": 50350557, "body": "Is recursion a bit expensive when a simple loop would be better?"}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 0, "last_activity_date": 1435782057, "creation_date": 1435782057, "answer_id": 31170909, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31170909#31170909", "title": "Unable to get a palindrome check to work", "body": "<p>Not a direct answer to your question, but here is a much cleaner solution:</p>\n\n<pre><code>int recursiveTest(char* str,int len)\n{\n    if (len &lt;= 1)\n        return 1;\n    if (str[0] != str[len-1])\n        return 0;\n    return recursiveTest(str+1,len-2);\n}\n\nint isPalindrome(char* str)\n{\n    return recursiveTest(str,strlen(str));\n}\n\nint main()\n{\n    char str[100];\n\n    printf(\"Please Enter a string:\\n\");\n    scanf(\"%99s\",str);\n\n    if (isPalindrome(str))\n        printf(\"The input is a palindrome.\\n\");\n    else\n        printf(\"The input is not a palindrome.\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783924, "last_edit_date": 1435783924, "creation_date": 1435783335, "answer_id": 31171274, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work/31171274#31171274", "title": "Unable to get a palindrome check to work", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char string[100];\n\n    printf(\"Please Enter a string:\\n\");\n    fgets(string, 100, stdin);\n\n    size_t len = strlen(string) - 1;\n    if (string[len] == '\\n') len --;\n\n    for (size_t left = 0; left &lt; len &amp;&amp; string[left] == string[len]; ++left, --len) { }\n\n    printf(\"%s is %s palidrome\\n\", string, (left &lt; len ? \" not a \", \"\"));\n    return 0;\n}\n</code></pre>\n\n<p>Is the smallest I can get the code with it being reasonable readable.</p>\n"}], "owner": {"reputation": 13, "user_id": 5071080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VAn4Xts-ki8/AAAAAAAAAAI/AAAAAAAAAKY/l06eNrh64aU/photo.jpg?sz=128", "display_name": "Tri Le", "link": "https://stackoverflow.com/users/5071080/tri-le"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 31170305, "answer_count": 7, "score": 1, "last_activity_date": 1435783924, "creation_date": 1435779616, "last_edit_date": 1435780028, "question_id": 31170240, "link": "https://stackoverflow.com/questions/31170240/unable-to-get-a-palindrome-check-to-work", "title": "Unable to get a palindrome check to work", "body": "<p>I'm writing a code to check if the inputted string is a palindrome or not, in C. So far I have written functions that reverses the input string and compares the original to the reversed string. Regardless of what the input was, the output is always \"Is not a palindrome\". Is there an error somewhere in the code? Or do I have to try different method? The code is listed below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid reverse(char *string);\nint testStrings(char *a, char *b);\n\nint main()\n{\n    char string[100];\n    char string2[100];\n\n    printf(\"Please Enter a string:\\n\");\n    fgets(string, 100, stdin);\n    strcpy(string2, string);\n    reverse(string);\n\n    printf(\"Here's what you typed:%s\\n\",string2);\n    printf(\"Here's the Reversed:%s\\n\",string);\n    testStrings(string, string2);\n\n    return 0;\n}\n\nvoid reverse(char *s)\n{\n    int c, i , j;\n    for (i = 0, j = strlen(s) - 1; i &lt; j; i++, j--) {\n        c = s[i];\n        s[i] = s[j];\n        s[j] = c;\n    }\n    return;\n}\n\nint testStrings(char *a, char *b)\n{\n    int i;\n    int length;\n    int c;\n\n    length = strlen(b) - 1;\n\n    for (i = 0; 1 &lt;= length; i++) {\n        if (b[i] != a[i]) {\n            c = 1;\n            break;\n        }\n    }\n\n    if (c = 1) {\n        printf(\"The input is not a palindrome.\\n\");\n    } else {\n        printf(\"The inpiy is a palindrome.\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function-pointers", "singly-linked-list", "vtable"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1435779245, "post_id": 31170016, "comment_id": 50348003, "body": "You should think about, and tell us, a little more about what you&#39;re trying to do, and maybe set some limits.  In full generality, what you&#39;re talking about sounds like it might require implementing some/all of C++ on top of C.  (Which can certainly be done, after all that&#39;s the way Bjarne did it the first time, but it&#39;s some work!)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435779588, "post_id": 31170016, "comment_id": 50348194, "body": "C is a &quot;strongly typed&quot; language. Although there are ways to defeat it, is C the right language for you?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1435784674, "post_id": 31170016, "comment_id": 50351015, "body": "FWIW: the linux kernel has some <i>generic</i> LLs, implemented with a set of macros."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1435786712, "post_id": 31170016, "comment_id": 50352036, "body": "use <code>void *</code> as holding data. and display function need user function for <code>void *</code>."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 1, "creation_date": 1435813355, "post_id": 31170016, "comment_id": 50358862, "body": "I added <code>function-pointers</code> and <code>vtable</code> tags, as that is what you&#39;re going to have to use."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 0, "creation_date": 1435814076, "post_id": 31170016, "comment_id": 50359061, "body": "can you do it more like object oriented, e.g supply pointer to show functiin. memory management probably not need, because you always can do free() and insert function may get void *"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435814911, "post_id": 31170016, "comment_id": 50359354, "body": "Note that your <code>struct queue</code> doesn&#39;t have members <code>logical_length</code> or <code>cnt_max</code>, which means your code isn&#39;t going to compile."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435815082, "post_id": 31170016, "comment_id": 50359397, "body": "You can do the storing of the data in either of two ways.  One is that the function calling <code>insert</code> hands over control of the storage to the queue; the extract function returns control back to the calling code.  This means the queue doesn&#39;t need to know how much data is pointed at.  The other is that you tell the <code>insert</code> function how big the chunk of data is as well as where it is stored.  However, this means you are limited to data structures that can be copied (using <code>memmove()</code> or equivalent) safely.  Many structures can&#39;t be copied like that (think structures containing pointers)."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5071062, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SFEKfxEaOh0/AAAAAAAAAAI/AAAAAAAAAPo/soBUr8qVIYQ/photo.jpg?sz=128", "display_name": "Ankit Ahuja", "link": "https://stackoverflow.com/users/5071062/ankit-ahuja"}, "edited": false, "score": 0, "creation_date": 1435823660, "post_id": 31176333, "comment_id": 50363492, "body": "2nd way is not really possible as i have mentioned that we can&#39;t tell the size of data. about the first one, i didn&#39;t really get it. can you please elaborate"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1435815415, "creation_date": 1435815415, "answer_id": 31176333, "question_id": 31170016, "link": "https://stackoverflow.com/questions/31170016/generic-queue-in-c-with-run-time-data-types/31176333#31176333", "title": "Generic Queue in C with run time data types", "body": "<p>You can do the storing of the data in either of two ways.</p>\n\n<ol>\n<li>The function calling <code>insert</code> hands over control of the storage to the queue; the extract function returns control back to the calling code.  This means the queue doesn't need to know how much data is pointed at.</li>\n<li>You tell the <code>insert</code> function how big the chunk of data is as well as where it is stored (<code>void enqueue(struct queue *queue, void *item, size_t length)</code>).  However, this means you are limited to data structures that can be copied (using <code>memmove()</code> or equivalent) safely.  Many structures can't be copied like that (think structures containing pointers).</li>\n</ol>\n\n<p>For the first mechanism, the <code>display()</code> function is altered into an <code>apply()</code> function which is given a function pointer:</p>\n\n<pre><code>void apply(struct queue *queue, void *data, void (*function)(const void *item, void *data));\n</code></pre>\n\n<p>The <code>queue</code> is traversed, and the function is called with the current item from the queue plus the data passed to the <code>apply</code> function.  This data is a pointer to whatever context is needed to make the function work properly.  For displaying, it might be a <code>FILE *</code>, or it might be a more complex structure.  Either way, the function (that is pointed at by the function pointer <code>function</code>) knows what to do with the data because it is attuned to the data type.</p>\n"}], "owner": {"reputation": 21, "user_id": 5071062, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SFEKfxEaOh0/AAAAAAAAAAI/AAAAAAAAAPo/soBUr8qVIYQ/photo.jpg?sz=128", "display_name": "Ankit Ahuja", "link": "https://stackoverflow.com/users/5071062/ankit-ahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1024, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435815415, "creation_date": 1435778878, "last_edit_date": 1435813296, "question_id": 31170016, "link": "https://stackoverflow.com/questions/31170016/generic-queue-in-c-with-run-time-data-types", "title": "Generic Queue in C with run time data types", "body": "<p>I want to create a linked list which can accept any data type at run time and display the list. The problem is display function and memory management changes for different data types. So I don't know how to do that. Code examples will be appreciated.</p>\n\n<p>Edit: to narrow down the problem. this is queue structure(using linked list)</p>\n\n<pre><code>struct node         \n{\n    void *data; \n    struct node *link; \n};\n\nstruct queue\n{\n    struct node *front; \n    struct node *rear;  \n};          \n</code></pre>\n\n<p>Now the caller functions for addition of new element and display are as follows:</p>\n\n<pre><code>int main()\n{\n    struct queue* q;\n    void *a;\n    char ch;\n    printf(\"do you want to add an element?(y/n)\\n\");\n    scanf(\"%c\",&amp;ch);\n    while(ch!=n)\n    {\n        printf(\"Enter the element\\n\");\n        scanf(\"%p\",a);\n        enqueue(q,a);\n        display(q);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Following is my enqueue function definition:</p>\n\n<pre><code>void enqueue(struct queue* queue,void* item)\n{\n    if(queue-&gt;logical_length==queue-&gt;cnt_max)\n    {\n        printf(\"Queue is full\\n\");\n        return;\n    }\n    else\n    {\n        struct node*temp;\n        temp=(struct node*)malloc(sizeof(struct node));\n        temp-&gt;data=malloc(queue-&gt;data_size);\n        temp-&gt;link=NULL;\n        memcpy(temp-&gt;data,item,queue-&gt;data_size);\n        if(queue-&gt;front==NULL)\n        {\n            queue-&gt;rear=queue-&gt;front=temp;\n            queue-&gt;logical_length=queue-&gt;logical_length+1;\n            return;\n        }\n        queue-&gt;rear-&gt;link=temp;\n        queue-&gt;rear=temp;\n        queue-&gt;logical_length=queue-&gt;logical_length+1;  \n    }\n}\n</code></pre>\n\n<p>Here, the problem is how to allocate memory to data field if I don't even know the data type. So if there is some way to find data type of runtime entered values it will be better.</p>\n\n<p>Following is my display function:</p>\n\n<pre><code>void display(struct queue* queue)\n{\n    struct node* temp;\n    if(queue-&gt;front==NULL)\n    {\n        printf(\"Queue is empty\\n\");\n        return;\n    }\n    else\n    {\n        temp=queue-&gt;front;\n        while(temp-&gt;link!=NULL)\n        {\n            printf(\"%p \\t\",*(void *)temp-&gt;data);\n            temp=temp-&gt;link;\n        }\n        printf(\"%p \\t\",*(void *)temp-&gt;data);\n    }\n}\n</code></pre>\n\n<p>Here the output is always some random numbers.</p>\n"}, {"tags": ["c", "arm", "eclipse-cdt", "ds-5"], "answers": [{"comments": [{"owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "edited": false, "score": 0, "creation_date": 1496235976, "post_id": 44280096, "comment_id": 75577957, "body": "Thanks. This is what I ended up doing back then. I also reported back to ARM and I think at least some of them were fixed in later revisions. However, this reply does not directly, or fully, answers my question. It will only solve the problem for some macros we are aware of, and those may change (as the move from GCC-based to CLANG-based compiler in Toolchain 6 shows us)."}], "tags": [], "owner": {"reputation": 59, "user_id": 5856195, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d61368091207561bc3ddb1bab3587541?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/5856195/vicky"}, "is_accepted": false, "score": 2, "last_activity_date": 1496220926, "creation_date": 1496220926, "answer_id": 44280096, "question_id": 31169956, "link": "https://stackoverflow.com/questions/31169956/how-to-make-arm-eclipse-for-ds-5-aware-of-compiler-predefined-macros/44280096#44280096", "title": "How to make ARM Eclipse for DS-5 aware of compiler predefined macros?", "body": "<p>You can set Eclipse C/C++ Project properties: Preprocessor Include Paths, Macros. Adding macros or preprocessor file helps to understand the compiler predefines/macros to eclipse.</p>\n\n<p>Note that the entries could be set also on an individual resource, such as file or folder. Open file or folder properties to inspect resource-specific entries. The entries on a folder or a project will apply to all subfolders and C/C++ files under it - unless overridden on a lower level.</p>\n\n<p>for more information you can check this link \n<a href=\"http://www.eclipse.org/community/eclipse_newsletter/2013/october/article4.php\" rel=\"nofollow noreferrer\">Setting Up Include Paths and Macros for C/C++ Indexer</a></p>\n"}], "owner": {"reputation": 6975, "user_id": 274579, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG", "display_name": "ysap", "link": "https://stackoverflow.com/users/274579/ysap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1496220926, "creation_date": 1435778680, "last_edit_date": 1592644375, "question_id": 31169956, "link": "https://stackoverflow.com/questions/31169956/how-to-make-arm-eclipse-for-ds-5-aware-of-compiler-predefined-macros", "title": "How to make ARM Eclipse for DS-5 aware of compiler predefined macros?", "body": "<p>I am using ARM Eclispe for DS-5 environment to maintain and build a command-line (makefile based) project. Using the Eclipse's Indexer to analyze the code for intelligent browsing and editing, it looks like it does not recognize the underlying ARM C compiler 5 predefined macros. For example, if I have in my code:</p>\n<pre><code>#warning &quot;XXXXXXXX Im here 1 XXXXXXX&quot;\n#ifdef __arm__\n#warning &quot;XXXXXXXX Im here 2 XXXXXXX&quot;\n#endif\n</code></pre>\n<p>then when compiling the module I see the first and second warnings (<a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472k/chr1359125007083.html\" rel=\"nofollow noreferrer\">the compiler is aware of its own <code>__arm__</code> macro, of-course</a>). However, in the editor, the code in the <code>#ifdef</code> block is grayed out. Consequently, I have hundreds of false error indications in the <code>Problems</code> view.</p>\n<p>How can I make the environment aware of the compiler built-in settings?</p>\n<p>* Using ARM DS-5 version 5.20, and armcc version 5.05</p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435778870, "post_id": 31169588, "comment_id": 50347798, "body": "Sidenote:  you should clarify which standard version you are talking about. The term &quot;ANSI-C&quot; is mostly used for C89/C90 (identical as for the language/libs) only; otherwise the year of the standard is mentioned for ISO-C: C90/C99 or C11 (the current and only valid standard version)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435778989, "post_id": 31169588, "comment_id": 50347859, "body": "Just out of curiosity: why not do all in Python? Normally, one would implement higher level code in Python and just some time-critical stuff in C."}, {"owner": {"reputation": 1661, "user_id": 1149813, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/210b8dbf51e0ddb0e7b138c320eea633?s=128&d=identicon&r=PG", "display_name": "simona", "link": "https://stackoverflow.com/users/1149813/simona"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435780795, "post_id": 31169588, "comment_id": 50348872, "body": "I am calling this C-function from a  larger program that has already been written by somebody else in Fortran90. This function is called often and that&#39;s why it is written in C (or Fortran, but I happened to write it in C). The initialization step of course doesn&#39;t need to be optimized."}], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 2985233, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab0d4ab9ca6f0c09e7fd336a03f2b183?s=128&d=identicon&r=PG&f=1", "display_name": "rady", "link": "https://stackoverflow.com/users/2985233/rady"}, "is_accepted": false, "score": 3, "last_activity_date": 1435777710, "creation_date": 1435777710, "answer_id": 31169675, "question_id": 31169588, "link": "https://stackoverflow.com/questions/31169588/calling-python-from-c/31169675#31169675", "title": "calling Python from C", "body": "<p>To call Python from C, it is quite simple. First you need to install the python-dev packages to get access to the Python.h file. then you have access to the python api. Here is the reference for the api: <a href=\"https://docs.python.org/2/c-api/intro.html\" rel=\"nofollow\">https://docs.python.org/2/c-api/intro.html</a>. specifically pay attention to the Embedding Python section. The basic process is to call Py_Initialize() execute your python code and then call Py_Finalize()</p>\n"}], "owner": {"reputation": 1661, "user_id": 1149813, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/210b8dbf51e0ddb0e7b138c320eea633?s=128&d=identicon&r=PG", "display_name": "simona", "link": "https://stackoverflow.com/users/1149813/simona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1435780980, "creation_date": 1435777408, "last_edit_date": 1435780980, "question_id": 31169588, "link": "https://stackoverflow.com/questions/31169588/calling-python-from-c", "title": "calling Python from C", "body": "<p>I have an C code, and there is some simple file manipulation I would need to do at the beginning for initialization purposes, that would be straightforward with Python. I was wondering if there is a way to do that with calling python from C. I am familiar with calling C from Python, but for doing the opposite I have read that Cython could do but I am very confused on how.</p>\n\n<p>The python code has to take in input some strings, make some files manipulation and return some doubles and arrays.</p>\n"}, {"tags": ["c++", "c", "xcode", "macos", "debugging"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "edited": false, "score": 0, "creation_date": 1435940965, "post_id": 31169347, "comment_id": 50423720, "body": "Thank you rici!  It works! It brought up my faded memory about compiler and linker. But I still can&#39;t remember, in Xcode, .c files and .c++ files are compiled with different compiler?   I&#39;m new to Xcode. I used to use MS Visual studio, which is amazingly convenient and helpful. But I since I like Macbook, I have moved all application softwares to mac os version. Xcode seems not as convenient as MS Visual studio. Could you recommend some IDE for C/C++ coding on mac os? Thanks!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "edited": false, "score": 0, "creation_date": 1435946249, "post_id": 31169347, "comment_id": 50425841, "body": "@user43964: It&#39;s the same compiler suite (clang) but name mangling is part of the ABI and that requires C and C++ names to be handled differently. I don&#39;t know much about windows but it would surprise me if it were different. Perhaps your Windows IDE didnt let you mix languages in a project. If you compile the C code with c++ it will usually work ok, and you have no naming issues. As far as mac os x goes, the only IDE I&#39;ve used is xcode."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 4, "last_activity_date": 1435777846, "last_edit_date": 1435777846, "creation_date": 1435776558, "answer_id": 31169347, "question_id": 31169277, "link": "https://stackoverflow.com/questions/31169277/xcode-c-c-linker-error-undefined-symbol/31169347#31169347", "title": "xcode c/c++ linker error: undefined symbol", "body": "<p>You need to tell the C++ compiler that the function should have \"C\" linkage by declaring it as such (in your C++ source file).</p>\n\n<pre><code>extern \"C\" {\n  void free_and_null (char **ptr);\n}\n</code></pre>\n\n<p>C++ compilers construct \"mangled\" names for functions so that two functions with the same name but different argument types end up having different mangled names; that's necessary because linkers expect all names to be unique. Consequently, the code generated by the C++ compiler in your example will produce a different name than the name produced by the C compiler. (On Intel platforms, C compilers also modify names slightly, by prefixing an underscore, which is why it complains that <code>_free_and_null</code> is unfound.)</p>\n\n<p>One common way of doing this is to make a header file which uses preprocessor macros to detect the language. It's not fully portable, but it should work in your case:</p>\n\n<pre><code>// File model.h\n// This will not work with all C++ compilers, but it works with clang and gcc\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nvoid free_and_null (char **ptr);\n// Other function declarations here\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3203854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931f46b656a6f60edf2cbede2642497f?s=128&d=identicon&r=PG&f=1", "display_name": "user43964", "link": "https://stackoverflow.com/users/3203854/user43964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435777846, "creation_date": 1435776371, "last_edit_date": 1435777675, "question_id": 31169277, "link": "https://stackoverflow.com/questions/31169277/xcode-c-c-linker-error-undefined-symbol", "title": "xcode c/c++ linker error: undefined symbol", "body": "<p>I did some search but my problem seems to be trivial so that no one asked.<br>\nI have a mixed c and c++ code.</p>\n\n<p>In <code>model.h</code>, I have the following declaration:</p>\n\n<pre><code>void free_and_null (char **ptr);\n</code></pre>\n\n<p>In <code>model.cpp</code>, I have the function body:</p>\n\n<pre><code>void free_and_null (char **ptr)\n{\n    if ( *ptr != NULL ) {\n        free (*ptr);\n        *ptr = NULL;\n    }\n} /* END free_and_null */\n</code></pre>\n\n<p>In a <code>solve.c</code> file, I have the following :</p>\n\n<pre><code>#include \"sort.h\"\n.....\n    free_and_null ((char **) &amp;x);\n</code></pre>\n\n<p>When I compile the project, it has the following linker error: </p>\n\n<blockquote>\n  <p>wrap)\n  Undefined symbols for architecture x86_64:\n    \"_free_and_null\", referenced from:</p>\n</blockquote>\n\n<p>Why such a simple program can have error? I use Apple LLVM 6.0 as the compiler. Any input is highly appreciated. </p>\n"}, {"tags": ["c", "linux", "ubuntu", "linux-device-driver"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1435775862, "post_id": 31169065, "comment_id": 50346046, "body": "This function has many errors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435776050, "post_id": 31169065, "comment_id": 50346164, "body": "For a start: you return a signed int from an unsigned function. use the same type!"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1435776055, "post_id": 31169065, "comment_id": 50346166, "body": "Yes, you can initialize a char array with a string literal. All elements not individually initialized get a <code>&#39;\\0&#39;</code> ... so after <code>char buffer[1000] = &quot;HELLO&quot;;</code> all elements from <code>buffer[5]</code> to <code>buffer[999]</code> (inclusive) have that <code>&#39;\\0&#39;</code>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435776879, "post_id": 31169065, "comment_id": 50346650, "body": "Yes @Olaf, I am sure. In C there is no such thing as <i>&quot;partial initialization&quot;</i>. See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9\" rel=\"nofollow noreferrer\">6.7.9</a>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1435777293, "post_id": 31169065, "comment_id": 50346910, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p21\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.7.9p21</a> &quot;If there are [...] fewer characters in a string literal used to initialize an array of known size than there are elements in the array, the remainder of the aggregate shall be initialized implicitly the same as objects that have static storage duration. &quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1435778278, "post_id": 31169065, "comment_id": 50347461, "body": "@pmg: Found myself already. Thanks!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435784809, "post_id": 31169065, "comment_id": 50351095, "body": "what is this line: &#39;int = bytes_written;&#39; expected to do?   I can tell you it does not compile."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435779184, "post_id": 31169132, "comment_id": 50347957, "body": "That does not answer the question. Would have been better a comment."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1435779387, "post_id": 31169132, "comment_id": 50348081, "body": "Actually, from appearances it should be <code>ssize_t bytes_written;</code>"}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 0, "last_activity_date": 1435775907, "creation_date": 1435775907, "answer_id": 31169132, "question_id": 31169065, "link": "https://stackoverflow.com/questions/31169065/c-control-reaches-end-of-non-void-function-even-though-it-returns-int/31169132#31169132", "title": "C: control reaches end of non void function... Even though it returns int?", "body": "<p><code>int = bytes_written;</code> shoud be <code>int bytes_written;</code> at least to fix your current error.  There are likely others.</p>\n"}, {"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1435776073, "post_id": 31169139, "comment_id": 50346180, "body": "4) <code>open</code> and <code>write</code> can&#39;t be used directly from kernel space AFAIK 5) <code>fd</code> is never closed"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1435776180, "post_id": 31169139, "comment_id": 50346235, "body": "@zwol I don&#39;t know that, But I am adding it anyway."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435776181, "post_id": 31169139, "comment_id": 50346236, "body": "Add to this happily mixing signed and unsigned and different types (ssize_t, size_t, etc). This is getting more like a code review."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 2, "last_activity_date": 1435776216, "last_edit_date": 1495540278, "creation_date": 1435775929, "answer_id": 31169139, "question_id": 31169065, "link": "https://stackoverflow.com/questions/31169065/c-control-reaches-end-of-non-void-function-even-though-it-returns-int/31169139#31169139", "title": "C: control reaches end of non void function... Even though it returns int?", "body": "<p>The function has many problems</p>\n\n<ol>\n<li><p>This is invalid</p>\n\n<pre><code>int = bytes_written;\n</code></pre>\n\n<p>Maybe you mean</p>\n\n<pre><code>int bytes_written;\n</code></pre></li>\n<li><p>You must check <code>fd != -1</code>, any code following <code>open()</code> will \"<em>potentially</em>\" cause a <em>Invalid file descriptor</em> error, because you have no guarantee that <code>fd</code> is a valid descriptor.</p>\n\n<p>And you can't even know whether the error was set or not, because</p>\n\n<ol>\n<li>You don't check whether <code>write()</code> succeeded.</li>\n<li>You don't check what is the value of <code>errno</code> after every call that can possible set it's value <code>!= 0</code>, namely <code>open()</code> and <code>write()</code>.</li>\n</ol></li>\n<li><p>This <code>Message[BUF_LEN-1] = '\\0';</code> is very likely wrong, it would be <code>Message[i - 1] = '\\0'</code>;</p>\n\n<p>And it seems logical to do</p>\n\n<pre><code>memcpy(Message, buffer, length); \nMessage[length] = '\\0';\n</code></pre></li>\n<li><p>As commented by @<a href=\"https://stackoverflow.com/questions/31169065/c-control-reaches-end-of-non-void-function-even-though-it-returns-int/31169139#comment50346180_31169139\">zwol</a>, you can't use <code>open()</code> or <code>write()</code> from kernel space.</p></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 5070922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f73cd78851b5020d402db5ceeea2d97?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/5070922/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 31169139, "answer_count": 2, "score": 0, "last_activity_date": 1435776216, "creation_date": 1435775640, "last_edit_date": 1435775836, "question_id": 31169065, "link": "https://stackoverflow.com/questions/31169065/c-control-reaches-end-of-non-void-function-even-though-it-returns-int", "title": "C: control reaches end of non void function... Even though it returns int?", "body": "<p>I\"m writing a character device in C (for linux). I have this function:</p>\n\n<pre><code>static ssize_t\ndevice_write(struct file *file,\n     const char __user * buffer, size_t length, loff_t * offset)\n{\n    int i, fd = 0;\n    int = bytes_written;\n\n    fd = open(file, O_WRONLY);\n\n    printk(\"device_write(%p,%d)\\n\", file, length);\n\n    for (i = 0; i &lt; length &amp;&amp; i &lt; BUF_LEN-1; i++)\n        get_user(Message[i], buffer + i);\n\n    bytes_written = write(fd,Message,i);\n    Message[BUF_LEN-1] = '\\0';\n    /* return the number of input characters used */\n    return bytes_written;\n}\n</code></pre>\n\n<p>And when I compile I get error: control reaches end of non-void function. I've double checked that I'm compiling the right program, and it's driving me nuts.</p>\n\n<p>Any help would be welcome.</p>\n\n<p>Also, slightly unrelated, but is it possible to init a char buffer to a certain string (e.g. char <code>buffer[1000] = \"HELLO\"</code>)?</p>\n"}, {"tags": ["c++", "c", "function", "recursion"], "comments": [{"owner": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 3, "creation_date": 1435775739, "post_id": 31168949, "comment_id": 50345988, "body": "What are you entering for n? And what compiler are you using?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 3, "creation_date": 1435777230, "post_id": 31168949, "comment_id": 50346869, "body": "If you won&#39;t / can&#39;t run the debugger, try adding a &#39;cout&lt;&lt;c&lt;&lt;&quot; &quot;&#39;  at the begining of f().. to observe the behavior."}, {"owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "reply_to_user": {"reputation": 796, "user_id": 4920579, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EGG30.jpg?s=128&g=1", "display_name": "amza", "link": "https://stackoverflow.com/users/4920579/amza"}, "edited": false, "score": 0, "creation_date": 1435818550, "post_id": 31168949, "comment_id": 50360749, "body": "@stazima take value of n=3......"}, {"owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435818620, "post_id": 31168949, "comment_id": 50360786, "body": "@ DOUGLAS O. MOEN.....yes sir i noticed the behavior but i could&#39;nt understand the reason.....can explain it??"}], "answers": [{"comments": [{"owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "reply_to_user": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435818637, "post_id": 31169572, "comment_id": 50360792, "body": "That depends on value of n being passed in function n. If you will keep on adding anything to c, ultimately it will overflow and could become 0."}, {"owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "reply_to_user": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "edited": false, "score": 0, "creation_date": 1435819065, "post_id": 31169572, "comment_id": 50361027, "body": "Then it will loop forever because n will never be 6 , so it will keep on calling f(n-2); recursively , increasing value of c."}], "tags": [], "owner": {"reputation": 444, "user_id": 3565621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq6s4.jpg?s=128&g=1", "display_name": "mystic_coder", "link": "https://stackoverflow.com/users/3565621/mystic-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777357, "creation_date": 1435777357, "answer_id": 31169572, "question_id": 31168949, "link": "https://stackoverflow.com/questions/31168949/why-is-the-value-of-c-changing-in-the-following-code/31169572#31169572", "title": "Why is the value of &quot;C&quot; changing in the following code?", "body": "<p>Because value of c is being changed in below code :</p>\n\n<pre><code>else{       \n        c=c+1;    \n        f(n-2);    \n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4112737, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003395041506/picture?type=large", "display_name": "Hari Krishna Singireddi", "link": "https://stackoverflow.com/users/4112737/hari-krishna-singireddi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1435818745, "creation_date": 1435775286, "last_edit_date": 1435818745, "question_id": 31168949, "link": "https://stackoverflow.com/questions/31168949/why-is-the-value-of-c-changing-in-the-following-code", "title": "Why is the value of &quot;C&quot; changing in the following code?", "body": "<blockquote>\n  <p>the output I'm getting for the given code is \"0\" even though I\n  initialized the value of c as \"1\"...can somebody explain it...\n  Why is the value of \"C\" changing in the following code??</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint c=1; // global initialized 'c' as 1..\n\nlong long f(long long n){\n\n    if(n==6){\n\n        return 2;\n    }\n\n    else{   \n\n        c=c+1;\n\n        f(n-2);\n\n    }\n\n}\nint main()\n{\n    long long n,ans,p;\n    cin&gt;&gt;n;\n\n    ans=f((2*n)-2);\n\n    cout&lt;&lt;c; //printing out the value of 'c'\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1435775104, "post_id": 31168814, "comment_id": 50345592, "body": "So you wish to make up the language as you go on your merry way. Interesting thought"}, {"owner": {"reputation": 1348, "user_id": 1344548, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/386e9d729178f42271db37635ddc8fc5?s=128&d=identicon&r=PG", "display_name": "Andrew Corsini", "link": "https://stackoverflow.com/users/1344548/andrew-corsini"}, "edited": false, "score": 0, "creation_date": 1435775294, "post_id": 31168814, "comment_id": 50345717, "body": "Question is really unclear. If you uncomment that one line everything will work fine. You need to declare grades first because that&#39;s how C works. The for-loops are there to get user input on what the values should be, if you want to avoid that you can just hard-code some values."}], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775056, "post_id": 31168852, "comment_id": 50345552, "body": "So can I declare it without looping on the array and declaring each element?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775143, "post_id": 31168852, "comment_id": 50345623, "body": "@Omer Aviv: Well, according to your code, the element values have to be read from standard input. If so, there&#39;s no way around these cycles. You can use a file as input, thus making this program to read these values from that file (instead of making the user to type them in), but the cycles are necessary. And you are not &quot;declaring each element&quot;. Elements are already declared by array declaration <code>int grades[students][courses];</code>. The cycles are there to <i>give each element a meaningful value</i>."}, {"owner": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775311, "post_id": 31168852, "comment_id": 50345727, "body": "I mean, it pops out these errors before it can even start receiving inputs: <code>expected constant expression</code>, <code>cannot allocate an array of constant size 0</code>, <code>&#39;grades&#39;: missing subscript</code> and <code>&#39;grades: unknown size</code>. Do I have to make a cycle to define each element with some default value like 0?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775369, "post_id": 31168852, "comment_id": 50345747, "body": "@Omer Aviv: In order to use non-constant values as array sizes you need a C99 compiler (or later). Your compiler is apparently not C99, which is why you get that error. In &quot;classic&quot; C (C89/90) you&#39;d have to do <code>#define students 2</code>, i.e. use constant sizes."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775557, "post_id": 31168852, "comment_id": 50345865, "body": "@Omer Aviv: VS2013 supports a lot of C99, but it does not support non-constant size arrays (Variable Length Arrays), which is why you get the error. Can you just change your sizes to constants? <code>#define students 2</code> and <code>#define courses  2</code>."}, {"owner": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775603, "post_id": 31168852, "comment_id": 50345902, "body": "I see. Alright, I guess I&#39;ll have to make the cycle after all. Thanks for helping! ;)"}, {"owner": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "edited": false, "score": 0, "creation_date": 1435775954, "post_id": 31168852, "comment_id": 50346099, "body": "I used <code>#define students 30</code> instead and it works.. :)"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 4, "last_activity_date": 1435775652, "last_edit_date": 1435775652, "creation_date": 1435774950, "answer_id": 31168852, "question_id": 31168814, "link": "https://stackoverflow.com/questions/31168814/errors-when-not-declaring-two-dimensional-array/31168852#31168852", "title": "Errors when not declaring two-dimensional array", "body": "<blockquote>\n  <p>Why do I need to declare something before I can use it</p>\n</blockquote>\n\n<p>Because that's how C language is defined. You have to declare things before you can use them, period. You have to tell the compiler what \"it\" is before you can use \"it\". Sometimes C can be rather permissive in this regard, willing to get by with only a \"partial\" declaration. But in any case at least a partial declaration of some sort is required.</p>\n\n<p>Your (commented-out) declaration is correct</p>\n\n<pre><code>int grades[students][courses];\n</code></pre>\n\n<p>Note though that in order to use non-constants <code>students</code> and <code>courses</code> as array sizes you need a modern C compiler (C99 or later), which supports Variable Length Arrays (VLA). \"Classic\" C (C89/90) does not allow non-constant array sizes.</p>\n\n<p>Then you have to assign your array elements some meaningful values. This has to be done using a cycle.</p>\n"}, {"tags": [], "owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "is_accepted": false, "score": 1, "last_activity_date": 1435775108, "creation_date": 1435775108, "answer_id": 31168897, "question_id": 31168814, "link": "https://stackoverflow.com/questions/31168814/errors-when-not-declaring-two-dimensional-array/31168897#31168897", "title": "Errors when not declaring two-dimensional array", "body": "<p>The declaration lets the computer reserve storage space in which to put the values you want to save in the array. If you don't have a declaration, there's no place reserved to save those values.</p>\n\n<p>It's like saying \"I want to write something down, why do I have to get a piece of paper first?\"</p>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 4995044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a93cd43705eb6d9d1448e8dbd5c444a?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/4995044/jon"}, "is_accepted": false, "score": 2, "last_activity_date": 1435775161, "creation_date": 1435775161, "answer_id": 31168912, "question_id": 31168814, "link": "https://stackoverflow.com/questions/31168814/errors-when-not-declaring-two-dimensional-array/31168912#31168912", "title": "Errors when not declaring two-dimensional array", "body": "<p>I'm not sure what you're asking with your second question, but it looks like you have the declaration for your 2-D array right. <code>int grades[students][courses];</code> should give you a 2-D array of fixed size of integers. You need to declare values to tell the compiler what you're actually referring to.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5024701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRbwu.jpg?s=128&g=1", "display_name": "Yung Lean", "link": "https://stackoverflow.com/users/5024701/yung-lean"}, "is_accepted": false, "score": 0, "last_activity_date": 1435775323, "creation_date": 1435775323, "answer_id": 31168962, "question_id": 31168814, "link": "https://stackoverflow.com/questions/31168814/errors-when-not-declaring-two-dimensional-array/31168962#31168962", "title": "Errors when not declaring two-dimensional array", "body": "<p>To declare the Array you would put </p>\n\n<pre><code>int grades[2][2];\n</code></pre>\n\n<p>as the first line in your main.\nYou could set the size to something larger if you wanted to include more students or grades.</p>\n"}], "owner": {"reputation": 286, "user_id": 4542477, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3a8fe939d0929d057b009d079b05fced?s=128&d=identicon&r=PG&f=1", "display_name": "Omer Aviv", "link": "https://stackoverflow.com/users/4542477/omer-aviv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 31168852, "answer_count": 4, "score": 0, "last_activity_date": 1435775652, "creation_date": 1435774840, "last_edit_date": 1435775336, "question_id": 31168814, "link": "https://stackoverflow.com/questions/31168814/errors-when-not-declaring-two-dimensional-array", "title": "Errors when not declaring two-dimensional array", "body": "<p>I'm a bit new in C and I'm trying to write some simple code that gets some grades for a few students and store them in a two-dimensional array. The problem is it won't run because the array is not declared. Why do I need to declare something before I can use it and how can I simply declare it without running through the whole loop and declaring some value?</p>\n\n<p>This is my code for now:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int students = 2, courses = 2;\n    int grades[students][courses];\n    for(int i=0; i&lt;students; i++)\n    {\n        for(int j=0; j&lt;courses; j++)\n        {\n            printf(\"Student %d, course %d grade: \", i, j);\n            scanf(\"%d\", &amp;grades[i][j]);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "coordinates"], "comments": [{"owner": {"reputation": 213217, "user_id": 41071, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ec0f5be7749c8cc8ccda4a809103f36?s=128&d=identicon&r=PG", "display_name": "svick", "link": "https://stackoverflow.com/users/41071/svick"}, "edited": false, "score": 0, "creation_date": 1435804261, "post_id": 31168446, "comment_id": 50356735, "body": "Are you talking about <a href=\"http://www.codechef.com/problems/PRIMPATT\" rel=\"nofollow noreferrer\">this problem</a>? What formulas do you mean?"}, {"owner": {"reputation": 1, "user_id": 5010360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m9GdWoQWkdQ/AAAAAAAAAAI/AAAAAAAAAHY/gZ7968KC5Tk/photo.jpg?sz=128", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5010360/amisha-bansal"}, "reply_to_user": {"reputation": 213217, "user_id": 41071, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ec0f5be7749c8cc8ccda4a809103f36?s=128&d=identicon&r=PG", "display_name": "svick", "link": "https://stackoverflow.com/users/41071/svick"}, "edited": false, "score": 0, "creation_date": 1435813142, "post_id": 31168446, "comment_id": 50358800, "body": "These-   **  if(x-y&gt;0 &amp;&amp; x+y&lt;=1) // south     {     sum=(y-1)*(4*y+2)+2;     sum+=x-y;     }     else if(x+y&gt;1 &amp;&amp; x-y&gt;=0) // east     {     sum=(4*x-6)*x+2;     sum+=2*x-1;     sum+=x+y-1;     }     else if(x-y&lt;0 &amp;&amp; x+y&gt;=0) // north     {     sum=(4*y-6)*y+2;     sum+=(y-1)*4+2;     sum+=y-x;     }     else if(x+y&lt;0 &amp;&amp;x-y&lt;=0) // west     {     sum=(8*x+12)*x/2+2;     sum+=(-x-1)*6+4;     sum+=-x-y;     }     return sum;     }**"}, {"owner": {"reputation": 213217, "user_id": 41071, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ec0f5be7749c8cc8ccda4a809103f36?s=128&d=identicon&r=PG", "display_name": "svick", "link": "https://stackoverflow.com/users/41071/svick"}, "edited": false, "score": 0, "creation_date": 1435839957, "post_id": 31168446, "comment_id": 50374436, "body": "I don&#39;t see that in the link. Is it from one of the successful submissions? Which one?"}, {"owner": {"reputation": 1, "user_id": 5010360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m9GdWoQWkdQ/AAAAAAAAAAI/AAAAAAAAAHY/gZ7968KC5Tk/photo.jpg?sz=128", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5010360/amisha-bansal"}, "reply_to_user": {"reputation": 213217, "user_id": 41071, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ec0f5be7749c8cc8ccda4a809103f36?s=128&d=identicon&r=PG", "display_name": "svick", "link": "https://stackoverflow.com/users/41071/svick"}, "edited": false, "score": 0, "creation_date": 1435849296, "post_id": 31168446, "comment_id": 50381347, "body": "I am talking about this <a href=\"http://www.codechef.com/viewsolution/7238506\" rel=\"nofollow noreferrer\">codechef.com/viewsolution/7238506</a> for the north,west,east and south movement."}], "owner": {"reputation": 1, "user_id": 5010360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m9GdWoQWkdQ/AAAAAAAAAAI/AAAAAAAAAHY/gZ7968KC5Tk/photo.jpg?sz=128", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5010360/amisha-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1435849979, "creation_date": 1435773446, "last_edit_date": 1435849979, "question_id": 31168446, "link": "https://stackoverflow.com/questions/31168446/how-are-those-4-formulas-determined-in-codechef-prime-pattern", "title": "How are those 4 formulas determined in codechef prime pattern?", "body": "<p>In the codechef primepattern question how those four fornulas are obtained for range of values of X and y?</p>\n\n<p><a href=\"http://www.codechef.com/problems/PRIMPATT\" rel=\"nofollow\">This problem</a></p>\n\n<p>This is what I am talking about These:</p>\n\n<pre><code>if(x-y&gt;0 &amp;&amp; x+y&lt;=1) // south\n{\nsum=(y-1)*(4*y+2)+2;\nsum+=x-y;\n}\nelse if(x+y&gt;1 &amp;&amp; x-y&gt;=0) // east\n{\nsum=(4*x-6)*x+2;\nsum+=2*x-1;\nsum+=x+y-1;\n}\nelse if(x-y&lt;0 &amp;&amp; x+y&gt;=0) // north\n{\nsum=(4*y-6)*y+2;\nsum+=(y-1)*4+2;\nsum+=y-x;\n}\nelse if(x+y&lt;0 &amp;&amp;x-y&lt;=0) // west\n{\nsum=(8*x+12)*x/2+2;\nsum+=(-x-1)*6+4;\nsum+=-x-y;\n}\nreturn sum;\n}\n</code></pre>\n\n<p>In short how are we calculating box number from given coordinates?</p>\n"}, {"tags": ["c", "sockets", "http", "network-programming"], "comments": [{"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1435773048, "post_id": 31168131, "comment_id": 50344390, "body": "What does a browser (Firefox?) say?"}, {"owner": {"reputation": 45, "user_id": 2205935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793999978586b1592c7dc230e7eab3f3?s=128&d=identicon&r=PG", "display_name": "Matthew Scheffel", "link": "https://stackoverflow.com/users/2205935/matthew-scheffel"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1435773188, "post_id": 31168131, "comment_id": 50344477, "body": "&quot;The connection was reset.&quot;  If I use the debugging tools, it tells me that a random amount of bytes less than the total size was transferred - exactly like wget."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1435774120, "post_id": 31168131, "comment_id": 50344982, "body": "have you checked your file system to assure that it is &#39;ok&#39; to have a foreign server (even though it is on your machine) write to the directory where the file is to be saved."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435782578, "post_id": 31168131, "comment_id": 50349852, "body": "as a recovery step, for wget, could use the &#39;-c&#39; parameter to try to resume the download"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435782685, "post_id": 31168131, "comment_id": 50349913, "body": "in the server code, I think the first call to &#39;send()&#39; should also have its&#39; returned value checked for errors, not just the later calls to &#39;send()&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435782806, "post_id": 31168131, "comment_id": 50349981, "body": "Which server, like apache2, are you running on your machine?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 2205935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793999978586b1592c7dc230e7eab3f3?s=128&d=identicon&r=PG", "display_name": "Matthew Scheffel", "link": "https://stackoverflow.com/users/2205935/matthew-scheffel"}, "edited": false, "score": 0, "creation_date": 1435774184, "post_id": 31168562, "comment_id": 50345017, "body": "You are mistaken:   <code>echo &quot;GET &#47;w&#47;delorie-soft.gif HTTP&#47;1.0&quot; | netcat delorie.com 80 | head -n 15 HTTP&#47;1.1 200 OK Date: Wed, 01 Jul 2015 18:09:22 GMT Server: Apache&#47;1.3.28 (Unix) mod_gzip&#47;1.3.19.1a mod_perl&#47;1.28 Cache-Control: max-age=25920000 Expires: Tue, 26 Apr 2016 18:09:22 GMT Last-Modified: Mon, 28 Apr 1997 01:25:47 GMT ETag: &quot;e40cd-12a9-3363fc9b&quot; Accept-Ranges: bytes Content-Length: 4777 Connection: close Content-Type: image&#47;gif</code>"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "reply_to_user": {"reputation": 45, "user_id": 2205935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793999978586b1592c7dc230e7eab3f3?s=128&d=identicon&r=PG", "display_name": "Matthew Scheffel", "link": "https://stackoverflow.com/users/2205935/matthew-scheffel"}, "edited": false, "score": 0, "creation_date": 1435775001, "post_id": 31168562, "comment_id": 50345512, "body": "@MatthewScheffel:  Hmmm, that means the Firefox Developer pane is misrepresenting the data.  That is surprising."}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1435773879, "creation_date": 1435773879, "answer_id": 31168562, "question_id": 31168131, "link": "https://stackoverflow.com/questions/31168131/http-server-not-sending-complete-file-to-wget-firefox-connection-reset-by-peer/31168562#31168562", "title": "HTTP Server Not Sending Complete File To WGET, Firefox. Connection reset by peer?", "body": "<p>I don't know if it is necessary, but when I inspect the headers being sent by a <a href=\"http://delorie.com/\" rel=\"nofollow\">simple website</a>, there are quotes around the values:</p>\n\n<pre><code>Accept-Ranges:\"bytes\"\nCache-Control:\"max-age=25920000\"\nConnection:\"Keep-Alive\"\nContent-Length:\"4777\"\nContent-Type:\"image/gif\"\nDate:\"Wed, 01 Jul 2015 17:55:52 GMT\"\nExpires:\"Tue, 26 Apr 2016 17:55:52 GMT\"\nKeep-Alive:\"timeout=30, max=100\"\nLast-Modified:\"Mon, 28 Apr 1997 01:25:47 GMT\"\nServer:\"Apache/1.3.28 (Unix) mod_gzip/1.3.19.1a mod_perl/1.28\"\n</code></pre>\n\n<p>Is it possible the content type is not correct?</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 2205935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793999978586b1592c7dc230e7eab3f3?s=128&d=identicon&r=PG", "display_name": "Matthew Scheffel", "link": "https://stackoverflow.com/users/2205935/matthew-scheffel"}, "edited": false, "score": 0, "creation_date": 1435777253, "post_id": 31168786, "comment_id": 50346886, "body": "I believe this is the exact problem - I am doing the hacky request parsing you mention.   The reason phrase is actually in content.statuscode, my naming is misleading here.   Thank you!"}], "tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1435774706, "creation_date": 1435774706, "answer_id": 31168786, "question_id": 31168131, "link": "https://stackoverflow.com/questions/31168131/http-server-not-sending-complete-file-to-wget-firefox-connection-reset-by-peer/31168786#31168786", "title": "HTTP Server Not Sending Complete File To WGET, Firefox. Connection reset by peer?", "body": "<p>My guess is that the error is related to code you have not shown here. </p>\n\n<p>It is a common mistake in simple implementation to not fully read the request but instead only read the first line or some bytes to determine the requested page, then send the response and finally close.</p>\n\n<p>Since at the time of the close there are still unread data from the client, this will result in Connection reset by peer. You don't see this effect with nc because the request you send with nc is probably shorter than the request from the browser and thus all data from the request are read in case of nc, but not in case of browser.</p>\n\n<p>Apart from that your response is invalid even if browsers accept it. Your status line (the first line) stops after the status code instead of adding the reason phrase, see <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6.1\" rel=\"nofollow\">http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6.1</a>. Also, you use <code>\\n</code> instead of <code>\\r\\n</code> as line delimiter.</p>\n"}], "owner": {"reputation": 45, "user_id": 2205935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793999978586b1592c7dc230e7eab3f3?s=128&d=identicon&r=PG", "display_name": "Matthew Scheffel", "link": "https://stackoverflow.com/users/2205935/matthew-scheffel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "accepted_answer_id": 31168786, "answer_count": 2, "score": 0, "last_activity_date": 1435774706, "creation_date": 1435772429, "last_edit_date": 1435773280, "question_id": 31168131, "link": "https://stackoverflow.com/questions/31168131/http-server-not-sending-complete-file-to-wget-firefox-connection-reset-by-peer", "title": "HTTP Server Not Sending Complete File To WGET, Firefox. Connection reset by peer?", "body": "<p>I'm writing an HTTP server, and am having trouble sending larger files. If I grab them with netcat, the output seems perfect. If I use a browser or wget, I only get the complete file sometimes. WGET keeps getting \"connection reset by peer\" errors, see the output below. Firefox says \"the connection was reset\".</p>\n\n<p>Here's the relevant procedure that sends data to the client:</p>\n\n<pre><code>int handle_request(int sockfd, struct cached_file content) {\n    char buffer[1024]; // FIXME hardcoded arbitrary buffer size for header\n\n    unsigned int sent_bytes;\n    unsigned int total = 0;\n    unsigned int bytes_left = content.size;\n\n    printf(\"I have to send %u bytes of content.\\n\", content.size);\n\n    snprintf(buffer, 1024, \"HTTP/1.1 %s\\nContent-Type: %s\\nContent-Length: %s\\n\\n\", content.statuscode, content.contenttype, content.sizestring);\n    sent_bytes = send(sockfd, buffer, strlen(buffer), MSG_MORE);\n    printf(\"I wanted to send %u bytes of header, and I sent %u.\\n\", strlen(buffer), sent_bytes);\n\n    while (total &lt; bytes_left) {\n        sent_bytes = send(sockfd, content.data+total, bytes_left, 0);\n        if (sent_bytes == -1) { \n            printf(\"send() returned -1\\n\");\n            break; \n        }\n\n        total      += sent_bytes;\n        bytes_left -= sent_bytes;\n    }\n    printf(\"I sent %u bytes of content. I had %u left to send.\\n\", total, bytes_left);\n\n    if (sent_bytes == -1)\n        logprint(\"socket error!\", errno);\n}\n</code></pre>\n\n<p>Here's the output from wget trying to grab the file:</p>\n\n<pre><code>wget --tries 1 http://localhost:8081/image.jpg\n--2015-07-01 13:21:42--  http://localhost:8081/image.jpg\nResolving localhost (localhost)... ::1, 127.0.0.1\nConnecting to localhost (localhost)|::1|:8081... failed: Connection refused.\nConnecting to localhost (localhost)|127.0.0.1|:8081... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 700895 (684K) [image/jpeg]\nSaving to: \u2018image.jpg.10\u2019\n\nimage.jpg.10                      53%[===============================&gt;                             ] 363.31K  --.-KB/s   in 0.001s \n\n2015-07-01 13:21:42 (688 MB/s) - Read error at byte 372031/700895 (Connection reset by peer). Giving up.\n\nwget --tries 1 http://localhost:8081/image.jpg\n--2015-07-01 13:21:43--  http://localhost:8081/image.jpg\nResolving localhost (localhost)... ::1, 127.0.0.1\nConnecting to localhost (localhost)|::1|:8081... failed: Connection refused.\nConnecting to localhost (localhost)|127.0.0.1|:8081... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 700895 (684K) [image/jpeg]\nSaving to: \u2018image.jpg.11\u2019\n\nimage.jpg.11                       6%[==&gt;                                                          ]  42.69K  --.-KB/s   in 0s     \n\n2015-07-01 13:21:43 (500 MB/s) - Read error at byte 43711/700895 (Connection reset by peer). Giving up.\n</code></pre>\n\n<p>Debugging output from the http server:</p>\n\n<pre><code>I have to send 700895 bytes of content.\nI wanted to send 65 bytes of header, and I sent 65.\nI sent 700895 bytes of content. I had 0 left to send.\n</code></pre>\n\n<p>I'd appreciate another set of eyes on this! Why is this happening and how can I fix it?</p>\n"}, {"tags": ["c", "macros", "include", "c-preprocessor", "header-files"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1435772232, "post_id": 31168025, "comment_id": 50343949, "body": "Have libraries. Sort out one or two include files for each library.  That will trim things"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1435774714, "post_id": 31168025, "comment_id": 50345318, "body": "Rather than trying to set include paths with the preprocessor, one would normally set them in the make file or project settings..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435776027, "post_id": 31168025, "comment_id": 50346151, "body": "@Dmitri: Unfortunately, doing that means that in a project where files get included from sixteen different directories, every <code>#include</code> directive will cause the compiler to look in all 16 directories.  Further, ambiguity and confusion may result if some <code>#include &quot;..&#47;fnord.h&quot;</code> statements find sometimes finds a <code>fnord.h</code> in the directory above the .C file being compiled but others use a <code>fnord.h</code> from a file in the directory above a directory in an include search path."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435776297, "post_id": 31168025, "comment_id": 50346306, "body": "@Dmitri: While common practice seems to be to give the compiler a mile-long search path and hope for the best, that doesn&#39;t mean a more structured approach wouldn&#39;t be better."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435776649, "post_id": 31168025, "comment_id": 50346518, "body": "@supercat I don&#39;t think what your trying to do will simplify things though.  Organizing your header files better and using the makefile/project settings will be much clearer.  Often there would be one or more main include paths with subdirectories to group the headers for different libraries/purposes, and the <code>#include</code> directives use relative paths within those.  As for the headers that are part of your project, you can organize them how you want and specify paths relative to your project directory."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435778963, "post_id": 31168025, "comment_id": 50347846, "body": "@Dmitri: If all include file names are unique, and if <code>#include</code> directives refrain from specifying paths, then using makefile/project settings may be somewhat workable.  Trying to do make the compiler work sensibly with a vendor-supplied include file that contains something like <code>#include &quot;..&#47;..&#47;..&#47;..&#47;syslib&#47;uart&#47;uart_typedefs.h&quot;</code>, not so much.  If there is a good pattern, maybe vendors could start using it in place of the horrible relative paths (yes, I have seen some start with four <code>..</code>s) with something sensible."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435783500, "post_id": 31168025, "comment_id": 50350357, "body": "having multiple header files with the same name is a sure sign that the system designer for the project did not do their job.  suggestion:  have only one or two places that contain .h files.  Then modify the .c files to only look in that one or two places.  if the header files cannot be moved, then place links in that one (or two) places that link to the actual .h files.  Above all, modify the file names so there are NO duplicates."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435787262, "post_id": 31168025, "comment_id": 50352250, "body": "@user3629249: What should one do if a project needs to make use of two libraries from different vendors which happen to use identically-named nested .h files?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435787828, "post_id": 31168025, "comment_id": 50352521, "body": "@user3629249: While prefixing all library includes with library-specific prefixes might be a good convention, it doesn&#39;t seem terribly common.  If two libraries both include a file e.g. <code>libtypes.h</code> but expect different contents, reconciling them will require hacking the files that use one or the other.  If the author of <code>FooLib</code> could change the header so that defining <code>FOOLIB_PATH</code> would cause the compiler to look there for FooLib-related includes, such conflicts could be resolved without having to hack any vendor-supplied files."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1435790829, "post_id": 31168025, "comment_id": 50353535, "body": "@supercat That&#39;s the reason for putting different libraries&#39; headers in subdirectories of the main include directory -- that way the subfolder name acts like a library-specific prefix.. eg. <code>#include&lt;libfoo&#47;libtypes.h&gt;</code> and <code>#include&lt;libbar&#47;libtypes.h&gt;</code>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1435791583, "post_id": 31168025, "comment_id": 50353784, "body": "@Dmitri: Different vendors have different expectations about how things will be laid out.  If some libraries from different vendors are both dependent upon a .h file from the main chip vendor, and one of them writes #include &quot;../cmq/cmq.h&quot;<code>, another </code>#include &quot;cmq/cmq.h&quot;<code>, and a third </code>#include &quot;cmq.h&quot;` how should one keep them straight?"}], "answers": [{"tags": [], "owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1441147214, "creation_date": 1441147214, "answer_id": 32341980, "question_id": 31168025, "link": "https://stackoverflow.com/questions/31168025/is-there-a-clean-portable-way-to-build-include-file-names/32341980#32341980", "title": "Is there a clean portable way to &quot;build&quot; include-file names", "body": "<p>There is not. According to 6.10.2 paragraph 4 of C99,\n\"The method by which a sequence of preprocessing tokens between a &lt; and a > preprocessing token pair or a pair of \" characters is combined into a single header name preprocessing token is implementation-defined\", so any attempt to do this will be nonportable.</p>\n\n<p>You essentially have two options.  If you really want to have no restrictions on directory names at all, then you'll need to use a separate program to do this part of the preprocessing.  Make itself would probably be sufficient; something like m4 would be overkill here.</p>\n\n<p>The other option, and the one I recommend, is to just establish a basic naming convention.  Make all your macro names be ALL-CAPS and all your directory names be not in all caps.  Then include your own headers before any others so you don't need to worry about what other people named their macros, and the problem vanishes.</p>\n"}], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464284274, "creation_date": 1435771989, "last_edit_date": 1464284274, "question_id": 31168025, "link": "https://stackoverflow.com/questions/31168025/is-there-a-clean-portable-way-to-build-include-file-names", "title": "Is there a clean portable way to &quot;build&quot; include-file names", "body": "<p>Many <strong>C</strong> projects have mile-long lists of \"include\" directories, and <strong>C</strong> source files often include tricky relative paths in their include directives. This can sometimes lead to ambiguities when files in different directories (and possibly serving different purposes) have the same name, and can also lead to slow compilation since the compiler has to search many places for each <code>#include</code> file.</p>\n\n<p>A conceptually cleaner approach would be to have for each project a designated <code>#include</code> search directory which contained a <code>filepaths.h</code> file that would define macros for all the directories where include files resided, so that code anywhere in the project could then say something like</p>\n\n<pre><code>#include IO_INCLUDES(serialports.h)\n#include IO_INCLUDES(timer.h)\n#include FILESYS_INCLUDES(filesystem.h)\n#include FILESYS_INCLUDES(dirhandling.h)\n</code></pre>\n\n<p>possibly with quotes; possibly without.  If <strong>C</strong> defined <code>#include \"string1\" \"string2\"</code> as equivalent to <code>#include \"string1string2\"</code>, handling include-files paths in such fashion would be easy, but it doesn't (in that case, the macros could accept arguments enclosed in quotes, and the macros could simply prepend suitable path names, also in quotes), but it doesn't.</p>\n\n<p>An approach which almost works is to define things like:</p>\n\n<pre><code>... within a filepaths.h file\n#define QUOTE(x) #x\n#define MQUOTE(x) QUOTE(x)\n#define DUP(x) x\n#define MAKENAME(file,path) MQUOTE(DUP(file)DUP(path))\n\n#define IO_INCLUDES(name) MAKENAME(d:/shared_libraries/io,name)\n#define FILESYS_INCLUDES(name) MAKENAME(d:/shared_libraries/filesys,name)\n\n... within an individual C file\n#include IO_INCLUDES(serialport.h)\n</code></pre>\n\n<p>GCC seems to accept this, with proper desired semantics, <em>if no path name component is recognized specially by the preprocessor</em>.  Requiring that project files must be stored in paths whose names don't match any macros or anything else the preprocessor might recognize doesn't seem reasonable, however.</p>\n\n<p>Is there any safe and portable way to allow a <code>filepaths.h</code> file to indicate the directories from which files should be retrieved?  The fact that the preprocessor accepts macros within <code>#include</code> directives would suggest that some such functionality was intended, but I can't figure out any way to make it work safely.  Is there one?</p>\n"}, {"tags": ["c", "c99"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435771780, "post_id": 31167941, "comment_id": 50343724, "body": "Don&#39;t use <code>gets()</code> use <code>fgets()</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1435772274, "post_id": 31167941, "comment_id": 50343968, "body": "Please elaborate <i>the while loop is not working</i>. What do you expect to see? What are you seeing that is different from what you expect to see."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435772513, "post_id": 31167941, "comment_id": 50344093, "body": "never used it before.can you tell me how to implement it.i am begginer"}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435772560, "post_id": 31167941, "comment_id": 50344116, "body": "i was expecting     abbbbb   gives 5 b     bbaa gives 2 a  but when i use while loop then i enter the no: of test cases like ex: 4 it prints 1 4 and ends"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1435775565, "post_id": 31167941, "comment_id": 50345871, "body": "Your check for i!=j may make the count one less than you expect."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "reply_to_user": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1435775811, "post_id": 31167941, "comment_id": 50346027, "body": "@RobertJacobs that&#39;s why i intiliased count=1 not 0"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435822876, "post_id": 31167941, "comment_id": 50363112, "body": "also, <code>if (c[i] != 0)</code> is redundant, as you are going from <code>i = 0</code> while <code>i &lt; k</code> which you have initialized to be <code>strlen(c)</code>  (to get the length it searches the string for a <code>c[i] == 0</code>, so you get in <code>k</code> the actual number of charactes,  all different from <code>\\0</code>)  So the <code>if</code> statement is always true."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435823054, "post_id": 31167941, "comment_id": 50363193, "body": "By the way, you had better done instead of <code>k = strlen(c); for(i = 0; i &lt; k; i++)</code> the following: <code>for (i = 0; c[i] != 0; i++)</code> because doing so you save one pass through the string (the one made by strlen just to search the end of the string)."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435825667, "post_id": 31167941, "comment_id": 50364705, "body": "@LuisColorado the inner for loop makes for(j=0;j&lt;k;j++);  I making the c[j]=0 so c[i]!=0 is not always satisfied"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435826143, "post_id": 31167941, "comment_id": 50365014, "body": "@nani that&#39;s right, but supposing you go upstairs and you don&#39;t pass beyond <code>i</code> it&#39;s difficult to find values <code>== 0</code> beyond that place.  Either case, the implementation is difficult to follow."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435773065, "post_id": 31168220, "comment_id": 50344399, "body": "i have not used fgets before can you help me it&#39;s application.i read that it takes three arguments but i am not able to understand  the last argument."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435773578, "post_id": 31168220, "comment_id": 50344694, "body": "can you please elaborate your explanation."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435773646, "post_id": 31168220, "comment_id": 50344728, "body": "here is no \\n in input stream.i have used it only in printf."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435773865, "post_id": 31168220, "comment_id": 50344854, "body": "@nani, Let&#39;s say you typed <code>10</code> followed by Enter. At that time, the input stream has the following characters: <code>&#39;1&#39;</code>, <code>&#39;0&#39;</code>, and <code>&#39;\\n&#39;</code>. The call to <code>scanf</code> consumes the characters <code>&#39;1&#39;</code> and <code>&#39;0&#39;</code>, assigns the value <code>10</code> to <code>t</code> but leaves the <code>&#39;\\n&#39;</code> in the input stream."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435775303, "post_id": 31168220, "comment_id": 50345721, "body": "i used scanf(&quot;%s&quot;,c); insted of gets(c); but still the same"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435775698, "post_id": 31168220, "comment_id": 50345963, "body": "@nani, It will be helpful to post the sample input, the expected output, and the actual output."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435776290, "post_id": 31168220, "comment_id": 50346301, "body": "input: 3 abba  abc zzz       expected output:2 a    1 a    3 z        it prints the maximum repeating  letter and the smallest alphabet if two letters match. actual output:1   3"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1435778320, "post_id": 31168220, "comment_id": 50347479, "body": "You may want to change the scanf to scanf(&quot;%d\\n&quot;,&amp;t) to remove the newline."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435778400, "post_id": 31168220, "comment_id": 50347529, "body": "@nani, I will let you take care of that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1435772707, "last_edit_date": 1495541176, "creation_date": 1435772707, "answer_id": 31168220, "question_id": 31167941, "link": "https://stackoverflow.com/questions/31167941/when-compiled-it-is-showing-warningcannot-find-entry-symbol-rrorsdefaulting-to/31168220#31168220", "title": "When compiled it is showing warning:cannot find entry symbol Rrors;defaulting to 0000000000400590", "body": "<p>After the following line is  executed,</p>\n\n<pre><code>scanf(\"%d\",&amp;t);\n</code></pre>\n\n<p>the newline character is still left in the input stream. The next call to <code>gets</code> ends up reading just the newline.</p>\n\n<p>You need to add code to ignore the rest of the line after readning <code>t</code>.</p>\n\n<pre><code>scanf(\"%d\",&amp;t);\n\n// Ignore the rest of the line from the input stream.\nchar c;\nwhile ( (c = getchar()) != '\\n' &amp;&amp; c != EOF);\n</code></pre>\n\n<p>Also, don't use <code>gets</code>. </p>\n\n<p>Further reading: <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why is the gets function so dangerous that it should not be used?</a>.</p>\n\n<p>Use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435775268, "post_id": 31168504, "comment_id": 50345700, "body": "i used scanf(&quot;%s&quot;,c); instead of gets(c); but no use"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435816408, "post_id": 31168504, "comment_id": 50359822, "body": "@nani I don&#39;t see any  problem with scanf() and it give output as you mentioned."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435816767, "post_id": 31168504, "comment_id": 50359971, "body": "my new code is working but can you check if it is c99 compatible."}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435816885, "post_id": 31168504, "comment_id": 50360011, "body": "it is an a2 online judge question and it is showing me wrong answer.but it works fine on my compiler.@ameyCU"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1435773685, "creation_date": 1435773685, "answer_id": 31168504, "question_id": 31167941, "link": "https://stackoverflow.com/questions/31167941/when-compiled-it-is-showing-warningcannot-find-entry-symbol-rrorsdefaulting-to/31168504#31168504", "title": "When compiled it is showing warning:cannot find entry symbol Rrors;defaulting to 0000000000400590", "body": "<p>According to what you mentioned, while loop works fine and just use scanf() in place of gets()(Don't use gets()) and then printf() will also be executed after loop.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435835380, "post_id": 31176885, "comment_id": 50371245, "body": "I ran your preferred code it showed ISO c90 forbids mixed declarations and code int tempc;  cand.c :43:1:warning control reaches end of a non void function"}, {"owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435835468, "post_id": 31176885, "comment_id": 50371294, "body": "Can you give me any reference so that I can figure it out?"}, {"owner": {"reputation": 9719, "user_id": 670521, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/029440196cca02003b9e6db1e895c19d?s=128&d=identicon&r=PG", "display_name": "DrBeco", "link": "https://stackoverflow.com/users/670521/drbeco"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435979026, "post_id": 31176885, "comment_id": 50433703, "body": "You cannot mix declarations (like <code>int i;</code>) with commands (anything, like a <code>printf()</code> or an <code>if()</code>). You need to make all declarations in the top. And the control reaching <code>non-void</code>, is because only <code>void</code> functions are allowed to finish without <code>return</code>. A <code>int f()</code>, for example, must use a <code>return X;</code>. Remember: gcc is your second best friend, after google."}, {"owner": {"reputation": 9719, "user_id": 670521, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/029440196cca02003b9e6db1e895c19d?s=128&d=identicon&r=PG", "display_name": "DrBeco", "link": "https://stackoverflow.com/users/670521/drbeco"}, "reply_to_user": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "edited": false, "score": 0, "creation_date": 1435979167, "post_id": 31176885, "comment_id": 50433733, "body": "As for references, copy and past the error code inside google. It will give you some &quot;north&quot;. Example: this google (<a href=\"https://www.google.com.br/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=reaches%20end%20of%20non-void%20function\" rel=\"nofollow noreferrer\">google.com.br/&hellip;</a>) gives you this stackoverflow answer: (<a href=\"http://stackoverflow.com/questions/2440337/warning-control-reaches-end-of-non-void-function-iphone\" title=\"warning control reaches end of non void function iphone\">stackoverflow.com/questions/2440337/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 9719, "user_id": 670521, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/029440196cca02003b9e6db1e895c19d?s=128&d=identicon&r=PG", "display_name": "DrBeco", "link": "https://stackoverflow.com/users/670521/drbeco"}, "is_accepted": false, "score": 0, "last_activity_date": 1435817999, "creation_date": 1435817999, "answer_id": 31176885, "question_id": 31167941, "link": "https://stackoverflow.com/questions/31167941/when-compiled-it-is-showing-warningcannot-find-entry-symbol-rrorsdefaulting-to/31176885#31176885", "title": "When compiled it is showing warning:cannot find entry symbol Rrors;defaulting to 0000000000400590", "body": "<p>You can also ask directly to your <code>gcc compiler</code>:</p>\n\n<pre><code>gcc test.c -o test.x -std=c99 -Wall -Wextra\n</code></pre>\n\n<p>And to be sure, try other options: <code>-std=gnu99</code>, <code>-std=gnu89</code>, <code>-std=c89</code>, and my preferred:</p>\n\n<pre><code>gcc test.c -o test.x -Wall -Wextra -ansi -pedantic-errors -O0\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5055758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6aac0826e8af0fcfea76a2da9e72d974?s=128&d=identicon&r=PG&f=1", "display_name": "v.sharath chandra", "link": "https://stackoverflow.com/users/5055758/v-sharath-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 1, "accepted_answer_id": 31168220, "answer_count": 3, "score": -1, "last_activity_date": 1435837074, "creation_date": 1435771687, "last_edit_date": 1435837074, "question_id": 31167941, "link": "https://stackoverflow.com/questions/31167941/when-compiled-it-is-showing-warningcannot-find-entry-symbol-rrorsdefaulting-to", "title": "When compiled it is showing warning:cannot find entry symbol Rrors;defaulting to 0000000000400590", "body": "<p>the while loop is not working here.there is no compilation error and the print statement is also getting executed in the beggining.the code works fine without the while loop.the code is to print the most repeating letter in a string and the number of times it is repeated</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    int t;\n    int tempC;\n    scanf(\"%d\",&amp;t);\n    while ( (tempC = getchar()) != '\\n' &amp;&amp; tempC != EOF );\n    while(t--)\n   {\n      char c[100];\n      char r='z';\n      int i,j=0,count,a,k,amx;\n      gets(c);\n      k=strlen(c);\n      for(i=0,amx=1;i&lt;k;i++)\n      {\n         if(c[i]!=0)\n         {\n            for(j=0,count=1;j&lt;k;j++)\n            {\n               if(c[i]==c[j])\n               {\n                  if(i!=j)\n                  {\n                     count++;\n                     c[j]=0;\n                  }\n                  a=count;\n                  if(a&gt;amx||(a==amx&amp;&amp;(c[i]&lt;r)))\n                  {\n                     amx=a;\n                     r=c[i];\n                  } \n               }\n            }\n         }\n\n      }\n      printf(\"%d %c\\n\",amx,r);\n   }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "for-loop"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435771191, "post_id": 31167657, "comment_id": 50343419, "body": "Replace the <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Unnamed_numerical_constants\" rel=\"nofollow noreferrer\">magic numbers</a> by few macros. It is very likely you will see your problem yourself then."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1435771496, "post_id": 31167657, "comment_id": 50343612, "body": "Please post sample input, the expected output, and the actual output."}, {"owner": {"reputation": 3, "user_id": 5053012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec072eac4a0094124ac616b005964c7?s=128&d=identicon&r=PG&f=1", "display_name": "ReconIII", "link": "https://stackoverflow.com/users/5053012/reconiii"}, "edited": false, "score": 0, "creation_date": 1435772103, "post_id": 31167657, "comment_id": 50343885, "body": "updated with a portion of the input"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5053012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec072eac4a0094124ac616b005964c7?s=128&d=identicon&r=PG&f=1", "display_name": "ReconIII", "link": "https://stackoverflow.com/users/5053012/reconiii"}, "edited": false, "score": 0, "creation_date": 1435778932, "post_id": 31169775, "comment_id": 50347827, "body": "Both should be 999 or I should change that to the linect variable, regardless that unfortunately won&#39;t effect the issue I am having."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1435778052, "creation_date": 1435778052, "answer_id": 31169775, "question_id": 31167657, "link": "https://stackoverflow.com/questions/31167657/if-statement-ignoring-zero/31169775#31169775", "title": "If statement ignoring zero?", "body": "<p>Why do you have two different loops in your program? The first loops 999 times and the other loops 99 times.</p>\n\n<pre><code>for (i = 0; i &lt; 999; i++)\n\nfor (i = 0; i &lt; 99; i++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1435782150, "creation_date": 1435782150, "answer_id": 31170940, "question_id": 31167657, "link": "https://stackoverflow.com/questions/31167657/if-statement-ignoring-zero/31170940#31170940", "title": "If statement ignoring zero?", "body": "<blockquote>\n  <p>as soon as it sees 182.6000061 next to each other it sets those to zero and the corresponding number in the array2</p>\n</blockquote>\n\n<p>Nope! It sets the first of those to <code>0</code> and the corresponding one in array2.<br>\nMaybe you need</p>\n\n<pre><code>        if (array1[i] == array1[i+1])\n        {\n            array1[i] = array1[i + 1] = 0;\n            array2[i] = array2[i + 1] = 0;\n        }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5053012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec072eac4a0094124ac616b005964c7?s=128&d=identicon&r=PG&f=1", "display_name": "ReconIII", "link": "https://stackoverflow.com/users/5053012/reconiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435782150, "creation_date": 1435770703, "last_edit_date": 1435772991, "question_id": 31167657, "link": "https://stackoverflow.com/questions/31167657/if-statement-ignoring-zero", "title": "If statement ignoring zero?", "body": "<p>This program reads two files and stores them in two arrays. array1 is the data and array2 is the type that corresponds to it. ex array1: 183, 183, 182, 195.3, 187  array2: 1, 1, 1, 2, 2 it sets the repeated numbers in the array1 to 0 and sets the corresponding number in array2 to zero. Ex: array1: 0, 0, 182, 195.3, 187 array2: 0, 0, 1, 2, 2 Then it should ignore the zeros in the for loop and calculate the sum for all the numbers of the same type. Ex: (for some reason called it mean) mean[2] = 195.3 + 187 It seems to be ignoring atleast one of the if statements which has it > .5 and going to the else statement when it encounters a zero. Any ideas?   </p>\n\n<p>Example data from file (not complete data), as soon as it sees 182.6000061 next to each other it sets those to zero and the corresponding number in the array2, yet it ignores one of the if statement and goes to the else statement. Output is 2822.799, 881.400, 1997.8, ect. Where the first value should be closer to 6000.  </p>\n\n<p>input data into array1: 182.6000061\n183\n182.6000061\n182\n177.8000031\n183.3999939\n183\n180.6000061\n147.6000061\n166.6000061\n168\n182\n181.6000061\n164.1999969\n180.3999939\n177.3999939\n177.6000061\n182.6000061\n182.6000061\n181.6000061\n179.8000031\n160\n177.3999939\n181.3999939\n183.1999969\n183.1999969\n182.8000031\n181.3999939\n179.6000061\n182.1999969\n183.8000031\n176.8000031</p>\n\n<p>input data into array2: 2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2912\n2979\n2979\n2979\n2979\n2979\n2979\n2979\n2979\n2979</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    FILE *fp;\n    float array1[1000] = {0}, array2[1000] = {0}, mean[1000] = {0}, average[1000] = {0}, counter[1000] = {0}, range[1000] = {0}, upper[1000] = {0}, lower[1000] = {0};\n    int a, h, i, r, j = 0, pos, found = 0, extrinsic[1000] = {0};\n    int b=0;\n    int linect = 1;\n    char buf[128];\n\n    i = 0;\n    j = 0;\n    fp = fopen(\"data.txt\", \"r\");\n\n    if(fp == NULL)\n    {\n        puts(\"Cannot open file for reading\");\n        scanf(\"%d\", &amp;a);\n        exit(EXIT_FAILURE);\n    }\n\n    while( linect &lt; 1000 ) \n    {\n        fgets(buf, sizeof(buf), fp);\n        sscanf(buf, \"%f\", &amp;array1[i]);\n        //printf(\"Set %d - 1st: %f\\n\", linect, array1[i]);\n        linect++;\n        i++;\n    }\n    fclose(fp);\n\n\n    linect = 0; //reads lot data file and puts it in array2\n    i = 0;\n    fp = fopen(\"lot_numbers.txt\", \"r\");\n    if(fp == NULL)\n    {\n        puts(\"Cannot open file for reading\");\n        scanf(\"%d\", &amp;a);\n        exit(EXIT_FAILURE);\n    }\n    while( linect &lt; 1000 ) \n    {\n        fgets(buf, sizeof(buf), fp);\n        sscanf(buf, \"%f\", &amp;array2[i]);\n        // printf(\"Set %d - 1st: %f\\n\", linect, array2[i]);\n        linect++;\n        i++;\n    }\n\n\n    for (i = 0; i &lt; 999; i++) //searches array sets repeated points to zero\n    {\n        if (array1[i] == array1[i+1])\n        {\n            array1[i] = 0;\n            array2[i] = 0;\n        }\n    }\n    for (i = 0; i &lt; 99; i++)   //searches array\n    {\n        if (array2[i] &gt; .5 &amp;&amp; array2[i] &lt; 50000)\n        {\n            if (array2[i] == array2[i+1])\n            {\n                if (array1[i] &gt; .5 &amp;&amp; array1[i] &lt; 500){  //ignores zeros and junk data \n                    mean[j] = mean[j] + array1[i];\n                    counter[j]= counter[j] + 1;\n                }\n            }\n            else {\n                average[j] = mean[j]/counter[j];\n                range[j] = average[j] * 0.1;\n                upper[j] = average[j] + range[j];\n                lower[j] = average[j] - range[j];\n                j++;\n            }\n        }\n    }\n    j = 0;\n    while (j &lt;10){\n        printf(\"\\n%f\", mean[j]);\n        j++;\n    }\n    scanf(\"%d\", &amp;a);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "random", "codeblocks", "random-seed"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435770840, "post_id": 31167517, "comment_id": 50343178, "body": "Note that (even after you get the line <code>sum = num1 + num2</code> into the loop, you are producing <i>undefined behaviour</i>. Read <a href=\"http://stackoverflow.com/questions/30821406/why-does-rand-rand-produce-negative-numbers/30821874#30821874\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435771059, "post_id": 31167572, "comment_id": 50343341, "body": "The <code>maxNumber</code> is never got except by this mod <code>num1 = rand()%(maxNumber+1);</code>"}], "tags": [], "owner": {"reputation": 2531, "user_id": 3696619, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LueSz.jpg?s=128&g=1", "display_name": "Jay Bosamiya", "link": "https://stackoverflow.com/users/3696619/jay-bosamiya"}, "is_accepted": true, "score": 1, "last_activity_date": 1435770905, "last_edit_date": 1435770905, "creation_date": 1435770384, "answer_id": 31167572, "question_id": 31167517, "link": "https://stackoverflow.com/questions/31167517/random-number-addition-game-issue/31167572#31167572", "title": "Random Number (addition game) issue", "body": "<p>You are assigning <code>sum</code> before setting <code>num1</code> and <code>num2</code>.</p>\n\n<p>Move the <code>sum = num1 + num2;</code> line into the loop after the <code>num2 = rand()%maxNumber;</code> line and it should work correctly.</p>\n\n<p>There are some other errors as well (such as initializing <code>i</code> with 0).</p>\n\n<p>BTW, it is generally considered a better practice to use a <code>for</code> loop instead of a <code>while</code> loop.</p>\n\n<p>Here's slightly more readable code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n  int maxNumber, num1, num2, sum, answer, problems, i;\n  srand(time(NULL));\n\n  printf(\"Enter your Max Number:\");\n  scanf(\"%d\", &amp;maxNumber);\n\n  printf(\"How many problems do you want?\\n\");\n  scanf(\"%d\", &amp;problems);\n\n  for (i = 0; i &lt; problems; i++) {\n    num1 = rand()%maxNumber;\n    num2 = rand()%maxNumber;\n    sum = num1 + num2;\n\n    printf(\"What is %d + %d\\n\",num1, num2);\n    scanf(\"%d\", &amp;answer);\n\n    if(answer != sum){\n      printf(\"Sorry, that's incorrect, the answer is %d\\n\", sum);\n    } else {\n      printf(\"Correct!\\n\");\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2531, "user_id": 3696619, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LueSz.jpg?s=128&g=1", "display_name": "Jay Bosamiya", "link": "https://stackoverflow.com/users/3696619/jay-bosamiya"}, "edited": false, "score": 0, "creation_date": 1435770562, "post_id": 31167599, "comment_id": 50343013, "body": "These initializations are not required (except for <code>i</code>) since they are either calculated or are taken as input"}, {"owner": {"reputation": 39, "user_id": 4616399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fef48019e0e0245e281215b90146ac27?s=128&d=identicon&r=PG&f=1", "display_name": "Leopold_Stotch", "link": "https://stackoverflow.com/users/4616399/leopold-stotch"}, "edited": false, "score": 0, "creation_date": 1435770589, "post_id": 31167599, "comment_id": 50343030, "body": "It seemed to work fine without the initialization but I will change it."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 39, "user_id": 4616399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fef48019e0e0245e281215b90146ac27?s=128&d=identicon&r=PG&f=1", "display_name": "Leopold_Stotch", "link": "https://stackoverflow.com/users/4616399/leopold-stotch"}, "edited": false, "score": 0, "creation_date": 1435770630, "post_id": 31167599, "comment_id": 50343055, "body": "It&#39;s good practice to initialize variables to known values.  @Leopold_Stotch: <code>i</code> DEFIINITELY needs to be initialized."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 1, "last_activity_date": 1435770693, "last_edit_date": 1435770693, "creation_date": 1435770496, "answer_id": 31167599, "question_id": 31167517, "link": "https://stackoverflow.com/questions/31167517/random-number-addition-game-issue/31167599#31167599", "title": "Random Number (addition game) issue", "body": "<p>You are using your variables without initializing them.  Change:</p>\n\n<pre><code>int maxNumber, num1, num2, sum, answer, problems, i;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>int maxNumber = 0, num1 = 0, num2 = 0, sum = 0, answer = 0, problems = 0, i = 0;\n</code></pre>\n\n<p>Also, move the <code>sum = num1 + num2;</code> line to after where you create <code>num1</code> and <code>num2</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4616399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fef48019e0e0245e281215b90146ac27?s=128&d=identicon&r=PG&f=1", "display_name": "Leopold_Stotch", "link": "https://stackoverflow.com/users/4616399/leopold-stotch"}, "edited": false, "score": 0, "creation_date": 1435770849, "post_id": 31167621, "comment_id": 50343181, "body": "Thank you, Serge, as well as everyone else. Much appreciated!"}], "tags": [], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "is_accepted": false, "score": 0, "last_activity_date": 1435770571, "creation_date": 1435770571, "answer_id": 31167621, "question_id": 31167517, "link": "https://stackoverflow.com/questions/31167517/random-number-addition-game-issue/31167621#31167621", "title": "Random Number (addition game) issue", "body": "<p>There are multiple issues with your program, including formatting. Here are the corrections:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n    int maxNumber, num1, num2, sum, answer, problems, i;\n\n    srand(time(NULL));\n\n    //printf(\"Would you like 1)Addition or 2)Multiplication?\\n\")\n    printf(\"Enter your Max Number:\");\n    scanf(\"%d\", &amp;maxNumber);\n\n    printf(\"How many problems do you want?\\n\");\n    scanf(\"%d\", &amp;problems);\n\n    // issue: i was not initialized\n    i = 0;\n    while(i != problems){\n        i++;\n        num1 = rand()%maxNumber;\n        num2 = rand()%maxNumber;\n\n        printf(\"What is %d + %d\\n\", num1, num2);\n        // issue: sum was not calculated here\n        sum = num1 + num2;\n        scanf(\"%d\", &amp;answer);\n\n        if(answer != sum){\n            printf(\"Sorry, that's incorrect, the answer is %d\\n\", sum);\n        }\n        else{\n            printf(\"Correct!\\n\");\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5068865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1a5bb1a96abdeb7bb34be094213d6f?s=128&d=identicon&r=PG", "display_name": "mblaettler", "link": "https://stackoverflow.com/users/5068865/mblaettler"}, "is_accepted": false, "score": 0, "last_activity_date": 1435770621, "creation_date": 1435770621, "answer_id": 31167632, "question_id": 31167517, "link": "https://stackoverflow.com/questions/31167517/random-number-addition-game-issue/31167632#31167632", "title": "Random Number (addition game) issue", "body": "<p>You define sum = num1 + num2, where num1 and num2 aren't assigned at all. C doesn't initialize numbers by default to zero. That's why you have such a big number.</p>\n\n<p>Just add <code>sum = num1 + num2</code> after <code>num2 = rand()%maxNumber;</code> and everything should work!</p>\n"}], "owner": {"reputation": 39, "user_id": 4616399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fef48019e0e0245e281215b90146ac27?s=128&d=identicon&r=PG&f=1", "display_name": "Leopold_Stotch", "link": "https://stackoverflow.com/users/4616399/leopold-stotch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 31167572, "answer_count": 4, "score": 0, "last_activity_date": 1435773965, "creation_date": 1435770144, "last_edit_date": 1435773965, "question_id": 31167517, "link": "https://stackoverflow.com/questions/31167517/random-number-addition-game-issue", "title": "Random Number (addition game) issue", "body": "<p>I'm making an addition/multiplication game for my intro to C class. The objective of the program is to ask the user, what's the max number that you want to use which will seed random numbers within that max range and how many different problems you want to do. When I run the program and do the math, it tells me that the sum is incorrect and provides me an answer that isn't correct and is usually a large number like \"1254323.\" Can you point me in the right direction as to what I am doing wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    int maxNumber, num1, num2, sum, answer, problems, i;\n\n    srand(time(NULL));\n\n    //printf(\"Would you like 1)Addition or 2)Multiplication?\\n\")\n    printf(\"Enter your Max Number:\");\n    scanf(\"%d\", &amp;maxNumber);\n\n    printf(\"How many problems do you want?\\n\");\n    scanf(\"%d\", &amp;problems);\n\n    sum = num1 + num2;\n\n    while(i != problems) {\n        num1 = rand()%maxNumber;\n        num2 = rand()%maxNumber;\n        i++;\n\n        printf(\"What is %d + %d\\n\",num1, num2);\n        scanf(\"%d\", &amp;answer);\n\n        if(answer != sum){\n            printf(\"Sorry, that's incorrect, the answer is %d\\n\", sum);\n        }\n\n        else{\n            printf(\"Correct!\\n\");\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gtk"], "answers": [{"tags": [], "owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "is_accepted": true, "score": 3, "last_activity_date": 1435770330, "creation_date": 1435770330, "answer_id": 31167564, "question_id": 31167452, "link": "https://stackoverflow.com/questions/31167452/error-too-few-arguments-to-gtk-widget-new/31167564#31167564", "title": "Error: too few arguments to gtk_widget_new()", "body": "<p>It is <code>window = gtk_window_new(GTK_WINDOW_TOPLEVEL)</code>, not <code>window = gtk_widget_new(GTK_WINDOW_TOPLEVEL)</code>.</p>\n"}], "owner": {"reputation": 399, "user_id": 3561521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/fde6787ceb4bcba19416b8520ca71a37?s=128&d=identicon&r=PG&f=1", "display_name": "Bati", "link": "https://stackoverflow.com/users/3561521/bati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 31167564, "answer_count": 1, "score": 0, "last_activity_date": 1435891181, "creation_date": 1435769960, "last_edit_date": 1435891181, "question_id": 31167452, "link": "https://stackoverflow.com/questions/31167452/error-too-few-arguments-to-gtk-widget-new", "title": "Error: too few arguments to gtk_widget_new()", "body": "<p>My O.S. is Ubuntu 12.04 (64 bit).</p>\n\n<p>I am having an error when I compiled my gtk+ program on command line terminal:</p>\n\n<blockquote>\n  <p>second.cpp:8:43: error: too few arguments to function \u2018GtkWidget* gtk_widget_new(GType, const gchar*, ...)\u2019\n  /usr/include/gtk-2.0/gtk/gtkwidget.h:834:12: note: declared here</p>\n</blockquote>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint main(int argc, char* argv[])\n{\n    gtk_init(&amp;argc, &amp;argv);\n\n    GtkWidget *window, *label;\n    window=gtk_widget_new(GTK_WINDOW_TOPLEVEL);\n    label=gtk_label_new(\"LabelName\");\n    g_signal_connect(window, \"delete-event\",G_CALLBACK(gtk_main_quit), NULL);\n    gtk_container_add(GTK_CONTAINER(window), label);\n    gtk_widget_show_all(window);\n    gtk_main();\n    return 0;\n}\n</code></pre>\n\n<p>Please help me to rectify the error, this program is executing good when I write the program without the label Widget.</p>\n"}, {"tags": ["c", "generics", "syntax"], "comments": [{"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435769876, "post_id": 31167347, "comment_id": 50342640, "body": "Pass an element from <code>arrs[i].arr[j]</code> to function <code>func_ptarrs[i]</code> @iharob"}], "answers": [{"comments": [{"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1435770046, "post_id": 31167423, "comment_id": 50342730, "body": "Um there&#39;s still an error: expression must be a pointer to a complete object type. It&#39;s on <code>arrs[i].arr</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1435770361, "post_id": 31167423, "comment_id": 50342889, "body": "@kuhaku Sorry, it was a mistake I just noticed it."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1435770451, "post_id": 31167423, "comment_id": 50342948, "body": "Can you please explain why it sends the right amount of bytes? How does it know the size without casting?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1435770477, "post_id": 31167423, "comment_id": 50342964, "body": "I don&#39;t understand your question, can you please be more specific?"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1435770666, "post_id": 31167423, "comment_id": 50343078, "body": "We have an element in in the array and its size is <code>elemsize</code>, we want to send that element using the above code, what I ask is how does: <code>((byte*) arrs[i].arr + j * arrs[i].elemsize)</code> sends <code>elemsize</code> bytes to the generic function? Why it isn&#39;t more or less than <code>elemsize</code> bytes?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 1, "creation_date": 1435771849, "post_id": 31167423, "comment_id": 50343769, "body": "@kuhaku It doesn&#39;t send <code>elemsize</code> bytes it sends the address to the <code>j</code>-th element if all elements are the same size. You can send the size explicitly if you need to. You just send the base address plus an offset, that&#39;s all, how it&#39;s accessed depends on the cast, so you must be very careful. In my experience I would avoid such construct."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1435770318, "last_edit_date": 1435770318, "creation_date": 1435769871, "answer_id": 31167423, "question_id": 31167347, "link": "https://stackoverflow.com/questions/31167347/passing-an-element-of-a-generic-array-to-a-generic-function/31167423#31167423", "title": "Passing an element of a generic array to a generic function", "body": "<p>You need this instead,</p>\n\n<pre><code>func_ptarrs[i](((byte*) arrs[i].arr + j * arrs[i].elemsize))\n</code></pre>\n\n<p>and I think it's pretty obvious why it would work.</p>\n\n<p>You could write accessor macros too, like</p>\n\n<pre><code>#define ARRAY_VALUE(type, x, i (*(type *) ((x).arr + (i) * (x).elemsize))\n</code></pre>\n\n<p>which you can then use like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ARRAY_VALUE(type, x, i) (*(type *) ((x).arr + (i) * (x).elemsize))\n\ntypedef struct genarr\n{\n    void * arr;\n    int elemsize;\n    int numelem;\n} GENARR;\n\nint main (void)\n{\n    GENARR array;\n    int    data[10];\n\n    array.arr = data;\n    array.elemsize = sizeof(*data);\n    array.numelem = sizeof(data) / array.elemsize;\n\n    for (int i = 0 ; i &lt; array.numelem ; ++i)\n        ARRAY_VALUE(int, array, i) = i;\n    for (int i = 0 ; i &lt; array.numelem ; ++i)\n        printf(\"%d\\n\", ARRAY_VALUE(int, array, i));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 31167423, "answer_count": 1, "score": 0, "last_activity_date": 1435770318, "creation_date": 1435769629, "question_id": 31167347, "link": "https://stackoverflow.com/questions/31167347/passing-an-element-of-a-generic-array-to-a-generic-function", "title": "Passing an element of a generic array to a generic function", "body": "<p>We have an array with pointers to generic arrays, and an array of generic functions, we want to apply to each element in array <code>i</code> the function <code>i</code> from <code>func_ptarrs</code>.</p>\n\n<pre><code>typedef struct genarr{\n    void * arr;\n    int elemsize;\n    int numelem;\n}GENARR;\n\ntypedef void(*funcptr)(void*);\n\ntypedef unsigned char byte;\n\nvoid updateall(GENARR *arrs, funcptr *func_ptarrs, int n){\n\n    int j,i;\n    for (i = 0; i &lt; n; i++){\n        for (j = 0; j &lt; arrs[i].numelem; j++){\n\n            func_ptarrs[i]((arrs[i].((byte*)(arr + j*arrs[i].elemsize)))); //error: expected member name\n\n            //func_ptarrs[i]((arrs[i].arr)); //no error\n        }\n    }\n}\n</code></pre>\n\n<p>In the second try it's pointer to the beginning of the array so it's accepted, but  I need to be able to send each element of the array to the generic function.</p>\n\n<p>I don't understand how to send the right amount of bytes and move correctly in array all while sending pointers of the elements to the generic functions.</p>\n\n<p>Maybe I should use <code>memcpy</code>?</p>\n"}, {"tags": ["c", "gcc", "optimization", "loop-unrolling"], "comments": [{"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 5, "creation_date": 1435768907, "post_id": 31167051, "comment_id": 50342117, "body": "@Olaf how is this not a specific question? OP&#39;s clearly asking how gcc (a specific C compiler) is able to know how to unroll a loop if its bounds are unknown."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1435768957, "post_id": 31167051, "comment_id": 50342146, "body": "@Olaf How is it too broad if I want to know what a specific compiler option does?"}, {"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1435768990, "post_id": 31167051, "comment_id": 50342161, "body": "@paulsm4 I don&#39;t think so. If the compiler knows the bounds already, then the decision comes down to how much to actually unroll it. This question isn&#39;t asking that."}, {"owner": {"reputation": 80605, "user_id": 1281433, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/O8XCE.png?s=128&g=1", "display_name": "Joshua Taylor", "link": "https://stackoverflow.com/users/1281433/joshua-taylor"}, "edited": false, "score": 1, "creation_date": 1435769070, "post_id": 31167051, "comment_id": 50342199, "body": "You may find the discussion about Duff&#39;s Device in <a href=\"http://stackoverflow.com/a/17192335/1281433\">my answer</a> to <a href=\"http://stackoverflow.com/q/17192246/1281433\">Switch case weird scoping</a> helpful.  (Other posters are mentioning Duff&#39;s Device, too.)"}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1435768875, "creation_date": 1435768875, "answer_id": 31167113, "question_id": 31167051, "link": "https://stackoverflow.com/questions/31167051/how-can-gcc-unroll-a-loop-if-its-number-of-iterations-is-unknown-at-compile-time/31167113#31167113", "title": "How can GCC unroll a loop if its number of iterations is unknown at compile time?", "body": "<p>You can't assume that there's such a thing as <em>corresponding C code</em> for a compiler's intermediate representation.  But in this case, I'd expect the nearest equivalent to be something like <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow\">Duff's Device</a>, which is a sequence (usually in a loop) that can be entered at a computed location.</p>\n"}, {"tags": [], "owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "is_accepted": false, "score": 2, "last_activity_date": 1435769964, "last_edit_date": 1435769964, "creation_date": 1435769005, "answer_id": 31167152, "question_id": 31167051, "link": "https://stackoverflow.com/questions/31167051/how-can-gcc-unroll-a-loop-if-its-number-of-iterations-is-unknown-at-compile-time/31167152#31167152", "title": "How can GCC unroll a loop if its number of iterations is unknown at compile time?", "body": "<p>It can do something like:</p>\n\n<pre><code>while(n &gt;= 8){\n  foo(); foo(); foo(); foo(); foo(); foo(); foo(); foo(); \n  n -= 8;\n}\nwhile(n &gt; 0){\n  foo();\n  n--;\n}\n</code></pre>\n\n<p>Of course, Duff's Device would save having to write the second loop.</p>\n\n<p>Why do it? That's up to the user.\nIf <code>foo()</code> spends more than a few cycles, <em>or</em> if the original loop takes less that 5% of overall wall-clock time, <em>or</em> if <code>n</code> is typically small, it's probably not worth the trouble.</p>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "is_accepted": false, "score": 3, "last_activity_date": 1435857483, "last_edit_date": 1435857483, "creation_date": 1435769264, "answer_id": 31167242, "question_id": 31167051, "link": "https://stackoverflow.com/questions/31167051/how-can-gcc-unroll-a-loop-if-its-number-of-iterations-is-unknown-at-compile-time/31167242#31167242", "title": "How can GCC unroll a loop if its number of iterations is unknown at compile time?", "body": "<p>Here's some C code showing how to do it:</p>\n\n<pre><code>int iterations = 100;\nint unrollValue = 8;\n\nwhile (iterations%unrollvalue)\n{\n   // insert loop code here\n   iterations--;\n}\n\nwhile (iterations)\n{\n   // insert unrollValue copies of loop code here\n   iterations-= unrollValue;\n}\n</code></pre>\n\n<p>The compiler will replace the first loop with a relative jump, but that's not easy to represent in C.  Note that unrolling by a power of 2 allows the compiler to use a mask instead of the (expensive) divide operation.</p>\n"}, {"comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1435769712, "post_id": 31167320, "comment_id": 50342550, "body": "Of course, with a <code>printf</code> in there, the benefit is basically zero ;-)"}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 3, "last_activity_date": 1435770027, "last_edit_date": 1435770027, "creation_date": 1435769534, "answer_id": 31167320, "question_id": 31167051, "link": "https://stackoverflow.com/questions/31167051/how-can-gcc-unroll-a-loop-if-its-number-of-iterations-is-unknown-at-compile-time/31167320#31167320", "title": "How can GCC unroll a loop if its number of iterations is unknown at compile time?", "body": "<blockquote>\n  <p>in what contexts could this be useful if it usually makes the programs run more slowly?</p>\n</blockquote>\n\n<p>Well they are assuming if you choose this option you know what you are doing, if you don't you should not use this option.</p>\n\n<p>what is gcc going to do, well I used this sample program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid f(int j )\n{\n  for( int k = 0; k &lt; j; ++k )\n  {\n    printf( \"%d\\n\", k ) ;\n  }\n}\n</code></pre>\n\n<p>and tested it with godbolt and it generates a jump table based on the number of iterations left (<em><a href=\"http://goo.gl/J0AiG5\" rel=\"nofollow\">see it live</a></em>):</p>\n\n<pre><code>cmpl    $1, %ebp\nmovl    $1, %ebx\nje  .L1\ntestl   %r12d, %r12d\nje  .L27\ncmpl    $1, %r12d\nje  .L28\ncmpl    $2, %r12d\nje  .L29\ncmpl    $3, %r12d\nje  .L30\ncmpl    $4, %r12d\nje  .L31\ncmpl    $5, %r12d\nje  .L32\ncmpl    $6, %r12d\nje  .L33\n</code></pre>\n"}], "owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2317, "favorite_count": 0, "accepted_answer_id": 31167320, "answer_count": 4, "score": 13, "last_activity_date": 1438671300, "creation_date": 1435768642, "last_edit_date": 1438671300, "question_id": 31167051, "link": "https://stackoverflow.com/questions/31167051/how-can-gcc-unroll-a-loop-if-its-number-of-iterations-is-unknown-at-compile-time", "title": "How can GCC unroll a loop if its number of iterations is unknown at compile time?", "body": "<p>I was reading the <a href=\"http://tigcc.ticalc.org/doc/comopts.html#SEC10\" rel=\"nofollow\">optimization options for GCC</a> when I found the option <code>-funroll-all-loops</code>.</p>\n\n<p>Its description reads:</p>\n\n<blockquote>\n  <p>Unroll all loops, even if their number of iterations is uncertain when\n  the loop is entered. This usually makes programs run more slowly.\n  '-funroll-all-loops' implies the same options as '-funroll-loops'</p>\n</blockquote>\n\n<p>How can the compiler unroll a loop if its number of iterations is unknown at compile time? Doesn't the compiler need this information to unroll it? What corresponding C code does it generate, and in what contexts could this be useful if it usually makes the programs run more slowly?</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86-64", "gnu-assembler"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "edited": false, "score": 1, "creation_date": 1435768937, "post_id": 31166773, "comment_id": 50342137, "body": "Debug. Optimization is the debugger worst enemy. All those redundant, well documented lines make debugging assembly as easy as debugging C. For the second question, C programs use the C run time, they need to obey an ABI and may use OS specific features."}, {"owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435770919, "post_id": 31166773, "comment_id": 50343227, "body": "@WeatherVane My intent was not to suggest that this program either made sense or was useful in any way, I am just using it as a tool for learning assembly and how the compiler works."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435771205, "post_id": 31166773, "comment_id": 50343427, "body": "@Kin3TiX sorry, deleted my crass remark."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1435768733, "post_id": 31166892, "comment_id": 50342021, "body": "An exception frame sounds more like C++, as C does not have exceptions. But that may be really just a common template for both languages."}, {"owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "edited": false, "score": 0, "creation_date": 1435771004, "post_id": 31166892, "comment_id": 50343301, "body": "Not trying to suggest that I was able to &quot;optimize&quot; this example...just trying to understand why I can strip that assembly down to so few lines and still have it work.  It makes me wonder what all the other stuff is doing in there, which was the crux of my question."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1435778133, "post_id": 31166892, "comment_id": 50347398, "body": "Then put all code that you are interested in in separate functions, and compile that with high optimization. For the startup and main code sometimes other rules and tradeoffs exists and that might skew what happens, as you found out."}], "tags": [], "owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "is_accepted": false, "score": 0, "last_activity_date": 1435768073, "last_edit_date": 1495542577, "creation_date": 1435768073, "answer_id": 31166892, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent/31166892#31166892", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p>I think that part is just a fixed pattern that sets up a 16-byte aligned stack and the CFI is <a href=\"https://stackoverflow.com/questions/2529185/what-are-cfi-directives-in-gnu-assembler-gas-used-for\">exception frame</a> handling related.</p>\n\n<p>Determining that those are not needed for any main() is hard since that is a global optimization because main might call functions in other compilation units.</p>\n\n<p>And it is probably not worthwhile spending the time to optimize this trivial and fairly useless case.</p>\n\n<p>If you feel otherwise, you can always start working on such an optimization and submit it to gcc.</p>\n"}, {"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 1, "last_activity_date": 1435769592, "creation_date": 1435769592, "answer_id": 31167333, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent/31167333#31167333", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p>First off, the CFI stuff is there for debugging purposes (and, in C++, exception handling). It tells the debugger what the stack frame looks like at each instruction, so that the debugger can reconstruct the state of the program's variables. Those don't result in executable statements, and will have zero effect on a program's runtime performance.</p>\n\n<p>I don't know what the call to <code>__main</code> is doing there - my GCC doesn't do that. In fact, my GCC (4.9.2) gives me the following for <code>gcc test.c -S -O1</code>:</p>\n\n<pre><code>    .section __TEXT,__text_startup,regular,pure_instructions\n    .globl _main\n_main:\nLFB0:\n    movl    $15, %eax\n    ret\nLFE0:\n    .section __TEXT,__eh_frame,coalesced,no_toc+strip_static_syms+live_support\nEH_frame1:\n    .set L$set$0,LECIE1-LSCIE1\n    .long L$set$0\nLSCIE1:\n    .long   0\n    .byte   0x1\n    .ascii \"zR\\0\"\n    .byte   0x1\n    .byte   0x78\n    .byte   0x10\n    .byte   0x1\n    .byte   0x10\n    .byte   0xc\n    .byte   0x7\n    .byte   0x8\n    .byte   0x90\n    .byte   0x1\n    .align 3\nLECIE1:\nLSFDE1:\n    .set L$set$1,LEFDE1-LASFDE1\n    .long L$set$1\nLASFDE1:\n    .long   LASFDE1-EH_frame1\n    .quad   LFB0-.\n    .set L$set$2,LFE0-LFB0\n    .quad L$set$2\n    .byte   0\n    .align 3\nLEFDE1:\n    .subsections_via_symbols\n</code></pre>\n\n<p>and would you look at that, <code>_main</code> is exactly the two-instruction sequence you expected. (The <code>__eh_frame</code> stuff is more debugging information in a different format).</p>\n"}, {"comments": [{"owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "edited": false, "score": 0, "creation_date": 1435784669, "post_id": 31167930, "comment_id": 50351007, "body": "The interactive compiler is incredibly helpful.  In particular, the colorize feature has allowed me to directly see which assembly instructions are generated directly from the lines of my source.  The other answers have subsequently helped me isolate all the other &quot;stuff&quot; that ends up in there."}, {"owner": {"reputation": 8781, "user_id": 1426969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IMidj.jpg?s=128&g=1", "display_name": "NlightNFotis", "link": "https://stackoverflow.com/users/1426969/nlightnfotis"}, "reply_to_user": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "edited": false, "score": 0, "creation_date": 1435784706, "post_id": 31167930, "comment_id": 50351042, "body": "@Kin3TiX Glad that I have been of help."}], "tags": [], "owner": {"reputation": 8781, "user_id": 1426969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IMidj.jpg?s=128&g=1", "display_name": "NlightNFotis", "link": "https://stackoverflow.com/users/1426969/nlightnfotis"}, "is_accepted": false, "score": 5, "last_activity_date": 1435771661, "creation_date": 1435771661, "answer_id": 31167930, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent/31167930#31167930", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p><code>.cfi</code> (call frame information) directives are used in <code>gas</code> (Gnu ASsembler) mainly for debugging. They allow the debugger to unwind the stack. To disable them, you can use the following parameter when you invoke the compilation driver <code>-fno-asynchronous-unwind-tables</code>.</p>\n\n<p>If you want to play with the compiler in general, you can use the following compilation driver invocation command <code>-o &lt;filename.S&gt; -S -masm=intel -fno-asynchronous-unwind-tables &lt;filename.C&gt;</code> or just use <a href=\"http://gcc.godbolt.org/\" rel=\"noreferrer\">godbolt's interactive compiler</a></p>\n"}, {"comments": [{"owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "edited": false, "score": 0, "creation_date": 1435783768, "post_id": 31168214, "comment_id": 50350491, "body": "I did have a capital -O...?  Regardless, I think your answer explains the __main to me.  I ran this on Cygwin (at work so I&#39;m not on my Linux box atm), so that would support your comment about running on an emulated or hooked environment."}], "tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1435772696, "creation_date": 1435772696, "answer_id": 31168214, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent/31168214#31168214", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p>The <code>-o0</code> option directs the output to a file named <code>0</code>.  Maybe you meant the optimization level (which is capital <em>O</em>)?:  that disables optimizations.</p>\n\n<p>I don't understand why there would be a call to <code>____main</code> unless this was produced for some emulated or hooked environment.  When I compile with <code>gcc -O0 -c -S t.c</code>, I get:</p>\n\n<pre><code>        .file   \"t.c\"\n        .text\n.globl main\n        .type   main, @function\nmain:\n.LFB0:\n        .cfi_startproc\n        pushq   %rbp\n        .cfi_def_cfa_offset 16\n        .cfi_offset 6, -16\n        movq    %rsp, %rbp\n        .cfi_def_cfa_register 6\n        movb    $5, -2(%rbp)\n        movb    $10, -1(%rbp)\n        movsbl  -2(%rbp), %edx\n        movsbl  -1(%rbp), %eax\n        leal    (%rdx,%rax), %eax\n        leave\n        .cfi_def_cfa 7, 8\n        ret\n        .cfi_endproc\n.LFE0:\n        .size   main, .-main\n        .ident  \"GCC: (GNU) 4.4.7 20120313 (Red Hat 4.4.7-11)\"\n        .section        .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>Perhaps you were expecting a high level of optimization?  This is what I get with <code>gcc -O3 -c -S t.c</code>:</p>\n\n<pre><code>        .file   \"t.c\"\n        .text\n        .p2align 4,,15\n.globl main\n        .type   main, @function\nmain:\n.LFB0:\n        .cfi_startproc\n        movl    $15, %eax\n        ret\n        .cfi_endproc\n.LFE0:\n        .size   main, .-main\n        .ident  \"GCC: (GNU) 4.4.7 20120313 (Red Hat 4.4.7-11)\"\n        .section        .note.GNU-stack,\"\",@progbits\n</code></pre>\n\n<p>Except for the debug information, it is about as short as it can be.  The same code is produced for <code>gcc -O2 -c -S t.c</code> and <code>gcc -O1 -c -S t.c</code>.  That is, the slightest optimization evaluates all the constants at compile time.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1555161226, "post_id": 31193524, "comment_id": 98018351, "body": "update on this, <code>.cfi</code> isn&#39;t strictly debug info, and isn&#39;t stripped.  It&#39;s stack-unwind info that says which call-preserved register is saved where.  See also <a href=\"//stackoverflow.com/q/38552116\">How to remove &quot;noise&quot; from GCC/clang assembly output?</a> for more about removing &quot;noise&quot; like .cfi directives that you normally don&#39;t care about."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 9, "last_activity_date": 1603953146, "last_edit_date": 1603953146, "creation_date": 1435866878, "answer_id": 31193524, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent/31193524#31193524", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p>Thank you, Kin3TiX, for asking an asm-newbie question that wasn't just a code-dump of some nasty code with no comments, and a really simple problem. :)</p>\n<p>As a way to get your feet wet with ASM, I'd suggest working with functions OTHER than <code>main</code>.  e.g. just a function that takes two integer args, and adds them.  Then the compiler can't optimize it away.  You can still call it with constants as args, and if it's in a different file from <code>main</code>, it won't get inlined, so you can even single-step through it.</p>\n<p>There's some benefit to understanding what's going on at the asm level when you compile <code>main</code>, but other than embedded systems, you're only ever going to write optimized inner loops in asm.  IMO, there's little point using asm if you aren't going to optimize the hell out of it.  Otherwise you probably won't beat compiler output from source which is much easier to read.</p>\n<p>Other tips for understanding compiler output: compile with<br />\n<code>gcc -S -fno-stack-check -fverbose-asm</code>.  The comments after each instruction are often nice reminders of what that load was for.  Pretty soon it degenerates into a mess of temporaries with names like <code>D.2983</code>, but something like<br />\n<code>movq    8(%rdi), %rcx   # a_1(D)-&gt;elements, a_1(D)-&gt;elements</code> will save you a round-trip to the ABI reference to see which function arg comes in in <code>%rdi</code>, and which struct member is at offset 8.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output\">How to remove &quot;noise&quot; from GCC/clang assembly output?</a></p>\n<hr />\n<blockquote>\n<p>What do the lines spanning from .cfi_startproc to call__main even do?</p>\n</blockquote>\n<pre><code>    _main:\nLFB0:\n    .cfi_startproc\n    pushl   %ebp\n    .cfi_def_cfa_offset 8\n    .cfi_offset 5, -8\n    movl    %esp, %ebp\n    .cfi_def_cfa_register 5\n</code></pre>\n<p><code>.cfi</code> stuff is stack-unwind info for debuggers (and C++ exception handling) to unwind the stack\nIt won't be there if you look at asm from <code>objdump -d</code> output instead of <code>gcc -S</code>, or you can use <code>-fno-asynchronous-unwind-tables</code>.</p>\n<p>The stuff with pushing <code>%ebp</code> and then setting it to the value of the stack pointer on function entry sets up what's called a &quot;stack frame&quot;.  This is why <code>%ebp</code> is called the base pointer.  These insns won't be there if you compile with <code>-fomit-frame-pointer</code>, which gives code an extra register to work with.  That's on by default at <code>-O2</code>.  (This is huge for 32bit x86, since that takes you from 6 to 7 usable regs.  (<code>%esp</code> is still tied up being the stack pointer;  stashing it temporarily in an xmm or mmx reg and then using it as another GP reg is possible in theory, but compilers will never do that and it makes async stuff like POSIX signals or Windows SEH unusable, as well as making debugging harder.)</p>\n<p>The <code>leave</code> instruction before the <code>ret</code> is also part of this stack frame stuff.</p>\n<p>Frame pointers are mostly historical baggage, but do make offsets into the stack frame consistent.  With debug symbols, you can backtrace the call stack just fine even with <code>-fomit-frame-pointer</code>, and it's the default for amd64.  (The amd64 ABI has alignment requirements for the stack, is a LOT better in other ways, too.  e.g. passes args in regs instead of on the stack.)</p>\n<pre><code>    andl    $-16, %esp\n    subl    $16, %esp\n</code></pre>\n<p>The <code>and</code> aligns the stack to a 16-byte boundary, regardless of what it was before.  The <code>sub</code> reserves 16 bytes on the stack for this function.  (Notice how it's missing from the optimized version, because it optimizes away any need for memory storage of any variables.)</p>\n<pre><code>    call    ___main\n</code></pre>\n<p><code>__main</code> (asm name = <code>___main</code>) is part of cygwin: it calls constructor / init functions for shared libraries (including libc).  On GNU/Linux, this is handled by <code>_start</code> (before main is reached) and even dynamic-linker hooks that let libc initialize itself before the executable's own <code>_start</code> is even reached.  I've read that dynamic-linker hooks (or <code>_start</code> from a static executable) instead of code in <code>main</code> <em>would</em> be possible under Cygwin, but they simply choose not to do it that way.</p>\n<p>(This <a href=\"https://gcc.gnu.org/ml/gcc-help/2007-09/msg00110.html\" rel=\"nofollow noreferrer\">old mailing list message</a> indicates <code>_main</code> is for constructors, but that main shouldn't have to call it on platforms that support getting the startup code to call it.)</p>\n<pre><code>    movb    $5, 15(%esp)\n    movb    $10, 14(%esp)\n    movsbl  15(%esp), %edx\n    movsbl  14(%esp), %eax\n    addl    %edx, %eax\n    leave\n    ret\n</code></pre>\n<blockquote>\n<p>Why is the initial output of GCC so much more verbose?</p>\n</blockquote>\n<p>Without optimizations enabled, gcc maps C statements as literally as possible into asm.  Doing anything else would take more compile time.  Thus, <code>movb</code> is from the initializers for your two variables.  The return value is computed by doing two loads (with sign extension, because we need to upconvert to int BEFORE the add, to match the semantics of the C code as written, as far as overflow).</p>\n<blockquote>\n<p>I cannot figure what the two subtraction operations are for.</p>\n</blockquote>\n<p>There is only one <code>sub</code> instruction.  It reserves space on the stack for the function's variables, before the call to <code>__main</code>.  Which other sub are you talking about?</p>\n<blockquote>\n<p>What do .section, .ident, .def .p2align, etc. etc. do?</p>\n</blockquote>\n<p>See the <a href=\"https://sourceware.org/binutils/docs/as/\" rel=\"nofollow noreferrer\">manual for the GNU assembler</a>.  Also available locally as info pages:  run <code>info gas</code>.</p>\n<p><code>.ident</code> and <code>.def</code>: Looks like gcc putting its stamp on the object file, so you can tell what compiler / assembler produced it.  Not relevant, ignore these.</p>\n<p><code>.section</code>: determines what section of the ELF object file the bytes from all following instructions or data directives (e.g. <code>.byte 0x00</code>) go into, until the next <code>.section</code> assembler directive.  Either <code>code</code> (read-only, shareable), <code>data</code> (initialized read/write data, private), or <code>bss</code> (block storage segment.  zero-initialized, doesn't take any space in the object file).</p>\n<p><code>.p2align</code>: Power of 2 Align.  Pad with nop instructions until the desired alignment.  <code>.align 16</code> is the same as <code>.p2align 4</code>.  Jump instruction are faster when the target is aligned, because of instruction fetch in chunks of 16B, not crossing a page boundary, or just not crossing a cache-line boundary.  (32B alignment is relevant when code is already in the uop cache of an Intel Sandybridge and later.)  See <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">Agner Fog's docs</a>, for example.</p>\n<blockquote>\n<p>The core of why I added this bit is to illustrate why I am confused\nthat the 4 line version of this assembly code can effectively achieve\nthe same effect as the others. It seems to me that GCC has added alot\nof &quot;stuff&quot; whose purpose I cannot discern.</p>\n</blockquote>\n<p>Put the code of interest in a function by itself.  A lot of things are special about <code>main</code>.</p>\n<p>You are correct that a <code>mov</code>-immediate and a <code>ret</code> are all that's needed to implement the function, but gcc apparently doesn't have shortcuts for recognizing trivial whole-programs and omitting <code>main</code>'s stack frame or the call to <code>_main</code>.  &gt;.&lt;</p>\n<p>Good question, though.  As I said, just ignore all that crap and worry about just the small part you want to optimize.</p>\n"}], "owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1364, "favorite_count": 2, "accepted_answer_id": 31193524, "answer_count": 5, "score": 9, "last_activity_date": 1616051642, "creation_date": 1435767700, "last_edit_date": 1616051642, "question_id": 31166773, "link": "https://stackoverflow.com/questions/31166773/gcc-assembly-optimizations-why-are-these-equivalent", "title": "GCC Assembly Optimizations - Why are these equivalent?", "body": "<p>I am trying to learn how assembly works at an elementary level and so I have been playing with the <code>-S</code> output of gcc compilations.  I wrote a simple program that defines two bytes and returns their sum.  The entire program follows:</p>\n<pre><code>int main(void) {\n  char A = 5;\n  char B = 10;\n  return A + B;\n}\n</code></pre>\n<p>When I compile this with no optimizations using:</p>\n<pre><code>gcc -O0 -S -c test.c\n</code></pre>\n<p>I get test.s that looks like the following:</p>\n<pre><code>    .file   &quot;test.c&quot;\n    .def    ___main;    .scl    2;  .type   32; .endef\n    .text\n    .globl  _main\n    .def    _main;  .scl    2;  .type   32; .endef\n_main:\nLFB0:\n    .cfi_startproc\n    pushl   %ebp\n    .cfi_def_cfa_offset 8\n    .cfi_offset 5, -8\n    movl    %esp, %ebp\n    .cfi_def_cfa_register 5\n    andl    $-16, %esp\n    subl    $16, %esp\n    call    ___main\n    movb    $5, 15(%esp)\n    movb    $10, 14(%esp)\n    movsbl  15(%esp), %edx\n    movsbl  14(%esp), %eax\n    addl    %edx, %eax\n    leave\n    .cfi_restore 5\n    .cfi_def_cfa 4, 4\n    ret\n    .cfi_endproc\nLFE0:\n    .ident  &quot;GCC: (GNU) 4.9.2&quot;\n</code></pre>\n<p>Now, recognizing that this program can very easily be simplified to just return a constant (15) I have been able to reduce the assembly by hand to perform the same function using this code:</p>\n<pre><code>.global _main\n_main:\n    movl    $15, %eax\n    ret\n</code></pre>\n<p>This appears to me to be the least amount of code possible (but I realize could be quite wrong) to perform this admittedly trivial task.  Is this form the most &quot;optimized&quot; version of my C program?</p>\n<p><strong>Why is the initial output of GCC so much more verbose?  What do the lines spanning from <code>.cfi_startproc</code> to <code>call __main</code> even do?  What does <code>call __main</code> do?  I cannot figure what the two subtraction operations are for.</strong></p>\n<p>Even with optimizations in GCC set to <code>-O3</code> I get this:</p>\n<pre><code>    .file   &quot;test.c&quot;\n    .def    ___main;    .scl    2;  .type   32; .endef\n    .section    .text.unlikely,&quot;x&quot;\nLCOLDB0:\n    .section    .text.startup,&quot;x&quot;\nLHOTB0:\n    .p2align 4,,15\n    .globl  _main\n    .def    _main;  .scl    2;  .type   32; .endef\n_main:\nLFB0:\n    .cfi_startproc\n    pushl   %ebp\n    .cfi_def_cfa_offset 8\n    .cfi_offset 5, -8\n    movl    %esp, %ebp\n    .cfi_def_cfa_register 5\n    andl    $-16, %esp\n    call    ___main\n    movl    $15, %eax\n    leave\n    .cfi_restore 5\n    .cfi_def_cfa 4, 4\n    ret\n    .cfi_endproc\nLFE0:\n    .section    .text.unlikely,&quot;x&quot;\nLCOLDE0:\n    .section    .text.startup,&quot;x&quot;\nLHOTE0:\n    .ident  &quot;GCC: (GNU) 4.9.2&quot;\n</code></pre>\n<p>Which seems to have removed a number of operations, but still leaves all the lines leading to <code>call __main</code> that seems unnecessary.  <strong>What are all the <code>.cfi_XXX</code> lines for?  Why are so many labels added?  What do <code>.section</code>, <code>.ident</code>, <code>.def .p2align</code>, etc. do?</strong></p>\n<p>I understand that many of the labels and symbols are included for debugging, but shouldn't these be stripped or omitted if I am not compiling with -g enabled?</p>\n<hr />\n<p><strong>UPDATE</strong></p>\n<p>To clarify, by saying</p>\n<blockquote>\n<p>This appears to me to be the least amount of code possible (but I\nrealize could be quite wrong) to perform this admittedly trivial task.\nIs this form the most &quot;optimized&quot; version of my C program?</p>\n</blockquote>\n<p>I am not suggesting that I am trying to, or have achieved, an optimized version of this program.  I realize the program is useless and trivial.  I am just using it as a tool to learn assembly and how the compiler works.</p>\n<p>The core of why I added this bit is to illustrate why I am confused that the 4 line version of this assembly code can effectively achieve the same effect as the others.  It seems to me that GCC has added a lot of &quot;stuff&quot; whose purpose I cannot discern.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1435767090, "post_id": 31166448, "comment_id": 50341056, "body": "You&#39;ll probably need <code>fopen(&quot;Phone Book.txt&quot;, &quot;a&quot;)</code> if you want to append a record to an existing file. Note <code>&quot;a&quot;</code> instead of <code>&quot;w&quot;</code> which will destroy the existing file."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1435767403, "post_id": 31166448, "comment_id": 50341238, "body": "I see you are using the dreaded <code>feof()</code>, please read the man page as your usage will fail, also <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>. Better to use <code>while (fgets(...) != NULL)</code> and strip the trailing linefeeds."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1435767562, "post_id": 31166448, "comment_id": 50341339, "body": "<code>if (s-&gt;name == name)</code> is wrong, it compare pointers. You need <code>if(strcmp(s&gt;name, name)==0)</code> to compare the string contents. I suspect I&#39;ll find plenty more errors if I look further."}, {"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 0, "creation_date": 1435768114, "post_id": 31166448, "comment_id": 50341661, "body": "and <code>fclose(ptrFile)</code> your files please!"}, {"owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "edited": false, "score": 0, "creation_date": 1435768363, "post_id": 31166448, "comment_id": 50341817, "body": "just a side note, those curly bracers for the switch cases are not necessary and saves you some lines of code!"}, {"owner": {"reputation": 49, "user_id": 5034503, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/75aaff3e17057cb4170f2fdc1d15c527?s=128&d=identicon&r=PG&f=1", "display_name": "NoWeDoR", "link": "https://stackoverflow.com/users/5034503/nowedor"}, "edited": false, "score": 0, "creation_date": 1435768819, "post_id": 31166448, "comment_id": 50342073, "body": "I&#39;ve corrected the mistakes that you said and I edited my codes at topic. Well, how can I read the specific line and print it? Thanks for interest"}, {"owner": {"reputation": 979, "user_id": 2557939, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b94700bb2884a8b47497b1d23b5d7da8?s=128&d=identicon&r=PG", "display_name": "Nithin Jose", "link": "https://stackoverflow.com/users/2557939/nithin-jose"}, "edited": false, "score": 1, "creation_date": 1435769169, "post_id": 31166448, "comment_id": 50342250, "body": "Add to display function <code>s = (struct personKnowledge *)malloc(sizeof(struct personKnowledge));</code>"}, {"owner": {"reputation": 979, "user_id": 2557939, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b94700bb2884a8b47497b1d23b5d7da8?s=128&d=identicon&r=PG", "display_name": "Nithin Jose", "link": "https://stackoverflow.com/users/2557939/nithin-jose"}, "edited": false, "score": 1, "creation_date": 1435770037, "post_id": 31166448, "comment_id": 50342724, "body": "remove the duplicate <code>fclose(ptrFILE);</code> in <code>newRecord</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435770324, "post_id": 31166448, "comment_id": 50342874, "body": "1) always compile with all warnings enabled, then fix those warnings.  2) function &#39;gets()&#39; has been removed from the C language, due to its&#39; many problems, use &#39;fgets()&#39; instead   3) function &#39;feof()&#39; returns true or false, never NULL and feof() should &#39;never&#39; be used to control a loop.  Suggest using the fscanf() to control the loop  4) when performing an file open or input operations, always check the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435770533, "post_id": 31166448, "comment_id": 50342994, "body": "when calling the scanf() (and family of functions) always check the returned value (not the parameter value) to assure the operation was successful.  Note &#39;case&#39; statements are delimited by the &#39;case&#39; and the next &#39;case&#39; so wrapping the following statements in braces &#39;{&#39; and &#39;}&#39; just clutters the code and is only ever needed if using an older version of C and some &#39;auto&#39; variable is to be generated for that case.  The &#39;default&#39; case should also be terminated via a &#39;break;&#39; statement."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435770867, "post_id": 31166448, "comment_id": 50343198, "body": "in function: newRecord(), fclose() is being called even if the file failed to open via the fopen() call.    this line: &#39;if ((ptrFILE = fopen(&quot;Phone Book.txt&quot;, &quot;w&quot;)) == NULL)&#39; truncates the output file every time it is called.  suggest the opening mode be &quot;a&quot; so each call to fopen() appends to the file rather than replacing the file"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435770950, "post_id": 31166448, "comment_id": 50343251, "body": "when calling malloc() (and family of functions) always check (!=NULL) the returned value to assure the operation was successful.    in C, do not cast the returned value from malloc() (and family of functions)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435771053, "post_id": 31166448, "comment_id": 50343331, "body": "the C standard specifically states that &#39;fflush( stdin );&#39; is not part of the language (although some implementations allow it)  rather use: while( int ch = getchar() &amp;&amp; &#39;\\n&#39; != ch &amp;&amp; EOF != ch );"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435771192, "post_id": 31166448, "comment_id": 50343420, "body": "the function &#39;Sleep()&#39; and &#39;sleep()&#39; are depreciated.  suggest using &#39;nanosleep()&#39; found in &#39;time.h&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435771402, "post_id": 31166448, "comment_id": 50343554, "body": "always check the returned value from fseek() to assure the operation was successful.  in function: &#39;display()&#39;  a call is made to fclose on a file that might not be open.  suggest moving the call to fclose to inside the &#39;else&#39; code block."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435771864, "post_id": 31166448, "comment_id": 50343775, "body": "there are lots of other problems in the code, for instance, when a file is first opened, the file pointer will be at the beginning of the file, so an immediate call to fseek() to the first character in the file is a total waste of time and resources.  in the display() function, there is a lot more characters than just the name.  suggest reading a struct personknowledge number of characters so read the whole struct then compare with the one field."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435772160, "post_id": 31166448, "comment_id": 50343922, "body": "&#39;magic&#39; numbers should not be in the code,  They make understanding difficult and maintenance a nightmare.  Suggest #defining the &#39;magic&#39; numbers, similar to &#39;#define MAX_FIRST_NAME_LEN (16)&#39;  and then use the #define name when ever referring to the length of the first name field"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1435772516, "post_id": 31166448, "comment_id": 50344096, "body": "this kind of line: &#39;while (!feof == NULL)&#39; is comparing the address of the feof() function with NULL and only continuing in the loop if the address is NULL. However, the address is NEVER NULL and due to operator precedence, the line would not be evaluated like you seem to expect.. feof() is a function, so, if (and that is a big IF) the feof() function were to be used to control a loop (which it should not be) then the proper line is: &#39;while( !feof( ptrFILE ) )&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 2, "last_activity_date": 1435770037, "last_edit_date": 1495539870, "creation_date": 1435769228, "answer_id": 31167224, "question_id": 31166448, "link": "https://stackoverflow.com/questions/31166448/how-can-i-read-data-from-file/31167224#31167224", "title": "How can I read data from file?", "body": "<p>In answer to one of your questions, I recommend rewriting this loop in <code>display()</code></p>\n\n<pre><code>while (!feof == NULL)                   // wrong way to use feof\n{\n    fscanf(ptrFILE,\"%s\", &amp;name);        // might overflow the string space\n    if (s-&gt;name == name)                // wrong way to compare strings\n    {\n        printf(\"qawsdsdf\");             // missing newline?\n    }\n}\n</code></pre>\n\n<p>with this</p>\n\n<pre><code>while (fgets(name, sizeof(name), ptrFILE) != NULL)  // safer way to read to a small buffer\n{\n    name [ strcspn(name, \"\\r\\n\") ] = 0; // remove trailing newline etc\n    if (strcmp(s-&gt;name, name) == 0)     // compare the strings\n    {\n        printf(\"qawsdsdf\\n\");           // added newline\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong> in any case your posted code does not even compile properly:</p>\n\n<pre><code>while (!feof == NULL)\n</code></pre>\n\n<p>is rubbish, it should have been</p>\n\n<pre><code>while (!feof(ptrFILE))\n</code></pre>\n\n<p>although as I said is <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">not the way to use <code>feof</code></a> anyway. This would not have happened if you had compiler warnings enabled and dealt with them.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5056752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc273912a5ee5e9d0206c99f22dbf93?s=128&d=identicon&r=PG&f=1", "display_name": "Ulrick", "link": "https://stackoverflow.com/users/5056752/ulrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1447989450, "last_edit_date": 1447989450, "creation_date": 1435772786, "answer_id": 31168249, "question_id": 31166448, "link": "https://stackoverflow.com/questions/31166448/how-can-i-read-data-from-file/31168249#31168249", "title": "How can I read data from file?", "body": "<p>My solution was to change how the file is formatted</p>\n\n<pre><code>fprintf(ptrFILE, \"\\n%s%33s%38s\", p-&gt;name, p-&gt;surname, p-&gt;number);\n</code></pre>\n\n<p>Because if you're using a program to retrieve information, there's no need to fill it with a bunch of junk headers every time you write to it.\nI then edited the display function to be able to retrieve said information.</p>\n\n<pre><code>void display()\n{\n    struct personKnowledge s;   // s means searching\n    char name[16];\n    char sname[16];\n    char number[16];\n    char surname[16];\n    if ((ptrFILE = fopen(\"Phone Book.txt\", \"r\")) == NULL)\n    {\n        printf(\"The file couldn't open\\n\");\n    }\n    else\n    {\n        printf(\"Express name which you search: \");\n        scanf(\"%s\", &amp;sname);\n        do\n        {\n            fscanf(ptrFILE,\"%s%33s%38s\", &amp;name, &amp;surname, &amp;number);\n            if (strcmp(sname, name) == 0)\n            {\n                printf(\"%s %s %s\", name, surname, number);\n            }\n        }\n        while (strcmp(sname, name) != 0);\n    }\n}\n</code></pre>\n\n<p>P.S. I'm still new to c myself and I don't think I could give you a good explanation as to why my code works and yours doesn't. But I can say that those headers you were writing to the file every time was a major part of the problem when I was troubleshooting your code.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 5034503, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/75aaff3e17057cb4170f2fdc1d15c527?s=128&d=identicon&r=PG&f=1", "display_name": "NoWeDoR", "link": "https://stackoverflow.com/users/5034503/nowedor"}, "edited": false, "score": 0, "creation_date": 1435910830, "post_id": 31168601, "comment_id": 50406296, "body": "At first, this method had occured to me but I wanted to write a different way. I see that is difficult, and turn back this writing. Anyway, Thanks for all of your comments."}], "tags": [], "owner": {"reputation": 979, "user_id": 2557939, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b94700bb2884a8b47497b1d23b5d7da8?s=128&d=identicon&r=PG", "display_name": "Nithin Jose", "link": "https://stackoverflow.com/users/2557939/nithin-jose"}, "is_accepted": false, "score": 0, "last_activity_date": 1435774002, "creation_date": 1435774002, "answer_id": 31168601, "question_id": 31166448, "link": "https://stackoverflow.com/questions/31166448/how-can-i-read-data-from-file/31168601#31168601", "title": "How can I read data from file?", "body": "<p>I think these minor changes will solve your problem</p>\n\n<ul>\n<li>Allocate memory for storing personKnowledge <code>s = (struct personKnowledge *)malloc(sizeof(struct personKnowledge));</code></li>\n<li>Make file pointer reach the starting location of data. A simple trick has been used to achieve this <code>fscanf(ptrFILE, \"Name\\t\\t\\t\\tSurname\\t\\t\\t\\t\\tNumber\\n\");\nfscanf(ptrFILE, \"--------\\t\\t   ----------------\\t\\t\\t---------------------\\n\");\n</code></li>\n<li>Make change in while loop.<code>while (!feof(ptrFILE))</code></li>\n<li>Scanning one row of data.<code>fscanf(ptrFILE, \"\\n%s%33s%38s\\n\", s-&gt;name, s-&gt;surname, s-&gt;number)</code></li>\n<li>Make change in string comparison.<code>if (strcmp(name,s-&gt;name) == 0)</code></li>\n</ul>\n\n<p>The modified display function</p>\n\n<pre><code>    void display(){\n      struct personKnowledge *s;   \n      s = (struct personKnowledge *)malloc(sizeof(struct personKnowledge));   // Memory is being allocated for s\n      fflush(stdin);\n\n      char name[16];\n      if ((ptrFILE = fopen(\"Phone Book.txt\", \"r\")) == NULL)\n      {\n      printf(\"The file couldn't open\\n\");\n      }\n      else\n      {\n      fseek(ptrFILE, 0L, SEEK_SET);\n      printf(\"Express name which you search: \");\n      scanf(\"%s\",name);     //the name you want to retrieve\n\n      fscanf(ptrFILE, \"Name\\t\\t\\t\\tSurname\\t\\t\\t\\t\\tNumber\\n\");\n      fscanf(ptrFILE, \"--------\\t\\t   ----------------\\t\\t\\t---------------------\\n\");   //when we read the file for first time we need to start from the first location of person data, this is a trick to make ptrFILE reach there\n      fflush(stdin);\n\n      while (!feof(ptrFILE))\n      {\n      fscanf(ptrFILE, \"\\n%s%33s%38s\\n\", s-&gt;name, s-&gt;surname, s-&gt;number);//same format as fprintf used in newRecord\n        if (strcmp(name,s-&gt;name) == 0)   //comparison\n        {\n            printf(\"qawsdsdf\");\n        }\n      }}fclose(ptrFILE);}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5034503, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/75aaff3e17057cb4170f2fdc1d15c527?s=128&d=identicon&r=PG&f=1", "display_name": "NoWeDoR", "link": "https://stackoverflow.com/users/5034503/nowedor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1447989450, "creation_date": 1435766756, "last_edit_date": 1435768783, "question_id": 31166448, "link": "https://stackoverflow.com/questions/31166448/how-can-i-read-data-from-file", "title": "How can I read data from file?", "body": "<p>I'm trying to create phone book which has five function in c. I have formed just first function which takes and saves in file people's knowledge. However, I cannot succeed the second function which search just a person's (Not all people) knowledge from file.</p>\n\n<p>To run this function (\"\"display() function\"\") I want to a name from user to search and to display that name's knowledge on the screen. I wrote something but it didn't work. The problem is display() function. How can I read just one line and print it on the screen? Thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;     // \"stdlib\" library contains of exit() and malloc function                        \n#include &lt;Windows.h&gt;   // \"Windows\" library contains of Sleep() function\n#include &lt;string.h&gt;   // \"string\" library contains of strcmp() function\n\nstruct personKnowledge\n{\n    char number[16];\n    char name[16];\n    char surname[16];\n};\n\nvoid newRecord();\nvoid display();\nvoid deletE();\nvoid add();\nvoid update();\n\nFILE *ptrFILE;\n\nint main()\n{\n    int choice;\n    printf(\"\\n\\t\\t *-* Phone Book Program *-*\");\n    do\n    {\n        printf(\"\\n\\n\\t\\t 1) New record\");   // The options are being presented to user\n        printf(\"\\n\\n\\t\\t 2) Display person knowledge\");\n        printf(\"\\n\\n\\t\\t 3) Delete someone\");\n        printf(\"\\n\\n\\t\\t 4) Add new person\");\n        printf(\"\\n\\n\\t\\t 5) Update person knowledge\");\n        printf(\"\\n\\n\\t\\t 6) Exit\");\n        printf(\"\\n\\n\\nEnter your choice: \");\n        scanf(\"%d\", &amp;choice);\n        switch (choice)\n        {\n        case 1:\n        {\n            newRecord();\n            break;\n        }\n        case 2:\n        {\n            display();\n            break;\n        }\n        case 3:\n        {\n            break;\n        }\n        case 4:\n        {   \n            break;\n        }\n        case 5:\n        {\n            break;\n        }\n        case 6:\n        {\n            printf(\"\\nWorking has been completed.\\n\");\n            exit(0);\n            break;\n        }\n        default:\n        {\n            printf(\"\\nWrong entry! The program has been terminated.\\n\");\n        }\n        }   \n    } while (choice &gt;=1 &amp;&amp; choice &lt;=6 );\n    return 0;\n}\n\nvoid newRecord()\n{\n    system(\"cls\");   // Screen is being cleaned\n    if ((ptrFILE = fopen(\"Phone Book.txt\", \"w\")) == NULL)\n    {\n        printf(\"The file couldn't open\\n\");\n    }\n    else\n    {          \n        struct personKnowledge *p;   // p means person\n        p = (struct personKnowledge *)malloc(sizeof(struct personKnowledge));   // Memory is being allocated\n        fflush(stdin);\n        printf(\"\\n\\nDetermine person name: \");   // User is entering the person's knowledge and they are being saved in file\n        gets(p-&gt;name);\n        printf(\"Determine %s's surname: \", p-&gt;name);\n        gets(p-&gt;surname);\n        printf(\"Determine %s's number: \", p-&gt;name);\n        gets(p-&gt;number);\n        fprintf(ptrFILE, \"Name\\t\\t\\t\\tSurname\\t\\t\\t\\t\\tNumber\\n\");\n        fprintf(ptrFILE, \"--------\\t\\t   ----------------\\t\\t\\t---------------------\\n\");\n        fprintf(ptrFILE, \"\\n%s%33s%38s\\n\", p-&gt;name, p-&gt;surname, p-&gt;number);\n        fclose(ptrFILE);\n        free(p);\n        printf(\"Please wait, information is saving to file..\\n\");\n        Sleep(1000);\n        printf(\"*-* Saving operation has been completed. *-*\");\n    }\n    fclose(ptrFILE);\n}\n\nvoid display()\n{\n    struct personKnowledge *s;   // s means searching\n    char name[16];\n    if ((ptrFILE = fopen(\"Phone Book.txt\", \"r\")) == NULL)\n    {\n        printf(\"The file couldn't open\\n\");\n    }\n    else\n    {\n        fseek(ptrFILE, 0L, SEEK_SET);\n        printf(\"Express name which you search: \");\n        gets(s-&gt;name);\n        while (!feof == NULL)\n        {\n            fscanf(ptrFILE,\"%s\", &amp;name);\n            if (strcmp(s-&gt;name, name) == 0)\n            {\n                printf(\"qawsdsdf\");\n            }\n        }\n    }\n    fclose(ptrFILE);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "compiler-errors", "webrtc"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1435843404, "post_id": 31165822, "comment_id": 50376970, "body": "The library chain in the posted code is unnecessarily complex.  the simplification would be: &#39;-LpathToLibs followed by &#39;-l for each library to be used from that &#39;pathToLibs&#39;   I.E. there is no need to repeat the same -L parameter over and over"}], "answers": [{"tags": [], "owner": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "is_accepted": true, "score": 7, "last_activity_date": 1435765775, "last_edit_date": 1592644375, "creation_date": 1435765775, "answer_id": 31166096, "question_id": 31165822, "link": "https://stackoverflow.com/questions/31165822/webrtc2sip-error-adding-symbols-dso-missing-from-command-line/31166096#31166096", "title": "Webrtc2sip: error adding symbols: DSO missing from command line", "body": "<h1>Solution:</h1>\n<p>Finally find it, used following option and it works!</p>\n<pre><code>./configure --prefix=$PREFIX CFLAGS='-lpthread' LDFLAGS='-ldl' LIBS='-ldl'\n</code></pre>\n"}], "owner": {"reputation": 13599, "user_id": 1159538, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AmqfA.png?s=128&g=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/1159538/satish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4253, "favorite_count": 0, "accepted_answer_id": 31166096, "answer_count": 1, "score": 5, "last_activity_date": 1435765775, "creation_date": 1435765039, "question_id": 31165822, "link": "https://stackoverflow.com/questions/31165822/webrtc2sip-error-adding-symbols-dso-missing-from-command-line", "title": "Webrtc2sip: error adding symbols: DSO missing from command line", "body": "<p>I am trying to compile following code <code>webrtc2sip</code> but getting following error.</p>\n\n<pre><code>root@dev1:/usr/local/src/webrtc2sip# g++  -g -O2   -o webrtc2sip webrtc2sip-mp_c2c.o webrtc2sip-mp_engine.o webrtc2sip-mp_mail.o webrtc2sip-mp_mediaproxy.o webrtc2sip-mp_mutex.o webrtc2sip-mp_net_transport.o webrtc2sip-mp_object.o webrtc2sip-mp_peer.o webrtc2sip-mp_proxyplugin.o webrtc2sip-mp_proxyplugin_consumer_audio.o webrtc2sip-mp_proxyplugin_consumer_video.o webrtc2sip-mp_proxyplugin_mgr.o webrtc2sip-mp_proxyplugin_producer_audio.o webrtc2sip-mp_proxyplugin_producer_video.o webrtc2sip-mp_session.o webrtc2sip-mp_session_av.o webrtc2sip-mp_wrap.o webrtc2sip-mp_db_sqlite.o webrtc2sip-sqlite3.o webrtc2sip-mp_db.o webrtc2sip-mp_db_model.o webrtc2sip-jsoncpp.o webrtc2sip-ActionConfig.o webrtc2sip-AudioResampler.o webrtc2sip-DDebug.o webrtc2sip-MediaContent.o webrtc2sip-MediaSessionMgr.o webrtc2sip-Msrp.o webrtc2sip-ProxyConsumer.o webrtc2sip-ProxyPluginMgr.o webrtc2sip-ProxyProducer.o webrtc2sip-SafeObject.o webrtc2sip-SipCallback.o webrtc2sip-SipEvent.o webrtc2sip-SipMessage.o webrtc2sip-SipSession.o webrtc2sip-SipStack.o webrtc2sip-SipUri.o webrtc2sip-SMSEncoder.o webrtc2sip-Xcap.o -L/usr/lib -L/usr/lib  -L/usr/local/lib -ltinySAK   -L/usr/local/lib -ltinyNET   -L/usr/local/lib -ltinyHTTP   -L/usr/local/lib -ltinySIP   -L/usr/local/lib -ltinyDAV   -L/usr/local/lib -ltinySDP   -L/usr/local/lib -ltinyBFCP   -L/usr/local/lib -ltinySIGCOMP   -L/usr/local/lib -ltinyMEDIA   -L/usr/local/lib -ltinyXCAP   -L/usr/local/lib -ltinySMS   -L/usr/local/lib -ltinyMSRP   -L/usr/local/lib -ltinyRTP   -L/usr/local/lib -ltinyIPSec   -lxml2 -lpthread\n/usr/bin/ld: webrtc2sip-sqlite3.o: undefined reference to symbol 'dlclose@@GLIBC_2.2.5'\n//lib/x86_64-linux-gnu/libdl.so.2: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I have tried following option in <code>Makefile</code> but no luck :(</p>\n\n<pre><code>LDFLAGS= -ldl\n</code></pre>\n"}, {"tags": ["python", "c", "pyopencl"], "comments": [{"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1435764918, "post_id": 31165644, "comment_id": 50339651, "body": "Is a double the same as a float8?  Have you tried casting?"}, {"owner": {"reputation": 31, "user_id": 4974199, "user_type": "registered", "profile_image": "https://graph.facebook.com/130438344385527/picture?type=large", "display_name": "Jorge Gon&#231;alves", "link": "https://stackoverflow.com/users/4974199/jorge-gon%c3%a7alves"}, "reply_to_user": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1435766173, "post_id": 31165644, "comment_id": 50340444, "body": "I don&#39;t think it is. The value dt is already being casted in the python part. I will edit it above."}, {"owner": {"reputation": 31, "user_id": 4974199, "user_type": "registered", "profile_image": "https://graph.facebook.com/130438344385527/picture?type=large", "display_name": "Jorge Gon&#231;alves", "link": "https://stackoverflow.com/users/4974199/jorge-gon%c3%a7alves"}, "reply_to_user": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1435768032, "post_id": 31165644, "comment_id": 50341620, "body": "SOLVED: Well, I solved the problem the hard way which I will edit above. Thank you Jiminion for the suggestion!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435768533, "post_id": 31165644, "comment_id": 50341911, "body": "Do not edit your question to make it an answer! Instead, write an answer to your own question (that is well accepted). You can even accept, but will not get any reputation."}, {"owner": {"reputation": 31, "user_id": 4974199, "user_type": "registered", "profile_image": "https://graph.facebook.com/130438344385527/picture?type=large", "display_name": "Jorge Gon&#231;alves", "link": "https://stackoverflow.com/users/4974199/jorge-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1435768680, "post_id": 31165644, "comment_id": 50341994, "body": "Oh, sorry! I will post my solution below then ^^&#39; Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1435852132, "post_id": 31167086, "comment_id": 50383364, "body": "Glad you got something working.  You could pass dt as a parameter in updade_state().  You could alter it or recast it before use, if needed."}], "tags": [], "owner": {"reputation": 31, "user_id": 4974199, "user_type": "registered", "profile_image": "https://graph.facebook.com/130438344385527/picture?type=large", "display_name": "Jorge Gon&#231;alves", "link": "https://stackoverflow.com/users/4974199/jorge-gon%c3%a7alves"}, "is_accepted": false, "score": 1, "last_activity_date": 1435768781, "creation_date": 1435768781, "answer_id": 31167086, "question_id": 31165644, "link": "https://stackoverflow.com/questions/31165644/cant-convert-between-vector-values-of-different-size/31167086#31167086", "title": "&quot;Can&#39;t convert between vector values of different size&quot;", "body": "<p>Well, I went around the problem and solved it by casting the value dt and other constants in the kernel, as suggested by Jiminion. This is not the most elegant solution but it works.</p>\n\n<pre><code>__kernel void updade_state( __global float8 *q,__global float8 *qm, __global float8 *v){\n\nconst int gid = get_global_id(0);\nfloat8 qs;\nfloat  dt, c1, c2, c3;\n\nc1 = 6.0;\nc2 = 3.0;\nc3 = 0.5;    \n\ndt = 0.0001;\n\n\n//k1\nf( q, v);\nqs = q[gid] + dt * v[gid]/c1;\nqm[gid] = q[gid] + c3 * dt * v[gid];\n\n//k2\nf(qm, v);\nqs +=  dt * v[gid]/c2;\nqm[gid] = q[gid] + c3 * dt * v[gid];\n\n//k3\nf( qm, v);\nqs +=  dt * v[gid]/c2;\nqm[gid] = q[gid] + dt * v[gid];\n\n//k4\nf( qm, v);\nqs +=  dt * v[gid]/c1;\n\n//update photon\nq[gid] = qs;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 31, "user_id": 4974199, "user_type": "registered", "profile_image": "https://graph.facebook.com/130438344385527/picture?type=large", "display_name": "Jorge Gon&#231;alves", "link": "https://stackoverflow.com/users/4974199/jorge-gon%c3%a7alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435768781, "creation_date": 1435764580, "last_edit_date": 1435768735, "question_id": 31165644, "link": "https://stackoverflow.com/questions/31165644/cant-convert-between-vector-values-of-different-size", "title": "&quot;Can&#39;t convert between vector values of different size&quot;", "body": "<p>I'm trying to run a Runge-Kutta 4 on C language. The code is as follows:</p>\n\n<pre><code>__kernel void updade_state( __global float8 *q,__global float8 *qm, __global float8 *v){\n\nconst int gid = get_global_id(0);\nfloat8 qs;\n\n\n//k1\nf( q, v);\nqs = q[gid] + dt * v[gid]/6.0;\nqm[gid] = q[gid] + 0.5 * dt * v[gid];\n\n//k2\nf(qm, v);\nqs +=  dt * v[gid]/3.0;\nqm[gid] = q[gid] + 0.5 * dt * v[gid];\n\n//k3\nf( qm, v);\nqs +=  dt * v[gid]/3.0;\nqm[gid] = q[gid] + dt * v[gid];\n\n//k4\nf( qm, v);\nqs +=  dt * v[gid]/6.0;\n\n//update particle\nq[gid] = qs;\n</code></pre>\n\n<p>}</p>\n\n<p>I'm using pyopencl module to access my graphics card (\"<strong>gid</strong>\") in order to run a simulation of multiple particles much more efficiently.</p>\n\n<p>Apart from the function <strong>f</strong> that is being called in the kernel, the rest of the kernel is being built in a python program, through which it is added the constant value of <strong>dt</strong>, present in my Runge-Kutta code.</p>\n\n<p>However, when I run the whole thing, the following error message shows:</p>\n\n<pre><code>&lt;kernel&gt;:52:22: error: can't convert between vector values of different size ('double' and 'float8')\n    qs = q[gid] + dt * v[gid]/6.0;\n                  ~~ ^ ~~~~~~\n&lt;kernel&gt;:53:33: error: can't convert between vector values of different size ('double' and 'float8')\n    qm[gid] = q[gid] + 0.5 * dt * v[gid];\n                       ~~~~~~~~ ^ ~~~~~~\n&lt;kernel&gt;:57:15: error: can't convert between vector values of different size ('double' and 'float8')\n    qs +=  dt * v[gid]/3.0;\n           ~~ ^ ~~~~~~\n&lt;kernel&gt;:58:33: error: can't convert between vector values of different size ('double' and 'float8')\n    qm[gid] = q[gid] + 0.5 * dt * v[gid];\n                       ~~~~~~~~ ^ ~~~~~~\n&lt;kernel&gt;:62:15: error: can't convert between vector values of different size ('double' and 'float8')\n    qs +=  dt * v[gid]/3.0;\n           ~~ ^ ~~~~~~\n&lt;kernel&gt;:63:27: error: can't convert between vector values of different size ('double' and 'float8')\n    qm[gid] = q[gid] + dt * v[gid];\n                       ~~ ^ ~~~~~~\n&lt;kernel&gt;:67:15: error: can't convert between vector values of different size ('double' and 'float8')\n    qs +=  dt * v[gid]/6.0;\n</code></pre>\n\n<p>Cheers</p>\n"}, {"tags": ["c", "pointers", "comparison"], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1435764591, "creation_date": 1435764591, "answer_id": 31165647, "question_id": 31165579, "link": "https://stackoverflow.com/questions/31165579/how-the-comparisons-if-arr-arr1-works-in-the-given-program/31165647#31165647", "title": "How the comparisons &quot;if (arr&lt;=arr1)&quot; works in the given program?", "body": "<p>The comparison ends up asking where the two arrays <code>arr</code> and <code>arr1</code> are located with respect to each other in memory.  It is asking which one has the lower address.</p>\n\n<p>If you're trying to compare the string values contained in the two arrays, use strcmp:</p>\n\n<pre><code>if(strcmp(arr, arr1) &lt;= 0) ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435765965, "post_id": 31165667, "comment_id": 50340308, "body": "This <code>printf(&quot;\\n%d&quot;,arr);</code> provokes UB. To print the address of the array, thus the address of its 1st element use <code>printf(&quot;\\n%p&quot;, (void*) arr);</code>"}], "tags": [], "owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "is_accepted": false, "score": 1, "last_activity_date": 1435766215, "last_edit_date": 1435766215, "creation_date": 1435764648, "answer_id": 31165667, "question_id": 31165579, "link": "https://stackoverflow.com/questions/31165579/how-the-comparisons-if-arr-arr1-works-in-the-given-program/31165667#31165667", "title": "How the comparisons &quot;if (arr&lt;=arr1)&quot; works in the given program?", "body": "<p>As far as my knowledge goes, <code>arr</code> or as a matter of fact any array variable stores the address of the first element in the array. So when you do <code>arr&lt;=arr1</code> you are actually comparing their addresses. So that's what it does. </p>\n\n<p>P.S. you can print the addresses just in case you want to check. As in:\n<code>printf(\"\\n%p\", (void*) arr);</code></p>\n\n<p>From the looks of your program, it seems that you want to compare the two strings. You then have to do:</p>\n\n<pre><code>if(strcmp(arr,arr1)==0)\n  printf(\"Entered strings are equal.\\n\");\nelse\n  printf(\"Entered strings are not equal.\\n\");\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5070283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bil3PYLV5dc/AAAAAAAAAAI/AAAAAAAAAaM/arzEqZMLh00/photo.jpg?sz=128", "display_name": "Arun Krishnamoorthy", "link": "https://stackoverflow.com/users/5070283/arun-krishnamoorthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435766441, "creation_date": 1435764424, "last_edit_date": 1435765776, "question_id": 31165579, "link": "https://stackoverflow.com/questions/31165579/how-the-comparisons-if-arr-arr1-works-in-the-given-program", "title": "How the comparisons &quot;if (arr&lt;=arr1)&quot; works in the given program?", "body": "<p>How this comparison works?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    char arr[]=\"WELCOME\";\n    char arr1[]=\"WELCOME\";\n\n    if (arr&lt;=arr1)\n      printf(\"equal\");\n    else\n      printf(\"not equal\");\n\n    return 0;\n}\n</code></pre>\n\n<p>In this program that if condition this always go to else,\nso please some one help me how that comparison done here.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1791, "user_id": 5022759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hg0HA.png?s=128&g=1", "display_name": "ikrabbe", "link": "https://stackoverflow.com/users/5022759/ikrabbe"}, "edited": false, "score": 0, "creation_date": 1435764679, "post_id": 31165565, "comment_id": 50339482, "body": "you mean you want to find the position in the line, also known as column? Possibly you should coun&#39;t your <code>pos</code> up <code>if ch!=&#39;\\n&#39;</code>. It helps to declare your variables and comment each variable: <code>&#47;* i: the position inside the word, pos: position in the line ... *&#47;</code>"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1435764986, "post_id": 31165565, "comment_id": 50339689, "body": "Please try to elaborate on your problem so that the answers would be more specific."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1435765667, "post_id": 31165565, "comment_id": 50340103, "body": "Minor: also change <code>char ch</code> --&gt; <code>int ch</code>."}, {"owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "edited": false, "score": 0, "creation_date": 1435852359, "post_id": 31165565, "comment_id": 50383532, "body": "If that is the case, why don&#39;t you break out of the while loop after you create substr?"}, {"owner": {"reputation": 1, "user_id": 5070247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_lqfZCYWyDM/AAAAAAAAAAI/AAAAAAAAAFM/DsNi3Y1qK8E/photo.jpg?sz=128", "display_name": "Rupesh G", "link": "https://stackoverflow.com/users/5070247/rupesh-g"}, "edited": false, "score": 0, "creation_date": 1435859663, "post_id": 31165565, "comment_id": 50387788, "body": "I cant because i am doing same thing for every string after to that. If i break from while loop, how can i continue with next offset of file.. Please correct me if any thing wrong.."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5070247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_lqfZCYWyDM/AAAAAAAAAAI/AAAAAAAAAFM/DsNi3Y1qK8E/photo.jpg?sz=128", "display_name": "Rupesh G", "link": "https://stackoverflow.com/users/5070247/rupesh-g"}, "edited": false, "score": 0, "creation_date": 1435773483, "post_id": 31165678, "comment_id": 50344629, "body": "Actually I am taking one character from file until these condition (space, tab, and newline).If supposed I am hit with above condition i am passing the substr to create list with all values(position, line number). Please let me help to find the correct best solution."}, {"owner": {"reputation": 1, "user_id": 5070247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_lqfZCYWyDM/AAAAAAAAAAI/AAAAAAAAAFM/DsNi3Y1qK8E/photo.jpg?sz=128", "display_name": "Rupesh G", "link": "https://stackoverflow.com/users/5070247/rupesh-g"}, "edited": false, "score": 0, "creation_date": 1435775715, "post_id": 31165678, "comment_id": 50345976, "body": "while searching a word. I can directly go with the node and i print all the values with respect to search string.."}], "tags": [], "owner": {"reputation": 4974, "user_id": 2587816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0ec5b10cbc8a9a5b707ea67ea60f84d?s=128&d=identicon&r=PG", "display_name": "Jiminion", "link": "https://stackoverflow.com/users/2587816/jiminion"}, "is_accepted": false, "score": 0, "last_activity_date": 1435764675, "creation_date": 1435764675, "answer_id": 31165678, "question_id": 31165565, "link": "https://stackoverflow.com/questions/31165565/i-am-not-able-to-find-out-the-position-of-string-from-file/31165678#31165678", "title": "I am not able to find out the position of string from file", "body": "<p>Position is zero (pos = 0) at the beginning of each line and increments everytime a character is not a new line.</p>\n"}], "owner": {"reputation": 1, "user_id": 5070247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_lqfZCYWyDM/AAAAAAAAAAI/AAAAAAAAAFM/DsNi3Y1qK8E/photo.jpg?sz=128", "display_name": "Rupesh G", "link": "https://stackoverflow.com/users/5070247/rupesh-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435764675, "creation_date": 1435764393, "question_id": 31165565, "link": "https://stackoverflow.com/questions/31165565/i-am-not-able-to-find-out-the-position-of-string-from-file", "title": "I am not able to find out the position of string from file", "body": "<p>Actually my program use to find the no of words in given user file.</p>\n\n<p>What I am doing here means i am getting string from file and i am calculating the every requirements for that string(position, line number). But i not able to find the position. could you please anyone help me to find out that..</p>\n\n<p>Below is my code path:</p>\n\n<pre><code>void find(FILE *str)\n{\n     short i = 0;\n     char ch, substr[20];\n     char *p;\n\n     while((ch = fgetc(str))!=EOF)\n     {\n         noc++;\n\n         if(ch == '\\n')\n         {\n             pos = 1;\n             nol++;\n         }\n\n         if (ch != '\\n' &amp;&amp; ch != '\\t' &amp;&amp; ch != ' ')\n             substr[i++] = ch;\n\n         else\n         {\n             now++;\n             substr[i] = '\\0';\n             create(substr);\n             i = 0;\n         }\n    }\n    return;\n}\n</code></pre>\n\n<p>Thanks in advance \n-Rubesh G. </p>\n"}, {"tags": ["c", "avr", "atmel"], "comments": [{"owner": {"reputation": 2519, "user_id": 202037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oktOo.png?s=128&g=1", "display_name": "Archie", "link": "https://stackoverflow.com/users/202037/archie"}, "edited": false, "score": 1, "creation_date": 1435765239, "post_id": 31165217, "comment_id": 50339845, "body": "Are you developing your own drivers on the host side, or rely on system standard ones (e.g. HID)? With your own driver you could incorporate the OS info into the protocol, but in general case there is no way to guess the host&#39;s OS. But one can theorize on this of course (e.g. <a href=\"http://ix.cs.uoregon.edu/~butler/pubs/sadfe11.pdf\" rel=\"nofollow noreferrer\">ix.cs.uoregon.edu/~butler/pubs/sadfe11.pdf</a>)"}, {"owner": {"reputation": 3355, "user_id": 1143639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ad387b358af367c236a391275c11af3?s=128&d=identicon&r=PG&f=1", "display_name": "KDEx", "link": "https://stackoverflow.com/users/1143639/kdex"}, "reply_to_user": {"reputation": 2519, "user_id": 202037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oktOo.png?s=128&g=1", "display_name": "Archie", "link": "https://stackoverflow.com/users/202037/archie"}, "edited": false, "score": 0, "creation_date": 1435765414, "post_id": 31165217, "comment_id": 50339943, "body": "@Archie Using HID, thanks for helping me clarify. That resource may be very useful -  looking into it now"}], "answers": [{"tags": [], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "is_accepted": false, "score": 2, "last_activity_date": 1565701645, "last_edit_date": 1565701645, "creation_date": 1435964309, "answer_id": 31215076, "question_id": 31165217, "link": "https://stackoverflow.com/questions/31165217/avr-usb-detect-os/31215076#31215076", "title": "AVR USB detect OS", "body": "<p>There is no standard way according to the USB-Spec to get the type of the host system.</p>\n\n<p>And usually you do not want your device to react os dependent. \nNormally you want your device spec-conform so that any device with correct USB-Implementation can connect with it.</p>\n\n<p>Otherwise there would be so many different OS's to consider. e.g. dozends of Linux flavours.</p>\n\n<p>However, some security reserchers presented (or did they found such things in the wild?) attack scenarios with badusb devices that detect the host OS by some timing and protocoll uniquenesses to trigger slighly focused attacks.</p>\n\n<p>So you may search in this direction.</p>\n\n<p>But this approach is more like recognizing a specific person just by looking at his foot prints. The person may update its shoes at any time...</p>\n"}], "owner": {"reputation": 3355, "user_id": 1143639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ad387b358af367c236a391275c11af3?s=128&d=identicon&r=PG&f=1", "display_name": "KDEx", "link": "https://stackoverflow.com/users/1143639/kdex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1565701645, "creation_date": 1435763500, "last_edit_date": 1435765375, "question_id": 31165217, "link": "https://stackoverflow.com/questions/31165217/avr-usb-detect-os", "title": "AVR USB detect OS", "body": "<p>I am programming a USB mass storage device using the <a href=\"http://www.atmel.com/webdoc/AVRLibcReferenceManual/group__avr__pgmspace.html\" rel=\"nofollow\">Atmel AVR set of libraries</a> making use of host HID drivers only. I would like to have some specific behavior based on if the device is plugged into a Windows machine vs a Linux (let's just say Debian based) machine. I've searched the API and haven't found anything that seems to have this capability. </p>\n\n<p>Is there a specific function that allows me to detect the connected OS? Or, is there a specific set of behavior I can key in on to at least deduce the connected OS?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1435762642, "post_id": 31164849, "comment_id": 50338041, "body": "isn&#39;t it like <code>int (*a1)[3]</code> says <i>pointer to an array of 3 ints</i>, which is not your definition?"}, {"owner": {"reputation": 747, "user_id": 5069384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-FOSA0ct3Nc4/AAAAAAAAAAI/AAAAAAAAAF4/13MABmwoPWE/photo.jpg?sz=128", "display_name": "Yahia Farghaly", "link": "https://stackoverflow.com/users/5069384/yahia-farghaly"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1435762836, "post_id": 31164849, "comment_id": 50338173, "body": "actually i got confused by the two definition int(<i>a1)[3] or int</i>a1[3] ,i think they both a pointer of a1 to array of 3 ints but the compilar treat them differently ,am i wrong ?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1435762838, "post_id": 31164849, "comment_id": 50338175, "body": "Crank up your compiler warnings. You are initializing a pointer-to-array with a load of integers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435763794, "post_id": 31164849, "comment_id": 50338846, "body": "Questions starting with &quot;we all know ...&quot; make me very suspiciously. And, yet again, the prerequisite is wrong. You are not generating a 2D array of strings, but an array of pointers to chars, let&#39;s call it a <b>1D</b> array of strings, but not 2D!"}, {"owner": {"reputation": 747, "user_id": 5069384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-FOSA0ct3Nc4/AAAAAAAAAAI/AAAAAAAAAF4/13MABmwoPWE/photo.jpg?sz=128", "display_name": "Yahia Farghaly", "link": "https://stackoverflow.com/users/5069384/yahia-farghaly"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435764220, "post_id": 31164849, "comment_id": 50339145, "body": "i am not an expert Mr.Olaf, i still in the beginning sorry for making you confused @Olaf"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1435764536, "post_id": 31164849, "comment_id": 50339381, "body": "It takes more to confuse me. It is just a bad idea to start with such a sentence, even more if you post something actually <i>not</i> known to all (even if it was correct). Just imagine I&#39;d start like this and you notice you actually do <b>not</b> know. How would you feel - a bit dum*? (That is no offense, and I feel not offended either, but others might)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1435764997, "post_id": 31164849, "comment_id": 50339701, "body": "@Yahia Farghaly: <code>int (*a1)[3]={{20,60...</code> will not even compile. What &quot;crash&quot; are you talking about then?"}], "answers": [{"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1435764766, "post_id": 31164962, "comment_id": 50339547, "body": "@NatashaDutta; Yeah. Don&#39;t have time right now to fix that. I removed it."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1435764737, "last_edit_date": 1435764737, "creation_date": 1435762826, "answer_id": 31164962, "question_id": 31164849, "link": "https://stackoverflow.com/questions/31164849/pointers-differ-from-an-integer-2-d-array-and-a-string-in-c/31164962#31164962", "title": "Pointers differ from an integer 2-D array and a string in c", "body": "<p>In the declaration  </p>\n\n<pre><code>int (*a1)[3]={{20,60,30},{40,90,180},{200,880,900}};  \n</code></pre>\n\n<p><code>a1</code> is a pointer (to an array of 3 <code>int</code>s). You can't initialize it with the above initializer. You can understand this by taking an example  </p>\n\n<pre><code>int a[] = {1, 2, 3};\nint *p = a; \n</code></pre>\n\n<p>You can't initialize <code>p</code> as  </p>\n\n<pre><code>int *p = {1, 2, 3};  \n</code></pre>\n\n<p>because <code>p</code> is a pointer, not arrays. That said pointers are not arrays. </p>\n\n<p>You should note that the declaration  </p>\n\n<pre><code>char *c[5] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};  \n</code></pre>\n\n<p>and  </p>\n\n<pre><code>char c1[][5] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};   \n</code></pre>\n\n<p>are completely different with each other. \nFormer declares <code>c</code> as an array of <code>5</code> pointers to <code>char</code>  while latter declares <code>c1</code> an array of arrays of <code>char</code>s. </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1435766373, "last_edit_date": 1435766373, "creation_date": 1435765080, "answer_id": 31165837, "question_id": 31164849, "link": "https://stackoverflow.com/questions/31164849/pointers-differ-from-an-integer-2-d-array-and-a-string-in-c/31165837#31165837", "title": "Pointers differ from an integer 2-D array and a string in c", "body": "<p>First of all this declaration</p>\n\n<pre><code>char *c[5] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};\n</code></pre>\n\n<p>does not declare a 2D array. It is a one-dimensional array of pointers to string literals.</p>\n\n<p>This declaration</p>\n\n<pre><code>char c1[][10] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};\n</code></pre>\n\n<p>is indeed a declaration of a 2D array.</p>\n\n<p>This declaration</p>\n\n<pre><code>int (*a1)[3]={{20,60,30},{40,90,180},{200,880,900}};\n</code></pre>\n\n<p>is invalid and the compiler should issue a diagnostic message. In this declaration <code>a1</code> is a scalar object and it may not be initialized by a list of initializers in braces when there are more than one initializer and moreover when there are enclosed initializers in braces.</p>\n\n<p>A scalar object may be initialized by the brace list containing only one initializer as for example</p>\n\n<pre><code>int x = { 10 };\n</code></pre>\n\n<p>According to the C Standard (6.7.9 Initialization)</p>\n\n<blockquote>\n  <p>11 The initializer for a scalar shall be a single expression,\n  optionally enclosed in braces.</p>\n</blockquote>\n\n<p>But you can do the following using compound literals</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void ) \n{\n    int ( *a1 )[3] = ( int[][3] )\n    { \n        { 20, 60, 30 }, \n        { 40, 90, 180 },\n        { 200, 880, 900 }\n\n    };  \n\n    for ( size_t i = 0; i &lt; 3; i++ )\n    {\n        for ( size_t j = 0; j &lt; 3; j++ ) printf( \"%d \", a1[i][j] );\n        printf( \"\\n\" );\n    }\n}\n</code></pre>\n\n<p>The program output is </p>\n\n<pre><code>20 60 30 \n40 90 180 \n200 880 900 \n</code></pre>\n\n<p>In this program declaration <code>int ( *a1 )[3]</code> declares a pointer to an array of type <code>int[3]</code> . That is in the right side of the declaration there is a compound literal that has type <code>int [3][3]</code> (a 2D array) that is implicitly converted to a pointer to its first element and this value is assigned to <code>a1</code></p>\n"}], "owner": {"reputation": 747, "user_id": 5069384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh3.googleusercontent.com/-FOSA0ct3Nc4/AAAAAAAAAAI/AAAAAAAAAF4/13MABmwoPWE/photo.jpg?sz=128", "display_name": "Yahia Farghaly", "link": "https://stackoverflow.com/users/5069384/yahia-farghaly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435766373, "creation_date": 1435762536, "last_edit_date": 1435763080, "question_id": 31164849, "link": "https://stackoverflow.com/questions/31164849/pointers-differ-from-an-integer-2-d-array-and-a-string-in-c", "title": "Pointers differ from an integer 2-D array and a string in c", "body": "<p>we all know that to define a 2-D array of strings we do </p>\n\n<pre><code>  char *c[5] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char c1[][10] = {\"string1\", \"string2\", \"string3\", \"string4\", \"string5\"};\n</code></pre>\n\n<p>and when i get the value of one of these,we do `printf(\"%c \",c[1][0] ); //just example</p>\n\n<p>but when declaring </p>\n\n<pre><code>int a[][3]={{20,60,30},{40,90,180},{200,880,900}}; //no problem with getting the output from\n</code></pre>\n\n<p>but when declaring</p>\n\n<pre><code>int (*a1)[3]={{20,60,30},{40,90,180},{200,880,900}};\n</code></pre>\n\n<p>and trying to get the output <code>printf(\"%i\",a1[0][0]);</code>\nthe program is crash </p>\n\n<p>i know that from the definition of (a) i can do as following</p>\n\n<pre><code> int(*p)[3]=a; then printf(\"%i\",p[0][0]);\n</code></pre>\n\n<p>and i also know if i do <code>int *a1[3]</code> then i create an array of pointers ,and to avoid that we put the parentheses,so why with the definition of <code>int(*a1)[3]</code> the program crash ? and how the compiler deal with it ? and what the difference between this case and the case of string <code>char *c[5]</code> it the same if i put <code>char (*c)[5]</code>and no problems happens with char ?</p>\n"}, {"tags": ["c", "compilation", "neural-network"], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1435825004, "creation_date": 1435825004, "answer_id": 31179116, "question_id": 31164761, "link": "https://stackoverflow.com/questions/31164761/why-cant-i-compile-this-c-api-nemo-spiking-neural-network-simulator/31179116#31179116", "title": "Why can&#39;t I compile this C API (NeMo Spiking Neural Network Simulator)", "body": "<p>It looks like this code has a common error that occurs when C++ programmers migrate to writing C code. In C++, you can declare a <code>struct nemo_network_class</code> object by writing, for example:</p>\n\n<pre><code>nemo_network_class foo;\n</code></pre>\n\n<p>However, in C, the <code>struct</code> is part of the type identifier. You must write:</p>\n\n<pre><code>struct nemo_network_class foo;\n</code></pre>\n\n<hr>\n\n<p>Change this: <code>typedef nemo_network_class* nemo_network_t;</code></p>\n\n<p>... to this: <code>typedef struct nemo_network_class* nemo_network_t;</code></p>\n\n<p>Change this: <code>typedef nemo_simulation_class* nemo_simulation_t;</code></p>\n\n<p>... to this: <code>typedef struct nemo_simulation_class* nemo_simulation_t;</code></p>\n\n<p>Change this: <code>typedef nemo_configuration_class* nemo_configuration_t;</code></p>\n\n<p>... to this: <code>typedef struct nemo_configuration_class* nemo_configuration_t;</code></p>\n\n<hr>\n\n<p>After you've made these changes and confirmed that they work, please submit a bug report so that this solution gets pushed into production.</p>\n"}], "owner": {"reputation": 375, "user_id": 2464312, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eb5f55d265a715afaf00d2af7d021bb1?s=128&d=identicon&r=PG", "display_name": "user48133", "link": "https://stackoverflow.com/users/2464312/user48133"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 31179116, "answer_count": 1, "score": 1, "last_activity_date": 1435825004, "creation_date": 1435762305, "question_id": 31164761, "link": "https://stackoverflow.com/questions/31164761/why-cant-i-compile-this-c-api-nemo-spiking-neural-network-simulator", "title": "Why can&#39;t I compile this C API (NeMo Spiking Neural Network Simulator)", "body": "<p>Hi I am trying to utilize this library <a href=\"http://nemosim.sourceforge.net\" rel=\"nofollow\">http://nemosim.sourceforge.net</a> to play around with Spiking Neural Networks. </p>\n\n<p>I am new to C and C++.</p>\n\n<p>What I've done is, downloaded the installer from here: <a href=\"http://sourceforge.net/projects/nemosim/\" rel=\"nofollow\">http://sourceforge.net/projects/nemosim/</a></p>\n\n<p>Installed.</p>\n\n<p>I then wrote this program in main.c file: </p>\n\n<pre><code>#include&lt;nemo.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nmain()\n{\n    printf(\"Hello World!\");\n    getchar();      \n}\n</code></pre>\n\n<p>and compiled it using MinGW on Windows: </p>\n\n<pre><code>gcc -I\"C:\\Program Files (x86)\\NeMo\\include\" main.c -o main.exe\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>In file included from main.c:1:0:\nC:\\Program Files (x86)\\NeMo\\include/nemo.h:48:1: error: unknown type name 'nemo_\nnetwork_class'\n typedef nemo_network_class* nemo_network_t;\n ^\nC:\\Program Files (x86)\\NeMo\\include/nemo.h:49:1: error: unknown type name 'nemo_\nsimulation_class'\n typedef nemo_simulation_class* nemo_simulation_t;\n ^\nC:\\Program Files (x86)\\NeMo\\include/nemo.h:50:1: error: unknown type name 'nemo_\nconfiguration_class'\n typedef nemo_configuration_class* nemo_configuration_t;\n ^\n</code></pre>\n\n<p>Please help me. </p>\n\n<p>It looks like nemo.h has problems, but I suspect I am missing something because I am a newbie...</p>\n"}, {"tags": ["c", "arrays", "pointers", "c-strings"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435762077, "post_id": 31164578, "comment_id": 50337632, "body": "Too many questions. But <code>a</code> and <code>b</code> are not the same object, so their address is different."}, {"owner": {"reputation": 306, "user_id": 5036212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88cf54b45ce364f5b4dc41830e481820?s=128&d=identicon&r=PG", "display_name": "Napa", "link": "https://stackoverflow.com/users/5036212/napa"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435762145, "post_id": 31164578, "comment_id": 50337673, "body": "No the address is same,see the output."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435762251, "post_id": 31164578, "comment_id": 50337765, "body": "There&#39;s no place in your code where you&#39;re successfully printing out the address of <code>b</code>."}, {"owner": {"reputation": 7162, "user_id": 3800782, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d6d5273f12d5fd7a7cc4c31769558918?s=128&d=identicon&r=PG&f=1", "display_name": "rghome", "link": "https://stackoverflow.com/users/3800782/rghome"}, "edited": false, "score": 0, "creation_date": 1435762284, "post_id": 31164578, "comment_id": 50337787, "body": "Fix the format code in the &amp;b printf (change to %p) and edit your post with the new result."}, {"owner": {"reputation": 5969, "user_id": 4320665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0cDQG.png?s=128&g=1", "display_name": "ryanyuyu", "link": "https://stackoverflow.com/users/4320665/ryanyuyu"}, "edited": false, "score": 0, "creation_date": 1435766396, "post_id": 31164578, "comment_id": 50340589, "body": "@Napa Do not edit the &quot;solution&quot; into your question.  Instead upvote/accept helpful answer and/or answer your own question with those details."}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 5036212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88cf54b45ce364f5b4dc41830e481820?s=128&d=identicon&r=PG", "display_name": "Napa", "link": "https://stackoverflow.com/users/5036212/napa"}, "edited": false, "score": 0, "creation_date": 1435763164, "post_id": 31164658, "comment_id": 50338385, "body": "Thanks for prompt reply."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435762022, "creation_date": 1435762022, "answer_id": 31164658, "question_id": 31164578, "link": "https://stackoverflow.com/questions/31164578/no-more-confusing-pointers/31164658#31164658", "title": "No More Confusing Pointers", "body": "<p>You copy pasted the <code>printf()</code> and didn't change the specifier</p>\n\n<pre><code>printf(\"&amp;b is:%s\\n\", &amp;b)\n/*             ^ should be `p' */\n</code></pre>\n\n<p>The first comment, when executed is causing a problem because you are using the <code>\"%s\"</code> specifier and passing the first character of <code>a</code> which will be interpreted as an address, try this</p>\n\n<pre><code>printf(\"*a is: %c\\n\", *a);\n</code></pre>\n\n<p>The third comment presents the same problem.</p>\n\n<p>The second comment, you need an intermidiate pointer to do that, like</p>\n\n<pre><code>char  *c = &amp;a;\nchar **d = &amp;c;\n\nprintf(\"%p\\n\", (void *) d);\n</code></pre>\n\n<p>although it will print the same as <code>printf(\"%p\\n\", (void *) a);</code> because they all have the same address, the differenece is that the pointer arithmetic will work different.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1435762779, "last_edit_date": 1435762779, "creation_date": 1435762074, "answer_id": 31164686, "question_id": 31164578, "link": "https://stackoverflow.com/questions/31164578/no-more-confusing-pointers/31164686#31164686", "title": "No More Confusing Pointers", "body": "<ul>\n<li><p><strong>Point 1:</strong> <strong><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html\" rel=\"nofollow\">Nested functions are not standard <code>C</code>. They are supported as GCC extension.</a></strong>. </p></li>\n<li><p><strong>Point 2:</strong> <code>printf(\"&amp;b is:%s\\n\",&amp;b);</code> is wrong and invokes UB, because of improper format specifier. You need to change that to</p>\n\n<pre><code> printf(\"&amp;b is:%p\\n\",(void *)&amp;b);\n</code></pre></li>\n<li><p><strong>Point 3:</strong> <code>&amp;(&amp;a)</code> is wrong. the operand for <code>&amp;</code> needs to be an lvalue, not another <em>address</em>, which is not an lvalue. </p>\n\n<p>Related: <code>C11</code>, chapter <code>\u00a76.5.3.2</code>, for the operand type</p>\n\n<blockquote>\n  <p>The operand of the unary <code>&amp;</code> operator shall be either a function designator, the result of a <code>[]</code> or unary <code>*</code> operator, or an lvalue that designates an object that is not a bit-field and is not declared with the register storage-class specifier.</p>\n</blockquote>\n\n<p>and the return type</p>\n\n<blockquote>\n  <p>....result is not an lvalue.  </p>\n</blockquote></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": false, "score": 0, "last_activity_date": 1435762552, "creation_date": 1435762552, "answer_id": 31164858, "question_id": 31164578, "link": "https://stackoverflow.com/questions/31164578/no-more-confusing-pointers/31164858#31164858", "title": "No More Confusing Pointers", "body": "<p>Well, you shouldn't define functions inside another function - though some compilers accept that (like <code>gcc</code>), it isn't portable.</p>\n\n<pre><code>    printf(\"&amp;b is:%s\\n\",&amp;b);\n</code></pre>\n\n<p>Here <code>&amp;b</code> is the address of <code>b</code>, which is the address of the char array. In effect &amp;b is the address of the parameter.</p>\n\n<p>1.) and 3.) fail because you need to pass a pointer to a string. *a, is a dereferenced pointer, so, in effect, it's the first character of the string</p>\n\n<p>2.) &amp;&amp;a is a pointer to a pointer to a pointer to a pointer (as <code>a</code> <em>is</em> already a pointer. </p>\n"}, {"tags": [], "owner": {"reputation": 5969, "user_id": 4320665, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0cDQG.png?s=128&g=1", "display_name": "ryanyuyu", "link": "https://stackoverflow.com/users/4320665/ryanyuyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1435769007, "last_edit_date": 1495542602, "creation_date": 1435769007, "answer_id": 31167154, "question_id": 31164578, "link": "https://stackoverflow.com/questions/31164578/no-more-confusing-pointers/31167154#31167154", "title": "No More Confusing Pointers", "body": "<p>Note: This is the question author's own answer, see <a href=\"https://stackoverflow.com/posts/31164578/revisions\">revision 3</a></p>\n\n<hr>\n\n<p>I understood the above issues and here's the improved code:</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;string.h&gt;\n\n    int i;\n\n\n    char a[11]=\"F*** Yeahh!\";  //String : char *\n\n    //'a' gets memory in \"globals\" area;'a' is a pointer to 'F'\n\n    void func();//Function Definition\n\n    int main()\n    {\n        func(a);    //Passing reference of 'a' to func\n        getch();\n        return 1;\n    }\n\n    void func(char b[])\n        //'b' is given memory in 'stack' region;'b' has a reference\n        // to 'a'   which in turn refer to 'F'\n    {\n        printf(\"*a is:%c\\n\",*a);\n        printf(\"&amp;a is:%p\\n\",&amp;a);\n\n        //printf(\"&amp;&amp;a is:%p\\n\",&amp;(&amp;a));//&amp;()...Inside braces,there must be a\n        // value..\n\n        printf(\"a's address is:%p\\n\",a);\n        printf(\"a's value is:%s\\n\",a);\n        printf(\"b's address is:%p\\n\",b);\n        printf(\"b's value is:%s\\n\",b);\n        printf(\"*b is:%c\\n\",*b);\n        printf(\"&amp;b is:%p\\n\",&amp;b);\n\n        for(i=0;i&lt;strlen(a);i++)\n            printf(\"String as an array of characters is:%c\\n\",b[i]);\n    }\n</code></pre>\n\n<p>Here's The Output:</p>\n\n<pre><code>*a is:F\n&amp;a is:00409000\na's address is:00409000\na's value is:F*** Yeahh!\nb's address is:00409000\nb's value is:F*** Yeahh!\n*b is:F\n&amp;b is:0028FF20\nString as an array of characters is:F\nString as an array of characters is:*\nString as an array of characters is:*\nString as an array of characters is:*\nString as an array of characters is:\nString as an array of characters is:Y\nString as an array of characters is:e\nString as an array of characters is:a\nString as an array of characters is:h\nString as an array of characters is:h\nString as an array of characters is:!\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 5036212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88cf54b45ce364f5b4dc41830e481820?s=128&d=identicon&r=PG", "display_name": "Napa", "link": "https://stackoverflow.com/users/5036212/napa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 31164686, "answer_count": 4, "score": -4, "last_activity_date": 1435769007, "creation_date": 1435761835, "last_edit_date": 1435768899, "question_id": 31164578, "link": "https://stackoverflow.com/questions/31164578/no-more-confusing-pointers", "title": "No More Confusing Pointers", "body": "<p>Following is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n     char a[10]=\"Hi!\";  \n    void f(char b[])\n    {\n        // 1. printf(\"*a is:%s\\n\",*a);\n        printf(\"&amp;a is:%p\\n\",&amp;a);\n        // 2. printf(\"&amp;&amp;a is:%p\\n\",&amp;(&amp;a));\n        printf(\"a's address is:%p\\n\",a);\n        printf(\"a's value is:%s\\n\",a);\n        printf(\"b's address is:%p\\n\",b);\n        printf(\"b's value is:%s\\n\",b);\n        // 3. printf(\"*b is:%s\\n\",*b);\n        printf(\"&amp;b is:%s\\n\",&amp;b);\n    }\n\n    f(a);\n\n    return 1;\n    getch();\n}\n</code></pre>\n\n<p>Running the above code gives the output:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&amp;a is:0028FF1C\na's address is:0028FF1C\na's value is:Hi!\nb's address is:0028FF1C\nb's value is:Hi!\n&amp;b is:\u221f\u00a0(\n</code></pre>\n\n<p>In the Output:\n    Why are there different outputs for <code>&amp;a</code> and <code>&amp;b</code>;\n    Although a and b have same reference.</p>\n\n<p>Further,</p>\n\n<p>I've mentioned 3 comments by their number.\nIf I remove slashes one by one and execute them,I get following 2 issues:</p>\n\n<ol>\n<li><p>On executing comment no. 1 &amp; 3:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\"abc.exe has stopped working.\"\n</code></pre></li>\n<li><p>On executing comment no. 2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>abc.c: In function 'f':\nabc.c:14:32: error: lvalue required as unary '&amp;' operand\n          printf(\"&amp;&amp;a is:%p\\n\",&amp;(&amp;a));\n                        ^\n</code></pre></li>\n</ol>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435761185, "post_id": 31164198, "comment_id": 50336961, "body": "compound literals, maybe?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435763990, "post_id": 31164198, "comment_id": 50338994, "body": "&quot;but it returns errors in the compilation:&quot;  --&gt; post the error message."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1435764133, "post_id": 31164198, "comment_id": 50339085, "body": "Step 1, use<code>int ubus_call(const char *obj, const char *method, const struct ubus_args *u_args, size_t size_args)</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1437271135, "post_id": 31164198, "comment_id": 50958057, "body": "<code>struct ubus_args</code> itself should have <code>const char *</code> instead of <code>char *</code>, since you are putting string literals in it.  String literals are not writable."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1435761468, "creation_date": 1435761468, "answer_id": 31164422, "question_id": 31164198, "link": "https://stackoverflow.com/questions/31164198/how-to-pass-literal-array-as-input-argument-of-the-function/31164422#31164422", "title": "How to pass literal array as input argument of the function?", "body": "<p>If you're equipped with a <code>C99</code> and above supported compiler, you can use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html\">compound literals</a> to get your job done.</p>\n\n<p>You can rewrite the function call like</p>\n\n<pre><code>ubus_call(\"router\", \"client\", (struct ubus_args[]){{\"network\", \"lan\"}, {\"dhcp\", \"true\"}}, 2);\n</code></pre>\n\n<p>and it will work.</p>\n\n<p><kbd><a href=\"http://ideone.com/fFC9EE\">LIVE DEMO</a></kbd></p>\n\n<p>BTW, the recommended signature of <code>main()</code> is <code>int main(void)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1437271067, "post_id": 31164647, "comment_id": 50958045, "body": "If it is not intended for <code>ubus_call</code> to modify the strings, use <code>const struct ubus_args</code> in both the function parameter and the compound literal"}], "tags": [], "owner": {"reputation": 834, "user_id": 2128295, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0aa14c505a2a03921258fc3b9c7b8cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Shri", "link": "https://stackoverflow.com/users/2128295/shri"}, "is_accepted": false, "score": 10, "last_activity_date": 1435761985, "creation_date": 1435761985, "answer_id": 31164647, "question_id": 31164198, "link": "https://stackoverflow.com/questions/31164198/how-to-pass-literal-array-as-input-argument-of-the-function/31164647#31164647", "title": "How to pass literal array as input argument of the function?", "body": "<p>Here is the complete program, you can try it out.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct ubus_args {\n    char *key;\n    char *val;\n};\n\nint ubus_call(char *obj, char *method, struct ubus_args u_args[], int size_args) {\n    printf(\"%s\\n\", obj);\n    printf(\"%s\\n\", method);\n    printf(\"%s  %s\\n\", u_args[0].key, u_args[0].val);\n    printf(\"%s  %s\\n\", u_args[1].key, u_args[1].val);\n    return 0;\n}\n\nint main ()\n{\n    ubus_call(\"router\", \"client\", (struct ubus_args[2]){{\"network\", \"lan\"}, {\"dhcp\", \"true\"}}, 2);\n    return 0;\n}\n</code></pre>\n\n<p>The program is tested on <code>GNU GCC v4.8.3</code> online compiler.</p>\n"}], "owner": {"reputation": 367, "user_id": 2439679, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4ede1c01f6af2c08c29aadc91b263051?s=128&d=identicon&r=PG", "display_name": "imen bhiri", "link": "https://stackoverflow.com/users/2439679/imen-bhiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 2, "score": 11, "last_activity_date": 1437271011, "creation_date": 1435760934, "last_edit_date": 1437271011, "question_id": 31164198, "link": "https://stackoverflow.com/questions/31164198/how-to-pass-literal-array-as-input-argument-of-the-function", "title": "How to pass literal array as input argument of the function?", "body": "<p>The goal is to pass a constant array, (representing the member variables of the corresponding structure parameter) like <code>{{\"network\", \"lan\"}, {\"dhcp\", \"true\"}}</code>  as parameter when calling a function like:</p>\n\n<pre><code>ubus_call(\"router\", \"client\", {{\"network\", \"lan\"}, {\"dhcp\", \"true\"}}, 2);\n</code></pre>\n\n<p>I tried the following code but it returns errors in the compilation:</p>\n\n<pre><code>struct ubus_args {\n char *key;\n char *val;\n};\n\nint ubus_call(char *obj, char *method, struct ubus_args u_args[], int size_args) {\n printf(\"%s\\n\", obj);\n printf(\"%s\\n\", method);\n printf(\"%s  %s\\n\", u_args-&gt;key, u_args-&gt;val);\n return 0;\n}\n\nint main ()\n{\n  ubus_call(\"router\", \"client\", {{\"network\", \"lan\"}, {\"dhcp\", \"true\"}}, 2);\n  return 0;\n}\n</code></pre>\n\n<p>How I can do that in the proper way?</p>\n"}, {"tags": ["c", "linux", "ubuntu", "linux-kernel", "kernel"], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1435832574, "creation_date": 1435760832, "last_edit_date": 1435832574, "question_id": 31164163, "link": "https://stackoverflow.com/questions/31164163/ubuntu-echo-g-sysrq-trigger-halts-but-doesnt-return-control-to-gdb", "title": "Ubuntu echo g &gt; sysrq-trigger halts but doesn&#39;t return control to gdb", "body": "<p>My kernel </p>\n\n<p>3.13.11-ckt20 #2 SMP Tue Jun 30 17:10:47 BST 2015 x86_64 x86_64 x86_64 GNU/Linux</p>\n\n<p>is compiled with Magic SysRq but writing echo g > sysrq-trigger on target won't return the control to host. </p>\n\n<p>I boot with</p>\n\n<pre><code>vmlinuz root=(...) ro rhgb crashkernel=128M@16M kgdbwait kgdboc=ttyS0,115200\n</code></pre>\n\n<p>This works - host waits on gdb to attach and I can attach. I do continue then, and if I set some breakpoints, for example at <code>vfs_read</code> then yes - it is hit. But when I write g to /proc/sysrq-trigger on the target, the target halts (at least in userspace) but control is not returned to gdb over serial connection. I did debug remote 1 in gdb and it shows packets flowing up to the point when I do Continue, after this there is no packets in gdb console shown.</p>\n\n<p>How to return the control to debugger?\nWhat can I test/verify/check?\nWhat additional info do you need? Please let me know.</p>\n\n<p>GDB session:</p>\n\n<pre><code>peter@peterubuntu0:~/kernel$ sudo gdb vmlinux_intel \nReading symbols from vmlinux_intel...done.\n(gdb) set serial baud 115200\n(gdb) set debug remote 1\n(gdb) target remote /dev/ttyS0\nRemote debugging using /dev/ttyS0\nSending packet: $qSupported:multiprocess+;xmlRegisters=i386;qRelocInsn+#b5...Ack\nPacket received: \nPacket qSupported (supported-packets) is NOT supported\nSending packet: $Hg0#df...Ack\nPacket received: OK\nSending packet: $qTStatus#49...Ack\nPacket received: \nPacket qTStatus (trace-status) is NOT supported\nSending packet: $?#3f...Ack\nPacket received: S05\nSending packet: $Hc-1#09...Ack\nPacket received: OK\nSending packet: $qC#b4...Ack\nPacket received: QC01\nSending packet: $qAttached#8f...Ack\nPacket received: \nPacket qAttached (query-attached) is NOT supported\nSending packet: $qOffsets#4b...Ack\nPacket received: \nSending packet: $g#67...Ack\nPacket received: 2f000000000000000000000000000000a80b0000000000006c1c0000000000006c1c000000000000460200000000000038de8b260388ffff38de8b260388ffff960000000000000022020000000000000100000000000000aaaaaa00000000002084ca81ffffffffe30000000000000000000000000000000000000000000000f4201081ffffffff0202000010000000000000000000000000000000\nkgdb_breakpoint () at kernel/debug/debug_core.c:1042\n1042        wmb(); /* Sync point after breakpoint */\nSending packet: $qSymbol::#5b...Ack\nPacket received: \nPacket qSymbol (symbol-lookup) is NOT supported\n(gdb) c\nContinuing.\nSending packet: $vCont?#49...Ack\nPacket received: \nPacket vCont (verbose-resume) is NOT supported\nSending packet: $Hc0#db...Ack\nPacket received: OK\nSending packet: $c#63...Ack\n\n\n\n\n^Casync_remote_interrupt called            // this is where I did Ctrl+C\nremote_stop called\n^Casync_remote_interrupt_twice called      // and Ctrl-C again\nInterrupted while waiting for the program.\nGive up (and stop debugging it)? (y or n) y\nQuit\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Though it doesn't work when I try to debug Intel from Amd (both running the same kernel 3.13.11-ckt20 SMP 2015 x86_64 x86_64 x86_64 GNU/Linux\n):\ntarget - Intel(R) Core(TM)2 Duo CPU     E8500  @ 3.16GHz\nhost - AMD FX(tm)-4100 Quad-Core Processor</p>\n\n<p>it works in the opposite direction:\ntarget - AMD FX(tm)-4100 Quad-Core Processor\nhost - Intel(R) Core(TM)2 Duo CPU     E8500  @ 3.16GHz</p>\n\n<p>Maybe it is related to hardware breakpoints, registers, cpu implementation?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 6, "creation_date": 1435760261, "post_id": 31163900, "comment_id": 50336216, "body": "Generate a number from -10 to 1 and if the value is 0 or 1, add one to it."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 5, "creation_date": 1435760313, "post_id": 31163900, "comment_id": 50336256, "body": "Don&#39;t call <code>srand</code> more than once. Put it in <code>main</code>."}, {"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 0, "creation_date": 1435760318, "post_id": 31163900, "comment_id": 50336261, "body": "Generate a number between 1 and 13? -13 and -1?"}, {"owner": {"reputation": 879, "user_id": 2724196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae7ad61d6f045d20b45985f80a9724ae?s=128&d=identicon&r=PG&f=1", "display_name": "bznein", "link": "https://stackoverflow.com/users/2724196/bznein"}, "edited": false, "score": 3, "creation_date": 1435760689, "post_id": 31163900, "comment_id": 50336574, "body": "As a separate comment, note that your use of recursion is flawed, since you are making a recursive call to a function that returns a value, but you do not assign it, so if you get <code>r=0</code>, you will make a second call, discard the result, and return 0 anyway"}, {"owner": {"reputation": 4519, "user_id": 1977887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/I3Cij.jpg?s=128&g=1", "display_name": "Erick G. Hagstrom", "link": "https://stackoverflow.com/users/1977887/erick-g-hagstrom"}, "edited": false, "score": 0, "creation_date": 1435761913, "post_id": 31163900, "comment_id": 50337529, "body": "Don&#39;t use rand() if you care about getting a good pseudorandom number stream. rand() is horribly flawed."}], "answers": [{"comments": [{"owner": {"reputation": 4519, "user_id": 1977887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/I3Cij.jpg?s=128&g=1", "display_name": "Erick G. Hagstrom", "link": "https://stackoverflow.com/users/1977887/erick-g-hagstrom"}, "edited": false, "score": 1, "creation_date": 1435762007, "post_id": 31163957, "comment_id": 50337586, "body": "Please explain (or cite a source). This seems counterintuitive (as many things do in this field)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435855742, "post_id": 31163957, "comment_id": 50385594, "body": "The concern about not redrawing seems small compared to the unmentioned bias of <code>-10 + rand() &#47; (RAND_MAX &#47; 13 + 1)</code>."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 8, "last_activity_date": 1435848095, "last_edit_date": 1435848095, "creation_date": 1435760346, "answer_id": 31163957, "question_id": 31163900, "link": "https://stackoverflow.com/questions/31163900/random-number-range-exclude-0/31163957#31163957", "title": "Random number range, exclude 0", "body": "<p>Whatever you do, <strong>don't</strong> redraw if a returned value is 0: that will introduce statistical bias into the result.</p>\n\n<p>The best thing to do here is to draw between -10 and 1 inclusive and add 1 to any non-negative output.</p>\n\n<p>Finally, call <code>srand</code> <strong>once</strong> else you'll ruin the generator's statistical properties.</p>\n\n<p>(Briefly - since this comment is more for the mathematics site - and restricting the argument to a linear congruential generator, what tends to happen if you omit generated values is that you increase the variance of the resulting distribution so it's no longer uniform. A previously drawn small number will be linearly related to the subsequent drawing as the generator's modulus will have no effect. This autocorrelation - necessary for the resulting distribution to be uniform - of adjacent drawings will be curtailed if drawings are discarded and <em>that</em> increases the sample variance.)</p>\n"}], "owner": {"reputation": 2359, "user_id": 1736256, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/1948628470196fe729837363a59e153f?s=128&d=identicon&r=PG", "display_name": "ILostMySpoon", "link": "https://stackoverflow.com/users/1736256/ilostmyspoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1658, "favorite_count": 0, "accepted_answer_id": 31163957, "answer_count": 1, "score": 5, "last_activity_date": 1435848095, "creation_date": 1435760180, "question_id": 31163900, "link": "https://stackoverflow.com/questions/31163900/random-number-range-exclude-0", "title": "Random number range, exclude 0", "body": "<p>I have the following function that generates a random number between -10 and 2:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nstatic int\ngetRandomReturnCode(void)\n{\n    int N = 2,\n        M = -10;\n\n    srand(time(NULL));\n\n    r = M + rand() / (RAND_MAX / (N - M + 1) + 1);\n\n    if (r == 0){\n        getRandomReturnCode();\n    }\n\n    return r;\n}\n</code></pre>\n\n<p>Currently, if a return code of 0 (success) is returned, it will recursively call the function over until a non-zero return code is met and returned. What can I do to improve my code such that 0 is excluded from the range of randomly chosen numbers?</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1435759904, "post_id": 31163756, "comment_id": 50335964, "body": "what are <code>a</code> and <code>b</code> here? I did not get your question."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1435759988, "post_id": 31163756, "comment_id": 50336020, "body": "Do you want to generate the first K integers which satisfy <code>i = 2^a * 3^b</code> with <code>a</code> and <code>b</code> being integers ?"}, {"owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 0, "creation_date": 1435760030, "post_id": 31163756, "comment_id": 50336050, "body": "Exactly. Sorry for my bad English."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1435760220, "post_id": 31163756, "comment_id": 50336183, "body": "No problem. However, this question would be better suited to <a href=\"https://math.stackexchange.com\">Mathematics</a> as it is a math problem, not a programming problem."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1435760247, "post_id": 31163756, "comment_id": 50336204, "body": "why down vote... this is an interesting problem. you can&#39;t do it with simple for loop. you need to think of how to generating it while maintaining the order."}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 1, "creation_date": 1435760249, "post_id": 31163756, "comment_id": 50336208, "body": "Do you need 100 <i>smallest</i> numbers that satisfy the equation, or just any such numbers? Do you need them sorted?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435760305, "post_id": 31163756, "comment_id": 50336247, "body": "@dlask the smallest, that&#39;s what I asked. I don&#39;t think they need to be sorted though, as <code>z</code> is a set."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435760396, "post_id": 31163756, "comment_id": 50336333, "body": "@Quentin this is more than a math problem. because human beings care less ordering. it&#39;s quite practical actually."}, {"owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 0, "creation_date": 1435760491, "post_id": 31163756, "comment_id": 50336416, "body": "OK. Apparently I was misunderstood. I need to generate the set z with equation i = 2^a * 3^b, where are b and are integers. However the set of numbers can be a hundred members long. This is how that problem was given to me. So, basically, we do not know initially the rest of numbers which can be generated with the equation above"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1435760615, "post_id": 31163756, "comment_id": 50336521, "body": "@user1415536 if you are not asking for the smallest 100 ones, things can change a lot. it&#39;s better for you to figure out what you want before asking."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1435760625, "post_id": 31163756, "comment_id": 50336528, "body": "@HuStmpHrrr (not dowvoting, btw) From what I gathered, finding algorithms to solve math problems is off-topic. I wouldn&#39;t risk my hand on that though, and I <i>am</i> interested in the answer."}, {"owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435761099, "post_id": 31163756, "comment_id": 50336898, "body": "@dlask what about now? I thought I missed something,"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1435761515, "post_id": 31163756, "comment_id": 50337234, "body": "I&#39;m voting to close this question as off-topic because the OP has no code to fix, they just want a solution to their problem.  See also &#39;Questions seeking debugging help&#39; for meta information."}, {"owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 0, "creation_date": 1435763396, "post_id": 31163756, "comment_id": 50338553, "body": "Allright. The problem is, I can&#39;t find a proper algorithm that would satisfy a tester."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1435761698, "post_id": 31164281, "comment_id": 50337366, "body": "... still computing ? :p"}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435761808, "post_id": 31164281, "comment_id": 50337457, "body": "@Quentin The result is provided very quickly. I am just not going to show it here. ;-)"}], "tags": [], "owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "is_accepted": false, "score": 1, "last_activity_date": 1435761123, "creation_date": 1435761123, "answer_id": 31164281, "question_id": 31163756, "link": "https://stackoverflow.com/questions/31163756/how-to-generate-a-set-of-numbers/31164281#31164281", "title": "How to generate a set of numbers", "body": "<p>Brute force in Python (I know that C code is required):</p>\n\n<pre><code>sorted(2**a*3**b for a in range(100) for b in range(100))[:100]\n</code></pre>\n\n<p>And the result is &hellip;</p>\n"}, {"comments": [{"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 1, "creation_date": 1435761631, "post_id": 31164406, "comment_id": 50337315, "body": "Your code doesn&#39;t generate the <i>first</i> 100 numbers. <code>128</code> is missing there, for example."}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435761984, "post_id": 31164406, "comment_id": 50337571, "body": "@dlask Indeed, fixed."}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435762249, "post_id": 31164406, "comment_id": 50337762, "body": "Not fixed at all. <code>1024</code> is missing now."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435762301, "post_id": 31164406, "comment_id": 50337792, "body": "The problem is tougher than it looks :D"}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435762508, "post_id": 31164406, "comment_id": 50337941, "body": "Not exactly, it&#39;s <a href=\"https://en.wikipedia.org/wiki/One-liner_program\" rel=\"nofollow noreferrer\">one-liner</a> in Python. So what&#39;s the C equivalent? ;-)"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435763390, "post_id": 31164406, "comment_id": 50338548, "body": "@dlask Updated again, thanks. Problem is tough and something is stil wrong. Trying at it"}, {"owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 0, "creation_date": 1435764236, "post_id": 31164406, "comment_id": 50339157, "body": "Close enough. Thank you for your help. P.s. May be I just need to sleep more an avoid to ask such a questions on public =) Thank you guys anyway for helping."}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 1, "creation_date": 1435764378, "post_id": 31164406, "comment_id": 50339263, "body": "@user1415536 You just need to decide correct for loop termination conditions both on a and b, and it&#39;ll output correctly"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "edited": false, "score": 0, "creation_date": 1435766141, "post_id": 31164406, "comment_id": 50340421, "body": "@user1415536 Updated, now gives correct output, verified."}, {"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435766408, "post_id": 31164406, "comment_id": 50340598, "body": "Finally your result is correct. Speaking about general solution, it would be nice to get rid of the <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Unnamed_numerical_constants\" rel=\"nofollow noreferrer\">magic constants</a> <code>17</code> and <code>16</code>."}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 1, "creation_date": 1435766665, "post_id": 31164406, "comment_id": 50340781, "body": "@dlask You are right, but try to increment or decrement any one of them, and you&#39;ll either get overflow or wrong answer. It was very difficult to reach to those values and settle down."}], "tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": true, "score": 2, "last_activity_date": 1435766090, "last_edit_date": 1435766090, "creation_date": 1435761430, "answer_id": 31164406, "question_id": 31163756, "link": "https://stackoverflow.com/questions/31163756/how-to-generate-a-set-of-numbers/31164406#31164406", "title": "How to generate a set of numbers", "body": "<p>In C</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdint.h&gt;\ntypedef unsigned long long int ull;\n\null cmp(const void * a, const void * b) { return *(ull *)a  - *(ull *)b; } \n\nint main() {\n    int i = 0, a, b;\n    int A = 17, \n        B = 16;\n    int MAX = A * B;\n    ull z[MAX];\n    for (b = 0; b &lt; B; ++b) {\n        for (a = 0; a &lt; A; ++a) {\n            if (i &gt;= MAX) break;\n            z[i++] = pow(2, a) * pow(3, b);\n        }\n    }\n    qsort(z, MAX, sizeof(ull), cmp);\n    printf(\"{ \");\n    for (i = 0; i &lt; 100; ++i)\n        printf(\"%lld%c \", z[i], i &lt; 99 ? ',' : 0);\n    printf(\"}\");\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<blockquote>\n  <p>{ 1, 2, 3, 4, 6, 8, 9, 12, 16, 18, 24, 27, 32, 36, 48, 54, 64, 72, 81, 96, 108, 128, 144, 162, 192, 216, 243, 256, 288, 324, 384, 432, 486, 512, 576, 648, 729, 768, 864, 972, 1024, 1152, 1296, 1458, 1536, 1728, 1944, 2048, 2187, 2304, 2592, 2916, 3072, 3456, 3888, 4096, 4374, 4608, 5184, 5832, 6144, 6561, 6912, 7776, 8192, 8748, 9216, 10368, 11664, 12288, 13122, 13824, 15552, 16384, 17496, 18432, 19683, 20736, 23328, 24576, 26244, 27648, 31104, 32768, 34992, 36864, 39366, 41472, 46656, 49152, 52488, 55296, 59049, 62208, 65536, 69984, 73728, 78732, 82944, 93312 }</p>\n</blockquote>\n\n<p><strong>EDIT</strong>: Gives correct output now without overflow (see <a href=\"http://ideone.com/Rpbqms\" rel=\"nofollow\">http://ideone.com/Rpbqms</a>)</p>\n"}, {"comments": [{"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435765966, "post_id": 31165623, "comment_id": 50340312, "body": "Upvote, your solution is very smart and it gives correct results. Moreover, your pseudocode can be transformed to Python almost without any modification. I can provide it to you if you like."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "reply_to_user": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 0, "creation_date": 1435766099, "post_id": 31165623, "comment_id": 50340391, "body": "@dlask non-necessarily. op asks for c node. but i just don&#39;t want to provide full answer for his own work."}], "tags": [], "owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "is_accepted": false, "score": 2, "last_activity_date": 1435764529, "creation_date": 1435764529, "answer_id": 31165623, "question_id": 31163756, "link": "https://stackoverflow.com/questions/31163756/how-to-generate-a-set-of-numbers/31165623#31165623", "title": "How to generate a set of numbers", "body": "<p>too much brute force...</p>\n\n<p>let me propose a <code>O(n*lg n)</code> time <code>O(n)</code> space algorithm to achieve these.</p>\n\n<p>i am not gonna provide any real code, but a piece of self invented pseudocode.</p>\n\n<p>the idea is to use min-heap to maintain ordering:</p>\n\n<pre><code>func first-n-of-that(limit)\n    heap = min-heap()\n    heap.insert 1\n    results = []\n    while results.length &lt; limit\n        to-add = heap.pop\n        results.add to-add\n        heap.insert 2 * to-add\n        heap.insert 3 * to-add\n    return results\n</code></pre>\n\n<p>the correctness is provable by deduction.</p>\n"}], "owner": {"reputation": 196, "user_id": 1415536, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4db0db6372696795afe9e9b33ad30dd6?s=128&d=identicon&r=PG", "display_name": "user1415536", "link": "https://stackoverflow.com/users/1415536/user1415536"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1435776028, "accepted_answer_id": 31164406, "answer_count": 3, "score": -1, "last_activity_date": 1435766090, "creation_date": 1435759814, "last_edit_date": 1435761024, "question_id": 31163756, "link": "https://stackoverflow.com/questions/31163756/how-to-generate-a-set-of-numbers", "closed_reason": "Not suitable for this site", "title": "How to generate a set of numbers", "body": "<p>I have to generate the set <code>Z</code> of the first 100 integers that satisfy the equation <code>i = 2^a * 3^b</code>, with <code>a</code> and <code>b</code> being integers.</p>\n\n<p>That is, <code>Z = {1, 2, 3, 4, 6, 8, 9, 12, ...}</code></p>\n\n<p>What algorithm could I use ? I'll need to implement it in C.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1435759882, "post_id": 31163724, "comment_id": 50335951, "body": "Please edit the post and fix indention. And ensure your code editor is set to not indent with tabs but instead to insert spaces."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435762672, "post_id": 31163724, "comment_id": 50338065, "body": "Casts  from and to <code>void*</code> are unnecessary."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435761261, "creation_date": 1435761261, "answer_id": 31164345, "question_id": 31163724, "link": "https://stackoverflow.com/questions/31163724/single-function-interface-using-struct-for-in-out-parameters/31164345#31164345", "title": "Single function interface using struct for in/out parameters", "body": "<p>First of all, the standard rule of thumb for doing manual optimizations. Generally, manual code optimizations don't make much sense unless:</p>\n\n<ul>\n<li>You have benchmarked your code and found out that a certain part of it is a bottleneck.</li>\n<li>You have a given hardware in mind.</li>\n<li>You are an expert of the given hardware.</li>\n</ul>\n\n<p>That being said, a C programmer will always have to ensure that they aren't writing stupidly inefficient things that the compiler can't very well do much about. For example complex nested loop constructs, complex nested if-elses, complex function calls, recursion etc etc.</p>\n\n<hr>\n\n<p>In this specific case, the code looks good, there's not really much you can do to improve performance.</p>\n\n<p>A switch-case like this one, based on an enum with adjacent numbers, are ideal for the optimizer. The compiler can optimize it into an array of function pointers, each function pointer corresponding to a <code>case</code>. Or alternatively into an array of direct jump addresses.</p>\n\n<p>It is not really something the C programmer needs to concern themselves with, but they may need to consider that a switch where every integer case is an adjacent number likely gets better optimized than a switch with any random numbers.</p>\n\n<p>In this case, the only optimization concern is probably branch prediction. But since you are using different function signatures, there's not really a way to avoid it. If you could rewrite the functions to use the same signatures, the function could be optimized ever so slightly. But we are talking nanoseconds here.</p>\n"}], "owner": {"reputation": 5854, "user_id": 338476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c28b92ae5611083c82d6cde165ab29c0?s=128&d=identicon&r=PG", "display_name": "tzippy", "link": "https://stackoverflow.com/users/338476/tzippy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31164345, "answer_count": 1, "score": 0, "last_activity_date": 1435761261, "creation_date": 1435759728, "last_edit_date": 1435760010, "question_id": 31163724, "link": "https://stackoverflow.com/questions/31163724/single-function-interface-using-struct-for-in-out-parameters", "title": "Single function interface using struct for in/out parameters", "body": "<p>I want to create a single function interface with a function that takes an ID and a parameter struct.\nInternally, functions are called and parameters from the struct are passed to the function. the returning values are passed to pointers in the struct.\nWhat are some pitfalls in this design? Is there anything that is faster than a switch-case statement?</p>\n\n<pre><code>enum Id{ CALL_1, CALL_2};\nstruct PARM_1 { int parm1; int parm2; void* data};\nstruct PARM_2 { int parm1; int* parm2};\n\nvoid function(int id, void* parm)\n{\n  switch (id)\n  {\n   case CALL_1:\n   {\n    PARM_1* p = (struct PARM_1*) parm;\n    function_1(p-&gt;parm1, p-&gt;parm2, parm-&gt;data); \n    break;\n   }\n  case CALL_2:\n   {\n    PARM_2* p = (struct PARM_2*) parm;\n    function_2(p-&gt;parm1, p-&gt;parm2);\n    break;\n   }\n  default:\n    break;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>void foo(int parm1, int parm2, void <em>data);\nvoid barint parm1, int</em> parm2);</p>\n"}, {"tags": ["c", "pointers", "structure", "singly-linked-list"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435759266, "post_id": 31163462, "comment_id": 50335457, "body": "In the later version, <code>if(head == NULL) {*head = *temp;}</code> will segfault."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435759269, "post_id": 31163462, "comment_id": 50335460, "body": "With a single <code>*</code> you can modify what the parameter points to, but not the pointer itself. That&#39;s when you need the double<code>**</code> and then you can modify both. With a single star, you have (as you say) to return a new pointer value from the function if you want to modify it."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1435759645, "post_id": 31163462, "comment_id": 50335746, "body": "Likewise, your latter version <code>*run = *head;</code> invokes undefined behavior as well; <code>run</code> is indeterminate. Stick with <i>either</i> of the ways you know work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435759680, "post_id": 31163462, "comment_id": 50335775, "body": "Yeah I know my code is not executable and I could not able to make it executable. That is why I posted the question @SouravGhosh"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435759740, "post_id": 31163462, "comment_id": 50335827, "body": "@Denise You did not get my point. I think, you <i>actually</i> meant to write <code>head = temp</code>, isn&#39;t it? There is no need for the dereference."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435760028, "post_id": 31163462, "comment_id": 50336049, "body": "No, I know that the head value will not get reflected until I change *head. Okay let me explain you with another piece of code @SouravGhosh"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435760163, "post_id": 31163462, "comment_id": 50336141, "body": "@Denise I&#39;m doing a miserable job in explaining myself. :-(  It is not about the argument passing logic. You&#39;re essentially checking for NULL and de-referencing a NULL pointer, which is UB. Am I clear?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435760571, "post_id": 31163462, "comment_id": 50336485, "body": "No, I am trying to modify a variable in the main, inside a function with single pointer. If that is not possible please explain me why. I am literally going crazy with this structure pointer. I have edited the post again. Please see if that is more clear @SouravGhosh"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1435760808, "post_id": 31163462, "comment_id": 50336668, "body": "Tty with a triple pointer. :D"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1435760890, "post_id": 31163462, "comment_id": 50336729, "body": "But, how it is working for int and not for a structure variable? I am really going insane. Sorry if that is a very dumb question but if I am not understanding how that is possible only for int variable alone, wont be able to proceed further @WhozCraig"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "edited": false, "score": 0, "creation_date": 1435761494, "post_id": 31163685, "comment_id": 50337220, "body": "you mean that I can modify head and not *head ?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1435759634, "creation_date": 1435759634, "answer_id": 31163685, "question_id": 31163462, "link": "https://stackoverflow.com/questions/31163462/how-can-i-pass-a-single-pointer-to-a-structure-inside-a-function-and-modify-tha/31163685#31163685", "title": "How can I pass a single pointer to a structure, inside a function and modify that structure variable?", "body": "<blockquote>\n  <p><em>How can I pass a single pointer to a structure, inside a function and modify that structure variable?</em></p>\n</blockquote>\n\n<p><strong>TL;DR :</strong> you can modify the <em>value</em> pointed by the pointer, but you cannot modify the passed pointer itself.</p>\n\n<p><code>C</code> uses pass-by-value for function parameter passing. You cannot change the <em>value</em> of the received parameter from the called function and expect it to <em>reflect</em> in the variable used as the argument from the caller function. </p>\n\n<p>However, in case of pointers, you usually don't modify the pointer itself, rather, we modify the <em>value</em> it points to. So, the changed value pointed by that pointer will be <em>reflected</em> in the caller function.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "edited": false, "score": 0, "creation_date": 1435764477, "post_id": 31165122, "comment_id": 50339344, "body": "You compiled it ?? It is throwing incompatible types errors for the followings,  <code>*head = temp;</code> and <code>run = *head</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "edited": false, "score": 0, "creation_date": 1435764894, "post_id": 31165122, "comment_id": 50339641, "body": "And <code>invalid operands to binary ==</code> for <code>*head == NULL</code>"}, {"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "edited": false, "score": 0, "creation_date": 1435783368, "post_id": 31165122, "comment_id": 50350287, "body": "can you post your struct definition here (the Node)?"}, {"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "edited": false, "score": 0, "creation_date": 1435815825, "post_id": 31165122, "comment_id": 50359646, "body": "I just edited it, My bad :) *head should&#39;ve been **head because *head in the parameter is address of the first node but **head is address of the pointer that points to the first node."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "edited": false, "score": 0, "creation_date": 1435841249, "post_id": 31165122, "comment_id": 50375353, "body": "As I already told, I know the method of doing the same with double pointer. All I need is, I can change my *var in function and make it get reflected in the main in case of an int data type. I don&#39;t know how should I do the same in case of a structure. Please help me out in that if you can @Lukas. Thanks for your explanations till now anyways."}, {"owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "edited": false, "score": 0, "creation_date": 1435843773, "post_id": 31165122, "comment_id": 50377247, "body": "&quot; I just wanted to know whether I can modify a value in the main by passing it as a parameter to the function, only as a single pointer to the (structure) variable&quot; That is passing a copy of the var (passing by value) . there won&#39;t be reference to where the var in main is. when you pass *head not **head, you&#39;ll have address of the first node if it exists and you can modify it, however if there is no node, you can&#39;t assign head to temp since you don&#39;t have reference to head, you have its value copied which will be NULL in this case."}], "tags": [], "owner": {"reputation": 3311, "user_id": 3405387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VYA2r.png?s=128&g=1", "display_name": "Lukas", "link": "https://stackoverflow.com/users/3405387/lukas"}, "is_accepted": false, "score": 1, "last_activity_date": 1435826313, "last_edit_date": 1435826313, "creation_date": 1435763232, "answer_id": 31165122, "question_id": 31163462, "link": "https://stackoverflow.com/questions/31163462/how-can-i-pass-a-single-pointer-to-a-structure-inside-a-function-and-modify-tha/31165122#31165122", "title": "How can I pass a single pointer to a structure, inside a function and modify that structure variable?", "body": "<p>When you check if head is empty (has NULL value), you need to check the content of head (*head), not head itself since that means its own address. so if (head == NULL), should be *head == Null. head represents memory address of the pointer head and *head represents what is saved in that address(what is pointed to). With that logic, *head = temp; is correct as it will save the address of the dynamically allocated memory address -temp in head however the later one (*head = *temp) will attempt to copy/save content of temp to head which doesn't make sense since head is has only a size of a pointer and temp could be allocated whatever size the node is. I hope I helped at least a little bit and here is a working version of your code :)</p>\n\n<pre><code>int insert(int data, Node **head) //WC, This is correct because the parameter **head takes address of the pointer to the first node if any. \n//int insert(int data, Node *head)\n{\n   Node *temp, *run;\n   temp = (Node *) malloc(sizeof(Node));\n   temp-&gt;data = data;\n   temp-&gt;next = NULL;\n\n   if(*head == NULL) //WC, checking if head has any address value inside (not its own address)\n   {  \n      printf(\"1st node\\n\");\n      *head = temp; //WC, because temp has address of the allocated memory and you wanna hold that address as the head / first node.\n   }\n   else\n   {\n      printf(\"node after first\\n\");\n      run = *head //WC\n      //*run = *head; you can't use this, one reason is because head could point to any size of memory (e.g 10000kb) and run has a size of a pointer, just few bytes.  \n      while(run-&gt;next != NULL)\n      {\n         run = run-&gt;next;\n      }\n      run-&gt;next = temp;\n   }\n\n   return 1;\n}\n</code></pre>\n\n<p>(Edit: multiple pointer use might complicate reading so I'd rather use the following struct defination)</p>\n\n<pre><code>typedef struct node* PNode; //Pointer to node\ntypedef struct node {\n    int item;\n    Pnode next;\n} Node;\n\nvoid insert(int data, PNode *head) {\n    PNode temp, run = *head;\n    temp = (PNode)malloc(sizeof(Node));\n    temp-&gt;data = data;\n    temp-&gt;next = NULL;\n    if (run == NULL){\n        *head = temp;\n    }//first node\n    else{\n        while (1) {\n            if (run-&gt;next == NULL) {\n                run-&gt;next = temp;\n                break;\n            }\n            run = run-&gt;next;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3857354"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435826313, "creation_date": 1435759048, "last_edit_date": 1435762424, "question_id": 31163462, "link": "https://stackoverflow.com/questions/31163462/how-can-i-pass-a-single-pointer-to-a-structure-inside-a-function-and-modify-tha", "title": "How can I pass a single pointer to a structure, inside a function and modify that structure variable?", "body": "<p>In the below piece of code, I am able to modify the a variable used in main from the function.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n    int main()\n    {\n      int *a,b=10;\n      a = &amp;b;\n      printf(\"%d\\n\",*a);\n      ref(a);\n      printf(\"%d\\n\",*a);\n      return 1;\n    }\n\n    int ref(int *a)\n    {\n       int b = 98;\n       *a = b;\n       return 1;\n    }\n</code></pre>\n\n<p>whereas, in the below piece of code, I couldnot able to do the same.</p>\n\n<p>I know that we can modify a value which is in the main, from a function by using double pointer. I also know that we can use single pointer to modify, by returning the required address to the main and getting it in the main with the same data type. I just wanted to know whether I can modify a value in the main by passing it as a parameter to the function, only as a single pointer to the (structure) variable.</p>\n\n<p><em>Note: I have denoted the working code with the comment '//WC'. Will be very thankful if someone can explain me the same.</em></p>\n\n<pre><code>  //int insert(int data, Node **head) //WC\n    int insert(int data, Node *head)\n    {\n       Node *temp, *run;\n       temp = (Node *) malloc(sizeof(Node));\n       temp-&gt;data = data;\n       temp-&gt;next = NULL;\n\n       //if(*head == NULL) //WC\n       if(head == NULL)\n       {  \n          printf(\"1st node\\n\");\n          //*head = temp; //WC\n          *head = *temp;\n       }\n       else\n       {\n          printf(\"node after first\\n\");\n          //run = *head //WC\n          *run = *head;\n          while(run-&gt;next != NULL)\n          {\n             run = run-&gt;next;\n          }\n          run-&gt;next = temp;\n       }\n\n       return 1;\n    }\n    int main()\n    {\n       Node *head;\n       insert(10, head);\n       insert(20, head);\n       insert(30, head);\n       insert(40, head);\n       insert(50, head);\n\n       return 1;\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 0, "creation_date": 1435758963, "post_id": 31163386, "comment_id": 50335231, "body": "Second scanf requires a space before carrying on..."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 3, "creation_date": 1435759056, "post_id": 31163386, "comment_id": 50335301, "body": "Please don&#39;t tag questions as both <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>. Chose the right one beforehand, unless it&#39;s about the cross-section between both languages."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1435759065, "post_id": 31163386, "comment_id": 50335308, "body": "what are the <code>dialog&lt;n&gt;</code>s?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1435759563, "post_id": 31163386, "comment_id": 50335683, "body": "<i>The program simply stops working</i> is not very descriptive. Care to clarify?"}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1435759604, "post_id": 31163386, "comment_id": 50335720, "body": "Do you reach the second scanf ? Does it print the value of <code>dialog0</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435759825, "post_id": 31163386, "comment_id": 50335890, "body": "What happens when you don&#39;t enter either <code>s</code> or <code>n</code> (or uppercase)?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435760034, "post_id": 31163386, "comment_id": 50336055, "body": "<i>&quot;feed input to <code>choice</code>,&quot;</i> maybe important here... show us please."}, {"owner": {"reputation": 161, "user_id": 5069931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4PckK.png?s=128&g=1", "display_name": "Nexus", "link": "https://stackoverflow.com/users/5069931/nexus"}, "edited": false, "score": 0, "creation_date": 1435763134, "post_id": 31163386, "comment_id": 50338366, "body": "Oh, sorry! It&#39;s my first time here."}, {"owner": {"reputation": 161, "user_id": 5069931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4PckK.png?s=128&g=1", "display_name": "Nexus", "link": "https://stackoverflow.com/users/5069931/nexus"}, "edited": false, "score": 0, "creation_date": 1435763404, "post_id": 31163386, "comment_id": 50338558, "body": "Actually, I&#39;ve imported all the &quot;dialogs&quot; from another archive. As for the input, I put n,N,s and S, but none of these chars seem to work.  I&#39;ve even tried to put &quot;a&quot; in the program, but it doesn&#39;t work. I don&#39;t really know if the problem is at the <i>scanf</i> or the <i>if</i> functions, all I know is that the program ends there. No, it doesn&#39;t print dialog0. The following message is shown when the program stops working: &quot;Game.exe stopped working&quot;"}, {"owner": {"reputation": 161, "user_id": 5069931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4PckK.png?s=128&g=1", "display_name": "Nexus", "link": "https://stackoverflow.com/users/5069931/nexus"}, "edited": false, "score": 0, "creation_date": 1435763624, "post_id": 31163386, "comment_id": 50338712, "body": "I actually thought it was a pretty simple mistake that I didn&#39;t see, that&#39;s why I didn&#39;t give you a better description."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1435759922, "post_id": 31163760, "comment_id": 50335980, "body": "Please explain why that is needed and will solve the problem?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1435759924, "post_id": 31163760, "comment_id": 50335984, "body": "That won&#39;t probably do much unless he is deliberately inserting whitespace characters before entering the first input character, which is unlikely, I&#39;d say."}], "tags": [], "owner": {"reputation": 42, "user_id": 5035766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a943b3e904d7344a28c56d0eb0c80bcc?s=128&d=identicon&r=PG&f=1", "display_name": "john doe", "link": "https://stackoverflow.com/users/5035766/john-doe"}, "is_accepted": false, "score": 0, "last_activity_date": 1436190883, "last_edit_date": 1436190883, "creation_date": 1435759822, "answer_id": 31163760, "question_id": 31163386, "link": "https://stackoverflow.com/questions/31163386/c-program-crashes-after-char-input/31163760#31163760", "title": "C program crashes after char input", "body": "<p>You're missing a space within your first <code>scanf</code>:</p>\n\n<pre><code>...\nputs(intro);\nscanf(\" %c\", &amp;choice);  /* missing the space in your code*/\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1435761358, "post_id": 31163832, "comment_id": 50337097, "body": "This <code>get_next_input()</code> function sounds like an overly complicated method for ignoring whitespaces. Why not insert a whitespace in scanf&#39;s format string? I don&#39;t see how this might be a better approach."}], "tags": [], "owner": {"reputation": 54473, "user_id": 41747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc53a4faffef3f7a1d0a3c492d21757?s=128&d=identicon&r=PG", "display_name": "D.Shawley", "link": "https://stackoverflow.com/users/41747/d-shawley"}, "is_accepted": false, "score": 0, "last_activity_date": 1435760503, "last_edit_date": 1435760503, "creation_date": 1435760040, "answer_id": 31163832, "question_id": 31163386, "link": "https://stackoverflow.com/questions/31163386/c-program-crashes-after-char-input/31163832#31163832", "title": "C program crashes after char input", "body": "<p>The behavior of <code>scanf</code> is interesting especially when you include whitespace in the format string.  When I wrote more console-oriented applications and wasn't using something like curses, I used a function like the following to read input:</p>\n\n<pre><code>char\nget_next_input(void)\n{\n        int ch;\n        while ((ch=getchar()) != EOF) {\n                if (!isspace(ch)) {\n                        return (char)ch;\n                }\n        }\n        return (char)'\\0';\n}\n</code></pre>\n\n<p>It returns the next non-whitespace character in the stream or <code>'\\0'</code> on EOF.  I found it more reliable than using <code>scanf</code> across various implementations.</p>\n\n<p>The problem that you are probably experiencing is line buffering on <code>stdin</code>.  The call to <code>scanf</code> might not return until you press enter (e.g., enter a newline character).</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1435761229, "last_edit_date": 1435761229, "creation_date": 1435760899, "answer_id": 31164187, "question_id": 31163386, "link": "https://stackoverflow.com/questions/31163386/c-program-crashes-after-char-input/31164187#31164187", "title": "C program crashes after char input", "body": "<p>The program I compiled does not \"stop working\" (I filled in the missing strings). It simply exits when I enter <code>'n'</code> at the first response, because, to summarise, it is like this.</p>\n\n<pre><code>int main() {\n    char choice;\n    puts(intro);\n    scanf(\"%c\", &amp;choice);\n    if (choice == 's' || choice == 'S') {\n        //  ...\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So <code>'n'</code> simply exits the program, otherwise when I start with <code>'s'</code> and then continue with <code>'n'</code> or <code>'s'</code> I get the printed dialogs. Although as I commented above, what is supposed to happen when neither <code>'n'</code> or <code>'s'</code> are entered?</p>\n\n<p>BTW you have no prompts to help the user know what they are supposed to enter, or why.</p>\n"}], "owner": {"reputation": 161, "user_id": 5069931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4PckK.png?s=128&g=1", "display_name": "Nexus", "link": "https://stackoverflow.com/users/5069931/nexus"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "closed_date": 1435777276, "answer_count": 3, "score": -4, "last_activity_date": 1436190883, "creation_date": 1435758857, "last_edit_date": 1435759764, "question_id": 31163386, "link": "https://stackoverflow.com/questions/31163386/c-program-crashes-after-char-input", "closed_reason": "Not suitable for this site", "title": "C program crashes after char input", "body": "<p>I am new to the C programming language and I've been trying to make a little text-based game in it. The input is very simple, as the user needs to input <code>S</code> or <code>s</code> and <code>N</code> or <code>n</code>.</p>\n\n<p>The problem is, when I run the program and feed input to <code>choice</code>, the program simply stops working.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>/*O jogo */\n#include &lt;stdio.h&gt;\n#include \"story.h\"\n\nint main() {\n  char choice;\n  puts(intro);\n  scanf(\"%c\", &amp;choice);\n  if (choice == 's' || choice == 'S') {\n    puts(dialog0);\n    puts(dialog1);\n    puts(dialog2);\n    puts(dialog3);\n    puts(dialog4);\n    puts(dialog5);\n    scanf(\" %c\", &amp;choice);\n\n    if (choice == 's' || choice == 'S')\n      puts(dialog6option1);\n    else if (choice == 'n' || choice == 'N') {\n      puts(dialog6option2);\n      puts(dialog6option2pt2);\n    }\n\n    puts(dialog6);\n    puts(dialog7);\n    puts(dialog8);\n    puts(dialog9);\n    puts(dialog10);\n    scanf(\" %c\", &amp;choice);\n\n    if (choice == 's' || choice == 'S') {\n      puts(dialog10option1);\n      puts(dialog10option1pt2);\n    } else if (choice == 'n' || choice == 'N') {\n      puts(dialog10option2);\n      puts(dialog10option2pt2);\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "shell", "makefile", "timestamp"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1435758952, "post_id": 31163321, "comment_id": 50335220, "body": "<code>make</code> will only recompile if you&#39;ve modified <code>main.c</code> (under the assumption that your program consists of just <code>main.c</code>).  And it doesn&#39;t take long for <code>make</code> to run and do nothing \u2014 or it shouldn&#39;t. So, what&#39;s the problem you&#39;re trying to solve? Why would the modification time on <code>main.c</code> change if you haven&#39;t changed the content of the file? Have you got some broken rule in your makefile such that the program is linked every time even if you haven&#39;t changed anything? (See <a href=\"http://stackoverflow.com/questions/31151069/\"><code>make</code> compiles some programs every time even if they are just compiled</a>)"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435759051, "post_id": 31163321, "comment_id": 50335293, "body": "@JonathanLeffler yes, it doesn&#39;t. I just say that because I saw the answer that uses touch. I said that for simplicity. If the file is modified though, the timestamp would surely differ, that&#39;s why I had this idea. Thanks for the comment. I will edit. Better now? :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1435759554, "post_id": 31163321, "comment_id": 50335677, "body": "(1) If you&#39;re debugging and changing your code, you need to rebuild to see the effect of the changed code.  That means you need to relink.  (2) If <code>main.c</code> has not changed, then your program will not be relinked unless there is a bug in your <code>makefile</code> that forces the relink when it is not needed.  If (2) is your problem, fix your <code>makefile</code>.  If (1) is your problem, why are you saving the edits before you&#39;re ready to rebuild the program.  Or why don&#39;t you just run <code>a.out</code> directly instead of running your script.  Basically, you seem to have a methodological problem; you&#39;re misusing <code>make</code>\u2026"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435760090, "post_id": 31163321, "comment_id": 50336100, "body": "Maybe you are right @JonathanLeffler, thanks for pointing out. :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435767917, "post_id": 31163321, "comment_id": 50341557, "body": "I note that the problem described in the companion question, <a href=\"http://stackoverflow.com/questions/31164161\">SO 31164161</a> is precisely of the same type as in <a href=\"http://stackoverflow.com/questions/31151069/\"><code>make</code> compiles some programs every time even if they are just compiled</a>, and a number of other earlier questions."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435769856, "post_id": 31163321, "comment_id": 50342628, "body": "Good catch @JonathanLeffler."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 1, "creation_date": 1435825189, "post_id": 31163321, "comment_id": 50364414, "body": "Call <b>always</b> make.  If <code>main.c</code> has to be recompiled, it will be!  Make does the work best on detecting if some file has been modified, so why to put that in one shell script to decide if we call to make.  Just call it, and let it decide!"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435833711, "post_id": 31163321, "comment_id": 50370282, "body": "@LuisColorado you are right, this is the right approach!"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435760335, "post_id": 31163720, "comment_id": 50336276, "body": "Note that while Bash and Korn shell support <code>-ot</code> in a test, POSIX does not require such support and POSIX-compliant shells might not then work.  This shouldn&#39;t be an issue since the script starts <code>#!&#47;bin&#47;bash</code>, but \u2026"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1435760584, "post_id": 31163720, "comment_id": 50336498, "body": "Thanks! However, I may have to change my Makefile, because I am not sure what am I missing, but that&#39;s another question. I would appreciate if you could explain the last two symbols here: <code>-o $@ $^</code>."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435760821, "post_id": 31163720, "comment_id": 50336676, "body": "That <code>main: main.c</code> rule is essentially the same as the built in <code>%: %.c</code> rule that make already has (which uses <code>$(CFLAGS)</code> and <code>$(CC)</code> already) so that rule definition isn&#39;t necessary so the makefile for a single-file C program like this can just be the <code>CFLAGS</code> definition (and <code>CC</code> if necessary but on many systems the default of <code>cc</code> will be <code>gcc</code> anyway)."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435760866, "post_id": 31163720, "comment_id": 50336708, "body": "Thanks @EtanReisner, follow-up question here: <a href=\"http://stackoverflow.com/questions/31164161/avoid-linking-and-compiling-in-make-if-not-needed\" title=\"avoid linking and compiling in make if not needed\">stackoverflow.com/questions/31164161/&hellip;</a>"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435761605, "post_id": 31163720, "comment_id": 50337295, "body": "@EtanReisner Yes, we don&#39;t even need to create a makefile, just running  <code>make main</code> in the working directory will do."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1435761804, "post_id": 31163720, "comment_id": 50337452, "body": "Correct, you don&#39;t even need a makefile at all if you don&#39;t need to set any values (or don&#39;t mind putting them on the command line)."}], "tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1435759717, "creation_date": 1435759717, "answer_id": 31163720, "question_id": 31163321, "link": "https://stackoverflow.com/questions/31163321/call-make-from-script-only-if-main-c-is-modified/31163720#31163720", "title": "Call make from script, only if main.c is modified", "body": "<p>Simply</p>\n\n<pre><code>#!/bin/bash\n\nif [ a.out -ot main.c ]; then\n    make &gt; compile.txt\nfi\n\n./a.out\n</code></pre>\n\n<p><code>-ot</code> is equivalent to <strong>older than</strong></p>\n\n<p>However, this behaviour is expected from make itself. I would prefer a makefile like</p>\n\n<pre><code>CC = gcc\nCFLAGS = -Wall -W\n\nmain: main.c\n    $(CC) $(CFLAGS) -o $@ $^\n</code></pre>\n\n<p>The <code>main</code> rule would run only if <code>main.c</code> is updated after last <code>make</code></p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 31163720, "answer_count": 1, "score": 0, "last_activity_date": 1435759717, "creation_date": 1435758715, "last_edit_date": 1495542698, "question_id": 31163321, "link": "https://stackoverflow.com/questions/31163321/call-make-from-script-only-if-main-c-is-modified", "title": "Call make from script, only if main.c is modified", "body": "<p>The problem: I want to run only a script (e.g. run.sh), which will decide for me if <code>make</code> should be called (and call it if needed) and then run the executable.</p>\n\n<hr>\n\n<p>My project has only one file, that is main.c. However, just the linking makes me wait a bit, something that I do not like when I debug and I am eager for the program to run. I would like something like this into run.sh:</p>\n\n<pre><code>#!/bin/bash\nif[ main.c has changed from the last time make was called] then\n  make &gt; compile.txt\nfi\n./a.out\n</code></pre>\n\n<p>so that the <code>make</code> is called only if main.c is modified. By modified, one could take that the timestamp is changed (even if that may not the actual criterion). Is this feasible?</p>\n\n<hr>\n\n<p>If so, I saw this <a href=\"https://stackoverflow.com/a/9454226/2411320\">answer</a>, which made me think that every time I enter the body of the if statement that calls make, a copy of main.c would be created, or the timestamp of the file would be stored (in a file maybe), so that the next time the script runs, it will restore that information and check the if condition to see if timestamps differ. So, the second question is, how to do it?</p>\n"}, {"tags": ["c", "visual-studio", "rust"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1435758325, "post_id": 31162973, "comment_id": 50334720, "body": "I imagine it&#39;s theoretically possible; you&#39;d have to match the decorated function names, calling conventions, parameters, and return types. Why not create a dll and build a thunk layer in C? Probably will end up being more stable."}, {"owner": {"reputation": 166, "user_id": 3042749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a059c80ee1852c0245cde6777a941bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Jouan", "link": "https://stackoverflow.com/users/3042749/jouan"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435758478, "post_id": 31162973, "comment_id": 50334851, "body": "I would rather stay away from DLLs for performance reasons..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435758704, "post_id": 31162973, "comment_id": 50335019, "body": "In my experience, they are fine one you&#39;ve called a function once and can cache the function pointer."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435758748, "post_id": 31162973, "comment_id": 50335056, "body": "@Bathsheba: I lack the expertise with MVSC and in general the Windows way of things; on Linux the answer is a resounding yes because there Rust can match the C ABI (using <code>extern</code> function declarations). I naively thought that C on Windows was simple as well (contrary to C++), that is had a single calling convention, etc... otherwise as its a role of Rust to provide a C ABI, it will require some tweaking."}, {"owner": {"reputation": 166, "user_id": 3042749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a059c80ee1852c0245cde6777a941bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Jouan", "link": "https://stackoverflow.com/users/3042749/jouan"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435759000, "post_id": 31162973, "comment_id": 50335258, "body": "@Bathsheba Do you have documentation on how this caching mechanism works? I always assumed that the cost of a DLL function call was roughly similar to the cost of a virtual function call."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1435759686, "post_id": 31162973, "comment_id": 50335783, "body": "I use something on these lines: typedef jint (JNICALL *PFN_GET)(JavaVM **vmBuf, jsize bufLen, jsize *nVMs);                 static PFN_GET pfn = NULL;                 if (pfn == NULL){                     pfn = (PFN_GET)GetProcAddress(s_jni_library, &quot;JNI_GetCreatedJavaVMs&quot;);                 }"}, {"owner": {"reputation": 166, "user_id": 3042749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a059c80ee1852c0245cde6777a941bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Jouan", "link": "https://stackoverflow.com/users/3042749/jouan"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435760261, "post_id": 31162973, "comment_id": 50336217, "body": "@Bathsheba Ah I see. That seems faster than a virtual function call, but still not as fast as a static function call. You can&#39;t inline and you have the overhead of the pointer check and the overhead of a function pointer call."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1435760700, "post_id": 31162973, "comment_id": 50336584, "body": "If performance is <i>that</i> critical then you&#39;ll have to force the static linkage. I&#39;ve never tried it but as I&#39;ve already said, I imagine it is possible, with some pain. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 46065, "user_id": 234590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/463c0219a51a5d1fd08e1fa280811b57?s=128&d=identicon&r=PG", "display_name": "Francis Gagn&#233;", "link": "https://stackoverflow.com/users/234590/francis-gagn%c3%a9"}, "edited": false, "score": 1, "creation_date": 1435778817, "post_id": 31168439, "comment_id": 50347762, "body": "Be careful, Rust&#39;s <code>i32</code> is not necessarily equivalent to C&#39;s <code>int</code>."}, {"owner": {"reputation": 72538, "user_id": 497043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/16a138ff3b9c8f1663f8a0613c47b60a?s=128&d=identicon&r=PG", "display_name": "Chris Morgan", "link": "https://stackoverflow.com/users/497043/chris-morgan"}, "edited": false, "score": 1, "creation_date": 1435787516, "post_id": 31168439, "comment_id": 50352376, "body": "Use <code>libc::c_int</code> instead."}], "tags": [], "owner": {"reputation": 95, "user_id": 3064195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d26b41c66113b1ab8599e5c5270603?s=128&d=identicon&r=PG&f=1", "display_name": "Eidolon", "link": "https://stackoverflow.com/users/3064195/eidolon"}, "is_accepted": true, "score": 2, "last_activity_date": 1436300152, "last_edit_date": 1436300152, "creation_date": 1435773429, "answer_id": 31168439, "question_id": 31162973, "link": "https://stackoverflow.com/questions/31162973/rust-and-c-compatibility-with-visual-studio/31168439#31168439", "title": "Rust and C compatibility with Visual Studio", "body": "<p>If you want to use only <code>rustc</code> to produce a static library, you will do this by specifying some attributes in your crate's <code>lib.rs</code> file, and marking exported functions as so:</p>\n\n<pre><code>#![crate_type = \"static_lib\"]\n#![crate_name = \"mylib\"]\n\nuse libc::c_int;\n\n#[no_mangle]\npub extern fn my_exported_func(num: c_int) -&gt; c_int {\n    num + 1\n}\n</code></pre>\n\n<p>Then simply invoke <code>rustc lib.rs</code>. This applies to all platforms that <code>rustc</code> supports.</p>\n\n<p>In a C/C++ header, add:</p>\n\n<pre><code>#pragma once\n\n// only use extern block if the header is put inside a C++ CU\nextern \"C\" {\n    int my_exported_func(int num);\n}\n</code></pre>\n\n<p>and link the output <code>.lib</code> or <code>.a</code> as necessary.</p>\n\n<p>For Cargo, you can specify the crate type and name in your <code>Cargo.toml</code>.</p>\n\n<p>Sources:</p>\n\n<ul>\n<li><a href=\"http://rustbyexample.com/attribute/crate.html\" rel=\"nofollow\">http://rustbyexample.com/attribute/crate.html</a></li>\n<li><a href=\"https://doc.rust-lang.org/book/ffi.html\" rel=\"nofollow\">https://doc.rust-lang.org/book/ffi.html</a></li>\n</ul>\n"}], "owner": {"reputation": 166, "user_id": 3042749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a059c80ee1852c0245cde6777a941bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Jouan", "link": "https://stackoverflow.com/users/3042749/jouan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 31168439, "answer_count": 1, "score": 4, "last_activity_date": 1436300152, "creation_date": 1435757769, "question_id": 31162973, "link": "https://stackoverflow.com/questions/31162973/rust-and-c-compatibility-with-visual-studio", "title": "Rust and C compatibility with Visual Studio", "body": "<p>Is it possible to create a static library compiled with rustc and link it to an executable compiled with MSVC?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel", "cpu"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4408378, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s6UN41LfNhk/AAAAAAAAAAI/AAAAAAAAANY/MO01jNjZ2Ho/photo.jpg?sz=128", "display_name": "Invicnaper", "link": "https://stackoverflow.com/users/4408378/invicnaper"}, "reply_to_user": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1435769045, "post_id": 31166750, "comment_id": 50342188, "body": "ctrl +c works for me when I&#39;m using Qemu, (gdb) hbreak kmain No symbol table is loaded.  Use the &quot;file&quot; command. Make hw breakpoint pending on future shared library load? (y or [n]) y  Hardware assisted breakpoint 1 (kmain) pending. (gdb) continue Continuing. ^C Program received signal SIGINT, Interrupt. 0x001003dc in ?? () (gdb) info registers eax            0xf\t15"}, {"owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "edited": false, "score": 0, "creation_date": 1435769220, "post_id": 31166750, "comment_id": 50342277, "body": "but I am using gdb and serial connection between machines, not Qemu"}], "tags": [], "owner": {"reputation": 21, "user_id": 4408378, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s6UN41LfNhk/AAAAAAAAAAI/AAAAAAAAANY/MO01jNjZ2Ho/photo.jpg?sz=128", "display_name": "Invicnaper", "link": "https://stackoverflow.com/users/4408378/invicnaper"}, "is_accepted": false, "score": 0, "last_activity_date": 1435768952, "last_edit_date": 1435768952, "creation_date": 1435767633, "answer_id": 31166750, "question_id": 31162843, "link": "https://stackoverflow.com/questions/31162843/debug-linux-kernel-running-on-intel-target-from-amd-host-how-to-return-control/31166750#31166750", "title": "Debug linux kernel running on Intel target from AMD host - how to return control to gdb?", "body": "<p>When you set breakpoints and write continue , you can do a ctrl + c on gdb to write a new command , for example : <code>info registers</code> to see registers status from the start to your breakpoints .</p>\n\n<p>Or Try out this using Qemu and gdb . you can use </p>\n\n<p><code>Qemu -s -S</code> , qemu will listen on <code>localhost:1234</code></p>\n\n<p>then in gdb use <code>target remote localhost:1234</code></p>\n\n<blockquote>\n  <blockquote>\n    <p>If you invoke qemu from within gdb, you'll probably want to skip SIGUSR1 (\"handle SIGUSR1 noprint\").</p>\n  </blockquote>\n  \n  <p>You can also invoke qemu with the -gdb option (or -s shortcut) which\n  provides a gdb stub. You can then connect from any machine on the\n  network (start up gdb, then use \"target remote :\"). See\n  the man page for more information.</p>\n  \n  <p>Depending on what you are trying to debug, it may help to use the -S\n  option to qemu (which freezes the CPU on startup), so you can get qemu\n  up, attach gdb and get it set up, then continue.</p>\n  \n  <p>On some architectures, using hardware breakpoints (gdb hbreak command)\n  may work better than software breakpoints (gdb break command)</p>\n</blockquote>\n"}], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565973153, "creation_date": 1435757450, "last_edit_date": 1435831916, "question_id": 31162843, "link": "https://stackoverflow.com/questions/31162843/debug-linux-kernel-running-on-intel-target-from-amd-host-how-to-return-control", "title": "Debug linux kernel running on Intel target from AMD host - how to return control to gdb?", "body": "<p>I have compiled kernel 3.13.0-55 on Ubuntu on both AMD and Intel machines. I tried to copy compiled kernel to Intel target but it won't boot with that one. Therefore I have compiled the same version of kernel on that Intel. I can run this kernel on Intel and Intel waits for kgdb to attach to it. I do it on AMD with</p>\n\n<pre><code>target remote /dev/ttyS0\n</code></pre>\n\n<p>and I am able to step into kernel code over serial connection. I do continue then, and if I set some breakpoints, for example at <code>vfs_read</code> then yes - it is hit. But when I write g to /proc/sysrq-trigger on the target Intel, after I typed continue in gdb on host and Intel continued to run, then the target halts, and I cannot return the control to debugger running on AMD any more. Writing g to /proc/sysrq-trigger halts the Intel but control isn't returned to the AMD gdb.</p>\n\n<p>I suspected this might be caused due to it is not EXACTLY same (not copied) version of kernel, but copied version of kernel from target machine doesn't change this behavior either. How should I troubleshoot this problem? How to return the control to debugger? What can I test/verify/check? What additional info do you need? Please let me know. Enable Magic SysRq is set in kernel config.</p>\n\n<pre><code>uname -a:\n\nAMD:  3.13.11-ckt20 #5 SMP Tue Jun 30 17:52:33 BST 2015 x86_64 x86_64 x86_64 GNU/Linux\n\nIntel: 3.13.11-ckt20 #2 SMP Tue Jun 30 17:10:47 BST 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n\n<p>GDB sesion:</p>\n\n<pre><code>peter@peterubuntu0:~/kernel$ sudo gdb vmlinux_intel \nReading symbols from vmlinux_intel...done.\n(gdb) set serial baud 115200\n(gdb) set debug remote 1\n(gdb) target remote /dev/ttyS0\nRemote debugging using /dev/ttyS0\nSending packet: $qSupported:multiprocess+;xmlRegisters=i386;qRelocInsn+#b5...Ack\nPacket received: \nPacket qSupported (supported-packets) is NOT supported\nSending packet: $Hg0#df...Ack\nPacket received: OK\nSending packet: $qTStatus#49...Ack\nPacket received: \nPacket qTStatus (trace-status) is NOT supported\nSending packet: $?#3f...Ack\nPacket received: S05\nSending packet: $Hc-1#09...Ack\nPacket received: OK\nSending packet: $qC#b4...Ack\nPacket received: QC01\nSending packet: $qAttached#8f...Ack\nPacket received: \nPacket qAttached (query-attached) is NOT supported\nSending packet: $qOffsets#4b...Ack\nPacket received: \nSending packet: $g#67...Ack\nPacket received: 2f000000000000000000000000000000a80b0000000000006c1c0000000000006c1c000000000000460200000000000038de8b260388ffff38de8b260388ffff960000000000000022020000000000000100000000000000aaaaaa00000000002084ca81ffffffffe30000000000000000000000000000000000000000000000f4201081ffffffff0202000010000000000000000000000000000000\nkgdb_breakpoint () at kernel/debug/debug_core.c:1042\n1042        wmb(); /* Sync point after breakpoint */\nSending packet: $qSymbol::#5b...Ack\nPacket received: \nPacket qSymbol (symbol-lookup) is NOT supported\n(gdb) c\nContinuing.\nSending packet: $vCont?#49...Ack\nPacket received: \nPacket vCont (verbose-resume) is NOT supported\nSending packet: $Hc0#db...Ack\nPacket received: OK\nSending packet: $c#63...Ack\n\n\n\n\n^Casync_remote_interrupt called            // this is where I did Ctrl+C\nremote_stop called\n^Casync_remote_interrupt_twice called      // and Ctrl-C again\nInterrupted while waiting for the program.\nGive up (and stop debugging it)? (y or n) y\nQuit\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Though it doesn't work when I try to debug Intel from Amd (both running the same kernel 3.13.11-ckt20 SMP 2015 x86_64 x86_64 x86_64 GNU/Linux\n):\ntarget - Intel(R) Core(TM)2 Duo CPU     E8500  @ 3.16GHz\nhost - AMD FX(tm)-4100 Quad-Core Processor</p>\n\n<p>it works in the opposite direction:\ntarget - AMD FX(tm)-4100 Quad-Core Processor\nhost - Intel(R) Core(TM)2 Duo CPU     E8500  @ 3.16GHz</p>\n\n<p>Maybe it is related to hardware breakpoints, registers, cpu implementation?</p>\n"}, {"tags": ["c", "caching", "memory-alignment"], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1435759103, "post_id": 31163230, "comment_id": 50335343, "body": "Note that the question is more along the line of what the current code does, Which you&#39;ll need to know before finding an an alternative approach."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1435759216, "post_id": 31163230, "comment_id": 50335425, "body": "@nos: I think the middle (and largest) part is actually relevant. However, I could swap paragraphs if you insist."}, {"owner": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "edited": false, "score": 0, "creation_date": 1435760528, "post_id": 31163230, "comment_id": 50336449, "body": "Olaf i find your answer interesting but still don&#39;t understand very well the second code and its remark..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "edited": false, "score": 0, "creation_date": 1435761972, "post_id": 31163230, "comment_id": 50337562, "body": "@Rodrigo: If your code runs on a 64 bit platform, that code will likely not work due to <code>int</code> being too short to hold a pointer (enable compiler warnings!). Even if, I would be doubtfuil at least, as it is apparently not well designed with all the magic numbers, etc. However, I will explain the basics."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "edited": false, "score": 0, "creation_date": 1435763029, "post_id": 31163230, "comment_id": 50338299, "body": "@Rodrigo: I edited my answer. Note that this might be not a proper answer, but it is too long for a comment and requires structring code, so .."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 0, "last_activity_date": 1435762968, "last_edit_date": 1435762968, "creation_date": 1435758518, "answer_id": 31163230, "question_id": 31162808, "link": "https://stackoverflow.com/questions/31162808/c-code-for-alignment-on-intel-core-2-duo/31163230#31163230", "title": "C code for alignment on Intel Core 2 Duo", "body": "<p>Why not use <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.5\" rel=\"nofollow\"><code>_Alignas()</code></a> (since C11)?</p>\n\n<p>Casting a pointer to <code>int</code> is an invitation to disaster (aka <em>undefined behaviour</em>). Just think about a 64 bit machine with 32 bit (standard for most x86). <em>If</em> you need arithmetics on pointers, use <code>uintptr_t</code> (I would not recommend using <code>intptr_t</code>, though). However, even here, arithmetic on the value is still undefined (but very likely safe for platforms with single, linear address space).</p>\n\n<p>Standard note: do <strong>not</strong> cast <code>void *</code> as returned by <code>malloc()</code>.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Ok, lets take the code above and give it a proper formating and typing:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n// align to this boundary (must be power of two!)\n#define ALIGN_BOUNDARY 64U\n</code></pre>\n\n<p>Do not use magic numbers in your code! 2 months later you will wonder what that means.</p>\n\n<pre><code>int *tempA, *tempB;\n</code></pre>\n\n<p>How are those used?</p>\n\n<pre><code>int *pA = malloc (sizeof(int) * N + ALIGN_BOUNDARY - 1);\nuintptr_t adjA = ((uintptr_t)pA + (ALIGN_BOUNDARY - 1)) &amp; ~((uintptr_t) (ALIGN_BOUNDARY - 1);\n</code></pre>\n\n<p>This just rounds up the address to the next aligned boundary (here: 64 bytes).</p>\n\n<pre><code>tempA = (int *)adjA;\ntempB = (int *)(adjA + 4096 + 64)\n</code></pre>\n\n<p>Not sure what the later is good for, but with the <code>malloc</code> given, that will result in disaster due to accessing beyond the allocated block if used with the same indexes (0..<code>N</code>) as <code>*pA</code>.</p>\n\n<p>In any way, I would be very, very careful with this code. Not only it apparently is badly written/documented, but it seems also to contain errors.</p>\n"}], "owner": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 31163230, "answer_count": 1, "score": 1, "last_activity_date": 1435762968, "creation_date": 1435757375, "question_id": 31162808, "link": "https://stackoverflow.com/questions/31162808/c-code-for-alignment-on-intel-core-2-duo", "title": "C code for alignment on Intel Core 2 Duo", "body": "<p>I've been given the following c code for alignment</p>\n\n<pre><code>struct s *p, *new_p\np = (struct s*) malloc(sizeof(struct s) + BOUND -1);\nnew_p = (struct s*) (((int) p+BOUND-1) &amp; ~(BOUND -1);\n</code></pre>\n\n<p>where BOUND represents 32 bytes. A line of cache is 32 bytes like in Pentium II and III but I cannot figure out the way p and new_p get aligned. Are both aligned or only new_p?</p>\n\n<p>Also, I have this code for a line of cache of 64 B for a set associative cache with 8 blocks in each set and a size of 32 Kb:</p>\n\n<pre><code>int *tempA, *tempB;\n...\npA= (int *) malloc (sizeof(int)*N + 63);\ntempA = (int *)(((int)pA+63)&amp;~(63));\ntempB = (int *)((((int)pA+63)&amp;~(63))+4096+64)\n</code></pre>\n\n<p>Accompanied with this remark: there will be a penalty if you access more than 8 address with a separation of 4 Kb. </p>\n\n<p>The whole doesn't make much sense to me. Any ideas of what's going on?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486491728, "post_id": 31162367, "comment_id": 71364744, "body": "You actually used that with false . Your code says so???"}], "answers": [{"tags": [], "owner": {"reputation": 8285, "user_id": 3778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7ff297c27ebda4574486eb6c42d8b7f5?s=128&d=identicon&r=PG", "display_name": "Don Wakefield", "link": "https://stackoverflow.com/users/3778/don-wakefield"}, "is_accepted": false, "score": 4, "last_activity_date": 1435761619, "creation_date": 1435761619, "answer_id": 31164497, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull/31164497#31164497", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>Using <code>ios_base::sync_with_stdio(false);</code> is sufficient to decouple the <code>C</code> and <code>C++</code> streams. You can find a discussion of this in <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321585585\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Standard C++ IOStreams and Locales</a>, by Langer and Kreft. They note that how this works is implementation-defined.</p>\n\n<p>The <code>cin.tie(NULL)</code> call seems to be requesting a decoupling between the activities on <code>cin</code> and <code>cout</code>. I can't explain why using this with the other optimization should cause a crash. As noted, the link you supplied is bad, so no speculation here.</p>\n"}, {"comments": [{"owner": {"reputation": 9133, "user_id": 334451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/752bf1cd2ef2702724c89f661a5e78d7?s=128&d=identicon&r=PG", "display_name": "Mikko Rantalainen", "link": "https://stackoverflow.com/users/334451/mikko-rantalainen"}, "edited": false, "score": 5, "creation_date": 1570473212, "post_id": 31164501, "comment_id": 102917075, "body": "Even without syncronization, different calls to <code>cout &lt;&lt;</code> cannot change order so <code>CiaoHelloWorld</code> is not possible for your example case. Syncronization is strictly about different buffering methods."}, {"owner": {"reputation": 136, "user_id": 8588241, "user_type": "registered", "profile_image": "https://graph.facebook.com/1538494582878838/picture?type=large", "display_name": "Davud Safarov", "link": "https://stackoverflow.com/users/8588241/davud-safarov"}, "edited": false, "score": 0, "creation_date": 1601057846, "post_id": 31164501, "comment_id": 113296572, "body": "i don&#39;t even know if it is true, but I upvoted because of explanation"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 27, "last_activity_date": 1570537566, "last_edit_date": 1570537566, "creation_date": 1435761628, "answer_id": 31164501, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull/31164501#31164501", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>This is to synchronize IOs from C and C++ world. If you synchronize, then you have a guaranty that the orders of all IOs is exactly what you expect. In general, the problem is the buffering of IOs that causes the problem, synchronizing let both worlds to share the same buffers. For example <code>cout &lt;&lt; \"Hello\"; printf(\"World\"); cout &lt;&lt; \"Ciao\";</code>; without synchronization you'll never know if you'll get <code>HelloCiaoWorld</code> or <code>HelloWorldCiao</code> or <code>WorldHelloCiao</code>...</p>\n\n<p><code>tie</code> lets you have the guaranty that IOs channels in C++ world are <strong>tied</strong> one to each other, which means for example that every output have been flushed before inputs occurs (think about <code>cout &lt;&lt; \"What's your name ?\"; cin &gt;&gt; name;</code>).</p>\n\n<p>You can always mix C or C++ IOs, but if you want some reasonable behavior you must synchronize both worlds. Beware that in general it is not recommended to mix them, if you program in C use C stdio, and if you program in C++ use streams. But you may want to mix existing C libraries into C++ code, and in such a case it is needed to synchronize both.</p>\n"}, {"comments": [{"owner": {"reputation": 1154, "user_id": 523124, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be7b577e015d11ee117a1c452be4c1f2?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/523124/alan"}, "edited": false, "score": 0, "creation_date": 1529101200, "post_id": 31165481, "comment_id": 88768731, "body": "When you say &quot;you must make sure to flush cout manually every time you want to display something before expecting input on cin&quot;, that can be as simple as appending &quot;... &lt;&lt; std::flush&quot; or &quot;... &lt;&lt; std::endl&quot; to the end of every line that begins &quot;std::cout &lt;&lt; ...&quot;, right?"}, {"owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "reply_to_user": {"reputation": 1154, "user_id": 523124, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be7b577e015d11ee117a1c452be4c1f2?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/523124/alan"}, "edited": false, "score": 9, "creation_date": 1529135280, "post_id": 31165481, "comment_id": 88773660, "body": "Yes, it is as simple as that, but be careful with &quot;the end of every line&quot; part. <code>cout</code> is buffered for a reason, if you flush it too often, when you don&#39;t actually need it, you might see a performance hit."}, {"owner": {"reputation": 885, "user_id": 815929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/shXrb.jpg?s=128&g=1", "display_name": "iajnr", "link": "https://stackoverflow.com/users/815929/iajnr"}, "edited": false, "score": 0, "creation_date": 1531921673, "post_id": 31165481, "comment_id": 89778308, "body": "@Ionut is there something equivalent to the tie() functionality in C for scanf, printf?"}, {"owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "reply_to_user": {"reputation": 885, "user_id": 815929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/shXrb.jpg?s=128&g=1", "display_name": "iajnr", "link": "https://stackoverflow.com/users/815929/iajnr"}, "edited": false, "score": 2, "creation_date": 1531922344, "post_id": 31165481, "comment_id": 89778792, "body": "@iajnr No, not directly. In C, you can either flush manually before <code>scanf()</code>, disable buffering completely or switch to line buffering (which should flush after newline or when input is read from <code>stdin</code> - see <a href=\"https://linux.die.net/man/3/setlinebuf\" rel=\"nofollow noreferrer\">linux.die.net/man/3/setlinebuf</a> )."}, {"owner": {"reputation": 41796, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 4, "creation_date": 1577268340, "post_id": 31165481, "comment_id": 105131835, "body": "At leetcode, it significantly improves runtime, maybe these competitive websites do something special for input tests."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1615810587, "post_id": 31165481, "comment_id": 117798037, "body": "&quot;Also keep in mind that synchronized C++ streams are thread-safe&quot; so is there an effect of sync_with_stdio(false) on this thread-safety? Only when mixing C and C++ I/O perhaps?"}], "tags": [], "owner": {"reputation": 4948, "user_id": 405704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd4896c3199e219cf737e1cfb49532b?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/405704/ionut"}, "is_accepted": true, "score": 314, "last_activity_date": 1481643313, "last_edit_date": 1481643313, "creation_date": 1435764178, "answer_id": 31165481, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull/31165481#31165481", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>The two calls have different meanings that have nothing to do with performance; the fact that <em>it speeds up the execution time</em> is (or <em>might be</em>) just a side effect. You should understand what each of them does and not blindly include them in every program because they look like an optimization.</p>\n\n<pre><code>ios_base::sync_with_stdio(false);\n</code></pre>\n\n<p>This disables the synchronization between the C and C++ standard streams. By default, all standard streams are synchronized, which in practice allows you to mix C- and C++-style I/O and get sensible and expected results. If you disable the synchronization, then C++ streams are allowed to have their own independent buffers, which makes mixing C- and C++-style I/O an adventure.</p>\n\n<p>Also keep in mind that synchronized C++ streams are thread-safe (output from different threads may interleave, but you get no data races).</p>\n\n<pre><code>cin.tie(NULL);\n</code></pre>\n\n<p>This unties <code>cin</code> from <code>cout</code>. Tied streams ensure that one stream is flushed automatically before each I/O operation on the other stream.</p>\n\n<p>By default <code>cin</code> is tied to <code>cout</code> to ensure a sensible user interaction. For example:</p>\n\n<pre><code>std::cout &lt;&lt; \"Enter name:\";\nstd::cin &gt;&gt; name;\n</code></pre>\n\n<p>If <code>cin</code> and <code>cout</code> are tied, you can expect the output to be flushed (i.e., visible on the console) before the program prompts input from the user. If you untie the streams, the program might block waiting for the user to enter their name but the \"Enter name\" message is not yet visible (because <code>cout</code> is buffered by default, output is flushed/displayed on the console only on demand or when the buffer is full).</p>\n\n<p>So if you untie <code>cin</code> from <code>cout</code>, you must make sure to flush <code>cout</code> manually every time you want to display something before expecting input on <code>cin</code>.</p>\n\n<p>In conclusion, know what each of them does, understand the consequences, and then decide if you really want or need the <em>possible</em> side effect of speed improvement.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 13531583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7381fee5a269b8e1c97f0c5a512c52d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sravya", "link": "https://stackoverflow.com/users/13531583/sravya"}, "is_accepted": false, "score": 3, "last_activity_date": 1592067892, "creation_date": 1592067892, "answer_id": 62363099, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull/62363099#62363099", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>It's just common stuff for making <strong>cin</strong> input work faster.</p>\n\n<p>For a quick explanation: the first line turns off buffer synchronization between the <strong>cin</strong> stream and C-style <strong>stdio</strong> tools (like scanf or gets) \u2014 so <strong>cin</strong> works faster, but you can't use it simultaneously with <strong>stdio</strong> tools.</p>\n\n<p>The second line unties <strong>cin</strong> from <strong>cout</strong> \u2014 by default the <strong>cout</strong> buffer flushes each time when you read something from <strong>cin</strong>. And that may be slow when you repeatedly read something small then write something small many times. So the line turns off this synchronization (by literally tying <strong>cin</strong> to <strong>null</strong> instead of <strong>cout</strong>).</p>\n"}, {"tags": [], "owner": {"reputation": 1058, "user_id": 6118353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SykR7dnvK_U/AAAAAAAAAAI/AAAAAAAAACE/fK45qacuqWw/photo.jpg?sz=128", "display_name": "Ashish Yadav", "link": "https://stackoverflow.com/users/6118353/ashish-yadav"}, "is_accepted": false, "score": 1, "last_activity_date": 1597576373, "creation_date": 1597576373, "answer_id": 63436160, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull/63436160#63436160", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>Lot's of great answer. I just want to add a small note about <strong>decoupling the stream</strong>.</p>\n<pre><code>cin.tie(NULL);\n</code></pre>\n<p>I have faced an issue while decoupling the stream with <strong>CodeChef</strong> platform. When I submitted my code, the platform response was &quot;Wrong Answer&quot; but after tying the stream and testing the submission. It worked.</p>\n<p>So, If anyone wants to untie the stream, the output stream must be flushed.</p>\n<p>Edit: I am not familiar with all the platform but this is what I have experienced.</p>\n"}], "owner": {"reputation": 2589, "user_id": 5069746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10200827203558843/picture?type=large", "display_name": "Kshitij Kohli", "link": "https://stackoverflow.com/users/5069746/kshitij-kohli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120622, "favorite_count": 165, "protected_date": 1597828993, "accepted_answer_id": 31165481, "answer_count": 5, "score": 203, "last_activity_date": 1597576373, "creation_date": 1435756340, "last_edit_date": 1533749906, "question_id": 31162367, "link": "https://stackoverflow.com/questions/31162367/significance-of-ios-basesync-with-stdiofalse-cin-tienull", "title": "Significance of ios_base::sync_with_stdio(false); cin.tie(NULL);", "body": "<p>What is the significance of including</p>\n\n<pre><code>ios_base::sync_with_stdio(false);\ncin.tie(NULL);\n</code></pre>\n\n<p>in C++ programs?</p>\n\n<p>In my tests, it speeds up the execution time, but is there a test case I should be worried about by including this? </p>\n\n<p>Do the 2 statements always have to be together, or is the first one sufficient, i.e., ignoring <code>cin.tie(NULL)</code>?</p>\n\n<p>Also, is it permissible to use simultaneous C and C++ commands if its value has been set to <code>false</code>?</p>\n\n<p><a href=\"https://www.codechef.com/viewsolution/7316085\" rel=\"noreferrer\">https://www.codechef.com/viewsolution/7316085</a></p>\n\n<p>The above code worked fine, until I used <code>scanf/printf</code> in a C++ program with the value as <code>true</code>. In this case, it gave a segmentation fault. What could be the possible explanation for this?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 394, "user_id": 3516859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQems.jpg?s=128&g=1", "display_name": "Piters", "link": "https://stackoverflow.com/users/3516859/piters"}, "edited": false, "score": 1, "creation_date": 1435756160, "post_id": 31162241, "comment_id": 50332949, "body": "In which dimensions do you calculate? Is an overflow possible? And what is the datatype of     mcp?"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 1, "creation_date": 1435756176, "post_id": 31162241, "comment_id": 50332958, "body": "If your sum exceeds the limit of integer it would then turn negative.Is this your case. Are the numbers very big&gt;"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1435756260, "post_id": 31162241, "comment_id": 50333033, "body": "Please show us the values of array <code>mcp</code> and <code>SIMUL</code>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 3, "creation_date": 1435756390, "post_id": 31162241, "comment_id": 50333157, "body": "For debugging purposes, you might want to also print the value of summcp each time through the loop.  This smells like an overflow issue, and printing the sum as you go would confirm that."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1435759635, "post_id": 31162380, "comment_id": 50335739, "body": "That might be sufficient, or it might not \u2014 and it doesn&#39;t explain why there&#39;s a problem."}, {"owner": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435760420, "post_id": 31162380, "comment_id": 50336349, "body": "Hi, thanks a lot. Indeed, I was using int when I had a huge number after the sum. So, I changed the type to long and now I have a positive meaningfull value."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1435756373, "creation_date": 1435756373, "answer_id": 31162380, "question_id": 31162241, "link": "https://stackoverflow.com/questions/31162241/sum-of-positive-values-in-an-array-gives-negative-result-in-a-c-program/31162380#31162380", "title": "Sum of positive values in an array gives negative result in a c program", "body": "<p>Declare variable <code>summcp</code> like</p>\n\n<pre><code>long long int summcp = 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435760395, "post_id": 31162414, "comment_id": 50336332, "body": "Hi, thanks a lot. Indeed, I was using int when I had a huge number after the sum. So, I changed the type to long and now I have a positive meaningfull value."}], "tags": [], "owner": {"reputation": 865, "user_id": 4779492, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh3.googleusercontent.com/-bJAuXacuKIQ/AAAAAAAAAAI/AAAAAAAAAIg/-4kQQ_gAteA/photo.jpg?sz=128", "display_name": "Naman Sogani", "link": "https://stackoverflow.com/users/4779492/naman-sogani"}, "is_accepted": false, "score": 1, "last_activity_date": 1435756796, "last_edit_date": 1435756796, "creation_date": 1435756457, "answer_id": 31162414, "question_id": 31162241, "link": "https://stackoverflow.com/questions/31162241/sum-of-positive-values-in-an-array-gives-negative-result-in-a-c-program/31162414#31162414", "title": "Sum of positive values in an array gives negative result in a c program", "body": "<p>I think your final output is going out of range. For this you will have to declare <code>summcp</code> as <code>long long int</code></p>\n\n<pre><code>long long int summcp = 0;\nfor (k = 0; k &lt; SIMUL; k++)\n{\n    summcp += mcp[k];\n}\nprintf(\"summcp: %lld.\\n\", summcp);\n</code></pre>\n\n<p><code>int</code> variable throws garbage value if its range is exceeded.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435760373, "post_id": 31162570, "comment_id": 50336313, "body": "Hi, thanks a lot. Indeed, I was using int when I had a huge number after the sum. So, I changed the type to long and now I have a positive meaningfull value."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435763144, "post_id": 31162570, "comment_id": 50338373, "body": "@RuiJo&#227;oLoureiro: That&#39;s great, but you should probably keep the overflow check (substitute <code>LONG_MAX</code> for <code>INT_MAX</code>), unless you <i>know</i> the sum of all elements in <code>mcp</code> won&#39;t ever exceed <code>LONG_MAX</code>.  Also, can the sum ever wind up being negative (i.e., every element of <code>mcp</code> is negative)?  If so, then you should add an underflow check as well."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1435764352, "last_edit_date": 1435764352, "creation_date": 1435756796, "answer_id": 31162570, "question_id": 31162241, "link": "https://stackoverflow.com/questions/31162241/sum-of-positive-values-in-an-array-gives-negative-result-in-a-c-program/31162570#31162570", "title": "Sum of positive values in an array gives negative result in a c program", "body": "<p>This smells like an overflow issue; you might want to add a check against that like</p>\n\n<pre><code>for (k = 0; k &lt; SIMUL &amp;&amp; (INT_MAX - summcp &gt; mcp[k]); k++ )\n{\n  sumcp += mcp[k];\n}\n\nif (k &lt; SIMUL)\n{\n  // sum of all mcp values is larger than what an int can represent\n}\nelse\n{\n  // use summcp\n}\n</code></pre>\n\n<p>If you are running into overflow issues, you might want to use a wider type for <code>summcp</code> like <code>long</code> or <code>long long</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The problem is that the behavior of signed integer overflow is not well-defined; you'll get a different result for <code>INT_MAX + 1</code> based on whether your platform uses one's complement, two's complement, sign magnitude, or some other representation for signed integers.  </p>\n\n<p>Like I said in my comment below, if <code>mcp</code> can contain negative values, you should add a check for underflow as well.</p>\n\n<p>Regardless of the type you use (<code>int</code>, <code>long</code>, <code>long long</code>), you should keep the over- and underflow checks.  </p>\n\n<p>If <code>mcp</code> only ever contains non-negative values, then consider using an unsigned type for your sum.  The advantage of this is that the behavior of <em>unsigned</em> integer overflow is well-defined, and the result will be the sum of all elements of <code>mcp</code> modulo <code>UINT_MAX</code> (or <code>ULONG_MAX</code>, or <code>ULLONG_MAX</code>, etc.).  </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435760449, "post_id": 31162636, "comment_id": 50336378, "body": "Hi, thanks a lot. Indeed, I was using int when I had a huge number after the sum. So, I changed the type to long and now I have a positive meaningfull value."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "edited": false, "score": 0, "creation_date": 1435760610, "post_id": 31162636, "comment_id": 50336518, "body": "Just make sure the new type can represent at least <code>SIMUL * -INT_MIN</code> (!) values."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 2, "last_activity_date": 1435760527, "last_edit_date": 1435760527, "creation_date": 1435756952, "answer_id": 31162636, "question_id": 31162241, "link": "https://stackoverflow.com/questions/31162241/sum-of-positive-values-in-an-array-gives-negative-result-in-a-c-program/31162636#31162636", "title": "Sum of positive values in an array gives negative result in a c program", "body": "<p>You are invoking <em>undefined behaviour</em>.</p>\n\n<p>As integer variables can only hold a limited range of values, going beyond this range is undefined by the standard. Basically anything can happen. In your (and the most common) case, it simply wraps around its binary representation. As this is used for negative values, you will read this as such.</p>\n\n<p>To circomvent this, use a type for <code>summcp</code> which can hold <em>all</em> possible values. An alternative would be to check if the next addition will overflow by:</p>\n\n<pre><code>if ( summcp &gt;= INT_MAX - mcp[k] ) {\n    // handle positive overflow\n}\n</code></pre>\n\n<p>Note that the above only works for <code>mcp[k] &gt;= 0</code> and positive overflow. The other 3 cases have to be handled differently. It is in general best, faster and much easier to use a large enough type for the sum and test lateron for overflow, if required.</p>\n\n<p>Do not feel tempted to add and test the result!. As integer overflow is <em>undefined behaviour</em>, this will not work for all architectures.</p>\n"}], "owner": {"reputation": 11, "user_id": 4266368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2ba68401e879991f7e75d0f674a2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Jo&#227;o Loureiro", "link": "https://stackoverflow.com/users/4266368/rui-jo%c3%a3o-loureiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 31162636, "answer_count": 4, "score": 0, "last_activity_date": 1435764352, "creation_date": 1435756031, "last_edit_date": 1435757073, "question_id": 31162241, "link": "https://stackoverflow.com/questions/31162241/sum-of-positive-values-in-an-array-gives-negative-result-in-a-c-program", "title": "Sum of positive values in an array gives negative result in a c program", "body": "<p>I have a problem that is, when I sum the values of an array (that are all positive, I verified by printing the values of the array), I end up with a negative value. My code for the sum is:</p>\n\n<pre><code>int summcp = 0;\nfor (k = 0; k &lt; SIMUL; k++)\n{\n    summcp += mcp[k];\n}\nprintf(\"summcp: %d.\\n\", summcp);`\n</code></pre>\n\n<p>Any hint about this problem would be appreciated.</p>\n"}, {"tags": ["c", "arrays", "pointers", "int"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1435755998, "post_id": 31162157, "comment_id": 50332813, "body": "What is the question? does it remain the same? and 2 things, <code>int *ptr = &amp;arr[0];</code> is just <code>int *ptr = arr;</code> and <code>scanf(&quot;%d&quot;, &amp;ptr1[i]);</code> would be simpler to write. Also, ignoring the return value from <code>scanf()</code> is by far the most common bad thing &quot;<i>programmers</i>&quot; do, specially books and tutorials."}, {"owner": {"reputation": 7, "user_id": 4940992, "user_type": "registered", "profile_image": "https://graph.facebook.com/937295709626945/picture?type=large", "display_name": "\u03a7\u03ac\u03c1\u03b7\u03c2 \u03a4\u03bf\u03c5\u03bb\u03bf\u03cd\u03c0\u03b1\u03c2", "link": "https://stackoverflow.com/users/4940992/%ce%a7%ce%ac%cf%81%ce%b7%cf%82-%ce%a4%ce%bf%cf%85%ce%bb%ce%bf%cf%8d%cf%80%ce%b1%cf%82"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435756047, "post_id": 31162157, "comment_id": 50332857, "body": "Yes the array remains the same."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1435756079, "post_id": 31162157, "comment_id": 50332886, "body": "That doesn&#39;t make sense. Please post a reproducible sample as a minimum. Or your real code."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1435825457, "post_id": 31162157, "comment_id": 50364585, "body": "@iharob Props for mentioning the return value of <code>scanf</code>... Unfortunately, it&#39;s commonly overlooked even after you&#39;ve warned people for a first, second (and possibly even third?) time. Unfortunately it isn&#39;t until they realise that <i>it is possible to enter non-numeric data when <code>scanf</code> is told to expect numeric data</i> that they try all sorts of stupid things &lt;strike&gt;like using <code>isdigit</code> on an <code>int</code> value read by <code>scanf</code>&lt;/strike&gt;... If only they&#39;d try <i>checking the return value</i>, first!"}, {"owner": {"reputation": 701, "user_id": 3983756, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/966fffbafc3c218b194488772be93d6c?s=128&d=identicon&r=PG", "display_name": "ThunderWiring", "link": "https://stackoverflow.com/users/3983756/thunderwiring"}, "edited": false, "score": 0, "creation_date": 1435919776, "post_id": 31162157, "comment_id": 50411560, "body": "did you used <code>malloc</code> for <code>ptr1</code>? of left it as a static?"}], "owner": {"reputation": 7, "user_id": 4940992, "user_type": "registered", "profile_image": "https://graph.facebook.com/937295709626945/picture?type=large", "display_name": "\u03a7\u03ac\u03c1\u03b7\u03c2 \u03a4\u03bf\u03c5\u03bb\u03bf\u03cd\u03c0\u03b1\u03c2", "link": "https://stackoverflow.com/users/4940992/%ce%a7%ce%ac%cf%81%ce%b7%cf%82-%ce%a4%ce%bf%cf%85%ce%bb%ce%bf%cf%8d%cf%80%ce%b1%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435760700, "creation_date": 1435755850, "last_edit_date": 1435755874, "question_id": 31162157, "link": "https://stackoverflow.com/questions/31162157/read-integer-array-2nd-time", "title": "Read Integer Array 2nd time", "body": "<p>I use this to read an array of ints:</p>\n\n<pre><code>for (i = 0; i &lt; 4; i++) {\n     scanf(\"%d\", ptr1);\n     ptr1++;\n }\n</code></pre>\n\n<p>after declaring a pointer <code>int *ptr1</code> and <code>ptr1=&amp;arr[0]</code>. I am making a game so in a <code>while</code> loop I have to read this array every time it loops. For example if the first time the array is <code>arr=[0,1,1,2]</code> I want it to change the next time I read it. How can I accomplish that without the array to remain the same?</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1435756074, "post_id": 31162113, "comment_id": 50332879, "body": "Way too vague to answer. Is the code short enough to post it here ? Otherwise, you should take a stab at it, starting from the innermost function, and eventually post a more focused question if you get definitely stuck."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1435756572, "post_id": 31162113, "comment_id": 50333318, "body": "Doesn&#39;t really sound like the functions themselves are the problem, but rather some hard-coded assumption of how much that should be executed. Anyway, far too vague indeed for anyone to answer."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1435756796, "post_id": 31162113, "comment_id": 50333496, "body": "If you&#39;re dealing with complex external libraries not adapted to streaming work then you&#39;re generally speaking in trouble. Coroutines from a blocking I/O hook may be about the only &quot;general&quot; solution."}, {"owner": {"reputation": 1, "user_id": 1361734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5296773762d08624de9abaff3be4e57c?s=128&d=identicon&r=PG", "display_name": "dobre_momy", "link": "https://stackoverflow.com/users/1361734/dobre-momy"}, "edited": false, "score": 0, "creation_date": 1435759379, "post_id": 31162113, "comment_id": 50335541, "body": "yes i ma trying to modify a library to be able to be streamed, for performance issues, so that i can have a smooth 60 fps draw without stutterng, and there is no possibility of threading. I am using a task manager which splits tasks that run for a maximum of 6 ms. So i split this decoding function into iterations that take ~6 ms. This way i can render at 60 fps and also decode images at the same time without making the application stutter."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1435757027, "last_edit_date": 1435757027, "creation_date": 1435756719, "answer_id": 31162540, "question_id": 31162113, "link": "https://stackoverflow.com/questions/31162113/unwrapping-a-function-12-calls-deep/31162540#31162540", "title": "Unwrapping a function 12 calls deep", "body": "<p>It probably is not possible in standard C, because you want to inspect the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow\">call stack</a> (and the standard does not know it, and some implementations might not have one). You need to read about <a href=\"https://en.wikipedia.org/wiki/Continuation\" rel=\"nofollow\">continuations</a>.</p>\n\n<p>Notice that some function calls can be inlined by an optimizing compiler (in particular link-time-optimization, by compiling &amp; linking with <code>gcc -flto -O2</code>) then your question does not make any sense.</p>\n\n<p>If using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a> as your C compiler (and if you don't disable frame pointers and don't ask the compiler to optimize too much) you might consider using GCC <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"nofollow\">return address builtins</a>.</p>\n\n<p>Look also at Ian Taylor's <a href=\"https://github.com/gcc-mirror/gcc/tree/master/libbacktrace\" rel=\"nofollow\">libbacktrace</a> inside GCC.</p>\n\n<p>If using a system with <a href=\"http://www.gnu.org/software/libc/\" rel=\"nofollow\">GNU glibc</a> (e.g. many Linux systems), you might consider using <a href=\"http://www.gnu.org/software/libc/manual/html_node/Backtraces.html\" rel=\"nofollow\">backtrace</a> function.</p>\n\n<p>I don't recommend doing all this. It is error-prone, quite Linux/Glibc/GCC specific, and optimization-adverse.</p>\n\n<p>Since you are using a <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow\">free software</a> library, you should better improve it yourself to fit your needs. You'll better also publish your changes and try to push them upstream.</p>\n"}], "owner": {"reputation": 1, "user_id": 1361734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5296773762d08624de9abaff3be4e57c?s=128&d=identicon&r=PG", "display_name": "dobre_momy", "link": "https://stackoverflow.com/users/1361734/dobre-momy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435757027, "creation_date": 1435755741, "question_id": 31162113, "link": "https://stackoverflow.com/questions/31162113/unwrapping-a-function-12-calls-deep", "title": "Unwrapping a function 12 calls deep", "body": "<p>so a block is code is wrapped by a function. Function A calls function B. Unwrapping function B would be to put the code from function B inside function A. </p>\n\n<p>My question is: I have A calls B calls C calls ... 12 times. So  i have a call graph 12 functions deep( from an open source library that decodes images) and i want to make the decoding streamable by unwrapping the 12 functions to get to the loop that actually decodes the image. By doing this i can tell the decoder to not decode the whole image at once but to do small steps whenever i tell it do. </p>\n\n<p>If anyone knows or has ever had such a problem, please let me know of any good design patern. </p>\n\n<p>PS: language is C.</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1435755176, "post_id": 31161845, "comment_id": 50332180, "body": "Could you show us how you are populating <code>name</code>?"}, {"owner": {"reputation": 6230, "user_id": 924820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35254b4ba07fdb455b7ceb44cd3d279?s=128&d=identicon&r=PG", "display_name": "BigMike", "link": "https://stackoverflow.com/users/924820/bigmike"}, "edited": false, "score": 1, "creation_date": 1435755230, "post_id": 31161845, "comment_id": 50332220, "body": "and also how you&#39;re printing name[index]"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1435755450, "post_id": 31161845, "comment_id": 50332378, "body": "<code>Load reads through the file in a loop and populates arrays. I&#39;ve verified that this is working correctly within the function, so there seems no point copying out this bit of code.</code> seems to be at odds with <code>Back in my main function, the equi_rad and pol_rad arrays are populated correctly and can be worked with. However when I try to printf the name array contents, it&#39;s just random nonsense.</code>. It seems that we need to see the code for <code>load</code>, along with the contents of <code>radii.dat</code>..."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1435755588, "post_id": 31161845, "comment_id": 50332498, "body": "Since your question is with regards to the C language, can you please simplify things here, in order to make it easier for us to read it? For example, change those array names to <code>arr1</code>, <code>arr2</code> and <code>arr3</code>. Unless you want to ask something specific about calculating the volume and surface area of planets, there is honestly no need to specify all these weary details within the question. They just make it harder to focus on the actual problem."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435756760, "post_id": 31161845, "comment_id": 50333465, "body": "The issue is inside <code>load()</code> for which you do <i>not</i> show the code. So how could we help you then? a"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435756808, "post_id": 31161845, "comment_id": 50333502, "body": "You are aware that <code>name</code> isn&#39;t an array of &quot;strings&quot; but of pointers?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1435755302, "post_id": 31161904, "comment_id": 50332270, "body": "Isn&#39;t this just a comment?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435755333, "post_id": 31161904, "comment_id": 50332291, "body": "@WeatherVane: Well I also posted a solution in the answer to a very <i>likely</i> issue the OP has"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435756974, "post_id": 31161904, "comment_id": 50333621, "body": "@WeatherVane: It&#39;s a solution based on a very likley assumption .. so well"}, {"owner": {"reputation": 3, "user_id": 5069604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863401a8e6a43a27fa4e7bc7b8cfb98d?s=128&d=identicon&r=PG&f=1", "display_name": "MTrevers", "link": "https://stackoverflow.com/users/5069604/mtrevers"}, "edited": false, "score": 0, "creation_date": 1435757228, "post_id": 31161904, "comment_id": 50333827, "body": "Brilliant, that worked! Thanks! Now I&#39;m going to go back and reread the bit of the tutorial that discussed malloc()"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 3, "user_id": 5069604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863401a8e6a43a27fa4e7bc7b8cfb98d?s=128&d=identicon&r=PG&f=1", "display_name": "MTrevers", "link": "https://stackoverflow.com/users/5069604/mtrevers"}, "edited": false, "score": 0, "creation_date": 1435757568, "post_id": 31161904, "comment_id": 50334111, "body": "@MTrevers: nice if it helped; don&#39;t forget <code>free</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1435759051, "post_id": 31161904, "comment_id": 50335294, "body": "@giorgi Good guess! I&#39;ll upvote since the OP liked it and I was negative."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1435759468, "post_id": 31161904, "comment_id": 50335610, "body": "@giorgi I would have preferred <code>malloc(1+strlen(sourceStr));</code>"}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 1, "last_activity_date": 1435759766, "last_edit_date": 1435759766, "creation_date": 1435755245, "answer_id": 31161904, "question_id": 31161845, "link": "https://stackoverflow.com/questions/31161845/printing-a-populated-array-of-strings-prints-garbage/31161904#31161904", "title": "Printing a populated array of strings prints garbage", "body": "<blockquote>\n  <p>Back in my main function, the equi_rad and pol_rad arrays are\n  populated correctly and can be worked with. However when I try to\n  printf the name array contents, it's just random nonsense.</p>\n</blockquote>\n\n<p>You need to show the code. Guess is you are not correctly populating <code>planet_name</code> array. You might need to use <code>malloc</code> (e.g., <code>planet_name[i] = malloc(LENGTH)</code>), and copy the string contents there. Then you should have no issues. e.g.</p>\n\n<pre><code>planet_name[i] = malloc(strlen(sourceStr)+1);\nstrcpy(planet_name[i], sourceStr);\n</code></pre>\n\n<p>Don't forget to <code>free</code> each of the pointers for which you allocated data.</p>\n"}], "owner": {"reputation": 3, "user_id": 5069604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863401a8e6a43a27fa4e7bc7b8cfb98d?s=128&d=identicon&r=PG&f=1", "display_name": "MTrevers", "link": "https://stackoverflow.com/users/5069604/mtrevers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 31161904, "answer_count": 1, "score": 0, "last_activity_date": 1435759766, "creation_date": 1435755079, "last_edit_date": 1435755416, "question_id": 31161845, "link": "https://stackoverflow.com/questions/31161845/printing-a-populated-array-of-strings-prints-garbage", "title": "Printing a populated array of strings prints garbage", "body": "<p>I'm just getting into C with a previous knowledge of RPG coding. Like many before me, I'm confused about strings, arrays and pointers and how to work with them.</p>\n\n<p>I'm working on a program which takes the name, equatorial radius and polar radius of the planets from a data file, and then calculates and outputs volume, surface area.</p>\n\n<p>My main function has the following declarations:</p>\n\n<pre><code>double       equi_rad[iNumPlanets]; /* equitoral radii of planets */\ndouble       pol_rad[iNumPlanets];  /* polar radii of planets */\nchar         *name[iNumPlanets];    /* array containing planet name */\n</code></pre>\n\n<p>(<code>iNumPlanets</code> has already been initialized as 8)</p>\n\n<p>I then call the function <code>load</code>:</p>\n\n<pre><code>load(\"radii.dat\", equi_rad, pol_rad, iNumPlanets, name);\n</code></pre>\n\n<p>Load reads through the file in a loop and populates arrays. I've verified that this is working correctly within the function, so there seems no point copying out this bit of code. This is the prototype:</p>\n\n<pre><code>int load(const char* filename, double *equitoral_radii, double *polar_radii, const int iNumPlanets, char *planet_name[]);\n</code></pre>\n\n<p>Back in my main function, the <code>equi_rad</code> and <code>pol_rad</code> arrays are populated correctly and can be worked with. However, when I try to <code>printf</code> the <code>name</code> array contents, it's just random nonsense.</p>\n\n<p>Can anyone explain why I can successfully modify the <code>double</code> arrays in a function, but not the string arrays?</p>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 350, "user_id": 4920090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUtM9.jpg?s=128&g=1", "display_name": "Ajith John", "link": "https://stackoverflow.com/users/4920090/ajith-john"}, "edited": false, "score": 0, "creation_date": 1435754975, "post_id": 31161705, "comment_id": 50332033, "body": "I have done JNI using this <a href=\"http://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html\" rel=\"nofollow noreferrer\">tutorial</a>. It will solve your problem."}, {"owner": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "reply_to_user": {"reputation": 350, "user_id": 4920090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUtM9.jpg?s=128&g=1", "display_name": "Ajith John", "link": "https://stackoverflow.com/users/4920090/ajith-john"}, "edited": false, "score": 0, "creation_date": 1435755466, "post_id": 31161705, "comment_id": 50332391, "body": "@Ajith John My greatest problem is how to pass values to the function and returning inform of byte"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "edited": false, "score": 0, "creation_date": 1435757350, "post_id": 31162456, "comment_id": 50333929, "body": "am getting -80 from java but wanted respond like 0xB0. Kindly assist."}, {"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "reply_to_user": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "edited": false, "score": 0, "creation_date": 1435758375, "post_id": 31162456, "comment_id": 50334762, "body": "@NemugaM that&#39;s because java bytes are signed. <code>0xb0</code> <i>is</i> -80 in 8bit two complement.  you are getting the expected value."}, {"owner": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "edited": false, "score": 0, "creation_date": 1435758848, "post_id": 31162456, "comment_id": 50335133, "body": "how can I convert it to 0xb0"}, {"owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "reply_to_user": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "edited": false, "score": 0, "creation_date": 1435763840, "post_id": 31162456, "comment_id": 50338883, "body": "either substitute every <code>jbyte</code> (except <code>jbyte port</code>) with <code>jint</code> and update your Java definition accordingly ( so that the java method return an <code>int</code>) or see this <a href=\"http://stackoverflow.com/questions/7401550/how-to-convert-int-to-unsigned-byte-and-back#7401635\">answer</a>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user781847"}, "is_accepted": true, "score": 0, "last_activity_date": 1435756535, "creation_date": 1435756535, "answer_id": 31162456, "question_id": 31161705, "link": "https://stackoverflow.com/questions/31161705/calling-c-function-from-java-using-jni/31162456#31162456", "title": "Calling C function from java using JNI", "body": "<p>Have you tried the the straightforward implementation?</p>\n\n<pre><code>JNIEXPORT jbyte JNICALL Java_CPSE_CPSC1900Connect(JNIEnv * env, jclass hPrinter, jbyte port, jstring Answer)\n{\n\n    const char* param = (*env)-&gt;GetStringUTFChars(env, Answer, 0);\n    jbyte res = (jbyte)CPSC1900Connect((BYTE)port, (void*)param);\n\n    (*env)-&gt;ReleaseStringUTFChars(env, Answer, param);\n\n    return res;\n}\n</code></pre>\n\n<p>This assume the <code>void* param</code> of <code>CPSC1900Connect</code> is read only, otherwise copy the <code>param</code> string to a local buffer.  </p>\n\n<p><strong>I have not compiled this code</strong>, just wrote it. Do basic corrections if needed.</p>\n"}], "owner": {"reputation": 11, "user_id": 5069614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98277064d65c6e7f42e13b7ff0822f06?s=128&d=identicon&r=PG&f=1", "display_name": "NemugaM", "link": "https://stackoverflow.com/users/5069614/nemugam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 31162456, "answer_count": 1, "score": -2, "last_activity_date": 1435756660, "creation_date": 1435754689, "last_edit_date": 1435754862, "question_id": 31161705, "link": "https://stackoverflow.com/questions/31161705/calling-c-function-from-java-using-jni", "title": "Calling C function from java using JNI", "body": "<p>I have the following C code. My aim is to call a C function from java. </p>\n\n<p>C code:</p>\n\n<pre><code>_declspec(dllimport) BYTE __stdcall  CPSC1900Connect(BYTE port, void *param);\n\n\n\nJNIEXPORT jbyte JNICALL Java_CPSE_CPSC1900Connect(JNIEnv * env, jclass hPrinter, jbyte port, jstring Answer)\n{\n\n     BYTE RC;\n\n// I need to call CPSC1900Connect(BYTE port, void *param); function and pass (i DONT KNOW HOW TO PASS THOSE PAREMETER TO THIS METHOD.\n\n//port and ANSWER PARAMETER. THE METHOD RETURNS BYTE WHICH I SHOULD BE VIED FROM JAVA\n\n     return Answer;\n}\n</code></pre>\n\n<p>java code:</p>\n\n<pre><code>public class CPSE {\n\n   public  native byte CPSC1900Connect(byte port,String param);\n   public  native String CPSC1900Disconnect(String param);\n    static{\n\n        try {\n\n            System.loadLibrary(\"dll/CPSLPT9x\");\n            System.loadLibrary(\"dll/CPSRC\");\n            System.loadLibrary(\"dll/CPSE\");\n            System.loadLibrary(\"dll/MCHIP\");\n\n\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n\n    }\n\n    public CPSE() {\n\n        byte port=CPSC1900_USB;\n                  param =\"xx.xx.xx.xx\"// ip address\n         byte   response= CPSC1900Connect(BYTE port, void *param);\n\n\n    }\n\n    public static void main(String[] args)\n    {\n        new CPSE();\n\n    }\n\n}\n</code></pre>\n\n<p>My question is: How can I pass value from java application and pass it to the C function and get a response?</p>\n"}, {"tags": ["c", "linked-list", "traversal"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1435754107, "post_id": 31161444, "comment_id": 50331420, "body": "Explain &quot;delete&quot;? If you have no mean to have a pointer to the previous node in order to change its <code>next</code> to NULL then no, you can&#39;t &quot;delete&quot; it."}, {"owner": {"reputation": 473, "user_id": 1515252, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6592db3aeb6680273f298474be75a5ad?s=128&d=identicon&r=PG", "display_name": "niteshnarayanlal", "link": "https://stackoverflow.com/users/1515252/niteshnarayanlal"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1435754416, "post_id": 31161444, "comment_id": 50331636, "body": "when I say delete it means proper deletion. One could simply free that pointer but still the previous node will have the address of recently deleted node as it&#39;s not null."}], "answers": [{"tags": [], "owner": {"reputation": 834, "user_id": 2128295, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0aa14c505a2a03921258fc3b9c7b8cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Shri", "link": "https://stackoverflow.com/users/2128295/shri"}, "is_accepted": true, "score": 1, "last_activity_date": 1435754864, "last_edit_date": 1435754864, "creation_date": 1435754347, "answer_id": 31161583, "question_id": 31161444, "link": "https://stackoverflow.com/questions/31161444/last-element-deletion-of-link-list-with-only-one-pointer/31161583#31161583", "title": "Last element deletion of link list with only one pointer", "body": "<p>This is <strong>not possible</strong> if you do not have reference to the second last element of the list. You need to make the <em>pointer</em> part of the second last element <em>null</em>. So as per my knowledge, if you only have a reference to the last element, then deleting it is not possible.</p>\n\n<p>An exceptional case will be when there is only one element in the list which is the first as well as the last element. In such a case, freeing that element will not cause any harm.</p>\n\n<p>When you have a linked-list, you need to have a reference to the first element using which you traverse the entire list. But when you say you do not have any reference to the list except the last element, this is a very unusual case.</p>\n"}], "owner": {"reputation": 473, "user_id": 1515252, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6592db3aeb6680273f298474be75a5ad?s=128&d=identicon&r=PG", "display_name": "niteshnarayanlal", "link": "https://stackoverflow.com/users/1515252/niteshnarayanlal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 31161583, "answer_count": 1, "score": 0, "last_activity_date": 1435754864, "creation_date": 1435753974, "last_edit_date": 1435754124, "question_id": 31161444, "link": "https://stackoverflow.com/questions/31161444/last-element-deletion-of-link-list-with-only-one-pointer", "title": "Last element deletion of link list with only one pointer", "body": "<p>If we have one pointer pointing at the last element of link list and we don't have any other pointer pointing to any other node of the link list then is it possible to delete that last node safely?\nAs per my opinion its not possible.</p>\n\n<p><img src=\"https://i.stack.imgur.com/guvzR.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "parameters", "doxygen"], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1435754682, "post_id": 31161566, "comment_id": 50331842, "body": "Thanks!  Well the idea is that the users would be reading the documentation, where the <code>#define</code> switch is also documented. I could just, for e.g., leave the parameters in and have the user set them NULL if not used, but the unused code would still need space and this is on an embedded platform so space is crucial. Using the switch means the code is only on the device if that feature is available."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1435755526, "post_id": 31161566, "comment_id": 50332446, "body": "Although I guess I could just use the switch internally to the function and comment out the relevant code portions..."}], "tags": [], "owner": {"reputation": 9854, "user_id": 1741450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7900ed57a92b336effd879fa61de226?s=128&d=identicon&r=PG", "display_name": "lucasg", "link": "https://stackoverflow.com/users/1741450/lucasg"}, "is_accepted": true, "score": 2, "last_activity_date": 1553451391, "last_edit_date": 1553451391, "creation_date": 1435754305, "answer_id": 31161566, "question_id": 31161130, "link": "https://stackoverflow.com/questions/31161130/how-can-i-document-optional-parameters/31161566#31161566", "title": "How can I document optional parameters", "body": "<p>Doxygen does some partial preprocessing : if you put specific documentation in the if/else part, only the relevant documentation will be shown. However, is it really a good thing ? As a user, I may be interested in seeing every different prototype, even though disabled at compile-time.</p>\n\n<p>source : <a href=\"http://www.doxygen.nl/manual/preprocessing.html\" rel=\"nofollow noreferrer\">http://www.doxygen.nl/manual/preprocessing.html</a></p>\n"}], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 31161566, "answer_count": 1, "score": 3, "last_activity_date": 1553451391, "creation_date": 1435753178, "last_edit_date": 1435754726, "question_id": 31161130, "link": "https://stackoverflow.com/questions/31161130/how-can-i-document-optional-parameters", "title": "How can I document optional parameters", "body": "<p>My function has a different parameter list depending on if a device feature is enabled via a <code>#define</code> constant <code>SMBSUS_INH</code></p>\n\n<p>e.g.</p>\n\n<pre><code>#ifndef SMBUS_INH\n    handle initHandle(foo_t foo, SMB_Info_t smbInfo, bar_t bar);\n#else\n    handle initHandle(foo_t foo, bar_t bar);\n#endif\n</code></pre>\n\n<p>How can I correctly document this?</p>\n\n<p>If I write the documentation, twice, once inside each of the #if...else clauses will doxygen ignore the irrelevant one? Or will it still see bothe documentation blocks and complain that one has no related function?</p>\n\n<p>Is there a better way of managing this? Thanks.</p>\n"}, {"tags": ["c++", "c", "cuda"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1435752641, "post_id": 31160795, "comment_id": 50330363, "body": "what time result do you get if you run <code>hello</code> just on one GPU?  e.g. <code>CUDA_VISIBLE_DEVICES=0 time .&#47;hello</code>?"}, {"owner": {"reputation": 625, "user_id": 4725771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QpB1I.jpg?s=128&g=1", "display_name": "Madhu Kumar Dadi", "link": "https://stackoverflow.com/users/4725771/madhu-kumar-dadi"}, "edited": false, "score": 0, "creation_date": 1435753109, "post_id": 31160795, "comment_id": 50330692, "body": "I think cudaDevicesynchronize() is taking time"}, {"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "edited": false, "score": 0, "creation_date": 1435753206, "post_id": 31160795, "comment_id": 50330784, "body": "this doesn&#39;t change the amount of time used. It&#39;s about 9 seconds"}, {"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "reply_to_user": {"reputation": 625, "user_id": 4725771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QpB1I.jpg?s=128&g=1", "display_name": "Madhu Kumar Dadi", "link": "https://stackoverflow.com/users/4725771/madhu-kumar-dadi"}, "edited": false, "score": 0, "creation_date": 1435753329, "post_id": 31160795, "comment_id": 50330875, "body": "@MadhuKumar running the Code without cudaDevicesynchronize() leads to 0.00 user 0.98 system 0:08.29 elapsed 11%CPU"}, {"owner": {"reputation": 625, "user_id": 4725771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QpB1I.jpg?s=128&g=1", "display_name": "Madhu Kumar Dadi", "link": "https://stackoverflow.com/users/4725771/madhu-kumar-dadi"}, "edited": false, "score": 0, "creation_date": 1435753553, "post_id": 31160795, "comment_id": 50331024, "body": "Then your compiler or system have got a problem bro."}, {"owner": {"reputation": 560, "user_id": 828237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qSTZv.png?s=128&g=1", "display_name": "kwesolowski", "link": "https://stackoverflow.com/users/828237/kwesolowski"}, "edited": false, "score": 2, "creation_date": 1435754154, "post_id": 31160795, "comment_id": 50331458, "body": "Is it possible that underlying setup is taking so long? Usually its better to measure timing after first call to module (if module is lazy initialized)."}, {"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "reply_to_user": {"reputation": 560, "user_id": 828237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qSTZv.png?s=128&g=1", "display_name": "kwesolowski", "link": "https://stackoverflow.com/users/828237/kwesolowski"}, "edited": false, "score": 0, "creation_date": 1435755366, "post_id": 31160795, "comment_id": 50332321, "body": "@kwesoly i have tried sereval examples from the Nvidia Code Samples. Every CUDA call has the same behaviour"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1435755405, "post_id": 31160795, "comment_id": 50332357, "body": "How much memory does your system have?"}, {"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1435755492, "post_id": 31160795, "comment_id": 50332412, "body": "@talonmies My system has 64 GB of ddr3 ram"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1435755801, "post_id": 31160795, "comment_id": 50332673, "body": "<i>&quot;Every CUDA call has the same behaviour&quot;</i> \u2013 <i>every</i> CUDA call, or the first one in your program? E.g. if you call <code>helloFromGPU</code> a second time, does this lead to a total run time of ~20 seconds?"}, {"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1435757693, "post_id": 31160795, "comment_id": 50334213, "body": "@Zeta Every first user call has this behaviour"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1435757814, "post_id": 31160795, "comment_id": 50334321, "body": "@chris: It&#39;s usually a good idea to <a href=\"http://stackoverflow.com/posts/31160795/edit\">add additional information</a> in your post (e.g. the RAM size, first call, etc).  Please don&#39;t add &quot;EDIT&quot; or similar while doing so, the <a href=\"http://stackoverflow.com/posts/31160795/revisions\">revision history</a> shows what has been changed."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "edited": false, "score": 0, "creation_date": 1435757633, "post_id": 31162144, "comment_id": 50334160, "body": "Thanks for your answer. Is it possible to deactivate this mapping for testing purpose?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "edited": false, "score": 0, "creation_date": 1435758084, "post_id": 31162144, "comment_id": 50334514, "body": "@chris: you could try using <code>CUDA_VISIBLE_DEVICES</code> to reduce the GPU address space to be included down to a single GPU. That might help. I don&#39;t know how to disable host UVA mapping."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1435760117, "post_id": 31162144, "comment_id": 50336115, "body": "You can also try setting &quot;persistence mode&quot; on the GPUs.   Use the <code>nvidia-smi</code> command, use <code>nvidia-smi --help</code> or use the manpage to learn about nvidia-smi.  It may help a little, however I think the lion&#39;s share is due to what talonmies has described."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1435820370, "post_id": 31162144, "comment_id": 50361685, "body": "You may also want to be sure that the nouveau driver has been properly removed from your system.  The <a href=\"http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html#runfile-nouveau\" rel=\"nofollow noreferrer\">linux getting started guide</a> gives instructions.  The nouveau driver can cause all sorts of strange behavior, and there is at least <a href=\"https://devtalk.nvidia.com/default/topic/851393/cuda-programming-and-performance/first-cuda-call-takes-13-seconds/\" rel=\"nofollow noreferrer\">one example</a> where it created a very long GPU initialization time."}, {"owner": {"reputation": 401, "user_id": 1587802, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a6cd2594d84692e7b81280bf0856e608?s=128&d=identicon&r=PG", "display_name": "King Crimson", "link": "https://stackoverflow.com/users/1587802/king-crimson"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1436224443, "post_id": 31162144, "comment_id": 50511170, "body": "Enabling pm as @RobertCrovella said: in root, <code>nvidia-smi -pm 1</code>"}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 7, "last_activity_date": 1435756322, "last_edit_date": 1435756322, "creation_date": 1435755832, "answer_id": 31162144, "question_id": 31160795, "link": "https://stackoverflow.com/questions/31160795/why-does-my-hello-world-program-take-almost-10s/31162144#31162144", "title": "Why does my &quot;Hello world&quot; program take almost 10s?", "body": "<p>The apparent slow runtime of your example is due to the underlying fixed cost of setting up the GPU context. </p>\n\n<p>Because you are running on a platform that supports unified addressing, the CUDA runtime has to map 64GB of host RAM and 4 x 5120MB from your GPUs into a single virtual address space and register that with the Linux kernel. </p>\n\n<p>There are a lot of kernel API calls required to do that, and it isn't fast. I would guess that is the main source of the slow performance you are observing. You should view this as a fixed start-up cost which must be amortised over the life of your application. In real world applications, a 10 second startup is trivial and of no real importance. In a hello world example, it isn't.</p>\n"}], "owner": {"reputation": 151, "user_id": 3032857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a615aeb5b2d4554b7ef97ac39f706e5d?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3032857/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 2, "accepted_answer_id": 31162144, "answer_count": 1, "score": 7, "last_activity_date": 1435756322, "creation_date": 1435752291, "last_edit_date": 1435752762, "question_id": 31160795, "link": "https://stackoverflow.com/questions/31160795/why-does-my-hello-world-program-take-almost-10s", "title": "Why does my &quot;Hello world&quot; program take almost 10s?", "body": "<p>I have installed the CUDA runtime and drivers version 7.0 to my workstation (Ubuntu 14.04, 2xIntel XEON e5  + 4x Tesla k20m). I've used the following program to check whether my installation works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n__global__ void helloFromGPU()\n{\n    printf(\"Hello World from GPU!\\n\");\n}\n\nint main(int argc, char **argv)\n{\n    printf(\"Hello World from CPU!\\n\");\n\n    helloFromGPU&lt;&lt;&lt;1, 1&gt;&gt;&gt;();\n\n    printf(\"Hello World from CPU! Again!\\n\");\n\n    cudaDeviceSynchronize();\n\n    printf(\"Hello World from CPU! Yet again!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I get the correct output, but it's taken an enourmus amount of time:</p>\n\n<pre><code>$ nvcc hello.cu -O2\n$ time ./hello &gt; /dev/null\n\nreal    0m8.897s\nuser    0m0.004s\nsys     0m1.017s`\n</code></pre>\n\n<p>If I remove all device code the overall execution takes 0.001s. So why does my simple program almost take 10 seconds?</p>\n"}, {"tags": ["c", "gcc", "enums"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1435753883, "post_id": 31160787, "comment_id": 50331253, "body": "<a href=\"http://stackoverflow.com/questions/10582523/how-are-integer-types-converted-implicitly\" title=\"how are integer types converted implicitly\">stackoverflow.com/questions/10582523/&hellip;</a>  (bad duplicate though, since the accepted answer is incorrect)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1435780249, "post_id": 31160787, "comment_id": 50348551, "body": "It&#39;s worth noting that <code>typeof</code> is a gcc-specific extension."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1435780205, "post_id": 31161046, "comment_id": 50348523, "body": "I&#39;ve made a minor update. The enumerated type can be compatible with <code>char</code> or with <i>any</i> signed or unsigned integer type."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 20, "last_activity_date": 1435822718, "last_edit_date": 1435822718, "creation_date": 1435752951, "answer_id": 31161046, "question_id": 31160787, "link": "https://stackoverflow.com/questions/31160787/why-does-typeof-enum-constant-generate-a-warning-when-compared-to-a-variable-o/31161046#31161046", "title": "Why does &#39;typeof enum constant&#39; generate a warning when compared to a variable of enum type?", "body": "<p>Quoting directly from <code>C11</code>, chapter <code>\u00a76.7.2.2</code>, <em>Enumeration specifiers</em>,</p>\n\n<blockquote>\n  <p>Each enumerated type shall be compatible with <code>char</code>, a signed integer type, or an unsigned integer type. The choice of type is implementation-defined.</p>\n</blockquote>\n\n<p>So, the <em>type</em> of the enum variable is not defined by standard. It can be any of the above.</p>\n\n<p>OTOH, <code>FOO</code> being an enumeration constant, <code>typeof(FOO)</code> will give you <code>int</code>, as the standard mandates</p>\n\n<blockquote>\n  <p>An identifier declared as an enumeration constant has type <code>int</code>.</p>\n</blockquote>\n\n<p>which is being used as the type for <code>f2</code>.</p>\n\n<p>Now, if enum is <code>unsigned int</code> on your implementation, so is <code>f1</code> and,  <code>f2</code> is <code>int</code>.</p>\n\n<p>Next, you get the warning.</p>\n\n<blockquote>\n  <p><em>How can I fix this problem?</em></p>\n</blockquote>\n\n<p>Well, if you change the type of <code>f2</code> to <code>typeof(Baz)</code>, which gives the type of the enum, then both the types of <code>f1</code> and <code>f2</code> will be same. Compiler will be happy.</p>\n\n<p><kbd><a href=\"http://rextester.com/IMTYG21024\" rel=\"nofollow\">SEE LIVE HERE</a></kbd></p>\n"}, {"comments": [{"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1435809133, "post_id": 31161318, "comment_id": 50357768, "body": "Why&#39;d they do that instead of just letting the normal promotion rules apply (i.e. they can be any type which promotes to int)?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1435818424, "post_id": 31161318, "comment_id": 50360690, "body": "@Random832 No rationale was ever given in C90 or later standards. I would suppose they would like to save memory by allowing byte-sized enums, plus in theory it would be handy to have a one byte enum in many cases. In practice you can never write code which relies on it though, because such code would be non-portable. This is just one of many really dumb things in the C standard, just like for example the various implicit type promotion rules."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1435841106, "post_id": 31161318, "comment_id": 50375240, "body": "Yeah, but a byte can promote to an int. So in practice, in almost any expression FOO would still act like an int even if its type really is that of the enum."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 16, "last_activity_date": 1435753645, "last_edit_date": 1495540865, "creation_date": 1435753645, "answer_id": 31161318, "question_id": 31160787, "link": "https://stackoverflow.com/questions/31160787/why-does-typeof-enum-constant-generate-a-warning-when-compared-to-a-variable-o/31161318#31161318", "title": "Why does &#39;typeof enum constant&#39; generate a warning when compared to a variable of enum type?", "body": "<p>It's a known \"bug\" in the C standard. Enumeration <em>constants</em> are guaranteed to be of type <code>int</code>, while enumeration <em>variables</em> are of implementation-defined integer type.</p>\n\n<p><a href=\"https://stackoverflow.com/a/10733714/584518\">See this</a> for references.</p>\n"}], "owner": {"reputation": 425, "user_id": 608041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8928d968c32d9487d775ae61927669?s=128&d=identicon&r=PG", "display_name": "kungjohan", "link": "https://stackoverflow.com/users/608041/kungjohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 2, "accepted_answer_id": 31161046, "answer_count": 2, "score": 21, "last_activity_date": 1613756070, "creation_date": 1435752273, "last_edit_date": 1437293109, "question_id": 31160787, "link": "https://stackoverflow.com/questions/31160787/why-does-typeof-enum-constant-generate-a-warning-when-compared-to-a-variable-o", "title": "Why does &#39;typeof enum constant&#39; generate a warning when compared to a variable of enum type?", "body": "<p>I have the following code.</p>\n\n<pre><code>typedef enum {FOO, BAR} Baz;\n\nint main()\n{\n    Baz f1 = FOO;\n    typeof(FOO) f2 = FOO;\n    return (f1 == f2);\n}\n</code></pre>\n\n<p>My compilation using <code>gcc -Wextra foo.c</code> generates a warning saying</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>foo.c: In function \u2018main\u2019:\nfoo.c:7:13: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n return (f1 == f2);\n             ^\n</code></pre>\n\n<p>My gcc version</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc --version\ngcc (Ubuntu 4.9.2-10ubuntu13) 4.9.2\n</code></pre>\n\n<p>How can I fix this problem?</p>\n"}, {"tags": ["c++", "c", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 3146, "user_id": 4537840, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O18Ty.jpg?s=128&g=1", "display_name": "Saket Mittal", "link": "https://stackoverflow.com/users/4537840/saket-mittal"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1435751525, "post_id": 31160478, "comment_id": 50329544, "body": "Error] conflicting types for &#39;countTrees&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 3146, "user_id": 4537840, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O18Ty.jpg?s=128&g=1", "display_name": "Saket Mittal", "link": "https://stackoverflow.com/users/4537840/saket-mittal"}, "edited": false, "score": 0, "creation_date": 1435752249, "post_id": 31160535, "comment_id": 50330081, "body": "result is so big long long int isn&#39;t working.any other options??"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3146, "user_id": 4537840, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O18Ty.jpg?s=128&g=1", "display_name": "Saket Mittal", "link": "https://stackoverflow.com/users/4537840/saket-mittal"}, "edited": false, "score": 1, "creation_date": 1435752447, "post_id": 31160535, "comment_id": 50330218, "body": "@SaketMittal Try <code>long long unsigned</code>"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1435751948, "last_edit_date": 1435751948, "creation_date": 1435751602, "answer_id": 31160535, "question_id": 31160478, "link": "https://stackoverflow.com/questions/31160478/method-isnt-taking-long-long-int-value-shows-error/31160535#31160535", "title": "method isn&#39;t taking long long int value shows error", "body": "<p>You get the error, because of the implicit declaration of the <code>countTrees()</code> not matching the actual definition.</p>\n\n<p>To clarify \"implicit declaration\" when a function is called, but the compiler has not seen the function definition yet, it <em>assumes</em>  that the function returns <code>int</code> and accepts any number (and type) of parameters.</p>\n\n<p>In <code>C99</code> and future standards, the <em>implicit declaration</em> is made invalid, so a compiler should complain if a function, which is not yet defined (or at least. prototyped, through a forward declaration), is used (called).</p>\n\n<p>To resolve the issue, you can do either</p>\n\n<ul>\n<li>add a forward declaration of  your function.</li>\n<li>define the function before <code>main()</code>.</li>\n</ul>\n"}], "owner": {"reputation": 3146, "user_id": 4537840, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O18Ty.jpg?s=128&g=1", "display_name": "Saket Mittal", "link": "https://stackoverflow.com/users/4537840/saket-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1435751726, "accepted_answer_id": 31160535, "answer_count": 1, "score": 0, "last_activity_date": 1435752078, "creation_date": 1435751428, "last_edit_date": 1435752078, "question_id": 31160478, "link": "https://stackoverflow.com/questions/31160478/method-isnt-taking-long-long-int-value-shows-error", "closed_reason": "Duplicate", "title": "method isn&#39;t taking long long int value shows error", "body": "<p>I am creating an simple program in which I am using <code>long long int</code> but I got compiler error. Please help me to resolve this error.</p>\n\n<blockquote>\n  <p>Error] conflicting types for <code>countTrees</code></p>\n</blockquote>\n\n<p>I got error on this line </p>\n\n<pre><code>long long int countTrees(long long int numKeys)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int t;\n    scanf(\"%d\", &amp;t);\n    while(t--)\n    {\n        long long int n;\n        scanf(\"%lld\", &amp;n);\n        long long int result = countTrees(n);\n        printf(\"%lld\\n\",result);        \n    }\n\nreturn 0;\n}  \nlong long int countTrees(long long int numKeys) {\n\n  if (numKeys &lt;=1) {\n    return(1);\n  }\n  else {\n    long long int sum = 0;\n    long long int left,right,root;\n\n    for (root=1; root&lt;=numKeys; root++) {\n      left = countTrees(root - 1);\n      right = countTrees(numKeys - root);\n\n      sum += left*right;\n    }\n\n    return(sum);\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "eclipse", "cross-compiling", "mingw32", "mingw-w64"], "answers": [{"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": true, "score": 1, "last_activity_date": 1435750710, "creation_date": 1435750710, "answer_id": 31160221, "question_id": 31160121, "link": "https://stackoverflow.com/questions/31160121/cross-compile-git-repository-with-mingw-under-ubuntu/31160221#31160221", "title": "cross compile git repository with mingw under Ubuntu", "body": "<p>As described on a(n old, but mostly correct) <a href=\"http://sourceforge.net/p/mingw-w64/wiki2/MSYS/\" rel=\"nofollow\">page of the MinGW-w64 wiki</a> (written by yours truly a long time ago):</p>\n\n<p>./configure --host=x86_64-w64-mingw32</p>\n\n<p>should do the trick if the package doesn't need special handling for Windows.</p>\n"}], "owner": {"reputation": 1783, "user_id": 2071938, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/08fd4569cc1b672236343bda0abab44a?s=128&d=identicon&r=PG", "display_name": "user2071938", "link": "https://stackoverflow.com/users/2071938/user2071938"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 31160221, "answer_count": 1, "score": 0, "last_activity_date": 1435750710, "creation_date": 1435750410, "question_id": 31160121, "link": "https://stackoverflow.com/questions/31160121/cross-compile-git-repository-with-mingw-under-ubuntu", "title": "cross compile git repository with mingw under Ubuntu", "body": "<p>I have a git repository which I can build with:</p>\n\n<pre><code>./autogen.sh\n./configure\nmake\nsudo make install\n</code></pre>\n\n<p>Now I want to cross compile it for windows with the mingw32/mingw-w64 cross compiler.</p>\n\n<p>I tried it with</p>\n\n<pre><code>export CXX=/usr/bin/x86_64-w64-mingw32-gcc\n</code></pre>\n\n<p>but that didn't work for me.</p>\n\n<p>I have configure eclipse that I can compile windows executables as well, that works, but only with plane c code. Now I need external libraries, which I have to compile for windows as well.</p>\n"}, {"tags": ["c", "microcontroller", "pic", "lcd"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1435750643, "post_id": 31160091, "comment_id": 50328925, "body": "Post your properly-formatted code here."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435854621, "post_id": 31162761, "comment_id": 50384963, "body": "&quot;default all pins ... are analog&quot;,  Hmmm  I thought all configurable pins were &quot;input&quot; either analog or digital.  Did not know all were analog.  Agree about the need for port initialization."}, {"owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435855503, "post_id": 31162761, "comment_id": 50385461, "body": "@chux: I edited for more clarification. Thanks for improving !!"}], "tags": [], "owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "is_accepted": false, "score": 1, "last_activity_date": 1435855418, "last_edit_date": 1435855418, "creation_date": 1435757263, "answer_id": 31162761, "question_id": 31160091, "link": "https://stackoverflow.com/questions/31160091/initialising-lcd-display-with-pic16f1829-in-c/31162761#31162761", "title": "Initialising LCD display with PIC16F1829 in C?", "body": "<p>By default all pins of <code>PIC</code> micro controller are analog inputs. Here you are using <code>PORTC</code> as digital output. So you need to initialise <code>PORTC</code> as below</p>\n\n<pre><code>PORTC = 0x00;   // Init PORTC\nLATC = 0x00;    // Data Latch\nANSELC = 0x00;  // This will enable PORTC as digital\nTRISC = 0x00;   // Output Pins\n</code></pre>\n\n<p>I hope this works for you. You need to refer <a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/41440A.pdf\" rel=\"nofollow\">Datasheet of PIC16F1829</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5069155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfb97a230a6a936769695d39d11ef0a3?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Strickland", "link": "https://stackoverflow.com/users/5069155/brandon-strickland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435855418, "creation_date": 1435750313, "last_edit_date": 1435750673, "question_id": 31160091, "link": "https://stackoverflow.com/questions/31160091/initialising-lcd-display-with-pic16f1829-in-c", "title": "Initialising LCD display with PIC16F1829 in C?", "body": "<p>I am trying to initialise my LCD screen using my PIC16F1829. I have followed the flow chart given with the LCD, but with no avail. Please see my code below and let me know if you know where I am going wrong? I will optimise it at a later date with send_command() functions, etc . . . At the moment I just want to make sure it will initialise.</p>\n\n<pre><code>//config bits that are part-specific for the PIC16F1829\n__CONFIG(FOSC_INTOSC &amp; WDTE_OFF &amp; PWRTE_OFF &amp; MCLRE_OFF &amp; CP_OFF &amp; CPD_OFF &amp; BOREN_ON &amp; CLKOUTEN_OFF &amp; IESO_OFF &amp; FCMEN_OFF);\n__CONFIG(WRT_OFF &amp; PLLEN_OFF &amp; STVREN_OFF &amp; LVP_OFF);\n\n/*Function Prototypes*/\nvoid init_disp(void);\n\n/*Define outputs*/\n#define _XTAL_FREQ 500000\n#define RS LATCbits.LATC0 \n#define EN LATCbits.LATC1 \n#define RW LATCbits.LATC2\n#define DB1 LATCbits.LATC4\n#define DB2 LATCbits.LATC3\n#define DB3 LATCbits.LATC6\n#define DB4 LATCbits.LATC7\n#define TRIG ((EN=1),(EN=0))\n\nvoid main(void) {\n\n  TRISC=0; //set PORTC to output \n  EN = 0;\n __delay_ms(50); \n\n init_disp();\n\n}\n\nvoid init_disp(void){\n\n    //function set 1\n    RW = 0;\n    RS = 0;\n    DB1 = 1; //Hello LCD\n    DB2 = 1;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n\n    //function set 2\n    __delay_ms(5);\n    TRIG;\n\n    //function set 3\n    __delay_ms(2);\n    TRIG;\n\n    // 4bit mode\n    __delay_ms(2);\n    DB1 = 0; \n    DB2 = 1;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n\n    //Display lines and font MS Nibble\n    __delay_ms(2);\n    DB1 = 0; \n    DB2 = 1;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n    //Display lines and font LS Nibble\n    DB1 = 0; \n    DB2 = 0;\n    DB3 = 1;\n    DB4 = 1;\n    TRIG;\n\n    //Display off MS Nibble\n    __delay_ms(1);\n    DB1 = 0; \n    DB2 = 0;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n   //Display off LS Nibble \n    DB1 = 0; \n    DB2 = 0;\n    DB3 = 0;\n    DB4 = 1;\n    TRIG;\n\n    //Display Clear MS Nibble\n    __delay_ms(5);\n    DB1 = 0;\n    DB2 = 0;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n    //display clear LS Nibble\n    DB1 = 1; \n    DB2 = 0;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n\n    //Entry Mode MS Nibble\n    __delay_ms(1);\n    DB1 = 0;\n    DB2 = 0;\n    DB3 = 0;\n    DB4 = 0;\n    TRIG;\n    //entry mode LS Nibble\n    DB1 = 0;\n    DB2 = 1;\n    DB3 = 1;\n    DB4 = 0;\n    TRIG;\n\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435749042, "post_id": 31159572, "comment_id": 50327798, "body": "This is a drastically harder problem than you&#39;re making it out to be... which is why such an automatic option does not exist."}, {"owner": {"reputation": 45, "user_id": 1838997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01374f9a0446db594b899b287edee859?s=128&d=identicon&r=PG", "display_name": "ElvishPriestley", "link": "https://stackoverflow.com/users/1838997/elvishpriestley"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435749930, "post_id": 31159572, "comment_id": 50328416, "body": "Yes I realize that this is non trivial. I&#39;m considering to suggest this as a master thesis from the company I work for. We use gcc quite often. But before suggesting it I wanted to check if anybody knew if an implementation already existed. My guess is that it could be done by parsing &quot;old&quot; and new mapfiles and posibly create some output that could be used in order to do partitioning before sending it on to the linker. But I&#39;m not certain it is possible at all. A failure would be a good result to if it explained whell what was done and why it fails."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435750060, "post_id": 31159572, "comment_id": 50328516, "body": "What&#39;s the end goal? Live update of a running process? If anyone wanted such a thing, I&#39;d imagine they would have done so before trying to hot-patch the running  kernel."}, {"owner": {"reputation": 45, "user_id": 1838997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01374f9a0446db594b899b287edee859?s=128&d=identicon&r=PG", "display_name": "ElvishPriestley", "link": "https://stackoverflow.com/users/1838997/elvishpriestley"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435750302, "post_id": 31159572, "comment_id": 50328693, "body": "low update time and power use of bootloader in wire-les battery application"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435750414, "post_id": 31159572, "comment_id": 50328761, "body": "You should probably be using a linker script when building a bootloader for an embedded system anyway, no? Just change it to leave more space. If you go to use this space in the future you&#39;re going to need to know where it is and how big."}, {"owner": {"reputation": 45, "user_id": 1838997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01374f9a0446db594b899b287edee859?s=128&d=identicon&r=PG", "display_name": "ElvishPriestley", "link": "https://stackoverflow.com/users/1838997/elvishpriestley"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435750453, "post_id": 31159572, "comment_id": 50328793, "body": "The application software would not be running of the application section/sections"}, {"owner": {"reputation": 45, "user_id": 1838997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01374f9a0446db594b899b287edee859?s=128&d=identicon&r=PG", "display_name": "ElvishPriestley", "link": "https://stackoverflow.com/users/1838997/elvishpriestley"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1435750502, "post_id": 31159572, "comment_id": 50328822, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/82084/discussion-between-elvishpriestley-and-jonathon-reinhart\">continue this discussion in chat</a>."}], "owner": {"reputation": 45, "user_id": 1838997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01374f9a0446db594b899b287edee859?s=128&d=identicon&r=PG", "display_name": "ElvishPriestley", "link": "https://stackoverflow.com/users/1838997/elvishpriestley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435749059, "creation_date": 1435748866, "last_edit_date": 1435749059, "question_id": 31159572, "link": "https://stackoverflow.com/questions/31159572/gcc-linker-option-or-other-for-sectioning-memory-and-leaving-chunks-of-memory", "title": "gcc linker option (or other) for sectioning memory and leaving chunks of memory unused", "body": "<p>I was wondering if there are any linker options or otherwise any options to make the linker store a certain amount of compiled code/data into a section of memory for then to leave an area free after that, and then start a new section after that.</p>\n\n<p>The reason I'm asking is for updating code later on, and then updating only some sections of the binary not all. And possibly then having later compilation automatically place unchanged code into the same sections as they already occupy. And the changed code sections being allowed to use the unused memory of the section it occupied last.</p>\n\n<p>I can see that this can probably be done manually with a linker script and then using linker options in the code when coding. But I'm wondering if it is possible to do this automatically.</p>\n\n<p>I would consider such an automatic partitioning non trivial as if a function was moved all references to that function would have to be updated to so that it could quickly become messy.</p>\n"}, {"tags": ["c", "linux", "parallel-processing", "opencl", "gpgpu"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435750614, "post_id": 31159719, "comment_id": 50328898, "body": "It is working! 1 bug removed. But <code>ret = clEnqueueReadBuffer(cmdqueue, Bbuffer, CL_TRUE, 0, 32*sizeof(int), B, 0, NULL, NULL);</code> and then <code>for (t=0; t &lt; 64; t++) { \t\t\t\tprintf(&quot;%d\\t &quot;, B[t]); \t\t\t\t\t}\t</code> results in garbage values."}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435750683, "post_id": 31159719, "comment_id": 50328950, "body": "Plus this code works on CPU(Intel platform) somehow when running it on AMD platform leads to segmentation fault! @jprice"}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "reply_to_user": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435751232, "post_id": 31159719, "comment_id": 50329331, "body": "Would need to see more more (e.g. kernel enqueues) to try and diagnose."}], "tags": [], "owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "is_accepted": true, "score": 2, "last_activity_date": 1435749291, "creation_date": 1435749291, "answer_id": 31159719, "question_id": 31159492, "link": "https://stackoverflow.com/questions/31159492/setting-arguments-in-a-kernel-in-opencl-causes-error/31159719#31159719", "title": "Setting arguments in a kernel in OpenCL causes error", "body": "<p>Here's what the OpenCL 1.2 spec has to say about setting buffers as kernel arguments:</p>\n\n<blockquote>\n  <p>If the argument is a memory object (buffer, image or image array), the arg_value entry will be a pointer to the appropriate buffer, image or image array object.</p>\n</blockquote>\n\n<p>So, you need to pass a <em>pointer</em> to the <code>cl_mem</code> objects:</p>\n\n<pre><code>ret=clSetKernelArg(kernel,0,sizeof(cl_mem),(void *) &amp;Abuffer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1435771843, "post_id": 31163935, "comment_id": 50343766, "body": "Well, using local_id is also an error for that specific kernel. Queueing 2 work groups will lead to wrong results. And using only 1 work group is unefficient."}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435827675, "post_id": 31163935, "comment_id": 50366087, "body": "And in which case should I use <code>clEnqueueTask</code>"}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1435932164, "post_id": 31163935, "comment_id": 50419076, "body": "@DarkZeros is right, you should use globa_id(0). You should never use clEnqueueTask. It&#39;s not for data parallel work. It&#39;s equivalent to running a single work item, which is not efficient on a GPU capable of doing hundreds or thousands at once."}], "tags": [], "owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1435760291, "creation_date": 1435760291, "answer_id": 31163935, "question_id": 31159492, "link": "https://stackoverflow.com/questions/31159492/setting-arguments-in-a-kernel-in-opencl-causes-error/31163935#31163935", "title": "Setting arguments in a kernel in OpenCL causes error", "body": "<p>Why are you using clEnqueueTask? I think you should use clEnqueueNDRangeKernel if you have parallel work to do. Also, just set the global work size; pass NULL for the local work group size. 32x32 is larger than some devices can do.</p>\n"}], "owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1550, "favorite_count": 0, "accepted_answer_id": 31159719, "answer_count": 2, "score": 1, "last_activity_date": 1435831854, "creation_date": 1435748634, "last_edit_date": 1435831854, "question_id": 31159492, "link": "https://stackoverflow.com/questions/31159492/setting-arguments-in-a-kernel-in-opencl-causes-error", "title": "Setting arguments in a kernel in OpenCL causes error", "body": "<p>I am a beginner in OpenCL and thus writing a simple program to double the elements of an array.\nThe kernel code is:-</p>\n\n<pre><code>__kernel void dataParallel(__global int* A, __global int* B)\n{\n    int base = get_local_id(0);\n    B[base]=A[base]+A[base];\n}\n</code></pre>\n\n<p>The local_work_size=32 as I am squaring 32 elements.</p>\n\n<p>In my program I have declared an integer array which holds the elements to be squared.</p>\n\n<pre><code>int *A;\nA=(int*)malloc(sizeof(int)*64);\nfor (i=0; i &lt; 32; i++) {            A[i] = i;   }\n</code></pre>\n\n<p><code>platforms[i]</code> stores the platform id, <code>devices[j]</code> stores the corresponding device id. Their types:</p>\n\n<pre><code>cl_platform_id* platforms;\ncl_device_id* devices;\n</code></pre>\n\n<p>Creating context </p>\n\n<pre><code>cl_context context=clCreateContext(NULL,1,&amp;devices[j],NULL,NULL,NULL);\n</code></pre>\n\n<p>Next comes the command queue</p>\n\n<pre><code>cl_command_queue cmdqueue=cmdqueue=clCreateCommandQueue(context,devices[j],NULL,&amp;err);\n</code></pre>\n\n<p>Next I created 2 memory buffers, one to hold the input data and the other to hold the result.</p>\n\n<pre><code>cl_mem  Abuffer,Bbuffer;\nAbuffer=clCreateBuffer(context, CL_MEM_READ_WRITE ,32*sizeof(int),NULL,&amp;err);\nBbuffer=clCreateBuffer(context, CL_MEM_READ_WRITE ,32*sizeof(int),NULL,&amp;err);\n</code></pre>\n\n<p>Then I copied the data of array A to Abuffer</p>\n\n<pre><code>ret=clEnqueueWriteBuffer(cmdqueue, Abuffer, CL_TRUE, 0, 32*sizeof(int), A, 0, NULL, NULL);\nprintf(\"%d\",ret);//output is 0 thus data written successfully into the buffer\n</code></pre>\n\n<p>The kernel code was then read into a character string <code>source_str</code> and the program was created.</p>\n\n<pre><code>kernelprgrm=clCreateProgramWithSource(context,1,(const char **)&amp;source_str,(const size_t *)&amp;source_size,&amp;err);\n    if(!err)\n    {\n        printf(\"\\nKernel program created successfully\\n\");\n    }//Outputs -Kernel program created successfully\n</code></pre>\n\n<p>I then built the program using:</p>\n\n<pre><code>ret=clBuildProgram(kernelprgrm,1,&amp;devices[j],NULL,NULL,NULL);//returns CL_SUCCESS\n</code></pre>\n\n<p>Getting buildinfo next</p>\n\n<pre><code>ret=clGetProgramBuildInfo(kernelprgrm,devices[j], CL_PROGRAM_BUILD_STATUS ,0,NULL,&amp;size);//Returns success\n</code></pre>\n\n<p>Creating kernel</p>\n\n<pre><code>kernel = clCreateKernel(kernelprgrm, \"dataParallel\", &amp;ret);\n    printf(\"\\nReturn kernel program=%d\",ret);\n    if(!ret)\n    {\n        printf(\"\\nProgram created successfully!\\n\");\n    }\n    //Outputs -Program created successfully!\n</code></pre>\n\n<p>Now comes the devil:-</p>\n\n<pre><code>ret=clSetKernelArg(kernel,0,sizeof(cl_mem),(void *) Abuffer);\nprintf(\"\\nKernel argument 1 ret=%d\",ret);\n\nret=clSetKernelArg(kernel,1,sizeof(cl_mem),(void *) Bbuffer);\nprintf(\"\\nKernel argument 2 ret=%d\",ret);\n</code></pre>\n\n<p>Both return <strong>-38</strong> meaning <strong><code>CL_INVALID_MEM_OBJECT</code></strong>.</p>\n\n<p><strong>P.S.:As per the errors pointed out i.e. use &amp;Abuffer instead of Abuffer in the argument and after making the necessary changes, both return 0</strong></p>\n\n<pre><code>size_t global_item_size = 32;\nsize_t local_item_size = 32;\n</code></pre>\n\n<p>Also <code>ret = clEnqueueNDRangeKernel(cmdqueue, kernel, 1, NULL,&amp;global_item_size, &amp;local_item_size, 0, NULL, NULL);</code> returns <strong>0</strong>.</p>\n\n<p>Trying to get the result</p>\n\n<pre><code>ret = clEnqueueReadBuffer(cmdqueue, Bbuffer, CL_TRUE, 0, 32*sizeof(int), B, 0, NULL, NULL);` \nprintf(\"\\nB:-\\n\");\nfor (t=0; t &lt; 32; t++) {\n            printf(\"%d\\t \", B[t]);\n                }\n</code></pre>\n\n<p>This returns buildstatus=0 with core getting dumped for my AMD GPU (running AMD Accelerated Parallel Processing platform) and NVIDIA GPU whereas it works <strong>perfectly fine if the selected device is CPU using Intel(R) OpenCL platform</strong>.</p>\n\n<p>Also I tried getting the build log using:</p>\n\n<pre><code>cl_build_status *status=(cl_build_status *)malloc(sizeof(cl_build_status )*size);\nclGetProgramBuildInfo(kernelprgrm,devices[j], CL_PROGRAM_BUILD_STATUS ,size,status,NULL);\nprintf(\"\\nBuild status=%d\\n\",*status);\n</code></pre>\n\n<p>//Getting build info if not successful</p>\n\n<pre><code>clGetProgramBuildInfo(kernelprgrm,devices[i], CL_PROGRAM_BUILD_LOG ,0,NULL,&amp;size);\nchar *buildlog=(char*)malloc(size);\nclGetProgramBuildInfo(kernelprgrm,devices[i], CL_PROGRAM_BUILD_LOG ,size,buildlog,NULL);\nprintf(\"\\n!!!!!!!!!!!!!!!!!!!!!Program ended!!!!!!!!!!!\\n\");\nprintf(\"\\n\\nBuildlog:   %s\\n\\n\",buildlog);\n</code></pre>\n\n<p>But it returns <code>Buildlog:   Compilation started\nCompilation done\nLinking started\nLinking done\nDevice build started\nDevice build done\nKernel &lt;dataParallel&gt; was successfully vectorized (4)\nDone.\n</code> </p>\n"}, {"tags": ["c++", "c", "linux", "multithreading", "macos"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1435748233, "post_id": 31158942, "comment_id": 50327251, "body": "Perhaps the standard C library on MacOSX might be free software, so you could glimpse in their implemenation of <code>system</code> (I might guess they are using some global mutex, but I don&#39;t understand why). Otherwise, pick up some free software implementation of <code>system</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4934183"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1435748663, "post_id": 31158942, "comment_id": 50327545, "body": "@BasileStarynkevitch <a href=\"http://www.opensource.apple.com/source/Libc/Libc-1044.1.2/stdlib/FreeBSD/system.c\" rel=\"nofollow noreferrer\">Not sure if this is the right source file</a> but there&#39;s a mutex in there."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1435749161, "post_id": 31158942, "comment_id": 50327874, "body": "In general, it is a very bad idea to call C library functions from inside threads. From the C11 standard (which does supports threads): <code>The functions in the standard library are not guaranteed to be reentrant and may modify objects with static or thread storage duration.</code>"}, {"owner": {"reputation": 396, "user_id": 2995726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVx9b.png?s=128&g=1", "display_name": "stm", "link": "https://stackoverflow.com/users/2995726/stm"}, "edited": false, "score": 0, "creation_date": 1435749765, "post_id": 31158942, "comment_id": 50328294, "body": "@null Ok, I see the mutex in the implementation in system.c. When I run the program under dtruss I can also see the involvement of the mutex."}, {"owner": {"reputation": 396, "user_id": 2995726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVx9b.png?s=128&g=1", "display_name": "stm", "link": "https://stackoverflow.com/users/2995726/stm"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1435749953, "post_id": 31158942, "comment_id": 50328435, "body": "@BasileStarynkevitch I will look for a reimplementation of what happens inside system(). It looks like it is necessary to use the fork()/exec()/wait() system calls directly."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1435777070, "post_id": 31158942, "comment_id": 50346757, "body": "Why are you doing this? What is the real problem to solve? This question is not worth solving, whereas the real one might be."}, {"owner": {"reputation": 396, "user_id": 2995726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVx9b.png?s=128&g=1", "display_name": "stm", "link": "https://stackoverflow.com/users/2995726/stm"}, "edited": false, "score": 0, "creation_date": 1435780630, "post_id": 31158942, "comment_id": 50348764, "body": "The real problem is to run multiple executables in parallel from a controlling program. The above test program reproduces exactly the problem that I see with the real application (speedup through multithreading on Linux, but not on Mac OS X)."}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 2995726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVx9b.png?s=128&g=1", "display_name": "stm", "link": "https://stackoverflow.com/users/2995726/stm"}, "is_accepted": true, "score": 5, "last_activity_date": 1435913468, "last_edit_date": 1435913468, "creation_date": 1435820900, "answer_id": 31177757, "question_id": 31158942, "link": "https://stackoverflow.com/questions/31158942/why-is-a-multithreaded-c-program-forced-to-a-single-cpu-on-mac-os-x-when-system/31177757#31177757", "title": "Why is a multithreaded C program forced to a single CPU on Mac OS X when system() is used in a thread?", "body": "<p>@BasileStarynkevitch and @null pointed out that a global mutex in system() implementation in the C library of Mac OS X might be responsible for the observed behavior. @null provided a reference to the <a href=\"http://www.opensource.apple.com/source/Libc/Libc-1044.1.2/stdlib/FreeBSD/system.c\" rel=\"noreferrer\">potential source file</a> of the system() implementation, where these operations are contained:</p>\n\n<pre><code>#if __DARWIN_UNIX03\n    pthread_mutex_lock(&amp;__systemfn_mutex);\n#endif /* __DARWIN_UNIX03 */\n\n#if __DARWIN_UNIX03\n    pthread_mutex_unlock(&amp;__systemfn_mutex);\n#endif /* __DARWIN_UNIX03 */\n</code></pre>\n\n<p>By disassembling the system() function in lldb I verified that these calls are actually present in the compiled code.</p>\n\n<p>The solution is to replace the use of the system() C library function with a combination of the fork()/execve()/waitpid() system calls. A quick proof of concept for the modification of the worker() function in the original example:</p>\n\n<pre><code>static\nvoid *worker(void *t)\n{\n    static const char shell[] = \"/bin/sh\";\n    static const char * const args[] = { shell, \"-c\", \"sleep 1\", NULL };\n    static const char * const env[] = { NULL };\n\n    pid_t pid;\n    int i = *(int *)t;\n\n    printf(\"Thread %d started\\n\", i);\n\n    pid = fork();\n    if (pid == 0)\n    {\n        execve(shell, (char **) args, (char **) env);\n    }\n    waitpid(pid, NULL, 0);\n\n    printf(\"Thread %d ends\\n\", i);\n    return (void *) 0;\n}\n</code></pre>\n\n<p>With this modification the test program now executes in approximately one second on Mac OS X.</p>\n"}], "owner": {"reputation": 396, "user_id": 2995726, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVx9b.png?s=128&g=1", "display_name": "stm", "link": "https://stackoverflow.com/users/2995726/stm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "accepted_answer_id": 31177757, "answer_count": 1, "score": 6, "last_activity_date": 1435913468, "creation_date": 1435747013, "last_edit_date": 1435747737, "question_id": 31158942, "link": "https://stackoverflow.com/questions/31158942/why-is-a-multithreaded-c-program-forced-to-a-single-cpu-on-mac-os-x-when-system", "title": "Why is a multithreaded C program forced to a single CPU on Mac OS X when system() is used in a thread?", "body": "<p>I encountered a strange difference in the behavior of a program using pthreads between Linux and Mac OS X.</p>\n\n<p>Consider the following program that can be compiled with \"gcc -pthread -o threadtest threadtest.c\":</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic\nvoid *worker(void *t)\n{\n    int i = *(int *)t;\n\n    printf(\"Thread %d started\\n\", i);\n    system(\"sleep 1\");\n\n    printf(\"Thread %d ends\\n\", i);\n    return (void *) 0;\n}\n\nint main()\n{\n#define N_WORKERS   4\n\n    pthread_t       workers[N_WORKERS];\n    int                 args[N_WORKERS];\n    int         i;\n\n    for (i = 0; i &lt; N_WORKERS; ++i)\n    {\n        args[i] = i;\n        pthread_create(&amp;workers[i], NULL, worker, args + i);\n    }\n\n    for (i = 0; i &lt; N_WORKERS; ++i)\n    {\n        pthread_join(workers[i], NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Running the resulting executable on a 4-core Mac OS X machine results in the following behavior:</p>\n\n<pre><code>$ time ./threadtest\nThread 0 started\nThread 2 started\nThread 1 started\nThread 3 started\nThread 0 ends\nThread 1 ends\nThread 2 ends\nThread 3 ends\n\nreal    0m4.030s\nuser    0m0.006s\nsys 0m0.008s\n</code></pre>\n\n<p>Note that the number of actual cores is probably not even relevant, as the time is simply spent in the \"sleep 1\" shell command without any computation. It is also apparent that the threads are started in parallel as the \"Thread ... started\" messages appear instantly after the program is started.</p>\n\n<p>Running the same test program on a Linux machine gives the result that I expect:</p>\n\n<pre><code>$ time ./threadtest\nThread 0 started\nThread 3 started\nThread 1 started\nThread 2 started\nThread 1 ends\nThread 2 ends\nThread 0 ends\nThread 3 ends\n\nreal    0m1.010s\nuser    0m0.008s\nsys 0m0.013s\n</code></pre>\n\n<p>Four processes are started in parallel that each sleep for a second, and that takes roughly a second.</p>\n\n<p>If I put actual computations into the worker() function and remove the system() call, I see the expected speedup also in Mac OS X.</p>\n\n<p>So the question is, why does using the system() call in a thread effectively serialize the execution of the threads on Mac OS X, and how can that be prevented?</p>\n"}, {"tags": ["c", "graph", "plot"], "comments": [{"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1435745936, "post_id": 31158564, "comment_id": 50325720, "body": "Can&#39;t you use GNUPlot?"}, {"owner": {"reputation": 219, "user_id": 2563812, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/20e784d0e27f01687e1cb05ffd63abdf?s=128&d=identicon&r=PG", "display_name": "user2563812", "link": "https://stackoverflow.com/users/2563812/user2563812"}, "reply_to_user": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1435746112, "post_id": 31158564, "comment_id": 50325834, "body": "Sorry for not making it clear. I send the v_total value to serial plot and real time plot the graph in Matlab. I use C code to program the processor in Altera development board."}], "owner": {"reputation": 219, "user_id": 2563812, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/20e784d0e27f01687e1cb05ffd63abdf?s=128&d=identicon&r=PG", "display_name": "user2563812", "link": "https://stackoverflow.com/users/2563812/user2563812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435746033, "creation_date": 1435745846, "last_edit_date": 1435746033, "question_id": 31158564, "link": "https://stackoverflow.com/questions/31158564/how-to-plot-step-graph-in-c-code", "title": "How to plot step graph in C code", "body": "<p>I want to plot an output voltage of a multilevel converter, basically the output should look like <a href=\"https://www.google.co.uk/search?q=multilevel+waveform&amp;rls=com.microsoft:en-GB&amp;rlz=1I7IRFG_enGB523&amp;tbm=isch&amp;tbo=u&amp;source=univ&amp;sa=X&amp;ei=mCuJVb6yBYjaU62jn5AD&amp;ved=0CCEQsAQ&amp;biw=1412&amp;bih=724#imgrc=ldaAZ-mgFRLoAM%253A%3BDYNwwJb7cj-YhM%3Bhttp%253A%252F%252Fwww.ijser.org%252Fpaper%252FTHD-Minimization-in-Single-Phase-Symmetrical-Cascaded-Multilevel-Inverter-Using-Programmed-PWM-Technique%252FImage_004.jpg%3Bhttp%253A%252F%252Fwww.ijser.org%252Fpaper%252FTHD-Minimization-in-Single-Phase-Symmetrical-Cascaded-Multilevel-Inverter-Using-Programmed-PWM-Technique.html%3B317%3B249\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>where in each time step, the output voltage increases by ONE step. For example, when t=0s, the v_total is zero, when it comes to t1, the v_total is V, when t=t2(next time step), the v_total is 2V, ...3V...etc</p>\n\n<p>I am coding in C language using Altera Monitor Program for Nios II system.</p>\n\n<p>I have three capacitors which add up ONE capacitor voltage at a time. </p>\n\n<pre><code>for(i=0;i&lt;3;i++)\n{\n    v_total=v_total+v_capacitor[i];\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/xnAaF.jpg\" alt=\"enter image description here\">\nThere are four plots in the image, please look at the red plot. I draw a green circle in the image, you can see that the value increased from zero to the peak in a slope, but what I expect to see is as drawn in the purple line on the same image.</p>\n\n<p>EDIT: My question is, what technically went wrong in my code that results in the red line plotted instead of the purple line? Or could it be just sampling issue?</p>\n\n<p>Appreciate any input....thank you in advance!</p>\n"}, {"tags": ["c", "linux", "operating-system", "kernel", "qemu"], "answers": [{"tags": [], "owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "is_accepted": true, "score": 1, "last_activity_date": 1440085509, "creation_date": 1440085509, "answer_id": 32122692, "question_id": 31157895, "link": "https://stackoverflow.com/questions/31157895/testing-a-system-call-in-qemu/32122692#32122692", "title": "Testing a system call in qemu", "body": "<p><a href=\"http://man7.org/linux/man-pages/man2/syscall.2.html\" rel=\"nofollow\">syscall()</a> function in unistd.h can be used.</p>\n\n<p>Refer the following blog which does exactly same.<br/>\n<a href=\"http://linuxseekernel.blogspot.ie/2014/07/adding-system-call-in-x86-qemu.html\" rel=\"nofollow\">http://linuxseekernel.blogspot.ie/2014/07/adding-system-call-in-x86-qemu.html</a> </p>\n"}], "owner": {"reputation": 1326, "user_id": 3884862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a96c04421620eb2ef052513984c2827?s=128&d=identicon&r=PG&f=1", "display_name": "theadnangondal", "link": "https://stackoverflow.com/users/3884862/theadnangondal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 32122692, "answer_count": 1, "score": 0, "last_activity_date": 1440085509, "creation_date": 1435743896, "question_id": 31157895, "link": "https://stackoverflow.com/questions/31157895/testing-a-system-call-in-qemu", "title": "Testing a system call in qemu", "body": "<p>I have just started to look into the <em>Linux kernel development</em>. I have a kernel image <strong><em>bzimage</em></strong> and an <strong><em>initrd</em></strong> which works fine on <strong>qemu</strong>. Now I have compiled the kernel after adding a new sys call to it. I want to test the system call on qemu what is the preferred way of doing this, (if any) ? </p>\n"}, {"tags": ["java", "c", "crc32"], "comments": [{"owner": {"reputation": 4085, "user_id": 4185106, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/er5li.png?s=128&g=1", "display_name": "moffeltje", "link": "https://stackoverflow.com/users/4185106/moffeltje"}, "edited": false, "score": 1, "creation_date": 1435742992, "post_id": 31157438, "comment_id": 50323855, "body": "Show your code in Java and we might be able to help you ;)"}, {"owner": {"reputation": 773, "user_id": 1228434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9abea429fdc00dbb04fcd547e094473?s=128&d=identicon&r=PG", "display_name": "mike", "link": "https://stackoverflow.com/users/1228434/mike"}, "edited": false, "score": 0, "creation_date": 1435743180, "post_id": 31157438, "comment_id": 50323979, "body": "This might help: <a href=\"http://stackoverflow.com/questions/25723365/calculate-crc32b-in-java\" title=\"calculate crc32b in java\">stackoverflow.com/questions/25723365/calculate-crc32b-in-jav&zwnj;&#8203;a</a>"}], "answers": [{"tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 1, "last_activity_date": 1435744339, "creation_date": 1435744339, "answer_id": 31158051, "question_id": 31157438, "link": "https://stackoverflow.com/questions/31157438/generate-crc-in-java-and-c/31158051#31158051", "title": "Generate CRC in Java and C", "body": "<p>You can easily emulate most unsigned arithmetic with signed integers in Java (some things are more annoying, such as division, but it is not used here).</p>\n\n<p>This in particular is very easy, <code>0xFFFFFFFF</code> is just itself, also known as -1.</p>\n\n<p>The <code>&gt;&gt;</code> should be replaced by its unsigned counterpart, <code>&gt;&gt;&gt;</code>.</p>\n\n<p>And the <code>byte</code> from the message has to be masked to undo the sign-extension.</p>\n\n<p>In total (not tested)</p>\n\n<pre><code>int crc32b(byte[] message) {\n   int i, j;\n   int b, crc, mask;\n\n   i = 0;\n   crc = -1;\n   while (i &lt; message.length) {\n      b = message[i] &amp; 0xFF;        // Get next byte.\n      crc = crc ^ b;\n      for (j = 7; j &gt;= 0; j--) {    // Do eight times.\n         mask = -(crc &amp; 1);\n         crc = (crc &gt;&gt;&gt; 1) ^ (0xEDB88320 &amp; mask);\n      }\n      i = i + 1;\n   }\n   return ~crc;\n}\n</code></pre>\n\n<p>That's still quite C-ish though.</p>\n"}], "owner": {"reputation": 49, "user_id": 4742195, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8616d06d3713aedba1e3fe94a7432d76?s=128&d=identicon&r=PG&f=1", "display_name": "Hu hu", "link": "https://stackoverflow.com/users/4742195/hu-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "closed_date": 1435839234, "answer_count": 1, "score": -1, "last_activity_date": 1435744339, "creation_date": 1435742718, "question_id": 31157438, "link": "https://stackoverflow.com/questions/31157438/generate-crc-in-java-and-c", "closed_reason": "Not suitable for this site", "title": "Generate CRC in Java and C", "body": "<p>Here my code in C.</p>\n\n<pre><code>unsigned int crc32b(unsigned char *message) {\n   int i, j;\n   unsigned int byte, crc, mask;\n\n   i = 0;\n   crc = 0xFFFFFFFF;\n   while (message[i] != 0) {\n      byte = message[i];            // Get next byte.\n      crc = crc ^ byte;\n      for (j = 7; j &gt;= 0; j--) {    // Do eight times.\n         mask = -(crc &amp; 1);\n         crc = (crc &gt;&gt; 1) ^ (0xEDB88320 &amp; mask);\n      }\n      i = i + 1;\n   }\n   return ~crc;\n}\n</code></pre>\n\n<p>But in Java, unsign int is not supported. so I try to get unsign by &amp;0xFFFFFF</p>\n\n<p>But and it wrong. How to fix it in java</p>\n"}, {"tags": ["c", "tcp", "wireshark", "libpcap", "tcpdump"], "comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435822216, "post_id": 31157387, "comment_id": 50362731, "body": "Ethernet header is always 14byte long, so you can advance the pointer 14 positions to get it skipped :)"}], "answers": [{"comments": [{"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1435758623, "post_id": 31163132, "comment_id": 50334953, "body": "This is a comment more than an answer"}, {"owner": {"reputation": 198, "user_id": 4569123, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-uqCdw4D7Ki4/AAAAAAAAAAI/AAAAAAAABtc/A6pFungvYjs/photo.jpg?sz=128", "display_name": "Michael Gopshtein", "link": "https://stackoverflow.com/users/4569123/michael-gopshtein"}, "reply_to_user": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1435759082, "post_id": 31163132, "comment_id": 50335328, "body": "@Samer I can&#39;t post comments, need certain &quot;reputation&quot; level for this :) Anyway, hope it will be helpful."}], "tags": [], "owner": {"reputation": 198, "user_id": 4569123, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-uqCdw4D7Ki4/AAAAAAAAAAI/AAAAAAAABtc/A6pFungvYjs/photo.jpg?sz=128", "display_name": "Michael Gopshtein", "link": "https://stackoverflow.com/users/4569123/michael-gopshtein"}, "is_accepted": false, "score": 0, "last_activity_date": 1435758249, "creation_date": 1435758249, "answer_id": 31163132, "question_id": 31157387, "link": "https://stackoverflow.com/questions/31157387/how-to-capture-packets-in-pcap-and-skip-ethernet-header/31163132#31163132", "title": "how to capture packets in pcap, and skip ethernet header", "body": "<p>I don't think you can. You need to manually skip the Ethernet header part when parsing the packet buffer.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 3647469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d5bfabc9826076c611899762d1d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "user3647469", "link": "https://stackoverflow.com/users/3647469/user3647469"}, "edited": false, "score": 0, "creation_date": 1436856142, "post_id": 31169279, "comment_id": 50773751, "body": "Thanks Harris !! It was useful"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": true, "score": 0, "last_activity_date": 1435776373, "creation_date": 1435776373, "answer_id": 31169279, "question_id": 31157387, "link": "https://stackoverflow.com/questions/31157387/how-to-capture-packets-in-pcap-and-skip-ethernet-header/31169279#31169279", "title": "how to capture packets in pcap, and skip ethernet header", "body": "<blockquote>\n  <p>I am using  <code>fp = pcap_open_dead(DLT_EN10MB,65535);</code> to capture frames in pcap format.</p>\n</blockquote>\n\n<p>Presumably you mean \"to write frames to a file in pcap format\"; the \"dead\" in \"pcap_open_dead\" means \"not live\", as in \"you can't capture packets from this\".</p>\n\n<p>(It's necessary because the <code>pcap_dump_open()</code> call doesn't take a DLT_ value and a snapshot length as a type, it takes a <code>pcap_t *</code> and gets the DLT_ value and snapshot length from there.  That's convenient if you're saving packets from a live capture you opened with <code>pcap_open_live()</code> or <code>pcap_create()</code>/<code>pcap_activate()</code>, or another capture file you opened with <code>pcap_open_offline()</code>, but it's not very convenient if the packets aren't coming from libpcap/WinPcap.)</p>\n\n<blockquote>\n  <p>But what fp = pcap_open_dead(<strong>DLT_XXX</strong> ) should I use if I want to skip the ethernet header. My module is working on layer 3 , so I want to capture packets starting from layer 3.</p>\n</blockquote>\n\n<p>If \"layer 3\" means \"IP\", so that all your packets are IPv4 or IPv6 packets, you want <code>DLT_RAW</code>.</p>\n\n<p>Skipping the Ethernet header, however, is <em>your</em> job.  If whatever mechanism is supplying the captured frames is supplying frames with Ethernet headers, then <em>you</em> have to skip the Ethernet header - and discard frames where the type/length field in the Ethernet header is anything other than 0x0800 for IPv4 or 0x86dd for IPv6 - and calculate the appropriate captured length and on-the-wire length (14 bytes fewer than the captured and on-the-wire lengths of the frames with Ethernet headers; if either of those are less than or equal to 14, discard the frame), and hand those, along with a pointer to the data after the Ethernet header to <code>pcap_dump()</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 3647469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d5bfabc9826076c611899762d1d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "user3647469", "link": "https://stackoverflow.com/users/3647469/user3647469"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 31169279, "answer_count": 2, "score": 1, "last_activity_date": 1435776373, "creation_date": 1435742569, "last_edit_date": 1435744055, "question_id": 31157387, "link": "https://stackoverflow.com/questions/31157387/how-to-capture-packets-in-pcap-and-skip-ethernet-header", "title": "how to capture packets in pcap, and skip ethernet header", "body": "<p>I am using \n<code>fp = pcap_open_dead(DLT_EN10MB,65535);</code>\n to capture frames in pcap format. But what <code>fp = pcap_open_dead(**DLT_XXX** )</code>\n should I use <strong>if I want to skip the ethernet header</strong>. My module is working on layer 3 , so I want to capture packets starting from layer 3.</p>\n\n<pre><code>fp = pcap_open_dead(DLT_EN10MB,65535);\nif (NULL == fp)\n{\n    FPA_ERROR_PRINT(\"unable to open the dead interface \\n\");\n    return 1;\n</code></pre>\n\n<p>Any help will on this will be highly appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1469874776, "post_id": 31157370, "comment_id": 64726034, "body": "This <a href=\"http://stackoverflow.com/questions/2618736/why-is-it-assumed-that-send-may-return-with-less-than-requested-data-transmitted\">question</a> is similar to my questions and it&#39;s more useful."}], "answers": [{"comments": [{"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 1, "creation_date": 1435744727, "post_id": 31158176, "comment_id": 50324972, "body": "Do you have some reference to support your answer ? I&#39;m sure that TCP will handle the packets lost without make the <code>send</code> method return."}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435745542, "post_id": 31158176, "comment_id": 50325496, "body": "You can check out how device drivers implement their <code>write()</code> functions. <code>send()</code> does a lot familiar to <code>write()</code> but the network relevant parts. In the implement of <code>write()</code>, you will find something like this: <code>if (signal_pending(current)) return -ERESTARTSYS; </code> which will interrupt the transmission if some signals is pending. <a href=\"http://www.makelinux.net/ldd3/chp-6-sect-2\" rel=\"nofollow noreferrer\">makelinux.net/ldd3/chp-6-sect-2</a> maybe can help you."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435748933, "post_id": 31158176, "comment_id": 50327736, "body": "Thanks, but we are talking about socket, the implementation seems to be the file system IO, not the network. Though they have the same interface but they are implemented differently."}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435749531, "post_id": 31158176, "comment_id": 50328135, "body": "socket is a special I/O, the <code>read()</code> and <code>send()</code> are nearly no different. You can check <a href=\"http://stackoverflow.com/questions/1790750/what-is-the-difference-between-read-and-recv-and-between-send-and-write\" title=\"what is the difference between read and recv and between send and write\">stackoverflow.com/questions/1790750/&hellip;</a> for this. Also, if you actually know the bottom of Linux OS, all of these operations are based on the Virtual Filesystem layer, no matter network socket or files on spin disk."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435750631, "post_id": 31158176, "comment_id": 50328915, "body": "Virtual File system offers the same interface to users, but the implementation below is different from each other."}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435751198, "post_id": 31158176, "comment_id": 50329309, "body": "Of course! <code>write()</code> or <code>send()</code> are high lever functions based on virtual filesystem not only for userspace, but also parts of kernel space."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752033, "post_id": 31158176, "comment_id": 50329915, "body": "I&#39;m not sure if it will be interrupted by a signal after <code>send</code> start to transmitting data, but I think your statement about the returned less bytes is wrong."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1435753777, "post_id": 31158176, "comment_id": 50331171, "body": "What do feel it wrong with &quot;<i>... [the] statement about the returned less bytes ...</i>&quot;?"}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "edited": false, "score": 0, "creation_date": 1435754242, "post_id": 31158176, "comment_id": 50331516, "body": "I think you need to learn more about kernel. I can explain this in hundreds of words. VFS actually hides the most hardware related details and provides a common interface above. Filipe Gon&#231;alves&#39; answer shows the fact that no matter <code>write()</code> or <code>send()</code>, before they actually operate datas, they give you a chance to handle the signals which still pending, it is implemented via something like <code>if (signal_pending(current)) return -ERESTARTSYS;</code>."}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435754920, "post_id": 31158176, "comment_id": 50331998, "body": "@alk I thinks it is one of all cases which could cause this. Can you show me some clues about this?"}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435757299, "post_id": 31158176, "comment_id": 50333888, "body": "@DouglasSu I will learn it :) send method in blocking mode returns when a)the peer close the socket b) it finish sending the data c) signal raise . But it won&#39;t returns when some packets are lost, tcp will resend them when it receive a repeat ack or timer is time out."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435757414, "post_id": 31158176, "comment_id": 50333975, "body": "@alk Actually I have the book. By the way what do you think of this answer ?"}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435759911, "post_id": 31158176, "comment_id": 50335970, "body": "@KudoCC You stand in userspace, I stand at the bottom of OS, So, from your view packets loss can never happen."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435760098, "post_id": 31158176, "comment_id": 50336104, "body": "I didn&#39;t say packets loss wouldn&#39;t happen, but it won&#39;t cause <code>send</code> method return. But if the receiver never response to the sender, after a period of time, tcp will give up and <code>send</code> method will return."}, {"owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "edited": false, "score": 0, "creation_date": 1435766177, "post_id": 31158176, "comment_id": 50340448, "body": "what will happen if parts of packets are successfully transmitted and they are sent by a single call to send syscall"}], "tags": [], "owner": {"reputation": 2903, "user_id": 3824053, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/uso1K.png?s=128&g=1", "display_name": "Douglas Su", "link": "https://stackoverflow.com/users/3824053/douglas-su"}, "is_accepted": false, "score": -1, "last_activity_date": 1435745297, "last_edit_date": 1435745297, "creation_date": 1435744667, "answer_id": 31158176, "question_id": 31157370, "link": "https://stackoverflow.com/questions/31157370/a-signal-interrupts-the-send-method-in-blocking-mode/31158176#31158176", "title": "A signal interrupts the send method in blocking mode", "body": "<blockquote>\n  <p>[EINTR] A signal interrupts the system call before any data is transmitted.</p>\n</blockquote>\n\n<p>This means that if <code>send()</code> start transmitting data, it won't be interrupted by any signals. So, transmission will block the receiving of signal until it finishes. The situation that <code>send()</code> may return less bytes of data than you passed as third parameter is usually due to the network problems, such as packets lost. </p>\n"}, {"comments": [{"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435749062, "post_id": 31159110, "comment_id": 50327814, "body": "I have the same idea with you but I&#39;m not sure about that. That&#39;s because I don&#39;t understand why it is an error when &quot;A signal occurred before any data was transmitted&quot;, if &quot;a signal occurred&quot; causes the error, why &quot;a signal occurred after some data was transmitted&quot; is a succuss."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435749882, "post_id": 31159110, "comment_id": 50328378, "body": "@KudoCC: If you face a different bahaviour, either your program or <code>send()</code>&#39;s implementation is buggy."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435749959, "post_id": 31159110, "comment_id": 50328440, "body": "@KudoCC: Getting interrupted by a signal is not to be considered an error. At least on Linux you also can switch off this behaviour on a signal base using the signal attribute <code>SA_RESTART</code>."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435750472, "post_id": 31159110, "comment_id": 50328803, "body": "Thanks, what I want is that you make sure about that :)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752205, "post_id": 31159110, "comment_id": 50330039, "body": "@KudoCC: Isn&#39;t this &quot;<i>From this info above one can safely conclude that ...</i>&quot; sure enough?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752422, "post_id": 31159110, "comment_id": 50330200, "body": "@KudoCC: You might want to accept this great answer <a href=\"http://stackoverflow.com/a/31160284/694576\">stackoverflow.com/a/31160284/694576</a>, but mine."}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752706, "post_id": 31159110, "comment_id": 50330412, "body": "Thanks for your advice :D It&#39;s generous of you."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 2, "last_activity_date": 1435748212, "last_edit_date": 1435748212, "creation_date": 1435747577, "answer_id": 31159110, "question_id": 31157370, "link": "https://stackoverflow.com/questions/31157370/a-signal-interrupts-the-send-method-in-blocking-mode/31159110#31159110", "title": "A signal interrupts the send method in blocking mode", "body": "<p>The <a href=\"http://man7.org/linux/man-pages/man2/send.2.html\" rel=\"nofollow\">documentation</a> is clear.</p>\n\n<blockquote>\n  <p><strong>RETURN VALUE</strong></p>\n  \n  <p>On success, these calls return the number of bytes sent.  On error, -1 is returned, and errno is set appropriately.</p>\n  \n  <p>[...]</p>\n  \n  <p><strong>EINTR</strong>  A signal occurred before any data was transmitted;</p>\n</blockquote>\n\n<p><code>send()</code> either returns </p>\n\n<ul>\n<li>the number of bytes sent</li>\n<li>or <code>-1</code> </li>\n</ul>\n\n<p>If <code>-1</code> is returned the reason is indicated via the value of <code>errno</code>.</p>\n\n<p>If <code>errno</code> equals <code>EINTR</code> a signal interupted <code>send()</code> while <strong>no data had been received</strong> so far.</p>\n\n<p>From this info above one can safely conclude that <em>if</em> data had been received the <code>send()</code> function would <em>not</em> return <code>-1</code>, not matter whether a signal was received or not.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435752385, "post_id": 31160284, "comment_id": 50330180, "body": "Thanks for taking the burden of giving a significant amount of background info on this! :-) 1+ btw"}, {"owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752467, "post_id": 31160284, "comment_id": 50330234, "body": "Thanks for your answer, I have noticed it for a while and tried to understand it, but I find it&#39;s hard to understand unless having some background knowledage about the kernel/signal and so on."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "edited": false, "score": 0, "creation_date": 1435752598, "post_id": 31160284, "comment_id": 50330333, "body": "@KudoCC Glad I could help! Thanks for the great question too :)"}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 2, "last_activity_date": 1435750871, "creation_date": 1435750871, "answer_id": 31160284, "question_id": 31157370, "link": "https://stackoverflow.com/questions/31157370/a-signal-interrupts-the-send-method-in-blocking-mode/31160284#31160284", "title": "A signal interrupts the send method in blocking mode", "body": "<p>The other answers are pretty clear, but after reading some of your comments, I would like to add some further information.</p>\n\n<p>First of all, you got the idea behind <code>EINTR</code> wrong. Getting interrupted by a signal in a syscall is not to be perceived as an error. The rationale behind <code>EINTR</code> in slow syscalls (slow syscalls are those that can block forever, like <code>open(2)</code> on some file types - terminal devices for example - <code>accept(2)</code>, <code>read(2)</code> and <code>write(2)</code> on some devices - sockets included - etc.) is that if your program was blocked in a syscall and a signal was caught (while still blocked), then it is very likely (but not mandatory) that the signal handler changed state in your program and things are different, so the call returns prematurely with <code>EINTR</code> to give you a chance of doing anything that you might want to do. It is not an error like <code>EINVAL</code> or <code>EBADF</code> or other \"real\" errors - it's just the way the kernel tells you that a signal was caught.</p>\n\n<p>If you don't want to do anything, then either set the <code>SA_RESTART</code> flag on the <code>sa_flags</code> field of <code>struct sigaction</code> when setting up the signal handler (which causes the syscall to be automatically restarted), or explicitly call <code>send(2)</code> again when it returns -1 with <code>errno</code> set to <code>EINTR</code>.</p>\n\n<p>The bottom line is, there isn't an inherent limitation on the kernel that forces it to return to userspace when signals are caught. Instead, <code>EINTR</code> is just a convenient behavior that developers might find useful.</p>\n\n<p>If the kernel was in the midst of transmitting data and a signal was raised, it's no big deal: if data is being transmitted, the syscall is doing progress. The kernel is in process context executing a syscall in behalf of the program that called it, so technically the process is not sleeping anymore. If a signal arrives, it will be pending until the kernel decides that it's time to deliver it to the process - most likely, this happens once <code>send(2)</code> returns.</p>\n"}], "owner": {"reputation": 6712, "user_id": 1079899, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/igh8q.jpg?s=128&g=1", "display_name": "KudoCC", "link": "https://stackoverflow.com/users/1079899/kudocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 31160284, "answer_count": 3, "score": 3, "last_activity_date": 1435750871, "creation_date": 1435742524, "question_id": 31157370, "link": "https://stackoverflow.com/questions/31157370/a-signal-interrupts-the-send-method-in-blocking-mode", "title": "A signal interrupts the send method in blocking mode", "body": "<p>I'm programming with socket which is in blocking mode, I have a question about <code>send</code> method.</p>\n\n<p>In the man page of <code>send</code> method, it says:</p>\n\n<blockquote>\n  <p>[EINTR]            A signal interrupts the system call before any data is transmitted.</p>\n</blockquote>\n\n<p>It means if a signal interrupts the system call before any data is transmitted, the <code>send</code> would return -1 and <code>errno</code> would be set to <code>EINTR</code>. </p>\n\n<p>My question is that if a part of data has been transmitted when a signal interrupts the system call, what will return. It seems that it shouldn't return -1 because it has send some data. I think it will return the number of data has been transmitted which means <code>send</code> method in the blocking mode may return less number of data than you passed as third parameter.</p>\n\n<p><code>ssize_t send(int socket, const void *buffer, size_t length, int flags);</code></p>\n"}, {"tags": ["c", "linux", "parallel-processing", "opencl", "gpgpu"], "comments": [{"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "reply_to_user": {"reputation": 35010, "user_id": 703016, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6daa32d7171f74efb1b663c6edc32e3b?s=128&d=identicon&r=PG&f=1", "display_name": "user703016", "link": "https://stackoverflow.com/users/703016/user703016"}, "edited": false, "score": 0, "creation_date": 1435743251, "post_id": 31157337, "comment_id": 50324028, "body": "I already have. Uptil the buildlog everything works perfectly fine. The platforms are getting listed. I have built the context,commandqueue. Everything else works but there is an error with the kernel code which I am trying to find out using the buildlog but it is not giving me the exact error. @buttiful-buttefly"}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1435743307, "post_id": 31157337, "comment_id": 50324064, "body": "Have you checked the error codes returned by <code>clGetProgramBuildInfo</code>?"}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435743341, "post_id": 31157337, "comment_id": 50324092, "body": "Ok I am updating the question and giving the entire code as well as output."}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1435743366, "post_id": 31157337, "comment_id": 50324119, "body": "Yes. it returns -11 @jprice"}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435743392, "post_id": 31157337, "comment_id": 50324145, "body": "I am also running a second program for which it returns -1 but getting the same buildlog"}, {"owner": {"reputation": 5603, "user_id": 453082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vQDEy.png?s=128&g=1", "display_name": "Aderstedt", "link": "https://stackoverflow.com/users/453082/aderstedt"}, "edited": false, "score": 0, "creation_date": 1435769106, "post_id": 31157337, "comment_id": 50342218, "body": "Can you try first checking the  <code>CL_PROGRAM_BUILD_STATUS</code>?"}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435829846, "post_id": 31157337, "comment_id": 50367687, "body": "I looked up on the internet and found this code which gives the buildlog: <code>size_t len;        char buffer[2048];        printf(&quot;Error: Failed to build program executable!\\n&quot;);        clGetProgramBuildInfo(program, device_id, CL_PROGRAM_BUILD_LOG, sizeof(buffer),         buffer, &amp;len);         printf(&quot;%s\\n&quot;, buffer);</code>  Why wont my original code work? Any explanation?"}, {"owner": {"reputation": 5603, "user_id": 453082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vQDEy.png?s=128&g=1", "display_name": "Aderstedt", "link": "https://stackoverflow.com/users/453082/aderstedt"}, "edited": false, "score": 0, "creation_date": 1435832795, "post_id": 31157337, "comment_id": 50369744, "body": "Try verifying the size you&#39;re getting back from the first call, <code>size</code>."}, {"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435906743, "post_id": 31157337, "comment_id": 50404033, "body": "Sorted it out. But it returns an empty string meaning CL_BUILD_NONE. Although my program runs successfully, what couold it mean?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435906702, "post_id": 31183893, "comment_id": 50404013, "body": "Sorted it out. But it returns an empty string meaning <code>CL_BUILD_NONE</code>. Although my program runs successfully, what couold it mean?"}, {"owner": {"reputation": 1726, "user_id": 2318663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6864e3a97aa51575aa17f0215d9344a8?s=128&d=identicon&r=PG", "display_name": "Roman Arzumanyan", "link": "https://stackoverflow.com/users/2318663/roman-arzumanyan"}, "reply_to_user": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 0, "creation_date": 1435931427, "post_id": 31183893, "comment_id": 50418602, "body": "Does it give you empty log after successful build?"}, {"owner": {"reputation": 1726, "user_id": 2318663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6864e3a97aa51575aa17f0215d9344a8?s=128&d=identicon&r=PG", "display_name": "Roman Arzumanyan", "link": "https://stackoverflow.com/users/2318663/roman-arzumanyan"}, "reply_to_user": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "edited": false, "score": 1, "creation_date": 1436007305, "post_id": 31183893, "comment_id": 50439827, "body": "Personally, I don&#39;t see any problem in empty log, if build is ok. Typical behaviour for any compiler (unless in verbose mode)."}], "tags": [], "owner": {"reputation": 1726, "user_id": 2318663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6864e3a97aa51575aa17f0215d9344a8?s=128&d=identicon&r=PG", "display_name": "Roman Arzumanyan", "link": "https://stackoverflow.com/users/2318663/roman-arzumanyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1435837849, "creation_date": 1435837849, "answer_id": 31183893, "question_id": 31157337, "link": "https://stackoverflow.com/questions/31157337/clgetprogrambuildinfo-does-not-print-build-log/31183893#31183893", "title": "clGetProgramBuildInfo does not print build log", "body": "<p>I tested this code on my machine and it works ok:</p>\n\n<pre><code>size_t len = 0;\ncl_int ret = CL_SUCCESS;\nret = clGetProgramBuildInfo(program, device_id, CL_PROGRAM_BUILD_LOG, 0, NULL, &amp;len);\nchar *buffer = calloc(len, sizeof(char));\nret = clGetProgramBuildInfo(program, device_id, CL_PROGRAM_BUILD_LOG, len, buffer, NULL);\n</code></pre>\n\n<p>As soon as it looks pretty much like your code, there are 2 differences, which may produce error:</p>\n\n<ul>\n<li>Check return codes</li>\n<li>Check index of device in array. May be you want to get log from wrong device.</li>\n</ul>\n"}], "owner": {"reputation": 103, "user_id": 5043237, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6572aa359534e116fc5b5bdbe6ce45ed?s=128&d=identicon&r=PG&f=1", "display_name": "ikk", "link": "https://stackoverflow.com/users/5043237/ikk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3155, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435837849, "creation_date": 1435742447, "last_edit_date": 1435742579, "question_id": 31157337, "link": "https://stackoverflow.com/questions/31157337/clgetprogrambuildinfo-does-not-print-build-log", "title": "clGetProgramBuildInfo does not print build log", "body": "<p>I have written a code in OpenCL. There is an error while building the kernel program. The error code is -11. I tried printing the BUILD LOG but it does not print a proper log but instead it generates some random variables. Here is that part</p>\n\n<pre><code>//these are variable declarations\ncl_device_id* devices;\ncl_program kernelprgrm;\nsize_t size;\n//these varaibles have already been assigned properly\n\n//main code\nclGetProgramBuildInfo(kernelprgrm,devices[i], CL_PROGRAM_BUILD_LOG ,0,NULL,&amp;size);\nchar *buildlog=(char*)malloc(size);\nclGetProgramBuildInfo(kernelprgrm,devices[i], CL_PROGRAM_BUILD_LOG ,size,buildlog,NULL);\nprintf(\"\\n\\nBuildlog:   %s\\n\\n\",buildlog);\n</code></pre>\n\n<p>It gives the following output :-</p>\n\n<pre><code>Buildlog:   \ufffd\ufffd\ufffd0\n</code></pre>\n\n<p>Please help me in getting a proper build log. Thanks</p>\n"}, {"tags": ["c", "type-conversion"], "comments": [{"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1435742056, "post_id": 31157164, "comment_id": 50323162, "body": "<code>suseconds_t</code> is likely to be something like <code>std::size_t</code> .. or some other unsigned type."}, {"owner": {"reputation": 35010, "user_id": 703016, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6daa32d7171f74efb1b663c6edc32e3b?s=128&d=identicon&r=PG&f=1", "display_name": "user703016", "link": "https://stackoverflow.com/users/703016/user703016"}, "edited": false, "score": 15, "creation_date": 1435742070, "post_id": 31157164, "comment_id": 50323176, "body": "Precisely to prevent users from shooting themselves in the foot, as you are happily trying to do. Over the long run, it <b>is</b> very user-friendly, because you spend far less time debugging: if your program is incorrect, it won&#39;t even compile, and the compiler will tell you why."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1435742236, "post_id": 31157164, "comment_id": 50323286, "body": "Thankfully you&#39;ve never heard of languages like C# (.NET) or Haskell :}"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 4, "creation_date": 1435742603, "post_id": 31157164, "comment_id": 50323560, "body": "<i>&quot;simply using primitive types such as <code>int</code> <code>short</code> ...&quot;</i> <code>int</code> and <code>short</code> aren&#39;t necessarily big enough to store the implementation&#39;s range of <code>tv_sec</code> values.  If <code>tv_sec</code> is a 64 bit value, isn&#39;t it reasonable and potentially useful to warn that you might loose precision in the conversion to <code>double</code>?  And they&#39;re not necessarily <i>&quot;so many different types&quot;</i> - they&#39;re likely <code>typedef</code>s to the simpler, familiar types, but the compiler&#39;s showing the <code>typedef</code> name as it&#39;s typically more informative."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1435742905, "post_id": 31157164, "comment_id": 50323796, "body": "Where does <a href=\"http://www.iso-9899.info/n1570.html\" rel=\"nofollow noreferrer\">the C standard</a> define <code>suseconds_t</code>, as an <i>incomplete type</i> or otherwise?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1435744881, "post_id": 31157164, "comment_id": 50325087, "body": "The warning is not about the addition but about the fact that a <code>double</code> can&#39;t accurately represent the entire range of <code>time_t</code> or <code>suseconds_t</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1435747613, "post_id": 31157164, "comment_id": 50326830, "body": "C# has a lot more primitive types than C, but they&#39;re easy to remember. Pascal, OTOH, has different names for signed and unsigned types. That&#39;s not counting constructed types"}, {"owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1435753631, "post_id": 31157164, "comment_id": 50331075, "body": "@molbdnilo Of course I know that. But to add up the two, I have to cast both to a common type first, something like least common multiple. Right? So what&#39;s the common supper type of the two types?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435766577, "post_id": 31157164, "comment_id": 50340718, "body": "Which (version of which) compiler are you using, and what compilation options are you using to get that message?  GCC with <code>-Wconversion</code> might do it, but modern versions of GCC give a differently formatted error message (which includes the <code>-Wconversion</code> or equivalent flag as part of the message).  Also, are you compiling for 32-bit or 64-bit platforms?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1435767537, "post_id": 31157164, "comment_id": 50341329, "body": "@undefinedbehaviour: the <code>struct timeval</code> type is defined by POSIX, not by the C standard.  See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/gettimeofday.html\" rel=\"nofollow noreferrer\"><code>gettimeofday()</code></a> and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_time.h.html#tag_13_64\" rel=\"nofollow noreferrer\"><code>&lt;sys&#47;time.h&gt;</code></a>.  Note that the function is marked &#39;obsolescent&#39; but the alternative (<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_getttime.html\" rel=\"nofollow noreferrer\"><code>clock_getttime()</code></a>) is not available on Mac OS X, for instance."}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1458291919, "post_id": 31157164, "comment_id": 59804842, "body": "@Nawaz This is not the case. The <code>s</code> at the beginning of <code>suseconds_t</code> stands for <i>signed</i>. The unsigned type used to store a number of microseconds in the range 0 to 1000000 is named <code>useconds_t</code>. (Notice the lack of the <code>s</code> prefix.)"}, {"owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "edited": false, "score": 0, "creation_date": 1511056213, "post_id": 31157164, "comment_id": 81698511, "body": "Languages like e.g. Java force certain capabilities on platforms. As the Java standard says an <code>int</code> <b>must be</b> 32 bit and signed, a platform that wants to support Java must either have a native signed 32 bit numeric type or must simulate one (which can be slow and even horribly slow). C wants to be a language usable for all platforms that exist, those having a powerful 64 Bit quad core CPU running at 4 GHz and those having just a 8 Bit single core CPU running at 500 kHz. By having a type like <code>suseconds_t</code>, the designer of the platform can choose the numeric type that represents it."}, {"owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "edited": false, "score": 0, "creation_date": 1511056719, "post_id": 31157164, "comment_id": 81698585, "body": "Being able to choose the type means you can decide if that type is 32 bit, 64 bit, 20 bit, 24 bit, 48 bit, signed or unsigned, whatever works better for the system, whatever works better for the CPU. There are rules in C, like an <code>int</code> being at least 16 bit; but commonly it&#39;s 32 bits as that&#39;s better, easier, and faster to handle for most platforms. And if a platform wants int to be 24 bit, that&#39;s okay as well. C is like a cross platform, high level assembler for writing portable low level code."}, {"owner": {"reputation": 106086, "user_id": 15809, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ULwK.jpg?s=128&g=1", "display_name": "Mecki", "link": "https://stackoverflow.com/users/15809/mecki"}, "edited": false, "score": 0, "creation_date": 1511057564, "post_id": 31157164, "comment_id": 81698714, "body": "To answer your update: You need to understand type promotions in C. Please read this page, it answers all your questions: <a href=\"https://www.safaribooksonline.com/library/view/c-in-a/0596006977/ch04.html\" rel=\"nofollow noreferrer\">safaribooksonline.com/library/view/c-in-a/0596006977/ch04.ht&zwnj;&#8203;ml</a> Whenever it&#39;s possible to convert a type w/o risking using precision, C will do that automatically for you. But when the conversion can lose precision (like converting double to an integral type), you get a warning and you need to explicitly cast. <code>int a = 5; long b = 8; long c = a + b;</code> is safe, but <code>int c = a + b</code> isn&#39;t, you need to force that conversion <code>int c = (int)(a + b);</code> at your own risk."}], "answers": [{"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1435749216, "post_id": 31157336, "comment_id": 50327909, "body": "You haven&#39;t really answered the OP&#39;s question.  You haven&#39;t explained how correctness is improved in his situation, and you haven&#39;t told him to write code that&#39;s safer and/or that doesn&#39;t suffer strange warnings."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435751401, "post_id": 31157336, "comment_id": 50329444, "body": "@SteveSummit thanks for highlighting that Steve - i&#39;ve updated the answer."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 4, "last_activity_date": 1435751254, "last_edit_date": 1592644375, "creation_date": 1435742447, "answer_id": 31157336, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31157336#31157336", "title": "Why C has so many different types?", "body": "<p>As buttiful butterfly correctly points out, the aim of the c++ language and standard library design is to enforce logical correctness at compile time.</p>\n<p>What this means is that we aim for a situation where a program that would do the wrong thing under certain obscure circumstances simply will not compile (or will compile, but will warn you).</p>\n<p>This means you can fix these logical errors before your software ever even runs in your test harness, let alone in front of your customers.</p>\n<p>The result of this is that correctly written c++ code can be mostly proven to be 'correct' before run-time, meaning you spend a great deal less time tracking down obscure bugs that you otherwise would.</p>\n<p>The magic of c++ is that is performs this incredible feat while offering a fantastic of efficiency and code optimisation.</p>\n<p>note: by 'correct' I mean that it will reliably do what you think you're telling it to do. It's still up to you to write the correct logic!</p>\n<p>as to the questions:</p>\n<h3>So my question is why does C define so many incompatible types instead of simply using primitive types such as int short ...? It's not user-friendly at all.</h3>\n<p>They are made incompatible in order to deliberately prevent you from converting them to each other. They represent different concepts, in the same way that velocity and distance are different concepts. There is no <em>direct</em> conversion between them.</p>\n<h3>And how can I do arithmetic operations on these types?</h3>\n<p>make the intermediate results of your arithmetic something that these types can safely convert to without losing precision. In this case, tv_sec and tv_usec are integral types, so even though they are incompatible with each other, they are both convertible to double individually.</p>\n<p>for example:</p>\n<pre><code>double mytimer(struct timeval *start, struct timeval *end)\n{\n    return double(end-&gt;tv_sec - start-&gt;tv_sec) + \n           double(end-&gt;tv_usec - start-&gt;tv_usec) * 1e-6;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 2, "creation_date": 1435742958, "post_id": 31157344, "comment_id": 50323827, "body": "And how would you write mytimer() to eliminate the warnings?"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 7, "last_activity_date": 1435742468, "creation_date": 1435742468, "answer_id": 31157344, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31157344#31157344", "title": "Why C has so many different types?", "body": "<p>Because what <code>time_t</code> etc contains are implementation-defined, there is nothing saying that they should contain a number of seconds as an integer, like the comment in your code implies. The reason is that they want these types to be portable between different systems.</p>\n\n<p>In practice, <code>time.h</code> is indeed rather cumbersome, so most of the time programs end up calling system-specific functions instead.</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435749264, "post_id": 31157473, "comment_id": 50327946, "body": "You haven&#39;t really answered the OP&#39;s question. You haven&#39;t explained how correctness is improved in his situation, and you haven&#39;t told him to write code that&#39;s safer and/or that doesn&#39;t suffer strange warnings."}], "tags": [], "owner": {"reputation": 380, "user_id": 5049516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5PjHt.jpg?s=128&g=1", "display_name": "nv3", "link": "https://stackoverflow.com/users/5049516/nv3"}, "is_accepted": false, "score": 2, "last_activity_date": 1435751836, "last_edit_date": 1435751836, "creation_date": 1435742805, "answer_id": 31157473, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31157473#31157473", "title": "Why C has so many different types?", "body": "<p>The reason is that the built-in types like <em>int</em> are platform-dependent. So on one computer an <em>int</em> might be good enough to store a time value, while on another you would need a <em>long</em>. To allow people to write programs that run on all platforms, types like <em>time_t</em> were introduces, which are often just alias definitions for some primitive type that is suitable on that particular platform. This in fact takes a little more learning effort in the beginning, but this effort will pay large dividends in the long run.</p>\n\n<p>Makes sense, doesn't it?</p>\n\n<p>[EDIT]: As for the strange warnings: The compiler is warning that the conversion of a time_t and suseconds_t to double might lose some information. That is because both types are integer types with more bits than the mantissa part of double. In your case that would apply only to very large time values, so you can simply ignore these warnings. (But how should the compiler know that a time_t value normally fits into a double? So he emits this warning.) There is in fact not much you can do about that without making the code platform-dependent. </p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435749243, "post_id": 31157504, "comment_id": 50327931, "body": "You haven&#39;t really answered the OP&#39;s question. You haven&#39;t explained how correctness is improved in his situation, and you haven&#39;t told him to write code that&#39;s safer and/or that doesn&#39;t suffer strange warnings."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435749687, "post_id": 31157504, "comment_id": 50328244, "body": "The OP didn&#39;t ASK if correctness is improved.  He asked why there are multiple types for which the compiler complains about invalid operations between them.   &quot;Type safety&quot; is the short answer to that."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435750652, "post_id": 31157504, "comment_id": 50328934, "body": "I read the question only after he&#39;d added his update."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1435742856, "creation_date": 1435742856, "answer_id": 31157504, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31157504#31157504", "title": "Why C has so many different types?", "body": "<p>The reason is called type safety.   Not all types of expressions make sense in a working program.   And type safety means that the compiler will refuse to permit unsafe, invalid, or inappropriate operations.</p>\n\n<p>In the long run, a compiler that rejects such bad code saves the programmer effort, since it takes more time for a programmer to detect a problem without help than it does for a compiler.</p>\n\n<p>C and C++ have a number of type safety features.   Other programming languages have more, others less.   Which simply means that some styles of programming are more effective in different programming languages.</p>\n\n<p>Warnings are a little less prescriptive form of type safety - they cause the compilers to warn about suspicious things, rather than reject them entirely.</p>\n"}, {"comments": [{"owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435743800, "post_id": 31157628, "comment_id": 50324387, "body": "Expliclit type casting does eliminate the warnings. But how can I know the casting is 100 percent right? Is the casting way elegant?"}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435744445, "post_id": 31157628, "comment_id": 50324807, "body": "@duleshi Also read answers of <a href=\"http://stackoverflow.com/questions/471248/what-is-ultimately-a-time-t-typedef-to\" title=\"what is ultimately a time t typedef to\">stackoverflow.com/questions/471248/&hellip;</a>"}, {"owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435744784, "post_id": 31157628, "comment_id": 50325019, "body": "Interesting I&#39;m reading that too! But do I have to know the detail of every typedefed types before I use them? And the implementation may change in the future. I don&#39;t think that&#39;s reasonable."}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "reply_to_user": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435744984, "post_id": 31157628, "comment_id": 50325151, "body": "@duleshi This is primarily opinion based. If you don&#39;t want to do that, migrate to C++ and use functions from <code>std::chrono</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1435749026, "post_id": 31157628, "comment_id": 50327787, "body": "Using int as an intermediate type is a very bad idea. This code will fail utterly on a 16-bit machine."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435767287, "post_id": 31157628, "comment_id": 50341168, "body": "<code>struct timeval</code> is a part of POSIX (see <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/gettimeofday.html\" rel=\"nofollow noreferrer\"><code>gettimeofday()</code></a>, for instance).  A part verging on obsolescence, but still a part of POSIX.  It is not <i>just</i> a GNU C extension."}], "tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 3, "last_activity_date": 1435768385, "last_edit_date": 1435768385, "creation_date": 1435743155, "answer_id": 31157628, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31157628#31157628", "title": "Why C has so many different types?", "body": "<p>To avoid the warnings</p>\n\n<pre><code>double mytimer(struct timeval * start, struct timeval * end) {\n    long usec = end-&gt;tv_usec - start-&gt;tv_usec;\n    long sec = end-&gt;tv_sec - start-&gt;tv_sec;\n    return 1.0 * sec + 1e-6 * usec;\n}\n</code></pre>\n\n<p>If you see the datatypes defined in <code>&lt;sys/types.h&gt;</code>, inherently you'll find</p>\n\n<pre><code>typedef long time_t;\n...\ntypedef long suseconds_t;\n</code></pre>\n\n<p>There are no specific format specifiers for <code>struct timeval</code> but the structure members are of type long. Hope this solves your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435754757, "post_id": 31160136, "comment_id": 50331892, "body": "Thank you for your really understanding my question. Most of the others keeps talking about type safety, but in fact I&#39;m not really that foolish not to understand type safety. However, I&#39;m still not satisfied with the C philosophy. 1)an API which requires explicit casting is ugly; 2)to do the casting, I have to know the detail of the involved types, which is surely not a good design. Why must the user understand the detail of your struct? I would prefer an OOP way <code>class timer{public: void start(); void end(); double get_diff();};</code>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435761180, "post_id": 31160136, "comment_id": 50336955, "body": "@duleshi: You&#39;re quite welcome.  (I figured you knew about type safety.)  In regards to your follow-on question about OOPiness, obviously C isn&#39;t an OOP language, but your question and our analysis of it here has proved to my satisfaction that we absolutely need a quasi-standard <code>timevalsubtract</code> function, if there isn&#39;t one already.  (Perhaps I&#39;ll try to lobby the GNU folks to add this.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "edited": false, "score": 0, "creation_date": 1435763572, "post_id": 31160136, "comment_id": 50338677, "body": "I did a quick search for any standard timeval manipulation functions, and so far all I&#39;ve found is <a href=\"https://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html\" rel=\"nofollow noreferrer\">this</a> (which at the time of writing says that GNU doesn&#39;t have any)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1435767191, "post_id": 31160136, "comment_id": 50341115, "body": "Note that <code>struct timeval</code> with microsecond resolution is effectively deprecated by POSIX and <code>struct timespec</code> should be used in preference (with nanosecond resolution).  This means that functions that do arithmetic on <code>struct timeval</code> will have less use than equivalents that work on <code>struct timespec</code>.  That said, BSD provides some macros to work on <code>struct timeval</code> (<code>timeradd</code>, <code>timersub</code>, <code>timerclear</code>, <code>timerisset</code>, <code>timercmp</code> \u2014 operations on timevals) in <code>&#47;usr&#47;include&#47;sys&#47;time.h</code>. It would be reasonably sensible to emulate those in any alternative."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1436205974, "post_id": 31160136, "comment_id": 50502297, "body": "@JonathanLeffler: Thanks for the reminder about the BSD <code>timeval</code> macros.  To your other point, though, it seems that not everyone has gotten the memo that <code>struct timeval</code> is &quot;effectively deprecated&quot;, as we learn in <a href=\"http://stackoverflow.com/questions/31217321/portable-way-to-get-time\">this other question</a>."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1435763888, "last_edit_date": 1435763888, "creation_date": 1435750444, "answer_id": 31160136, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31160136#31160136", "title": "Why C has so many different types?", "body": "<p>[N.B. I have almost completely rewritten this answer since I first posted it.]</p>\n\n<p>The answer to your first question is, C has so many types in an attempt to balance the needs of supporting machines of all different word sizes, with reasonable portability.  Things get more complicated due to the desire to also support specialized quantities like \"sizes of data structures\", \"offsets in files\", and \"times in the real world\" reasonably portably, and in spite of the fact that sometimes those specialized quantities end up being determined not by the language spec or the compiler but rather by the underlying operating system.</p>\n\n<p>In general, there are two concerns when converting from a large integral type to a floating-point type:</p>\n\n<ol>\n<li><p>the floating-point type might not be able to represent all the significant digits of the integral type accurately</p></li>\n<li><p>the floating-point type might not even be able to handle the range of the integral type</p></li>\n</ol>\n\n<p>In the case of <code>time_t</code>, there is an additional concern:</p>\n\n<ol start=\"3\">\n<li>Type <code>time_t</code> might not be an integer number of seconds that you can meaningfully subtract</li>\n</ol>\n\n<p>(These days, though, the \"helpful\" compiler warnings in response to these concerns do sometimes seem to border on the nannyish, and I share your concern.  It can be hard to understand what obscure situation the compiler is actually worried about, and it can be hard to see how to rewrite the code without warnings, and it can be hard to be sure that any casts you end up having to insert don't end up making the code even less safe.)</p>\n\n<p>If you're not worried about concern #3 (if you're willing to assume that <code>time_t</code> is an integer number of seconds), you can minimize the chances for data loss by doing the subtraction first (and in the integral type), and then converting:</p>\n\n<pre><code>return (sometype)(end-&gt;tv_sec - start-&gt;tv_sec) +\n       (sometype)(end-&gt;tv_usec - start-&gt;tv_usec) / 1e6;\n</code></pre>\n\n<p>But of course the big question is, what should <em>sometype</em> be?</p>\n\n<p>I believe your best bet is to cast to <code>double</code> in each of those places.  Both the guaranteed range and precision of type <code>double</code> in C are quite large. So unless you're manipulating time differences greater than 1e50 years (and unless someone has implemented type <code>subsec_t</code> to be a 266-bit type or something), your code should be safe even with the warning-suppressing casts, and you can insert a comment to that effect.</p>\n\n<p>If you want to understand how these concerns can actually manifest in practice, it's easy to demonstrate them.  Try this:</p>\n\n<pre><code>float f = (float)2000000123L - (float)2000000000L;\nprintf(\"%f\\n\", f);\n</code></pre>\n\n<p>If you have a 64-bit compiler, you can observe precision loss even with double precision:</p>\n\n<pre><code>double d = (double)9000000000000001234LL - (double)9000000000000000000LL;\nprintf(\"%f\\n\", d);\n</code></pre>\n\n<p>On my machine, these two fragments print <code>128</code> and <code>1024</code>, respectively.</p>\n\n<p>I'm not sure exactly which of the three concerns your compiler was trying to warn you about.  #1 is the likeliest possibility.  And you can see how the precision loss disappears if you convert after subtracting, instead of before:</p>\n\n<pre><code>f = 2000000123L - 2000000000L;\nd = 9000000000000001234LL - 9000000000000000000LL;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>f = (float)(2000000123L - 2000000000L);\nd = (double)(9000000000000001234LL - 9000000000000000000LL);\n</code></pre>\n\n<p>Back when all we had was 32-bit longs and 64-bit doubles, this wasn't much of a concern in practice (because IEEE 754 <code>double</code>s have something like 52 bits of precision).  Now that 64-bit types are becoming commonplace, these kinds of warnings are becoming much more widespread.  If you're satisfied that type <code>double</code> has enough precision for all your time-subtracting needs, you can use appropriate casts to <code>double</code> to silence the warnings.  (And, again, here by \"appropriate\" we mean \"after the subtraction\".) If you want to be even safer, you could move to type <code>long double</code> instead.  If your compiler supports it, and if it is indeed \"longer\" than regular <code>double</code>, it can truly reduce the loss-of-precision problem.  (Here's the previous example using <code>long double</code>:</p>\n\n<pre><code>long double ld = (long double)9000000000000001234LL - (long double)9000000000000000000LL;\nprintf(\"%Lf\\n\", ld);\n</code></pre>\n\n<p>On my system this one prints <code>1234</code>.)</p>\n\n<p>But with all of that said, in this case, if you want to really make your life easier -- and, incidentally, address concern #3 at the same time -- you could and arguably should use a standard function for computing the differences.  The standard function for subtracting two <code>time_t</code> values is <code>difftime</code>.  (It's <code>difftime</code>'s job to worry about all of these things, including the possibility that <code>time_t</code> doesn't represent seconds directly.)  So you could write</p>\n\n<pre><code>return difftime(end-&gt;tv_sec - start-&gt;tv_sec) +\n       (double)(end-&gt;tv_usec - start-&gt;tv_usec) / 1e6;\n</code></pre>\n\n<p>although of course there's still the problem of the subseconds.  </p>\n\n<p>The very best solution would be a prewritten library function to subtract two <code>timeval</code>'s, and you might want to spend some time looking for one of those.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1435764117, "creation_date": 1435764117, "answer_id": 31165463, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types/31165463#31165463", "title": "Why C has so many different types?", "body": "<p>While these type are generally implemented with standard integral types, you can't assume this for portability. The standard library offers some convenient functions for conversions, etc. For example, if you want to compute the delay in between times you can use <code>difftime</code> which returns a <code>double</code>.</p>\n"}], "owner": {"reputation": 1796, "user_id": 1549348, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/4e26cd23bde00d84d22010a16413bcbd?s=128&d=identicon&r=PG", "display_name": "duleshi", "link": "https://stackoverflow.com/users/1549348/duleshi"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "closed_date": 1435769336, "answer_count": 7, "score": 5, "last_activity_date": 1435768385, "creation_date": 1435741929, "last_edit_date": 1435766420, "question_id": 31157164, "link": "https://stackoverflow.com/questions/31157164/why-c-has-so-many-different-types", "closed_reason": "Opinion-based", "title": "Why C has so many different types?", "body": "<p>I write a simple timer function to calculate the time elapsed between <code>start</code> and <code>end</code>  </p>\n\n<pre><code>double mytimer(struct timeval *start, struct timeval *end)\n{\n    return (end-&gt;tv_sec - start-&gt;tv_sec) + (end-&gt;tv_usec - start-&gt;tv_usec)*1e-6;\n}  \n</code></pre>\n\n<p>gcc gives the following warnings:  </p>\n\n<blockquote>\n  <p>warning: conversion to \u2018double\u2019 from \u2018__suseconds_t\u2019 may alter its value<br>\n  warning: conversion to \u2018double\u2019 from \u2018__time_t\u2019 may alter its value</p>\n</blockquote>\n\n<p>Here is the definition of timeval:  </p>\n\n<pre><code>struct timeval {\n    time_t      tv_sec;     /* seconds */\n    suseconds_t tv_usec;    /* microseconds */\n};\n</code></pre>\n\n<p>So my question is why does C define so many <em>incompatible</em> types instead of simply using primitive types such as <code>int</code> <code>short</code> ...? It's not user-friendly at all.<br>\nAnd how can I do arithmetic operations on these types?  </p>\n\n<h2>update</h2>\n\n<p>Most of you seemed to have neglected my second question. What is the standard way to add two different types such as <code>time_t</code> and <code>suseconds_t</code>?</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1435741805, "post_id": 31157099, "comment_id": 50322993, "body": "I do not see where <code>i</code> is used in the loop body?"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 2, "creation_date": 1435741812, "post_id": 31157099, "comment_id": 50322996, "body": "You never assign or modify i anywhere."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1435741911, "post_id": 31157099, "comment_id": 50323055, "body": "I think you forgot to add some code after inputting <code>number</code> to input <code>i</code> inside the loop.And you also forgot to initialize <code>i</code>."}, {"owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "edited": false, "score": 2, "creation_date": 1435741919, "post_id": 31157099, "comment_id": 50323061, "body": "<code>i</code> has garbage value, moreover it doesn&#39;t change anywhere in the loop."}, {"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435742196, "post_id": 31157099, "comment_id": 50323257, "body": "so what should i do? i want the program to terminate when the character &#39;q&#39; is enteres"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1435742289, "post_id": 31157099, "comment_id": 50323329, "body": "@user5032369 what is your purpose actually?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1435742650, "post_id": 31157099, "comment_id": 50323606, "body": "Voting to close this as simple typo."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435742051, "post_id": 31157132, "comment_id": 50323158, "body": "so what should i do?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435742597, "post_id": 31157132, "comment_id": 50323558, "body": "How are we supposed to know that? We cannot read your mind. I have provided some code in my answer. Is it what you want?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435742845, "post_id": 31157132, "comment_id": 50323752, "body": "Your should probably add that your code is now adding single digits instead of numbers, what seems to be what the OP wants."}, {"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435742995, "post_id": 31157132, "comment_id": 50323857, "body": "ok see, i want the program to terminate when the character &#39;q&#39; is entered"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435743031, "post_id": 31157132, "comment_id": 50323880, "body": "@DanielJour Yes. Waiting for OP to confirm that this is what the OP wants...."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435743078, "post_id": 31157132, "comment_id": 50323910, "body": "@user5032369 Does the program need to sum up all the values until <code>&#39;q&#39;</code> is entered? If so, doesn&#39;t the code I&#39;ve provided suit your needs?"}, {"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435743525, "post_id": 31157132, "comment_id": 50324229, "body": "thank you for the advice, i got some ideas from your code but i didnt use it"}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 3, "last_activity_date": 1435742627, "last_edit_date": 1435742627, "creation_date": 1435741804, "answer_id": 31157132, "question_id": 31157099, "link": "https://stackoverflow.com/questions/31157099/why-does-this-create-an-infinite-loop/31157132#31157132", "title": "Why does this create an infinite loop", "body": "<p><code>i</code> is uninitialized. When you check the condition</p>\n\n<pre><code>while (i != 'q')\n</code></pre>\n\n<p>anything can happen(Undefined Behavior) because you are checking an uninitialized variable. Moreover, you don't change the value of <code>i</code> in the loop. How and why do you expect the condition to become false?</p>\n\n<hr>\n\n<p><code>scanf</code> with <code>%d</code> will not scan <code>char</code>s. And your code dosen't make much sense anyway. It might make more sense if you tell us what it needs to do.</p>\n\n<p>I think you want this:</p>\n\n<pre><code>char number;\nint sum = 0;\nprintf(\"Enter a number (enter 'q' to exit): \");\nscanf(\"%c\", &amp;number);\nwhile (number != 'q')\n{\n    sum += number-'0';\n    printf(\"Enter a number: \");\n    scanf(\"%c\", &amp;number);\n}\nprintf(\"The sum is %d\", sum);  \n</code></pre>\n\n<p>If you are wondering why and what <code>-'0'</code> does, you need to have a look at the <a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow\">ASCII table</a>. Each character has its own integer value as seen in the ASCII table.</p>\n"}, {"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 2, "last_activity_date": 1435741820, "creation_date": 1435741820, "answer_id": 31157139, "question_id": 31157099, "link": "https://stackoverflow.com/questions/31157099/why-does-this-create-an-infinite-loop/31157139#31157139", "title": "Why does this create an infinite loop", "body": "<p>First you do not initialize <code>char i;</code> and leads to undefined behavior, then in your loop you never modify:</p>\n\n<pre><code>while (i != 'q')\n{\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;number);\n    sum = number + number;\n}\n</code></pre>\n\n<p>This code makes no sense. When do you expect <code>i</code> to become <code>'q'</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "edited": false, "score": 0, "creation_date": 1435742303, "post_id": 31157276, "comment_id": 50323345, "body": "Let me know if my answer satisfies your question or not......."}, {"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435743700, "post_id": 31157276, "comment_id": 50324331, "body": "thank you, i got some ideas from your code, it was very helpful"}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "reply_to_user": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435744097, "post_id": 31157276, "comment_id": 50324579, "body": "ok....All the best for your coding.....and let me know if any further help is required ok....I delighted by helping you...."}, {"owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435745040, "post_id": 31157276, "comment_id": 50325188, "body": "how to find out how many times the program has looped?"}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "reply_to_user": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "edited": false, "score": 0, "creation_date": 1435745218, "post_id": 31157276, "comment_id": 50325299, "body": "@user5032369 You can set a counter as int count=0; in the looping statement and can get the answer of loop count whenever you want from the count variable....ok..dear"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435770420, "post_id": 31157276, "comment_id": 50342927, "body": "This is wrong. The compiler is not setting any default value. It&#39;s undefined behaviour, the value could be anything and change from run to run."}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435802068, "post_id": 31157276, "comment_id": 50356293, "body": "@DanielJour you are right....My main intention was to say that the value of <b>i</b> is never going to be <b>&#39;q&#39;</b> ...Am I not correct here?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435811589, "post_id": 31157276, "comment_id": 50358348, "body": "It actually could be <code>&#39;q&#39;</code> on some run (though the probability is very small)."}, {"owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1435812089, "post_id": 31157276, "comment_id": 50358471, "body": "@DanielJour yes I got your point......thanks"}], "tags": [], "owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1435742281, "creation_date": 1435742281, "answer_id": 31157276, "question_id": 31157099, "link": "https://stackoverflow.com/questions/31157099/why-does-this-create-an-infinite-loop/31157276#31157276", "title": "Why does this create an infinite loop", "body": "<p>The code is creating an infinite loop because you are using <code>while (i!='q')</code>.\nHere you haven't initialized the value of <code>i</code>, as result the compiler sets a default value to the <code>char i</code>, which is not equal to 'q'.<br>\nHence, whenever you are checking the condition in <code>while loop</code> it comes out to be true. Therefore a continues loop is formed.<br>\n<strong>To improve</strong><br>\nYou can improve it by setting an input for character <code>i</code> in your program. Or change the condition to any thing else from your program. One solution is:--  </p>\n\n<pre><code> int number;\nint sum;\nchar i;\nprintf(\"Enter a number: \");\nscanf(\"%d\", &amp;number);\nwhile (i != 'q')\n{\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;number);\n    sum = number + number;\n    printf(\"Press q to terminate: \");\n    scanf(\"%c\", &amp;i);\n}\nsum = number + number;\nprintf(\"The sum is %d\", sum);    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "is_accepted": false, "score": 0, "last_activity_date": 1435742334, "creation_date": 1435742334, "answer_id": 31157300, "question_id": 31157099, "link": "https://stackoverflow.com/questions/31157099/why-does-this-create-an-infinite-loop/31157300#31157300", "title": "Why does this create an infinite loop", "body": "<p>First of all i is uninitialized and moreover inside the loop the value of i is not either initialized or changed.</p>\n"}], "owner": {"reputation": 5, "user_id": 5032369, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5a77f48d310140ac336711ff76a11365?s=128&d=identicon&r=PG&f=1", "display_name": "user5032369", "link": "https://stackoverflow.com/users/5032369/user5032369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1435757629, "answer_count": 4, "score": 0, "last_activity_date": 1435756519, "creation_date": 1435741722, "last_edit_date": 1435756519, "question_id": 31157099, "link": "https://stackoverflow.com/questions/31157099/why-does-this-create-an-infinite-loop", "closed_reason": "Not suitable for this site", "title": "Why does this create an infinite loop", "body": "<p>Consider the following C program:</p>\n\n<pre><code>int number;\nint sum;\nchar i;\nprintf(\"Enter a number: \");\nscanf(\"%d\", &amp;number);\nwhile (i != 'q')\n{\n    printf(\"Enter a number: \");\n    scanf(\"%d\", &amp;number);\n    sum = number + number;\n}\nsum = number + number;\nprintf(\"The sum is %d\", sum);    \n</code></pre>\n\n<p>Why does this goes into an infinite loop? I don't see any error in the code.</p>\n"}, {"tags": ["c", "embedded", "stm32f4discovery", "cmsis"], "comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1435744914, "post_id": 31156982, "comment_id": 50325103, "body": "If I understood correctly, your code is derived from CMSIS UART example ? Could you include a link to this example ? I never used these APIs, but it really looks like you are doing it horribly wrong..."}, {"owner": {"reputation": 67, "user_id": 2819759, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/23cc24d23b1833cf18776df979b62feb?s=128&d=identicon&r=PG&f=1", "display_name": "user2819759", "link": "https://stackoverflow.com/users/2819759/user2819759"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1435745745, "post_id": 31156982, "comment_id": 50325604, "body": "I have downloaded example code from this link. <a href=\"http://www.st.com/web/en/catalog/tools/PF259243\" rel=\"nofollow noreferrer\">st.com/web/en/catalog/tools/PF259243</a>. Example code receive interrupt callback function is different than my code. In example code, receive interrupt will be called for specific amount of buffer size. But in my code receive interrupt will be called for each byte. Can you please tell me whats wrong I am doing here ?"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1435771951, "post_id": 31156982, "comment_id": 50343814, "body": "If the UART peripheral is the same as / similar to the one on the stm32f0 series, you really need to check for overflow and framing errors and &quot;clear&quot; the condition appropriately.  Otherwise a single bit error can lock up the peripheral until you reboot.  The free software &amp; examples from ST almost never do sufficient error handling for robust production code."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 1, "creation_date": 1511793158, "post_id": 31156982, "comment_id": 81982432, "body": "did u found the solution of this issue? In my case it stops after 10 - 15 mins only!"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 3971337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d260f8e87bf29e1fd646c1d3e43e0c6d?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/3971337/masoud"}, "edited": false, "score": 0, "creation_date": 1537014973, "post_id": 31159965, "comment_id": 91635343, "body": "In CMSIS, mutex and semaphore cannot be used completely in ISR, and when you use interrupts like dma in uart, you need to read data in the interrupt service routine like HAL_UART_RxCpltCallback function. What is the best solution in this condition?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 106, "user_id": 3971337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d260f8e87bf29e1fd646c1d3e43e0c6d?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/3971337/masoud"}, "edited": false, "score": 0, "creation_date": 1537167396, "post_id": 31159965, "comment_id": 91668665, "body": "@masoud Please post it as a new question, not a comment to an old post."}, {"owner": {"reputation": 106, "user_id": 3971337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d260f8e87bf29e1fd646c1d3e43e0c6d?s=128&d=identicon&r=PG&f=1", "display_name": "masoud", "link": "https://stackoverflow.com/users/3971337/masoud"}, "edited": false, "score": 0, "creation_date": 1537178609, "post_id": 31159965, "comment_id": 91674732, "body": "Ok @Lundin I posted my question here: <a href=\"https://stackoverflow.com/questions/52365157/uart-dma-receive-interrupt-stops-receiving-data-after-several-minutes\">link</a>"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1435749939, "creation_date": 1435749939, "answer_id": 31159965, "question_id": 31156982, "link": "https://stackoverflow.com/questions/31156982/uart-receive-interrupt-stops-triggering-after-several-hours-of-successful-receiv/31159965#31159965", "title": "UART receive interrupt stops triggering after several hours of successful receive", "body": "<p>Variables that are shared between a callback function and the rest of the program must be declared as volatile, to prevent the compiler from optimizing the code incorrectly.  </p>\n\n<p>You also have to ensure that writes and reads to such variables are atomic, or alternatively protect them with a semaphore. Otherwise you may get race condition bugs.</p>\n\n<p>Either or both of these two classic bugs could cause the problem you describe: both tend to cause intermittent, unexpected behavior which is hard to re-produce. </p>\n\n<p>Also, if your CPU allows it, set a breakpoint which triggers on write access to the interrupt enable register and check the trace.</p>\n"}, {"tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": false, "score": 4, "last_activity_date": 1435753533, "creation_date": 1435753533, "answer_id": 31161266, "question_id": 31156982, "link": "https://stackoverflow.com/questions/31156982/uart-receive-interrupt-stops-triggering-after-several-hours-of-successful-receiv/31161266#31161266", "title": "UART receive interrupt stops triggering after several hours of successful receive", "body": "<p>I never used the API you mention, so I may be wrong, but here are a few things I noticed after taking a look :</p>\n\n<p><code>HAL_UART_RxCpltCallback</code> is not an UART interrupt. It's a callback from the HAL subsystem that will be called when a receive request you issued is completed. This means it will only be called some time after you issue a receive request. You don't have access to the UART interrupt, and you shouldn't try to mess with it if you use the HAL layer.</p>\n\n<p>About this, <code>HAL_UART_Receive_IT</code> is actually a function that will issue a receive request. It will always return immediately, and it will never receive anything. This means the data in the receive buffer just after the call is not valid. Once you issued the request, <code>HAL_UART_RxCpltCallback</code> will be called anytime after, when the receive is complete. Only at this point the data in the buffer will be valid. To retrieve the data you can use the same variable from the <code>HAL_UART_Receive_IT</code>, but the data buffer will also be available through <code>(UART_HandleTypeDef*)-&gt;pRxBuffPtr</code> from the callback parameter.</p>\n\n<p>I think it's OK to call <code>HAL_UART_Receive_IT</code> again in the callback, but it's probably better to do it at the end.</p>\n\n<p>Also, what is <code>__HAL_UART_FLUSH_DRREGISTER</code> used for ? To me it looks like it will do more harm than good.</p>\n"}], "owner": {"reputation": 67, "user_id": 2819759, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/23cc24d23b1833cf18776df979b62feb?s=128&d=identicon&r=PG&f=1", "display_name": "user2819759", "link": "https://stackoverflow.com/users/2819759/user2819759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8236, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1435753533, "creation_date": 1435741380, "last_edit_date": 1435749976, "question_id": 31156982, "link": "https://stackoverflow.com/questions/31156982/uart-receive-interrupt-stops-triggering-after-several-hours-of-successful-receiv", "title": "UART receive interrupt stops triggering after several hours of successful receive", "body": "<p>I am using STM32f4 discovery board connected with xbee to receive temperature data from remote temperature sensor. Code used is CMIS UART example code. I will receive packet data, 1 byte at a time. In other words UART receive interrupt will be called whenever each byte receives. Once I gets the complete packet I will copy the temperature data. My UART callback function works without any issue. But after several hours, UART receive interrupt stops working and UART cannot receive anything. However UART transmission still works. I am using UART1 with baud rate 115200. I have set UART interrupt priority as 0 and no other interrupt shares this priority. All other interrupt priority are lower than UART. Can any one please tell me why UART interrupt stops triggering?</p>\n\n<pre><code>#define PACKET_DELIMETER 0x7E\n\nuint8_t g_frame_ok=0; //flag to indicate complete packet received\nuint8_t g_index_of_aoBuf=0; //Index of receive buffer\nuint8_t g_aoBuf_of_xbee[100]={0};//Receive Buffer\nuint8_t r_byte=0; //Receiving byte \n\nvoid HAL_UART_RxCpltCallback(UART_HandleTypeDef *allUartHandle)\n{\n __HAL_UART_FLUSH_DRREGISTER(allUartHandle); \n\n if(HAL_UART_Receive_IT(allUartHandle, (uint8_t *)&amp;r_byte, 1) == HAL_OK) //Interrupt occurs when each byte arrives\n {\n    if(r_byte==PACKET_DELIMETER)\n    {\n        //start receiving packet\n    }\n    if( g_index_of_aoBuf&gt;=g_aoBuf_of_xbee[2]+4)\n    {\n        g_frame_ok=1;\n        BSP_LED_On(LED4);\n    }           \n   }\n }\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": true, "score": 1, "last_activity_date": 1435741443, "last_edit_date": 1435741443, "creation_date": 1435741101, "answer_id": 31156881, "question_id": 31156682, "link": "https://stackoverflow.com/questions/31156682/dealing-with-linkedlist-in-c/31156881#31156881", "title": "Dealing with linkedlist in c", "body": "<pre><code>  void inserir(Lista *lista, CACHORRO elem)\n</code></pre>\n\n<p>The above statement reduces to</p>\n\n<pre><code>  void inserir(struct Nodo **lista, CACHORRO elem)//1\n</code></pre>\n\n<p>and you call the above function as</p>\n\n<pre><code>  DoenteMachucado something; \n  inserir(something, elem); //remember DoenteMachucado is a type not a variable ,something is a variable.so i have changed this.\n</code></pre>\n\n<p>where the first argument is of type <code>struct Nodo*</code></p>\n\n<pre><code>  inserir(struct Nodo* something, elem);//2\n</code></pre>\n\n<p>the parameters don't match at 1 and 2.\nyou might want to call the function as</p>\n\n<pre><code> DoenteMachucado something;\n inserir(&amp;something, elem);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4394583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HFRKyC8-fOg/AAAAAAAAAAI/AAAAAAAAACo/6KTnaK9yPAk/photo.jpg?sz=128", "display_name": "Vinicius Ilidio", "link": "https://stackoverflow.com/users/4394583/vinicius-ilidio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 31156881, "answer_count": 1, "score": 1, "last_activity_date": 1435741443, "creation_date": 1435740571, "question_id": 31156682, "link": "https://stackoverflow.com/questions/31156682/dealing-with-linkedlist-in-c", "title": "Dealing with linkedlist in c", "body": "<p>i've a header declared like this</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nstruct Nodo {\n    struct Nodo *pAnterior;\n    struct Nodo *pProximo;\n    CACHORRO cachorro;\n};\n\ntypedef struct Nodo *Lista;\ntypedef struct Nodo *DoenteMachucado;\ntypedef struct Nodo *portePequeno;\ntypedef struct Nodo *porteMedio;\ntypedef struct Nodo *porteGrande;\n</code></pre>\n\n<p>But when i try to use the function</p>\n\n<pre><code>void inserir(Lista *lista, CACHORRO elem)\n{\n    Lista Nodo;\n    Nodo = (Lista)malloc(sizeof(struct Nodo));\n    if(Nodo == NULL)\n        printf(\"Sem memoria\\n\");\n\n    Nodo-&gt;cachorro = elem;\n    Nodo-&gt;pAnterior = NULL;\n    Nodo-&gt;pProximo = (*lista);\n\n    if((*lista) != NULL)\n        (*lista)-&gt;pAnterior = Nodo;\n\n    (*lista) = Nodo;\n}\n</code></pre>\n\n<p>like this</p>\n\n<pre><code>inserir(DoenteMachucado, elem);\n</code></pre>\n\n<p>it doesnt work, i am declaring a elem CACHORRO</p>\n"}, {"tags": ["c++", "c", "struct"], "comments": [{"owner": {"reputation": 117, "user_id": 4098714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e18e22ac2fd09ede5100836badd8c97d?s=128&d=identicon&r=PG&f=1", "display_name": "matb", "link": "https://stackoverflow.com/users/4098714/matb"}, "edited": false, "score": 1, "creation_date": 1435740001, "post_id": 31156441, "comment_id": 50321764, "body": "This should answer your question: <a href=\"http://stackoverflow.com/questions/8422775/why-does-c-need-struct-keyword-and-not-c\" title=\"why does c need struct keyword and not c\">stackoverflow.com/questions/8422775/&hellip;</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1435740028, "post_id": 31156441, "comment_id": 50321786, "body": "C <i>or</i> C++ ? The answer is completely different depending on the language."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1435740203, "post_id": 31156441, "comment_id": 50321907, "body": "What Quentin said. Remove the C++ or the C tag."}], "answers": [{"comments": [{"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 4, "creation_date": 1435742147, "post_id": 31156542, "comment_id": 50323220, "body": "<i>&quot;There is no difference in C++.&quot;</i> - that&#39;s not quite true... with <code>struct Node* next;</code> is only searches for a <code>struct</code>/<code>class</code>/<code>union</code> by that name and happily ignores non-<code>struct</code>/<code>class</code>/<code>union</code>s with the same identifier.  For example, if you add an <code>int Node;</code> data member to <code>struct Node;</code>, it won&#39;t conflict with <code>struct Node* next;</code> but will conflict with <code>Node* next;</code>.  Nobody sane relies on this distinction though - makes for unmaintainable code."}], "tags": [], "owner": {"reputation": 4604, "user_id": 711006, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/332d86b71d1ba573668d6620e2121a37?s=128&d=identicon&r=PG", "display_name": "Melebius", "link": "https://stackoverflow.com/users/711006/melebius"}, "is_accepted": false, "score": 5, "last_activity_date": 1435740883, "last_edit_date": 1435740883, "creation_date": 1435740222, "answer_id": 31156542, "question_id": 31156441, "link": "https://stackoverflow.com/questions/31156441/struct-keyword-in-function-parameters-what-is-the-difference/31156542#31156542", "title": "Struct keyword in function parameters, what is the difference?", "body": "<p>Only the declarations including <code>struct</code> are valid in C. There is no difference in C++.</p>\n\n<p>However, you can <code>typedef</code> the <code>struct</code> in C, so you don\u2019t have to write it every time.</p>\n\n<pre><code>typedef struct Node\n{\n  int data;\n  struct Node *next;  // we have not finished the typedef yet\n} SNode;\n\nSNode* cur = head;    // OK to refer the typedef here\n</code></pre>\n\n<p>This syntax is also valid in C++ for compatibility.</p>\n"}, {"tags": [], "owner": {"reputation": 785, "user_id": 4380137, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000986896620/picture?type=large", "display_name": "Chris Aby Antony", "link": "https://stackoverflow.com/users/4380137/chris-aby-antony"}, "is_accepted": false, "score": 0, "last_activity_date": 1435742953, "creation_date": 1435742953, "answer_id": 31157552, "question_id": 31156441, "link": "https://stackoverflow.com/questions/31156441/struct-keyword-in-function-parameters-what-is-the-difference/31157552#31157552", "title": "Struct keyword in function parameters, what is the difference?", "body": "<p>Struct node is a new user defined datatype that we create. And unlike classes the new data type using structures is  \"struct strct_name\" , ie; u need the keyword struct in front of the struct_name. \nFor classes u do not need keywords in front of the new data type name.\neg;    </p>\n\n<pre><code>class abc\n{\n  abc *next;\n};\n</code></pre>\n\n<p>and when u declare variables</p>\n\n<pre><code>abc x;\n</code></pre>\n\n<p>instead of struct </p>\n\n<pre><code>abc x;\n</code></pre>\n\n<p>in case of structures .\nAlso understand that by the statement </p>\n\n<pre><code>struct node * next;\n</code></pre>\n\n<p>we are trying to create a pointer that points to a variable of type \"strcut node\", which is called a self referential pointer in this case since it points to the parent structure.</p>\n"}], "owner": {"reputation": 121, "user_id": 5032742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959dffc43b07da9d2b9d949876169c5e?s=128&d=identicon&r=PG&f=1", "display_name": "Shay", "link": "https://stackoverflow.com/users/5032742/shay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1435742953, "creation_date": 1435739890, "question_id": 31156441, "link": "https://stackoverflow.com/questions/31156441/struct-keyword-in-function-parameters-what-is-the-difference", "title": "Struct keyword in function parameters, what is the difference?", "body": "<p>I wonder, what is the difference between: </p>\n\n<pre><code>struct Node\n{\n  int data;\n  Node *next;\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct Node\n{\n  int data;\n  struct Node *next;\n};\n</code></pre>\n\n<p>Why do we need <code>struct</code> keyword in second example?</p>\n\n<p>Also, what is the difference between </p>\n\n<pre><code>void Foo(Node* head) \n{\n    Node* cur = head;\n    //....\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void Foo(struct Node* head) \n{\n    struct Node* cur = head;\n    //....\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 4, "creation_date": 1435740135, "post_id": 31156400, "comment_id": 50321865, "body": "Did you make any attempt at all to solve it yourself?"}, {"owner": {"reputation": 9, "user_id": 5068732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6580c390ed9364b9b70cd167e621c4?s=128&d=identicon&r=PG&f=1", "display_name": "maylesse", "link": "https://stackoverflow.com/users/5068732/maylesse"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1435758430, "post_id": 31156400, "comment_id": 50334812, "body": "yes i&#39;ve tried  look to my code"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1435759719, "post_id": 31156400, "comment_id": 50335807, "body": "You need to study the fundamentals of pointers, arrays and string handling. C has no string class which magically allocates memory for you, so your strcat calls are causing complete havoc, because each strcat calls writes to the <code>newname</code> array and tries to append various things out-of-bounds."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5068732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6580c390ed9364b9b70cd167e621c4?s=128&d=identicon&r=PG&f=1", "display_name": "maylesse", "link": "https://stackoverflow.com/users/5068732/maylesse"}, "edited": false, "score": 0, "creation_date": 1435740698, "post_id": 31156462, "comment_id": 50322248, "body": "thanks for your answer , but am i obliged to list all files of each folder ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 9, "user_id": 5068732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6580c390ed9364b9b70cd167e621c4?s=128&d=identicon&r=PG&f=1", "display_name": "maylesse", "link": "https://stackoverflow.com/users/5068732/maylesse"}, "edited": false, "score": 0, "creation_date": 1435742085, "post_id": 31156462, "comment_id": 50323187, "body": "@maylesse Pass the file name to the file you wish to change. That&#39;s all the function does, your program has to do the rest."}, {"owner": {"reputation": 9, "user_id": 5068732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6580c390ed9364b9b70cd167e621c4?s=128&d=identicon&r=PG&f=1", "display_name": "maylesse", "link": "https://stackoverflow.com/users/5068732/maylesse"}, "edited": false, "score": 0, "creation_date": 1435758204, "post_id": 31156462, "comment_id": 50334627, "body": "can you check my code"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1435739986, "creation_date": 1435739986, "answer_id": 31156462, "question_id": 31156400, "link": "https://stackoverflow.com/questions/31156400/rename-files-in-folder-using-c-code/31156462#31156462", "title": "rename files in folder using C code", "body": "<p>Use the <code>rename()</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint rename(const char *old, const char *new);\n</code></pre>\n\n<blockquote>\n  <p>Description</p>\n  \n  <p>The rename function causes the file whose name is the string pointed to by old to be\n  henceforth known by the name given by the string pointed to by new. The file named\n  old is no longer accessible by that name. If a file named by the string pointed to by new\n  exists prior to the call to the rename function, the behavior is implementation-defined.</p>\n  \n  <p>The rename function returns zero if the operation succeeds, nonzero if it fails, in\n  which case if the file existed previously it is still known by its original name.</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 5068732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6580c390ed9364b9b70cd167e621c4?s=128&d=identicon&r=PG&f=1", "display_name": "maylesse", "link": "https://stackoverflow.com/users/5068732/maylesse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 1, "closed_date": 1435769343, "answer_count": 1, "score": -3, "last_activity_date": 1435758888, "creation_date": 1435739790, "last_edit_date": 1435758888, "question_id": 31156400, "link": "https://stackoverflow.com/questions/31156400/rename-files-in-folder-using-c-code", "closed_reason": "Needs details or clarity", "title": "rename files in folder using C code", "body": "<p>i have 3 folders each one containes different file names \nand i would like to rename files of each folder as the following example :</p>\n\n<pre><code>folder1                     folder 2                            folder3\n\nimage1.pnm                  image1.pnm                        image1.pnm\n\nimage2.pnm                  image2.pnm                        image2.pnm\n\n.....                       .....                                     .....\n\nimageN.pnm                  imageN.pnm                        imageN.pnm   \n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>void change_all_filename_in_dir(char *dirname)\r\n{\r\n    char newname[] = \"image\";\r\n    char extension[] = \".jpg\"; \r\n    DIR *dir;\r\n    struct dirent *ent;\r\n    int i = 0;\r\n    \r\n    if ((dir = opendir (dirname)) != NULL) \r\n    {\r\n        while ((ent = readdir (dir)) != NULL) \r\n        {\r\n            rename(ent-&gt;d_name, strcat(strcat(newname, i), extension);\r\n            i++;\r\n        }\r\n    closedir (dir);\r\n    } \r\n    else \r\n    {\r\n       printf(\" folder not openend\");\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "linux", "c++11", "gcc", "cmocka"], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1435740446, "last_edit_date": 1435740446, "creation_date": 1435740003, "answer_id": 31156464, "question_id": 31156327, "link": "https://stackoverflow.com/questions/31156327/how-to-mock-function-in-c-when-its-caller-function-is-defined-in-same-file/31156464#31156464", "title": "How to mock function in C when its caller function is defined in same file?", "body": "<p>Using a function name starting with two underscores is <em>undefined behaviour</em> in C.</p>\n\n<p>(In your case I suspect that the function name <code>__wrap_func</code> is clashing with the <em>decorated</em> name for <code>func</code> but that's speculative and entirely compiler-dependent.)</p>\n\n<p>You ought to consider a solution using <em>function pointers</em> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 4967, "user_id": 868856, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wXvX2.png?s=128&g=1", "display_name": "Fredrick Gauss", "link": "https://stackoverflow.com/users/868856/fredrick-gauss"}, "is_accepted": false, "score": 1, "last_activity_date": 1435751382, "creation_date": 1435751382, "answer_id": 31160458, "question_id": 31156327, "link": "https://stackoverflow.com/questions/31156327/how-to-mock-function-in-c-when-its-caller-function-is-defined-in-same-file/31160458#31160458", "title": "How to mock function in C when its caller function is defined in same file?", "body": "<p>Using <code>--wrap=symbol</code> linker option will result so that undefined symbols will be resolved as <code>__wrap_symbol</code>. \nIn your first case, <code>func</code> is undefined symbol so linker will search for <code>__wrap_func</code> and that function is called.\nIn your second case, linker finds <code>myTest</code> because it is declared <code>extern</code>.\nWhen <code>myTest</code> calls <code>func</code> it is in the same translation unit so not undefiend that resides in the same file as being <code>int func()</code>. So the original <code>func</code> is calles instead of wrapped version. Your design is not suitable for using mocked functions when caller and callee are in the same file as well as in different files.\nI suggest you to use <code>MACRO</code> or <code>function pointer</code> technique as explained <a href=\"http://locklessinc.com/articles/mocking/\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1445590421, "creation_date": 1445590421, "answer_id": 33298392, "question_id": 31156327, "link": "https://stackoverflow.com/questions/31156327/how-to-mock-function-in-c-when-its-caller-function-is-defined-in-same-file/33298392#33298392", "title": "How to mock function in C when its caller function is defined in same file?", "body": "<p>You cannot.</p>\n\n<p>From <a href=\"https://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html\" rel=\"nofollow\">the linker documentation</a>,</p>\n\n<blockquote>\n  <p>--wrap symbol\n      Use a wrapper function for symbol. Any undefined reference to symbol will be resolved to __wrap_symbol. Any undefined reference to\n  __real_symbol will be resolved to symbol. This can be used to provide a wrapper for a system function. The wrapper function should be called\n  __wrap_symbol. If it wishes to call the system function, it should call __real_symbol. Here is a trivial example:</p>\n\n<pre><code>void *\n__wrap_malloc (int c)\n{\n  printf (\"malloc called with %ld\\n\", c);\n  return __real_malloc (c);\n}\n</code></pre>\n  \n  <p>If you link other code with this file using --wrap malloc, then all calls to malloc will call the function __wrap_malloc instead. The\n  call to __real_malloc in __wrap_malloc will call the real malloc\n  function. You may wish to provide a __real_malloc function as well, so\n  that links without the --wrap option will succeed.</p>\n</blockquote>\n\n<p>Here'e the iimportant part ...</p>\n\n<blockquote>\n  <p>If you do this, you\n  should not put the definition of __real_malloc in the same file as\n  __wrap_malloc; if you do, the assembler may resolve the call before the linker has a chance to wrap it to malloc.</p>\n</blockquote>\n"}], "owner": {"reputation": 53, "user_id": 4393094, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jDPgGnEYTmI/AAAAAAAAAAI/AAAAAAAABg8/F5YjD3Ucqu0/photo.jpg?sz=128", "display_name": "Gautam Kumar", "link": "https://stackoverflow.com/users/4393094/gautam-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1742, "favorite_count": 0, "accepted_answer_id": 33298392, "answer_count": 3, "score": 5, "last_activity_date": 1445590421, "creation_date": 1435739589, "last_edit_date": 1435742728, "question_id": 31156327, "link": "https://stackoverflow.com/questions/31156327/how-to-mock-function-in-c-when-its-caller-function-is-defined-in-same-file", "title": "How to mock function in C when its caller function is defined in same file?", "body": "<p>I am trying to mock a function in C, mocking works fine when the function and its caller function are defined in different files. But when both functions (function itself and its caller) are defined in the same file, the mocked function does not get invoked.</p>\n\n<hr>\n\n<p>Case 1 :</p>\n\n<pre><code>//test.c\n\n#include &lt;stdio.h&gt;\n\n/*mocked function*/\nint __wrap_func() {\n   printf(\"Mock function !!!\\n\"); \n}\n\n/*caller function*/\nint myTest() {\n  return func();\n}\n\nint main() {\n    myTest();\n    return 0;\n}\n\n//file.c\n#include&lt;stdio.h&gt;\n\n/*function need to be mocked*/\nint func() {\n  printf(\"Original function !!!\\n\");\n    }\n</code></pre>\n\n<hr>\n\n<p>Case 2 :</p>\n\n<pre><code>//test.c\n#include &lt;stdio.h&gt;\nextern int myTest();\n/*mocked function*/\nint __wrap_func() {\n  printf(\"Mock function !!!\\n\");\n}\n\nint main() {\n    myTest();\n}\n//file.c\n#include&lt;stdio.h&gt;\n\n/*function need to be mocked*/\nint func() {\n  printf(\"Original function !!!\\n\");\n}\n\n/*caller function*/\nint myTest() {\n  return func();\n}\n</code></pre>\n\n<hr>\n\n<p>Code compilation command : gcc -Wl,--wrap=func test.c file.c</p>\n\n<pre><code>In Case 1 . Mock function !!!\nIn Case 2 . Original function !!!\n</code></pre>\n\n<p>In case 2, mocking function is not being invoked. I am looking for a solution  where I can mock function even caller and called function are in same file.</p>\n"}, {"tags": ["c", "eof", "getchar"], "comments": [{"owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 0, "creation_date": 1435762872, "post_id": 31155914, "comment_id": 50338199, "body": "Can we type EOF character explicitly?"}], "answers": [{"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1435824909, "post_id": 31156144, "comment_id": 50364229, "body": "<code>EOF</code> is not a character. It&#39;s a signal. Also most uses of <code>feof()</code> like in your answer are probably wrong."}], "tags": [], "owner": {"reputation": 2575, "user_id": 1589218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MthnD.jpg?s=128&g=1", "display_name": "Envil", "link": "https://stackoverflow.com/users/1589218/envil"}, "is_accepted": false, "score": 0, "last_activity_date": 1435739014, "creation_date": 1435739014, "answer_id": 31156144, "question_id": 31155914, "link": "https://stackoverflow.com/questions/31155914/what-is-eof-and-what-is-its-significance-how-can-it-be-noticed/31156144#31156144", "title": "What is EOF and what is its significance? How can it be noticed?", "body": "<p>EOF is the abbr. for End-Of-File. It's the special character for indicating that you have reached the end of the file you're reading a file stream.</p>\n\n<p>Normally, people check whether they have reached to the end of file by:</p>\n\n<pre><code>while(!feof(fileStream)) {\n    // read one line here or so\n    ...\n    // do your stuff here.\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 0, "creation_date": 1435812739, "post_id": 31174110, "comment_id": 50358659, "body": "When we give input by keyboard , does enter also works like EOF?"}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1435799244, "creation_date": 1435799244, "answer_id": 31174110, "question_id": 31155914, "link": "https://stackoverflow.com/questions/31155914/what-is-eof-and-what-is-its-significance-how-can-it-be-noticed/31174110#31174110", "title": "What is EOF and what is its significance? How can it be noticed?", "body": "<p><code>EOF</code> is short for <strong>End of File</strong>. It's not an actual character, but more like a <em>signal</em> that indicates the end of input stream.</p>\n\n<p>Think about <code>getchar()</code>, it's used to get a character from <code>stdin</code> (the standard input). How could it tell when the <code>stdin</code> stream has come to the end? There must be a special return value which is different from any valid characters. <code>EOF</code> plays this role.</p>\n\n<p>To generate <code>EOF</code> for <code>stdin</code>, type <kbd>Ctrl + D</kbd> on Unix systems, or <kbd>Ctrl + Z</kbd> on Windows.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1435824850, "last_edit_date": 1435824850, "creation_date": 1435824515, "answer_id": 31178930, "question_id": 31155914, "link": "https://stackoverflow.com/questions/31155914/what-is-eof-and-what-is-its-significance-how-can-it-be-noticed/31178930#31178930", "title": "What is EOF and what is its significance? How can it be noticed?", "body": "<p><code>EOF</code> is the named constant to apply for End Of File when reading from a <em>stdio</em> input stream.  If you look at the <code>getchar()</code> prototype, you'll first notice some strange thing is that it returns not a <code>char</code> value, but an <code>int</code>.  Normally, <code>EOF</code> translates in some negative integer value (historically <code>-1</code>) meaning it's impossible to generate that character from the keyboard/input file.</p>\n\n<p>Definitely, <code>EOF</code> constant <strong>is not</strong> a character, is the <code>int</code> value <strong>getchar(3)</strong> returns on end of file condition.  This is also the reason of <strong>getchar(3)</strong> returning an <code>int</code> instead of a <code>char</code> value.  It is also the reason always <code>EOF</code> maps to a negative value.</p>\n\n<p><strong>getchar(3)</strong> returns one of 257 possible values, <code>0</code> up to <code>255</code> <strong>and EOF</strong> (which is normally <code>-1</code>).  Viewed as integer values, <code>-1</code> is not the same as <code>255</code>.  It's one of the oldest implemented functions in C (it's there since the first edition of \"The C programming language\" by K&amp;R)</p>\n"}], "owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5017, "favorite_count": 0, "closed_date": 1435839381, "answer_count": 3, "score": 0, "last_activity_date": 1435824850, "creation_date": 1435738245, "last_edit_date": 1435799300, "question_id": 31155914, "link": "https://stackoverflow.com/questions/31155914/what-is-eof-and-what-is-its-significance-how-can-it-be-noticed", "closed_reason": "Duplicate", "title": "What is EOF and what is its significance? How can it be noticed?", "body": "<p>While studying <code>getchar()</code> function in C ,I came across this <code>EOF</code> being returned , I want to know how can its existence be noticed, where is it stored?</p>\n\n<p>Can we type <code>EOF</code> character explicitly?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1435737538, "post_id": 31155479, "comment_id": 50320265, "body": "It looks like you forgot to ask a question."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1435737552, "post_id": 31155479, "comment_id": 50320272, "body": "You will need to post <code>file1</code> or does it just contain the same as <code>file2</code> without <code>&lt;StartDate&gt;</code> and <code>&lt;ExpiryDate&gt;</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1435737706, "post_id": 31155479, "comment_id": 50320358, "body": "@Wimmel it is a continuation from a prior post with a second part to his original question. He needs to know how to compare and skip varying tagged lines. The original was <a href=\"http://stackoverflow.com/posts/comments/50320191?noredirect=1\"><b>Skip line with specific words compare two files in c</b></a>"}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1435738997, "post_id": 31155479, "comment_id": 50321113, "body": "@DavidC.Rankin, The format shown above is file1. In file1, &lt;SchoolName&gt; latha2 has &lt;StartDate&gt; and &lt;ExpiryDate&gt; of Sport. In file2, there are many school names and some school doesn&#39;t have them but some have. Let&#39;s consider that no record of date for sport in some schools."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1435739425, "post_id": 31155479, "comment_id": 50321405, "body": "Basically simple tasks such as &#39;test if a line in File1 is anywhere in File2&#39;, &#39;test a line against a format&#39;, and &#39;retrieve a Team&#39; are <i>not done easily with C</i>. You may want to use something like a database instead. Or, since this appears to be XML, look in to XSLT."}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1435761814, "post_id": 31155479, "comment_id": 50337462, "body": "@Jongware . File1 is assumed as standard format. It cannot be tested against a format. Somehow you are right, it could also be XML but database will not be used."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436423029, "post_id": 31182217, "comment_id": 50607786, "body": "Each &lt;Student&gt; package&#39;s format from File 2 match with &lt;Student&gt; package&#39;s format from File1. Now, tags from file 2 can be deleted and it&#39;s still works. Thanks!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436423062, "post_id": 31182217, "comment_id": 50607817, "body": "Glad I could help. Let me know if you run into problems."}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436423598, "post_id": 31182217, "comment_id": 50608083, "body": "Beside this, I would also want to learn not only C program but also logics. Hope you could recommend good ideas. thanks."}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436423937, "post_id": 31182217, "comment_id": 50608269, "body": "Error must be shown when tags from File 2 are not identical with File1. Even I delete &lt;Student&gt;,&lt;phone&gt; and so on from File 2, there is no warning and also print out results from tags remained."}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436427816, "post_id": 31182217, "comment_id": 50610600, "body": "Moreover, \u201cTeam\u201d is repeated among 4 students. That\u2019s why printed once. In File2, there are different teams for 4 students. And number of &lt;student&gt; from file2 should be divided by 4. Are those things can be verified with strictly define?"}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436494905, "post_id": 31182217, "comment_id": 50648276, "body": "Could u let me know how could it do plz ?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436496885, "post_id": 31182217, "comment_id": 50648757, "body": "The quickest way to really learn C is to -- SLOW DOWN. C is an <code>exact</code> language, every part of each line matters. (there is no &#39;close enough&#39;). This is the mistake all new C programmers make. C&#39;s power stems from the low-level control it provides over the machine. You are basically just managing memory (or pointers to memory). All variables and pointers are simply values in memory or the address to a location in memory. Learn that. The examples I provided contain great examples, they just cover a LOT. Take them piece by piece. It just takes time, there is no magic. You will get there."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436497292, "post_id": 31182217, "comment_id": 50648836, "body": "What prints once and is skipped is controlled by the code under the comment <code>check if tag is retr1 and not retvd, if so skip&#47;print</code> Look at what each line does. If you have <code>teams</code> and you now want to print for each time, you need to move <code>&quot;&lt;Team&gt;&quot;</code> from the <code>retr1</code> array to the <code>retr</code> array so it is printed each time the tag is found. Really, these are great examples for learning (A LOT). That&#39;s why I took the time to do them for you. Take it <b>line-by-line</b> and discover what is happening. Look up each function. When you get stuck -- ask, I&#39;m happy to help, but I can&#39;t learn for you."}, {"owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "edited": false, "score": 0, "creation_date": 1436499592, "post_id": 31182217, "comment_id": 50649363, "body": "Thanks for yr concern. Actually,I have already moved it to retr. It prints out results, but 4 teams are duplicated among 4 students, but let me figure out and try."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1435833263, "creation_date": 1435833263, "answer_id": 31182217, "question_id": 31155479, "link": "https://stackoverflow.com/questions/31155479/verify-file-format-first-and-then-retrieve-required-information-in-c/31182217#31182217", "title": "Verify file format first and then retrieve required information in C", "body": "<p>Compared to the earlier question, this one isn't about comparing files for differences with certain exceptions. Here you have a <code>format</code> file that provides the valid tags and order, and then a <code>data</code> file that contains the tags with data. So rather than comparing for differences, you are reading the first to obtain the expected/valid tags, then reading/processing the second to obtain the wanted information.</p>\n\n<p>Below, I also have the code check that the tags in the file appear in the correct order. You can loosen that restriction if you don't need it. Another bit of logic skips lines less that <code>3</code> chars (a valid tag has <strong>at least</strong> <code>3</code> (e.g. <code>&lt;t&gt;</code>)).</p>\n\n<p>The formatting of the output is very simple and you can improve it as needed. I had no data file to work with, so I used the information you provided and created one by duplicating your file above 3-times in a separate file. Look over the code. As other have mentioned, parsing XML in C, while a great assignment, is rarely done in practice because other tools provide readily available tools for handling the schemas. Let me know if you have any questions. This will provide you with one approach to handling this type of information:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXL 128\n\nchar *gettag (char *s, char *t);\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 3 ) {\n        fprintf (stderr, \"error: insufficient input, usage: %s file1 file2\\n\",\n                argv[0]);\n        return 1;\n    }\n\n    char s1[MAXL] = {0};                        /* line buffer      */\n    char *tags[MAXL] = {0};                     /* file 1 tags      */\n    char *retr[] = { \"&lt;Team&gt;\", \"&lt;phone&gt;\",       /* skip/print terms */\n                    \"&lt;rollno&gt;\" };\n    char *retr1[] = { \"&lt;/SchoolName&gt;\",          /* skip/print once  */\n                    \"&lt;Team&gt;\" };\n    char *skip[] = { \"&lt;StudentNo&gt;\",\"&lt;hobby&gt;\" }; /* skip terms       */\n    char *opt[]  = { \"&lt;StartDate&gt;\",             /* optional tags    */\n                    \"&lt;ExpiryDate&gt;\"};\n    size_t retrsz = sizeof retr/sizeof *retr;   /* elements in retr */\n    size_t retr1sz = sizeof retr1/sizeof *retr1;/* elements in retr1*/\n    size_t skipsz = sizeof skip/sizeof *skip;   /* elements in skip */\n    size_t optsz = sizeof opt/sizeof *opt;      /* elements in opt  */\n    size_t tidx = 0;                            /* tags indes       */\n    size_t idx = 0;                             /* general index    */\n    size_t i = 0;                               /* general variable */\n    FILE *f1, *f2;                              /* file pointers    */\n    unsigned char retvd[retr1sz];               /* retr1 flag       */\n    unsigned char tagok = 0;                    /* tag OK flag      */\n\n    /* initialize retr1 VLA values */\n    for (i = 0; i &lt; retr1sz; i++)\n        retvd[i] = 0;\n\n    /* open both files or exit */\n    if (!((f1 = fopen (argv[1], \"r\")) &amp;&amp; (f2 = fopen (argv[2], \"r\")))) {\n        fprintf (stderr, \"error: file open failure.\\n\");\n        return 1;\n    }\n\n    /* read lines from format file1, create tags array */\n    while (fgets (s1, MAXL, f1)) \n    {\n        size_t len = strlen (s1);\n        while (len &amp;&amp; (s1[len-1] == '\\n' || s1[len-1] == '\\r'))\n            s1[--len] = 0;      /* strip newline or carriage return */\n\n        if (len &lt; 3)            /* skip blank, 3 char for valid tag */\n            continue;\n\n        char *tmp = NULL;\n        if ((tmp = gettag (s1, NULL)) == NULL) {\n            fprintf (stderr, \"error: tag not found in '%s'\", s1);\n            return 1;\n        }\n        tags[tidx++] = tmp;\n    }\n\n    fclose (f1);    /* close file1 */\n\n    /* read each line in file2 */\n    while (fgets (s1, MAXL, f2))\n    {\n        char tag[MAXL] = {0};\n        size_t len = strlen (s1);\n\n        while (len &amp;&amp; (s1[len-1] == '\\n' || s1[len-1] == '\\r'))\n            s1[--len] = 0;      /* strip newline or carriage return */\n\n        if (len &lt; 3)            /* skip blank or lines &lt; 3 chars    */\n            goto skipping;\n\n        gettag (s1, tag);\n        /* verify that current tag is a valid tag from format file  */\n        if (strncmp (tag, tags[idx], strlen (tags[idx])) != 0) {\n            tagok = 0;\n            for (i = 0; i &lt; tidx; i++) {\n                if (strncmp (tag, tags[i], strlen (tags[i])) == 0) {\n                    tagok = 1;\n                    break;\n                }\n            }\n            if (!tagok) {\n                fprintf (stderr, \"warning: invalid tag '%s', skipping.\\n\", tag);\n                goto skipping;  /* or handle as desired (e.g. exit) */\n            }\n        }\n\n        /* check if tag is retr1 and not retvd, if so skip/print    */\n        for (i = 0; i &lt; retr1sz; i++)\n            if (strncmp (tag, retr1[i], strlen (retr1[i])) == 0) {\n                if (!retvd[i]) {        /* print line  skipped      */\n                    char *p = strchr (s1, '&gt;'); /* print data       */\n                    printf (\"%s\\n\", (p + 1));\n                    retvd[i] = 1;       /* set flag to skip next    */\n                }\n                goto incriment;         /* yes -- it lives....      */\n            }\n\n        /* check if tag is a known retr tag, if so skip/print       */\n        for (i = 0; i &lt; retrsz; i++)    /* skip if matches skip[i]  */\n            if (strncmp (tag, retr[i], strlen (retr[i])) == 0) {\n                char *p = strchr (s1, '&gt;');\n                printf (\"%s\\n\", (p + 1));      /* print data       */\n                goto incriment;\n            }\n\n        /* check if tag is a known skip tag, if so skip/print       */\n        for (i = 0; i &lt; skipsz; i++)    /* skip if matches skip[i]  */\n            if (strncmp (tag, skip[i], strlen (skip[i])) == 0)\n                goto incriment;\n\n        /* check if tag matches optional tag, if so skip */\n        for (i = 0; i &lt; optsz; i++) {\n            if (strncmp (tag, opt[i], strlen (opt[i]) == 0))\n                goto incriment;\n        }\n\n        incriment:;\n\n        idx++;                  /* increment index  */\n        if (idx == tidx)        /* reset if tagsz   */\n            idx = 0;\n\n        skipping:;\n    }\n\n    fclose (f2);                /* xlose file2      */\n\n    for (i = 0; i &lt; tidx; i++)  /* free tags memory */\n        free (tags[i]);\n\n    return 0;\n}\n\n/* extract &lt;tag&gt; from s.\n* if 't' is NULL, memory is allocated sufficient to hold &lt;tag&gt; + 1\n* characters, else &lt;tag&gt; is copied to 't' without allocations.\n* On success, the address of 't' is returned, NULL otherwise \n*/\nchar *gettag (char *s, char *t)\n{\n    if (!s) return NULL;            /* test valid string        */\n\n    char *p = strchr (s, '&gt;');      /* find first '&gt;' in s      */\n    if (!p) return NULL;            /* if no '&gt;', return NULL   */\n\n    size_t len = strlen (s);\n    unsigned char nt = 0;\n    int tmpc = 0;\n\n    if (len &gt; (size_t)(p - s) + 1) {/* if chars after '&gt;'       */\n        tmpc = *(p + 1);            /* save char before term    */\n        *(p + 1) = 0;               /* null-terminate at '&gt;'    */\n        nt = 1;                     /* set null-terminated flag */\n    }\n\n    char *sp = s;\n    while (sp &lt; p &amp;&amp; *sp != '&lt;')    /* trim space before '&lt;'    */\n        sp++;\n\n    if (!t)\n        t = strdup (sp);            /* allocate/copy to t       */\n    else\n        strncpy (t, sp, len + 1);   /* copy w/terminator        */\n\n    if (nt)                         /* if null-terminated       */\n        *(p + 1) = tmpc;            /* restore '&gt;' character    */\n\n    return t;\n}\n</code></pre>\n\n<p><strong>File1 - format (list tags)</strong></p>\n\n<pre><code>$ cat dat/student_format.txt\n&lt;School&gt;\n      &lt;/SchoolName&gt;latha2  //skip, but keep\n&lt;/School&gt;\n&lt;Student&gt;\n   &lt;Team&gt;power  //skip,but keep\n   &lt;StudentNo&gt;1 //skip\n       &lt;Sport&gt;\n            &lt;StartDate&gt;16122016&lt;/StartDate&gt; //*skip(May or maynot contained)\n            &lt;SportType&gt;All\n            &lt;ExpiryDate&gt;16122020&lt;/EndDate&gt; //*skip (May or maynot contained)\n       &lt;/Sport&gt;\n\n &lt;Personal&gt;\n   &lt;phone&gt;50855466 //skip,but keep\n   &lt;rollno&gt;6 //skip,but keep\n &lt;/Personal&gt;\n &lt;hobby&gt;  //skip\n&lt;/Student&gt;\n</code></pre>\n\n<p><strong>File1 - data file (same as above 3 times)</strong></p>\n\n<pre><code>$ cat dat/student_file.txt\n&lt;School&gt;\n      &lt;/SchoolName&gt;latha2\n&lt;/School&gt;\n\n&lt;Student&gt;\n   &lt;Team&gt;power\n   &lt;StudentNo&gt;1\n       &lt;Sport&gt;\n            &lt;StartDate&gt;16122016&lt;/StartDate&gt;\n            &lt;SportType&gt;All\n            &lt;ExpiryDate&gt;16122020&lt;/EndDate&gt;\n       &lt;/Sport&gt;\n\n &lt;Personal&gt;\n   &lt;phone&gt;50855466\n   &lt;rollno&gt;6\n &lt;/Personal&gt;\n &lt;hobby&gt;\n&lt;/Student&gt;\n&lt;School&gt;\n      &lt;/SchoolName&gt;latha2\n&lt;/School&gt;\n\n&lt;Student&gt;\n   &lt;Team&gt;power\n   &lt;StudentNo&gt;1\n       &lt;Sport&gt;\n            &lt;StartDate&gt;16122016&lt;/StartDate&gt;\n            &lt;SportType&gt;All\n            &lt;ExpiryDate&gt;16122020&lt;/EndDate&gt;\n       &lt;/Sport&gt;\n\n &lt;Personal&gt;\n   &lt;phone&gt;50855466\n   &lt;rollno&gt;6\n &lt;/Personal&gt;\n &lt;hobby&gt;\n&lt;/Student&gt;\n&lt;School&gt;\n      &lt;/SchoolName&gt;latha2\n&lt;/School&gt;\n\n&lt;Student&gt;\n   &lt;Team&gt;power\n   &lt;StudentNo&gt;1\n       &lt;Sport&gt;\n            &lt;StartDate&gt;16122016&lt;/StartDate&gt;\n            &lt;SportType&gt;All\n            &lt;ExpiryDate&gt;16122020&lt;/EndDate&gt;\n       &lt;/Sport&gt;\n\n &lt;Personal&gt;\n   &lt;phone&gt;50855466\n   &lt;rollno&gt;6\n &lt;/Personal&gt;\n &lt;hobby&gt;\n&lt;/Student&gt;\n</code></pre>\n\n<p><strong>Example Output</strong></p>\n\n<pre><code>$ ./bin/cmpf1f2_2 dat/student_format.txt dat/student_file.txt\nlatha2\npower\n50855466\n6\n50855466\n6\n50855466\n6\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4990262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glGzeHXhpNo/AAAAAAAAAAI/AAAAAAAAAFc/uxPIMINn3LU/photo.jpg?sz=128", "display_name": "khinthiri htet", "link": "https://stackoverflow.com/users/4990262/khinthiri-htet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 31182217, "answer_count": 1, "score": -2, "last_activity_date": 1435890262, "creation_date": 1435736925, "last_edit_date": 1435890262, "question_id": 31155479, "link": "https://stackoverflow.com/questions/31155479/verify-file-format-first-and-then-retrieve-required-information-in-c", "title": "Verify file format first and then retrieve required information in C", "body": "<pre><code>&lt;School&gt;\n      &lt;/SchoolName&gt;latha2  //skip, but keep\n&lt;/School&gt;\n\n&lt;Student&gt;\n   &lt;Team&gt;power  //skip,but keep\n   &lt;StudentNo&gt;1 //skip\n       &lt;Sport&gt;\n            &lt;StartDate&gt;16122016&lt;/StartDate&gt; //*skip(May or maynot contained)\n            &lt;SportType&gt;All \n            &lt;ExpiryDate&gt;16122020&lt;/EndDate&gt; //*skip (May or maynot contained)\n       &lt;/Sport&gt;\n\n &lt;Personal&gt; \n   &lt;phone&gt;50855466 //skip,but keep\n   &lt;rollno&gt;6 //skip,but keep\n &lt;/Personal&gt;\n &lt;hobby&gt;  //skip\n&lt;/Student&gt;\n</code></pre>\n\n<p>Note: There are 4 <code>&lt;Student&gt;</code> tags.</p>\n\n<ul>\n<li>Assume that File1 is fixed and File2 is input-file.\nIn File 1,one school with 4 students. In File 2,there are many schools but have to check  with File-1 format repeatedly according to the number of schools it has. Above is an example of File1.</li>\n</ul>\n\n<p>\"Scenario\"\n- There are 4 package of \"Student\" tags in one school. In each tags, the value of   \"Team\" are repeated.</p>\n\n<p>\"Questions with restrictions\"</p>\n\n<ol>\n<li>From File 1,\"Sport\" Tag, \"StartDate\" and \"ExpiryDate\" are defined but they may not be contained in every \"School\" from File2. \n\n<ul>\n<li>If they are defined, how to verify that they should be at the correct line?. </li>\n<li>How to verify that format is right even they are not defined in some schools of File2?</li>\n</ul></li>\n<li>Some lines are skipped when 2 files are compared but some lines need to be collected form File2 to write a new txt even they are skipped. From File2, \"SchoolName\", \"Team\",\"phone\" and \"roll no\" are retrieved and write txt altogether line by line.\n****Important, retrieve \"Team\" once from one \"School\". Because it is repeated 4 times in four \"Student\" from same \"School\".\n\n<ul>\n<li>How to retrieve only SchoolName,Team,Phone,RollNo among the skipped lines?</li>\n<li>How to retrieve only Team in writing new textfile even it is duplicated in students under one school?</li>\n</ul></li>\n</ol>\n\n<p>Two things to be done. 1. Match File Format 2.New Text with specific values</p>\n\n<p>\"Example of new text\"</p>\n\n<pre><code> latha2   // SchoolName    \n power    // Team\n 5035546  // phone  - student1\n 6        // rollno - student1\n 5089973  // phone  - student2\n 5        // rollno - student2\n 5402734  // phone  - student3\n 1        // rollno - student3\n 8540345  // phone  - student4\n 2        // rollno - student4\n</code></pre>\n"}, {"tags": ["c", "gcc", "syntax", "pthreads", "colon-equals"], "comments": [{"owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "edited": false, "score": 0, "creation_date": 1435737902, "post_id": 31155475, "comment_id": 50320452, "body": "I did some some searching on the web, and the best i could determine is that this is just another way to perform assignment, ie (x = 5). The way of assigning things with x := 5 is used in some other languages."}, {"owner": {"reputation": 8020, "user_id": 1237747, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5674cd4a4abd08d63c5c3de20afbc97d?s=128&d=identicon&r=PG", "display_name": "ST3", "link": "https://stackoverflow.com/users/1237747/st3"}, "edited": false, "score": 0, "creation_date": 1435738309, "post_id": 31155475, "comment_id": 50320675, "body": "You can use debugger and check behavior, it is not standard in C."}, {"owner": {"reputation": 108835, "user_id": 15541, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/515ca9736a9a8ce65e58af764ccddf46?s=128&d=identicon&r=PG", "display_name": "leppie", "link": "https://stackoverflow.com/users/15541/leppie"}, "edited": false, "score": 0, "creation_date": 1435738488, "post_id": 31155475, "comment_id": 50320797, "body": "Reference: <a href=\"https://github.com/BrianGladman/pthreads/blob/master/ptw32_OLL_lock.c#L578\" rel=\"nofollow noreferrer\">github.com/BrianGladman/pthreads/blob/master/&hellip;</a> That is extremely odd and probably a typo... Edit: Or not, seems to be used in more than 1 place. C++ operator perhaps? Is that even possible?"}, {"owner": {"reputation": 494, "user_id": 3974475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wtCtx.jpg?s=128&g=1", "display_name": "K.H.A.J.A.S", "link": "https://stackoverflow.com/users/3974475/k-h-a-j-a-s"}, "edited": false, "score": 0, "creation_date": 1435738742, "post_id": 31155475, "comment_id": 50320955, "body": "This stackexchange question may help you &gt;&gt; <a href=\"http://programmers.stackexchange.com/questions/101716/in-pseudo-code-what-does-mean\" title=\"in pseudo code what does mean\">programmers.stackexchange.com/questions/101716/&hellip;</a>"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1435739095, "post_id": 31155475, "comment_id": 50321182, "body": "But does the code compile?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1435741148, "post_id": 31155475, "comment_id": 50322549, "body": "The file in question doesn&#39;t seem to get compiled when you build the project, there&#39;s no mention of it anywhere. So my guess is that it&#39;s work in progress, containing a typo."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1435738179, "creation_date": 1435738179, "answer_id": 31155894, "question_id": 31155475, "link": "https://stackoverflow.com/questions/31155475/what-does-operator-mean/31155894#31155894", "title": "What does operator &#39;:=&#39; mean?", "body": "<p>IIRC, <code>C</code> standard does not specify anything about <code>:=</code> operator. So, most likely, it's not standard <code>C</code>.</p>\n\n<p>However, AFAIK, some languages, which use the <code>=</code> as comparison operator, to separate the <em>assignment</em> from <em>comparison</em>, use <code>:=</code> as <em>assignment</em> operator. [Example: Pascal,  postgresql]</p>\n\n<p>In some other cases, it carries a meaning that the variable is getting <em>defined and assigned</em> in the same step, to differentiate with normal  assignment elsewhere. [Example: GO]</p>\n"}, {"comments": [{"owner": {"reputation": 1183, "user_id": 77431, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8d0532a13348650ef87211151bc180f3?s=128&d=identicon&r=PG", "display_name": "NevilleDNZ", "link": "https://stackoverflow.com/users/77431/nevillednz"}, "edited": false, "score": 0, "creation_date": 1435966716, "post_id": 31155917, "comment_id": 50431675, "body": "Algol68 also has other similar operators such as: +:= (for adding to or appending to a string), +=: (for prefixing to a string), also -:=, <i>:=, /:=, %:=(int division) and %</i>:=(mod);  Also non-operators like :=:=(juggle) and =:= (swap) and :=: (pointer comparison) ... cf. <a href=\"https://en.wikipedia.org/wiki/ALGOL_68#Dyadic_operators_with_associated_priorities\" rel=\"nofollow noreferrer\">Dyadic operators with associated priorities</a>"}], "tags": [], "owner": {"reputation": 736, "user_id": 3695941, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d09ea15b72ed247b054bc6b1df37ab44?s=128&d=identicon&r=PG&f=1", "display_name": "AndrewGrant", "link": "https://stackoverflow.com/users/3695941/andrewgrant"}, "is_accepted": false, "score": 2, "last_activity_date": 1435738250, "creation_date": 1435738250, "answer_id": 31155917, "question_id": 31155475, "link": "https://stackoverflow.com/questions/31155475/what-does-operator-mean/31155917#31155917", "title": "What does operator &#39;:=&#39; mean?", "body": "<p>:= is not a valid operator in C. </p>\n\n<p>It does however have use in other languages, for example ALGOL 68. Basically, for what you want to know, the := in this example is used to assign the variable PTW32_TRUE to localPty->wNodeptr->spin</p>\n\n<p>This is done mostly to remove any ambiguity in code, as to avoid using '=' for assignment. </p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 5, "last_activity_date": 1435832763, "last_edit_date": 1435832763, "creation_date": 1435768520, "answer_id": 31167021, "question_id": 31155475, "link": "https://stackoverflow.com/questions/31155475/what-does-operator-mean/31167021#31167021", "title": "What does operator &#39;:=&#39; mean?", "body": "<p>As others pointed out <code>:=</code> is not a valid C-operator.</p>\n\n<p>However, this \"operator\" <code>:=</code> is found twice in <a href=\"http://sourceforge.net/projects/pthreads4w/files/\" rel=\"nofollow\">the current \"<em>PThread for Windows</em>\" source release which seems to be as of v2.9.1</a>.</p>\n\n<p>Both occurencies appear in <code>ptw32_OLL_lock.c</code>, which proclaims to \"<em>implements extended reader/writer queue-based locks</em>\", but does not seem to be part of the <code>pthread*.dll</code> build, so the file <code>ptw32_OLL_lock.c</code> is not passed to the compiler.</p>\n\n<p>Interesting enough the source file in question contains an <code>int main()</code> and is not in the <code>test</code>sub-directory.</p>\n\n<p>All in all this seems to be alpha, beta or it's simply noise, so just delete it.</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 2098225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6628200bcecdbf24e5880cc4a0804d6f?s=128&d=identicon&r=PG", "display_name": "crypticfool", "link": "https://stackoverflow.com/users/2098225/crypticfool"}, "is_accepted": false, "score": 0, "last_activity_date": 1435793028, "creation_date": 1435793028, "answer_id": 31173246, "question_id": 31155475, "link": "https://stackoverflow.com/questions/31155475/what-does-operator-mean/31173246#31173246", "title": "What does operator &#39;:=&#39; mean?", "body": "<p>\":=\" is assignment to variable in Pascal syntax, while equality test is \"=\"</p>\n"}], "owner": {"reputation": 103, "user_id": 5068521, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4ZGyXqN-PjM/AAAAAAAAAAI/AAAAAAAAANM/Gr1fz6AlFRo/photo.jpg?sz=128", "display_name": "none7", "link": "https://stackoverflow.com/users/5068521/none7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2379, "favorite_count": 3, "accepted_answer_id": 31167021, "answer_count": 4, "score": 10, "last_activity_date": 1542114937, "creation_date": 1435736911, "last_edit_date": 1542114937, "question_id": 31155475, "link": "https://stackoverflow.com/questions/31155475/what-does-operator-mean", "title": "What does operator &#39;:=&#39; mean?", "body": "<p>I am trying to compile pthreads for MSVC2015 and found some strange code.</p>\n\n<pre><code>localPtr-&gt;wNodePtr-&gt;spin := PTW32_TRUE;\n</code></pre>\n\n<p>What is this line doing?</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 1, "creation_date": 1435736874, "post_id": 31155408, "comment_id": 50319929, "body": "Have you correctly finished the statement before <code>float price = 0;</code> line? Maybe it&#39;s wrong and it all becomes just one that fails for the compiler."}, {"owner": {"reputation": 68, "user_id": 6036456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905554b7d15d87af005667daf5d1563?s=128&d=identicon&r=PG&f=1", "display_name": "MKennedy", "link": "https://stackoverflow.com/users/6036456/mkennedy"}, "reply_to_user": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1435737017, "post_id": 31155408, "comment_id": 50319993, "body": "yep.. that&#39;s embarrassing, I have no idea why it didn&#39;t point me to the line above like it usually does. Thanks for the quick reply though."}, {"owner": {"reputation": 1602, "user_id": 1716310, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24ff82e0962f79caedf7011c505ef136?s=128&d=identicon&r=PG", "display_name": "Btc Sources", "link": "https://stackoverflow.com/users/1716310/btc-sources"}, "edited": false, "score": 0, "creation_date": 1435737117, "post_id": 31155408, "comment_id": 50320025, "body": "Your&#39;re welcome @AltusVultur. Will post it as answer."}, {"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1435757163, "post_id": 31155408, "comment_id": 50333776, "body": "This is why self-contained examples are a good thing..."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1435738635, "last_edit_date": 1435738635, "creation_date": 1435736946, "answer_id": 31155485, "question_id": 31155408, "link": "https://stackoverflow.com/questions/31155408/loops-not-recognizing-variables/31155485#31155485", "title": "Loops not recognizing variables?", "body": "<p><strong>TL;DR</strong> - Your code snippet looks ok.  Issue is most likely elsewhere in your actual code.</p>\n\n<p>Once possible reason, however, as I see it, is your compiler does not support <code>C99</code> or above. Variable definition in between a function code (Mixed declaration) is allowed onwards <code>C99</code>. In other versions, it should come at the beginning of the function itself. Then, also, you should have received error in </p>\n\n<pre><code> for(int j=1; j&lt;\n</code></pre>\n\n<p>as this is also a <code>C99</code> feature, so my above assumption is not likely to be true. </p>\n\n<p>Please show some more code.</p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 6036456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905554b7d15d87af005667daf5d1563?s=128&d=identicon&r=PG&f=1", "display_name": "MKennedy", "link": "https://stackoverflow.com/users/6036456/mkennedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1435737235, "creation_date": 1435737235, "answer_id": 31155586, "question_id": 31155408, "link": "https://stackoverflow.com/questions/31155408/loops-not-recognizing-variables/31155586#31155586", "title": "Loops not recognizing variables?", "body": "<p>Tl;dr if things inexplicably break in one location, look for typos above it ( I was missing a semicolon in the previous line. )</p>\n"}], "owner": {"reputation": 68, "user_id": 6036456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f905554b7d15d87af005667daf5d1563?s=128&d=identicon&r=PG&f=1", "display_name": "MKennedy", "link": "https://stackoverflow.com/users/6036456/mkennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435738635, "creation_date": 1435736711, "last_edit_date": 1435737052, "question_id": 31155408, "link": "https://stackoverflow.com/questions/31155408/loops-not-recognizing-variables", "title": "Loops not recognizing variables?", "body": "<p>I'm new to C and working with CUDA although I don't think this problem is specific to CUDA - I've been able to transfer data to and from the GPU device without any problems and for testing purposes only working with a single thread. </p>\n\n<p>After a long loop calculating f1 and f2, I have this snippet of code:</p>\n\n<pre><code>float price = 0;\nfloat net = 0;\nint numTrades = 0;\n\nfor (int j = 1; j &lt; dataCol; j++) {\n    if (((f1[j] &gt; f2[j]) &amp;&amp; (f1[j - 1] &lt; f2[j - 1]) &amp;&amp; price == 0)) {\n            price = data[j];\n            numTrades++;\n    }\n    else if (((f1[j] &lt; f2[j]) &amp;&amp; (f1[j - 1] &gt; f2[j - 1]) &amp;&amp; price != 0)) {\n            net += data[j] - price;\n            price = 0;\n            numTrades++;\n    }\n}\n</code></pre>\n\n<p>which as far as I can tell doesn't have any problems, except for the fact that it refuses to compile with an \"identifier 'price' is undefined\" error coming from the first if statement. This snippet is the first place in my code it's mentioned and I've tried initializing with int, float, double, even boolean but still get the same error.</p>\n\n<p>Anyone have any ideas as to what might be causing this?</p>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "edited": false, "score": 1, "creation_date": 1435735978, "post_id": 31155090, "comment_id": 50319434, "body": "What&#39;s your actual problem? Where does your assembly code come from?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1435736116, "post_id": 31155090, "comment_id": 50319500, "body": "Looks like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>; please <b>edit your question to improve it</b> and tell the motivations and context."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1435736284, "post_id": 31155090, "comment_id": 50319585, "body": "What is your FreeBASIC source code doing? What is its size?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1435738853, "post_id": 31155090, "comment_id": 50321006, "body": "I finally downvoted the question, because it obviously lacks research efforts. When using a free software which does not satisfy you, your first reflex should be to get the latest source code and study it (then improve it and share your patch)."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1435782945, "post_id": 31155090, "comment_id": 50350061, "body": "It is certainly possible to write one but it might break the code.  backends of compilers will have a peephole optimizer which optimizes a little once you get to the target specific stuff (After the generic front and middle of the compiler).  Say for example your source was C and you had a volatile keyword on a variable, that produces inefficient code which an assembly level optimizer might remove...breaking the original code...or other reasons why a compiler or hand made assembly would have inefficient code that the optimizer couldht/wouldnt know about generically."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1435867595, "post_id": 31155090, "comment_id": 50392148, "body": "@dwelch: yeah, you&#39;d have to be really conservative with re-ordering memory accesses to maintain correctness in the general case.  If you had a re-compiler, you could have an option to assume the code was single-threaded (and that there weren&#39;t signal handlers, either).  Then the re-compiler could assume that all functions followed the ABI, and modify them in ways that left non-callee-save regs in a different state, for example."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1435736278, "post_id": 31155174, "comment_id": 50319582, "body": "That does exist, see my answer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1435736316, "post_id": 31155174, "comment_id": 50319601, "body": "I mentioned and explained the <i>general case</i>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1435736503, "post_id": 31155174, "comment_id": 50319707, "body": "I don&#39;t see how it doesn&#39;t work in the <i>general case.</i> The Plan 9 assemblers are fairly general and don&#39;t restrict how you write your assembly."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1435736554, "post_id": 31155174, "comment_id": 50319738, "body": "I already have a working C program, I just translated some parts of this C program to FreeBASIC because I really like its syntax. But the FreeBASIC compiler isn&#39;t good enough in optimizing. Probably the best option for me is to write my own FB to C compiler. The translating script you mentioned is what I call a compiler."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1435736831, "post_id": 31155174, "comment_id": 50319905, "body": "@xiver7, yes, sort of. But hopefully the semantics of your FreeBASIC is similar enough to C. And if your FreeBASIC source code is small enough, translating it by hand to C (or to D, or to C++, or to Go) might be easier than coding a small FreeBASIC to C compiler"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1435737262, "post_id": 31155174, "comment_id": 50320093, "body": "Don&#39;t lose your time in learning and using FreeBASIC. If you don&#39;t like C syntax, learn some other language (Ocaml, Haskell, Common Lisp, Clojure, Scala, D, Go, Ada, ....); but IMHO BASIC is nearly dead."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1435737384, "post_id": 31155174, "comment_id": 50320168, "body": "I love C and its syntax. The syntax of FreeBASIC matches very much to C and C++, and it supports (almost?) everything that C does in clean syntax."}, {"owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "edited": false, "score": 0, "creation_date": 1435737470, "post_id": 31155174, "comment_id": 50320211, "body": "You can write an OS with FreeBASIC. <a href=\"http://wiki.osdev.org/FreeBasic_Bare_Bones\" rel=\"nofollow noreferrer\">wiki.osdev.org/FreeBasic_Bare_Bones</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1435738293, "post_id": 31155174, "comment_id": 50320666, "body": "So what? You can write an OS in Haskell, Ocaml (look into <a href=\"https://mirage.io/\" rel=\"nofollow noreferrer\">MirageOS</a>...), Go, ..."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 1, "creation_date": 1435747645, "post_id": 31155174, "comment_id": 50326844, "body": "FreeBasic has an native (x86) and a C code backend (called CGEN, gcc based). Afaik the LLVM effort was aborted."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1435738691, "last_edit_date": 1491982277, "creation_date": 1435735975, "answer_id": 31155174, "question_id": 31155090, "link": "https://stackoverflow.com/questions/31155090/is-there-an-optimizing-assembly-compiler/31155174#31155174", "title": "Is there an optimizing assembly compiler?", "body": "<p>No, and it probably cannot exist in the general case (but it might exist, and did exist in the past -1990s- for some MIPS or Sparc workstations, if the assembler code is somehow restricted). You might try to use some <a href=\"https://en.wikipedia.org/wiki/Decompiler\" rel=\"nofollow noreferrer\">decompiler</a> (but these cannot reliably work on every code, in particular, because not every assembler code is expressible in C, and because a compiler is losing some information from its source code), and then recompile with optimization the decompiled C code.</p>\n\n<p>BTW, you really need some optimizing FreeBASIC compiler (e.g. code your FreeBASIC to C - or to LLVM - translator). Perhaps (if your FreeBasic program is not big) you might instead translate (by hand, perhaps with the help of some script) your FreeBASIC source into something else.</p>\n\n<p>At last, <a href=\"http://www.freebasic.net/\" rel=\"nofollow noreferrer\">FreeBASIC</a> is <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a> (GPLv2 licensed). You could spend some (months or years) of effort to improve it, and make it <a href=\"https://softwareengineering.stackexchange.com/a/257873/40065\">generate either C</a>, or LLVM code, or use <a href=\"http://llvm.org/\" rel=\"nofollow noreferrer\">LLVM</a> or <a href=\"https://gcc.gnu.org/wiki/JIT\" rel=\"nofollow noreferrer\">GCCJIT</a> just-in-time compilation libraries. \nI personally believe that it is not worth the effort, because BASIC is a nearly dead language (and there are lots of languages better than BASIC: Ocaml, Haskell, Common Lisp, Clojure, Scala, Scheme, Go, D, ....; and the existing living source code base in BASIC is not that big today)</p>\n\n<p>It looks like the <code>FreeBASIC-1.02.1-source/</code> (as provided by the <a href=\"http://ttps://downloads.sourceforge.net/fbc/FreeBASIC-1.02.1-source.tar.gz\" rel=\"nofollow noreferrer\">FreeBASIC-1.02.1-source.tar.gz</a> archive) contains a <code>inc/llvm-c.bi</code> &amp; a <code>src/compiler/ir-llvm.bas</code> files, so probably already has some work to generate LLVM. You should investigate (and ask LLVM to optimize more).</p>\n\n<p><sup>Notice that I never used FreeBASIC and probably never will. But I do have the habit of looking inside free software source code, and you should get that habit too...</sup></p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 3, "last_activity_date": 1435736729, "last_edit_date": 1435736729, "creation_date": 1435736269, "answer_id": 31155273, "question_id": 31155090, "link": "https://stackoverflow.com/questions/31155090/is-there-an-optimizing-assembly-compiler/31155273#31155273", "title": "Is there an optimizing assembly compiler?", "body": "<p>Yes. The compiler infrastructure of the Plan 9 operating system uses assemblers and linkers that do various optimizing tasks usually performed by the compiler like:</p>\n\n<ul>\n<li>instruction selection (unsupported instructions are emulated)</li>\n<li>register allocation (partially)</li>\n<li>dead code elimination</li>\n<li>some peephole optimization</li>\n</ul>\n\n<p>See <a href=\"https://golang.org/doc/asm\" rel=\"nofollow\">here</a> for an introduction into the Go flavour of Plan 9 assembly.</p>\n"}], "owner": {"reputation": 6043, "user_id": 3998522, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/042b8c418b7f1129fa54862a935377b8?s=128&d=identicon&r=PG&f=1", "display_name": "xiver77", "link": "https://stackoverflow.com/users/3998522/xiver77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "closed_date": 1435741044, "accepted_answer_id": 31155174, "answer_count": 2, "score": 0, "last_activity_date": 1435738691, "creation_date": 1435735724, "last_edit_date": 1435736131, "question_id": 31155090, "link": "https://stackoverflow.com/questions/31155090/is-there-an-optimizing-assembly-compiler", "closed_reason": "Not suitable for this site", "title": "Is there an optimizing assembly compiler?", "body": "<p>This may sound silly, but is there an optimizing assembly compiler? Like gcc or MSVC would optimize C.</p>\n\n<p>Or at least is there a usable decompiler that produces compilable C? The code doesn't need to be readable. I just want to <code>asm -&gt; c -&gt; gcc -O3 -&gt; ELF/PE</code>.</p>\n\n<p>NOTE1: Maybe I should explain why I need this, after seeing a downvote. So there is a FreeBASIC compiler that produces the executable directly, but the compiler doesn't optimize well enough. I don't know why they didn't choose C as an intermediate representation. Perhaps I can rewrite the compiler to produce C, but not really now. It's trivial at least in Linux to produce the assembly from the executable, so I was thinking maybe there is a way to optimize this automatically.</p>\n"}, {"tags": ["c", "printf", "output", "scanf"], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 2, "last_activity_date": 1435735541, "last_edit_date": 1435735541, "creation_date": 1435735236, "answer_id": 31154927, "question_id": 31154894, "link": "https://stackoverflow.com/questions/31154894/can-anyone-explain-the-output-for-scanned-value-of-the-following-program/31154927#31154927", "title": "Can anyone explain the output for scanned value of the following program..?", "body": "<blockquote>\n  <p>if some value is supplied scanf but the output of the program is still 1. Why?</p>\n</blockquote>\n\n<p>Because <code>scanf</code> returns an <code>int</code> as <a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow\">per the documentation</a>. <code>scanf</code> will return the total number of items scanned and assigned successfully.</p>\n\n<p>In your case, <code>scanf</code> will return 1 if it was successful in scanning an <code>int</code> from the <code>stdin</code>, else it will return 0. It will also return <code>-1</code> on encountering <code>EOF</code>. Then, this value is printed by the <code>printf</code> you have.</p>\n\n<hr>\n\n<p>If you want to print the value of <code>i</code>, seperate the <code>scanf</code> and the <code>printf</code>, i.e, use</p>\n\n<pre><code>int i;\nscanf(\"%d\", &amp;i)\nprintf(\"%d\\n\", i);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>int i;\nprintf(\"%d\\n\" , scanf(\"%d\", &amp;i) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "is_accepted": false, "score": 1, "last_activity_date": 1435735410, "creation_date": 1435735410, "answer_id": 31154989, "question_id": 31154894, "link": "https://stackoverflow.com/questions/31154894/can-anyone-explain-the-output-for-scanned-value-of-the-following-program/31154989#31154989", "title": "Can anyone explain the output for scanned value of the following program..?", "body": "<p>The return type of <code>scanf()</code> is number of items of the argument list successfully filled.In your case one item is being read so if successful <code>1</code> will be returned by <code>scanf()</code> Similarly the following would return <code>2</code> because there are two items being read.</p>\n\n<pre><code> int i,j;\n printf(\"%d\\n\" , scanf(\"%d %d\", &amp;i,&amp;j) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1435735812, "last_edit_date": 1435735812, "creation_date": 1435735451, "answer_id": 31155002, "question_id": 31154894, "link": "https://stackoverflow.com/questions/31154894/can-anyone-explain-the-output-for-scanned-value-of-the-following-program/31155002#31155002", "title": "Can anyone explain the output for scanned value of the following program..?", "body": "<p>In the below statement,</p>\n\n<pre><code>printf(\"%d\\n\" , scanf(\"%d\", &amp;i) );\n</code></pre>\n\n<p>you're <strong>not</strong> printing the value <em>scanned and stored</em> by <code>scanf()</code>, you're printing the <em>return value</em> of <code>scanf()</code>.</p>\n\n<p>The value, scanned by <code>scanf()</code> will be stored in the supplied argument, here, the variable <code>i</code>.</p>\n\n<p>Remember, <a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow\"><code>scanf()</code> <strong>does not return</strong> the <em>scanned value</em>, it <strong>returns</strong> the number of items it successfully matched and assigned</a>.</p>\n\n<p>If you want to print the scanned value, you have to use the same variable where the value is stored, i.e., <code>i</code>.</p>\n\n<pre><code>  printf(\"The scanned value is %d\\n\", i);\n</code></pre>\n\n<hr>\n\n<p>That said, as a note, the recommended signature for <code>main()</code> is <code>int main(void)</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 3416257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZcVzy.jpg?s=128&g=1", "display_name": "Masud Shaik", "link": "https://stackoverflow.com/users/3416257/masud-shaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1435736264, "creation_date": 1435735161, "last_edit_date": 1435735999, "question_id": 31154894, "link": "https://stackoverflow.com/questions/31154894/can-anyone-explain-the-output-for-scanned-value-of-the-following-program", "title": "Can anyone explain the output for scanned value of the following program..?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int i;\n    printf(\"%d\\n\", scanf(\"%d\", &amp;i) );\n    return 0;\n}\n</code></pre>\n\n<p>If some value is supplied to <code>scanf()</code> the output of the program is still 1. Why ?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435734839, "post_id": 31154697, "comment_id": 50318757, "body": "Are you looking for a <a href=\"https://stackoverflow.com/questions/tagged/winapi\">winapi</a> solution, or a <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> solution?"}, {"owner": {"reputation": 573, "user_id": 5031477, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5191880a917c1cd3e15048d9d953e89a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5031477/james"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435734994, "post_id": 31154697, "comment_id": 50318846, "body": "@Amit I am looking for a C solution, but if there is none, then I will use WinAPI."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 5031477, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5191880a917c1cd3e15048d9d953e89a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5031477/james"}, "edited": false, "score": 0, "creation_date": 1435735692, "post_id": 31154966, "comment_id": 50319285, "body": "Shouldn&#39;t the function parameters be like this: <code>HANDLE hFile = CreateFile(&quot;D:\\\\1.mp4&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);</code>?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 2, "creation_date": 1435736484, "post_id": 31154966, "comment_id": 50319702, "body": "Note you can use <code>_open_osfhandle</code> followed by <code>_fdopen</code> to obtain a <code>FILE*</code> from a <code>HANDLE</code>."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1435737215, "post_id": 31154966, "comment_id": 50320064, "body": "@JonathanPotter you&#39;re right, but it&#39;s easier to use <code>_fsopen</code> as noted by Joni. The same &quot;problem&quot; remains though, this is not standard C and no longer standard WINAPI (such that could be transported to non C domain)"}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": true, "score": 3, "last_activity_date": 1435735898, "last_edit_date": 1495535060, "creation_date": 1435735340, "answer_id": 31154966, "question_id": 31154697, "link": "https://stackoverflow.com/questions/31154697/how-to-open-a-file-and-lock-it-in-c/31154966#31154966", "title": "How to open a file and lock it in C?", "body": "<p>In C, there apparently isn't a way to do this, although POSIX has some ways to do that. Look <a href=\"https://stackoverflow.com/questions/7573282/how-to-lock-files-in-c-c-using-fopen\">here</a> for details.</p>\n\n<p>In WINAPI, it's rather simple to do with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx\" rel=\"nofollow noreferrer\">CreateFile</a> (but you end up with a Windows Handle, not a <code>FILE</code> pointer):</p>\n\n<pre><code>HANDLE hFile = CreateFile(\"D:\\\\1.mp4\", GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1435736076, "post_id": 31155031, "comment_id": 50319476, "body": "That&#39;s a great answer, but it&#39;s neither standard C, nor is it winapi. It&#39;s &quot;the best of both worlds&quot; while not being either of them :-)"}], "tags": [], "owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "is_accepted": false, "score": 4, "last_activity_date": 1435735545, "creation_date": 1435735545, "answer_id": 31155031, "question_id": 31154697, "link": "https://stackoverflow.com/questions/31154697/how-to-open-a-file-and-lock-it-in-c/31155031#31155031", "title": "How to open a file and lock it in C?", "body": "<p>The windows feature you want to use is the \"sharing mode.\" You can set it using the <a href=\"https://msdn.microsoft.com/en-us/library/8f30b0db.aspx\" rel=\"nofollow\"><code>_fsopen</code></a> function. To deny write access use <code>_SH_DENYWR</code> as the third parameter.</p>\n"}], "owner": {"reputation": 573, "user_id": 5031477, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5191880a917c1cd3e15048d9d953e89a?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5031477/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 31154966, "answer_count": 2, "score": 1, "last_activity_date": 1435737950, "creation_date": 1435734550, "question_id": 31154697, "link": "https://stackoverflow.com/questions/31154697/how-to-open-a-file-and-lock-it-in-c", "title": "How to open a file and lock it in C?", "body": "<p>If I open a file using the following code:</p>\n\n<pre><code>FILE *file = fopen(\"D:\\\\1.mp4\", \"rb\");\n</code></pre>\n\n<p>This will not lock the file, so for example I can open this file using Notepad and write to it!</p>\n\n<p>So is there a way I can make sure that no other application is allowed to write to this file, or should I use WinAPI to accomplish this?</p>\n"}, {"tags": ["java", "c", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 13126, "user_id": 2573375, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/R2avl.png?s=128&g=1", "display_name": "SaeX", "link": "https://stackoverflow.com/users/2573375/saex"}, "edited": false, "score": 1, "creation_date": 1435734420, "post_id": 31154639, "comment_id": 50318505, "body": "Please post your Command Prompt output as text, not as images. This makes searching for similar issues much easier."}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 2, "creation_date": 1435735274, "post_id": 31154639, "comment_id": 50319020, "body": "<code>-o hello.dell</code>? It should be <code>hello.dll</code>. It is a typo in your question or did you actually name your library <code>hello.dell</code>?"}, {"owner": {"reputation": 3616, "user_id": 2553431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyDIg.jpg?s=128&g=1", "display_name": "Iamat8", "link": "https://stackoverflow.com/users/2553431/iamat8"}, "edited": false, "score": 0, "creation_date": 1435739521, "post_id": 31154639, "comment_id": 50321452, "body": "Sorry it is typo in question .edited that..my mistake.. I have got hello.dll file problem it with running java file"}], "answers": [{"comments": [{"owner": {"reputation": 3616, "user_id": 2553431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyDIg.jpg?s=128&g=1", "display_name": "Iamat8", "link": "https://stackoverflow.com/users/2553431/iamat8"}, "edited": false, "score": 0, "creation_date": 1435815197, "post_id": 31175168, "comment_id": 50359439, "body": "my dll file is in same folder where i compiled java and .c file (i.e same directory). I used &lt;java -Djava.library.path=&quot;&quot;&gt; also but same error.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "reply_to_user": {"reputation": 3616, "user_id": 2553431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyDIg.jpg?s=128&g=1", "display_name": "Iamat8", "link": "https://stackoverflow.com/users/2553431/iamat8"}, "edited": false, "score": 0, "creation_date": 1435874322, "post_id": 31175168, "comment_id": 50395183, "body": "But do you run the Java app in this directory, or in another? Try running the Java app with the DLL in the app&#39;s working directory, using <code>-Djava.library.path=&quot;.&quot;</code>, and see what occurs. Note: the library path I just mentioned is not empty, but the one you last posted is empty."}, {"owner": {"reputation": 3616, "user_id": 2553431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyDIg.jpg?s=128&g=1", "display_name": "Iamat8", "link": "https://stackoverflow.com/users/2553431/iamat8"}, "edited": false, "score": 0, "creation_date": 1435920308, "post_id": 31175168, "comment_id": 50411845, "body": "Dear, I mentioned it empty here to summarize it.There I used it like  <code>&gt;java -Djava.library.path=&quot;C:&#47;Documents and Settings&#47;User&#47;Desktop&#47;Native&quot; Main</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "is_accepted": false, "score": 0, "last_activity_date": 1435808606, "last_edit_date": 1435808606, "creation_date": 1435808224, "answer_id": 31175168, "question_id": 31154639, "link": "https://stackoverflow.com/questions/31154639/unsatisfied-link-error-in-java-native-programming/31175168#31175168", "title": "unsatisfied link error in java native programming", "body": "<p>Is the new DLL's directory either the Java app's working directory, in the system PATH variable, or in the \"java.library.path\" JVM variable? If not, this exception will be thrown because the JVM won't be able to find the DLL.</p>\n\n<p>I'm not sure what the error message format you got means, though. Normally if a library can't be found by the JVM, the error is something like <code>UnsatisfiedLinkError: no library_name in java.library.path</code>, but yours is different.</p>\n"}], "owner": {"reputation": 3616, "user_id": 2553431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyDIg.jpg?s=128&g=1", "display_name": "Iamat8", "link": "https://stackoverflow.com/users/2553431/iamat8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450451340, "creation_date": 1435734360, "last_edit_date": 1450451340, "question_id": 31154639, "link": "https://stackoverflow.com/questions/31154639/unsatisfied-link-error-in-java-native-programming", "title": "unsatisfied link error in java native programming", "body": "<p>I am trying to build my first native program in java.The .c and .h file compiled well but when running java code I get this error.\nHere are my java and c source file</p>\n\n<p><strong>Main.java</strong></p>\n\n<pre><code>public class Main{\n  public native void sayHello();\n  static{\n       System.loadLibrary(\"hello\");\n  }\n  public static void main(String[] args) {\n  Main main = new Main();\n        main.sayHello();\n  }\n}\n</code></pre>\n\n<p><strong>Hello.c</strong></p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"stdio.h\"\n#include \"Main.h\"\n\nJNIEXPORT void JNICALL Java_Main_sayHello(JNIEnv *env, jobject obj){\n    printf(\"Hello World \\n\");\n    return;\n\n}\n</code></pre>\n\n<p><strong>.C file compilation</strong></p>\n\n<pre><code>C:.../gcc -I \"C:\\Program Files\\Java\\jdk1.7.0_79\\include\" -I \"C:\\Program Files\\Java\\jdk1.7.0_79\\include\\win32\" -o hello.dll -shared Hello.c\n</code></pre>\n\n<p><strong>Running Java File</strong></p>\n\n<pre><code>C:.../javac Main.java\nC:.../java Main\nException in thread \"main\" java.lang.UnsatisfiedLinkError: Main.sayHello()V\n    at Main.sayHello(Native Method)\n    at Main.main(Main.java:8)\n</code></pre>\n"}, {"tags": ["c", "linux", "makefile", "libtool"], "comments": [{"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1435740539, "post_id": 31154503, "comment_id": 50322131, "body": "try to run <code>libtoolize</code> in the folder <code>..&#47;..&#47;</code>"}, {"owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "edited": false, "score": 0, "creation_date": 1436458901, "post_id": 31154503, "comment_id": 50632668, "body": "what command it is trying to run on line 445 would be helpful"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3360834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c29b1d4b5cda0585150e6bfc04d71933?s=128&d=identicon&r=PG&f=1", "display_name": "Gecko", "link": "https://stackoverflow.com/users/3360834/gecko"}, "is_accepted": false, "score": -1, "last_activity_date": 1487580646, "last_edit_date": 1487580646, "creation_date": 1487573953, "answer_id": 42338284, "question_id": 31154503, "link": "https://stackoverflow.com/questions/31154503/libtool-command-not-found/42338284#42338284", "title": "libtool command not found", "body": "<p>At the end of line 445 in the file <code>libtool.c</code> maybe there is a <code>^M</code>. In order to build, this has to be deleted.</p>\n"}], "owner": {"reputation": 1, "user_id": 4976837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306cbecf52c301e07c9302276bbf47eb?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin Kunchanur", "link": "https://stackoverflow.com/users/4976837/pravin-kunchanur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3071, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487580646, "creation_date": 1435733873, "question_id": 31154503, "link": "https://stackoverflow.com/questions/31154503/libtool-command-not-found", "title": "libtool command not found", "body": "<p>Hi i am trying to build my project in linux. The build procedure is configure, make and make install.\nDuring make i am getting error from libtool as shown below. I am not getting what is the reason for this. Please help me with this.</p>\n\n<pre><code>../../libtool: line 445:: command not found\n../../libtool: line 448:: command not found\n../../libtool: line 453:: command not found\n../../libtool: line 474:: command not found\n../../libtool: line 523:: command not found\n../../libtool: line 529:: command not found\n../../libtool: line 539: syntax error near unexpected token `newline'\n../../libtool: line 539: `  case `(set -o) 2&gt;/dev/null` in *posix*) set -o posix;; esac\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "string", "command-line-arguments", "getopt"], "comments": [{"owner": {"reputation": 2090, "user_id": 390562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/126acfbb1d40fec651032a9fddcf95dc?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/390562/timo"}, "edited": false, "score": 2, "creation_date": 1435734897, "post_id": 31154441, "comment_id": 50318787, "body": "Did you try debugging your application to see where it actually goes wrong?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1435734701, "last_edit_date": 1435734701, "creation_date": 1435733762, "answer_id": 31154478, "question_id": 31154441, "link": "https://stackoverflow.com/questions/31154441/number-of-divisors-with-the-function-getopt/31154478#31154478", "title": "Number of divisors with the function getopt", "body": "<p>I think, your <code>getopt()</code> call should look like</p>\n\n<pre><code>while((option =getopt(argc,argv,\"n:\")) !=-1){  //notice the :\n</code></pre>\n\n<p>as you'll be supplying an argument (value) for that option. </p>\n\n<p>That said, in your code, inside <code>divisor()</code> function,</p>\n\n<pre><code>char f=*temp1;\nint n=f-'0';\n</code></pre>\n\n<p>looks wrong. <code>temp</code> is a <code>char</code> pointer an dereferencing the pointer only gives you the value of the first <code>char</code> stored, and the expected value , <code>30</code> is not stored as a single <code>char</code>, rather it's stored as lexicographical format.</p>\n\n<p>I think, you can use <a href=\"http://linux.die.net/man/3/strtol\" rel=\"nofollow\"><code>strtol()</code></a> to convert the lexicographical representation to <code>int</code> value, like</p>\n\n<pre><code>int x = strtol(temp, NULL, 0);\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 3335330, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/rh6SH.jpg?s=128&g=1", "display_name": "EduardoRobles", "link": "https://stackoverflow.com/users/3335330/eduardorobles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 31154478, "answer_count": 1, "score": -3, "last_activity_date": 1435735176, "creation_date": 1435733645, "last_edit_date": 1435735176, "question_id": 31154441, "link": "https://stackoverflow.com/questions/31154441/number-of-divisors-with-the-function-getopt", "title": "Number of divisors with the function getopt", "body": "<p>I'm doing a program which receives a number and gives you the number of divisors.\ne.g. \nin the cmd :</p>\n\n<pre><code>practica -n 30\n</code></pre>\n\n<p>Expected output:</p>\n\n<blockquote>\n  <p>1,2,3,5,6,10,15,30</p>\n</blockquote>\n\n<p>I have this code:</p>\n\n<pre><code>void divisor(char *temp1);\nint main(int argc,char **argv){\nint option;\nchar *n;\n while((option =getopt(argc,argv,\"n\")) !=-1){\n  switch(option){\n  case 'n':\n  n=optarg;\n  break;\n }\n}\n\ndivisor(n);\n}\n\nvoid divisor(char *temp1){\nchar f=*temp1;\nint n=f-'0';\nint a;\na=1;\nwhile (a&lt;n)\n{\n if(n%a==0)\n printf(\"%d,\",a);\n a++;\n}\na=n;\nif(n%a==0)\nprintf(\"%d\",a);\nprintf(\"\\b \");\n}\n</code></pre>\n\n<p>I'm using the command line and the program closes.</p>\n\n<p><img src=\"https://i.stack.imgur.com/IWqlm.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/ZiqLw.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "gcc", "assembly", "stack", "32bit-64bit"], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 1425240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6afa0a0f9e190bd26ce07a07226fa32f?s=128&d=identicon&r=PG&f=1", "display_name": "sarath", "link": "https://stackoverflow.com/users/1425240/sarath"}, "edited": false, "score": 0, "creation_date": 1435734014, "post_id": 31154433, "comment_id": 50318282, "body": "Thank you. That was the point I was missing. Thanks for the link too.. :)"}], "tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": true, "score": 4, "last_activity_date": 1435733624, "creation_date": 1435733624, "answer_id": 31154433, "question_id": 31154106, "link": "https://stackoverflow.com/questions/31154106/stack-frame-creation-in-64-bit-machine/31154433#31154433", "title": "Stack frame creation in 64 bit machine", "body": "<p>On x86-64 the standard way of passing arguments is through the use of registers, not the stack (unless you got more than 6). See <a href=\"http://www.x86-64.org/documentation/abi.pdf\" rel=\"nofollow\">http://www.x86-64.org/documentation/abi.pdf</a></p>\n\n<p>I highly recommend not doing any kind of experimentation without reading proper documents first (like the one I just linked).</p>\n\n<p>Anyway, you could easily see the arguments were not passed on the stack if you disassembled main:</p>\n\n<pre><code>   0x0000000000400509 &lt;+0&gt;: push   %rbp\n   0x000000000040050a &lt;+1&gt;: mov    %rsp,%rbp\n   0x000000000040050d &lt;+4&gt;: mov    $0x4,%ecx\n   0x0000000000400512 &lt;+9&gt;: mov    $0x3,%edx\n   0x0000000000400517 &lt;+14&gt;:    mov    $0x2,%esi\n   0x000000000040051c &lt;+19&gt;:    mov    $0x1,%edi\n   0x0000000000400521 &lt;+24&gt;:    callq  0x4004f0 &lt;test&gt;\n   0x0000000000400526 &lt;+29&gt;:    pop    %rbp\n   0x0000000000400527 &lt;+30&gt;:    retq   \n</code></pre>\n\n<p>And you could also see how they end up on the stack within test:</p>\n\n<pre><code>   0x00000000004004f0 &lt;+0&gt;: push   %rbp\n   0x00000000004004f1 &lt;+1&gt;: mov    %rsp,%rbp\n   0x00000000004004f4 &lt;+4&gt;: mov    %edi,-0x14(%rbp)\n   0x00000000004004f7 &lt;+7&gt;: mov    %esi,-0x18(%rbp)\n   0x00000000004004fa &lt;+10&gt;:    mov    %edx,-0x1c(%rbp)\n   0x00000000004004fd &lt;+13&gt;:    mov    %ecx,-0x20(%rbp)\n   0x0000000000400500 &lt;+16&gt;:    movl   $0x64,-0x4(%rbp)\n   0x0000000000400507 &lt;+23&gt;:    pop    %rbp\n   0x0000000000400508 &lt;+24&gt;:    retq   \n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 1425240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6afa0a0f9e190bd26ce07a07226fa32f?s=128&d=identicon&r=PG&f=1", "display_name": "sarath", "link": "https://stackoverflow.com/users/1425240/sarath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 31154433, "answer_count": 1, "score": 2, "last_activity_date": 1435733624, "creation_date": 1435732528, "last_edit_date": 1435732983, "question_id": 31154106, "link": "https://stackoverflow.com/questions/31154106/stack-frame-creation-in-64-bit-machine", "title": "Stack frame creation in 64 bit machine", "body": "<p>I'm just learning some low level analysis of the programs. In 32 bit compilation with gcc, I found that the stack frame is created in the following order:</p>\n\n<ol>\n<li>Push the function arguments in reverse order.</li>\n<li>Save the return address</li>\n<li>Save the frame pointer</li>\n<li>Create the local variables</li>\n</ol>\n\n<p>So the address of the arguments should be highest, as stack grows in reverse order. But when I tried the same with a 64 bit compilation, I cant understand how it's created, it's just the opposite of what I found in 32 bit compilation. Here is the code and memory details:</p>\n\n<pre><code>void test(int a, int b, int c, int d)\n{\n    int flag;\n    char buf[10];\n    num = 100;\n}\n\nint main()\n{\n        test(1, 2, 3, 4);\n}\n</code></pre>\n\n<p>Right now for simplicity let's take only the arguments and return address.</p>\n\n<p>32-bit compilation:</p>\n\n<pre><code>0xffffd130: 0x00000001  0xffffd1f4  0xffffd1fc  0xf7e3ad1d\n0xffffd140: 0xffffd158  0x0804842d  0x00000001  0x00000002\n0xffffd150: 0x00000003  0x00000004  0x00000000  0xf7e22933\n0xffffd160: 0x00000001  0xffffd1f4  0xffffd1fc  0xf7fdb6b0\n\n\n   0x08048421 &lt;+30&gt;:    mov    DWORD PTR [esp],0x1\n   0x08048428 &lt;+37&gt;:    call   0x80483f0 &lt;test&gt;\n   0x0804842d &lt;+42&gt;:    leave  \n</code></pre>\n\n<p>Here everything is proper. I can see the arguments at higher address, immediately followed by the return address <code>0x0804842d</code> which is at lower address. Now,</p>\n\n<p>64-bit compilation:</p>\n\n<pre><code>0x7fffffffdf80: 0x00000004  0x00000003  0x00000002  0x00000001\n0x7fffffffdf90: 0x00400530  0x00000000  0x00400400  0x00000000\n0x7fffffffdfa0: 0xffffdfb0  0x00007fff  0x0040052a  0x00000000\n0x7fffffffdfb0: 0x00000000  0x00000000  0xf7a3baf5  0x00007fff\n\n   0x0000000000400525 &lt;+24&gt;:    call   0x4004f0 &lt;test&gt;\n   0x000000000040052a &lt;+29&gt;:    pop    rbp\n   0x000000000040052b &lt;+30&gt;:    ret    \n</code></pre>\n\n<p>Here I can see that the arguments are at a lower address and the return address <code>0x0040052a</code> is at a higher address. What is the problem here? is the stack growing in an opposite direction (lower to higher address) or the creation of stack frame is different from the above mentioned sequence? Please help me to understand. Thanks.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 702, "user_id": 4064006, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QrdHQ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/4064006/will"}, "edited": false, "score": 0, "creation_date": 1435730172, "post_id": 31153422, "comment_id": 50316362, "body": "The compiler does not know that <code>char* s</code> is a string. <code>char* s</code> is a pointer to char, as the same as <code>int* s</code> is a pointer to int. We can get the whole string as long as we reached a final &#39;\\0&#39;."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1435730204, "post_id": 31153422, "comment_id": 50316375, "body": "&quot;If I use int* it will only allow one int&quot;. That&#39;s not true. In C <code>int*</code> can be used as an array."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1435730324, "post_id": 31153422, "comment_id": 50316423, "body": "@AlanAu: No, pointers cannot be used as arrays."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1435730423, "post_id": 31153422, "comment_id": 50316462, "body": "The relationship between arrays and pointers can be confusing. Section 6 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a> does a very good job of explaining it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1435730468, "post_id": 31153422, "comment_id": 50316472, "body": "@KeithThompson Perhaps we are referring to different things. <code>int *i_array = malloc(10*sizeof int); i_array[1] = 1;</code>?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1435731106, "post_id": 31153422, "comment_id": 50316783, "body": "@AlanAu: <code>i_array</code> is a pointer, not an array. The prefix of the <code>[]</code> operator must be a pointer (which is often the result of the implicit conversion of an array). (Actually <code>[]</code> is commutative, but that&#39;s beside the point.)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1435825474, "post_id": 31153422, "comment_id": 50364596, "body": "declaring some variable <code>char *variable</code> does not automatically declares an array of characters, it only declares a pointer (a pointer and an array are different things)  You must care on this!!!  <code>string</code> type is not primitive even in C++.  You can construct it as a C++ <code>class</code> and let it behave like it does."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1435731955, "post_id": 31153446, "comment_id": 50317190, "body": "I see a down-vote. If there is anything wrong with this answer, I&#39;d like to know so I can consider fixing it."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 16, "last_activity_date": 1435732586, "last_edit_date": 1435732586, "creation_date": 1435729863, "answer_id": 31153446, "question_id": 31153422, "link": "https://stackoverflow.com/questions/31153422/char-array-of-chars-but-int-not-array-of-ints/31153446#31153446", "title": "Char* array of chars, but int* not array of ints?", "body": "<blockquote>\n  <p>How does the compiler know that <code>char* s</code> is a string and not just the address of a singular char?</p>\n</blockquote>\n\n<p>It doesn't. As far as \"the compiler\" is concerned, <code>char* s</code> is a pointer to char.</p>\n\n<p>On the other hand, there are many library functions that assume that a <code>char*</code> points to an element of a <a href=\"https://en.wikipedia.org/wiki/Null-terminated_string\" rel=\"noreferrer\">null-terminated sequence of <code>char</code></a> (see for example <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"noreferrer\"><code>strlen</code></a>, <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"noreferrer\"><code>strcmp</code></a> etc.). </p>\n\n<p>Note that <code>fwrite</code> does not make this assumption. It requires that you tell it how many bytes you want to write (and that this number doesn't take you beyond the bounds of the buffer pointed at by the first argument.)</p>\n\n<blockquote>\n  <p>If I use <code>int*</code> it will only allow one int, not an array of them. Why the difference?</p>\n</blockquote>\n\n<p>That is incorrect. The C language does not have a special case for <code>char*</code>. An <code>int*</code> can also point to an element of an array of <code>int</code>. In fact, you could write a library that uses <code>0</code> or another sentinel value to indicate the end of a sequence of <code>int</code>, and use it much in the same was as <code>char*</code> are used by convention.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 7, "last_activity_date": 1435731321, "last_edit_date": 1435731321, "creation_date": 1435730079, "answer_id": 31153505, "question_id": 31153422, "link": "https://stackoverflow.com/questions/31153422/char-array-of-chars-but-int-not-array-of-ints/31153505#31153505", "title": "Char* array of chars, but int* not array of ints?", "body": "<p>In your code</p>\n\n<pre><code>fwrite(s, 12, 1, out);\n</code></pre>\n\n<p>is equivalent to writing</p>\n\n<blockquote>\n  <p>write 12 elements of size 1 byte, location starting from address <code>s</code> to the file pointed by <code>out</code>.</p>\n</blockquote>\n\n<p>Here. a <code>char</code> is of one byte exactly, so you get the desired output.</p>\n\n<blockquote>\n  <p><em>How does the compiler know that <code>char* s</code> is a string and not just the address of a singular <code>char</code>?</em></p>\n</blockquote>\n\n<p>Well, it does not (and does not need to). You <em>asked</em> to (read from <code>s</code> and) write 12 bytes, so it will do that. If the memory is inaccessible, that's a <em>programming</em> mistake. <code>fwrite()</code> itself won't <em>handle</em> that.</p>\n\n<p><strong>Beware</strong>:</p>\n\n<ul>\n<li>If <code>s</code> is not allocated memory to be accessed upto <code>s[11]</code> (technically), it will be <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. It's upto the programmer to pass the <em>valid</em> values as argument. </li>\n</ul>\n\n<p>In case of <code>int</code>, the size is <code>4</code> bytes (usually, on 32 bit system) and printing byte-by-byte won't give you the desired result.</p>\n\n<p>In that case, you need to make use of <code>fprintf()</code> to print <em>formatted</em> output.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3240077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4202c9e9a8f2ac0797e30ae45ed89c6?s=128&d=identicon&r=PG&f=1", "display_name": "Raams", "link": "https://stackoverflow.com/users/3240077/raams"}, "is_accepted": false, "score": 0, "last_activity_date": 1435731964, "creation_date": 1435731964, "answer_id": 31153963, "question_id": 31153422, "link": "https://stackoverflow.com/questions/31153422/char-array-of-chars-but-int-not-array-of-ints/31153963#31153963", "title": "Char* array of chars, but int* not array of ints?", "body": "<p>Compiler won't have any idea other than char* is an address of a character. We can make it read the characters following by incrementing the address of the first character. The case is similar to any pointer int*,long* etc., compiler just treat a pointer as something points to an address of its type.</p>\n"}], "owner": {"reputation": 81, "user_id": 3985671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/924008debf7a5079cbf0ab72e9863e65?s=128&d=identicon&r=PG&f=1", "display_name": "jnitram78", "link": "https://stackoverflow.com/users/3985671/jnitram78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "answer_count": 3, "score": 7, "last_activity_date": 1435732659, "creation_date": 1435729730, "last_edit_date": 1435732659, "question_id": 31153422, "link": "https://stackoverflow.com/questions/31153422/char-array-of-chars-but-int-not-array-of-ints", "title": "Char* array of chars, but int* not array of ints?", "body": "<p>In C99 a string is typically initialized by using the <code>char*</code> data type since there is no primitive \"string\" data type. This effectively creates an array of chars by storing the address of the first char in the variable:</p>\n\n<pre><code>FILE* out = fopen(\"out.txt\", \"w\");\nchar* s = argv[1];\nfwrite(s, 12, 1, out);\nfclose(out);\n//successfully prints out 12 characters from argv[1] as a consecutive string.\n</code></pre>\n\n<p>How does the compiler know that <code>char* s</code> is a string and not just the address of a singular <code>char</code>? If I use <code>int*</code> it will only allow one <code>int</code>, not an array of them. Why the difference?</p>\n\n<p>My main focus is understanding how pointers, referencing and de-referencing work, but the whole <code>char*</code> keeps messing with my head. </p>\n"}, {"tags": ["c", "computer-science", "eof", "getchar"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435728506, "post_id": 31152974, "comment_id": 50315756, "body": "What happened when you stored an EOF in a char?"}, {"owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435730718, "post_id": 31152974, "comment_id": 50316607, "body": "How can I store EOF?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1435730992, "post_id": 31152974, "comment_id": 50316731, "body": "Store it in an int!!"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1435739019, "post_id": 31152974, "comment_id": 50321135, "body": "You only <i>think</i> that there&#39;s no difficulty in storing <code>EOF</code> in a <code>char</code>.  The compiler might happily let you do it, but you&#39;re just setting yourself up for an ambiguous situation later."}], "answers": [{"tags": [], "owner": {"reputation": 1824, "user_id": 3391524, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/df222f5b8b6893dd37f1fe8193eb5bc8?s=128&d=identicon&r=PG&f=1", "display_name": "saurabh agarwal", "link": "https://stackoverflow.com/users/3391524/saurabh-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1435727585, "creation_date": 1435727585, "answer_id": 31152991, "question_id": 31152974, "link": "https://stackoverflow.com/questions/31152974/difference-between-storing-the-value-in-int-and-char-returned-from-getchar-funct/31152991#31152991", "title": "Difference between storing the value in int and char returned from getchar function in C", "body": "<p>EOF is end of file. You won't see the difference until you implement some file read/write operation/code. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1435729208, "post_id": 31153088, "comment_id": 50316012, "body": "In theory, EOF only needs to be negative; it does not have to be <code>-1</code>.  In practice, it always is <code>-1</code>."}, {"owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 0, "creation_date": 1435732557, "post_id": 31153088, "comment_id": 50317519, "body": "@Tryin  &quot;If type char is signed, and if EOF is defined (as is usual) as -1, the character with the decimal value 255 (&#39;\\377&#39; or &#39;\\xff&#39; in C) will be sign-extended and will compare equal to EOF, prematurely terminating the input.t If type char is unsigned, an actual EOF value will be truncated (by having its higher-order bits discarded, probably resulting in 255 or 0xff) and will not be recognized as EOF, resulting in effectively infinite input.&quot;   But no such problem is arising when practically executing it."}, {"owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 1, "creation_date": 1435733078, "post_id": 31153088, "comment_id": 50317775, "body": "Also what exactly is getchar() function returning - character or ascii value of character?"}, {"owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "edited": false, "score": 0, "creation_date": 1435733175, "post_id": 31153088, "comment_id": 50317829, "body": "It is character and not the ASCII value."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 0, "creation_date": 1435735177, "post_id": 31153088, "comment_id": 50318954, "body": "@Amisha What you are claiming is not true. You are claiming that you can represent 257 distinct values in an 8 bit value. That&#39;s because there are 256 <code>unsigned char</code> values (assuming 8 bit char) and 1 <code>EOF</code> value."}, {"owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "reply_to_user": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "edited": false, "score": 0, "creation_date": 1435735612, "post_id": 31153088, "comment_id": 50319240, "body": "@Amisha Please refer <a href=\"http://stackoverflow.com/questions/7622699/what-is-the-ascii-value-of-eof-in-c\" title=\"what is the ascii value of eof in c\">stackoverflow.com/questions/7622699/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "is_accepted": false, "score": 0, "last_activity_date": 1435728638, "last_edit_date": 1592644375, "creation_date": 1435728069, "answer_id": 31153088, "question_id": 31152974, "link": "https://stackoverflow.com/questions/31152974/difference-between-storing-the-value-in-int-and-char-returned-from-getchar-funct/31153088#31153088", "title": "Difference between storing the value in int and char returned from getchar function in C", "body": "<p>The value of <code>EOF</code> is always defined to be -1.</p>\n<p>That works well because all <code>ASCII</code> codes are positive, so it can't possibly clash with any real character's representation.</p>\n<p>Unfortunately, <code>C</code> has a very strange feature that can cause trouble. It is not defined what the range of possible values for a char variable must be. On some systems it is -128 to +127, which is fine; but on other systems it is 0 to +255, which is fine for normal ASCII values, but not so hot for EOF's -1.</p>\n<p>For one thing, the variable to hold <code>getchar()</code>'s return value must be an <code>int</code>. <code>EOF</code> is an <code>out of band</code> return value from <code>getchar()</code>: it is distinct from all possible char values which <code>getchar()</code> can return. (On modern systems, it does not reflect any actual end-of-file character stored in a file; it is a signal that no more characters are available.) <code>getchar()</code>'s return value must be stored in a variable larger than char so that it can hold all possible char values, and EOF.</p>\n<p>Two failure modes are possible if, as in the fragment above, <code>getchar()</code>'s return value is assigned to a char.</p>\n<ul>\n<li>If type <code>char</code> is <code>signed</code>, and if <code>EOF</code> is defined (as is usual) as <code>-1</code>, the character with the decimal value <code>255</code> ('\\377' or '\\xff' in <code>C</code>) will be sign-extended and will compare equal to <code>EOF</code>, prematurely terminating the input.t</li>\n<li>If type <code>char</code> is <code>unsigned</code>, an actual <code>EOF</code> value will be <strong>truncated</strong> (by having its higher-order bits discarded, probably resulting in <code>255</code> or <code>0xff</code>) and will not be recognized as <code>EOF</code>, resulting in effectively infinite input.</li>\n</ul>\n<p>The bug can go undetected for a long time, however, if chars are signed and if the input is all 7-bit characters. (Whether plain char is signed or unsigned is implementation-defined.)</p>\n<blockquote>\n<p><strong>References:</strong></p>\n<p>K&amp;R1 Sec. 1.5 p. 14</p>\n<p>K&amp;R2 Sec. 1.5.1 p. 16</p>\n<p>ISO Sec.</p>\n<p>6.1.2.5, Sec. 7.9.1, Sec. 7.9.7.5</p>\n<p>H&amp;S Sec. 5.1.3 p. 116, Sec. 15.1, Sec. 15.6</p>\n<p>CT&amp;P Sec. 5.1 p. 70  PCS Sec. 11 p. 157</p>\n</blockquote>\n<p>Generally it is best to store <code>getchar()</code>'s result in an int guaranteeing that <code>EOF</code> is properly handled.</p>\n"}], "owner": {"reputation": 11, "user_id": 5068047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71907069c56baa155c77fd57e62be3e6?s=128&d=identicon&r=PG&f=1", "display_name": "Amisha Bansal", "link": "https://stackoverflow.com/users/5068047/amisha-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "closed_date": 1435729335, "answer_count": 2, "score": -1, "last_activity_date": 1435732990, "creation_date": 1435727501, "last_edit_date": 1435732990, "question_id": 31152974, "link": "https://stackoverflow.com/questions/31152974/difference-between-storing-the-value-in-int-and-char-returned-from-getchar-funct", "closed_reason": "Duplicate", "title": "Difference between storing the value in int and char returned from getchar function in C", "body": "<p>While going through the book by Dennis Ritchie , I found that it is better to storing the value returned by <code>getchar()</code> function in C in integer type variable rather than character type variable. The reason it stated was that character type variable cannot store the value of <code>EOF</code> . While implementing it practically, there was no such difficult in storing the return in char type variable. And What does getchar() function originally returns , the charcter or the ascii value of the character?</p>\n"}]