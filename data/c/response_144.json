[{"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1507765155, "post_id": 46699131, "comment_id": 80345726, "body": "What is <code>argv[2]</code>?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1507765201, "post_id": 46699131, "comment_id": 80345731, "body": "So you opened a file, didn&#39;t check if <code>fopen</code> as successful, and then read from the file and get a segfault?  Try checking that <code>fp</code> is not NULL."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1507765313, "post_id": 46699131, "comment_id": 80345764, "body": "And Check return value of <code>malloc</code>."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1507765384, "post_id": 46699131, "comment_id": 80345785, "body": "Every time you have code that fails when opening a file without checking for success, the first thing to do is add a check on opening the file. Lesson: <i>always</i> check whether files open successfully, even in pretend code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1507765403, "post_id": 46699131, "comment_id": 80345788, "body": "And of <code>stat()</code>.  And of <code>fread()</code>, though the failure occurs before you could do the last."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1507766880, "post_id": 46699131, "comment_id": 80346145, "body": "You don&#39;t even check if <code>argv[2]</code> exists! Check <i>everything</i> or your program will be impossible to debug."}], "owner": {"reputation": 19, "user_id": 8762118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3217eeeef9ec32a1ae47cf57beaba222?s=128&d=identicon&r=PG&f=1", "display_name": "Peeves", "link": "https://stackoverflow.com/users/8762118/peeves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507765009, "creation_date": 1507765009, "question_id": 46699131, "link": "https://stackoverflow.com/questions/46699131/cant-seem-to-figure-out-the-segmentation-fault-in-this", "title": "Can&#39;t seem to figure out the segmentation fault in this", "body": "<p>I'm trying to figure out why gbd is showing a seg fault in this.</p>\n\n<p>My <code>main</code> is calling a function <code>int* max_min(s, &amp;size, &amp;max, &amp;min);</code></p>\n\n<p>And in <code>max_min(char* filename, unsigned long long int* size, int* max, int* min);</code>\nI calculate the <code>file_size</code> using <code>file_stat</code> and store it in <code>size</code>. I then proceed to read a file using a file pointer <code>fp</code> which I declared. I return a <code>buffer</code> of type <code>int*</code> from this function.</p>\n\n<p>According to <code>gdb</code> by seg fault is at these statements:</p>\n\n<p><code>int* buffer = max_min(s, &amp;size, &amp;max, &amp;min);</code> in <code>int main()</code> \n&amp;</p>\n\n<p><code>unsigned long long int amount = fread(buffer, sizeof(int), *size, fp);</code> in my <code>max_min</code> function.</p>\n\n<pre><code>int main()\n{\n    char* s = argv[2]; //Gets the filename.\n    unsigned long long int size;\n    int min, max;\n    int* buffer = max_min(s, &amp;size, &amp;max, &amp;min);\n    return 0;\n}\n\nint* max_min(char* filename, unsigned long long int* size, int *max, int *min)\n{\n    FILE* fp;\n    fp = fopen(filename, \"r\");\n    struct stat file_stat;\n    unsigned long long int amount;\n    stat(filename, &amp;file_stat);\n    *size = file_stat.st_size;\n    *size /= sizeof(int);\n    int* buffer = malloc(*size *sizeof(int));\n    amount = fread(buffer, sizeof(int), *size, fp);\n\n    return buffer;\n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "clipboard"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1507765005, "post_id": 46699066, "comment_id": 80345684, "body": "half of the <code>case</code> labels are outside the <code>switch</code>. Does that even compile?"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1507827517, "last_edit_date": 1507827517, "creation_date": 1507766160, "answer_id": 46699282, "question_id": 46699066, "link": "https://stackoverflow.com/questions/46699066/clipboard-viewer-doesnt-get-paste-notification/46699282#46699282", "title": "Clipboard viewer doesn&#39;t get paste notification", "body": "<p>A clipboard viewer, and a clipboard format listener (which is what you should be using in Vista+ instead of a viewer), are intended ONLY for detecting changes to the data stored on the clipboard.  Nothing else. The <code>WM_DRAWCLIPBOARD</code> and <code>WM_CLIPBOARDUPDATE</code> messages are sent to viewers/listeners when new data is put on the clipboard. There is no message sent when data is being pasted from the clipboard.</p>\n\n<p>You simply CANNOT detect pastes with a clipboard viewer/listener.  That task is not what those APIs are designed for.</p>\n\n<p>You are going to have to use some global hooks to do what you want.  A keyboard hook via <code>SetWindowsHookEx()</code> or <code>RegisterRawInputDevices()</code> can monitor for <kbd>Ctrl+V</kbd> keystrokes.  A message hook via <code>SetWindowsHookEx()</code> can monitor for window messages related to pasting, like <code>WM_PASTE</code>, <code>EM_PASTESPECIAL</code>, <code>WM_COMMAND</code>, etc.  But even so, this is no guarantee of detecting every possible paste operation.  Applications are free to implement pastes however they want.</p>\n\n<p>You will likely have to resort to injecting code into the target process to directly hook the various Win32 API functions that query the clipboard for data.  Then you can fake the results when the target process tries to retrieve data during <em>any</em> kind of paste operation (like making the app think there is no data available to paste):</p>\n\n<ul>\n<li><code>CountClipboardFormats()</code></li>\n<li><code>EnumClipboardFormats()</code></li>\n<li><code>IsClipboardFormatAvailable()</code></li>\n<li><code>GetPriorityClipboardFormat()</code></li>\n<li><code>GetUpdatedClipboardFormats()</code></li>\n<li><code>GetClipboardData()</code> and <code>OleGetClipboard()</code></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 8762050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56781c57f5a73982e7cf2878694b8795?s=128&d=identicon&r=PG&f=1", "display_name": "BurritoWithTabascoSauce", "link": "https://stackoverflow.com/users/8762050/burritowithtabascosauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507827517, "creation_date": 1507764636, "last_edit_date": 1507777435, "question_id": 46699066, "link": "https://stackoverflow.com/questions/46699066/clipboard-viewer-doesnt-get-paste-notification", "title": "Clipboard viewer doesn&#39;t get paste notification", "body": "<p>I need to block pasting from the clipboard in the window of the certain program. I set a clipboard viewer in my program like this:</p>\n\n<pre><code>HWND hwndNextViewer = 0;\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n  switch (message) {\n       case WM_CREATE: {\n          hwndNextViewer = SetClipboardViewer(hWnd);\n          break;\n       }\n\n        default:\n            return DefWindowProcW(hWnd, message, wParam, lParam);\n  }\n  case WM_DRAWCLIPBOARD: {\n        if(GetForegroundWindow() == hWndTarget){\n            OpenClipboard(hWndTarget);\n            EmptyClipboard();\n            CloseClipboard();\n        }\n        SendMessage(hwndNextViewer, message, wParam, lParam);\n        break;\n   }\n    case WM_CHANGECBCHAIN:{\n\n        if ((HWND)wParam == hwndNextViewer)\n\n             hwndNextViewer = (HWND)lParam;\n\n        else if (hwndNextViewer != NULL) {\n             SendMessage(hwndNextViewer, message, wParam, lParam);\n        }\n\n        break;\n    }\n\n }\n\n}\n</code></pre>\n\n<p>What I'm doing is I'm checking if the current foreground window is the target program window, and if it is, I empty the clipboard. But this code doesn't detect pasting. for example when I paste inside the target window using the mouse.</p>\n\n<p>How can I detect pasting?</p>\n"}, {"tags": ["c", "variable-assignment", "comma", "assignment-operator", "comma-operator"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 6, "creation_date": 1507764689, "post_id": 46699042, "comment_id": 80345625, "body": "That&#39;s not the comma operator. Most uses of commas in C aren&#39;t the comma operator."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507764749, "post_id": 46699042, "comment_id": 80345636, "body": "Decent rule of thumb: if the thing on the left isn&#39;t being discarded, it&#39;s not the comma operator."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1507764786, "post_id": 46699042, "comment_id": 80345650, "body": "@Toothpick Anemone  There is no comma operator. There is a declaration list."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 3, "creation_date": 1507765701, "post_id": 46699042, "comment_id": 80345867, "body": "@KrassiEm: This isn&#39;t some super-esoteric impractical construct here. The questioner is trying to understand real code, and they&#39;re misunderstanding it in a pretty natural way."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 1, "creation_date": 1507767333, "post_id": 46699042, "comment_id": 80346244, "body": "@KrassiEm Parsing questions and language-lawyer questions are not off topic here. If you personally are not looking for such questions why did you even read it? The title should have been sufficient to deter you."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1507766199, "last_edit_date": 1507766199, "creation_date": 1507765322, "answer_id": 46699174, "question_id": 46699042, "link": "https://stackoverflow.com/questions/46699042/how-are-complicated-expression-using-the-comma-operator-parsed-in-c/46699174#46699174", "title": "How are complicated expression using the comma operator parsed in C?", "body": "<p>This</p>\n\n<pre><code>int i, n, val, locala = a, bestval = -INFINITY;\n</code></pre>\n\n<p>is a declaration.</p>\n\n<p>The declaration is defined the following way in C (without all details)</p>\n\n<pre><code>declaration:\n    declaration-specifiers init-declarator-listopt ;\n\ninit-declarator-list:\n    init-declarator\n    init-declarator-list , init-declarator\n\ninit-declarator:\n    declarator\n    declarator = initializer\n</code></pre>\n\n<p>The <em>declaration-specifiers</em> affects all declarators in the <em>init-declarator-\nlist</em>.</p>\n\n<p>If you want to use the comma operator in a declaration then such a declaration can look for example like</p>\n\n<pre><code>int i = 1, j = 2, k = ( ++i, j++, i + j );\n</code></pre>\n\n<p>Here the expression <code>( ++i, j++, i + j )</code> used as an initializer based on the comma operator.</p>\n\n<p>After the declaration <code>i</code> is equal to <code>2</code>, <code>j</code> - <code>3</code>, and <code>k</code> - <code>5</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507786109, "post_id": 46699287, "comment_id": 80351099, "body": "you can indent the code blocks by 4 more spaces inside the list items to make this look nicer"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507806566, "post_id": 46699287, "comment_id": 80362537, "body": "@AnttiHaapala I usually would, but SO seems to have problems with code immediately after a bullet list item."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507807619, "post_id": 46699287, "comment_id": 80363162, "body": "Spaces are like violence, if they&#39;re not working, you&#39;re just not using enough."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 3, "last_activity_date": 1507842731, "last_edit_date": 1507842731, "creation_date": 1507766192, "answer_id": 46699287, "question_id": 46699042, "link": "https://stackoverflow.com/questions/46699042/how-are-complicated-expression-using-the-comma-operator-parsed-in-c/46699287#46699287", "title": "How are complicated expression using the comma operator parsed in C?", "body": "<p>The comma token does several different things in C, which should not be confused:</p>\n\n<ul>\n<li><p>Separates the parameters of a function-like preprocessor macro definition:</p>\n\n<pre><code>#define CAT_NO_EXPAND(x,y) x ## y\n</code></pre></li>\n<li><p>Separates the arguments of a function-like preprocessor macro use:</p>\n\n<pre><code>int CAT_NO_EXPAND(ident_, 3) = 3;\n</code></pre></li>\n<li><p>Separates the enumerators in an enum definition:</p>\n\n<pre><code>enum colors { RED, GREEN, BLUE };\n</code></pre></li>\n<li><p>Separates the declarators in a declaration:</p>\n\n<pre><code>int a, b=3, c;\n</code></pre></li>\n<li><p>Separates the members/elements in a braced initializer:</p>\n\n<pre><code>int arr[3] = {0, 2, 4};\nstruct mystruct s = {8, 3.0};\nfunc( (mystruct s){8, 3.0} );\n</code></pre></li>\n<li><p>Separates the parameters of a function declaration or definition:</p>\n\n<pre><code>void f(int n, double, const char* fmt, ...);\n</code></pre></li>\n<li><p>Separates the arguments of a function call expression:</p>\n\n<pre><code>f(3, 0.5, \"Test %s\\n\", \"Hello\");\n</code></pre></li>\n<li><p>Forms an expression which if evaluated will discard the left side and use the value of the right side as its value.</p>\n\n<pre><code>#define CALL_G_IGNORE_RESULT(x) ((void)g(x), 0)\nfor (i=0, j=0; i&lt;m &amp;&amp; j&lt;n; ++i, ++j)\n</code></pre></li>\n</ul>\n\n<p>What you have read about the \"comma operator\" is <em>only</em> describing the last case, which works in an expression context that doesn't match any of the other cases above.</p>\n\n<p>What you posted is a declaration, which does not involve the \"comma operator\" and simply declares multiple variables at once.  Any initializers are evaluated in order (which matters because you can use an earlier-declared variable in a later initializer).</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1507766548, "creation_date": 1507766548, "answer_id": 46699335, "question_id": 46699042, "link": "https://stackoverflow.com/questions/46699042/how-are-complicated-expression-using-the-comma-operator-parsed-in-c/46699335#46699335", "title": "How are complicated expression using the comma operator parsed in C?", "body": "<ol>\n<li>This is not the comma operator.</li>\n<li>It is a declaration list.</li>\n<li>It is executed left to right, or at least the executable parts of it are.</li>\n<li>Evaluation order and operator precedence are two different things.</li>\n<li>Left-to-right execution order is the opposite of what you posted in parentheses.</li>\n<li>The <code>int</code> keyword is applied to all the declarations because that's what the syntax means.</li>\n<li>There are no 'right-most expressions' here, only declarations with initializers.</li>\n<li>There are therefore no values returned either.</li>\n<li><code>i</code>, <code>n</code>, and <code>val</code> are not initialised.</li>\n</ol>\n"}], "owner": {"reputation": 2121, "user_id": 6676101, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/GdQJN.jpg?s=128&g=1", "display_name": "Toothpick Anemone", "link": "https://stackoverflow.com/users/6676101/toothpick-anemone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1507842731, "creation_date": 1507764508, "last_edit_date": 1507764784, "question_id": 46699042, "link": "https://stackoverflow.com/questions/46699042/how-are-complicated-expression-using-the-comma-operator-parsed-in-c", "title": "How are complicated expression using the comma operator parsed in C?", "body": "<p>After reading both of the following...</p>\n\n<p><a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">What does the comma operator , do?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\">How does the Comma Operator work</a></p>\n\n<p>I am still not sure that I can't parse the following statement that I found in someone else's source code:</p>\n\n<pre><code>int i, n, val, locala = a, bestval = -INFINITY;\n</code></pre>\n\n<p>The comma operator is evaluated in left-to-right ordering, yes? If we use parentheses to show order of precedence, I think we have something like this:</p>\n\n<pre><code>(int i, (n, (val, (locala = a, (bestval = -INFINITY)))));\n</code></pre>\n\n<p>So, maybe, the original is equivalent to the following?</p>\n\n<pre><code>int bestval = -INFINITY;\nint locala = a;\nint val;\nint n;\nint i;\n</code></pre>\n\n<p>If so, why is the <code>int</code> keyword applied to all of the variables instead of only the leftmost variable <code>i</code>?</p>\n\n<p>Also, the right-most expressions return their value, yes? So, <code>locala = a</code> might return the value of <code>locala</code> after the assignment is takes place. Does that mean that the variables <code>i</code>, <code>n</code>, and <code>val</code> all get initialized? If so, what do they get initialized to? <code>-INFINITY</code>? the value of <code>a</code>?</p>\n"}, {"tags": ["c", "pointers", "language-lawyer", "void-pointers"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1507760242, "post_id": 46698387, "comment_id": 80344430, "body": "Yes, they are the same."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1507760305, "post_id": 46698387, "comment_id": 80344454, "body": "Except that pointer-arithmetic on <code>void*</code> is undefined (though most compiler support it at treat it as <code>char*</code> arithmetic) because <code>void</code> has no size - weirdly in GCC you can set a flag so that <code>sizeof(void) == sizeof(char)</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1507761871, "post_id": 46698387, "comment_id": 80344916, "body": "@Dai: There are plenty of differences between <code>void*</code> and <code>char*</code>. The question was only about their representations, which are the same."}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1507761452, "answer_count": 0, "score": 1, "last_activity_date": 1507760330, "creation_date": 1507760137, "last_edit_date": 1507760330, "question_id": 46698387, "link": "https://stackoverflow.com/questions/46698387/do-void-and-char-have-the-same-representation", "closed_reason": "Duplicate", "title": "Do void* and char* have the same representation?", "body": "<p>Does the C standard guarantee that <code>void*</code> and <code>char*</code> have the same representation?<br>\n(Yes, I know that <code>int*</code> can be different of either.)</p>\n"}, {"tags": ["c", "pointers", "undefined-behavior"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 5, "creation_date": 1507760094, "post_id": 46698372, "comment_id": 80344387, "body": "undefined behavior is undefined. There is no guarantee it is detected at all."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507760883, "post_id": 46698372, "comment_id": 80344628, "body": "C is a low-level langauge. It will happily allow you to shoot yourself in the foot all you like, and may or may not warn you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1507762220, "post_id": 46698372, "comment_id": 80345008, "body": "&quot;Shouldn&#39;t I get segmentation fault?&quot; No.  C does not specify you <i>should</i> seg fault.  It <i>might</i> happen.  It is UB.  Other languages may specify that a seg fault must happen.  This often requires extra code or performance.  If  <a href=\"https://en.wikipedia.org/wiki/Training_wheels\" rel=\"nofollow noreferrer\">training wheels</a> are needed, consider other languages."}], "answers": [{"tags": [], "owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "is_accepted": false, "score": 0, "last_activity_date": 1507770075, "creation_date": 1507770075, "answer_id": 46699779, "question_id": 46698372, "link": "https://stackoverflow.com/questions/46698372/acessing-beyond-the-allocated-space-and-not-getting-segfault/46699779#46699779", "title": "Acessing beyond the allocated space and not getting segfault", "body": "<p>The malloc() function implementation is system and library specific.  One of the things that many memory allocation implementations have to deal with is memory fragmentation.  </p>\n\n<p>The question code allocates 4 bytes.  In order to minimize memory fragmentation, many systems actually allocate more than 4; perhaps a minimum of 16 bytes.  Doing so both satisfies the malloc(4) request, as well as keeps memory fragments (once the memory has been freed) to a minimum size of 16 bytes.  Hence a \"memory fragment pool\" of 16 byte fragments can be used to satisfy malloc() request from 1 to 16 bytes.  </p>\n\n<p>Many memory management systems maintain \"memory fragment pools\" of 16,32,64,128, (etc) bytes each.  For example, if a call of malloc(44) is made, a memory fragment from the 64 byte pool can satisfy the request.</p>\n\n<p>On some systems, there is a provision to determine the actual size of the memory fragment returned by malloc().  On a Linux system, the function malloc_usable_size() performs this function.  OS X systems can use malloc_size().  </p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1507770312, "creation_date": 1507770312, "answer_id": 46699806, "question_id": 46698372, "link": "https://stackoverflow.com/questions/46698372/acessing-beyond-the-allocated-space-and-not-getting-segfault/46699806#46699806", "title": "Acessing beyond the allocated space and not getting segfault", "body": "<p>When you write past the end of a memory block allocated by malloc as you've done here, you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Undefined behavior means the behavior of the program can't be predicted. It could crash, it could output strange results, or it could appear to work properly. Also, a seemingly unrelated change such as adding an unused local variable or a call to printf for debugging can change the way undefined behavior manifests itself.</p>\n\n<p>To summarize, with undefined behavior, just because the program could crash doesn't mean it will.</p>\n"}], "owner": {"reputation": 531, "user_id": 2482833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AXc6R.jpg?s=128&g=1", "display_name": "kayas", "link": "https://stackoverflow.com/users/2482833/kayas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46699806, "answer_count": 2, "score": -2, "last_activity_date": 1507770312, "creation_date": 1507760017, "last_edit_date": 1507760130, "question_id": 46698372, "link": "https://stackoverflow.com/questions/46698372/acessing-beyond-the-allocated-space-and-not-getting-segfault", "title": "Acessing beyond the allocated space and not getting segfault", "body": "<p>I allocated some space for a char pointer and tried to access beyond the allocated space but still getting no segmentation fault. my code is like below: </p>\n\n<pre><code>   char *src = malloc(4);\n   strcpy(src, \"1234\");\n   char *temp;\n   for(int i = 0 ; i&lt;5 ; i++) {\n        temp = src;\n        src ++;     \n        printf(\"ite ch  %c\\n\",src[0]);\n    }\n  printf(\"Still no segfault  %s\\n\",temp);\n</code></pre>\n\n<p>Now my question is: how can I go beyond the allocated space? Shouldn't I get segmentation fault?</p>\n"}, {"tags": ["c", "numbers", "division"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 6, "creation_date": 1507757796, "post_id": 46697931, "comment_id": 80343601, "body": "Are you sure you didn&#39;t mean <code>if (y == temp)</code>? (<code>==</code> instead of <code>=</code>)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507758098, "post_id": 46697931, "comment_id": 80343721, "body": "<code>=</code> is assignment, rather than <code>==</code> which is comparison. You say <code>temp = 0</code> so what you&#39;re really doing is <code>if (y=temp)</code> --&gt; <code>if(y=0)</code> --&gt; <code>if (0=0)</code> --&gt; <code>if(0)</code> which is false, so the <code>else</code> branch executes. And while magic numbers are generally frowned up, this case is an exception. Nothing gained in doing <code>int temp = 0;</code> and then <code>if (y == temp)</code> if that&#39;s your only use of temp. Might as well just do <code>if (y == 0)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1507758053, "post_id": 46697983, "comment_id": 80343705, "body": "0 translates to <code>false</code>, not <code>true</code>, which is why it isn&#39;t entering the if statement when temp is 0."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1507761383, "post_id": 46697983, "comment_id": 80344777, "body": "<code>temp</code> is unnecessary here, amd may have been part of the OPs attempt to fix the problem.  Worth noting perhaps that if you habitually use a literal zero and place it on the left-hand side, the compiler can catch the error:  i.e. <code>if( 0 == y )</code>, because <code>if( y = 0 )</code> will compile but is seldom correct, while <code>if( 0 = y )</code> will fail to compile."}, {"owner": {"reputation": 1, "user_id": 8761727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0b5b27ae7c3015b7bf05c35332b8f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ischys", "link": "https://stackoverflow.com/users/8761727/ischys"}, "edited": false, "score": 0, "creation_date": 1507793327, "post_id": 46697983, "comment_id": 80354470, "body": "This did the trick thank you I can&#39;t believe I missed that point."}], "tags": [], "owner": {"reputation": 38, "user_id": 6067716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e85998c1f290c2996917a073818484?s=128&d=identicon&r=PG&f=1", "display_name": "Joao P", "link": "https://stackoverflow.com/users/6067716/joao-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1507758224, "last_edit_date": 1507758224, "creation_date": 1507757973, "answer_id": 46697983, "question_id": 46697931, "link": "https://stackoverflow.com/questions/46697931/how-do-i-make-my-code-say-you-cant-divide-to-0/46697983#46697983", "title": "How do I make my code say &quot;You can&#39;t divide to 0&quot;", "body": "<p>when you do <code>y = temp</code> you are giving y the value of temp, in this case 0. In c that translates into a <code>false</code> logical value</p>\n\n<p>What you want to do is</p>\n\n<p><code>if (y == temp)</code></p>\n\n<p>the <code>==</code> operator tests the equality between the 2 variables </p>\n"}], "owner": {"reputation": 1, "user_id": 8761727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0b5b27ae7c3015b7bf05c35332b8f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ischys", "link": "https://stackoverflow.com/users/8761727/ischys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1507758462, "accepted_answer_id": 46697983, "answer_count": 1, "score": -1, "last_activity_date": 1507758224, "creation_date": 1507757724, "question_id": 46697931, "link": "https://stackoverflow.com/questions/46697931/how-do-i-make-my-code-say-you-cant-divide-to-0", "closed_reason": "Duplicate", "title": "How do I make my code say &quot;You can&#39;t divide to 0&quot;", "body": "<p>So, I was practicing functions loops etc. and I stuck on doing this.I am pretty beginner on programming but I search a lot which makes me learn real faster.\n(By the way I tried my code to check if the input from user is number or not. ) </p>\n\n<pre><code>printf(\"Define numbers.\\n\");\n        printf(\"Select: \");\n        scanf(\"%d\", &amp;x);\n        printf(\"Select: \");\n        scanf(\"%d\", &amp;y);\n        if (y = temp)\n        {\n            printf(\"Division of something by 0 is undefined.\\n\");\n        }\n        else\n        {\n            printf(\"Division of %d and %d is %d\\n\", x, y, div(x, y));\n        }\n</code></pre>\n\n<p>So I declared temp = 0 I thought it would do the trick but it didnt.</p>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1507757699, "post_id": 46697901, "comment_id": 80343558, "body": "You must pass the address of <code>head</code>, (e.g. <code>struct node **head</code>) and <code>initializeHead(&amp;head, &#39;a&#39;);</code>"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1507757724, "post_id": 46697901, "comment_id": 80343567, "body": "C11 draft standard n1570: <i>4 An argument may be an expression of any complete object type. In preparing for the call to a function, the arguments are evaluated, and each parameter is assigned the value of the corresponding argument. 93) A function may change the values of its parameters, but these changes cannot affect the values of the arguments. On the other hand, it is possible to pass a pointer to an object, and the function may change the value of the object pointed to.</i>"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1507757839, "post_id": 46697901, "comment_id": 80343615, "body": "You know <code>initializeHead()</code> is a mis-nomer? Looks more like a broken <code>insertNode()</code> which only works for empty lists, at least after fixing."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1507758367, "post_id": 46697901, "comment_id": 80343832, "body": "Why do you want initializeHead to be a void function? It seems more logical for it to return its result as a return value."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1507758484, "post_id": 46697901, "comment_id": 80343866, "body": "@Nick Lordi  &quot;I am a C# programmer professionally&#39; - I have no words to express my surprise.:)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507758664, "post_id": 46697901, "comment_id": 80343942, "body": "Have anyone already noted that there are no methods in C?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1507758860, "post_id": 46697901, "comment_id": 80344011, "body": "<code>void f(int i) {i = 6;}</code> - how come when I run <code>int i = 5; f(i);</code> then i is still 5?"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1507764505, "last_edit_date": 1507764505, "creation_date": 1507763810, "answer_id": 46698951, "question_id": 46697901, "link": "https://stackoverflow.com/questions/46697901/linked-list-initialize-head-with-function/46698951#46698951", "title": "Linked list: Initialize Head with function?", "body": "<p>The term method is not a normative term in C and C++. Use the term function instead (or member function in C++).</p>\n\n<p>According to the C Standard the function main without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>In fact the head is already initialized in the declaration</p>\n\n<pre><code>struct node * head = NULL;\n</code></pre>\n\n<p>You can check for example whether a list is empty by using comparison</p>\n\n<pre><code>if ( head == NULL ) { /* ...*/ }\n</code></pre>\n\n<p>What you are trying to do using the function is to append a value to a list. So the function name <code>initializeHead</code> just confuses readers.</p>\n\n<p>You can use instead either <code>push</code>, or <code>push_front</code>  or some other suitable name.</p>\n\n<p>The function shall be declared before its usage.</p>\n\n<p>Arguments are passed to functions by values in C. The term passing by reference means in C to pass a pointer to the original object. Otherwise a function will deal with a copy of the original object.</p>\n\n<p>You can imagine your function definition and its call the following way (for clarity I renamed the parameter name)</p>\n\n<pre><code>initializeHead(head, 'a');\n\n//...\n\nvoid initializeHead( /*struct node * list, char vertexCategory */ )\n{\n    struct node *list = head;\n    char vertexCategory = 'a';\n    //...\n</code></pre>\n\n<p>That is function parameters are its local variables that are initialized by expressions used as arguments. So any changes of a parameter do not influence on the original argument. As it was mentioned above if you want to change an original object you have to pass it by reference that is indirectly through a pointer.</p>\n\n<p>Also you should free all allocated memory by the list when the list is not used any more in the program to escape memory leaks.</p>\n\n<p>The function should not issue a message . It is better if it returns a code of success or failure.</p>\n\n<p>For example a function that pushes a value in a singly-linked list can look the following way</p>\n\n<pre><code>int push_front( struct node **head, char value )\n{\n    struct node *new_node = malloc( sizeof( struct node ) );\n    int success = new_node != NULL;\n\n    if ( success )\n    {\n        new_node-&gt;value = value;\n        new_node-&gt;next = *head;\n        *head = new_node;\n    }\n\n    return success;\n}\n</code></pre>\n\n<p>Pay attention to the first parameter declaration <code>struct node **head</code>. As the original head of the list has to be changed in the function then it is passed to the function by reference that is by using a pointer to it.</p>\n\n<p>The function can be called like</p>\n\n<pre><code>push_front( &amp;head, 'a' );\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6454589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315e61dd366b3642c3dac3ff833e1582?s=128&d=identicon&r=PG", "display_name": "Nick Lordi", "link": "https://stackoverflow.com/users/6454589/nick-lordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2308, "favorite_count": 0, "accepted_answer_id": 46698951, "answer_count": 1, "score": 3, "last_activity_date": 1507828976, "creation_date": 1507757576, "last_edit_date": 1507828976, "question_id": 46697901, "link": "https://stackoverflow.com/questions/46697901/linked-list-initialize-head-with-function", "title": "Linked list: Initialize Head with function?", "body": "<p>I am a C# programmer professionally, but trying to re-learn C. I have been writing a simple linked list in C. I have gotten it working fine when the head-node is defined in main(). But now I want to try and initialize the head-node in a function \"initializeHead()\".</p>\n\n<p>Here is the Node definition and Main() function:</p>\n\n<pre><code>struct node\n{\n    char value;\n    struct node * next;\n};\n\nint main()\n    {\n    struct node * head = NULL;\n\n    initializeHead(head, 'a');\n    return 0;\n    }\n</code></pre>\n\n<p>Function that initializes head node:</p>\n\n<pre><code>    void initializeHead(struct node * head, char vertexCategory)\n{\n    if (head == NULL)\n    {\n        head = malloc(sizeof(struct node));\n        head-&gt;value = vertexCategory;\n        head-&gt;next = NULL;\n    }\n    else\n    {\n        printf(\"\\nError: Head already initialized!\");\n    }\n}\n</code></pre>\n\n<p>...After calling initializeHead(), it doesn't seem like anything has happened because head is still NULL.</p>\n\n<p>How can this be accomplished?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507755838, "post_id": 46697504, "comment_id": 80342763, "body": "<code>int calcYear (int year1);</code> &lt;- remove the semicolon (in the second time it is  appearing)"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 2, "creation_date": 1507755907, "post_id": 46697504, "comment_id": 80342794, "body": "Are you sure you want to define a <code>calcYear</code> function inside the <code>main</code> body?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1507757875, "post_id": 46697504, "comment_id": 80343628, "body": "If that was copied <i>exactly</i> from a textbook, then that texbook has serious problems.  Otherwise, you didn&#39;t transcribe it correctly.  Go back over your code and the code in the book line by line.  If it turns out you did transcribe it accurately, then I&#39;d recommend looking for a new textbook."}, {"owner": {"reputation": 35, "user_id": 4049363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-CP42XtvHw9Q/AAAAAAAAAAI/AAAAAAAAACQ/1-UNtIFkb4E/photo.jpg?sz=128", "display_name": "Christopher Pettit", "link": "https://stackoverflow.com/users/4049363/christopher-pettit"}, "edited": false, "score": 0, "creation_date": 1507759659, "post_id": 46697504, "comment_id": 80344264, "body": "I don&#39;t really understand the down-vote from whoever did it.  I&#39;m glad you all have a million points and sit up there on your high horses.  If there is a forum or somewhere else I should go to ask my questions then please point me in that direction.  Otherwise, I went through the steps of putting this question in the right &quot;format&quot; and spent at least 30 mins trying to look at documentation and fix the issue myself.  If this grip doesn&#39;t apply to you thanks for your feedback."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1507809805, "post_id": 46697504, "comment_id": 80364532, "body": "@ChristopherPettit: not the downvoter, but you lose a point with me for posting a link to a picture of the error, rather than including it in the text of your question.  Clicking random links isn\u2019t safe, and some may be blocked if we\u2019re reading from work."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1507755981, "last_edit_date": 1507755981, "creation_date": 1507755930, "answer_id": 46697548, "question_id": 46697504, "link": "https://stackoverflow.com/questions/46697504/error-in-running-c-program-i-found-in-a-text-book-using-xcode/46697548#46697548", "title": "Error in running C Program I found in a text book using Xcode.", "body": "<p>The curly braces are misplaced.\nThereby, function <code>calcYear</code> is not defined as it is hidden in <code>main</code>.</p>\n\n<p>Without interpreting the meaning of your program, just to fix the linker error which says that there is no definition of <code>calcYear</code>, the code could look like:</p>\n\n<pre><code>    return 0;\n}  // this one inserted\n\n    // This function to get the future year\n    int calcYear (int year1)   // ; this semicolon was deleted\n\n {\n    return (year1+TARGET_AGE);\n }\n\n//}  this one deleted\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1507810735, "creation_date": 1507810735, "answer_id": 46709440, "question_id": 46697504, "link": "https://stackoverflow.com/questions/46697504/error-in-running-c-program-i-found-in-a-text-book-using-xcode/46709440#46709440", "title": "Error in running C Program I found in a text book using Xcode.", "body": "<p>In your <code>main</code> function:</p>\n\n<pre><code>int calcYear (int year1);\n\n{\n   return (year1+TARGET_AGE);\n}\n</code></pre>\n\n<p>Because of the semicolon, the compiler sees <code>int calcYear (int year1)</code> as another <em>declaration</em> (like the one before <code>main</code>), rather than the beginning of a function <em>definition</em>.  The next three lines are interpreted as a \u201cnaked\u201d block within <code>main</code>.  Thus, <code>calcYear</code> is never properly defined, so the linker complains when it tries to build the binary.</p>\n\n<p>Without the semicolon, the compiler would have interpreted it as a function <em>definition</em>, but C doesn\u2019t allow you to define a function within another function; the compiler would have complained with a different error.</p>\n\n<p>Move those lines outside the body of <code>main</code>, replace them with <code>return 0;</code>, and remove the semicolon after the function declarator:</p>\n\n<pre><code>  return 0;\n}\n\nint calcYear (int year1)\n{\n  return year1 + TARGET_AGE;\n}\n</code></pre>\n\n<p>Like I said in my comment, if yours was an accurate transcription of the code in that textbook, then you need to find a different textbook.</p>\n"}], "owner": {"reputation": 35, "user_id": 4049363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-CP42XtvHw9Q/AAAAAAAAAAI/AAAAAAAAACQ/1-UNtIFkb4E/photo.jpg?sz=128", "display_name": "Christopher Pettit", "link": "https://stackoverflow.com/users/4049363/christopher-pettit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 46697548, "answer_count": 2, "score": -1, "last_activity_date": 1507810735, "creation_date": 1507755743, "question_id": 46697504, "link": "https://stackoverflow.com/questions/46697504/error-in-running-c-program-i-found-in-a-text-book-using-xcode", "title": "Error in running C Program I found in a text book using Xcode.", "body": "<p>I have literally written this code exactly as it is in the textbook I am using to learn C.  I'm not sure what these errors mean or where to begin.  Please help.  I am using Xcode.  </p>\n\n<pre><code>//  Specific Age Calculator\n//\n//  Created by Christopher Pettit on 10/11/17.\n//  Copyright \u00a9 2017 Christopher Pettit. All rights reserved.\n\n#include &lt;stdio.h&gt;\n#define TARGET_AGE 88\n\nint year1, year2;\n\nint calcYear(int year1);\n\n\nint main(void)\n{\n    // Ask the user for their birth year\n    printf(\"What year were you born?\\n\");\n    printf(\"Enter as a 4-digit year (YYYY) \" );\n    scanf(\" %d\", &amp;year1);\n\n    // Calculate the future year and display it\n    year2 = calcYear(year1);\n\n    printf(\"Since you were born in %d, you will be %d in %d. \", \n    year1,TARGET_AGE,year2);\n\n    return 0;\n\n    // This function to get the future year\n    int calcYear (int year1);\n\n {\n    return (year1+TARGET_AGE);\n }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eY5Kv.png\" rel=\"nofollow noreferrer\">This is the error that Xcode produces</a></p>\n"}, {"tags": ["c", "split", "valgrind"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507755460, "post_id": 46697273, "comment_id": 80342571, "body": "You declare <code>cant_corte[]</code> without initializing it, then you give it values only inside an <code>if</code>. The error is telling you that <code>cant_corte[i]</code> might not have a value at the point you&#39;re using it."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1507755533, "post_id": 46697273, "comment_id": 80342619, "body": "@LeeDanielCrocker <code>size_t cant_corte[cant];</code> is initialized as a VLA, isn&#39;t it?"}, {"owner": {"reputation": 19, "user_id": 7385276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1591245897558151/picture?type=large", "display_name": "Martin Curzel", "link": "https://stackoverflow.com/users/7385276/martin-curzel"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507755903, "post_id": 46697273, "comment_id": 80342791, "body": "@LeeDanielCrocker that gives me the more than a 10000000 errors valgrind displays me? and if it&#39;s so, how can i solve it? ty"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507755908, "post_id": 46697273, "comment_id": 80342795, "body": "<code>strncpy(strv[i], str + corte[i], cant_corte[i] - 1);     strcat(strv[i], &quot;\\0&quot;);</code> : <code>strcar</code> requests a string terminated with <code>&#39;\\0&#39;</code>. (Change it to like <code>memcpy(dest, src, length); dest[length] = &#39;\\0&#39;;</code>)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507756298, "post_id": 46697273, "comment_id": 80342966, "body": "Why would your VLA be initialized? Do it yourself, either with a loop or with <code>memset()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 0, "last_activity_date": 1507777237, "creation_date": 1507777237, "answer_id": 46700718, "question_id": 46697273, "link": "https://stackoverflow.com/questions/46697273/invalid-write-of-size-1/46700718#46700718", "title": "Invalid write of size 1", "body": "<p>you end up with <code>cant_corte[i]</code> is <code>0</code>, and then you <code>strv[i][cant_corte[i] -1] = '\\0';</code></p>\n\n<p>so <code>strv[i][-1]</code> is not a valid address to write.</p>\n\n<p>i do encourage you to learn how to use <code>valgrind</code> with <code>gdb</code> as explained at <a href=\"http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver-simple\" rel=\"nofollow noreferrer\">http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver-simple</a></p>\n"}], "owner": {"reputation": 19, "user_id": 7385276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1591245897558151/picture?type=large", "display_name": "Martin Curzel", "link": "https://stackoverflow.com/users/7385276/martin-curzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5645, "favorite_count": 0, "accepted_answer_id": 46700718, "answer_count": 1, "score": -1, "last_activity_date": 1507777237, "creation_date": 1507754829, "last_edit_date": 1507759738, "question_id": 46697273, "link": "https://stackoverflow.com/questions/46697273/invalid-write-of-size-1", "title": "Invalid write of size 1", "body": "<p>I've fixed most of my split function that splits a original string according to a parameter into multiple ones saved in an array of strings: the program returns the values that i wanted but valgrind hits me with the following:</p>\n\n<pre><code>abc,defg\npasa\npasa\npasa\npasa\npasa\npasa\npasa\npasa\npasa\n==2938== Conditional jump or move depends on uninitialised value(s)\n==2938==    at 0x4C2DB3C: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2938==    by 0x400912: split (strutil.c:31)\n==2938==    by 0x400A06: main (strutil.c:45)\n==2938==  Uninitialised value was created by a stack allocation\n==2938==    at 0x400723: split (strutil.c:9)\n==2938== \n==2938== Conditional jump or move depends on uninitialised value(s)\n==2938==    at 0x4C31577: __strncpy_sse2_unaligned (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2938==    by 0x40097F: split (strutil.c:34)\n==2938==    by 0x400A06: main (strutil.c:45)\n==2938==  Uninitialised value was created by a stack allocation\n==2938==    at 0x400723: split (strutil.c:9)\n==2938== \n==2938== Conditional jump or move depends on uninitialised value(s)\n==2938==    at 0x4C31631: __strncpy_sse2_unaligned (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2938==    by 0x40097F: split (strutil.c:34)\n==2938==    by 0x400A06: main (strutil.c:45)\n==2938==  Uninitialised value was created by a stack allocation\n==2938==    at 0x400723: split (strutil.c:9)\n==2938== \n==2938== Conditional jump or move depends on uninitialised value(s)\n==2938==    at 0x4C3164F: __strncpy_sse2_unaligned (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2938==    by 0x40097F: split (strutil.c:34)\n==2938==    by 0x400A06: main (strutil.c:45)\n==2938==  Uninitialised value was created by a stack allocation\n==2938==    at 0x400723: split (strutil.c:9)\n==2938== \n==2938== \n==2938== More than 10000000 total errors detected.  I'm not reporting any more.\n==2938== Final error counts will be inaccurate.  Go fix your program!\n==2938== Rerun with --error-limit=no to disable this cutoff.  Note\n==2938== that errors may occur in your program without prior warning from\n==2938== Valgrind, because errors are no longer being displayed.\n==2938== \nabc\ndefg\n</code></pre>\n\n<p>And my code is:</p>\n\n<pre><code>#include \"strutil.h\"\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar** split(const char* str, char sep){\nsize_t cant = 2;\nsize_t i = 0;\nfor(i = 0; i &lt; strlen(str); i++){\n    if(str[i] == sep)\n        cant ++;\n}\nsize_t corte[cant];\ncorte[0] = 0;\nsize_t j = 1;\nsize_t cant_corte[cant];\nfor(i = 0; i &lt; cant; i++)\n    cant_corte[i] = 0;\nfor(i = 0; i &lt;= strlen(str); i++){\n    if(str[i] == sep || str[i] == '\\0'){\n        corte[j] = i + 1;\n        cant_corte[j - 1] = corte[j] - corte[j - 1];\n        j++;\n    }\n}\n\nchar** strv = malloc(sizeof(char*) * cant);\n    if (strv == NULL)return NULL;\nfor(i=0; i &lt; cant; i++){\n    strv[i] = malloc(sizeof(char) * cant_corte[i]); //line 30\n    if (strv[i] == NULL)return NULL;\n    memcpy(strv[i], str + corte[i], cant_corte[i]);\n    strv[i][cant_corte[i] -1] = '\\0'; //line 33\n}\nstrv[cant - 1] = NULL;\nreturn strv;\n}\n\nint main(){\nchar* eje = \"abc,defg\";\nprintf(\"%s\\n\", eje);\nchar r = ',';\nchar** prueba = split(eje, r);\nprintf(\"%s\\n\", prueba[0]);\nprintf(\"%s\\n\", prueba[1]);\ngetchar();\nreturn 0;\n}\n</code></pre>\n\n<p>I dont know where the problem is because it looks like it the same value thats  producing the problem but I can't seem to founf it</p>\n\n<p>EDIT i edited the code and now valgrind displays me: </p>\n\n<pre><code>==3751== Invalid write of size 1\n==3751==    at 0x4009DB: split (strutil.c:33)\n==3751==    by 0x400A64: main (strutil.c:43)\n==3751==  Address 0x520457f is 1 bytes before a block of size 0 alloc'd\n==3751==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3751==    by 0x400949: split (strutil.c:30)\n==3751==    by 0x400A64: main (strutil.c:43)\n</code></pre>\n\n<p>I've tried adding a +1 to the malloc on line 30 but instead says ...block of size 1 aloc'd... I've no idea and from what i researched its supposed to be that. thanks in advance</p>\n"}, {"tags": ["c", "multithreading", "posix", "semaphore"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1507755586, "post_id": 46697225, "comment_id": 80342644, "body": "<code>goodToCross.signal(&amp;sem)</code> -- This code does not appear to be C.  Please tag the language you are actually using, or else use the language you have actually tagged."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507756041, "post_id": 46697225, "comment_id": 80342855, "body": "With that said, the basic idea appears sound.  A thread must decrement the semaphore to get onto the bridge, and such a thread then increments it again when it clears the bridge.  What, then, is the nature of the problem?  Are you just uncertain about how to call semaphore functions and / or which ones to call?"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507756242, "post_id": 46697225, "comment_id": 80342935, "body": "You only need a single semaphore for this example. It protects the bridge and its starting count represents how many vehicles may be on the bridge at any one time (just 1 in this case)."}, {"owner": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507756544, "post_id": 46697225, "comment_id": 80343066, "body": "@JohnBollinger Sorry - new to C, sort of learning it alongside Operating Systems here as I go through the book. I guess, considering that&#39;s not even c I&#39;m unsure of how to properly implement my entering/exiting of the bridge. I guess that&#39;s the issue I&#39;m having. I see bnaecker&#39;s comment that I only actually need 1 semaphore. So if I get rid of the GoodToCross I&#39;m sort of just lost... :o"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507757128, "post_id": 46697225, "comment_id": 80343292, "body": "Semaphores are designed to protect a shared resource, limiting how &quot;much&quot; of it can be used at a time. In this case, the shared resource is the bridge, and one car can be on it at a time. See @bhow&#39;s answer, which helps explain this. You could also use a mutex, rather than a semaphore, if that helps explain the usage."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1507762331, "post_id": 46697225, "comment_id": 80345040, "body": "Be careful that you check sem_wait()&#39;s return value of EINTR. If that happens you need to go back to waiting...."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "edited": false, "score": 0, "creation_date": 1507757111, "post_id": 46697753, "comment_id": 80343281, "body": "So to follow up, in the <code>enter_bridge</code> we can just call <code>sem.wait()</code> instead of my <code>GoodToCross</code> and how do I go about signaling that the vehicle has left in the exit_bridge?"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "reply_to_user": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "edited": false, "score": 0, "creation_date": 1507757189, "post_id": 46697753, "comment_id": 80343327, "body": "@NikkiNelson That&#39;s correct, except that as pointed out in one of the comments on your question, <code>sem.wait()</code> is not valid C code. Call <code>sem_wait()</code> inside <code>enter_bridge()</code> and <code>sem_post()</code> inside <code>exit_bridge()</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507757404, "post_id": 46697753, "comment_id": 80343427, "body": "... and, of course, pass the appropriate arguments to the semaphore functions.  I point this out lest the OP be confused about the &quot;sem&quot; that is a prefix of the names of POSIX semaphore functions, relative to the distinct &quot;sem&quot; that is the name of a variable in his program."}, {"owner": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507757911, "post_id": 46697753, "comment_id": 80343646, "body": "@JohnBollinger Sorry, are you saying I&#39;m passing the wrong arguments?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "edited": false, "score": 0, "creation_date": 1507758780, "post_id": 46697753, "comment_id": 80343987, "body": "No, @NikkiNelson.  I am speaking specifically to bnaecker&#39;s correction of &quot;sem.wait()` to <code>sem_wait()</code>.  In particular, I&#39;m pointing out that if the former is interpreted as pseudocode for calling a function to decrement the semaphore, of type <code>sem_t</code>, identified by &quot;sem&quot;, then the latter is imperfectly analogous.  A closer analogue would be <code>sem_wait(&amp;sem)</code>."}, {"owner": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "edited": false, "score": 0, "creation_date": 1507761534, "post_id": 46697753, "comment_id": 80344816, "body": "I was able to correct the enter and exit with the correct c syntax: <code>sem_wait(&amp;sem)</code> and <code>sem_post(&amp;sem)</code> -- my output (<a href=\"http://prntscr.com/gw9xgs\" rel=\"nofollow noreferrer\">prntscr.com/gw9xgs</a>) isn&#39;t as I expected so I guess I have other issues to look into"}], "tags": [], "owner": {"reputation": 98, "user_id": 6883978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6b26c6159d03bbae08e2d6ebd2878?s=128&d=identicon&r=PG&f=1", "display_name": "bhow", "link": "https://stackoverflow.com/users/6883978/bhow"}, "is_accepted": true, "score": 2, "last_activity_date": 1507757468, "last_edit_date": 1507757468, "creation_date": 1507756847, "answer_id": 46697753, "question_id": 46697225, "link": "https://stackoverflow.com/questions/46697225/how-do-i-use-synchronization-in-posix-semaphores/46697753#46697753", "title": "How do I use Synchronization in POSIX semaphores?", "body": "<p>Sorry, can't add comments at my reputation.</p>\n\n<p>Like what @bnaecker has said, you only need one semaphore. This is to keep track of whether or not the bridge is at max occupancy. Assuming only one car can be on the bridge at a time, when a car waits on the bridge semaphore for the first time, it will decrement the counter and proceed across the bridge. After that, while the car is still on the bridge, any other car trying to cross will also call wait. This time, each car will hang (or busy wait) until the bridge semaphore is incremented again (when the car currently on the bridge exits). </p>\n\n<p>At that time, another car will get out of waiting and decrement the counter.</p>\n\n<p>Edit: I'm unsure of the implementation of semaphore in c, so I'll just leave this at a high level description of the process.</p>\n"}], "owner": {"reputation": 83, "user_id": 8242803, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/da131b9215a09e7c916ca12ea2fc3597?s=128&d=identicon&r=PG&f=1", "display_name": "NikkiNelson", "link": "https://stackoverflow.com/users/8242803/nikkinelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 46697753, "answer_count": 1, "score": 1, "last_activity_date": 1565125813, "creation_date": 1507754628, "last_edit_date": 1565125813, "question_id": 46697225, "link": "https://stackoverflow.com/questions/46697225/how-do-i-use-synchronization-in-posix-semaphores", "title": "How do I use Synchronization in POSIX semaphores?", "body": "<p>I have gotten to chapter 6 (Deadlocks) in <em>Operating System Concepts</em> by Silbersechatz, Galvin and Gagne. I'm trying to make a program that creates vehicles as separate threads heading north or south across a one way bridge. If there's a vehicle on the bridge, that vehicle/thread will sleep (like traveling across the bridge). I'm struggling a bit with when the car is good to go (or cross the bridge).</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;semaphore.h&gt;\n\n#define MAX_WAIT 3 // how many seconds each car will wait at most\n\ntypedef struct _VEHICLE {\n    pthread_t t;\n    int isNorth;\n    int idx;\n    int waitfor;\n} VEHICLE;\n\nsem_t sem; // bridge\nsem_t goodToCross = 1;\n\nvoid enter_bridge(char* direction, int idx) {\n    printf(\"1 - %s vehicle %d is about to enter the bridge\\n\", direction, idx);\n    goodToCross.wait(&amp;sem);\n    printf(\"2 - %s vehicle %d has entered the bridge\\n\", direction, idx);\n}\n\nvoid exit_bridge(char* direction, int idx) {\n  printf(\"5 - %s vehicle %d has left the bridge\\n\", direction, idx);\n\n    goodToCross.signal(&amp;sem);\n}\n\nvoid* pass_bridge(void* param) {\n    VEHICLE* f = (VEHICLE*) param;\n    char* direction = f-&gt;isNorth ? \"North\" : \"South\";\n\n    enter_bridge(direction, f-&gt;idx);\n    printf(\"3 - %s vehicle %d will pass the bridge in %d seconds\\n\", direction, f-&gt;idx, f-&gt;waitfor);\n    sleep(f-&gt;waitfor);\n    printf(\"4 - %s vehicle %d has passed the bridge in %d seconds\\n\", direction, f-&gt;idx);\n\n    exit_bridge(direction, f-&gt;idx);\n}\n\nint main(int argc, char** argv) {\n    int i;\n    VEHICLE* v_north;\n    VEHICLE* v_south;\n\n    int nNorthVehicles, nSouthVehicles;\n\n    if (argc != 3) {\n      printf(\"Usage: ./main (Num North Vehicles) (Num South Vehicles)\\n\");\n      return 1;\n    }\n\n    nNorthVehicles = atoi(argv[1]);\n    nSouthVehicles = atoi(argv[2]);\n\n    if (nNorthVehicles &lt;= 0 || nSouthVehicles &lt;= 0) {\n      printf(\"Error number of vehicles given is not a valid number\\n\");\n      return 1;\n    }\n\n    v_north = (VEHICLE*)malloc(sizeof(VEHICLE) * nNorthVehicles);\n    v_south = (VEHICLE*)malloc(sizeof(VEHICLE) * nSouthVehicles);\n\n    printf(\"we have %d vehicles from the north and %d vehicles the south\\n\", nNorthVehicles, nSouthVehicles);\n\n    sem_init(&amp;sem, 0, 1);\n\n    for (i = 0; i &lt; nNorthVehicles; ++i) {\n      v_north[i].isNorth = 1;\n      v_north[i].idx = 1;\n      v_north[i].waitfor = rand() % MAX_WAIT;\n      pthread_create(&amp;(v_north[i].t), 0, pass_bridge, &amp;(v_north[i]));\n    }\n\n    for (i = 0; i &lt; nSouthVehicles; ++i) {\n      v_south[i].isNorth = 0;\n      v_south[i].idx = 1;\n      v_south[i].waitfor = rand() % MAX_WAIT;\n      pthread_create(&amp;(v_south[i].t), 0, pass_bridge, &amp;(v_south[i]));\n    }\n\n    for (i = 0; i &lt; nNorthVehicles; ++i) {\n      pthread_join(v_north[i].t, NULL);\n    }\n\n    for (i = 0; i &lt; nSouthVehicles; i++) {\n      pthread_join(v_south[i].t, NULL);\n    }\n\n    sem_destroy(&amp;sem);\n\n    printf(\"All vehicles have passed\\n\");\n\n    free(v_north);\n    free(v_south);\n\n    return 0;\n}\n</code></pre>\n\n<p>My issues are definitely in/with the <code>goodToCross</code> semaphore - I can't figure out how to correctly define it.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "tokenize"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1507754272, "post_id": 46697050, "comment_id": 80341995, "body": "hi ben, please don&#39;t take it the wrong way, but your code is a hot mess :P you need to break things down into bits of functions so that you (and others) can follow it easily."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1507754306, "post_id": 46697050, "comment_id": 80342017, "body": "You want to store a 2D array of chars, but <code>const char *word_tracker[MAX_LENGTH][MAX_WORDS];</code> is a <i>pointer</i> to a 2D array of  chars, remove the <code>*</code> in the declaration, and notice that you need <code>const char word_tracker[MAX_WORDS][MAX_LENGTH];</code> instead of <code>const char word_tracker[MAX_LENGTH][MAX_WORDS];</code>, finaly, <code>const</code> makes your array not writeable (read only), remove the <code>const</code> part :)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1507754801, "post_id": 46697050, "comment_id": 80342268, "body": "Yes and no, @KeineLust.  The OP&#39;s original declaration of <code>word_tracker</code> is not a pointer to a 2D array, but rather a 2D array of pointers.  A pointer to a 2D array would be <code>const char (*word_tracker)[MAX_LENGTH][MAX_WORDS]</code> (note the added parentheses)."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1507754802, "post_id": 46697050, "comment_id": 80342269, "body": "@KeineLust It seems to me that the OP is trying to create a 2D array of <i>strings</i>, where word[i][j] is the string number j of length i."}, {"owner": {"reputation": 59, "user_id": 7055593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97358f7f8ad81f983853302f8d55fe5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/7055593/ben"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1507754845, "post_id": 46697050, "comment_id": 80342295, "body": "@AhmedMasud none taken, are you asking me to split my main() into actual functions, or simply better lay it out within main?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507754887, "post_id": 46697050, "comment_id": 80342312, "body": "@JohnBollinger, you are right!"}, {"owner": {"reputation": 59, "user_id": 7055593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97358f7f8ad81f983853302f8d55fe5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/7055593/ben"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1507754930, "post_id": 46697050, "comment_id": 80342333, "body": "@Bob__ That is correct"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 1, "creation_date": 1507755104, "post_id": 46697050, "comment_id": 80342423, "body": "I think splitting the code up into functions is a good idea. give it a go, it may even help you solve the problem :P perhaps even come up with a better design for it. if you&#39;re struggling after a good attempt I will give you a walk through on a reasonable approach to this problem :P"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1507755157, "post_id": 46697050, "comment_id": 80342441, "body": "Consider using <a href=\"http://en.cppreference.com/w/c/string/byte/strcspn\" rel=\"nofollow noreferrer\"><code>strcspn</code></a> (which returns the length of initial substring) instead of <code>strtok</code>."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1507757447, "post_id": 46697050, "comment_id": 80343438, "body": "1. Run inside a debugger (gdb)  2. Run with sanitizer options turned on"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1507757288, "post_id": 46697391, "comment_id": 80343363, "body": "<code>const char word_tracker[MAX_WORDS][MAX_LENGTH]; strncpy(word_tracker[someIndexWithSomeMeaningUpToMAX_WORDS], cur, MAX_LENGTH);</code> ---&gt; &quot;passing argument 1 of &#39;strncpy&#39; discards &#39;const&#39; qualifier from pointer target type [-Wdiscarded-qualifiers]&quot;"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1507757687, "last_edit_date": 1507757687, "creation_date": 1507755282, "answer_id": 46697391, "question_id": 46697050, "link": "https://stackoverflow.com/questions/46697050/array-of-tokenized-string-literals-in-c/46697391#46697391", "title": "Array of tokenized string literals in C", "body": "<p>Your result array currently is <code>const char *word_tracker[MAX_LENGTH][MAX_WORDS]</code>, which is a 2D-array of <em>pointers</em>.\nYou could either (a) use a 1D-array of pointers and allocate memory then for each word found, or (b) use a 2D-array of characters and <code>strcpy</code> each word at the proper position.</p>\n\n<p>So (a) would look like...</p>\n\n<pre><code>const char *word_tracker[MAX_WORDS];\n...\nword_tracker[someIndexWithSomeMeaningUpToMAX_WORDS] = strdup(cur);\n</code></pre>\n\n<p>And (b) would look like</p>\n\n<pre><code>char word_tracker[MAX_WORDS][MAX_LENGTH];\n...\nstrncpy(word_tracker[someIndexWithSomeMeaningUpToMAX_WORDS], cur, MAX_LENGTH);\nword_tracker[someIndexWithSomeMeaningUpToMAX_WORDS][MAX_LENGTH-1] = '\\0'\n</code></pre>\n\n<p>Note that in (b), <code>MAX_LENGTH</code> indicates the maximum length of a string (i.e. a single word) and is therefore the second index. <code>strncpy</code> makes sure not to exceed the size reserved for a word.</p>\n"}], "owner": {"reputation": 59, "user_id": 7055593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97358f7f8ad81f983853302f8d55fe5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/7055593/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 46697391, "answer_count": 1, "score": 2, "last_activity_date": 1507799776, "creation_date": 1507753980, "question_id": 46697050, "link": "https://stackoverflow.com/questions/46697050/array-of-tokenized-string-literals-in-c", "title": "Array of tokenized string literals in C", "body": "<p>I'm writing a C program to tokenize an input text file and track the frequency of word length, alongside tracking and storing the corresponding words themselves. I have the word count working fine, but can't get my word_tracker array to store the strings correctly: </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#define MAX_LENGTH 34\n#define MAX_WORDS 750\n\nint main(int argc, char *argv[]){ \n\n    FILE *fp; //input file\n    const char *cur; //stores current word as string literal\n    char words[MAX_LENGTH*MAX_WORDS]; //stores all words from text file\n    char file_name[100]; //stores file name\n    int word_count[MAX_LENGTH] = {0}; //array to store frequency of words based on length\n    const char *word_tracker[MAX_LENGTH][MAX_WORDS]; //array to store string literals of each word, indexed by char count and \n    int char_count; //current word's char count\n\n    printf(\"Enter a file name: \");\n    scanf(\"%s\", file_name);\n    fp = fopen(file_name, \"r\"); \n\n    if((fp==NULL)){\n        printf(\"Failure: missing or unopenable file\");\n        return -1; \n    }else{\n        while(fgets(words, sizeof(words), fp)){\n            cur= strtok(words, \" -.,\\b\\t\\n\"); //first word of line\n            char_count = strlen(cur);\n            word_count[char_count-1] = word_count[char_count-1]+1; //increment frequency of specific word length\n            word_tracker[char_count-1][word_count[char_count-1]-1] = cur; //store string into corresponding array index location\n\n            /*test printing*/\n            printf(\"%d:\", char_count-1); \n            printf(\"%s \", word_tracker[char_count-1][(word_count[char_count-1])-1]); \n\n            while(cur){\n                    cur = strtok(NULL, \" -.,\\b\\t\\n\"); //next word\n                    if(cur){\n                        char_count = strlen(cur);\n                        word_count[char_count-1] = word_count[char_count-1]+1; //increment frequency of specific word length\n                        word_tracker[char_count-1][word_count[char_count-1]-1] = cur; //store string into corresponding array index location\n\n                        /*test printing*/\n                        printf(\"%d:\", char_count-1); //test print\n                        printf(\"%s \", word_tracker[char_count-1][(word_count[char_count-1])-1]); //test print\n\n                    }\n                }\n            }\n        }\n//Testing word_tracker: (This doesn't work)\n    printf(\"\\n\\n%s \\n\", word_tracker[0][0]);\n    printf(\"\\n%s \\n\", word_tracker[1][0]);\n    printf(\"%s \\n\", word_tracker[2][0]);\n    printf(\"%s \\n\", word_tracker[3][0]);\n    printf(\"%s \\n\", word_tracker[4][0]);\n    printf(\"%s \\n\", word_tracker[5][0]);\n\n    return 0;\n}\n</code></pre>\n\n<p>The \"interior\" tests (within the tokenizing loop) work well, the correct string and length are printed. However, the print tests at the end of main print seemingly random strings, relative to what the input text file says they should input. I have three theories on what I am doing wrong: </p>\n\n<p>1) My indexing is wrong</p>\n\n<p>2) My understand of how to populate and use char* arrays is incorrect</p>\n\n<p>3) My tokenizing loop is incorrect (does cur not equal \"the isolated string\"?)</p>\n\n<p>I've noticed that the tests at the end of main display variants of whatever is written on the final line of the input file, so I think that my tokenizing loop is likely wrong. Any guidance is greatly appreciated, thank you!</p>\n"}, {"tags": ["c", "unbuffered-output"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1507754301, "post_id": 46697023, "comment_id": 80342014, "body": "Are you looking for <code>sprintf</code>?  Generate the string with <code>sprintf</code>, then write it with <code>write</code>."}, {"owner": {"reputation": 35, "user_id": 5181470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ba3972efecfa490e65cc05fe4b432b?s=128&d=identicon&r=PG&f=1", "display_name": "Grugnas", "link": "https://stackoverflow.com/users/5181470/grugnas"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1507757361, "post_id": 46697023, "comment_id": 80343404, "body": "looks like values written after sprintf are compromised because they don&#39;t correspond to the length of the strings from the standard input."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1507758110, "post_id": 46697023, "comment_id": 80343723, "body": "<code>if ( write(fd, &amp;nRead, 1) &lt; 0 )</code> what do you intend to write here? A character? (nRead is an int)"}, {"owner": {"reputation": 35, "user_id": 5181470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ba3972efecfa490e65cc05fe4b432b?s=128&d=identicon&r=PG&f=1", "display_name": "Grugnas", "link": "https://stackoverflow.com/users/5181470/grugnas"}, "edited": false, "score": 0, "creation_date": 1507795610, "post_id": 46697023, "comment_id": 80355732, "body": "yes i am supposed to write it into the file as int, then print it in standard out (thus convert it into a string)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507795871, "post_id": 46697023, "comment_id": 80355894, "body": "You only read and write sequences of bytes. Do you want some <i>textual representation</i> of an <code>int</code> or do you want to read some binary file. In all cases, define your <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">file format</a> perhaps using some <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a> notation. Consider using <a href=\"https://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow noreferrer\">C dynamic memory allocation</a>"}], "owner": {"reputation": 35, "user_id": 5181470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ba3972efecfa490e65cc05fe4b432b?s=128&d=identicon&r=PG&f=1", "display_name": "Grugnas", "link": "https://stackoverflow.com/users/5181470/grugnas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1507795649, "creation_date": 1507753864, "last_edit_date": 1507795649, "question_id": 46697023, "link": "https://stackoverflow.com/questions/46697023/unbuffered-i-o-read-int-from-file-and-write-it-on-standard-output", "title": "unbuffered I/O: read int from file and write it on standard output", "body": "<p>This program is meant to take as parameter a file, then read a string from standard input and write its length into the file, then read the content of the file (which is supposed to contain the lengths of the strings from the standard input) and write it in standard output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define MAX_BUFF 4096\n\nint main(int argc, char **argv)\n{\n    if (argc != 2)\n    {\n        puts(\"you must specify a file!\");\n    return -1;\n    }\n    int nRead;\n    char buffer[MAX_BUFF], tmp;\n    int fd;\n        puts(\"write \\\"end\\\" to stop:\");\n    fd = open(argv[1], O_RDWR | O_CREAT | O_APPEND, S_IRWXU);\n    while ((nRead = read(STDIN_FILENO, buffer, MAX_BUFF)) &gt; 0 &amp;&amp; strncmp(buffer,\"end\", nRead-1) != 0 )\n            {\n            if ( write(fd, &amp;nRead, 1) &lt; 0 )\n            {\n                perror(\"write error.\");\n                return -1;\n            }\n        }\n    puts(\"now i am gonna print the length of the strings:\");\n    lseek(fd, 0, SEEK_SET); //set the offset at start of the file\n        while ((nRead = read(fd, buffer, 1)) &gt; 0)\n    {\n        tmp = (char)buffer[0];\n        write(STDOUT_FILENO, &amp;tmp, 1);\n    }\n    close(fd);\n    return 0;\n}\n</code></pre>\n\n<p>this is the result:</p>\n\n<pre><code>write \"end\" to stop:\nhello\nworld\ni am a script\nend\nnow i am gonna print the length of the strings:\n</code></pre>\n\n<p>I tried to convert the values written in the file  into char before write in standard output with no success.\nHow am i supposed to print on standard output the lengths by using unbuffered I/O? Thank you for your replies</p>\n\n<p>EDIT: i changed the read from file with this:</p>\n\n<pre><code>while((read(fd, &amp;buffer, 1)) &gt; 0)\n          {\n                  tmp = (int)*buffer;\n                  sprintf(buffer,\"%d:\", tmp);\n                  read(fd, &amp;buffer[strlen(buffer)], tmp);\n                  write(STDOUT_FILENO, buffer, strlen(buffer));\n          }\n</code></pre>\n\n<p>but actually i have no control on the effective strlen of the string thus the output is this:</p>\n\n<pre><code>13:ciao atottti\n4:wow\no atottti\n5:fine\n atottti\n</code></pre>\n\n<p>as you can see, the strlength is correct because it consinder the newline character ttoo. Still there is no control on the effective buffer size.</p>\n"}, {"tags": ["c", "parallel-processing", "mpi", "scatter"], "comments": [{"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1507753758, "post_id": 46696974, "comment_id": 80341715, "body": "what error did you get"}, {"owner": {"reputation": 17, "user_id": 7835829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c4ad83598148e6f9e4d6c0385146a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lumby", "link": "https://stackoverflow.com/users/7835829/lumby"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1507754104, "post_id": 46696974, "comment_id": 80341901, "body": "It only shows &#39;Input(50-1000) :&#39; input question, seems program keep running without providing results"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1507767337, "post_id": 46696974, "comment_id": 80346248, "body": "note you send <code>MPI_INT</code> but receive <code>MPI_DOUBLE</code>. and  you also never <code>MPI_Wait()</code> the requests returned by <code>MPI_Isend()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1507761024, "post_id": 46697776, "comment_id": 80344674, "body": "Also, based on the <code>MPI_Send()</code>/<code>MPI_Recv()</code> version, you need <code>MPI_Gather()</code> instead of <code>MPI_Scatter()</code>."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1507767400, "post_id": 46697776, "comment_id": 80346268, "body": "btw, you might consider doing some computation on rank 0, otherwise, it will be wasting resources waiting for <code>MPI_Gather()</code> to complete."}, {"owner": {"reputation": 17, "user_id": 7835829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c4ad83598148e6f9e4d6c0385146a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lumby", "link": "https://stackoverflow.com/users/7835829/lumby"}, "edited": false, "score": 0, "creation_date": 1507772782, "post_id": 46697776, "comment_id": 80347521, "body": "Can you explain me more precisely? When I put MPI_Gather function outside of the if block, all the data was gone...all process is 0 and all prime number is also the original input value"}, {"owner": {"reputation": 17, "user_id": 7835829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c4ad83598148e6f9e4d6c0385146a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lumby", "link": "https://stackoverflow.com/users/7835829/lumby"}, "edited": false, "score": 0, "creation_date": 1507772815, "post_id": 46697776, "comment_id": 80347530, "body": "Input(50-1000) : 50 Process 0 : There are 50 prime numbers Process 0 : There are 50 prime numbers Process 0 : There are 50 prime numbers Process 0 : There are 50 prime numbers      LIKE THIS..."}], "tags": [], "owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "is_accepted": false, "score": 1, "last_activity_date": 1507756967, "creation_date": 1507756967, "answer_id": 46697776, "question_id": 46696974, "link": "https://stackoverflow.com/questions/46696974/parellel-programming-how-can-i-apply-mpi-gather-or-mpi-scatter-instead-of/46697776#46697776", "title": "Parellel Programming: How can I apply &#39;MPI_Gather&#39; or &#39;MPI_Scatter&#39; instead of &#39;MPI_Isend&#39; and &#39;MPI_Recv&#39;", "body": "<p><code>MPI_Scatter</code> is a collective operation and need to be called by all ranks. Same thing goes for <code>MPI_Gather</code>.</p>\n\n<p>The means that: <code>MPI_Scatter</code> call should be moved outside of the <code>if</code> block in your code (similarly for <code>MPI_Gather</code>).</p>\n\n<p>You can find an example <a href=\"http://mpitutorial.com/tutorials/mpi-scatter-gather-and-allgather/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7835829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c4ad83598148e6f9e4d6c0385146a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lumby", "link": "https://stackoverflow.com/users/7835829/lumby"}, "edited": false, "score": 0, "creation_date": 1507776488, "post_id": 46700430, "comment_id": 80348397, "body": "oh I got it! Thank you very much :)"}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 1, "last_activity_date": 1507775107, "creation_date": 1507775107, "answer_id": 46700430, "question_id": 46696974, "link": "https://stackoverflow.com/questions/46696974/parellel-programming-how-can-i-apply-mpi-gather-or-mpi-scatter-instead-of/46700430#46700430", "title": "Parellel Programming: How can I apply &#39;MPI_Gather&#39; or &#39;MPI_Scatter&#39; instead of &#39;MPI_Isend&#39; and &#39;MPI_Recv&#39;", "body": "<p>here is how you can use <code>MPI_Gather()</code></p>\n\n<pre><code>int * results;\nif( my_rank != 0){\n    x = w/(p-1);\n    low = (my_rank-1)*x;\n    high = low+x-1;\n    for(num = data[low]; num &lt;= data[high];num++){\n        result = 0;\n        t=1;\n        while(num&gt;=t){\n                if(num%t==0)\n                result = result +1;\n            t += 1;\n        }\n        if(result==2) i += 1;\n    }\n} else {\n    results = (int *)malloc(p * sizeof(int));\n}\n\nMPI_Gather(&amp;i, 1, MPI_INT, results, 1, MPI_INT, 0, MPI_COMM_WORLD);\n\nif(my_rank == 0){\n    int j = 0;\n    for( j = 1; j &lt; p; j++){\n        printf(\"Process %d : There are %d prime numbers\\n\",j, results[j]);\n    }\n    free(results);\n}\n</code></pre>\n\n<p>note you can arrange this algo in order to also do computations on rank 0, and hence use <code>p</code> MPI tasks instead of <code>p-1</code></p>\n"}], "owner": {"reputation": 17, "user_id": 7835829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c4ad83598148e6f9e4d6c0385146a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lumby", "link": "https://stackoverflow.com/users/7835829/lumby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 46700430, "answer_count": 2, "score": 0, "last_activity_date": 1507775107, "creation_date": 1507753649, "question_id": 46696974, "link": "https://stackoverflow.com/questions/46696974/parellel-programming-how-can-i-apply-mpi-gather-or-mpi-scatter-instead-of", "title": "Parellel Programming: How can I apply &#39;MPI_Gather&#39; or &#39;MPI_Scatter&#39; instead of &#39;MPI_Isend&#39; and &#39;MPI_Recv&#39;", "body": "<p>This is my code counting prime numbers, I want to use only collective communication among those processes. However, I got error when I changed my code using 'MPI_Scatter' and 'MPI_Gather' instead of MPI_Recv and MPI_Isend. What should I change for it?</p>\n\n<p>This is my original code:</p>\n\n<pre><code>MPI_Request req;\nMPI_Status status;\nMPI_Init(&amp;argc,&amp;argv);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;p);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n\nif( my_rank == 0){\n    printf(\"Input(50-1000) : \");\n    fflush(stdout);\n    scanf(\"%d\",&amp;w);\n    for(i=0; i&lt;w; i++) data[i] = i+1;\n}\n\nMPI_Bcast(&amp;w, 1, MPI_INT,0,MPI_COMM_WORLD);\nMPI_Bcast(data, w, MPI_INT,0,MPI_COMM_WORLD);\n\nif( my_rank != 0){\n    x = w/(p-1);\n    low = (my_rank-1)*x;\n    high = low+x-1;\n    for(num = data[low]; num &lt;= data[high];num++){\n        result = 0;\n        t=1;\n        while(num&gt;=t){\n                if(num%t==0)\n                result = result +1;\n            t += 1;\n        }\n        if(result==2) i += 1;\n    }\n    MPI_Isend(&amp;i,1,MPI_INT,0,0,MPI_COMM_WORLD,&amp;req);\n}\n\nif(my_rank == 0){\n    int j = 0;\n    for( j = 1; j &lt; p; j++){\n        MPI_Recv(&amp;i,1,MPI_DOUBLE,MPI_ANY_SOURCE,0,MPI_COMM_WORLD,&amp;status);\n    printf(\"Process %d : There are %d prime numbers\\n\",status.MPI_SOURCE,i );\n    }\n}\nMPI_Finalize();\n</code></pre>\n\n<p>}</p>\n\n<p>And the output is:</p>\n\n<pre><code>Input(50-1000) : 50\nProcess 1 : There are 5 prime numbers\nProcess 2 : There are 4 prime numbers\nProcess 3 : There are 2 prime numbers\nProcess 4 : There are 4 prime numbers\n</code></pre>\n\n<p>Here is the part where I changed my code:</p>\n\n<pre><code>if( my_rank != 0){\n        x = w/(p-1);\n        low = (my_rank-1)*x;\n        high = low+x-1;\n        for(num = data_send[low]; num &lt;= data[high];num++){\n            result = 0;\n            t=1;\n            while(num&gt;=t){\n                if(num%t==0)\n                    result = result +1;\n                    t += 1;\n                }\n            if(result==2) i += 1;\n     }\n MPI_Scatter(data_send,1,MPI_INT,data_recv,1,MPI_INT,0,MPI_COMM_WORLD);\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507753876, "post_id": 46696534, "comment_id": 80341782, "body": "How is <code>readbuffer</code> defined?"}, {"owner": {"reputation": 13, "user_id": 8749785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wxX2W.jpg?s=128&g=1", "display_name": "Aaron Barnett", "link": "https://stackoverflow.com/users/8749785/aaron-barnett"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507754256, "post_id": 46696534, "comment_id": 80341987, "body": "it is a char array."}], "answers": [{"tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": true, "score": 0, "last_activity_date": 1507754373, "creation_date": 1507754373, "answer_id": 46697144, "question_id": 46696534, "link": "https://stackoverflow.com/questions/46696534/using-pipe-and-fork-to-read-from-a-file-and-output-to-the-console-new-file/46697144#46697144", "title": "Using pipe() and fork() to read from a file and output to the console/new file", "body": "<p>It looks as though you're trying to read all the data from the pipe with one call to <code>read(2)</code>. But, as with any I/O operation, this may always return fewer bytes than you requested. You should <em>always</em> check the return value of <code>read(2)</code> and <code>write(2)</code> system calls (and others), to make sure that they acted as expected.</p>\n\n<p>In this case, you should loop until you get some independent notification from the child process that they're done sending data. This can be signaled in this case by <code>read(2)</code> returning <code>0</code>, meaning that the child closed their end of the pipe. </p>\n"}, {"comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 1, "creation_date": 1507754832, "post_id": 46697163, "comment_id": 80342287, "body": "I don&#39;t think it&#39;s <i>ever</i> a &quot;safe assumption&quot; that a <code>read(2)</code> call will return all requested data, no matter the number of <code>write</code> calls the child makes."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507755410, "post_id": 46697163, "comment_id": 80342544, "body": "@bnaecker, POSIX certainly makes no such guarantees, but if you&#39;re willing to rely on the known characteristics of specific implementations -- i.e. Linux in this case -- then for those implementations, the assumption can indeed be safe.  This should not be taken as an endorsement of such practices, however.  Relying on implementation details is a good way to set a nasty trap for future you."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507756055, "post_id": 46697163, "comment_id": 80342862, "body": "Interesting, I didn&#39;t know that was a guarantee on Linux. How do you know that?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507757592, "post_id": 46697163, "comment_id": 80343507, "body": "@bnaecker, I wouldn&#39;t say that &quot;known characteristics&quot; rises quite to the level of &quot;guarantee&quot;, but I know it partly from being on the other side of our present conversation.  The Linux kernel source is of course open for examination to confirm or refute the proposition."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1507774313, "post_id": 46697163, "comment_id": 80347873, "body": "@JohnBollinger: POSIX <i>does</i> make guarentees for the behavior of writes that are <code>PIPE_BUF</code> bytes or less -- such writes are &quot;atomic&quot; and will never be interleaved with writes from other sources.  In addition, a read will never return less data than requested if there is data available in the pipe, so if you are writing and reading fixed size records and that size is &lt;= <code>PIPE_BUF</code> you&#39;ll never get short reads either."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1507754432, "creation_date": 1507754432, "answer_id": 46697163, "question_id": 46696534, "link": "https://stackoverflow.com/questions/46696534/using-pipe-and-fork-to-read-from-a-file-and-output-to-the-console-new-file/46697163#46697163", "title": "Using pipe() and fork() to read from a file and output to the console/new file", "body": "<p>You are assuming that the parent can read everything written to the pipe by the child via one <code>read()</code> call.  That might be a safe assumption for a pipe if the child were writing everything via a single <code>write()</code> call, as long as the overall data size did not exceed the size of the pipe's internal buffer. It is not at all safe when, as in this case, the child is sending data via many little writes.</p>\n\n<p>How much data the parent actually gets will depend in part on how its one <code>read()</code> call is ordered relative to the child's writes.  Inasmuch as the two are separate processes and you're employing no IPC other than the pipe itself, it's basically unpredictable how much data the parent will successfully read.</p>\n\n<p>In the general case, one must assume that the reader will need to perform multiple <code>read()</code> calls to read all data that are sent.  It must keep calling <code>read()</code> and processing the resulting data appropriately until <code>read</code>'s return value indicates that an I/O error has occurred or that the end of the file has been reached.  Note well that end of file does not mean just that no more bytes are available <em>now</em>, but that no more bytes will <em>ever</em> be available.  That happens after all processes have closed all copies of the write end of the pipe.</p>\n"}], "owner": {"reputation": 13, "user_id": 8749785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wxX2W.jpg?s=128&g=1", "display_name": "Aaron Barnett", "link": "https://stackoverflow.com/users/8749785/aaron-barnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 0, "accepted_answer_id": 46697144, "answer_count": 2, "score": 1, "last_activity_date": 1507754432, "creation_date": 1507751960, "last_edit_date": 1507752406, "question_id": 46696534, "link": "https://stackoverflow.com/questions/46696534/using-pipe-and-fork-to-read-from-a-file-and-output-to-the-console-new-file", "title": "Using pipe() and fork() to read from a file and output to the console/new file", "body": "<p>I'm trying to learn how to use the pipe() and fork() system calls. I'm using pipe and fork to create parent and child processes where the child will read a character from the text file, and then send it through the pipe to the parent that will then output the character to the console, with the desired result that it will print out the entire text to the console. Later I'm going to be doing some text processing on the file with the child process reading and processing then sending the updated text to the parent but for now I just want to make sure I'm getting the basics of pipe() correct.</p>\n\n<p>example file:</p>\n\n<pre><code>This is a test file; it is 1 of many.\nOthers will follow. \n</code></pre>\n\n<p>Relevant code:</p>\n\n<pre><code>  pid = fork();\n\n  ifstream fin;\n  fin.open(inputFilename);\n  fin.get(inputChar);\n\n  if (pid == -1)\n  {\n    perror(\"Trouble\");\n    exit(2);\n  }\n  else if (pid == 0) //child process that reads text file and writes to parent\n  {\n    close(pipefds[0]);\n    while(!fin.eof())\n    {\n      write(pipefds[1], &amp;inputChar, sizeof(inputChar));\n      fin.get(inputChar);\n    }\n\n    close(pipefds[1]);\n\n    exit(0);\n  }\n  else\n  {\n    close(pipefds[1]);\n    read(pipefds[0], readbuffer, sizeof(readbuffer));\n    cout &lt;&lt; readbuffer &lt;&lt; endl;\n    close(pipefds[0]);\n    exit(0);\n\n  }\n      fin.close();\n</code></pre>\n\n<p>However, when I compile and run, the output is always of a varying length. Sometimes it will print the whole file, others it will just print out a few letters, or half of a line. Such as.</p>\n\n<pre><code>This i\n</code></pre>\n\n<p>I've tried going through the man pages and researching more but I haven't been able to find any answers. What exactly is going on with my program that it will sometimes read everything from the file but other times won't. Any help is greatly appreciated!</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 76, "user_id": 5826916, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-tTvW94kfr78/AAAAAAAAAAI/AAAAAAAAEr4/xR_zkDAZnnQ/photo.jpg?sz=128", "display_name": "Aditya kumar", "link": "https://stackoverflow.com/users/5826916/aditya-kumar"}, "edited": false, "score": 0, "creation_date": 1507750815, "post_id": 46696163, "comment_id": 80340233, "body": "First <code>*s</code> is evaluated and then <code>s++</code> ?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1507750905, "post_id": 46696163, "comment_id": 80340284, "body": "Please elaborate with reference to operator precedences."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507750951, "post_id": 46696163, "comment_id": 80340311, "body": "Because of extra one increment in the first variant."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1507751073, "post_id": 46696163, "comment_id": 80340375, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27850172/c-operator-priority-and\">C++ Operator priority =, * and ++</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1507751280, "post_id": 46696163, "comment_id": 80340476, "body": "@JohnnyMopp no, it&#39;s not a duplicate of that. Here the issue is incrementing the pointer no matter what, failing the next loop because s if 1 too much."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 76, "user_id": 5826916, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-tTvW94kfr78/AAAAAAAAAAI/AAAAAAAAEr4/xR_zkDAZnnQ/photo.jpg?sz=128", "display_name": "Aditya kumar", "link": "https://stackoverflow.com/users/5826916/aditya-kumar"}, "edited": false, "score": 0, "creation_date": 1507751438, "post_id": 46696287, "comment_id": 80340576, "body": "To be honest, I answered because it took me a while to figure that out :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507751585, "post_id": 46696287, "comment_id": 80340646, "body": "@Jean-Fran&#231;oisFabre Your &quot;a while&quot; was approximately 20 seconds to my estimation :P"}, {"owner": {"reputation": 76, "user_id": 5826916, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-tTvW94kfr78/AAAAAAAAAAI/AAAAAAAAEr4/xR_zkDAZnnQ/photo.jpg?sz=128", "display_name": "Aditya kumar", "link": "https://stackoverflow.com/users/5826916/aditya-kumar"}, "edited": false, "score": 0, "creation_date": 1507751607, "post_id": 46696287, "comment_id": 80340662, "body": "Does it mean that it is a nice question ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 76, "user_id": 5826916, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-tTvW94kfr78/AAAAAAAAAAI/AAAAAAAAEr4/xR_zkDAZnnQ/photo.jpg?sz=128", "display_name": "Aditya kumar", "link": "https://stackoverflow.com/users/5826916/aditya-kumar"}, "edited": false, "score": 1, "creation_date": 1507751662, "post_id": 46696287, "comment_id": 80340693, "body": "@Adityakumar Let the score speak for it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507752214, "post_id": 46696287, "comment_id": 80341014, "body": "at least it&#39;s not a blatant undefined behaviour / wall of code question  like we see all the time."}, {"owner": {"reputation": 141, "user_id": 6655974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad7a1def6dad1bdbc325421264aae350?s=128&d=identicon&r=PG&f=1", "display_name": "wra", "link": "https://stackoverflow.com/users/6655974/wra"}, "edited": false, "score": 1, "creation_date": 1507753474, "post_id": 46696287, "comment_id": 80341581, "body": "It\u2018s an interesting brain-twister but not a suitable real-world solution for string concatenation because of the missing boundary checking. Only strings that are guaranteed to be null-terminated and not to exceed 100 characters (together!) are allowed. Otherwise memory overrun occurs."}, {"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "reply_to_user": {"reputation": 141, "user_id": 6655974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad7a1def6dad1bdbc325421264aae350?s=128&d=identicon&r=PG&f=1", "display_name": "wra", "link": "https://stackoverflow.com/users/6655974/wra"}, "edited": false, "score": 0, "creation_date": 1507757468, "post_id": 46696287, "comment_id": 80343450, "body": "@wra why 100 characters?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1507757624, "post_id": 46696287, "comment_id": 80343520, "body": "@savram &quot;Why 100?&quot; --&gt; <code>char s[100]</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507757843, "post_id": 46696287, "comment_id": 80343616, "body": "@EugeneSh.you&#39;re too kind :)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1507750971, "creation_date": 1507750971, "answer_id": 46696287, "question_id": 46696163, "link": "https://stackoverflow.com/questions/46696163/string-concatenation-using-pointers-in-c/46696287#46696287", "title": "String concatenation using pointers in C", "body": "<p>they aren't equivalent.</p>\n\n<pre><code>while(*s++);\n</code></pre>\n\n<p>increments the pointer no matter what, so when <code>*s</code> is <code>\\0</code>, the pointer is incremented once more. And the concatenation happens <em>after</em> the nul-terminator. The rest of the buffer contains zeroes so it doesn't crash but it doesn't do the job.</p>\n\n<pre><code>while(*s) { s++; }\n</code></pre>\n\n<p>stops when <code>*s</code> is <code>\\0</code>. So no extra incrementation is performed.</p>\n"}], "owner": {"reputation": 76, "user_id": 5826916, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-tTvW94kfr78/AAAAAAAAAAI/AAAAAAAAEr4/xR_zkDAZnnQ/photo.jpg?sz=128", "display_name": "Aditya kumar", "link": "https://stackoverflow.com/users/5826916/aditya-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 46696287, "answer_count": 1, "score": 2, "last_activity_date": 1507752018, "creation_date": 1507750451, "last_edit_date": 1592644375, "question_id": 46696163, "link": "https://stackoverflow.com/questions/46696163/string-concatenation-using-pointers-in-c", "title": "String concatenation using pointers in C", "body": "<p>I am concatenating a string (t) at the end of another string (s) in this code but stuck in the use of operators and their precedence in the loop ( while() )</p>\n<blockquote>\n<p>1.<code>while(*s++);</code> doesn't do the work</p>\n<p>2.<code>while(*s)  ++s;</code>   does</p>\n</blockquote>\n<p>But what is the difference between them ?</p>\n<pre><code>#include&lt;stdio.h&gt;\nvoid strcat(char *, const char *);\n\nint main(void){\n    char s[100] = &quot;Aditya &quot;;\n    char t[100] = &quot;Kumar&quot;;\n    strcat(s, t);\n    printf(&quot;%s &quot;, s);\n    return 0;\n}\n\nvoid strcat(char * s, const char * t){\n    while(*s)\n        s++;\n\n    while(*s++ = *t++);\n}\n</code></pre>\n<p>Why in the strcat() function in first while <code>while(*s++);</code> doesn't concatenate the string but <code>while(*s) s++;</code> does I guess they work the same way ?</p>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "volatile"], "answers": [{"tags": [], "owner": {"reputation": 970, "user_id": 1734303, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6ee80feb1a2c3ecd7c5f3e1ed8927419?s=128&d=identicon&r=PG", "display_name": "cowboydan", "link": "https://stackoverflow.com/users/1734303/cowboydan"}, "is_accepted": false, "score": 0, "last_activity_date": 1507750050, "creation_date": 1507750050, "answer_id": 46696056, "question_id": 46695958, "link": "https://stackoverflow.com/questions/46695958/is-there-a-way-to-test-the-use-of-volatile-keyword-in-c-on-a-desktop-compute/46696056#46696056", "title": "Is there a way to &quot;test&quot; the use of &quot;volatile&quot; keyword in C on a Desktop computer running Linux or Windows?", "body": "<p>There are a couple of questions here, so I'll tackle the first. \"...test the use of volatile keyword...\"</p>\n\n<p>I suppose you could compile the module without the volatile keyword down to assembler (I believe it is the -S option). The method could be repeated for the same code modified with the volatile keyword, then a diff tool could put a spotlight on the changes. I would suspect the loading of the variable in question with the volatile keyword would always be directly from the location of it. \nThis could also be verified by looking at the .map listing to know in advance what the actual location of the volatile variable is so you have a basis for comparison.</p>\n"}, {"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": false, "score": 4, "last_activity_date": 1507750918, "last_edit_date": 1507750918, "creation_date": 1507750449, "answer_id": 46696161, "question_id": 46695958, "link": "https://stackoverflow.com/questions/46695958/is-there-a-way-to-test-the-use-of-volatile-keyword-in-c-on-a-desktop-compute/46696161#46696161", "title": "Is there a way to &quot;test&quot; the use of &quot;volatile&quot; keyword in C on a Desktop computer running Linux or Windows?", "body": "<blockquote>\n  <p>Is there any possibility to modify the value of a memory address while a program is running on a Linux or a Windows machine that also has a MMU and uses virtual address space for its programs (like all modern machines)?</p>\n</blockquote>\n\n<p>Yes, of course!</p>\n\n<p>The obvious example is threading: another thread could be updating the memory you're looking at, so you don't want to assume it never changes.</p>\n\n<p>Other examples include:</p>\n\n<ul>\n<li>Shared memory. Processes can agree to share a piece of memory for efficient IPC.</li>\n<li><code>mmap</code>.  A program can map a file into memory. When the file changes, the corresponding memory also changes (on Linux, this is the basis of shared memory).</li>\n<li>DMA. Other devices, like hard drives, can be asked to write data directly to RAM for efficient transfers.</li>\n</ul>\n\n<blockquote>\n  <p>Is it possible to change a variable of a program from another program (running in a different process not only a different thread) ?</p>\n</blockquote>\n\n<p>Yes. If the processes agree, you can use shared memory.</p>\n\n<p>If they don't, one can attach itself to another as a debugger and inspect/modify its memory.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1507750918, "creation_date": 1507749596, "question_id": 46695958, "link": "https://stackoverflow.com/questions/46695958/is-there-a-way-to-test-the-use-of-volatile-keyword-in-c-on-a-desktop-compute", "title": "Is there a way to &quot;test&quot; the use of &quot;volatile&quot; keyword in C on a Desktop computer running Linux or Windows?", "body": "<p>I know that 'volatile' keyword in C is used to tell the compiler to NOT load the variable from RAM memory into a register or into cache and to ALWAYS read the variable from the computer working memory.</p>\n\n<p>However I also read that the use case is when another device is modifying the value at the memory address stored in the variable.</p>\n\n<p>My question is:</p>\n\n<p>Is there any possibility to modify the value of a memory address while a program is running on a Linux or a Windows machine that also has a MMU and uses virtual address space for its programs (like all modern machines)?</p>\n\n<p>Is it possible to change a variable of a program from another program (running in a different process not only a different thread) ?</p>\n"}, {"tags": ["c", "printf", "unsigned"], "comments": [{"owner": {"reputation": 51908, "user_id": 702361, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e2a400cef6dbb94a8777c161d5b43d0c?s=128&d=identicon&r=PG", "display_name": "phoxis", "link": "https://stackoverflow.com/users/702361/phoxis"}, "edited": false, "score": 6, "creation_date": 1507748802, "post_id": 46695758, "comment_id": 80339275, "body": "Single quotes. Use Double quotes for a string &quot;%d&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2728, "user_id": 5237611, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef9dbabde19ea7759116c85eea13340a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5237611/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1507748860, "creation_date": 1507748860, "answer_id": 46695786, "question_id": 46695758, "link": "https://stackoverflow.com/questions/46695758/printf-makes-pointer-from-integer-without-a-cast/46695786#46695786", "title": "&#39;printf&#39; makes pointer from integer without a cast", "body": "<p>You can't use single quotes for a printf statement. Try this: </p>\n\n<pre><code>printf(\"%d\", j);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1507749695, "last_edit_date": 1507749695, "creation_date": 1507749390, "answer_id": 46695904, "question_id": 46695758, "link": "https://stackoverflow.com/questions/46695758/printf-makes-pointer-from-integer-without-a-cast/46695904#46695904", "title": "&#39;printf&#39; makes pointer from integer without a cast", "body": "<p><code>'%d'</code> is a multi-character literal, as you've enclosed more than one character in single quotation characters. Its value is implementation defined, but the C standard insists on it being an <code>int</code> type. (Hence the compiler diagnostic \"pointer from an integer\").</p>\n\n<p>You want <code>\"%d\"</code> instead, that is use double quotation characters.</p>\n\n<p><code>printf</code> takes a <code>const char*</code> pointer as the first argument. Formally <code>\"%d\"</code> is a <code>const char[3]</code> type, but via a mechanism called <em>pointer decay</em> it becomes a suitable value for that first argument.</p>\n"}], "owner": {"reputation": 1689, "user_id": 3587282, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/56579efbf0b000eb9e51e41ca5550b65?s=128&d=identicon&r=PG&f=1", "display_name": "hi15", "link": "https://stackoverflow.com/users/3587282/hi15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4605, "favorite_count": 0, "accepted_answer_id": 46695786, "answer_count": 2, "score": 1, "last_activity_date": 1507749695, "creation_date": 1507748715, "question_id": 46695758, "link": "https://stackoverflow.com/questions/46695758/printf-makes-pointer-from-integer-without-a-cast", "title": "&#39;printf&#39; makes pointer from integer without a cast", "body": "<p>I am really new C and I am trying to run the following piece of code in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n  unsigned long i = 1UL &lt;&lt; 2;\n  int j = (i==4);\n  printf('%d', j);\n  return 0;\n}\n</code></pre>\n\n<p>But it's giving the error:</p>\n\n<pre><code>prog.c: In function 'main':\nprog.c:6:10: warning: multi-character character constant [-Wmultichar]\n   printf('%d', j);\n          ^\nprog.c:6:10: warning: passing argument 1 of 'printf' makes pointer from integer without a cast [-Wint-conversion]\nIn file included from prog.c:1:0:\n/usr/include/stdio.h:362:12: note: expected 'const char * restrict' but argument is of type 'int'\n extern int printf (const char *__restrict __format, ...);\n</code></pre>\n\n<p>I am not sure what's wrong here. Any help?</p>\n"}, {"tags": ["c", "memory-leaks", "realloc"], "comments": [{"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "edited": false, "score": 2, "creation_date": 1507746883, "post_id": 46695254, "comment_id": 80338291, "body": "Welcome to S/O! This isn&#39;t really a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; try to make it one!"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1507746976, "post_id": 46695254, "comment_id": 80338342, "body": "Why are you casting malloc in c?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1507747147, "post_id": 46695254, "comment_id": 80338436, "body": "There is a memory leak because <code>free(line);</code> and <code>free(p);</code> are not called in all control paths."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507747192, "post_id": 46695254, "comment_id": 80338454, "body": "hint: use something like <code>unsigned newsize=5*oldsize&#47;4+10;</code> before <code>realloc</code> instead of <code>count+1</code> and remember the size separately from the <code>count</code>"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1507747235, "post_id": 46695254, "comment_id": 80338479, "body": "Tip: <code>sizeof(char)</code> is guaranteed to be <code>1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1507747290, "post_id": 46695254, "comment_id": 80338516, "body": "... more robust to use <code>p = malloc(sizeof *p);</code> (example for first usage)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1507747500, "post_id": 46695254, "comment_id": 80338636, "body": "Note also that <code>free()</code>ing a pointer does not change its value, and in particular, does not assign <code>NULL</code> to it.  It retains its original value, but that value is no longer a valid pointer."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507747584, "post_id": 46695254, "comment_id": 80338681, "body": "@JohnBollinger: right, but there is a <code>break</code> after the <code>free</code>s, directing the control to <code>return 0</code>; so it should not matter here."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507747976, "post_id": 46695254, "comment_id": 80338867, "body": "@Slayahh, how did you know that there is memory leak in your program?"}, {"owner": {"reputation": 115, "user_id": 8274784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7c4af308f7823de5d141edf5b6d823?s=128&d=identicon&r=PG&f=1", "display_name": "Slayahh", "link": "https://stackoverflow.com/users/8274784/slayahh"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507748233, "post_id": 46695254, "comment_id": 80339006, "body": "@Abhijit We have an automated grader that runs tests on our programs and sends us an email with the error if it&#39;s faulty."}, {"owner": {"reputation": 115, "user_id": 8274784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7c4af308f7823de5d141edf5b6d823?s=128&d=identicon&r=PG&f=1", "display_name": "Slayahh", "link": "https://stackoverflow.com/users/8274784/slayahh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1507748264, "post_id": 46695254, "comment_id": 80339024, "body": "@WeatherVane I have tried moving both free() to the end of the program (right above return(0)) but that does not work either, surely that would cover all the cases?"}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507748974, "post_id": 46695254, "comment_id": 80339357, "body": "@Slayahh, as you did not assign NULL to both &#39;p&#39; and &#39;line&#39; your tool is considering it as memory leak. Assign NULL to both and check. Also see my answer below."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507749936, "post_id": 46695254, "comment_id": 80339802, "body": "@Abhijit Where exactly you mean --&gt;&gt; <code>as you did not assign NULL to both &#39;p&#39; and &#39;line&#39; </code>. Where should that happen?"}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507750096, "post_id": 46695254, "comment_id": 80339876, "body": "@Michi both that statement should be after <code>free(line);</code> and <code>free(p);</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507750576, "post_id": 46695254, "comment_id": 80340098, "body": "@Slayahh Try my code and tell me if your problem persists."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507750855, "post_id": 46695254, "comment_id": 80340256, "body": "@Abhijit Please check my Updated Answer and see why I&#39;m not agree"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507751031, "post_id": 46695254, "comment_id": 80340356, "body": "@Abhijit I never said that is a memory leak (and there is not) , I do now say that is about an uninitialised value :)"}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "edited": false, "score": 0, "creation_date": 1507751301, "post_id": 46695254, "comment_id": 80340489, "body": "This is not at all memory leak. While you use <code>alloc</code>  it initialized each field with the value provided. In this case after <code>malloc</code> if you use <code>memset</code> you will get the same result but that does not mean <code>memset</code> stops the memory leak. You are using a tool and it has its own algorithm and we can not just blindly trust the report it gives."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507751361, "post_id": 46695254, "comment_id": 80340527, "body": "This is my last comment. this line <code>line = (char*) malloc ( sizeof(char) );</code> only needs <code>calloc</code> Try to debug it and you&#39;ll see. Have a good day"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1507803089, "post_id": 46695254, "comment_id": 80360390, "body": "You never call <code>free</code> in the case of <code>getchar()</code> returning <code>EOF</code>. It would be better to have the free statements after the loop"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1507748653, "post_id": 46695720, "comment_id": 80339205, "body": "<code>Not sure but I think </code> This is definitely a kind of an Answer which should not be given."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507748721, "post_id": 46695720, "comment_id": 80339236, "body": "My not sure is about his testing not about my answer"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507750011, "post_id": 46695720, "comment_id": 80339843, "body": "Please explain with a working code your suggestions from your Answer."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1507750440, "post_id": 46695720, "comment_id": 80340028, "body": "@Michi please see my updated answer. Also I see your answer, can you please explain why its give memory leak while we use <code>malloc</code> but not with <code>alloc</code>. Thanking in advance"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1507764894, "post_id": 46695720, "comment_id": 80345667, "body": "It is not necessary to set <code>line</code> and <code>p</code> to <code>NULL</code> after the calls to <code>free()</code>; it is even debatable whether this is a good practice in general. But how does this solve OP&#39;s problem, anyway? After making the suggested changes, OP code has exactly the same behavior as before."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1507750256, "last_edit_date": 1507750256, "creation_date": 1507748573, "answer_id": 46695720, "question_id": 46695254, "link": "https://stackoverflow.com/questions/46695254/memory-leak-in-c-most-likely-due-to-realloc/46695720#46695720", "title": "Memory leak in C, most likely due to realloc", "body": "<p>I think during debugging after the <code>free()</code> function call; you checked the value of the  pointer <code>p</code> and <code>line</code>, and you still see the value(string) it is pointing to. If so that is not memory leak because <code>free()</code> does not change the value of pointer or assign <code>0</code> or <code>'\\0'</code> character in it. <code>free()</code> just free the block of memory so that next time when you call any memory allocation function it will get that memory as available memory, and allocate it. Therefore after calling <code>free()</code>, we always assign <code>NULL</code> to the pointer like <code>p = NULL;</code>.</p>\n\n<p>Correct the code as below and try:-</p>\n\n<pre><code>free(line);\nfree(p);\nline = NULL;\np = NULL;\nbreak;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 8274784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7c4af308f7823de5d141edf5b6d823?s=128&d=identicon&r=PG&f=1", "display_name": "Slayahh", "link": "https://stackoverflow.com/users/8274784/slayahh"}, "edited": false, "score": 0, "creation_date": 1507751400, "post_id": 46695892, "comment_id": 80340550, "body": "Your code doesn&#39;t print out the longest word at EOF. It&#39;s just a blank line (\\n)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 115, "user_id": 8274784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7c4af308f7823de5d141edf5b6d823?s=128&d=identicon&r=PG&f=1", "display_name": "Slayahh", "link": "https://stackoverflow.com/users/8274784/slayahh"}, "edited": false, "score": 0, "creation_date": 1507755738, "post_id": 46695892, "comment_id": 80342718, "body": "This is not my code (it\u2019s yours) and this is not your Question too. I only fixed some conversion problems, but this doesn\u2019t affect your original code. The reason why I replaced malloc with calloc has nothing to do with your written Algorithm. If you believe that your code doesn\u2019t produce your expected Output, then you should open another Question for that."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1507764240, "post_id": 46695892, "comment_id": 80345539, "body": "What is gained by using <code>calloc()</code> instead of <code>malloc()</code> here, since <code>realloc()</code> is used anyway? Note that the memory leak has not been fixed; if <code>EOF</code> is encountered before a newline, the section of code containing the calls to <code>free()</code> is never entered. Test by entering &quot;Hello World&quot; and pressing ENTER and then signalling end-of-file from the keyboard. This only appears to work when input is terminated by pressing ENTER twice. This is exactly the same behavior exhibited by OP code...."}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 0, "last_activity_date": 1507750786, "last_edit_date": 1507750786, "creation_date": 1507749322, "answer_id": 46695892, "question_id": 46695254, "link": "https://stackoverflow.com/questions/46695254/memory-leak-in-c-most-likely-due-to-realloc/46695892#46695892", "title": "Memory leak in C, most likely due to realloc", "body": "<p>Based on your coding approach I'll use <code>calloc</code> (you need) instead of <code>malloc</code> to get rid of that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char *p = NULL;\n    char *line = NULL;\n    int sc;\n    p = calloc ( sizeof(char), 1);\n    line = calloc ( sizeof(char),1 );\n    size_t count = 0;\n    size_t max = 0;\n    p[count] = 0;\n    while ( ( sc = getchar()) != EOF ) {\n        if ( p == NULL ) {\n            p = realloc ( p, sizeof(char) );\n        }\n        if ( isalpha(sc) ) {\n            p[count] = (char)sc;\n            count++;\n            p = realloc( p, (count+1) * sizeof(char) );\n            p[count] = 0;\n        } else if ( sc == '\\n' || sc == ' ' ) {\n            if ( count &gt; max ) {\n                line = realloc( line, (count+1)*sizeof(char) );\n                strcpy( line, p );\n                max = count;\n            } else if ( count == 0) {\n                printf(\"%zu characters in longest word: %s\\n\", max, line);\n                free(line);\n                free(p);\n                break;\n            }\n            count = 0;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output with Valgrind:</p>\n\n<pre><code>==4362== Memcheck, a memory error detector\n==4362== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==4362== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==4362== Command: ./program\n==4362== \nHello World\n\n5 characters in longest word: Hello\n==4362== \n==4362== HEAP SUMMARY:\n==4362==     in use at exit: 0 bytes in 0 blocks\n==4362==   total heap usage: 15 allocs, 15 frees, 2,096 bytes allocated\n==4362== \n==4362== All heap blocks were freed -- no leaks are possible\n==4362== \n==4362== For counts of detected and suppressed errors, rerun with: -v\n==4362== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Now try to understand, why is not working with <code>malloc</code> and why is working with <code>calloc</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Are you sure that is all about a leak? and is not about an uninitialised value?\nI'm saying because if you type a letter works fine, the problem comes with Numbers, hence the <code>calloc</code> sugestion.</p>\n\n<p>This is the Output of <code>Valgrind</code> using your code with no modification:</p>\n\n<pre><code>==5042== Memcheck, a memory error detector\n==5042== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==5042== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==5042== Command: ./program\n==5042== \n1   \n==5042== Conditional jump or move depends on uninitialised value(s)\n==5042==    at 0x4E88CC0: vfprintf (vfprintf.c:1632)\n==5042==    by 0x4E8F898: printf (printf.c:33)\n==5042==    by 0x40082B: main (in /home/michael/program)\n==5042==  Uninitialised value was created by a heap allocation\n==5042==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5042==    by 0x400715: main (in /home/michael/program)\n==5042== \n0 characters in longest word: \n==5042== \n==5042== HEAP SUMMARY:\n==5042==     in use at exit: 0 bytes in 0 blocks\n==5042==   total heap usage: 4 allocs, 4 frees, 2,050 bytes allocated\n==5042== \n==5042== All heap blocks were freed -- no leaks are possible\n==5042== \n==5042== For counts of detected and suppressed errors, rerun with: -v\n==5042== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 2, "last_activity_date": 1507803851, "last_edit_date": 1507803851, "creation_date": 1507756660, "answer_id": 46697709, "question_id": 46695254, "link": "https://stackoverflow.com/questions/46695254/memory-leak-in-c-most-likely-due-to-realloc/46697709#46697709", "title": "Memory leak in C, most likely due to realloc", "body": "<p>You state <a href=\"https://stackoverflow.com/questions/46695254/memory-leak-in-c-most-likely-due-to-realloc#comment80339024_46695254\">in the comments</a> that you \"have tried moving both <code>free()</code> to the end of the program\", but I don't believe you. The problem appears to be that this is a badly designed program which does not always reach the <code>free()</code> statements because when <code>sc</code> is a space or newline, <code>count</code> is unlikely to be 0, and after <code>count</code> is reset to 0, the next character is read into <code>sc</code> (unlikely to be a space or newline).</p>\n\n<p>Simply moving the calls to <code>free()</code> to the end of the program fixes the memory leak, which was reported by Valgrind:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u03bb&gt; valgrind --tool=memcheck ./a.out\n==2967== Memcheck, a memory error detector\n==2967== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==2967== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==2967== Command: ./a.out\n==2967== \nthis is a test\n==2967== \n==2967== HEAP SUMMARY:\n==2967==     in use at exit: 10 bytes in 2 blocks\n==2967==   total heap usage: 14 allocs, 12 frees, 42 bytes allocated\n==2967== \n==2967== LEAK SUMMARY:\n==2967==    definitely lost: 10 bytes in 2 blocks\n==2967==    indirectly lost: 0 bytes in 0 blocks\n==2967==      possibly lost: 0 bytes in 0 blocks\n==2967==    still reachable: 0 bytes in 0 blocks\n==2967==         suppressed: 0 bytes in 0 blocks\n==2967== Rerun with --leak-check=full to see details of leaked memory\n==2967== \n==2967== For counts of detected and suppressed errors, rerun with: -v\n==2967== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>But there are many other issues with the code. First, never store the result of a call to <code>realloc()</code> in the only copy of a pointer you have to the memory being reallocated; a null pointer may be returned, and if so you then have a memory leak and lost data. Instead, use a temporary variable to hold the result, and assign this value to the original pointer only after checking for a null pointer. If a null pointer has been returned, the simplest solution is probably to terminate the program with an error message, as is done below; the error could be handled in other ways, so long as it is handled.</p>\n\n<p>The posted code is more complex than it needs to be, with multiple calls to <code>malloc()</code> and <code>realloc()</code>. Instead, initialize <code>p</code> and <code>line</code> to <code>NULL</code>, and reallocate only as needed. There is no need to begin by allocating space for 1 <code>char</code>; this can be done when the first character needs to be stored. Also, there is no need to cast the result of <code>malloc()</code> in C (a different story in C++); and, <code>sizeof char</code> is always 1, so this is redundant and only clutters the code.</p>\n\n<p>The fundamental problem in the posted code seems to be that when a character is read, <code>count</code> is incremented. Then if this character is a space or a newline, <code>count</code> may not be 0, so the exit with deallocation condition may not be met. Instead of complicated conditions, rethink the flow of the program.</p>\n\n<p>After reading a character (unless <code>EOF</code> is encountered), if that character is alphabetic, <code>count</code> should be incremented, and <code>p</code> should be reallocated. If this step is successful, the character should be stored in <code>p[]</code>, which should then be null-terminated.</p>\n\n<p>Otherwise, if the character is a <code>\\n</code> or a space, <code>max</code> should be compared with <code>count</code>. If <code>count</code> is larger, then <code>line</code> should be reallocated. If this step is successful, the string pointed to by <code>p</code> should be copied to <code>line[]</code>. Then <code>max</code> is given the value of <code>count</code>, and <code>count</code> is reset to 0.</p>\n\n<p>After the loop has terminated, the results are printed only if there were words in the input. Then deallocation can occur before the program terminates.</p>\n\n<p>The <code>isalpha()</code> function and similar functions from <code>ctype.h</code> expect an <code>int</code> value in the range of an <code>unsigned char</code> (or <code>EOF</code>). Often you need to cast the value of arguments to these functions to <code>unsigned char</code> to avoid undefined behavior. But, in this case the cast is unnecessary since <code>getchar()</code> returns an <code>int</code> value in the range of an <code>unsigned char</code> (or <code>EOF</code>).</p>\n\n<p>You might also consider using the <code>isspace()</code> function instead of <code>sc == '\\n' || sc == ' '</code>. This would allow other whitespace characters, such as <code>'\\t'</code>, to separate words in the input. As written in the OP, an input of <code>\"one\\tword\"</code> (where <code>'\\t'</code> is a tab character) would result in an output of:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>7 characters in longest word: oneword\n</code></pre>\n\n<p>Here is a modified version of the posted code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char *p = NULL;\n    char *line = NULL;\n    int sc;\n    int count = 0;\n    int max = 0;\n\n    while ((sc = getchar()) != EOF) {\n        if (isalpha(sc)) {\n            ++count;                                    // read a letter\n            char *temp = realloc(p, count + 1);         // +1 for '\\0'\n            if (temp == NULL) {                         // check allocation\n                perror(\"Failure to reallocate p\");\n                exit(EXIT_FAILURE);\n            }\n            p = temp;                                   // OK to reassign p\n            p[count-1] = sc;                            // store character\n            p[count] = 0;                               // add null-terminator\n        } else if (isspace(sc)) {\n            if (count &gt; max) {\n                char *temp = realloc(line, count + 1);  // +1 for '\\0'\n                if (temp == NULL) {                     // check allocation\n                    perror(\"Failure to reallocate line\");\n                    exit(EXIT_FAILURE);\n                }\n                line = temp;                            // OK to reassign line\n                strcpy(line, p);\n                max = count;\n            }\n            count = 0;\n        }\n    }\n\n    if (max &gt; 0) {\n        printf(\"%d characters in longest word: %s\\n\", max, line);        \n    } else {\n        puts(\"No words in input\");\n    }\n\n    free(line);\n    free(p);\n\n    return 0;\n}\n</code></pre>\n\n<p>And here is a clean bill of health from Valgrind:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u03bb&gt; valgrind --tool=memcheck ./a.out\n==4753== Memcheck, a memory error detector\n==4753== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==4753== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==4753== Command: ./a.out\n==4753== \nthis is a   testrun\n7 characters in longest word: testrun\n==4753== \n==4753== HEAP SUMMARY:\n==4753==     in use at exit: 0 bytes in 0 blocks\n==4753==   total heap usage: 16 allocs, 16 frees, 69 bytes allocated\n==4753== \n==4753== All heap blocks were freed -- no leaks are possible\n==4753== \n==4753== For counts of detected and suppressed errors, rerun with: -v\n==4753== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8274784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d7c4af308f7823de5d141edf5b6d823?s=128&d=identicon&r=PG&f=1", "display_name": "Slayahh", "link": "https://stackoverflow.com/users/8274784/slayahh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 46697709, "answer_count": 3, "score": 2, "last_activity_date": 1507803851, "creation_date": 1507746771, "question_id": 46695254, "link": "https://stackoverflow.com/questions/46695254/memory-leak-in-c-most-likely-due-to-realloc", "title": "Memory leak in C, most likely due to realloc", "body": "<p>I have a program that is supposed to receive input, remember the longest string and print it out at EOF. My code works, but when run through a debugger there is a memory leak detected. I am compiling in Windows and do not have a proper debugger like Valgrind so I do not get much information about the error. The only thing I can imagine can cause this leak is the realloc() or free() function. However, I am not skilled enough in C to understand what the problem is.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char *p;\n    char *line;\n    int sc;\n    p = (char*) malloc ( sizeof(char) );\n    line = (char*) malloc ( sizeof(char) );\n    int count = 0;\n    int max = 0;\n    p[count] = 0;\n    while ( ( sc = getchar()) != EOF ) {\n        if ( p == NULL ) {\n            p = (char*) realloc ( p, sizeof(char) );\n        }\n        if ( isalpha(sc) ) {\n            p[count] = sc;\n            count++;\n            p = (char*) realloc( p, (count+1)*sizeof(char) );\n            p[count] = 0;\n        } else if ( sc == '\\n' || sc == ' ' ) {\n            if ( count &gt; max ) {\n                line = (char*) realloc( line, (count+1)*sizeof(char) );\n                strcpy( line, p );\n                max = count;\n            } else if ( count == 0) {\n                printf(\"%d characters in longest word: %s\\n\", max, line);\n                free(line);\n                free(p);\n                break;\n            }\n            count = 0;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1507745847, "creation_date": 1507745847, "answer_id": 46695002, "question_id": 46695001, "link": "https://stackoverflow.com/questions/46695001/accessing-the-previous-and-next-members-of-an-array-element-using-just-a-pointer/46695002#46695002", "title": "Accessing the previous and next members of an array element using just a pointer to one element", "body": "<p>Assuming the pointer in question does not point to either the first or last element of the array, you can use pointer arithmetic to access the previous and next elements of the array.</p>\n\n<pre><code>int sum_prev_next(int *p)\n{\n   return *(p-1) + *(p+1);\n}\n</code></pre>\n\n<p>Or equivalently:</p>\n\n<pre><code>int sum_prev_next(int *p)\n{\n   return p[-1] + p[1];\n}\n</code></pre>\n\n<p>The negative array subscript may be unusual, but is well defined in this case.  This can be better explained with a diagram:</p>\n\n<pre><code>        p-1\n        |   p   p+1\n        |   |   |\n        v   v   v\n  -------------------------\na | 0 | 1 | 2 | 3 | 4 | 5 |\n  -------------------------\n</code></pre>\n\n<p>If <code>p</code> points to <code>a[2]</code>, then <code>p[-1]</code> is the same as <code>a[1]</code> and <code>p[1]</code> is the same as <code>a[3]</code>.</p>\n\n<p>It's important to note that this function has the precondition that <code>p</code> does not point to the first or last element of an array.  If it did, then accessing either <code>p[-1]</code> or <code>p[1]</code> would invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a> by either creating a pointer to one before the start of the array or by dereferencing a pointer to one past the end of the array (creating a pointer to one past the end is OK).</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1507748726, "creation_date": 1507748726, "answer_id": 46695759, "question_id": 46695001, "link": "https://stackoverflow.com/questions/46695001/accessing-the-previous-and-next-members-of-an-array-element-using-just-a-pointer/46695759#46695759", "title": "Accessing the previous and next members of an array element using just a pointer to one element", "body": "<p>According to the definition of array subscripting (C Standard, 6.5.2.1 Array subscripting)</p>\n\n<blockquote>\n  <p>2 A postfix expression followed by an expression in square brackets []\n  is a subscripted designation of an element of an array object. The\n  definition of the subscript operator [] is that E1[E2] is identical to\n  (*((E1)+(E2))). Because of the conversion rules that apply to the\n  binary + operator, if E1 is an array object (equivalently, a pointer\n  to the initial element of an array object) and E2 is an integer,\n  E1[E2] designates the E2-th element of E1 (counting from zero).</p>\n</blockquote>\n\n<p>this declaration</p>\n\n<pre><code>int sum = a[y-1] + a[y+1];\n</code></pre>\n\n<p>can be equivalently rewritten like</p>\n\n<pre><code>int sum = *( a + y - 1 ) + *( a + y + 1 );\n</code></pre>\n\n<p>that in turn can be rewritten like</p>\n\n<pre><code>int sum = *( ( a + y ) - 1 ) + *( ( a + y ) + 1 );\n</code></pre>\n\n<p>where the subexpression <code>a + y</code> represents the pointer <code>p</code> defined like</p>\n\n<pre><code>int *p = &amp;a[y];\n</code></pre>\n\n<p>or (that is the same) like</p>\n\n<pre><code>int *p = a + y;\n</code></pre>\n\n<p>because according to the standard conversions (C Standard, 6.3.2.1 Lvalues, arrays, and function designators)</p>\n\n<blockquote>\n  <p>Except when it is the operand of the sizeof operator or the unary &amp;\n  operator, or is a string literal used to initialize an array, <strong>an\n  expression that has type \u2018\u2018array of type\u2019\u2019 is converted to an\n  expression with type \u2018\u2018pointer to type\u2019\u2019 that points to the initial\n  element of the array object</strong> and is not an lvalue. If the array\n  object has register storage class, the behavior is undefined.</p>\n</blockquote>\n\n<p>So the declaration can be rewritten like</p>\n\n<pre><code>int sum = *( p - 1 ) + *( p + 1 );\n</code></pre>\n\n<p>Now again returning to the first quote from the C Standard we get</p>\n\n<pre><code>int sum = p[-1] + p[1];\n</code></pre>\n\n<p><strong>And vice versa</strong> having the above declaration we can rewrite it like</p>\n\n<pre><code>int sum = *( p - 1 ) + *( p + 1 );\n</code></pre>\n\n<p>Taking into account the definition of <code>p</code> like </p>\n\n<pre><code>int *p = a + y;\n</code></pre>\n\n<p>the declaration can be rewritten like</p>\n\n<pre><code>int sum = *( ( a + y ) - 1 ) + *( ( a + y ) + 1 );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int sum = *( a + ( y - 1 ) ) + *( a + ( y + 1 ) );\n</code></pre>\n\n<p>that gives</p>\n\n<pre><code>int sum = a[y-1] + a[y+1];\n</code></pre>\n"}], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1507748726, "creation_date": 1507745847, "question_id": 46695001, "link": "https://stackoverflow.com/questions/46695001/accessing-the-previous-and-next-members-of-an-array-element-using-just-a-pointer", "title": "Accessing the previous and next members of an array element using just a pointer to one element", "body": "<p>(Adapted from <a href=\"https://stackoverflow.com/questions/46693934/efficient-way-to-get-the-sum-of-left-and-right-values-of-an-array-using-just-a\">this deleted question</a>.)</p>\n\n<p>Suppose we have an array <code>int a[n]</code> and we have a pointer to an element in the middle of the array (i.e. <code>int *p = &amp;a[y]</code> with 0 &lt; y &lt; n-1).</p>\n\n<p>If <code>p</code> is passed into a function where we don't have direct access to the array, how can I access the elements immediately before and after the given array element so that they can be added together?</p>\n\n<p>For example, if <code>a</code> is in scope the sum can be gotten easily like this:</p>\n\n<pre><code>int sum = a[y-1] + a[y+1];\n</code></pre>\n\n<p>But in a function where <code>a</code> is not in scope:</p>\n\n<pre><code>int sum_prev_next(int *p)\n{\n   ...\n}\n</code></pre>\n\n<p>Called like this:</p>\n\n<pre><code>sum = sum_prev_next(&amp;a[y]);\n</code></pre>\n\n<p>How can this function access the previous and next elements to return the sum?</p>\n"}, {"tags": ["c", "pointers", "malloc", "valgrind", "asprintf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507745120, "post_id": 46694764, "comment_id": 80337358, "body": "Off by 1.  <code>results = (char *)realloc(results, len*sizeof(char));</code> --&gt; <code>results = realloc(results, len+1u);</code>  Code did not account for the <i>null character</i>, so the later <code>strcat()</code> over-wrote memory."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507745339, "post_id": 46694764, "comment_id": 80337483, "body": "asprintf allocate the string, it will ignore and erase value in str1 and str2"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507745342, "post_id": 46694764, "comment_id": 80337485, "body": "First call to <code>strlen(results)</code> is a problem too.  <code>results</code> does not point to a <i>string</i>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1507745372, "post_id": 46694764, "comment_id": 80337504, "body": "Do not <code>malloc(0)</code> to initialize <code>str1</code> and <code>str2</code>.  You need not initialize them at all because <code>asprintf()</code> will assign values to them on success, but if you do initialize them then initialize them to <code>NULL</code>.  Very likely those <code>malloc()</code>s are responsible for the zero-byte blocks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507745947, "post_id": 46694764, "comment_id": 80337785, "body": "Note: <code>asprintf()</code> returns the number of bytes printed (or -1). Code could use <code>len1 = int asprintf(&amp;str1, ...); ... int len = len1 + ...</code> rather than calling <code>strlen(str1)</code> unnecessarily."}], "owner": {"reputation": 1, "user_id": 7437199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7s57p.jpg?s=128&g=1", "display_name": "Austin Rosenberg", "link": "https://stackoverflow.com/users/7437199/austin-rosenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507744936, "creation_date": 1507744936, "question_id": 46694764, "link": "https://stackoverflow.com/questions/46694764/valgrind-reports-freed-bytes-but-unfreed-blocks-after-asprintf", "title": "Valgrind reports freed bytes but unfreed blocks after asprintf()", "body": "<p>I'm aware that asprintf() allocates memory and this needs to be freed after it's called. I added free statements for the pointers provided to asprintf (after they're used), yet valgrind reports that I still have memory leaks:</p>\n\n<pre><code>==2697== HEAP SUMMARY:\n==2697==     in use at exit: 0 bytes in 12 blocks\n==2697==   total heap usage: 401 allocs, 389 frees, 15,015 bytes allocated\n==2697== \n==2697== 0 bytes in 6 blocks are definitely lost in loss record 1 of 2\n==2697==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2697==    by 0x1094BB: experiment (hw2pt2.c:235)\n==2697==    by 0x4E416C9: start_thread (pthread_create.c:333)\n==2697== \n==2697== 0 bytes in 6 blocks are definitely lost in loss record 2 of 2\n==2697==    at 0x4C2DB2F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==2697==    by 0x1094CC: experiment (hw2pt2.c:236)\n==2697==    by 0x4E416C9: start_thread (pthread_create.c:333)\n==2697== \n==2697== LEAK SUMMARY:\n==2697==    definitely lost: 0 bytes in 12 blocks\n==2697==    indirectly lost: 0 bytes in 0 blocks\n==2697==      possibly lost: 0 bytes in 0 blocks\n==2697==    still reachable: 0 bytes in 0 blocks\n==2697==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n\n<p>...so now all the bytes are freed but I still have allocated blocks? How do I fix this. Also here's the section of code where this is going on (including hw2pt2.c:235 &amp; 236, which are the asprintf lines).</p>\n\n<pre><code>char *results = (char *)malloc(0);\n  for (int i = 0; i &lt; NUM_THREADS; i++) {\n    char *str1 = (char *)malloc(0);\n    char *str2 = (char *)malloc(0);\n    asprintf(&amp;str1, \"\\tProducer Thread %d slept %d times\\n\", i, r_vals[i]);\n    asprintf(&amp;str2, \"\\tConsumer Thread %d slept %d times\\n\", i, r_vals[i+2]);\n    int len = strlen(str1)+strlen(str2)+strlen(results);\n    results = (char *)realloc(results, len*sizeof(char));\n    strcat(results, str1);\n    strcat(results, str2);\n    free(str1);\n    free(str2);\n  }\n</code></pre>\n\n<p>PS - \"*results\" is freed later in the program</p>\n"}, {"tags": ["c", "dirent.h"], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 6, "last_activity_date": 1507744367, "last_edit_date": 1507744367, "creation_date": 1507744005, "answer_id": 46694526, "question_id": 46694350, "link": "https://stackoverflow.com/questions/46694350/cant-compare-dirent-d-type-to-dt-dir/46694526#46694526", "title": "can&#39;t compare dirent-&gt;d_type to DT_DIR", "body": "<p>The macro <code>DT_DIR</code> is not part of the POSIX but a glibc extension. Define \n<code>#define _GNU_SOURCE</code> at the top before including headers to get it (or define <code>_DEFAULT_SOURCE</code> if your glibc version is >= 2.19). In fact <code>d_type</code> isn't even mentioned in POSIX's <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/dirent.h.html\" rel=\"noreferrer\">definition of <code>struct dirent</code>.</a></p>\n"}], "owner": {"reputation": 57, "user_id": 7792199, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99422a0a7b10f9fea6631e422124bd67?s=128&d=identicon&r=PG&f=1", "display_name": "raiskader", "link": "https://stackoverflow.com/users/7792199/raiskader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3146, "favorite_count": 0, "accepted_answer_id": 46694526, "answer_count": 1, "score": 2, "last_activity_date": 1507747898, "creation_date": 1507743334, "last_edit_date": 1507743997, "question_id": 46694350, "link": "https://stackoverflow.com/questions/46694350/cant-compare-dirent-d-type-to-dt-dir", "title": "can&#39;t compare dirent-&gt;d_type to DT_DIR", "body": "<p>I am trying to do a simple comparison to be able to do something if the file type read is a directory. </p>\n\n<p>Sample code :</p>\n\n<pre><code>int main()\n{\n  DIR *dir = opendir(\".\");\n  struct dirent *dirent = readdir(dir);\n  if (dirent-&gt;d_type == DT_DIR)\n    //do something\n  return 0;\n}\n</code></pre>\n\n<p>Here is says: </p>\n\n<blockquote>\n  <p><code>DT_DIR</code> not initialised</p>\n</blockquote>\n\n<p>When I try to use brackets around as such: <code>\"DT_DIR\"</code> I get the following errors:</p>\n\n<ul>\n<li><blockquote>\n  <p>comparing pointer and integer</p>\n</blockquote></li>\n<li><blockquote>\n  <p>comparison with string literal results in undefined behavior </p>\n</blockquote></li>\n</ul>\n\n<p>If I understand correctly I need to put <code>DT_DIR</code> in a <code>char</code> array? This is the first time I'm using these structs and functions.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507742771, "post_id": 46694194, "comment_id": 80336088, "body": "Formatting/indentation:("}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507742832, "post_id": 46694194, "comment_id": 80336122, "body": "search your error message on google. I sure you will find an answer."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507742937, "post_id": 46694194, "comment_id": 80336176, "body": "The string itself is stored statically, but the variable <code>s</code> is local to the function, and so will not exist when the function returns. Declare <code>s</code> to be <code>static</code>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8760548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb593a3f4960dd6355fcb3e8f80d3c82?s=128&d=identicon&r=PG&f=1", "display_name": "chirag chevli", "link": "https://stackoverflow.com/users/8760548/chirag-chevli"}, "edited": false, "score": 0, "creation_date": 1507743249, "post_id": 46694258, "comment_id": 80336338, "body": "it means that pointer variables are not stored in heap ? so they are stored in data segment?@Kilbo"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 21, "user_id": 8760548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb593a3f4960dd6355fcb3e8f80d3c82?s=128&d=identicon&r=PG&f=1", "display_name": "chirag chevli", "link": "https://stackoverflow.com/users/8760548/chirag-chevli"}, "edited": false, "score": 0, "creation_date": 1507743884, "post_id": 46694258, "comment_id": 80336653, "body": "@chiragchevli In the second case, where the variable itself is stored is unimportant.  You return its value, and the value is the address of a string constant which is not local to the function."}, {"owner": {"reputation": 21, "user_id": 8760548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb593a3f4960dd6355fcb3e8f80d3c82?s=128&d=identicon&r=PG&f=1", "display_name": "chirag chevli", "link": "https://stackoverflow.com/users/8760548/chirag-chevli"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1507744192, "post_id": 46694258, "comment_id": 80336849, "body": "thanks @WilliamPursell i got it!!"}], "tags": [], "owner": {"reputation": 73, "user_id": 6480751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04437060a8ab3add37d488aa5c9f9f89?s=128&d=identicon&r=PG&f=1", "display_name": "Kilbo", "link": "https://stackoverflow.com/users/6480751/kilbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1507742945, "creation_date": 1507742945, "answer_id": 46694258, "question_id": 46694194, "link": "https://stackoverflow.com/questions/46694194/function-return-character-pointer-in-c/46694258#46694258", "title": "Function return character pointer in C", "body": "<p>First, don't mark this C++, it's not c++. </p>\n\n<p>It throws the warning because the array you created in the first form of your function is a local variable and will be destroyed once you're outside the scope. You're returning a memory address to something that gets deleted essentially.</p>\n\n<p>The second function works because you're creating a pointer that points to the string which isn't defined locally, it's just a spot in memory that you can then use.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8760548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb593a3f4960dd6355fcb3e8f80d3c82?s=128&d=identicon&r=PG&f=1", "display_name": "chirag chevli", "link": "https://stackoverflow.com/users/8760548/chirag-chevli"}, "edited": false, "score": 0, "creation_date": 1507744367, "post_id": 46694463, "comment_id": 80336956, "body": "thanks @Jim Lewis ..Got IT!!                                                                            It means that String literal  in second case Stored in a <b>Runtime Address Space and not in Stack Segment</b> :)"}], "tags": [], "owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "is_accepted": false, "score": 2, "last_activity_date": 1507743762, "creation_date": 1507743762, "answer_id": 46694463, "question_id": 46694194, "link": "https://stackoverflow.com/questions/46694194/function-return-character-pointer-in-c/46694463#46694463", "title": "Function return character pointer in C", "body": "<p>In both cases, it is likely that the string literal itself is stored in a read-only data area in the object file, which is mapped into the program's address space.</p>\n\n<p>In the first case, storage for the string will be allocated on the stack, and the compiler will probably generate some code to make a copy of the string, stored on the stack.  When the function returns, that storage is reclaimed, and attempting to access it from outside the function, via a returned pointer into the stack, is undefined behavior, and you get a compiler warning.</p>\n\n<p>In the second case, the <em>address</em> of the string literal is stored in the <code>char *</code> variable.   It will point directly to wherever the string literal is stored in the runtime address space.  When the function returns the pointer value (note: not the address of the pointer itself, which is on the stack, but the value it holds, which is a pointer into the string storage area), the address remains valid outside the scope of the function, and the program works as expected.   </p>\n"}], "owner": {"reputation": 21, "user_id": 8760548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb593a3f4960dd6355fcb3e8f80d3c82?s=128&d=identicon&r=PG&f=1", "display_name": "chirag chevli", "link": "https://stackoverflow.com/users/8760548/chirag-chevli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 1, "closed_date": 1507744906, "answer_count": 2, "score": -1, "last_activity_date": 1507743762, "creation_date": 1507742698, "last_edit_date": 1507742770, "question_id": 46694194, "link": "https://stackoverflow.com/questions/46694194/function-return-character-pointer-in-c", "closed_reason": "Duplicate", "title": "Function return character pointer in C", "body": "<p>i m new to C Language</p>\n\n<p>this is my code:</p>\n\n<pre><code>char* getString()\n{\nchar s[] = \"Will I be printed?\"; \nreturn s;\n}\nint main()\n{\nprintf(\"%s\", getString());\ngetchar();\n}\n</code></pre>\n\n<p>it showing warning that : function returns address of local variable</p>\n\n<p>now when i code this :</p>\n\n<pre><code>char* getString()\n{\nchar *s = \"Will I be printed?\"; \nreturn s;\n}\nint main()\n{\nprintf(\"%s\", getString());\ngetchar();\n}\n</code></pre>\n\n<p>it will print the string : \"Will I be printed?\"</p>\n\n<p><strong>why is that?</strong>\nis it trur that both pointer and character array is LOCAL Variable and they stored in Stack..?</p>\n\n<p>P.S i am using <a href=\"http://ide.geeksforgeeks.org/\" rel=\"nofollow noreferrer\">http://ide.geeksforgeeks.org/</a></p>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 4, "creation_date": 1507741609, "post_id": 46693894, "comment_id": 80335487, "body": "well, despite the fact that your little example is full of bug, read default behavior is to block, he will only return 0 if the connection shutdown (you don&#39;t handle 0 in your example). You can use select(), poll(), epoll(), etc. Or put the socket in non blocking mode."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1507745758, "post_id": 46693894, "comment_id": 80337682, "body": "TCP applications usually use some kind of message delimiters. Telnet, SMTP, POP, IMAP all use &quot;\\r\\n&quot; line termination. HTTP/1.1 uses &quot;\\r\\n\\r\\n&quot; to show the end of the header block and then manages the size of the HTTP Body with Content-Length or Transfer-Encoding chunked, or it just closes the connection."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1507757191, "post_id": 46693894, "comment_id": 80343329, "body": "Note:evenauzcanbe-1:  <code>if((bytesRcvd = read(fd, &amp;buffer[aux], BUFFSIZE))&lt;0){</code> And read()returning -1 is not necessarily an error: errno could be EINTR/EAGAIN. And <code>(bytesRcvd = read(fd, &amp;buffer[aux], BUFFSIZE)</code> could overflow the buffer if more than BUFFSIZE-aux bytes are read by the second read()."}], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1507756972, "post_id": 46694346, "comment_id": 80343228, "body": "Well, the real reason is not that read() is blocking, the program could very well find the part of the message it wants (if the client sends a hint about where the message begins or ends). The <code>while(bytesRcvd&gt;0)</code> is the reason the function does not return until the client closes the connection - read() returns 0 when the connection is closed, and the code does not exit the loop until that happens."}, {"owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1507757118, "post_id": 46694346, "comment_id": 80343285, "body": "That&#39;s exactly what I mean and what I&#39;m describing... The blocking of read does not help to exit the while loop since it blocks, I already wrote that he could print the messages inside loop!!! Maybe I&#39;m not terribly clear but I don&#39;t think I writing something wrong...Anyway thanks for comment since it describes it a bit further!!"}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": true, "score": 1, "last_activity_date": 1507755618, "last_edit_date": 1507755618, "creation_date": 1507743309, "answer_id": 46694346, "question_id": 46693894, "link": "https://stackoverflow.com/questions/46693894/server-tcp-stuck-on-read/46694346#46694346", "title": "Server TCP stuck on read()", "body": "<p>Your program is reading the data in the line:</p>\n\n<pre><code>bytesRcvd = read(fd, &amp;buffer[aux], BUFFSIZE)\n</code></pre>\n\n<p>Your while loop receives the data that the client sends. If the client doesn't have data to send read will <strong>block</strong> until the connection is closed where read will <code>return 0</code> and you will exit from while loop.</p>\n\n<p>This is the reason that you think that the data are send in the end (when connection is closed). This is not right, if you print the data you read in the while loop you will see them immediately and not all of them in the end.</p>\n\n<p>Though you can't return the data before the connection is closed due to <code>read()</code> <strong>blocking</strong>.</p>\n\n<p>For one client your program may seems ok if you don't have the problem of getting data at the end (as I said you could just print them inside while loop) but imagine have two or more clients then you would firstly close connection with first client to go on and read data from second and so on.</p>\n\n<p>One solution(to both problems) is to use <code>select()</code> system call, this will go on to read only if there are data.( Though <code>select()</code> is not safe when using <code>fork()</code>- doesn't guarantee that a parent of child process will not block in read() ).</p>\n"}], "owner": {"reputation": 139, "user_id": 4891001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-kzYWFEBCrF0/AAAAAAAAAAI/AAAAAAAAAD0/w2F8G26yiIM/photo.jpg?sz=128", "display_name": "tsuo euoy", "link": "https://stackoverflow.com/users/4891001/tsuo-euoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2035, "favorite_count": 0, "accepted_answer_id": 46694346, "answer_count": 1, "score": 4, "last_activity_date": 1507755618, "creation_date": 1507741492, "question_id": 46693894, "link": "https://stackoverflow.com/questions/46693894/server-tcp-stuck-on-read", "title": "Server TCP stuck on read()", "body": "<p>I'm trying to get a server to receive messages from a client in TCP.\nThe problem is, I only receive the messages on the server side once I close the socket on the client side.</p>\n\n<p>Here is the read function on the server side:</p>\n\n<pre><code>char *read_socket(int fd){\n      int bytesRcvd, aux;\n\n      char *buffer=(char*)malloc(BUFFSIZE*sizeof(char));\n\n      bytesRcvd=read(fd, buffer , BUFFSIZE);\n      aux=bytesRcvd;\n\n      while(bytesRcvd&gt;0){\n        if((bytesRcvd = read(fd, &amp;buffer[aux], BUFFSIZE))&lt;0){\n          printf(\"read() failed!: %s\\n\", strerror(errno));\n          exit(1);\n        }\n\n        aux+=bytesRcvd;\n\n      }\n    return &amp;buffer[0];\n}\n</code></pre>\n\n<p>I know (by printfs) that it gets stuck on the line:</p>\n\n<pre><code>bytesRcvd = read(fd, &amp;buffer[aux], BUFFSIZE)\n</code></pre>\n\n<p>Any help will be greatly appreciated.</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 1166, "user_id": 1748580, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tpKt2.jpg?s=128&g=1", "display_name": "Gianlucca", "link": "https://stackoverflow.com/users/1748580/gianlucca"}, "edited": false, "score": 2, "creation_date": 1507739369, "post_id": 46693267, "comment_id": 80334208, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/25577846/program-returning-inf\">Program returning inf?</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507739378, "post_id": 46693267, "comment_id": 80334214, "body": "Read <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 6, "creation_date": 1507739427, "post_id": 46693267, "comment_id": 80334245, "body": "The first time through the loop multiples <code>result</code> by 0 (as <code>i</code> is initialised to 0), returning 0. So <code>result</code> will always equal 0. So dividing something by <code>result</code> (the next line is <code>sum = a + (i&#47;result);</code>) equals infinity."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1507739435, "post_id": 46693267, "comment_id": 80334250, "body": "Time to step through that with a debugger and see where it goes off the rails."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1507740166, "post_id": 46693267, "comment_id": 80334669, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. Or simply run the program by hand"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507743905, "post_id": 46693267, "comment_id": 80336662, "body": "It&#39;s not a great question, but it <b>is</b> clear what&#39;s being asked: &quot;<i>Why do I get <code>inf</code> rather than the finite value I expected?</i>&quot;.  And the answer is straightforward, too, as evidenced by the existing answers."}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1507744608, "last_edit_date": 1507744608, "creation_date": 1507740519, "answer_id": 46693632, "question_id": 46693267, "link": "https://stackoverflow.com/questions/46693267/why-does-my-calculation-give-inf-instead-of-a-number/46693632#46693632", "title": "Why does my calculation give &#39;inf&#39; instead of a number?", "body": "<p>The error you mention stems from the fact that you are dividing by <code>0</code>.</p>\n\n<p>You say you are trying to find the sum of factorials, but you did</p>\n\n<p><code><strike>sum = 1 + 0/0</strike>\n<strike>sum = 1 + 1/0</strike>\n<strike>sum = 1 + 2/0</strike>\n<strike>...</strike>\nsum = 1 + n/0\n</code></p>\n\n<p>instead of </p>\n\n<pre><code> sum = 0! + 1! + 2! + ... + n!\n</code></pre>\n\n<p>The number of errors is staggering! You don't perform the sum, you introduced a factor to each term where there shouldn't be any, you used the intervers of the factorial instead of the factorial, you added <code>1</code> where there shouldn't be any, and you miscalculate factorials because you made <code>0!</code> equal to <code>0</code> instead of <code>1</code>.</p>\n\n<p>Replace</p>\n\n<pre><code>result=result*i;\nsum = a + (i/result);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if (i)\n    result=result*i;\n\nsum = sum + result;\n</code></pre>\n\n<p>A simpler solution it seed the variables with the first term, then loop starting with the second. The following is that solution, using better variable names:</p>\n\n<pre><code>int N;\nint n;\nint n_fact = 1;\nint sum = 1;\n\nprintf(\"Enter the number of terms: \\n\");\nscanf(\"%d\", &amp;N);\n\nfor (n=1; n&lt;N; ++n) {\n    n_fact *= n;\n    sum += n_fact;\n}\n</code></pre>\n\n<hr>\n\n<p><i>[I originally thought you were trying to calculate </i>e<i>. In case that might actually be the case, I'm going to leave my original answer here.]</i></p>\n\n<p>The error you mention stems from the fact that you are dividing by <code>0</code>.</p>\n\n<p>You appear to be trying to approximate <em>e</em>, but you did</p>\n\n<p><code><strike>e = 1 + 0/0</strike>\n<strike>e = 1 + 1/0</strike>\n<strike>e = 1 + 2/0</strike>\n<strike>...</strike>\ne = 1 + n/0\n</code></p>\n\n<p>instead of </p>\n\n<pre><code> e = 1/(0!) + 1/(1!) + 1/(2!) + ... + 1/(n!)\n</code></pre>\n\n<p>You made quite a few errors! You don't perform the sum, you introduced a factor to each term where there shouldn't be any, you added <code>1</code> where there shouldn't be any, and you miscalculate factorials because you made <code>0!</code> equal to <code>0</code> instead of <code>1</code>.</p>\n\n<p>Replace</p>\n\n<pre><code>result=result*i;\nsum = a + (i/result);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>if (i)\n    result=result*i;\n\nsum = sum + (1/result);\n</code></pre>\n\n<p>A simpler solution it seed the variables with the first term, then loop starting with the second. The following is that solution, using better variable names:</p>\n\n<pre><code>int N;\nint n;\nint n_fact = 1;\nfloat e = 1;\n\nprintf(\"Enter the number of terms: \\n\");\nscanf(\"%d\", &amp;N);\n\nfor (n=1; n&lt;N; ++n) {\n    n_fact *= n;\n    e += 1 / n_fact;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8155912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a51a82e4e5332b4270ad8d8c1b57512?s=128&d=identicon&r=PG&f=1", "display_name": "Divan_Cyph", "link": "https://stackoverflow.com/users/8155912/divan-cyph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1507807534, "creation_date": 1507739289, "last_edit_date": 1507744191, "question_id": 46693267, "link": "https://stackoverflow.com/questions/46693267/why-does-my-calculation-give-inf-instead-of-a-number", "title": "Why does my calculation give &#39;inf&#39; instead of a number?", "body": "<p>This code is meant to compute the mathematical constant <em>e</em> by adding inverse factorials:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\n    int i, n,a;\n    float result=1;\n    float sum;\n    a=1;\n    sum=0;\n    printf(\"Enter a number:\\n\");\n    scanf(\"%d\",&amp;n);\n\n    for (i=0;i&lt;=n-1;i++)\n    {\n        result=result*i;\n        sum = a + (i/result);\n\n    }\n\n    printf(\"%.2f is the answer\\n\",sum );\n</code></pre>\n\n<p>}</p>\n\n<p>Instead of giving the value of <em>e</em>, it produces <code>inf is the answer</code>. </p>\n\n<p>Why do I get <code>inf</code> instead of <code>2.78</code>?</p>\n"}, {"tags": ["c", "16-bit", "integer-arithmetic", "integer-promotion"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1507738683, "post_id": 46693053, "comment_id": 80333806, "body": "To format code all you have to do is indent with four spaces."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1507738715, "post_id": 46693053, "comment_id": 80333835, "body": "How do you know what the result is? The code as is is not doing anything and I would just optimize this stuff away if I was your compiler."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1507738745, "post_id": 46693053, "comment_id": 80333851, "body": "Your compiler might be throwing away <code>x</code> since it&#39;s never used. What&#39;s the size of <code>unsigned long int</code>?"}, {"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 1, "creation_date": 1507738783, "post_id": 46693053, "comment_id": 80333869, "body": "How do you know that the result is 0? Are you using a watch in a debugger?"}, {"owner": {"reputation": 21, "user_id": 8760195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1869820919709920/picture?type=large", "display_name": "Mohamed Zaky", "link": "https://stackoverflow.com/users/8760195/mohamed-zaky"}, "edited": false, "score": 1, "creation_date": 1507738878, "post_id": 46693053, "comment_id": 80333923, "body": "i am using keil debugger to get the result and the size of unsigned long int is 32 bit"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1507743933, "post_id": 46693053, "comment_id": 80336682, "body": "See also <a href=\"https://stackoverflow.com/a/40637622/2410359\">reasons not to use 1000 * 1000 * 1000</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507744131, "post_id": 46693053, "comment_id": 80336808, "body": "Could use <code>x = 0x8000; x *= 2;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1507739181, "post_id": 46693143, "comment_id": 80334099, "body": "The suffix is not required for last 3 standard revisions at least. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.1p5\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.4.4.1p5</a> . The constants will have the least type they will fit in."}, {"owner": {"reputation": 21, "user_id": 8760195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1869820919709920/picture?type=large", "display_name": "Mohamed Zaky", "link": "https://stackoverflow.com/users/8760195/mohamed-zaky"}, "edited": false, "score": 0, "creation_date": 1507739407, "post_id": 46693143, "comment_id": 80334236, "body": "i am multiplying 2 16 bit numbers and assigning the result in 32 bit variable"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1507739874, "post_id": 46693143, "comment_id": 80334500, "body": "@EugeneSh. the suffix is required because unsigned int is <b>16 bits</b>, and unsigned ints are <b>not</b> promoted in arithmetic."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507740506, "post_id": 46693143, "comment_id": 80334864, "body": "@AnttiHaapala Right. Your answer is explaining it well."}], "tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1507738913, "creation_date": 1507738913, "answer_id": 46693143, "question_id": 46693053, "link": "https://stackoverflow.com/questions/46693053/8051-16-bit-addition-multiplication-result-16-bit-instead-of-32-bit/46693143#46693143", "title": "8051 16 bit addition/multiplication result 16 bit instead of 32 bit", "body": "<p>It is not clear way (or that) the variable x should be 0x10000. x is a <code>unsigned long int</code>, but the values you assign to it are <code>unsigned int</code>. And if on that platform <code>int</code> is only 16 bit, both <code>0x8000 * 2</code> and <code>0x8000 + 0x8000</code> are 0.</p>\n\n<p>Try using <code>0x8000L</code> (or better <code>0x8000UL</code>) for creating long literals at the first place.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 21, "user_id": 8760195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1869820919709920/picture?type=large", "display_name": "Mohamed Zaky", "link": "https://stackoverflow.com/users/8760195/mohamed-zaky"}, "edited": false, "score": 0, "creation_date": 1507741447, "post_id": 46693522, "comment_id": 80335399, "body": "@MohamedZaky you might consider <a href=\"https://meta.stackexchange.com/a/5235/190417\">accepting this answer then</a> ;)"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 6, "last_activity_date": 1507740683, "last_edit_date": 1507740683, "creation_date": 1507740133, "answer_id": 46693522, "question_id": 46693053, "link": "https://stackoverflow.com/questions/46693053/8051-16-bit-addition-multiplication-result-16-bit-instead-of-32-bit/46693522#46693522", "title": "8051 16 bit addition/multiplication result 16 bit instead of 32 bit", "body": "<p>The literal <code>0x8000</code> is of type <strong><code>unsigned int</code></strong>. On your 16-bit machine, the <code>int</code> and therefore <code>unsigned int</code> is of the natural size of 16 bits, the smallest accepted by the C standard. The integer promotion rules say that the smaller width types are widened to <code>int</code> or <code>unsigned int</code>, but no further <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.1.1p2\" rel=\"nofollow noreferrer\">(C11 n1570 6.3.1.1p2)</a>:</p>\n\n<blockquote>\n  <p>If an <code>int</code> can represent all values of the original type (as restricted by the width, for a bit-field), the value is converted to an <code>int</code>; otherwise, it is converted to an <code>unsigned int</code>. These are called the integer promotions. 58) All other types are unchanged by the integer promotions. </p>\n</blockquote>\n\n<p>An operand is widened from <code>int</code> or <code>unsigned int</code> only if the <em>other</em> operand has a greater rank.</p>\n\n<p>Here, <code>0x8000</code> + <code>0x8000</code> is calculated using <code>unsigned int</code> which will wrap to 0, because the maximum value that can be represented in <code>unsigned int</code> is <code>0xFFFF</code>.</p>\n\n<p>You should force at least one of the operands to <strong><code>unsigned long</code></strong> using either the suffix <code>UL</code>, or by adding an explicit cast:</p>\n\n<pre><code>int main() {\n    unsigned long int x=0;\n    /* unsigned long int * int */\n    x = 0x8000UL * 0x2;\n\n    /* unsigned long + unsigned int */\n    x = (unsigned long)0x8000 + 0x8000;\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>See also <a href=\"https://stackoverflow.com/q/2280663/918959\">In a C expression where unsigned int and signed int are present, which type will be promoted to what type?</a> for general discussion.</p>\n"}], "owner": {"reputation": 21, "user_id": 8760195, "user_type": "registered", "profile_image": "https://graph.facebook.com/1869820919709920/picture?type=large", "display_name": "Mohamed Zaky", "link": "https://stackoverflow.com/users/8760195/mohamed-zaky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 46693522, "answer_count": 2, "score": -2, "last_activity_date": 1507741032, "creation_date": 1507738583, "last_edit_date": 1507741032, "question_id": 46693053, "link": "https://stackoverflow.com/questions/46693053/8051-16-bit-addition-multiplication-result-16-bit-instead-of-32-bit", "title": "8051 16 bit addition/multiplication result 16 bit instead of 32 bit", "body": "<p>I have a problem. In this program the variable x should be set to 0x10000 but in both operations the result is 0. </p>\n\n<p>This is not the main program but a test to find the reason for the error. I am currently making a 64 bit multiplier with hex input. I used 16-bit multiplication using Keil and Proteus </p>\n\n<pre><code>int main() {\n    unsigned long int x = 0;\n    x = 0x8000 * 0x2;\n    x = 0x8000 + 0x8000;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1507734977, "post_id": 46691744, "comment_id": 80331405, "body": "<code>failed to open file</code> is the canonical example of a useless error message.  It does not name the file, and it does not give the reason for the failure.  Try <code>f=fopen(path, mode); if(f == NULL) {perror(path); ....</code>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507735014, "post_id": 46691744, "comment_id": 80331430, "body": "You cannot <i>insert</i> text (or any non-empty data) <i>inside</i> a file. You could copy parts of that file in a new one. Youn can just append data, or overwrite existing data, in a file. You might be interested in libraries like <a href=\"http://sqlite.org/\" rel=\"nofollow noreferrer\">SQLite</a> or <a href=\"http://www.gnu.org.ua/software/gdbm/\" rel=\"nofollow noreferrer\">GDBM</a> which give a higher-level abstraction than files."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1507735232, "post_id": 46691744, "comment_id": 80331572, "body": "BTW, SO is not a <i>fix-my-code</i> service. so your question is off-topic. State a clear question and provide some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Compile your code with all warnings and debug info (<code>gcc -Wall -Wextra -g</code>) and <b>use the debugger</b> <code>gdb</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1507736245, "post_id": 46691744, "comment_id": 80332296, "body": "these <code>goto</code>s look like the <b>bad</b> (spaghetti) kind of <code>goto</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1507735845, "last_edit_date": 1507735845, "creation_date": 1507735541, "answer_id": 46692117, "question_id": 46691744, "link": "https://stackoverflow.com/questions/46691744/inserting-text-into-a-txt-file/46692117#46692117", "title": "Inserting text into a txt file", "body": "<p>You have declared <code>int char_line;</code> and later you code</p>\n\n<pre><code>    char_line =\"%d\";\n</code></pre>\n\n<p>This is <strong>nonsense</strong>. Since a literal string is some <code>char[]</code> array (better think of it as some constant array), decayed to a pointer, and assigning a pointer to an <code>int</code> does not make sense at all. On many machines (x86-64 notably), a pointer has 64 bits but an <code>int</code> has only 32 bits.</p>\n\n<p>Please, compile your code with all warnings and debug info, so <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>, improve your code to get no warnings, then <strong>use the debugger</strong> <a href=\"https://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\"><code>gdb</code></a>.</p>\n\n<p>Take several days to read some good books on C programming. Be aware and work hard to avoid <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>. Use the debugger to run your program step by step and query its state to understand what is happening.</p>\n\n<p>Read the <a href=\"http://en.cppreference.com/w/c\" rel=\"nofollow noreferrer\">documentation</a> of every standard function you are using such as <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">fgets</a>.</p>\n\n<p>You probably want a loop that reads every line, and copies <em>sometimes</em> that line to another file.</p>\n"}], "owner": {"reputation": 1, "user_id": 8759587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/473b0e01c3471e09632b64af99d5ff1a?s=128&d=identicon&r=PG&f=1", "display_name": "D. Bana", "link": "https://stackoverflow.com/users/8759587/d-bana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1507737706, "creation_date": 1507734461, "last_edit_date": 1507737706, "question_id": 46691744, "link": "https://stackoverflow.com/questions/46691744/inserting-text-into-a-txt-file", "title": "Inserting text into a txt file", "body": "<p><strong>I'm trying to accomplish the following:</strong></p>\n\n<p>I have a text file with the last printable character \"]\" in a separate line.\n<br>This line is not necessary to be the last line of the file. Some blank lines (line returns) can be there.</p>\n\n<p>The purpose of the project is to insert new text before the line with \"]\".<br>\nThe way I try to implement this is to search the file from the end of the file to find the line number with the character \"]\" (char_line).\nCopy line by line from the original file rules1.txt to rules2.txt up to the line char_line. Next step is to append the new text with \"]\" at the end.\nAfter that, I can delete the original file and rename the new file from rules2.txt to rules1.txt. </p>\n\n<p><strong>The problem</strong> I have is that the program finds the line with the character \"]\" and I can do a printf and see the correct line number.\nI am assigning char_line = \"%d\".\nWhen I'm using if(i &lt; char_line) the file is copied all the way to EOF.\nIf I assign a numerical value, char_line = 23, the file is copied up to line 22, which is what I want.\nThis is the part of the code which should find line number for \"]\", copy line by line rules1.txt to rules2.txt up the line with \"]\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(void) {\n    int end, loop, line;\n    char str[64];\n\n    FILE *file; \n    FILE *write;\n    int char_line;\n    int ret;\n\n\n    file = fopen(\"rules1.txt\", \"r\");\n    if (file == NULL) {\n        printf(\"Failed to open file\\n\");\n        return -1;\n    }\n    int ch, line_num = 0;\n\n    do {\n        ch = fgetc(file);\n        if(ch == '\\n')\n        line_num++;\n    } while (ch != EOF);\n\n    // last line doesn't end with a new line!\n    // but there has to be a line at least before the last line\n    if(ch != '\\n' &amp;&amp; line_num != 0) \n        line_num++;\n\n    fclose(file); \n    line = line_num-1;\n\nstart:\n\n    file = fopen(\"rules1.txt\", \"r\");\n    if (file == NULL) {\n        printf(\"Failed to open file\\n\");\n        return -1;\n    }\n\n\n    for(end = loop = 0;loop&lt;line;++loop){\n        if(0==fgets(str, sizeof(str), file)){//include '\\n'\n            end = 1;//can't input (EOF)\n            break;\n        }\n    }\n\n    if(!end)\n        if (strncmp (\"]\", str, 1) == 0){ \n            char_line =\"%d\";\n            goto next;\n        } else if(line &gt;1){\n            line == line--;//WTF?\n            fclose(file);\n            goto start;\n        } else //What to do here?\n\nnext:\n\n    file = fopen(\"rules1.txt\", \"r\");\n    write = fopen(\"rules2.txt\", \"w\");   \n    char linec [64]; /* line size */\n    int i = 0;\n\n    while (fgets(linec, sizeof(linec), file)) {  /* read line from file */\n        i++;\n        if(i &lt; char_line) {\n            fprintf (write , linec); /* write line to file */\n        }\n    }\n\n    fclose(file);\n    fclose(write);\n\n    return(0);   \n}  \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1507738002, "post_id": 46691621, "comment_id": 80333435, "body": "You&#39;ll want to re-read the section of your textbook that describes <b>arrays</b>."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1507734253, "creation_date": 1507734253, "answer_id": 46691673, "question_id": 46691621, "link": "https://stackoverflow.com/questions/46691621/square-brackets-in-nested-c-structures/46691673#46691673", "title": "Square brackets in (nested) C structures", "body": "<p>Square brackets are the array indexing operator.</p>\n\n<p>Essentially for any pointer <code>p</code> and integer index <code>i</code>, <code>p[i]</code> is the same as <code>*(p + i)</code>. It de-references the indexed element, indexing from the base at <code>p</code>.</p>\n\n<p>This has nothing to do with the fact that the arrays are in structures to which you also have pointers.</p>\n\n<p>So <code>gindex</code> is an array of structures in some structure to which you have a pointer named <code>aaa</code>. The element at index <code>aaa-&gt;elp_pos</code> is de-referenced, and that structure's <code>parameter</code> array's element at index <code>aaa-&gt;no_elp</code> is assigned to.</p>\n\n<p>It's a complex line of code, but it's not doing anything complicated. :)</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1507734399, "creation_date": 1507734399, "answer_id": 46691728, "question_id": 46691621, "link": "https://stackoverflow.com/questions/46691621/square-brackets-in-nested-c-structures/46691728#46691728", "title": "Square brackets in (nested) C structures", "body": "<p>Square brackets in expressions are used to index into arrays. For example...</p>\n\n<pre><code>int my_array[10];\nmy_array[0]=68;\n</code></pre>\n\n<p>In your example <code>gindex</code>, <code>parameter</code> and <code>obs</code> are all arrays of some unknown type. The only thing we can tell about them, is that they're not arrays of pointers as their elements are accessed with \".\" rather than \"->\"</p>\n"}, {"tags": [], "owner": {"reputation": 425, "user_id": 8119002, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jdJBu.jpg?s=128&g=1", "display_name": "pierreafranck", "link": "https://stackoverflow.com/users/8119002/pierreafranck"}, "is_accepted": false, "score": 0, "last_activity_date": 1507734525, "creation_date": 1507734525, "answer_id": 46691769, "question_id": 46691621, "link": "https://stackoverflow.com/questions/46691621/square-brackets-in-nested-c-structures/46691769#46691769", "title": "Square brackets in (nested) C structures", "body": "<p>In C, Square Brackets are the array indexing operator. </p>\n\n<p>For exemple take a <strong>char *str</strong> which is a pointer on a string. </p>\n\n<p>If you want to print the \"n\" character of this string you need to do it </p>\n\n<blockquote>\n  <p>String:</p>\n</blockquote>\n\n<pre><code>char *str = \"Hello World\";\n</code></pre>\n\n<blockquote>\n  <p>You want to print the \"W\" so you have to do it:</p>\n</blockquote>\n\n<pre><code>print(\"%c\", str[6]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1507735741, "creation_date": 1507735741, "answer_id": 46692184, "question_id": 46691621, "link": "https://stackoverflow.com/questions/46691621/square-brackets-in-nested-c-structures/46692184#46692184", "title": "Square brackets in (nested) C structures", "body": "<p>Square brackets are array indexing operators.  </p>\n\n<p>Based on that expression, the following must be true:</p>\n\n<ul>\n<li><p><code>aaa</code> is a pointer to some struct type, we'll call it <code>struct A</code>.</p></li>\n<li><p><code>struct A</code> contains at least the following members: <code>gindex</code>, <code>elp_pos</code>, and <code>no_elp</code>.  </p></li>\n<li><p><code>gindex</code> is an array of or pointer to another <code>struct</code> type, we'll call it <code>struct B</code>.  </p></li>\n<li><p><code>elp_pos</code> and <code>no_elp</code> are used as array indices, so they must have some integral type <em><code>I</code></em>. </p></li>\n<li><p><code>struct B</code> contains at least the member <code>parameter</code>, which is an array of or pointer to some type <em><code>T</code></em>.  </p></li>\n<li><p><code>sin</code> is a pointer to some struct type, we'll call it <code>struct C</code>.  </p></li>\n<li><p><code>struct C</code> contains at least the member <code>obs</code>.</p></li>\n<li><p><code>obs</code> is an array of or pointer to some <code>struct</code> type, we'll call it <code>struct D</code>.  </p></li>\n<li><p><code>struct D</code> contains at least the member <code>type_enu</code>, which is either the same type <em><code>T</code></em> as the <code>parameter</code> array in <code>struct B</code>, or a type compatible with <em><code>T</code></em>.</p></li>\n<li><p><code>counter1</code> is used as an array index, so it must have some integral type <em><code>I</code></em>.</p></li>\n</ul>\n\n<p>Thus, our types look something like the following:</p>\n\n<pre><code>struct D \n{\n  ... \n  <em>T</em> type_enu;\n  ...\n};\n\nstruct C\n{\n  ...\n  struct D obs[N]; // or struct D *obs;\n  ...\n};\n\nstruct B\n{\n  ...\n  <em>T</em> parameter[N]; // or <em>T</em> *parameter;\n  ...\n};\n\nstruct A\n{\n  ...\n  <em>I</em> elp_pos;\n  <em>I</em> no_elp;\n  struct B gindex[N]; // or struct B *gindex\n  ...\n};\n\nstruct A *aaa;\nstruct C *sin;\n<em>I</em> counter1;\n...\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7512832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f27688c7e2c6af2394d4e6ebd7025a5?s=128&d=identicon&r=PG&f=1", "display_name": "Layla_K", "link": "https://stackoverflow.com/users/7512832/layla-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 46692184, "answer_count": 4, "score": -4, "last_activity_date": 1507735741, "creation_date": 1507734117, "question_id": 46691621, "link": "https://stackoverflow.com/questions/46691621/square-brackets-in-nested-c-structures", "title": "Square brackets in (nested) C structures", "body": "<p>This could sound very basic but I would like to know what the square brackets represent in a C code like this. I do not have information about the types of the structure elements for structure \"aaa\" and I am trying to understand it from the code. Does it have to necessarily represent array indexing or it can be different things related to structures?</p>\n\n<p>I understood it like this: \"->\" means that gindex is an element of structure aaa, then the bracket and then parameter is an element of whatever bracket represents and then again the square bracket.</p>\n\n<pre><code>aaa-&gt;gindex[aaa-&gt;elp_pos].parameter[aaa-&gt;no_elp] = sin-&gt;obs[counter1].typ_enu;\n</code></pre>\n"}, {"tags": ["c", "linux", "shell", "operating-system", "system-calls"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1507734263, "post_id": 46691574, "comment_id": 80330917, "body": "Possibly related: you have to <code>NULL</code> terminate your argument list."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1507734316, "post_id": 46691574, "comment_id": 80330946, "body": "your tokenizing loop is highly suspicious. I think it could be infinite if more than 2 arguments. And it doesn&#39;t terminate by NULL."}, {"owner": {"reputation": 13, "user_id": 8759589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b656346bf08e33d202d4bf76ea871212?s=128&d=identicon&r=PG&f=1", "display_name": "JM Lee", "link": "https://stackoverflow.com/users/8759589/jm-lee"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507740735, "post_id": 46691574, "comment_id": 80334977, "body": "Thanl you. I fixed and succeed to seperate it, but the loop never ends. Can you tell me what is matter? When I try to print each argv, it can print to the last argument but still stay in while loop."}, {"owner": {"reputation": 13, "user_id": 8759589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b656346bf08e33d202d4bf76ea871212?s=128&d=identicon&r=PG&f=1", "display_name": "JM Lee", "link": "https://stackoverflow.com/users/8759589/jm-lee"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507884515, "post_id": 46691574, "comment_id": 80397993, "body": "Thank you so much for your answer! It was very helpful and I understood my fault. Thank you"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507887269, "post_id": 46691574, "comment_id": 80399593, "body": "you can accept the answer if it was helpful. <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1507741607, "creation_date": 1507741607, "answer_id": 46693916, "question_id": 46691574, "link": "https://stackoverflow.com/questions/46691574/simple-shell-in-c-waitpid-system-call-not-working/46693916#46693916", "title": "simple shell in c: waitpid system call not working", "body": "<p>the way you're tokenizing the string is very wrong. There's a lot of <code>strtok</code> calls, and your loop can be an infinite loop since you're calling <code>strtok</code> in the loop with the initialization string, not <code>NULL</code></p>\n\n<p>Plus you're not setting to <code>NULL</code> after the last argument, which is required by <code>execv</code> to know when the arguments have run out (no size is passed)</p>\n\n<p>Here's a standalone example and a proper <code>readACommand</code> routine:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar *argv[100];\n\nvoid readACommand(char *line){ //line takes string's name.\n    int i=0;\n\n    argv[i]=strtok(line,\" \"); //i==0\n    while(argv[i]!=NULL){\n        argv[++i]=strtok(NULL,\" \");\n    }\n}\n\nint main()\n{\n   char line[] = \"this is a command\";\n   char **ptr=argv;\n\n   readACommand(line);\n   while(*ptr != NULL)\n   {\n      printf(\"Arg: %s\\n\",*ptr);\n      ptr++;\n   }\n   return 0;\n}\n</code></pre>\n\n<p>executing (detecting the <code>NULL</code> pointer in the end):</p>\n\n<pre><code>Arg: this\nArg: is\nArg: a\nArg: command\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8759589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b656346bf08e33d202d4bf76ea871212?s=128&d=identicon&r=PG&f=1", "display_name": "JM Lee", "link": "https://stackoverflow.com/users/8759589/jm-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 46693916, "answer_count": 1, "score": 0, "last_activity_date": 1507741607, "creation_date": 1507734006, "question_id": 46691574, "link": "https://stackoverflow.com/questions/46691574/simple-shell-in-c-waitpid-system-call-not-working", "title": "simple shell in c: waitpid system call not working", "body": "<p>I have to make simple shell which read commands and execute them in order. condition is not changing the form of main function, and execute function should be recursive.\nmain problem is that it seems waitpid doesn't work. but I know, there are so many problem in my code. please let me know where I should start from.. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#define MAX 10\n\nchar cmmd[MAX][256];\nint sp;\nchar *argv[10];\nint size;\n\nvoid ClearLineFromReadBuffer(void){\n    while(getchar() != '\\n');\n}\nvoid printCommands(){\n    size = sp+1;\n    //print by moving stack pointer\n    while(1){\n        if (sp==-1) break;\n        printf(\"Command line : %s\\n\", cmmd[sp]);\n        sp--;\n    }\n    printf(\"print end\\n\");\n}\n\n\n\nvoid readCommandLines(){\n    int a = 0; //return of scanf\n    while (1){ //write commends to cmmd untill get ctrl+d\n        printf(\"&gt;\");\n        a = (scanf(\"%[^\\n]s\", cmmd[sp])); //take input to str untill get enter(scanf returns -1)\n        if (a==-1) {sp--; break;}\n        if (a==1) ClearLineFromReadBuffer();\n        if (a==0) {printf(\"error\"); break;}\n        sp++;\n    }\n    printf(\"\\n\");\n}\n\nvoid readACommand(char *line){ //line takes string's name.\n    int i=0;\n\n    argv[i]=strtok(line,\" \"); //i==0\n    while(strtok(line,\" \")!=NULL){\n        i++;\n        argv[i]=strtok(NULL,\" \");\n    }\n    printf(\"%s\",argv[0]);\n    printf(\"%s\",argv[1]);\n}\n\nvoid executeCommands(){ //Recursive function\n    int n = sp;\n    n++;\n    printf(\"%d\",n);\n    printf(\"%s\",cmmd[n]);\n    char *cmd_line = cmmd[n]; //command line which child process will execute\n\n    unsigned int child_pid; //fork() returns process id of child in parents process\n    int status; //status takes return of child's exit()\n    child_pid=fork();\n    if (child_pid != 0){ // Parents process\n        printf(\"parents access\");\n        waitpid(child_pid,&amp;status,0);\n        printf(\"***Process %d Child process %d DONE with status %x\\n\\n\",getpid(),child_pid,status);\n\n        sp++;\n        if(sp&lt;size)\n            executeCommands();\n    }\n    else if (child_pid == 0){ //fork() returns 0 in child process\n        printf(\"***Process %d Executing Command %s\",getpid(),cmd_line);\n        readACommand(cmmd[n]);\n        execve(argv[0],argv,NULL);\n        printf(\"ERROR - not executing command \\\"%s\\\"\\n\",argv[0]); //can be printed because exec() failed\n    }\n}\n\nint main(){\n    readCommandLines();\n    printCommands();\n    executeCommands();\n    return(0);\n}\n</code></pre>\n\n<p>this is outcome.\n<a href=\"https://i.stack.imgur.com/uELf5.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c", "string", "while-loop", "printf"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1507733918, "post_id": 46691488, "comment_id": 80330667, "body": "This is called <i>line buffering</i>. Try <code>printf(&quot;Some stuff\\n&quot;);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 5934952, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6s8o2.jpg?s=128&g=1", "display_name": "Tagadac", "link": "https://stackoverflow.com/users/5934952/tagadac"}, "edited": false, "score": 0, "creation_date": 1507799034, "post_id": 46691548, "comment_id": 80357761, "body": "Thank you for the clarification"}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": true, "score": 3, "last_activity_date": 1507733960, "creation_date": 1507733960, "answer_id": 46691548, "question_id": 46691488, "link": "https://stackoverflow.com/questions/46691488/disappearing-printf-befor-whiletrue/46691548#46691548", "title": "Disappearing printf befor while(true)", "body": "<p>It is called buffering - you need to flush the buffer</p>\n\n<p>Use</p>\n\n<pre><code>fflush(stdout);\n</code></pre>\n\n<p>after the <code>printf</code> to do this.</p>\n"}], "owner": {"reputation": 363, "user_id": 5934952, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6s8o2.jpg?s=128&g=1", "display_name": "Tagadac", "link": "https://stackoverflow.com/users/5934952/tagadac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1507734045, "accepted_answer_id": 46691548, "answer_count": 1, "score": -1, "last_activity_date": 1507733960, "creation_date": 1507733811, "question_id": 46691488, "link": "https://stackoverflow.com/questions/46691488/disappearing-printf-befor-whiletrue", "closed_reason": "Duplicate", "title": "Disappearing printf befor while(true)", "body": "<p>I had to do a little test in my code so I wrote something like this :</p>\n\n<pre><code>printf(\"Some stuff\");\nwhile(true){\n    //Some other stuff\n}\n</code></pre>\n\n<p>But my printf was absent in my terminal.</p>\n\n<p>Adding <strong>\\n</strong> at the end of my string solved the problem.</p>\n\n<p>Why did my printf disappeared ?  </p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 7, "creation_date": 1507733692, "post_id": 46691408, "comment_id": 80330500, "body": "1. Don&#39;t post images of code 2. What is &quot;C Objective&quot;?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1507733826, "post_id": 46691408, "comment_id": 80330599, "body": "Be aware that in all programming languages I&#39;m aware of, the expression <code>-0</code> is exactly the same as <code>+0</code> which is exactly the same as <code>0</code>. BTW it&#39;s also pretty basic maths."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507733976, "post_id": 46691408, "comment_id": 80330713, "body": "I guess if we mentally cancel the word <i>objective</i>, the question makes sense."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507734103, "post_id": 46691408, "comment_id": 80330810, "body": "@MichaelWalz don&#39;t overlook the famous <a href=\"https://en.wikipedia.org/wiki/Signed_zero\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Signed_zero</a> :)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 3, "creation_date": 1507734117, "post_id": 46691408, "comment_id": 80330816, "body": "&quot;...it gives result as the last if statement regardless the if statement is&quot; Can you clarify that a bit, e.g. tell exactly the result it gives"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507734388, "post_id": 46691408, "comment_id": 80330983, "body": "I would expect the input <code>-0</code> to result in <code>Zero can not be negative</code>"}, {"owner": {"reputation": 23, "user_id": 5908394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u19dCM-MVtk/AAAAAAAAAAI/AAAAAAAAAFQ/Q6lAqhR871Y/photo.jpg?sz=128", "display_name": "Sezer Toker", "link": "https://stackoverflow.com/users/5908394/sezer-toker"}, "edited": false, "score": 0, "creation_date": 1507741395, "post_id": 46691408, "comment_id": 80335377, "body": "I didnt had the code, as I said, a friend of mine sent this code to me as image. Really guys please try to be more tolerant to newbies. Otherwise this is not helping but satisfacting your ego."}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1507734713, "post_id": 46691761, "comment_id": 80331199, "body": "May be worth to add: a) <code>if (grade == -0)</code> is the same as <code>if (grade == 0)</code> and b) input <code>-0</code> will also display <code>Zero can not be negative</code>"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1507734502, "creation_date": 1507734502, "answer_id": 46691761, "question_id": 46691408, "link": "https://stackoverflow.com/questions/46691408/c-objective-something-wrong-with-if-statement/46691761#46691761", "title": "C objective something wrong with if statement", "body": "<p>The concept of <em>negative zero</em> doesn't exist in the C language (and all other languages I'm aware of).</p>\n\n<p>So if you enter <code>0</code>, the expression <code>grade == -0</code> will be true and therefore your program will display <code>Zero can not be negative</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5908394, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u19dCM-MVtk/AAAAAAAAAAI/AAAAAAAAAFQ/Q6lAqhR871Y/photo.jpg?sz=128", "display_name": "Sezer Toker", "link": "https://stackoverflow.com/users/5908394/sezer-toker"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1507735387, "answer_count": 1, "score": -12, "last_activity_date": 1507734502, "creation_date": 1507733614, "question_id": 46691408, "link": "https://stackoverflow.com/questions/46691408/c-objective-something-wrong-with-if-statement", "closed_reason": "Not suitable for this site", "title": "C objective something wrong with if statement", "body": "<p><a href=\"https://i.stack.imgur.com/yGidv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yGidv.png\" alt=\"the code\"></a></p>\n\n<p><strong>This code written in c objective with Visual Studio</strong></p>\n\n<p>Today a friend of mine sent this code. In university they tried to make a grade calculation program. <strong>The problem is when you write -0 to input and press enter it gives result as the last if statement regardless the if statement is.</strong></p>\n\n<p>Same conclusion appears when you write +0 etc.\nWhy this is happening any ideas? Thanks in advance.</p>\n"}, {"tags": ["c", "linux", "logging", "linux-kernel"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1507733050, "post_id": 46691153, "comment_id": 80330077, "body": "No. Btw, for monitoring on linux, use <code>inotify</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1507733181, "post_id": 46691153, "comment_id": 80330152, "body": "Note: syslog works over a network(UDP, IIRC) It is possible to ship the log messages to a remote machine, and store them there (as well) And, you can even set up your own receiver for the messages."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507733222, "post_id": 46691153, "comment_id": 80330179, "body": "I guess you&#39;re asking for an API that abstracts read access to log files.  There is none.  To read logs you must open the file -- wherever it is, which is not necessarily on the system(s) that generates the log messages."}, {"owner": {"reputation": 11, "user_id": 8759324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972259a2f16dc7d8fcefd1f1dc421b83?s=128&d=identicon&r=PG&f=1", "display_name": "codex", "link": "https://stackoverflow.com/users/8759324/codex"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1507744654, "post_id": 46691153, "comment_id": 80337128, "body": "@wildplasser Thank you very much for your answer! Do you know how i can accomplish this, or do you have any source where i can read more about how i can do this in c?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1507745634, "post_id": 46691153, "comment_id": 80337620, "body": "<a href=\"https://tools.ietf.org/html/rfc3164\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc3164</a> 1) syslogd has a config file . 2) setting up an UDP-receiver is relatively easy."}], "answers": [{"tags": [], "owner": {"reputation": 112081, "user_id": 2231815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1597c347e309f696ff1738128444702b?s=128&d=identicon&r=PG", "display_name": "rakib_", "link": "https://stackoverflow.com/users/2231815/rakib"}, "is_accepted": false, "score": 0, "last_activity_date": 1507733359, "creation_date": 1507733359, "answer_id": 46691325, "question_id": 46691153, "link": "https://stackoverflow.com/questions/46691153/linux-c-program-is-there-another-way-to-read-logs-than-reading-files-in-var-log/46691325#46691325", "title": "linux c program is there another way to read logs than reading files in /var/log?", "body": "<p>An alternate is to use either <code>/proc/kmsg</code> or <code>/dev/kmsg</code>. User cannot modify these sources of logs. Format will be a bit different but you can change your program to adapt it.</p>\n"}], "owner": {"reputation": 11, "user_id": 8759324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/972259a2f16dc7d8fcefd1f1dc421b83?s=128&d=identicon&r=PG&f=1", "display_name": "codex", "link": "https://stackoverflow.com/users/8759324/codex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507733359, "creation_date": 1507732909, "question_id": 46691153, "link": "https://stackoverflow.com/questions/46691153/linux-c-program-is-there-another-way-to-read-logs-than-reading-files-in-var-log", "title": "linux c program is there another way to read logs than reading files in /var/log?", "body": "<p>Hello dear community of stackoverflow,</p>\n\n<p>at the moment im programming a tool in c that monitors the linux log files which can be found in /var/log, the c program reads the logs directly from the log files\nbut reading the log files from an c program is is not very good because the user can manipulate log files or the logs got saved in different file e.g. instead it got saved in syslog it got saved in syslog.1.</p>\n\n<p>Because of this disadvantages i want to ask if there is any alternative in linux instead of reading the files?\nMaybe it is possible with an kernel module that catches these logs?</p>\n\n<p>Thank you for any answer!</p>\n"}, {"tags": ["c", "graphics", "compiler-errors", "codeblocks", "turbo-c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1507729946, "post_id": 46689958, "comment_id": 80327769, "body": "Post the error you are getting."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 8, "creation_date": 1507729964, "post_id": 46689958, "comment_id": 80327785, "body": "Turbo C++? BGI? I think you should take a look at the calendar. Its the wrong millennia."}, {"owner": {"reputation": 65, "user_id": 8143784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tL7FAIAPP0/AAAAAAAAAAI/AAAAAAAAAJg/RE6qtnfm7JE/photo.jpg?sz=128", "display_name": "Harsh patel", "link": "https://stackoverflow.com/users/8143784/harsh-patel"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1507730550, "post_id": 46689958, "comment_id": 80328255, "body": "I have Added Error images @JohnnyMopp you can now refer to them."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1507730660, "post_id": 46689958, "comment_id": 80328330, "body": "Check the prototype: <a href=\"https://www.cs.colorado.edu/~main/bgi/doc/setfillpattern.html\" rel=\"nofollow noreferrer\">setfillpattern(char *upattern, int color)</a>."}, {"owner": {"reputation": 65, "user_id": 8143784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tL7FAIAPP0/AAAAAAAAAAI/AAAAAAAAAJg/RE6qtnfm7JE/photo.jpg?sz=128", "display_name": "Harsh patel", "link": "https://stackoverflow.com/users/8143784/harsh-patel"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1507732369, "post_id": 46689958, "comment_id": 80329612, "body": "Please can you elaborate your comment ?, I&#39;m facing difficulty understanding it. @JohnnyMopp"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507738801, "post_id": 46689958, "comment_id": 80333883, "body": "Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be read aloud or copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/46689958/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1507739777, "post_id": 46689958, "comment_id": 80334451, "body": "Where is <code>SOLID_FILL</code> defined?  It&#39;s obviously not the type that <code>setfillpattern</code> expects."}], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 3, "last_activity_date": 1507732794, "creation_date": 1507732794, "answer_id": 46691109, "question_id": 46689958, "link": "https://stackoverflow.com/questions/46689958/cannot-include-colors-to-my-c-file/46691109#46691109", "title": "Cannot Include colors to my C file", "body": "<p>I don't use BGI, but a quick search finds that <a href=\"https://www.cs.colorado.edu/~main/bgi/doc/setfillpattern.html\" rel=\"nofollow noreferrer\"><code>setfillpattern</code></a> is expecting a <code>char</code> array as the first parameter, but <code>SOLID_FILL</code> is of type <code>enum fill_styles</code>. To use <code>SOLID_FILL</code> you need to call <a href=\"https://www.cs.colorado.edu/~main/bgi/doc/setfillstyle.html\" rel=\"nofollow noreferrer\"><code>setfillstyle</code></a> instead.</p>\n\n<p>To use <code>setfillpattern</code> you need to supply a custom pattern:</p>\n\n<pre><code>char pattern[8] = {0x00, 0x70, 0x20, 0x27, 0x24, 0x24, 0x07, 0x00};\nsetfillpattern(pattern, YELLOW);\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8143784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4tL7FAIAPP0/AAAAAAAAAAI/AAAAAAAAAJg/RE6qtnfm7JE/photo.jpg?sz=128", "display_name": "Harsh patel", "link": "https://stackoverflow.com/users/8143784/harsh-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 46691109, "answer_count": 1, "score": -1, "last_activity_date": 1507732794, "creation_date": 1507729792, "last_edit_date": 1507730304, "question_id": 46689958, "link": "https://stackoverflow.com/questions/46689958/cannot-include-colors-to-my-c-file", "title": "Cannot Include colors to my C file", "body": "<p>I have started working on a C project to build a PacMan game, but I am getting an error when I execute below code. The error is generated by Code::Blocks as well as Turbo C++ 3.5.\nIn Code::Blocks I remove the path which is <code>\"C:\\TurboC3\\BGI\"</code>,but the error still continues. A help would be appreciated.</p>\n\n<p>Thank you ! </p>\n\n<p>Error in Turbo C++\n<a href=\"https://i.stack.imgur.com/JSFT6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSFT6.png\" alt=\"Turbo C++ error\"></a></p>\n\n<p>Error in Code::Blocks\n<a href=\"https://i.stack.imgur.com/7J0E6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7J0E6.png\" alt=\"Error in Code::Blocks\"></a></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;graphics.h&gt;\nint main()\n{\n    int gd=0,gm;\n    initgraph(&amp;gd,&amp;gm,\"C:\\\\TurboC3\\\\BGI\");\n    setfillpattern(SOLID_FILL,YELLOW);\n    circle(200,100,10);\n    line(200,250,200,250);\n    line(225,250,225,250);\n    line(250,250,250,250);\n    line(275,250,275,250);\n    line(300,250,300,250);\n    line(325,250,325,250);\n    arc(50,225,110,-100,30);\n    printf(\"Hello...Let's Play PacMan !! \\n\\n\");\n    getch();\n    closegraph();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "xcode", "parsing"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1507728611, "post_id": 46689501, "comment_id": 80326723, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/46689501/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1507728626, "post_id": 46689501, "comment_id": 80326738, "body": "I can&#39;t parse it too. Seriously, your comment have leaked to the next line"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1507728686, "post_id": 46689501, "comment_id": 80326792, "body": "Is the newline in the comment there in the real code too? How about the space in <code>totalCost t</code>? Is the code you show a copy-paste of the <i>actual</i> code you have?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507728842, "post_id": 46689501, "comment_id": 80326908, "body": "I am pretty sure XCode has a nice syntax highlighting making these errors obvious to spot.."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1507728915, "post_id": 46689501, "comment_id": 80326953, "body": "<code>totalCost t+=50;</code> I don&#39;t use xcode, but that looks wrong."}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507729153, "post_id": 46689501, "comment_id": 80327131, "body": "My apologies, I copy/pasted my code into my comment on this forum and the formatting is wrong. (The comment isn&#39;t actually included in the code, as it appears in my question) Excluding the comment all together, any suggestions as to why the &#39;if expression&#39; would send a parse error?."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507729218, "post_id": 46689501, "comment_id": 80327196, "body": "Without the actual code we can&#39;t answer the question. You are using xcode - then copy it right from there."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507729386, "post_id": 46689501, "comment_id": 80327322, "body": "Then <i>edit your question</i> to include the actual copy-pasted code."}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507729519, "post_id": 46689501, "comment_id": 80327416, "body": "I just modified the code in my question to alleviate the comment confusion/interference."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507729563, "post_id": 46689501, "comment_id": 80327445, "body": "Have you read the comments at all?"}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507729983, "post_id": 46689501, "comment_id": 80327802, "body": "I removed the &quot;+&quot; in the totalCost line and also removed the comments line (Please see new code in my original inquiry). I am still getting the error. The highlighting for the syntax is helpful and that is how I know where my error is, but it does not suggest a &quot;fix&quot; for the error. I know it&#39;s a simple mistake, as this is my first programming course and I definitely inexperienced at programming."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1507730459, "post_id": 46689501, "comment_id": 80328172, "body": "you need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. What is <code>totalCost</code> if it is not a type then please <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">read a book</a>, if it is it also cannot hurt"}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507731185, "post_id": 46689501, "comment_id": 80328705, "body": "Okay, my question is strictly focused on the line: if (surfaceArea &gt; 750) This line all by itself, without anything else added sends the error mentioned in my inquiry. I have &quot;read a book&quot; and it says to input the if expression just as I have it. I am simply inquiring if Xcode needs something more or different to process an if expression."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1507731381, "post_id": 46689501, "comment_id": 80328852, "body": "FYI, you are declaring a variable in the statement block.  The variable will disappear when execution leaves the statement block."}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507731744, "post_id": 46689501, "comment_id": 80329136, "body": "Thank you, Thomas"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507732287, "post_id": 46689501, "comment_id": 80329542, "body": "There&#39;s nothing wrong with <code>if (surfaceArea &gt; 750)</code> as long as <code>surfaceArea</code> is defined somewhere. Compilers&#39; error reporting isn&#39;t 100% perfect, if it&#39;s complaining about that line, there could be a problem with some lines above or below it. For example, <code>totalCost t=50;</code> looks wrong. Unless you have <code>typedef</code>ed or <code>#define</code>d <code>totalCost</code> to be something else, that doesn&#39;t make sense. If <code>totalCost</code> is a variable that you&#39;re tying to assign to, you need to do <code>totalCost=50;</code> or <code>totalCost+=50;</code>. You haven&#39;t provided an MCVE so it&#39;s tough to tell exactly what the problem is."}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507733486, "post_id": 46689501, "comment_id": 80330359, "body": "Thank you, that is very helpful"}, {"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507735892, "post_id": 46689501, "comment_id": 80332060, "body": "Thank you everyone, my issue has been resolved. I had an unneeded additional brace above my code that was blocking the variable &quot;surfaceArea&quot; and the compiler was not recognizing the variable."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507730548, "post_id": 46689538, "comment_id": 80328251, "body": "Hey, Anton. My apologies for the confusion in regards to my comment lines. I have removed the comment lines to alleviate any confusion this may have caused. With the code as it is now (see original inquiry), any suggestions? I know this has to be an elementary mistake. I am taking my first programming course and am very inexperienced."}, {"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "reply_to_user": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507730711, "post_id": 46689538, "comment_id": 80328370, "body": "As stated in comments <code>totalCost t+=50;</code> seems to be suspicious as well. What <code>totalCost t</code> should be? If it&#39;s declaration it probably should be made outside the loop, then just <code>t+=50;</code> inside."}], "tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": false, "score": 1, "last_activity_date": 1507728673, "creation_date": 1507728673, "answer_id": 46689538, "question_id": 46689501, "link": "https://stackoverflow.com/questions/46689501/c-if-statement-xcode/46689538#46689538", "title": "C++ if statement/xcode", "body": "<p>Just remove <code>over 750 sq. inches</code> from your code. And use <code>/* */</code> for multiline comments.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "edited": false, "score": 0, "creation_date": 1507730405, "post_id": 46689732, "comment_id": 80328135, "body": "I do understand and have removed the comment to alleviate the confusion of that. It was a formatting mistake when I copy/pasted the code. I posted too quickly. This is my first post on here. My apologies, but I have edited my original post to reflect my actual code."}], "tags": [], "owner": {"reputation": 586, "user_id": 8418021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9f2ja.jpg?s=128&g=1", "display_name": "SaravananKS", "link": "https://stackoverflow.com/users/8418021/saravananks"}, "is_accepted": false, "score": 5, "last_activity_date": 1507729202, "creation_date": 1507729202, "answer_id": 46689732, "question_id": 46689501, "link": "https://stackoverflow.com/questions/46689501/c-if-statement-xcode/46689732#46689732", "title": "C++ if statement/xcode", "body": "<pre><code>if (surfaceArea &gt; 750)       //adding 50 dollars to cost if product is \n//over 750 sq. inches\n\n{\n totalCost t+=50;\n}\n</code></pre>\n\n<p>make a comment line // .\nHope you understood.</p>\n\n<p>To write a multi line comment use /* .... */</p>\n"}], "owner": {"reputation": 1, "user_id": 8759244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e290778c817f295e515608da4dcf37f?s=128&d=identicon&r=PG&f=1", "display_name": "Issy", "link": "https://stackoverflow.com/users/8759244/issy"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "closed_date": 1507729257, "answer_count": 2, "score": -6, "last_activity_date": 1507729420, "creation_date": 1507728576, "last_edit_date": 1507729420, "question_id": 46689501, "link": "https://stackoverflow.com/questions/46689501/c-if-statement-xcode", "closed_reason": "Not suitable for this site", "title": "C++ if statement/xcode", "body": "<p>For some reason, my \"if\" expression will not work in Xcode. It gives a \"parse issue\" with the if expression. Any suggestions? The error code is: \"Expected unqualified-id\". I am working with xcode. Please see below:</p>\n\n<pre><code>if (surfaceArea &gt; 750)       \n\n{\ntotalCost t=50;\n}\n</code></pre>\n\n<p>Thanks in advance,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 9, "creation_date": 1507728205, "post_id": 46689355, "comment_id": 80326395, "body": "Sure you can.  One is 32 bits long and the other is 128 bits long."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1507728445, "post_id": 46689355, "comment_id": 80326581, "body": "And if you don&#39;t know the length of the address, you <i>can&#39;t</i> know the type."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1507728472, "post_id": 46689355, "comment_id": 80326601, "body": "... but you can&#39;t determine how long the address actually is if you don&#39;t already know, either by the type of the object in which it is stored or by accompanying metadata."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507728505, "post_id": 46689355, "comment_id": 80326632, "body": "I&#39;m voting to close this question as off-topic because Stackoverflow is not a &quot;give me the code&quot; site.  The question shows no effort at all to solve the problem."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507729584, "post_id": 46689355, "comment_id": 80327462, "body": "Thisis not a guid question:("}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1507729743, "last_edit_date": 1507729743, "creation_date": 1507729424, "answer_id": 46689823, "question_id": 46689355, "link": "https://stackoverflow.com/questions/46689355/how-to-check-whether-given-binary-address-is-ipv4-or-ipv6-in-c/46689823#46689823", "title": "How to check whether given binary address is ipv4 or ipv6 in c", "body": "<p>It depends on what you mean by \"binary form\".</p>\n\n<p>In general, a single, raw binary integer is not an appropriate representation for a network address.  Network addresses come in many flavors.</p>\n\n<p>If you have a 32-bit number, it is <em>probably</em> an IPv4 address.  If you have a 128-bit number, it is <em>probably</em> an IPv6 address.  If you have an integer that is big enough to hold either, meaning that you have to make the determination based on value, if it is less than 4294967296, it is <em>probably</em> IPv4, else IPv6.  But none of these heuristics is guaranteed (in part because there are other kinds of network address than IPv4 and IPv6).</p>\n\n<p>Virtually all APIs that deal with network addresses use a multi-field data structure to describe them concisely and unambiguously.  For example, one way of describing a network address is <code>struct hostent</code>.  Now, <code>struct hostent</code> has an <code>h_length</code> field which explicitly gives the size of the address (in bytes), so that's a start.  But then it also has an <code>h_addrtype</code> field, which explicitly tells you whether it's <code>AF_INET</code> (IPv4), <code>AF_INET6</code> (IPv6), or some other address family.  So there's no need to guess or intuit.</p>\n\n<p>I would strongly encourage you to use a data structure like <code>struct hostent</code>, and not single raw binary integers, to carry network addresses around.  Using raw binary numbers is a great way to get yourself locked into IPv4, making it that much harder to expand to IPv6 now that it's time to do that.  (I speak from sad experience here. :-( )</p>\n"}], "owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1507729772, "answer_count": 1, "score": 0, "last_activity_date": 1507729743, "creation_date": 1507728117, "question_id": 46689355, "link": "https://stackoverflow.com/questions/46689355/how-to-check-whether-given-binary-address-is-ipv4-or-ipv6-in-c", "closed_reason": "Needs more focus", "title": "How to check whether given binary address is ipv4 or ipv6 in c", "body": "<p>i want to check whether the given address is ipv6 or ipv4. My address will come in the binary form (not in string format). In this case how can i check whether the given binary number is ipv4 or ipv6?</p>\n"}, {"tags": ["c", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1507729596, "post_id": 46689015, "comment_id": 80327477, "body": "do not lock the mutex before signalling. make sure it is unlocked."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1507731074, "post_id": 46689015, "comment_id": 80328639, "body": "No, @Serge, not only is it not a problem to have the associated mutex locked when you signal the CV, but it&#39;s common and often useful."}, {"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507731208, "post_id": 46689015, "comment_id": 80328718, "body": "Any other suggestions as to what might be causing my program to lock up?"}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507733511, "post_id": 46690607, "comment_id": 80330381, "body": "How do I shut down the consumer threads? Should I add in pthread_exit() into the consumer?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507734056, "post_id": 46690607, "comment_id": 80330768, "body": "The problem is not how to effect the actual thread termination itself, @Rubiks.  You could indeed call <code>pthread_exit()</code>, but each consumer thread will also shutdown naturally when the <code>consumer()</code> function returns.  You seem to be counting on the latter, which is fine.  The problem is making sure that every thread will actually do one of those things when the producers have finished producing and there is nothing left to consume."}, {"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507741914, "post_id": 46690607, "comment_id": 80335623, "body": "I think I made the changes you suggested, but it still freezes. I posted underneath the old code, the new code with the edits. I can&#39;t seem to figure this out."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507743434, "post_id": 46690607, "comment_id": 80336434, "body": "At first glance, you are still unlocking mutex <code>nready.mutex</code> inside the inner loop, such that it will not be locked at the beginning of a second iteration of that loop.  Additionally, no, it doesn&#39;t look like you implemented the model for condition variable usage that I described."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507743831, "post_id": 46690607, "comment_id": 80336616, "body": "A specific consequence of those particular problems is that your <code>consumer()</code> can fairly easily get stuck spinning: suppose that when it returns from waiting on the condition variable, <code>nready.nready</code> and <code>nready.empty</code> both have values greater than 1.  Each will be decremented in the inner loop, after which the outer loop&#39;s condition will still be satisfied, but the inner one&#39;s won&#39;t.  The outer loop may then spin indefinitely, always skipping the inner loop, quite possibly not seeing modifications to those shared variables on account of not locking the mutex."}, {"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507823773, "post_id": 46690607, "comment_id": 80374345, "body": "I think I incorporated the edits that were suggested. The program mostly works. It runs almost through all 120 elements producing and consuming. When it gets to the last 5 elements it locks up. I just posted the newly edited consume() and would appreciate your advice"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507826008, "post_id": 46690607, "comment_id": 80375591, "body": "@Rubiks, your new <code>consume()</code> function now successfully protects all access to <code>nready</code> via its mutex -- good.  It does so by never unlocking it (except implicitly while waiting on the CV) -- bad.  The revised code <i>still</i> fails to check the CV&#39;s associated condition before waiting and after waking from a wait.  Moreover, if the new <code>consume()</code> wakes from waiting on the CV to find multiple items ready (<code>nready.nready &gt; 1</code>) then it consumes only one of them (one <code>printf</code> call) and discards the rest."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507826757, "post_id": 46690607, "comment_id": 80375988, "body": "Hmm -- I seem to have overstated my case slightly.  You do now successfully test the CV condition before waiting, but you still do not re-check it after waking.  To implement that correctly, you probably need to structure your loops differently, and that probably will lead you in a direction that helps with the other issues, too."}, {"owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507901467, "post_id": 46690607, "comment_id": 80408315, "body": "Im not quite what you mean. I tried to put in an if statement after the wait() to check the condition again, but it still locks up. Not sure I will ever figure this one out"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "edited": false, "score": 0, "creation_date": 1507902055, "post_id": 46690607, "comment_id": 80408724, "body": "I&#39;m inclined to suspect that you&#39;re trying to tackle too many new concepts at the same time.  I suggest you take a step back, and start from scratch with a simpler problem: only one producer and one consumer.  Then expand to multiple consumers, and finally add in multiple producers.  Be sure from the beginning to build in the CV usage paradigm I presented to you, because you seem to be having trouble seeing how to retrofit your current code to implement it."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1507732231, "last_edit_date": 1507732231, "creation_date": 1507731477, "answer_id": 46690607, "question_id": 46689015, "link": "https://stackoverflow.com/questions/46689015/multithreade-program-consumer-causes-program-to-freeze/46690607#46690607", "title": "Multithreade program consumer causes program to freeze", "body": "<p>Your <code>consume()</code> function has at least four problems with its use of shared variables and synchronization objects:</p>\n\n<ol>\n<li><p>In the outer <code>while</code> condition, it reads shared variable <code>nready.empty</code> outside the protection of any mutex (or semaphore).  Elsewhere, the value of that variable is modified.  As a result, your program's behavior is undefined.</p></li>\n<li><p>It locks mutex <code>nready.mutex</code> <em>outside</em> the inner loop, but unlocks it <em>inside</em> (and does not re-lock it).  Thus, if the inner loop iterates more than once on a given iteration of the outer loop -- which it very plausibly might do -- then</p>\n\n<ul>\n<li><p>On the second and subsequent iterations, the function attempts to access and possibly modify other members of the shared <code>nready</code> structure without protection of a mutex.</p></li>\n<li><p>On the second and subsequent iterations, the function attempts to wait on condition variable <code>nready.cond</code> without having locked the mutex you specify for that purpose (<code>nready.mutex</code>)</p></li>\n<li><p>On the second and subsequent iterations, the function attempts to unlock a mutex that it does not have locked.</p></li>\n</ul></li>\n<li><p>It appears to assume that in aggregate over all threads, it will receive exactly one signal for each one sent via the condition variable.  That is not a safe assumption, because</p>\n\n<ul>\n<li><p>signals are not queued.  If a producer thread sends a signal when no consumer is waiting then that signal will be lost.  Furthermore,</p></li>\n<li><p>spurious wakeups can happen, in which a thread returns from <code>pthread_cond_wait()</code> without a corresponding call having been  made to <code>pthread_cond_signal()</code>.  Those are unusual, but they do occur, and you need to be prepared for them.</p></li>\n</ul></li>\n<li><p>You have no provision for shutting down consumer threads when there is no more work to perform.  The one that actually processes the last unit of work probably will exit, but all the others will probably be stuck, waiting indefinitely on the condition variable.</p></li>\n</ol>\n\n<hr>\n\n<p>Condition variables are so named because they are designed around the concept of permitting threads to suspend operation until some condition becomes true.  The conventional usage paradigm for waiting on a condition variable is as follows:</p>\n\n<ol>\n<li>Lock the associated mutex.</li>\n<li>Optionally, perform some work.</li>\n<li>Check the CV's associated condition.  Accesses to any shared variables on which the condition is based must everywhere be protected by the same mutex used with the CV.</li>\n<li>If the condition is satisfied, then proceed without waiting (skip to step 6); otherwise start waiting on the CV</li>\n<li>Upon returning from the wait, <strong>go back to step 3</strong>.  It is essential to re-check the condition to ensure that it is true, lest it have been made false again by some other thread or never have been true in the first place.</li>\n<li>Optionally, perform some work.</li>\n<li>Unlock the mutex.</li>\n</ol>\n\n<p>Having implemented that as described, you may also find that you can benefit from relying on <code>pthread_cond_broadcast()</code> instead of <code>pthread_cond_signal()</code>.  In particular, that could form part -- but not all -- of an approach to resolving the consumer shutdown problem.</p>\n"}], "owner": {"reputation": 421, "user_id": 6703342, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9f1d3bdb1efccfb178568f7a251ef545?s=128&d=identicon&r=PG&f=1", "display_name": "Rubiks", "link": "https://stackoverflow.com/users/6703342/rubiks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507823615, "creation_date": 1507727169, "last_edit_date": 1507823615, "question_id": 46689015, "link": "https://stackoverflow.com/questions/46689015/multithreade-program-consumer-causes-program-to-freeze", "title": "Multithreade program consumer causes program to freeze", "body": "<p>I wrote multithreaded program and the producer works fine. I know this because I disable the consumer and the producers gives the expected output. The producer is designed to populate the shared buffer with random values 1 - 10 and the producers take turn filling the buffer. All the elements in the buffer are initially set to -1 indicating to the producers that they are empty. The producer is then supposed to signal the consumer that it has filled an element of the buffer and to come consume it. When I add in the consumer the program fills a few elements, consumes 1 and then freezes.</p>\n\n<p>This is the output I receive with the consumer added in. The program signal once, produces for a few lines, then freezes. As I said when the consumer is not added in the producer works as expected. I have been working on this for awhile, and I can't figure this out. I am thinking the issue is with the consumer.</p>\n\n<pre><code>Producer thread 976 and value: 3\nProducer thread 231312 and value: 3\nSignal\nProducer thread 976 and value: 3\nProducer thread 231312 and value: 3\nbuff[1] = 3 and thread = 1232\nProducer thread 976 and value: 2\nProducer thread 231312 and value: 2\nProducer thread 297568 and value: 3\nProducer thread 298080 and value: 3\nProducer thread 298592 and value: 3\n</code></pre>\n\n<p>For this type of program, how should the consumer look?</p>\n\n<p>This is program </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;pthread.h&gt;\n    #include &lt;stdint.h&gt;\n\n    #define THREADS 5\n    #define ELEMENTS 120\n\n\n\n    int value = 0;\n    int saveValue = 0;\n    void *produce(void *arg);\n    void *consume(void *arg);\n    int producerCount =0;\n    int consumerCount = ELEMENTS;\n\n    struct {\n      pthread_mutex_t mutex;\n      int index;\n      int value; \n      int MyShBuff[ELEMENTS];\n    } add = {PTHREAD_MUTEX_INITIALIZER, 0, 0}; \n\n\n      struct{\n       pthread_mutex_t    mutex;\n       pthread_cond_t     cond;\n       int nready;\n       int value;\n       int empty;\n       int counter;\n\n       /* number ready for consumer */\n    } nready = {PTHREAD_MUTEX_INITIALIZER, PTHREAD_COND_INITIALIZER,0, -2, ELEMENTS};\n\n    int main()\n    {\n        pthread_t tid_producer[THREADS], tid_consumer[THREADS];\n        int i, j, k;\n\n        //Ready buffer for producers\n        for (i =0; i &lt; ELEMENTS; i++)\n        {\n            add.MyShBuff[i]=-1;\n        }\n\n\n\n        for(j = 0; j &lt; THREADS; j++) {\n\n       pthread_create(&amp;tid_producer[j], NULL, &amp;produce, NULL);\n       pthread_create(&amp;tid_consumer[j], NULL, &amp;consume, NULL);\n    }\n\n\n\n     /* wait for all producers and the consumer*/\n\n        for(k = 0; k &lt; THREADS; k++) {\n            pthread_join(tid_producer[k], NULL);\n            pthread_join(tid_consumer[k], NULL);    \n        }\n\n\n        exit(0);    \n        return 0;\n    }\n\n    void *produce(void *arg)\n    { \n    int i = 0;\n\n\n    for ( ; ; ) \n    {\n        pthread_mutex_lock(&amp;add.mutex);\n        if(add.index  &gt;= ELEMENTS)\n        {\n            pthread_mutex_unlock(&amp;add.mutex);\n            return NULL;\n        }\n        if(add.MyShBuff[add.index] == -1)\n        {\n         add.value = rand() % 10 + 0;   \n         add.MyShBuff[add.index] = add.value;\n         printf(\"Producer thread %d and value: %d\\n\" ,pthread_self(), add.MyShBuff[add.index]);\n         add.index++;\n        }\n         pthread_mutex_unlock(&amp;add.mutex);\n         pthread_mutex_lock(&amp;nready.mutex);\n         if(nready.nready == 0)\n         {\n         pthread_cond_signal(&amp;nready.cond);\n         printf(\"Signal\\n\");\n         }\n\n        nready.nready++;\n        pthread_mutex_unlock(&amp;nready.mutex);\n\n        }\n\n\n    }\n\n\n    void *consume(void *arg)\n    {\n     int i;\n\n      while(nready.empty != 0)\n      {\n       pthread_mutex_lock(&amp;nready.mutex);\n        while (nready.nready == 0)\n        {\n           pthread_cond_wait(&amp;nready.cond,&amp;nready.mutex);\n            nready.nready--;\n             nready.empty--;\n             nready.counter++;\n             pthread_mutex_unlock(&amp;nready.mutex);\n\n            pthread_mutex_lock(&amp;add.mutex);\n             printf(\"buff[%d] = %d and thread = %d\\n\", nready.counter, add.MyShBuff[nready.counter], pthread_self());\n             add.MyShBuff[nready.counter] = -2;\n             pthread_mutex_unlock(&amp;add.mutex);\n\n\n\n        }\n\n      }\n\n            return NULL;\n\n    }\n</code></pre>\n\n<p>I think I made the suggested changes. This is the program with the edits.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdint.h&gt;\n\n#define THREADS 5\n#define ELEMENTS 120\n\n\n\nint value = 0;\nint saveValue = 0;\nvoid *produce(void *arg);\nvoid *consume(void *arg);\nint producerCount =0;\nint consumerCount = ELEMENTS;\n\nstruct {\n  pthread_mutex_t mutex;\n  int index;\n  int value; \n  int MyShBuff[ELEMENTS];\n} add = {PTHREAD_MUTEX_INITIALIZER, 0, 0}; \n\n\n  struct{\n   pthread_mutex_t    mutex;\n   pthread_cond_t     cond;\n   int nready;\n   int value;\n   int empty;\n   int counter;\n\n   /* number ready for consumer */\n} nready = {PTHREAD_MUTEX_INITIALIZER, PTHREAD_COND_INITIALIZER,0, -2, ELEMENTS};\n\nint main()\n{\n    pthread_t tid_producer[THREADS], tid_consumer[THREADS];\n    int i, j, k;\n\n    //Ready buffer for producers\n    for (i =0; i &lt; ELEMENTS; i++)\n    {\n        add.MyShBuff[i]=-1;\n    }\n\n\n\n    for(j = 0; j &lt; THREADS; j++) {\n\n   pthread_create(&amp;tid_producer[j], NULL, &amp;produce, NULL);\n   pthread_create(&amp;tid_consumer[j], NULL, &amp;consume, NULL);\n}\n\n\n\n /* wait for all producers and the consumer*/\n\n    for(k = 0; k &lt; THREADS; k++) {\n        pthread_join(tid_producer[k], NULL);\n        pthread_join(tid_consumer[k], NULL);    \n    }\n\n     /* Clean up and exit */\n\n  pthread_mutex_destroy(&amp;nready.mutex);\n  pthread_mutex_destroy(&amp;add.mutex);\n   pthread_cond_destroy(&amp;nready.cond);\n   pthread_exit(NULL);\n\n    exit(0);    \n    return 0;\n}\n\n void *produce(void *arg)\n    { \n    int i = 0;\n\n\n    for ( ; ; ) \n    {\n        pthread_mutex_lock(&amp;add.mutex);\n        if(add.index  &gt;= ELEMENTS)\n        {\n            pthread_mutex_unlock(&amp;add.mutex);\n            return NULL;\n        }\n        if(add.MyShBuff[add.index] == -1)\n        {\n         add.value = rand() % 10 + 0;   \n         add.MyShBuff[add.index] = add.value;\n         printf(\"Producer thread %d and value: %d\\n\" ,pthread_self(), add.MyShBuff[add.index]);\n         add.index++;\n        }\n         pthread_mutex_unlock(&amp;add.mutex);\n         pthread_mutex_lock(&amp;nready.mutex);\n         if(nready.nready == 0)\n         {\n         pthread_cond_broadcast(&amp;nready.cond);\n         printf(\"Signal\\n\");\n         }\n\n        nready.nready++;\n        pthread_mutex_unlock(&amp;nready.mutex);\n\n        }\n\n\n    }\n\n\nvoid *consume(void *arg)\n{\npthread_mutex_lock(&amp;nready.mutex);\n\n  while(nready.empty != 0)\n  {\n\n    while (nready.nready == 0)\n    {\n        pthread_cond_wait(&amp;nready.cond,&amp;nready.mutex);\n\n         nready.nready--;\n         nready.empty--;\n\n         pthread_mutex_unlock(&amp;nready.mutex);\n\n        pthread_mutex_lock(&amp;add.mutex);\n         printf(\"buff[%d] = %d and thread = %d\\n\", nready.counter, add.MyShBuff[nready.counter], pthread_self());\n         add.MyShBuff[nready.counter] = -2;\n         pthread_mutex_unlock(&amp;add.mutex);\n\n        pthread_mutex_lock(&amp;nready.mutex);\n        nready.counter++;\n        pthread_mutex_unlock(&amp;nready.mutex);\n\n    }\n  }\n\n\n        return NULL;\n\n}\n</code></pre>\n\n<p>2nd edit of the consumer(). </p>\n\n<pre><code>void *consume(void *arg)\n{\n\npthread_mutex_lock(&amp;nready.mutex);\n\n  while(nready.empty != 0)\n  {\n\n    while (nready.nready == 0)\n    {\n\n\n        pthread_cond_wait(&amp;nready.cond,&amp;nready.mutex);\n\n\n         pthread_mutex_lock(&amp;add.mutex);\n         printf(\"buff[%d] = %d and thread = %d\\n\", nready.counter, add.MyShBuff[nready.counter], pthread_self());\n         add.MyShBuff[nready.counter] = -2;\n         pthread_mutex_unlock(&amp;add.mutex);\n\n        nready.counter++;   \n        nready.empty--;\n        printf(\"Empty %d\\n\" , nready.empty);\n\n    }\n\n    nready.nready--;\n\n  }\n\n\n  return NULL;\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory", "int", "double"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 5, "creation_date": 1507726370, "post_id": 46688641, "comment_id": 80324908, "body": "This is undefined behavior. Also, the <code>double</code> 5 corresponds to the 64-bit integer <code>0x4014000000000000</code> so you can probably figure out what&#39;s happening. Hint: <code>double</code> can be larger than <code>int</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 3, "creation_date": 1507726487, "post_id": 46688641, "comment_id": 80325000, "body": "You get unexpected result because you lied to your compiler, and it figured a way to get back at you. You told the compiler that <code>&amp;(test.a)</code> is an address of a <code>double</code>, but it is an address of an integer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507726602, "post_id": 46688641, "comment_id": 80325089, "body": "You can twiddle with the optimization settings and get your compiler to compile code where the result is something <i>else</i> as well."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1507726712, "post_id": 46688641, "comment_id": 80325170, "body": "@Bathsheba just writing here that the output doesn&#39;t match the code, so, why did you reverse my downvote?!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507726758, "post_id": 46688641, "comment_id": 80325208, "body": "@AnttiHaapala: Oops. Did not see that. I&#39;ve withdrawn my upvote. Luckily the answer stays the same."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507726911, "post_id": 46688641, "comment_id": 80325348, "body": "Your code&#39;s got an error... you meant to output <code>test.a</code>, but copied wrong code here, which outputs <code>&amp;test.a</code>. Both are ill-defined examples."}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 0, "creation_date": 1507727291, "post_id": 46688641, "comment_id": 80325641, "body": "I know that should not use the double pointer to the int variable, I just want to test the memory coverage."}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1507728253, "post_id": 46688641, "comment_id": 80326434, "body": "@unwind Thanks, you are right.The <code>double 5</code> corresponds to the 64-bit integer <code>0x40140000 00000000</code>.So I get variable <code>b</code> is <code>0x 40140000</code>, verify that my idea is correct, the value of the variable <code>b</code> is indeed covered. But I just don&#39;t konw why <code>double 5</code> corresponds to the 64-bit integer <code>0x40140000 00000000</code>?How it is stored?"}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1507728413, "post_id": 46688641, "comment_id": 80326558, "body": "@dasblinkenlight  This is a test, I just want to verify that the other half of the 4 bytes does become the value of the variable <code>b</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1507728599, "post_id": 46688641, "comment_id": 80326712, "body": "@UKeeySDis That&#39;s the thing, though - you can&#39;t rely on the results of a test if there is undefined behavior."}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1507728646, "post_id": 46688641, "comment_id": 80326757, "body": "@AnttiHaapala In fact this is a fixed value, because the value of the variable b is a double pointer to a value after the remaining 4 bytes."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1507733988, "post_id": 46688641, "comment_id": 80330722, "body": "@UKeeySDis Read some basic material on computer floating-point, such as <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">Wikipedia&#39;s entry on IEEE-754</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1507735103, "post_id": 46688641, "comment_id": 80331490, "body": "The code is a strict aliasing violation and therefore completely undefined behavior. It is pointless to reason about the effects of undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 0, "creation_date": 1507727221, "post_id": 46688684, "comment_id": 80325576, "body": "In my computer, <code>int</code>  occupies 4 bytes, <code>double</code> occupies 8 bytes, I use double pointer to int and assignment, it should override the value of variable b, so I think b should be 5, a should be 0.And <code>1075052544</code> is a fixed value that does not change with each run or change optimization."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 1, "creation_date": 1507727300, "post_id": 46688684, "comment_id": 80325645, "body": "You can think what you want to think. That&#39;s obviously not what is happening. The fact remains the behaviour is undefined."}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 0, "creation_date": 1507728525, "post_id": 46688684, "comment_id": 80326655, "body": "The double 5 corresponds to the 64-bit integer <code>0x4014000000000000</code>.So I get <code>b</code> is <code>0x4014 0000</code>, the value of the variable b is the other half of the 4 bytes."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 1, "creation_date": 1507728751, "post_id": 46688684, "comment_id": 80326848, "body": "@UKeeySDis: you could verify that by setting a 64 bit integer to a given value, a double to another value, and calling <code>memcmp</code>. All perfectly defined behaviour."}, {"owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 0, "creation_date": 1507729281, "post_id": 46688684, "comment_id": 80327242, "body": "This is really a good idea, I verify it.But why the double 5 corresponds to the 64-bit integer <code>0x4014000000000000</code>?How it is stored?Thank you very much."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "edited": false, "score": 0, "creation_date": 1507735205, "post_id": 46688684, "comment_id": 80331554, "body": "@UKeeySDis As soon as you invoke undefined behavior, you can no longer reason about your program. The compiler may optimize the machine code in completely crazy ways and the program may run amok. You cannot predict anything and you cannot expect anything. Which is why undefined behavior is always a severe bug. Read up about &quot;the strict aliasing rule&quot;."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1507726337, "creation_date": 1507726337, "answer_id": 46688684, "question_id": 46688641, "link": "https://stackoverflow.com/questions/46688641/the-double-pointer-points-to-the-int-variable-to-overwrite-the-memory/46688684#46688684", "title": "The double pointer points to the int variable to overwrite the memory", "body": "<p>The behaviour of your code is <em>undefined</em>.</p>\n\n<p>You can't dereference <code>p</code> once you've set it to the address of something that is not a <code>double</code> type.</p>\n\n<p>To see what your compiler has done with this input, check the generated assembly.</p>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1507726393, "creation_date": 1507726393, "answer_id": 46688703, "question_id": 46688641, "link": "https://stackoverflow.com/questions/46688641/the-double-pointer-points-to-the-int-variable-to-overwrite-the-memory/46688703#46688703", "title": "The double pointer points to the int variable to overwrite the memory", "body": "<p>The behaviour of your code is undefined. </p>\n\n<p>Clang compiler generate warning message:</p>\n\n<pre><code>source_file.c:13:20: warning: format specifies type 'int' but the argument has type 'int *' [-Wformat]\n    printf(\"%d\\n\", &amp;test.a);\n            ~~     ^~~~~~~\nsource_file.c:14:20: warning: format specifies type 'int' but the argument has type 'int *' [-Wformat]\n    printf(\"%d\\n\", &amp;test.b);\n            ~~     ^~~~~~~\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7712237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc9e7e840168e83d3ddf443d82795f57?s=128&d=identicon&r=PG&f=1", "display_name": "UKeeySDis", "link": "https://stackoverflow.com/users/7712237/ukeeysdis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "closed_date": 1507735027, "accepted_answer_id": 46688684, "answer_count": 2, "score": -5, "last_activity_date": 1507727448, "creation_date": 1507726240, "last_edit_date": 1507727448, "question_id": 46688641, "link": "https://stackoverflow.com/questions/46688641/the-double-pointer-points-to-the-int-variable-to-overwrite-the-memory", "closed_reason": "Duplicate", "title": "The double pointer points to the int variable to overwrite the memory", "body": "<p>I put the code directly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct A\n{\n    int a;\n    int b;\n};\nint main()\n{\n    struct A test;\n    double *p = (double *)&amp;(test.a);\n    *p = 5;\n\n    printf(\"variable a: %d\\n\", &amp;test.a);\n    printf(\"variable b: %d\\n\", &amp;test.b);\n    return 0;\n}\n</code></pre>\n\n<p>I run this code in centos7, the compiler is <code>gcc4.8.5</code>.And my computer uses little ending to store.</p>\n\n<p>As you see, the memory of variable <code>b</code> will be overwritten, I expected <code>a</code> is <code>0x0000 0005</code> and <code>b</code> is <code>0x0000 0000</code>.</p>\n\n<p>But the answer is:</p>\n\n<pre><code>variable a: 0\nvariable b: 1075052544\n</code></pre>\n\n<p>Why variable <code>a</code> is <code>0x 0000 0000</code> and <code>b</code> is <code>0x4014 0000</code>?</p>\n"}, {"tags": ["c", "gcc", "clang", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507729506, "post_id": 46688928, "comment_id": 80327406, "body": "your variable for the compound literal should be <code>const int * b</code>, I think."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1507729576, "post_id": 46688928, "comment_id": 80327453, "body": "@JensGustedt Yeah, I know, it shouldn&#39;t work, but it did in clang. Anyway, I removed that tangential experiment because it&#39;s irrelevant considering that this is deliberate behavior from clang."}, {"owner": {"reputation": 6049, "user_id": 1595323, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2dd4e62d8f84c5dee2d68ba35393f266?s=128&d=identicon&r=PG", "display_name": "Konstantin Vladimirov", "link": "https://stackoverflow.com/users/1595323/konstantin-vladimirov"}, "edited": false, "score": 0, "creation_date": 1507731339, "post_id": 46688928, "comment_id": 80328818, "body": "Thanks, option doing exactly what I looked for."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 4, "last_activity_date": 1507729954, "last_edit_date": 1507729954, "creation_date": 1507726966, "answer_id": 46688928, "question_id": 46688618, "link": "https://stackoverflow.com/questions/46688618/how-to-switch-off-local-array-merging-in-clang/46688928#46688928", "title": "How to switch off local array merging in clang?", "body": "<p>The option in clang you're looking for is <code>-fno-merge-all-constants</code>. And you can enable it in gcc with <code>-fmerge-all-constants</code> if you want to achieve the opposite. But the documentation of the option in gcc makes me curious:</p>\n\n<blockquote>\n  <p>Languages like C or C++ require each variable, including multiple instances of the same variable in recursive calls, to have distinct locations, so using this option results in non-conforming behavior.</p>\n</blockquote>\n\n<p>The only bit that somehow might suggest that clang is allowed to get away with this is (C11, 6.5.2.4):</p>\n\n<blockquote>\n  <ol start=\"7\">\n  <li>String literals, and compound literals with const-qualified types, need not designate distinct objects.</li>\n  </ol>\n</blockquote>\n\n<p>The problem here is that your code doesn't have a compound literal.</p>\n\n<p>There is in fact a bug report for clang about this and it appears that the developers are aware that this is non-conforming: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=18538\" rel=\"nofollow noreferrer\">https://bugs.llvm.org/show_bug.cgi?id=18538</a></p>\n\n<p>The interesting comment in there is:</p>\n\n<blockquote>\n  <p>This is the only case I can think of (off the top of my head) where clang deliberately does not conform to the standard by default, and has a flag to make it conform. There are a few other places where we deliberately don't conform because we think the standard is wrong (and generally we try to get the standard fixed in those cases).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1507728093, "last_edit_date": 1507728093, "creation_date": 1507727787, "answer_id": 46689235, "question_id": 46688618, "link": "https://stackoverflow.com/questions/46688618/how-to-switch-off-local-array-merging-in-clang/46689235#46689235", "title": "How to switch off local array merging in clang?", "body": "<p>It does appear that <code>clang</code> is reusing the same array for variable <code>b</code> in both local scopes of <code>f()</code>, but that cannot be justified on the basis of implementation-defined behavior.  Implementation-defined behaviors are explicitly called out in the standard, and conforming implementations document their actual behavior for each area of implementation-defined behavior.  This is not an area where the standard grants such latitude.</p>\n\n<p>On the contrary, the behavior of the clang-generated program is non-conforming, and Clang is non-conforming for producing such code.  The standard specifically says that</p>\n\n<blockquote>\n  <p>For [an object with automatic storage duration] that does not have a variable length array type,\n  its lifetime extends from entry into the block with which it is\n  associated until execution of that block ends in any way. (Entering an\n  enclosed block or calling a function suspends, but does not end,\n  execution of the current block.) <strong><em>If the block is entered recursively,\n  a new instance of the object is created each time</em></strong>.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4p6\" rel=\"nofollow noreferrer\">C2011, 6.2.4/6</a>; emphasis added)</p>\n\n<p>The objects in question in this case do have automatic storage duration and do not have variable-length array type, so the standard specifies that they be distinct objects.  That they are arrays with a <code>const</code>-qualifed element type does not permit clang to reuse the array.</p>\n\n<blockquote>\n  <p>But lets say I want consistent behavior. Can I turn some switch on or off in clang to disable this optimization and make it honestly create different local arrays (even constant ones) for different stack frames?</p>\n</blockquote>\n\n<p>You can and should reported a bug against Clang, unless this issue has already been reported.  The time frame for that bug being fixed is probably longer than you want to wait, but I do not find documentation of any command-line flag that would modulate this behavior.</p>\n\n<p>The other answer suggests that there is in fact an option controlling this behavior.  I'm entirely prepared to believe that, as I have previously found Clang's documentation to be incomplete in other ways, but it should not be necessary to explicitly turn <em>off</em> such an option to achieve language conformance.</p>\n"}], "owner": {"reputation": 6049, "user_id": 1595323, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2dd4e62d8f84c5dee2d68ba35393f266?s=128&d=identicon&r=PG", "display_name": "Konstantin Vladimirov", "link": "https://stackoverflow.com/users/1595323/konstantin-vladimirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 46688928, "answer_count": 2, "score": 2, "last_activity_date": 1507729954, "creation_date": 1507726154, "question_id": 46688618, "link": "https://stackoverflow.com/questions/46688618/how-to-switch-off-local-array-merging-in-clang", "title": "How to switch off local array merging in clang?", "body": "<p>There is simple code, where clang and gcc behave differently.</p>\n\n<pre><code>int t;\nextern void abort (void);\n\nint f(int t, const int *a)\n{\n const int b[] = { 1, 2, 3};\n if (!t)\n   return f(1, b);\n return b == a;\n}\n\nint main(void)\n{\n if (f(0, 0))\n   abort ();\n return 0;\n}\n</code></pre>\n\n<p>Clang:</p>\n\n<pre><code>&gt; clang -v\nclang version 4.0.1 (tags/RELEASE_401/final)\nTarget: x86_64-unknown-linux-gnu\nThread model: posix\n&gt; clang test.c\n&gt; ./a.out\nAborted\n</code></pre>\n\n<p>GCC:</p>\n\n<pre><code>&gt; gcc -v\nTarget: x86_64-suse-linux\nThread model: posix\ngcc version 7.2.0 (GCC)\n&gt; gcc test.c\n&gt; ./a.out\n&gt; echo $?\n0\n</code></pre>\n\n<p>Reason is pretty obvious: behavior is implementation defined and clang merges constant local arrays to global one.</p>\n\n<p>But lets say I want consistent behavior. Can I turn some switch on or off in clang to disable this optimization and make it honestly create different local arrays (even constant ones) for different stack frames?</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1507725942, "post_id": 46688506, "comment_id": 80324594, "body": "@kalia  &quot;The best way&quot; is to declare the array outside the functions and pass it as an argument to the both functions.:)"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1507725943, "post_id": 46688506, "comment_id": 80324596, "body": "1. <i>&quot;Doesn&#39;t work&quot;</i> is not a proper problem description - be as precise as you can be. 2. Your <code>read</code> function is returning a pointer to a local array, whose lifetime ends after the function ends"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1507725973, "post_id": 46688506, "comment_id": 80324633, "body": "<code>char c[4];</code> --&gt; <code>static char c[4];</code>"}, {"owner": {"reputation": 189, "user_id": 8345159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adef4b35c4159e946277c8c84a7c04fe?s=128&d=identicon&r=PG&f=1", "display_name": "kalia", "link": "https://stackoverflow.com/users/8345159/kalia"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507726257, "post_id": 46688506, "comment_id": 80324833, "body": "@VladfromMoscow But I would like to know if there&#39;s any way in c to pass a string between two functions"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507726708, "post_id": 46688506, "comment_id": 80325164, "body": "@kalia And I wrote how to do this."}, {"owner": {"reputation": 189, "user_id": 8345159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adef4b35c4159e946277c8c84a7c04fe?s=128&d=identicon&r=PG&f=1", "display_name": "kalia", "link": "https://stackoverflow.com/users/8345159/kalia"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1507726824, "post_id": 46688506, "comment_id": 80325272, "body": "@VladfromMoscow okay, thank you."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507728091, "post_id": 46688506, "comment_id": 80326318, "body": "@BLUEPIXY yea, lets go <code>static</code> and wait for the awkward moment when someone decides to use <code>read</code> for some purpose inside the <code>printc</code> implementation."}], "owner": {"reputation": 189, "user_id": 8345159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adef4b35c4159e946277c8c84a7c04fe?s=128&d=identicon&r=PG&f=1", "display_name": "kalia", "link": "https://stackoverflow.com/users/8345159/kalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "closed_date": 1507726209, "answer_count": 0, "score": 0, "last_activity_date": 1507726501, "creation_date": 1507725802, "last_edit_date": 1507726398, "question_id": 46688506, "link": "https://stackoverflow.com/questions/46688506/return-a-char-in-c-and-send-it-as-a-parameter-to-another-function", "closed_reason": "Duplicate", "title": "Return a char * in c and send it as a parameter to another function", "body": "<p>I would like to know how can I return a string in c and then send it as a parameter to another funcion. For example, in those functions:</p>\n\n<p>This is the function that returns a <code>char *</code>:</p>\n\n<pre><code>char * read(){\n    char c[4];\n    printf(\"Write the string:\\n\");\n    scanf(\" %[^\\n]\", c);\n    return c;\n}\n</code></pre>\n\n<p>And this one takes it as a parameter and prints it:</p>\n\n<pre><code>void printc(char *a){\n    printf(\"%s\", a);\n}\n</code></pre>\n\n<p>I've tried doing: </p>\n\n<pre><code>printc(read()); \n</code></pre>\n\n<p>But it doesn't work. What's the best way to do this?</p>\n"}, {"tags": ["c++", "c", "cmake", "mingw"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1507724894, "post_id": 46688200, "comment_id": 80323879, "body": "Where is <code>int SomeCFunction()</code> called?"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1507724998, "post_id": 46688200, "comment_id": 80323950, "body": "is <code>boost::property_tree::read_xml</code> not taking a stream as parameter instead of a string?"}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1507725266, "post_id": 46688200, "comment_id": 80324139, "body": "@YSC int SomeCFunction() isn&#39;t called anywhere.  It&#39;s simply linked.  That&#39;s one of the strange details here.  I dont NEED to call SomeCFunction() to destroy my exceptions in the main.cpp.  I just need to link to it."}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1507725365, "post_id": 46688200, "comment_id": 80324207, "body": "@tobi303 There is an overload of <code>read_xml</code> which accepts a <code>const string&amp;</code>, then opens a file with that name.  That is the overload I am invoking.  See <a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/boost/property_tree/xml_parser/read_xml_idp910001728.html\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1507725392, "post_id": 46688200, "comment_id": 80324225, "body": "@Stewart ah ok didnt see that one. thx"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1507725425, "post_id": 46688200, "comment_id": 80324245, "body": "and what about boost ptree ? is it essential to the MCVE ?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1507725428, "post_id": 46688200, "comment_id": 80324249, "body": "Since C does not have exceptions, the likely answer is whenever a thrown C++ exception encounters a stack frame from a C function, it explicitly fails, since the exception cannot be properly propagated. This was the case, at least, with early versions of gcc, where an explicit compilation option was needed to compile C code with proper support for C++ exceptions."}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1507725552, "post_id": 46688200, "comment_id": 80324328, "body": "@Massimiliano Janes  I couldn&#39;t reproduce it by throwing a primitive, but the boost stuff I chose to show is all header-only so it should be fairly simple.  I haven&#39;t figured out a pattern between what crashes and what doesn&#39;t.  I&#39;ll see if I can find a simpler way to reproduce it."}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "edited": false, "score": 0, "creation_date": 1507725862, "post_id": 46688200, "comment_id": 80324531, "body": "<a href=\"https://stackoverflow.com/questions/7765599/strange-problems-with-c-exceptions-with-mingw\">Here</a>&#39;s a good example of a very similiar situation (if not identical).    The cause of that problem is a mix of static/dynamic libraries.  That isn&#39;t the problem here, but it shows the same symptoms."}, {"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "edited": false, "score": 0, "creation_date": 1507726067, "post_id": 46688200, "comment_id": 80324696, "body": "I&#39;m not sure why cmake generates two -lgcc_eh flags."}], "answers": [{"comments": [{"owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "edited": false, "score": 0, "creation_date": 1508310650, "post_id": 46690393, "comment_id": 80556005, "body": "It turns out that when I use this command, <code>gcc_eh</code> is the only library excluded.  The others are all included with the CXX link and so this solution is perfect."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 1, "last_activity_date": 1507730938, "creation_date": 1507730938, "answer_id": 46690393, "question_id": 46688200, "link": "https://stackoverflow.com/questions/46688200/mixing-c-and-c-causing-exceptions-to-terminate/46690393#46690393", "title": "Mixing C and C++ causing exceptions to terminate", "body": "<p>It's a <a href=\"https://public.kitware.com/pipermail/cmake/2017-August/066128.html\" rel=\"nofollow noreferrer\">feature(bug?)</a> in cmake implicit library detection introduced in cmake <a href=\"https://cmake.org/pipermail/cmake/2014-December/059234.html\" rel=\"nofollow noreferrer\">3.1</a>. CMake thinks that in C mode GCC needs to link with <code>gcc_eh</code>, which breaks C++ exception handling.</p>\n\n<p>You can disable implicit library detection by adding this to CMakeLists.txt:</p>\n\n<pre><code>set(CMAKE_C_IMPLICIT_LINK_LIBRARIES \"\")\n</code></pre>\n\n<p>(Don't know how to exclude just <code>gcc_eh</code> from the list)</p>\n"}, {"tags": [], "owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "is_accepted": false, "score": 0, "last_activity_date": 1508310712, "last_edit_date": 1508310712, "creation_date": 1507796699, "answer_id": 46704811, "question_id": 46688200, "link": "https://stackoverflow.com/questions/46688200/mixing-c-and-c-causing-exceptions-to-terminate/46704811#46704811", "title": "Mixing C and C++ causing exceptions to terminate", "body": "<p>RustyX's answer is the accepted one, but I also found another number of work-arounds that seem to work: </p>\n\n<ul>\n<li><code>set_source_files_properties(filename.c PROPERTIES LANGUAGE CXX)</code></li>\n<li><code>set(CMAKE_C_COMPILER /path/to/cpp/compiler)</code></li>\n<li><code>set(APPEND CMAKE_CXX_SOURCE_FILE_EXTENSIONS c)</code>.  </li>\n</ul>\n\n<p>But RustyX's is the best answer so far.</p>\n\n<p>Edit:  The last one doesn't work.  It still builds with the C compiler.  I'd also need to remove <code>c</code> from <code>CMAKE_C_SOURCE_FILE_EXTENSIONS</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 2082874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f044d52da154af04473a83cbc595e78c?s=128&d=identicon&r=PG", "display_name": "Atokon", "link": "https://stackoverflow.com/users/2082874/atokon"}, "is_accepted": false, "score": 0, "last_activity_date": 1517392507, "last_edit_date": 1517392507, "creation_date": 1517391231, "answer_id": 48538774, "question_id": 46688200, "link": "https://stackoverflow.com/questions/46688200/mixing-c-and-c-causing-exceptions-to-terminate/48538774#48538774", "title": "Mixing C and C++ causing exceptions to terminate", "body": "<p>To add to rustyx answer above (I'm not allowed to comment), this is fixed in cmake 3.10 per this pull-request: <a href=\"https://gitlab.kitware.com/cmake/cmake/merge_requests/1460\" rel=\"nofollow noreferrer\">https://gitlab.kitware.com/cmake/cmake/merge_requests/1460</a></p>\n\n<p>I tested with CMake 3.10.2, and it seems like exceptions now work without having to specify the work-around cmake stanza rustyx is mentioning.</p>\n"}], "owner": {"reputation": 2998, "user_id": 1723954, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/qM3Yc.jpg?s=128&g=1", "display_name": "Stewart", "link": "https://stackoverflow.com/users/1723954/stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 46690393, "answer_count": 3, "score": 2, "last_activity_date": 1517392507, "creation_date": 1507724751, "last_edit_date": 1507728282, "question_id": 46688200, "link": "https://stackoverflow.com/questions/46688200/mixing-c-and-c-causing-exceptions-to-terminate", "title": "Mixing C and C++ causing exceptions to terminate", "body": "<p>I am porting a project from MSVC to mingw.  The project contains C and C++.  However, whenever an exception is thrown, instead of being caught, std::terminate gets called and the application crashes.  I can't understand why so any advice would be appreciated.</p>\n\n<p>My toolchain is cmake/ninja/mingw32 in a MSYS2 environment installed in Windows.</p>\n\n<h1>MCVE:</h1>\n\n<pre><code># CMakeLists.txt\ncmake_minimum_required(VERSION 3.6)\nproject(FailedExceptions)\nadd_executable(FailedExceptions c_funcs.c main.cpp)\n</code></pre>\n\n<hr>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n#include &lt;boost/property_tree/ptree.hpp&gt;\n#include &lt;boost/property_tree/xml_parser.hpp&gt;\n\nint main() {\n    try  {\n        boost::property_tree::ptree pt;\n        std::printf(\"reading file\\n\");\n        boost::property_tree::read_xml(\"nonexistant-file\", pt);\n        std::printf(\"provider file read\\n\");\n    } catch (...) {\n        std::printf(\"Exception caught\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// c_funcs.c\nint SomeCFunction()\n{\n    return 0;\n}\n</code></pre>\n\n<h1>Output</h1>\n\n<pre><code>$ cmake .. -GNinja\n-- The C compiler identification is GNU 7.2.0\n-- The CXX compiler identification is GNU 7.2.0\n-- Check for working C compiler: C:/msys64/mingw32/bin/cc.exe -- works\n-- Check for working CXX compiler: C:/msys64/mingw32/bin/c++.exe -- works\n-- Configuring done\n-- Generating done\n-- Build files have been written to: C:/msys64/home/sferguson/src/vis/build\n\n$ ninja -v\n[1/3] C:\\msys64\\mingw32\\bin\\cc.exe  -MD -MT c_funcs.c.obj -MF c_funcs.c.obj.d -o c_funcs.c.obj   -c ../c_funcs.c\n[2/3] C:\\msys64\\mingw32\\bin\\c++.exe -MD -MT main.cpp.obj -MF main.cpp.obj.d -o main.cpp.obj -c ../main.cpp\n[3/3] C:\\msys64\\mingw32\\bin\\c++.exe  c_funcs.c.obj main.cpp.obj  -o FailedExceptions.exe -Wl,--major-image-version,0,--minor-image-version,0  -lgcc_eh -lgcc_eh -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32\n\n$ ./FailedExceptions.exe\nreading file\n\nThis application has requested the Runtime to terminate it in an unusual way.\nPlease contact the application's support team for more information.\n$\n</code></pre>\n\n<h1>Trace:</h1>\n\n<p>I can get this trace from Dr. Mingw.  It really does appear that the crash happens between construction of the exception and the actual throw.  </p>\n\n<pre><code>ntdll.dll!_NtTerminateProcess@8\nntdll.dll!_RtlExitUserProcess@4\nkernel32.dll!_ExitProcessStub@4\nmsvcrt.dll!___crtExitProcess\nmsvcrt.dll!__cinit\nmsvcrt.dll!__exit\nmsvcrt.dll!_abort\nFailedExceptions.exe!uw_init_context_1\nFailedExceptions.exe!boost::property_tree::xml_parser::xml_parser_error::xml_parser_error\nFailedExceptions.exe!boost::property_tree::xml_parser::read_xml&lt;boost::property_tree::basic_ptree&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::less&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; &gt;\nFailedExceptions.exe!main\nFailedExceptions.exe!__tmainCRTStartup  [D:/develop/scripts/mingw-w64-crt-git/src/mingw-w64/mingw-w64-crt/crt/crtexe.c @ 334]\nkernel32.dll!@BaseThreadInitThunk@12\nntdll.dll!___RtlUserThreadStart@8\nntdll.dll!__RtlUserThreadStart@8\n</code></pre>\n\n<h1>Troubleshooting:</h1>\n\n<ul>\n<li>I found some posts from 5-10 years ago suggesting that this could be a conflict between mingw's dw2 and sjlj libraries, but I only have the <code>libgcc_s_dw2-1.dll</code> binaries installed which come with the mingw-w64-i686-gcc-libs package in the msys pacman repository.</li>\n<li>I tried changing my CMakeLists.txt file to compile everything with C++ with <code>project(FailedExceptions LANGUAGES CXX)</code>.  This prevents cmake from building my C files. So it does work for the MCVE, but my full project is missing all C content.</li>\n<li>I've added <code>set(CMAKE_C_FLAGS ${CMAKE_C_FLAGS} -fexceptions)</code> but it seems to have no effect.  I've confirmed with <code>ninja -v</code> that this flag is added to the C-file compilation command.</li>\n<li>As soon as I remove the C file from the build, everything works. But even though I'm not using the C-file in this MCVE, I still use it in my big project.</li>\n<li>I've found another smaller example <a href=\"https://stackoverflow.com/a/46689104/1723954\">here</a>.  I can reproduce that problem IFF I also compile a C file in that same project.</li>\n</ul>\n"}, {"tags": ["c", "macos", "openssl", "homebrew", "nghttp2"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507736151, "post_id": 46687765, "comment_id": 80332223, "body": "You&#39;ll need to tell the configure command where to find your Brew&#39;d OpenSSL.  Try <code>.&#47;configure --help | less</code> (because the output is likely to be voluminous)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1507740779, "post_id": 46687765, "comment_id": 80335015, "body": "Also see <a href=\"http://stackoverflow.com/q/38670295\">Homebrew refusing to link OpenSSL</a>, <a href=\"http://stackoverflow.com/q/15185661\">Update OpenSSL on OS X with Homebrew</a>, <a href=\"http://stackoverflow.com/q/35129977\">How to install latest version of openssl Mac OS X El Capitan</a>, <a href=\"http://apple.stackexchange.com/q/126830\">How to upgrade OpenSSL in OS X?</a>, <a href=\"http://superuser.com/q/486389\">Openssl installation using HomeBrew fails</a>, etc."}], "owner": {"reputation": 623, "user_id": 4365776, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/5B4zB.jpg?s=128&g=1", "display_name": "fcbflying", "link": "https://stackoverflow.com/users/4365776/fcbflying"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 846, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507746283, "creation_date": 1507723442, "last_edit_date": 1507746283, "question_id": 46687765, "link": "https://stackoverflow.com/questions/46687765/mac-os-upgrade-openssl", "title": "mac os upgrade openssl", "body": "<p>My Mac OS system is: OS X Yosemite version 10.10.5.\nAnd its openssl version is 0.9.8zg.\nNow I want to install an nghttp2 tool, and it requires openssl>=1.0.1.\nSo I try brew update and brew install openssl.\nAfter that I use command: <code>openssl version</code>,it shows:<code>OpenSSL 1.0.2l  25 May 2017</code>.</p>\n\n<p>But when I go to nghttp2 directory and run the <code>./configure</code>command,it still shows:</p>\n\n<p><code>configure: Requested 'openssl &gt;= 1.0.1' but version of OpenSSL is 0.9.8zg</code>.</p>\n\n<p>I am confused, why the latest version not used but still use the old one?</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507723581, "post_id": 46687759, "comment_id": 80323016, "body": "Are you sure that builds? The types of <code>p_arr</code> and <code>&amp;arr</code> are different, that initialization should not be allowed."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1507723633, "post_id": 46687759, "comment_id": 80323049, "body": "As for what I think your question is, C have no bounds checking."}, {"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726139, "post_id": 46687759, "comment_id": 80324741, "body": "By <i>&quot;C have no bounds checking&quot;</i> do you mean that the C compiler doesn&#39;t use the <code>[1]</code> information in ` char (*p_arr)[1] = &amp;arr;`. If that is the case, isn&#39;t there a problem with C&#39;s static memory allocation ?"}, {"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726192, "post_id": 46687759, "comment_id": 80324782, "body": "Yes, I double checked this and it builds"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726389, "post_id": 46687759, "comment_id": 80324923, "body": "Take you array <code>arr</code> for example, it has 5 elements meaning its valid indexes are <code>0</code> to <code>4</code> (inclusive). However, the compiler is not required to complain if you use <code>arr[5]</code> in an expression. While the compiler keeps track of the size for use in <code>sizeof</code>, what happens when it does <code>arr[5]</code> is really <code>*(arr + 5)</code>, which is <i>pointer arithmetic</i>. And pointers have no inbuilt knowledge of the data it points to except the type. More specifically, pointers have no knowledge of the <i>size</i> of the data it points to. In other words, no bounds checking."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726504, "post_id": 46687759, "comment_id": 80325013, "body": "That&#39;s how C works, and it is your responsibility as a programmer to not go out of bounds of memory (arrays of dynamically allocated) you have. Not doing explicit bounds-checking in your program can and will lead to out-of-bounds access, and that in turn leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>."}, {"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726665, "post_id": 46687759, "comment_id": 80325133, "body": "Indeed, but in this case, it means that I can validly access <code>p_arr[1]</code> although only <code>p_arr[0]</code> refers to data I entered. However, doesn&#39;t <code>char (*p_arr)[1]</code> expect a pointer to an array of size 1 which keeps track of the size of the data since it is an array ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726829, "post_id": 46687759, "comment_id": 80325278, "body": "I&#39;m no longer sure what your question is... Is it about the initialization of <code>p_arr</code> from an incompatible type? Then it&#39;s <a href=\"https://stackoverflow.com/a/46688779/440558\">answered below</a>. Or is it about the apparently out-of-bounds access of <code>p_arr[0][4]</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507726886, "post_id": 46687759, "comment_id": 80325332, "body": "And what is the difference between this question and your previous question?"}, {"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507727431, "post_id": 46687759, "comment_id": 80325759, "body": "Right, i&#39;ll edit my question to make it clearer since it was about both of these points. The out-of-bounds access to <code>p_arr[0][4]</code> was indeed answered to below, now the part that remains is about the initialization of <code>p_arr</code> from incompatible type"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507727073, "post_id": 46688779, "comment_id": 80325477, "body": "Right, I forgot about the C compiler not checking bounds for the <code>p_arr[0][4]</code> part."}, {"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507727148, "post_id": 46688779, "comment_id": 80325531, "body": "Have you tried executing the <code>char (*p_arr)[1] = &amp;arr;</code> part of the code ? I downloaded codeblocks IDE on their website, are you sure my compiler is broken/non-compliant ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507727518, "post_id": 46688779, "comment_id": 80325849, "body": "@Y.GP After testing it myself, the compiler emits a <i>warning</i> about incompatible types for the assignment. But you have to remember that C is rather weakly typed, which is probably the reason it&#39;s not an error."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507733620, "post_id": 46688779, "comment_id": 80330444, "body": "@Y.GP To use the gcc compiler as a <i>standard C compiler</i>, you must use settings <code>gcc -std=c11 -pedantic-errors</code>. In Codeblocks, Settings -&gt; Compiler -&gt; Compiler settings tab. Check &quot;Treat as errors the warnings demanded by strict ISO C and ISO C++&quot;. It is also a good idea to check &quot;Enable extra compiler warnings&quot; (-Wextra) and &quot;Enable all common compiler warnings (overrides many other settings)&quot; (-Wall&quot;). However, even if you didn&#39;t do this, gcc gives a warning as it must. Listen to the compiler."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507733895, "last_edit_date": 1507733895, "creation_date": 1507726637, "answer_id": 46688779, "question_id": 46687759, "link": "https://stackoverflow.com/questions/46687759/pointer-to-2d-array-with-incompatible-row-length/46688779#46688779", "title": "Pointer to 2D array with incompatible row length", "body": "<p>Your compiler is broken/incorrectly configured/non-compliant.</p>\n\n<p>An array pointer to an array with 1 element is not compatible with an array pointer to an array of 5 element. The rule of <em>simple assignment</em> in C says that a valid pointer assignment must be (C11 6.5.16.1 emphasis mine):</p>\n\n<blockquote>\n  <ul>\n  <li>the left operand has atomic, qualified, or unqualified pointer type, and (considering the type the left operand would have after lvalue\n  conversion) both operands are pointers to qualified or unqualified\n  versions of compatible types, and the type pointed to by the left has\n  all the qualifiers of the type pointed to by the right;</li>\n  </ul>\n</blockquote>\n\n<p>If we remove all the formal standard terms from the cited text, we end up with this in plain English:</p>\n\n<p><em>The left operand of the = operator has pointer type, and both operands are pointers to compatible types.</em></p>\n\n<p>This is not the case in your code, so it contains something known as <em>constraint violation</em>, meaning that the code violates what's allowed by the C standard.</p>\n"}], "owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1507757029, "creation_date": 1507723422, "last_edit_date": 1507727584, "question_id": 46687759, "link": "https://stackoverflow.com/questions/46687759/pointer-to-2d-array-with-incompatible-row-length", "title": "Pointer to 2D array with incompatible row length", "body": "<p>I tried the following code</p>\n\n<pre><code>    char arr[5] = {'A', 'E', 'I', 'O', 'U'};\n    char (*p_arr)[1] = &amp;arr;\n    printf(\"%c\\n\", p_arr[0][4]); //returns 'U'\n</code></pre>\n\n<p>Why isn't there any error, since </p>\n\n<pre><code>    char (*p_arr)[1] = &amp;arr;\n</code></pre>\n\n<p>seems to be an initialization from an incompatible type (<code>char (*)[5]</code> instead of required <code>char (*)[1]</code>)? Moreover, <code>p_arr[0][4]</code> asks for the 5th element of an array supposed to have only <code>1</code> element. Isn't that wrong ?</p>\n"}, {"tags": ["c", "arrays", "string", "time"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1507720609, "post_id": 46686748, "comment_id": 80321071, "body": "<code>clkType[3] = &#39;\\0&#39;;</code> --&gt; <code>clkType[2] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507720689, "post_id": 46686748, "comment_id": 80321119, "body": "BLUEPIXY corrected tnx, but results are the same."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1507720757, "post_id": 46686748, "comment_id": 80321164, "body": "Can you show a link to the task description?"}, {"owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "edited": false, "score": 0, "creation_date": 1507720823, "post_id": 46686748, "comment_id": 80321193, "body": "<a href=\"https://www.hackerrank.com/challenges/time-conversion/\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/time-conversion</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1507720870, "post_id": 46686748, "comment_id": 80321224, "body": "You add 12 hours by adding 1 or 2 to the digits. {&#39;0&#39;, &#39;9&#39;} =&gt; {&#39;1&#39;, &#39;\\x3a&#39;}."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1507720917, "post_id": 46686748, "comment_id": 80321265, "body": "Do you know what time 12:40:22am or 12:45:54PM are in 24 hour notation? Unless you you figure out what the result should be, you cannot properly implementit."}, {"owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "edited": false, "score": 0, "creation_date": 1507721076, "post_id": 46686748, "comment_id": 80321363, "body": "Yes in AM, time stays the same, we just cut AM, and in PM we have to add 12 hours to those hours in PM time, and if that value is 24 we set it to 00?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1507721110, "post_id": 46686748, "comment_id": 80321383, "body": "NO! 12:34:56AM == 00:34:56; 12:34:56PM == 12:34:56"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1507721181, "post_id": 46686748, "comment_id": 80321434, "body": "Basically I think that your logic is incorrect. As an example, I think that it is necessary to carry in case of carry at 9 pm."}, {"owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "edited": false, "score": 0, "creation_date": 1507721235, "post_id": 46686748, "comment_id": 80321472, "body": "dasblikenlight explained it clear, thanks all, i will correct it! :)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1507721450, "post_id": 46686748, "comment_id": 80321630, "body": "Isn&#39;t hackerrank a bit off with their AM and PM (Ante-meridium; before and Post-meridium, after)?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1507723432, "post_id": 46686748, "comment_id": 80322922, "body": "&quot;Military time&quot;? You mean standardized time format, as used by the whole world except for a few confused English-speaking countries?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507740277, "post_id": 46686748, "comment_id": 80334734, "body": "Welcome to Stack Overflow! Please <a href=\"https://stackoverflow.com/posts/46686748/edit\">edit</a> your question to show us what kind of debugging you&#39;ve done.  I expect you to have run your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> within Valgrind or a similar checker, and to have investigated with a debugger such as GDB, for example.  Ensure you&#39;ve enabled a full set of compiler warnings, too.  What did the tools tell you, and what information are they missing?  And read Eric Lippert&#39;s <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507740346, "post_id": 46686748, "comment_id": 80334775, "body": "Please read and understand <a href=\"/q/605845\">the question on why not to cast the return value of <code>malloc()</code> and family in C</a>.  Also note that <code>sizeof (char)</code> is 1, by definition (<code>sizeof</code> returns the value in units of <code>char</code>)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507740384, "post_id": 46686748, "comment_id": 80334796, "body": "Please <a href=\"https://stackoverflow.com/posts/46686748/edit\">edit</a> your code to reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem.  Your current code includes much that is peripheral to your problem - a minimal sample normally looks similar to a good unit test: only performing one task, with input values specified for reproducibility."}], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "is_accepted": false, "score": 1, "last_activity_date": 1507720999, "creation_date": 1507720999, "answer_id": 46687002, "question_id": 46686748, "link": "https://stackoverflow.com/questions/46686748/12-hour-am-pm-format-to-military-24-hour-time/46687002#46687002", "title": "12-hour AM/PM format to military (24-hour) time", "body": "<p>12 Am translates to <code>00:00:00</code> you return as soon as you check for <code>AM</code> you also need to check if it's 12</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "edited": false, "score": 0, "creation_date": 1507721193, "post_id": 46687018, "comment_id": 80321443, "body": "Yes, there is a confusion of that time format conversion, thanks for pointing that out! This solution advice is great and short."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1507721336, "last_edit_date": 1507721336, "creation_date": 1507721037, "answer_id": 46687018, "question_id": 46686748, "link": "https://stackoverflow.com/questions/46686748/12-hour-am-pm-format-to-military-24-hour-time/46687018#46687018", "title": "12-hour AM/PM format to military (24-hour) time", "body": "<p>You have special handling for midnight. You need special handling for noon as well, and you need to fix midnight handling, too.</p>\n\n<p>By convention, 12 AM denotes midnight and 12 PM denotes noon. Your code does it the other way around, converting 12:00:00 AM to 12:00:00 (noon) and 12:00:00 PM to midnight.</p>\n\n<p>One simple way of dealing with time conversion problems is to convert the input to a number of seconds from midnight, and then format this number as the desired output. This approach eliminates character manipulation (adding 12 one digit at a time) and make the code more readable in general.</p>\n"}], "owner": {"reputation": 25, "user_id": 8758474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2089fc6e9aab8ce1674f387ace9288f?s=128&d=identicon&r=PG&f=1", "display_name": "Techy", "link": "https://stackoverflow.com/users/8758474/techy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 46687018, "answer_count": 2, "score": 0, "last_activity_date": 1507721336, "creation_date": 1507720264, "last_edit_date": 1507720718, "question_id": 46686748, "link": "https://stackoverflow.com/questions/46686748/12-hour-am-pm-format-to-military-24-hour-time", "title": "12-hour AM/PM format to military (24-hour) time", "body": "<p>I am trying to solve this task on hackerrank but having problem when submitting solution.</p>\n\n<p>Here is my solution, I would like to someone point me to mistakes, or give me advice what to avoid when working with strings?</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;stdbool.h&gt;\n\nchar clkType[3];\nchar hours[3];\n\nchar* timeConversion(char* s)\n{\n    strncpy(clkType, &amp;s[8], 2);\n    clkType[2] = '\\0';\n\n    if(strcmp(clkType, \"AM\") == 0)\n    {\n        s[8] = '\\0';\n        return s;\n    }\n    else\n    {    \n        s[0] += 0x1;\n        s[1] += 0x2;\n        s[8] = '\\0';\n\n        strncpy(hours, &amp;s[0], 2);\n        hours[2] = '\\0';\n\n        if(strcmp(hours, \"24\") == 0) \n        {\n            s[0] = '0';\n            s[1] = '0';\n            s[8] = '\\0';   \n        }\n\n        return s;\n    }\n}\n\nint main() {\n    char* s = (char *)malloc(512000 * sizeof(char));\n    scanf(\"%s\", s);\n    int result_size;\n    char* result = timeConversion(s);\n    printf(\"%s\\n\", result);\n    return 0;\n}\n</code></pre>\n\n<p>I am getting expected result when I'm testing it with these 04:59:59AM, 12:40:22AM, 12:45:54PM, 12:00:00AM time cases but when submitting results it gives me errors on those test cases.</p>\n"}, {"tags": ["c", "pthreads", "semaphore"], "comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1507720019, "post_id": 46686185, "comment_id": 80320740, "body": "You can do this with any form of IPC, a pipe, a mailbox, a socket, you chose. Have main either wait or poll the IPC for the result from the thread. There are surely other ways too."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1507746383, "post_id": 46686185, "comment_id": 80338009, "body": "Undefined behavior for unsynchronized, non-readonly, non atomic access to an object from multiple threads."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5714731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559e52271533999ee50ccf3f523b2ab5?s=128&d=identicon&r=PG&f=1", "display_name": "nynpat", "link": "https://stackoverflow.com/users/5714731/nynpat"}, "is_accepted": false, "score": 1, "last_activity_date": 1507721187, "last_edit_date": 1507721187, "creation_date": 1507720100, "answer_id": 46686704, "question_id": 46686185, "link": "https://stackoverflow.com/questions/46686185/can-you-return-a-value-from-a-thread-in-c-when-using-semaphores/46686704#46686704", "title": "can you return a value from a thread in c when using semaphores", "body": "<p>I am not sure about the <code>programmingPtr</code> structure argument passed to Thread, but by adding one more <code>result</code> variable to that structure and update that in the <code>flash_firmware</code> thread based on the your conditions. on return from the thread, observe the value of <code>result</code> in the main function like below:</p>\n\n<p>let's have one more element in your existing <code>programmingPtr</code> structure</p>\n\n<pre><code>struct programmingPtr{\n    int result;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1507746314, "post_id": 46686726, "comment_id": 80337970, "body": "Undefined behavior for accessing an object through an lvalue expression not of the effective type of the object or a character type."}], "tags": [], "owner": {"reputation": 1017, "user_id": 2072005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba025189d0d4e0fe5a3e6b2b9062be3?s=128&d=identicon&r=PG", "display_name": "Jonatan Goebel", "link": "https://stackoverflow.com/users/2072005/jonatan-goebel"}, "is_accepted": true, "score": 1, "last_activity_date": 1507720178, "creation_date": 1507720178, "answer_id": 46686726, "question_id": 46686185, "link": "https://stackoverflow.com/questions/46686185/can-you-return-a-value-from-a-thread-in-c-when-using-semaphores/46686726#46686726", "title": "can you return a value from a thread in c when using semaphores", "body": "<p>Yes you can.</p>\n\n<p>You can return a pointer to your desired return value with <a href=\"http://man7.org/linux/man-pages/man3/pthread_exit.3.html\" rel=\"nofollow noreferrer\">pthread_exit()</a>, and than catch it later with <a href=\"http://man7.org/linux/man-pages/man3/pthread_join.3.html\" rel=\"nofollow noreferrer\">calling pthread_join()</a>.</p>\n\n<p>Just be sure that the pointer is referencing a static or an allocated memory location.</p>\n\n<p>You may also use the pointer as an integer if it is enough information for you, example:</p>\n\n<pre><code>pthread_exit((void *)0);\n\nint ret;\npthread_join(tid , (void **)&amp;ret);\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 8020705, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/41237e3aa506f0b25f5d0009e2a16572?s=128&d=identicon&r=PG&f=1", "display_name": "artic sol", "link": "https://stackoverflow.com/users/8020705/artic-sol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 46686726, "answer_count": 2, "score": -1, "last_activity_date": 1507721187, "creation_date": 1507718530, "question_id": 46686185, "link": "https://stackoverflow.com/questions/46686185/can-you-return-a-value-from-a-thread-in-c-when-using-semaphores", "title": "can you return a value from a thread in c when using semaphores", "body": "<p>I have a c program that creates a thread when it starts. The purpose of the thread is to flash firmware to a device when instructed to do so. So the when the thread starts it waits on a semaphore and a some point the main application will <code>sem_post(&amp;semaphore);</code> post to the semaphore in the thread and the thread will complete its task. </p>\n\n<p>Sometimes this task can fail (if there is a hardware issue). My question is can I return a value from the thread to where the semaphore was posted to in the main application? The flashing of the firmware is done with a <code>system()</code> and the result is returned to the int variable <code>res</code>. I want to return this value to main application?</p>\n\n<p>Here is the thread:</p>\n\n<pre><code>static void *flash_firmware(void *param) {\n\n    int res;\n    char thread_Buf[SM_BUF];\n\n    printf(\"Started thread\\r\\n\");\n\n    while(running == 1) {\n\n        sem_wait(&amp;semaphore);\n\n        if(running == 1) {\n            printf(\"*************Flashing firmware*************\\r\\n\");\n            snprintf(thread_Buf, SM_BUF, prog_path_printf,\n                    programmingPtr-&gt;binary_filename, programmingPtr-&gt;debugger_serialnumber);\n\n            res = system(thread_Buf); //flash firmware\n\n        }\n        else\n            printf(\"Exiting thread \\r\\n\");\n\n    }\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>Here is a snippet of <code>main()</code> where I create the threads.</p>\n\n<pre><code>#define THREADS 2\npthread_t thread_ID [THREADS];\n\nint volatile running = 1;\nsem_t semaphore;\n\n\nint main(int argc, char *argv[])\n{\n\n/initialize semaphores to be used with threads in this process, set value to 0 initially\n    sem_init(&amp;semaphore, 0, 0);\n\n\n    //create threads for DUTs 1 &amp; 3\n    pthread_create(&amp;thread_ID[0], NULL, flash_firmware, &amp;programmingPtr);\n\n}\n</code></pre>\n\n<p>Then in a different source file, <code>sem_post(&amp;semaphore);</code> will be executed and the thread will proceed.</p>\n"}, {"tags": ["c", "ssl", "mqtt", "tls1.2", "paho"], "answers": [{"tags": [], "owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "is_accepted": false, "score": 0, "last_activity_date": 1507746169, "creation_date": 1507746169, "answer_id": 46695092, "question_id": 46686150, "link": "https://stackoverflow.com/questions/46686150/mqtt-tls-session-resumption-in-c/46695092#46695092", "title": "MQTT TLS session resumption in C", "body": "<p>This came up recently on the mosquitto dev mailing list here <a href=\"https://dev.eclipse.org/mhonarc/lists/mosquitto-dev/msg01606.html\" rel=\"nofollow noreferrer\">https://dev.eclipse.org/mhonarc/lists/mosquitto-dev/msg01606.html</a></p>\n\n<p>The following excerpt seams to imply it may not be possible just yet with the code as it is.</p>\n\n<blockquote>\n  <blockquote>\n    <p>How can I use Mosquitto / OpenSSL C API to leverage session tickets in an\n    MQTT C client ?</p>\n  </blockquote>\n  \n  <p>Not at the moment, this needs code changes that are a bit more\n  involved - it looks like we need to use SSL_set_session() to apply a\n  saved session to your client and SSL_CTX_sess_set_new_cb() to save the\n  session out.</p>\n  \n  <blockquote>\n    <p>Is there any way I could persist session tickets on the clients, so they\n    would remain valid across reboot ?</p>\n  </blockquote>\n  \n  <p>With the above changes, yes.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1539277640, "post_id": 52752821, "comment_id": 92453662, "body": "The MQTT Clean session flag has nothing to do with TLS sessions, it is all about how QOS1/2 subscriptions are handled while the client is disconnected"}, {"owner": {"reputation": 3, "user_id": 8143963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97542b31ee420ede5f2bc0ca7a26c06e?s=128&d=identicon&r=PG", "display_name": "sachinrj", "link": "https://stackoverflow.com/users/8143963/sachinrj"}, "reply_to_user": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1539319891, "post_id": 52752821, "comment_id": 92466847, "body": "Clean session flag of PAHO mqtt client is linked with session resumption apart from QoS.  Just go to file &quot;MQTTClient.c&quot;.  Try to find out <code>m-&gt;c-&gt;cleansession == 0</code> if that is true there is a statement , <code>SSL_get1_session(m-&gt;c-&gt;net.ssl);</code> This function helps in session resumption. Which means when clean session flag is set to false (0) , then session is resumed."}, {"owner": {"reputation": 3, "user_id": 8143963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97542b31ee420ede5f2bc0ca7a26c06e?s=128&d=identicon&r=PG", "display_name": "sachinrj", "link": "https://stackoverflow.com/users/8143963/sachinrj"}, "reply_to_user": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1539320370, "post_id": 52752821, "comment_id": 92466981, "body": "I have also verified it by just commenting the SSL_get1_session(...) , then there is no optimization seen in wireshark."}, {"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 1, "creation_date": 1539329808, "post_id": 52752821, "comment_id": 92470931, "body": "These 2 concepts really should have been kept separate. I will have to find the discussion on the Paho mailing list as to why this decision was made as it seems wrong"}, {"owner": {"reputation": 3, "user_id": 8143963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97542b31ee420ede5f2bc0ca7a26c06e?s=128&d=identicon&r=PG", "display_name": "sachinrj", "link": "https://stackoverflow.com/users/8143963/sachinrj"}, "reply_to_user": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1539757517, "post_id": 52752821, "comment_id": 92612664, "body": "I feel it was a good decision taken by PAHO developers who made clean session flag linked with session resumption because mosquitto client  lacks this inbuilt feature of session resumption."}], "tags": [], "owner": {"reputation": 3, "user_id": 8143963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97542b31ee420ede5f2bc0ca7a26c06e?s=128&d=identicon&r=PG", "display_name": "sachinrj", "link": "https://stackoverflow.com/users/8143963/sachinrj"}, "is_accepted": false, "score": 0, "last_activity_date": 1539246919, "last_edit_date": 1539246919, "creation_date": 1539235770, "answer_id": 52752821, "question_id": 46686150, "link": "https://stackoverflow.com/questions/46686150/mqtt-tls-session-resumption-in-c/52752821#52752821", "title": "MQTT TLS session resumption in C", "body": "<p>Make conn_opts.cleansession = 0;\nDisabling the cleansession flag  in PAHO-client programs enables session resumption.\nI have already verified it with wireshark.</p>\n\n<p><strong>With session Resumption, 1st packet transmission</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/2AiA2.png\" alt=\"1\"></p>\n\n<p>We can see 4 times communication between server and client in <a href=\"https://i.stack.imgur.com/2AiA2.png\" rel=\"nofollow noreferrer\">1</a> image and even certificates are transferred.</p>\n\n<p><strong>With session Resumption ,screenshot taken for 2nd packet transmission</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/JEnZ5.png\" alt=\"2\">\nObserve both images carefully , there is only 3 times communication between server and client in<a href=\"https://i.stack.imgur.com/JEnZ5.png\" rel=\"nofollow noreferrer\">2</a> image, hence the server negotiates not to perform full handshake.</p>\n\n<p>Session resumption time limit is <em>7200 seconds</em>.</p>\n\n<p>But setting the cleansession flag to 1 will always perform full handshake which means no session resumption.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10498495, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TdtRCNtz5As/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWNcbn9ia3leKGGmaEAyuDd0aKEfw/mo/photo.jpg?sz=128", "display_name": "Sachin Joshi", "link": "https://stackoverflow.com/users/10498495/sachin-joshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539771130, "last_edit_date": 1539771130, "creation_date": 1539418238, "answer_id": 52790926, "question_id": 46686150, "link": "https://stackoverflow.com/questions/46686150/mqtt-tls-session-resumption-in-c/52790926#52790926", "title": "MQTT TLS session resumption in C", "body": "<p>I feel it was a good decision taken by PAHO people who made clean session flag  linked with session resumption because mosquitto client provided in github lacks this inbuilt feature of session resumption. </p>\n\n<p><a href=\"https://i.stack.imgur.com/64tri.png\" rel=\"nofollow noreferrer\">Go through the specification of MQTT v3.1.1 </a></p>\n\n<p>Or refer <a href=\"http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.pdf\" rel=\"nofollow noreferrer\">MQTT specification in their website</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8756923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5641436ba1d35b6ead63096ff6fb6aca?s=128&d=identicon&r=PG&f=1", "display_name": "natan_95", "link": "https://stackoverflow.com/users/8756923/natan-95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1539771130, "creation_date": 1507718430, "question_id": 46686150, "link": "https://stackoverflow.com/questions/46686150/mqtt-tls-session-resumption-in-c", "title": "MQTT TLS session resumption in C", "body": "<p>I'm using the Eclipse Paho MQTT C client to connect to a mosquitto broker with TLS using openssl. This is part of my code:</p>\n\n<pre><code>MQTTClient client;\nMQTTClient_connectOptions conn_opts = MQTTClient_connectOptions_initializer;\nMQTTClient_message pubmsg = MQTTClient_message_initializer;\nMQTTClient_SSLOptions sslOptions = MQTTClient_SSLOptions_initializer;\nMQTTClient_deliveryToken token;\n\nint rc;\n\nMQTTClient_create(&amp;client, ADDRESS, CLIENTID,\n    MQTTCLIENT_PERSISTENCE_NONE, NULL);\n\nconn_opts.keepAliveInterval = 20;\nconn_opts.cleansession = 1;\n\n/* TLS */\nsslOptions.enableServerCertAuth = 0;\nsslOptions.trustStore = \"ca_rsp.crt\";\nconn_opts.ssl = &amp;sslOptions;\n\n\nif ((rc = MQTTClient_connect(client, &amp;conn_opts)) != MQTTCLIENT_SUCCESS)\n{\n    printf(\"Failed to connect, return code %d\\n\", rc);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>Actually every time I reconnect to the broker, the client make a full handshake. I would like to use the TLS session resumption to reduce the overhead. I've search around the web but I haven't found any example of how o implement that in a simple way.</p>\n\n<p>Any suggestion?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507723631, "post_id": 46685993, "comment_id": 80323047, "body": "My bad, I split my original question in two halves and forgot to change <code>char (*p_arr)[1] = &amp;arr;</code> to <code>char (*p_arr)[5] = &amp;arr;</code> in this part. However, <code>char (*p_arr)[1] = &amp;arr;</code> doesn&#39;t create any compilation error (see my <a href=\"https://stackoverflow.com/questions/46687759/pointer-to-2d-array-with-incompatible-row-length\">other question</a>), and i don&#39;t understand why."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507724210, "post_id": 46685993, "comment_id": 80323425, "body": "(The C compiler does not prevent what you want to do.) Compile it with <code>-Wall</code> option."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507734183, "post_id": 46685993, "comment_id": 80330860, "body": "I did a rollback of code changes. Please don&#39;t fix things your code once answers have been posted. By fixing it, you rendered most answers irrelevant. Instead, if you have a follow-up question, ask a new question (like you did)."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507725404, "post_id": 46686568, "comment_id": 80324232, "body": "My bad, I split my original question in two halves and forgot to change char (*p_arr)[1] = &amp;arr; to char (*p_arr)[5] = &amp;arr; in this part (done now). However, char (*p_arr)[1] = &amp;arr; doesn&#39;t create any compilation error (see my other question), and i don&#39;t understand why. I already put this comment under my question, tell me if it&#39;s a good or bad practice to duplicate it here. I&#39;ll remove it if needed"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1507733993, "last_edit_date": 1507733993, "creation_date": 1507719675, "answer_id": 46686568, "question_id": 46685993, "link": "https://stackoverflow.com/questions/46685993/retrieving-2d-array-from-pointer-in-c/46686568#46686568", "title": "Retrieving 2D array from pointer in C", "body": "<p>To begin with, the line <code>char (*p_arr)[1] = &amp;arr;</code> is not valid C. Your compiler must give a diagnostic message. <code>p_arr</code> is an array pointer to an array of 1 char, but you assign it to point at an array of 5 char.</p>\n\n<p>As for why it seems like you have a 2D array - you <em>don't</em> have one - is because  <code>p_arr[0]</code> works like any other pointer arithmetic, giving you pointed-at item \"offset + 0\". Which is the array. And then you access item 4 in the array. </p>\n\n<p>A simple example of the very same pointer arithmetic principle would be this:</p>\n\n<pre><code>int a;\nint* ptr = &amp;a;\nptr[0] = whatever; // perfectly valid C\n</code></pre>\n\n<p><code>ptr[0]</code> is guaranteed to be equivalent to <code>*(ptr+0)</code>.</p>\n\n<p>Correct use of the array pointer should be <code>printf(\"%c\\n\", (*p_arr)[4])</code>. In this case it happened to work, but in other cases you might invoke undefined behavior, since <code>p_arr</code> is not allowed to point beyond the allocated memory.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507725412, "post_id": 46686672, "comment_id": 80324238, "body": "My bad, I split my original question in two halves and forgot to change char (*p_arr)[1] = &amp;arr; to char (*p_arr)[5] = &amp;arr; in this part (done now). However, char (*p_arr)[1] = &amp;arr; doesn&#39;t create any compilation error (see my other question), and i don&#39;t understand why. I already put this comment under my question, tell me if it&#39;s a good or bad practice to duplicate it here. I&#39;ll remove it if needed"}], "tags": [], "owner": {"reputation": 49, "user_id": 8746724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97c09df862f5ca2a12883aee48dc9a3?s=128&d=identicon&r=PG&f=1", "display_name": "JohnRowe", "link": "https://stackoverflow.com/users/8746724/johnrowe"}, "is_accepted": false, "score": 0, "last_activity_date": 1507719992, "creation_date": 1507719992, "answer_id": 46686672, "question_id": 46685993, "link": "https://stackoverflow.com/questions/46685993/retrieving-2d-array-from-pointer-in-c/46686672#46686672", "title": "Retrieving 2D array from pointer in C", "body": "<p>You are declaring p_arr to be a pointer to an array of chars (and that array is of length one which is a sure sign of a problem).</p>\n\n<p>You may want the much simpler syntax:</p>\n\n<pre><code>char *p_arr = arr;\n</code></pre>\n\n<p>or maybe:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char arr[] = {\"Hello world\"};\n    char *p[3] = {NULL, arr, NULL};\n\n    printf(\"%s %c\\n\", p[1], p[1][3]);\n}\n</code></pre>\n\n<p>John</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507734082, "post_id": 46686711, "comment_id": 80330793, "body": "&quot;and by the assignment &amp;arr this pointer gets the address of an already existing array&quot; No, because that part is not valid C. It is not a valid assignment."}], "tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": false, "score": 1, "last_activity_date": 1507720782, "last_edit_date": 1507720782, "creation_date": 1507720132, "answer_id": 46686711, "question_id": 46685993, "link": "https://stackoverflow.com/questions/46685993/retrieving-2d-array-from-pointer-in-c/46686711#46686711", "title": "Retrieving 2D array from pointer in C", "body": "<p>a 2D array is stored in memory like a 1D array <a href=\"https://stackoverflow.com/questions/2565039/how-are-multi-dimensional-arrays-formatted-in-memory\">How are multi-dimensional arrays formatted in memory?</a></p>\n\n<p>the <code>char (*p_arr)[1] = &amp;arr;</code> creates a pointer to an array of <code>char</code> pointers with one element (  <code>(*p_arr)[1]</code>  ) and by the assignment <code>&amp;arr</code> this pointer gets the address of an already existing array with 5 elements</p>\n\n<p>so <code>printf(\"%c\\n\", p_arr[0][4]);</code> prints the 5th element ( U ) because by <code>p_arr[0][4]</code> adresses the 5th element in line 1</p>\n\n<p><code>printf(\"%c\\n\", p_arr[1][4]);</code> would give an error </p>\n\n<p>so the reason why this code works is that a 2D array is stored in memory like a 1D array</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "edited": false, "score": 0, "creation_date": 1507725432, "post_id": 46687592, "comment_id": 80324252, "body": "My bad, I split my original question in two halves and forgot to change char (*p_arr)[1] = &amp;arr; to char (*p_arr)[5] = &amp;arr; in this part (done now). However, char (*p_arr)[1] = &amp;arr; doesn&#39;t create any compilation error (see my other question), and i don&#39;t understand why. I already put this comment under my question, tell me if it&#39;s a good or bad practice to duplicate it here. I&#39;ll remove it if needed"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1507723906, "last_edit_date": 1507723906, "creation_date": 1507722883, "answer_id": 46687592, "question_id": 46685993, "link": "https://stackoverflow.com/questions/46685993/retrieving-2d-array-from-pointer-in-c/46687592#46687592", "title": "Retrieving 2D array from pointer in C", "body": "<p>This declaration</p>\n\n<pre><code>char (*p_arr)[1] = &amp;arr;\n</code></pre>\n\n<p>is incorrect because the declared pointer and the initializer have incompatible types. There is no implicit conversion from the type <code>char ( * )[5]</code>, the type of the initializer, to the type <code>char ( * )[1]</code>, the ty[e of the declared pointer. So you need an explicit casting to reinterpret a pointer of one type as a pointer of another type as for example</p>\n\n<pre><code>char (*p_arr)[1] = ( char ( * )[1] )&amp;arr;\n</code></pre>\n\n<p>As for your question then if you have an object of type <code>T</code> where <code>T</code> is some type </p>\n\n<pre><code>T obj;\n</code></pre>\n\n<p>and a pointer to the object like</p>\n\n<pre><code>T *ptr = &amp;obj;\n</code></pre>\n\n<p>then expression <code>*ptr</code> or <code>ptr[0]</code> yields the referenced object of the type <code>T</code>.</p>\n\n<p>So let's assume that you have the following declarations</p>\n\n<pre><code>char arr[5] = {'A', 'E', 'I', 'O', 'U'};\nchar (*p_arr)[5] = &amp;arr;\n</code></pre>\n\n<p>For the type <code>char[5]</code> that is the type of the variable <code>arr</code> you can introduce a typedef name.</p>\n\n<pre><code>typedef char T[5];\n</code></pre>\n\n<p>Then the declarations will look like</p>\n\n<pre><code>T arr = {'A', 'E', 'I', 'O', 'U'};\nT *p_arr = &amp;arr;\n</code></pre>\n\n<p>As it was mentioned above the expression <code>*p_arr</code> or <code>p_arr[0]</code> yields the referenced object of the type <code>T</code> that is of the type <code>char[5]</code>.</p>\n\n<p>From the C Standard (6.5.3.2 Address and indirection operators)</p>\n\n<blockquote>\n  <p>4 The unary * operator denotes indirection. If the operand points to a\n  function, the result is a function designator; if it points to an\n  object, the result is an lvalue designating the object. If the operand\n  has type \u2018\u2018pointer to type\u2019\u2019, the result has type \u2018\u2018type\u2019\u2019. If an\n  invalid value has been assigned to the pointer, the behavior of the\n  unary * operator is undefined.</p>\n</blockquote>\n\n<p>And (6.5.2.1 Array subscripting)</p>\n\n<p>2 A postfix expression followed by an expression in square brackets [] is a subscripted designation of an element of an array object. <strong>The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))).</strong> Because of the conversion rules that apply to the binary + operator, if E1 is an array object (equivalently, a pointer to the initial element of an array object) and E2 is an integer, E1[E2] designates the E2-th element of E1 (counting from zero).</p>\n\n<p>and at last (6.5.6 Additive operators)</p>\n\n<blockquote>\n  <p>7 For the purposes of these operators, <strong>a pointer to an object that\n  is not an element of an array behaves the same as a pointer to the\n  first element of an array of length one with the type of the object as\n  its element type</strong>.</p>\n</blockquote>\n\n<p>So in this declaration </p>\n\n<pre><code>char arr[5] = {'A', 'E', 'I', 'O', 'U'};\nchar (*p_arr)[5] = &amp;arr;\n</code></pre>\n\n<p>the pointer <code>p_arr</code> does not point to an array element. However it can behaves as it points to the first element of an array of length 1. You can imagine it the following way</p>\n\n<pre><code>char arr[1][5] = { {'A', 'E', 'I', 'O', 'U'} };\nchar (*p_arr)[5] = arr;\n</code></pre>\n\n<p>So the expression <code>p_arr[0]</code> gives the first element of the imagined two-dimensional array  that is an element of the type <code>char[5]</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8681979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59d252c909417101a5aa13635ff3bb?s=128&d=identicon&r=PG&f=1", "display_name": "Y.GP", "link": "https://stackoverflow.com/users/8681979/y-gp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1507734097, "creation_date": 1507717980, "last_edit_date": 1507734097, "question_id": 46685993, "link": "https://stackoverflow.com/questions/46685993/retrieving-2d-array-from-pointer-in-c", "title": "Retrieving 2D array from pointer in C", "body": "<p>I tried the following code</p>\n\n<pre><code>    char arr[5] = {'A', 'E', 'I', 'O', 'U'};\n    char (*p_arr)[1] = &amp;arr;\n    printf(\"%c\\n\", p_arr[0][4]); //returns 'U'\n</code></pre>\n\n<p>On <a href=\"https://stackoverflow.com/questions/12674094/array-to-pointer-decay-and-passing-multidimensional-arrays-to-functions\">this</a> stackoverflow thread, </p>\n\n<pre><code>    char (*p_arr2D)[m] = &amp;arr2D //or arr2D\n</code></pre>\n\n<p>is also a syntax for the decay of a <code>n*m</code> 2D-array <code>arr2D</code>, returning a pointer to its first element, an array of <code>m</code> elements. </p>\n\n<p><code>p_arr[0]</code> seems to be the \"reverse\" array decay, retrieving a 2D array from a pointer to an array. How can that happen ? In the code snippet above, is <code>p_arr</code> interpreted as a <code>1*5</code> array (from the original 1D-array with 5 elements) ?</p>\n"}, {"tags": ["c", "signals", "fork", "exec"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1507724644, "post_id": 46685743, "comment_id": 80323709, "body": "Could you test for errors in <code>fork</code> (test if <code>fork() == -1</code>) and use <code>perror</code> to print out any errors? (tip: consider a <code>switch</code> statement where <code>default</code> is the parent process)... Oh. and test <code>execlp</code> while you&#39;re at it... ;-)"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1507724905, "post_id": 46685743, "comment_id": 80323886, "body": "Also, isn&#39;t it a good idea to kill the children with <code>SIGINT</code> at some point?"}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1507737028, "last_edit_date": 1507737028, "creation_date": 1507736333, "answer_id": 46692374, "question_id": 46685743, "link": "https://stackoverflow.com/questions/46685743/c-fork-and-exec-process-and-sending-signals/46692374#46692374", "title": "C, Fork and exec process, and sending signals", "body": "<p>It is bit tricky to understand fork() and creation of a child process and which part of code that child process will execute. Here you are calling the while(1) loop from the each child process, that portion of code is not executing in main process but executing inside child process only. Hence \u2018 j\u2019  is always 0 and you are actually executing like kill(pid[0],SIGUSR1); ( 3 times).  </p>\n\n<p>It is always better to control child process from parent process. See the modified code below which will work for you.</p>\n\n<pre><code>int parentPID = 0;\n\nint main(int argc, char *argv[]){\n int pid[3];\n parentPID = getpid();\n signal(SIGALRM,sigAlarm);\n for(int i = 0; i&lt;3;i++){\n    if((pid[i]=fork()) == 0){\n        printf(\"child :%d\\n\",i);\n        execlp(\"./exercici\",\"exercici\",(char*)NULL);\n    }\n }\n if (parentPID == getpid()){\n     sleep(5);/* Let the 3 childs create */\n     int j = 0;\n     int ready = 1;\n     while(ready){\n       kill(pid[j],SIGUSR1);\n       j = ((j+1)%3);\n       ready = j;\n       alarm(1);\n     }\n    }\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 4224925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/94ae896161f2f17fb4694899d532e33d?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed d", "link": "https://stackoverflow.com/users/4224925/burnsed-d"}, "edited": false, "score": 0, "creation_date": 1507755678, "post_id": 46692733, "comment_id": 80342687, "body": "Most elaborated answer I&#39;ve ever seen. Thanks a lot."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1507740069, "last_edit_date": 1507740069, "creation_date": 1507737467, "answer_id": 46692733, "question_id": 46685743, "link": "https://stackoverflow.com/questions/46685743/c-fork-and-exec-process-and-sending-signals/46692733#46692733", "title": "C, Fork and exec process, and sending signals", "body": "<p>The problem is occurring because of -</p>\n\n<pre><code>int j =0;\nwhile(1){\n    if(ready){\n        ready = 0;\n        kill(pid[j],SIGUSR1);\n        j = ((j+1)%3);\n        alarm(1);\n    }\n}\n</code></pre>\n\n<p>in parent process.</p>\n\n<p>Here you are initializing <code>j</code> with 0 and in the while loop kill() send  <code>SIGUSR1</code> to pid[0] in the first iteration.</p>\n\n<p>Each signal has a \"default disposition\" -- what a process does by default when it receives that signal.</p>\n\n<p>From <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">signal(7)</a> man page -</p>\n\n<p>SIGUSR1 and SIGUSR2 default disposition is - <strong>Term</strong>, which means terminate the process.</p>\n\n<blockquote>\n  <p>Signal       Value       Action    Comment</p>\n  \n  <p>\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</p>\n  \n  <p>SIGUSR1   30,10,16    Term    User-defined signal 1</p>\n  \n  <p>SIGUSR2   31,12,17    Term    User-defined signal 2</p>\n</blockquote>\n\n<p>In your <strong>exercici</strong> child program, you are changing the disposition of a signal SIGUSR1 and setting the disposition to handler function <code>captura_signal</code> -</p>\n\n<pre><code> signal(SIGUSR1, captura_signal)\n</code></pre>\n\n<p>In your case, whats happening is that the child process with pid[0] when forked and before the child process exec exercici and set the SIGUSR1 signal handler, the parent process sent SIGUSR1 to pid[0]. And since the default disposition of SIGUSR1 is to terminate the process, the pid[0] child process is terminate and marked defunct.</p>\n\n<p>On my system, I can see in the output of ps command -</p>\n\n<p><strong>ps -eaf | grep exercici</strong></p>\n\n<p><em>root     29210 19542 86 20:51 pts/5    00:00:04 ./exercici2 <strong>--------> Parent process</em></strong></p>\n\n<p><em>root     29211 29210  0 20:51 pts/5    00:00:00 [exercici2] &lt; defunct >  <strong>------> Child process received signal SIGUSR1 before exec'ing exercici</em></strong></p>\n\n<p><em>root     29212 29210  0 20:51 pts/5    00:00:00 exercici  <strong>--------> Child process successfully exec'ed exercici and changed default disposition of SIGUSR1</em></strong></p>\n\n<p><em>root     29213 29210  0 20:51 pts/5    00:00:00 exercici  <strong>--------> Child process successfully exec'ed exercici and changed default disposition of SIGUSR1</em></strong></p>\n\n<p>Here you can see the first child process with pid 29211 is marked <strong>defunct</strong>.</p>\n\n<p>You can solve this problem by various ways. One of them is to simply ignore SIGUSR1 in parent process by adding this statement -</p>\n\n<pre><code>signal(SIGUSR1,SIG_IGN);\n</code></pre>\n\n<p>somewhere at the start of parent process forking child processes.</p>\n\n<p>A child process inherits signal handler from the parent process. So before exec'ing current process image with the new process (exercici) if the child process receives SIGUSR1, it will ignore it.</p>\n"}], "owner": {"reputation": 39, "user_id": 4224925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/94ae896161f2f17fb4694899d532e33d?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed d", "link": "https://stackoverflow.com/users/4224925/burnsed-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1698, "favorite_count": 0, "accepted_answer_id": 46692733, "answer_count": 2, "score": 1, "last_activity_date": 1507740069, "creation_date": 1507717298, "question_id": 46685743, "link": "https://stackoverflow.com/questions/46685743/c-fork-and-exec-process-and-sending-signals", "title": "C, Fork and exec process, and sending signals", "body": "<p>Basically I have two codes.\nOne of them must print in shell \"TIME!\" everytime it receives a SIGUSR1 signal.\nLet's call it exercici.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n\nchar buffer[1000];\n\nvoid captura_signal(int signum){\n\n    if(signum == SIGUSR1){\n        sprintf(buffer,\"TIME! %d\\n\",getpid());\n        write(1,buffer,strlen(buffer));\n    }\n}\n\n\nint main(int argc, char *argv[]){\n    signal(SIGUSR1, captura_signal);\n    while(1){\n        pause();\n    }\n\n}\n</code></pre>\n\n<p>The other one, must create three child process (only one parent and three childs) and execlp exercici.c on each child.\nThen, every second, the parent have to send a SIGUSR1 to one child, incrementing each second. I'll call it exercici2.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;signal.h&gt;\n\n\nbool ready = 1;\n\nvoid  sigAlarm(int sig){\n    if (sig == SIGALRM){\n        ready = 1;\n    }\n}\n\n\nint main(int argc, char *argv[]){\n    int pid[3];\n    signal(SIGALRM,sigAlarm);\n    for(int i = 0; i&lt;3;i++){\n        if((pid[i]=fork()) == 0){\n            execlp(\"./exercici\",\"exercici\",(char*)NULL);\n        }\n    }\n    int j =0;\n    while(1){\n        if(ready){\n            ready = 0;\n            kill(pid[j],SIGUSR1);\n            j = ((j+1)%3);\n            alarm(1);\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that when I execute exercici2.c it creates only 2 processes and I am only receiving TIME! of 2 of them. It skips the pid[0] one.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yAg91.png\" rel=\"nofollow noreferrer\">shell image</a></p>\n"}, {"tags": ["c", "gcc", "memory"], "comments": [{"owner": {"reputation": 1288, "user_id": 6761181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-UMA8swDt9ZA/AAAAAAAAAAI/AAAAAAAAABg/TN4dhWxl_2Q/photo.jpg?sz=128", "display_name": "Vineet Jain", "link": "https://stackoverflow.com/users/6761181/vineet-jain"}, "edited": false, "score": 5, "creation_date": 1507717557, "post_id": 46685737, "comment_id": 80319187, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11226811/printf-in-c-doesnt-occupy-memory\">printf in C doesn&#39;t occupy memory?</a>"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 5, "creation_date": 1507717732, "post_id": 46685737, "comment_id": 80319280, "body": "Please note that your current question is missing several points to completely explain the behaviour, namely: architecture (seems x86 32bit), compiler (probably gcc), used compiler flags (probably none)."}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507719038, "post_id": 46686154, "comment_id": 80320109, "body": "I don&#39;t think there&#39;s anything that requires that the pointer be in writable memory - that&#39;s just how this compiler (in this configuration) happens to implement it.  Or is there something I&#39;ve missed?"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1507719152, "post_id": 46686154, "comment_id": 80320185, "body": "@TobySpeight no, that&#39;s correct. I don&#39;t have another compiler at hand to check it in other configurations, though."}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": true, "score": 3, "last_activity_date": 1507718439, "creation_date": 1507718439, "answer_id": 46686154, "question_id": 46685737, "link": "https://stackoverflow.com/questions/46685737/adding-printf-increases-the-size-of-data-segment/46686154#46686154", "title": "adding printf increases the size of data segment", "body": "<p><strong>TL;DR:</strong> Every used string uses the memory for itself, as well as <code>sizeof(char*)</code> additional memory for a pointer to its first character.</p>\n\n<hr>\n\n<p>You're probably on a 32bit architecture, or at least compile your program for that one. Four bytes are exactly one pointer on that architecture, so let us have a look at the assembler (<code>gcc -S</code>):</p>\n\n<pre><code>    .file   \"main.c\"\n    .section    .rodata\n.LC0:\n    .string \"Hello World!!\"\n</code></pre>\n\n<p>There's a <code>.rodata</code> entry, namely <code>\"Hello World!\"\"</code> as a <code>.string</code>. That's a <code>const char *</code>, which takes four bytes on a 32bit x86 arch. If we remove that string, the <code>.rodata</code> section stays empty. The string is gone, therefore we can get rid of the pointer. Note that the pointer <strong>itself</strong> is not read-only. That's why you end up with an entry in <code>data</code> to begin with.</p>\n\n<p>You can check this easily with <code>gcc -Os main.c</code>. The following programs should have the same <code>size</code> output (and result in almost the same assembler code):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"hello world!\");\n    return 0;\n}\n</code></pre>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    const char * mystring = \"hello world!\";\n    printf(mystring);\n    return 0;\n}\n</code></pre>\n\n<p>After all, we need the pointer for <code>printf</code> (<code>$.LC0</code>):</p>\n\n<pre><code>movq    $.LC0, -8(%rbp)\nmovq    -8(%rbp), %rax\nmovq    %rax, %rdi\nmovl    $0, %eax\ncall    printf\n</code></pre>\n"}], "owner": {"reputation": 750, "user_id": 1662342, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c80c12f0b338891390f37f68b594dcff?s=128&d=identicon&r=PG", "display_name": "Rohit Walavalkar", "link": "https://stackoverflow.com/users/1662342/rohit-walavalkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 46686154, "answer_count": 1, "score": 2, "last_activity_date": 1507723544, "creation_date": 1507717291, "last_edit_date": 1507723544, "question_id": 46685737, "link": "https://stackoverflow.com/questions/46685737/adding-printf-increases-the-size-of-data-segment", "title": "adding printf increases the size of data segment", "body": "<p>This is what I had earlier</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>And I got this</p>\n\n<pre><code>rohit:~/workspace/C $ size const\n   text    data     bss     dec     hex filename\n   1122     276       4    1317     525 const\n</code></pre>\n\n<p>After making the below change, the data section size increases by 4.</p>\n\n<pre><code>int main()\n{\n    printf(\"Hello World!!\");\n    return 0;\n}\n\nrohit:~/workspace/C $ size const\ntext    data     bss     dec     hex filename\n1112     280       8    1400     578 const\n</code></pre>\n\n<p>What's the reason for this behaviour. I am using Ubuntu on x86. gcc is the compiler.</p>\n"}, {"tags": ["python", "c++", "c", "python-3.x"], "comments": [{"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 2, "creation_date": 1507716483, "post_id": 46685356, "comment_id": 80318464, "body": "<a href=\"https://stackoverflow.com/questions/89228/calling-an-external-command-in-python\" title=\"calling an external command in python\">stackoverflow.com/questions/89228/&hellip;</a> it will help."}, {"owner": {"reputation": 160, "user_id": 6572831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7935f0c07314b4bc04f70c38a28e48?s=128&d=identicon&r=PG", "display_name": "Lasagnenator", "link": "https://stackoverflow.com/users/6572831/lasagnenator"}, "reply_to_user": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1507716644, "post_id": 46685356, "comment_id": 80318586, "body": "@Karthikeyan.R.S I am not trying to run code externally from python but running it from within python as the title says. It is a good answer but does not suit my purposes."}, {"owner": {"reputation": 3931, "user_id": 2244081, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2a084ed5223858de201a3ebaf53c4fa8?s=128&d=identicon&r=PG", "display_name": "Ignacio Vergara Kausel", "link": "https://stackoverflow.com/users/2244081/ignacio-vergara-kausel"}, "edited": false, "score": 0, "creation_date": 1507716879, "post_id": 46685356, "comment_id": 80318733, "body": "The problem is a bit too vague. What do you want to do with the code? Should it take as argument python objects? Or perhaps a numpy array? Should return somethign to python?"}, {"owner": {"reputation": 160, "user_id": 6572831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7935f0c07314b4bc04f70c38a28e48?s=128&d=identicon&r=PG", "display_name": "Lasagnenator", "link": "https://stackoverflow.com/users/6572831/lasagnenator"}, "edited": false, "score": 0, "creation_date": 1507717072, "post_id": 46685356, "comment_id": 80318879, "body": "This was meant to be used for general purpose of running c code so I guess that it should be able to do everything that c can do, even take inputs. Surely there is a standard library file that allows you to do this?"}, {"owner": {"reputation": 3931, "user_id": 2244081, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2a084ed5223858de201a3ebaf53c4fa8?s=128&d=identicon&r=PG", "display_name": "Ignacio Vergara Kausel", "link": "https://stackoverflow.com/users/2244081/ignacio-vergara-kausel"}, "edited": false, "score": 0, "creation_date": 1507717613, "post_id": 46685356, "comment_id": 80319218, "body": "Inlining C code is tricky, the only library that does something like that is <code>weave</code> but is kinda discontinued and working only for python 2.7. I found this example <a href=\"https://gist.github.com/adamnew123456/12546e6e36607a63e254\" rel=\"nofollow noreferrer\">gist.github.com/adamnew123456/12546e6e36607a63e254</a> where it compiles on the fly the code but does not provide any communication between the c code and python and in the end is no different than compile and call it as a subprocess as in the first comment."}, {"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1507717734, "post_id": 46685356, "comment_id": 80319284, "body": "It is not possible to run C code within standard Python. You need to install additional libraries. The hard way could be using <code>distutils</code> to compile your &#39;code&#39; at Python runtime ..."}, {"owner": {"reputation": 160, "user_id": 6572831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7935f0c07314b4bc04f70c38a28e48?s=128&d=identicon&r=PG", "display_name": "Lasagnenator", "link": "https://stackoverflow.com/users/6572831/lasagnenator"}, "reply_to_user": {"reputation": 3931, "user_id": 2244081, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2a084ed5223858de201a3ebaf53c4fa8?s=128&d=identicon&r=PG", "display_name": "Ignacio Vergara Kausel", "link": "https://stackoverflow.com/users/2244081/ignacio-vergara-kausel"}, "edited": false, "score": 0, "creation_date": 1507717836, "post_id": 46685356, "comment_id": 80319348, "body": "@IgnacioVergaraKausel So does this mean that there is no solution to this question as no one has ever bothered to make this or even try? If that is the case I will spend a while trying to create this. Thanks for <code>weave</code> and I&#39;ll see what it does and how I might make it myself."}, {"owner": {"reputation": 160, "user_id": 6572831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7935f0c07314b4bc04f70c38a28e48?s=128&d=identicon&r=PG", "display_name": "Lasagnenator", "link": "https://stackoverflow.com/users/6572831/lasagnenator"}, "reply_to_user": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1507717879, "post_id": 46685356, "comment_id": 80319375, "body": "@MauriceMeyer Good idea. I wouldn&#39;t mind if it compiles the c code at runtime, unfortunately, I would like the whole thing to be one file and not compiled c code outside the .py file"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1507719748, "post_id": 46685356, "comment_id": 80320590, "body": "If you attempt to create this yourself, you could have a look at some C(++) script projects: <a href=\"https://stackoverflow.com/a/3153436/104774\">stackoverflow.com/a/3153436/104774</a> I never tried it myself because I make the distinction: scripting=python, native=C++, but there might be use cases for this."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1507721959, "post_id": 46687305, "comment_id": 80321947, "body": "As a follow up note; you will have to pick which language you want - C or C++;  they are not the same."}], "tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1507721927, "creation_date": 1507721927, "answer_id": 46687305, "question_id": 46685356, "link": "https://stackoverflow.com/questions/46685356/how-to-run-c-code-within-python/46687305#46687305", "title": "How to run c code within python", "body": "<p>If you want to run C/C++ code - you'll need either a C/C++ compiler, or a C/C++ interpreter.</p>\n\n<p>The former is quite easy to arrange (though probably not suitable for an end user product) and you can just compile the code and run as required.</p>\n\n<p>The latter requires that you attempt to process the code yourself and generate python code that you can then import.  I'm not sure this one is worth the effort at all given that even websites that offer compilation tools wrap gcc/g++ rather than implement it in javascript.</p>\n\n<p>I suspect that this is an XY problem; you may wish to take a couple of steps back and try to explain why you want to run c++ code from within a python script.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 8163419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drSob.png?s=128&g=1", "display_name": "Katembers", "link": "https://stackoverflow.com/users/8163419/katembers"}, "is_accepted": true, "score": 1, "last_activity_date": 1507722808, "creation_date": 1507722808, "answer_id": 46687565, "question_id": 46685356, "link": "https://stackoverflow.com/questions/46685356/how-to-run-c-code-within-python/46687565#46687565", "title": "How to run c code within python", "body": "<p>As somebody else already pointed out, to run C/C++ code from \"within\" Python, you'd have to write said C/C++ code into an own file, compile it correctly, and then execute that program from your Python code.</p>\n\n<p>You can't just type one command, compile it, and execute it. You always have to have the whole \"framework\" set up. You can't compile a program when you haven't yet written the <code>}</code> that ends the class/function/statement 20 lines later on. At this point you'd already have to write the whole C/C++ program for it to work. It's simply not meant to be interpreted on the run, line by line. You can do that with python, bash/dash/batch, and a few others. But C/C++ definitely isn't one of them.</p>\n\n<p>With those come several issues. Firstly, the C/C++ part probably needs data from the Python part. I don't know of any way of doing it in RAM alone <em>(maybe there is one, but I don't know)</em>, so the Python part would have to write it into a file, the C/C++ part would read and process it, then put the processed data into another file, and then the Python part would have to read that and continue.</p>\n\n<p>Which brings another point up. Here we're already getting into multi-threading territory, because the moment you execute that C/C++ program you're dealing with a second thread. So, somehow, you'd have to coordinate those programs so that the Python part only continues once the C/C++ part is done. Shouldn't be a huge problem to get running, but it can be a nightmare to performance and RAM if done wrongly.</p>\n\n<p>Without knowing to what extent you use that program, I also like to add that C/C++ isn't platform-independent like Python. You'll have to compile that program for every single different OS that you run it on. That may come with minor changes to the code and in general just a lot of work because you have to debug and test it for every single system.</p>\n\n<hr>\n\n<p>To sum up, I think it may be better to find another solution. I don't know why you'd want to run this specific part in C/C++, but I'd recommend trying to get it done in one language. If there's absolutely no way you can get it done in Python <em>(which I doubt, there's libraries for almost everything)</em>, you should get your Python to C/C++ instead.</p>\n"}], "owner": {"reputation": 160, "user_id": 6572831, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7935f0c07314b4bc04f70c38a28e48?s=128&d=identicon&r=PG", "display_name": "Lasagnenator", "link": "https://stackoverflow.com/users/6572831/lasagnenator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2182, "favorite_count": 0, "accepted_answer_id": 46687565, "answer_count": 2, "score": -3, "last_activity_date": 1507722808, "creation_date": 1507716245, "question_id": 46685356, "link": "https://stackoverflow.com/questions/46685356/how-to-run-c-code-within-python", "title": "How to run c code within python", "body": "<p>How can I run c/c++ code within python in the form:</p>\n\n<pre><code>def run_c_code(code):\n    #Do something to run the code\ncode = \"\"\"\n       Arbitrary code\n       \"\"\"\nrun_c_code(code)\n</code></pre>\n\n<p>It would be great if someone could provide an easy solution which does not involve installing packages. I know that C is not a scripting language but it would be great if it could do a 'mini'-compile that is able to run the code into the console. The code should run as it would compiled normally but this needs to be able to work on the fly as the rest of the code runs it and if possible, run as fast as normal and be able to create and edit variables so that python can use it. If necessary, the code can be pre-compiled into the <code>code = \"\"\"something\"\"\"</code>.</p>\n\n<p>Sorry for all the requirements but if you can make the c code run in python then that would be great. Thanks in advance for all the answers..</p>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1507714273, "post_id": 46684572, "comment_id": 80317007, "body": "Without a good <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> nobody can comment definitively. But the obvious problem here is that you don&#39;t use <code>BeginPaint</code> and <code>EndPaint</code>. Various reasons for doing that. Start by changing your code to use those methods to obtain a DC. Then if you still have problems, come back with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1507715620, "post_id": 46684572, "comment_id": 80317885, "body": "Alternatively, take some advice from those of us that have been in your position before. Recognise that you have a lot to learn, and make an attempt to learn it. Get a copy of Petzold&#39;s classic. Read it carefully."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1507715905, "post_id": 46684572, "comment_id": 80318060, "body": "The code has a pretty bad handle leak.  That doesn&#39;t go on forever, after 10,000 paints the OS stops allowing the program to leak more.  Which is not going to take very long, it generates paints, oh, thousands of times per second because it never validates the paint region.  Every control will now misbehave when they can now no longer create drawing objects."}], "answers": [{"tags": [], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "is_accepted": false, "score": 0, "last_activity_date": 1507715404, "creation_date": 1507715404, "answer_id": 46685080, "question_id": 46684572, "link": "https://stackoverflow.com/questions/46684572/c-programmin-wm-paint-causes-bad-behavior/46685080#46685080", "title": "C programmin WM_PAINT causes bad behavior", "body": "<ol>\n<li><p>You don't use BeginPaint/EndPaint</p></li>\n<li><p>If you draw into the parent window you have to take care that you don't overwrite anything. See style WS_CLIPCHILDREN.</p></li>\n<li><p>Because you are not using BeginPaint/EndPaint the background is not prepared. And if you pass the message to the default window procedure, the code there will call BeginPaint/EndPaint and this will cause the background to be erased.</p></li>\n<li><p>You create a pen, select it into a DC and you never destroy the pen, Also you create a new pen every time you repaint. </p></li>\n</ol>\n\n<p>Please read some books about using the Windows GDI! All I wrote can be easily fixed when you inform yourself about the basics...</p>\n"}], "owner": {"reputation": 11, "user_id": 8756031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a23744d55d264909d84dc56db0dbe27?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Popun", "link": "https://stackoverflow.com/users/8756031/hakan-popun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1507715404, "creation_date": 1507713988, "question_id": 46684572, "link": "https://stackoverflow.com/questions/46684572/c-programmin-wm-paint-causes-bad-behavior", "title": "C programmin WM_PAINT causes bad behavior", "body": "<p>I have created a parent window and it has many child windows like buttons, static texts exc. They are all visible and work without any problem but when I add piece of code to my window callback they all disappear + I can't see the line which I just tried to draw from the functions.</p>\n\n<p>How do I rid of this problem?</p>\n\n<pre><code>case WM_PAINT:\n    {\n        HDC hdc = GetDC(hwnd);\n        HGDIOBJ hp = CreatePen(0 ,5,RGB(0,100,0));\n        SelectObject(hdc,hp);\n        MoveToEx(hdc, 825, 0, 0);\n        LineTo(hdc, 825, 1000);\n        ReleaseDC(hwnd, hdc);\n    }\nbreak;\n</code></pre>\n"}, {"tags": ["c", "function", "matrix", "parameters"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1507711897, "post_id": 46683811, "comment_id": 80315268, "body": "Well for starters <a href=\"https://stackoverflow.com/questions/18440205/casting-void-to-2d-array-of-int-c/18440456#18440456\">an array of arrays is not the same thing as a pointer to a pointer</a>. Without more information and a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> it&#39;s really hard to say anything else. And please take some time to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 425, "user_id": 8119002, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jdJBu.jpg?s=128&g=1", "display_name": "pierreafranck", "link": "https://stackoverflow.com/users/8119002/pierreafranck"}, "edited": false, "score": 0, "creation_date": 1507712514, "post_id": 46683811, "comment_id": 80315703, "body": "I don&#39;t really understand, you need to use parameters that you give to your programm when you execute it : <code>.&#47;matrix n param1 param2 param3</code> or just some variables which are in your main function?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7734947"}, "edited": false, "score": 0, "creation_date": 1507713277, "post_id": 46683811, "comment_id": 80316235, "body": "i have this in my main function: int n = 3; \t \tdouble **a, *v, *u; \t \t  \t \tscanf (&quot;% le &quot; , &amp;v[0 ]); \tscanf (&quot;% le &quot; , &amp;v[1 ]); \tscanf (&quot;% le &quot; , &amp;v[2 ]); \t \t\t \tscanf (&quot;% le &quot; , &amp;a[1][  0]); \tscanf (&quot;% le &quot; , &amp;a[2 ][  0]); \tscanf (&quot;% le &quot; , &amp;a[2 ][ 1 ]);"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1507713600, "post_id": 46683811, "comment_id": 80316492, "body": "Please add your <code>main</code> function to the question. Where do the parameters com from and how do you call the function?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507717415, "post_id": 46683811, "comment_id": 80319099, "body": "First, <code>scanf</code> in <code>main</code> is incorrect. And the pointer needs the area it points to. <code>printf(x[1], x[2], x[3]);</code> --&gt; <code>printf(&quot;%f, %f, %f\\n&quot;, x[1], x[2], x[3]);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7734947"}, "edited": false, "score": 0, "creation_date": 1507814468, "post_id": 46683811, "comment_id": 80367795, "body": "I call the fuction like this in my main function:  resTinf (3,a, u,v);  when i compile next error appears: undefined reference to resTinf(int, double**,double*,double*)  how i have to call the function?"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 5096891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f669f86e85e5f819fd28eef90a24768a?s=128&d=identicon&r=PG", "display_name": "AlexK", "link": "https://stackoverflow.com/users/5096891/alexk"}, "is_accepted": false, "score": 1, "last_activity_date": 1507726546, "last_edit_date": 1507726546, "creation_date": 1507718041, "answer_id": 46686010, "question_id": 46683811, "link": "https://stackoverflow.com/questions/46683811/parameters-in-a-function/46686010#46686010", "title": "Parameters in a function", "body": "<p>First, you need to allocate memory for your dynamic array or simply create static arrays at the beginning of the function.\n Like that:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;  \n</code></pre>\n\n<p>main:</p>\n\n<pre><code>int n = 3;\ndouble **a, *v, *u;\nv = (double*)malloc(n * sizeof(double));\nu = (double*)malloc(n * sizeof(double));\na = (double**)malloc(n * sizeof(double *));\nfor(int i = 0; i &lt; n; i++){\n a[i] = (double*)malloc(n * sizeof(double));\n}\n\n\nscanf (\"% le \" , &amp;v[0 ]);\nscanf (\"% le \" , &amp;v[1 ]);\nscanf (\"% le \" , &amp;v[2 ]);\nscanf (\"% le \" , &amp;a[1][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 1 ]);\n</code></pre>\n\n<p>or</p>\n\n<pre><code> int n = 3;\ndouble a[n][n], v[n], u[n];\n\nscanf (\"% le \" , &amp;v[0 ]);\nscanf (\"% le \" , &amp;v[1 ]);\nscanf (\"% le \" , &amp;v[2 ]);\nscanf (\"% le \" , &amp;a[1][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 1 ]);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7734947"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507759067, "creation_date": 1507711711, "last_edit_date": 1507717125, "question_id": 46683811, "link": "https://stackoverflow.com/questions/46683811/parameters-in-a-function", "title": "Parameters in a function", "body": "<p>I have this function that calculates x [0], x [1], x [2] which n are the rows, L the lower matrix (0's on top diagonal), x the unknown and the b the solution. The problem is that they ask me to call it from the main and do not know how to pass the parameters to the function, I leave it here:</p>\n\n<pre><code>void resTinf (int n, double **L, double *x, double *b){\n    int i, k;\n    x[0]=b[0];\n\n    for (i = 1, i&lt;n, i++){\n        x[i]=b[i];\n\n        for (k = 0, k&lt;i, k++){\n            x[i] = x[i]-L[i][k]*x[k];\n        }\n    }\n    x[2] = b[2] - L[2][0]*x[0]-L[2][1]*x[1];\n    printf(x[1], x[2], x[3]);\n}\n</code></pre>\n\n<p>main :</p>\n\n<pre><code>int n = 3;\ndouble **a, *v, *u;\n\nscanf (\"% le \" , &amp;v[0 ]);\nscanf (\"% le \" , &amp;v[1 ]);\nscanf (\"% le \" , &amp;v[2 ]);\nscanf (\"% le \" , &amp;a[1][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 0]);\nscanf (\"% le \" , &amp;a[2 ][ 1 ]);\n</code></pre>\n"}, {"tags": ["c", "embedded", "i2c"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1507712178, "post_id": 46683783, "comment_id": 80315453, "body": "The data sheet for the device you&#39;re trying to talk to should show full transaction waveform diagrams, that make this clear. I&#39;d say it&#39;s the former."}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1507713437, "post_id": 46683783, "comment_id": 80316356, "body": "All the I2C peripheras I&#39;ve seen work as your example, with a write operation and then a write operation, and if you read 5 bytes you read address 0x21 to 0x25."}, {"owner": {"reputation": 330, "user_id": 7812564, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/d25007809f953a1bdbdafa12ccb3d917?s=128&d=identicon&r=PG&f=1", "display_name": "Luigi", "link": "https://stackoverflow.com/users/7812564/luigi"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1507882266, "post_id": 46683783, "comment_id": 80396884, "body": "@JMA updated first post"}, {"owner": {"reputation": 330, "user_id": 7812564, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/d25007809f953a1bdbdafa12ccb3d917?s=128&d=identicon&r=PG&f=1", "display_name": "Luigi", "link": "https://stackoverflow.com/users/7812564/luigi"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1507882275, "post_id": 46683783, "comment_id": 80396888, "body": "@unwind updated first post"}], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 7812564, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/d25007809f953a1bdbdafa12ccb3d917?s=128&d=identicon&r=PG&f=1", "display_name": "Luigi", "link": "https://stackoverflow.com/users/7812564/luigi"}, "edited": false, "score": 0, "creation_date": 1507789641, "post_id": 46692924, "comment_id": 80352589, "body": "ENS210 is the i2c device i&#39;m looking at"}], "tags": [], "owner": {"reputation": 410, "user_id": 2984276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/180c5a88cbee9133a8ac923388612c0e?s=128&d=identicon&r=PG&f=1", "display_name": "K_Trenholm", "link": "https://stackoverflow.com/users/2984276/k-trenholm"}, "is_accepted": false, "score": 0, "last_activity_date": 1507738180, "creation_date": 1507738180, "answer_id": 46692924, "question_id": 46683783, "link": "https://stackoverflow.com/questions/46683783/i2c-read-and-i2c-write-behaviour-with-registers-and-no-answer-from-device/46692924#46692924", "title": "I2C Read and I2C Write behaviour with registers and no answer from device", "body": "<p>It depends on the I2C device.  Most I've seen make you set the address pointer first with a write, then perform a read:</p>\n\n<p>[START]->[ADDR(W)]->[REG]->[RESTART]->[ADDR(R)]->[DATABYTES]->[STOP]</p>\n\n<p>Most devices I've seen will begin reading data from the register specified and auto-increment the address pointer for each data byte ACKed by the master.  Each data byte read will be sequential in memory.  This is not always the case however.  Many devices will actually let you turn register auto-increment off if desired.</p>\n\n<p>Some devices I've seen work a little different with how they expect read register commands to come in.  Some devices don't let you set the register to read AT ALL and you have to do a sequential read to get at the data you want.  An I2C device should have this information of how it is expecting reads/write commands in the datasheet complete with waveform diagrams.</p>\n"}], "owner": {"reputation": 330, "user_id": 7812564, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/d25007809f953a1bdbdafa12ccb3d917?s=128&d=identicon&r=PG&f=1", "display_name": "Luigi", "link": "https://stackoverflow.com/users/7812564/luigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507886405, "creation_date": 1507711624, "last_edit_date": 1507886405, "question_id": 46683783, "link": "https://stackoverflow.com/questions/46683783/i2c-read-and-i2c-write-behaviour-with-registers-and-no-answer-from-device", "title": "I2C Read and I2C Write behaviour with registers and no answer from device", "body": "<p>I've read quite some detailed tutorials and guides about i2c but what it's not clear to me is the following:</p>\n\n<p>Assume you have to read a register on a i2c slave device,</p>\n\n<p>do i need to \"write\" on the i2c the first 7 bits as slave_address, 1 bit with R/W and then the reg_address (as data) and then issue a \"read\" to listen for the bytes</p>\n\n<pre><code>h_i2c *i2c_dev = i2c_drv_open(I2C1_PORT, SLAVE_ADDRESS);\nwrite_data[0] = 0x21;\nwrite_len = i2c_drv_write(i2c_h, write_data, 1);\nif (write_len != 1)\n    printf(\"error write_len is %d\", write_len);\n\nuint8_t read_data[5];\nread_len = i2c_drv_read(i2c_h, read_data, 5);\nif (read_len != 5)\n    wmprintf(\"error read_len is %d\", read_len);\n</code></pre>\n\n<p>or</p>\n\n<p>do i need to issue only a read to an address which is the \"combination\" of the slave and the register i want to read?</p>\n\n<p>Moreover the \"auto-incremental\" property means that as long as i give SDA control over to the slave he will keep sending data?</p>\n\n<p>EDIT1:</p>\n\n<p>quoting the pdf:</p>\n\n<p>The ENS210 is an I\u00b2C slave device with a fixed slave address of\n0x43. This means that the first byte after a start condition is\n1000 011x, where x indicates the data direction, so 0x86 (1000\n0110) for write and 0x87 (1000 0111) for read. </p>\n\n<p>Here is the output </p>\n\n<p><a href=\"https://imgur.com/a/8G8UR\" rel=\"nofollow noreferrer\">https://imgur.com/a/8G8UR</a></p>\n\n<p>On the rising edge i see 1 0 0 0 0 1 1 0 1 </p>\n\n<p>The last one means nACK.</p>\n\n<p>My ideas are:</p>\n\n<ol>\n<li>Sensor is dead</li>\n<li>Resistance is bad, sensor can't pull down the SDA line</li>\n<li>Frequency is at 125khz is it normal?</li>\n</ol>\n\n<p>PS:\nSCL probe had issue so signal quality is better from what you see here</p>\n\n<p>Regards,</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 7, "creation_date": 1507711675, "post_id": 46683750, "comment_id": 80315144, "body": "You could check if mmap() failed. If it did, call <code>perror()</code> or otherwise inspect <code>errno</code> to learn why it failed. You also need to check if open() failed."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1507711861, "post_id": 46683750, "comment_id": 80315245, "body": "Your file &quot;integer&quot; probably does not exist; you will have to create it first with an appropriate length, a zero-length file will not do... If you open it with <code>O_CREAT</code>, write some (enough for your data) bytes to it before mmapping (seek()ing will do also)."}], "answers": [{"tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 3, "last_activity_date": 1507714177, "creation_date": 1507714177, "answer_id": 46684634, "question_id": 46683750, "link": "https://stackoverflow.com/questions/46683750/why-am-i-getting-this-segmentation-fault/46684634#46684634", "title": "Why am I getting this segmentation fault?", "body": "<p>You should check for errors from <code>open</code> and <code>mmap</code>. Also, compile with warnings and include the necessary include files. <code>mmap</code> especially needs a correct prototype on many systems because of its off_t arguments which could break things when you pass it a 0 as a last argument.</p>\n\n<p>But that's not enough. Does the file exist and is non-zero size?  <code>mmap</code> can happily map pages beyond the end of a file, but access to those pages will result in faults. If you actually want to the data to be written to the file you need to make sure it's long enough for it. Use <code>ftruncate</code> for that.</p>\n\n<p>Also, I wonder which museum you found your documentation if it mentions <code>caddr_t</code> as the first argument to <code>mmap</code>, but that's beside the point, if that compiles it should also work.</p>\n"}], "owner": {"reputation": 9, "user_id": 2503607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89fb53af9d600b21940d22debba69bf?s=128&d=identicon&r=PG", "display_name": "user2503607", "link": "https://stackoverflow.com/users/2503607/user2503607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507714177, "creation_date": 1507711528, "last_edit_date": 1507711648, "question_id": 46683750, "link": "https://stackoverflow.com/questions/46683750/why-am-i-getting-this-segmentation-fault", "title": "Why am I getting this segmentation fault?", "body": "<pre><code>int main() {\n    int fd;     //  File Descriptor for the integer file\n    int pagesize=getpagesize(); //  To store the size of virtual page\n\n    printf(\"\\nPage size is %d bytes.\\n100 integers require %lu bytes\\n\",pagesize,100*sizeof(int));\n    void *data; //  This is the pointer which will store the returned pointer when mmap() is called\n\n    fd=open(\"integer\", O_RDWR); \n\n    data=mmap((caddr_t)0, pagesize, PROT_WRITE | PROT_READ, MAP_SHARED, fd,0);\n    close(fd);\n\n    sprintf((char*)data,\"%d\",100);\n\n    return 0;\n}\n</code></pre>\n\n<p>This returns a Segmentation Fault 11</p>\n"}, {"tags": ["c", "pointers", "reference", "constants", "memory-address"], "comments": [{"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1507710941, "post_id": 46683480, "comment_id": 80314688, "body": "You are invoking undefined behaviour. Do not access memory that you do not own."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507710943, "post_id": 46683480, "comment_id": 80314689, "body": "No, <code>p</code> is a const pointer. So you may dereference it only for reading, not for writing. You could write <code>int foo = *(p+1);</code>, but that&#39;s UB in your case because you are reading memory you don&#39;t own."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1507710951, "post_id": 46683480, "comment_id": 80314693, "body": "An argument like <code>const int *p</code> could mean that <code>p</code> is pointing to a single constant integer. Or it could be pointing to the <i>first element of an array</i> of constant integers. The compiler doesn&#39;t really know which it is."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1507710993, "post_id": 46683480, "comment_id": 80314721, "body": "Nothing can be modified using <code>p</code> (short of casting away the <code>const</code>).   <code>p</code> is a pointer to a <code>const int</code>.   So is <code>p + i</code> where <code>i</code> is any integral value."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507711013, "post_id": 46683480, "comment_id": 80314741, "body": "By the way, what is it you attempt to do? What is the problem that lead you to ask this question? Perhaps you should ask about that problem instead?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507712054, "post_id": 46683480, "comment_id": 80315362, "body": "@Someprogrammerdude I am writing code to learn the behavior of C compilers in different situations. The only purpose of this code is exploring and educating myself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1507712080, "post_id": 46683480, "comment_id": 80315379, "body": "@Peter How do you cast away a const?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507712258, "post_id": 46683480, "comment_id": 80315526, "body": "@Someprogrammerdude &quot;Or it could be pointing to the first element of an array of constant integers. The compiler doesn&#39;t really know which it is.&quot; - Thanks. This actually makes a lot of sense. I understand now why the authors of C chose to implement this behavior."}], "answers": [{"comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1507711904, "post_id": 46683624, "comment_id": 80315270, "body": "Surprisingly, there is no undefined behavior in this program ...because there is actually no behavior in it at all. There would be if it could be compiled and run - but as we can see it does not compile... ;)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1507711183, "creation_date": 1507711183, "answer_id": 46683624, "question_id": 46683480, "link": "https://stackoverflow.com/questions/46683480/why-is-it-not-possible-to-modify-the-value-at-the-next-addresses-after-an-addres/46683624#46683624", "title": "Why is it not possible to modify the value at the next addresses after an address that is passed by reference as const in a function?", "body": "<p>You're just passing a pointer which in C may point to an arbitrarily sized array of objects -- size <code>1</code> for a single object is just one possible case. It's your job as a programmer to find means how the function knows how many objects there are.</p>\n\n<p>If the pointer is a pointer to a <code>const</code>, this means the whole array is immutable.</p>\n\n<p>In your code, your pointer only points to a single object, so accessing the non-existing object at index <code>1</code> is just <em>undefined behavior</em>. If this object <em>would</em> exist, would you expect it to be modifyable through a const pointer? Of course not ...</p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 1, "last_activity_date": 1507713630, "last_edit_date": 1507713630, "creation_date": 1507711641, "answer_id": 46683793, "question_id": 46683480, "link": "https://stackoverflow.com/questions/46683480/why-is-it-not-possible-to-modify-the-value-at-the-next-addresses-after-an-addres/46683793#46683793", "title": "Why is it not possible to modify the value at the next addresses after an address that is passed by reference as const in a function?", "body": "<p><em>'In my opinion the address next to p should be modifiable'</em></p>\n\n<p>Authors of C language have opposite opinion. And it's <em>their</em> opinion which counts.</p>\n\n<p>The C semantics allows you to perform a so-called pointer arithmetics, which includes adding and subtracting integers to/from typed pointers. The pointer value resulting from such operation points to an element of <em>the same array</em>, respective number of items farther or earlier in the array.</p>\n\n<p>However the <code>const</code> modifier applies to the whole array (despite its size being not specified), so it does not vanish in such operation. If it did, you could just do <code>*((p+1)-1)</code> to access a <code>*p</code> variable without the <code>const</code> restriction!</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1507712708, "creation_date": 1507712708, "answer_id": 46684143, "question_id": 46683480, "link": "https://stackoverflow.com/questions/46683480/why-is-it-not-possible-to-modify-the-value-at-the-next-addresses-after-an-addres/46684143#46684143", "title": "Why is it not possible to modify the value at the next addresses after an address that is passed by reference as const in a function?", "body": "<p>This statement</p>\n\n<pre><code>  *(p+1)=5;\n</code></pre>\n\n<p>is problematic for a couple of reasons.</p>\n\n<p><code>p</code> is <code>const</code>-qualified. So that's the reason for the error you get.\nYou violate the promise you made to the compiler (that you wouldn't modify the object pointed to by <code>p</code>).</p>\n\n<p><em>If</em> you didn't have the <code>const</code> qualifier, it's still wrong.\nBecause the object that <code>p</code> points to is a single <code>int</code>, so dereferencing <code>p+1</code> is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.\nNote that evaluating <code>p+1</code> is fine even if <code>p</code> points to a single <code>int</code> object. It's allowed per <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.6p9\" rel=\"nofollow noreferrer\">C11, 6.5.6/9</a>.\nBut dereferencing it is not valid.</p>\n\n<p>If there's a valid object at <code>p + 1</code> (provided that object itself is mutable - otherwise, this will be undefined behaviour), you could cast away the <code>const</code> in <code>modif()</code> and legally modify it. For example, the below is valid (but not something I recommend - if you want <code>modif</code> to be able to modify <code>a</code>'s contents, it doesn't make sense to qualify <code>p</code> with <code>const</code> here).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid modif(const int *p)\n{\n  int *q = (int*)p;\n  *(q+1)=5;\n}\n\nint main()\n{\n  int a[2] = {0};\n  modif(a);\n  printf(\"\\n%d, %d\",a[0], a[1]);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8613421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1507713630, "creation_date": 1507710740, "question_id": 46683480, "link": "https://stackoverflow.com/questions/46683480/why-is-it-not-possible-to-modify-the-value-at-the-next-addresses-after-an-addres", "title": "Why is it not possible to modify the value at the next addresses after an address that is passed by reference as const in a function?", "body": "<p>I have the following code and I am confused why is it now working:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid modif(const int *p)\n{\n\n  *(p+1)=5;\n}\n\nint main()\n{\n  int a=1;\n  printf(\"\\n%d\",a);\n  modif(&amp;a);\n  printf(\"\\n%d\",a);\n\n\n  return 0;\n}\n</code></pre>\n\n<p>The error I am getting is this one:</p>\n\n<pre><code>main.c: In function 'modif':\nmain.c:6:9: error: assignment of read-only location '*(p + 4)'\n   *(p+1)=5;\n         ^\n\nexit status 1\n</code></pre>\n\n<p>In my opinion the address next to p should be modifiable. I have tried to modify the values at addresses that were further away and the result was the same.</p>\n\n<p>When using \"const\" keyword before a parameter passed by reference what is the first address that is actually modifiable?</p>\n"}, {"tags": ["c", "encryption", "aes"], "comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 2, "creation_date": 1507709933, "post_id": 46683091, "comment_id": 80314128, "body": "You need to allocate memory to hold the cipher. Currently, your <code>cipher</code> does not point to writeable memory. Have a look in the example code in the <code>test.c</code>-file in the repository for guidelines: <a href=\"https://github.com/kokke/tiny-AES-c/blob/master/test.c\" rel=\"nofollow noreferrer\">github.com/kokke/tiny-AES-c/blob/master/test.c</a> . Disclaimer: I&#39;m the main author of the project"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507709989, "post_id": 46683091, "comment_id": 80314172, "body": "How do you know the first char in the cipher isn&#39;t <code>&#39;\\0&#39;</code>?  Best to loop over <code>cipher</code> and output the hex values of each char. (and check the guidelines cited above -- I don&#39;t know who provides storage there)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1507711741, "post_id": 46683091, "comment_id": 80315179, "body": "You can only use the <code>%s</code> format specifier for C-style strings. You can&#39;t use it to print arbitrary data with no special structure. For one thing, how would it know how many bytes to print?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1507716292, "post_id": 46683091, "comment_id": 80318334, "body": "Your IV and Key should be 16 bytes / 128 bits long (currently 24 + null-termination = 25). You should also pad your buffers so that their sizes are multiples of 16 bytes (128 bit) as mentioned in the project README :) Currently you&#39;re passing a 64 byte array (+ 1 byte 0-termination) and telling <code>AES_CBC_encrypt_buffer</code> the length is 65 (because you&#39;re using <code>sizeof(in)</code> to determine that)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7694915"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1507791119, "post_id": 46683091, "comment_id": 80353284, "body": "@MortenJensen I tried changing IV and Key to random string of 16 bytes each, and the &#39;in&#39; input as random string of 32 bytes, and also replaces &#39;sizeof(in)&#39; to be 32 now. I am able to print out using %x, but it prints &#39;20003A74&#39; for each byte of the encrypted string (cipher). Even before encryption, I tried printing &#39;cipher&#39; (which should be empty since it is declared as &#39;unsigned char ciphertext[32]&#39;) but it prints &#39;20003A74&#39; as well. What has gone wrong here? Sorry, I&#39;m new to this. Thank you."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1507804077, "post_id": 46683091, "comment_id": 80361014, "body": "@jj_94 Did you try reading the file I suggested? The <code>test.c</code> file from the repository encrypts and decrypts strings and prints them out as well. You could have a look in that file for some inspiration on how to get what you want. Update the question to contain your code, if you need help with that :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7694915"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1507859156, "post_id": 46683091, "comment_id": 80389266, "body": "@MortenJensen I had a look in the file you suggested. It seem that I am doing the same way, except my &#39;in&#39; needs to be a string and i do not have &#39;out&#39; variable. On a side note, I updated the question to my recent code. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507710294, "post_id": 46683169, "comment_id": 80314335, "body": "I agree with @DavidC.Rankin - I would say cipher points to 1 byte of read-only const data."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507711419, "post_id": 46683169, "comment_id": 80314979, "body": "@DavidC.Rankin Of course you&#39;re right, that&#39;ll teach me not to answer questions pre-coffee. Edited of course. Thanks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7694915"}, "edited": false, "score": 0, "creation_date": 1507713433, "post_id": 46683169, "comment_id": 80316348, "body": "Hi, that fixed the problem of not displaying any character out. However it is showing strange characters now. Why is that so?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1507713609, "post_id": 46683169, "comment_id": 80316502, "body": "@jj_94 Try printing each byte in the string with the hex-format string <code>%x</code>. An encrypted string will contain unprintable characters, which is probably what you are seeing as &quot;strange characters&quot;. It seems you are expecting that ASCII input gives ASCII output - this is not the case."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1507713744, "post_id": 46683169, "comment_id": 80316597, "body": "@jj_94 That is addressed in my answer&#39;s final paragraph. Encrypted data is not text, it&#39;s binary (regardless of the input)."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 5, "last_activity_date": 1507711397, "last_edit_date": 1507711397, "creation_date": 1507709780, "answer_id": 46683169, "question_id": 46683091, "link": "https://stackoverflow.com/questions/46683091/how-to-use-tiny-aes-128-library-in-c/46683169#46683169", "title": "How to use tiny-aes 128 library in c?", "body": "<p>Your code has undefined behavior.</p>\n\n<p>This:</p>\n\n<pre><code>unsigned char *cipher = \"\";\n</code></pre>\n\n<p>makes <code>cipher</code> into a pointer to a single byte with the value 0 (the string terminator). It's a bit fishy since string literals are not guaranteed to be <code>unsigned char</code> (they're just <code>char</code> which is either signed or unsigned) but I think it will build.</p>\n\n<p>This doesn't give you any writeable space, since string literals are read-only, so trying to write an entire encrypted block in there will give you undefined behavior.</p>\n\n<p>To fix it you need:</p>\n\n<pre><code>unsigned char in[] = \"THJmaoeuf2jsn4jebc7ak3mUdnyHeklOYopdna/OOndu3bis/E7jTd/enasduR3h\";   //64 bits\nunsigned char cipher[sizeof in];\n</code></pre>\n\n<p>Also, the encrypted data is very likely not a valid C string, it can contain 0-bytes and thus won't print correctly using <code>printf(\"%s\", ...);</code> anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 8740748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540a3685144e0eef9f893b378e37a1cb?s=128&d=identicon&r=PG&f=1", "display_name": "CnCPPcoder", "link": "https://stackoverflow.com/users/8740748/cncppcoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1581049915, "last_edit_date": 1581049915, "creation_date": 1524552100, "answer_id": 49994982, "question_id": 46683091, "link": "https://stackoverflow.com/questions/46683091/how-to-use-tiny-aes-128-library-in-c/49994982#49994982", "title": "How to use tiny-aes 128 library in c?", "body": "<p>in the line:</p>\n\n<pre><code>printf(\"cipher[%d]: %x \\n\", n, cipher);\n</code></pre>\n\n<p>change that to be:</p>\n\n<pre><code>printf(\"cipher[%d]: %x \\n\", n, cipher[n]);\n</code></pre>\n\n<p>That way, each byte of the cipher is outputted instead of the address of cipher which is what you are getting.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11890734, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DuJul_JUe1U/AAAAAAAAAAI/AAAAAAAAAqU/MIzrDbn_lGw/photo.jpg?sz=128", "display_name": "Khalegh Salehi", "link": "https://stackoverflow.com/users/11890734/khalegh-salehi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573258457, "last_edit_date": 1573258457, "creation_date": 1573256471, "answer_id": 58775026, "question_id": 46683091, "link": "https://stackoverflow.com/questions/46683091/how-to-use-tiny-aes-128-library-in-c/58775026#58775026", "title": "How to use tiny-aes 128 library in c?", "body": "<p>in aes.h  select 128 by</p>\n\n<pre><code>#define AES128 1\n</code></pre>\n\n<p>and below is a sample for Encryption &amp; Decryption</p>\n\n<pre><code>struct AES_ctx ctx;\n\nuint8_t key[] = \"aaaaaaaaaaaaaaaa\";\nuint8_t iv[]  = \"bbbbbbbbbbbbbbbb\";\nuint8_t str[] = \"This a sample text, Length eq 32\";\n\nprintf(\"\\n raw buffer \\n\");\nfor (int i = 0; i &lt; 32; ++i) {\n    printf(\"%.2x\", str[i]);\n}\n\nAES_init_ctx_iv(&amp;ctx, key, iv);\nAES_CBC_encrypt_buffer(&amp;ctx, str, 32);\n\nprintf(\"\\n Encrypted buffer\\n\");\n\nfor (int i = 0; i &lt; 32; ++i) {\n    printf(\"%.2x\", str[i]);\n}\n\nprintf(\"\\n Decrypted buffer\\n\");\n\nAES_init_ctx_iv(&amp;ctx, key, iv);\nAES_CBC_decrypt_buffer(&amp;ctx, str, 32);\n\nfor (int i = 0; i &lt; 32; ++i) {\n    printf(\"%.2x\", str[i]);\n}\n\nprintf(\"\\n\");\n</code></pre>\n\n<p>*Note:  there is no padding is provided so for CBC and ECB, All buffers should be multiples of 16 bytes.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7694915"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6194, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1585880351, "creation_date": 1507709503, "last_edit_date": 1507858909, "question_id": 46683091, "link": "https://stackoverflow.com/questions/46683091/how-to-use-tiny-aes-128-library-in-c", "title": "How to use tiny-aes 128 library in c?", "body": "<p>I would like to encrypt using tiny AES library (<a href=\"https://github.com/kokke/tiny-AES-c\" rel=\"nofollow noreferrer\">https://github.com/kokke/tiny-AES-c</a>) in C for AES128. </p>\n\n<p>My code is as below:</p>\n\n<pre><code>    unsigned char cipher[64];\n    unsigned char in[] = \"THJmaoeuf2jsn4jebc7ak3mUdnyHeklOYopdna/OOndu3bis/E7jTd/enasduR3h\";   //64 bits\n\n    printf(\"Size of AES input msg: %d \\n\", sizeof(in));              \n\n    unsigned char key[] = \"Gns7AauH3dnaod==\";    //16 bits\n    unsigned char IV[] = \"vhdNaleuTHenaOlL\";     //16 bits\n\n    printf(\"cipher(before): %x \\n\", cipher);\n\n    AES128_CBC_encrypt_buffer(cipher, in, 64, key, IV);\n\n    for(int n=0; n&lt;64; n++){\n        printf(\"cipher[%d]: %x \\n\", n, cipher);\n    }\n</code></pre>\n\n<p>The function I am using from tiny AES 128 library is this :</p>\n\n<pre><code>void AES128_CBC_encrypt_buffer(uint8_t* output, uint8_t* input, uint32_t length, const uint8_t* key, const uint8_t* iv)\n</code></pre>\n\n<p>However, the last line of printing 'cipher' is empty. I believe it should print the cipher text of the original input after encryption. Is this the correct way to use the library? Thank you.</p>\n\n<p><strong>EDIT:</strong> I updated the code here, in which 'cipher' is now printing characters but in a strange way. It prints the same thing before and after encryption, which should not be the case. This is the same case even when I changed the 'key' and 'IV' to be 16 bits and input message 'in' as 64 bits. Here is a part of the output: </p>\n\n<pre><code>cipher(before): 20003A34\ncipher[0]: 20003A34\ncipher[1]: 20003A34\ncipher[2]: 20003A34\n         .\n         .\ncipher[63]: 20003A34\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507709574, "post_id": 46683037, "comment_id": 80313894, "body": "create a <code>sum.c</code> file to put the code in it. compile both files &amp; link"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1507709623, "post_id": 46683037, "comment_id": 80313930, "body": "Try to include the header in two different files and see what happens. In c++ the inline keyword will solve the problem."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507709627, "post_id": 46683037, "comment_id": 80313935, "body": "It works fine until you include the header file in two different .c files and link them together."}], "answers": [{"tags": [], "owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "is_accepted": false, "score": -1, "last_activity_date": 1507709586, "creation_date": 1507709586, "answer_id": 46683114, "question_id": 46683037, "link": "https://stackoverflow.com/questions/46683037/write-the-content-of-function-in-the-header-file-c/46683114#46683114", "title": "write the content of function in the header FIle C", "body": "<p>Broadly, you might what to include your header in multiple source files. If you have actual function definitions in there, you're going to have multiple definitions. This will be fine until the linker tries to assemble your compiled sources into an executable or library, at which point it will fail because it finds several functions with the same name.</p>\n"}], "owner": {"reputation": 79, "user_id": 6715085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qSH8A.jpg?s=128&g=1", "display_name": "Ryuuk", "link": "https://stackoverflow.com/users/6715085/ryuuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1507709585, "answer_count": 1, "score": 0, "last_activity_date": 1507709586, "creation_date": 1507709346, "last_edit_date": 1507709539, "question_id": 46683037, "link": "https://stackoverflow.com/questions/46683037/write-the-content-of-function-in-the-header-file-c", "closed_reason": "Duplicate", "title": "write the content of function in the header FIle C", "body": "<p>when i'm reading some tutorial in C programming,all of them said that we need to put only structure type declarations, function prototypes, and global variable extern declarations, in the .h file; and for the function definitions and global variable definitions and initializations we need to put them in the .c file.\nbut when i try to put the content of the function in the header file it works fine. if it works fine why we must not use it ?<br>\nin the <strong>sum.h</strong> : </p>\n\n<pre><code>#ifndef HEADER_H_INCLUDED\n#define HEADER_H_INCLUDED\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint sum(int a,int b)\n{\n    return a+b;\n}\n\n#endif // HEADER_H_INCLUDED\n</code></pre>\n\n<p>int the <strong>main.c</strong>:</p>\n\n<pre><code>#include \"sum.h\"\nint main()\n{\n    printf(\"%d\\n\",sum(1,2));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1507709386, "post_id": 46682971, "comment_id": 80313769, "body": "As an aside, in <code>createList</code> you put your assertion in the wrong place, so it will have no effect:  If <code>list</code> is null, you will seg fault before you even reach the assertion.  Always check the return value of <code>malloc</code> <i>before</i> attempting to access the pointer it returns."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1507709438, "post_id": 46682971, "comment_id": 80313801, "body": "You are missing the fact that there is no string data type in C. <code>node-&gt;data = newValue</code> assigns a <i>pointer</i>, and when you call <code>push(list, s);</code> you are passing the same pointer each time."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507709608, "post_id": 46682971, "comment_id": 80313919, "body": "You need to allocate storage for the strings before calling <code>push</code>.  In the case of string constants, it&#39;s not an issue, but for the string read by <code>scanf</code>, you&#39;re using an automatic array <code>s</code> over and over.  You can use <code>strdup</code> to allocate storage and copy the strings."}], "answers": [{"comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1507709491, "post_id": 46683052, "comment_id": 80313834, "body": "Also <code>scanf(&quot;%s&quot;, &amp;s)</code> should be <code>scanf(&quot;%s&quot;, s)</code> as <code>s</code> is a <code>char</code> array"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 2, "creation_date": 1507709539, "post_id": 46683052, "comment_id": 80313871, "body": "Also never use <code>scanf</code> for anything."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1507709601, "post_id": 46683052, "comment_id": 80313914, "body": "@ceving could you please elaborate ?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1507709716, "post_id": 46683052, "comment_id": 80313987, "body": "Any answer that deals with <code>scanf</code> and <code>%s</code>, <i>must</i> warn about missing width limit. Otherwise it&#39;s as bad as <code>gets</code>."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 5, "last_activity_date": 1507709537, "last_edit_date": 1507709537, "creation_date": 1507709392, "answer_id": 46683052, "question_id": 46682971, "link": "https://stackoverflow.com/questions/46682971/linked-list-implementation-mistake-in-c/46683052#46683052", "title": "Linked list implementation mistake in C", "body": "<pre><code>while(scanf(\"%s\", &amp;s) == 1) push(list, s);\n</code></pre>\n\n<p>Every time you call <code>push</code> you're pushing <code>s</code> into the list. So every entry will contain precisely the same pointer value, which probably is not what you want.</p>\n\n<p>When you go to print, <code>s</code> contains \"c\". Each node has a pointer to <code>s</code>, so you print the \"c\" three times, once for each node.</p>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 3, "last_activity_date": 1507712286, "last_edit_date": 1507712286, "creation_date": 1507709977, "answer_id": 46683219, "question_id": 46682971, "link": "https://stackoverflow.com/questions/46682971/linked-list-implementation-mistake-in-c/46683219#46683219", "title": "Linked list implementation mistake in C", "body": "<p>The field <code>data</code> in the struct is a pointer, so you need to treat it as such. You're not using it correct. Try something like this:</p>\n\n<pre><code>node-&gt;data = strdup(newValue);\n</code></pre>\n\n<p>Study documentation for strdup so you know exactly how it works.</p>\n\n<p>Also</p>\n\n<pre><code>if(list-&gt;firstNode != NULL){\n    node-&gt;next = list-&gt;firstNode;\n    list-&gt;firstNode = node;\n}\nelse list-&gt;firstNode = node;\n</code></pre>\n\n<p>can be changed to</p>\n\n<pre><code>if(list-&gt;firstNode != NULL){\n    node-&gt;next = list-&gt;firstNode;\n}\nlist-&gt;firstNode = node;\n</code></pre>\n\n<p>or even better just</p>\n\n<pre><code>node-&gt;next = list-&gt;firstNode;\nlist-&gt;firstNode = node;\n</code></pre>\n\n<p>Another comment is that you should choose if you want to set <code>node-&gt;next</code> to <code>NULL</code> in <code>createNode</code> or outside. Don't do both. That just clutters up your code. I would choose to do it in <code>createNode</code>. I would also set <code>node-&gt;data</code> to <code>NULL</code> in the same function. It's a pointer and should be treated as such.</p>\n"}], "owner": {"reputation": 745, "user_id": 6612401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qZzdw.jpg?s=128&g=1", "display_name": "Eugene Mamaev", "link": "https://stackoverflow.com/users/6612401/eugene-mamaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 46683052, "answer_count": 2, "score": 4, "last_activity_date": 1507712286, "creation_date": 1507709124, "question_id": 46682971, "link": "https://stackoverflow.com/questions/46682971/linked-list-implementation-mistake-in-c", "title": "Linked list implementation mistake in C", "body": "<p>I have a program written in C. And I struggle with the effect I can't understand. The app reads a sequence of words as a command line input. While reading an input it puts one-by-one words into a list. And then it prints the list. What blows my mind is why values added ouside the loop are printed correctly whilst values added inside the loop aren't. I mean whichever values are input by user, only the last one will be printed. And furthermore it will be printed as many times as the number of values were input is. The two primary suspects are push and printList methods:</p>\n\n<pre><code>void push(struct List * list, char* newValue){\n    assert(list != NULL);\n    assert(newValue != NULL);\n\n    Node* node = createNode();\n    node-&gt;data = newValue;\n    node-&gt;next = NULL;\n    if(list-&gt;firstNode != NULL){\n        node-&gt;next = list-&gt;firstNode;\n        list-&gt;firstNode = node;\n    }\n    else list-&gt;firstNode = node;\n}\n\nvoid printList(struct List * list){\n    assert(list != NULL);\n    Node *node = list-&gt;firstNode;\n    while(node-&gt;next != NULL){\n        printf(\"%s \", node-&gt;data);\n        node = node-&gt;next;\n    }\n    if(node != NULL) printf(\"%s \", node-&gt;data);\n}\n</code></pre>\n\n<p>But I couldn't find any bugs in there. What I did is I compared the behaviour with and without a while loop:</p>\n\n<pre><code>int main(){\n    struct List* list = createList();\n    char s[256];\n    int a;\n    push(list, \"he\");\n    push(list, \"bee\");\n    push(list, \"gee\");\n    while(scanf(\"%s\", &amp;s) == 1) push(list, s);\n    printList(list);\n}\n</code></pre>\n\n<p>The output I got is:</p>\n\n<blockquote>\n  <p>c c c gee bee he</p>\n</blockquote>\n\n<p>Whilst the input is:</p>\n\n<blockquote>\n  <p>a b c</p>\n</blockquote>\n\n<p>So I expected to get</p>\n\n<blockquote>\n  <p>c b a gee bee he</p>\n</blockquote>\n\n<p>What did I miss? Any suggestion is highly appreciated.</p>\n\n<p>P.S. The type defs and methods used above are:</p>\n\n<pre><code>typedef struct Node {\n    char* data;\n    struct Node *next;\n} Node;\n\ntypedef struct List {\n    struct Node *firstNode;\n} List;\n\nNode *createNode(){\n    Node* node = malloc(sizeof(struct Node));\n    assert(node != NULL);\n\n    node-&gt;data = \"\";\n    node-&gt;next = NULL;\n    return node;\n}\n\nList *createList(){\n    List* list = malloc(sizeof(struct List));\n    list-&gt;firstNode = NULL;\n    assert(list != NULL);\n    return list;\n}\n</code></pre>\n"}, {"tags": ["c", "mingw", "mariadb", "connector"], "comments": [{"owner": {"reputation": 11, "user_id": 8756691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f3659b825c12d650fb3819dc3937d3?s=128&d=identicon&r=PG&f=1", "display_name": "DoeDev", "link": "https://stackoverflow.com/users/8756691/doedev"}, "edited": false, "score": 0, "creation_date": 1507708634, "post_id": 46682806, "comment_id": 80313304, "body": "I&#39;m using:gcc (i686-posix-sjlj-rev1, Built by MinGW-W64 project) 6.2.0 cmake version 3.9.3"}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 6253340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-T7bB3VLp8Rg/AAAAAAAAAAI/AAAAAAAAABs/yJfd_Dwg5tc/photo.jpg?sz=128", "display_name": "Peter Gulutzan", "link": "https://stackoverflow.com/users/6253340/peter-gulutzan"}, "is_accepted": false, "score": 0, "last_activity_date": 1509132753, "creation_date": 1509132753, "answer_id": 46982237, "question_id": 46682806, "link": "https://stackoverflow.com/questions/46682806/cannot-build-mariadb-c-connector-with-mingw/46982237#46982237", "title": "cannot build mariadb C connector with mingw", "body": "<p>I have built the MariaDB C Connector with mingw.\nI don't know if this will work in your environment\n(in fact it's not utterly clear what your environment is),\nbut it will work in this environment:\nWindows 10, gcc i686-posix-dwarf-rev0, MinGW 5.3.0 (the one that came with Qt 5.9),\nMariaDB source download for 2.2.3.\nThat MariaDB version number is important: avoid version 3.0.2.\nYou have to change the source file libmariadb\\my_pthread.c\nto avoid duplicate-function messages, this is not hard:\nthe \"#ifdef WIN32\" before the functions should be changed to\nsomething impossible, e.g. \"#ifdef WIN32_IMPOSSIBLE\".\nThen (I'm running from the directory that contains CMakeLists.txt,\nI didn't try shadow building): mingw32-make clean, then\ncmake -G \"MinGW Makefiles\", then mingw32-make.\nYes, cmake says \"not found\" a bunch of times, and mingw32-make\ngenerates warnings, but the result is\nan .a file in the libmariadb subdirectory, and I've successfully\nlinked to it in my project.</p>\n"}], "owner": {"reputation": 11, "user_id": 8756691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f3659b825c12d650fb3819dc3937d3?s=128&d=identicon&r=PG&f=1", "display_name": "DoeDev", "link": "https://stackoverflow.com/users/8756691/doedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509132753, "creation_date": 1507708576, "question_id": 46682806, "link": "https://stackoverflow.com/questions/46682806/cannot-build-mariadb-c-connector-with-mingw", "title": "cannot build mariadb C connector with mingw", "body": "<p>After using command:\ncmake.exe -G \"MinGW Makefiles\"</p>\n\n<p>lots and lots of headers are not found.</p>\n\n<p>-- Looking for include file alloca.h</p>\n\n<p>-- Looking for include file alloca.h - not found</p>\n\n<p>-- Looking for include file arpa/inet.h</p>\n\n<p>-- Looking for include file arpa/inet.h - not found</p>\n\n<p>-- Looking for include file crypt.h</p>\n\n<p>-- Looking for include file crypt.h - not found</p>\n\n<p>-- Looking for include file dirent.h</p>\n\n<p>-- Looking for include file dirent.h - found</p>\n\n<p>-- Looking for include file dlfcn.h</p>\n\n<p>-- Looking for include file dlfcn.h - not found</p>\n\n<p>-- Looking for include file execinfo.h</p>\n\n<p>-- Looking for include file execinfo.h - not found</p>\n\n<p>................\n................\nerrors continue\n...............</p>\n\n<p>and of course, when running mingw32-make, errors appear.</p>\n\n<p>is there any cmake flag missing?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "centos7"], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 8658403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/897074331146cdaa4e6e0cf728be2724?s=128&d=identicon&r=PG&f=1", "display_name": "Yongjian Wang", "link": "https://stackoverflow.com/users/8658403/yongjian-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1507744260, "last_edit_date": 1507744260, "creation_date": 1507708983, "answer_id": 46682927, "question_id": 46682764, "link": "https://stackoverflow.com/questions/46682764/systemd-service-status-remains-running-even-after-execstart-process-not-present/46682927#46682927", "title": "Systemd Service status remains running even after ExecStart process not present in centos 7.3", "body": "<p>For <code>Type=forking</code>, systemd assume the child or child of child of the start command is the daemon process.</p>\n\n<p>Change it to <code>simple</code> if your daemon does not go this way.</p>\n"}], "owner": {"reputation": 1, "user_id": 4693394, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ct2PobXm6Oo/AAAAAAAAAAI/AAAAAAAAAA8/cXYv3k3fCrM/photo.jpg?sz=128", "display_name": "Guruprasad", "link": "https://stackoverflow.com/users/4693394/guruprasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507744260, "creation_date": 1507708396, "question_id": 46682764, "link": "https://stackoverflow.com/questions/46682764/systemd-service-status-remains-running-even-after-execstart-process-not-present", "title": "Systemd Service status remains running even after ExecStart process not present in centos 7.3", "body": "<p>I have created a systemd service like way any interruption triggered to running process then it has to restart itself. but service shows its status as running (Used systemctl status x.service) even after process is exited (which is mentioned in exec_start). \nBelow is my service script </p>\n\n<p>{</p>\n\n<pre><code>[Unit]\nDescription=xserverd\nAfter=syslog.target rsyslog-x.service systemd-modules-load.service\nRequires=rsyslog-x.service systemd-modules-load.service\n[Service]\nType=forking\nExecStart=/opt/bin/xserver\nRestart=always\nRestartSec=2s\nRemainAfterExit=no\nRestartPreventExitStatus=SIGINT\nKillMode=process\nTimeoutSec=300s\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p>}</p>\n\n<p>/opt/bin/xserver is a C executable which 777 permission. added signal handler for SIGINT and SIGSEGV. SIGINT is to say proper exit from user. SIGSEGV to log backtrace to our custom log file. whenever process receives these signals it will exit with \n{\n<code>exit(EXIT_FAILURE)</code>\n}</p>\n"}, {"tags": ["c", "arrays", "pointers", "memory-management", "malloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1507708562, "post_id": 46682738, "comment_id": 80313254, "body": "Unrelated to your problem, but you do know that for any pointer or array <code>p</code> and index <code>i</code>, the expression <code>*(p + i)</code> is exactly equal to <code>p[i]</code>? You don&#39;t have to use pointer arithmetic, and can save typing a couple of characters."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507708645, "post_id": 46682738, "comment_id": 80313315, "body": "Also, you have a memory leak, the pointer you allocate in <code>write_seq</code> is never deallocated. There&#39;s not even a <i>need</i> to allocate that single value dynamically. Just doing <code>q-&gt;arr[q-&gt;len++] = val;</code> is all the function needs to do."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507708656, "post_id": 46682738, "comment_id": 80313322, "body": "Not yet understood what you&#39;re trying to achieve, but allocating memory for a single <code>uint16_t</code> is pointless."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507708769, "post_id": 46682738, "comment_id": 80313391, "body": "Oh, and you have a much worse problem than all of the above, and one that makes me wonder why your program didn&#39;t crash. You dereference a null pointer, and write memory to unallocated memory. What I <b><i>think</i></b> you want to do in <code>write_seq</code> is to <a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow noreferrer\">reallocate</a> <code>q-&gt;arr</code>, not allocate the single temporary element."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507709279, "post_id": 46682738, "comment_id": 80313714, "body": "On another unrelated note, for a size (like the structure member <code>len</code>) I suggest you use <code>size_t</code> instead. While it could be equal to <code>uint32_t</code> (on 32-bit platforms at least) it shows intent to the readers of your code."}, {"owner": {"reputation": 1600, "user_id": 2641038, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VCnlL.png?s=128&g=1", "display_name": "Lion Lai", "link": "https://stackoverflow.com/users/2641038/lion-lai"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507709991, "post_id": 46682738, "comment_id": 80314173, "body": "@MichaelWalz I use <code>uint16_t</code> to remind me or whoever reads this block of code that <code>*arr</code> is an array to store unsigned 16 bit value. Does this make sense to you?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507710720, "post_id": 46682738, "comment_id": 80314560, "body": "@ZianLai it&#39;s entirely up to you. Yes, it makes sense, why not?"}, {"owner": {"reputation": 1600, "user_id": 2641038, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VCnlL.png?s=128&g=1", "display_name": "Lion Lai", "link": "https://stackoverflow.com/users/2641038/lion-lai"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507711085, "post_id": 46682738, "comment_id": 80314789, "body": "@Someprogrammerdude Can you explain more about why use <code>size_t</code> can make this code more self-explain to readers? I read this <a href=\"https://stackoverflow.com/questions/1951519/when-should-i-use-stdsize-t\">post</a>, but not quite understand why using <code>size_t</code> is more preferable in this scenario. Thanks"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507711207, "post_id": 46682738, "comment_id": 80314855, "body": "The <code>uint32_t</code> type is for a general 32-bit unsigned integer. It could store any kind of data, there&#39;s no meaning to the type beyond &quot;32-bit unsigned integer&quot;. The type <code>size_t</code> really says &quot;I&#39;m a type for a size&quot;., so readers will automatically know that the variable defined with that type is a size of some kind."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1507709517, "post_id": 46683042, "comment_id": 80313850, "body": "First of all, please avoid posting multiple answers. Modify the one you have instead. Secondly, code-only answers without comments or any kind of explanation are also discouraged. Why would this code be better than the code the OP already have? How does it solve the OPs problem? Lastly, don&#39;t reassign the result of <code>realloc</code> back to the pointer you pass as argument to <code>realloc</code>. The <code>realloc</code> call may fail and return NULL and then you will lose the original pointer and have a memory leak."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1507710865, "post_id": 46683042, "comment_id": 80314646, "body": "Doing a <code>realloc</code> for every single call to <code>write_seq</code> is inefficient."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1507712200, "post_id": 46683042, "comment_id": 80315480, "body": "also, you&#39;re only writing the length - the OP&#39;s function adds a given number to the <code>seq</code>."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1507709363, "creation_date": 1507709363, "answer_id": 46683042, "question_id": 46682738, "link": "https://stackoverflow.com/questions/46682738/pass-a-structure-to-a-function-and-store-values-in-the-structures-element/46683042#46683042", "title": "Pass a structure to a function and store values in the structure&#39;s element", "body": "<p>You need to use <a href=\"http://www.cplusplus.com/reference/cstdlib/realloc/\" rel=\"nofollow noreferrer\"><code>realloc()</code></a>, not <code>malloc()</code>, like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef struct {\n    int len;\n    int *arr;\n} seq;\n\nvoid write_seq(seq *q)\n{\n    q-&gt;arr = realloc (q-&gt;arr, (q-&gt;len + 1) *  sizeof(int));\n    q-&gt;arr[q-&gt;len] = q-&gt;len;\n    q-&gt;len++;\n}\n\nint main(void)\n{\n    seq q;\n    q.len = 0;\n    q.arr = NULL;\n\n    for(int i = 0; i &lt; 10; ++i)\n        write_seq(&amp;q);\n\n\n    printf(\"length is %d\\n\", q.len);\n    for (int i = 0; i &lt; q.len; i++) {\n        printf(\"%d\\n\", q.arr[i]);\n    }\n\n    free(q.arr);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>length is 10\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1600, "user_id": 2641038, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VCnlL.png?s=128&g=1", "display_name": "Lion Lai", "link": "https://stackoverflow.com/users/2641038/lion-lai"}, "edited": false, "score": 0, "creation_date": 1507714081, "post_id": 46683208, "comment_id": 80316862, "body": "Your code works great. btw, I change one line to <code>size_t new_capacity = seq-&gt;capacity * 2;</code> I think maybe it&#39;s more efficient."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 1600, "user_id": 2641038, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VCnlL.png?s=128&g=1", "display_name": "Lion Lai", "link": "https://stackoverflow.com/users/2641038/lion-lai"}, "edited": false, "score": 1, "creation_date": 1507724105, "post_id": 46683208, "comment_id": 80323346, "body": "@ZianLai that&#39;s the trade off you have to make between wasting memory or increasing performance.   I chose the &quot;incremental increase&quot; approach because it limits the memory wastage to 8 elements.   Doubling the capacity each time means you&#39;re using up to twice as much memory as you need to.    A better compromise might be <code>seq-&gt;capacity * 1.4</code>."}], "tags": [], "owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "is_accepted": true, "score": 1, "last_activity_date": 1507712348, "last_edit_date": 1507712348, "creation_date": 1507709940, "answer_id": 46683208, "question_id": 46682738, "link": "https://stackoverflow.com/questions/46682738/pass-a-structure-to-a-function-and-store-values-in-the-structures-element/46683208#46683208", "title": "Pass a structure to a function and store values in the structure&#39;s element", "body": "<p>To add members to the array when you don't know in advance the size of that array, you'd need to use <code>realloc()</code> to increase the size on demand.   However it's inefficient to do that for <em>every</em> change to the array size, so it would be more usual to allow for a certain amount of headroom (whether that be a fixed increment or a percentage based amount) in the buffer.</p>\n\n<p>The corollary of that is you need to store the current <em>capacity</em> of the buffer as well as the offset to the amount <em>currently</em> used.</p>\n\n<p>This also means that there'll be a certain amount of memory wastage, but that's the trade off you have to make.</p>\n\n<p>My approach would look something like this, abstracting the operations that you might want to perform on a <code>seq</code>.</p>\n\n<pre><code>typedef struct {\n    size_t    capacity;\n    size_t    offset;\n    uint16_t *arr;\n} seq;\n\nstatic const size_t SEQ_INITIAL = 8;\nstatic const size_t SEQ_INCREMENT = 8;\n\nint seq_init(seq *seq) {\n    assert(seq != NULL);         /* catch null seq */\n    assert(seq-&gt;arr == NULL);    /* error to call on already init'd seq */\n    seq-&gt;capacity = SEQ_INITIAL;\n    seq-&gt;offset = 0;\n    seq-&gt;arr = malloc(seq-&gt;capacity * sizeof(seq-&gt;arr[0]));\n    return seq-&gt;arr == NULL ? -1 : 0;\n}\n\nstatic int seq_grow(seq *seq) {  /* private implementation detail */\n    size_t new_capacity = seq-&gt;capacity + SEQ_INCREMENT;\n    void *p = realloc(seq-&gt;arr, new_capacity * sizeof(seq-&gt;arr[0]));\n    if (p == NULL) {             /* realloc failed, seq unmodified */\n        return -1;\n    }\n    seq-&gt;arr = p;\n    seq-&gt;capacity = new_capacity;\n    return 0;\n}\n\nint seq_write(seq *seq, uint16_t value) {\n    assert(seq != NULL);         /* catch null seq */ \n    if ((seq-&gt;offset == seq-&gt;capacity) &amp;&amp; seq_grow(seq) &lt; 0) {\n        return -1;               /* write failed */\n    }\n    assert(seq-&gt;arr != NULL);    /* catch bad seq */\n    assert(seq-&gt;offset &lt; seq-&gt;capacity); /* ensure seq really has room */\n    seq-&gt;arr[seq-&gt;offset++] = value;\n    return 0;\n}\n\nvoid seq_free(seq *seq) {\n    if (seq != NULL) {\n        free(seq-&gt;arr);\n        seq-&gt;arr = NULL;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1600, "user_id": 2641038, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VCnlL.png?s=128&g=1", "display_name": "Lion Lai", "link": "https://stackoverflow.com/users/2641038/lion-lai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 46683208, "answer_count": 2, "score": 1, "last_activity_date": 1507712348, "creation_date": 1507708311, "last_edit_date": 1507709459, "question_id": 46682738, "link": "https://stackoverflow.com/questions/46682738/pass-a-structure-to-a-function-and-store-values-in-the-structures-element", "title": "Pass a structure to a function and store values in the structure&#39;s element", "body": "<p>I want to pass a structure to a function and store value in the structure's element. Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\ntypedef struct {\n    uint32_t len;\n    uint16_t *arr;\n} seq;\n\nvoid write_seq(seq *q, int val)\n{\n    // How to implement this function?\n\n    uint16_t *tmp;\n    tmp = (uint16_t *)malloc(sizeof(uint16_t));\n    *tmp = val;\n\n    *(q-&gt;arr + q-&gt;len) = *tmp;\n    q-&gt;len += 1;\n\n}\n\nint main(int argc, char *argv[])\n{\n    seq q;\n    q.len = 0;\n    q.arr = NULL;\n    int i;\n    for (i = 0; i &lt; 10; i++) {\n        write_seq(&amp;q, i);\n    }\n\n    printf(\"length is %d\\n\", q.len);\n    for (i = 0; i &lt; q.len; i++) {\n        printf(\"%d\\n\", *(q.arr+i));\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I want to write 0 to 9 to a memory block which q.arr points to.<br>\nI don't want to use malloc in main(), since I don't know how many bytes I need before I call write_seq. I want to locate new memory every time when write_seq is called. Here's how output should look like.</p>\n\n<pre><code>length is 10\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n</code></pre>\n\n<p>My implementation of write_seq() would cause core dumped. I don't know how to fix it. Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 188, "user_id": 7421821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d049065b62e849de71d61be857f0276?s=128&d=identicon&r=PG&f=1", "display_name": "Lysandros Nikolaou", "link": "https://stackoverflow.com/users/7421821/lysandros-nikolaou"}, "edited": false, "score": 4, "creation_date": 1507705654, "post_id": 46681784, "comment_id": 80311480, "body": "You could have a look at the <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_qsort.htm\" rel=\"nofollow noreferrer\"><code>qsort()</code></a> function."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1507706167, "post_id": 46681784, "comment_id": 80311779, "body": "Could you please list the options that you investigated so far? And also what&#39;s preventing you from picking one?"}, {"owner": {"reputation": 83, "user_id": 8624614, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6cc2e1a8f9306dd8caeaefcf9dafd777?s=128&d=identicon&r=PG&f=1", "display_name": "Manic", "link": "https://stackoverflow.com/users/8624614/manic"}, "edited": false, "score": 0, "creation_date": 1507706605, "post_id": 46681784, "comment_id": 80312043, "body": "I have just implemented bubble sort based on the port number, by swapping cells of the array (struct as a whole). It seems to work. But I was kind of trying to find out better options."}], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 8396518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3Wp4.jpg?s=128&g=1", "display_name": "Claudio Borges", "link": "https://stackoverflow.com/users/8396518/claudio-borges"}, "is_accepted": false, "score": 0, "last_activity_date": 1507707838, "creation_date": 1507707838, "answer_id": 46682573, "question_id": 46681784, "link": "https://stackoverflow.com/questions/46681784/sorting-an-array-of-pointers-to-a-struct-on-the-basis-of-a-struct-member-best/46682573#46682573", "title": "Sorting an array of pointers to a struct on the basis of a struct member - best possible option?", "body": "<p>The problem is based on which sorting algorithm suits best in your application. It could be, quick sort, merge sort, or a simple selection sort.\nAs your example the length of the array is just 4, I've made an example with selection sort:</p>\n\n<pre><code>clientDetails * sortByPort(clientDetails *pClients, size_t len)\n{\n   size_t i, k;\n\n   for (i = 0; i &lt; len - 1; ++i) {\n      size_t k = i;\n\n      for (j = i + 1; j &lt; len; ++j) {\n         if (atoi(pClients[j].port) &lt; atoi(pClients[k].port)) {\n            k = j;\n         }\n      }\n\n      clientDetails *tmp = pClients[k];\n      pClients[k] = pClients[i];\n      pClients[i] = tmp;\n   }\n\n   return pClients;\n}\n</code></pre>\n\n<p>You can use <code>strtol</code> instead of <code>atoi</code> if the port is greater than an <code>int</code> value.</p>\n"}], "owner": {"reputation": 83, "user_id": 8624614, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6cc2e1a8f9306dd8caeaefcf9dafd777?s=128&d=identicon&r=PG&f=1", "display_name": "Manic", "link": "https://stackoverflow.com/users/8624614/manic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507707838, "creation_date": 1507705301, "question_id": 46681784, "link": "https://stackoverflow.com/questions/46681784/sorting-an-array-of-pointers-to-a-struct-on-the-basis-of-a-struct-member-best", "title": "Sorting an array of pointers to a struct on the basis of a struct member - best possible option?", "body": "<p>I have the following struct: </p>\n\n<pre><code>typedef struct details clientDetails;\nstruct details \n{\n    int socket;  \n    char* port;\n    char* IP;\n    char* hostName;\n    int msgSentCount;\n    int msgRecvCount;\n    char* status;\n    char* bufferMsg;\n    char* blockedUser[4];\n    int blockedCount;   \n};\n</code></pre>\n\n<p>And I have the following array of pointers to the struct:</p>\n\n<p><code>clientDetails* allClients[4];</code></p>\n\n<p>What would be the best possible way to keep the array sorted by the <code>port</code> number of the struct? </p>\n\n<p>The implementation required would be as follows:</p>\n\n<p><code>sortByPort(allClients)</code> -> passes a reference to the array and sorts it so that if I print the values of <code>allClients</code> after this function call, I will have it sorted by the <code>port</code> number.</p>\n"}, {"tags": ["c", "gcc", "assembly", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 4005, "user_id": 255577, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e18fc45b59d3fcdef1f75e41f8edf1e?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/255577/marc"}, "edited": false, "score": 0, "creation_date": 1507705747, "post_id": 46681794, "comment_id": 80311535, "body": "So does this mean that the compiler has to treat <code>extern void f(const int *)</code> and <code>extern void f(int *)</code> exactly the same?"}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "reply_to_user": {"reputation": 4005, "user_id": 255577, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e18fc45b59d3fcdef1f75e41f8edf1e?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/255577/marc"}, "edited": false, "score": 2, "creation_date": 1507706219, "post_id": 46681794, "comment_id": 80311809, "body": "Yes. It makes a difference inside the function, though, because the declaration has to match, and the first function can&#39;t write through the pointer without a cast."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1507706528, "post_id": 46681794, "comment_id": 80312004, "body": "This is only because there is no function body. If the body is unknown compiles has to treat as side effects prone"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4005, "user_id": 255577, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e18fc45b59d3fcdef1f75e41f8edf1e?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/255577/marc"}, "edited": false, "score": 4, "creation_date": 1507707629, "post_id": 46681794, "comment_id": 80312621, "body": "@Marc: Yes, they&#39;re <i>exactly</i> the same as far as ABI / calling convention.  The only difference is compile-time checking that you don&#39;t directly modify the pointed-to object through the pointer-to-<code>const *</code>.  Fun fact: <code>foo(const big_object by_value)</code> still &quot;owns&quot; the stack memory that the object was copied to, in the x86-64 and i386 System V ABIs.  So it can use that stack space as scratch, and the caller has to assume it&#39;s clobbered and re-copy it to make another function call with the same object as the argument.  (So the ABI doesn&#39;t care about passing a <code>const</code> object either.)"}], "tags": [], "owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "is_accepted": true, "score": 4, "last_activity_date": 1507706071, "last_edit_date": 1507706071, "creation_date": 1507705340, "answer_id": 46681794, "question_id": 46681609, "link": "https://stackoverflow.com/questions/46681609/c-optimization-why-does-the-compiler-treat-an-object-not-as-constant/46681794#46681794", "title": "C optimization: Why does the compiler treat an object not as constant?", "body": "<p>It is not undefined behavior to cast a pointer to const to a pointer to non-const and modify the referenced object, as long as the referenced object is not declared const.</p>\n\n<p>6.7.3p6 says: \"If an attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type, the behavior is undefined.\"</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1507707713, "post_id": 46682426, "comment_id": 80312672, "body": "What is this trying to demonstrate?  <code>g</code> reloads <code>i</code> after the call, and there&#39;s no const anywhere."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": -2, "last_activity_date": 1507707360, "creation_date": 1507707360, "answer_id": 46682426, "question_id": 46681609, "link": "https://stackoverflow.com/questions/46681609/c-optimization-why-does-the-compiler-treat-an-object-not-as-constant/46682426#46682426", "title": "C optimization: Why does the compiler treat an object not as constant?", "body": "<p>Changes the situation. Body is known. No special actions are required. </p>\n\n<pre><code>static int i = 1;\n\n__attribute__((noinline)) void f (int *i)\n{\n    *i *=2;\n}\n\nint g (void)\n{\n  f (&amp;i);\n  return i;\n}\n\n\nf:\n  sal DWORD PTR [rdi]\n  ret\ng:\n  mov edi, OFFSET FLAT:i\n  call f\n  mov eax, DWORD PTR i[rip]\n  ret\ni:\n</code></pre>\n"}], "owner": {"reputation": 4005, "user_id": 255577, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5e18fc45b59d3fcdef1f75e41f8edf1e?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/255577/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 46681794, "answer_count": 2, "score": 5, "last_activity_date": 1507707360, "creation_date": 1507704669, "last_edit_date": 1507705706, "question_id": 46681609, "link": "https://stackoverflow.com/questions/46681609/c-optimization-why-does-the-compiler-treat-an-object-not-as-constant", "title": "C optimization: Why does the compiler treat an object not as constant?", "body": "<p>Compiling the following C module</p>\n\n<pre><code>static const int i = 1;\n\nvoid f (const int *i);\n\nint g (void)\n{\n  f (&amp;i);\n  return i;\n}\n</code></pre>\n\n<p>using <code>gcc -S -O3</code> on an x86_64 maching yields the following assembly for the function <code>g</code>:</p>\n\n<pre><code>g:\n        leaq    i(%rip), %rdi\n        subq    $8, %rsp\n        call    f@PLT\n        movl    $1, %eax           # inlined constant as an immediate\n        addq    $8, %rsp\n        ret\n</code></pre>\n\n<p>In other words, the <code>return</code> statement is compiled to moving the constant <code>$1</code> into the return register <code>%eax</code>, which makes sense because <code>i</code> is declared constant.</p>\n\n<hr>\n\n<p>However, if I remove that <code>const</code> so that I have</p>\n\n<pre><code>static int i = 1;\n\nvoid f (const int *i);\n\nint g (void)\n{\n  f (&amp;i);\n  return i;\n}\n</code></pre>\n\n<p>the output of <code>gcc -S -O3</code> suddenly becomes:</p>\n\n<pre><code>g:\n        leaq    i(%rip), %rdi\n        subq    $8, %rsp\n        call    f@PLT\n        movl    i(%rip), %eax     # reload i\n        addq    $8, %rsp\n        ret\n</code></pre>\n\n<p>That is, the return value is explicitly loaded from memory after the call to <code>f</code>.</p>\n\n<p>Why is this so? The argument to <code>f</code> is declared to be a pointer to a constant int, so <code>f</code> should not be allowed to alter <code>i</code>. Furthermore, <code>f</code> cannot call a function that modifies <code>i</code> through a non-const reference because the only such function could be <code>g</code> as <code>i</code> is declared static.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1507704066, "post_id": 46681328, "comment_id": 80310537, "body": "SO is for specific problems, is there something specific wrong with the program run off your code?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507704655, "post_id": 46681328, "comment_id": 80310890, "body": "Why are <code>balance</code> and <code>sum</code> declared globally? Declare them in <code>main()</code> and pass them as parameters to the functions as required. Globals should generally be avoided to prevent name collisions, etc., unless absolutely required (they are not required here)"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1507704802, "post_id": 46681328, "comment_id": 80310978, "body": "I suggest reading <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> carefully."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1507704345, "post_id": 46681462, "comment_id": 80310694, "body": "Both <code>balance</code> and <code>sum</code> are global variables at file scope and therefore implicitly initialised to zero."}, {"owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1507704417, "post_id": 46681462, "comment_id": 80310735, "body": "It&#39;s been many years since I used C and did kind of remember that.  I know if it&#39;s <code>static</code> that&#39;s the case but wasn&#39;t sure for non-static.  Still bad practice to not do it."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1507704680, "post_id": 46681462, "comment_id": 80310901, "body": "It&#39;s also a bit mean to start the player off broke, so maybe it would be good practice to give them at least something.  <code>:)</code>"}, {"owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1507704755, "post_id": 46681462, "comment_id": 80310952, "body": "@MOehm Hahahaa.  I didn&#39;t even notice that in all the fun!"}], "tags": [], "owner": {"reputation": 5219, "user_id": 1166774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2186f597c73ae03edf7912fa5ec93cc7?s=128&d=identicon&r=PG&f=1", "display_name": "LoztInSpace", "link": "https://stackoverflow.com/users/1166774/loztinspace"}, "is_accepted": false, "score": 1, "last_activity_date": 1507704158, "creation_date": 1507704158, "answer_id": 46681462, "question_id": 46681328, "link": "https://stackoverflow.com/questions/46681328/need-help-for-a-c-program-dice-game-based-on-betting/46681462#46681462", "title": "Need help for a C Program Dice game based on betting", "body": "<p>Lots wrong here.</p>\n\n<p><code>balance</code> and <code>sum</code> are not initialised to zero</p>\n\n<pre><code>int Ask_User_for_Bet(int *b)\n{\n    printf(\"Enter bet amount\");\n    scanf(\"%d\", b);\n// Or don't pass b, declare locally, pass &amp;b then return\n    }\n</code></pre>\n\n<p>Where do you reduce the balance?</p>\n\n<p><code>roll_dice</code> does not return both dice.  Also, rand() will give you the same sequence each time.</p>\n\n<p>You don't show the outcome!</p>\n\n<p>Code-wise there's a few things I'd change</p>\n\n<p>Use braces even for single statements.</p>\n\n<p>Get rid of global vars <code>balance</code> &amp; <code>sum</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8756916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OvbDVqeweMo/AAAAAAAAAAI/AAAAAAAACnk/Ze2cFR3aUwI/photo.jpg?sz=128", "display_name": "Sean John", "link": "https://stackoverflow.com/users/8756916/sean-john"}, "edited": false, "score": 0, "creation_date": 1507705416, "post_id": 46681465, "comment_id": 80311342, "body": "Hey! I fixed some of the stuff you pointed out but I&#39;m still getting process returned 0."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 1, "user_id": 8756916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OvbDVqeweMo/AAAAAAAAAAI/AAAAAAAACnk/Ze2cFR3aUwI/photo.jpg?sz=128", "display_name": "Sean John", "link": "https://stackoverflow.com/users/8756916/sean-john"}, "edited": false, "score": 0, "creation_date": 1507706340, "post_id": 46681465, "comment_id": 80311883, "body": "Switch on warnings and learn to debug your code.There&#39;s much more wrong with your code. For example,<code>scanf</code> requires a pointer to <code>int</code> with <code>%d</code>, but you provide just an <code>int</code>. That leads to undefined behaviour, most likely a crash."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 1, "last_activity_date": 1507704177, "creation_date": 1507704177, "answer_id": 46681465, "question_id": 46681328, "link": "https://stackoverflow.com/questions/46681328/need-help-for-a-c-program-dice-game-based-on-betting/46681465#46681465", "title": "Need help for a C Program Dice game based on betting", "body": "<p>Here:</p>\n\n<pre><code>while(balance&gt;0){\n    int Ask_User_for_Bet(int b);\n    int rollDice();\n    int Win_or_Lose();\n}\n</code></pre>\n\n<p>the loop body is actually empty, because you haven't placed any statements, but prototype declarations. This, for example:</p>\n\n<pre><code>    int Ask_User_for_Bet(int b);\n</code></pre>\n\n<p>just tells the compiler that there is a function <code>Ask_User_for_Bet</code> that takes an <code>int</code> and that returns an <code>int</code>. This is equivalent (and redundant with)  the same declarations made further above.</p>\n\n<p>You want to call the functons instead, so:</p>\n\n<pre><code>while(balance&gt;0){\n    Ask_User_for_Bet(balance);\n    rollDice();\n    Win_or_Lose();\n}\n</code></pre>\n\n<p>The call doesn't include any type information and just passed the desired arguments.</p>\n\n<p>(Note that you will set <code>sum</code> to something else than the return value in <code>rollDice()</code>&ndash; you roll the die twice, when you want to roll it only once. And rolling a twelve-sided die once isn't the ame as rolling two six-sided dice. You will also have to check whether the balance can hold the bet and you have to do to balance, so that the while condition will become false at some time.)</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 7757123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X3c5o.jpg?s=128&g=1", "display_name": "Chatz", "link": "https://stackoverflow.com/users/7757123/chatz"}, "is_accepted": false, "score": 0, "last_activity_date": 1507708192, "last_edit_date": 1507708192, "creation_date": 1507706930, "answer_id": 46682292, "question_id": 46681328, "link": "https://stackoverflow.com/questions/46681328/need-help-for-a-c-program-dice-game-based-on-betting/46682292#46682292", "title": "Need help for a C Program Dice game based on betting", "body": "<p>As posted by others before there are many mistakes in your code. Instead of pointing them, I wrote some example code you can use (i tested it, it works) for your problem. You can study it and see where you have been wrong. For example your scanf's are no written correctly, they need a &amp; operator, the rand will give you the same sequence each time, it needs a seed at start.  Here is how you should use it in your main before running rand:</p>\n\n<pre><code> int seed = time(NULL);\n srand(seed);\n</code></pre>\n\n<p>below is the code</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n\nint Ask_User_for_Balance(void);\nint Ask_User_for_Bet(int balance_copy);\nint rollDice(void);\n\n\nint main(void){\n\n    int balance=5; //something more than 0 (not necessary as you input the value later)\n    int bet=0;\n    int sum=0;  //the roll dice result\n\n    //seed for random function\n    int seed = time(NULL);\n    srand(seed);\n\n// enter balance    \n    balance= Ask_User_for_Balance();\n\n// main game loop\n\n    while(balance&gt;0){       \n        bet= Ask_User_for_Bet(balance);\n        sum= rollDice();\n        printf (\"dice roll is: %d\\n\", sum);\n\n        //win or lose implementation\n        if (sum==7 || sum==11){\n            balance= balance + (bet*3);\n             printf(\"You won! Current balance: %d \\n \",balance);\n        }\n        else{\n            balance=balance - bet;\n            printf(\"You lost! Current balance: %d \\n \",balance);\n\n        }\n    } // close while\n\n    printf(\"Game Over...\\n\");\n\n    return 0;\n}\n\n\nint Ask_User_for_Balance(void){\n\n    int balance_temp;\n    printf(\"Enter Balance\\n\");\n    scanf(\"%d\", &amp;balance_temp);\n\n    return balance_temp;\n\n}\n\nint Ask_User_for_Bet(int balance_copy){\n    int bet_temp=0;\n\n    //do not let the player bet more than his balance\n    do{\n        printf(\"Enter bet amount\\n\");\n        scanf(\"%d\", &amp;bet_temp);\n        if(bet_temp&gt;balance_copy){\n            printf(\"Please bet less than your balance\\n\");\n        }\n    }while (bet_temp&gt;balance_copy);\n\n    return bet_temp;\n}\n\n\nint rollDice(void) {\n    int sum_temp;\n    sum_temp=((rand() % 12) + 1);\n    return sum_temp;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507708814, "last_edit_date": 1507708814, "creation_date": 1507708016, "answer_id": 46682626, "question_id": 46681328, "link": "https://stackoverflow.com/questions/46681328/need-help-for-a-c-program-dice-game-based-on-betting/46682626#46682626", "title": "Need help for a C Program Dice game based on betting", "body": "<p>You have a large number of both logic and syntax errors in your code. Always compile with <em>compiler warnings enabled</em> (by adding <code>-Wall -Wextra</code> to your <code>gcc</code> compile string, or by adding <code>/W3</code> to your <code>cl.exe</code> (VS) compile string).</p>\n\n<p>Read and fix all warnings. Never accept code until it compiles cleanly, without any warning.</p>\n\n<p>Validate ALL <em>user input</em> by checking the <strong>return</strong> of <code>scanf</code> (or any input function for that matter). You can further validate that any input received falls within the range of expected values.</p>\n\n<p>Order your code so that your functions logically work together, and make use of the function returns. Do not declare global variables when they can be passed as parameters.</p>\n\n<p>Putting that altogether, you could tweak your code similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint get_user_bet (void);\nint dice_roll (void);\nint win_or_lose (int roll, int bet);\n\nint main (void)\n{\n    int balance = 0, previous = 0, bet = 0, roll = 0, ch = 0;\n    char c = 0;\n\n    printf (\"enter opening balance: $\");\n    if (scanf (\"%d\", &amp;balance) != 1) {\n        fprintf (stderr, \"error: invalid input - balance.\\n\");\n        return 1;\n    }\n\n    if (balance &lt;= 0) {\n        fprintf (stderr, \"error: balance 0 or negative.\\n\");\n        return 1;\n    }\n\n    while (c != 'n' &amp;&amp; c != 'N' &amp;&amp; balance &gt; 0) {\n        previous = balance;     /* save starting balance as previous */\n        bet = get_user_bet();   /* get user bet */\n\n        balance -= bet;         /* subtract from balance (at risk) */\n        roll = dice_roll();     /* roll the dice */\n        balance += win_or_lose (roll, bet); /* update bal. with win */\n\n        printf (\"bal. before: %d  bal. after: %d\\n\", previous, balance);\n        if (balance &gt; previous)\n            printf (\"\\nYou won! Play again? \"); /* display win */\n        else\n            printf (\"\\nYou lost Play again? \"); /* display loss */\n\n        if (scanf (\" %c\", &amp;c) != 1) {   /* get answer to play again */\n            fprintf (stderr, \"error: user canceled.\\n\");\n            break;\n        }\n        /* note you should clear any remaining chars from stdin here */\n        for (ch = getchar(); ch != '\\n' &amp;&amp; ch != EOF; ch = getchar()) {}\n    }\n\n    return 0;\n}\n\nint get_user_bet()\n{\n    int b = 0;\n\n    printf (\"Enter bet amount: \");\n    if (scanf (\"%d\", &amp;b) != 1)\n        return 0;\n\n    return b;\n}\n\nint dice_roll (void)\n{\n    return rand() % 12 + 1;\n}\n\nint win_or_lose (int roll, int bet)\n{\n    printf (\"roll was: %d\\n\", roll);\n\n    if (roll == 7 || roll == 11)\n        return bet + 3 * bet;\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ &gt;bin\\diceroll.exe\nenter opening balance: $30\nEnter bet amount: 10\nroll was: 6\nbal. before: 30  bal. after: 20\n\nYou lost Play again? y\nEnter bet amount: 10\nroll was: 12\nbal. before: 20  bal. after: 10\n\nYou lost Play again? y\nEnter bet amount: 10\nroll was: 11\nbal. before: 10  bal. after: 40\n\nYou won! Play again? y\nEnter bet amount: 10\nroll was: 5\nbal. before: 40  bal. after: 30\n\nYou lost Play again? n\n</code></pre>\n\n<p>Look things over and let me know if you have any additional questions I can help you with. </p>\n"}], "owner": {"reputation": 1, "user_id": 8756916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OvbDVqeweMo/AAAAAAAAAAI/AAAAAAAACnk/Ze2cFR3aUwI/photo.jpg?sz=128", "display_name": "Sean John", "link": "https://stackoverflow.com/users/8756916/sean-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1507708814, "creation_date": 1507703735, "question_id": 46681328, "link": "https://stackoverflow.com/questions/46681328/need-help-for-a-c-program-dice-game-based-on-betting", "title": "Need help for a C Program Dice game based on betting", "body": "<p>so I have to write a complete program to ask user to input amount and store it in the variable name balance, then ask user for the bet amount. If the amount is less than or equals balance amount, then roll dice. If the sum roll is 7 or 11, the player wins three times the bet. Otherwise, the player loses the bet.\nPlayer should be able to bet as long as he/she has money in balance.</p>\n\n<p>I don't really get what else to do from here (from the code posted below) so please help me fix it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint balance;\nint sum;\n\nint Ask_User_for_Bet(int b);\nint Dice_Roll(void);\nint Win_or_Lose();\n\nint main()\n{\n    while(balance&gt;0){\n        int Ask_User_for_Bet(int b);\n        int rollDice();\n        int Win_or_Lose();\n    }\n\n    return 0;\n}\n\n\nint Ask_User_for_Bet(int b)\n{\n    printf(\"Enter bet amount\");\n    scanf(\"%d\", b);\n}\n\nint rollDice(void) {\n    sum=((rand() % 12) + 1);\n    return ((rand() % 12) + 1);\n}\n\nint Win_or_Lose(){\n    if(sum==7 || sum==11)\n            printf(\"You won! Play again?\");\n    else\n        printf(\"You lost! Play again?\");\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "io", "binary"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1507703259, "post_id": 46681192, "comment_id": 80310133, "body": "<i>Questions seeking debugging help (why isn&#39;t this code working?) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.</i>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1507703327, "post_id": 46681192, "comment_id": 80310170, "body": "Did you notice you never used <code>printThisFile()</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507703415, "post_id": 46681192, "comment_id": 80310209, "body": "Where&#39;s your error checking? What if not enough arguments are passed to the program? What if the program fails to open the file? What if you fail to read?"}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 0, "creation_date": 1507703505, "post_id": 46681192, "comment_id": 80310245, "body": "What are the differences between the two systems? What is your input?"}, {"owner": {"reputation": 1, "user_id": 4590481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-5cyngM2ZjeM/AAAAAAAAAAI/AAAAAAAAC7Y/K5ZvO7eT4j8/photo.jpg?sz=128", "display_name": "sam whittle", "link": "https://stackoverflow.com/users/4590481/sam-whittle"}, "edited": false, "score": 0, "creation_date": 1507703525, "post_id": 46681192, "comment_id": 80310254, "body": "I have been using c for a solid 3 days, I have no idea what i&#39;m doing"}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 0, "creation_date": 1507703532, "post_id": 46681192, "comment_id": 80310259, "body": "And if it also happens with simpler programs, why not post those?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507703565, "post_id": 46681192, "comment_id": 80310273, "body": "Furthermore <code>structArray[...].f_name = tempHW5struct.f_name</code> is wrong. It will make <i>all</i> <code>f_name</code> pointer point to the very same <code>tempHW5struct.f_name</code>."}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 0, "creation_date": 1507703572, "post_id": 46681192, "comment_id": 80310276, "body": "&quot;I have been using c for a solid 3 days, I have no idea what i&#39;m doing&quot;, then please stop asking complex questions here and learn C first. There are many online and offline resources for that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507703773, "post_id": 46681192, "comment_id": 80310360, "body": "If you&#39;re that new you&#39;re way in over your head I&#39;d say! Take a few steps back, <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">get a couple of good beginners books</a> and <i>start over</i>."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1507703886, "post_id": 46681192, "comment_id": 80310416, "body": "Have a look at the following: <a href=\"https://stackoverflow.com/questions/34715726/why-struct-alignment-different-in-ios\">Why struct alignment different in iOS</a>"}, {"owner": {"reputation": 1, "user_id": 4590481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-5cyngM2ZjeM/AAAAAAAAAAI/AAAAAAAAC7Y/K5ZvO7eT4j8/photo.jpg?sz=128", "display_name": "sam whittle", "link": "https://stackoverflow.com/users/4590481/sam-whittle"}, "edited": false, "score": 0, "creation_date": 1507703896, "post_id": 46681192, "comment_id": 80310423, "body": "this is my programming homework  guys, like, i&#39;m a couple days into a class that is supposed to teach me c and this is the homework, my teacher hasn&#39;t gone over any of this and i&#39;m just desperately trying to understand."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1507704268, "post_id": 46681192, "comment_id": 80310646, "body": "Basically, as far as the homework is concerned, <b>do not read a binary file cross-platform</b>, instead connect to the official server for all your development activities. Cross-platform differences are nothing to be approached on the first homework"}, {"owner": {"reputation": 1, "user_id": 4590481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-5cyngM2ZjeM/AAAAAAAAAAI/AAAAAAAAC7Y/K5ZvO7eT4j8/photo.jpg?sz=128", "display_name": "sam whittle", "link": "https://stackoverflow.com/users/4590481/sam-whittle"}, "edited": false, "score": 0, "creation_date": 1507704729, "post_id": 46681192, "comment_id": 80310936, "body": "Alright I will keep that in mind, thank you."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1507715393, "post_id": 46681192, "comment_id": 80317743, "body": "You shouldn&#39;t need any of those <code>fseek</code> calls - the position within the file gets updated when you read/write from/to the file."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4590481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-5cyngM2ZjeM/AAAAAAAAAAI/AAAAAAAAC7Y/K5ZvO7eT4j8/photo.jpg?sz=128", "display_name": "sam whittle", "link": "https://stackoverflow.com/users/4590481/sam-whittle"}, "edited": false, "score": 0, "creation_date": 1507704562, "post_id": 46681292, "comment_id": 80310831, "body": "So first off thank you, It prints the file correctly now, it assigns the variables into the array correctly, you fixed it! I am very new so i really just don&#39;t understand pointers/arrays well enough."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1507703813, "last_edit_date": 1507703813, "creation_date": 1507703621, "answer_id": 46681292, "question_id": 46681192, "link": "https://stackoverflow.com/questions/46681192/my-c-program-prints-two-different-things-when-it-shouldnt/46681292#46681292", "title": "My C program prints two different things when it shouldn&#39;t", "body": "<p>You never allocate memory for <code>structArray</code>, or make it point anywhere valid. It is <em>uninitialized</em> and will point to an <em>indeterminate</em> (and seemingly random) location.</p>\n\n<p>Then when you dereference it to write to some seemingly random location you will have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>Since you program in C you could use <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\"><em>variable-length arrays</em></a> like</p>\n\n<pre><code>HW5_struct_updated structArray[originalDataFileSize  / sizeof(HW5_struct)];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4590481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-5cyngM2ZjeM/AAAAAAAAAAI/AAAAAAAAC7Y/K5ZvO7eT4j8/photo.jpg?sz=128", "display_name": "sam whittle", "link": "https://stackoverflow.com/users/4590481/sam-whittle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1507713230, "creation_date": 1507703229, "last_edit_date": 1507713230, "question_id": 46681192, "link": "https://stackoverflow.com/questions/46681192/my-c-program-prints-two-different-things-when-it-shouldnt", "title": "My C program prints two different things when it shouldn&#39;t", "body": "<p>It prints one thing if its run on my computer, and a second thing if its ran on any other computer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct hw5_struct {\n    char f_name[12];\n    char l_name[12];\n    int age;\n    float height;\n}HW5_struct;\n\ntypedef struct hw5_struct_updated {\n    char *f_name;\n    char *l_name;\n    char *address;\n    int age;\n    int birthday;\n    float height;\n}HW5_struct_updated;\n\nvoid printThisFile( FILE *file, int fileSize );\nvoid putNewStructuresInFile( FILE *newFile, int matchingFileSize );\n\nint main( int argc, char *argv[] ) {\n\n    printf(\"\\n\");\n\n    const char *fileLocation = argv[1];\n\n    FILE *originalData = fopen( fileLocation, \"rb\" );\n\n    fseek( originalData, 0L, SEEK_END );\n    int originalDataFileSize = ftell( originalData );\n    rewind( originalData );\n    printf( \"The size of the original file is: %d\\n\", originalDataFileSize );\n\n    HW5_struct_updated *structArray;\n\n    printf(\"test\\n\");\n\n    int i = 0;\n    HW5_struct tempHW5struct;\n\n    for( i = 0 ; i &lt; originalDataFileSize ; i += sizeof( HW5_struct ) ) { \n        fseek( originalData, i, SEEK_SET );\n        fread( &amp;tempHW5struct, sizeof( HW5_struct ), 1, originalData);\n        printf( \"f_name: %s\\nl_name: %s\\nage: %d\\nheight: %f\\n\\n\", tempHW5struct.f_name, tempHW5struct.l_name, tempHW5struct.age, tempHW5struct.height );\n        printf(\"test\\n\");\n        structArray[ i / sizeof( HW5_struct ) ].f_name = tempHW5struct.f_name;\n\n        //strcpy( structArray[ i / sizeof( HW5_struct ) ].f_name, tempHW5struct.f_name );\n\n        printf(\"%s\\n\", structArray[ i / sizeof( HW5_struct ) ].f_name);\n        //structArray[ i / sizeof( HW5_struct ) ].l_name = tempHW5struct.l_name;\n        structArray[ i / sizeof( HW5_struct ) ].age = tempHW5struct.age;\n        structArray[ i / sizeof( HW5_struct ) ].height = tempHW5struct.height;\n        structArray[ i / sizeof( HW5_struct ) ].birthday = 1;\n        //structArray[ i / sizeof( HW5_struct ) ].address = \"8008 Mulberry Ln\";\n        printf(\"structure #%d\\n was read\", ( i / sizeof( HW5_struct ) ) );\n    }   \n\n    FILE *newData = fopen( \"my_temp.tmp\", \"wb\");\n\n    for( i = 0 ; i &lt; originalDataFileSize ; i += sizeof( HW5_struct ) ) { \n        fseek( originalData, i, SEEK_SET );\n        fread( &amp;tempHW5struct, sizeof( HW5_struct ), 1, originalData );\n        printf( \"f_name: %s\\nl_name: %s\\nage: %d\\nheight: %f\\n\\n\", tempHW5struct.f_name, tempHW5struct.l_name, tempHW5struct.age, tempHW5struct.height );\n    }\n\n    HW5_struct_updated tempHW5structUpdated;\n\n    for( i = 0; i &lt; originalDataFileSize ; i += sizeof( HW5_struct ) ) {\n        fseek(newData, i * sizeof( HW5_struct_updated ), SEEK_SET);\n        fwrite( &amp;tempHW5structUpdated, sizeof( HW5_struct_updated ), 1, newData);\n    }\n\n    return 0;\n}\n\nvoid printThisFile( FILE *file, int fileSize) {\n    int i = 0;\n    HW5_struct tempStruct;\n\n    for( i = 0 ; i &lt; fileSize ; i += sizeof( HW5_struct ) ) {\n        fseek( file, i, SEEK_SET );\n        fread( &amp;tempStruct, sizeof( HW5_struct ), 1, file);\n        printf( \"f_name: %s\\nl_name: %s\\nage: %d\\nheight: %f\\n\\n\", tempStruct.f_name, tempStruct.l_name, tempStruct.age, tempStruct.height );\n    }\n}\n</code></pre>\n\n<p>this is on a server so each person connects to the server, has the same .c file, compiles and runs it.</p>\n\n<p>when I run it I get </p>\n\n<pre><code>The size of the original file is: 320\ntest\nf_name: Fred\nl_name: Hutcheson\nage: 32\nheight: 6.000000\n\ntest\nSegmentation fault\n</code></pre>\n\n<p>when I run it on my phone or when my friend runs it we get:</p>\n\n<pre><code>The size of the original file is: 320\ntest\nf_name: Fred\nl_name: cheson\nage: 1920098636\nheight: 0.000000\n\ntest\nSegmentation fault\n</code></pre>\n\n<p>It is like this with other programs that do simpler things as well, like a program that just <code>prints(\"Hello World\\n\")</code> will literally do nothing when I run it and will print normally on every other computer, no idea what's going on.</p>\n"}, {"tags": ["c++", "c", "dll"], "answers": [{"comments": [{"owner": {"reputation": 1817, "user_id": 2162131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ce2509d1341df87fa09fa0e6fcb54b?s=128&d=identicon&r=PG", "display_name": "Donald Jansen", "link": "https://stackoverflow.com/users/2162131/donald-jansen"}, "edited": false, "score": 0, "creation_date": 1507706199, "post_id": 46681311, "comment_id": 80311798, "body": "I did not recieve a .lib with the sample code, I am going to try and see if I can linkink it explicity, I know that the .so is not the file I must use, it is the .dll I am trying to use but I recieved both"}, {"owner": {"reputation": 1817, "user_id": 2162131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ce2509d1341df87fa09fa0e6fcb54b?s=128&d=identicon&r=PG", "display_name": "Donald Jansen", "link": "https://stackoverflow.com/users/2162131/donald-jansen"}, "edited": false, "score": 0, "creation_date": 1507721698, "post_id": 46681311, "comment_id": 80321797, "body": "Explicitly linking seems to be working, heck a pain in the ass but I am getting somewhere"}], "tags": [], "owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "is_accepted": true, "score": 1, "last_activity_date": 1507703682, "creation_date": 1507703682, "answer_id": 46681311, "question_id": 46681074, "link": "https://stackoverflow.com/questions/46681074/vs2015-linking-dll-so-in-c/46681311#46681311", "title": "VS2015 Linking .dll/.so in C++", "body": "<p>If you are <strong>implicitly</strong> linking the dll, then you must have also received a .lib file which you need to link with your console application. This should remove the unresolved symbol warning. The operating system loads the DLL when the executable using it is loaded. </p>\n\n<p>If you are <strong>explicitly</strong> linking the dll, then your code should explictly load and unload the DLL to access the exported functions. </p>\n\n<p>The .so you mention probably is a linux shared object file and not useful on windows platform. I may be wrong though.</p>\n"}], "owner": {"reputation": 1817, "user_id": 2162131, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/26ce2509d1341df87fa09fa0e6fcb54b?s=128&d=identicon&r=PG", "display_name": "Donald Jansen", "link": "https://stackoverflow.com/users/2162131/donald-jansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 46681311, "answer_count": 1, "score": 0, "last_activity_date": 1507703682, "creation_date": 1507702806, "question_id": 46681074, "link": "https://stackoverflow.com/questions/46681074/vs2015-linking-dll-so-in-c", "title": "VS2015 Linking .dll/.so in C++", "body": "<p>I have the following files (<a href=\"https://www.dropbox.com/s/2bfhylzb2evrggp/Lib.rar?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/2bfhylzb2evrggp/Lib.rar?dl=0</a>)</p>\n\n<p>It contains the header file, .so and .dll file.</p>\n\n<p>I added the aditional paths under C/C++ and Linker (to the dll.s and .h files)\nI have also used the sample code in the rar file and VS2015 picks up the code</p>\n\n<h1>include \"swi32.h\"</h1>\n\n<p>But as soon as I try to use a method defined in the headerfile I get the following</p>\n\n<p><code>Severity   Code    Description Project File    Line    Suppression State\nError   LNK1120 1 unresolved externals  ConsoleApplication1 C:\\Users\\Donald Jansen\\Desktop\\CPPTest\\Swi32Test\\ConsoleApplication1\\Debug\\ConsoleApplication1.exe  1<br>\nError   LNK2019 unresolved external symbol _WiCreateRawImage@0 referenced in function _main ConsoleApplication1 C:\\Users\\Donald Jansen\\Desktop\\CPPTest\\Swi32Test\\ConsoleApplication1\\Console.obj    1\n</code></p>\n\n<p>I am not sure what I am missing</p>\n"}, {"tags": ["c", "graph", "scanf"], "comments": [{"owner": {"reputation": 3837, "user_id": 5312929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/xDxHw.jpg?s=128&g=1", "display_name": "Nilabja", "link": "https://stackoverflow.com/users/5312929/nilabja"}, "edited": false, "score": 0, "creation_date": 1507703055, "post_id": 46680987, "comment_id": 80310035, "body": "if your &quot;scanf&quot; is related to &#39;c&#39; language then please edit and add &quot;c&quot; tag"}], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 8551411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/436Tw.jpg?s=128&g=1", "display_name": "Emanuele Giona", "link": "https://stackoverflow.com/users/8551411/emanuele-giona"}, "edited": false, "score": 0, "creation_date": 1507720939, "post_id": 46686510, "comment_id": 80321281, "body": "If he doesn&#39;t know how many edges there are, this solution isn&#39;t better than looping. Instead it only accepts exactly 4 edges, exposing the execution to problems when there are less than 4 edges and ignoring the rest of them if there are more then 4"}, {"owner": {"reputation": 9, "user_id": 3667696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551fba3a5f5210fd0c836ac79a2af2e3?s=128&d=identicon&r=PG&f=1", "display_name": "mak2131", "link": "https://stackoverflow.com/users/3667696/mak2131"}, "reply_to_user": {"reputation": 9, "user_id": 5071381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a018aa89bb9582de24fc1e31e1b1c8e?s=128&d=identicon&r=PG&f=1", "display_name": "javier de la garza", "link": "https://stackoverflow.com/users/5071381/javier-de-la-garza"}, "edited": false, "score": 0, "creation_date": 1509018628, "post_id": 46686510, "comment_id": 80854041, "body": "@javierdelagarza I don&#39;t think so, if your number of edges are dynamic, you have loop for input."}], "tags": [], "owner": {"reputation": 9, "user_id": 3667696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551fba3a5f5210fd0c836ac79a2af2e3?s=128&d=identicon&r=PG&f=1", "display_name": "mak2131", "link": "https://stackoverflow.com/users/3667696/mak2131"}, "is_accepted": false, "score": -1, "last_activity_date": 1507719510, "creation_date": 1507719510, "answer_id": 46686510, "question_id": 46680987, "link": "https://stackoverflow.com/questions/46680987/scanf-to-read-this-string-1-7-1-3-7-4-3-5-and-construct-edge-list/46686510#46686510", "title": "Scanf to read this string &quot;[[1,7],[1,3],[7,4],[3,5]]&quot; and construct edge list", "body": "<p>Try like this,</p>\n\n<pre><code>int x[4],y[4];\n\nscanf(\"[[%d,%d],[%d,%d],[%d,%d],[%d,%d]]\",&amp;x[0],&amp;y[0],&amp;x[1],&amp;y[1],&amp;x[2],&amp;y[2],&amp;x[3],&amp;y[3]);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5071381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a018aa89bb9582de24fc1e31e1b1c8e?s=128&d=identicon&r=PG&f=1", "display_name": "javier de la garza", "link": "https://stackoverflow.com/users/5071381/javier-de-la-garza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507719510, "creation_date": 1507702367, "last_edit_date": 1507718611, "question_id": 46680987, "link": "https://stackoverflow.com/questions/46680987/scanf-to-read-this-string-1-7-1-3-7-4-3-5-and-construct-edge-list", "title": "Scanf to read this string &quot;[[1,7],[1,3],[7,4],[3,5]]&quot; and construct edge list", "body": "<p>How to use scanf to read this string \"[[1,7],[1,3],[7,4],[3,5]]\". In the problem description, these are supposed to be edges in a graph: 1-7, 1-3, 7-4, 3-5.</p>\n\n<p>I'm looking for a better way to construct an edge list than reading the string and then looping through every character.</p>\n\n<p>Much thanks</p>\n"}, {"tags": ["c", "weak-linking"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507701945, "post_id": 46680860, "comment_id": 80309551, "body": "Please only use the language-tag of the language you&#39;re actually programming in."}, {"owner": {"reputation": 241, "user_id": 4058889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Y5kH-VbJDf8/AAAAAAAAAAI/AAAAAAAAAfE/Y9vZARB1UAw/photo.jpg?sz=128", "display_name": "Mert Can Erg&#252;n", "link": "https://stackoverflow.com/users/4058889/mert-can-erg%c3%bcn"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507702185, "post_id": 46680860, "comment_id": 80309636, "body": "@Someprogrammerdude what do you mean? what&#39;s the correct way to tag a c/c++ question?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507702350, "post_id": 46680860, "comment_id": 80309694, "body": "If you program in C then use only the C tag. Don&#39;t use tags for multiple languages unless your problem is about comparison between them. Remember that C and C++ are two <i>very</i> different languages, with very different syntax (though some is shared) and widely different semantics. And as many will remind you, there is no such languages a &quot;C/C++&quot;. There&#39;s <i>either</i> C, <i>or</i> C++."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1507702650, "post_id": 46680860, "comment_id": 80309831, "body": "Why is this tagged with the <code>hyperlink</code> tag?"}, {"owner": {"reputation": 241, "user_id": 4058889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Y5kH-VbJDf8/AAAAAAAAAAI/AAAAAAAAAfE/Y9vZARB1UAw/photo.jpg?sz=128", "display_name": "Mert Can Erg&#252;n", "link": "https://stackoverflow.com/users/4058889/mert-can-erg%c3%bcn"}, "edited": false, "score": 0, "creation_date": 1507702687, "post_id": 46680860, "comment_id": 80309858, "body": "The question is about a C feature that is used by C++ too. Hence we are in the shared ground for this question. But I&#39;ll still remove the extra tag if that can bother people."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1507702898, "post_id": 46680860, "comment_id": 80309949, "body": "Try <code>objdump -h</code> on the object file. The weak symbols will be in its own section with the discard flag."}], "owner": {"reputation": 241, "user_id": 4058889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Y5kH-VbJDf8/AAAAAAAAAAI/AAAAAAAAAfE/Y9vZARB1UAw/photo.jpg?sz=128", "display_name": "Mert Can Erg&#252;n", "link": "https://stackoverflow.com/users/4058889/mert-can-erg%c3%bcn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507702718, "creation_date": 1507701691, "last_edit_date": 1507702718, "question_id": 46680860, "link": "https://stackoverflow.com/questions/46680860/how-to-see-which-functions-are-weak-linked-in-an-object", "title": "How to see which functions are weak-linked in an object?", "body": "<p>Is there a way to see/capture weakly linked functions in an object?</p>\n\n<p>I removed older library's linkage but since some are linked with weak-linkage, I can't capture all of the used functions.</p>\n"}, {"tags": ["c++", "c", "c-preprocessor", "c++14", "preprocessor-directive"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507701804, "post_id": 46680849, "comment_id": 80309507, "body": "If you program in C, then please only add the C tag (even if the problem might be applicable to both C and C++). Especially, don&#39;t add a version-specific language tag (like <code>c++14</code>) unless your question is about that specific version of the language."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507701900, "post_id": 46680849, "comment_id": 80309537, "body": "As for your problem, there are <i>many</i> open-source projects out there that have the same need, and which have solved it. Try looking around a little."}, {"owner": {"reputation": 39, "user_id": 8566858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RVlsiinV3E8/AAAAAAAAAAI/AAAAAAAAABQ/RDtAggLyu40/photo.jpg?sz=128", "display_name": "Sougata Laha", "link": "https://stackoverflow.com/users/8566858/sougata-laha"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507702253, "post_id": 46680849, "comment_id": 80309666, "body": "@Someprogrammerdude I found some solution but those are not for compile time checking. Please share the solution."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1507702442, "post_id": 46680849, "comment_id": 80309733, "body": "The way I would solve it would be to use my favorite search engine and look for existing solutions. Adding the word <code>preprocessor</code> or <code>compile time</code> is important if that&#39;s what you want. And reading the documentation of my compiler (it might already have macros for it)."}, {"owner": {"reputation": 39, "user_id": 8566858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RVlsiinV3E8/AAAAAAAAAAI/AAAAAAAAABQ/RDtAggLyu40/photo.jpg?sz=128", "display_name": "Sougata Laha", "link": "https://stackoverflow.com/users/8566858/sougata-laha"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507724430, "post_id": 46680849, "comment_id": 80323565, "body": "would you please share the solution here. It would be really helpful for me."}, {"owner": {"reputation": 1309, "user_id": 6583956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1", "display_name": "Sergey.quixoticaxis.Ivanov", "link": "https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"}, "edited": false, "score": 0, "creation_date": 1507914731, "post_id": 46680849, "comment_id": 80416390, "body": "Please, remove C++14 tag. You can do it at compile time and remove unnecessary code with <code>if constexpr</code> (C++17) without preprocessor usage in a portable way. And as mentioned most of the compilers do have a macro ready for you."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1507703892, "last_edit_date": 1507703892, "creation_date": 1507703528, "answer_id": 46681277, "question_id": 46680849, "link": "https://stackoverflow.com/questions/46680849/conditional-preprocessor-directive-to-determine-endianness-of-a-machine/46681277#46681277", "title": "Conditional Preprocessor Directive to determine Endianness of a machine", "body": "<p>I am not sure it is possible.  I was using CMake in Android NDK, and there was a CMake widget to perform this test.</p>\n\n<p>Unfortunately, it ran on the host (windows) computer, rather than understood the target (android) device.</p>\n\n<p>There needs to be a published mechanism (e.g. compiler provided value) for this to work correctly, and I am not aware of any such global values.</p>\n\n<p>Adding link to potential duplicate <a href=\"https://stackoverflow.com/questions/4239993/determining-endianness-at-compile-time\">SO : detect endianness</a>.  Some methods there look plausible.</p>\n"}], "owner": {"reputation": 39, "user_id": 8566858, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RVlsiinV3E8/AAAAAAAAAAI/AAAAAAAAABQ/RDtAggLyu40/photo.jpg?sz=128", "display_name": "Sougata Laha", "link": "https://stackoverflow.com/users/8566858/sougata-laha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "closed_date": 1507703828, "answer_count": 1, "score": 0, "last_activity_date": 1507707001, "creation_date": 1507701645, "last_edit_date": 1507707001, "question_id": 46680849, "link": "https://stackoverflow.com/questions/46680849/conditional-preprocessor-directive-to-determine-endianness-of-a-machine", "closed_reason": "Duplicate", "title": "Conditional Preprocessor Directive to determine Endianness of a machine", "body": "<p>We want to write endian-independent code in C using some preprocessor directive. Can we define a preprocessor directive which will help us to check endianness of the machine during compile time? We want something like below sample code. Any help would be appreciated.</p>\n\n<pre><code>#if(some conditions)\n#define LITTLE_ENDIAN 1\n#else\n#define LITTLE_ENDIAN 0\n#endif\n</code></pre>\n\n<p>I know there are several solutions but those are not fulfilling my requirement. I don't want to compile little endian specific code in a big endian machine and the vice versa. For example</p>\n\n<pre><code>#if LITTLE_ENDIAN\n\n line1..\n line2..\n line3..\n\n#else\n\n line4..\n line5..\n line6..\n\n#endif\n</code></pre>\n\n<p>In big endian machine I don't want to compile lines 1,2 and 3. Those three lines should be disabled.</p>\n"}, {"tags": ["c", "arrays", "matrix"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1507700352, "post_id": 46680577, "comment_id": 80309015, "body": "How about just a plain standard <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">variable-length array</a>? Like <code>double m1[n][n];</code>? And if other functions need to use the matrices, <i>pass them as arguments</i>?"}, {"owner": {"reputation": 445, "user_id": 7226732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u8mhr.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7226732/mohammad"}, "edited": false, "score": 1, "creation_date": 1507700777, "post_id": 46680577, "comment_id": 80309160, "body": "try to follow this link it may be u will get some clue[<a href=\"https://stackoverflow.com/questions/7839637/save-2d-dynamic-array-matrix-for-global-access-c]\" title=\"save 2d dynamic array matrix for global access c%5d\">stackoverflow.com/questions/7839637/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 4147714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100003863357064/picture?type=large", "display_name": "Daniel Hogan", "link": "https://stackoverflow.com/users/4147714/daniel-hogan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1507701030, "post_id": 46680577, "comment_id": 80309260, "body": "@Someprogrammerdude Afterwards I&#39;ll be reading the arrays with multiple threads. As far as I know I can&#39;t pass a struct with variable length arrays to threads. Thus, the problem of wanting them global."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507704776, "post_id": 46680577, "comment_id": 80310966, "body": "The correct solution is to not do spaghetti programming with global variables."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4147714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100003863357064/picture?type=large", "display_name": "Daniel Hogan", "link": "https://stackoverflow.com/users/4147714/daniel-hogan"}, "edited": false, "score": 0, "creation_date": 1507701753, "post_id": 46680826, "comment_id": 80309484, "body": "This is great! One last question, how would I properly free the allocated memory? Simply free(a), in this case?"}, {"owner": {"reputation": 901, "user_id": 5349104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b1f380c5e8ff9c2173b221122692f5?s=128&d=identicon&r=PG&f=1", "display_name": "SRIDHARAN", "link": "https://stackoverflow.com/users/5349104/sridharan"}, "reply_to_user": {"reputation": 71, "user_id": 4147714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100003863357064/picture?type=large", "display_name": "Daniel Hogan", "link": "https://stackoverflow.com/users/4147714/daniel-hogan"}, "edited": false, "score": 0, "creation_date": 1507701825, "post_id": 46680826, "comment_id": 80309513, "body": "No. you can&#39;t do that. Refer <a href=\"https://stackoverflow.com/questions/11015360/free-a-double-pointer\" title=\"free a double pointer\">stackoverflow.com/questions/11015360/free-a-double-pointer</a>&quot;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1507705751, "post_id": 46680826, "comment_id": 80311538, "body": "This is not a 2D array though, but a pointer-based lookup table. Cache access will be slow and this will cause heap fragmentation, needlessly. Unless the OP needs to change &quot;array&quot; dimensions individually, there is absolutely no reason to use this code. Why have slow access when you can have fast access? See <a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">Correctly allocating multi-dimensional arrays</a>. (But of course VLA is not an option either, when you do spaghetti programming with global variables.)"}, {"owner": {"reputation": 901, "user_id": 5349104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b1f380c5e8ff9c2173b221122692f5?s=128&d=identicon&r=PG&f=1", "display_name": "SRIDHARAN", "link": "https://stackoverflow.com/users/5349104/sridharan"}, "edited": false, "score": 0, "creation_date": 1507717215, "post_id": 46680826, "comment_id": 80318973, "body": "I have few doubts what is OP(output I guess) and VLA? ( I am trying to learn new things)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1507722850, "post_id": 46680826, "comment_id": 80322522, "body": "@Sridharan OP = internet slang for original poster, the person asking the question. VLA is a C programming term for variable-length arrays."}], "tags": [], "owner": {"reputation": 901, "user_id": 5349104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33b1f380c5e8ff9c2173b221122692f5?s=128&d=identicon&r=PG&f=1", "display_name": "SRIDHARAN", "link": "https://stackoverflow.com/users/5349104/sridharan"}, "is_accepted": false, "score": 3, "last_activity_date": 1507701531, "creation_date": 1507701531, "answer_id": 46680826, "question_id": 46680577, "link": "https://stackoverflow.com/questions/46680577/how-to-declare-a-variable-sized-2d-arrays-global-in-c/46680826#46680826", "title": "How to declare a variable sized 2D arrays global in C?", "body": "<p>Just declare as double pointer and allocate memory in main. For more details refer <a href=\"http://www.geeksforgeeks.org/dynamically-allocate-2d-array-c/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint **a;\nvoid fun(int n)\n{\n    for(int i=0;i&lt;n;i++)\n    {\n        for(int j=0;j&lt;n;j++)\n            printf(\"%d \",a[i][j]);\n    }\n}\nint main(void) \n{\n    int n;\n    scanf(\"%d\",&amp;n);\n    a = (int **)malloc(n * sizeof(int *));\n    for(int i=0;i&lt;5;i++)\n    {\n        a[i]=(int*)malloc(n*sizeof(int));\n    }\n    for(int i=0;i&lt;n;i++)\n    {\n        for(int j=0;j&lt;n;j++)\n        {\n            scanf(\"%d\",&amp;a[i][j]);\n        }\n    }\n    fun(n);\n    return 0;\n}\n</code></pre>\n\n<p>Working Code : <a href=\"https://ideone.com/OMQ4qA\" rel=\"nofollow noreferrer\">https://ideone.com/OMQ4qA</a></p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1507705645, "creation_date": 1507705645, "answer_id": 46681893, "question_id": 46680577, "link": "https://stackoverflow.com/questions/46680577/how-to-declare-a-variable-sized-2d-arrays-global-in-c/46681893#46681893", "title": "How to declare a variable sized 2D arrays global in C?", "body": "<p>The correct, proper solution is to not use globals. Allocate the array in the thread which will persist throughout the execution of the whole program.</p>\n\n<p>If that, for reasons unknown, is not an option, then you will have to come up with some solution that stores the array size globally too. You could create a simple ADT for this, such as a struct with a \"mangled\" 2D array in the form of a flexible array member. Example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n  size_t x;\n  size_t y;\n  double array [];\n} double_array2d_t;\n\ndouble_array2d_t* array2d = NULL;\n\nint main()\n{\n  /* let x and y be some manner of run-time values: */\n  int x = 3;\n  int y = 2;\n\n  array2d = malloc(sizeof(*array2d) + sizeof(double[x][y]));\n  array2d-&gt;x = x;\n  array2d-&gt;y = y;\n\n  double count = 0.0;\n  for(int i=0; i&lt;x; i++)\n  {\n    for(int j=0; j&lt;y; j++)\n    {\n      array2d-&gt;array[i*y + j] = count++;\n      printf(\"%f \", array2d-&gt;array[i*y + j]);\n    }\n    printf(\"\\n\");\n  }\n\n  ...\n\n  free(array2d);\n}\n</code></pre>\n\n<p>And of course if you access this from multiple threads, you have to protect the data with a mutex as always.</p>\n"}], "owner": {"reputation": 71, "user_id": 4147714, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100003863357064/picture?type=large", "display_name": "Daniel Hogan", "link": "https://stackoverflow.com/users/4147714/daniel-hogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1507705645, "creation_date": 1507700136, "last_edit_date": 1507701120, "question_id": 46680577, "link": "https://stackoverflow.com/questions/46680577/how-to-declare-a-variable-sized-2d-arrays-global-in-c", "title": "How to declare a variable sized 2D arrays global in C?", "body": "<p>I'm making a randomized n*n matrix, but I do not know the value of n until the program is already running.</p>\n\n<p>I'm capable of creating the n*n matrices in main() like so:</p>\n\n<pre><code>    double (*m1)[n];\n    m1 = malloc(sizeof *m1 * n);\n\n    double (*m2)[n];\n    m2 = malloc(sizeof *m2 * n);\n</code></pre>\n\n<p>But now I must use these matrices outside of main and need them to be global, but I'm completely clueless how to make them global. I intend to read these two matrices with multiple threads and need them easily accessible. I know I can make a struct to pass multiple parameters, but I would need to define a struct with variable length arrays globally so the problem rearises. Thank you for your time.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12087, "user_id": 1121249, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LkDcL.png?s=128&g=1", "display_name": "rkosegi", "link": "https://stackoverflow.com/users/1121249/rkosegi"}, "edited": false, "score": 3, "creation_date": 1507698372, "post_id": 46680191, "comment_id": 80308228, "body": "How about using <code>gdb</code>?"}, {"owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 0, "creation_date": 1507698454, "post_id": 46680191, "comment_id": 80308259, "body": "I think you try to access <code>name</code> of the <code>next</code> even if the <code>next</code> node is NULL which will seg fault."}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "reply_to_user": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 1, "creation_date": 1507698583, "post_id": 46680191, "comment_id": 80308329, "body": "@qwn, well, the first half of the condition make sure that <code>next</code> do exist. If it does exist then there should be <code>next-&gt;name</code>. That&#39;s what I think."}, {"owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 0, "creation_date": 1507698908, "post_id": 46680191, "comment_id": 80308436, "body": "You are right. <code>next = next-&gt;next</code> is this valid? having the same variable name as the pointer?"}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "reply_to_user": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "edited": false, "score": 0, "creation_date": 1507699297, "post_id": 46680191, "comment_id": 80308578, "body": "@qwn, I am pretty sure it is smart enough to know the difference. Your concern is right, I should not have the same name. I have changed the names, unfortunately, that wasn&#39;t a problem."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507700080, "post_id": 46680191, "comment_id": 80308910, "body": "See <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>.  Also, show the MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) that illustrates the problem.  One function that is not <code>main()</code> does not make a C program, and the problem could easily be in how you&#39;re using this function.  We can&#39;t tell how you&#39;re (mis)using it.  You&#39;ve also not shown any data that you&#39;ve entered.  Is it the first entry or the second or some random entry or what?"}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "reply_to_user": {"reputation": 12087, "user_id": 1121249, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LkDcL.png?s=128&g=1", "display_name": "rkosegi", "link": "https://stackoverflow.com/users/1121249/rkosegi"}, "edited": false, "score": 0, "creation_date": 1507700117, "post_id": 46680191, "comment_id": 80308924, "body": "@rkosegi, <code>gdb</code> is saying that something is wrong with my <code>strcmp</code>, I have no idea what. This is what I am geeting <code>#0  0x00007ffff7ac9e5a in __strcmp_sse2_unaligned () from &#47;lib64&#47;libc.so.6</code>"}, {"owner": {"reputation": 278, "user_id": 5805903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db74c52f16a0625ed6e5f09ce7d6d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Eswaran Pandi", "link": "https://stackoverflow.com/users/5805903/eswaran-pandi"}, "edited": false, "score": 0, "creation_date": 1507700226, "post_id": 46680191, "comment_id": 80308969, "body": "problem in while llop where you are assigning <b>next = next-&gt;next;</b>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507700501, "post_id": 46680191, "comment_id": 80309073, "body": "MCVE - please show how/where you are calling insert_node() and the storage class of its arguments, eg. &#39;name&#39;, because of &#39;temp-&gt;name = name;&#39; - pointer assignment only,"}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "edited": false, "score": 0, "creation_date": 1507700732, "post_id": 46680191, "comment_id": 80309147, "body": "I have updated with the full code."}], "answers": [{"comments": [{"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "edited": false, "score": 0, "creation_date": 1507702658, "post_id": 46680886, "comment_id": 80309837, "body": "this is one of the examples why I hate C. I have wasted my whole day trying to figure this out. Thank you so much!!! I owe you a cold one."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "edited": false, "score": 1, "creation_date": 1507703582, "post_id": 46680886, "comment_id": 80310283, "body": "@HafizTemuri BTW, are you aware you do not <code>free()</code> the <code>strdup</code>-ed string? This may cause a memory leak in general application. OTOH be aware that in your list&#39;s nodes you store pointers pointing <i>into</i> that string, so if you free the string you should do it <i>after</i> deallocating a list."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "edited": false, "score": 0, "creation_date": 1507706157, "post_id": 46680886, "comment_id": 80311776, "body": "@HafizTemuri if you had followed the advice of rkosegi, and stepped thorugh with your debugger, you would have noticed that &#39;head = temp;&#39; was not executed on the first run through insert_node(), and so understood that &#39;head&#39; was not NULL and invalid at that time.  Debugging skills are absolutely essential for software development in any language."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1507706387, "post_id": 46680886, "comment_id": 80311914, "body": "@MartinJames I suppose you indended to post your comment under the Hafiz&#39;s question rather then under my answer... Anyway, <code>head</code> being invalid does <b>not</b> follow from <code>head=temp</code> assignement not being executed yet, but rather from <code>head</code> itself being not initialized."}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507733535, "post_id": 46680886, "comment_id": 80330402, "body": "@MartinJames, I do have the debugging skills, thank you very much! I did know exactly what line causing the problem, but I wasn&#39;t sure why. The reason why I hate C is that it does not let you get away with anything, whereas other languages do a lot of stuff for you. Everyone is entitled to have their own opinion."}, {"owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "edited": false, "score": 0, "creation_date": 1507734164, "post_id": 46680886, "comment_id": 80330849, "body": "@CiaPan, I completely forgot to free <code>strdup</code> strings in my whole application. Thanks for reminding me. I am planning to <code>malloc</code> all my strings at some point, because I heard <code>strdup</code> is not a standard C function."}], "tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": true, "score": 3, "last_activity_date": 1507707487, "last_edit_date": 1507707487, "creation_date": 1507701825, "answer_id": 46680886, "question_id": 46680191, "link": "https://stackoverflow.com/questions/46680191/debug-the-segment-fault-in-c/46680886#46680886", "title": "Debug the Segment Fault in C", "body": "<p>Your <code>head</code> variable is not initialized in <code>parser()</code>, and its undefined value is passed to <code>insert_node()</code>, so the first access to the value with <code>if(!head)</code> triggers Undefined Behavior.</p>\n\n<p>The result is most probably 'false' (as in your case), so the control is passed to the <code>else</code> branch, where the <code>head</code> value is copied to the <code>ptr</code> variable. Consequently <code>ptr</code> is not NULL in the <code>while</code> loop's condition, so <code>ptr-&gt;name</code> is accessed prior to <code>strcmp</code> call \u2013 and you're lucky this time UB results in the memory access error at the location 'pointed to' by <code>ptr</code>, which results in a crash.</p>\n\n<p>Solution:<br>\nExpand the declaration by  initializer:</p>\n\n<pre><code>    node* head = NULL;\n</code></pre>\n"}], "owner": {"reputation": 2768, "user_id": 4054527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vKNcu.jpg?s=128&g=1", "display_name": "Hafiz Temuri", "link": "https://stackoverflow.com/users/4054527/hafiz-temuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 46680886, "answer_count": 1, "score": 1, "last_activity_date": 1507707487, "creation_date": 1507698181, "last_edit_date": 1507701305, "question_id": 46680191, "link": "https://stackoverflow.com/questions/46680191/debug-the-segment-fault-in-c", "title": "Debug the Segment Fault in C", "body": "<p>I am trying to make a sorted linked list. Everything looks fine, but I am getting a Segment Fault for some reason, not sure why. Any help would be appreciated. The problem lies in my <code>while</code> loop, I have commented that in the code below.</p>\n\n<pre><code>typedef struct node{\n    char *name;\n    struct node *next;\n} node;\n\nnode* insert_node(node *head, char *name){\n    node *temp, *pre, *next;\n    temp = (node*) malloc(sizeof(node));\n    temp-&gt;name = name;\n    temp-&gt;next = NULL;\n\n    if (!head){\n        head = temp;\n    } else {\n        pre = NULL;\n        next = head;\n        //something is wrong with this while loop, not sure what though\n        while(next &amp;&amp; (strcmp(next-&gt;name, name) &lt; 0) ){\n            pre = next;\n            next = next-&gt;next;\n        }\n        printf(\"out\\n\");\n        if (!next){\n            pre-&gt;next = temp;\n        } else {\n            if(pre){\n                temp-&gt;next = pre-&gt;next;\n                pre-&gt;next = temp;\n            } else {\n                temp-&gt;next = head;\n                head = temp;\n            }\n        }\n    }\n    return head;\n}\n</code></pre>\n\n<hr>\n\n<p>@qwn, asked me to have the different names of <code>next</code> node pointer and the temp node.\n@Jonathan Leffler, asked me to provide the complete code. So, here it is,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node{\n    char *name;\n    struct node *next;\n} node;\n\nnode* insert_node(node *head, char *name);\nvoid print_links(node *head);\nvoid free_links(node *head);\nvoid parser(char *string);\n\nint main (int argc, char *argv[]){\n    char *string = \"file1a.txt/file1b.txt/too_deep/dir1/file2a.txt/\";\n    parser(string);\n}\n\nvoid parser(char *s){\n    node *head;\n    char *tokens;\n    char *string = strdup(s);\n    tokens = strtok(string, \"/\");\n    while (tokens != NULL){\n        //printf(\"%s\\n\", tokens);\n        head = insert_node(head, tokens);\n        tokens = strtok(NULL, \"/\");\n    }\n    print_links(head);\n    free_links(head);\n    return;\n}\n\nnode* insert_node(node *head, char *name){\n    node *temp, *pre, *ptr;\n    temp = (node*) malloc(sizeof(node));\n    temp-&gt;name = name;\n    temp-&gt;next = NULL;\n\n    if (!head){\n        head = temp;\n    } else {\n        pre = NULL;\n        ptr = head;\n        // problem lies in this while loop\n        while(ptr &amp;&amp; (strcmp(ptr-&gt;name, name) &lt; 0) ){\n            printf(\"here\\n\");\n            pre = ptr;\n            ptr = ptr-&gt;next;\n        }\n        printf(\"out\\n\");\n        if (!ptr){\n            pre-&gt;next = temp;\n        } else {\n            if(pre){\n                temp-&gt;next = pre-&gt;next;\n                pre-&gt;next = temp;\n            } else {\n                temp-&gt;next = head;\n                head = temp;\n            }\n        }\n    }\n    return head;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "struct", "timestamp", "overflow"], "comments": [{"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507704811, "post_id": 46679960, "comment_id": 80310986, "body": "What results are you <i>expecting</i> to get? That is, what is your input, what is your output, and what is your desired output?"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1507708686, "post_id": 46679960, "comment_id": 80313348, "body": "There are several problems in your timeoverflow(), for example - excess elements in struct initializer <code>timestamp overflow = {0,0,0,0};</code>. Moreover your code is incomplete; in particular, it seems to be missing a main() function. Please edit your code so it&#39;s a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example of your problem, then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507713612, "post_id": 46679960, "comment_id": 80316507, "body": "@kevin Boone I will pass two structures of timestamp ,they will be added in the function timeoverflow,like nanoseconds of first timestamp with nanoseconds of second timestamp ,after adding the result should not cross MAX_NS ,if it does then take modulo of the result and the quotient is added to the seconds.And the same thing needs to be done for seconds also"}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1507713684, "post_id": 46679960, "comment_id": 80316565, "body": "@H.S edited.thanks"}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507718831, "post_id": 46679960, "comment_id": 80319970, "body": "So is <code>timeroverflow</code> supposed to return the sum of the timestamps, after correcting for overflow, or is it supposed to return some measure of the overflow?"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1507724008, "post_id": 46679960, "comment_id": 80323277, "body": "@Gopala Krishna In the function <code>timeroverflow()</code>, in both <code>if</code> and <code>else</code> block you have same statement - <code>overflow.nanoseconds = ((((t1.nanoseconds) + (t2.nanoseconds % MAX_NS+1))% MAX_NS+1);</code> Two questions - 1. Is the R.H.S expression is calculating overflow accurately? 2. What is the purpose of having same statement in both if and else block?"}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507724517, "post_id": 46679960, "comment_id": 80323622, "body": "@KevinBoone It should return the sum of the timestamp and overflow check on it"}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "edited": false, "score": 0, "creation_date": 1507727537, "post_id": 46679960, "comment_id": 80325868, "body": "I don&#39;t really see why you need to <i>test</i> for overflow at all. Add the two nsec values together, then get the final nsec value by total_nsec%(MAX_NS+1). Get the amount to add to the seconds by integer division total_nsec/(MAX_NS+1). Then get the final sec value by adding the <i>three</i> seconds figures -- the two original ones plus the seconds overflow from the nsec addition. Use % and / as before to reduce to range. Probably do all the arithmetic using wider integers than uint32, because the additional will probably overflow in ways that you <i>don&#39;t</i> want, as well as those you do."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1507781573, "post_id": 46679960, "comment_id": 80349707, "body": "@H.S the statements in if and else statements are not same.Suppose after adding two nanoseconds the sum is 1000000001.It has overflowed and goes to the if statement.There we strip this sum into 1 ns and 1s.But if the sum is 999999999, then it goes to the else statement and copied into the ns.Here there is no second part in the else bock."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "edited": false, "score": 0, "creation_date": 1508007562, "post_id": 46679960, "comment_id": 80442547, "body": "@chux Can you have a look over this question?Thanks"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1508102827, "post_id": 46679960, "comment_id": 80465674, "body": "It would be so much easier to just build or borrow a 128-bit integral type, and have that hold nanoseconds.  It would be easier to build (if you can&#39;t use <code>__int128_t</code>), be higher performance, and have a greater range.  And the sizeof would be the same due to padding."}, {"owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1508131380, "post_id": 46679960, "comment_id": 80472011, "body": "@Howard Hinnat I don&#39;t have the flexibility to use 128 bit integral type.Can you help me with the algorithm how to check overflow within the constraints .."}], "owner": {"reputation": 67, "user_id": 8501936, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fc504d51be2ed0a0e7791ca49e2b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Gopala Krishna", "link": "https://stackoverflow.com/users/8501936/gopala-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1508085525, "creation_date": 1507696781, "last_edit_date": 1508085525, "question_id": 46679960, "link": "https://stackoverflow.com/questions/46679960/addition-of-timestamp-values", "title": "Addition of timestamp values", "body": "<p>I am trying to check for overflow when I am adding two structures whose parameters are timestamp values.<br>\nThe rules for overflow:</p>\n\n<p>1.The nanoseconds should be within the value MAX_NS after addition.</p>\n\n<p>2.The seconds should be within the value MAX_S after addition.</p>\n\n<p>3.No need to check for topseconds.(It will always be within the range)</p>\n\n<p>This is function I have written for checking overflow.</p>\n\n<pre><code> #include \"stdio.h\"\n\n#define MAX_NS 999999999\n#define MAX_S 4294967295\n\ntypedef struct\n{\n int nanoseconds;\n int seconds;\n short int topsec;\n}timestamp;\n\ntimestamp timeoverflow(timestamp t1,timestamp t2)\n{\n int sec1,sec2,sec3,sec4;\n\n\ntimestamp overflow = {0,0,0};\n if((((t1.nanoseconds) + (t2.nanoseconds % MAX_NS+1))% MAX_NS+1)&gt;MAX_NS)\n {\n    overflow.nanoseconds = (((t1.nanoseconds) + (t2.nanoseconds % MAX_NS+1))% MAX_NS+1);\n    sec1 =  (((t1.nanoseconds) + (t2.nanoseconds % MAX_NS+1)) / MAX_NS+1);\n }\n else\n {\n    overflow.nanoseconds = (((t1.nanoseconds) + (t2.nanoseconds % MAX_NS+1))% MAX_NS+1);\n }\n\n sec2  = sec1 + t2.nanoseconds/MAX_NS+1;\n if(sec2 &lt; sec1)\n {\n    overflow.topsec++;\n }\n\n sec3 = sec2 + t2.seconds ;\n  if(sec3 &lt; sec2)\n {\n    overflow.topsec++;\n }\n\n sec4 = sec3 + t1.seconds;\n if(sec4 &lt; sec3)\n {\n    overflow.topsec++;\n }\n overflow.seconds = sec4;\n\n return (overflow);\n}\n\n int main()\n {\n    timestamp t1 = {10,4294967295,2};\n    timestamp t2 = {2,10,1};\n    timestamp t3 = timeoverflow(t1,t2);\n    printf(\"%d\\n\",t3.nanoseconds);\n    printf(\"%d\\n\",t3.seconds);\n    printf(\"%d\\n\",t3.topsec);\n\n\n }\n</code></pre>\n\n<p>But I am not getting the intended results .Kindly help.Thanks  </p>\n\n<p><strong>Edit</strong> : For the given input,the ouput should be </p>\n\n<p>timestamp.nanoseconds=12,</p>\n\n<p>timestamp.seconds=9 and </p>\n\n<p>timestamp.topsec = 4.  </p>\n\n<p>The output I am getting is:\ntimestamp.nanoseconds=14,</p>\n\n<p>timestamp.seconds=10 </p>\n\n<p>and \ntimestamp.topsec = 1.</p>\n"}, {"tags": ["c", "struct", "typedef"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 3, "creation_date": 1507693864, "post_id": 46679489, "comment_id": 80306927, "body": "did you search a little ?"}, {"owner": {"reputation": 231, "user_id": 8666839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eb9B0.jpg?s=128&g=1", "display_name": "YaatSuka", "link": "https://stackoverflow.com/users/8666839/yaatsuka"}, "edited": false, "score": 0, "creation_date": 1507694227, "post_id": 46679489, "comment_id": 80307010, "body": "Before asking a question, search it on Google <b>#mangoogle</b>"}, {"owner": {"reputation": 10385, "user_id": 4032703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8imMA.png?s=128&g=1", "display_name": "EJoshuaS - Reinstate Monica", "link": "https://stackoverflow.com/users/4032703/ejoshuas-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507694718, "post_id": 46679489, "comment_id": 80307145, "body": "<a href=\"http://meta.stackoverflow.com/q/284236\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507695888, "post_id": 46679489, "comment_id": 80307465, "body": "It means that neither you nor the person who wrote the code has paid attention to <a href=\"http://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to typedef pointers?</a>"}, {"owner": {"reputation": 3, "user_id": 7272454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3b16cc390a6f8812888d671cfe79f?s=128&d=identicon&r=PG&f=1", "display_name": "Vivaldy Andhira", "link": "https://stackoverflow.com/users/7272454/vivaldy-andhira"}, "edited": false, "score": 1, "creation_date": 1507695960, "post_id": 46679489, "comment_id": 80307492, "body": "I&#39;m sorry for my bad question.. This is my first time asking in stackoverflow.. Sorry"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7272454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3b16cc390a6f8812888d671cfe79f?s=128&d=identicon&r=PG&f=1", "display_name": "Vivaldy Andhira", "link": "https://stackoverflow.com/users/7272454/vivaldy-andhira"}, "edited": false, "score": 0, "creation_date": 1507696364, "post_id": 46679559, "comment_id": 80307603, "body": "thanks, and sorry for my bad question and thanks for the edit.."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": true, "score": 1, "last_activity_date": 1507695970, "last_edit_date": 1507695970, "creation_date": 1507694271, "answer_id": 46679559, "question_id": 46679489, "link": "https://stackoverflow.com/questions/46679489/what-is-the-meaning-of-this-typedef-struct-in-c-language/46679559#46679559", "title": "What is the meaning of this typedef struct in C language?", "body": "<p>It makes <code>elmtadress</code> an alias for <code>struct elmt *</code>. If you use this, you can type:</p>\n\n<pre><code>elmtadress myStruct;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>struct slmt *myStruct;\n</code></pre>\n\n<p>Read more here: <a href=\"http://www.tutorialspoint.com/cprogramming/c_typedef.htm\" rel=\"nofollow noreferrer\">http://www.tutorialspoint.com/cprogramming/c_typedef.htm</a></p>\n"}], "owner": {"reputation": 3, "user_id": 7272454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29e3b16cc390a6f8812888d671cfe79f?s=128&d=identicon&r=PG&f=1", "display_name": "Vivaldy Andhira", "link": "https://stackoverflow.com/users/7272454/vivaldy-andhira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1507732426, "accepted_answer_id": 46679559, "answer_count": 1, "score": -6, "last_activity_date": 1507695970, "creation_date": 1507693748, "last_edit_date": 1507695798, "question_id": 46679489, "link": "https://stackoverflow.com/questions/46679489/what-is-the-meaning-of-this-typedef-struct-in-c-language", "closed_reason": "Needs details or clarity", "title": "What is the meaning of this typedef struct in C language?", "body": "<p>What is the meaning of this code?</p>\n\n<pre><code>typedef struct elmt *elmtaddress;\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1507693588, "post_id": 46679442, "comment_id": 80306871, "body": "<code>printf(&quot;%x &quot;, a[_i]);</code> --&gt; <code>printf(&quot;%x &quot;, (unsigned char)a[_i]);</code>"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1507693592, "post_id": 46679442, "comment_id": 80306873, "body": "it is sign extending the byte to a 32 bit number so (unsigned int)(a[-i]) may/should fix that.  Or dummy=a[_i];  then printf the dummy variable"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 2, "creation_date": 1507693699, "post_id": 46679442, "comment_id": 80306895, "body": "@old_timer Casting to <code>unsigned int</code> does not work as expected."}, {"owner": {"reputation": 183, "user_id": 8050962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae10e44ba1fce8ef7604c7b5a91b28c?s=128&d=identicon&r=PG&f=1", "display_name": "C Damo", "link": "https://stackoverflow.com/users/8050962/c-damo"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507693796, "post_id": 46679442, "comment_id": 80306915, "body": "@BLUEPIXY Thanks for the help. unsigend char is working. I have declared the array as unsigned char a[13]."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1507694239, "post_id": 46679442, "comment_id": 80307014, "body": "50/50 chance without trying it..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1507695027, "post_id": 46679442, "comment_id": 80307220, "body": "Or use <code>&quot;%hhx&quot;</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1507698753, "post_id": 46679442, "comment_id": 80308388, "body": "change <code>char a[13];</code> to <code>unsigned char a[13];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1507698997, "post_id": 46680163, "comment_id": 80308480, "body": "This is good general advice; however <code>dummy</code> never exceeds <code>7</code> in OP&#39;s code, and there is no difference between  <code>x ^= (1 &lt;&lt; 7)</code> and <code>x ^= (1u &lt;&lt; 7)</code>.  The problem is more to do with the declared type of <code>x</code>"}], "tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": -1, "last_activity_date": 1507697955, "creation_date": 1507697955, "answer_id": 46680163, "question_id": 46679442, "link": "https://stackoverflow.com/questions/46679442/bit-toggling-confusion-in-c/46680163#46680163", "title": "Bit toggling confusion in C", "body": "<p>Remember that it is not only the signed-ness of the array type, but the signed-ness of the <em>integer literal</em> that you are shifting that matters. Make sure both are unsigned.</p>\n\n<pre><code>x ^= 1U &lt;&lt; n;\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 8050962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae10e44ba1fce8ef7604c7b5a91b28c?s=128&d=identicon&r=PG&f=1", "display_name": "C Damo", "link": "https://stackoverflow.com/users/8050962/c-damo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 2, "closed_date": 1507712732, "answer_count": 1, "score": 1, "last_activity_date": 1507697955, "creation_date": 1507693358, "question_id": 46679442, "link": "https://stackoverflow.com/questions/46679442/bit-toggling-confusion-in-c", "closed_reason": "Duplicate", "title": "Bit toggling confusion in C", "body": "<p>Hi I have written a program to toggle bits in char array. I found that when I am toggling the 7th bit I am getting wrong answer. Please help me.</p>\n\n<pre><code>int main() {\n    int n,c;\n    char dummy;\n    scanf(\"%i\", &amp;n);\n    char a[13];\n    memset(a,0x00,13);\n    for(int a_i = 0; a_i &lt; n; a_i++){\n       scanf(\"%d\",&amp;c);\n        dummy = c%8;\n        a[c/8] ^= (1&lt;&lt;dummy);\n    }\n    printf(\"\\n\");\n    for (int _i=0;_i&lt;13;_i++)printf(\"%x \",a[_i]);\n//    int result = lonelyinteger(n, a);\n//    printf(\"%d\\n\", result);\n    return 0;\n}\n\nInput:\n9\n4 9 95 93 57 4 57 93 9\n\nOutput:\n0 0 0 0 0 0 0 0 0 0 0 **ffffff80** 0 \n</code></pre>\n\n<p>I need the output as 80 only not ffffff80. Please help me with this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1507692355, "post_id": 46679238, "comment_id": 80306628, "body": "What is the value of <code>char solution;</code> in  your call to <code>int compareletter(char guess, char solution);</code>? (2) How are you handling <code>&#39;\\n&#39;</code> left in <code>stdin</code> by <code>scanf(&quot;%d&quot;, &amp;numgames);</code> before your call to <code>fscanf(inp, &quot;%c&quot;, &amp;solution);</code>?"}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507692556, "post_id": 46679238, "comment_id": 80306676, "body": "i dont think char solution has a value in int compareletter(char guess, char solution)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507692620, "post_id": 46679238, "comment_id": 80306689, "body": "Correct, that will invoke <i>Undefined Behavior</i>. The bigger question is why are you duplicating <code>int compareletter(char guess, char solution);</code> in <code>main()</code> before your <code>for</code> loop? Also <b>make sure</b>, you are passing the <code>&#47;Wall</code> or <code>&#47;W3</code> option to <code>cl.exe</code> (VS) to enable compiler warnings. The compiler will point out the lines containing problem areas."}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1507692662, "post_id": 46679238, "comment_id": 80306696, "body": "You are not passing \u201esolution\u201c to GetLetter"}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507693045, "post_id": 46679238, "comment_id": 80306775, "body": "should int compareletter(char guess, char solution); in main() go after the for loop?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507697504, "post_id": 46679238, "comment_id": 80307904, "body": "@DavidC.Rankin That&#39;s not a function call, it&#39;s a declaration. Do you see the data type, <code>int</code>, in front of it?  Declaration.  The arguments are also declarations, not expressions."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507697617, "post_id": 46679238, "comment_id": 80307949, "body": "Jared, the uninitialized variable warning is coming from <code>GetLetter</code>.  You declare <code>solution</code>, then pass it to <code>CompareLetters</code> without ever assigning a value to it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1507697681, "post_id": 46679238, "comment_id": 80307979, "body": "@TomKarzes see second comment <i>&quot;The bigger question is why are you duplicating int compareletter(char guess, char solution); in main() before your for loop?</i>&quot;"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507697848, "post_id": 46679238, "comment_id": 80308026, "body": "@DavidC.Rankin It&#39;s declaring a lowercase version of the function which doesn&#39;t exist, so it serves no purpose.  But the uninitialized variable error is coming from <code>GetLetter</code>, not <code>main</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507697970, "post_id": 46679238, "comment_id": 80308080, "body": "Well slap my old eyes, you are correct. It&#39;s superfluous, but you are indeed correct. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1507692903, "post_id": 46679288, "comment_id": 80306738, "body": "Or even more informative, try checking the <b>return</b> of each call to <code>scanf</code> and <code>fscanf</code>..."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507693321, "post_id": 46679288, "comment_id": 80306831, "body": "how do I do the second thing?"}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507693402, "post_id": 46679288, "comment_id": 80306847, "body": "<code>printf(&quot;numgames = %d\\n&quot;, numgames);</code>"}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507693530, "post_id": 46679288, "comment_id": 80306863, "body": "what is that suppose to do? I just did it and it printed what numgames is equal to. When I put 5 the game keeps playing past 5 guesses."}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507693691, "post_id": 46679288, "comment_id": 80306890, "body": "That means your counter should work just fine. Try putting 1 as number of games. Are you still getting more than one game? Show the entire log of the game."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507693820, "post_id": 46679288, "comment_id": 80306920, "body": "I put 1 but it still keeps going."}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507693936, "post_id": 46679288, "comment_id": 80306942, "body": "Your log shows nothing wrong: you&#39;re playing a single game and still didn&#39;t spend all 5 guesses. What&#39;s wrong?"}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694052, "post_id": 46679288, "comment_id": 80306977, "body": "My bad, i should&#39;ve shown this. <a href=\"https://gyazo.com/9926662fa77cc0464db37a573e5f1b2c\" rel=\"nofollow noreferrer\">gyazo.com/9926662fa77cc0464db37a573e5f1b2c</a>"}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507694240, "post_id": 46679288, "comment_id": 80307015, "body": "try printing <code>numGuesses</code> right after the line <code>numGuesses = numGuesses + 1;</code> in your code."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694388, "post_id": 46679288, "comment_id": 80307051, "body": "Ok so I did printf(&quot;numguesses = %d\\n&quot;, numGuesses); but after inputting many guesses this text never showed up."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694522, "post_id": 46679288, "comment_id": 80307088, "body": "Also what is the difference between making an uninitialized variable = 0 and = &#39;\\0&#39;"}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507694877, "post_id": 46679288, "comment_id": 80307178, "body": "See my update in answer. The difference in type conversion. Sorry, i&#39;m dome for today."}], "tags": [], "owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1507694508, "last_edit_date": 1507694508, "creation_date": 1507692444, "answer_id": 46679288, "question_id": 46679238, "link": "https://stackoverflow.com/questions/46679238/c-program-getting-error-about-uninitialized-variable-the-program-never-ends/46679288#46679288", "title": "C Program, getting error about uninitialized variable, the program never ends", "body": "<ol>\n<li>Just put <code>char solution = '\\0';</code>. It's enough to get rid of warning.</li>\n<li>Try printing the value of <code>numgames</code> you've just read in <code>scanf()</code> function. It seems you're getting some invalid value for some reason...</li>\n</ol>\n\n<p>Upd: I see your problem: you're calling <code>GetLetter()</code> from <code>PlayGuess()</code>; and you're calling <code>CompareLetters()</code> from <code>GetLetter()</code>; and then you call <code>GetLetter()</code> from <code>CompareLetters()</code> so you create endless recursion. Remove calls <code>GetLetter()</code> from <code>CompareLetters()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507693401, "post_id": 46679315, "comment_id": 80306845, "body": "the int compareletter(char guess, char solution);  is suppose to let the user know if the guess comes alphabetically before or after the answer"}, {"owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "reply_to_user": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694283, "post_id": 46679315, "comment_id": 80307021, "body": "I suppose that is done by CompareLetters() not compareletter(), or do you have a different function compareletter() defined."}, {"owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "reply_to_user": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694641, "post_id": 46679315, "comment_id": 80307118, "body": "Also you are not passing your &#39;solution&#39; variable to GetLetter(). It is being locally declared i.e it is a complete different variable."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507694723, "post_id": 46679315, "comment_id": 80307147, "body": "how do i make it not a completely different variable? Also after fixing the CompareLetters(), nothing changed."}, {"owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "reply_to_user": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507696161, "post_id": 46679315, "comment_id": 80307551, "body": "Change the GetLetter defintion to char GetLetter(char solution) and remove local declaration for solution in GetLetter(). Now pass your solution variable when calling GetLetter, i.e Getletter(solution)."}], "tags": [], "owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "is_accepted": false, "score": 0, "last_activity_date": 1507692596, "creation_date": 1507692596, "answer_id": 46679315, "question_id": 46679238, "link": "https://stackoverflow.com/questions/46679238/c-program-getting-error-about-uninitialized-variable-the-program-never-ends/46679315#46679315", "title": "C Program, getting error about uninitialized variable, the program never ends", "body": "<p>You have to initialize <code>guess</code> and <code>solution</code> to something before you use them in a function.</p>\n\n<p>And what does this line </p>\n\n<pre><code>int compareletter(char guess, char solution);\n</code></pre>\n\n<p>indicate, there is no function with same name nor it is a call to any function.</p>\n\n<p>In case for dummy initialization you can use </p>\n\n<pre><code>solution = '\\0';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507732355, "post_id": 46680105, "comment_id": 80329601, "body": "You were a great help and I appreciate all the advice."}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507732465, "post_id": 46680105, "comment_id": 80329673, "body": "But I have one more question, how do I make it so the guess I enter (uppercase or lowercase) doesn&#39;t matter. For example let&#39;s the say the answer is &quot;B&quot; but i put &quot;b&quot;, how do I make it so the program will accept both?"}, {"owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507733185, "post_id": 46680105, "comment_id": 80330154, "body": "Also do you have any recommendations on a youtube channel or book to look at that can assist me in learning C?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "edited": false, "score": 0, "creation_date": 1507753948, "post_id": 46680105, "comment_id": 80341821, "body": "<code>guess = tolower(tmp);</code> will accept any case input but make all guesses lowercase.  See <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">The Definitive C Book Guide and List</a>. Learning C is a journey, not a race, take the time and enjoy learning the details, slow and steady wins the race."}, {"owner": {"reputation": 7058, "user_id": 1248959, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I2zKe.jpg?s=128&g=1", "display_name": "RollRoll", "link": "https://stackoverflow.com/users/1248959/rollroll"}, "edited": false, "score": 0, "creation_date": 1507755356, "post_id": 46680105, "comment_id": 80342521, "body": "I always used /W4 for warnings, didn&#39;t know about /W3"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507755524, "post_id": 46680105, "comment_id": 80342612, "body": "I always try and use <code>&#47;Wall</code>, but that can be a little excessive for just getting started (unless you are handy with <code>&#47;wdXXXX</code> (where <code>XXXX</code> is the warning code you wish to independently disable) - to get rid of the non-C related warnings the MS compiler loves to issue)."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1507755048, "last_edit_date": 1507755048, "creation_date": 1507697612, "answer_id": 46680105, "question_id": 46679238, "link": "https://stackoverflow.com/questions/46679238/c-program-getting-error-about-uninitialized-variable-the-program-never-ends/46680105#46680105", "title": "C Program, getting error about uninitialized variable, the program never ends", "body": "<p>Continuing from my comments, the key takeaways from your code are <strong>(1)</strong> you cannot learn C by guessing at syntax, compiling, over and over again, <strong>(2)</strong> validate ALL input to your program by checking the return of all input functions and validating the value you receive, <strong>(3)</strong> enable <strong>compiler warnings</strong> and then read, understand and correct each warning before attempting to compile again, and <strong>(4)</strong> do not accept code until it compiles cleanly, without warning.</p>\n\n<p>Since your code includes <code>#define _CRT_SECURE_NO_WARNINGS</code>, it is apparent you are on windows using <code>cl.exe</code> (either from <code>cmd.exe</code> or from VS-Code). For learning basic programming, close VS-Code, open the Command Line provided by your VS (or SDK) install, and don't worry about using the IDE again, until you have mastered compiling from the command line and understand your compiler options. See <a href=\"https://msdn.microsoft.com/en-us/library/19z1t1wy.aspx\" rel=\"nofollow noreferrer\">cl.exe C/C++ Compiler Options</a>, or type <code>cl /?</code> at the command prompt.</p>\n\n<p>From the command line, your basic compile string should be similar to:</p>\n\n<pre><code>cl.exe /nologo /W3 /Ox /Tc mysource.c\n</code></pre>\n\n<p>(<code>/W3</code> enable most warnings, <code>/Ox</code> enable all optimizations)</p>\n\n<p>I find it helpful to not clutter my c-source directory with <code>.obj</code> and <code>.exe</code> files so I create two additional directories <code>/obj</code> and <code>/bin</code> for the object and executable files. You then use the <code>/Fo</code> and <code>/Fe</code> options to tell the compiler to put the object files and exe files in the proper directories, e.g.</p>\n\n<pre><code>cl /nologo /W3 /Ox /Foobj/mysource /Febin/mysource /Tc mysource.c\n</code></pre>\n\n<p>That will put <code>mysource.obj</code> in the <code>obj</code> directory and <code>mysource.exe</code> in the <code>bin</code> directory.</p>\n\n<p>You must have the logic for your code clear in your head before you sit behind the keyboard and start pecking away. (See: <strong>(1)</strong> above). The easiest way to keep it straight by drawing a simple logic diagram for your code and identify what values you will handle in <code>main()</code> and then what will be handled in each <code>function()</code>. You don't need anything fancy, an 8.5x11 sheet of paper and pencil will do. After you have a clear road map for what each part of your code will do, then sit down and start pecking away.</p>\n\n<p>Putting that logic to test, you can rework your code so it makes a lot more sense than it currently does, e.g.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS     \n#include &lt;stdio.h&gt;                  \n#include &lt;ctype.h&gt;                  \n\n#define MAXGUESSES 5\n\nvoid Instructions();\nint PlayGuess (char solution);\nchar  GetLetter();\nint CompareLetters (char guess, char solution);\n\nint main (void)\n{\n    int i = 0,\n        numgames = 0;\n    char solution;\n    FILE *inp = fopen (\"letterList.txt\", \"r\");\n\n    if (inp == NULL) {\n        fprintf (stderr, \"error: file open failed 'letterList.txt'.\\n\");\n        return 1;\n    }\n\n    Instructions(); /* give instructions */\n\n    /* get number of games the user wants to play */\n    printf(\"Please enter the number of games you want to play: \");\n    if (scanf (\"%d\", &amp;numgames) != 1) {\n        fprintf (stderr, \"error: invalid input - numgames.\\n\");\n        return 1;\n    }\n    putchar ('\\n');\n\n    for (i = 0; i &lt; numgames; i++)\n    {\n        /* get letter to guess from file */\n        if (fscanf (inp, \" %c\", &amp;solution) == EOF || solution &lt; ' ' \n                    || '~' &lt; solution) {\n            fprintf (stderr, \"error: invalid character - solution.\\n\");\n            return 1;\n        }\n        printf (\" ==&gt;  Game  %d  &lt;==\\n\\n\", i + 1);\n        PlayGuess (solution);\n        printf(\"The letter was '%c'!\\n\\n\", solution);\n    }\n    fclose (inp);\n\n    return 0;       /* main() is type int and returns a value */\n}\n\nvoid Instructions()\n{\n    printf (\"Welcome to Letter Guess\\n\"\n            \"To begin you will enter the number of games you want \"\n            \"to play (1 \u2013 4 games)\\n\"\n            \"You have 5 chances to guess each letter\\n\"\n            \"Let's begin\\n\\n\");\n}\n\nint PlayGuess (char solution)\n{\n    int numGuesses = 0;\n    char guess;\n\n    while (numGuesses &lt; MAXGUESSES)\n    {\n        guess = GetLetter();\n        if (CompareLetters (guess, solution))\n            return 1;\n        numGuesses = numGuesses + 1;\n    }\n    printf (\"You have run out of guesses\\n\");\n\n    return 0;\n}\n\n\n/* get a letter and validate it is good */\nchar GetLetter()\n{\n    char guess = 0, \n        tmp;\n\n    printf (\"Enter a guess: \");\n\n    if (scanf (\" %c\", &amp;tmp) != EOF &amp;&amp; ' ' &lt;= tmp &amp;&amp; tmp &lt;= '~')\n        guess = tmp;\n\n    return guess;\n}\n\n\n/* compare the guess and the solution\n * return a 1 if they are the same\n * message based on before or after alphabetically\n * return a 0 if the guess and answer are not the same\n */\nint CompareLetters(char guess, char solution)\n{\n    if (guess == solution)      /* answer is correct */\n    {   \n        printf (\"Thats it!\\n\\n\");\n        return 1;\n    }\n\n    if (guess &lt; solution)\n        printf (\"The letter you are trying to guess comes after '%c'\\n\", \n                guess);\n    else \n        printf (\"The letter you are trying to guess comes before '%c'\\n\", \n                guess);\n\n    printf (\"Try again\\n\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Compile String for <code>cl.exe</code> (VS)</strong></p>\n\n<pre><code>&gt;cl /nologo /W3 /Ox /Foobj/guessletter /Febin/guessletter /Tc guessletter.c\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>&gt; bin\\guessletter.exe\nWelcome to Letter Guess\nTo begin you will enter the number of games you want to play (1 \u2013 4 games)\nYou have 5 chances to guess each letter\nLet's begin\n\nPlease enter the number of games you want to play: 2\n\n==&gt;  Game  1  &lt;==\n\nEnter a guess: k\nThe letter you are trying to guess comes before 'k'\nTry again\n\nEnter a guess: c\nThe letter you are trying to guess comes after 'c'\nTry again\n\nEnter a guess: d\nThats it!\n\nThe letter was 'd'!\n\n==&gt;  Game  2  &lt;==\n\nEnter a guess: e\nThe letter you are trying to guess comes after 'e'\nTry again\n\nEnter a guess: g\nThe letter you are trying to guess comes before 'g'\nTry again\n\nEnter a guess: f\nThats it!\n\nThe letter was 'f'!\n</code></pre>\n\n<p>Look things over and think about how to approach programming in C. It is an exact language. It is up to you to account for all characters in all input buffers as well as your memory use. If you don't know what parameters a library function takes, or what type and value it will return, or how to use it, look it up. The man pages are available at, e.g. <a href=\"https://msdn.microsoft.com/en-us/library/aa246414(v=vs.60).aspx\" rel=\"nofollow noreferrer\">msdn fscanf, fwscanf</a> or <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">scanf(3): input format conversion</a>)</p>\n\n<p>Let me know if you have further questions.</p>\n\n<hr>\n\n<p><strong>Accepting Input In Any Case, Converting to Lowercase</strong></p>\n\n<p>To accept input in any case and convert the value to <em>lowercase</em> so that <code>guess</code> is always lowercase in your code, you need to change only one-line:</p>\n\n<pre><code>/* get a letter and validate it is good\n * (convert letter to lowercase)\n */\nchar GetLetter()\n{\n    char guess = 0, \n        tmp;\n\n    printf (\"Enter a guess: \");\n\n    if (scanf (\" %c\", &amp;tmp) != EOF &amp;&amp; ' ' &lt;= tmp &amp;&amp; tmp &lt;= '~')\n        guess = tolower (tmp);\n\n    return guess;\n}\n</code></pre>\n\n<p><strong>note:</strong> For ASCII characters, the 6th-bit is the 'case bit', if it is <code>1</code>, the character is lowercase, <code>0</code> uppercase. <code>tolower</code> can simply be written as:</p>\n\n<pre><code>unsigned c_tolower (unsigned c)\n{\n    if ('A' &lt;= c &amp;&amp; c &lt;= 'Z')\n        c ^= (1 &lt;&lt; 5);\n\n    return c;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8756165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190fb9e82725bebe00c99ce9b4f1982f?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Majuk", "link": "https://stackoverflow.com/users/8756165/jared-majuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 46680105, "answer_count": 3, "score": 0, "last_activity_date": 1507755048, "creation_date": 1507692025, "question_id": 46679238, "link": "https://stackoverflow.com/questions/46679238/c-program-getting-error-about-uninitialized-variable-the-program-never-ends", "title": "C Program, getting error about uninitialized variable, the program never ends", "body": "<pre><code>#define _CRT_SECURE_NO_WARNINGS     \n#include &lt;stdio.h&gt;                  \n#include &lt;ctype.h&gt;                  \n#define MAXGUESSES 5\n\n\nvoid Instructions();\n\n\nint PlayGuess(char solution);\n\n\nchar  GetLetter();\n\n\nint CompareLetters(char guess, char solution);\n\n\n\n\nint main()\n{\n    int i = 0;\n    int numgames = 0;\n    char solution;\n    char guess;\n    int compareletter(char guess, char solution);\n    FILE *inp;\n    inp = fopen(\"letterList.txt\", \"r\");\n    fscanf(inp, \"%c\", &amp;solution);\n    Instructions();\n    //get number of games the user wants to play\n    printf(\"Please enter the number of games you want to play\\n\");\n    scanf(\"%d\", &amp;numgames);\n    for (i = 1; i &lt;= numgames; i++)\n        //print current game (value of i)\n    {\n            //get letter to guess from file\n            fscanf(inp, \"%c\", &amp;solution);\n            PlayGuess(solution);\n            printf(\"\\nThe letter is %c\\n\", solution);\n    }\n\n\n    fclose(inp);\n\n}\nvoid Instructions()\n{\n    printf(\"Welcome to Letter Guess\\n\");\n    printf(\"To begin you will enter the number of games you want to \nplay(1 \u2013 4 games)\\n\");\n    printf(\"You have 5 chances to guess each letter\\n\");\n    printf(\"Let's begin\\n\");\n\n}\n\nint PlayGuess(char solution) //player defined guesses.\n{\n    int numGuesses = 0;\n    int winOrLose = 0;\n    while (numGuesses &lt; MAXGUESSES)\n    {\n            GetLetter();\n\n            numGuesses = numGuesses + 1;\n            if (numGuesses&gt;MAXGUESSES)\n            {\n                    printf(\"You have run out of guesses\\n\");\n            }\n    }\n\n\n    return 0;\n}\n\n\n//get the guess from the user (call GetLetter function)\n//call compareLetters function\n\nchar GetLetter()\n{\n    char guess = 0;\n    char solution;\n    printf(\"Enter a guess:\", guess);\n    scanf(\" %c\", &amp;guess);\n    CompareLetters(guess, solution);\n    return guess;\n}\n\n\n//compare the guess and the solution\n//return a 1 if they are the same\n// message based on before or after alphabetically\n//return a 0 if the guess and answer are not the same\n\nint CompareLetters(char guess, char solution)\n{\n    if (guess == solution) //if answer is correct\n    {   printf(\"Thats it!\\n\");\n    return 1;\n    }\n    else\n        if (guess&lt;solution)\n        {\n                printf(\"The letter you are trying to guess comes after %c\\n\", guess);\n                printf(\"\\nTry again\\n\");\n                GetLetter();\n\n                return 0;\n        }\n        else\n            if (guess&gt;solution)\n            { printf(\"The letter you are trying to guess comes before %c\", guess);\n    printf(\"\\nTry again\\n\");\n    GetLetter();\n    return 0;\n            }\n}\n</code></pre>\n\n<p>Sorry if the code is a bit messy.</p>\n\n<p>Problem #1: The variable \"solution\" is uninitialized but i do not know how to fix it. I have this problem a lot, if possible i could use an explanation.</p>\n\n<p>Problem #2: When i launch the program and enter the amount of games I want to play it ignores it and gives me endless guesses, the program never stops. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "networking"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8549610"}, "is_accepted": true, "score": 4, "last_activity_date": 1507696224, "creation_date": 1507696224, "answer_id": 46679878, "question_id": 46679145, "link": "https://stackoverflow.com/questions/46679145/why-inet-ntop-and-inet-ntoa-gives-different-result/46679878#46679878", "title": "Why inet_ntop() and inet_ntoa() gives different result?", "body": "<p>As per the <code>man</code> page, in the case of <code>AF_INET</code> the argument <code>src</code> must point to a <code>struct in_addr</code> (network byte order).</p>\n\n<p>In your <code>struct addrinfo</code> you have a pointer to <code>struct sockaddr</code> which is basically</p>\n\n<pre><code>sa_family_t sa_family;\nchar        sa_data[];\n</code></pre>\n\n<p>However, <code>struct sockaddr_in</code> is</p>\n\n<pre><code>sa_family_t    sin_family;\nin_port_t      sin_port;\nstruct in_addr sin_addr;\n</code></pre>\n\n<p>So, you need to replace</p>\n\n<pre><code>inet_ntop(AF_INET, &amp;p-&gt;ai_addr, str1, INET_ADDRSTRLEN);\n</code></pre>\n\n<p>by either</p>\n\n<pre><code>inet_ntop(AF_INET, &amp;p-&gt;ai_addr-&gt;sa_data[2], str1, INET_ADDRSTRLEN);\n</code></pre>\n\n<p>(the <code>src</code> argument may be <code>&amp;p-&gt;ai_addr-&gt;sa_data[1 &lt;&lt; 1]</code> to avoid the \"magic number\" <code>2</code> - the offset which counts for the port number storage)</p>\n\n<p>or</p>\n\n<pre><code>inet_ntop(AF_INET, &amp;((struct sockaddr_in *)p-&gt;ai_addr)-&gt;sin_addr, str1, INET_ADDRSTRLEN);\n</code></pre>\n\n<p>Then it will produce correct output.</p>\n"}], "owner": {"reputation": 11, "user_id": 8755599, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155983169495052/picture?type=large", "display_name": "Daniel Olaya", "link": "https://stackoverflow.com/users/8755599/daniel-olaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5236, "favorite_count": 1, "accepted_answer_id": 46679878, "answer_count": 1, "score": 1, "last_activity_date": 1507696224, "creation_date": 1507691296, "question_id": 46679145, "link": "https://stackoverflow.com/questions/46679145/why-inet-ntop-and-inet-ntoa-gives-different-result", "title": "Why inet_ntop() and inet_ntoa() gives different result?", "body": "<p>I am creating a UDP server-client program. Client requests a file and the server sends to client  if found. \nBased on Beej's Guide to Networking, </p>\n\n<blockquote>\n  <ul>\n  <li>inet_ntoa() returns the dots-and-numbers string in a static buffer that is overwritten with each call to the function.</li>\n  <li>inet_ntop() returns the dst parameter on success, or NULL on failure (and errno is set).</li>\n  </ul>\n</blockquote>\n\n<p>The guide mentions ntoa is deprecated so ntop is recommended since it supports IPv4 and IPv6.</p>\n\n<p>On my code I am getting different results when I use function or the other and my understanding is that they should throw the same result. Anything I am missing? Any help would be greatly appreciated.</p>\n\n<p>Code:</p>\n\n<pre><code>    //UDP Client\n    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;netdb.h&gt;\n\n    #define MAXBUFLEN 1024\n    #define SER_IP \"176.180.226.0\" \n    #define SER_PORT \"1212\"\n\n    // Get port, IPv4 or IPv6:\n    in_port_t get_in_port(struct sockaddr *sa){\n        if (sa-&gt;sa_family == AF_INET) {\n            return (((struct sockaddr_in*)sa)-&gt;sin_port);\n        }\n        return (((struct sockaddr_in6*)sa)-&gt;sin6_port);\n    }\n\n    int main(int argc, char *argv[]){\n        int sock, rv, numbytes;\n        struct addrinfo hints, *servinfo, *p;\n        char buffer[MAXBUFLEN];\n\n        memset(&amp;hints, 0, sizeof hints);\n        hints.ai_family = AF_UNSPEC;\n        hints.ai_socktype = SOCK_DGRAM;\n\n        rv = getaddrinfo(NULL, SER_PORT, &amp;hints, &amp;servinfo);\n        if (rv != 0){\n            fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n            exit(1);\n        }\n\n        // Printing IP, should provide same result\n        for(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n            char str1[INET_ADDRSTRLEN];\n            inet_ntop(AF_INET, &amp;p-&gt;ai_addr, str1, INET_ADDRSTRLEN); \n            printf(\"ntop:%s\\n\", str1) ;\n            printf(\"inet_ntoa:%s \\n\", inet_ntoa(((struct sockaddr_in *)p-&gt;ai_addr)-&gt;sin_addr));\n            printf(\"\\n\");\n        }\n\n        exit(1);\n    }\n</code></pre>\n\n<p>Current output:</p>\n\n<pre><code>ntop:64.80.142.0\ninet_ntoa:0.0.0.0 \n\nntop:160.80.142.0\ninet_ntoa:127.0.0.1 \n</code></pre>\n"}, {"tags": ["c", "lua"], "answers": [{"comments": [{"owner": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "edited": false, "score": 0, "creation_date": 1507718842, "post_id": 46680208, "comment_id": 80319975, "body": "I appreciate the answer! Could you provide some sample code or links to some sample code? I am quite new to advanced c and I would rather go at this a bit more intelligently than trial and error."}], "tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": true, "score": 1, "last_activity_date": 1507698266, "creation_date": 1507698266, "answer_id": 46680208, "question_id": 46679107, "link": "https://stackoverflow.com/questions/46679107/best-practice-for-binding-ncurses-getstr/46680208#46680208", "title": "Best practice for binding ncurses&#39; getstr", "body": "<p>The standard algorithm is to start with a reasonably-sized buffer, and only resize if needed. For user input at the terminal it can be safely assumed that input cannot be expected exceed around a hundred characters or so. Start with a buffer that size, and only if necessary make it larger.</p>\n\n<p>Make sure you are either using <code>wgetnstr()</code> so that you can put limits on the size of the input, but I would personally use <code>wgetch()</code>.</p>\n\n<p>Once you have the properly-obtained string, put it into a LUA string and clean up memory.</p>\n"}], "owner": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 46680208, "answer_count": 1, "score": 1, "last_activity_date": 1507698266, "creation_date": 1507690983, "last_edit_date": 1507691498, "question_id": 46679107, "link": "https://stackoverflow.com/questions/46679107/best-practice-for-binding-ncurses-getstr", "title": "Best practice for binding ncurses&#39; getstr", "body": "<p>I'm creating Lua bindings for ncurses and I want to implement <code>getstr</code>, which reads in a string from the user. I want the string to be of basically unlimited size, like in Lua, but I am not sure how to implement this. Do I just read in a char array of really large size or do I do some sort of magic with <code>getch</code> until I read in a newline?</p>\n\n<p>I see that <a href=\"https://github.com/rrthomas/lcurses/blob/master/lcurses.c\" rel=\"nofollow noreferrer\">lcurses</a> uses <code>LUAL_BUFFERSIZE</code> but is this memory efficient? Is it the best practice?</p>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 524, "user_id": 2463246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a463a79ce931fc953b4d4907c1d9f5ce?s=128&d=identicon&r=PG", "display_name": "schaazzz", "link": "https://stackoverflow.com/users/2463246/schaazzz"}, "edited": false, "score": 3, "creation_date": 1507689308, "post_id": 46678842, "comment_id": 80305889, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13661912/c-createwindowex-returns-null\">C++ CreateWindowEx returns NULL</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1507716797, "post_id": 46678842, "comment_id": 80318688, "body": "<i>&quot;The code seems fine.&quot;</i> - A compiler warning is hardly ever a reason to believe, that code is fine. You cannot declare a return type, and then not return anything from a function. Any introductory book on C explains that."}], "answers": [{"comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1507705434, "post_id": 46679028, "comment_id": 80311354, "body": "You are referring to WM_CREATE message"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 2, "creation_date": 1507706412, "post_id": 46679028, "comment_id": 80311927, "body": "@Asesh that is one of many messages that <code>CreateWindow&#47;Ex()</code> sends to the window procedure before exiting."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 1, "creation_date": 1507716397, "post_id": 46679028, "comment_id": 80318399, "body": "@Asesh: Given the code in the question, there will be no <code>WM_CREATE</code> message. Window creation terminates before sending that message. The messages sent during window creation are <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632680.aspx\" rel=\"nofollow noreferrer\">documented</a>."}], "tags": [], "owner": {"reputation": 1673, "user_id": 1696283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/akrDF.jpg?s=128&g=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/1696283/mitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1507690308, "creation_date": 1507690308, "answer_id": 46679028, "question_id": 46678842, "link": "https://stackoverflow.com/questions/46678842/c-winapi-hwnd-returning-null/46679028#46679028", "title": "C winapi hwnd returning null", "body": "<p>Your <code>WndProc()</code> function doesn't return anything.  <code>CreateWindowEx()</code> will actually call the window proc with some creation-based messages.</p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n    return DefWindowProc(hwnd, msg, wParam, lParam);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8756031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a23744d55d264909d84dc56db0dbe27?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Popun", "link": "https://stackoverflow.com/users/8756031/hakan-popun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 46679028, "answer_count": 1, "score": 0, "last_activity_date": 1507690308, "creation_date": 1507689095, "question_id": 46678842, "link": "https://stackoverflow.com/questions/46678842/c-winapi-hwnd-returning-null", "title": "C winapi hwnd returning null", "body": "<p>I have tried everything to find the problem, but down below is my code and <code>hwnd</code> returns <code>NULL</code> when I run the program. What might be the reasons? The code seems fine. The program was working fine for a long while until 15 mins ago. I cut this part of the source code and ran it again but it still return NULL. This is that part that I cut.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#define IDI_MYICON 103\n\nLRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam){\n}\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {\n\n//font\n\n/*hFont = CreateFont(40,0,0,0,700,FALSE,FALSE,FALSE,DEFAULT_CHARSET,OUT_OUTLINE_PRECIS, CLIP_DEFAULT_PRECIS,ANTIALIASED_QUALITY, VARIABLE_PITCH,TEXT(\"a\"));\nhFontIpAdres = CreateFont(25,0,0,0,700,FALSE,FALSE,FALSE,DEFAULT_CHARSET,OUT_OUTLINE_PRECIS, CLIP_DEFAULT_PRECIS,ANTIALIASED_QUALITY, VARIABLE_PITCH,TEXT(\"a\"));\nhFontKurbanSecimi = CreateFont(30,0,0,0,700,FALSE,FALSE,FALSE,DEFAULT_CHARSET,OUT_OUTLINE_PRECIS, CLIP_DEFAULT_PRECIS,ANTIALIASED_QUALITY, VARIABLE_PITCH,TEXT(\"a\"));\n*/\n  WNDCLASSEX wc;\n  HWND hwnd;\n  MSG msg;\n\n  char *windowClassName = \"class1\";\n  printf(\"%s\\n\", windowClassName);\n\n  wc.cbSize        = sizeof(WNDCLASSEX);\n  wc.style         = 0;\n  wc.lpfnWndProc   = WndProc;\n  wc.cbClsExtra    = 0;\n  wc.cbWndExtra    = 0;\n  wc.hInstance     = hInstance;\n  wc.hIcon         = LoadIcon(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON));\n  wc.hCursor       = LoadCursor(NULL, IDC_ARROW);\n  wc.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);\n  wc.lpszMenuName  =  NULL;//MAKEINTRESOURCE(IDR_MYMENU);\n  wc.lpszClassName =  windowClassName;\n  wc.hIconSm       =  NULL;//(HICON)LoadImage(GetModuleHandle(NULL), MAKEINTRESOURCE(IDI_MYICON), IMAGE_ICON, 16, 16, 0);\n\n  if(!RegisterClassEx(&amp;wc))\n  {\n    printf(\"window registration failed\\n\");\n  }\n\n   printf(\"%s\\n\", windowClassName);\n  hwnd = CreateWindowEx(\n        WS_EX_CLIENTEDGE, windowClassName,\"TTr\",WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,\n        NULL, NULL, hInstance, NULL\n      );\n  if(hwnd == NULL){\n    printf(\"could not create window hwnd %d\\n\", GetLastError());\n  }\n  ShowWindow(hwnd, SW_SHOW);\n  UpdateWindow(hwnd);\n\n  while(GetMessage(&amp;msg, NULL, 0, 0) &gt; 0){\n    TranslateMessage(&amp;msg);\n    DispatchMessage(&amp;msg);\n  }\n  return msg.wParam;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4354, "user_id": 3339274, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sROPZ.jpg?s=128&g=1", "display_name": "ifconfig", "link": "https://stackoverflow.com/users/3339274/ifconfig"}, "edited": false, "score": 0, "creation_date": 1507688571, "post_id": 46678711, "comment_id": 80305720, "body": "<code>(Base*Height)&#47;2</code>? What is your question?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1507689304, "post_id": 46678711, "comment_id": 80305888, "body": "Mayne you need <a href=\"https://en.m.wikipedia.org/wiki/Heron%27s_formula\" rel=\"nofollow noreferrer\">Heron&#39;s formula</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8749203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea60e58ff3851268447e3dea45c5679?s=128&d=identicon&r=PG&f=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/8749203/fran"}, "edited": false, "score": 0, "creation_date": 1507690511, "post_id": 46678901, "comment_id": 80306211, "body": "Thank you so much, the problem I was having was how to set up area1 and passing it"}], "tags": [], "owner": {"reputation": 1121, "user_id": 8652760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFbhM.jpg?s=128&g=1", "display_name": "Jasmeet", "link": "https://stackoverflow.com/users/8652760/jasmeet"}, "is_accepted": false, "score": 0, "last_activity_date": 1507689471, "creation_date": 1507689471, "answer_id": 46678901, "question_id": 46678711, "link": "https://stackoverflow.com/questions/46678711/how-to-pass-arguments/46678901#46678901", "title": "How to pass arguments", "body": "<p>Didn't completely understand your question but it seems this is what to tend to achieve : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n #include &lt;math.h&gt;\n double calculateArea(double, double, double, double, double, double);\n\n\nint main () {\ndouble x1, x2, x3, y1, y2, y3, area1, premiter1;\nprintf(\"Enter the coordinate planes\");\nscanf(\"%lf\", &amp;x1);\nscanf(\"%lf\", &amp;y1);\nscanf(\"%lf\", &amp;x2);\nscanf(\"%lf\", &amp;y2);\nscanf(\"%lf\", &amp;x3);\nscanf(\"%lf\", &amp;y3);\narea1 = calculateArea(x1, y1, x2, y2, x3, y3);\nprintf(\"Area : %lf\", area1);\nreturn 0;\n}\n\ndouble calculateArea(double x1, double y1, double x2, double y2, double x3, double y3) { \ndouble area;\n//your logic here.\nreturn area;\n\n} \n</code></pre>\n\n<p>Similarly you can work with perimeter.</p>\n"}], "owner": {"reputation": 1, "user_id": 8749203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea60e58ff3851268447e3dea45c5679?s=128&d=identicon&r=PG&f=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/8749203/fran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1507689471, "creation_date": 1507688155, "question_id": 46678711, "link": "https://stackoverflow.com/questions/46678711/how-to-pass-arguments", "title": "How to pass arguments", "body": "<p>Hello I know the code is incomplete but I was trying to find the area of a triangle but I'm having difficulties finding the right function to put and which to return to get an output. I know I'll return the equation but I don't know what I should set area1 = to </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;math.h&gt;\n double calculateArea(double, double, double, double, double, double);\n\n\nint main () {\ndouble x1, x2, x3, y1, y2, y3, area1, premiter1;\nprintf(\"Enter the coordinate planes\");\nscanf(\"%lf\", &amp;x1);\nscanf(\"%lf\", &amp;y1);\nscanf(\"%lf\", &amp;x2);\nscanf(\"%lf\", &amp;y2);\nscanf(\"%lf\", &amp;x3);\nscanf(\"%lf\", &amp;y3);\narea1 =\nprintf(\"Area : %lf\", area1);\nreturn 0;\n}\n\ndouble calculateArea() { \n\nreturn \n\n} \n</code></pre>\n"}, {"tags": ["c", "glib"], "comments": [{"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507688098, "post_id": 46678679, "comment_id": 80305605, "body": "Is this a homework?"}, {"owner": {"reputation": 21, "user_id": 6807681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77eef329940f12ac861537617cc8843a?s=128&d=identicon&r=PG&f=1", "display_name": "Johan Iskandar", "link": "https://stackoverflow.com/users/6807681/johan-iskandar"}, "reply_to_user": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "edited": false, "score": 0, "creation_date": 1507691006, "post_id": 46678679, "comment_id": 80306318, "body": "no it isn&#39;t a home work"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507692241, "post_id": 46678679, "comment_id": 80306602, "body": "<a href=\"https://developer.gnome.org/glib/stable/glib-Doubly-Linked-Lists.html\" rel=\"nofollow noreferrer\">Glib - Glist Example in Description</a> may be useful to you."}], "answers": [{"comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1507692706, "post_id": 46679198, "comment_id": 80306705, "body": "But this is for c, not c++."}, {"owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "reply_to_user": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1507692939, "post_id": 46679198, "comment_id": 80306747, "body": "I said &#39;adapt&#39;, not &#39;copy-paste&#39;. The idea can be seen in that code, the implementation can be rewritten in plain C and for glist structure. OP just has to keep in mind the iterator in the C++ algorithm is the same thing as a pointer to a list item in C."}], "tags": [], "owner": {"reputation": 1004, "user_id": 706900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ca59039affec47872d8f2bbb2fe4bd3b?s=128&d=identicon&r=PG", "display_name": "Jurlie", "link": "https://stackoverflow.com/users/706900/jurlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1507711960, "last_edit_date": 1507711960, "creation_date": 1507691660, "answer_id": 46679198, "question_id": 46678679, "link": "https://stackoverflow.com/questions/46678679/need-the-subtract-of-two-glist-object-in-c/46679198#46679198", "title": "Need the subtract of two glist object in c", "body": "<p>You can review the implementation of <a href=\"http://en.cppreference.com/w/cpp/algorithm/set_difference\" rel=\"nofollow noreferrer\"><code>std::set_difference</code></a> and adapt it for <code>glist</code>.</p>\n\n<p>There is no implementation of set difference within GLib itself.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6807681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77eef329940f12ac861537617cc8843a?s=128&d=identicon&r=PG&f=1", "display_name": "Johan Iskandar", "link": "https://stackoverflow.com/users/6807681/johan-iskandar"}, "is_accepted": true, "score": 1, "last_activity_date": 1507781075, "creation_date": 1507781075, "answer_id": 46701225, "question_id": 46678679, "link": "https://stackoverflow.com/questions/46678679/need-the-subtract-of-two-glist-object-in-c/46701225#46701225", "title": "Need the subtract of two glist object in c", "body": "<pre><code>void glist_deep_copy_g_func(gpointer data, gpointer user_data) {\n    GList** result = user_data;\n    if (data) {\n        *result = g_list_append(*result, strdup(data));\n    }\n    user_data = result;\n}\n\nGList* glist_deep_copy(GList* source) {\n    GList* result = NULL;\n    g_list_foreach(source, &amp;glist_deep_copy_g_func, &amp;result);\n    return result;\n}\n\ngint glib_compare_char_ptr(gconstpointer a, gconstpointer b) {\n    return strcmp(a, b);\n}\n\nGList* glist_subtract(GList* from, GList* by) {\n    GList* result = NULL;\n\n    if (from &amp;&amp; by) {\n        result = glist_deep_copy(from);\n        for (GList *node_from = g_list_first(from); node_from; node_from =\n                g_list_next(node_from)) {\n            for (GList *node_by = g_list_first(by); node_by; node_by =\n                    g_list_next(node_by)) {\n                if (!strcmp(node_from-&gt;data, node_by-&gt;data)) {\n                    GList* node = g_list_find_custom(result, node_from-&gt;data,\n                            &amp;glib_compare_char_ptr);\n                    char* data = node-&gt;data;\n                    result = g_list_remove(result, node-&gt;data);\n                    free(data);\n                }\n            }\n        }\n    } else if (from) {\n        return glist_deep_copy(from);\n    }\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6807681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77eef329940f12ac861537617cc8843a?s=128&d=identicon&r=PG&f=1", "display_name": "Johan Iskandar", "link": "https://stackoverflow.com/users/6807681/johan-iskandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 46701225, "answer_count": 2, "score": -1, "last_activity_date": 1507781075, "creation_date": 1507687909, "question_id": 46678679, "link": "https://stackoverflow.com/questions/46678679/need-the-subtract-of-two-glist-object-in-c", "title": "Need the subtract of two glist object in c", "body": "<p>Assume:</p>\n\n<p>g1 and g2 are a glist objects that holds the following chars (not a char**)</p>\n\n<pre><code>g1 = {\"a\", \"b\", \"c\"};\n\ng2 = {\"b\", \"d\", \"e\"};\n</code></pre>\n\n<p>I need a code using c glist library that returns the subtract of the list;</p>\n\n<pre><code>g3 = subtract (g1, g2);\nshould return \n{\"a\", \"c\");\n\ng4 = subtract (g2, g1);\nshould return \n{\"d\", \"e\");\n</code></pre>\n"}, {"tags": ["c", "binary", "precision", "arbitrary-precision", "numerical-computing"], "comments": [{"owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "edited": false, "score": 0, "creation_date": 1507682322, "post_id": 46677966, "comment_id": 80304254, "body": "Interesting. I have no idea"}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 0, "creation_date": 1507683039, "post_id": 46677966, "comment_id": 80304399, "body": "Actually you can not compare double numbers like strings. There are always floating point errors."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507683608, "post_id": 46677966, "comment_id": 80304521, "body": "I got different result, <a href=\"http://rextester.com/ZSM95350\" rel=\"nofollow noreferrer\">rextester.com/ZSM95350</a>. Well maybe your system use strange float representation. This is strange because your operations are in the same order so the result should be the same. What ever never test floating number equality."}, {"owner": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507684368, "post_id": 46677966, "comment_id": 80304719, "body": "Can the problem be related about the compiler?"}], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507684059, "post_id": 46678105, "comment_id": 80304628, "body": "And what way has better accuracy? Thanks for answering"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1507683352, "creation_date": 1507683352, "answer_id": 46678105, "question_id": 46677966, "link": "https://stackoverflow.com/questions/46677966/why-does-this-code-return-two-different-values-doing-the-same/46678105#46678105", "title": "Why does this code return two different values doing the same?", "body": "<p>The answer is because in the float numbers calculations the equation a=b<em>c</em>d<em>e does not have to be equal to x = b</em>c y = d<em>e and a.= x</em>y. </p>\n\n<p>It is because floating point arithmetic has a limited precision. </p>\n"}, {"comments": [{"owner": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507688205, "post_id": 46678244, "comment_id": 80305627, "body": "How can I see the value of my <code>FLT_EVAL_METHOD</code>?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507696505, "post_id": 46678244, "comment_id": 80307647, "body": "<code>#include &lt;float.h&gt; #include &lt;stdio.h&gt; int main(void) { printf(&quot;%d\\n&quot;, (int)FLT_EVAL_METHOD); }</code>"}, {"owner": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507729273, "post_id": 46678244, "comment_id": 80327237, "body": "I don&#39;t know why, but I get an error: &#39;FLT_EVAL_METHOD&#39; undeclared. I also tested the code using long double precision, I got -629.47620126173786 for both outputs"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "edited": false, "score": 0, "creation_date": 1507764241, "post_id": 46678244, "comment_id": 80345540, "body": "@Rafael If you&#39;re using gcc or clang, make sure to try it with the <code>-std=c99</code> or <code>-std=c11</code> flag."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1507684438, "creation_date": 1507684438, "answer_id": 46678244, "question_id": 46677966, "link": "https://stackoverflow.com/questions/46677966/why-does-this-code-return-two-different-values-doing-the-same/46678244#46678244", "title": "Why does this code return two different values doing the same?", "body": "<p>The C Standard (99 and 11) says:</p>\n\n<blockquote>\n  <p>The values of operations with floating operands and values subject to the usual arithmetic conversions and of floating constants are evaluated to a format whose range and precision may be greater than required by the type.</p>\n</blockquote>\n\n<p>So in an expression such as <code>h*(X+Y)</code> as you have in the assignment to <code>b</code>, the implementation is allowed to use greater precision for the intermediate result of <code>X+Y</code> than can possibly be stored in a <code>double</code>, even though the type of the subexpression is still considered to be <code>double</code>.  But in <code>a=X+Y; a=h*a;</code>, the first assignment forces the value to be one that actually can be stored in a <code>double</code>, causing a slightly different result.</p>\n\n<p>Another possibility is that the compiler has done \"floating point contraction\".  To quote the C Standard again,</p>\n\n<blockquote>\n  <p>A floating expression may be <em>contracted</em>, that is, evaluated as though it were an atomic operation, thereby omitting rounding errors implied by the source code and the expression evaluation method.</p>\n</blockquote>\n\n<p>This would most likely happen if the processor has a single instruction that can do a floating point addition and then a multiplication in one step, and the compiler decided to use it.</p>\n\n<p>Assuming one or both of these is the cause, your value <code>b</code> is likely a more accurate representation of the computation you specified (given that all the inputs were restricted to values which can be represented in a <code>double</code>).</p>\n\n<p>The cppreference page about macro <a href=\"http://en.cppreference.com/w/c/types/limits/FLT_EVAL_METHOD\" rel=\"nofollow noreferrer\"><code>FLT_EVAL_METHOD</code></a> discusses both of these issues in a little more detail.  It may be interesting to find out your value of <code>FLT_EVAL_METHOD</code> and play with <code>#pragma STDC FP_CONTRACT OFF</code>.</p>\n"}], "owner": {"reputation": 392, "user_id": 8576423, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1fDnZ.png?s=128&g=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/8576423/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 46678244, "answer_count": 2, "score": 4, "last_activity_date": 1594661369, "creation_date": 1507682236, "last_edit_date": 1507683401, "question_id": 46677966, "link": "https://stackoverflow.com/questions/46677966/why-does-this-code-return-two-different-values-doing-the-same", "title": "Why does this code return two different values doing the same?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    double a;\n    double b;\n    double q0 = 0.5 * M_PI + 0.5 * -2.1500000405000002;\n    double q1 = 0.5 * M_PI + 0.5 * 0.0000000000000000;\n    double w0 = 0.5 * M_PI + 0.5 * -43000.0008100000050000;\n    double w1 = 0.5 * M_PI + 0.5 * -0.0000000000000000;\n    double m = 1;\n    double g = 43000000.81;\n    double l1 = 0.1;\n    double l2 = 0.1;\n    double h = 0.0001;\n\n    a = ((-g / l1) * sin(q0) + (sin(q1 - q0) * (cos(q1 - q0) * (w0 * w0 + (g / l1) * cos(q0)) + l2 * (w1 * w1 / l1))) / (m + pow(sin(q1 - q0), 2)));\n    a = h * a;\n\n    b = h * ((-g / l1) * sin(q0) + (sin(q1 - q0) * (cos(q1 - q0) * (w0 * w0 + (g / l1) * cos(q0)) + l2 * (w1 * w1 / l1))) / (m + pow(sin(q1 - q0), 2)));\n\n    printf(\"%.20lf \", a);\n    printf(\"%.20lf\", b);\n    return 0;\n}\n</code></pre>\n\n<p>I do the same calculations with a and b, just with the difference that I get the value of a in two steps, and the b in one.</p>\n\n<p>My code returns:\n-629.47620126173774000000 -629.47620126173763000000</p>\n\n<p>What is the reason of the difference between the two last decimals?</p>\n"}, {"tags": ["c", "loops", "for-loop", "valgrind"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1507677464, "post_id": 46677350, "comment_id": 80303123, "body": "&#39;cant_corte[i-1]&#39; - UB for i=0"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1507677607, "post_id": 46677350, "comment_id": 80303170, "body": "<code>strv[cant + 2] = NULL;</code> : this occurs out-of-bounds."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1507677694, "post_id": 46677350, "comment_id": 80303191, "body": "@DavidC.Rankin What? <code>strv</code> is a return value of <code>malloc</code>, which certainly is testable. <code>if (*strv == NULL)</code> would be something different, and valgrind would be totally correct to complain about that."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1507677724, "post_id": 46677350, "comment_id": 80303205, "body": "Your first two <code>for</code> loops are only using even indices <code>i</code>. Was that intentional?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507677890, "post_id": 46677350, "comment_id": 80303254, "body": "@DavidC.Rankin I&#39;m fairly familiar with valgrind, have never seen this malloc-in-valgrind bug you&#39;re talking about, and can&#39;t reproduce it."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1507678743, "post_id": 46677350, "comment_id": 80303465, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/156398/discussion-between-aschepler-and-david-c-rankin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1507681912, "post_id": 46677350, "comment_id": 80304172, "body": "@aschepler - I have been working on a test case, and I have hit this at least 100 times, but I cannot reproduce it on <code>valgrind-3.11.0</code> as I thought I could, it must have been on an earlier version. I stand corrected."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7385276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1591245897558151/picture?type=large", "display_name": "Martin Curzel", "link": "https://stackoverflow.com/users/7385276/martin-curzel"}, "edited": false, "score": 0, "creation_date": 1507684440, "post_id": 46677427, "comment_id": 80304733, "body": "I&#39;ve gone crazy and the thing is that i was using a while before the forloop, and didnt chage the i++ really sorry for wasting your time"}, {"owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "reply_to_user": {"reputation": 19, "user_id": 7385276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1591245897558151/picture?type=large", "display_name": "Martin Curzel", "link": "https://stackoverflow.com/users/7385276/martin-curzel"}, "edited": false, "score": 0, "creation_date": 1507821908, "post_id": 46677427, "comment_id": 80373143, "body": "Not a waste of my time, simple mistakes are the hard ones sometimes."}], "tags": [], "owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "is_accepted": true, "score": 1, "last_activity_date": 1507677720, "creation_date": 1507677720, "answer_id": 46677427, "question_id": 46677350, "link": "https://stackoverflow.com/questions/46677350/why-my-program-skips-a-for-cicle-c/46677427#46677427", "title": "Why my program skips a for cicle? C", "body": "<p>If you do not want your <code>i</code> variable to continue to increment, then make sure in your for loop you do not increment <code>i</code>, and instead depend on the for loop to do its' job. ( increment i every time the condition is true ).</p>\n"}], "owner": {"reputation": 19, "user_id": 7385276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1591245897558151/picture?type=large", "display_name": "Martin Curzel", "link": "https://stackoverflow.com/users/7385276/martin-curzel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 46677427, "answer_count": 1, "score": -1, "last_activity_date": 1507677720, "creation_date": 1507677133, "question_id": 46677350, "link": "https://stackoverflow.com/questions/46677350/why-my-program-skips-a-for-cicle-c", "title": "Why my program skips a for cicle? C", "body": "<p>im trying to code a function that splits a string onto multiple ones, i know I have alot of allocated space not freed, I'm just testing this bit but valgrind displays me </p>\n\n<pre><code> Conditional jump or move depends on uninitialised value(s)  \n==25613==    at 0x4C2DB3C: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)  \n==25613==    by 0x40090C: split (strutil.c:32)  \n==25613==    by 0x400A00: main (strutil.c:45)  \n==25613==  Uninitialised value was created by a stack allocation  \n==25613==    at 0x400720: split (strutil.c:9)  \n</code></pre>\n\n<p>a few similar errors and then sigsem and closes. my concern is that when i run it with gdb in that for circle thats supposed to count the ',' it circles as expected until it reaches the value ',' then skips entire cicle but the i++ and keeps going. Why does it do that? I watched over gdb and all the parameters (str[i] , sep) have the correct values inside at the moment before the conditional.</p>\n\n<pre><code>#include \"strutil.h\"\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar** split(const char* str, char sep){\nsize_t cant = 2;\nsize_t i;\nfor(i = 0; i &lt; strlen(str); i++){//this is line 9\n    if(str[i] == sep)\n        cant ++;\n    i++;\n}\nsize_t corte[cant];\ni = 0;\ncorte[0] = 0;\nsize_t j = 1;\nsize_t cant_corte[cant];\nfor(i = 0; i &lt; strlen(str); i++){\n    if(str[i] == sep){\n        corte[j] = i + 1;\n        cant_corte[j - 1] = corte[j] - corte[j - 1];\n        //printf(\"pasa\\n\"); \n        j++;\n    }\n    printf(\"pasa\\n\"); \n    i++;\n}\nchar** strv = malloc(sizeof(char*) * cant);\n    if (strv == NULL)return NULL;\nfor(i=0; i &lt; cant; i++){\n    strv[i] = malloc(sizeof(char) * cant_corte[i]);\n    if (strv[i] == NULL)return NULL;\n    strncpy(strv[i], str + corte[i], cant_corte[i-1]);\n    strcat(strv[i], \"\\0\");\n}\nstrv[cant + 2] = NULL;\nreturn strv;\n}\n\nint main(){\nchar* eje = \"abc,defg\";\nprintf(\"%s\\n\", eje);\nchar r = ',';\nchar** prueba = split(eje, r);\nprintf(\"%s\\n\", prueba[0]);\ngetchar();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "kernel", "netfilter"], "comments": [{"owner": {"reputation": 5875, "user_id": 2702398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87402651ed56717034035915b95c1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "oakad", "link": "https://stackoverflow.com/users/2702398/oakad"}, "edited": false, "score": 0, "creation_date": 1507691404, "post_id": 46677185, "comment_id": 80306400, "body": "Are you sure you want to integrate anything into kernel? What&#39;s wrong with using the <code>conntrack-tools</code> to delete/manage whatever (<a href=\"http://conntrack-tools.netfilter.org/manual.html\" rel=\"nofollow noreferrer\">conntrack-tools.netfilter.org/manual.html</a>)?"}, {"owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "reply_to_user": {"reputation": 5875, "user_id": 2702398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87402651ed56717034035915b95c1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "oakad", "link": "https://stackoverflow.com/users/2702398/oakad"}, "edited": false, "score": 0, "creation_date": 1507724479, "post_id": 46677185, "comment_id": 80323598, "body": "I have to cross build conntrack and dependencies. It takes spaces in my device. And I want only to remove some conntrack that&#39;s all"}, {"owner": {"reputation": 5875, "user_id": 2702398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87402651ed56717034035915b95c1ae0?s=128&d=identicon&r=PG&f=1", "display_name": "oakad", "link": "https://stackoverflow.com/users/2702398/oakad"}, "edited": false, "score": 0, "creation_date": 1507786214, "post_id": 46677185, "comment_id": 80351148, "body": "If I remember correctly, conntrack is controlled via a netlink socket. So technically you can write a really small C program using the appropriate netlink messages to do exactly what you need (taking conntrack-tools as reference). You can, of course, patch the kernel if you feel like it - there are quite a few tutorials around on writing Linux driver which will be helpful to get the idea about the kernel compilation process."}], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507675899, "creation_date": 1507675899, "question_id": 46677185, "link": "https://stackoverflow.com/questions/46677185/how-to-delete-conntrack-in-kernel", "title": "How to delete conntrack in kernel", "body": "<p>I found the following code that delete netfilter conntrack in the kernel</p>\n\n<pre><code>int delete_nat_entry(u32 loc_ip, u32 rem_ip, u16 loc_port, u16 rem_port) {\n        struct nf_conntrack_tuple_hash *h;\n        struct nf_conntrack_tuple tuple;\n        struct nf_conn *ct;\n\n        memset(&amp;tuple, 0, sizeof(tuple));\n\n        //layer 3\n        tuple.src.l3num = PF_INET;\n        tuple.src.u3.ip = htonl(loc_ip);\n        tuple.dst.u3.ip = htonl(rem_ip);\n\n        //layer 4\n        tuple.dst.protonum = IPPROTO_TCP;\n        tuple.dst.dir = IP_CT_DIR_ORIGINAL;\n        tuple.src.u.tcp.port = htons(loc_port);\n        tuple.dst.u.tcp.port = htons(rem_port);\n\n        h = nf_conntrack_find_get(&amp;init_net, NF_CT_DEFAULT_ZONE, &amp;tuple);\n        if (!h) {\n                debug_msg(KERN_INFO \"cannot find conntrack tuple\\n\");\n                return -ENOENT;\n        }\n        ct = nf_ct_tuplehash_to_ctrack(h);\n\n        if (del_timer(&amp;ct-&gt;timeout))\n                nf_ct_delete(ct, 0, 0);\n\n        nf_ct_put(ct);\n\n        return 0;\n}\n</code></pre>\n\n<p>But I do not know how to integrate in the kernel ?\nand how to call it from user space?</p>\n"}, {"tags": ["c", "networking", "server", "client"], "comments": [{"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1507673585, "post_id": 46676748, "comment_id": 80302032, "body": "thanks for your response. My specific problem is figuring out how to send an error message back to the client to print out. (i.e. Server Error: file doesn&#39;t exist). if I send the message directly, client receives something and stores it where the file&#39;s going to be stored. Don&#39;t want that, so I was wondering if there is some way for the server to indicate to the client that the file doesn&#39;t exist and the client printing out that this error occurred on the server side. Thanks"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1507673716, "post_id": 46676748, "comment_id": 80302070, "body": "In that case, <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">open</a> will return a value which is negative. Check the <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">errno</a> and if it is the case of a file not found, return some value to client, and make client check its return values before it writes to the file ? If the file doesn&#39;t exists, then the Open system call in the server will fail and errno will be set to <b>ENOENT</b>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 5, "creation_date": 1507673882, "post_id": 46676748, "comment_id": 80302135, "body": "you need an application protocol. That is, a set of messages/responses the client and server expect to see from each other. For your small project here, it doesn&#39;t have to be very complicated."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1507673906, "post_id": 46676748, "comment_id": 80302147, "body": "It may help to look at the documentation for application protocols that already support the features you want, such as HTTP and FTP."}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 1, "creation_date": 1507675334, "post_id": 46676748, "comment_id": 80302577, "body": "ah ok. so I should only recv if there&#39;s no error message on the server. I&#39;ll look up the documentation for the application protocols. I was thinking I needed to store the errno in something and send it back to client when they recv and when recv returns number of bytes returned which I want to be -1 because no file exists, but it returns 0 because no file was sent, lol."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1507683166, "post_id": 46676748, "comment_id": 80304426, "body": "You&#39;ll never know if there was an error on the server side unless you receive it in the client. <code>recv()</code> returned zero because the peer closed the cionnection."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1507683384, "post_id": 46676748, "comment_id": 80304472, "body": "Imagine it like the post; at the moment it sounds like the server sends you a blank letter if it can&#39;t find the file. You want it to send a letter saying &quot;Error: Can&#39;t find file&quot;."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1507683411, "post_id": 46676748, "comment_id": 80304479, "body": "But then how would you tell the difference between whether the server couldn&#39;t find the file, and whether it <b>could</b> find the file but some joker put the words &quot;Error: Can&#39;t find file&quot; in the file?"}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507687823, "post_id": 46676748, "comment_id": 80305546, "body": "Thanks guys for your ideas. I just added the whole code so you can get the whole picture of what I&#39;m trying to do. As stated before, everything works perfectly. However one of the requirements is that all error messages display on the client side in the format Server Error: or Client Error: I looked into those protocols and seem a little out of scope for this class. the only hint my teacher gave us is read the man pages, which I&#39;ve done and can&#39;t find anything applicable. Also, looked through Beej&#39;s. Maybe with the whole picture here, someone could point me in the right direction. Thanks"}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507693383, "post_id": 46676748, "comment_id": 80306840, "body": "Sorry for the long posts guys. I just wanted to add that another reason I need to get the error back to client is because if file doesn&#39;t exist in server, both sides should close. The client side tries to open a file and if it never got a file, it still creates a blank one. It&#39;s only supposed to create a file if it receives one and it doesn&#39;t exist on the client side."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507707918, "post_id": 46681790, "comment_id": 80312785, "body": "ah ok I see what you&#39;re saying. I&#39;m slightly confused on how I would implement receive then. Whatever is received is stored in char buf array and recv returns the numbers of bytes received (or -1 on failure). There may be anything in the file I&#39;m receiving. How would I differentiate if it&#39;s the file I&#39;m receiving or an error code. For example, if I used -1 because that&#39;s indication of failure on receiving a file, it would treat it as something to store in buf and write it to a new file."}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "reply_to_user": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507708412, "post_id": 46681790, "comment_id": 80313169, "body": "If <code>recv()</code> returns -1 (as its return value), then there&#39;s no point inspecting any data that got placed into its buffer -- an error of some sort has occurred, outside of your communication protocol. Your client just needs to report this, perhaps querying <code>errno</code> for more details. My proposal is to put a success/failure code into the data returned by your server, perhaps as the first byte. The client would treat all the returned data as data, except the first byte, which is the success/failure code. This mechanism of reporting status is <i>in addition to</i> anything provided by the <code>recv()</code> call."}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507708749, "post_id": 46681790, "comment_id": 80313383, "body": "ah ha I got it. Before my while loop, I called recvx and if it equals 0 right off the bat, then I didn&#39;t receive anything and I can exit. But what if it&#39;s an empty file? Would that still have some bytes to transfer even if the file&#39;s blank?"}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507708907, "post_id": 46681790, "comment_id": 80313475, "body": "ah ok good to know. The first byte I&#39;d be sending back would be located in filename[0], (buf[0] on the receiving end)? I printed that value out when i tried to store errno into that and kept getting garbage characters. And hardcoding in error numbers to send back yield compiler errors. need const *void as argument."}, {"owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "reply_to_user": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507709255, "post_id": 46681790, "comment_id": 80313701, "body": "Try storing errno+32, and then subtracting 32 on the receiving end. That will shift the errno value into the displayable ASCII range. This is a bit cheeky because, in principle, errno values could be too large to fit into a single byte. More elegantly, perhaps, write errno as a four-digit hex number, and use the first four bytes of your returned data for that value. At any rate, a gibberish display does not, by itself, indicate a problem -- errno values are usually two small to be treated as displayable characters."}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507771719, "post_id": 46681790, "comment_id": 80347273, "body": "thanks for your response. I got some more hints from my professor. He said I don&#39;t need to send the error message back to the client. I need the client to detect that the server has closed the socket (after I see that the file doesn&#39;t exist I close the socket on the server side). I can&#39;t figure out how to determine if the remote socket has closed. If I just simply read or write from &quot;s&quot;, the client sides still open and executes accordingly. Is there a new function to check the status of the server socket (new_s)?"}, {"owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "edited": false, "score": 0, "creation_date": 1507772099, "post_id": 46681790, "comment_id": 80347356, "body": "oh h wait, just reading up on read() some more and it says that 0 indicates the socket was closed. I was thinking that would be -1, but it&#39;s technically not an error. It means the socket was closed properly (orderly shutdown)"}], "tags": [], "owner": {"reputation": 3725, "user_id": 8471208, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zX6iRd9pmRI/AAAAAAAAAAI/AAAAAAAAAgE/F3-J9H4ZCno/photo.jpg?sz=128", "display_name": "Kevin Boone", "link": "https://stackoverflow.com/users/8471208/kevin-boone"}, "is_accepted": false, "score": 0, "last_activity_date": 1507705321, "creation_date": 1507705321, "answer_id": 46681790, "question_id": 46676748, "link": "https://stackoverflow.com/questions/46676748/c-program-file-transfer-printing-out-server-side-errors-on-client-side/46681790#46681790", "title": "C program file transfer, printing out server side errors on client side", "body": "<p>Essentially what you're implementing is something along the lines of what HTTP and FTP servers do. Both have specific, but rather different, protocol steps for handling errors. The HTTP case is easy to understand -- the server doesn't just send back the file: it sends back a bunch of headers, then the file. The client can inspect the headers to know whether there is any file data to follow.</p>\n\n<p>In a very simple case, I suspect you could implement something similar in your code without too much work -- just have the server send a one-byte response code before the rest of the file. You could have 0 (for example) to indicate that a valid file follows, and other numbers to indicate particular error conditions. The client would just read the data as it currently does, but if the first byte isn't zero, it knows that nothing else that follows (if anything does) is valid.</p>\n\n<p>Or you could arrange that if the first byte was not zero, the text that follows is not the expected file, but an error message, which should be displayed by the client.</p>\n\n<p>You could extent such a scheme with as much complexity as you like, until you end up with HTTP :)</p>\n"}], "owner": {"reputation": 379, "user_id": 5763833, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/ade086bb80c54b1a3fe567d5fd9720e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike1982", "link": "https://stackoverflow.com/users/5763833/mike1982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507705321, "creation_date": 1507672989, "last_edit_date": 1507687566, "question_id": 46676748, "link": "https://stackoverflow.com/questions/46676748/c-program-file-transfer-printing-out-server-side-errors-on-client-side", "title": "C program file transfer, printing out server side errors on client side", "body": "<p>I'm creating a program that requests a file from a server and sends back the file, creating a new file and writing the contents of that file into the new file. Everything is working perfectly except server side error messages (i.e. file doesn't exist) should be printed on the client side. Can anyone give me a clue on how to accomplish this? I'm new to C, but willing to learn more. My main problem is that if I send the message directly, the client side doesn't know that it's an error and is going to finish out and create a file and write the message into that file. I was thinking I need to send back a -1, so when client calls recv, it gets back -1 as the length and prints a message.</p>\n\n<p>Here's my client:</p>\n\n<pre><code>  ssize_t recvx(int sockfd, void *buf, size_t len) {\n    int var = recv(sockfd, buf, len, 0);\n    if(var != -1)\n    {\n      return var;\n    } else {\n      printf(\"%s \\n\",\"Did not receive.\");\n      exit(1);\n    }\n  }\n\n  int main(int argc, char *argv[])\n  {\n    char buf[MAX_LINE];\n    struct addrinfo hints;\n    struct addrinfo *rp, *result;\n    int bytes_received;\n    int s;\n    char *server;\n    char *port;\n    char *file;\n    int fd = -1; //file descriptor\n    int bytes_written;\n\n    if (argc==4)\n    {\n      server = argv[1];\n      port = argv[2];\n      file = argv[3];\n    }\n    else\n    {\n      fprintf(stderr, \"invalid # of arguments\\n\");\n      exit(1);\n    }\n\n    /* Translate host name into peer's IP address */\n    memset(&amp;hints, 0, sizeof(hints));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = 0;\n    hints.ai_protocol = 0;\n\n    if ((s = getaddrinfo(server, port, &amp;hints, &amp;result)) != 0 )\n    {\n      fprintf(stderr, \"%s: getaddrinfo: %s\\n\", argv[0], gai_strerror(s));\n      exit(1);\n    }\n\n    /* Iterate through the address list and try to connect */\n    for (rp = result; rp != NULL; rp = rp-&gt;ai_next)\n    {\n      if ((s = socket(rp-&gt;ai_family, rp-&gt;ai_socktype, rp-&gt;ai_protocol)) == -1 )\n      {\n        continue;\n      }\n      if (connect(s, rp-&gt;ai_addr, rp-&gt;ai_addrlen) != -1)\n {\n        break;\n      }\n      close(s);\n    }\n\n    if (rp == NULL)\n    {\n      perror(\"stream-talk-client: connect\");\n      exit(1);\n    }\n    freeaddrinfo(result); \n    /*send lines of text */ \n   send(s, file, sizeof(file), 0);\n\n\n   while(bytes_received != 0)\n    {\n      bytes_received = recvx(s, buf, 20);\n      if(bytes_received == -1)\n      {\n        fprintf(stderr, \"Client Error: Error receiving file \\n\");\n        exit(1);\n      } else {\n        if(fd == -1)\n        {\n          fd = open(file, O_RDWR | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR);\n          if(fd == -1)\n          {\n           fprintf(stderr,\"Client Error: Open failed \\n\");\n           exit(1);\n         }\n         bytes_written = write(fd,buf,bytes_received);\n         if(bytes_written == -1)\n         {\n           fprintf(stderr,\"%s \\n\", \"Client Error: Write error\");\n           exit(1);\n         }\n       } else {\n         bytes_written = write(fd,buf,bytes_received);\n         if(bytes_written == -1)\n         {\n           fprintf(stderr,\"%s \\n\", \"Client Error: Write error\");\n           exit(1);\n         }\n       }\n     }\n   }\n   if(close(fd) != 0)\n   {\n     printf(\"%s \\n\", \"Client Error: File did not close successfully\");\n     exit(1);\n   }\n\n\n   close(s);\n\n   return 0;\n }  \n</code></pre>\n\n<p>Here's my server:</p>\n\n<pre><code>int main(int argc, char *argv[])\n  {\n    struct addrinfo hints;\n    struct addrinfo *rp, *result;\n    char filename[MAX_LINE];\n    int s, new_s;\n    int bytes_transferred;\n    int fd; //file descriptor\n    struct stat statBuffer; //to hold file info\n    off_t offset = 0;\n\n    /* Build address data structure */\n    memset(&amp;hints, 0, sizeof(struct addrinfo));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = AI_PASSIVE;\n    hints.ai_protocol = 0;\n    hints.ai_canonname = NULL;\n    hints.ai_addr = NULL;\n    hints.ai_next = NULL;\n\n    /* Get local address info */\n    if ((s = getaddrinfo(NULL, argv[1], &amp;hints, &amp;result)) != 0 )\n    {\n      fprintf(stderr, \"%s: getaddrinfo: %s\\n\", argv[0], gai_strerror(s));\n      exit(1);\n    }\n\n    /* Iterate through the address list and try to perform passive open */\n    for (rp = result; rp != NULL; rp = rp-&gt;ai_next)\n    {\n      if ((s = socket(rp-&gt;ai_family, rp-&gt;ai_socktype, rp-&gt;ai_protocol)) == -1 )\n      {\n        continue;\n      }\n\n      if (!bind(s, rp-&gt;ai_addr, rp-&gt;ai_addrlen))\n      {\n        break;\n      }\n      close(s);\n    }\n    if (rp == NULL)\n    {\n      perror(\"stream-talk-server: bind\");\n      exit(1);\n    }\n    if (listen(s, MAX_PENDING) == -1)\n    {\n      perror(\"stream-talk-server: listen\");\n      close(s);\n      exit(1);\n    }\n\n    freeaddrinfo(result);\n\n    /* Wait for connection, then receive and print text */\n    while(1)\n     { \n      if ((new_s = accept(s, rp-&gt;ai_addr, &amp;(rp-&gt;ai_addrlen))) &lt; 0)\n      {\n        perror(\"stream-talk-server: accept\");\n        close(s);\n        exit(1);\n      }\n      while(bytes_transferred == recv(new_s,filename,sizeof(filename),0))\n      {\n        if(bytes_transferred == -1)\n        {\n          fprintf(stderr, \"Server Error: Error receiving filename \\n\");\n          exit(1);\n        }\n      }\n      printf(\"%s \\n\", filename);\n      fd =open(filename,O_RDONLY);\n\n      if(fd &lt; 0)\n      {\n        fprintf(stderr,\"Server Error: file doesn't exist\\n\");\n        exit(1);\n     }\n     else\n     {\n       printf(\"%s \\n\",\"file opened successfully\");\n     }\n     /*get info from file descriptor (fd) and store it in statBuffer struct */\n     fstat(fd, &amp;statBuffer);\n     bytes_transferred = sendfile(new_s,fd,&amp;offset,statBuffer.st_size);\n     if(bytes_transferred == -1)\n     {\n       fprintf(stderr, \"Server Error: File not transferred successfully\");\n     }\n     else\n     {\n       printf(\"%s \\n\", \"File transferred successfully\");\n     }\n     if(close(fd) != 0)\n     {\n       fprintf(stderr, \"Server Error: File not close successfully\");\n     }\n     else{\n       break;\n     }\n   }\n   close(new_s);\n\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "embedded", "interrupt", "volatile"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507672526, "post_id": 46676584, "comment_id": 80301593, "body": "the <code>volatile</code> in your case is essential. It is making the difference when the variable is accessed from the interrupt. This way the compiler knows that there is something is accessing and modifying the variable which is not known to it. Otherwise your &quot;getter&quot; will (might) return a constant, initial value of the variable."}, {"owner": {"reputation": 186, "user_id": 8657938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7924493761f5c1e272185206b329bfe2?s=128&d=identicon&r=PG&f=1", "display_name": "Krassi Em", "link": "https://stackoverflow.com/users/8657938/krassi-em"}, "edited": false, "score": 0, "creation_date": 1507672742, "post_id": 46676584, "comment_id": 80301688, "body": "<a href=\"https://stackoverflow.com/questions/5822386/the-volatile-keyword-in-c-language\" title=\"the volatile keyword in c language\">stackoverflow.com/questions/5822386/&hellip;</a>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1507672789, "post_id": 46676584, "comment_id": 80301714, "body": "The getter function might get inlined. There might be cache coherency issues that might exhibit themselves as non-deterministic behavior."}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507673021, "post_id": 46676584, "comment_id": 80301803, "body": "@EugeneSh. Thanks for your comment! Would you mind adding an answer explaining why the getter does not make any difference?"}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1507673031, "post_id": 46676584, "comment_id": 80301810, "body": "@jxh Thanks for your comment! Would you mind adding an answer explaining why the getter does not make any difference?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507673163, "post_id": 46676584, "comment_id": 80301881, "body": "Even with the <code>volatile</code>, <code>clock_ticks++;</code> is not an atomic operation.  There&#39;s no guarantee in C that you&#39;ll see a coherent value.  Your <i>platform</i> may give you that guarantee, but the language doesn&#39;t.  For example, a 16-bit platform might not even give atomic <i>read</i> access to a <code>uint32_t</code>."}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1507673461, "post_id": 46676584, "comment_id": 80301990, "body": "@AndrewHenle Thanks for the hint. Yeah, the platform is a 32-bit platform."}], "answers": [{"comments": [{"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "edited": false, "score": 0, "creation_date": 1507674000, "post_id": 46676869, "comment_id": 80302179, "body": "Thanks for the answer. Will wait until tomorrow before accepting in case someone wants to add something here. ^^"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507674420, "post_id": 46676869, "comment_id": 80302304, "body": "The code shown is from a file <code>clock.c</code> and includes a header <code>clock.h</code>.  Code using the clock functions (e.g. the file containing <code>main()</code>) would only include the header and there&#39;d be no opportunity for inlining either function.  Of course, there&#39;s nothing to stop the OP from including the <code>clock.c</code> file, but that isn&#39;t what would be expected.  (The code also doesn&#39;t show how the interrupts are set up, etc.)"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507674570, "post_id": 46676869, "comment_id": 80302354, "body": "@JonathanLeffler You assume we&#39;ve seen all of &quot;clock.c&quot;? I don&#39;t necessarily do. There&#39;s a difference in optimising options when <code>get_clock_ticks()</code> is called from outside or inside &quot;clock.c&quot; (Which makes matters even worse because &quot;doesn&#39;t work&quot; mutates to &quot;seems to work sometimes&quot;)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507674790, "post_id": 46676869, "comment_id": 80302425, "body": "Actually, I point out that we probably haven&#39;t seen all of <code>clock.c</code>.  What I&#39;m getting at is that <code>clock.c</code> is probably a source file for a set of library functions, and the consumers of the the functionality provided are in other source files altogether, and those files do not get to see the source for these functions, so there isn&#39;t a chance to inline the code.  Of course, the OP may be writing their whole program in <code>clock.c</code>; I&#39;m suggesting that it is unlikely (not least because there&#39;s no point in the <code>clock.h</code> header if no other file uses the functions defined in <code>clock.c</code>)."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507674923, "post_id": 46676869, "comment_id": 80302466, "body": "Agree it&#39;s unlikely all of the program is in &quot;clock.c&quot;. But neither you nor I can be 100% sure <code>get_clock_ticks()</code> is never called from inside &quot;clock.c&quot;? As soon as it is, it&#39;s likely to be optimized away."}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "edited": false, "score": 0, "creation_date": 1507675060, "post_id": 46676869, "comment_id": 80302503, "body": "In this particular case <code>get_clock_ticks()</code> is not called from inside &quot;clock.c&quot;. The main code is outside <code>clock.c</code> and there is a <code>clock.h</code> with the non-static function headers declared, which is the one included in other files. Anyway I was interested also in this discussion you are having: knowing which cases could be considered (even though I now understand that generally I cannot assume the &quot;getter&quot; function helps at all). :-)"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507675221, "post_id": 46676869, "comment_id": 80302542, "body": "In this case, you&#39;re safe. But you&#39;d be safer against further modifications of &quot;clock.c&quot; if you&#39;d use <code>volatile</code> (especially as it comes at no cost whatsoever)"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1507675815, "post_id": 46676869, "comment_id": 80302699, "body": "An interesting question would be what link-time optimization is allowed to do here. I must admit I don&#39;t know."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1507675910, "post_id": 46676869, "comment_id": 80302724, "body": "@tofro: Anything that doesn&#39;t change the semantics of the program."}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": true, "score": 2, "last_activity_date": 1507674243, "last_edit_date": 1507674243, "creation_date": 1507673801, "answer_id": 46676869, "question_id": 46676584, "link": "https://stackoverflow.com/questions/46676584/c-using-static-volatile-with-getter-function-and-interruptions/46676869#46676869", "title": "C: Using static volatile with &quot;getter&quot; function and interruptions", "body": "<p>A getter function doesn't help in any way here over using <code>volatile</code>.</p>\n\n<ul>\n<li>Assume the compiler sees you've just fetched the value two lines above and not changed it since then.</li>\n<li>If it's a good optimizing compiler, I would expect it to see the function call has no side effect simply optimize out the function call. </li>\n</ul>\n\n<p>If <code>get_clock_ticks()</code> would be <code>external</code> (i.e. in a separate module), matters are different (maybe that's what you remember).</p>\n\n<p>Something that can change its value outside normal program flow (e.g. in an ISR), should <strong>always</strong> be declared <code>volatile</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "edited": false, "score": 0, "creation_date": 1509630241, "post_id": 47075254, "comment_id": 81102003, "body": "Thanks. Yeah, it is a 32-bit ARM."}], "tags": [], "owner": {"reputation": 96, "user_id": 8713143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b515663f5d70775ad31c7b8b426e932a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8713143/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1509625476, "creation_date": 1509625476, "answer_id": 47075254, "question_id": 46676584, "link": "https://stackoverflow.com/questions/46676584/c-using-static-volatile-with-getter-function-and-interruptions/47075254#47075254", "title": "C: Using static volatile with &quot;getter&quot; function and interruptions", "body": "<p>Don't forget that even if you currently compile the code declaring get_clock_ticks and the code using it as separate modules, perhaps one day you will use link-time or cross-module optimisation.  Keep the \"volatile\" even though you are using a getter function - it will do no harm to the code generation in this case, and makes the code correct.</p>\n\n<p>One thing you have not mentioned is the bit size of the processor.  If it is not capable of reading a 32-bit value in a single operation, then your get_clock_ticks() will sometimes fail as the reads are not atomic.</p>\n"}], "owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 46676869, "answer_count": 2, "score": 1, "last_activity_date": 1509625476, "creation_date": 1507672195, "question_id": 46676584, "link": "https://stackoverflow.com/questions/46676584/c-using-static-volatile-with-getter-function-and-interruptions", "title": "C: Using static volatile with &quot;getter&quot; function and interruptions", "body": "<p>Suppose I have the following C code:</p>\n\n<pre><code>/* clock.c */\n\n#include \"clock.h\"\n\nstatic volatile uint32_t clock_ticks;\n\nuint32_t get_clock_ticks(void)\n{\n    return clock_ticks;\n}\n\nvoid clock_tick(void)\n{\n    clock_ticks++;\n}\n</code></pre>\n\n<p>Now I am calling <code>clock_tick</code> (i.e.: incrementing <code>clock_ticks</code> variable) within an interruption, while calling <code>get_clock_ticks()</code> from the <code>main()</code> function (i.e.: outside the interruption).</p>\n\n<p>My understanding is that <code>clock_ticks</code> should be declared as <code>volatile</code> as otherwise the compiler could optimize its access and make <code>main()</code> think the value has not changed (while it actually changed from the interruption).</p>\n\n<p>I wonder if using the <code>get_clock_ticks(void)</code> function there, instead of accessing the variable directly form <code>main()</code> (i.e.: not declaring it as <code>static</code>) can actually force the compiler to load the variable from memory even if it was not declared as volatile.</p>\n\n<p>I wonder this as someone told me this could be happening. Is it true? Under which conditions? Should I always use <code>volatile</code> anyway no matters if I use a \"getter\" function?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 6, "creation_date": 1507672241, "post_id": 46676566, "comment_id": 80301469, "body": "strcmp will return 0 if two strings are the same. So your if statement will not hold. Change to <code>if(!(strcmp(locationArray[i].id, locationID))</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1507672290, "post_id": 46676566, "comment_id": 80301492, "body": "<code>if (strcmp(locationArray[i].id, locationID) == 0)</code> (you should also add <code>break;</code> at the end of the <code>if</code> to stop searching if it is found."}], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 8396518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3Wp4.jpg?s=128&g=1", "display_name": "Claudio Borges", "link": "https://stackoverflow.com/users/8396518/claudio-borges"}, "is_accepted": true, "score": 1, "last_activity_date": 1507678345, "creation_date": 1507678345, "answer_id": 46677501, "question_id": 46676566, "link": "https://stackoverflow.com/questions/46676566/search-for-an-element-in-a-struct-array-c-programming/46677501#46677501", "title": "Search for an element in a struct array, c programming", "body": "<p>The issue is because strcmp return 0 when it matches:</p>\n\n<pre><code>void searchLocation(localInfo *locationArray, int count)\n{\n    char locationID[15];\n    printf(\"\\nEnter Location ID to search: \");\n    scanf(\"%s\", locationID);\n    getchar();\n\n    int i;\n    for(i = 0; i &lt; count; i++)\n    {\n        if(strcmp(locationArray[i].id, locationID) == 0)\n        {\n            printf(\"Found it!, Here are the informations:\\n\");\n            printf(\"Location ID: %s\\n\", locationArray[i].id);\n            printf(\"Location Description: %s\\n\", locationArray[i].description);\n            printf(\"Location Latitude: %s\\n\", locationArray[i].latitude);\n            printf(\"Location Longitude: %s\\n\", locationArray[i].longitude);\n\n            break;\n        }\n        else\n        {\n            printf(\"ID is NOT Found\\n\");\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 7565634, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9b4036092b4743fedae2c4f4271f9370?s=128&d=identicon&r=PG&f=1", "display_name": "bubbles2189", "link": "https://stackoverflow.com/users/7565634/bubbles2189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 46677501, "answer_count": 1, "score": 0, "last_activity_date": 1507678345, "creation_date": 1507672118, "last_edit_date": 1507672453, "question_id": 46676566, "link": "https://stackoverflow.com/questions/46676566/search-for-an-element-in-a-struct-array-c-programming", "title": "Search for an element in a struct array, c programming", "body": "<p>I am trying to search for an element in the struct. So the user will enter the id, and it will search the struct to see it if contains that information. When I ran the program, it always returns the last element in the array. I am not sure if I am searching correctly. Here is my code:</p>\n\n<pre><code>typedef struct\n{       \n    int locationNum;\n    char id[15];\n    char description[50];\n    float latitude;\n    float longitude;\n} localInfo;\n\n\n// passing in the locationArray struct and count is the length of the array\nvoid searchLocation(localInfo *locationArray, int count)\n{\n    char locationID[15];\n    printf(\"\\nEnter Location ID to search: \");\n    scanf(\"%s\", locationID);\n    getchar();\n\n    int i;\n    for(i = 0; i &lt; count; i++)\n    {\n        if(strcmp(locationArray[i].id, locationID))\n        {\n            printf(\"Found it!, Here are the informations:\\n\");\n            printf(\"Location ID: %s\\n\", locationArray[i].id);\n            printf(\"Location Description: %s\\n\", locationArray[i].description);\n            printf(\"Location Latitude: %s\\n\", locationArray[i].latitude);\n            printf(\"Location Longitude: %s\\n\", locationArray[i].longitude);\n        }\n        else\n        {\n            printf(\"ID is NOT Found\\n\");\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "is_accepted": true, "score": 1, "last_activity_date": 1507672297, "creation_date": 1507672297, "answer_id": 46676611, "question_id": 46676550, "link": "https://stackoverflow.com/questions/46676550/initializing-a-global-variable-memory-layout/46676611#46676611", "title": "Initializing a Global Variable Memory Layout", "body": "<p>It stays exactly where it is; you just changed its value. The <code>bss</code> section it was placed in is just because global variables are initialized to zero by default, so including them directly in your executable file would be a waste of (disk) space. After program initialization, your <code>bss</code> variables can quite happily have non-zero values.</p>\n"}], "owner": {"reputation": 2170, "user_id": 668518, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f4d2db2f7cb20c8c69a538836156a7fe?s=128&d=identicon&r=PG", "display_name": "foobar5512", "link": "https://stackoverflow.com/users/668518/foobar5512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 46676611, "answer_count": 1, "score": 0, "last_activity_date": 1507672297, "creation_date": 1507672044, "question_id": 46676550, "link": "https://stackoverflow.com/questions/46676550/initializing-a-global-variable-memory-layout", "title": "Initializing a Global Variable Memory Layout", "body": "<p>I know that when you declare a global uninitialized variable in C that it lives in the .bss segment. But what happens if you take that value and set it equal to something in a function? Does it move to the stack segment?</p>\n"}, {"tags": ["c", "pointers", "shared-memory"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507672273, "post_id": 46676529, "comment_id": 80301484, "body": "<code>shmget</code> returns an <code>int</code> .. what type are your <code>*ID</code> variables?"}, {"owner": {"reputation": 1, "user_id": 8686600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d484a9826808ec70dc02401d29043884?s=128&d=identicon&r=PG&f=1", "display_name": "Arcie", "link": "https://stackoverflow.com/users/8686600/arcie"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507674025, "post_id": 46676529, "comment_id": 80302187, "body": "I added the variables above and implemented (probably incorrectly) the suggested change by Felix. Added notes."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8686600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d484a9826808ec70dc02401d29043884?s=128&d=identicon&r=PG&f=1", "display_name": "Arcie", "link": "https://stackoverflow.com/users/8686600/arcie"}, "edited": false, "score": 0, "creation_date": 1507679552, "post_id": 46676607, "comment_id": 80303651, "body": "I edited the code above to try to implement this and it worked for the enum, but not the int pointer arrays. What am I doing wrong?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1507672280, "creation_date": 1507672280, "answer_id": 46676607, "question_id": 46676529, "link": "https://stackoverflow.com/questions/46676529/shared-memory-warning-comparison-between-pointer-and-integer/46676607#46676607", "title": "Shared Memory - Warning: Comparison Between Pointer and Integer", "body": "<p><code>shmat()</code> returns a <strong>pointer</strong>, and you're comparing it to an integer. See the  <a href=\"https://linux.die.net/man/2/shmat\" rel=\"nofollow noreferrer\"><code>shmat()</code> manpage</a>:</p>\n\n<blockquote>\n  <p>On success <code>shmat()</code> returns the address of the attached shared memory segment; on error <code>(void *) -1</code> is returned</p>\n</blockquote>\n\n<p>Change your code like this (assuming your variable declarations you don't show in your question have the correct types, in this case, <code>void *shmMsg;</code>):</p>\n\n<pre><code>// [...]\nshmMsg = shmat(msgID, NULL, 0);\nif (shmMsg == (void*) -1){\n    //[...]\n</code></pre>\n\n<p>and you should be fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 8686600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d484a9826808ec70dc02401d29043884?s=128&d=identicon&r=PG&f=1", "display_name": "Arcie", "link": "https://stackoverflow.com/users/8686600/arcie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507673942, "creation_date": 1507671949, "last_edit_date": 1507673942, "question_id": 46676529, "link": "https://stackoverflow.com/questions/46676529/shared-memory-warning-comparison-between-pointer-and-integer", "title": "Shared Memory - Warning: Comparison Between Pointer and Integer", "body": "<p>I am working on a school project and everything is working, but on compiling I get the warning \"Comparison between pointer and integer\". Can anyone explain why this happens? I get the same warning on all four of the shared memory initializations below. I have tried different methods for making the comparison. As far as I have read, shmget and shmat should return -1 on an error. Even though the warning comes up, the code works perfectly well. I have made changes to prompt the errors. These warnings are prompting on the shmat lines. Minimal code listed below.</p>\n\n<pre><code>//--------------------------------------------------\n//Variables\n//--------------------------------------------------\n\n//Shared memory variables\nint (*clockVar)[2];\nint *turn;\nint (*shmMsg)[2];\nenum state {idle, want_in, in_cs, done, dne} *flag;\nlong *pidList;\n\n//Shared memory keys\nkey_t clockKey;\nkey_t turnKey;\nkey_t msgKey;\nkey_t flagKey;\nkey_t pidKey;\n\n//Shared memory IDs\nint clockID = 0;\nint turnID = 0;\nint msgID = 0;\nint flagID = 0;\nint pidID = 0;\n//--------------------------------------------------\n//Key Initialization\n//--------------------------------------------------\n\nclockKey = ftok(\"ftok_clock\", 13);\nif (clockKey == -1){\n    perror(\"Clock: Failed to load ftok file\");\n    return 1;\n}\n\nmsgKey = ftok(\"ftok_msg\", 17);\nif (msgKey == -1){\n    perror(\"Message: Failed to load ftok file\");\n    return 1;\n}\n\nflagKey = ftok(\"ftok_flag\", 15);\nif (flagKey == -1){\n    perror(\"Flag: Failed to load ftok file\");\n    return 1;\n}\n\npidKey = ftok(\"ftok_pids\", 17);\nif (pidKey == -1){\n    perror(\"PID: Failed to load ftok file\");\n    return 1;\n}\n\n//--------------------------------------------------\n//Shared Memory Initialization\n//--------------------------------------------------\n\n//Initializing shared memory for clock counter\nclockID = shmget(clockKey, sizeof(int[2][1]), IPC_CREAT | 0666);\nif (clockID == -1){\n    perror(\"Clock: Failed to designate shared memory\");\n    return 1;\n}\n\nclockVar = shmat(clockID, 0, 0);\nif (clockVar == (int*)-1){\n    perror(\"Clock: Failed to attach shared memory\");\n    return 1;\n}\n\n//Initializing shared memory for the Message array\nmsgID = shmget(msgKey, sizeof(int[2][1]), IPC_CREAT | 0666);\nif (msgID == -1){\n    perror(\"Message: Failed to designate shared memory\");\n    return 1;\n}\n\nshmMsg = shmat(msgID, NULL, 0);\nif (shmMsg == (int*)-1){\n    perror(\"Message: Failed to attach shared memory\");\n    return 1;\n}\n\n//Initializing shared memory for flag counter\nflagID = shmget(flagKey, sizeof(enum state[maxProc]), IPC_CREAT |  0666);\nif (flagID == -1){\n    perror(\"Flag: Failed to designate shared memory\");\n    return 1;\n}\n\nflag = shmat(flagID, NULL, 0);\nif (flag == (enum state*)-1){\n    perror(\"Flag: Failed to attach shared memory\");\n    return 1;\n}\n\n//Initializing shared memory for the process count array\npidID = shmget(pidKey, sizeof(int), IPC_CREAT | 0666);\nif (pidID == -1){\n    perror(\"PID: Failed to designate shared memory\");\n    return 1;\n}\n\npidList = shmat(pidID, NULL, 0);\nif (pidList == (int*)-1){\n    return 1;\n}\n</code></pre>\n\n<p>EDIT: Made suggested edits. The flag comparison does not throw an error anymore (enum state*). Now I get Warning: comparison of distinct pointer types lack cast for the other three (clockVar, shmMsg, and pidList). I also added my declarations up top. I am sure I am just messing up some syntax here. Thanks!</p>\n"}, {"tags": ["c", "if-statement", "binary-search"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 4, "creation_date": 1507671080, "post_id": 46676334, "comment_id": 80301009, "body": "This shouldn&#39;t even compile. <code>... } else if { ...</code> is a syntax error"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1507671313, "post_id": 46676334, "comment_id": 80301110, "body": "And after it does compile, you only make the <code>if (first &lt; last)</code> test once, so there&#39;s no way it will ever trigger that else clause."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507671463, "post_id": 46676334, "comment_id": 80301170, "body": "<a href=\"https://stackoverflow.com/q/46674368/7076153\">stackoverflow.com/q/46674368/7076153</a>, :thinking:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1507671506, "post_id": 46676334, "comment_id": 80301183, "body": "@Kevin why? how? :o"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507671532, "post_id": 46676334, "comment_id": 80301192, "body": "@FelixPalmen read twice."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507671538, "post_id": 46676334, "comment_id": 80301194, "body": "@FelixPalmen Also wondered, but was embarrassed to ask :) <i>Update:</i> Now got it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507671621, "post_id": 46676334, "comment_id": 80301239, "body": "@Stargateur nevermind, didn&#39;t look at this &quot;interesting&quot; last block ;) (so this was meant literally ... wow)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507675490, "post_id": 46676334, "comment_id": 80302619, "body": "Post enough code and data for others to compile/run, else this post is un-salvageable"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507675626, "post_id": 46676334, "comment_id": 80302657, "body": "To trigger the <code>printf(&quot;No Record Found With The Last Name %s. \\n&quot;, name);</code>, enter a array size of 0."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507675394, "post_id": 46676472, "comment_id": 80302588, "body": "OP has <code>if(first &lt;= last) {</code> to test for an initial error condition.  It would have been better if OP posted more complete code."}], "tags": [], "owner": {"reputation": 375, "user_id": 8424102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790439c206f29a4e82ddd6b5ab8006d1?s=128&d=identicon&r=PG&f=1", "display_name": "Mahmoud Farouq", "link": "https://stackoverflow.com/users/8424102/mahmoud-farouq"}, "is_accepted": false, "score": 0, "last_activity_date": 1507671642, "creation_date": 1507671642, "answer_id": 46676472, "question_id": 46676334, "link": "https://stackoverflow.com/questions/46676334/can-someone-explain-why-it-would-not-execute-the-last-else-if-statement-in-my-bi/46676472#46676472", "title": "Can someone explain why it would not execute the last else if statement in my binary search", "body": "<p>while this is should not even compile because the (...} else if {...)</p>\n\n<p>but ignoring that, why you have if(first &lt;= last) and while(first &lt;= last)?</p>\n\n<p>while(first &lt;= last) only works just fine</p>\n\n<p>your code should look like</p>\n\n<pre><code>while(first&lt;= last){\n\n        middle = (first + last)/2;\n\n        if(strcmp(name, pSRecord[middle]-&gt;LastNames) == 0){\n\n            printf(\"The Following Record Was Found: \\nName: %s %s \\nStudent ID: %d \\nStudent Grade: %d \\n\", pSRecord[middle]-&gt;FirstNames, pSRecord[middle]-&gt;LastNames, pSRecord[middle]-&gt;IDNums, pSRecord[middle]-&gt;Marks);\n            exit(0);\n\n        } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &gt; 0){\n\n            first = middle + 1;\n\n        } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &lt; 0){\n\n            last = middle - 1;\n\n        }\n    }\n</code></pre>\n\n<p>putting it in a function that returns the index of it if it exist, or -1 if it's not, and you are done</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1507672482, "creation_date": 1507672482, "answer_id": 46676643, "question_id": 46676334, "link": "https://stackoverflow.com/questions/46676334/can-someone-explain-why-it-would-not-execute-the-last-else-if-statement-in-my-bi/46676643#46676643", "title": "Can someone explain why it would not execute the last else if statement in my binary search", "body": "<p>Apart from this invalid construction</p>\n\n<pre><code>else  if{\n</code></pre>\n\n<p>the outer if statement does not make sense because the variables <code>first</code> and <code>last</code> are being changed in the while loop. </p>\n\n<p>Just remove it</p>\n\n<pre><code>    while(first&lt;= last){\n\n        middle = (first + last)/2;\n\n        if(strcmp(name, pSRecord[middle]-&gt;LastNames) == 0){\n\n            printf(\"The Following Record Was Found: \\nName: %s %s \\nStudent ID: %d \\nStudent Grade: %d \\n\", pSRecord[middle]-&gt;FirstNames, pSRecord[middle]-&gt;LastNames, pSRecord[middle]-&gt;IDNums, pSRecord[middle]-&gt;Marks);\n            exit(0);\n\n        } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &gt; 0){\n\n            first = middle + 1;\n\n        } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &lt; 0){\n\n            last = middle - 1;\n\n        }\n    }\n\n    printf(\"No Record Found With The Last Name %s. \\n\", name);\n    exit(0);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8755183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb16b349d599ef9001a464f7cac9c51?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Knafo", "link": "https://stackoverflow.com/users/8755183/alex-knafo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1507672482, "creation_date": 1507670989, "question_id": 46676334, "link": "https://stackoverflow.com/questions/46676334/can-someone-explain-why-it-would-not-execute-the-last-else-if-statement-in-my-bi", "title": "Can someone explain why it would not execute the last else if statement in my binary search", "body": "<p>When i run this and try to search for a name that isnt in the structure it does not perform the else if statement, it does nothing.</p>\n\n<pre><code>if(first &lt;= last) {\n\n        while(first&lt;= last){\n\n            middle = (first + last)/2;\n\n            if(strcmp(name, pSRecord[middle]-&gt;LastNames) == 0){\n\n                printf(\"The Following Record Was Found: \\nName: %s %s \\nStudent ID: %d \\nStudent Grade: %d \\n\", pSRecord[middle]-&gt;FirstNames, pSRecord[middle]-&gt;LastNames, pSRecord[middle]-&gt;IDNums, pSRecord[middle]-&gt;Marks);\n                exit(0);\n\n            } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &gt; 0){\n\n                first = middle + 1;\n\n            } else if (strcmp(name, pSRecord[middle]-&gt;LastNames) &lt; 0){\n\n                last = middle - 1;\n\n            }\n        }\n    } else  if{\n\n        printf(\"No Record Found With The Last Name %s. \\n\", name);\n        exit(0);\n\n    }\n</code></pre>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1507670969, "post_id": 46676320, "comment_id": 80300954, "body": "Because there is no <code>new</code> in c."}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 6, "creation_date": 1507670975, "post_id": 46676320, "comment_id": 80300959, "body": "simply because new is not C."}, {"owner": {"reputation": 111, "user_id": 7887103, "user_type": "registered", "accept_rate": 8, "profile_image": "https://lh5.googleusercontent.com/-ZMF1qI6WP-Y/AAAAAAAAAAI/AAAAAAAAAHI/q--TQFNfARw/photo.jpg?sz=128", "display_name": "angelustt", "link": "https://stackoverflow.com/users/7887103/angelustt"}, "edited": false, "score": 1, "creation_date": 1507671049, "post_id": 46676320, "comment_id": 80300989, "body": "How can I define the size of those char variables then?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507671076, "post_id": 46676320, "comment_id": 80301006, "body": "Do you have a C textbook? If you don&#39;t, get one."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 2, "creation_date": 1507671210, "post_id": 46676320, "comment_id": 80301070, "body": "for dynamic memory allocation, use <code>malloc</code> or <code>calloc</code>; but you could also write <code>char entrada[50]</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1507672797, "post_id": 46676320, "comment_id": 80301719, "body": "The <code>new</code> memory allocation operator is found in C++, not in C."}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 6809840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f207555580d17928bcfbbbf6e670b1fe?s=128&d=identicon&r=PG&f=1", "display_name": "Burstfulovic", "link": "https://stackoverflow.com/users/6809840/burstfulovic"}, "is_accepted": false, "score": 3, "last_activity_date": 1507671093, "creation_date": 1507671093, "answer_id": 46676351, "question_id": 46676320, "link": "https://stackoverflow.com/questions/46676320/new-char-error-c-new-undeclared/46676351#46676351", "title": "new char error C (new undeclared)", "body": "<p>There is no <code>new</code> in C.</p>\n\n<p>Try: <code>char entrada[50], salida[50];</code></p>\n\n<p>For better readability try:</p>\n\n<pre><code>char entrada[50] = { 0 };\nchar salida[50]  = { 0 };\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7887103, "user_type": "registered", "accept_rate": 8, "profile_image": "https://lh5.googleusercontent.com/-ZMF1qI6WP-Y/AAAAAAAAAAI/AAAAAAAAAHI/q--TQFNfARw/photo.jpg?sz=128", "display_name": "angelustt", "link": "https://stackoverflow.com/users/7887103/angelustt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 1, "closed_date": 1507672811, "answer_count": 1, "score": -1, "last_activity_date": 1507671093, "creation_date": 1507670928, "question_id": 46676320, "link": "https://stackoverflow.com/questions/46676320/new-char-error-c-new-undeclared", "closed_reason": "Needs more focus", "title": "new char error C (new undeclared)", "body": "<p>I do not know why the new is giving me an error. This is the code. Thank you for the help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nfloat promedio(int x[], int nValores);\n\nint main(){\n\n   FILE *bin, *archivoSalida;\n\n   char *entrada, *salida;\n   int num;\n   int contador = 0;\n   int nValores=10000;\n\n\n\n   entrada = new char[50];\n   salida = new char[50];\n</code></pre>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 2, "creation_date": 1507669085, "post_id": 46675878, "comment_id": 80300086, "body": "What exactly is the problem? Are you getting an error? An unexpected result?"}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "reply_to_user": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1507669172, "post_id": 46675878, "comment_id": 80300141, "body": "this is the error: syntax error near unexpected token `time&#39;"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1507669177, "post_id": 46675878, "comment_id": 80300142, "body": "<code>rand() % 11</code> ?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507669200, "post_id": 46675878, "comment_id": 80300154, "body": "you&#39;re going to want to change that to <code>int randomIndex = rand() % 11;</code>. <code>rand()</code> returns a value between 0 and <code>RAND_MAX</code>, which is most certainly going to be larger than 11. <code>myArray</code> indexed at anything greater than 10 is undefined behavior."}, {"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 2, "creation_date": 1507669200, "post_id": 46675878, "comment_id": 80300153, "body": "Do you have a <code>main</code> function?"}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1507669944, "post_id": 46675878, "comment_id": 80300533, "body": "@SarahB the code won&#39;t compile as you lack <code>;</code> in the line that generates the index. What&#39;s more you updated the question to include what appears to be the answer. I would suggest accepting one of the answers (if they meet your requirements) and move on."}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1507670085, "post_id": 46675878, "comment_id": 80300607, "body": "@orhtej2 well it still doesn&#39;t compile..thank you for catching that!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1507670102, "post_id": 46675878, "comment_id": 80300616, "body": "Rolled back. You must not change the question once you have answers leaving them without context! A good C book would be a helpful reading."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1507670163, "post_id": 46675878, "comment_id": 80300653, "body": "It is extremely annoying when questions are edited in such a manner as to invalidate existing answers.  It&#39;s essentially vandalism:("}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1507670766, "post_id": 46675878, "comment_id": 80300891, "body": "What specifically is unclear about the last two comments? <a href=\"https://meta.stackoverflow.com/a/298799/4774918\">meta.stackoverflow.com/a/298799/4774918</a>"}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507671075, "post_id": 46675878, "comment_id": 80301005, "body": "well it still doesn&#39;t run..and I apologize about that..I am not that familiar with SO..won&#39;t do that in the future."}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "reply_to_user": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1507671151, "post_id": 46675878, "comment_id": 80301051, "body": "yes, i have a main function @Mureinik"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1507671202, "post_id": 46675878, "comment_id": 80301065, "body": "&#39;well it still doesn&#39;t run&#39; is not useful.  Look, make a MCVE by enclosing the code in a valid main() function or by calling a fuction enclosing the above code from main()., fix the out-of-bounds addressing, compile, link, test what you then have and, if there is still an issue, please ask another question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1507671247, "post_id": 46675878, "comment_id": 80301083, "body": "How about getting a <a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good C book</a> - get one for modern C, i.e. C99 at leat, best standard C11) and learn the language properly from the beginning. Requiring at least <code>int main(void)</code> (<code>int main()</code> is a legacy and obsolescent) is shown with the very first program you learn. Obscure youtube videos, blogs or online tutorials are not appropriate. And we are not a tutoring site."}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1507671378, "post_id": 46675878, "comment_id": 80301135, "body": "@Olaf It had that in there. Thanks for the input."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507669657, "post_id": 46675941, "comment_id": 80300393, "body": "#include&lt;stdio.h&gt; #include&lt;time.h&gt; #include&lt;stdlib.h&gt; int main() {   \tsrand ( time(NULL) );     int myArray[11] = { 4,8,2,5,9,1,7,10,43,23,3 };  \tconst int N = 11; // lenght of myArray \tint randomIndex = rand() / (RAND_MAX / N + 1)     printf(&quot;Reference: %d\\n&quot;, randomValue); \treturn 0;  }"}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "reply_to_user": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507669843, "post_id": 46675941, "comment_id": 80300482, "body": "@SarahB seems reasonable, does it work as expected?"}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507669935, "post_id": 46675941, "comment_id": 80300527, "body": "no, it doesn&#39;t. I edited the code in the original question. Not sure why its showing this now.. line 4: syntax error near unexpected token <code>(&#39; line 4: </code>int main()&#39;"}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "reply_to_user": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507669969, "post_id": 46675941, "comment_id": 80300546, "body": "@SarahB Yes, there&#39;s a semicolon missing."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507670195, "post_id": 46675941, "comment_id": 80300669, "body": "<code>rand() &#47; (RAND_MAX &#47; N + 1)</code> does not distribute <code>rand()</code> that evenly in that <code>randomIndex</code> comes up <code>10</code>  less often than <code>0</code>-<code>9</code>  (maybe 10 less in about 200,000,000).  <code>rand() %11</code> is a flatter distribution. IAC a fair distribution is more work."}, {"owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "edited": false, "score": 0, "creation_date": 1507671976, "post_id": 46675941, "comment_id": 80301369, "body": "@orhtej2 no there is no semicolon missing..its the main"}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1507672538, "post_id": 46675941, "comment_id": 80301596, "body": "@chux I fail to see that. That&#39;s one bucket skewed (if any) vs <code>RAND_MAX % 11</code> buckets favoured. Can you please explain?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1507674743, "post_id": 46675941, "comment_id": 80302404, "body": "@orhtej2 &quot;That&#39;s one bucket skewed&quot; is not so with this method.  With <code>rand()%M</code> (M==11) the eleven buckets, some buckets will have <code>N</code> and others will have <code>N+1</code> occurrences.  With this approach, example <code>(RAND_MAX + 1 == 2**31)</code>: The first ten numbers will occur <code>P</code> times each and the eleventh will have <code>P-9</code>occurrences. More unbalanced.  This answer&#39;s approach has merit with FP math, yet with <code>int</code> math, I see it as weaker than  <code>rand()%11</code> given the last number (worst case) could occur about M less than the others."}], "tags": [], "owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "is_accepted": false, "score": -1, "last_activity_date": 1507672095, "last_edit_date": 1507672095, "creation_date": 1507669229, "answer_id": 46675941, "question_id": 46675878, "link": "https://stackoverflow.com/questions/46675878/random-number-from-array-c/46675941#46675941", "title": "Random Number from Array C", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstdlib/rand/\" rel=\"nofollow noreferrer\"><code>rand()</code> generates a value between 0 and RAND_MAX</a>, you should cap it to array length i.e. like <a href=\"http://c-faq.com/lib/randrange.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>const int N = 11; // length of myArray\nint randomIndex = rand() / (RAND_MAX / N + 1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1507669809, "post_id": 46675954, "comment_id": 80300464, "body": "My concern regarding everyone suggesting modulo is it&#39;s a terrible practice that produces a non-uniform distribution."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 2, "creation_date": 1507669975, "post_id": 46675954, "comment_id": 80300549, "body": "@orhtej2: right in general, but I think it is OK when answering a beginner&#39;s question. Added a comment."}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1507670057, "post_id": 46675954, "comment_id": 80300596, "body": "@usr my point is there are better and not that complicated ways of capping the range."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1507670041, "last_edit_date": 1507670041, "creation_date": 1507669273, "answer_id": 46675954, "question_id": 46675878, "link": "https://stackoverflow.com/questions/46675878/random-number-from-array-c/46675954#46675954", "title": "Random Number from Array C", "body": "<p>First, it seems that your code is outside a function, so wrap it by, for example, function <code>main</code>.</p>\n\n<p>Second, function <code>rand</code> returns a pseudo-random integer value between \u200b0\u200b and <code>RAND_MAX</code>, which is usually a value much higher than your array size <code>11</code>.\nHence, you have a very good chance to exceed array bounds.</p>\n\n<p>Limit the <code>randomIndex</code> to <code>11</code>, e.g. by using modulo:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main() {\n    srand ( time(NULL) );\n    int myArray[11] = { 4,8,2,5,9,1,7,10,43,23,3 };\n    int randomIndex = rand() % 11;\n    int randomValue = myArray[randomIndex];\n    printf(\"Reference: %d\\n\", randomValue);\n    return 0;\n}\n</code></pre>\n\n<p>Note that modulo (i.e. <code>%11</code>) is a very simple method to cap the number, and it yields a non-uniform distribution of random values. If this gets a problem, please do not hesitate to ask again.</p>\n"}], "owner": {"reputation": 1, "user_id": 8755049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee1ccd10d5359d0b19020ea9aeba6068?s=128&d=identicon&r=PG&f=1", "display_name": "SarahB", "link": "https://stackoverflow.com/users/8755049/sarahb"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6816, "favorite_count": 0, "closed_date": 1507726418, "accepted_answer_id": 46675954, "answer_count": 2, "score": -4, "last_activity_date": 1507672095, "creation_date": 1507668978, "last_edit_date": 1507670729, "question_id": 46675878, "link": "https://stackoverflow.com/questions/46675878/random-number-from-array-c", "closed_reason": "Not suitable for this site", "title": "Random Number from Array C", "body": "<p>I am trying to generate a random in the range of the array size, and print the random element from the array then return the index of\nsuch element. This is what I have so far. The code isn't working. Can anybody please help me?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n#include&lt;stdlib.h&gt;\n\nsrand ( time(NULL) );\nint myArray[11] = { 4,8,2,5,9,1,7,10,43,23,3 };\nint randomIndex = rand();\nint randomValue = myArray[randomIndex];\nprintf(\"Reference: %d\\n\", randomValue);\n</code></pre>\n"}, {"tags": ["c#", "c++", "c", ".net", "com"], "comments": [{"owner": {"reputation": 5439, "user_id": 1736047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GY4YE.jpg?s=128&g=1", "display_name": "STLDev", "link": "https://stackoverflow.com/users/1736047/stldev"}, "edited": false, "score": 0, "creation_date": 1507669709, "post_id": 46675847, "comment_id": 80300422, "body": "@OP - I edited your question to enhance English readability. Please look over my edit and be sure that I did not change the intent of your question."}, {"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1507669982, "post_id": 46675847, "comment_id": 80300555, "body": "Import the type library into your project. If the component lives in an .exe, there should be a .tlb file along with it."}, {"owner": {"reputation": 9, "user_id": 6593594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9gA4.png?s=128&g=1", "display_name": "fmg", "link": "https://stackoverflow.com/users/6593594/fmg"}, "reply_to_user": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1507672992, "post_id": 46675847, "comment_id": 80301792, "body": "@xxbbcc Component lives in .EXE but there is no type library in files. Can be files are corrupted ore someting."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1507703063, "post_id": 46675847, "comment_id": 80310042, "body": "It is completely unclear what you are asking. Tell us what COM problems/Errors you get! Tell us what you already done. Improve your question."}], "answers": [{"comments": [{"owner": {"reputation": 5439, "user_id": 1736047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GY4YE.jpg?s=128&g=1", "display_name": "STLDev", "link": "https://stackoverflow.com/users/1736047/stldev"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1507684187, "post_id": 46675963, "comment_id": 80304661, "body": "Thank you for the edit, @user4581301.  I should have done a better job with that link."}], "tags": [], "owner": {"reputation": 5439, "user_id": 1736047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GY4YE.jpg?s=128&g=1", "display_name": "STLDev", "link": "https://stackoverflow.com/users/1736047/stldev"}, "is_accepted": true, "score": 1, "last_activity_date": 1507672565, "last_edit_date": 1507672565, "creation_date": 1507669295, "answer_id": 46675963, "question_id": 46675847, "link": "https://stackoverflow.com/questions/46675847/how-can-i-reference-an-exe-written-with-c-c-to-a-c-project/46675963#46675963", "title": "How can i reference an exe written with c/c++ to a c# project?", "body": "<p>There is a good article on Microsoft's site on how to call a Native DLL from managed code:  <a href=\"https://docs.microsoft.com/en-us/cpp/dotnet/how-to-call-native-dlls-from-managed-code-using-pinvoke\" rel=\"nofollow noreferrer\">How to: Call Native DLLs from Managed Code Using PInvoke</a> </p>\n\n<p>It should at least get you started down your path.</p>\n"}], "owner": {"reputation": 9, "user_id": 6593594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9gA4.png?s=128&g=1", "display_name": "fmg", "link": "https://stackoverflow.com/users/6593594/fmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1507703000, "accepted_answer_id": 46675963, "answer_count": 1, "score": -4, "last_activity_date": 1507672565, "creation_date": 1507668859, "last_edit_date": 1507669622, "question_id": 46675847, "link": "https://stackoverflow.com/questions/46675847/how-can-i-reference-an-exe-written-with-c-c-to-a-c-project", "closed_reason": "Needs details or clarity", "title": "How can i reference an exe written with c/c++ to a c# project?", "body": "<p>I have a camera SDK that was created with the C language that I would like to call from a .NET application. </p>\n\n<p>Our main project is written with the .NET framework.  We are trying to integrate the camera SDK with the .NET project. The SDK provides some DLLs, but I am getting a COM (common object model) error when I attempt to reference it. </p>\n\n<p>We could not solve this directly, and after that I tried to create a DLL interface between .h and c# DLL files but i received the same COM error. Also, the SDK provides some samples for programming the cameras (ex:Search for IP-connected cameras) but a reference to the .EXE does not work and I get a COM error.</p>\n"}, {"tags": ["c", "header-files", "raspbian", "time.h"], "comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1507665576, "post_id": 46674973, "comment_id": 80298295, "body": "Have you linked with <code>-lrt</code>?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1507665579, "post_id": 46674973, "comment_id": 80298298, "body": "&quot;undefined reference&quot; is a linker problem, not a compile problem. I think you need to link with <code>-lrt</code>"}, {"owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507665734, "post_id": 46674973, "comment_id": 80298376, "body": "how do I do this?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507665962, "post_id": 46674973, "comment_id": 80298499, "body": "@GordonJohnnyElder Time to learn how to link a library with your framework. Do you use a makefile ?"}, {"owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666110, "post_id": 46674973, "comment_id": 80298561, "body": "the cross compiler I use generated one but I don&#39;t know what it is or anything about it"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507666394, "post_id": 46674973, "comment_id": 80298693, "body": "<i>&quot;how do I do this?&quot;</i>  This depends on your build system. If you have something generating makefiles for you, there&#39;s probably a place to edit <code>LD_FLAGS</code> or something like that. You&#39;ll have to edit your question and provide more info."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666006, "post_id": 46675073, "comment_id": 80298519, "body": "Can you explain -lrt or link me to somewhere that explains it?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666083, "post_id": 46675073, "comment_id": 80298549, "body": "@GordonJohnnyElder <code>cc -o your_output_executable your_sources_or_object_files... -lrt</code> where <code>cc</code> is <code>gcc</code> or <code>clang</code> or a similar compiler."}, {"owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666343, "post_id": 46675073, "comment_id": 80298666, "body": "I don&#39;t quite understand what you are saying. What I think you are saying is if I am using gcc I should say in the command line &quot; gcc filename.c -o outfile -lrt time.h&quot; with filename being the file to compile and outfile being the compiled file. Is that correct?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666455, "post_id": 46675073, "comment_id": 80298721, "body": "@GordonJohnnyElder Just <code>gcc filename.c -o outfile -lrt </code>, assuming your whole program is in <code>filename.c</code>."}, {"owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "edited": false, "score": 0, "creation_date": 1507666538, "post_id": 46675073, "comment_id": 80298761, "body": "Oh, ok. Thank You!"}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1507665888, "creation_date": 1507665888, "answer_id": 46675073, "question_id": 46674973, "link": "https://stackoverflow.com/questions/46674973/problems-with-header-in-c/46675073#46675073", "title": "Problems with header in C", "body": "<p><a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow noreferrer\">clock_gettime(2):</a></p>\n\n<blockquote>\n  <p>#include &lt;time.h&gt; <br>\n    ... <br>\n    Link with <b>-lrt</b> (only for glibc versions before 2.17).</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 8754778, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rH_dfx41sfM/AAAAAAAAAAI/AAAAAAAABpE/ZOkunr2bKpg/photo.jpg?sz=128", "display_name": "Gordon Johnny Elder", "link": "https://stackoverflow.com/users/8754778/gordon-johnny-elder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1507669075, "answer_count": 1, "score": 0, "last_activity_date": 1507665888, "creation_date": 1507665505, "question_id": 46674973, "link": "https://stackoverflow.com/questions/46674973/problems-with-header-in-c", "closed_reason": "Duplicate", "title": "Problems with header in C", "body": "<p>I have this piece of c code that I am in charge of speeding up. The code is put onto a RasPi and compiled. Two years ago the code was put on and compiled and it works. Now when I try to compile the same file it says there's an undefined reference to 'clock_gettime'. I looked it up and that function is defined in time.h. I thought that maybe that header wasn't installed or called in the code. At the beginning of the code it does say #include  so that's not the problem. I checked if the time.h header was installed on the RasPi and it was there with the other headers. I opened it up with nano and the clock_gettime function was defined, so that's not the problem. What should I do? How do I solve this problem?</p>\n"}, {"tags": ["c", "windows", "file", "pointers", "io"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1507665010, "post_id": 46674793, "comment_id": 80297977, "body": "Sounds like the easiest solution to me is to simply distribute the necessary files along with your executable. Zip/tar up the top level directory with all supporting files in that hierarchy, or have the user/install script define some kind of environment variable that points to the files. No programs go searching all over the file system for the files they need.. they know where they are."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1507665253, "post_id": 46674793, "comment_id": 80298115, "body": "The C99 standard does not know about directories. But POSIX does. Your question is operating system specific. You might want <a href=\"http://man7.org/linux/man-pages/man3/readdir.3.html\" rel=\"nofollow noreferrer\">readdir(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">nftw(3)</a>, <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">stat(2)</a>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1507665315, "post_id": 46674793, "comment_id": 80298149, "body": "What you describe needing to know is the standards for software installation on the target operating system. That varies greatly from one OS to another."}], "answers": [{"tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": false, "score": 0, "last_activity_date": 1507667251, "creation_date": 1507667251, "answer_id": 46675424, "question_id": 46674793, "link": "https://stackoverflow.com/questions/46674793/c-how-do-i-make-a-function-that-finds-the-location-of-a-file-it-has-to-use-jus/46675424#46675424", "title": "C - How do I make a function that finds the location of a file it has to use just by giving it the filename? (Windows)", "body": "<p>this is operating system specific. on linux you can use the <code>locate</code> shell command and parse its output ( <a href=\"http://www.linfo.org/locate.html\" rel=\"nofollow noreferrer\">http://www.linfo.org/locate.html</a> )</p>\n\n<p><a href=\"https://stackoverflow.com/questions/646241/c-run-a-system-command-and-get-output\">C: Run a System Command and Get Output?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/19209141/how-do-i-execute-a-shell-built-in-command-with-a-c-function\">How do I execute a Shell built-in command with a C function?</a></p>\n\n<p>however this solution will only work on linux. i think <em>yano</em>'s solution in the comments above is better ...</p>\n"}], "owner": {"reputation": 65, "user_id": 7821100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5607a08059d692da9d50aa8e9cb77019?s=128&d=identicon&r=PG&f=1", "display_name": "octagonlord69", "link": "https://stackoverflow.com/users/7821100/octagonlord69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1529661264, "creation_date": 1507664898, "last_edit_date": 1529661264, "question_id": 46674793, "link": "https://stackoverflow.com/questions/46674793/c-how-do-i-make-a-function-that-finds-the-location-of-a-file-it-has-to-use-jus", "title": "C - How do I make a function that finds the location of a file it has to use just by giving it the filename? (Windows)", "body": "<p>I am having trouble with the function <code>fopen()</code>. I would always send the exact location of a file as an arguement to <code>fopen()</code>,\nwhich would look something like this:</p>\n\n<p><code>fopen(\"c:\\\\Users/Username/Desktop/Projects/program_name/version 1.0/data/important_data.txt\", \"r\");</code></p>\n\n<p>That works just fine on <strong>my</strong> computer, but what if I decide to transfer the program to another computer?\nThe location would completely change.</p>\n\n<p>It would no longer be:</p>\n\n<p><code>c:\\\\Users/Username/Desktop/Projects/program_name/version 1.0/data/important_data.txt</code></p>\n\n<p>But it would rather be something like:</p>\n\n<p><code>c:\\\\Users/OtherUsername/Desktop/program_name/version 1.0/data/important_data.txt</code></p>\n\n<p>My question is, how do I make a portable function which can obtain the location of a file, if I <strong>only</strong> give the\nname (including the type e.g. .txt) of the file to the function?</p>\n\n<p>Keep in mind, I've been learning C for less than a year. There are still a lot of things which I must learn, and\nthings like this are of high importance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1507663294, "post_id": 46674345, "comment_id": 80297213, "body": "Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and provide one."}], "owner": {"reputation": 408, "user_id": 6406569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/534c75e4dd0ae2bd2406944f73deee19?s=128&d=identicon&r=PG&f=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6406569/vivek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507663137, "creation_date": 1507663137, "question_id": 46674345, "link": "https://stackoverflow.com/questions/46674345/how-to-pass-ipv6-address-in-binary-form-to-variable-number-of-arguments-in-c", "title": "how to pass ipv6 address in binary form to variable number of arguments in c", "body": "<p>I have created a function which will receive variable number of arguments. In that variable number of arguments, one argument will come is ipv6 address which will come in the binary form and in my function I have to convert that ipv6 address into text format. how to receive and convert ipv6 address from binary to text in variable number of arguments</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1507662693, "post_id": 46674184, "comment_id": 80296915, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1507662717, "creation_date": 1507662717, "answer_id": 46674238, "question_id": 46674184, "link": "https://stackoverflow.com/questions/46674184/why-is-my-program-not-dividing-even-numbers-by-two/46674238#46674238", "title": "Why is my program not dividing even numbers by two?", "body": "<p>The middle loop incorrectly increments <code>i</code> twice per iteration:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) { // &lt;&lt;== One increment\n    if (a[i]%2 == 0 ) {\n        a[i] = a[i]/2; i++;    // &lt;&lt;== Another increment - first branch\n    }\n    else\n        i++;                   // &lt;&lt;== Another increment - second branch\n}\n</code></pre>\n\n<p>In your case, all even numbers happen to be stored at even positions that your loop skips.</p>\n\n<p><strong>Note:</strong> A better solution is to drop the middle loop altogether, and do the division at the time of printing.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 8660229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mzhIoA1QYOM/AAAAAAAAAAI/AAAAAAAAAEE/NaOFDYJqtM8/photo.jpg?sz=128", "display_name": "Crostatus", "link": "https://stackoverflow.com/users/8660229/crostatus"}, "edited": false, "score": 1, "creation_date": 1507662956, "post_id": 46674243, "comment_id": 80297051, "body": "thanks guys, hope i will get better and help the community instead of asking stupid question like this. But thanks again for how fast and clear you explained to me. have a good day you all :)"}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 2, "last_activity_date": 1507662733, "creation_date": 1507662733, "answer_id": 46674243, "question_id": 46674184, "link": "https://stackoverflow.com/questions/46674184/why-is-my-program-not-dividing-even-numbers-by-two/46674243#46674243", "title": "Why is my program not dividing even numbers by two?", "body": "<p>The body of your second <code>for</code> loop advances <code>i</code>. Since it's also advanced in the loop's clause, it's advanced <strong>twice</strong>, effectively skipping any other element. Remove those advancements, and you should be OK:</p>\n\n<pre><code>for(int i=0; i&lt;10; i++) {\n    if (a[i] % 2 == 0)  {\n        a[i] /= 2;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 9211793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb2dbf4aa7ed7f6a9fc3b5a79451b78?s=128&d=identicon&r=PG&f=1", "display_name": "K.Vani", "link": "https://stackoverflow.com/users/9211793/k-vani"}, "is_accepted": false, "score": 1, "last_activity_date": 1516461192, "creation_date": 1516461192, "answer_id": 48357694, "question_id": 46674184, "link": "https://stackoverflow.com/questions/46674184/why-is-my-program-not-dividing-even-numbers-by-two/48357694#48357694", "title": "Why is my program not dividing even numbers by two?", "body": "<p>In your program you incrementing the for loop variable i two times inside the loop and loop also increment the value one time so the values are skipped that is the reason you are getting wrong output.herewith i have attached the corrected program and its output.hope you understand the concept .Thank you</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n {\n   int a[10];\n   printf(\"\\n Given Values are\");\n   printf(\"\\n-----------------\");\n\n   for(int i = 0; i &lt; 10; i++)  \n      scanf(\"%d\", &amp;a[i]);\n\n   for (int i = 0; i &lt; 10; i++) \n     {\n        if (a[i] % 2 == 0 ) \n          {\n           a[i] = a[i] / 2;\n\n           }\n      }\n  printf(\"\\n After dividing the even numbers by 2 and print in reverse  order\");\n  printf(\"\\n ----------------------------------------------------------------\\n\");\n  for(int i = 9; i &gt; 0; i--)\n    printf(\"%d\\n\", a[i]);\nreturn 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Given Values are                                                                                                                                                                            \n-----------------                                                                                                                                                                            \n1                                                                                                                                                                                            \n2                                                                                                                                                                                            \n3                                                                                                                                                                                            \n4                                                                                                                                                                                            \n5                                                                                                                                                                                            \n6                                                                                                                                                                                            \n7    \n8                                                                                                                                                                                            \n9                                                                                                                                                                                            \n10                                                                                                                                                                                           \n\nAfter dividing the even numbers by 2 and print in reverse order                                                                                                                             \n----------------------------------------------------------------\n5                                                                                                                           \n9                                                                                                                                                                                            \n4                                                                                                                                                                                            \n7      \n3                                                                                                                                                                                            \n5                                                                                                                                                                                            \n2                                                                                                                                                                                            \n3                                                                                                                                                                                            \n1                                                                                                                                                                                            \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8660229, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mzhIoA1QYOM/AAAAAAAAAAI/AAAAAAAAAEE/NaOFDYJqtM8/photo.jpg?sz=128", "display_name": "Crostatus", "link": "https://stackoverflow.com/users/8660229/crostatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1516461192, "creation_date": 1507662509, "last_edit_date": 1507663011, "question_id": 46674184, "link": "https://stackoverflow.com/questions/46674184/why-is-my-program-not-dividing-even-numbers-by-two", "title": "Why is my program not dividing even numbers by two?", "body": "<p>It should scan 10 int numbers and then display them backwards, dividing the even ones by two, but it just displays them without dividing.</p>\n\n<p>es:<br>\n10 9 8 7 6 5 4 3 2 1 ==> 1 2 3 2 5 3 7 4 9 5<br>\nbut mine does:\n10 9 8 7 6 5 4 3 2 1 ==> 1 2 3 4 5 6 7 8 9 10          </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a[10];\n\n    for(int i = 0; i &lt; 10; i++)\n        scanf(\"%d\", &amp;a[i]);\n\n    for (int i = 0; i &lt; 10; i++) {\n        if (a[i] % 2 == 0 ) {\n            a[i] = a[i] / 2; i++;\n        }\n        else\n            i++;\n    }\n\n    for(int i = 9; i &gt; -1; i--)\n        printf(\"%d\\n\", a[i]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 5, "creation_date": 1507661466, "post_id": 46673877, "comment_id": 80296231, "body": "Remove the stray semicolon after the <code>for</code> statement on that line."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1507661494, "post_id": 46673877, "comment_id": 80296257, "body": "You&#39;re using strings."}, {"owner": {"reputation": 11, "user_id": 8754361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2a61e1e228aaa8aa6b288c217a5623?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Butterfield", "link": "https://stackoverflow.com/users/8754361/austin-butterfield"}, "edited": false, "score": 0, "creation_date": 1507661709, "post_id": 46673877, "comment_id": 80296383, "body": "Yes I know that I am using strings to display the necessary lines. However, I am not allowed to use any commands that analyze strings like stringlength for example."}, {"owner": {"reputation": 11, "user_id": 8754361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2a61e1e228aaa8aa6b288c217a5623?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Butterfield", "link": "https://stackoverflow.com/users/8754361/austin-butterfield"}, "edited": false, "score": 0, "creation_date": 1507662582, "post_id": 46673877, "comment_id": 80296852, "body": "I was able to get the entire program working but only using [for] statements. Any suggestions on how to incorporate the [while] and [do while] statements?"}], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 2913477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b126939c105b8d71b18f93c6850e55f1?s=128&d=identicon&r=PG&f=1", "display_name": "MiniMax", "link": "https://stackoverflow.com/users/2913477/minimax"}, "is_accepted": false, "score": 1, "last_activity_date": 1507670105, "creation_date": 1507670105, "answer_id": 46676157, "question_id": 46673877, "link": "https://stackoverflow.com/questions/46673877/horizontal-bar-graph-in-c-without-the-use-of-arrays-or-strings/46676157#46676157", "title": "Horizontal Bar Graph in C Without the Use of Arrays or Strings", "body": "<p>My version. Tell me, if you need comments.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid obtain_crop(char *str, int *num) {\n    printf(\"Pounds of %-10s\", str);\n    scanf(\"%d\", num);\n}\n\nvoid print_bar(char *name, char *ch, int num) {\n    printf(\"%-10s\", name);\n    while(num &gt; 0) {\n        printf(\"%s\", ch);\n        num--;\n    }   \n    puts(\"\");\n}\n\nint main() {\n    int b, c, l, p, s;\n\n    obtain_crop(\"Beans:\", &amp;b);\n    obtain_crop(\"Carrots:\", &amp;c);\n    obtain_crop(\"Lettuce:\", &amp;l);\n    obtain_crop(\"Peas:\", &amp;p);\n    obtain_crop(\"Squash:\", &amp;s);\n\n    puts(\"\");\n\n    print_bar(\"Beans:\", \"B\", b); \n    print_bar(\"Carrots:\", \"C\", c); \n    print_bar(\"Lettuce:\", \"L\", l); \n    print_bar(\"Peas:\", \"P\", p); \n    print_bar(\"Squash:\", \"S\", s); \n    return 0;\n}\n</code></pre>\n\n<p><strong>Testing</strong></p>\n\n<pre><code>Pounds of Beans:    8\nPounds of Carrots:  6\nPounds of Lettuce:  1\nPounds of Peas:     4\nPounds of Squash:   9\n\nBeans:    BBBBBBBB\nCarrots:  CCCCCC\nLettuce:  L\nPeas:     PPPP\nSquash:   SSSSSSSSS\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8754361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2a61e1e228aaa8aa6b288c217a5623?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Butterfield", "link": "https://stackoverflow.com/users/8754361/austin-butterfield"}, "edited": false, "score": 0, "creation_date": 1507701589, "post_id": 46676313, "comment_id": 80309423, "body": "Thanks for the example of I&#39;m starting to understand how it all comes together."}], "tags": [], "owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "is_accepted": false, "score": 1, "last_activity_date": 1507671376, "last_edit_date": 1507671376, "creation_date": 1507670895, "answer_id": 46676313, "question_id": 46673877, "link": "https://stackoverflow.com/questions/46673877/horizontal-bar-graph-in-c-without-the-use-of-arrays-or-strings/46676313#46676313", "title": "Horizontal Bar Graph in C Without the Use of Arrays or Strings", "body": "<p>First, let me give you some advice: <strong>Whenever you have any recurring operation, it should probably be a method</strong></p>\n\n<p>Now, here is a working version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint read_value(const char * name, int * value) {\n  printf(\"Pounds of %s: \", name);\n  scanf(\"%d\", value);\n}\n\nint draw_value(const char * name, char c, int value) {\n  printf(\"%-*s\", 10, name);\n  for (int i = 0; i &lt; value; i++)\n    printf(\"%c\", c);\n  printf(\"\\n\");\n}\n\n// Initialize main\nint main(void)\n{\n  // Introduce variables\n\n  int b, c, l, p, s;\n\n  // Prompts &amp; obtaining of pounds of crops\n  read_value(\"Beans\", &amp;b);\n  read_value(\"Carrots\", &amp;c);\n  read_value(\"Lettuce\", &amp;l);\n  read_value(\"Peas\", &amp;p);\n  read_value(\"Squash\", &amp;s);\n\n  // Print empty line between input and output\n  printf(\"\\n\");\n\n  draw_value(\"Beans:\", 'B', b);\n  draw_value(\"Carrots:\", 'C', c);\n  draw_value(\"Lettuce:\", 'L', l);\n  draw_value(\"Peas:\", 'P', p);\n  draw_value(\"Squash:\", 'S', s);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8754361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2a61e1e228aaa8aa6b288c217a5623?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Butterfield", "link": "https://stackoverflow.com/users/8754361/austin-butterfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1507671376, "creation_date": 1507661334, "last_edit_date": 1507662065, "question_id": 46673877, "link": "https://stackoverflow.com/questions/46673877/horizontal-bar-graph-in-c-without-the-use-of-arrays-or-strings", "title": "Horizontal Bar Graph in C Without the Use of Arrays or Strings", "body": "<p>I have a C programming assignment that I am working on currently that asks us to write a program that reads 5 numbers representing pounds of a crop harvested and then displays a bar graph representing those values. I have to use a for, while, and a do while statement to do this. I am not allowed to use graphics, arrays, or commands that analyze strings. </p>\n\n<p>Here is a sample of the output that I need to replicate: </p>\n\n<pre><code>    Pounds of Beans: 1\n    Pounds of Carrots: 2\n    Pounds of Lettuce: 3\n    Pounds of Peas: 4\n    Pounds of Squash: 5\n\n    Beans:   B\n    Carrots: CC\n    Lettuce: LLL\n    Peas:    PPPP\n    Squash:  SSSSS\n</code></pre>\n\n<p>I was able to successfully take the 5 inputs. My problem starts with the proper syntax and flow structure that will allow me to print the bar graph as needed. I am currently able to print the bar graph properly for the first crop but how to do that recursively for each crop is very confusing to me. Please explain the flow that I need to understand in order to properly execute this program, any syntactical errors that I am making, and what exactly is meant by \"guarding\". </p>\n\n<p>Here is the code that I have so far: </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    // Initialize main\n    int main(void)\n    {\n\n    // Introduce variables\n\n    int count,      b, c, l, p, s;\n\n    // Prompts &amp; obtaining of pounds of crops\n    printf(\"Pounds of Beans: \");\n    scanf(\"%d\", &amp;b);\n    printf(\"Pounds of Carrots: \");\n    scanf(\"%d\", &amp;c);\n    printf(\"Pounds of Lettuce: \");\n    scanf(\"%d\", &amp;l);\n    printf(\"Pounds of Peas: \");\n    scanf(\"%d\", &amp;p);\n    printf(\"Pounds of Squash: \");\n\n    // Print empty line between input and output\n    printf(\"\\n\");\n\n    // Precursory print of \"Beans:\"\n    printf(\"Beans:   \");\n\n    // Display pounds of beans using for statment\n    for (count=0; count&lt;b; count++)\n            {\n                    printf(\"%.*s\", b, \"B\");\n            }\n            printf(\"\\n\");\n\n    printf(\"Carrots: \");\n\n    // Display lbs of carrots using for statment\n    for (count=0; count&lt;c; count++);\n            {\n                    printf(\"%.*s\", c, \"C\");\n            }\n            printf(\"\\n\");\n\n    }\n</code></pre>\n\n<p>I am currently getting errors: </p>\n\n<pre><code>    graph.c:44:2: warning: this \u2018for\u2019 clause does not guard... [-Wmisleading-indentation]\n    for (count=0; count&lt;c; count++);\n    ^~~\n    graph.c:45:3: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the \u2018for\u2019\n    {\n    ^\n</code></pre>\n\n<p>Any help that you can offer will be greatly appreciated. </p>\n"}, {"tags": ["c", "file", "file-io", "bitwise-operators"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507661146, "post_id": 46673754, "comment_id": 80296059, "body": "Don&#39;t prototype functions inside <code>main</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1507661306, "post_id": 46673754, "comment_id": 80296138, "body": "<code>while((c = getc(finp)) != EOF )</code> -- <code>unsigned int c</code> may not be able to hold <code>EOF</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1507661433, "post_id": 46673754, "comment_id": 80296207, "body": "@AjayBrahmakshatriya I think <code>EOF</code> will be converted to unsigned and it will work fine."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507661460, "post_id": 46673754, "comment_id": 80296225, "body": "@EugeneSh.: Indeed you are correct. <code>EOF</code> will be converted to <code>unsigned</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507661498, "post_id": 46673754, "comment_id": 80296261, "body": "@EugeneSh. yes, I agree it will work fine. But it is not advised."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1507666362, "post_id": 46673754, "comment_id": 80298677, "body": "<code>&amp; 134</code> is throwing away 5 out of 8 bits right away, then your <code>&lt;&lt; 3</code> is throwing away one of those, so right up front you only have two bits per output character."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6811792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9714e7f76325e474e7ea672395bd2ff4?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Sedefian", "link": "https://stackoverflow.com/users/6811792/zachary-sedefian"}, "edited": false, "score": 0, "creation_date": 1507661803, "post_id": 46673844, "comment_id": 80296433, "body": "Thank you. I managed to get it to work with only XOR. However, I was under the impression &lt;&lt;= would work as long as the number doesn&#39;t exceed (whatever number would take up 31 bits) since the extreme left bit will be 0 regardless."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 13, "user_id": 6811792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9714e7f76325e474e7ea672395bd2ff4?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Sedefian", "link": "https://stackoverflow.com/users/6811792/zachary-sedefian"}, "edited": false, "score": 0, "creation_date": 1507661963, "post_id": 46673844, "comment_id": 80296522, "body": "No, XOR introduces 1 bits into the pattern."}, {"owner": {"reputation": 13, "user_id": 6811792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9714e7f76325e474e7ea672395bd2ff4?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Sedefian", "link": "https://stackoverflow.com/users/6811792/zachary-sedefian"}, "edited": false, "score": 0, "creation_date": 1507662288, "post_id": 46673844, "comment_id": 80296712, "body": "Ahh, true. I tried left shifting after XOR, but all of the chars turned into their command versions -- i.e. ^P^L^E^A^S^E^E^N^C^R^Y^P^T ..."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 2, "last_activity_date": 1507661218, "creation_date": 1507661218, "answer_id": 46673844, "question_id": 46673754, "link": "https://stackoverflow.com/questions/46673754/manual-encryption-only-outputs-0s-to-file/46673844#46673844", "title": "Manual &quot;encryption&quot; only outputs 0&#39;s to file", "body": "<p>Your main problem is that <code>&amp;=</code> is a <em>lossy</em> transformation: that is you lose data.</p>\n\n<p>Ditto <code>&lt;&lt;=</code> and <code>&gt;&gt;=</code>, as both cause extreme 1 bits to be lost.</p>\n\n<p>You'll have more luck sticking to XOR; at first at least. That's because <code>x ^ y ^ y</code> is <code>x</code>.</p>\n\n<p>You can eliminate <code>putc</code> &amp;c. by isolating the encryption / decryption processes from the data acquisition stages, and by hardcoding the inputs whilst your getting things working.</p>\n"}], "owner": {"reputation": 13, "user_id": 6811792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9714e7f76325e474e7ea672395bd2ff4?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Sedefian", "link": "https://stackoverflow.com/users/6811792/zachary-sedefian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46673844, "answer_count": 1, "score": 0, "last_activity_date": 1507661218, "creation_date": 1507660925, "question_id": 46673754, "link": "https://stackoverflow.com/questions/46673754/manual-encryption-only-outputs-0s-to-file", "title": "Manual &quot;encryption&quot; only outputs 0&#39;s to file", "body": "<p>My assignment (not homework, just a \"try if you can do this\" thing) is to use bit operations to encrypt and decrypt a .txt file.</p>\n\n<p>This is the program. It successfully opens files for read/write but puts all 0's and spaces into the output.txt file instead of the expected \"encrypted\" text. I am guessing the issue comes from a fundamental misunderstanding of either data types or putc(). I understand that it outputs an unsigned char, but my professor said that an unsigned char is nothing but an unsigned int -- not sure if this is purely true or if it was a pedagogical simplification. Thanks a lot for any help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define NUMARG 3\n#define INFILEARG 1\n#define OUTFILEARG 2\n\nint main(int argc, char *argv[]){\n    /* Function prototypes */\n    unsigned int encryptDecrypt(unsigned int x, unsigned int ed);\n    const char *get_filename_ext(const char *filename);\n\n    FILE *finp;\n    FILE *foutp;\n\n    //ed for encryption/decryption choice\n    unsigned int ed, c;\n    const char *ext;\n\n    //Check for errors in argument number and file opening.\n    if(argc != NUMARG){\n        printf(\"You have to put the input and output files after the \n                program name.\\n\");\n        return(1);\n    }\n\n    if( (finp = fopen(argv[INFILEARG], \"r\")) == NULL ){\n         printf(\"Couldn't open %s for reading.\\n\", argv[INFILEARG]);\n         return(1);\n    }\n\n    if( (foutp = fopen(argv[OUTFILEARG], \"w\")) == NULL){\n        printf(\"Couldn't open %s for writing.\\n\", argv[OUTFILEARG]);\n        return(1);\n    }\n\n\n    //Get and check file extension.\n    ext = get_filename_ext(argv[INFILEARG]);\n    if(strcmp(ext, \"txt\")){\n        printf(\"Input file is not a .txt file.\\n\");\n        return(1);\n    }\n\n    ext = get_filename_ext(argv[OUTFILEARG]);\n    if(strcmp(ext, \"txt\")){\n        printf(\"Output file is not a .txt file.\\n\");\n        return(1);\n    }\n\n    //Get command to encrypt or decrypt.\n    do{\n        printf(\"Enter e to encrypt, d to decrypt: \");\n        ed = getchar();\n    } while(ed != 'e' &amp;&amp; ed != 'd');\n\n\n    //Send characters to output file.\n    while((c = getc(finp)) != EOF ){\n         putc(encryptDecrypt(c, ed), foutp);\n    }\n\n\n    // Close files.\n    if (fclose(finp) == EOF){\n         printf(\"Error closing input file.\\n\");\n    }\n\n    if (fclose(foutp) == EOF){\n        printf(\"Error closing output file.\\n\");\n    }\n\n    if ( ed == 'e'){\n        printf(\"Encrypted data written.\\n\");\n    } else {\n         printf(\"Data decrypted.\\n\");\n    }\n\n    return 0;\n}\n\nconst char *get_filename_ext(const char *filename) {\n    const char *dot = strrchr(filename, '.');\n    if(!dot || dot == filename) return \"\";\n    return dot + 1;\n}\n\nunsigned int encryptDecrypt(unsigned int c, unsigned int ed){\n    if( ed == 'e' ){\n        printf(\"%d before operated on.\\n\", c);\n        c &amp;= 134;\n        printf(\"%d after &amp;134.\\n\", c);\n        c ^= 6;\n        printf(\"%d after ^6. \\n\", c);\n        c &lt;&lt;= 3; \n        printf(\"%d after &lt;&lt;3\\n\", c);\n    }\n    else {\n        c &gt;&gt;= 3;\n        c ^= 6;\n        c &amp;= 134;       \n    }   \n    return c;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ZacBook:bitoperations $ cat input1.txt\nPlease encrypt this message.\nZacBook:bitoperations $ ./encrypt.o input1.txt output.txt\nEnter e to encrypt, d to decrypt: e\n80 before operated on.\n0 after &amp;134.\n6 after ^6. \n48 after &lt;&lt;3\n108 before operated on.\n4 after &amp;134.\n2 after ^6. \n16 after &lt;&lt;3\n[...Many more of these debug lines]\n2 after &amp;134.\n4 after ^6. \n32 after &lt;&lt;3\nEncrypted data written.\nZacBook:bitoperations $ cat output.txt\n00 0  00000 0  0 \n</code></pre>\n\n<p>As you can see, the unsigned int is being operated on successfully. I believe the problem is with putc() but I have tried changing the type of c to char and int and neither have worked.</p>\n"}, {"tags": ["c", "lua", "lua-api", "lua-5.2"], "answers": [{"comments": [{"owner": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "edited": false, "score": 0, "creation_date": 1507680733, "post_id": 46677720, "comment_id": 80303908, "body": "Fantastic! I&#39;m finding the API very difficult to learn, but it is rewarding. This worked beautifully."}, {"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "reply_to_user": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "edited": false, "score": 0, "creation_date": 1507681357, "post_id": 46677720, "comment_id": 80304044, "body": "@AlgoRythm glad you found it useful. The stack based API can be a bit tricky at first, I recommend reading the fantastic <a href=\"https://www.lua.org/docs.html#books\" rel=\"nofollow noreferrer\">Programming in Lua</a> book."}, {"owner": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "edited": false, "score": 0, "creation_date": 1507681779, "post_id": 46677720, "comment_id": 80304138, "body": "Yes, that has filled most of my browser history for the past week or so! It is very well documented, just quite a new concept for me :)"}], "tags": [], "owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "is_accepted": true, "score": 1, "last_activity_date": 1507680009, "creation_date": 1507680009, "answer_id": 46677720, "question_id": 46673741, "link": "https://stackoverflow.com/questions/46673741/lua-c-api-change-library-after-creation/46677720#46677720", "title": "Lua c API change library after creation", "body": "<p>You can use the <a href=\"https://www.lua.org/manual/5.3/manual.html#4.5\" rel=\"nofollow noreferrer\">registry</a>.</p>\n\n<blockquote>\n  <p>Lua provides a registry, a predefined table that can be used by any C code to store whatever Lua values it needs to store. The registry table is always located at pseudo-index <code>LUA_REGISTRYINDEX</code>. Any C library can store data into this table, but it must take care to choose keys that are different from those used by other libraries, to avoid collisions. Typically, you should use as key a string containing your library name, or a light userdata with the address of a C object in your code, or any Lua object created by your code. As with variable names, string keys starting with an underscore followed by uppercase letters are reserved for Lua. </p>\n</blockquote>\n\n<p>Store a reference to the module table in the registry on creation.</p>\n\n<pre><code>LUALIB_API int luaopen_liblncurses(lua_State* L) {\n    luaL_newlib(L, lncurseslib);\n\n    // This will start off as NULL\n    lua_pushlightuserdata(L, stdscr);\n    lua_setfield(L, -2, \"stdscr\");\n\n    lua_pushstring(L, VERSION);\n    lua_setglobal(L, \"_LNCURSES_VERSION\");\n\n    // Create a reference to the module table in the registry\n    lua_pushvalue(L, -1);\n    lua_setfield(L, LUA_REGISTRYINDEX, \"lncurses\");\n    return 1;\n}\n</code></pre>\n\n<p>Then when you <code>initscr</code>, update the field.   </p>\n\n<pre><code>static int lncurses_initscr(lua_State* L) {\n    initscr();\n\n    // Update \"stdscr\" in the module table\n    lua_getfield(L, LUA_REGISTRYINDEX, \"lncurses\");\n    lua_pushlightuserdata(L, stdscr);\n    lua_setfield(L, -2, \"stdscr\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 912, "user_id": 8062151, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/T2Tub.png?s=128&g=1", "display_name": "AlgoRythm", "link": "https://stackoverflow.com/users/8062151/algorythm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 46677720, "answer_count": 1, "score": 2, "last_activity_date": 1507680009, "creation_date": 1507660881, "question_id": 46673741, "link": "https://stackoverflow.com/questions/46673741/lua-c-api-change-library-after-creation", "title": "Lua c API change library after creation", "body": "<p>I am trying to wrap ncurses in Lua using the C API. I am working with the <code>stdscr</code> pointer: This is NULL before <code>initscr</code> is called, and <code>initscr</code> is called from Lua by design of my bindings. So in the driver function I do this:</p>\n\n<pre><code>// Driver function\nLUALIB_API int luaopen_liblncurses(lua_State* L){\n    luaL_newlib(L, lncurseslib);\n\n    // This will start off as NULL\n    lua_pushlightuserdata(L, stdscr);\n    lua_setfield(L, -2, \"stdscr\");\n\n    lua_pushstring(L, VERSION);\n    lua_setglobal(L, \"_LNCURSES_VERSION\");\n    return 1;\n}\n</code></pre>\n\n<p>This works as intended. The trouble comes when I need to modify <code>stdscr</code>. <code>initscr</code> is bound like this:</p>\n\n<pre><code>/*\n** Put the terminal in curses mode\n*/\nstatic int lncurses_initscr(lua_State* L){\n    initscr();\n    return 0;\n}\n</code></pre>\n\n<p>I need to moify the <code>stdscr</code> in the library to no  longer be null. Example code from Lua side:</p>\n\n<pre><code>lncurses = require(\"liblncurses\");\nlncurses.initscr();\nlncurses.keypad(lncurses.stdscr, true);\nlncurses.getch();\nlncurses.endwin();\n</code></pre>\n\n<p>But, <code>lncurses.stdscr</code> is NULL, so the it's essentially running the c equivalent of <code>keypad(NULL, true);</code></p>\n\n<p>My question being, how do I modify library values in Lua after the library is created?</p>\n"}, {"tags": ["c", "cmake", "clion", "jetbrains-ide"], "comments": [{"owner": {"reputation": 1202, "user_id": 4047084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OTViRK_YA_U/AAAAAAAAAAI/AAAAAAAAFgI/WyZXUA4tFsg/photo.jpg?sz=128", "display_name": "Stuart Buckingham", "link": "https://stackoverflow.com/users/4047084/stuart-buckingham"}, "edited": false, "score": 0, "creation_date": 1507666794, "post_id": 46673640, "comment_id": 80298912, "body": "Your int main() function is in main.c right?"}, {"owner": {"reputation": 43, "user_id": 8754415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3d05776435710c1299a4b7ac3e64ab?s=128&d=identicon&r=PG&f=1", "display_name": "snti", "link": "https://stackoverflow.com/users/8754415/snti"}, "reply_to_user": {"reputation": 1202, "user_id": 4047084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OTViRK_YA_U/AAAAAAAAAAI/AAAAAAAAFgI/WyZXUA4tFsg/photo.jpg?sz=128", "display_name": "Stuart Buckingham", "link": "https://stackoverflow.com/users/4047084/stuart-buckingham"}, "edited": false, "score": 0, "creation_date": 1507698199, "post_id": 46673640, "comment_id": 80308165, "body": "Yeah it is in main.c"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1507703626, "post_id": 46673640, "comment_id": 80310304, "body": "Do you have a <code>makefile</code>?"}, {"owner": {"reputation": 2022, "user_id": 139855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/968e038475ef2b82c4e86022d208edd1?s=128&d=identicon&r=PG", "display_name": "legalize", "link": "https://stackoverflow.com/users/139855/legalize"}, "edited": false, "score": 0, "creation_date": 1507749993, "post_id": 46673640, "comment_id": 80339832, "body": "run <code>make VERBOSE=1</code> to see more detail of what your build is doing outside of CLion (there is probably a way to set that from the CLion IDE as well, but I don&#39;t know where that is)."}], "owner": {"reputation": 43, "user_id": 8754415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3d05776435710c1299a4b7ac3e64ab?s=128&d=identicon&r=PG&f=1", "display_name": "snti", "link": "https://stackoverflow.com/users/8754415/snti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1784, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1507703405, "creation_date": 1507660501, "last_edit_date": 1507703405, "question_id": 46673640, "link": "https://stackoverflow.com/questions/46673640/clion-cmake-no-rule-to-make-target", "title": "CLion/CMake &quot;No rule to make target&quot;", "body": "<p>When I create a new project in CLion and just run it it works, but as soon as i change something in the CMakeLists.txt and press reload, it just stops working with the message:</p>\n\n<blockquote>\n  <p>mingw32-make.exe: *** No rule to make target 'CLLLLL'.  Stop.</p>\n</blockquote>\n\n<p>Even if I change it back to when it worked (just a simple Hello World), reload and try to build it, it doesn't work anymore.</p>\n\n<p>Using CLion with CMake Bundled 3.8.2 and MinGW 5.0, my CMakeLists.txt is:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(CLLLLL)\nset(CMAKE_C_STANDARD 99)\nset(SOURCE_FILES main.c)\nadd_executable(CLLLLL ${SOURCE_FILES})\n</code></pre>\n\n<p>main.c is:</p>\n\n<pre><code>int main() {\n    printf(\"Hello, World!\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1507658836, "post_id": 46673182, "comment_id": 80294819, "body": "You haven&#39;t fixed anything from <a href=\"https://stackoverflow.com/questions/46670913/how-do-i-write-this-hash-array-to-a-text-file\">your previous question</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8752034"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507659123, "post_id": 46673182, "comment_id": 80294982, "body": "Not the code, no. But the way i ask the question. I learnt that the reason i was getting different hashes was because the process itself, of printing the hash to the file was changing the hash itself (duh). But now my question is, how can i simply get the hash without modifying the file?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1507659329, "post_id": 46673182, "comment_id": 80295106, "body": "Well, how about you just don&#39;t modify the file?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507659422, "post_id": 46673182, "comment_id": 80295151, "body": "what is the name of the original file?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1507659489, "post_id": 46673182, "comment_id": 80295179, "body": "you seem to miss a <code>fclose (f);</code> just after <code>md5_final(&amp;ctx, byHash);</code>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1507659597, "post_id": 46673182, "comment_id": 80295225, "body": "if you add, remove, or change even one bit in the file, the hash for it will change (collisions, and perhaps some padding excluded,, but that&#39;s the spirit of a hash). There&#39;s no getting around that. If you want to save the hash somewhere, you&#39;ll have to save it in another file, or you&#39;ll have to save it in the original file and parse it out and only hash the original data of the file to compare the two."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1507659852, "post_id": 46673182, "comment_id": 80295364, "body": "Read the manual page on <code>fopen</code>. If you just want to read a file, you don&#39;t want to open  it with mode <code>rb+</code>. You also need to <code>fclose(f)</code> before using   <code>f</code> again to open a different file. Finally, you were warned in your prior question post about the  perils of using  <code>while (!feof(f))</code>, so you may want to avoid that."}], "answers": [{"tags": [], "owner": {"reputation": 1029, "user_id": 8729103, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fbd4857a5525dc8930a313b7035a639b?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/8729103/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1507659944, "creation_date": 1507659944, "answer_id": 46673481, "question_id": 46673182, "link": "https://stackoverflow.com/questions/46673182/how-can-i-modify-this-program-so-it-calculates-the-hash-without-modifying-the-fi/46673481#46673481", "title": "How can i modify this program so it calculates the hash without modifying the file?", "body": "<p>Sorry, cannot comment by now. \nIn difference to the question before you actually already open 2 different files. \nTo be honest i dont see in your code why it should still print to the same file that you first read for hashing but i see you need to clean up.</p>\n\n<p>1) name pointers in a way you can see what they actually do:</p>\n\n<p>Instead of </p>\n\n<pre><code>   FILE *f;\n</code></pre>\n\n<p>name it </p>\n\n<pre><code>File * file_to_be_hashed;\n</code></pre>\n\n<p>Then better declare a new name for your output file.</p>\n\n<pre><code>FILE * listOfHashes = fopen(\"fil1.txt\", \"a\");\n</code></pre>\n\n<p>Also do not forget to close the files when you are done with them:</p>\n\n<pre><code>md5_final(&amp;ctx, byHash)\nfclose(f);\n</code></pre>\n\n<p>But as said, i dont really see why your code would still print into your input file, except maybe fopen to \"fil2.txt\" dont work. My guess is the file fil2.txt does not yet exist so it cannot be opened for appending as you specify in fopen(\"fil1.txt\", \"a\");</p>\n\n<p>Also there is no reason for the first fopen to be rb+ as r provides enough rights for reading ;-)</p>\n\n<p>Maybe you learn about what the open flags of fopen actually mean...\n<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fopen.html\" rel=\"nofollow noreferrer\">http://pubs.opengroup.org/onlinepubs/009695399/functions/fopen.html</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8752034"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507659944, "creation_date": 1507658784, "last_edit_date": 1507659360, "question_id": 46673182, "link": "https://stackoverflow.com/questions/46673182/how-can-i-modify-this-program-so-it-calculates-the-hash-without-modifying-the-fi", "title": "How can i modify this program so it calculates the hash without modifying the file?", "body": "<p>i have after alot of troubles finally come up with this code. It calculates the hash of a text file, and adds the hash to the file. Obviously, that changes the hash, so when i run it again i will get another hash. </p>\n\n<p>However, if i just want to get the hash in its current state without changing it - what should i be changing in my code? Is it the   \"f = fopen (apszArgV[1], \"rb+\");\" who causes the hash to change?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"md5.h\"\n\n#define BUFFER_SIZE 1024\n\nvoid print_hash(char hash[]);\n\nint main (int iArgC, char *apszArgV[])\n{\n   FILE *f;\n   MD5_CTX ctx;\n   BYTE byHash[16];\n   BYTE byBuffer[BUFFER_SIZE]; \n   int iReadBytes;\n\n   if (iArgC &lt; 2) {\n      printf (\"Usage: md5_add &lt;file name&gt;\\n\");\n      return 1;\n   }\n   f = fopen (apszArgV[1], \"rb+\");\n   if (f != NULL) {\n\n      md5_init(&amp;ctx); \n\n      while (!feof(f)) {\n         iReadBytes = fread(byBuffer, sizeof(BYTE), BUFFER_SIZE, f);\n         md5_update(&amp;ctx, byBuffer, iReadBytes);  \n         if (iReadBytes &lt; BUFFER_SIZE) break;\n      }\n\n      md5_final(&amp;ctx, byHash);\n\n      f = fopen(\"fil1.txt\", \"a\");\n\n      for (int i = 0; i &lt; 15; i++) {\n          fprintf (f, \"%02X\", byHash[i]);\n      }\n      fprintf(f, \"\\n\");\n      fclose (f);\n   }\n\n   print_hash(byHash);\n\n}\n\nvoid print_hash(char hash[]) \n{\n   int idx; \n   for (idx=0; idx &lt; 16; idx++) \n      printf(\"%02x\",(int)((unsigned char)hash[idx])); \n   printf(\"\\n\"); \n}  \n</code></pre>\n\n<p>thanks</p>\n\n<p>new to c btw </p>\n"}, {"tags": ["c", "linux", "gcc", "makefile", "gdb"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 4, "creation_date": 1507658554, "post_id": 46673096, "comment_id": 80294662, "body": "You are adding the <code>-g</code> only to the linking command. The auto compile command does not get the <code>-g</code> flag. Add the <code>-g</code> to <code>CFLAGS</code> itself"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1507658589, "post_id": 46673096, "comment_id": 80294684, "body": "Standard variable is <code>CFLAGS</code>, make use default rule so you must use default name variable to add flags to your object compile. More info on the manual of make."}], "answers": [{"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 3, "last_activity_date": 1507659039, "creation_date": 1507659039, "answer_id": 46673246, "question_id": 46673096, "link": "https://stackoverflow.com/questions/46673096/no-debugging-symbols-found-in-archlinux-with-g/46673246#46673246", "title": "No debugging symbols found in ArchLinux with -g", "body": "<p>You are adding the <code>-g</code> only to the linking command. The object files are generated by the auto compile target of make. This doesn't have the <code>-g</code> flag in it. </p>\n\n<p>You have 2 options - </p>\n\n<ol>\n<li><p>Change your variable <code>CFLAG</code> to <code>CFLAGS</code> and add <code>-g</code> to it. <code>CFLAGS</code> is picked by the auto compile command and it will create object files with debug info</p></li>\n<li><p>Add the following target - </p>\n\n<p><code>%.o: %.c\n    gcc -g $(CFLAG) -o $@ $&lt;</code></p>\n\n<p>before the <code>$(NAME)</code> target.</p></li>\n</ol>\n\n<p>The second one gives you more control with the targets but the first method is the standard way of compiling. </p>\n\n<p>Also, always try using standard names for variables unless you specifically need to name them separately. </p>\n"}], "owner": {"reputation": 35, "user_id": 6852382, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d2Q-1D-m4_A/AAAAAAAAAAI/AAAAAAAAJek/bCG7mBaoH7A/photo.jpg?sz=128", "display_name": "sime", "link": "https://stackoverflow.com/users/6852382/sime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 46673246, "answer_count": 1, "score": 1, "last_activity_date": 1507659039, "creation_date": 1507658451, "last_edit_date": 1507658578, "question_id": 46673096, "link": "https://stackoverflow.com/questions/46673096/no-debugging-symbols-found-in-archlinux-with-g", "title": "No debugging symbols found in ArchLinux with -g", "body": "<p>I have a problem with GDB in Archlinux:</p>\n\n<p>Even I add <code>-g</code> in my Makefile gdb say <code>(no debugging symbols found)...done.</code>.</p>\n\n<p>But if I compile manually <code>gcc -g *.c</code> it work...</p>\n\n<p>I don't know what is don't work in my Makefile ?</p>\n\n<p>My Archlinux:</p>\n\n<pre><code>Linux sime_arch 4.13.4-1-ARCH #1 SMP PREEMPT Thu Sep 28 08:39:52 CEST 2017 x86_64 GNU/Linux\n</code></pre>\n\n<p>My GCC:</p>\n\n<pre><code>gcc version 7.2.0 (GCC)\n</code></pre>\n\n<p>My Makefile:</p>\n\n<pre><code>SRC = test.c \\\n      test2.c\n\nOBJ = $(SRC:.c=.o)\n\nNAME    = test_name\n\nCFLAG   = -Wall -Werror -Wextra\n\nall:     $(NAME)\n\n$(NAME): $(OBJ)\n     gcc -g $(OBJ) -o $(NAME) $(CFLAG)\n\nclean:  \n    rm -f $(OBJ)\n\nfclean: clean\n    rm -f $(NAME)\n\nre: fclean all}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}]