[{"tags": ["c#", "c", "struct", "shared-libraries", "marshalling"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 1, "creation_date": 1465431653, "post_id": 37714341, "comment_id": 62903594, "body": "An enum can be different sizes 1,2,4,8 bytes so check you c language compiler for default size.  The size can be set in c# to match c language.  Make sure &#39;name&#39; ends with a &#39;\\0&#39;.  Try :  Marshal.StringToHGlobalAuto(&quot;Xxx20140508743\\0&quot;),"}, {"owner": {"reputation": 91, "user_id": 2506877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/632f83f81a613ffeeca9199464e90a32?s=128&d=identicon&r=PG", "display_name": "KickTheDragon", "link": "https://stackoverflow.com/users/2506877/kickthedragon"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1465439168, "post_id": 37714341, "comment_id": 62905088, "body": "Unfortunately adding &quot;\\0&quot; didn&#39;t fix it. However, another interesting note to make is the param ID enum seems to be marshaling correctly since Xxx2014050874 is the third enum in the list, and the log output shows param ID to be 3, as well as D1 to be 11 which is correct. But what is interesting is Oid changes every time the function is run, and should be a set const 3 byte array. I&#39;ll edit my post to show the different log output"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 2, "creation_date": 1465459103, "post_id": 37714341, "comment_id": 62912467, "body": "Variables are being passed properly from c# to c, but the return is failing because you corrupted the execution stack.  In .h pq_gen_key parameter list contains 5 pointers so in c# the DllImport must contain 5 IntPtr.  Then take ParamSet p and use Marshal.StructureToPtr to get the IntPtr."}, {"owner": {"reputation": 91, "user_id": 2506877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/632f83f81a613ffeeca9199464e90a32?s=128&d=identicon&r=PG", "display_name": "KickTheDragon", "link": "https://stackoverflow.com/users/2506877/kickthedragon"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1465498202, "post_id": 37714341, "comment_id": 62939207, "body": "Brilliant mate! I you were spot on about the struct and the rest needing to be IntPtr as well."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 1, "creation_date": 1465519441, "post_id": 37714341, "comment_id": 62947357, "body": "You can&#39;t pass local variables that are on the execution stack to a dll which requires variables to be global (static).  The AllocHGlobal allocates memory in global space and that is why the ParamSet is now working.  You have similar issue with your byte[].  You must use AllocHGlobal to allocate global memory for your byte array.  Then use Marshal.Copy() to copy byte[] to allocated global memory.  Again in DllImport your parameter is IntPtr like I said earlier."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 2506877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/632f83f81a613ffeeca9199464e90a32?s=128&d=identicon&r=PG", "display_name": "KickTheDragon", "link": "https://stackoverflow.com/users/2506877/kickthedragon"}, "is_accepted": true, "score": 0, "last_activity_date": 1465572943, "last_edit_date": 1465572943, "creation_date": 1465498622, "answer_id": 37734099, "question_id": 37714341, "link": "https://stackoverflow.com/questions/37714341/marshaling-c-struct-into-native-c-library/37734099#37734099", "title": "Marshaling C# struct into native C library", "body": "<p>It all works now!</p>\n\n<p>Marshaling the params struct looks like this</p>\n\n<pre><code>        IntPtr parameter = Marshal.AllocHGlobal(Marshal.SizeOf(param));\n\n        Marshal.StructureToPtr(param, parameter, false);\n</code></pre>\n\n<p>below is the final function working.</p>\n\n<pre><code>    public static KeyPair generate_keys(ParamSet param) {\n        uint pub_len = 0;\n        uint priv_len = 0;\n\n        IntPtr privkey_blob_len = new IntPtr(priv_len);\n        IntPtr pubkey_blob_len = new IntPtr(pub_len);\n\n        IntPtr parameter = Marshal.AllocHGlobal(Marshal.SizeOf(param));\n\n        Marshal.StructureToPtr(param, parameter, false);\n\n        IntPtr pv_ptr = IntPtr.Zero;\n        IntPtr pb_ptr = IntPtr.Zero;\n\n        var result = ffi.ffi.pq_gen_key(parameter, out privkey_blob_len, pv_ptr, out pubkey_blob_len, pb_ptr);\n\n        Console.WriteLine(\"Result: \" + result + \" Private Key BLob Length: \" + privkey_blob_len.ToInt32() + \" Public Key Blob Lengh: \" + pubkey_blob_len);\n\n\n       if (result != 0)\n          Console.WriteLine(\"We got problems\");\n\n\n        pv_ptr = Marshal.AllocHGlobal(privkey_blob_len.ToInt32());\n        pb_ptr = Marshal.AllocHGlobal(pubkey_blob_len.ToInt32());\n\n\n        result = ffi.ffi.pq_gen_key(parameter, out privkey_blob_len, pv_ptr, out pubkey_blob_len, pb_ptr);\n\n        if (result != 0)\n            Console.WriteLine(\"We got problems\");\n\n       Console.WriteLine(\"Result: \" + result.ToString() + \" Private Key BLob Length: \" + privkey_blob_len + \" Public Key Blob Lengh: \" + pubkey_blob_len);\n\n        byte[] privkeyBytes = new byte[privkey_blob_len.ToInt32()];\n        byte[] pubkeyBytes = new byte[pubkey_blob_len.ToInt32()];\n\n        Marshal.Copy(pv_ptr, privkeyBytes, 0, privkey_blob_len.ToInt32());\n        Marshal.Copy(pb_ptr, pubkeyBytes, 0, pubkey_blob_len.ToInt32());\n\n\n        Marshal.FreeHGlobal(pv_ptr);\n        Marshal.FreeHGlobal(pb_ptr);\n        Marshal.FreeHGlobal(parameter);\n\n\n        return new KeyPair(new PrivateKey(privkeyBytes), new PublicKey(pubkeyBytes));\n\n    }\n</code></pre>\n\n<p>And my ffi</p>\n\n<pre><code>public static class ffi {\n\n    [DllImport(\"ntrumls\")]\n    public static extern int pq_gen_key(IntPtr p, out IntPtr privkey_blob_len, IntPtr privkey_blob, out IntPtr pubkey_blob_len, IntPtr pubkey_blob);\n\n\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 2506877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/632f83f81a613ffeeca9199464e90a32?s=128&d=identicon&r=PG", "display_name": "KickTheDragon", "link": "https://stackoverflow.com/users/2506877/kickthedragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37734099, "answer_count": 1, "score": 3, "last_activity_date": 1465572943, "creation_date": 1465426973, "last_edit_date": 1465438939, "question_id": 37714341, "link": "https://stackoverflow.com/questions/37714341/marshaling-c-struct-into-native-c-library", "title": "Marshaling C# struct into native C library", "body": "<p>I'm currently writing a <a href=\"https://github.com/FractalGlobal/NTRUMLS-Sharp\" rel=\"nofollow\"><em>NTRUMLS C#</em></a> wrapper for the <a href=\"https://github.com/NTRUOpenSourceProject/NTRUMLS\" rel=\"nofollow\"><em>NTRUMLS C</em></a> library.  I'm running into an issue where I don't believe i'm marshaling the parameters data correctly through the foreign function interface that map to the C library entry points.</p>\n\n<p>Here's the specific foreign function interface I'm using in <code>ffi.cs</code>.</p>\n\n<pre><code>using System;\nusing System.Runtime.InteropServices;\nusing NTRUMLS.Params;\n\nnamespace NTRUMLS.ffi {\npublic static class ffi {\n\n    [DllImport(\"ntrumls\")]\n    public static extern int pq_gen_key(ParamSet p, out IntPtr privkey_blob_len, out byte[] privkey_blob, out IntPtr pubkey_blob_len, out byte[] pubkey_blob);\n  }\n}\n</code></pre>\n\n<p>The specific ParamSet Struct i'm passing in <code>param.cs</code>, which I believe might be specifically causing the issue.</p>\n\n<pre><code>using System;\nusing System.Text;\nusing System.Runtime.InteropServices;\nnamespace NTRUMLS.Params {\n\n[SerializableAttribute]\n[ComVisibleAttribute(true)]\npublic enum ParamSetId {\n    Xxx20140508401,\n    Xxx20140508439,\n    Xxx20140508593,\n    Xxx20140508743,\n\n    Xxx20151024401,\n    Xxx20151024443,\n    Xxx20151024563,\n    // Xxx20151024509,\n    Xxx20151024743,\n    Xxx20151024907,\n}\n\n[StructLayout(LayoutKind.Sequential)]\npublic struct ParamSet {\n\n\n    ParamSetId id;\n\n    IntPtr name;\n    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]\n    byte[] oid;\n    [MarshalAs(UnmanagedType.U1)]\n    byte n_bits;\n    [MarshalAs(UnmanagedType.U1)]\n    byte q_bits;\n    [MarshalAs(UnmanagedType.U2)]\n    ushort n;\n    [MarshalAs(UnmanagedType.I1)]\n    sbyte p;\n    [MarshalAs(UnmanagedType.I8)]\n    long q;\n    [MarshalAs(UnmanagedType.I8)]\n    long b_s;\n    [MarshalAs(UnmanagedType.I8)]\n    long b_t;\n    [MarshalAs(UnmanagedType.I8)]\n    long norm_bound_s;\n    [MarshalAs(UnmanagedType.I8)]\n    long norm_bound_t;\n    [MarshalAs(UnmanagedType.U1)]\n    byte d1;\n    [MarshalAs(UnmanagedType.U1)]\n    byte d2;\n    [MarshalAs(UnmanagedType.U1)]\n    byte d3;\n    [MarshalAs(UnmanagedType.U2)]\n    ushort padded_n;\n\n    public ushort get_n() {\n        return n;\n    }\n\n    public sbyte get_p() {\n        return p;\n    }\n\n    public byte get_d1() {\n        return d1;\n    }\n\n    public byte get_d2() {\n        return d2;\n    }\n\n    public byte get_d3() {\n        return d3;\n    }\n\n    public uint product_form_bytes() {\n        return (uint)(4 * (d1 + d2 + d3));\n    }\n\n    public uint polynomial_bytes() {\n        return (uint)(padded_n * 8);\n    }\n\n    public uint privkey_packed_bytes() {\n        return (uint)(5 + 2 * ((2 * ( d1 + d2 + d3) * n_bits + 7) / 8) + ((n +4) / 5));\n    }\n\n    public uint pubkey_packed_bytes() {\n        return (uint)(5 + (n * q_bits + 7) / 8 + 64);\n    }\n\n    public ParamSet (ParamSetId ID, IntPtr NAME, byte[] OID, byte N_BITS, byte Q_BITS, ushort N, sbyte P, long Q, long B_S, long B_T, long NORM_BOUND_S, long NORM_BOUND_T, byte D1, byte D2, byte D3, ushort PADDED_N) {\n        id = ID;\n        name = NAME;\n        oid = OID;\n        n_bits = N_BITS;\n        q_bits = Q_BITS;\n        n = N;\n        p = P;\n        q = Q;;\n        b_s = B_S;\n        b_t = B_T;\n        norm_bound_s = NORM_BOUND_S;\n        norm_bound_t = NORM_BOUND_T;\n        d1 = D1;\n        d2 = D2;\n        d3 = D3;\n        padded_n = PADDED_N;\n    }\n\n\n}\n\npublic static class ParamSets {\n\n    /// &lt;summary&gt;\n    /// 256 bit security parameter\n    /// &lt;/summary&gt;\n    public static readonly ParamSet Xxx20140508_743 = new ParamSet(\n        ParamSetId.Xxx20140508743,\n        Marshal.StringToHGlobalAuto(\"Xxx20140508743\"),\n        new byte[] {0xff, 0xff, 0xfc},\n        10,\n        20,\n        743,\n        3,\n        1 &lt;&lt; 20,\n        336,\n        112,\n        (1 &lt;&lt; 19) - 336,\n        (1 &lt;&lt; 19) - 112,\n        11,\n        11,\n        15,\n        768);\n   }\n}\n</code></pre>\n\n<p>And here's the wrapper itself <code>NTRUMLSWrapper.cs</code>.  </p>\n\n<pre><code>using NTRUMLS.ffi;\nusing NTRUMLS.Params;\nusing System;\nusing System.Runtime.InteropServices;\n\nnamespace NTRUMLS.Library {\n\npublic static class NTRUMLSWrapper {\n\n    public static KeyPair generate_keys(ParamSet param) {\n        int pub_len = 0;\n        int priv_len = 0;\n\n        Console.WriteLine(\"Param N: \" + param.get_n());\n        Console.WriteLine(\"Param P: \" + param.get_p());\n        Console.WriteLine(\"Param D1: \" + param.get_d1());\n        Console.WriteLine(\"Param D2: \" + param.get_d2());\n        Console.WriteLine(\"Param D3: \" + param.get_d3());\n\n        GCHandle pub_len_handle = GCHandle.Alloc(pub_len);\n        GCHandle priv_len_handle = GCHandle.Alloc(priv_len);\n\n        IntPtr privkey_blob_len = (IntPtr)pub_len_handle;\n        IntPtr pubkey_blob_len = (IntPtr)priv_len_handle;\n\n        GCHandle handle = GCHandle.Alloc(param);\n\n        IntPtr paramater = (IntPtr)handle;\n\n        byte[] pv = new byte[priv_len];\n        byte[] pb = new byte[pub_len];\n\n    //    GCHandle pv_handle = GCHandle.Alloc(pv);\n    //    GCHandle pb_handle = GCHandle.Alloc(pb);\n\n        var result = ffi.ffi.pq_gen_key(param, out privkey_blob_len, out pv, out pubkey_blob_len, out pb);\n\n        Console.WriteLine(\"Result: \" + result + \" Private Key BLob Length: \" + priv_len + \" Public Key Blob Lengh: \" + pub_len);\n\n\n\n       if (result != 0)\n          Console.WriteLine(\"We got problems\");\n\n         byte[] privatekey_blob = new byte[privkey_blob_len.ToInt64()];\n         byte[] pubkey_blob = new byte[pubkey_blob_len.ToInt64()];\n\n         result = ffi.ffi.pq_gen_key(param, out privkey_blob_len, out privatekey_blob, out pubkey_blob_len, out pubkey_blob);\n\n        if (result != 0)\n            Console.WriteLine(\"We got problems\");\n\n       Console.WriteLine(\"Result: \" + result.ToString() + \" Private Key BLob Length: \" + privkey_blob_len + \" Public Key Blob Lengh: \" + pubkey_blob_len);\n\n        // byte[] privkeyBytes = new byte[priv_len.ToInt32()];\n        // byte[] pubkeyBytes = new byte[pub_len.ToInt32()];\n\n\n\n        return new KeyPair(new PrivateKey(pubkey_blob), new PublicKey(privatekey_blob));;\n\n    }\n\n}\n\n\npublic struct PrivateKey {\n    byte[] ffi_key;\n\n    public PrivateKey (byte[] bytes) {\n        ffi_key = bytes;\n    }\n\n    public byte[] get_bytes() {\n        return ffi_key;\n    }\n}\n\npublic struct PublicKey {\n    byte[] ffi_key;\n\n    public PublicKey (byte[] bytes) {\n        ffi_key = bytes;\n    }\n\n    public byte[] get_bytes() {\n        return ffi_key;\n    }\n}\n\n public struct KeyPair {\n\n    PublicKey publicKey;\n    PrivateKey privateKey;\n\n    public KeyPair(PrivateKey privKey, PublicKey pubkey)\n    {\n        publicKey = pubkey;\n        privateKey = privKey;\n    }\n\n    public PublicKey getPublic()\n    {\n        return publicKey;\n    }\n\n    public PrivateKey getPrivate()\n    {\n        return privateKey;\n    }\n\n  }\n\n}\n</code></pre>\n\n<p>And the <code>Program.cs</code> to run the key gen test.</p>\n\n<pre><code>using System;\nusing NTRUMLS.Library;\nusing NTRUMLS.Params;\n\nnamespace NTRUMLS\n{\npublic class Program\n{\n    public static void Main(string[] args)\n    {\n        KeyPair keypair = NTRUMLSWrapper.generate_keys(ParamSets.Xxx20140508_743);\n\n        Console.WriteLine(\"Generated Keys!\");\n\n        // TODO Sign, than Verify to confirm test\n\n    }\n}\n}\n</code></pre>\n\n<p>Here's the header function of the C function I'm marshaling into</p>\n\n<p>in <code>pqntrusign.h</code></p>\n\n<pre><code>int\npq_gen_key(\nPQ_PARAM_SET  *params,\nsize_t        *privkey_blob_len,\nunsigned char *privkey_blob,\nsize_t        *pubkey_blob_len,\nunsigned char *pubkey_blob);\n</code></pre>\n\n<p>in <code>params.h</code> and <code>params.c</code></p>\n\n<pre><code>enum _PQ_PARAM_SET_ID {\nXXX_20140508_401,\nXXX_20140508_439,\nXXX_20140508_593,\nXXX_20140508_743,\n\nXXX_20151024_401,\nXXX_20151024_443,\nXXX_20151024_563,\n//XXX_20151024_509,\nXXX_20151024_743,\nXXX_20151024_907,\n};\n\n\nstruct _PQ_PARAM_SET {\nPQ_PARAM_SET_ID  id;          /* parameter set id */\nconst char       *name;       /* human readable name */\nconst uint8_t    OID[3];      /* OID */\nuint8_t          N_bits;      /* ceil(log2(N)) */\nuint8_t          q_bits;      /* ceil(log2(q)) */\nuint16_t         N;           /* ring degree */\nint8_t           p;           /* message space prime */\nint64_t          q;           /* ring modulus */\nint64_t          B_s;         /* max norm of f*a convolution */\nint64_t          B_t;         /* max norm of g*a convolution */\nint64_t          norm_bound_s;/* q/2 - B_s */\nint64_t          norm_bound_t;/* q/2 - B_t */\nuint8_t          d1;          /* Product form +1/-1 counts */\nuint8_t          d2;\nuint8_t          d3;\nuint16_t         padded_N;    /* # Polynomial coefficients for Karatsuba */\n};\n</code></pre>\n\n<p>I believe the current problem is with the <code>ParamSet struct</code>, and matching the name attribute properly with the C struct <code>const char*name</code> pointer attribute. However, i'm not entirely sure that's the case.</p>\n\n<p>I modified the NTRUMLS C <code>pqntrusign.c</code> source file to print out to a log.txt and logs the variables i'm passing.  Here's the snippet i added in the very beginning of the <code>int pq_gen_key</code> function.</p>\n\n<pre><code> FILE * fp;\n\n fp = fopen (\"log.txt\", \"a+\");\n fprintf(fp, \"Logging made it here variables priv_blob_len_pointer %i pub_blob_len_pointer %i priv_blob_len %i pub_blob_len %i privkey %x pubkey %x \\n\", privkey_blob_len, pubkey_blob_len, *privkey_blob_len, *pubkey_blob_len, privkey_blob, pubkey_blob);\n\n fprintf(fp, \"Logging param ID: %i Oid %x : N: %i Q: %i P %i Padded N: %i D1: %i D2: %i D3: %i \\n\", P-&gt;id, P-&gt;OID, P-&gt;N, P-&gt;q, P-&gt;p, P-&gt;padded_N, P-&gt;d1, P-&gt;d2, P-&gt;d3);\n\n\n\nif(!P || !privkey_blob_len || !pubkey_blob_len)\n{\n  return PQNTRU_ERROR;\n}\n\nN = P-&gt;N;\npadN = P-&gt;padded_N;\nq = P-&gt;q;\np = P-&gt;p;\nd1 = P-&gt;d1;\nd2 = P-&gt;d2;\nd3 = P-&gt;d3;\n\nfprintf(fp, \"Logging Local N: %i Q: %i P %i Padded N: %i D1: %i D2: %i D3: %i \\n\", N, q, p, padN, d1, d2, d3);\n\nfclose(fp);\n</code></pre>\n\n<p>I'm using Fedora 23 x64 so the current libntrumls.so uploaded on the NTRUMLS-Sharp github was compiled with that snippet added. </p>\n\n<p>Output from C# Console</p>\n\n<pre><code>Param N: 743\nParam P: 3\nParam D1: 11\nParam D2: 11\nParam D3: 15\nResult: -1 Private Key BLob Length: 0 Public Key Blob Lengh: 0\nWe got problems\nWe got problems\nResult: -1 Private Key BLob Length: 3 Public Key Blob Lengh: 11\nGenerated Keys!\n</code></pre>\n\n<p>Output from log.txt</p>\n\n<pre><code>Logging made it here variables priv_blob_len_pointer -923442424 pub_blob_len_pointer -923442432 priv_blob_len -994004096 pub_blob_len -994004064 privkey c8f56510 pubkey f0b0b \nLogging param ID: 3 Oid c8f56528 : N: 0 Q: 42678032 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging Local N: 0 Q: 42678032 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging made it here variables priv_blob_len_pointer -923442424 pub_blob_len_pointer -923442432 priv_blob_len -994003392 pub_blob_len -994003352 privkey c8f56510 pubkey f0b0b \nLogging param ID: 3 Oid c8f56528 : N: 0 Q: 42678032 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging Local N: 0 Q: 42678032 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \n</code></pre>\n\n<p><strong>EDIT:</strong><br>\nAnother interesting thing to note is param ID logged as 3 is correct, since the enum <code>Xxx20140508743</code> is 3, and D1 is correct as 11.  But every time i run the function the output logged for OID is different, when it's a set 3 byte array in my <code>ParamSet.Xxx20140508_743</code>.  This leads me to believe the error is in marshaling <code>const char *name</code>, which is throwing the rest off. </p>\n\n<p>Below is a another output of log.txt for comparison (this is also with the added \"\\0\" to <code>Marshal.StringToHGlobalAuto(\"Xxx20140508743\\0\")</code></p>\n\n<pre><code>Logging made it here variables priv_blob_len_pointer 982750168 pub_blob_len_pointer 982750160 priv_blob_len -960449664 pub_blob_len -960449632 privkey 3a9395e0 pubkey f0b0b \nLogging param ID: 3 Oid 3a9395f8 : N: 0 Q: 38160144 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging Local N: 0 Q: 38160144 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging made it here variables priv_blob_len_pointer 982750168 pub_blob_len_pointer 982750160 priv_blob_len -960448960 pub_blob_len -960448920 privkey 3a9395e0 pubkey f0b0b \nLogging param ID: 3 Oid 3a9395f8 : N: 0 Q: 38160144 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \nLogging Local N: 0 Q: 38160144 P 19 Padded N: 0 D1: 11 D2: 0 D3: 0 \n</code></pre>\n\n<p>I don't believe the Windows dll is working yet.  If someone can't see the problem immediately in my code, or error log, the directions to compile and test everything are in the NTRUMLS C# README file.</p>\n\n<p>Thank you for taking the time to read this question!  I know it's long and descriptive, but I wasn't quite sure how to narrow it down without providing all the information since I spent a lot of time searching the forums and modifying my code to get this far.</p>\n\n<p>Best Regards  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1465426851, "post_id": 37714259, "comment_id": 62902159, "body": "Not related to the question, but you can declare counter variables right inside of <code>for</code>, like this: <code>for(int i = 0; i &lt; DIMMAX; i++)</code>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1465427412, "post_id": 37714259, "comment_id": 62902329, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11546076/error-incompatible-type-for-argument\">error: incompatible type for argument</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1465427457, "post_id": 37714259, "comment_id": 62902340, "body": "Avoid typedefs. they only exist to confuse you."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1465427486, "post_id": 37714259, "comment_id": 62902351, "body": "For future reference, please do a search for the error message on Google, leaving out your variable names. I searched for &quot;error incompatible type for argument&quot; and got three relevant SO posts at the top of the search."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1465426960, "creation_date": 1465426960, "answer_id": 37714338, "question_id": 37714259, "link": "https://stackoverflow.com/questions/37714259/why-ide-shows-error-incompatible-type-for-argument/37714338#37714338", "title": "Why ide shows &quot;[Error] incompatible type for argument&quot;?", "body": "<p>The <code>Matrice</code> typedef is already a 2-dimensional array. When you declare your function</p>\n\n<pre><code>void acquisisciMatrice(Matrice mat[DIMMAX][DIMMAX]){\n</code></pre>\n\n<p>you're saying that <code>mat</code> is a 2-dimensional array of <code>Matrice</code>, which is a 4-dimensional array of <code>Razionale</code>. <code>mat[i][j]</code> is then a <code>Matrice</code>, not a <code>Razionale</code>.</p>\n\n<p>The function should just be</p>\n\n<pre><code>void acquisisciMatrice(Matrice mat){\n</code></pre>\n\n<p>since the dimensions are part of the <code>Matrice</code> typedef. You should also change the variable in <code>main()</code>:</p>\n\n<pre><code>Matrice m;\nacquisisciMatrice(m);\n</code></pre>\n\n<p>Note that <code>acquisisciRazionale()</code> will not fill in the matrix elements in <code>acquisisciMatrice()</code>. When you call</p>\n\n<pre><code>acquisisciRazionale(mat[i][j]);\n</code></pre>\n\n<p>you're passing a copy of the array element. <code>scanf()</code> is then writing into that copy, which has no effect on the original array. You should pass a pointer.</p>\n\n<pre><code>acquisisciRazionale(&amp;mat[i][j]);\n</code></pre>\n\n<p>and change the function to:</p>\n\n<pre><code>void aquisisciRazionale(Razionale *n){\n\n    printf(\"Inserire numeratore: \");\n    scanf(\"%d\", &amp;(n-&gt;num));\n    printf(\"Inserire denominatore: \");\n    scanf(\"%d\", &amp;(n-&gt;den));\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6442804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54bd480ed54e1e196a6a76d015671777?s=128&d=identicon&r=PG&f=1", "display_name": "malesani", "link": "https://stackoverflow.com/users/6442804/malesani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 0, "accepted_answer_id": 37714338, "answer_count": 1, "score": 1, "last_activity_date": 1465427370, "creation_date": 1465426569, "last_edit_date": 1592644375, "question_id": 37714259, "link": "https://stackoverflow.com/questions/37714259/why-ide-shows-error-incompatible-type-for-argument", "title": "Why ide shows &quot;[Error] incompatible type for argument&quot;?", "body": "<p>I'm beginner in C and I don't understand why when i run the code below</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define DIMMAX 5\n#define MAXSTRINGA 20\n\ntypedef struct{\n    \n    int num;\n    int den;\n    \n} Razionale;\n\n\ntypedef Razionale Matrice[DIMMAX][DIMMAX];\n\nvoid aquisisciRazionale(Razionale);\nvoid acquisisciMatrice(Matrice[DIMMAX][DIMMAX]);\n\nvoid aquisisciRazionale(Razionale n){\n    \n    printf(&quot;Inserire numeratore: &quot;);\n    scanf(&quot;%d&quot;, &amp;n.num);\n    printf(&quot;Inserire denominatore: &quot;);\n    scanf(&quot;%d&quot;, &amp;n.den);\n    \n}\n\nvoid acquisisciMatrice(Matrice mat[DIMMAX][DIMMAX]){\n    \n\n    int i, j;\n    \n    for(i=0; i&lt;DIMMAX; i++){\n        \n        for(j=0; j&lt;DIMMAX; j++){\n            \n            aquisisciRazionale(mat[i][j]);\n             \n             \n        }\n    }\n}\n\nint main(int argc, char *argv[]) {\n    \n    Matrice m[DIMMAX][DIMMAX];\n    acquisisciMatrice(m);\n\n}\n</code></pre>\n<p>I have this error:</p>\n<blockquote>\n<p>[Error] incompatible type for argument 1 of 'aquisisciRazionale'</p>\n<p>[Note] expected 'Razionale' but argument is of type 'struct Razionale (*)[5]'</p>\n</blockquote>\n<p>I don't understand if there is an error when I define structures or when I define functions. Can someone help me?</p>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 1, "creation_date": 1465426991, "post_id": 37714244, "comment_id": 62902205, "body": "A curious example; since it&#39;s a union the size is it&#39;s largest type; which on my system would be 128 bytes for <code>long[4][4]</code>. Where as the other field is only <code>8</code> bytes on my system. It doesn&#39;t seem to contribute at all to any alignment. You&#39;d imagine that <code>force_structure_alignment</code> would be larger than the other types for the case of it being used for alignment."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 2, "creation_date": 1465427049, "post_id": 37714244, "comment_id": 62902219, "body": "They&#39;re forcing it to be aligned on a valid <code>long long</code> boundary.  For instance, this could be 8 bytes while <code>long</code> might be 4 bytes.  It&#39;s not clear why this is desired.  It may be an attempt to improve memory reference performance.  It&#39;s also possible they may want to attempt to alias the <code>Mtx_t</code> variable with a <code>long long</code> to perform larger memory accesses."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 1, "creation_date": 1465427049, "post_id": 37714244, "comment_id": 62902220, "body": "@jacob: The <code>long[4][4]</code> only has the alignment requirements of a <code>long</code>, so the <code>long long</code>&#39;s alignment is probably stricter."}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465427355, "post_id": 37714244, "comment_id": 62902314, "body": "@user2357112 Ah; I would have thought it would be related to the size of the union. Good catch."}, {"owner": {"reputation": 405, "user_id": 4113567, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1c2d5d227d9b52a82e06e33235fd81e1?s=128&d=identicon&r=PG&f=1", "display_name": "marshal craft", "link": "https://stackoverflow.com/users/4113567/marshal-craft"}, "edited": false, "score": 0, "creation_date": 1465427684, "post_id": 37714244, "comment_id": 62902400, "body": "If structure is aligned you only need to increment by the size of a page or what ever block size it is aligned with (ie <code>i+32</code> bytes) when not aligned more math operations has to be done to get the size to increment. Also if memory is partitioned into 64 bit sections for each address, incrementing a structure whose size is aligned to 64 bits means just incrementing the address like *struct +1 instead of having logical components lay across intermediate physical address boundaries. It really depends on the implementation. In directx 12 matrix objects should be memory aligned."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1465427443, "post_id": 37714296, "comment_id": 62902336, "body": "A reasonable requirement for atomic values is to keep a separate generation counter (to avoid ABA) and use double-word compare-and-swaps. So even if you require only two adjacent but separate longs, the machine may require them to be aligned on double the size for the atomic operation."}, {"owner": {"reputation": 91, "user_id": 3360203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147851d44e07170cec0b21d2313ad80?s=128&d=identicon&r=PG&f=1", "display_name": "user3360203", "link": "https://stackoverflow.com/users/3360203/user3360203"}, "edited": false, "score": 0, "creation_date": 1465431041, "post_id": 37714296, "comment_id": 62903433, "body": "I think that Mtx is definitely Matrix, beacause [4][4] forms a matrix shape, and in Mtx_t, the &#39;t&#39; can stand for &#39;transformation&#39; as in a transofrmation matrix."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 91, "user_id": 3360203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147851d44e07170cec0b21d2313ad80?s=128&d=identicon&r=PG&f=1", "display_name": "user3360203", "link": "https://stackoverflow.com/users/3360203/user3360203"}, "edited": false, "score": 0, "creation_date": 1465431728, "post_id": 37714296, "comment_id": 62903617, "body": "@user3360203: The <a href=\"https://www.google.com/search?q=mtx_t\" rel=\"nofollow noreferrer\">Google results</a> for &quot;mtx_t&quot; are all about mutexes, but <a href=\"https://www.google.com/search?q=mtx_t+force_structure_alignment\" rel=\"nofollow noreferrer\">refining the search</a> suggests that you&#39;re probably right about it meaning &quot;matrix&quot;. It also suggests that maybe we&#39;re not supposed to have access to this code; it seems to be proprietary code from the Nintendo 64."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1465426782, "creation_date": 1465426782, "answer_id": 37714296, "question_id": 37714244, "link": "https://stackoverflow.com/questions/37714244/how-does-aligning-structures-help-in-c/37714296#37714296", "title": "How does aligning structures help in C?", "body": "<p>As the name implies, they're trying to force <code>Mtx</code>es to be placed in memory with the address alignment requirements of a <code>long long</code>, rather than a <code>long</code>. This may be important for requirements imposed by the OS or the processor architecture. Google suggests that \"Mtx\" is probably short for \"mutex\", and a C mutex implementation would be dealing with some pretty low-level interfaces.</p>\n"}, {"tags": [], "owner": {"reputation": 1542, "user_id": 1284258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2777bcec2428f4ab02612af25abaa836?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/1284258/jason"}, "is_accepted": false, "score": 2, "last_activity_date": 1465427046, "creation_date": 1465427046, "answer_id": 37714357, "question_id": 37714244, "link": "https://stackoverflow.com/questions/37714244/how-does-aligning-structures-help-in-c/37714357#37714357", "title": "How does aligning structures help in C?", "body": "<p>It can be done for efficiency with the processor architecture. For example, if the size of Mtx_t is an odd number of bytes and the hardware's instruction set/memory architecture imposes a cost when accessing an odd address, you'll want to make sure all your Mtx_t records will sit along addresses which are cheaper to access.</p>\n\n<p>There also might be some need to work with a fixed size block of memory such as with coprocessors. Using a padded structure can make that easier to manage.</p>\n\n<p>Read more about it here: <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Data_structure_alignment</a></p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 6334417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8d8ed571be915896c6591cc62da7c6?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwani", "link": "https://stackoverflow.com/users/6334417/ashwani"}, "is_accepted": false, "score": 1, "last_activity_date": 1465443779, "creation_date": 1465443779, "answer_id": 37716379, "question_id": 37714244, "link": "https://stackoverflow.com/questions/37714244/how-does-aligning-structures-help-in-c/37716379#37716379", "title": "How does aligning structures help in C?", "body": "<p>There is data bus on the chip which carries data for read/write. For faster memory access, these buses designed to carry data in multiple of bytes e.g. 4/8/16 bytes. But these bus can't read/write data from any arbitrary address with equal efficiency. For example an 8-byte data bus will be faster to read/write data from a memory which is aligned at 8-byte boundary. That's why for high efficiency, large size data/structure are recommended to be aligned such that a fast access be feasible. In your example it is done by exploiting compiler's implementation of managing structures which may not yield the desire result. But compiler can be explicitly told about the alignment of a variable by using keywords e.g. gcc uses 'aligned' keyword</p>\n"}], "owner": {"reputation": 91, "user_id": 3360203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c147851d44e07170cec0b21d2313ad80?s=128&d=identicon&r=PG&f=1", "display_name": "user3360203", "link": "https://stackoverflow.com/users/3360203/user3360203"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": 8, "last_activity_date": 1465443779, "creation_date": 1465426446, "question_id": 37714244, "link": "https://stackoverflow.com/questions/37714244/how-does-aligning-structures-help-in-c", "title": "How does aligning structures help in C?", "body": "<p>I came across this C code and I'm trying to understand it:</p>\n\n<pre><code>typedef long    Mtx_t[4][4];\n\ntypedef union {\n    Mtx_t m;\n    long long int   force_structure_alignment;\n} Mtx;\n</code></pre>\n\n<p>The first typedef defines Mtx_t as a 4x4 matrix, that much I understand. But the second typedef for Mtx just calls for the previous type and adds a long long int called force_structure_alignment.</p>\n\n<p>What is the purpose of this? Why not just define Mtx as the 4x4 matrix and be done with it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1465425911, "post_id": 37714083, "comment_id": 62901851, "body": "It doesn&#39;t really make sense to have a buffer of size 1024 for the <code>getcwd</code> result, only to copy it to a buffer of size 100, ignoring whether or not it will fit.  For that matter, why copy it at all?  Why not just place it there in the first place?  As it is now, you will have memory corruption if the path is ever longer than 99 characters.  You should never write code like that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1465426760, "post_id": 37714083, "comment_id": 62902126, "body": "In <code>main</code> function <code>DirecoryInformation DI[100]; printf(&quot;%s&quot;, DI[0].Path);</code> is using an uninitialised variable. Even without a segfault you&#39;ll print nothing useful. Also the similarly named <code>DirectoryInformation DI[100];</code> in the other function is a local variable which goes out of scope on leaving the function. Storing a string in it, then exiting the function will take you nowhere."}, {"owner": {"reputation": 87, "user_id": 5892276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySM5u.png?s=128&g=1", "display_name": "J.Fernandes", "link": "https://stackoverflow.com/users/5892276/j-fernandes"}, "edited": false, "score": 0, "creation_date": 1465428146, "post_id": 37714083, "comment_id": 62902541, "body": "Tom Karzes thanks for the advice gonna keep on my mind"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1465429727, "post_id": 37714083, "comment_id": 62903016, "body": "You are even not calling <code>Getskelutofdirectorie</code>. This code will never work."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5892276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySM5u.png?s=128&g=1", "display_name": "J.Fernandes", "link": "https://stackoverflow.com/users/5892276/j-fernandes"}, "edited": false, "score": 0, "creation_date": 1465431472, "post_id": 37714780, "comment_id": 62903553, "body": "Thanks alot  in my real program i call the function on main i just forget to copy. The problem was the getskelotdireotirie  the parametheres i forget to use the struct one. BTW should i use always strncopy?"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 0, "last_activity_date": 1465429941, "creation_date": 1465429941, "answer_id": 37714780, "question_id": 37714083, "link": "https://stackoverflow.com/questions/37714083/store-getcwd-on-a-struct-on-a-function/37714780#37714780", "title": "Store getcwd on a struct on a function", "body": "<p>Your code invokes <em>undefined behavior</em> by using value of variable <code>DI</code> having automatic storage duration and not initialized, which is indeterminate.</p>\n\n<p>Call the function with passing pointer to the struct to store the data, then store there.</p>\n\n<pre><code>typedef struct\n{\n  char Path[100];\n} DirectoryInformation;\n\nvoid Getskelutofdirectorie(DirectoryInformation * DI, char * dir, int lvl)\n{\n    char cwd[100]; // cwd was too long, so there was risk of buffer overrun when copying\n\n    //Search recursive\n\n    //where i want to put the path on the struct to use on main\n\n    getcwd(cwd, sizeof(cwd));\n    strcpy(DI[0].Path, cwd);\n}\n\nint main(void) \n{\n    DirectoryInformation DI[100] = {{\"\"}}; // initialize for in case the function fails to set values\n    Getskelutofdirectorie(DI, NULL, 0); // pass proper parameter\n    printf(\"%s\", DI[0].Path);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 5892276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ySM5u.png?s=128&g=1", "display_name": "J.Fernandes", "link": "https://stackoverflow.com/users/5892276/j-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 37714780, "answer_count": 1, "score": -2, "last_activity_date": 1479130340, "creation_date": 1465425507, "last_edit_date": 1479130340, "question_id": 37714083, "link": "https://stackoverflow.com/questions/37714083/store-getcwd-on-a-struct-on-a-function", "title": "Store getcwd on a struct on a function", "body": "<pre><code>typedef struct \n{\n  char Path[100];\n} DirectoryInformation;\n\nvoid Getskelutofdirectorie(char * dir, int lvl) \n{\n    DirectoryInformation DI[100];\n    char cwd[1024];\n\n    //Search recursive\n\n    // where I want to put the path on the struct to use on main\n\n    getcwd(cwd, sizeof(cwd));\n    strcpy(DI[0].Path, cwd);\n}\n\nint main(void) \n{\n    DirecoryInformation DI[100];\n    printf(\"%s\", DI[0].Path);\n\n}\n</code></pre>\n\n<p>I can print the path but if i use on main function will work.</p>\n\n<p>Can somebody help me out?</p>\n\n<p>It executes without error but when I print out make segmentation fault</p>\n"}, {"tags": ["c", "time", "mktime"], "comments": [{"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1465425453, "post_id": 37714019, "comment_id": 62901711, "body": "&quot;standard library&quot;? No. This is a C library implementation that contains some non-standard functions. We don&#39;t know what other non-portable behavior lies under the hood."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1465425634, "post_id": 37714019, "comment_id": 62901765, "body": "<code>set_zone</code>, <code>ONE_HOUR</code>, <code>set_dst</code>, and <code>eu_dst</code> are non-standard."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1465426062, "post_id": 37714019, "comment_id": 62901895, "body": "<code>tm::tm_isdst</code> is positive if DST is in effect, zero if not and negative if no information is available -  serring it to<code>ONE_HOUR</code> makes little sense.  Omit the non-standard parts - <code>set_zone()</code> and <code>set_dst()</code> and set <code>tm_isdst==0</code> and see what the result is.  If the time you are setting is the time you wan&#39;t (i.e. is already adjusted) you don&#39;t need timezone or DST adjustments."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1465426182, "post_id": 37714019, "comment_id": 62901930, "body": "Did you compile <a href=\"https://github.com/vancegroup-mirrors/avr-libc/blob/master/avr-libc/libc/time/mktime.c\" rel=\"nofollow noreferrer\">this file</a>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1465426217, "post_id": 37714019, "comment_id": 62901946, "body": "Better to <i>first</i> <code>struct tm myTime = {0};</code> as <code>struct tm</code> may have other implementation define fields not set by OP&#39;s code."}, {"owner": {"reputation": 2000, "user_id": 2625561, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/93r6x.png?s=128&g=1", "display_name": "klenium", "link": "https://stackoverflow.com/users/2625561/klenium"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1465426247, "post_id": 37714019, "comment_id": 62901958, "body": "@Clifford without them, mktime return 518744160, the difference is very small."}, {"owner": {"reputation": 2000, "user_id": 2625561, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/93r6x.png?s=128&g=1", "display_name": "klenium", "link": "https://stackoverflow.com/users/2625561/klenium"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1465426378, "post_id": 37714019, "comment_id": 62902004, "body": "@wallyk Yes, I added dst_pointer.c, eu_dst.h, gmtime_r.c, isLeap.c, localtime_r.c, mk_gtime.c, mktime.c, set_dst.c, set_zone.c, time.h, and utc_offset.c into my project, all of them are compiled."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465426491, "post_id": 37714019, "comment_id": 62902030, "body": "Post the code that shows the &quot;<code>mktime</code> returns 518736960`&quot; as the problem may be there."}, {"owner": {"reputation": 2000, "user_id": 2625561, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/93r6x.png?s=128&g=1", "display_name": "klenium", "link": "https://stackoverflow.com/users/2625561/klenium"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465426556, "post_id": 37714019, "comment_id": 62902051, "body": "@chux I&#39;ve already posted the code."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1465427055, "post_id": 37714019, "comment_id": 62902222, "body": "@klenium : My suggestion was not intended to fix the problem but to allow you to discount the possibility of errors in these functions in order that you can be sure that it is <code>mktime()</code> that is the issue - that&#39;s how you investigate software bugs - divide and conquer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465427087, "post_id": 37714019, "comment_id": 62902229, "body": "Interesting that <code>time.h</code> uses non-standard <code>struct tm</code>.  (Expected fields to be type <code>int</code>)  Makes one wonder what other non-standard time details exist."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465427192, "post_id": 37714019, "comment_id": 62902264, "body": "@klenium None of this posted code shows how <code>tim</code> was determine to have the value <code>518736960</code>.  That is the code requested.  AFAIK, <code>tim</code> does has the expected value and the method use to display it is at fault."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465427744, "post_id": 37714019, "comment_id": 62902422, "body": "@chux : Given the tiny memories typically on AVR, a compliant implementation would be expensive. User beware!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1465427988, "post_id": 37714019, "comment_id": 62902490, "body": "@Clifford, the point is, how did OP determine the value of <code>tim</code>?  BTW: good compilers analyzes the formats used in <code>printf()</code> and use a selective implementation.  With simple format like integer to text conversion, the code is not long and not expensive."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465428303, "post_id": 37714019, "comment_id": 62902591, "body": "@chux : In my comment I was referring only to your point about the definition of <code>struct tm</code>.  Regarding the presentation of code, I agree with you completely, but it is academic now perhaps, I found the answer initially by intuition having converted the values to Unix epoch time, and then by <i>reading the documentation</i> ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1465434762, "post_id": 37714019, "comment_id": 62904245, "body": "@Clifford I too had suspected a different day epoch, but discounted that  since with a difference between expectation and actual was obviously not a multiple of 100 (and hence not a multiple of 3600*24), for the epoch to be wrong, the expected had to be wrong too for the given timestamp.  I had assumed only 1 oops on OP&#39;s part.  IAC, read the fantastic manual it a good idea."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1465503461, "post_id": 37714019, "comment_id": 62942089, "body": "Note that the value is &quot;unexpected&quot; not &quot;incorrect&quot;."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1482171229, "post_id": 37714019, "comment_id": 69656295, "body": "Time zone is incorrect. Should be UTC-1 to get 23.34.00."}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 6, "last_activity_date": 1465504453, "last_edit_date": 1465504453, "creation_date": 1465426708, "answer_id": 37714285, "question_id": 37714019, "link": "https://stackoverflow.com/questions/37714019/mktime-returns-incorrect-value/37714285#37714285", "title": "mktime returns incorrect value", "body": "<p>518736960 corresponds to <em>Unix epoch time</em> 09 Jun 1986 21:36:00; it looks to me as if this implementation uses a different epoch, starting 1 January 2000 rather then 1 January 1970.  </p>\n\n<p>The time difference is then attributable to the TZ and DST offsets.  The out-by-one date difference is attributable to the fact that 2000 was not a leap-year, but 1970 was.</p>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>The documentation <a href=\"http://www.nongnu.org/avr-libc/user-manual/group__avr__time.html\" rel=\"nofollow\">here</a> clearly states that the epoch start is 2000:</p>\n\n<blockquote>\n  <p>Though not specified in the standard, it is often expected that time_t is a signed integer representing an offset in seconds from Midnight Jan 1 1970... i.e. 'Unix time'. This implementation uses an unsigned 32 bit integer offset from Midnight Jan 1 2000. The use of this 'epoch' helps to simplify the conversion functions, while the 32 bit value allows time to be properly represented until Tue Feb 7 06:28:15 2136 UTC. The macros UNIX_OFFSET and NTP_OFFSET are defined to assist in converting to and from Unix and NTP time stamps.</p>\n</blockquote>\n\n<p>There is no standard for epoch nor the specific underlying width or signedness of <code>time_t</code>.  However if you round-trip the result of <code>mktime()</code> with <code>localtime()</code> for example using the <em>same library</em> it will produce a correct result.  One library or system's <code>time_t</code> value need not be compatible with another's, so exchanging a <code>time_t</code> value between systems is slightly problematic.  </p>\n\n<p>In this case you could convert to a recognised defacto standard by adding <code>UNIX_OFFSET</code> or <code>NTP_OFFSET</code> and if necessary ensure that any corresponding adjustment is performed on the receiving system  The principle is similar to the principle of <em><a href=\"https://en.wikipedia.org/wiki/Endianness#Networking\" rel=\"nofollow\">network byte order</a></em> for example for exchanging data between systems with different endinaness by using an agreed intermediate representation (which is as it happens also something to consider when exchanging  a <code>time_t</code>).</p>\n\n<p>Often it is simpler to exchange a string of a specified format (such as <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow\">ISO 8601</a>) to avoid epoch, data type and endianness differences. On te other hand conversion to and from string representations is more expensive than purely arithmetic manipulation.</p>\n"}], "owner": {"reputation": 2000, "user_id": 2625561, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/93r6x.png?s=128&g=1", "display_name": "klenium", "link": "https://stackoverflow.com/users/2625561/klenium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2398, "favorite_count": 0, "accepted_answer_id": 37714285, "answer_count": 1, "score": 2, "last_activity_date": 1465504453, "creation_date": 1465425053, "last_edit_date": 1465425805, "question_id": 37714019, "link": "https://stackoverflow.com/questions/37714019/mktime-returns-incorrect-value", "title": "mktime returns incorrect value", "body": "<p>I'de like to use <code>mktime</code> on a microcontroller (or at least use 32-bit wide timestamps). I added the needed files from <a href=\"https://github.com/vancegroup-mirrors/avr-libc/tree/master/avr-libc\" rel=\"nofollow\">avr libc source files</a> (in Atmel Studio 7, time functions aren't available), didn't change the algoritms. But for 2016. 06. 08. 23:34:00 (UTC+1, EU dst), <code>mktime</code> returns <code>518736960</code>, but it should return <code>1465425240</code>.</p>\n\n<pre><code>set_zone(ONE_HOUR);\nset_dst(eu_dst);\nstruct tm myTime;\nmyTime.tm_sec = 0;\nmyTime.tm_min = 36;\nmyTime.tm_hour = 23;\nmyTime.tm_mday = 8;\nmyTime.tm_mon = 5;\nmyTime.tm_year = 116;\nmyTime.tm_isdst = ONE_HOUR;\ntime_t tim = mktime(&amp;myTime);\n</code></pre>\n\n<p>What am I doing wrong? These functions should work fine.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1465424532, "post_id": 37713863, "comment_id": 62901425, "body": "This is <a href=\"http://stackoverflow.com/a/4105123/1505939\">undefined behaviour</a>  , anything may happen"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 1, "creation_date": 1465424551, "post_id": 37713863, "comment_id": 62901430, "body": "Undefined behavior does not necessarily always cause a crash. Sometimes you get random output instead. Sometimes other undefined things happen."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1465424487, "creation_date": 1465424487, "answer_id": 37713914, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf/37713914#37713914", "title": "Characters &amp; Strings in Printf", "body": "<p>Only the latter statement asked the implementation to dereference an invalid pointer. An invalid value will typically show as garbage. But most possible memory location values are inaccessible and attempting to access them will cause a crash on modern operating systems.</p>\n"}, {"comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1465425079, "post_id": 37713919, "comment_id": 62901603, "body": "The first example tries to interpret a pointer as a <code>char</code>.  The second tries to treat an <code>int</code> as a pointer... but the problem isn&#39;t the missing null, it&#39;s dereferencing an invalid pointer and trying to print what it points to."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 2, "last_activity_date": 1465424515, "creation_date": 1465424515, "answer_id": 37713919, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf/37713919#37713919", "title": "Characters &amp; Strings in Printf", "body": "<p>Because <code>%s</code> expects a <code>NUL</code> terminated string where <code>%c</code> only wants a char.  The string will read past the end of your buffer (the single char) looking for that <code>NUL</code> and quite likely cause a memory exception.  Or not - hence undefined behavior. </p>\n"}, {"comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465425210, "post_id": 37713929, "comment_id": 62901644, "body": "in this case where it starts reading is probably more toxic (as in causing an exception) than what it would be reading, absent the exception. On simpler memory models (like 16 bit DOS), most likely that %s <code>printf</code> would just dump some garbage based on the contents of memory starting at address 0x000a"}], "tags": [], "owner": {"reputation": 504, "user_id": 6175121, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6_7zEEoqzHI/AAAAAAAAAAI/AAAAAAAAAMo/pSnvmK-6EoA/photo.jpg?sz=128", "display_name": "Mikes3ds", "link": "https://stackoverflow.com/users/6175121/mikes3ds"}, "is_accepted": false, "score": 0, "last_activity_date": 1465424549, "creation_date": 1465424549, "answer_id": 37713929, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf/37713929#37713929", "title": "Characters &amp; Strings in Printf", "body": "<p>%s prints until it reaches a '\\0' because \\n has no escape it will read into memory. \"%c\" only needs a char</p>\n"}, {"tags": [], "owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "is_accepted": true, "score": 3, "last_activity_date": 1465424592, "creation_date": 1465424592, "answer_id": 37713933, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf/37713933#37713933", "title": "Characters &amp; Strings in Printf", "body": "<p>a double quoted string like that produces a value of a pointer to <code>char</code>  (aka <code>char*</code>),  while the single quote produce a value that's a character (using the ASCII value of whats in the quotes.   On some compilers you can stack multiple characters into the single quotes.</p>\n\n<pre><code>printf(\"%c\", *(\"\\n\") );\n</code></pre>\n\n<p>would print your linefeed, as the <code>*</code> operator would dereference the pointer</p>\n\n<p>( You could probably do <code>*\"\\n\"</code> , I just tend to be conservative in writing expressions)</p>\n\n<pre><code>printf(\"%s\", '\\n'); \n</code></pre>\n\n<p>crashes because <code>%s</code> expects a pointer,  and  a linefeed cast into a pointer is pointing off in the weeds and most likely causes an invalid memory access</p>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 3, "last_activity_date": 1465424642, "creation_date": 1465424642, "answer_id": 37713940, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf/37713940#37713940", "title": "Characters &amp; Strings in Printf", "body": "<p>It will invoke <em>undefined behavior</em> by passing data having wrong type. It just <em>happened</em> not to crash.</p>\n\n<p>In some implementation, the pointer converted from the string literal is passed as an argument. Unlike <code>%s</code>, which will interpret the argument as pointer and go to read thete, <code>%c</code> will just take the argument as a number and print it, so it has less chance to crash.</p>\n"}], "owner": {"reputation": 487, "user_id": 4668981, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/HtfZb.jpg?s=128&g=1", "display_name": "Lewis Briffa", "link": "https://stackoverflow.com/users/4668981/lewis-briffa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37713933, "answer_count": 5, "score": 0, "last_activity_date": 1465424642, "creation_date": 1465424188, "question_id": 37713863, "link": "https://stackoverflow.com/questions/37713863/characters-strings-in-printf", "title": "Characters &amp; Strings in Printf", "body": "<p>I'm going through an exercise book on C and came across the statement </p>\n\n<pre><code>printf(\"%c\", \"\\n\");\n</code></pre>\n\n<p>Which when run in a console still works but displays the \"$\" symbol.</p>\n\n<p>Why did this statement not crash the console like</p>\n\n<pre><code>printf(\"%s\", '\\n'); \n</code></pre>\n\n<p>does?</p>\n"}, {"tags": ["objective-c", "c", "core-graphics", "cgcontext", "cgcontextdrawimage"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5335615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48a9263eb94f99460a1e4739717ce4db?s=128&d=identicon&r=PG&f=1", "display_name": "Master Crouch", "link": "https://stackoverflow.com/users/5335615/master-crouch"}, "edited": false, "score": 0, "creation_date": 1465596223, "post_id": 37715317, "comment_id": 62984814, "body": "Performance with that is marginally better. Looks like OpenGL is the way to go here."}], "tags": [], "owner": {"reputation": 89, "user_id": 1608165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjD6t.png?s=128&g=1", "display_name": "Gavin Higham", "link": "https://stackoverflow.com/users/1608165/gavin-higham"}, "is_accepted": false, "score": 0, "last_activity_date": 1465434204, "creation_date": 1465434204, "answer_id": 37715317, "question_id": 37713811, "link": "https://stackoverflow.com/questions/37713811/cgcontextfillrects-vs-cgcontextaddlinetopoint-rects-vs-lines-performance/37715317#37715317", "title": "CGContextFillRects vs CGContextAddLineToPoint (rects vs lines) performance", "body": "<p>Typically with computer graphics, drawing fewer pixels is preferable. <a href=\"https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGContext/index.html#//apple_ref/c/func/CGContextAddLines\" rel=\"nofollow\">CGContextAddLines</a> looks like it accomplishes what you want, and might be shorter in code length than CGContextAddLineToPoint.</p>\n"}], "owner": {"reputation": 121, "user_id": 5335615, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/48a9263eb94f99460a1e4739717ce4db?s=128&d=identicon&r=PG&f=1", "display_name": "Master Crouch", "link": "https://stackoverflow.com/users/5335615/master-crouch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465434204, "creation_date": 1465423903, "question_id": 37713811, "link": "https://stackoverflow.com/questions/37713811/cgcontextfillrects-vs-cgcontextaddlinetopoint-rects-vs-lines-performance", "title": "CGContextFillRects vs CGContextAddLineToPoint (rects vs lines) performance", "body": "<p>I have a object that renders a grid of lines (used for a plot object I am working on) that will update frequently and shift all the lines around. If the grid will update at 60 fps would using CGContextFillRects or CGContextAddLineToPoint (rectangles vs lines) be more efficient? </p>\n\n<p>Let's assume I am going to implementing things in a pretty efficient way. For example with the line technique I would use CGContextMoveToPoint and CGContextAddLineToPoint before stroking the entire grid line in one go with CGContextStrokePath. For both techniques I will generate the data required to draw my shapes somewhere other than the drawRect method.</p>\n\n<p>Initially I feel like CGContextFillRects is better because it has less code involved in the actual drawing at the high level I am operating on so at a glance it seems more efficient. This said I don't need rectangles, and am really making lines in the end here so perhaps generating a rectangle would be more involved than my graphing processing should be when all I really need is a line. What do you all think? Lines or Rectangles for my fast moving/scaling grid?</p>\n"}, {"tags": ["c", "byte", "xeon-phi", "sse4", "avx512"], "comments": [{"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 1, "creation_date": 1465445909, "post_id": 37713644, "comment_id": 62906500, "body": "I may have answered my own question with more looking. See the last sentence of this: <a href=\"https://en.wikipedia.org/wiki/AVX-512#SIMD_modes\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/AVX-512#SIMD_modes</a> ... Looks like SSE/AVX instructions operating on bytes and words will NOT share a namespace with the new registers until AVX512BW. Any clarification if this actually means something performance-wise?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1465457568, "post_id": 37713644, "comment_id": 62911494, "body": "You might want to wait for Purley (next year, supposedly) - it will have the AVX-512BW additions."}, {"owner": {"reputation": 1579, "user_id": 2720901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dc8cb39d5823e5b3dcec25a6ca29ea?s=128&d=identicon&r=PG&f=1", "display_name": "zam", "link": "https://stackoverflow.com/users/2720901/zam"}, "edited": false, "score": 1, "creation_date": 1465467485, "post_id": 37713644, "comment_id": 62917768, "body": "AVX-512F will be supported by both &quot;Big Core&quot;(Xeon) and &quot;Throughput hpc accelerator&quot; (Xeon Phi).    But Xeon Phi and Big Core will also have additional unique AVX-512 instruction sets, targeted to Big Core users exclusively or to &quot;Throughput&quot; uses exclusively. AVX-512BW is exclusive for Big core, while e.g. AVX-512ER (reciprocals) is exclusive to Xeon Phi. I&#39;m not sure if it&#39;s &quot;performance wise&quot;, but it should be &quot;power-perfomance wise&quot; and a little bit FP-focus wise (since Xeon Phi targets more FP-oriented power-sensitive throughput-focused users)."}, {"owner": {"reputation": 1579, "user_id": 2720901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dc8cb39d5823e5b3dcec25a6ca29ea?s=128&d=identicon&r=PG&f=1", "display_name": "zam", "link": "https://stackoverflow.com/users/2720901/zam"}, "edited": false, "score": 0, "creation_date": 1465467829, "post_id": 37713644, "comment_id": 62917987, "body": "In continuation of previous comment: it may happen that longer term Big Core and Phi ISA will have more cross-pollination of -BW or -ER ISA (who knows), but it&#39;s not the case in current momentum."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1466104200, "post_id": 37713644, "comment_id": 63191919, "body": "Interestingly, I&#39;m both memory bandwidth bound as well as compute-bound (there are some constants that control how the algo shifts in each case). So with Phi I can go crazy on the memory, and with Big Core I can go crazy on the compute (and use less cache). Cross-pollination would indeed be good..."}], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1474627579, "post_id": 37891368, "comment_id": 66619477, "body": "The &quot;free&quot; integer type conversions were present on KNC, but are not present on KNL, sadly."}], "tags": [], "owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "is_accepted": false, "score": 4, "last_activity_date": 1466293779, "last_edit_date": 1466293779, "creation_date": 1466203352, "answer_id": 37891368, "question_id": 37713644, "link": "https://stackoverflow.com/questions/37713644/will-knights-landing-cpu-xeon-phi-accelerate-byte-word-integer-code/37891368#37891368", "title": "Will Knights Landing CPU (Xeon Phi) accelerate byte/word integer code?", "body": "<p>Okay, I think I've pieced together enough information to make a decent answer. Here goes. </p>\n\n<blockquote>\n  <p>What will happen when native SSE2/4 code is run on Knights Landing (KNL)? </p>\n</blockquote>\n\n<p>The code will run in the bottom fourth of the registers on a single VPU (called the compatibility layer) within a core. According to a pre-release webinar from Colfax, this means occupying only 1/4 to 1/8 of the total register space available to a core and running in legacy mode. </p>\n\n<blockquote>\n  <p>What happens if the same code is recompiled with compiler flags for AVX-512F?</p>\n</blockquote>\n\n<p>SSE2/4 code will be generated with VEX prefix. That means pshufb becomes vpshufb and works with other AVX code in ymm. Instructions will NOT be promoted to AVX512's native EVEX or allowed to address the new zmm registers specifically. Instructions can only be promoted to EVEX with AVX512-VL, in which case they gain the ability to directly address (renamed) zmm registers. It is unknown whether register sharing is possible at this point, but pipelining on AVX2 has demonstrated similar throughput with half-width AVX2 (AVX-128) as with full 256-bit AVX2 code in many cases. </p>\n\n<blockquote>\n  <p>Most importantly, how do I get my SSE2/4/AVX128 byte/word size code running on AVX512F?</p>\n</blockquote>\n\n<p>You'll have to load 128-bit chunks into xmm, sign/zero extend those bytes/words into 32-bit in zmm, and operate as if they were always larger integers. Then when finished, convert back to bytes/words. </p>\n\n<blockquote>\n  <p>Is this fast? </p>\n</blockquote>\n\n<p>According to material published on Larrabee (Knights Landing's prototype), type conversions of any integer width are free from xmm to zmm and vice versa, so long as registers are available. Additionally, after calculations are performed, the 32-bit results can be truncated on the fly down to byte/word length and written (packed) to unaligned memory in 128-bit chunks, potentially saving an xmm register. </p>\n\n<p>On KNL, each core has 2 VPUs that seem to be capable of talking to each other. Hence, 32-way 32-bit lookups are possible in a single vperm*2d instruction of presumably reasonable throughput. This is not possible even with AVX2, which can only permute within 128-bit lanes (or between lanes for the 32-bit vpermd only, which is inapplicable to byte/word instructions). Combined with free type conversions, the ability to use masks implicitly with AVX512 (sparing the costly and register-intensive use of blendv or explicit mask generation), and the presence of more comparators (native NOT, unsigned/signed lt/gt, etc), it may provide a reasonable performance boost to rewrite SSE2/4 byte/word code for AVX512F after all. At least on KNL. </p>\n\n<p>Don't worry, I'll test the moment I get my hands on mine. ;-)</p>\n"}], "owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1466293779, "creation_date": 1465422973, "question_id": 37713644, "link": "https://stackoverflow.com/questions/37713644/will-knights-landing-cpu-xeon-phi-accelerate-byte-word-integer-code", "title": "Will Knights Landing CPU (Xeon Phi) accelerate byte/word integer code?", "body": "<p>The Intel Xeon Phi \"Knights Landing\" processor will be the first to support AVX-512, but it will only support \"F\" (like SSE without SSE2, or AVX without AVX2), so floating-point stuff mainly. </p>\n\n<p>I'm writing software that operates on bytes and words (8- and 16-bit) using up to SSE4.1 instructions via intrinsics. </p>\n\n<p>I am confused whether there will be EVEX-encoded versions of all/most SSE4.1 instructions in AVX-512F, and whether this means I can expect my SSE code to automatically gain EVEX-extended instructions and map to all new registers. </p>\n\n<p>Wikipedia says this: </p>\n\n<blockquote>\n  <p>The width of the SIMD register file is increased from 256 bits to 512 bits, with a total of 32 registers ZMM0-ZMM31. These registers can be addressed as 256 bit YMM registers from AVX extensions and 128-bit XMM registers from Streaming SIMD Extensions, and legacy AVX and SSE instructions can be extended to operate on the 16 additional registers XMM16-XMM31 and YMM16-YMM31 when using EVEX encoded form.</p>\n</blockquote>\n\n<p>This unfortunately does not clarify whether compiling SSE4 code with AVX512-enabled will lead to the same (awesome) speedup that compiling it to AVX2 provides (VEX coding of legacy instructions). </p>\n\n<p>Anybody know what will happen when SSE2/4 code (C intrinsics) are compiled for AVX-512F? Could one expect a speed bump like with AVX1's VEX coding of the byte and word instructions?</p>\n"}, {"tags": ["c", "linux", "signals", "kill", "sigaction"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1465422822, "post_id": 37713508, "comment_id": 62900734, "body": "First I suggest you to learn how to format your code properly. Readability of the code is half of it&#39;s success."}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465423027, "post_id": 37713508, "comment_id": 62900832, "body": "its as short and clear as possible.."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1465423055, "post_id": 37713508, "comment_id": 62900851, "body": "<code>short != clear</code>. Don&#39;t save on spaces and newlines. Haven&#39;t you seen the other questions with code around here?"}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465423522, "post_id": 37713508, "comment_id": 62901056, "body": "u r right.. net time ill try. anyways, do you see anything here?"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 3, "creation_date": 1465423558, "post_id": 37713508, "comment_id": 62901075, "body": "You don&#39;t show us the code for <code>startHandling()</code> so we can&#39;t be sure, but you are presumably inside <code>startHandling()</code> with SIGCHLD <i>blocked</i> from your signal handler because <a href=\"http://stackoverflow.com/a/36069374/132382\">you didn&#39;t specify SA_NODEFER</a>.  Thus the second signal is effectively ignored until you leave the signal handler."}, {"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "edited": false, "score": 0, "creation_date": 1465423658, "post_id": 37713508, "comment_id": 62901117, "body": "so if I add the blocks, it should work ? like I editted?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1465426660, "post_id": 37713508, "comment_id": 62902084, "body": "With signal handlers, you do as little as possible in the signal handler before returning \u2014 call as few functions as possible, do as little work as possible, get back as soon as possible.  Your process will receive no signals at all until it returns from <code>sigchldFunction()</code>.  That&#39;s what blocking all the signals means."}], "owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465423575, "creation_date": 1465422399, "last_edit_date": 1465423575, "question_id": 37713508, "link": "https://stackoverflow.com/questions/37713508/cant-get-getchld-signal-for-second-time-c-linux-eclipse", "title": "can&#39;t get GETCHLD signal for second time c linux eclipse", "body": "<p>i have program which sends signal SIGCHLD to all other processes in the system TWICE. problem is, its sent only once.</p>\n\n<p>program sending the signal:</p>\n\n<pre><code> int main(){\n kill(-1, SIGCHLD);   \n sleep(8);\n kill(-1, SIGCHLD);\n return 0;}\n</code></pre>\n\n<p>program getting the signals:</p>\n\n<pre><code>int main(){\nstruct sigaction sigchldHandler;\nsigchldHandler.sa_flags = 0;\nsigset_t BlockMask;\nsigfillset(&amp;BlockMask);\nsigchldHandler.sa_mask = BlockMask;\nsigchldHandler.sa_handler = sigchldFunction;\nif( sigaction( SIGCHLD, &amp;sigchldHandler, NULL ) != 0 ){\n      perror( \"sigaction() error\\n\" );}\n    while(1){\n       pause()}\nreturn 0;\n}\n</code></pre>\n\n<p>the function is:</p>\n\n<pre><code>void sigchldFunction(int signal){\nwrite(1, \"gets here only once\\n\", strlen(\"gets here only once\\n\"));\nstartHandling();\n}\n</code></pre>\n\n<p>why doesn't it get the second signal, byt only the first one?\n...HELP??</p>\n"}, {"tags": ["c", "arrays", "pointers", "malloc"], "comments": [{"owner": {"reputation": 86, "user_id": 6078437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c445d61a467a9198039c66cf2fbaaff1?s=128&d=identicon&r=PG&f=1", "display_name": "scarecrow-", "link": "https://stackoverflow.com/users/6078437/scarecrow"}, "edited": false, "score": 2, "creation_date": 1465421088, "post_id": 37713124, "comment_id": 62899954, "body": "remember a key point is, C passes all parameters by VALUE, even a reference."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 86, "user_id": 6078437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c445d61a467a9198039c66cf2fbaaff1?s=128&d=identicon&r=PG&f=1", "display_name": "scarecrow-", "link": "https://stackoverflow.com/users/6078437/scarecrow"}, "edited": false, "score": 3, "creation_date": 1465421261, "post_id": 37713124, "comment_id": 62900033, "body": "@scarecrow-, yes, but another key point to remember is that C does not have references."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1465421535, "post_id": 37713124, "comment_id": 62900164, "body": "If you want the function change its argument&#39;s value, you should pass argument&#39;s address as argument in the call, and dereference the <i>pointer</i> inside the function."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1465421544, "post_id": 37713124, "comment_id": 62900168, "body": "Arrays are never passed <b>at all</b>.  If an expression appearing as a function argument nominally has an array type then the value of the expression <i>decays</i> to a pointer (as also happens in almost all other contexts).  The resulting pointer is passed, by value.  The argument is a pointer, not an array."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "reply_to_user": {"reputation": 86, "user_id": 6078437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c445d61a467a9198039c66cf2fbaaff1?s=128&d=identicon&r=PG&f=1", "display_name": "scarecrow-", "link": "https://stackoverflow.com/users/6078437/scarecrow"}, "edited": false, "score": 0, "creation_date": 1465421849, "post_id": 37713124, "comment_id": 62900318, "body": "@scarecrow- that&#39;s really an amazing truth."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465421886, "post_id": 37713124, "comment_id": 62900332, "body": "What @JohnBollinger said. Furthermore, if a function <i>parameter</i> looks like an array, its type is <i>adjusted</i> to pointer. Which may cause some confusion."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465422037, "post_id": 37713124, "comment_id": 62900401, "body": "@JohnBollinger How does the call by reference actually be like? Because java and C# also send object to other function. Isn&#39;t address of those object being sent in that case. Isn&#39;t address of object being passed as a value in that case?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465423605, "post_id": 37713124, "comment_id": 62901093, "body": "Please fix the indentation of your code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465424459, "post_id": 37713124, "comment_id": 62901411, "body": "@gj1103, Java is also strictly pass-by-value, as I think C# also is.  In Java, at least, you can never actually touch an object at all -- you handle only primitives and references, but references are passed <i>by value</i>.  You can confirm this by assigning a new value to a method argument -- the reference in the caller does not change.  C++, on the other hand, has both pass-by-value and pass-by-reference.  Fortran has <i>only</i> pass by reference."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465425473, "post_id": 37713124, "comment_id": 62901718, "body": "@John Bollinger Hmmm, from the <b>caller&#39;s point-of-view</b>: <code>char s[5]; strcpy(s, &quot;abc&quot;);</code>, the result is that array <code>s[]</code> is updated as one would expect if one said <code>s</code> was passed by reference.  Of course the underlying C  mechanism of the function call (converting the formal parameter <code>s</code> to the actual argument <code>&amp;s[0]</code>) prior to function invocation and the function receiving the value as type <code>char *</code> is indeed pass-by-value."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1465430021, "post_id": 37713124, "comment_id": 62903115, "body": "@chux, inasmuch as the caller can determine by examination that evaluating the argument expression yields a <i>pointer</i>, not an array, there can be no question of an array being passed at all.  That the observed effect of evaluating the function call is equivalent to the effect that would be expected if the array involved were passed to the function by reference does not mean that it indeed was passed, whether by reference or otherwise."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465425834, "post_id": 37713345, "comment_id": 62901832, "body": "Not to take from this fine answer explaining 2 ways (maybe others exsit?) to accomplish OPs higher goal, it does not answer the title question &quot;Is array as an argument in c really reference type?&quot; - which is 1/2 step from a holy-war question.  Suggest OP rename question to match the goal: something along the line of how to pass array info back to a caller."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465425879, "post_id": 37713345, "comment_id": 62901842, "body": "@chux I chose to answer the question in the text, not the question in the title."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465426026, "post_id": 37713345, "comment_id": 62901889, "body": "Yes - that is clear, but it is the title that leads folks to this post and it would be better if the title matched OP&#39;s question intent and the selected answer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465426316, "post_id": 37713345, "comment_id": 62901984, "body": "I&#39;ve added an answer to the title as well."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465653515, "post_id": 37713345, "comment_id": 62997696, "body": "@Barmar could you please help me by answering the question at <a href=\"http://stackoverflow.com/questions/37764258/why-character-pointer-is-getting-assigned-just-a-character-while-a-string-is-su?noredirect=1#comment62997129_37764258\" title=\"why character pointer is getting assigned just a character while a string is su\">stackoverflow.com/questions/37764258/&hellip;</a>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1465426307, "last_edit_date": 1465426307, "creation_date": 1465421764, "answer_id": 37713345, "question_id": 37713124, "link": "https://stackoverflow.com/questions/37713124/is-array-as-an-argument-in-c-really-reference-type/37713345#37713345", "title": "Is array as an argument in c really reference type?", "body": "<p>To answer the question in your title, C parameters are always passed by value, never by reference. What makes arrays different is that when you pass an array as a parameter, it's automatically converted to a pointer to the first element of the array, and this is the value that's passed. All other types of parameters are passed by making a copy of the value. </p>\n\n<p>In either case, assigning to the parameter variable in the function has no effect on the caller's variable. When the parameter is a pointer, you can indirect through it to access the caller's data. And if it's a pointer to an array element, you can index it to access the caller's array. That's what happens in your <code>anotherfunction()</code> function.</p>\n\n<p>If you want to allocate the array in the function and have this affect the caller, there are two ways to do it.</p>\n\n<p>First is to have the function return the pointer:</p>\n\n<pre><code>int *fun() {\n    int *localarr = malloc(2 * sizeof(int));\n    localarr[0] = 4;\n    localarr[1] = 5;\n    return localarr;\n}\n</code></pre>\n\n<p>Then the caller would do:</p>\n\n<pre><code>arr = fun();\n</code></pre>\n\n<p>The second way is to pass a pointer to a pointer.</p>\n\n<pre><code>void fun(int **arrparam) {\n    int *localarr = malloc(2 * sizeof(int));\n    localarr[0] = 4;\n    localarr[1] = 5;\n    *arrparam = localarr;\n}\n</code></pre>\n\n<p>Then the caller does:</p>\n\n<pre><code>fun(&amp;arr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1465422218, "last_edit_date": 1465422218, "creation_date": 1465421780, "answer_id": 37713348, "question_id": 37713124, "link": "https://stackoverflow.com/questions/37713124/is-array-as-an-argument-in-c-really-reference-type/37713348#37713348", "title": "Is array as an argument in c really reference type?", "body": "<blockquote>\n  <p>What could I do to make the variable point to location by means of malloc inside the called function so that variable in main also starts pointing to the new location (I guess double pointer but not sure).</p>\n</blockquote>\n\n<p>In order to do that, you have pass a pointer to a pointer (that's your double pointer).</p>\n\n<pre><code>foo(int** ptr)\n{\n   *ptr = malloc(sizeof(int)*2);\n   (*ptr)[0] = 10;\n   (*ptr)[1] = 20;\n}\n\nint main()\n{\n   int* ptr;\n   foo(&amp;ptr);  // Use the &amp; operator to pass a pointer to the pointer.\n\n   // Check to make sure that the values are as expected.\n   assert(ptr[0] == 10);\n   assert(ptr[1] == 20);\n\n   // deallocate the memory\n   free(ptr);\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 37713345, "answer_count": 2, "score": 1, "last_activity_date": 1465430945, "creation_date": 1465420868, "last_edit_date": 1465430945, "question_id": 37713124, "link": "https://stackoverflow.com/questions/37713124/is-array-as-an-argument-in-c-really-reference-type", "title": "Is array as an argument in c really reference type?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid fun(int *arr)\n{\n    arr=(int *)malloc(2*sizeof(int));\n    arr[0]=5;\n    arr[1]=4;\n    printf(\"in fun {%d, %d}\",arr[0],arr[1]);\n}\n\nvoid anotherFunction(int *arr) \n{\n    arr[0]=4;\n    arr[1]=5;\n    printf(\"in fun {%d, %d}\",arr[0],arr[1]);\n}\n\nint main(void) \n{\n    int *arr,*emptyInMain;\n    int arr2[]={99,99};\n    arr=(int *)malloc(2*sizeof(int));\n    arr[0]=99;\n    arr[1]=99;\n\n    printf(\"arr \");\n    fun(arr);\n    printf(\"\\narr in main {%d, %d}\\n\",arr[0],arr[1]);\n\n    printf(\"emptyInMain\");\n    fun(emptyInMain);\n    //printf(\"\\narr in main {%d, %d}\\n\",emptyInMain[0],emptyInMain[1]);    // WILL GIVE RUNTIME ERROR\n    printf(\"\\n\\--commented the line in the code because emptyInMain[0],emptyInMain[1] will give RUNTIME ERROR--\");\n\n    printf(\"\\narr2\");\n    fun(arr2);\n    printf(\"\\narr2 in main {%d, %d}\\n\",arr2[0],arr2[1]);\n\n    printf(\"\\nfollowing output shows expected behaviour\\n\");\n\n    printf(\"\\narr2\");\n    anotherFunction(arr2);\n    printf(\"\\narr2 in main {%d, %d}\\n\",arr2[0],arr2[1]);\n    return 0;\n}\n</code></pre>\n\n<p>We all know that passing array as argument is a call by reference. As if I send an array arr={99,99} to a function which makes arr[0]=4 and arr[1]=5, the values get changed to 4 and 5 in the calling function also. The same should be applicable if I send the address of the variable and some manipulation is done in other function.</p>\n\n<p>The following output of the above code confused me. I want to be assured if what I am thinking is correct or not.</p>\n\n<pre><code>arr in fun {5, 4}\narr in main {99, 99}\nemptyInMainin fun {5, 4}\n--commented the line in the code because emptyInMain[0],emptyInMain[1] will give RUNTIME ERROR--\narr2in fun {5, 4}\narr2 in main {99, 99}\n\nfollowing output shows expected behaviour\n\narr2in fun {4, 5}\narr2 in main {4, 5}\n</code></pre>\n\n<p>Only the last output shows the change.</p>\n\n<p>Why I think arr did not get changed in first three cases is we are sending address of arr which is stored in local variable of fun(). This local variable starts pointing to some other address after the statement:</p>\n\n<pre><code>arr=(int *)malloc(2*sizeof(int));\n</code></pre>\n\n<p>anotherFunction() is the only function that doesn't change the allocation of its own local variable and manipulates the value stored in its (local variable's) address.</p>\n\n<p>Please let me know if following assumptions of mine are wrong. Also please let me know what best change can I make to make values in the array change in all the cases. What could I do to make the variable point to location by means of malloc inside the called function (I guess double pointer but not sure).</p>\n"}, {"tags": ["c", "linux", "fork", "wait", "execvp"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1465420338, "post_id": 37712866, "comment_id": 62899616, "body": "You wait inside an else statment where no child is created."}, {"owner": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1465420559, "post_id": 37712866, "comment_id": 62899707, "body": "But i must control whether user inputs &quot;wait&quot; or not."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1465420681, "post_id": 37712866, "comment_id": 62899763, "body": "Since you didn&#39;t add the <code>while</code> loop, the program exits after starting the command. How do you expect to wait for it?"}, {"owner": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "edited": false, "score": 0, "creation_date": 1465420730, "post_id": 37712866, "comment_id": 62899787, "body": "As i said i will add it, you can assume it is here."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1465421126, "post_id": 37712866, "comment_id": 62899970, "body": "<code>child</code> needs to initialized to <code>0</code>. If the user enters <code>wait</code> before the first <code>start</code>, then <code>child</code> won&#39;t have a valid value."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "edited": false, "score": 0, "creation_date": 1465421182, "post_id": 37713143, "comment_id": 62900000, "body": "I know this but i am testing the code part by part and i will add it, and i understand a child proccess and wait() must be in the same scope, but if a process is started and user write &quot;wait&quot; that must wait() for running process, how can i make it ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "edited": false, "score": 0, "creation_date": 1465421276, "post_id": 37713143, "comment_id": 62900040, "body": "You can&#39;t do that. It&#39;s not possible to wait for a process that&#39;s not your child."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "edited": false, "score": 0, "creation_date": 1465424031, "post_id": 37713143, "comment_id": 62901254, "body": "Your edit is worse. You shouldn&#39;t call <code>fork()</code> before checking whether they typed <code>start</code> or <code>wait</code>, because you only need to fork a child for <code>start</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "edited": false, "score": 0, "creation_date": 1465424084, "post_id": 37713143, "comment_id": 62901272, "body": "No matter what you do, you need a loop, so that the user can type <code>wait</code> <b>after</b> you start the child process."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1465420951, "creation_date": 1465420951, "answer_id": 37713143, "question_id": 37712866, "link": "https://stackoverflow.com/questions/37712866/fork-and-execvp-commands-in-c/37713143#37713143", "title": "fork() and execvp() commands in c", "body": "<p>A process can only wait for its own children. You need to add the <code>while</code> loop to your program, so that it can wait for the child that it forked. You can't re-run the program and wait for a process that was started by the previous invocation, because that process is not its child.</p>\n\n<p>So you need to add the while loop to your program.</p>\n\n<pre><code>while (1) {\n    printf(\"newShell&gt; \");\n    fgets( command, 1024, stdin );\n\n    ... // all the rest of your code\n}\n</code></pre>\n\n<p>Note that you may not be able to find the <code>newShell&gt;</code> prompt. Since your program doesn't wait for the child before going back to the beginning of the loop, it will often print the prompt before the child process runs and prints its output.</p>\n"}], "owner": {"reputation": 141, "user_id": 4464452, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/820019343/picture?type=large", "display_name": "Emin &#199;ift&#231;i", "link": "https://stackoverflow.com/users/4464452/emin-%c3%87ift%c3%a7i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1465423821, "creation_date": 1465419742, "last_edit_date": 1465423821, "question_id": 37712866, "link": "https://stackoverflow.com/questions/37712866/fork-and-execvp-commands-in-c", "title": "fork() and execvp() commands in c", "body": "<p>I am writing a C program. All code is in while loop but I did not add it yet. It takes input from user like start <code>ls -l</code> and run <code>ls -l</code>. And wait new command. If user write \"wait\" and there is a process that is not end, It waits until the child process is completed and print child process id that is just completed and take new command. My wait command does not working, and I need your help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include  &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\n\nint main (int argc, char **argv) \n{   \n\n    char command[1024];\n    char *cmd;\n    char *ptr1;\n    char *ptr2 = (char*)malloc(10 * sizeof(char));\n    char *ptr3;\n    char *pos;\n    char *args[3];\n    char tmp[1024];\n    int count = 0;\n    int cstatus;\n    pid_t  child;\n    pid_t c;\n\n\n    printf(\"newShell&gt; \");\n    fgets( command, 1024, stdin );\n\n\n    if ((pos=strchr(command, '\\n')) != NULL)\n            *pos = '\\0';\n\n    if (strlen(command) &gt; 1024)\n    {\n        printf(\"Command is too long\\n\");\n        exit(1);    \n    }\n\n    strcpy(tmp,command);\n\n    ptr1 = strtok(tmp,\" \");\n    cmd = ptr1;\n\n\n    while(ptr1 != NULL) \n    {   \n        ptr1 = strtok(NULL, \" \");\n\n\n        if (ptr1 == NULL) break;\n\n        if (count == 0)\n        {\n            ptr3 = ptr1;\n\n            count = 1;\n        }\n\n        else\n            strcat(strcat(ptr2,ptr1),\" \");\n        }\n\n    ptr2[strlen(ptr2) - 1] = '\\0';\n\n    args[0] = ptr3;\n    args[1] = ptr2;\n    args[2] = NULL;\n\n    if (strcmp(cmd,\"start\") == 0)\n    {\n        if ((child = fork()) == 0) \n        { \n            printf(\"\\nProcess %ld is started\\n\", (long) getpid());\n            execvp(args[0], args); \n\n            fprintf(stderr, \"execvp() couldn't do the process\\n\");\n            exit(1);\n        }\n\n        if (child == (pid_t)(-1)) \n        {\n            fprintf(stderr, \"Fork error.\\n\"); exit(1);\n        }\n    }\n\n    else if (strcmp(cmd,\"wait\") == 0)\n    {   \n\n        if (child &gt; 0)\n        {\n            c = wait(&amp;cstatus); \n            printf(\"Process %ld completed with code: %d \\n\",\n            (long) c, cstatus);\n        }\n        else\n            printf(\"There is no process\\n\");\n    }   \n\n\n}\n</code></pre>\n\n<p>Edit: </p>\n\n<p>Should i change that part with: </p>\n\n<pre><code>child = fork();\n\n    if (child == (pid_t)(-1)) \n    {\n            fprintf(stderr, \"Fork failed.\\n\"); \n            exit(1);\n    }\n\n    if (strcmp(cmd,\"start\") == 0)\n    {\n        if (child == 0) \n        { \n            printf(\"\\nProcess %ld is started\\n\", (long) getpid());\n            execvp(args[0], args); \n\n            fprintf(stderr, \"execvp() couldn't do the process\\n\");\n            exit(1);\n\n            continue;\n        }\n\n    else if (strcmp(cmd,\"wait\") == 0)\n\n        c = wait(&amp;cstatus); \n        printf(\"Parent: Child  %ld exited with status = %d\\n\",\n        (long) c, cstatus);\n        continue;\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1465418839, "post_id": 37712592, "comment_id": 62898916, "body": "Hi, welcome to stack overflow. Please post what have you tried so far and take a look at how to ask good questions: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1465420903, "post_id": 37712592, "comment_id": 62899871, "body": "You need to make your question clearer. It sounds a if the input is a character such as &#39;2&#39; and you want to convert it from the ASCII value that means 2 (0x32) into the binary value 2. Alternatively, you might want to actually process the binary value 0x32. Which one do you actually mean to do?"}], "answers": [{"comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1465420702, "post_id": 37712645, "comment_id": 62899772, "body": "I think that he wants to take the string and covert it to a binary digit so that &#39;2&#39; becomes 2 rather than the ASCII code which means 2."}, {"owner": {"reputation": 97, "user_id": 5883564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-1yBp0rnp33Q/AAAAAAAAAAI/AAAAAAAAABM/fUGvY7P76-E/photo.jpg?sz=128", "display_name": "Richard Dyer", "link": "https://stackoverflow.com/users/5883564/richard-dyer"}, "edited": false, "score": 0, "creation_date": 1465452940, "post_id": 37712645, "comment_id": 62909060, "body": "thanks ShadowRanger yes that is what I meant, thank you for your help!"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1465418926, "creation_date": 1465418926, "answer_id": 37712645, "question_id": 37712592, "link": "https://stackoverflow.com/questions/37712592/converting-char-to-binary-file/37712645#37712645", "title": "Converting char to binary file", "body": "<p><code>char</code> and <code>uint8_t</code> are almost the same (can be the same, depending on compiler settings; <code>char</code> has compiler switch dependent signedness). Just cast to ensure the correct signedness before operating:</p>\n\n<pre><code>char someval = mystring[0];\nuint8_t lonyb = (uint8_t)someval &amp; 0xF;\nuint8_t hinyb = (uint8_t)someval &gt;&gt; 4;\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5883564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-1yBp0rnp33Q/AAAAAAAAAAI/AAAAAAAAABM/fUGvY7P76-E/photo.jpg?sz=128", "display_name": "Richard Dyer", "link": "https://stackoverflow.com/users/5883564/richard-dyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465427437, "creation_date": 1465418716, "last_edit_date": 1465427437, "question_id": 37712592, "link": "https://stackoverflow.com/questions/37712592/converting-char-to-binary-file", "title": "Converting char to binary file", "body": "<p>I have a homework assignment where I want to take a <code>char*</code> (<code>string</code>) and turn it into a <code>uint8_t</code> (<code>byte</code>) i then want to split the byte into two <code>nibbles</code> (<code>4bits</code>) and edit it and write it to a binary file. What would be the best way of doing this? How do you take a <code>char</code> and turn it to a <code>uint8_t</code>?</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 1557, "user_id": 1156377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0tsJk.jpg?s=128&g=1", "display_name": "Mark K Cowan", "link": "https://stackoverflow.com/users/1156377/mark-k-cowan"}, "edited": false, "score": 0, "creation_date": 1548297402, "post_id": 37711736, "comment_id": 95493940, "body": "Not an answer since you&#39;re C not C++ - but for C++ people: You could wrap <code>__builtin_popcount*</code> intrinsics in overloaded inline functions with different input parameter types, then just pass an integer in and let overload resolution decide which one to call."}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 1503005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90b52b5838c087bb6b2bf61cf65951b4?s=128&d=identicon&r=PG", "display_name": "macdjord", "link": "https://stackoverflow.com/users/1503005/macdjord"}, "edited": false, "score": 0, "creation_date": 1465417854, "post_id": 37711903, "comment_id": 62898422, "body": "__builtin_popcount() takes an unsigned int and unsigned int is guaranteed by the standard to be at least 16 bits, so it would be better to take 16 bits at a time rather than 8."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1465416791, "last_edit_date": 1465416791, "creation_date": 1465416300, "answer_id": 37711903, "question_id": 37711736, "link": "https://stackoverflow.com/questions/37711736/how-to-calculate-hamming-weight-a-k-a-population-count-i-e-number-of-1-bits/37711903#37711903", "title": "How to calculate Hamming weight (a.k.a. population count, i.e. number of 1 bits in an integer) for an integer type of unknown bitcount?", "body": "<p>Assuming the types in question are <em>unsigned</em>:</p>\n\n<p>Take the number in question, grab the lower 8 bits, cast to <code>uint8_t</code>, and pass to <code>__builtin_popcount()</code>.  Shift right 8 bits and repeat until you get 0.</p>\n\n<pre><code>int count_bits(some_type x)\n{\n    int count = 0;\n    while (x &gt; 0) {\n        count += __builtin_popcount((uint8_t)(x &amp; 0xFF));\n        x &gt;&gt;= 8;\n    }\n    return count;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 1503005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90b52b5838c087bb6b2bf61cf65951b4?s=128&d=identicon&r=PG", "display_name": "macdjord", "link": "https://stackoverflow.com/users/1503005/macdjord"}, "edited": false, "score": 0, "creation_date": 1465417649, "post_id": 37711905, "comment_id": 62898313, "body": "I specified &#39;<i>efficiently</i> calculate&#39;; this is O(n) time, whereas an appropriate shift-and-add algorithm takes O(log(n)) <i>and</i> has no conditional looping or branching to screw up your instruction pipelining."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 405, "user_id": 1503005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90b52b5838c087bb6b2bf61cf65951b4?s=128&d=identicon&r=PG", "display_name": "macdjord", "link": "https://stackoverflow.com/users/1503005/macdjord"}, "edited": false, "score": 0, "creation_date": 1465420420, "post_id": 37711905, "comment_id": 62899654, "body": "Well you should have been more specific instead of reeling off a list of apparent impossibilities. So sorry to have bothered you an answer that only satisfies &quot;I do not know how many bits&quot;. I see your comment to the best reply is just as negative."}, {"owner": {"reputation": 405, "user_id": 1503005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90b52b5838c087bb6b2bf61cf65951b4?s=128&d=identicon&r=PG", "display_name": "macdjord", "link": "https://stackoverflow.com/users/1503005/macdjord"}, "edited": false, "score": 0, "creation_date": 1465483057, "post_id": 37711905, "comment_id": 62929303, "body": "I <i>was</i> &#39;more specific&#39;: &#39;efficient&#39; is right there in the first sentence.  I said I do not know how many bits <i>when writing the code</i>. I - or rather the compiler - <i>does</i> know <i>at compile time</i> how many bits it is. That was the whole point of my question: how do I calculate it using the most efficient algorithm for the actual size determined at compile time.  As for my other comment, there is nothing negative about pointing out a bug in their code. That solution is <i>also</i> O(n), but in that case the N tops at at 8 instead of 128 like yours, which makes it reasonable, if not optimal."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": -1, "last_activity_date": 1465416303, "creation_date": 1465416303, "answer_id": 37711905, "question_id": 37711736, "link": "https://stackoverflow.com/questions/37711736/how-to-calculate-hamming-weight-a-k-a-population-count-i-e-number-of-1-bits/37711905#37711905", "title": "How to calculate Hamming weight (a.k.a. population count, i.e. number of 1 bits in an integer) for an integer type of unknown bitcount?", "body": "<p>You do not need to know how many bits are in the number. You only need to know when there are none set. For an unsigned type that is easy - it will be zero.</p>\n\n<pre><code>int count = 0;\nutype number = /* some number */;\nwhile(number != 0) {\n    if ((number &amp; (utype)1) != 0) {\n        count++;\n    }\n    number &gt;&gt;= 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1465417678, "last_edit_date": 1592644375, "creation_date": 1465416987, "answer_id": 37712101, "question_id": 37711736, "link": "https://stackoverflow.com/questions/37711736/how-to-calculate-hamming-weight-a-k-a-population-count-i-e-number-of-1-bits/37712101#37712101", "title": "How to calculate Hamming weight (a.k.a. population count, i.e. number of 1 bits in an integer) for an integer type of unknown bitcount?", "body": "<blockquote>\n<p>how can I efficiently calculate the Hamming weight of an integer which is of a variable-width type, e.g. uint_fast8_t or uintmax_t?</p>\n<p>[...]</p>\n<p>I am compiling using GCC</p>\n<p>I would prefer a solution which uses the __builtin_popcount() functions</p>\n</blockquote>\n<p>You can write an <code>if / else</code> statement based on the <code>sizeof()</code> the type in question:</p>\n<pre><code>int weight(uintmax_t x) {\n    if (sizeof x &lt;= sizeof int) {\n        return __builtin_popcount(x);\n    else if (sizeof x &lt;= sizeof long) {\n        return __builtin_popcountl(x);\n    else {\n        return __builtin_popcountll(x);\n    }\n}\n</code></pre>\n<p>There's a good chance that GCC recognizes that the relational expressions are compile-time constants, and therefore optimizes all of that to just calling the appropriate builtin.</p>\n<p>Alternatively, you can just use <code>__builtin_popcountll(x)</code>; as far as I am aware, GCC provides no integer types wider than <code>long long int</code>, so that will produce the right answer in all cases.</p>\n<p>Or you can determine which alternative to select during machine-specific build configuration (e.g. via an Autoconf or CMake test), and define a symbol that instructs GCC which of the available variants to choose.  This variation also allows you to provide a fallback in case you unexpectedly do run into an integer type wider than <code>long long int</code>.</p>\n<p>Any of these (other than the fallback) enable you to compute the Hamming weight with a single call to a suitable builtin.  I presume that serves your apparent interest in efficient performance better than does an alternative that requires multiple calls.</p>\n"}], "owner": {"reputation": 405, "user_id": 1503005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90b52b5838c087bb6b2bf61cf65951b4?s=128&d=identicon&r=PG", "display_name": "macdjord", "link": "https://stackoverflow.com/users/1503005/macdjord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 0, "accepted_answer_id": 37712101, "answer_count": 3, "score": 1, "last_activity_date": 1465417678, "creation_date": 1465415665, "question_id": 37711736, "link": "https://stackoverflow.com/questions/37711736/how-to-calculate-hamming-weight-a-k-a-population-count-i-e-number-of-1-bits", "title": "How to calculate Hamming weight (a.k.a. population count, i.e. number of 1 bits in an integer) for an integer type of unknown bitcount?", "body": "<p>In C, how can I efficiently calculate the Hamming weight of an integer which is of a variable-width type, e.g. uint_fast8_t or uintmax_t?</p>\n\n<ul>\n<li>I cannot code a <a href=\"https://en.wikipedia.org/wiki/Hamming_weight#Efficient_implementation\" rel=\"nofollow\">shift and add</a> algorithm, because I do not know until compile time how many bits are in the number.</li>\n<li>I cannot use the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fpopcount-4268\" rel=\"nofollow\">__builtin_popcount()</a> family of functions because I do not know which, if any, of 'unsigned int', 'unsigned long int', or 'unsigned long long int' the given type corresponds to.</li>\n<li>I cannot even write a function which has separate cases for each of the possible lengths, with the correct one being selected at compile time, because sizeof() isn't available in pre-processor conditionals.</li>\n</ul>\n\n<p>Notes:</p>\n\n<ul>\n<li>I am compiling using GCC</li>\n<li>I would prefer a solution which uses the __builtin_popcount() functions if and when possible, so that I can take advantage of processor-level popcount operations when available.</li>\n<li>I am not actively targeting any unusual architectures, so a solution that assumes that all integer types are 8 * 2^n bits long where 0 &lt;= n &lt;= 4 is acceptable. That said, the rest of my code is all carefully agnostic to atypical character or integer sizes, so it would be nice to maintain that property.</li>\n</ul>\n"}, {"tags": ["c", "arrays", "malloc", "allocation"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1465415472, "post_id": 37711647, "comment_id": 62897065, "body": "Well, first you need an <code>i</code> declared... somewhere."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1465415891, "post_id": 37711647, "comment_id": 62897306, "body": "@KerrekSB Funny that, I thought to say he doesn&#39;t have a 2D array (an array of arrays), but rather an array of <i>pointers</i>. Potato Potato."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1465415999, "post_id": 37711647, "comment_id": 62897374, "body": "it&#39;s more like a tree of 1st level"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1465416130, "post_id": 37711647, "comment_id": 62897461, "body": "@WhozCraig: yes, even better. Deleting."}, {"owner": {"reputation": 17, "user_id": 6442194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc71adae6b927088bba97dd75fc833d9?s=128&d=identicon&r=PG&f=1", "display_name": "J_Dawg", "link": "https://stackoverflow.com/users/6442194/j-dawg"}, "edited": false, "score": 0, "creation_date": 1465416410, "post_id": 37711647, "comment_id": 62897612, "body": "Okay, so I&#39;ve learned that an array of arrays is not equivalent to a 2D array. So if I&#39;m going to allocate pointer to pointer style, I will always need a loop. Thanks for the tips guys."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465417478, "post_id": 37711647, "comment_id": 62898229, "body": "Always check for the return value from <code>malloc()</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465418336, "post_id": 37711647, "comment_id": 62898644, "body": "@J_Dawg, even with pointer-to-pointer style, if you know how much space you need for each row then you can perform a single allocation for the overall total, and then loop just to assign the appropriate values to all the pointers."}], "answers": [{"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 1, "last_activity_date": 1465416181, "creation_date": 1465416181, "answer_id": 37711870, "question_id": 37711647, "link": "https://stackoverflow.com/questions/37711647/do-2d-arrays-always-need-a-loop-for-allocation/37711870#37711870", "title": "Do 2D Arrays Always Need a Loop for Allocation?", "body": "<p>There are two different common ways to create a 2D array in C. If the inner dimension is fixed (i.e., known at compile time), you can declare it as an array of those fixed-size arrays, and then just allocate one big blob of memory.  If you don't, then you have to allocate an array of pointers to rows, then do a loop allocating each row.</p>\n"}, {"comments": [{"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 1, "creation_date": 1465416904, "post_id": 37711894, "comment_id": 62897903, "body": "It is worth to note that such 2D array is to be placed within continuous memory location, which is not the case for the &quot;heap fragmentation&quot; method."}, {"owner": {"reputation": 1776, "user_id": 1290464, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bea4eda510966af76faf4b64dd67813f?s=128&d=identicon&r=PG", "display_name": "ellman121", "link": "https://stackoverflow.com/users/1290464/ellman121"}, "edited": false, "score": 0, "creation_date": 1465418591, "post_id": 37711894, "comment_id": 62898786, "body": "Side note:  This will always make square arrays.  If you want &quot;jagged&quot; arrays (e.g. the first row as 5 cols, the second row has 3 cols, etc.), you can do this with explicit mallocs on each row"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 5, "last_activity_date": 1465416270, "creation_date": 1465416270, "answer_id": 37711894, "question_id": 37711647, "link": "https://stackoverflow.com/questions/37711647/do-2d-arrays-always-need-a-loop-for-allocation/37711894#37711894", "title": "Do 2D Arrays Always Need a Loop for Allocation?", "body": "<p>No, you don't always need a loop.</p>\n\n<pre><code>int (*array)[M] = malloc( sizeof *array * N ); \n</code></pre>\n\n<p>The code above declares <code>array</code> as a pointer to an <code>M</code>-element array of <code>int</code>, then allocates enough space for <code>N</code> instances of that array type, giving us storage for an <code>N</code> by <code>M</code> array of <code>int</code>.  </p>\n\n<p>If the size of <code>M</code> is not known at compile time, then <code>array</code> is a <em>variable-length array</em>, which isn't supported in C89 or earlier.  </p>\n"}, {"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": false, "score": 0, "last_activity_date": 1465421848, "last_edit_date": 1495540855, "creation_date": 1465421204, "answer_id": 37713218, "question_id": 37711647, "link": "https://stackoverflow.com/questions/37711647/do-2d-arrays-always-need-a-loop-for-allocation/37713218#37713218", "title": "Do 2D Arrays Always Need a Loop for Allocation?", "body": "<p>See for instance <a href=\"https://stackoverflow.com/questions/2259773/how-do-i-allocate-a-2-d-array-with-contigious-memory-how-do-i-use-it-to-access\">How do I allocate a 2 D array with contigious memory ? How Do I use it to access rows and columns? Give me an example</a></p>\n\n<p>If the thing that is to be avoided is the multiple calls to <code>malloc()</code>, then here is an alternative way to allocate a 2D array:</p>\n\n<pre><code>int row=42;\nint col=35;\nint** array=malloc(row*sizeof(int*));\nif(array==NULL){fprintf(stderr,\"malloc failed\\n\");exit(1);}\narray[0]=malloc(row*col*sizeof(int));\nif(array[0]==NULL){fprintf(stderr,\"malloc failed\\n\");exit(1);}\nint i;\nfor(i=1;i&lt;row;i++){\n    array[i]=&amp;array[0][i*col];\n}\n...\nfree(array[0]);\nfree(array);\n</code></pre>\n\n<p>Values can still be retreived by <code>int val=array[i][j]</code> and set by <code>array[i][j]=42;</code></p>\n\n<p>Compared to the method that is introduced in your question, the present method ensures that the rows are contiguous in memory. Hence, such array of <code>float</code> or <code>double</code> can easily be used by the LAPACK library as a matrix, of by the FFTW library to compute the 2D Fast Fourier Transform of an image (convolution...). But increasing the size of the array on the fly is much harder.</p>\n\n<p>Notice that the size of the array can be computed by the program at execution time, days after the program is compiled. </p>\n\n<p>This trick can be extended to higher dimensions (3D, 4D,...) but it does not become more beautiful !</p>\n"}], "owner": {"reputation": 17, "user_id": 6442194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc71adae6b927088bba97dd75fc833d9?s=128&d=identicon&r=PG&f=1", "display_name": "J_Dawg", "link": "https://stackoverflow.com/users/6442194/j-dawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1465421848, "creation_date": 1465415361, "last_edit_date": 1495542763, "question_id": 37711647, "link": "https://stackoverflow.com/questions/37711647/do-2d-arrays-always-need-a-loop-for-allocation", "title": "Do 2D Arrays Always Need a Loop for Allocation?", "body": "<p>I am trying to allocated a 2D array. I am seeing a lot of people use loops when they allocated(<a href=\"https://stackoverflow.com/questions/30197243/dynamically-allocated-2d-array\">Dynamically allocated 2d array</a>), but I am still unsure if a person always needs to use a loop to allocate a 2d-array in C. Do I need the loop because my code only allocates one column?</p>\n\n<pre><code>int ** allocate(int width, int height){\n    int **array = malloc(sizeof(int *) * width);\n    array[i] = malloc(sizeof(int) * height);\n    return array;\n\n}\n</code></pre>\n"}, {"tags": ["c", "eclipse", "mingw", "codeblocks"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465414433, "post_id": 37711315, "comment_id": 62896514, "body": "isn&#39;t it like <code>%f</code> is enough for <code>double</code>?"}, {"owner": {"reputation": 1, "user_id": 6442123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134859383201144/picture?type=large", "display_name": "klippklar", "link": "https://stackoverflow.com/users/6442123/klippklar"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465414604, "post_id": 37711315, "comment_id": 62896599, "body": "I tried it with %f, oddly it works. But why doesnt it work with %lf then? O.o"}, {"owner": {"reputation": 86, "user_id": 6078437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c445d61a467a9198039c66cf2fbaaff1?s=128&d=identicon&r=PG&f=1", "display_name": "scarecrow-", "link": "https://stackoverflow.com/users/6078437/scarecrow"}, "edited": false, "score": 3, "creation_date": 1465415098, "post_id": 37711315, "comment_id": 62896848, "body": "C89 says that l before f leads to undefined behavior. And C90 probably says the same.  C99 on the other hand says that l before f has no effect"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465415628, "post_id": 37711315, "comment_id": 62897157, "body": "What version of compiler is it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1465415719, "post_id": 37711315, "comment_id": 62897213, "body": "The <code>printf</code> format specifier for <code>double </code> is <code>%f</code> and a <code>float</code> argument is promoted to <code>double</code>."}, {"owner": {"reputation": 1, "user_id": 6442123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134859383201144/picture?type=large", "display_name": "klippklar", "link": "https://stackoverflow.com/users/6442123/klippklar"}, "edited": false, "score": 0, "creation_date": 1465416206, "post_id": 37711315, "comment_id": 62897511, "body": "I have a -std=c11 as a compiler flag, dont know if it works though. My for-loops are working so i guess im using c99 or c11."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465487287, "post_id": 37711315, "comment_id": 62932544, "body": "the format &#39;%lf` is for <code>long double</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1465414917, "creation_date": 1465414917, "answer_id": 37711523, "question_id": 37711315, "link": "https://stackoverflow.com/questions/37711315/console-only-displays-0-for-all-doubles/37711523#37711523", "title": "Console only displays 0 for all doubles", "body": "<p>You can use <code>%f</code> to print <code>double</code> values, <code>%lf</code> is <em>not required.</em></p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.21.6.1,</p>\n\n<blockquote>\n  <p><code>l (ell)</code><br></p>\n  \n  <p>... or has no effect on a following <code>a</code>, <code>A</code>, <code>e</code>, <code>E</code>, <code>f</code>, <code>F</code>, <code>g</code>, or <code>G</code> conversion\n  specifier.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 6442123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134859383201144/picture?type=large", "display_name": "klippklar", "link": "https://stackoverflow.com/users/6442123/klippklar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465415085, "creation_date": 1465414260, "last_edit_date": 1465414769, "question_id": 37711315, "link": "https://stackoverflow.com/questions/37711315/console-only-displays-0-for-all-doubles", "title": "Console only displays 0 for all doubles", "body": "<p>When I compile my code in Code:Blocks or Eclipse and run it the console displays all double variables as 0.000000. </p>\n\n<p>It happens with even the simplest code like:</p>\n\n<pre><code>double a = 1.0;\nprintf(\"%lf\", a);\n</code></pre>\n\n<p>console shows: 0.000000</p>\n\n<p>This doesn't happen to <code>int</code> variables though. Is my compiler set up the wrong way?</p>\n"}, {"tags": ["c", "linux", "eclipse", "signals", "creation"], "comments": [{"owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "edited": false, "score": 1, "creation_date": 1465414129, "post_id": 37710930, "comment_id": 62896342, "body": "The first thing to do would be to figure out the specific cause of the error, using errno and/or strerror().  <a href=\"http://beej.us/guide/bgnet/output/html/multipage/perrorman.html\" rel=\"nofollow noreferrer\">This page</a> should be helpful."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 1, "creation_date": 1465415845, "post_id": 37710930, "comment_id": 62897286, "body": "To the best of my knowledge, <code>IPC_CREAT</code> is not a valid mode of <code>open</code>. Did you mean to use <code>shmget</code> ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485603, "post_id": 37710930, "comment_id": 62931306, "body": "when printing an error, output to <code>stderr</code>, not <code>stdout</code>.  and output the message the OS thinks is the problem.  I.E. use: <code>perror()</code>, not <code>printf()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485726, "post_id": 37710930, "comment_id": 62931406, "body": "for ease of readability and understanding, 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  2) consistently indent the code.  indent after every opening brace &#39;{&#39;.  un-indent before every closing brace &#39;}&#39;.  Never use tabs for indenting.  Suggest using 4 spaces for each indent level as that is visible even with variable width fonts."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485791, "post_id": 37710930, "comment_id": 62931452, "body": "the <code>IPC_CREAT</code> should be: <code>O_CREAT</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485840, "post_id": 37710930, "comment_id": 62931490, "body": "do not <code>#include</code> header files that are not being used.  I.E. the posted code should not have the statement: <code>#include &lt;signal.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485978, "post_id": 37710930, "comment_id": 62931584, "body": "the call to <code>printf()</code> is missing a trailing semicolon."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465486177, "post_id": 37711279, "comment_id": 62931707, "body": "this answer does not compile due to the missing trailing semicolon on the call to the <code>printf()</code> statement"}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": true, "score": 1, "last_activity_date": 1465486399, "last_edit_date": 1465486399, "creation_date": 1465414167, "answer_id": 37711279, "question_id": 37710930, "link": "https://stackoverflow.com/questions/37710930/open-file-linux-eclipse-c-error-after-getchld/37711279#37711279", "title": "open file linux eclipse c error after getchld", "body": "<p>You're doing something strange with the flags. I think your intention is as per below code:</p>\n\n<pre><code>#define FLAGS O_CREAT\n#define MODE 0644\nint main()  \n{\n    int res =open(\"results.txt\",FLAGS,MODE);\n    if(res== -1) { printf(\"error!!\");}   //prints it every time\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1465486676, "creation_date": 1465486676, "answer_id": 37730471, "question_id": 37710930, "link": "https://stackoverflow.com/questions/37710930/open-file-linux-eclipse-c-error-after-getchld/37730471#37730471", "title": "open file linux eclipse c error after getchld", "body": "<p>the following code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>properly calls the <code>open()</code> function</li>\n<li>properly displays the error message</li>\n<li>does not <code>#include</code> header files that are not used</li>\n<li>consistently indents the code</li>\n<li>follows the axiom: `only one statement per line and (at most) one variable declaration per statement.</li>\n<li>separates code blocks (for, if ,else, while, do...while, switch, case, default) via a blank line</li>\n<li>uses a proper signature for the <code>main()</code> function (the empty parens in the posted code means that any number of parameters, including 0 parameters, are allowed</li>\n<li>code should not return 0 <em>success</em> when an error occurs so using <code>exit( EXIT_FAILURE )</code></li>\n</ol>\n\n<p>And now the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // perror()\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n#include &lt;unistd.h&gt;  // open()\n#include &lt;fcntl.h&gt;   // O_CREAT\n\n#define FLAGS O_CREAT\n#define MODE 0644\n\nint main( void )\n{\n    int res =open(\"results.txt\", FLAGS, MODE);\n    if(res== -1)\n    {\n        perror( \"open for results.txt failed\" );\n        exit( EXIT_FAILURE );\n    }   \n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 37711279, "answer_count": 2, "score": 0, "last_activity_date": 1465486676, "creation_date": 1465412961, "question_id": 37710930, "link": "https://stackoverflow.com/questions/37710930/open-file-linux-eclipse-c-error-after-getchld", "title": "open file linux eclipse c error after getchld", "body": "<p>im just trying to open a file.\ni have done it for 100 times, and then I sent SIGCHLD signal to other processes and i think right after that i couldn't open that file anymore.</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define FLAGS IPC_CREAT | 0644\nint main()  {\nint res =open(\"results.txt\",FLAGS);\nif(res== -1) { printf(\"error!!\")}   //prints it every time\nreturn 0;}\n</code></pre>\n\n<p>..it suddenly just happened.. help ???</p>\n"}, {"tags": ["c", "ffmpeg", "h.264", "pixelformat", "swscale"], "comments": [{"owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "edited": false, "score": 0, "creation_date": 1466089969, "post_id": 37710873, "comment_id": 63183306, "body": "Hmmm.  I&#39;ve worked with ffmpeg a little bit, I might be able to help.  First of all, just to be certain: you seem to be assuming that that the problem resides in the call to sws_scale(), right?  How did you determine that?  Did you validate that the data that you&#39;re mapping from the GPU framebuffer is correct?"}], "owner": {"reputation": 1274, "user_id": 688563, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ba0fb451b240351c79a96cae6ea14ea?s=128&d=identicon&r=PG&f=1", "display_name": "PhilBot", "link": "https://stackoverflow.com/users/688563/philbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1465692214, "creation_date": 1465412772, "question_id": 37710873, "link": "https://stackoverflow.com/questions/37710873/ffmpeg-libswscale-xbgr32-to-nv12-almost-working-but-colors-are-wrong", "title": "FFMpeg libswscale XBGR32 to NV12 almost working but colors are wrong", "body": "<p>I am getting a Linx DMA-BUF from the GPU in XBGR32 format and I need to use FFMpeg's libswscale to convert it on the ARM to NV12.</p>\n\n<p>I've been able to almost get it working based on various SO posts and the documentation.</p>\n\n<p>Here is the LCD screen that is the actual output of the GPU:\n<a href=\"https://i.stack.imgur.com/8KKoK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8KKoK.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the encoded data from the NV12 frame created by libswscale - it should show the same colors as the screen:\n<a href=\"https://i.stack.imgur.com/UOjHR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UOjHR.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Please note that the pictures were not taken at exactly the same time.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Here is the relevant part of my code:</p>\n\n<pre><code>/* Prepare to mmap the GBM BO */\nunion gbm_bo_handle handleUnion = gbm_bo_get_handle(bo);  \nstruct drm_omap_gem_info req;\nreq.handle = handleUnion.s32;    \nret = drmCommandWriteRead(m_DRMController.fd, DRM_OMAP_GEM_INFO,&amp;req, sizeof(req));\nif (ret) {  \n    qDebug() &lt;&lt; \"drmCommandWriteRead(): Cannot set write/read\";\n}   \n\n// Perform actual memory mapping of GPU output    \ngpuMmapFrame = (char *)mmap(0, req.size, PROT_READ | PROT_WRITE, MAP_SHARED,m_DRMController.fd, req.offset);\nassert(gpuMmapFrame != MAP_FAILED);\n\n// Use ffmpeg to do the SW BGR32 to NV12   \nstatic SwsContext *swsCtx = NULL;    \nint width    = RNDTO2( convertWidth );    \nint height   = RNDTO2( convertHeight );    \nint ystride  = RNDTO32 ( width );    \nint uvstride = RNDTO32 ( width / 2 );    \nint uvsize   = uvstride * ( height / 2 );    \nvoid *plane[] = { y, u, u + uvsize, 0 };    \nint stride[] = { ystride, uvstride, uvstride, 0 };    \n\n// Output of GPU is XBGR32    \n// #define V4L2_PIX_FMT_XBGR32  v4l2_fourcc('X', 'R', '2', '4') /* 32  BGRX-8-8-8-8  */    \nswsCtx = sws_getCachedContext( swsCtx, convertWidth, convertHeight, AV_PIX_FMT_BGR32, width, height, AV_PIX_FMT_NV12, \n                           SWS_FAST_BILINEAR , NULL, NULL, NULL );  \nint linesize[1] = { convertWidth * 4 };    \nconst uint8_t *inData[1] = { (uint8_t*)gpuMmapFrame };    \nif ( gpuMmapFrame ) {    \n    sws_scale( swsCtx, (const uint8_t *const *)inData, linesize, 0, convertHeight, (uint8_t *const *)plane, stride );    \n}        \n\n// Unmap it    \nmunmap(gpuMmapFrame,req.size);\n\n// Now send the frame to the encoder    \ndce.submitFrameToEncode(swEncodeBufferNV12);\n</code></pre>\n"}, {"tags": ["c", "string", "gets"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465412746, "post_id": 37710827, "comment_id": 62895623, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465413509, "post_id": 37710827, "comment_id": 62896039, "body": "<code>newline</code> left in buffer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1465413564, "post_id": 37710827, "comment_id": 62896067, "body": "And what value does <code>scanf()</code> return?  You need to check that."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1465413678, "post_id": 37710827, "comment_id": 62896125, "body": "@AndrewHenle scanf() in this program let user inter number of sentences"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1465413782, "post_id": 37710827, "comment_id": 62896175, "body": "We understand that.  The question is what is the return value of the <code>scanf</code> function?  If it returns 0, it didn&#39;t read anything.  Also, what is your input when you get this behavior?"}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1465413879, "post_id": 37710827, "comment_id": 62896226, "body": "@dbush when i enter 3 (i.e. N=3), the output that i get is: plz enter 0 th: plz enter 1 th: plz enter 2 th:, this means that scanf is reading value for N successfully and is not returning 0"}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465414207, "post_id": 37710827, "comment_id": 62896398, "body": "@SouravGhosh thanks for the downvote :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465414321, "post_id": 37710827, "comment_id": 62896450, "body": "@gj1103 Just because I left a comment, I become the downvoter? :))"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1465414770, "post_id": 37710827, "comment_id": 62896686, "body": "I venture to suggest putting <code>[c] gets skips line</code> in a search box will yield some insight into the problem (this question has <i>many</i> duplicates, but most are so arbitrarily titled it&#39;s ridiculous)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "edited": false, "score": 0, "creation_date": 1465418519, "post_id": 37710827, "comment_id": 62898748, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16300121/input-using-gets-not-working-but-working-with-scanf\">Input using gets not working, but working with scanf</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1465441158, "post_id": 37710827, "comment_id": 62905473, "body": "<code>gets</code> is not standard C (anymore). <b>Never ever</b> use it! Use <code>fgets</code> on <code>stdin</code> instead. And check the values provides from external input before using them and functions for errors which are relevant for the program execution. Never rely on correct input data!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465441252, "post_id": 37710827, "comment_id": 62905495, "body": "And if you need a 2D array, use one! Your code does not have anything which can relresent a 2D array."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465484125, "post_id": 37710827, "comment_id": 62930138, "body": "for ease of readability and understanding of code, by us humans, 1) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line. 2) consistently indent the code.  indent after every opening brace &#39;{&#39;.  un-indent before every closing brace &#39;}&#39;. suggest using 4 spaces (never tabs) for each indent level. 3) follow the axiom: *only one statement per line and (at most) one variable declaration per statement.  4) use meaningful variable names. A variable name should indicate usage or content (or better, both)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465484913, "post_id": 37710827, "comment_id": 62930787, "body": "the expression <code>sizeof(char)</code> is defined in the standard as 1.  multiplying anything by 1 has no effect.  So all that expression, in the call to <code>malloc()</code> is doing is cluttering the code, making it more difficult to understand, debug, maintain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485142, "post_id": 37710827, "comment_id": 62930965, "body": "when compiling, always enable all the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use: <code>-Wconversion -std=gnu99</code> )  The posted code will cause the compiler to output a long string of warning messages (12 warnings with `gcc) that need to be fixed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485225, "post_id": 37710827, "comment_id": 62931030, "body": "amongst other things, the posted code is missing the statement: <code>#include &lt;string.h&gt;</code>  so the <code>malloc()</code> function is properly defined."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465414833, "post_id": 37711367, "comment_id": 62896722, "body": "its unbelievable! has been too long since i started coding in c and its the first time I face this situation. Its tough to digest for me that why I never faced this before. Also please suggest what to use in place of that? scanf(&quot;%[^\\n]*c&quot;,&amp;arr[i][0])"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465414974, "post_id": 37711367, "comment_id": 62896782, "body": "I hate <code>scanf</code>. I would rather use <code>fgets</code> and remove the trailing <code>newline</code>. But the main point is not to mix your input methods. AFAIK you would use <code>scanf(&quot;%50[^\\n]&quot;,arr[i])</code> but that&#39;s a guess as it&#39;s not a syntax I use."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465416798, "post_id": 37711367, "comment_id": 62897851, "body": "but the fact that i met this situation dissappointed me. I am unable to digest. Thanks @weather"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465484613, "post_id": 37711367, "comment_id": 62930541, "body": "this line: <code>scanf(&quot;%d&quot;,&amp;N);</code> leaves white space in stdin.  Suggest using: <code>scanf(&quot;%d &quot;,&amp;N);</code>.  Notice the trailing space in the format string."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485833, "post_id": 37711367, "comment_id": 62931484, "body": "@user3629249 unfortunately that only works (MSVC) if you want the next input at the same time. <code>scanf(&quot;%d &quot;,&amp;N);</code> does not return until the following input is also given."}, {"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465653727, "post_id": 37711367, "comment_id": 62997752, "body": "@WeatherVane Could you please help me by answering <a href=\"http://stackoverflow.com/questions/37764258/why-character-pointer-is-getting-assigned-just-a-character-while-a-string-is-su?noredirect=1#comment62997129_37764258\" title=\"why character pointer is getting assigned just a character while a string is su\">stackoverflow.com/questions/37764258/&hellip;</a>"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 3, "last_activity_date": 1465414399, "creation_date": 1465414399, "answer_id": 37711367, "question_id": 37710827, "link": "https://stackoverflow.com/questions/37710827/c-program-is-bypassing-gets/37711367#37711367", "title": "c program is bypassing gets()", "body": "<p>This line inputing the number of entries</p>\n\n<pre><code>scanf(\"%d\",&amp;N);\n</code></pre>\n\n<p>leaves a <code>newline</code> in the input buffer. Then this line</p>\n\n<pre><code>gets(&amp;arr[i][0]);\n</code></pre>\n\n<p>takes that lone <code>newline</code> as the first entry.</p>\n\n<p>You can get rid of it like this</p>\n\n<pre><code>scanf(\"%d%*c\",&amp;N);\n</code></pre>\n\n<p>But you should not be using <code>gets</code> in this day and age, it is obsolete. This would have been better for the string entries (instead of the above mod)</p>\n\n<pre><code>scanf(\"%50s\", arr[i]);\n</code></pre>\n\n<p>as well as checking the return value from all the <code>scanf</code> calls. The code still needs improvemnt though, since as stated <code>scanf</code> will only scan up to the first whitespace.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "edited": false, "score": 0, "creation_date": 1465415033, "post_id": 37711484, "comment_id": 62896818, "body": "aren&#39;t arr[i] and &amp;arr[i][0] same... as &amp;arr[i][0] is nothing but &amp;(*arr[i]+0)..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1465484502, "post_id": 37711484, "comment_id": 62930443, "body": "the info about white space is good, but NEVER use <code>gets()</code> for two major reasons: 1) it allows the input to overflow the input buffer 2) it is removed from the language from <code>C11</code> onward."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465485514, "post_id": 37711484, "comment_id": 62931242, "body": "Thanks for the info @user3629249 can i add that info to the answer ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465487165, "post_id": 37711484, "comment_id": 62932450, "body": "@CherubimAnand,  Naturally, you can always edit your own answer."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465488411, "post_id": 37711484, "comment_id": 62933352, "body": "@user3629249 I know i could edit but just waited for your consent to use the info you provided :)"}], "tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": false, "score": 2, "last_activity_date": 1465487630, "last_edit_date": 1495535340, "creation_date": 1465414770, "answer_id": 37711484, "question_id": 37710827, "link": "https://stackoverflow.com/questions/37710827/c-program-is-bypassing-gets/37711484#37711484", "title": "c program is bypassing gets()", "body": "<blockquote>\n  <p>. it doesn't wait for user to input. Instead, it prints \"plz enter 0\n  th: plz enter 1 th: plz enter 2 th: and so on\"</p>\n</blockquote>\n\n<p>this is due to problem of <strong>white space</strong> in your loop... instead try consuming them before every time you scan string using <code>scanf(\" \");</code>, like this :</p>\n\n<pre><code>for(i=0;i&lt;N;i++){\nprintf(\"plz enter %d th :\",i);\n    scanf(\" \"); //to consume white spaces\n    gets(arr[i]);// why is it not executing? because of wrong arguments\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong> : <em>as suggested by @user3629249</em></p>\n\n<blockquote>\n  <p>Never use <code>gets()</code> for two major reasons: </p>\n  \n  <ol>\n  <li>It allows the input to overflow the input buffer</li>\n  <li>It is removed from the language from C11 onward.</li>\n  </ol>\n</blockquote>\n\n<p>a better alternative would be <code>fgets()</code></p>\n\n<p>and here's a link to know about it more: <a href=\"https://stackoverflow.com/a/4309845/5281962\">here</a></p>\n"}], "owner": {"reputation": 107, "user_id": 3437973, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7807bccd51ffa421dd357bdf416ee320?s=128&d=identicon&r=PG&f=1", "display_name": "gj1103", "link": "https://stackoverflow.com/users/3437973/gj1103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "accepted_answer_id": 37711367, "answer_count": 2, "score": -2, "last_activity_date": 1465487630, "creation_date": 1465412631, "question_id": 37710827, "link": "https://stackoverflow.com/questions/37710827/c-program-is-bypassing-gets", "title": "c program is bypassing gets()", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint N,i,j,n,*numArray,count=0;\nchar **arr,*part1,*part2,*token;\nscanf(\"%d\",&amp;N);\narr=(char **)malloc(N*sizeof(char *));\nnumArray=(int *)malloc(N*sizeof(int));\nfor(i=0;i&lt;N;i++){\narr[i]=(char *)malloc(50*sizeof(char));\n}\n\nfor(i=0;i&lt;N;i++){\nprintf(\"plz enter %d th :\",i);\n    gets(&amp;arr[i][0]);// why is it not executing\n\n}\n\nfor(i=0;i&lt;N;i++){\n printf(\"%s\",arr[i]);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>I tried executing this code and found that the line gets(&amp;arr[i][0]); does not get executed, i.e. it doesn't wait for user to input. Instead, it prints \"plz enter 0 th: plz enter 1 th: plz enter 2 th: and so on\" and doesn't wait for user to enter the string.\nI am unable to get what exactly is wrong and what exactly is happening? Plese help. Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1465411657, "post_id": 37710471, "comment_id": 62894977, "body": "perfect time to start with a debugger like <code>gdb</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1465411821, "post_id": 37710471, "comment_id": 62895089, "body": "Hint: don&#39;t tend to become a three-star programmer."}, {"owner": {"reputation": 576, "user_id": 2245872, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0a0a05a01e95badfdaea6bc1d3b7fa81?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Pereira", "link": "https://stackoverflow.com/users/2245872/jo%c3%a3o-pereira"}, "edited": false, "score": 1, "creation_date": 1465411822, "post_id": 37710471, "comment_id": 62895091, "body": "Not even that is necessary. On a normal debugger, like the Eclipse one, going line by line will show you where the error is."}, {"owner": {"reputation": 1764, "user_id": 645647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c5e0c005fc928eacca101e3648eb59d?s=128&d=identicon&r=PG", "display_name": "Amndeep7", "link": "https://stackoverflow.com/users/645647/amndeep7"}, "edited": false, "score": 0, "creation_date": 1465411870, "post_id": 37710471, "comment_id": 62895110, "body": "&#39;printf&#39; has also always been my friend"}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "edited": false, "score": 0, "creation_date": 1465412043, "post_id": 37710471, "comment_id": 62895224, "body": "I am taking c in college. My professor is the worst and the textbook doesn&#39;t explain pointers very well. I don&#39;t know how to use a debugger since I am a beginning programmer and no one ever taught me.  I asked on here to get help from an actual person becuase even if a debugger pointed out the issue I doubt I would understand why it&#39;s an issue. but thanks I guess.."}, {"owner": {"reputation": 576, "user_id": 2245872, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0a0a05a01e95badfdaea6bc1d3b7fa81?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Pereira", "link": "https://stackoverflow.com/users/2245872/jo%c3%a3o-pereira"}, "edited": false, "score": 0, "creation_date": 1465412322, "post_id": 37710471, "comment_id": 62895387, "body": "@Erica You need to know about debuggers if you are learning C. It&#39;s crucial. In which program are you writing C?"}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "reply_to_user": {"reputation": 576, "user_id": 2245872, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0a0a05a01e95badfdaea6bc1d3b7fa81?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Pereira", "link": "https://stackoverflow.com/users/2245872/jo%c3%a3o-pereira"}, "edited": false, "score": 0, "creation_date": 1465412588, "post_id": 37710471, "comment_id": 62895523, "body": "@Jo&#227;oPereira I used gdb. it gave me the seg fault at the line *purp[i][j] = &#39;1&#39;; but I don&#39;t know why."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465412603, "post_id": 37710471, "comment_id": 62895531, "body": "What is <code>dog.x</code> and what returns <code>sizeof</code> ?...same for <code>dog.y</code> ."}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465412811, "post_id": 37710471, "comment_id": 62895668, "body": "@Michi dog.x and dog.y is the int x and int y in my struct. I dont know what you mean by returning size of? its a built in function."}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465412865, "post_id": 37710471, "comment_id": 62895700, "body": "@Michi I am trying to store 1&#39;s in every spot in my 2D array that is stored in the struct."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1465412999, "post_id": 37710471, "comment_id": 62895776, "body": "<code>*purp[i][j] = &#39;1&#39;;</code> --&gt; <code>(*purp)[i][j] = &#39;1&#39;;</code> or <code>void createArray(char** purp, int x, int y){</code> .. <code>purp[i][j] = &#39;1&#39;;</code> call <code>createArray(dog.purp, dog.x, dog.y);</code>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465413129, "post_id": 37710471, "comment_id": 62895833, "body": "@Erica your program needs some fix, but a direct cast shows you how it should work. <a href=\"http://ideone.com/IBS8I5\" rel=\"nofollow noreferrer\">Click</a>"}, {"owner": {"reputation": 1149, "user_id": 3019756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945be356f8aad32de4f13bce9a897113?s=128&d=identicon&r=PG&f=1", "display_name": "duncan", "link": "https://stackoverflow.com/users/3019756/duncan"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465413211, "post_id": 37710471, "comment_id": 62895879, "body": "@Sourav Ghosh hope I am not ruining your hint but definitely Google their hint."}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1465413298, "post_id": 37710471, "comment_id": 62895929, "body": "thank you. That helped me alot! It works now. @BLUEPIXY"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465413372, "post_id": 37710471, "comment_id": 62895971, "body": "@Erica Any way I meant something like <a href=\"http://ideone.com/h9tgqh\" rel=\"nofollow noreferrer\">This</a>"}, {"owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "edited": false, "score": 0, "creation_date": 1465527794, "post_id": 37710471, "comment_id": 62949103, "body": "I don&#39;t get why this was downvoted. It was a basic question."}], "answers": [{"tags": [], "owner": {"reputation": 1299, "user_id": 810632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b1fd54092d295a54910bb4202cc2c50?s=128&d=identicon&r=PG", "display_name": "nephtes", "link": "https://stackoverflow.com/users/810632/nephtes"}, "is_accepted": true, "score": 2, "last_activity_date": 1465413421, "creation_date": 1465413421, "answer_id": 37711057, "question_id": 37710471, "link": "https://stackoverflow.com/questions/37710471/segfault-error-struct-pointer-2d-array/37711057#37711057", "title": "segfault error: struct, pointer, 2D array", "body": "<p>You need to understand the concept of <a href=\"https://en.wikipedia.org/wiki/Order_of_operations\" rel=\"nofollow\">operator precedence</a>.  Just like in mathematics, where an expression like 1 + 2 \u00d7 3 means 1 + (2 \u00d7 3) and not (1 + 2) \u00d7 3, programming languages have rules as to the order in which different operators in an expression are performed.</p>\n\n<p>The rules for C are here: <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">http://en.cppreference.com/w/c/language/operator_precedence</a></p>\n\n<p>In your case, the problem is that *purp[i][j] actually means *(purp[i][j]), and not (*purp)[i][j] as you were expecting.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6442129, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a61335334eb13ae180eaa99655577edb?s=128&d=identicon&r=PG", "display_name": "Tollens", "link": "https://stackoverflow.com/users/6442129/tollens"}, "is_accepted": false, "score": 0, "last_activity_date": 1465413531, "creation_date": 1465413531, "answer_id": 37711092, "question_id": 37710471, "link": "https://stackoverflow.com/questions/37710471/segfault-error-struct-pointer-2d-array/37711092#37711092", "title": "segfault error: struct, pointer, 2D array", "body": "<pre><code>void createArray(char*** purp, int x, int y){\n*purp[i][j] = '1';\n</code></pre>\n\n<p>I think they should be</p>\n\n<pre><code>void createArray(char** purp, int x, int y){\npurp[i][j] = '1';\n</code></pre>\n\n<p>And in main</p>\n\n<pre><code>createArray(&amp;dog.purp, dog.x, dog.y);\n</code></pre>\n\n<p>'&amp;' is not needed here because you're already passing a pointer. '&amp;' is usually used to pass the address of a variable.\nCorrecting these few things it compiles just fine, not sure about what you want to do.</p>\n"}], "owner": {"reputation": 161, "user_id": 5616373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc84c8faf77f2f900902a4b48b460558?s=128&d=identicon&r=PG&f=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/5616373/erica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 37711057, "answer_count": 2, "score": -1, "last_activity_date": 1465413684, "creation_date": 1465411462, "last_edit_date": 1465413684, "question_id": 37710471, "link": "https://stackoverflow.com/questions/37710471/segfault-error-struct-pointer-2d-array", "title": "segfault error: struct, pointer, 2D array", "body": "<p>I am playing around with pointers and structs. This is the program I have been messing with. I am getting a segfault error and I am not sure why. I have looked through it for awhile but can't seem to pinpoint the issue. Can someone explain it to me? </p>\n\n<p>EDIT: in createArray I am getting a segfault at *purp[i][j] = '1';</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct purple_struct{\n  int x;\n  int y;\n  char **purp;\n};\n\nvoid print(int x, int y){\n    printf(\"%d %d\\n\", x, y);\n\n    return;\n}\n\nvoid createArray(char*** purp, int x, int y){\n    int i, j;\n\n    for (i = 0; i &lt; x; ++i){\n        for (j = 0; j &lt; y; ++j){\n            *purp[i][j] = '1';\n        }\n    }\n\n    return;\n}\n\nint main(){\n    int i, j;\n\n    struct purple_struct dog;\n\n    dog.x = 3;\n    dog.y = 4;\n\n    dog.purp = (char **)malloc(dog.x * sizeof(char *));\n    for (i = 0; i &lt; dog.x; ++i){\n        dog.purp[i] = (char *)malloc(dog.y * sizeof(char));\n    }\n\n    createArray(&amp;dog.purp, dog.x, dog.y);\n\n    for (i = 0; i &lt; dog.x; ++i){\n        for (j = 0; j &lt; dog.y; ++j){\n            printf(\"%c\", dog.purp[i][j]);\n        }\n    }\n\n    print(dog.x, dog.y);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-leaks", "return-value"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465411436, "post_id": 37710428, "comment_id": 62894853, "body": "isn&#39;t valgrind suppose to check for dynamic memory issues?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465483205, "post_id": 37710428, "comment_id": 62929413, "body": "The call, in main(), to printf() is already overlaying some of the stack used by the array <code>v[]</code> in function: <code>fun()</code>.  Therefore, IF the values being printed are correct, it is only due to blind luck.  suggest adding more parameters to the call to <code>printf()</code> so more of the stack is modified then you should clearly see the result of the undefined behaviour."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465483448, "post_id": 37710428, "comment_id": 62929599, "body": "When compiling, always enable all the warnings, then the compiler would have output a warning: <code>comparison between signed and unsigned integer expressions</code>  for this line: <code>for(size_t i = 0; i &lt; v1Size; ++i)</code>.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>   I also use: <code>-Wconversion -std=gnu99</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465483761, "post_id": 37710428, "comment_id": 62929840, "body": "when I run the posted code on my computer (x64 with linux 14.04) this is the output: <code>7 9 -1099664112 32638 0 </code>  which is definitely not correct.   The incorrect values are due to the undefined behaviour resulting from returning a pointer to an array that is on the stack of the called function"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1465411789, "last_edit_date": 1465411789, "creation_date": 1465411573, "answer_id": 37710513, "question_id": 37710428, "link": "https://stackoverflow.com/questions/37710428/is-this-program-correct/37710513#37710513", "title": "Is this program correct?", "body": "<blockquote>\n  <p><em>works just fine</em></p>\n</blockquote>\n\n<p>Stop !! it's one of the possible outcome of invoking <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>As you correctly mentioned, the returned pointer won't be valid (<em>VLAs reside in auto scope (stack), in general, as in <code>gcc</code></em>) after returning from <code>fun()</code>. Using the return value will lead to UB.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1465412398, "creation_date": 1465412398, "answer_id": 37710778, "question_id": 37710428, "link": "https://stackoverflow.com/questions/37710428/is-this-program-correct/37710778#37710778", "title": "Is this program correct?", "body": "<p>Returning the address of a local variable is not \"fine\".  Once the function exits, <code>v</code> no longer exists, so any pointer to it is no longer valid.  Obviously, the storage that <code>v</code> occupied still exists, and as long as nothing else overwrites that storage, your code will <em>appear</em> to function correctly.  </p>\n\n<p>Note the emphasis on <em>appear</em>.  Your code could just as easily crash, or give garbled output, or otherwise be put into a bad state.  It depends on how you use that returned pointer value.  </p>\n\n<p><code>v</code> has <code>auto</code> storage duration, meaning storage for it is allocated at function entry and released at function exit.  Valgrind isn't going to say boo about it, because it's not the kind of thing Valgrind checks.  </p>\n"}], "owner": {"reputation": 338, "user_id": 6441900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d7b26a1cbda97b6cf4d44bdcfa3548d?s=128&d=identicon&r=PG&f=1", "display_name": "SantaXL", "link": "https://stackoverflow.com/users/6441900/santaxl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 37710513, "answer_count": 2, "score": 0, "last_activity_date": 1465413081, "creation_date": 1465411332, "last_edit_date": 1465413081, "question_id": 37710428, "link": "https://stackoverflow.com/questions/37710428/is-this-program-correct", "title": "Is this program correct?", "body": "<p>Can someone tell me, if function fun() is correct?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint *fun(int *, int *, int, int);\nint main(void) {\nint v1[] = {1,2,3,4,5};\n    int v2[] = {6,7,8,9,10};\n    int v1Size = sizeof(v1)/sizeof(v1[0]);\n    int v2Size = sizeof(v2)/sizeof(v2[0]);\n    int *v = fun(v1, v2, v1Size, v2Size);\n    if(v == NULL)\n        exit(EXIT_FAILURE);\n    for(size_t i = 0; i &lt; v1Size; ++i)\n        printf(\"%d \", v[i]);\n\n}\n\nint *fun(int *v1, int *v2, int v1Size, int v2Size){\n    if(v1Size!=v2Size)\n        return NULL;\n    const int size = v1Size;\n    int v[size];\n    for(int i=0; i&lt;size; i++)\n        v[i]=v1[i]+v2[i];\n\n    int *p = v;\n    return p;\n}\n</code></pre>\n\n<p>For me, it returns the pointer that points memory that will be freed after leaving the fuction body. But valgrind doesn't show any error and it works just fine. </p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1465411461, "post_id": 37710305, "comment_id": 62894863, "body": "I think you should self answer your question, so if someone finds your question in the future, ho would also find the answer (and maybe you would earn some rep :-) )"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1465411483, "post_id": 37710305, "comment_id": 62894880, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9937645/obtain-filename-from-file-pointer-in-c\">Obtain filename from file pointer in C</a>"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1465411608, "post_id": 37710305, "comment_id": 62894947, "body": "@ebyrob not quite, because while in the general case it&#39;s not possible (in a portable way at least), in the special case of using <code>mkstmp()</code> it&#39;s easy"}, {"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1465482678, "post_id": 37710305, "comment_id": 62929022, "body": "@IngoLeonhardt Yep, did that."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1465489272, "post_id": 37710305, "comment_id": 62933863, "body": "No, <code>mkstemp</code> (not <code>mkstmp</code>) returns an <code>int</code>. I don&#39;t know of <i>any</i> library function that returns a <code>FILE</code>."}, {"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1465492696, "post_id": 37710305, "comment_id": 62935876, "body": "@KeithThompson from the mkstemp man page: &quot;On  success,  these  functions return the file descriptor of the temporary file.  On error, -1 is returned, and errno is set appropriately.&quot;"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1465493739, "post_id": 37710305, "comment_id": 62936525, "body": "@Blacksilver File descriptors are integers. Read <code>man 2 open</code>, <code>man 2 write</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1465494973, "post_id": 37710305, "comment_id": 62937282, "body": "@Blacksilver: And if you need a <code>FILE*</code>, you can pass the file descriptor to <code>fdopen</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13306, "user_id": 162698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HnjBG.png?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/162698/rob"}, "edited": false, "score": 0, "creation_date": 1465482857, "post_id": 37728819, "comment_id": 62929149, "body": "You should place your answer here and accept that. Do not place the answer in your question."}, {"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "reply_to_user": {"reputation": 13306, "user_id": 162698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HnjBG.png?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/162698/rob"}, "edited": false, "score": 0, "creation_date": 1465487672, "post_id": 37728819, "comment_id": 62932835, "body": "@rob This is here for the benefit of people who scroll right past the question."}], "tags": [], "owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "is_accepted": true, "score": 1, "last_activity_date": 1495215029, "last_edit_date": 1495215029, "creation_date": 1465482610, "answer_id": 37728819, "question_id": 37710305, "link": "https://stackoverflow.com/questions/37710305/get-file-name-from-file-returned-from-mkstemp/37728819#37728819", "title": "Get file name from FILE * returned from mkstemp", "body": "<p><code>template</code> will have been changed to the file's name. So:</p>\n\n<pre><code>sprintf(tmp,\"less %s\",template)\nsystem(tmp);\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "accepted_answer_id": 37728819, "answer_count": 1, "score": 0, "last_activity_date": 1495215252, "creation_date": 1465410904, "last_edit_date": 1495215252, "question_id": 37710305, "link": "https://stackoverflow.com/questions/37710305/get-file-name-from-file-returned-from-mkstemp", "title": "Get file name from FILE * returned from mkstemp", "body": "<p>I have some code that looks like this:</p>\n\n<pre><code>char template[] = \"temp-XXXXXX\";\nFILE * f = mkstmp(template);\n\n/* ... some stuff is written to f with fprintf ...*/\n\nchar fname[15] = xyzzy(f); // &lt;-- Problem\n\nchar tmp[20];\nsprintf(tmp,\"less %s\", fname);\nsystem(tmp);\n</code></pre>\n\n<p>I need to find out the name given to <code>f</code> by <code>mkstmp</code> so I can call <code>less</code> on it.</p>\n"}, {"tags": ["c", "compiler-errors", "linker", "iar"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6441884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154829441733368/picture?type=large", "display_name": "Muhammed S. ELtahan", "link": "https://stackoverflow.com/users/6441884/muhammed-s-eltahan"}, "edited": false, "score": 0, "creation_date": 1465410682, "post_id": 37710127, "comment_id": 62894425, "body": "I am using IAR compiler and linker"}, {"owner": {"reputation": 1, "user_id": 6441884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154829441733368/picture?type=large", "display_name": "Muhammed S. ELtahan", "link": "https://stackoverflow.com/users/6441884/muhammed-s-eltahan"}, "edited": false, "score": 0, "creation_date": 1465410826, "post_id": 37710127, "comment_id": 62894516, "body": "-f &quot;${workspace_loc:/${ProjName}/Path for the linker file}&quot; -cM16C -J2,sum,1,,,1,,1=_APPL_CK_ROM_BEGIN-_APPL_CK_ROM_END;_APPLH_&zwnj;&#8203;CK_ROM_BEGIN-_APPLH_&zwnj;&#8203;CK_ROM_END -HFFFF -l $(basename $@).map -xeimnso -rt -Oieee695,lbm=$(basename $@).695 -Oelf,spc=$(basename $@).elf  ========================================================   -cM16C -HFFFF -xeimnso -J2,sum,1,,,1,,1=_APPL_CK_ROM_BEGIN-_APPL_CK_ROM_END;_APPLH_&zwnj;&#8203;CK_ROM_BEGIN-_APPLH_&zwnj;&#8203;CK_ROM_END -rt -l $(OUTFILE).map  -I.\\$(OBJDIR) -I.\\$(LNKDIR) \\ \t-Omotorola-s28=$(OUTFILE).s28 \\ \t-Oieee695,lbm=$(OUTFILE).695 \\ \t-Oelf,spc=$(OUTFILE).elf"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 1, "user_id": 6441884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154829441733368/picture?type=large", "display_name": "Muhammed S. ELtahan", "link": "https://stackoverflow.com/users/6441884/muhammed-s-eltahan"}, "edited": false, "score": 0, "creation_date": 1465457422, "post_id": 37710127, "comment_id": 62911417, "body": "@MuhammedS.ELtahan Please don&#39;t dump that much data on comments, it is unreadable. Edit your question and include all necessary information there."}], "tags": [], "owner": {"reputation": 3268, "user_id": 182634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d5b602ab0bc363e3e990f2e904b671d?s=128&d=identicon&r=PG", "display_name": "eyalm", "link": "https://stackoverflow.com/users/182634/eyalm"}, "is_accepted": false, "score": 0, "last_activity_date": 1465410266, "creation_date": 1465410266, "answer_id": 37710127, "question_id": 37710025, "link": "https://stackoverflow.com/questions/37710025/does-the-order-of-options-for-linker-make-difference-in-the-map-file-or-not/37710127#37710127", "title": "Does the order of options for linker make difference in the .map file or not?", "body": "<p>I am not sure which compiler and linker are you using. I assume it is gcc.</p>\n\n<p>The order of different, unrelated, options will probably make no change to the object or any other output. but if there is any dependency between the options, the order might change the context.</p>\n\n<p>from <code>man ld</code>: Some of the command-line options to ld may be specified at any point in the command line. However, options which refer to files, such as -l or -T, cause the file to be read at the point at which the option appears in the command line, relative to the object files and other file options. <strong>Repeating non-file options with a different argument will either have no further effect, or override prior occurrences</strong> (those further to the left on the command line) of that option. Options which may be meaningfully specified more than once are noted in the descriptions below.</p>\n"}], "owner": {"reputation": 1, "user_id": 6441884, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154829441733368/picture?type=large", "display_name": "Muhammed S. ELtahan", "link": "https://stackoverflow.com/users/6441884/muhammed-s-eltahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465410266, "creation_date": 1465409977, "question_id": 37710025, "link": "https://stackoverflow.com/questions/37710025/does-the-order-of-options-for-linker-make-difference-in-the-map-file-or-not", "title": "Does the order of options for linker make difference in the .map file or not?", "body": "<p>Does the order of options for linker make difference in the .map file or not ?</p>\n\n<p>I have software and I compiled it with options for linker and I built code </p>\n\n<p>then I changed the order of the option for the linker and make build a gain for the code </p>\n\n<p>but in the two cases the generated .map file are the different but has the same size  </p>\n\n<p>why ????</p>\n"}, {"tags": ["c", "file", "floating-point", "numbers"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465410094, "post_id": 37709983, "comment_id": 62894064, "body": "you should check fp <code>if (fp==NULL){ &#47;* error *&#47; }</code>"}, {"owner": {"reputation": 21, "user_id": 5854255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d9cd138f526f8d063bbdfb7d806b85?s=128&d=identicon&r=PG&f=1", "display_name": "Al.Ka", "link": "https://stackoverflow.com/users/5854255/al-ka"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465410125, "post_id": 37709983, "comment_id": 62894081, "body": "@Michi I always do that but it is not my problem now"}, {"owner": {"reputation": 695, "user_id": 3911459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpRO3.jpg?s=128&g=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3911459/tyler"}, "edited": false, "score": 3, "creation_date": 1465410134, "post_id": 37709983, "comment_id": 62894088, "body": "Can you give a better example? Example input and output?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 695, "user_id": 3911459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpRO3.jpg?s=128&g=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3911459/tyler"}, "edited": false, "score": 0, "creation_date": 1465410176, "post_id": 37709983, "comment_id": 62894112, "body": "Then show us a possible content of that file and an input/output like @Tyler said"}, {"owner": {"reputation": 21, "user_id": 5854255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d9cd138f526f8d063bbdfb7d806b85?s=128&d=identicon&r=PG&f=1", "display_name": "Al.Ka", "link": "https://stackoverflow.com/users/5854255/al-ka"}, "edited": false, "score": 0, "creation_date": 1465410269, "post_id": 37709983, "comment_id": 62894161, "body": "I updated the question"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1465410778, "post_id": 37709983, "comment_id": 62894483, "body": "Read one character at a time with <code>fgetc</code>. There are five possibilities: digit, dot, space, newline, or other."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "reply_to_user": {"reputation": 695, "user_id": 3911459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpRO3.jpg?s=128&g=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3911459/tyler"}, "edited": false, "score": 1, "creation_date": 1465410821, "post_id": 37709983, "comment_id": 62894511, "body": "From @Tyler&#39;s comment, emphasis on <b>output</b> (and possibly something about how your recursive function works as it seems to not work on all floats)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465455783, "post_id": 37709983, "comment_id": 62910503, "body": "why make things complicated.  Have float variable <code>maxDigits</code> set it to <code>0.0f</code> read each successive number, into a temporary float value.  Compare the just read (temporary) float value with the value in <code>maxDigits</code>  if maxDigits is less than temporary float value, then assign maxDigits = temporary&#39;.   Loop until EOF encountered."}], "answers": [{"tags": [], "owner": {"reputation": 496, "user_id": 3089077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/scX0w.jpg?s=128&g=1", "display_name": "Daniel Azamar", "link": "https://stackoverflow.com/users/3089077/daniel-azamar"}, "is_accepted": false, "score": 0, "last_activity_date": 1465410175, "last_edit_date": 1495535335, "creation_date": 1465410175, "answer_id": 37710098, "question_id": 37709983, "link": "https://stackoverflow.com/questions/37709983/find-the-number-with-maximum-digits-in-it/37710098#37710098", "title": "Find the number with maximum digits in it", "body": "<p>First you have to use the \"split\" function.</p>\n\n<p>Seems like here is something for you\n<a href=\"https://stackoverflow.com/questions/9210528/split-string-with-delimiters-in-c\">enter link description here</a></p>\n"}, {"comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1465410984, "post_id": 37710297, "comment_id": 62894608, "body": "It should ignore decimals."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465411290, "post_id": 37710297, "comment_id": 62894775, "body": "<code>int i</code> should be <code>size_t i</code> because of the return type of <code>strlen</code>, but even if you fix it you still have comparison problem with maxdigits which is an int"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465411329, "post_id": 37710297, "comment_id": 62894798, "body": "and <code>maxdigits</code> too ...followed up with <code>%zu</code> format specifier."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465411377, "post_id": 37710297, "comment_id": 62894822, "body": "by the way, when you fix that...you end with a segfault"}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1465411553, "post_id": 37710297, "comment_id": 62894921, "body": "I appreciate the various tweaks -- but I really was hoping to &quot;lead&quot; the OP to finished product -- NOT create it myself. The version above compiles &amp; works on his sample input set using <code>gcc 4.4.7</code>. Enhancements should be up to OP."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465411667, "post_id": 37710297, "comment_id": 62894983, "body": "I meant this part <a href=\"http://pastebin.com/raw/4N0aEn9z\" rel=\"nofollow noreferrer\">CLICK</a> where the check of *fp is not present."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1465412095, "post_id": 37710297, "comment_id": 62895256, "body": "Did you create &#39;text.txt&#39; before running valgrind? Program has no error checking (so OP can focus on the core of the program).  Obviously production code would need to check <code>fopen</code> succeeded AND make sure <code>fscanf</code> did not exceed size of <code>buf</code>. Also, program does not explicitly close <code>fp</code>.  All exercises for OP."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465412279, "post_id": 37710297, "comment_id": 62895365, "body": "@user590028 You are missing the whole point here, and yes I used <a href=\"http://ideone.com/N7bS6j\" rel=\"nofollow noreferrer\">This</a> and valgrind says <a href=\"http://pastebin.com/raw/KiPXE0N0\" rel=\"nofollow noreferrer\">This</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465412695, "post_id": 37710297, "comment_id": 62895586, "body": "@Michi well what <i>is</i> your point? Tell us the error in your own linked code for heaven sake. Apart from not initialising <code>winner</code>."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1465412706, "post_id": 37710297, "comment_id": 62895595, "body": "I think valgrind is warning you about memory leak no? That would likely be because <code>fp</code> was not closed."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1465412994, "post_id": 37710297, "comment_id": 62895773, "body": "I surrender -- all fixes applied."}, {"owner": {"reputation": 21, "user_id": 5854255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d9cd138f526f8d063bbdfb7d806b85?s=128&d=identicon&r=PG&f=1", "display_name": "Al.Ka", "link": "https://stackoverflow.com/users/5854255/al-ka"}, "edited": false, "score": 0, "creation_date": 1465415021, "post_id": 37710297, "comment_id": 62896814, "body": "@user590028 Thanks man! Only the idea of treating the input as a string would be fine, but you even provided the code."}], "tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": true, "score": 2, "last_activity_date": 1465412861, "last_edit_date": 1465412861, "creation_date": 1465410882, "answer_id": 37710297, "question_id": 37709983, "link": "https://stackoverflow.com/questions/37709983/find-the-number-with-maximum-digits-in-it/37710297#37710297", "title": "Find the number with maximum digits in it", "body": "<p>If you treat the input as a simple string, you should be able to just <code>strlen()</code>, no?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main() {\n    size_t maxdigits = 0, i;\n    char buf[128], winner[128];\n    char winner[128];\n    FILE* fp = fopen(\"text.txt\", \"r\");\n    if (fp == NULL) {\n       printf(\"missing text.txt\\n\");\n       return -1;\n       }\n    memset(winner, 0, sizeof(winner));\n    while(fscanf(fp, \"%s\", buf) == 1) {\n        i = strlen(buf);\n        if (strchr(buf, '.') != NULL)\n            i--;\n        if (i &gt; maxdigits) {\n            maxdigits = i;\n            strcpy(winner, buf);\n            }\n        }\n    fclose(fp);\n    printf(\"winner '%s' has %d digits\\n\", winner, maxdigits);\n    return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5854255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d9cd138f526f8d063bbdfb7d806b85?s=128&d=identicon&r=PG&f=1", "display_name": "Al.Ka", "link": "https://stackoverflow.com/users/5854255/al-ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 37710297, "answer_count": 2, "score": 0, "last_activity_date": 1465413867, "creation_date": 1465409807, "last_edit_date": 1465410510, "question_id": 37709983, "link": "https://stackoverflow.com/questions/37709983/find-the-number-with-maximum-digits-in-it", "title": "Find the number with maximum digits in it", "body": "<p>This was an exam question a few years ago, and I am struggling to solve it.</p>\n\n<p>I have to build a program that reads from a text file a set of number, with a space in between, that could either be integers or floats. Then it prints the number with  the maximum number of digits in it using a recursive function.</p>\n\n<p>I don't know how to read the numbers from the file. If I read them all like floats they end up with the same amount of digits. Here's my code until know, but I don't know how to proceed. \nFor example:</p>\n\n<p><em>In the text file we have the numbers:</em> <strong>1  2  1.5  1.456  2  2.78  7</strong></p>\n\n<p><em>The number with the maximum number of digits is</em> <strong>1.456</strong> <em>with</em> <strong>4</strong> <em>digits in it.</em></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main()\n{\n    int n,i,nr=0;\n    float v[100];\n    FILE *fp;\n    fp = fopen(\"text.txt\",\"r\");\n    while(fscanf(fp,\"%f\",&amp;v[nr])==1){\n        nr++;\n    }\n    fclose(fp);\n\n\n\n    return 0;   \n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "scanf"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1465455419, "post_id": 37709822, "comment_id": 62910285, "body": "when calling the <code>scanf()</code> family of functions, always check the returned value (not the parameter value) to assure the operation was successful.  When using the &#39;%s&#39; input/conversion specifier, always use a &#39;max length&#39; modifier that is one less than the length of the input buffer, so the user cannot overrun the input buffer.  Remember that each of these inputs was trailed with a newline char sequence. the &#39;%s&#39; is problematic about handling white space.  and the &#39;%c&quot; will input the newline from the prior entry,  each of these can be fixed by using a leading space in the format string."}], "answers": [{"comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465409708, "post_id": 37709865, "comment_id": 62893853, "body": "for example declare it like <code>char name[100];</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465409831, "post_id": 37709865, "comment_id": 62893938, "body": "@infixed that way, <code>name</code> won&#39;t be a pointer anymore, but you&#39;re correct, too."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465410146, "post_id": 37709865, "comment_id": 62894095, "body": "I usually lexically consider bare <code>name</code> to be the same as <code>&amp;name[0]</code>, and therefor remains a pointer.  Certainly it is not a pointer <i>variable</i> anymore.  You can&#39;t rebase it by using it as a lvalue.  But still a pointer you can use as an rvalue."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465416830, "post_id": 37709865, "comment_id": 62897869, "body": "@infixed  when <code>name</code> is an array like <code>char name[100]</code>, a weakness to &quot;consider bare <code>name</code> to be the same as <code>&amp;name[0]</code>&quot; occurs with <code>sizeof()</code> as <code>sizeof name != &amp;name[0]</code>."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465421655, "post_id": 37709865, "comment_id": 62900227, "body": "@chux While that&#39;s true, <code>sizeof</code> isn&#39;t evaluating it as a plain rvalue, its using special behavior defined for arrays.    for instance <code>sizeof (name)</code> evaluates as 100. because sizeof treats name as an array type.  but <code>sizeof (name+0)</code> evaluates as 4, because <code>sizeof</code> then treats it as a pointer expression.  (for the particular compiler I tried it on. YMMV)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1465423094, "post_id": 37709865, "comment_id": 62900874, "body": "@infixed Hmmm  interesting. I see it the other way around: <code>sizeof name</code> is not special, it is simply the operator acting on the object, which happens to be an array.  <code>name+0</code> is special behavior for arrays as that converts the array to the address of the first element of the array and adds 0. Thanks for your idea."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465423507, "post_id": 37709865, "comment_id": 62901046, "body": "@chux.  I suppose if I was playing spec-lawyer, I&#39;d appeal to &#39; 6.2.2.1 Lvalues and function designators  Except when it is the operand of the sizeof operator or the unary &amp; operator, or is a character string literal used to initialize an array of character type, or is a wide string literal used to initialize an array with element type compatible with wchar_t, an lvalue that has type &quot;array of type&#39;&#39; is converted to an expression that has type &quot;pointer to type&#39;&#39; that points to the initial element of the array and is not an lvalue. &#39;"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1465409388, "creation_date": 1465409388, "answer_id": 37709865, "question_id": 37709822, "link": "https://stackoverflow.com/questions/37709822/c-the-scanf-function-is-not-working-as-it-should/37709865#37709865", "title": "C: The scanf() function is not working as it should", "body": "<p>At the point of</p>\n\n<pre><code> scanf(\" %s\", name);\n</code></pre>\n\n<p><code>name</code> is NULL (i.e., it points to <em>invalid memory location</em>), and using that as the argument to <code>%s</code> invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>You need to allocate memory to <code>name</code> before you can use that to hold the input.</p>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 2945940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbd95bb0d1468cd30e4f0edc1c47790?s=128&d=identicon&r=PG&f=1", "display_name": "Kaizhe Huang", "link": "https://stackoverflow.com/users/2945940/kaizhe-huang"}, "is_accepted": false, "score": 0, "last_activity_date": 1465409552, "creation_date": 1465409552, "answer_id": 37709914, "question_id": 37709822, "link": "https://stackoverflow.com/questions/37709822/c-the-scanf-function-is-not-working-as-it-should/37709914#37709914", "title": "C: The scanf() function is not working as it should", "body": "<p>Here is the problem: </p>\n\n<pre><code>char* name = NULL;\n</code></pre>\n\n<p>You need to assign some memory to the pointer before writing any data. You can either assign some space statically or dynamically:</p>\n\n<pre><code>char name[10];\nchar *name2;\nname2 = malloc(10*sizeof(char));\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6441794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa75c94c3e898234c1f1f2424dfebb2?s=128&d=identicon&r=PG&f=1", "display_name": "M.Alex", "link": "https://stackoverflow.com/users/6441794/m-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 37709865, "answer_count": 2, "score": 0, "last_activity_date": 1465409671, "creation_date": 1465409259, "last_edit_date": 1465409671, "question_id": 37709822, "link": "https://stackoverflow.com/questions/37709822/c-the-scanf-function-is-not-working-as-it-should", "title": "C: The scanf() function is not working as it should", "body": "<p>I am having trouble with the <code>scanf()</code> function. When I compile and run this code </p>\n\n<pre><code>        int ID;\n        char* name = NULL;\n        char sex;\n        float quiz1;\n        float quiz2;\n        float midscore;\n        float finalscore;\n        float totalscore;\n\n        printf(\"please enter the student information.\\n\");\n        printf(\"ID: \");\n        scanf(\"%i\", &amp;ID);\n        printf(\"Name: \");\n        scanf(\" %s\", name);\n        printf(\"Sex: \");\n        scanf(\" %c\", &amp;sex);\n        printf(\"Quiz mark(first semester): \");\n        scanf(\" %f\", &amp;quiz1);\n        printf(\"Quiz mark(second semester): \");\n        scanf(\" %f\", &amp;quiz2);\n        printf(\"Mid-term score: \");\n        scanf(\" %f\", &amp;midscore);\n        printf(\"Final score: \");\n        scanf(\" %f\", &amp;finalscore);\n        printf(\"Total score: \");\n        scanf(\" %f\", &amp;totalscore);\n</code></pre>\n\n<p>What I get is :</p>\n\n<blockquote>\n  <p>ID: 5<br>\n  Name: alex<br>\n  Sex: Quiz mark(first semester): Quiz mark(second semester): Mid-term score: Final score: Total score:</p>\n</blockquote>\n\n<p>Can someone explain me what's going on?</p>\n"}, {"tags": ["c", "pointers", "recursion", "linked-list", "bag"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1465409017, "post_id": 37709566, "comment_id": 62893431, "body": "Linked lists are not a good container for recursive algorithms. Better use an iterative approach to avoid stack overflow."}, {"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1465409086, "post_id": 37709566, "comment_id": 62893467, "body": "you must iterate to an item that you want to delete."}, {"owner": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465409599, "post_id": 37709566, "comment_id": 62893782, "body": "@Olaf this is my task i need to do this algorithm in a recursive way"}, {"owner": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "reply_to_user": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 0, "creation_date": 1465409668, "post_id": 37709566, "comment_id": 62893820, "body": "@MohammadrezaPanahi how can i do it ?"}, {"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1465409802, "post_id": 37709566, "comment_id": 62893922, "body": "When you find the end, you&#39;ve completed your deletion -- don&#39;t print &quot;Not found&quot;"}, {"owner": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "reply_to_user": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 0, "creation_date": 1465410105, "post_id": 37709566, "comment_id": 62894069, "body": "@mpez0 it is flag for me when i tried to fix the code..."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1465410939, "post_id": 37709566, "comment_id": 62894579, "body": "i dont see you re-linking the list after freeing a node"}, {"owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "edited": false, "score": 1, "creation_date": 1465410961, "post_id": 37709566, "comment_id": 62894592, "body": "For a recursive algorithm, think &quot;what do I do for a single instance?&quot; Here, if it&#39;s a delete number, delete the node (link the next node to the previous node) and do the next node recursively. If it&#39;s not a delete number, do the next node recursively. If there is no next node, you&#39;re done. Take that, and code it. Yes, it is good to start with the end condition check."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "edited": false, "score": 0, "creation_date": 1465420143, "post_id": 37711470, "comment_id": 62899538, "body": "yes it is... done =) but 1 more little thing why yo did point-&gt;pNext=(to the recursion)?"}, {"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "reply_to_user": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "edited": false, "score": 0, "creation_date": 1465430374, "post_id": 37711470, "comment_id": 62903239, "body": "In the case where the next node is deleted, pNext needs to be adjusted accordingly"}], "tags": [], "owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "is_accepted": true, "score": 0, "last_activity_date": 1465414700, "creation_date": 1465414700, "answer_id": 37711470, "question_id": 37709566, "link": "https://stackoverflow.com/questions/37709566/delete-certain-number-from-linked-list-recursive/37711470#37711470", "title": "delete Certain number from linked list (recursive)", "body": "<pre><code>struct num* deleteCell(struct num* point, int numdelete) {\n  if (point == NULL) {\n     return NULL;\n  }\n\n  if (point-&gt;number == numdelete) { \n    num* tempdelete = point-&gt;pNext;\n    free(point);\n    return deleteCell(tempdelete, numdelete);\n  }\n\n  point-&gt;pNext = deleteCell(point-&gt;pNext, numdelete);\n  return point;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6304938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b9b7c5405b386481431ca220fa519e?s=128&d=identicon&r=PG&f=1", "display_name": "alon", "link": "https://stackoverflow.com/users/6304938/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 37711470, "answer_count": 1, "score": 0, "last_activity_date": 1465414700, "creation_date": 1465408354, "question_id": 37709566, "link": "https://stackoverflow.com/questions/37709566/delete-certain-number-from-linked-list-recursive", "title": "delete Certain number from linked list (recursive)", "body": "<p>hello everyone i'm trying to create a function that delete a Certain number\nfrom all the cells in the linked list that have this number but my deleting function only deleting the first cell that he arrive to the end and then returning to the main\nthis is my code:</p>\n\n<pre><code>struct num* deleteCell(struct num* point, int numdelete)\n{\n    struct num* tempdelete = point;\n    if (point == NULL)  // found the tail and dont found any match to delete\n    {\n        printf(\"not found\\n\");\n        return NULL;\n    }\n    else if (point-&gt;number == numdelete)// found one to delete\n    { \n        tempdelete = point-&gt;pNext;\n        free(point);\n    }\n    else// Just keep going \n    { \n        point-&gt;pNext = deleteCell(point-&gt;pNext, numdelete);\n    }\n    return tempdelete;\n}\n</code></pre>\n\n<p>(point is the pointer to the first cell ,numdelete is the number that i want to delete )\nthanks for helpers!!!!</p>\n\n<p>alon</p>\n"}, {"tags": ["c", "linear-algebra", "gsl"], "comments": [{"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1465412076, "post_id": 37709438, "comment_id": 62895246, "body": "you probably will want to take a look at <a href=\"https://fossies.org/dox/gsl-2.1/structgsl__matrix__complex.html\" rel=\"nofollow noreferrer\">gsl_matrix_complex</a>"}, {"owner": {"reputation": 11, "user_id": 6441703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ePky5iT41gM/AAAAAAAAAAI/AAAAAAAAAHY/HLZqFCRcBLs/photo.jpg?sz=128", "display_name": "Daniel M", "link": "https://stackoverflow.com/users/6441703/daniel-m"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1466104910, "post_id": 37709438, "comment_id": 63192231, "body": "Oh, okay. That&#39;s actually pretty simple. It&#39;s odd that they don&#39;t mention gsl_matrix_complex in the documentation, except as arguments to other functions."}], "owner": {"reputation": 11, "user_id": 6441703, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ePky5iT41gM/AAAAAAAAAAI/AAAAAAAAAHY/HLZqFCRcBLs/photo.jpg?sz=128", "display_name": "Daniel M", "link": "https://stackoverflow.com/users/6441703/daniel-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465411642, "creation_date": 1465407991, "last_edit_date": 1465411642, "question_id": 37709438, "link": "https://stackoverflow.com/questions/37709438/assigning-complex-values-to-gsl-matrix", "title": "Assigning complex values to gsl matrix", "body": "<p>I am trying to write a simple program to diagonalize a complex (hermitian) Hamiltonian matrix, using the GNU Scientific Library. I have scoured the documentation and the internet, but I simply cannot find the procedure to assign complex values to a gsl_matrix.</p>\n\n<p>Would it be something as simple as this:</p>\n\n<pre><code>gsl_complex Hij = gsl_complex_rect(double x, double y)\n\ngsl_matrix_set(H, i, j, Hij)\n</code></pre>\n\n<p>This assumes that gsl_matrix_set detects complex numbers (versus real numbers) and automatically handles the memory allocation.</p>\n\n<p>Or, would it be something like this:</p>\n\n<pre><code>gsl_matrix_set(H, i, j, x)\ngsl_matrix_set(H, i, j+1, y)\n</code></pre>\n\n<p>assuming that complex numbers are stored as pair of numbers in memory, as is the convention elsewhere. But, then how would the eigensystem routines be able to make the distinction? I am really lost on this simple thing.</p>\n\n<p>How do you assign complex numbers to a gsl_matrix?</p>\n"}, {"tags": ["c++", "c", "file", "std"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1465407978, "post_id": 37709395, "comment_id": 62892786, "body": "Try opening the file for reading to check if it already exists."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465408016, "post_id": 37709395, "comment_id": 62892814, "body": "@Olaf That&#39;s too much nit-picking"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1465408094, "post_id": 37709395, "comment_id": 62892852, "body": "@DieterL&#252;cking: No! The typical functions for opening and handling a file differ in both languages. Worse, as OP does not show any code how exactly she opens the file. Both languages have very different standard libraries."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1465408191, "post_id": 37709395, "comment_id": 62892928, "body": "There is no &quot;atomic&quot; file access whatsoever in C/C++. You have to solve it on OS-level."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1465408564, "post_id": 37709395, "comment_id": 62893144, "body": "... <code>tmpfile</code> might be an exemption."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1465412836, "post_id": 37709395, "comment_id": 62895685, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 : You did not read the full post! Someone could create the file between the check and the open for writing"}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1465412930, "post_id": 37709395, "comment_id": 62895742, "body": "@DieterL&#252;cking : what I mean by &quot;atomic&quot; is that if you open the file for reading in order to check if it exists, then close it, then open the file for writing, something may have happened inbetween, such as a file creation"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1465413163, "post_id": 37709395, "comment_id": 62895851, "body": "@galinette You stole the quote &quot;atomic&quot; in your edit of the question."}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1465413468, "post_id": 37709395, "comment_id": 62896017, "body": "@DieterL&#252;cking : yes, because your comment convinced me that the word &quot;atomic&quot; was misleading and unnecessary"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1465412926, "last_edit_date": 1495541875, "creation_date": 1465412926, "answer_id": 37710921, "question_id": 37709395, "link": "https://stackoverflow.com/questions/37709395/c-open-file-for-writing-only-if-does-not-exists/37710921#37710921", "title": "C++ open file for writing only if does not exists", "body": "<p>In <code>std::ofstream</code> by itself, no.  Opening a file for writing always creates a new file if it does not already exist.  There is no option to change that behavior.  Opening a file for reading fails if the file does not exist.</p>\n\n<p>However, on Windows at least, the Win32 API <code>CreateFile()</code> function has a <code>CREATE_NEW</code> flag that fails to open the file if it already exists. On other platforms, there may be flags available for <code>_fsopen()</code> and <code>fopen()</code> do accomplish the same thing.</p>\n\n<p>It is possible to attach a <code>FILE*</code> to a <code>std::ofstream</code> (or maybe this is just a Microsoft extension, I am not sure), and in Visual C++ a <code>FILE*</code> can be created for a <code>HANDLE</code> returned by <code>CreateFile()</code> by using <code>_open_osfhandle()</code> with <code>_fdopen()</code>. See this question for examples:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/475853/\">Can I use CreateFile, but force the handle into a std::ofstream?</a></p>\n\n<p>Other compilers/platforms may provide similar extensions for initializing an <code>std::ofstream</code>, you will have to look around.</p>\n"}, {"comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 1, "creation_date": 1465413598, "post_id": 37711075, "comment_id": 62896087, "body": "Thanks! It&#39;s a pity that no equivalent was added to ofstream, but at least I have a standard way"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 2, "creation_date": 1494606121, "post_id": 37711075, "comment_id": 74917135, "body": "This is misleading. The question is about C++, and this access mode is only available in C11."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1494621568, "post_id": 37711075, "comment_id": 74925070, "body": "@Ruslan - read this part: &quot;or with the C functions (FILE* functions)&quot;. I added missing [c] tag"}, {"owner": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1494621740, "post_id": 37711075, "comment_id": 74925151, "body": "I was supposing that by the C functions the OP meant the C compatibility in C++ (like <code>&lt;cstdio&gt;</code> header and the like), not separate C language functions. But your view is also valid indeed. If you edit your answer to mention that this mode isn&#39;t available until C++17 (where C11 is referenced instead of C99), I&#39;ll be able to remove the downvote."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 14968, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1494680340, "post_id": 37711075, "comment_id": 74938209, "body": "@Ruslan - fill free to edit &quot;my&quot; answer. All posts in SO are owned by SO community. If you think that this is necessary then why not - however I am not 100% convinced - for me your valuable comments under the answer are enough information for those who love such details."}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": false, "score": 8, "last_activity_date": 1494682994, "last_edit_date": 1494682994, "creation_date": 1465413469, "answer_id": 37711075, "question_id": 37709395, "link": "https://stackoverflow.com/questions/37709395/c-open-file-for-writing-only-if-does-not-exists/37711075#37711075", "title": "C++ open file for writing only if does not exists", "body": "<p>Since C11 (and thus also in C++17), for <code>fopen</code> you can use mode <code>\"x\"</code> \u2014 exclusive mode, see <a href=\"http://en.cppreference.com/w/c/io/fopen\" rel=\"noreferrer\">this</a>:</p>\n\n<blockquote>\n  <p>File access mode flag \"x\" can optionally be appended to \"w\" or \"w+\"\n  specifiers. This flag forces the function to fail if the file exists,\n  instead of overwriting it.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1498, "user_id": 1453047, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ddb4b9f2e53d262a99736ff10a0049a0?s=128&d=identicon&r=PG", "display_name": "Borislav Stanimirov", "link": "https://stackoverflow.com/users/1453047/borislav-stanimirov"}, "is_accepted": false, "score": 2, "last_activity_date": 1604057970, "creation_date": 1604057970, "answer_id": 64607662, "question_id": 37709395, "link": "https://stackoverflow.com/questions/37709395/c-open-file-for-writing-only-if-does-not-exists/64607662#64607662", "title": "C++ open file for writing only if does not exists", "body": "<p>There are no <code>fstream</code> ways of doing this, but <code>std::fopen</code> is as much C++ as <code>std::sin</code>.</p>\n<p>If you absolutely must have an <code>fstream</code> object of this file and you need the atomic check, you should first call <code>fopen</code> then on success, <code>fclose</code> and <code>fstream::open</code>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::ofstream create_new_file_for_writing()\n{\n    FILE* fp = nullptr;\n    std::string fname;\n    do {\n        fname = random_file_name(); \n        fp = fopen(fname.c_str(), &quot;wx&quot;);\n    } while(!fp);\n    // here the file is created and you &quot;own&quot; the filename\n    fclose(fp);\n    return std::ostream(fname);\n}\n</code></pre>\n"}], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1604057970, "creation_date": 1465407852, "last_edit_date": 1494621507, "question_id": 37709395, "link": "https://stackoverflow.com/questions/37709395/c-open-file-for-writing-only-if-does-not-exists", "title": "C++ open file for writing only if does not exists", "body": "<p>I would like to open a file for writing with the standard library, but the file open should fail if the file already exists.</p>\n\n<p>From what I can read in the documentation, ofstream::open only allows appending or truncating.</p>\n\n<p>I could of course try to open for reading to check if the file exists, and reopen for writing if it doesn't, but there is no guarantee that the file will not be created by another process inbetween.</p>\n\n<p>Could someone confirm this is not possible in C++ with the standard library (std::iostream) or with the C functions (FILE* functions)</p>\n"}, {"tags": ["c", "linux-kernel", "linux-device-driver", "embedded-linux"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1465410672, "post_id": 37709361, "comment_id": 62894414, "body": "The error actually occures in <i>kmem_cache_callo_trace</i> function (look at line <code>PC is at kmem_cache_alloc_trace+0x60&#47;0x184</code>). Fault in kernel&#39;s function usually signals about internal structure it uses being previously corrupted. So we hardly can help with debugging."}, {"owner": {"reputation": 309, "user_id": 1115403, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8d2b58817f99e987fb8433c03b499504?s=128&d=identicon&r=PG", "display_name": "TheBrillowable", "link": "https://stackoverflow.com/users/1115403/thebrillowable"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1465414732, "post_id": 37709361, "comment_id": 62896665, "body": "Thanks! Can you give me some example how such a structure might get corrupted? Or what kind of structures I am looking for?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1465416021, "post_id": 37709361, "comment_id": 62897390, "body": "In case of <code>kmalloc</code> and friends, it could be, e.g., (previous) write past of allocated memory which corrupts their internal structures."}], "owner": {"reputation": 309, "user_id": 1115403, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8d2b58817f99e987fb8433c03b499504?s=128&d=identicon&r=PG", "display_name": "TheBrillowable", "link": "https://stackoverflow.com/users/1115403/thebrillowable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2296, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465409154, "creation_date": 1465407736, "last_edit_date": 1465409154, "question_id": 37709361, "link": "https://stackoverflow.com/questions/37709361/what-can-cause-a-unable-to-handle-kernel-paging-request-error-when-using-kzall", "title": "What can cause a &quot;Unable to handle kernel paging request&quot; error when using kzalloc()?", "body": "<p>Im getting a \"Unable to handle kernel paging request\" kernel oops (see error message below) and I can't see why. As far as I know, this error message occurs, when I'm accessing memory that I shouldn't access.But in this case the error message seems to trigger in/directly after the allocation.</p>\n\n<p>So my question is: is there another reason for this oops to occur?</p>\n\n<p>Here's the error message:</p>\n\n<pre><code>[   68.229185] Unable to handle kernel paging request at virtual address 5761308c\n[   68.236398] pgd = c0004000\n[   68.239094] [5761308c] *pgd=00000000\n[   68.242670] Internal error: Oops: 5 [#1] SMP ARM\n[   68.247266] Modules linked in: riddler(O)\n[   68.251285] CPU: 0 PID: 0 Comm: swapper/0 Tainted: G        W  O    4.1.0 #14\n[   68.258388] Hardware name: Altera SOCFPGA\n[   68.262380] task: c07cffa8 ti: c07ca000 task.ti: c07ca000\n[   68.267763] PC is at kmem_cache_alloc_trace+0x60/0x184\n[   68.272883] LR is at riddler_nf_queue_handler+0x164/0x6d4 [riddler]\n[   68.279122] pc : [&lt;c0118ea0&gt;]    lr : [&lt;bf000630&gt;]    psr: 200f0113\n[   68.279122] sp : c07cbb80  ip : c07cbbc0  fp : c07cbbbc\n[   68.290546] r10: 00000000  r9 : ed66d800  r8 : 0000000c\n[   68.295746] r7 : edc01f00  r6 : bf000630  r5 : 00008020  r4 : 5761308c\n[   68.302243] r3 : 00000000  r2 : c07cbb80  r1 : c07cbce0  r0 : 2da0f000\n[   68.308741] Flags: nzCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment kernel\n[   68.316015] Control: 10c5387d  Table: 2cd3004a  DAC: 00000015\n[   68.321734] Process swapper/0 (pid: 0, stack limit = 0xc07ca218)\n[   68.327713] Stack: (0xc07cbb80 to 0xc07cc000)\n[   68.332054] bb80: 000005dc c0448cdc c07cc404 00004058 2d66e000 ed5c99d0 bf001cfc ed5a8800\n[   68.340196] bba0: bf001cfc 000005c0 ed66d800 00000000 c07cbc14 c07cbbc0 bf000630 c0118e4c\n[   68.348338] bbc0: c07cbc9c 00000044 c07cbc14 c07cbbd8 00000000 00000000 00000001 00484c68\n[   68.356479] bbe0: 000005c0 0000001c 00000044 ed5a8800 c05b83f0 00000044 bf001984 edfebe40\n[   68.364621] bc00: bf001940 00000000 c07cbc64 c07cbc18 c0484e3c bf0004d8 c07cbc3c 00000000\n[   68.372762] bc20: 80000000 c04bbc02 ede3f000 00000000 00000000 c0489f30 c0483d08 c07cbc9c\n[   68.380903] bc40: edfebe40 c07cbc6c c07cdae8 00000003 ede3f000 c07cd524 c07cbc94 c07cbc68\n[   68.389045] bc60: c0483da8 c0484d00 edc817c0 bf001940 c07c9340 00000050 ecc91340 edfebe40\n[   68.397186] bc80: ede3f000 00000008 c07cbcd4 c07cbc98 c048a880 c0483d54 c07cbccc 00000000\n[   68.405327] bca0: 80000000 c04bbc02 ede3f000 00000000 00000000 c0489f30 edfebe40 c07ce898\n[   68.413468] bcc0: c048a4c4 ede3f000 c07cbd24 c07cbcd8 c0457b00 c048a4d0 00000000 ede3f000\n[   68.421610] bce0: edfebe40 ede3f580 00000020 edfebe40 00000000 ede3f05c c07cbd14 c07cd514\n[   68.429752] bd00: edfebe40 ede3f580 00000020 00000100 00000000 00000001 c07cbd3c c07cbd28\n[   68.437893] bd20: c045a34c c0457440 c07cd514 edfebe40 c07cbd6c c07cbd40 c045a400 c045a320\n[   68.446034] bd40: 2690390a 14562ba2 edfebe40 ede3f580 00000020 00000100 00000003 edfebe40\n[   68.454175] bd60: c07cbd8c c07cbd70 c045ada8 c045a3b4 ede3f580 edfebe40 000005ea 00000020\n[   68.462316] bd80: c07cbdec c07cbd90 c03a50c8 c045acec 00000000 e2d32d80 0000000f ee1d5400\n[   68.470456] bda0: 00000001 ede3f4c0 c07cbde4 c07cbdb8 c07d153c 00000100 00000040 00000002\n[   68.478597] bdc0: ffffffff ede3f580 00000001 00000040 0000012c ee1d8b80 c07cc100 c07cbe18\n[   68.486738] bde0: c07cbe54 c07cbdf0 c045be80 c03a4e04 ffffa577 c06b2a60 c07cd514 c07cd514\n[   68.494880] be00: c082ce31 ee1d8b80 c082f608 2da0f000 c07c9b80 ffffa579 c07cbe18 c07cbe18\n[   68.503021] be20: c07cbe20 c07cbe20 00000001 c07cc08c 00000003 00000000 00000100 c07ca000\n[   68.511163] be40: 00000008 c082cf0c c07cbebc c07cbe58 c002a684 c045bc68 00000011 edd41180\n[   68.519304] be60: edd411e0 00200000 c07cc100 ffffa578 c05769b4 0000000a c08302c0 c07c52c8\n[   68.527445] be80: c07cc080 c07cbe58 0000000c 00000004 00000000 c07c7c2c 00000024 00000000\n[   68.535587] bea0: 00000000 edc10800 c07cc450 c05769a8 c07cbed4 c07cbec0 c002ab68 c002a5a0\n[   68.543728] bec0: c07c7c2c 00000024 c07cbefc c07cbed8 c006738c c002aaec fee0010c c07cce2c\n[   68.551870] bee0: c07cbf20 fee00100 c082d4c0 c07cc450 c07cbf1c c07cbf00 c0009470 c0067328\n[   68.560011] bf00: c0010648 600f0013 ffffffff c07cbf54 c07cbf74 c07cbf20 c0014680 c0009448\n[   68.568153] bf20: 00000000 00000000 000198a0 c0021be0 00000000 c07ca000 c07cc49c ffffffff\n[   68.576295] bf40: c082d4c0 c07cc450 c05769a8 c07cbf74 c07cbf78 c07cbf68 c0010644 c0010648\n[   68.584437] bf60: 600f0013 ffffffff c07cbf9c c07cbf78 c005db84 c001060c 00000000 c082cc99\n[   68.592578] bf80: c07c5304 c07cbf78 c0570680 ffffffff c07cbfac c07cbfa0 c056be78 c005d9f4\n[   68.600719] bfa0: c07cbff4 c07cbfb0 c0763cc0 c056bdfc ffffffff ffffffff c07636d8 00000000\n[   68.608861] bfc0: 00000000 c07a98c8 00000000 c082fc14 c07cc440 c07a98c4 c07d1218 0000406a\n[   68.617002] bfe0: 413fc090 00000000 00000000 c07cbff8 0000807c c0763978 00000000 00000000\n[   68.625154] [&lt;c0118ea0&gt;] (kmem_cache_alloc_trace) from [&lt;bf000630&gt;] (riddler_nf_queue_handler+0x164/0x6d4 [riddler])\n[   68.635638] [&lt;bf000630&gt;] (riddler_nf_queue_handler [riddler]) from [&lt;c0484e3c&gt;] (nf_queue+0x148/0x17c)\n[   68.644907] [&lt;c0484e3c&gt;] (nf_queue) from [&lt;c0483da8&gt;] (nf_hook_slow+0x60/0xfc)\n[   68.652104] [&lt;c0483da8&gt;] (nf_hook_slow) from [&lt;c048a880&gt;] (ip_rcv+0x3bc/0x4c4)\n[   68.659308] [&lt;c048a880&gt;] (ip_rcv) from [&lt;c0457b00&gt;] (__netif_receive_skb_core+0x6cc/0x874)\n[   68.667542] [&lt;c0457b00&gt;] (__netif_receive_skb_core) from [&lt;c045a34c&gt;] (__netif_receive_skb+0x38/0x94)\n[   68.676724] [&lt;c045a34c&gt;] (__netif_receive_skb) from [&lt;c045a400&gt;] (netif_receive_skb_internal+0x58/0xcc)\n[   68.686077] [&lt;c045a400&gt;] (netif_receive_skb_internal) from [&lt;c045ada8&gt;] (napi_gro_receive+0xc8/0xf4)\n[   68.695176] [&lt;c045ada8&gt;] (napi_gro_receive) from [&lt;c03a50c8&gt;] (stmmac_poll+0x2d0/0x644)\n[   68.703148] [&lt;c03a50c8&gt;] (stmmac_poll) from [&lt;c045be80&gt;] (net_rx_action+0x224/0x354)\n[   68.710864] [&lt;c045be80&gt;] (net_rx_action) from [&lt;c002a684&gt;] (__do_softirq+0xf0/0x304)\n[   68.718577] [&lt;c002a684&gt;] (__do_softirq) from [&lt;c002ab68&gt;] (irq_exit+0x88/0xc0)\n[   68.725774] [&lt;c002ab68&gt;] (irq_exit) from [&lt;c006738c&gt;] (__handle_domain_irq+0x70/0xc4)\n[   68.733575] [&lt;c006738c&gt;] (__handle_domain_irq) from [&lt;c0009470&gt;] (gic_handle_irq+0x34/0x6c)\n[   68.741893] [&lt;c0009470&gt;] (gic_handle_irq) from [&lt;c0014680&gt;] (__irq_svc+0x40/0x54)\n[   68.749340] Exception stack(0xc07cbf20 to 0xc07cbf68)\n[   68.754371] bf20: 00000000 00000000 000198a0 c0021be0 00000000 c07ca000 c07cc49c ffffffff\n[   68.762512] bf40: c082d4c0 c07cc450 c05769a8 c07cbf74 c07cbf78 c07cbf68 c0010644 c0010648\n[   68.770650] bf60: 600f0013 ffffffff\n[   68.774133] [&lt;c0014680&gt;] (__irq_svc) from [&lt;c0010648&gt;] (arch_cpu_idle+0x48/0x4c)\n[   68.781508] [&lt;c0010648&gt;] (arch_cpu_idle) from [&lt;c005db84&gt;] (cpu_startup_entry+0x19c/0x264)\n[   68.789743] [&lt;c005db84&gt;] (cpu_startup_entry) from [&lt;c056be78&gt;] (rest_init+0x88/0x8c)\n[   68.797465] [&lt;c056be78&gt;] (rest_init) from [&lt;c0763cc0&gt;] (start_kernel+0x354/0x360)\n[   68.804917] Code: e7914000 e3540000 0a000038 e5973014 (e7949003)\n[   68.811024] ---[ end trace 11b433a852b633dc ]---\n</code></pre>\n\n<p>And here's the code segment that's causing it (I think, I used gdb \"list *(riddler_nf_queue_handler)+0x164\" to find it):</p>\n\n<pre><code>  new = (struct fpga_kfifo_entry *) kzalloc(sizeof(struct fpga_kfifo_entry), GFP_ATOMIC);\n\n  new-&gt;entry = entry;\n  new-&gt;dma_buffer = dma_buffer; //+0x164 is here\n  new-&gt;dma_buffer_size = data_length_pad;\n\n  if(!(kfifo_put(&amp;irq_fifo, new))) {\n    // FIFO was full\n#ifdef DEBUG\n    pr_info(\"IRQ Fifo is full, couldn't add new entry!\\n\");\n#endif\n\n    kfree(dma_buffer);\n    kfree(new);\n    nf_reinject(entry, NF_DROP);\n    return 0;\n  }\n</code></pre>\n\n<p>dma_buffer is allocated in the same function, but earlier:</p>\n\n<pre><code>data_length_pad = round_to_word_size(data_length + 1);\n\ndma_buffer = (unsigned char *) kzalloc(data_length_pad, GFP_ATOMIC);\n\nif (!dma_buffer) {\n  kfree(dma_buffer);\n  nf_reinject(entry, NF_DROP);\n  return 0;\n} else {\n  // Only continue when allocation was successful\n  dma_buffer[data_length_pad - 1] = (unsigned char) data_length_pad - data_length;\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "function", "parameters"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1465407640, "post_id": 37709304, "comment_id": 62892623, "body": "It&#39;s not a <code>void</code>, it&#39;s a <code>void *</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465407655, "post_id": 37709304, "comment_id": 62892630, "body": "&#39;keyparam&#39; is not <code>void</code>, <code>void *</code>! Typically in programming languages, symbols are not just for decoration."}, {"owner": {"reputation": 664, "user_id": 3308310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VHodm.png?s=128&g=1", "display_name": "54 69 6D", "link": "https://stackoverflow.com/users/3308310/54-69-6d"}, "edited": false, "score": 0, "creation_date": 1465407730, "post_id": 37709304, "comment_id": 62892664, "body": "So, <code>void *</code> can be any type?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1465407745, "post_id": 37709304, "comment_id": 62892673, "body": "to add to what Ian said. <code>void*</code> is a special pointer type that any pointer can be cast to or from (whether correctly or incorrectly is up to you, but the compiler sure doesn&#39;t care)."}, {"owner": {"reputation": 664, "user_id": 3308310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VHodm.png?s=128&g=1", "display_name": "54 69 6D", "link": "https://stackoverflow.com/users/3308310/54-69-6d"}, "edited": false, "score": 0, "creation_date": 1465408081, "post_id": 37709304, "comment_id": 62892845, "body": "Is <code>void* keyparam</code> is the same as <code>void *keyparam</code>?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465408150, "post_id": 37709304, "comment_id": 62892898, "body": "@54696D yes, they are same."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1465408467, "post_id": 37709304, "comment_id": 62893100, "body": "In this case, it would be better if the parameter were <code>const void *keyparam</code>, since the function does not modify the thing that keyparam points to. (I know the post has ellipsis-ed out some code, but I&#39;ve seen other versions of this function that do not modify the keyparam either.)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465408748, "post_id": 37709304, "comment_id": 62893264, "body": "@54696D see <a href=\"http://stackoverflow.com/a/34758367/2173917\">this one</a> for a discussion. disclaimer; my answer. :)"}], "owner": {"reputation": 664, "user_id": 3308310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VHodm.png?s=128&g=1", "display_name": "54 69 6D", "link": "https://stackoverflow.com/users/3308310/54-69-6d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1465407982, "answer_count": 0, "score": 0, "last_activity_date": 1465407573, "creation_date": 1465407573, "question_id": 37709304, "link": "https://stackoverflow.com/questions/37709304/void-parameter-in-function", "closed_reason": "Duplicate", "title": "Void parameter in function", "body": "<p>In Andrew Carter's implementation of the <a href=\"https://www.schneier.com/academic/blowfish/download.html\" rel=\"nofollow\">Blowfish</a> cipher, one function takes the parameter <code>*keyparam</code> and copies it to the variable <code>*key</code>.</p>\n\n<pre><code>void blowfish_initiate(blowfish_context_t *ctx, void *keyparam, unsigned int keybytes)\n{\n    keybytes %= 57;\n    unsigned char *key = keyparam;  // How is this possible?\n    int i, j, k;\n    unsigned long calc;\n\n    // ...code...\n\n    if(keybytes) {\n        for(i = 0, j = 0; i &lt; 18; i++) {\n            for(k = 0, calc = 0; k &lt; 4; k++) {\n                calc &lt;&lt;= 8, calc |= key[j++];\n                if(j == keybytes)\n                    j = 0;\n            }\n            ctx-&gt;pbox[i] ^= calc;\n        }\n    }\n\n    // ...code...\n}\n</code></pre>\n\n<p>How is this possible if <code>keyparam</code> is <code>void</code>?</p>\n\n<p>I know functions can have void parameters, but can they be used?</p>\n"}, {"tags": ["c", "warnings", "compiler-warnings", "sdcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465406499, "post_id": 37708959, "comment_id": 62892002, "body": "Did you search for the warning message in the comment? What in the expalanation did you not understand? (Btw, it should be <code>(void)c;</code>, otherwise other compilers like gcc might complain with &quot;result of expression not used&quot; or similar.) Addition: the very first search result points to the sdcc support forum."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6441586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d1ec7efbfe662d0cc70534c62027d4?s=128&d=identicon&r=PG&f=1", "display_name": "Qiang", "link": "https://stackoverflow.com/users/6441586/qiang"}, "edited": false, "score": 0, "creation_date": 1465408469, "post_id": 37709030, "comment_id": 62893102, "body": "Thanks. And is it a special usage of SDCC? Can this be used in other compliers?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3, "user_id": 6441586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d1ec7efbfe662d0cc70534c62027d4?s=128&d=identicon&r=PG&f=1", "display_name": "Qiang", "link": "https://stackoverflow.com/users/6441586/qiang"}, "edited": false, "score": 0, "creation_date": 1465408851, "post_id": 37709030, "comment_id": 62893326, "body": "@Qiang This is no <i>special</i> usage, just a workaround for a clean compilation. However, it&#39;s always better to change the code to get rid of the warnings rather than suppressing them. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1465406940, "last_edit_date": 1465406940, "creation_date": 1465406543, "answer_id": 37709030, "question_id": 37708959, "link": "https://stackoverflow.com/questions/37708959/why-does-this-sentence-eliminate-the-unreferenced-function-argument-warning/37709030#37709030", "title": "Why does this sentence eliminate the &quot;unreferenced function argument warning&quot;?", "body": "<p>Compilers tend to warn you if you have an incoming function parameter that you don't use. In your case, <code>c;</code> is a <em>void</em> operation to access the variable and to avoid the warning. It is similar to</p>\n\n<pre><code> int func(char c)\n {\n  (void)c;\n  //c is never used in the function\n }\n</code></pre>\n\n<p>FWIW, in <code>gcc</code>, to <em>enable</em> the warning, <code>-Wunused-parameter</code> option is used. (<em>enabled in <code>-Wextra</code></em>)</p>\n"}], "owner": {"reputation": 3, "user_id": 6441586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d1ec7efbfe662d0cc70534c62027d4?s=128&d=identicon&r=PG&f=1", "display_name": "Qiang", "link": "https://stackoverflow.com/users/6441586/qiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 37709030, "answer_count": 1, "score": -1, "last_activity_date": 1465407007, "creation_date": 1465406315, "last_edit_date": 1465407007, "question_id": 37708959, "link": "https://stackoverflow.com/questions/37708959/why-does-this-sentence-eliminate-the-unreferenced-function-argument-warning", "title": "Why does this sentence eliminate the &quot;unreferenced function argument warning&quot;?", "body": "<p>in SDCC Compiler User Guide I read the following:</p>\n\n<pre><code>void to_buffer( unsigned char c )\n{\nc; // to avoid warning: unreferenced function argument\n__asm\n; save used registers here.\n; If we were still using r2,r3 we would have to push them here.\n; if( head != (unsigned char)(tail-1) )\nmov a,_tail\ndec a\nxrl a,_head\n; we could do an ANL a,#0x0f here to use a smaller buffer (see below)\njz t_b_end$\n;\n; buf[ head++ ] = c;\nmov a,dpl ; dpl holds lower byte of function argument\nmov dpl,_head ; buf is 0x100 byte aligned so head can be used directly\nmov dph,#(_buf&gt;&gt;8)\nmovx @dptr,a\ninc _head\n; we could do an ANL _head,#0x0f here to use a smaller buffer (see above)\nt_b_end$:\n; restore used registers here\n__endasm;\n}\n</code></pre>\n\n<p>I don't understand what does the sentence <code>\"c; // to avoid warning: unreferenced function argument\"</code> mean, is it a special usage of SDCC? Or a special usage of C language?</p>\n"}, {"tags": ["c", "linux", "bash", "shell", "chdir"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465406136, "post_id": 37708726, "comment_id": 62891811, "body": "&quot;... back to my scripts command prompt&quot; - Which script? Why don&#39;t you show it?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1465406193, "post_id": 37708726, "comment_id": 62891835, "body": "Just run your shell under Valgrind and follow up on all reported errors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465406209, "post_id": 37708726, "comment_id": 62891847, "body": "And <code>emalloc</code>/<code>erealloc</code> are not standard functions."}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 1, "creation_date": 1465406340, "post_id": 37708726, "comment_id": 62891911, "body": "Your problem is that of a memory corruption. It is likely that the memory is corrupted by code that you didn&#39;t include in your post. Such type of problems are usually hunted with memory debuggers (e.g valgrind)."}, {"owner": {"reputation": 11, "user_id": 6367453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hx9t8.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6367453/daniel"}, "edited": false, "score": 0, "creation_date": 1465406504, "post_id": 37708726, "comment_id": 62892007, "body": "Thanks for the replies, I included some code showing how I call the next_cmd function (prompts for input). I&#39;ll try to find out where a possible memory corruption could occur in my code."}, {"owner": {"reputation": 11, "user_id": 6367453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hx9t8.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6367453/daniel"}, "edited": false, "score": 0, "creation_date": 1465408341, "post_id": 37708726, "comment_id": 62893023, "body": "Thanks Leon, using Valgrind I found I was writing NULL to an out of bounds location. &quot;Invalid write of size 8&quot; was reported by Valgrind."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6367453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hx9t8.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6367453/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1465408756, "creation_date": 1465408756, "answer_id": 37709675, "question_id": 37708726, "link": "https://stackoverflow.com/questions/37708726/c-corrupted-double-linked-list-after-calling-chdir/37709675#37709675", "title": "C Corrupted double-linked list after calling chdir", "body": "<p>Solved by finding corrupt memory location, using Valgrind. \"Invalid write of size 8\" was called by Valgrind. After fixing this, the problem had gone.\nThanks Leon for suggesting this above. </p>\n"}], "owner": {"reputation": 11, "user_id": 6367453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hx9t8.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6367453/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 37709675, "answer_count": 1, "score": 0, "last_activity_date": 1465408756, "creation_date": 1465405508, "last_edit_date": 1465408582, "question_id": 37708726, "link": "https://stackoverflow.com/questions/37708726/c-corrupted-double-linked-list-after-calling-chdir", "title": "C Corrupted double-linked list after calling chdir", "body": "<p>I've been working on some C code to provide functionality similar to the shell. So far it can run most commands like cat, ls, ls | grep ..., etc. After writing code to implement the functions \"cd\", \"pwd\", \"pushd\" and \"popd\", I have been testing it. If I write \"cd ..\" or \"cd anydir\" it will run \"chdir(anydir)\" and return back to my scripts command prompt. After entering any command after \"cd\", it will return the error:</p>\n\n<pre><code>*** Error in `./smshv4': corrupted double-linked list: 0x00000000018d5190 ***\n</code></pre>\n\n<p>I isolated this error to be printed while reallocating memory in an unrelated variable. I have commented on the line which the error is produced during:</p>\n\n<pre><code>char * next_cmd(char *prompt, FILE *fp){\n        fprintf(stderr,\"in next_cmd\\n\");\n\n        char    *buf ;\n        int bufspace = 0;\n        int pos = 0;\n        int c;\n\n        printf(\"%s\", prompt);\n        while( ( c = getc(fp)) != EOF ) {\n\n                if( pos+1 &gt;= bufspace ){\n                        if ( bufspace == 0 ){\n                        buf = emalloc(BUFSIZ);  //Error occurs while calling this function\n                        } else  {\n                                buf = erealloc(buf,bufspace+BUFSIZ);\n                        }\n                        bufspace += BUFSIZ;\n                }\n\n                /* end of command? */\n                if ( c == '\\n' )\n                        break;\n\n                /* no, add to buffer */\n                buf[pos++] = c;\n        }\n\n        if ( c == EOF &amp;&amp; pos == 0 )\n               return NULL;\n        buf[pos] = '\\0';\n        return buf;\n}\n</code></pre>\n\n<p>This error only occurs after I run any functions using chdir. Here is an example of my how I am calling chdir when cd is given as input:</p>\n\n<pre><code>if(strcmp(cmdStruct.commandTemp[0],\"cd\") == 0){\n    if(cmdStruct.commandTemp[1] != NULL){\n        if(chdir(cmdStruct.commandTemp[1]) == -1){\n            perror(\"chdir\");\n            return -1;\n        }\n    } else {\n        fprintf(stderr,\"cd failed. No directory given\\n\");\n        return -1;\n    }\n}\n</code></pre>\n\n<p>This cd command isn't working because whenever I run it, the error given will be shown the next time I enter a command. If I cd to a different directory, run anything to receive the error, and then run \"pwd\" (which is working), it will show the original directory (the error seems to sort itself out after entering one command).</p>\n\n<p>How do I solve the corrupted double-linked list problem? Thanks.</p>\n\n<p>Edit: I call the command prompt as shown below:</p>\n\n<pre><code>while ( (cmdline = next_cmd(prompt, stdin)) != NULL ){  //command prompt function is run\n    //if &amp; sign detected, fork. otherwise run command as usual\n    if(hasBackgroundSign(cmdline) == 1){\n        pid = fork();\n        if(pid == 0){\n            if ( (arglist = splitline(cmdline)) != NULL  ){\n                result = execute(arglist);\n                freelist(arglist);\n            }\n            free(cmdline);\n            kill(getpid(), SIGKILL);\n        } else {\n            printf(\"%d\\n\",pid);\n        }\n    } else {\n        //if no &amp; sign detected, run command as usual without forking\n        if ( (arglist = splitline(cmdline)) != NULL  ){\n            result = execute(arglist);  //execute function contains the chdir calls\n            freelist(arglist);\n        }\n        free(cmdline);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "performance"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465405281, "post_id": 37708617, "comment_id": 62891311, "body": "Depends on how sophisticated your compiler is, and how much you trust your code to work correctly under high optimization settings. Best case, it doesn&#39;t matter at all."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1465405403, "post_id": 37708617, "comment_id": 62891387, "body": "In both cases you have to reset the variables. They have automatic storage class, so their initial values are undefined."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1465405405, "post_id": 37708617, "comment_id": 62891389, "body": "To see which way is faster, try it both ways and benchmark your code."}, {"owner": {"reputation": 3686, "user_id": 2510655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460a7e6ff5c136b73116066c58a4a9eb?s=128&d=identicon&r=PG", "display_name": "Samuel Peter", "link": "https://stackoverflow.com/users/2510655/samuel-peter"}, "edited": false, "score": 0, "creation_date": 1465411774, "post_id": 37708617, "comment_id": 62895052, "body": "For performance topics on x86 the ultimate ressource is Agner Fog : <a href=\"http://www.agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 0, "last_activity_date": 1465406930, "last_edit_date": 1465406930, "creation_date": 1465406235, "answer_id": 37708939, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e/37708939#37708939", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<p>It should not matter because you need to initialize the variables in either case. Additionally, the first case sets x and y <strong>after</strong> they are no longer being used. As a result, the reset is not needed.</p>\n\n<p>Here is the first technique:</p>\n\n<pre><code>int x=0, y=0, i;\nfor(i=0; i&lt;10; i++)\n{\n    //do stuff with x and y\n    // x and y stay at the value they get set to during the pass\n}\n// x and y need to be reset if you want to use them again.\n// or would retain whatever they became during the last pass.\n</code></pre>\n\n<p>If you had wanted x and y to be reset to 0 inside the loop, then you would need to say</p>\n\n<p>Here is the first technique:</p>\n\n<pre><code>int x, y, i;\nfor(i=0; i&lt;10; i++)\n{\n    //reset x and y to zero\n    x=0; \n    y=0;\n    //do stuff with x and y\n    // Now x and y get reset before the next pass\n}\n</code></pre>\n\n<p>The second procedure makes x and y local in scope so they are dropped at the end of the last pass. The values retain whatever they were set for during each pass for the next pass. The compiler will actually set up the variables and initialize them them at compile time <strong>not at run time</strong>. Thus you will not be defining (and initializing) the variable for each pass through the loop.</p>\n\n<p>And here is the second one:</p>\n\n<pre><code>int i;\nfor(i=0; i&lt;10; i++)\n{\n    int x=0, y=0;\n    //do the same stuff with x and y as above\n    // Usually x and y only saet to 0 at start of first pass.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": 1, "last_activity_date": 1465407101, "creation_date": 1465407101, "answer_id": 37709178, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e/37709178#37709178", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<p>Declaring the variables in the inner-most scope where you'll use them:</p>\n\n<pre><code>int i;\nfor(i=0; i&lt;10; i++)\n{\n    int x, y;\n    //do the same stuff with x and y as above\n}\n</code></pre>\n\n<p>is always going to be preferred. The biggest improvement is that you've <em>limited the scope</em> of the <code>x</code> and <code>y</code> variables. This prevents you from accidentally using them where you didn't intend to.</p>\n\n<p>Even if you use \"the same\" variables again:</p>\n\n<pre><code>int i;\nfor(i=0; i&lt;10; i++)\n{\n    int x, y;\n    //do the same stuff with x and y as above\n}\n\nfor(i=0; i&lt;10; i++)\n{\n    int x, y;\n    //do the same stuff with x and y as above\n}\n</code></pre>\n\n<p>there will be no performance impact whatsoever. The statement <code>int x, y</code> has practically no effect at runtime.</p>\n\n<p>Most modern compilers will calculate the total size of all local variables, and emit code to reserve the space on the stack (e.g. <code>sub esp, 90h</code>) once in the function prologue. The space for these variables will almost certainly be re-used from one \"version\" of <code>x</code> to the next. It's purely a lexical construct that the compiler uses to keep you from using that \"space\" on the stack where you didn't intend to.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 1228878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vd3Pe.jpg?s=128&g=1", "display_name": "tniles", "link": "https://stackoverflow.com/users/1228878/tniles"}, "is_accepted": false, "score": 0, "last_activity_date": 1465413771, "last_edit_date": 1592644375, "creation_date": 1465408799, "answer_id": 37709691, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e/37709691#37709691", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<h1>Best Practices</h1>\n<blockquote>\n<p>So which coding technique is better?</p>\n</blockquote>\n<p>As others have pointed out, given a sufficiently mature/modern compiler the performance aspect will likely be null due to optimization. Instead, the preferred code is determined by virtue of sets of ideas known as <strong>best practices</strong>.</p>\n<h1>Limiting Scope</h1>\n<p>&quot;Scope&quot; describes the <a href=\"http://www.geeksforgeeks.org/scope-rules-in-c/\" rel=\"nofollow noreferrer\">range of access</a> in your code. Assuming the intended scope is to be limited to within the loop itself, <code>x</code> and <code>y</code> should be declared <strong>inside the loop</strong> as the compiler will prevent you from using them later on in your function. However, in your OP you show them being reset, which implies they will be used again later for other purposes. In this case, you <em>must</em> declare them towards the top (e.g. <strong>outside the loop</strong>) so you can use them later.</p>\n<p>Here's some code you can use to demonstrate the limiting of the scope:</p>\n<pre><code>#include &lt;stdio.h&gt;\n\n#define IS_SCOPE_LIMITED\n\nint main ( void )\n{\n  int i;\n\n#ifndef IS_SCOPE_LIMITED\n  int x, y;                 // compiler will not complain, scope is generous\n#endif\n\n  for(i=0; i&lt;10; i++)\n  {\n#ifdef IS_SCOPE_LIMITED\n    int x, y;              // compiler will complain about use outside of loop\n#endif\n    x = i;\n    y = x+1;\n    y++;\n  }\n\n  printf(&quot;X is %d and Y is %d\\n&quot;, x, y);\n}\n</code></pre>\n<p>To test the scope, comment out the <code>#define</code> towards the top. Compile with <code> gcc -Wall loopVars.c -o loopVars</code> and run with <code>./loopVars</code>.</p>\n<h1>Benchmarking and Profiling</h1>\n<p>If you're still concerned about performance, possibly because you have some obscure operations involving these variables, then <em>test, test, and test again!</em> (try <a href=\"https://stackoverflow.com/q/2349776/1228878\">benchmarking</a> or <a href=\"https://stackoverflow.com/q/4141307/1228878\">profiling</a> your code). Again, with optimizations you probably won't find significant (if any) differences because the compiler will have done all this (allocation of variable space) prior to runtime.</p>\n<h3><em>UPDATE</em></h3>\n<p>To demonstrate this another way, you could remove the <code>#ifdef</code> and the <code>#ifndef</code> from the code (also removing each <code>#endif</code>), and add a line immediately preceding the <code>printf</code> such as <code>x=2; y=3;</code>. What you will find is the code will compile and run but the output will be &quot;X is 2 and Y is 3&quot;. This is legal because the two scopes prevent the identically-named variables from competing with each other. Of course, this is a <strong>bad idea</strong> because you now have multiple variables within the same piece of code with identical names and with more complex code this will not be as easy to read and maintain.</p>\n"}, {"tags": [], "owner": {"reputation": 3686, "user_id": 2510655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460a7e6ff5c136b73116066c58a4a9eb?s=128&d=identicon&r=PG", "display_name": "Samuel Peter", "link": "https://stackoverflow.com/users/2510655/samuel-peter"}, "is_accepted": true, "score": 0, "last_activity_date": 1465411625, "creation_date": 1465411625, "answer_id": 37710536, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e/37710536#37710536", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<p>It does not matter at all, because compilers don't automatically translate variable declaration to memory or register allocation. The difference between the two samples is that in the first case the variables are visible outside of the loop body, and in the second case they are not. However this difference is at the C level only, and if you don't use the variables outside the loop it will result in the same compiled code.</p>\n\n<p>The compiler has two options for where to store a local variable : it's either on the stack or in a register. For each variable you use in your program, the compiler has to choose where it is going to live. If on the stack, then it needs to decrement the stack pointer to make room for the variable. But this decrementation will not happen at the place of variable declaration, typically it will be done at the beginning of the function : the stack pointer will be decremented only once by an amount sufficient to hold all of the stack-allocated variables. If it's only going to be in a register, no initialization needs to be done and the register will be used as destination when you first do an assignment. The important thing is that it can and will re-use memory locations and registers that were previously used for variables which are now out of scope.</p>\n\n<p>For illustration, I made two test programs. I used 10000 iterations instead of 10 because otherwise the compiler would unroll the loop at high optimization levels. The programs use <code>rand</code> to make for a quick and portable demo, but it should not be used in production code.</p>\n\n<p>declare_once.c :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    srand(time(NULL));\n\n    int x, y, i;\n    for (i = 0; i &lt; 10000; i++) {\n        x = rand();\n        y = rand();\n        printf(\"Got %d and %d !\\n\", x, y);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>redeclare.c is the same except for the loop which is :</p>\n\n<pre><code>for (i = 0; i &lt; 10000; i++) {\n    int x, y;\n    x = rand();\n    y = rand();\n    printf(\"Got %d and %d !\\n\", x, y);\n}\n</code></pre>\n\n<p>I compiled the programs using Apple's LLVM version 7.3.0 on x86_64 Mac. I asked it for assembly output which I reproduced below, leaving out the parts unrelated to the question.</p>\n\n<p>clang -O0 -S declare_once.c -o declare_once.S :</p>\n\n<pre><code>_main:\n## Function prologue\n    pushq   %rbp\n    movq    %rsp, %rbp           ## Move the old value of the stack \n                                 ## pointer (%rsp) to the base pointer \n                                 ## (%rbp), which will be used to \n                                 ## address stack variables\n\n    subq    $32, %rsp            ## Decrement the stack pointer by 32 \n                                 ## to make room for up to 32 bytes \n                                 ## worth of stack variables including \n                                 ## x and y\n\n## Removed code that calls srand\n\n    movl    $0, -16(%rbp)        ## i = 0. i has been assigned to the 4 \n                                 ## bytes starting at address -16(%rbp),\n                                 ## which means 16 less than the base  \n                                 ## pointer (so here, 16 more than the \n                                 ## stack pointer).\n\nLBB0_1:                                 \n    cmpl    $10, -16(%rbp)\n    jge LBB0_4\n    callq   _rand                ## Call rand. The return value will be in %eax\n\n    movl    %eax, -8(%rbp)       ## Assign the return value of rand to x. \n                                 ## x has been assigned to the 4 bytes\n                                 ## starting at -8(%rbp)\n    callq   _rand\n    leaq    L_.str(%rip), %rdi\n    movl    %eax, -12(%rbp)      ## Assign the return value of rand to y. \n                                 ## y has been assigned to the 4 bytes\n                                 ## starting at -12(%rbp)\n    movl    -8(%rbp), %esi\n    movl    -12(%rbp), %edx\n    movb    $0, %al\n    callq   _printf\n    movl    %eax, -20(%rbp)\n    movl    -16(%rbp), %eax\n    addl    $1, %eax\n    movl    %eax, -16(%rbp)\n    jmp LBB0_1\nLBB0_4:\n    xorl    %eax, %eax\n    addq    $32, %rsp            ## Add 32 to the stack pointer : \n                                 ## deallocate all stack variables \n                                 ## including x and y\n    popq    %rbp\n    retq\n</code></pre>\n\n<p>The assembly output for redeclare.c is almost exactly the same, except that for some reason x and y get assigned to <code>-16(%rbp)</code> and <code>-12(%rbp)</code> respectively, and <code>i</code> gets assigned to <code>-8(%rbp)</code>. I copy-pasted only the loop : </p>\n\n<pre><code>    movl    $0, -16(%rbp)\nLBB0_1:\n    cmpl    $10, -16(%rbp)\n    jge LBB0_4\n    callq   _rand\n    movl    %eax, -8(%rbp)        ## x = rand();\n    callq   _rand\n    leaq    L_.str(%rip), %rdi\n    movl    %eax, -12(%rbp)       ## y = rand();\n    movl    -8(%rbp), %esi\n    movl    -12(%rbp), %edx\n    movb    $0, %al\n    callq   _printf\n    movl    %eax, -20(%rbp)\n    movl    -16(%rbp), %eax\n    addl    $1, %eax\n    movl    %eax, -16(%rbp)\n    jmp LBB0_1\n</code></pre>\n\n<p>So we see that even at -O0 the generated code is the same. The important thing to note is that the same memory locations are reused for x and y in each loop iteration, even though they are separate variables at each iteration from the C language point of view.</p>\n\n<p>At -O3 the variables are kept in registers, and both programs output <em>the exact same assembly</em>.</p>\n\n<p>clang -O3 -S declare_once.c -o declare_once.S :</p>\n\n<pre><code>    movl    $10000, %ebx       ## i will be in %ebx. The compiler decided\n                               ## to count down from 10000 because \n                               ## comparisons to 0 are less expensive,\n                               ## so it actually does i = 10000.\n    leaq    L_.str(%rip), %r14\n    .align  4, 0x90\nLBB0_1:\n    callq   _rand\n    movl    %eax, %r15d        ## x = rand(). x has been assigned to\n                               ## register %r15d (32 less significant\n                               ## bits of r15)\n    callq   _rand\n    movl    %eax, %ecx         ## y = rand(). y has been assigned to\n                               ## register %ecx\n    xorl    %eax, %eax\n    movq    %r14, %rdi\n    movl    %r15d, %esi\n    movl    %ecx, %edx\n    callq   _printf\n    decl    %ebx\n    jne LBB0_1\n</code></pre>\n\n<p>So again, no differences between the two versions, and even though in redeclare.c we have different variables at each iteration, the same registers are re-used so that there is no allocation overhead.</p>\n\n<p>Keep in mind that everything I said applies to variables that are assigned in each loop iteration, which seems to be what you were thinking. If on the other hand you want to use the same values for all iterations, of course the assignment should be done before the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1465507681, "creation_date": 1465507681, "answer_id": 37736501, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e/37736501#37736501", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<p>In the specific case of <code>int</code> variables, it makes little (or no) difference.</p>\n\n<p>For variables of more complex types, especially something with a constructor that (for example) allocates some memory dynamically, re-creating the variable every iteration of a loop may be substantially slower than re-initializing it instead. For example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;chrono&gt;\n#include &lt;numeric&gt;\n#include &lt;iostream&gt;\n\nunsigned long long versionA() {\n    std::vector&lt;int&gt; x;\n    unsigned long long total = 0;\n\n    for (int j = 0; j &lt; 1000; j++) {\n        x.clear();\n        for (int i = 0; i &lt; 1000; i++)\n            x.push_back(i);\n        total += std::accumulate(x.begin(), x.end(), 0ULL);\n    }\n    return total;\n}\n\nunsigned long long versionB() {\n    unsigned long long total = 0;\n\n    for (int j = 0; j &lt; 1000; j++) {\n        std::vector&lt;int&gt; x;\n        for (int i = 0; i &lt; 1000; i++)\n            x.push_back(i);\n        total += std::accumulate(x.begin(), x.end(), 0ULL);\n    }\n    return total;\n}\n\ntemplate &lt;class F&gt;\nvoid timer(F f) {\n    using namespace std::chrono;\n\n    auto start = high_resolution_clock::now();\n    auto result = f();\n    auto stop = high_resolution_clock::now();\n\n    std::cout &lt;&lt; \"Result: \" &lt;&lt; result &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Time:   \" &lt;&lt; duration_cast&lt;microseconds&gt;(stop - start).count() &lt;&lt; \"\\n\";\n}\n\nint main() {\n    timer(versionA);\n    timer(versionB);\n}\n</code></pre>\n\n<p>At least when I run it, there's a fairly substantial difference between the two methods:</p>\n\n<pre><code>Result: 499500000\nTime:   5114\nResult: 499500000\nTime:   13196\n</code></pre>\n\n<p>In this case, creating a new vector every iteration takes more than twice as long as clearing an existing vector every iteration instead. </p>\n\n<p>For what it's worth, there are probably two separate factors contributing to the speed difference:</p>\n\n<ol>\n<li>initial creation of the vector.</li>\n<li>Re-allocating memory as elements are added to the vector.</li>\n</ol>\n\n<p>When we <code>clear()</code> a vector, that removes the existing elements, but retains the memory that's currently allocated, so in a case like this were we use the same size every iteration of the outer loop, the version that just resets the vector doesn't need to allocate any memory on subsequent iterations. If we add <code>x.reserve(1000);</code> immediately after defining the vector in <code>vesionA</code>, the difference shrinks substantially (at least in my testing not quite tied in speed, but pretty close).</p>\n"}], "owner": {"reputation": 87, "user_id": 6441545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592ecd9e7adf9d93f1909f750bc72159?s=128&d=identicon&r=PG", "display_name": "Christos Maris", "link": "https://stackoverflow.com/users/6441545/christos-maris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 37710536, "answer_count": 5, "score": 1, "last_activity_date": 1465507681, "creation_date": 1465405145, "question_id": 37708617, "link": "https://stackoverflow.com/questions/37708617/is-re-declaring-variables-in-every-iterations-faster-than-resetting-them-after-e", "title": "Is re-declaring variables in every iterations faster than resetting them after every iteration?", "body": "<p>So I have a question regarding performance on two different code techniques. Can you help me understanding which one is faster/better and why? </p>\n\n<p>Here is the first technique:</p>\n\n<pre><code>int x, y, i;\nfor(i=0; i&lt;10; i++)\n{\n    //do stuff with x and y\n}\n//reset x and y to zero\nx=0; \ny=0;\n</code></pre>\n\n<p>And here is the second one:</p>\n\n<pre><code>int i;\nfor(i=0; i&lt;10; i++)\n{\n    int x, y;\n    //do the same stuff with x and y as above\n}\n</code></pre>\n\n<p>So which coding technique is better?\nAlso if you know a better one and/or any site/article etc. where I can read about this and more performance related stuff I would love to have that also!</p>\n"}, {"tags": ["c", "informix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465412137, "post_id": 37708383, "comment_id": 62895285, "body": "Error -346 is not a problem with present/absent.  The instructions from <code>finderr -346</code> say <i>While the database server was processing an UPDATE, it received an unexpected error. Check the accompanying ISAM error code for more detailed information on the cause. Possible causes include hardware errors and locking conflicts.</i>  You&#39;ll need to track the ISAM error (<code>sqca.sqlerrd[1]</code> in ESQL/C) to get some more information; it should be an error number with absolute value between 100 and 199.  This probably means there is a problem of some sort on your production system.  Show the SQL."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465412298, "post_id": 37708383, "comment_id": 62895373, "body": "Note that updating a non-existent row with a searched UPDATE should simply report zero rows updated successfully.  In a MODE ANSI database, you would get a status of 100 (SQLNOTFOUND) instead of 0 (no error).  If you&#39;re doing a WHERE CURRENT OF update and the row&#39;s gone missing, then there&#39;s something weird going on indeed \u2014 it shouldn&#39;t happen (because it means you didn&#39;t get a lock on the row when you selected it, but someone managed to delete the row even though you should have had it locked).  If you didn&#39;t use the FOR UPDATE clause, then the WHERE CURRENT OF should have specific error."}, {"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465413389, "post_id": 37708383, "comment_id": 62895982, "body": "Thank you Jonathan. I have updated the SQL error too. We are not sure whether our Informix DB is created in ANSI MODE or not."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465413703, "post_id": 37708383, "comment_id": 62896137, "body": "Probably not MODE ANSI; you have to say you wanted it, and you usually don&#39;t."}, {"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465414032, "post_id": 37708383, "comment_id": 62896301, "body": "Well, the command inside the script for DB create is  CREATE DATABASE $DATABASE_INFO IN $DATABASE_SPACE WITH LOG; So, I assume out DB is not in MODE ANSI and the production might be in MODE ANSI. Is that the reason why we don&#39;t see the error and in production they see the error?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465415220, "post_id": 37708383, "comment_id": 62896934, "body": "No; that&#39;s a logged database created in a specific dbspace.  You should assume that the database in production is also non-ANSI.  You can tell whether it is MODE ANSI: connect to the database and run <code>COMMIT WORK</code>.  If it complains &#39;not in a transaction&#39;, it is a non-ANSI database.  If it accepts it without flinching, it is an ANSI database."}, {"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465417109, "post_id": 37708383, "comment_id": 62898022, "body": "wow, thank you for that piece of information, the &quot;commit work&quot; did complained, which underlines this is a non-ANSI database. However, we have created an ANSI database for testing purpose and create temp table. But when we tried to update the row, in the command prompt, there was no complain (we tried dbaccess $DBNAME) and the &quot;$?&quot; showed as 0. So, whether the error comes only inside the &quot;.ec&quot; program?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465417578, "post_id": 37708383, "comment_id": 62898270, "body": "Presumably, the SQL you show is created as a string and then executed?  You can&#39;t specify the table name as a parameter, so that must be handling in the string.  You could use placeholders for the two values and pass them to the <code>$EXECUTE prepared_statement USING :new_value, :old_value;</code> or equivalent.  The key point is you should not be seeing the error.  The fact that you see it in production and not in the test environment supports this.  I&#39;d need to see a bit more of the code \u2014 in MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) form.  That is, show us a simple ESQL/C program that connects and updates and fails with -346."}, {"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465420578, "post_id": 37708383, "comment_id": 62899717, "body": "Thank you for the comments Jonanthan. I have added the snipped from the code. Let me know if this gives any hint."}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "edited": false, "score": 0, "creation_date": 1465417499, "post_id": 37711598, "comment_id": 62898238, "body": "Thank you so much for the detailed explanation. I don&#39;t have permission to run &quot;oncheck&quot; and requested for the DBA assistance. Your explanation helped to pass the message on how serious the issue could be. Thanks again and I will update the error I get from the above commands."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "edited": false, "score": 0, "creation_date": 1465417695, "post_id": 37711598, "comment_id": 62898331, "body": "Fair enough.  Can you repro the problem with other tables, or just with the one table?  Can you create a similar table in the production database and run into the problem?"}, {"owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "edited": false, "score": 0, "creation_date": 1465420702, "post_id": 37711598, "comment_id": 62899771, "body": "I don&#39;t have production access and cant do much R&amp;D there due to the huge volume of data. In dev region its not reproducible. Anyway, I will have the DBA tomorrow and he could find something from your comments I hope."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1465415186, "creation_date": 1465415186, "answer_id": 37711598, "question_id": 37708383, "link": "https://stackoverflow.com/questions/37708383/the-informix-is-not-throwing-error-when-trying-to-update-a-row-which-is-not-pres/37711598#37711598", "title": "The Informix is not throwing error when trying to update a row which is not present?", "body": "<p><sup><em>The comments are getting too big to be comments \u2014 by quite a margin.</em></sup></p>\n\n<p>Error -346 is not a problem with present/absent. The instructions from <code>finderr -346</code> say:</p>\n\n<blockquote>\n  <p>While the database server was processing an UPDATE, it received an unexpected error. Check the accompanying ISAM error code for more detailed information on the cause. Possible causes include hardware errors and locking conflicts.</p>\n</blockquote>\n\n<p>You'll need to track the ISAM error (sqca.sqlerrd[1] in ESQL/C) to get some more information; it should be an error number with absolute value between 100 and 199. This probably means there is a problem of some sort on your production system.</p>\n\n<p>Note that updating a non-existent row with a searched UPDATE should simply report zero rows updated successfully. In a MODE ANSI database, you would get a status of 100 (SQLNOTFOUND) instead of 0 (no error). If you're doing a WHERE CURRENT OF update and the row's gone missing, then there's something weird going on indeed \u2014 it shouldn't happen (because it means you didn't get a lock on the row when you selected it, but someone managed to delete the row even though you should have had it locked). If you didn't use the FOR UPDATE clause, then the WHERE CURRENT OF should have a more specific error.</p>\n\n<p><sup><em>At this point, the question was updated to show the error information.</em></sup></p>\n\n<p>Curious message: I ran</p>\n\n<pre><code>create table sample\n(\n    serial_number integer not null primary key,\n    value varchar(30) not null\n);\ninsert into sample values(123, 'one hundred and twenty-three');\nupdate sample set serial_number = 124 where serial_number = 99;\n</code></pre>\n\n<p>which gives a status of 0 (and reports 0 rows updated).   Your message has <code>-100</code> as the ISAM error; that's the message for 'ISAM error: duplicate value for a record with unique key'.</p>\n\n<p>But when I try:</p>\n\n<pre><code>insert into sample values(99, 'ninety-nine');\nupdate sample set serial_number = 123 where serial_number = 99;\n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>SQL -268: Unique constraint (jleffler.u160_350) violated.\nISAM -100: ISAM error:  duplicate value for a record with unique key.\n</code></pre>\n\n<p>That's about what I'd expect.  I note that you can't directly update a column of type SERIAL (or SERIAL8 or BIGSERIAL): you get <code>SQL -232: A SERIAL column (s) may not be updated</code> (where <code>s</code> was the name of the serial column I tried to update to generate the message \u2014 it's not a bad plural in the message).</p>\n\n<p>Since the primary message for error -346 indicates that there could be a problem in the database, it would be worth running ON-Check (<a href=\"https://www.ibm.com/support/knowledgecenter/SSGU8G_12.1.0/com.ibm.adref.doc/ids_adr_0369.htm\" rel=\"nofollow\"><code>oncheck</code></a>) on the system to see whether that table is all OK.  If you're not in the habit of running ON-Check, you'll need to look up the options.  I'd probably do some general checks (e.g. <code>oncheck -cr</code> to check the reserved pages) before going on to validate the table and the indexes where the problem is occurring (<code>oncheck -ci</code> and <code>oncheck -cd</code>).  It may be worth using <code>-cR</code>, <code>-cI</code>, <code>-cD</code> options to get more information.</p>\n"}], "owner": {"reputation": 809, "user_id": 18657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55c2dc25e10f8df88435154d45c82a16?s=128&d=identicon&r=PG", "display_name": "Liju Mathew", "link": "https://stackoverflow.com/users/18657/liju-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1322, "favorite_count": 0, "accepted_answer_id": 37711598, "answer_count": 1, "score": 1, "last_activity_date": 1465420507, "creation_date": 1465404399, "last_edit_date": 1465420507, "question_id": 37708383, "link": "https://stackoverflow.com/questions/37708383/the-informix-is-not-throwing-error-when-trying-to-update-a-row-which-is-not-pres", "title": "The Informix is not throwing error when trying to update a row which is not present?", "body": "<p>We are analyzing an Informix behavior in production. When trying to update a row which is not present the application is getting \"-346: Could not update a row in the table\" error in production.</p>\n\n<p>However, when we try the same in the dev region, the application works fine.</p>\n\n<p>Whether the Informix should throw error always when updating a row which is not present or is it configurable at Informix level?</p>\n\n<p>The application is written in C and the corresponding update queries are present in the \".ec\" program.</p>\n\n<p>Also, is there any other way Informix throws a -346 error?</p>\n\n<blockquote>\n  <p>Edit: The SQL is as follows:</p>\n\n<pre><code>update &lt;table&gt; set serial_number = &lt;number1&gt; where serial_number = &lt;number2&gt; \n</code></pre>\n  \n  <p>The SQL Error is:</p>\n\n<pre><code> Execute SQL ERROR\n\n    SQL CODE = -346\n    SQLERM =\n    SQLERRP =\n    SQLERRD[0] = 1\n    SQLERRD[1] = -100\n    SQLERRD[2] = 0\n    SQLERRD[3] = 1\n    SQLERRD[4] = 56\n    SQLERRD[5] = 0\n    SQLWARN =\n</code></pre>\n</blockquote>\n\n<p>Edit Again:</p>\n\n<p>The source code is as follows:</p>\n\n<pre><code>const char *sql = \"update table_not_named set serial_number = ? where serial_number = ?\"; \n\nif ( prepared_sql == 0 )\n{\n    exec sql prepare update_sql from :sql;\n    if ( sqlca.sqlcode != SQL_OK )\n    {\n        logSqlError( log_err, __func__, \"Prepare\" );\n        return FAIL;\n    }\n    prepared_sql = 1;\n}\n\nexec sql execute update_sql using :db_new_serial_number, :db_old_serial_number;\n\nif ( sqlca.sqlcode != SQL_OK )\n{\n    logSqlError( log_err, __func__, \"Execute\" );\n    return FAIL;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "sockets", "networking", "rtems"], "comments": [{"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1465404799, "post_id": 37708381, "comment_id": 62891014, "body": "is it possible your <code>bind</code> is happening before the interface has completed setting up?  does it continue to fail if you continue to retry the <code>bind</code>?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "edited": false, "score": 0, "creation_date": 1465404871, "post_id": 37708381, "comment_id": 62891044, "body": "@mark The bind is well after the setup, both setup options occur at boot before the socket setup can be attempted."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465896877, "post_id": 37708381, "comment_id": 63080591, "body": "Probably something change since my rtems version (<code>4.6.1</code>) but <code>rtems_bsdnet_ifconfig</code> it is a struct not a function..."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465914868, "post_id": 37708381, "comment_id": 63094109, "body": "@LPs It is both, a struct exists and so does a function, the function doesnt seem to have any documentation otherwise i would link it, it can be found in <code>rtems_glue.c</code>."}, {"owner": {"reputation": 810, "user_id": 1649108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc64fd6d40ba59f8dc7a98b6e9792b11?s=128&d=identicon&r=PG", "display_name": "grasbueschel", "link": "https://stackoverflow.com/users/1649108/grasbueschel"}, "edited": false, "score": 0, "creation_date": 1466108374, "post_id": 37708381, "comment_id": 63194066, "body": "Disclaimer: No expert here, just went through the code a bit. Do you explicitly set sa_family to AF_INET? <a href=\"https://github.com/RTEMS/rtems/blob/4.9/cpukit/libnetworking/netinet/in_pcb.c#L159\" rel=\"nofollow noreferrer\">Seems</a> as if this isn&#39;t required, but should be set as it is used in the <a href=\"https://github.com/RTEMS/rtems/blob/4.9/cpukit/libnetworking/net/if.c#L170\" rel=\"nofollow noreferrer\">comparision</a>. Another hint, as the <code>sockaddr</code> structs are byte-compared: do you <code>memset</code> your sockaddr struct to 0 before configuring it&#39;s values and passing to <code>bind</code>?"}, {"owner": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466154047, "post_id": 37708381, "comment_id": 63209827, "body": "Have you tried to step through the <code>bind()</code> call with a debugger and look where the <code>return EADDRNOTAVAIL</code> exactly happens?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466176069, "post_id": 37708381, "comment_id": 63224466, "body": "@exilit Unfortunately we have no active debugger, this only occurs on the actual embedded hardware, all i can use is print statements."}, {"owner": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466176648, "post_id": 37708381, "comment_id": 63224783, "body": "Do you compile the library yourself?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466177600, "post_id": 37708381, "comment_id": 63225374, "body": "@exilit We compile the entire OS ourselves. But there is no interface to the embedded hardware that could use a debugger even if RTEMS implemented one."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 810, "user_id": 1649108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc64fd6d40ba59f8dc7a98b6e9792b11?s=128&d=identicon&r=PG", "display_name": "grasbueschel", "link": "https://stackoverflow.com/users/1649108/grasbueschel"}, "edited": false, "score": 0, "creation_date": 1466180188, "post_id": 37708381, "comment_id": 63226819, "body": "@grasbueschel We do both those things, i have edited the question to reflect this. <code>sockaddr_in localSocketAddress = {0};</code>"}, {"owner": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466180449, "post_id": 37708381, "comment_id": 63226956, "body": "That is not why I am asking. Is there any chance that you include some debug output at the relevant places and debug it that way? We will have to put some thoughts and effort into figuring out this &quot;relevant&quot; places, but that might be worth trying."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466181743, "post_id": 37708381, "comment_id": 63227658, "body": "@exilit Yes, i can put debug prints into the operating system, it uses BSDNet libs for everything networking. I would then be able to recompile the operating system and see the prints, but i usually have to be very careful, printing too much can screw up the timing. I hate doing that ..."}, {"owner": {"reputation": 1099, "user_id": 2980895, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9bb82b18f4f03a6a9138e5cda05a73c9?s=128&d=identicon&r=PG&f=1", "display_name": "exilit", "link": "https://stackoverflow.com/users/2980895/exilit"}, "edited": false, "score": 0, "creation_date": 1466182086, "post_id": 37708381, "comment_id": 63227834, "body": "I hate that,  too. But as long nobody answers I think you have not much choice."}, {"owner": {"reputation": 810, "user_id": 1649108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc64fd6d40ba59f8dc7a98b6e9792b11?s=128&d=identicon&r=PG", "display_name": "grasbueschel", "link": "https://stackoverflow.com/users/1649108/grasbueschel"}, "edited": false, "score": 0, "creation_date": 1466191554, "post_id": 37708381, "comment_id": 63232491, "body": "@Ben alright, I see. Another thing to check, though I don&#39;t think that it&#39;s the core of the issue here: There&#39;s a <code>sin_len</code> member of <a href=\"https://github.com/RTEMS/rtems/blob/4.9/cpukit/libnetworking/netinet/in.h#L70\" rel=\"nofollow noreferrer\"><code>sockaddr_in</code></a> which you should initialize to <code>sizeof struct sockaddr_in</code>."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 810, "user_id": 1649108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc64fd6d40ba59f8dc7a98b6e9792b11?s=128&d=identicon&r=PG", "display_name": "grasbueschel", "link": "https://stackoverflow.com/users/1649108/grasbueschel"}, "edited": false, "score": 0, "creation_date": 1466643183, "post_id": 37708381, "comment_id": 63406657, "body": "@grasbueschel So i gave this a go, doesn&#39;t make any difference unfortunately."}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 849635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d891c000f7096bb4cb3f096c6477fe1d?s=128&d=identicon&r=PG", "display_name": "Kean", "link": "https://stackoverflow.com/users/849635/kean"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1468263700, "post_id": 38312943, "comment_id": 64045009, "body": "Why should it be a comment? Just asking for future clarity&#39;s sake. Also did you even TRY my suggestion? Those fields are supposed to be in network byte order and using htons() and htonl() is &quot;correct&quot;."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468269129, "post_id": 38312943, "comment_id": 64047799, "body": "@Ben A solution is an answer, not a comment. You are mistaken and Kean is not."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468269328, "post_id": 38312943, "comment_id": 64047920, "body": "@Kean, my apologies about the comment thing, i will try your solution. However, do we expect it to work? If you read the question the socket bind works just fine in every case unless i run <code>rtems_bsdnet_ifconfig(</code> to reconfigure my network address. Why would it ever work if the network address was in the wrong order?"}, {"owner": {"reputation": 552, "user_id": 849635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d891c000f7096bb4cb3f096c6477fe1d?s=128&d=identicon&r=PG", "display_name": "Kean", "link": "https://stackoverflow.com/users/849635/kean"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1468272940, "post_id": 38312943, "comment_id": 64049637, "body": "@Ben I think I assumed that the actual address you were connecting to changed after that rtems call. I should not have assumed such, but since I did my reasoning was that in the first case it could have been some constant you had assigned to localAddress, whereas after making the change you set it to something else. Assumption is the mother of all failures. Sorry about that."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1472509560, "post_id": 38312943, "comment_id": 65770757, "body": "Just so we are clear about this, unfortunately this solution didn&#39;t work."}], "tags": [], "owner": {"reputation": 552, "user_id": 849635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d891c000f7096bb4cb3f096c6477fe1d?s=128&d=identicon&r=PG", "display_name": "Kean", "link": "https://stackoverflow.com/users/849635/kean"}, "is_accepted": false, "score": 1, "last_activity_date": 1468269360, "last_edit_date": 1468269360, "creation_date": 1468258645, "answer_id": 38312943, "question_id": 37708381, "link": "https://stackoverflow.com/questions/37708381/failure-to-bind-socket-when-custom-ip-is-set-for-ethernet-adapter/38312943#38312943", "title": "Failure to bind socket when custom ip is set for ethernet adapter", "body": "<p>You didn't mention the architecture you are running on, but you are setting the port and address in local byte order, which may not be the same as network byte order. The very first thing I would try is:</p>\n\n<p><code>localSocketAddress.sin_port = htons (localPort);\nlocalSocketAddress.sin_addr.s_addr = htonl (localAddress);</code></p>\n\n<p>This will also make your code more portable, in case that is NOT your problem (i.e. you are running on a big-endian host) and you one day try to compile on a different system that is little endian.</p>\n"}], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1468269360, "creation_date": 1465404397, "last_edit_date": 1495542150, "question_id": 37708381, "link": "https://stackoverflow.com/questions/37708381/failure-to-bind-socket-when-custom-ip-is-set-for-ethernet-adapter", "title": "Failure to bind socket when custom ip is set for ethernet adapter", "body": "<h2>The problem</h2>\n\n<p>On our system running RTEMS 4.9.2 we are experiencing a very odd issue with socket communications. We are setting up a socket and using the following command to bind:</p>\n\n<pre><code>// Bind the socket to set the local port\nsockaddr_in localSocketAddress = {0};\nlocalSocketAddress.sin_family = AF_INET;\nlocalSocketAddress.sin_port = (u_short)localPort;\nlocalSocketAddress.sin_addr.s_addr = localAddress;\n\nif (bind( mSocket, (sockaddr *)&amp;localSocketAddress, sizeof(sockaddr_in)) == SOCKET_ERROR)\n{\n    int errorOut = errno;\n    ...\n</code></pre>\n\n<p>And this works for UDP communications except in a strange specific scenario which is explained below. The problem that we experience is a failure of this <code>bind</code> call even though the setup is correct. We get the error <code>125</code> which for RTEMS is <code>EADDRNOTAVAIL</code>:</p>\n\n<blockquote>\n  <p>A nonexistent interface was requested or the requested address\n                was not local.</p>\n</blockquote>\n\n<h2>The Apparent Cause</h2>\n\n<p>At boot of the device we can set up our network in 1 of 2 ways:</p>\n\n<ol>\n<li><p>The Network IP and SUBNET is autoconfigured based on what is in the default bootloader (UBOOT), and is set up through the RTEMS OS. </p></li>\n<li><p>The RTEMS function <code>rtems_bsdnet_ifconfig</code> is called to change the ip address of the sole ethernet interface after boot time. </p></li>\n</ol>\n\n<p>For clarification, option 2 is called like this:</p>\n\n<pre><code>rtems_bsdnet_ifconfig(eth_interface, SIOCSIFADDR, &amp;ipaddr);\n</code></pre>\n\n<p>If the network is set up as indicated by option 1, everything works as expected, but if option 2 is used (even in the case where the setup matches the network options defined by option 1) then the socket bind fails. </p>\n\n<p><strong>Is there a known reason or bug for RTEMS that indicates that this bind would fail if you reconfigure your IP?</strong></p>\n\n<h2>Additional Information</h2>\n\n<ul>\n<li><p>We are setting up a new IP address (option 2) using a method that essentially uses <code>ioctl(\"eht1\", SIOCSIFADDR, ...)</code>.</p></li>\n<li><p>If we bind our socket without specifying a local ADDRESS (ie use <code>INADDR_ANY</code>) then it works in any case. </p></li>\n<li><p>The <code>rtems_bsdnet_ifconfig</code> is a simple interface for the <code>ioctl</code> function. It is from <code>rtems_glue.c</code> and has the function signiture <code>int rtems_bsdnet_ifconfig(const char *ifname, uint32_t cmd, void *param)</code></p></li>\n<li><p>All normal network functions seem to work except for this bind.</p></li>\n<li><p>After looking at <a href=\"https://stackoverflow.com/questions/5308090/set-ip-address-using-siocsifaddr-ioctl\">this</a> i thought maybe I needed to do more in resetting my IP address. But this doesn't work , using the first answer or even doing anything with <code>SIOCSIFFLAGS</code> causes all network functionality to cease. </p></li>\n</ul>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1465407219, "post_id": 37707916, "comment_id": 62892404, "body": "You can get rid of all of the curly braces inside the case blocks. They serve no purpose other than to bloat the code."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 1, "last_activity_date": 1465402959, "creation_date": 1465402959, "answer_id": 37707916, "question_id": 37707855, "link": "https://stackoverflow.com/questions/37707855/error-message-when-input-a-character-in-c/37707916#37707916", "title": "Error message when input a character in C", "body": "<ul>\n<li>Initialize <code>Menu</code> before using, or you will invoke <em>undefined behavior</em>.</li>\n<li>Check if reading is successful, and if not remove junk from the stream.</li>\n<li>Add <code>#include &lt;stdlib.h&gt;</code> to use the function <code>exit()</code>.</li>\n</ul>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int Menu = 0;\n    while (Menu &gt;= 0)\n    {\n        printf(\"\\n(1) y\");\n        printf(\"\\n(2) exactness\");\n        printf(\"\\n(3) x\");\n        printf(\"\\n\\nTo exit press (0).\");\n        printf(\"\\n\\nYour choice: \");\n        if (scanf(\"%d\", &amp;Menu) != 1)\n        {\n            /* read error */\n            Menu = 9999; /* assign dummy value */\n            scanf(\"%*s\"); /* remove junk */\n        }\n\n        switch (Menu)\n        {\n        case 0:\n            {\n                exit (0);\n            }\n        case 1:\n            {\n                printf(\"Please enter a value for y: \");\n                break;\n            }\n        case 2:\n            {\n                printf(\"Please enter the exactness for the calculation: \");\n                break;\n            }\n        case 3:\n            {\n                printf(\"Please enter a value for x: \");\n                break;\n            }\n        default:\n            {\n                printf(\"Wrong input\\n\");\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6421110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9fb1ec71274e38e784b5629325393bf?s=128&d=identicon&r=PG", "display_name": "hello", "link": "https://stackoverflow.com/users/6421110/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37707916, "answer_count": 1, "score": 0, "last_activity_date": 1465402959, "creation_date": 1465402770, "question_id": 37707855, "link": "https://stackoverflow.com/questions/37707855/error-message-when-input-a-character-in-c", "title": "Error message when input a character in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nint Menu;\nwhile (Menu &gt;= 0)\n{\n    printf(\"\\n(1) y\");\n    printf(\"\\n(2) exactness\");\n    printf(\"\\n(3) x\");\n    printf(\"\\n\\nTo exit press (0).\");\n    printf(\"\\n\\nYour choice: \");\n    scanf(\"%d\", &amp;Menu);\n\n        switch (Menu)\n        {\n        case 0:\n            {\n                exit (0);\n            }\n        case 1:\n            {\n                printf(\"Please enter a value for y: \");\n                break;\n            }\n        case 2:\n            {\n                printf(\"Please enter the exactness for the calculation: \");\n                break;\n            }\n        case 3:\n            {\n                printf(\"Please enter a value for x: \");\n                break;\n            }\n        default:\n            {\n                printf(\"Wrong input\\n\");\n            }\n        }\n\n}\n\n}\n</code></pre>\n\n<p>If I input:</p>\n\n<ul>\n<li>any number (except 0,1,2, and 3), result is \"Wrong input\" (CORRECT)</li>\n<li>any symbol, letter or character, result is an infinite loop (WRONG!, this should be \"Wrong input\" too)</li>\n</ul>\n\n<p>Any idea how to make it works? :) Can someone please correct my code?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1465402742, "post_id": 37707820, "comment_id": 62889657, "body": "Using floating-point function <code>pow</code> for integers may not be good because floating-point aritimetic may contain errors."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1465402774, "post_id": 37707820, "comment_id": 62889681, "body": "Your code won&#39;t compile because <code>)</code> is missing in the line <code>int a=pow(10, (lenght-1-i);</code>. Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465403802, "post_id": 37707820, "comment_id": 62890376, "body": "Suggest <code>integer = 10 * integer + string[i] - 48;</code> instead of the funky <code>pow()</code> computation you&#39;re using now."}], "answers": [{"tags": [], "owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "is_accepted": true, "score": 2, "last_activity_date": 1465404880, "last_edit_date": 1495540352, "creation_date": 1465404880, "answer_id": 37708538, "question_id": 37707820, "link": "https://stackoverflow.com/questions/37707820/result-decremented-by-1-during-a-conversion-between-string-to-integer-and-only/37708538#37708538", "title": "Result Decremented by 1 during a conversion between string to integer (and only with specific values of string length)", "body": "<p>I'm pretty sure it's just rounding errors. When you cast 0.999999 as an int you get 0. Thus, any floating point error that results in a number like 2047.999999 will be interpreted as 2047 instead of the more accurate 2048, which will look like it's decremented by 1.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/2402272/john-bollinger\">John Bollinger</a> suggested in a comment, just add each character to 10 times the current value:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint string_to_int(char *string) {\n  int i=0;\n  int integer=0;\n  int length = strlen(string);\n  if (string[0] == '-') {\n    for (i=1; i&lt;length; i++) {\n      integer = 10 * integer + string[i]-'0';\n    }\n\n    return -integer;\n  } else {\n    return 0;\n  }\n}\n\nint main(int argc, char **argv) {\n  if (argc &lt; 2)\n    return 1;\n\n  printf(\"Result: %d\\n\", string_to_int(argv[1]));\n  return 0;\n}\n</code></pre>\n\n<p>I prefer to say '0' rather than 48 since it clarifies your intent (converting a character to the digit it represents).</p>\n"}, {"tags": [], "owner": {"reputation": 3246, "user_id": 6410484, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TtFQRjuFni4/AAAAAAAAAAI/AAAAAAAAALs/MvnswTqvKe0/photo.jpg?sz=128", "display_name": "chema989", "link": "https://stackoverflow.com/users/6410484/chema989"}, "is_accepted": false, "score": 1, "last_activity_date": 1465408021, "last_edit_date": 1465408021, "creation_date": 1465406416, "answer_id": 37708991, "question_id": 37707820, "link": "https://stackoverflow.com/questions/37707820/result-decremented-by-1-during-a-conversion-between-string-to-integer-and-only/37708991#37708991", "title": "Result Decremented by 1 during a conversion between string to integer (and only with specific values of string length)", "body": "<p>I suggest the next code, it's based in the recommendations made in comments:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint StringToInt(const char* string){\n    int lenght = strlen(string);\n    if (lenght &amp;&amp; string[0] == '-'){\n        int integer = 0;\n        for (int i = 1; i &lt; lenght; ++i) {\n            // Check if it is not a character valid.\n            if (string[i] &lt; '0' || string[i] &gt; '9') {\n                // Returns the integer processed so far.\n                return -integer;\n            }\n            integer = 10 * integer + string[i] - '0'; // Like John Bollinger suggests\n        }\n        return -integer;\n    } else {\n        return 0;\n    }\n}\n\n\nint main(int argc, char **argv) {\n    fprintf(stderr, \"%d\\n\", StringToInt(\"\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-123\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-1736734\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-1999\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-123\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-234\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-180.\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-200.99\"));\n    fprintf(stderr, \"%d\\n\", StringToInt(\"-aaa\"));\n\n    const char* msg = \"-301\";\n    fprintf(stderr, \"%d\\n\", StringToInt(msg));\n    return 0;\n}\n</code></pre>\n\n<p>I suggest check if the character is not valid (i.e: it is not between '0' and '9'):</p>\n\n<pre><code>if (string[i] &lt; '0' || string[i] &gt; '9') {\n    // Returns the integer processed so far.\n    return -integer;\n}\n</code></pre>\n\n<p>Once you find a character not valid, return the integer processed so far.</p>\n\n<p>Output:</p>\n\n<pre><code>0\n-123\n-1736734\n-1999\n-123\n-234\n-180\n-200\n0\n-301\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 6333748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cVXZKmYf0uA/AAAAAAAAAAI/AAAAAAAAABE/5vBHPWQctJI/photo.jpg?sz=128", "display_name": "Chief096", "link": "https://stackoverflow.com/users/6333748/chief096"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37708538, "answer_count": 2, "score": 1, "last_activity_date": 1465408021, "creation_date": 1465402668, "last_edit_date": 1465405187, "question_id": 37707820, "link": "https://stackoverflow.com/questions/37707820/result-decremented-by-1-during-a-conversion-between-string-to-integer-and-only", "title": "Result Decremented by 1 during a conversion between string to integer (and only with specific values of string length)", "body": "<p>I'm writing a program in C that converts a string of n characters into an integer only if this string's first character is the minus symbol. The program is the following:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint StringToInt(char *string){\n    int i=0;\n    int integer=0;\n    int length = strlen(string);\n    if (string[0]=='-'){\n        for (i=1; i&lt;length; i++){\n        integer += (string[i]-48)*pow(10, (length-1-i));\n        }return (integer*(-1));\n    }else{\n        return 0;\n    }\n}\n</code></pre>\n\n<p>My program works fine when I call the function above with a string with an odd value of string length, while otherwise it returns the right value but decremented by one. Now I'll make it clearer with an example: suppose I create a string called \"Number\" and I assign to this the number \"-234\". If we put this string in the function above, the string's length will be calculated as 4. The function in this case won't return -234, but -233. If, instead of -234, I had assigned to the string a number like \"-1456\", the function would have returned the correct number.</p>\n"}, {"tags": ["c", "ffmpeg"], "answers": [{"comments": [{"owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465409532, "post_id": 37709330, "comment_id": 62893756, "body": "I actually tried the first  one when trying to solve this but when I ran Valgrind on my program, I got invalid read errors. I figured that converting to 4:4:4 might be my only option. I do want it to handle all chroma subsampling sources but everything should be YUV colorspace."}, {"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "reply_to_user": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465411598, "post_id": 37709330, "comment_id": 62894943, "body": "can you show the code that valgrind complained about, along with the actual valgrind warnings?"}, {"owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465412523, "post_id": 37709330, "comment_id": 62895487, "body": "Ronald, see my edit. Any help would be great! I&#39;m still getting feel for coding in straight C."}, {"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "reply_to_user": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465467721, "post_id": 37709330, "comment_id": 62917916, "body": "I don&#39;t see how your code and my first fragment are identical, yours uses x/y in data[1]/[2], whereas mine uses uvx/uvy, which is x&gt;&gt;1 and y&gt;&gt;1. So yes, yours overreads and causes valgrind errors, whereas mine is fine."}, {"owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465489361, "post_id": 37709330, "comment_id": 62933913, "body": "I&#39;ll take another look and get back to you."}, {"owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465504914, "post_id": 37709330, "comment_id": 62942810, "body": "oh I see the differences now. I&#39;m new to c and this is the first time I&#39;ve had a reason to use the binary shift operator.  Thanks!"}, {"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "reply_to_user": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "edited": false, "score": 0, "creation_date": 1465524077, "post_id": 37709330, "comment_id": 62948289, "body": "Oh I see, sorry about that. So, x &gt;&gt; y is the same as x / (1 &lt;&lt; y) which is roughly the same as x / pow(2, y). So x &gt;&gt; 1 is just x / 2. Sorry about that."}], "tags": [], "owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "is_accepted": true, "score": 1, "last_activity_date": 1465407652, "creation_date": 1465407652, "answer_id": 37709330, "question_id": 37706928, "link": "https://stackoverflow.com/questions/37706928/convert-ffmpeg-frame-into-array-of-yuv-pixels-in-c/37709330#37709330", "title": "Convert ffmpeg frame into array of YUV pixels in C", "body": "<p>If you are OK with hardcoding the chroma subsampling, e.g. you know the frame data format is 4:2:0, it's simple:</p>\n\n<pre><code>int uvy = y &gt;&gt; 1, uvx = x &gt;&gt; 1;\nuint8_t u_val = pFrame-&gt;data[1][pFrame-&gt;linesize[1] * uvy + uvx];\nuint8_t v_val = pFrame-&gt;data[2][pFrame-&gt;linesize[2] * uvy + uvx];\n</code></pre>\n\n<p>If you want it to be more generic, use this:</p>\n\n<pre><code>AVPixFmtDescriptor *desc = av_pix_fmt_desc_get(pFrame-&gt;format);\nint uvy = y &gt;&gt; desc-&gt;log2_chroma_h, uvx = x &gt;&gt; desc-&gt;log2_chroma_w;\nuint8_t u_val = pFrame-&gt;data[1][pFrame-&gt;linesize[1] * uvy + uvx];\nuint8_t v_val = pFrame-&gt;data[2][pFrame-&gt;linesize[2] * uvy + uvx];\n</code></pre>\n\n<p>That should work for all cases to get pixels at any x,y location. However, don't use this to convert buffers of any chroma subsampling into 4:4:4 arrays, it will have visual artifacts. For display on-screen, use the original data and use per-plane sizing in e.g. your openGL shaders to convert the original arrays on-screen to the desired target resolution. To convert to 4:4:4 for other use cases, use <a href=\"https://www.ffmpeg.org/libswscale.html\" rel=\"nofollow\">libswscale</a>.</p>\n"}], "owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 37709330, "answer_count": 1, "score": 0, "last_activity_date": 1465446223, "creation_date": 1465399994, "last_edit_date": 1465446223, "question_id": 37706928, "link": "https://stackoverflow.com/questions/37706928/convert-ffmpeg-frame-into-array-of-yuv-pixels-in-c", "title": "Convert ffmpeg frame into array of YUV pixels in C", "body": "<p>I'm using the ffmpeg C libraries and trying to convert an AVFrame into a 2d array of pixels with YUV* components for analysis. I figured out how to convert the Y component for each pixel.:</p>\n\n<pre><code>uint8_t y_val = pFrame-&gt;data[0][pFrame-&gt;linesize[0] * y + x]; \n</code></pre>\n\n<p>Since all frames have a Y component this is easy. However most digital video do not have a 4:4:4 chroma subsampling, so getting the UV components is stumping me. </p>\n\n<p>I'm using straight C for this project. No C++. An ideas?</p>\n\n<p>*Note: Yes, I know it's technically YCbCr and not YUV.</p>\n\n<p>Edit:</p>\n\n<p>I'm rather new to C so it might not be the prettiest code out there. </p>\n\n<p>When I try: </p>\n\n<pre><code>VisYUVFrame *VisCreateYUVFrame(const AVFrame *pFrame){\n    VisYUVFrame *tmp = (VisYUVFrame*)malloc(sizeof(VisYUVFrame));\n    if(tmp == NULL){ return NULL;}\n    tmp-&gt;height = pFrame-&gt;height;\n    tmp-&gt;width = pFrame-&gt;width;\n\n    tmp-&gt;data = (PixelYUV***)malloc(sizeof(PixelYUV**) * pFrame-&gt;height);\n    if(tmp-&gt;data == NULL) { return NULL;};\n\n    for(int y = 0; y &lt; pFrame-&gt;height; y++){\n        tmp-&gt;data[y] = (PixelYUV**)malloc(sizeof(PixelYUV*) * pFrame-&gt;width);\n        if(tmp-&gt;data[y] == NULL) { return NULL;}\n\n        for(int x = 0; x &lt; pFrame-&gt;width; x++){\n            tmp-&gt;data[y][x] = (PixelYUV*)malloc(sizeof(PixelYUV*));\n            if(tmp-&gt;data[y][x] == NULL){ return NULL;};\n            tmp-&gt;data[y][x]-&gt;Y = pFrame-&gt;data[0][pFrame-&gt;linesize[0] * y + x];\n            tmp-&gt;data[y][x]-&gt;U = pFrame-&gt;data[1][pFrame-&gt;linesize[1] * y + x];\n            tmp-&gt;data[y][x]-&gt;V = pFrame-&gt;data[2][pFrame-&gt;linesize[2] * y + x];\n\n        }\n    }\n\n    return tmp;\n</code></pre>\n\n<p>Luma works but when I run Valgrind, I get</p>\n\n<blockquote>\n  <p>\n   0x26\n   1\n    InvalidRead\n    Invalid read of size 1\n    \n      \n        0x100003699\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        VisCreateYUVFrame\n        /Users/hborcher/ClionProjects/borcherscope/lib\n        visualization.c\n        145\n      \n      \n        0x100006B5B\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        render\n        /Users/hborcher/ClionProjects/borcherscope/lib/decoder\n        simpleDecoder2.c\n        253\n      \n      \n        0x100002D24\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        main\n        /Users/hborcher/ClionProjects/borcherscope/src\n        createvisual2.c\n        93\n      \n    \n    Address 0x10e9f91ef is 0 bytes after a block of size 92,207 alloc'd\n    \n      \n        0x100013EEA\n        /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so\n        malloc_zone_memalign\n      \n      \n        0x1084B5416\n        /usr/lib/system/libsystem_malloc.dylib\n        posix_memalign\n      \n      \n        0x10135D317\n        /usr/local/Cellar/ffmpeg/3.0.2/lib/libavutil.55.17.103.dylib\n        av_malloc\n      \n    \n  </p>\n  \n  <p>\n    0x27\n    1\n    InvalidRead\n    Invalid read of size 1\n    \n      \n        0x1000036BA\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        VisCreateYUVFrame\n        /Users/hborcher/ClionProjects/borcherscope/lib\n        visualization.c\n        147\n      \n      \n        0x100006B5B\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        render\n        /Users/hborcher/ClionProjects/borcherscope/lib/decoder\n        simpleDecoder2.c\n        253\n      \n      \n        0x100002D24\n        /Users/hborcher/Library/Caches/CLion2016.2/cmake/generated/borcherscope-8e83e7dd/8e83e7dd/Debug/VisCreator2\n        main\n        /Users/hborcher/ClionProjects/borcherscope/src\n        createvisual2.c\n        93\n      \n    \n    Address 0x10e9f91ef is 0 bytes after a block of size 92,207 alloc'd\n    \n      \n        0x100013EEA\n        /usr/local/Cellar/valgrind/3.11.0/lib/valgrind/vgpreload_memcheck-amd64-darwin.so\n        malloc_zone_memalign\n      \n      \n        0x1084B5416\n        /usr/lib/system/libsystem_malloc.dylib\n        posix_memalign\n      \n      \n        0x10135D317\n        /usr/local/Cellar/ffmpeg/3.0.2/lib/libavutil.55.17.103.dylib\n        av_malloc\n      \n    \n  </p>\n</blockquote>\n"}, {"tags": ["c", "string", "gets", "puts"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 4, "creation_date": 1465399341, "post_id": 37706679, "comment_id": 62887200, "body": "You shouldn&#39;t use <code>gets()</code>, which has unavoidable risk of buffer overrun, deprecated in C99 and removed in C11."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1465399437, "post_id": 37706679, "comment_id": 62887266, "body": "<code>printf(&quot;\\ntxt lenght:%d&quot;,strlen(text));</code> will invoke <i>undefined behavior</i> for passing data having wrong type: <code>%d</code> calls for <code>int</code>, but what is returned from <code>strlen</code> is <code>size_t</code>."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1465399477, "post_id": 37706679, "comment_id": 62887296, "body": "You are using variable having automatic storage duration <code>text</code> without initializing and invoking <i>undefined behavior</i>."}, {"owner": {"reputation": 23, "user_id": 6213594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154109978677485/picture?type=large", "display_name": "Matija Mitrovi\u0107", "link": "https://stackoverflow.com/users/6213594/matija-mitrovi%c4%87"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1465399792, "post_id": 37706679, "comment_id": 62887558, "body": "Thanks,i used int lenVar = strlen(entry) and used it it for loop(i=0;i&lt;lenVar;i++) and it is working"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465399855, "post_id": 37706679, "comment_id": 62887607, "body": "<code>int i;</code> should be <code>size_t i;</code> and <code>printf(&quot;\\ntxt lenght:%d&quot;,strlen(text));</code> sdhould be <code>printf(&quot;\\ntxt lenght:%zu&quot;,strlen(text));</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1465400242, "post_id": 37706679, "comment_id": 62887932, "body": "<code>gets</code> is not standard C! <b>Never ever</b> use it! Use <code>fgets</code> instead. (Modern implementations of the standard library should warn about code using it)"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1465400316, "post_id": 37706679, "comment_id": 62887986, "body": "By the way Your program has a big problem if the Input is bigger then 99"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1465400327, "post_id": 37706679, "comment_id": 62887993, "body": "&#39;length&#39; is &#39;length&#39; and not &#39;lenght&#39;"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465400607, "post_id": 37706679, "comment_id": 62888217, "body": "replace <code>if(entry[i] == &#39;K&#39; &amp;&amp; entry[i+1] == &#39;R&#39; &amp;&amp; entry[i+2] == &#39;A&#39; &amp;&amp; entry[i+3] == &#39;J&#39;){</code> with ==&gt;&gt;&gt; <code>if( strcmp(entry, &quot;KRAJ&quot;) == 0 ){</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1465400787, "post_id": 37707082, "comment_id": 62888337, "body": "<code>is never initialized, yet you call</code> it doesn&#39;t need to be, this is a common error. The call of <code>strcpy</code> is missing before <code>strcat</code> Of course that this program has a lot of other problems"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465401227, "post_id": 37707082, "comment_id": 62888674, "body": "@Michi One <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C Standard</a> definition of &quot;uninitialized&quot; is  <i>not  declared  with  an  initializer  and  no  assignment  to  it  has  been performed prior to use</i>.  Calling <code>strcpy()</code> would be an assignment. Note also that <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strcat.html\" rel=\"nofollow noreferrer\"><code>strcat()</code></a> requires that  both arguments be <code>NUL</code>-terminated strings."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465401651, "post_id": 37707082, "comment_id": 62888968, "body": "Agree, but what&#39;s happens if the input will be only 15 and you initialize the whole array with ZERO&#39;s?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465404060, "post_id": 37707082, "comment_id": 62890566, "body": "<code>Note also that strcat() requires that both arguments be NUL-terminated strings</code> Here is the part which you didn&#39;t understand when I said that the call of <code>strcpy</code> was missing."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1465400417, "creation_date": 1465400417, "answer_id": 37707082, "question_id": 37706679, "link": "https://stackoverflow.com/questions/37706679/gets-and-puts-showing-characters-that-i-did-not-enter/37707082#37707082", "title": "gets() and puts() showing characters that i did not enter", "body": "<blockquote>\n  <p>Let's say I write \"finish meKRAJ\" it would have to print only \"finish\n  me\" but it prints \"\u0107[]'finish me\"</p>\n</blockquote>\n\n<pre><code>char text[100];\n</code></pre>\n\n<p>is never initialized, yet you call</p>\n\n<pre><code>strncat(text,entry,i);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if(!flag2)strcat(text,entry);\n</code></pre>\n\n<p>Those two calls will append your strings to whatever garbage is in <code>text[100]</code> when your program starts.</p>\n"}], "owner": {"reputation": 23, "user_id": 6213594, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154109978677485/picture?type=large", "display_name": "Matija Mitrovi\u0107", "link": "https://stackoverflow.com/users/6213594/matija-mitrovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465400417, "creation_date": 1465399317, "last_edit_date": 1465399392, "question_id": 37706679, "link": "https://stackoverflow.com/questions/37706679/gets-and-puts-showing-characters-that-i-did-not-enter", "title": "gets() and puts() showing characters that i did not enter", "body": "<p>So I got the task to make program that will take input until I write <code>\"KRAJ\"</code>. But when I print it with <code>puts()</code> it will have 3 chars more in first 3 places. Let's say I write <code>\"finish meKRAJ\"</code> it would have to print only <code>\"finish me\"</code> but it prints <code>\"\u0107[]'finish me\"</code>   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    char text[100];\n    char entry[100];\n    int i;\n    int flag=1;\n    int flag2;\n    do{\n        printf(\"Enter txt:finish by writing KRAJ\\n\");\n        gets(entry);\n        for(i=0;i&lt;strlen(entry);i++){\n            if(entry[i] == 'K' &amp;&amp; entry[i+1] == 'R' &amp;&amp; entry[i+2] == 'A' &amp;&amp; entry[i+3] == 'J'){\n                strncat(text,entry,i);\n                flag=0;\n                flag2=1;\n                break;\n            }\n            else{\n                flag2=0;\n            }\n        }\n    if(!flag2)strcat(text,entry);\n    }while(flag);\n\n    printf(\"\\n You have entered:\\n\");\n    puts(text);\n    //testing first char\n\n    printf(\"\\nTesting first char:%c\",text[0]);\n    printf(\"\\ntxt lenght:%d\",strlen(text));\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "append"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1465399087, "post_id": 37706472, "comment_id": 62886996, "body": "If you want to read a whole line, don&#39;t use <code>scanf</code> using a convoluted format string, use <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465399360, "post_id": 37706472, "comment_id": 62887212, "body": "<code>scanf(&quot;%[^\\n]%*c&quot;, unos, &amp;c);</code> seems wrong to me"}, {"owner": {"reputation": 63, "user_id": 6058093, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e16c234ad153ba8b9a5fd53ea2b449e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Gvardijan", "link": "https://stackoverflow.com/users/6058093/antonio-gvardijan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1465399444, "post_id": 37706472, "comment_id": 62887271, "body": "@Joachim Pileborg input of code is working fine, the one with making a change is not working properly. We haven&#39;t get to fgets in class yet, so we can&#39;t use it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465399545, "post_id": 37706472, "comment_id": 62887357, "body": "@AntonioGvardijan so you are not allowed to use <code>fgets</code> (?!)."}, {"owner": {"reputation": 63, "user_id": 6058093, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e16c234ad153ba8b9a5fd53ea2b449e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Gvardijan", "link": "https://stackoverflow.com/users/6058093/antonio-gvardijan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465399755, "post_id": 37706472, "comment_id": 62887524, "body": "@Michael Walz no. LPs it&#39;s correct, this part works perfectly."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465399980, "post_id": 37706472, "comment_id": 62887702, "body": "@AntonioGvardijan did you try debugging your code ?"}, {"owner": {"reputation": 63, "user_id": 6058093, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e16c234ad153ba8b9a5fd53ea2b449e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Gvardijan", "link": "https://stackoverflow.com/users/6058093/antonio-gvardijan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465400211, "post_id": 37706472, "comment_id": 62887902, "body": "@Michael Walz yes, there is not a single error, but there needs to be something else so I can add remaining parts of string after a pointer ptr, but I just can&#39;t figure out how. String that I put inside first string just overlaps letters that doesn&#39;t have to be replaced."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1465400405, "post_id": 37706472, "comment_id": 62888062, "body": "You are overwriting the string with <code>strncpy</code>, so the behaviour of your program is correct. If you want to <i>insert</i> characters, well you must insert them by moving the end of the string further. Take a piece of paper and draw the contents of your <code>unos</code> buffer before and after the replacement."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465452569, "post_id": 37706472, "comment_id": 62908893, "body": "This is what gcc says about your first scanf..... <i>warning: too many arguments for format [-Wformat-extra-args]</i>"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465401712, "post_id": 37707190, "comment_id": 62889021, "body": "That&#39;s a comment rather than an answer."}], "tags": [], "owner": {"reputation": 475, "user_id": 5118690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a19269e7a06347dfe2c3a7e81d8d2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Missu", "link": "https://stackoverflow.com/users/5118690/missu"}, "is_accepted": false, "score": 0, "last_activity_date": 1465405984, "last_edit_date": 1465405984, "creation_date": 1465400734, "answer_id": 37707190, "question_id": 37706472, "link": "https://stackoverflow.com/questions/37706472/adding-new-string-in-the-middle-of-another-one-c/37707190#37707190", "title": "adding new string in the middle of another one - c", "body": "<p>Let's forget the endianness.\nWhen you use a string in C, you put a sequence of character terminated by <code>'\\0'</code> in the memory.</p>\n\n<p>Suppose you have the following string <code>char * str = \"string\";</code> which have the address <code>str</code>.\nBy using </p>\n\n<pre><code>ptr = strstr(str, \"i\");\n</code></pre>\n\n<p><code>ptr</code> value will be <code>str+3</code> (the address of the character <code>'i'</code>)\nSo imagine you try to replace <code>'i'</code> by <code>\"ae\"</code>.</p>\n\n<pre><code>strncpy(ptr, \"ae\", 2);\n</code></pre>\n\n<p>will write the <code>'a'</code> at the address pointed to by <code>ptr</code> (the <code>'i'</code>) and the <code>'e'</code> at the address pointed to by <code>ptr + 1</code> (here, it's the address of the <code>'n'</code>)\nIf the replaced substring is to small, you should shift all the followig characters.</p>\n\n<p>You can modify the end of your code by</p>\n\n<pre><code>printf(\"pointer : %d %p\", ptr, ptr);\nint len_substr = strlen(trazena_zamjena);\nif (l &gt; len_substr)\n  strncpy(ptr + l,  ptr + len_substr, strlen(ptr + len_substr));\nstrncpy(ptr, zamjena, l);\n</code></pre>\n\n<p>You have a similar problem if the string you add is smaller than the substring to remove.</p>\n"}], "owner": {"reputation": 63, "user_id": 6058093, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e16c234ad153ba8b9a5fd53ea2b449e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Gvardijan", "link": "https://stackoverflow.com/users/6058093/antonio-gvardijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465405984, "creation_date": 1465398750, "last_edit_date": 1465399699, "question_id": 37706472, "link": "https://stackoverflow.com/questions/37706472/adding-new-string-in-the-middle-of-another-one-c", "title": "adding new string in the middle of another one - c", "body": "<p>my task is to write a string, then write a part of that string that needs to be replaced with one other string. I managed to make it work but if the replaced string is longer that part of string that is needed to replace, it just \"eats\" some of letters. Can I get little help with this task ?\nExample of working code :</p>\n\n<p>Input:</p>\n\n<pre><code>This is a beautiful day.\nEND\n</code></pre>\n\n<p>Input2:</p>\n\n<pre><code>a be\n</code></pre>\n\n<p>Input3:</p>\n\n<pre><code>not a bee\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>This is not a beeautiful day.\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>This is not a beeful day.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#define MAX 1000\n\nmain(){\n    char unos[MAX+1];\n    int i = 0;\n    char c;\n    printf(\"Enter text. For end type END\\n\");\n    while (1){\n        scanf(\"%[^\\n]%*c\", unos, &amp;c);\n        i = strstr(unos, \"END\") - unos;\n        if (i &gt;= 0){\n            unos[i] = '\\0';\n            break;\n        }\n    }\n    char trazena_zamjena[MAX + 1] = \"\\0\";\n    char zamjena[MAX + 1];\n    printf(\"Enter part that needs to be replaced : \");\n    i = 0;\n    do{\n        scanf(\"%c\", &amp;trazena_zamjena[i]);\n        if (trazena_zamjena[i] == '\\n') {\n            trazena_zamjena[i] = '\\0';\n            break;\n        }\n        i++;\n    } while (trazena_zamjena[i] != '\\n');\n    printf(\"Enter replacing text : \");\n    i = 0;\n    do{\n        scanf(\"%c\", &amp;zamjena[i]);\n        if (zamjena[i] == '\\n') {\n            zamjena[i] = '\\0';\n            break;\n        }\n        i++;\n    } while (zamjena[i] != '\\n');\n    int l = i;\n    char *ptr;\n    ptr = strstr(unos, trazena_zamjena);\n    printf(\"pointer : %d %p\", ptr, ptr);\n    strncpy(ptr, zamjena, l);\n    printf(\"%s\\n\", unos);\n}\n</code></pre>\n"}, {"tags": ["c", "yocto"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1465397602, "post_id": 37705995, "comment_id": 62885867, "body": "Please post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465398800, "post_id": 37705995, "comment_id": 62886762, "body": "OK, thanks for sharing your problem, do you have a specific question, too?"}], "answers": [{"comments": [{"owner": {"reputation": 3077, "user_id": 5559775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/e75xB.png?s=128&g=1", "display_name": "Charles C.", "link": "https://stackoverflow.com/users/5559775/charles-c"}, "edited": false, "score": 0, "creation_date": 1465501051, "post_id": 37710279, "comment_id": 62940858, "body": "If possible, could you show how to do it with <code>devtool</code>? Thank you. I still need some more information on how to work with that."}, {"owner": {"reputation": 2190, "user_id": 1717026, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/5oC0y.png?s=128&g=1", "display_name": "David Bensoussan", "link": "https://stackoverflow.com/users/1717026/david-bensoussan"}, "reply_to_user": {"reputation": 3077, "user_id": 5559775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/e75xB.png?s=128&g=1", "display_name": "Charles C.", "link": "https://stackoverflow.com/users/5559775/charles-c"}, "edited": false, "score": 1, "creation_date": 1465513686, "post_id": 37710279, "comment_id": 62946117, "body": "@CharlesChau, I just edited my answer and added an example with devtool"}, {"owner": {"reputation": 954, "user_id": 5275810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d31b4edfdb153437e0d3daa54e33ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "anikhan", "link": "https://stackoverflow.com/users/5275810/anikhan"}, "edited": false, "score": 0, "creation_date": 1465532579, "post_id": 37710279, "comment_id": 62950181, "body": "Hi David Bensoussan, Thanks for your answer, i used recipes-example as mentioned above. when i execute bitbake -b /PATH_TO_BB/example_0.1.bb it is generating a executable. when i am running bitbake core-image-minimal, it is not compiling any file, do i need to any extra changes for this"}, {"owner": {"reputation": 2190, "user_id": 1717026, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/5oC0y.png?s=128&g=1", "display_name": "David Bensoussan", "link": "https://stackoverflow.com/users/1717026/david-bensoussan"}, "edited": false, "score": 0, "creation_date": 1465552603, "post_id": 37710279, "comment_id": 62960334, "body": "Did you have the recipe in your image ? Add it by adding in your local.conf: IMAGE_INSTALL_append = &quot; example&quot;"}, {"owner": {"reputation": 195, "user_id": 3911287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adabdc175ea73667766067667bfc980?s=128&d=identicon&r=PG&f=1", "display_name": "dazed", "link": "https://stackoverflow.com/users/3911287/dazed"}, "edited": false, "score": 0, "creation_date": 1561145253, "post_id": 37710279, "comment_id": 99982103, "body": "This is very helpful.  Thank you.  I did the <b>&quot;Including C files in recipe tree&quot;</b> procedure. There were 2 things that tripped me up: (1) The bb file uses an underscore in its name, and the dir containing the source code uses a dash. (2) I encountered the error described here: <a href=\"https://www.lynxbee.com/how-to-fix-error-do_package_qa-qa-issue-no-gnu_hash-in-the-elf-binary/\" rel=\"nofollow noreferrer\">lynxbee.com/&hellip;</a>.  Adding  <code>TARGET_CC_ARCH += &quot;${LDFLAGS}&quot; </code> to the recipe fixed it."}], "tags": [], "owner": {"reputation": 2190, "user_id": 1717026, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/5oC0y.png?s=128&g=1", "display_name": "David Bensoussan", "link": "https://stackoverflow.com/users/1717026/david-bensoussan"}, "is_accepted": true, "score": 22, "last_activity_date": 1465513655, "last_edit_date": 1465513655, "creation_date": 1465410797, "answer_id": 37710279, "question_id": 37705995, "link": "https://stackoverflow.com/questions/37705995/how-to-compile-a-basic-c-file-in-yocto/37710279#37710279", "title": "How to compile a basic c file in yocto", "body": "<p>I am not sure to understand the question since it is not precise enough.</p>\n\n<h1>Including C files in recipe tree</h1>\n\n<p>If you want to have the C files in your recipe, having a file tree like this:</p>\n\n<pre><code>recipe-example/example/example_0.1.bb\nrecipe-example/example/example-0.1/helloworld.c\n</code></pre>\n\n<p>You can generate this example when you create a new layer using </p>\n\n<pre><code>yocto-layer &lt;your-layer-name&gt;\n</code></pre>\n\n<p>Your bb file will look like this:</p>\n\n<pre><code>#\n# This file was derived from the 'Hello World!' example recipe in the\n# Yocto Project Development Manual.\n#\nSUMMARY = \"Simple helloworld application\"\nSECTION = \"examples\"\nLICENSE = \"MIT\"\nLIC_FILES_CHKSUM = \"file://${COMMON_LICENSE_DIR}/MIT;md5=0835ade698e0bcf8506ecda2f7b4f302\"\n\nSRC_URI = \"file://helloworld.c\"\n\nS = \"${WORKDIR}\"\n\ndo_compile() {\n         ${CC} helloworld.c -o helloworld\n}\n\ndo_install() {\n         install -d ${D}${bindir}\n         install -m 0755 helloworld ${D}${bindir}\n}\n</code></pre>\n\n<p>It will compile the hello world file and install it into /usr/bin on your image.</p>\n\n<h1>From a Git repo</h1>\n\n<p>You also can compile from a git repository, I advise you to read the manual and examples in your yocto folder. Here is an example here of wiringPi:</p>\n\n<pre><code>DESCRIPTION = \"A library to control Raspberry Pi GPIO channels\"\nHOMEPAGE = \"https://projects.drogon.net/raspberry-pi/wiringpi/\"\nSECTION = \"devel/libs\"\nLICENSE = \"LGPLv3+\"\nLIC_FILES_CHKSUM = \"file://COPYING.LESSER;md5=e6a600fd5e1d9cbde2d983680233ad02\"\n\n# tag 2.29\nSRCREV = \"d79506694d7ba1c3da865d095238289d6175057d\"\n\nS = \"${WORKDIR}/git\"\n\nSRC_URI = \"git://git.drogon.net/wiringPi \\\n           file://0001-Add-initial-cross-compile-support.patch \\\n           file://0001-include-asm-ioctl.h-directly-for-_IOC_SIZEBITS.patch \\\n           \"\n\nCOMPATIBLE_MACHINE = \"raspberrypi\"\n\nCFLAGS_prepend = \"-I${S}/wiringPi -I${S}/devLib\"\n\nEXTRA_OEMAKE += \"'INCLUDE_DIR=${D}${includedir}' 'LIB_DIR=${D}${libdir}'\"\nEXTRA_OEMAKE += \"'DESTDIR=${D}/usr' 'PREFIX=\"\"'\"\n\ndo_compile() {\n    oe_runmake -C devLib\n    oe_runmake -C wiringPi\n    oe_runmake -C gpio 'LDFLAGS=${LDFLAGS} -L${S}/wiringPi -L${S}/devLib'\n}\n\ndo_install() {\n    oe_runmake -C devLib install\n    oe_runmake -C wiringPi install\n    oe_runmake -C gpio install\n}\n</code></pre>\n\n<p>It is fetching from a git repository, applying patches generated by git, using oe_runmake to compile with the makefiles.</p>\n\n<h1>With devtool</h1>\n\n<p>It has been asked in a comment on how to add a recipe with devtool.\nWe will still use wiringPi as an example again. Download it doing\n    <a href=\"https://github.com/WiringPi/WiringPi\" rel=\"noreferrer\">https://github.com/WiringPi/WiringPi</a>\nThe Makefile is is the folder wiringPi.\nYou can then do</p>\n\n<pre><code>devtool add &lt;name_of_recipe&gt; &lt;path_to_Makefile_folder&gt;\n</code></pre>\n\n<p>Take care of the warning from devtool</p>\n\n<pre><code>NOTE: Creating workspace layer in /home/dbensoussan/new_poky/poky/build/workspace\nNOTE: Enabling workspace layer in bblayers.conf\nNOTE: Using source tree as build directory since that would be the default for this recipe\nNOTE: Recipe /home/dbensoussan/new_poky/poky/build/workspace/recipes/project/project.bb has been automatically created; further editing may be required to make it fully functional\n</code></pre>\n\n<p>This is generating the recipe as follow:</p>\n\n<pre><code># Recipe created by recipetool\n# This is the basis of a recipe and may need further editing in order to be fully functional.\n# (Feel free to remove these comments when editing.)\n#\n# WARNING: the following LICENSE and LIC_FILES_CHKSUM values are best guesses - it is\n# your responsibility to verify that the values are complete and correct.\nLICENSE = \"Unknown\"\nLIC_FILES_CHKSUM = \"file://COPYING.LESSER;md5=e6a600fd5e1d9cbde2d983680233ad02\"\n\n# No information for SRC_URI yet (only an external source tree was specified)\nSRC_URI = \"\"\n\n\n# NOTE: this is a Makefile-only piece of software, so we cannot generate much of the\n# recipe automatically - you will need to examine the Makefile yourself and ensure\n# that the appropriate arguments are passed in.\n\ndo_configure () {\n    # Specify any needed configure commands here\n    :\n}\n\ndo_compile () {\n    # You will almost certainly need to add additional arguments here\n    oe_runmake\n}\n\ndo_install () {\n    # This is a guess; additional arguments may be required\n    oe_runmake install 'DESTDIR=${D}'\n}\n</code></pre>\n\n<p>You can then edit your recipe to suit your configuration</p>\n"}, {"tags": [], "owner": {"reputation": 916, "user_id": 3794981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a23e4e79c653ddda66d1c8ea7a417b?s=128&d=identicon&r=PG&f=1", "display_name": "urnenfeld", "link": "https://stackoverflow.com/users/3794981/urnenfeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1574786292, "creation_date": 1574786292, "answer_id": 59055566, "question_id": 37705995, "link": "https://stackoverflow.com/questions/37705995/how-to-compile-a-basic-c-file-in-yocto/59055566#59055566", "title": "How to compile a basic c file in yocto", "body": "<p>You can just go to the official documentation to find your answer.</p>\n\n<p>The very first example is exactly <a href=\"https://www.yoctoproject.org/docs/latest/mega-manual/mega-manual.html#new-recipe-testing-examples\" rel=\"nofollow noreferrer\">what you need</a>.</p>\n"}], "owner": {"reputation": 954, "user_id": 5275810, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d31b4edfdb153437e0d3daa54e33ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "anikhan", "link": "https://stackoverflow.com/users/5275810/anikhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18605, "favorite_count": 4, "accepted_answer_id": 37710279, "answer_count": 2, "score": 1, "last_activity_date": 1574797980, "creation_date": 1465397572, "last_edit_date": 1574797980, "question_id": 37705995, "link": "https://stackoverflow.com/questions/37705995/how-to-compile-a-basic-c-file-in-yocto", "title": "How to compile a basic c file in yocto", "body": "<p>I am working on yocto, I want to compile some C files in yocto and install the resulting binary to external filesystem.\n    Before doing that I tried creating a separate reciepe and compile c code from it.\n    I am unable to compile it.</p>\n"}, {"tags": ["c", "linked-list", "fwrite", "fread"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1465397237, "post_id": 37705811, "comment_id": 62885562, "body": "<code>scanf(&quot;%s&quot;, &amp;output_file);</code> and <code>scanf(&quot;%s&quot;, &amp;input_file);</code>  invokes <i>undefined behavior</i>: <code>%s</code> calls for <code>char*</code>, but what is passed is <code>char(*)[30]</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1465397581, "post_id": 37705811, "comment_id": 62885845, "body": "Using global variables and assignment in conditions is a &quot;modern approach&quot;? In the early 70s maybe..."}, {"owner": {"reputation": 18565, "user_id": 10593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eeb7653c4df9b0f1332b9b0ec201ec?s=128&d=identicon&r=PG", "display_name": "Max Lybbert", "link": "https://stackoverflow.com/users/10593/max-lybbert"}, "edited": false, "score": 0, "creation_date": 1465397658, "post_id": 37705811, "comment_id": 62885908, "body": "In <code>dump()</code>, you write <code>strlen(inventory-&gt;name) + 1</code> bytes, but in <code>restore()</code> you read in <code>sizeof(inventory-&gt;name)</code> bytes.  The two aren&#39;t necessarily equal."}, {"owner": {"reputation": 61, "user_id": 6440848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cc48cc73994b823ad9e0df99b1d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "M.Chelm", "link": "https://stackoverflow.com/users/6440848/m-chelm"}, "edited": false, "score": 0, "creation_date": 1465398099, "post_id": 37705811, "comment_id": 62886224, "body": "Yes, that&#39;s why it&#39;s loading 26 characters from file even when there is only few, but I don&#39;t know how to check length of inventory-&gt;name that&#39;s in file before loading it."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1465399207, "post_id": 37705811, "comment_id": 62887101, "body": "@M.Chelm Why not just write <code>sizeof(inventory-&gt;name)</code> bytes to the file? You might want to zero the unused bytes after the null terminator in <code>inventory-&gt;name</code> first to avoid writing junk to the file. Alternatively, write zero-valued bytes to the file to fill up the remaining part of the 26-byte field."}], "owner": {"reputation": 61, "user_id": 6440848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7cc48cc73994b823ad9e0df99b1d0bc?s=128&d=identicon&r=PG&f=1", "display_name": "M.Chelm", "link": "https://stackoverflow.com/users/6440848/m-chelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465397153, "creation_date": 1465397153, "question_id": 37705811, "link": "https://stackoverflow.com/questions/37705811/reading-linked-list-from-binary-file-c-programming-a-modern-approach-programm", "title": "Reading linked list from binary file (C Programming: A Modern Approach, programming project 22.10)", "body": "<p>could you help me?</p>\n\n<p>Here is the whole program: <a href=\"http://knking.com/books/c2/programs/inventory2.c\" rel=\"nofollow\">http://knking.com/books/c2/programs/inventory2.c</a></p>\n\n<p>I need to add dump and restore functions that will write (using fwrite) the linked list into the file or load it (using fread) from the file.</p>\n\n<p>My take: </p>\n\n<pre><code>void dump(void)\n{\n  FILE *fp;\n  char output_file[30];\n  int i;\n\n  printf(\"Enter name of input file: \");\n  scanf(\"%s\", &amp;output_file);\n\n  if ((fp = fopen(output_file, \"wb\")) == NULL) {\n    fprintf(stderr, \"Can't open %s\\n\", output_file);\n    exit(EXIT_FAILURE);\n  }\n\n  while (inventory != NULL) {\n    fwrite(&amp;inventory-&gt;number, sizeof(inventory-&gt;number), 1, fp);\n    fwrite(inventory-&gt;name, strlen(inventory-&gt;name) + 1, 1, fp);\n    fwrite(&amp;inventory-&gt;on_hand, sizeof(inventory-&gt;on_hand), 1, fp);\n\n    inventory = inventory-&gt;next;\n  }\n\n  fclose(fp);\n}\n\nvoid restore(void)\n{\n  FILE *fp;\n  char input_file[30];\n  int i = 0;\n\n  printf(\"Enter name of output file: \");\n  scanf(\"%s\", &amp;input_file);\n\n  if ((fp = fopen(input_file, \"rb\")) == NULL) {\n    fprintf(stderr, \"Can't open %s\\n\", input_file);\n    exit(EXIT_FAILURE);\n  }\n\n  inventory = malloc(sizeof(struct part));\n  fread(&amp;inventory-&gt;number, sizeof(inventory-&gt;number), 1, fp);\n  fread(&amp;inventory-&gt;name[i], sizeof(inventory-&gt;name), 1, fp);\n  fread(&amp;inventory-&gt;on_hand, sizeof(inventory-&gt;on_hand), 1, fp);\n\n  fclose(fp);\n}\n</code></pre>\n\n<p>Restore function keeps crashing. It also keeps reading 26 characters to inventory->name causing inventory->on_hand showing wrong values. I also have no idea how to load the rest of linked list.</p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1465396562, "post_id": 37705478, "comment_id": 62885028, "body": "<code>sizeof(pointer) == 4</code> (32bit, you&#39;re on), and <code>sizeof (char[16]) == 16</code>...why am I not surprised?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396623, "post_id": 37705478, "comment_id": 62885081, "body": "&quot;I assume (hope) that the variable array has became an array of blocks.&quot; - If a pointer was an array, it would not be called &quot;pointer&quot;, but &quot;array&quot;! It does not even point to a 2D array. Please learn these fundamentals. There are enough questions here about how to declare a 2D array (note: it is <b>not</b> something like <code>int **array;</code> - that is another missconception of beginners!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396698, "post_id": 37705478, "comment_id": 62885146, "body": "And <b>never ever</b> cast if 1) it is not necessary or 2) you don&#39;t understand <b>all</b> implications or 3) don&#39;t accept them all!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396780, "post_id": 37705478, "comment_id": 62885218, "body": "&quot;How can i determine the value of <code>n</code>?&quot; - <code>n</code>!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1465396814, "post_id": 37705478, "comment_id": 62885244, "body": "<code>I assume (hope) that the variable array has became an array of blocks.</code>... arrays are <b><i>NOT</i></b> pointers and vice-versa."}, {"owner": {"reputation": 1, "user_id": 6173272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fc2c1cbc85600b1320a3e46d9a69b3?s=128&d=identicon&r=PG&f=1", "display_name": "fouss", "link": "https://stackoverflow.com/users/6173272/fouss"}, "edited": false, "score": 0, "creation_date": 1465397067, "post_id": 37705478, "comment_id": 62885445, "body": "So I get it, <code>n</code> can be as large as you intend to read, as clarified below. Thank you all for your helpful comments and answers."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1465397203, "post_id": 37705478, "comment_id": 62885536, "body": "Have a look at <a href=\"http://en.cppreference.com/w/c/io/fread\" rel=\"nofollow noreferrer\"><code>fread()</code></a> ... the text and also the example section."}, {"owner": {"reputation": 1, "user_id": 6173272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fc2c1cbc85600b1320a3e46d9a69b3?s=128&d=identicon&r=PG&f=1", "display_name": "fouss", "link": "https://stackoverflow.com/users/6173272/fouss"}, "edited": false, "score": 0, "creation_date": 1465398259, "post_id": 37705478, "comment_id": 62886342, "body": "^ I want to vote you up, but I dont think I can. Thank you anyway."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1465400041, "post_id": 37705478, "comment_id": 62887762, "body": "The allowed range of <code>n</code> depends on what <code>somePointer</code> is pointing to."}, {"owner": {"reputation": 1, "user_id": 6173272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fc2c1cbc85600b1320a3e46d9a69b3?s=128&d=identicon&r=PG&f=1", "display_name": "fouss", "link": "https://stackoverflow.com/users/6173272/fouss"}, "edited": false, "score": 0, "creation_date": 1465400537, "post_id": 37705478, "comment_id": 62888162, "body": "^ It points to a stream of captured network bytes, which after the payload, seem to continue with random bytes... infinitely. That was my original intent, to know if there is an end to it!"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465397256, "post_id": 37705620, "comment_id": 62885579, "body": "In general, you&#39;re correct, but I don&#39;t see how this can be considered an answer of the question. :)"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465397666, "post_id": 37705620, "comment_id": 62885915, "body": "<b>How can i determine the value of n?? Is it finite?</b> Can you find the answers to these questions in my answer?"}], "tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": false, "score": 0, "last_activity_date": 1465396666, "creation_date": 1465396666, "answer_id": 37705620, "question_id": 37705478, "link": "https://stackoverflow.com/questions/37705478/get-length-of-2-d-array-in-c/37705620#37705620", "title": "Get length of 2-D array in C", "body": "<p>That's the size of the pointer to the <code>array</code>. It points to the first element of the array:</p>\n\n<pre><code>sizeof(array) == 4;\n</code></pre>\n\n<p>That is the size of the array to which <code>array</code> points to, i.e. the first element (which is a an array of length 16):</p>\n\n<pre><code>sizeof(*array) == 16;\n</code></pre>\n\n<p><code>n</code> has to be finite. There are no infinite arrays in C.\nThe value of <code>n</code> must be defined prior use.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6173272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fc2c1cbc85600b1320a3e46d9a69b3?s=128&d=identicon&r=PG&f=1", "display_name": "fouss", "link": "https://stackoverflow.com/users/6173272/fouss"}, "edited": false, "score": 0, "creation_date": 1465483867, "post_id": 37708260, "comment_id": 62929914, "body": "I appreciate your effort. <code>somePointer</code> is <code>u_char*</code>. This points to a stream of <b>bytes</b> through network capture. The length of that data, I understand already, depends on what you are looking for (and capture length, of course)."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1465403991, "creation_date": 1465403991, "answer_id": 37708260, "question_id": 37705478, "link": "https://stackoverflow.com/questions/37705478/get-length-of-2-d-array-in-c/37708260#37708260", "title": "Get length of 2-D array in C", "body": "<p><strong>TL/DR Version</strong></p>\n\n<p>You will not be able to calculate <code>n</code> in a single expression using the <code>array</code> variable.  A pointer to <code>T</code> only points to a single instance of <code>T</code>; it has no way of knowing whether that instance is the first element of an array of <code>T</code> or not.  </p>\n\n<p><strong>Long Version</strong></p>\n\n<p>Given the declarations</p>\n\n<pre><code>typedef u_char block[16];\nblock *array = (block*) somePointer;\n</code></pre>\n\n<p>Then the following are true:</p>\n\n<pre><code>   Expression        Type           \n   ----------        ----           \n        array        block * == u_char (*)[16]  // pointer to 16-element array of u_char\n       *array        block   == u_char [16]     \n sizeof array        size_t  == sizeof (block *) == sizeof (u_char (*)[16]) == 4 // on your system                   \nsizeof *array        size_t  == sizeof (block)   == sizeof (u_char [16])    == 16 \n</code></pre>\n\n<p>Assuming a declaration like</p>\n\n<pre><code>block someArray[10];\n</code></pre>\n\n<p>then <code>someArray</code> is a 10x16 array of <code>u_char</code>.  You can determine the number of rows in <code>someArray</code> via</p>\n\n<pre><code>sizeof someArray / sizeof *someArray\n</code></pre>\n\n<p>This divides the total number of bytes in <code>someArray</code> (160) by the number of bytes in a single row of <code>someArray</code> (16), giving you the number of rows (10).  </p>\n\n<p>However, if you write</p>\n\n<pre><code>block *array = someArray;\n</code></pre>\n\n<p>then you <em>will not</em> be able to determine the number of rows in <code>someArray</code> using the <code>array</code> variable.  <code>sizeof array</code> returns the size of the pointer, not the thing being pointed to, and <code>sizeof *array</code> returns the size of a 16-element array of <code>u_char</code>, not the size of <code>someArray</code>.  </p>\n\n<p>So when you wrote</p>\n\n<pre><code>block *array = (block*) somePointer; // what is the type of somePointer,\n                                     // and is the cast really necessary?\n</code></pre>\n\n<p>you set <code>array</code> to point to a <em>single</em> instance of <code>block</code>.  You cannot determine from the pointer itself how many rows of <code>block</code> are in <code>somePointer</code>.</p>\n\n<p>You could use a sentinel value (similar to the 0 terminator in strings) to mark the last row somehow (such as if all elements of that row are set to 0 or 255 or some other pattern):</p>\n\n<pre><code>#define TERMINATOR 255\n...\nbool lastRow( block *b )\n{\n  bool result = true;\n  for ( size_t i = 0; i &lt; sizeof *b; i++ )\n    result = result &amp;&amp; (b[i] == TERMINATOR);\n  return result;\n}\n\nint main( void )\n{\n  ...\n  block *array = (block *) somePointer;\n  ...\n  size_t count = 0;\n  while ( !lastRow( array++ ) )\n    count++;\n  ...\n}\n</code></pre>\n\n<p>Of course, this only works if a row of all 255 (or 0, or some other value) is not otherwise valid data.  Otherwise, you need to keep track of the size of <code>somePointer</code> manually.  </p>\n"}], "owner": {"reputation": 1, "user_id": 6173272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fc2c1cbc85600b1320a3e46d9a69b3?s=128&d=identicon&r=PG&f=1", "display_name": "fouss", "link": "https://stackoverflow.com/users/6173272/fouss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1465409891, "answer_count": 2, "score": -4, "last_activity_date": 1465559916, "creation_date": 1465396366, "last_edit_date": 1465559916, "question_id": 37705478, "link": "https://stackoverflow.com/questions/37705478/get-length-of-2-d-array-in-c", "closed_reason": "Needs details or clarity", "title": "Get length of 2-D array in C", "body": "<p>I just need a clear answer about this, if anyone knows.<br>\nI have already <strong>checked similar questions</strong>, but none of them clarify what happens in a multi-dimensional array. So,  </p>\n\n<pre><code>typedef u_char block[16];\nblock *array = (block*) somePointer;\n</code></pre>\n\n<p>I'm trying to read a stream of <strong>bytes</strong> as an array of blocks.<br>\nAgain, every element has size of exactly 1 byte, so don't try to confuse me even more, with sizes and elements.<br>\nI assume (hope) that the variable <code>array</code> has became an array of blocks.  </p>\n\n<pre><code>array[n][16];\n</code></pre>\n\n<p>How can i determine the value of <code>n</code>?? Is it finite?  </p>\n\n<p>Some testing showed that:  </p>\n\n<pre><code>sizeof(array) == 4;        // n != sizeof (array)\nsizeof(*array) == 16;        // n != sizeof (*array)\n</code></pre>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1465394820, "post_id": 37704649, "comment_id": 62883609, "body": "Just do it with a another flag, and use &#39;or&#39; to &#39;or&#39; it on the flag."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1465394975, "post_id": 37704649, "comment_id": 62883732, "body": "I have 18 flag. Can&#39;t make flags for all combinaison ! Or maybe i didn&#39;t get your answer"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1465395319, "post_id": 37704649, "comment_id": 62884028, "body": "<code>wait += || etimer_expired(&amp;actual_state.et_wait)</code> this is all kinds of wrong, and not at all how you incrementally build a boolean condition."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1465395573, "post_id": 37704649, "comment_id": 62884229, "body": "I suspect the problem is with how you construct your bool variable, since a bool variable can be plugged anywhere a logical expression can, even hidden withing a macro. But it&#39;s guesswork since you didn&#39;t specify exactly how it <i>&quot;doesn&#39;t work&quot;</i>."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1465396122, "post_id": 37704649, "comment_id": 62884702, "body": "@StoryTeller I know that&#39;s why i used comment. It was to show what i would like to do. I&#39;ll edit to explain more."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396380, "post_id": 37704649, "comment_id": 62884902, "body": "It is not clear what you want to achieve. If you have to test some variables in that macro, you have to - well - test those variables in the macro. But without knowing what the macro actually does and what you want, how are we supposed to help? (let apart the code-snippets you show are plain wrong; if you think different, there might be major missconception and more to learn about the C language)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1465396985, "post_id": 37704649, "comment_id": 62885382, "body": "Erm, there is no loop here. That <code>do {} while(0);</code> thing is a kludge to make the macro look like a proper statement with a semicolon, without it being illegal syntax."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465397403, "post_id": 37704649, "comment_id": 62885713, "body": "@Olaf you are totally right. I&#39;m far to be an expert for C language and have a lot to learn. However, i think for this case it&#39;s about not enough explanation. I edited my question, thanks for your time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465398703, "post_id": 37704649, "comment_id": 62886686, "body": "I still don&#39;t see how this macro tests permanently tests the conditions. It just  tests them once, but does not seem to wait if none is true. Looks more like some coop-multithreading which makes things more complicated. Maybe you need your own loop around that macro."}], "answers": [{"comments": [{"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465395933, "post_id": 37705072, "comment_id": 62884564, "body": "Thanks you but doesn&#39;t answer. I must not evaluate the bool (so not calculate the final bool, jsut send the big condition to the macro)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396275, "post_id": 37705072, "comment_id": 62884834, "body": "I don&#39;t see any mention of <code>volatile</code>. Let apart they are normally not appropriate for multi-threaded systems. E.g. there is no guarantee they are atomic."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396487, "post_id": 37705072, "comment_id": 62884977, "body": "@Olaf The OP doesn&#39;t specify the mechanism behind the macro. It is quite possible that <code>volatile</code> is superfluous."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465396804, "post_id": 37705072, "comment_id": 62885236, "body": "@LudovicGuerra Packing it into a function will make a new calculation of <code>wait</code> every time the macro evaluates the expression. If that doesn&#39;t work with your macro, then I recommend StoryTellers answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465396913, "post_id": 37705072, "comment_id": 62885316, "body": "@KlasLindb&#228;ck: So your answer is based on plain speculation. And I did not mean superfluous, but insufficient, because of being not &quot;strong&quot; enough. Never rely on <code>volatile</code> for multi-core multithreaded systems. Things can be different for embedded/single code systems, but that is a matter of the specific execution environment."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465459158, "post_id": 37705072, "comment_id": 62912506, "body": "@Olaf That <code>volatile</code> isn&#39;t strong enough may be true in the general case. In this case, howeever, it was clear that if further synchronization was needed it had to be handled by the macro and not by the caller since there was no synchronization in the examples. Given the actual macro definition it is clear that <code>volatile</code> is superfluous."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465478280, "post_id": 37705072, "comment_id": 62925557, "body": "@KlasLindb&#228;ck: When I wrote this there was not enough information given. Thus the &quot;not strong enough&quot;. Anyway, it is better to use atomics. Iff a <code>volatile</code> really is sufficient, the atomics will result in the same code - nothing lost. Just use the standard features and avoid homebrew hacks where possible &amp; reasonable."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1465458323, "last_edit_date": 1465458323, "creation_date": 1465395416, "answer_id": 37705072, "question_id": 37704649, "link": "https://stackoverflow.com/questions/37704649/protothread-co-routine-send-concatenated-boolean-to-macro/37705072#37705072", "title": "Protothread co-routine : send concatenated boolean to macro", "body": "<p>You can create a function and pass the address of all variables involved:</p>\n\n<pre><code>bool myfunc(STATE* actual_state, int* ev) {\n  bool wait;\n  /* add your logic evaluation here and set wait */\n  return wait;\n}\n</code></pre>\n\n<p>Then you can simply use:</p>\n\n<pre><code>PROCESS_WAIT_EVENT_UNTIL(myfunc(&amp;actual_state, &amp;ev));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465397619, "post_id": 37705524, "comment_id": 62885884, "body": "Thank you a lot for your help. Great information, but knew it. But still thanks a lot. So how you define the variable ?"}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465397817, "post_id": 37705524, "comment_id": 62886022, "body": "But if i do that the boolean is computed, isn&#39;t it ?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465397895, "post_id": 37705524, "comment_id": 62886067, "body": "@LudovicGuerra, of course. Why shouldn&#39;t it be calculated in advance? The macro only uses it once in its expansion."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465398799, "post_id": 37705524, "comment_id": 62886759, "body": "With the macro shown, the problem looks more complicated. I suspect you in fact have to test the conditions inside the macro, thus <b>cannot</b> pre-calculate the value. That seems to be some &quot;lightweight&quot; cooperative multitasking (similar to co-routines)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1465398951, "post_id": 37705524, "comment_id": 62886896, "body": "I see, so no choice but to pass some expression into the macro."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465399169, "post_id": 37705524, "comment_id": 62887066, "body": "@olaf to be more precise I borrow heavily on Tatham&#39;s co-routine : <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html\" rel=\"nofollow noreferrer\">chiark.greenend.org.uk/~sgtatham/coroutines.html</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465399474, "post_id": 37705524, "comment_id": 62887292, "body": "@LudovicGuerra: Problem is we need the whole concept, but imo that is too broad for this site. You need more of a discussion forum to get step-by-step help. That&#39;s off-topic here."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465399656, "post_id": 37705524, "comment_id": 62887442, "body": "@StoryTeller it&#39;s seems a really good idea ! It&#39;s by far better than having to write all posibilities (I have 18 flags)."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465399799, "post_id": 37705524, "comment_id": 62887565, "body": "@Olaf Thanks you to you and to Story for your great help. And I&#39;m really sorry to not have well explained my problems. The ternair condition seems a good idea, didn&#39;t think about it !  I should have explained more in depth my problems, since is not about my code not working but about how to make it shorter and smarter. Thanks"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465399884, "post_id": 37705524, "comment_id": 62887632, "body": "I still think you can use log-ops only. But I&#39;m too lazy to figure out. A function would require global variables and/or uniform evaluation which I don&#39;t see from the information shown. Anyway, the whole thing looks suspect to me."}, {"owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "edited": false, "score": 0, "creation_date": 1465402612, "post_id": 37705524, "comment_id": 62889568, "body": "What do you mean by  log-ops ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465478329, "post_id": 37705524, "comment_id": 62925600, "body": "<b>log</b>ical operators. As opposed to <b>bit</b>wise-ops or the ternary operator."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1465399017, "last_edit_date": 1465399017, "creation_date": 1465396449, "answer_id": 37705524, "question_id": 37704649, "link": "https://stackoverflow.com/questions/37704649/protothread-co-routine-send-concatenated-boolean-to-macro/37705524#37705524", "title": "Protothread co-routine : send concatenated boolean to macro", "body": "<p>Since you need to plug an expression into the macro, you are stuck with a ternary expression to take the flags into account.</p>\n\n<pre><code>PROCESS_WAIT_EVENT_UNTIL((actual_state.wait_event &amp; TIMER ? etimer_expired(&amp;actual_state.et_wait) : false) ||\n                         (actual_state.wait_event &amp; PACKET_RECEIVED ? ev == PROCESS_EVENT_PACKET_RECEIVED : false) ||\n                         (actual_state.wait_event &amp; PACKET_SEND ? ev == PROCESS_EVENT_PACKET_SEND : false));\n</code></pre>\n\n<p>This is just ugly, I agree. You'd better spend your time writing a function that accepts the parameters and return a truth value, like Klas Lindb\u00e4ck suggested.</p>\n"}], "owner": {"reputation": 350, "user_id": 6324849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823fd3670b436cf022a6d13bdb7fe63d?s=128&d=identicon&r=PG&f=1", "display_name": "Ludovic Guerra", "link": "https://stackoverflow.com/users/6324849/ludovic-guerra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 37705524, "answer_count": 2, "score": -2, "last_activity_date": 1465458323, "creation_date": 1465394290, "last_edit_date": 1465399910, "question_id": 37704649, "link": "https://stackoverflow.com/questions/37704649/protothread-co-routine-send-concatenated-boolean-to-macro", "title": "Protothread co-routine : send concatenated boolean to macro", "body": "<p>I have a specific need, in a special context.<br>\nI'd like to make my code more clear.</p>\n\n<p>I'm working on making protothread on embedded system</p>\n\n<p>I have to wait on a process. </p>\n\n<p>To wait, we call a macro :<br>\n<code>PROCESS_WAIT_EVENT_UNTIL(params);</code></p>\n\n<p>So for example, my line can be : </p>\n\n<pre><code>PROCESS_WAIT_EVENT_UNTIL(etimer_expired(&amp;actual_state.et_wait) || ev == PROCESS_EVENT_PACKET_RECEIVED || ev == PROCESS_EVENT_PACKET_SEND);\n</code></pre>\n\n<p>This macro make my program wait until one of those conditions are true (so when <code>etimer_expired(&amp;actual_state.et_wait)</code>  is true or  <code>ev == PROCESS_EVENT_PACKET_RECEIVED</code>  is true or <code>ev == PROCESS_EVENT_PACKET_SEND</code> is true</p>\n\n<p>This condition come true if an other thread says (for example): hey a packet got received !</p>\n\n<p>My events that i need to wait are defined by flags :</p>\n\n<pre><code>if ( (actual_state.wait_event &amp; TIMER) != 0 )\n     PROCESS_WAIT_EVENT_UNTIL(etimer_expired(&amp;actual_state.et_wait))\nif ( (actual_state.wait_event &amp; PACKET_RECEIVED) != 0 )\n    PROCESS_WAIT_EVENT_UNTIL( ev == PROCESS_EVENT_PACKET_RECEIVED)\nif ( (actual_state.wait_event &amp; PACKET_SEND) != 0 )\n    PROCESS_WAIT_EVENT_UNTIL( ev == PROCESS_EVENT_PACKET_SEND)\n</code></pre>\n\n<p>if i have several flags defined, i'm doing :</p>\n\n<pre><code>    if ( (actual_state.wait_event &amp; PACKET_RECEIVED) != 0 &amp;&amp; (actual_state.wait_event &amp; PACKET_SEND) != 0 )\nPROCESS_WAIT_EVENT_UNTIL( ev == PROCESS_EVENT_PACKET_SEND ||  ev == PROCESS_EVENT_PACKET_RECEIVED);\n</code></pre>\n\n<p>But i have to do that for every combinaison.</p>\n\n<p>Is there a way to not write every possibilites ? and write something like that :\n<code>PROCESS_WAIT_EVENT_UNTIL(wait);</code></p>\n\n<p>Thanks.</p>\n\n<p>Edit : here all my macro definition\nIt's a co-routine, so I can't pre-compute the boolean value (multi-threading)</p>\n\n<pre><code>#define PROCESS_WAIT_EVENT_UNTIL(c) PROCESS_YIELD_UNTIL(c)\n\n#define PROCESS_YIELD_UNTIL(c)      PT_YIELD_UNTIL(process_pt, c)\n\n#define PT_YIELD_UNTIL(pt, cond)        \\\n  do {                      \\\n    PT_YIELD_FLAG = 0;              \\\n    LC_SET((pt)-&gt;lc);               \\\n    if((PT_YIELD_FLAG == 0) || !(cond)) {   \\\n      return PT_YIELDED;            \\\n    }                       \\\n  } while(0)\n</code></pre>\n"}, {"tags": ["c", "networking", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1465394448, "post_id": 37704696, "comment_id": 62883292, "body": "Not really. Non-blocking sockets plus (e)poll would also be a way."}, {"owner": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "edited": false, "score": 1, "creation_date": 1465394539, "post_id": 37704696, "comment_id": 62883378, "body": "one thread for calling sendto in the infinite loop, and other thread for calling recvfrom in the infinite loop?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465394553, "post_id": 37704696, "comment_id": 62883392, "body": "@Olaf You mean one thread can be in two places at the same time? Come now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1465394929, "post_id": 37704696, "comment_id": 62883694, "body": "@EJP: No, I mean using non-blocking or async IO (not sure if the latter is possible, but the first is). Which way depends on the actual application and various other circumstances. If you only have 1 CPU, there also will never be 2 threads active at the <b>same</b> time."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "edited": false, "score": 0, "creation_date": 1465395944, "post_id": 37704696, "comment_id": 62884569, "body": "@A.Cho Essentially, yes.  On your receiving thread, you&#39;ll want to use <code>select</code> with a timeout so you can periodically check for an exit condition."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465397918, "post_id": 37704696, "comment_id": 62886087, "body": ".and even if you have a dual core cpu but an half duplex bus (e.g. 1gb ethernet)  you are really sending and receiving data at the same time. ;)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1465394389, "creation_date": 1465394389, "answer_id": 37704696, "question_id": 37704482, "link": "https://stackoverflow.com/questions/37704482/is-it-possible-to-do-sendto-recvfrom-simultaneously/37704696#37704696", "title": "Is it possible to do sendto() recvfrom() simultaneously?", "body": "<p>To do just about <em>anything</em> simultaneously, you need to have multiple threads.</p>\n\n<p>One thread would be calling <code>sendto</code> as needed, and the other would be in a loop calling <code>recvfrom</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 6344885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65401b8a850dc21c9011360b07da7cd2?s=128&d=identicon&r=PG&f=1", "display_name": "2rd_7", "link": "https://stackoverflow.com/users/6344885/2rd-7"}, "is_accepted": false, "score": 0, "last_activity_date": 1465395112, "creation_date": 1465395112, "answer_id": 37704969, "question_id": 37704482, "link": "https://stackoverflow.com/questions/37704482/is-it-possible-to-do-sendto-recvfrom-simultaneously/37704969#37704969", "title": "Is it possible to do sendto() recvfrom() simultaneously?", "body": "<p>Threads should used if you want to implement by yourself.\nBut go through select function in section 7.2 <a href=\"http://beej.us/guide/bgnet/output/print/bgnet_A4.pdf\" rel=\"nofollow\">this</a> pdf if you want to use an inbuilt function. It is a powerful tool and most used.</p>\n\n<p>What it basically does is it keeps track of connections that are ready to communicate.</p>\n"}], "owner": {"reputation": 521, "user_id": 5737877, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f08281b24fa35630459e7dd70c388b4c?s=128&d=identicon&r=PG&f=1", "display_name": "A.Cho", "link": "https://stackoverflow.com/users/5737877/a-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1465395112, "creation_date": 1465393897, "last_edit_date": 1465394491, "question_id": 37704482, "link": "https://stackoverflow.com/questions/37704482/is-it-possible-to-do-sendto-recvfrom-simultaneously", "title": "Is it possible to do sendto() recvfrom() simultaneously?", "body": "<p>I'm making very simple TCP emulating network application using UDP socket.</p>\n\n<p>But, I want to use and call <code>sendto()</code>, <code>recvfrom()</code> functions simultaneously to implement pipelining which uses protocol called \"Selective Repeat\".  I mean not ordering like send, wait, receive, send, wait, receive, ..., I mean acting like send, send, send, receive, send, send, receive,receive, like this, without any ordering of calling <code>sendto()</code>, <code>recvfrom()</code>, that is random calling of these functions.</p>\n\n<p>But basically, if I can't use these functions simultaneously, <code>sendto()</code>, <code>recvfrom()</code> act like stop and wait protocol.</p>\n\n<p>But, in pipelining implementation, <code>sendto()</code>, <code>recvfrom()</code> functions act simultaneously.</p>\n\n<p>Should I use <code>pthread</code> or other solutions?? or multiplexing?</p>\n"}, {"tags": ["c", "multithreading", "lock-free"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1465393195, "post_id": 37704083, "comment_id": 62882262, "body": "You have a data race in your code. You can&#39;t read and modify the same variable from multiple threads if the value is not atomic."}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465393287, "post_id": 37704083, "comment_id": 62882326, "body": "@SergeyA in sighancont() or in log() ? If you mean 2 concurren SIGHUPS, I can live with that"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465393341, "post_id": 37704083, "comment_id": 62882377, "body": "there is a synergy between them both :)"}, {"owner": {"reputation": 68716, "user_id": 39742, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b3900ab00ee7e4c0906fb212050fbe23?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/39742/naveen"}, "edited": false, "score": 0, "creation_date": 1465393394, "post_id": 37704083, "comment_id": 62882422, "body": "<code>reopen_counter = reopen_counter + 1;</code> is not thread-safe."}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "edited": false, "score": 0, "creation_date": 1465393401, "post_id": 37704083, "comment_id": 62882432, "body": "I don&#39;t modify the global counter in log()"}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "reply_to_user": {"reputation": 68716, "user_id": 39742, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b3900ab00ee7e4c0906fb212050fbe23?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/39742/naveen"}, "edited": false, "score": 0, "creation_date": 1465393431, "post_id": 37704083, "comment_id": 62882459, "body": "@Naveen I can live with that too"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465393606, "post_id": 37704083, "comment_id": 62882601, "body": "@basin, but you read it there! And, if you can live with data race (why?), why are even asking this question?"}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465393835, "post_id": 37704083, "comment_id": 62882794, "body": "@SergeyA <code>reopen_counter</code> may change between comparison and assignment, but that&#39;s not a disaster"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1465393989, "post_id": 37704083, "comment_id": 62882928, "body": "@basin, it is not about being changed. It&#39;s about no guarantee whatsoever that one thread will see the modification done by another."}, {"owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1465396385, "post_id": 37704083, "comment_id": 62884905, "body": "@SergeyA added atomic operations."}, {"owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465400461, "post_id": 37704083, "comment_id": 62888111, "body": "@SergeyA, you definitely can read and write from multiple threads. The result is less than well defined if you write from multiple threads, but this is not the case here."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "edited": false, "score": 0, "creation_date": 1465400680, "post_id": 37704083, "comment_id": 62888262, "body": "@BitWhistler plain wrong. I mean, yes, you can - but results are unpredictable."}, {"owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465401869, "post_id": 37704083, "comment_id": 62889127, "body": "@SergeyA, when thread A updates a value from 100 to 101, threads B,C,D,... can read 100 or 101. They can not read 300. You get this behavior with or without atomics. Nothing unpredictable here. The purpose of atomics is to guarantee a single writer. We&#39;re not talking about a lock with data here. Only a single variable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "edited": false, "score": 0, "creation_date": 1465402031, "post_id": 37704083, "comment_id": 62889207, "body": "@BitWhistler, they can. This is what  you are not getting."}, {"owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465403192, "post_id": 37704083, "comment_id": 62889968, "body": "@SergeyA, you can run a simple test - some writer threads (or just one) continuously change an int&#39;s value between 100 and 101, and some reader threads continuously read it. See if they ever get anything other than 100 or 101. Your test would fail only with unaligned ints or if they&#39;re bigger than the native word size. You should really read the Intel docs on that, dude."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "edited": false, "score": 0, "creation_date": 1465403237, "post_id": 37704083, "comment_id": 62889991, "body": "@BitWhistler, since when tests are any proove of undefined behavior? You are terribly misguided. Also, who said anything about Intel, <i>dude</i>?"}, {"owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1465403328, "post_id": 37704083, "comment_id": 62890048, "body": "@SergeyA, downvote all you like. I have better things to do than to argue with you."}], "answers": [{"tags": [], "owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "is_accepted": false, "score": 0, "last_activity_date": 1465400280, "creation_date": 1465400280, "answer_id": 37707037, "question_id": 37704083, "link": "https://stackoverflow.com/questions/37704083/delayed-invalidation-of-something-in-multiple-threads/37707037#37707037", "title": "Delayed invalidation of something in multiple threads", "body": "<p>Your solution is simple and efficient. This is kind of a seqlock.</p>\n\n<p>A few notes, to clear possible confusion from comments:</p>\n\n<ol>\n<li>There's no \"atomic variable\" but atomic instruction. std::atomic, and friends, are just syntactic sugar around atomic ops - you're perfectly ok  there.</li>\n<li>The counter doesn't have to be volatile, but the accesses have to be. When you write <code>atomic_read(x)</code> you actually say <code>*(volatile int*)&amp;x</code>.\nThe volatile qualifier causes all accesses to the variable to be done from memory, while you don't necessarily need that.\nBut, here as well, you're perfectly ok, since you read the variable into a local.</li>\n<li>You can update the counter non-atomically if this is the one and only writer (don't forget to make it <code>atomic_write</code> if you remove the <code>volatile</code>). This would be a very small performance improvement.</li>\n<li>The only cost here is in the log threads that have to pay for main memory access after the counter is updated. You should expect 200 cycles or so (x2 on other NUMA node)</li>\n</ol>\n"}], "owner": {"reputation": 3398, "user_id": 447503, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0d7ec5ed7c7fa28d5b6b2a51d5803c9a?s=128&d=identicon&r=PG", "display_name": "basin", "link": "https://stackoverflow.com/users/447503/basin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465400280, "creation_date": 1465392934, "last_edit_date": 1465396345, "question_id": 37704083, "link": "https://stackoverflow.com/questions/37704083/delayed-invalidation-of-something-in-multiple-threads", "title": "Delayed invalidation of something in multiple threads", "body": "<p>Each thread of my program has its own log file. In my <code>SIGHUP</code> handler I want to notify those threads that when a new log message arrives, they need to reopen their log files.</p>\n\n<p>I want a lock-free solution based purely on flags and counters. (I do have a thread-local context structure for another purpose, so I can add new fields there).</p>\n\n<p>If there was just one logging thread, I would do:</p>\n\n<pre><code>static int need_reopen = 0;\n\nvoid sighancont(int signo)\n...\n  case SIGHUP:\n    need_reopen = 1;\n    break;\n...\n}\n\nvoid log(char *msg) {\n    if (need_reopen) {\n        need_reopen = 0;\n        reopen_log();\n    }\n    ...\n}\n</code></pre>\n\n<p>Of course, if there are multiple logging threads, a simple flag won't do. I'm thinking of something like this:</p>\n\n<pre><code>static volatile int reopen_counter = 0;\n\nvoid sighancont(int signo)\n...\n  case SIGHUP:\n    __sync_fetch_and_add(&amp;reopen_counter, 1);\n    break;\n...\n}\n\nvoid log(struct ctx_st *ctx, char *msg) {\n    int c = reopen_counter;\n    if (ctx-&gt;reopen_counter != c) {\n        ctx-&gt;reopen_counter = c;\n        reopen_log();\n    }\n    ...\n}\n</code></pre>\n\n<p>This way the logging threads are supposed to catch-up with the global counter. If the program receives SIGHUP multiple times, log files will be reopened only once.</p>\n\n<p>I see the only way to break this - to send SIGHUP ~4 billion times.</p>\n\n<p>Is there a better (but still simple) algorithm, e.g. with reference counting?</p>\n"}, {"tags": ["c", "go", "binding", "cgo"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1465393487, "post_id": 37703779, "comment_id": 62882507, "body": "Have you read through <a href=\"https://github.com/golang/go/wiki/cgo\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/cgo</a>? There&#39;s a number of examples there."}, {"owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1465394390, "post_id": 37703779, "comment_id": 62883250, "body": "@JimB, couldn&#39;t find a single appropriate example there, can you point to one?"}], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 905927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290786897f51fbd76a589169d2170607?s=128&d=identicon&r=PG", "display_name": "rouzier", "link": "https://stackoverflow.com/users/905927/rouzier"}, "is_accepted": false, "score": 0, "last_activity_date": 1493238223, "creation_date": 1493238223, "answer_id": 43643865, "question_id": 37703779, "link": "https://stackoverflow.com/questions/37703779/pass-go-function-to-c-as-callback/43643865#43643865", "title": "Pass Go function to C as callback", "body": "<p>You could create an array of callbacks and have the bridge iterate the array of callbacks if the there is no return value (void function).</p>\n"}], "owner": {"reputation": 3577, "user_id": 1814909, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/04ca8b6a14373e9cfe5aaea6096f4c01?s=128&d=identicon&r=PG", "display_name": "kaspersky", "link": "https://stackoverflow.com/users/1814909/kaspersky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1250, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1493238223, "creation_date": 1465392194, "last_edit_date": 1495539193, "question_id": 37703779, "link": "https://stackoverflow.com/questions/37703779/pass-go-function-to-c-as-callback", "title": "Pass Go function to C as callback", "body": "<p>Suppose I have a C library with code like this:</p>\n\n<pre><code>typedef int (callback_t)(int);\nvoid register_callback(callback_t cb);\n</code></pre>\n\n<p>I want to write go bindings for this function and pass arbitrary go callbacks.</p>\n\n<p>I found an excellent answer <a href=\"https://stackoverflow.com/questions/6125683/call-go-functions-from-c\">here</a>. However, it is a trick that makes use of the fact that the callback accepts a <code>void *</code>, through which Go passes the function pointer to C and receives it back. However, this can't be applied in my example since there isn't a user <code>void *</code>.</p>\n\n<p>The best I could do is:</p>\n\n<pre><code>/*\nextern int gobridge(int data);\n\nstatic int cbridge(void)\n{\n    register_callback(gobridge);\n}\n*/\nimport \"C\"\n\ntype Callback func (int) int\n\nvar g_cb Callback\n\n//export gobridge\nfunc gobridge(data C.int) C.int {\n    return C.int(g_cb(int(data)))\n}\n\nfunc RegisterCallback(cb Callback) {\n    g_cb = cb //save callback in a global\n    C.cbridge()\n}\n\nfunc Count(left, right int) {\n    C.count(C.int(left), C.int(right))\n}\n</code></pre>\n\n<p>This only works for a single register_callback (because of the global variable), but the C library can register many callbacks and invoke them all.</p>\n\n<p>I hoped to achieve something like this, but this doesn't compile (put aside the clojure, it can't convert the go function to c function even though the signature is the same):</p>\n\n<pre><code>import \"C\"\n\nfunc RegisterCallback(cb Callback) {\n    f := func (d C.int) C.int {\n        return C.int(cb(int(d)))\n    }\n    C.register_callback(f)\n}\n\nfunc Count(left, right int) {\n    C.count(C.int(left), C.int(right))\n}\n</code></pre>\n\n<p>Is there a way to properly bind the C library?</p>\n"}, {"tags": ["c", "pointers", "linked-list", "palindrome", "singly-linked-list"], "comments": [{"owner": {"reputation": 750, "user_id": 3651664, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9f9a701998639eda7df664ca7e1412b4?s=128&d=identicon&r=PG&f=1", "display_name": "HighPredator", "link": "https://stackoverflow.com/users/3651664/highpredator"}, "edited": false, "score": 0, "creation_date": 1465392754, "post_id": 37703635, "comment_id": 62881935, "body": "I think you need to rework your search of second half&#39;s first node. It needs either to point oughtstraight to middle node (even case) or to &#39;N div 2 + 1&#39; node (odd case). Then you just rotate half and traverse it. IMHO you don&#39;t need any special processing for odd case since no rules are set for this specific node."}, {"owner": {"reputation": 906, "user_id": 5017179, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DfIeu.jpg?s=128&g=1", "display_name": "ReshaD", "link": "https://stackoverflow.com/users/5017179/reshad"}, "edited": false, "score": 0, "creation_date": 1465392784, "post_id": 37703635, "comment_id": 62881955, "body": "You can use this solution: <a href=\"http://www.geeksforgeeks.org/function-to-check-if-a-singly-linked-list-is-palindrome/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>"}, {"owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 2, "creation_date": 1465392804, "post_id": 37703635, "comment_id": 62881971, "body": "What to do mean when you say your implementation &quot;fails if the number of elements is odd&quot;? What is happening? Program crash? Incorrect result?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1465393489, "post_id": 37703635, "comment_id": 62882508, "body": "If the number of elements is odd, then isn&#39;t it NOT  palindrome by definition? Otherwise, if the middle (odd) element is considered symmetric, then you can just leave it out and check the two halves (that are now of equal length)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1465395358, "post_id": 37703635, "comment_id": 62884051, "body": "@PaulOgilvie, the usual definition of a palindrome is that it is the same backwards as it is forwards.  That certainly does accommodate odd-length palindromes, wherein, as you say, the middle element does not affect the result."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465395600, "post_id": 37703635, "comment_id": 62884255, "body": "It might be a bit easier to reverse the first half of the list (which you can do in conjunction with splitting the list into halves) instead of the second.  Either way, when the list has an odd number of elements then, as Paul said, the middle element does not contribute to the result.  That appears to be where you are going wrong."}, {"owner": {"reputation": 401, "user_id": 2122201, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/76a5c8733fcb5320f3f8166b996afb4f?s=128&d=identicon&r=PG&f=1", "display_name": "rurtle", "link": "https://stackoverflow.com/users/2122201/rurtle"}, "reply_to_user": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 0, "creation_date": 1465396047, "post_id": 37703635, "comment_id": 62884645, "body": "@s7amuser It segfaults. And it happens in the conditional block <code>if (!(f_ptr-&gt;next))</code>. Trying to narrow it down.  @JohnBollinger Nice suggestion. I&#39;ll definitely give that a try."}, {"owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 1, "creation_date": 1465396384, "post_id": 37703635, "comment_id": 62884904, "body": "I assumed it segfaults but it should be because of this <code>if !(f_ptr-&gt;next-&gt;next)</code>. If the list has an odd number of elements, then <code>f_ptr</code> will point to the last one after the first loop finishes. Thus, <code>f_ptr-&gt;next</code> will be <code>NULL</code> so <code>f_ptr-&gt;next-&gt;next</code> will segfault. Try checking first <code>!(f_ptr-&gt;next)</code> and only after <code>!(f_ptr-&gt;next-&gt;next)</code>."}, {"owner": {"reputation": 401, "user_id": 2122201, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/76a5c8733fcb5320f3f8166b996afb4f?s=128&d=identicon&r=PG&f=1", "display_name": "rurtle", "link": "https://stackoverflow.com/users/2122201/rurtle"}, "reply_to_user": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 0, "creation_date": 1465396978, "post_id": 37703635, "comment_id": 62885375, "body": "@s7amuser Whoa! Good catch. That indeed was the issue. Changing the order of the conditional blocks and adding <code>else if</code> instead of plain <code>if</code> did the trick. Thank you."}, {"owner": {"reputation": 777, "user_id": 6351637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadf8318dd2fa53fc88c9adaa5b3e07b?s=128&d=identicon&r=PG&f=1", "display_name": "s7amuser", "link": "https://stackoverflow.com/users/6351637/s7amuser"}, "edited": false, "score": 0, "creation_date": 1465404177, "post_id": 37703635, "comment_id": 62890628, "body": "Glad I could help :-)"}], "answers": [{"tags": [], "owner": {"reputation": 401, "user_id": 2122201, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/76a5c8733fcb5320f3f8166b996afb4f?s=128&d=identicon&r=PG&f=1", "display_name": "rurtle", "link": "https://stackoverflow.com/users/2122201/rurtle"}, "is_accepted": true, "score": 1, "last_activity_date": 1465397867, "last_edit_date": 1495535639, "creation_date": 1465397867, "answer_id": 37706120, "question_id": 37703635, "link": "https://stackoverflow.com/questions/37703635/check-if-a-singly-linked-list-is-a-palindrome-or-not-in-c/37706120#37706120", "title": "Check if a singly linked list is a palindrome or not in C", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/6351637/s7amuser\">s7amuser</a> for pointing out the bug. Below is the implementation that works for both even &amp; odd cases.</p>\n\n<pre><code>/*\n * @brief   Checks if a list is a palindrome or not\n */\nbool is_palindrome(node *head)\n{\n    node *first;                /* Points to head node of 1st half */\n    node *second;               /* Points to head node of 2nd half */\n    node *f_ptr = head;         /* Fast pointer */\n    node *s_ptr = head;         /* Slow pointer */\n    node *prev = NULL;          /* Previous to slow pointer */\n    bool ret = false;           /* Return value */\n\n    while (f_ptr &amp;&amp; f_ptr-&gt;next &amp;&amp; f_ptr-&gt;next-&gt;next)\n    {\n        prev = s_ptr;\n        s_ptr = s_ptr-&gt;next;\n        f_ptr = f_ptr-&gt;next-&gt;next;\n    }\n\n    /* List with odd number of elements */\n    if (!(f_ptr-&gt;next))\n    {\n        first = head;\n        second = s_ptr-&gt;next;\n        prev-&gt;next = NULL;\n        s_ptr-&gt;next = NULL;\n        /* Reverse the second half */\n        second = reverse_list(&amp;second);\n        /* Compare the first &amp; second half */\n        ret = are_identical(first, second);\n        /* Finally, construct the original list back */\n        second = reverse_list(&amp;second);\n        prev-&gt;next = s_ptr; s_ptr-&gt;next = second;\n        print_list(head);\n    }\n    /* List with even number of elements */\n    else if (!(f_ptr-&gt;next-&gt;next))\n    {\n        first = head;\n        second = s_ptr-&gt;next;\n        s_ptr-&gt;next = NULL;\n        /* Reverse the second half */\n        second = reverse_list(&amp;second);\n        /* Compare the first &amp; second half */\n        ret = are_identical(first, second);\n        /* Finally, construct the original list back */\n        second = reverse_list(&amp;second);\n        s_ptr-&gt;next = second;\n        print_list(head);\n    }\n    return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 2122201, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/76a5c8733fcb5320f3f8166b996afb4f?s=128&d=identicon&r=PG&f=1", "display_name": "rurtle", "link": "https://stackoverflow.com/users/2122201/rurtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 37706120, "answer_count": 1, "score": 3, "last_activity_date": 1465915050, "creation_date": 1465391812, "last_edit_date": 1465915050, "question_id": 37703635, "link": "https://stackoverflow.com/questions/37703635/check-if-a-singly-linked-list-is-a-palindrome-or-not-in-c", "title": "Check if a singly linked list is a palindrome or not in C", "body": "<p>I'm trying to check if a singly linked list is a palindrome or not. The constraints are - the algorithm has to be in linear time and constant space.</p>\n\n<p>The basic algorithm I'm using is as below -</p>\n\n<ol>\n<li>Use fast &amp; slow pointers to divide the list into two halves.</li>\n<li>Reverse the second half in-place.</li>\n<li>Compare the first and second half.</li>\n<li>Construct back the original list</li>\n<li>Return the result.</li>\n</ol>\n\n<p>My implementation works for when the list has even number of elements but fails if the number of elements is odd.</p>\n\n<pre><code>/*\n * @brief   Checks if a list is a palindrome or not\n */\nbool is_palindrome(node *head)\n{\n    node *first;                /* Points to head node of 1st half */\n    node *second;               /* Points to head node of 2nd half */\n    node *f_ptr = head;         /* Fast pointer */\n    node *s_ptr = head;         /* Slow pointer */\n    node *prev = NULL;          /* Previous to slow pointer */\n    bool ret = false;           /* Return value */\n\n    while (f_ptr &amp;&amp; f_ptr-&gt;next &amp;&amp; f_ptr-&gt;next-&gt;next)\n    {\n        prev = s_ptr;\n        s_ptr = s_ptr-&gt;next;\n        f_ptr = f_ptr-&gt;next-&gt;next;\n    }\n\n    /* List with even number of elements */\n    if (!(f_ptr-&gt;next-&gt;next))\n    {\n        first = head;\n        second = s_ptr-&gt;next;\n        s_ptr-&gt;next = NULL;\n        /* Reverse the second half */\n        second = reverse_list(&amp;second);\n        /* Compare the first &amp; second half */\n        ret = are_identical(first, second);\n        /* Finally, construct the original list back */\n        second = reverse_list(&amp;second);\n        s_ptr-&gt;next = second;\n        print_list(head);\n    }\n    /* List with odd number of elements */\n    if (!(f_ptr-&gt;next))\n    {\n        first = head;\n        second = s_ptr-&gt;next;\n        prev-&gt;next = NULL;\n        s_ptr-&gt;next = NULL;\n        /* Reverse the second half */\n        second = reverse_list(&amp;second);\n        /* Compare the first &amp; second half */\n        ret = are_identical(first, second);\n        /* Finally, construct the original list back */\n        second = reverse_list(&amp;second);\n        prev-&gt;next = s_ptr; s_ptr-&gt;next = second;\n        print_list(head);\n    }\n    return ret;\n}\n</code></pre>\n\n<p>Can someone please help me figure out what I am doing wrong while handling the odd number case? The complete implementation of this program can be found <a href=\"http://pastebin.com/pWNfU36t\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["c", "segmentation-fault", "full-text-search"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1465392039, "post_id": 37703570, "comment_id": 62881359, "body": "The only correct answer would be &quot;Yes&quot;. Do you have a <b>specific</b> question within site-rules?"}, {"owner": {"reputation": 139, "user_id": 6083428, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ad2d5df17f1736674d58df4c478542a8?s=128&d=identicon&r=PG", "display_name": "John Taylor", "link": "https://stackoverflow.com/users/6083428/john-taylor"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465392322, "post_id": 37703570, "comment_id": 62881571, "body": "@Olaf : I&#39;ve rewritten the question."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1465392818, "post_id": 37703570, "comment_id": 62881983, "body": "You seem to confuse this site with a &quot;gimme teh codez&quot; site. Sorry, wrong place. (Yes, I could rewrite the code)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465397490, "post_id": 37703570, "comment_id": 62885778, "body": "Start fixing the indentation of your program."}], "answers": [{"tags": [], "owner": {"reputation": 1743, "user_id": 5502206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e05d0d997fd75b4881e5c39055222a?s=128&d=identicon&r=PG&f=1", "display_name": "V. Kravchenko", "link": "https://stackoverflow.com/users/5502206/v-kravchenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1465393003, "creation_date": 1465393003, "answer_id": 37704105, "question_id": 37703570, "link": "https://stackoverflow.com/questions/37703570/how-to-rewrite-this-program-of-words-frequency-counter-in-the-text-file-in-c/37704105#37704105", "title": "How to rewrite this program of words frequency counter in the text file in c?", "body": "<p>Consider allocating your array on head using <code>malloc</code>.</p>\n\n<p>When you declare your array like char <code>char p[1000][512]</code>, it allocates 512 * 1000 (about 512 Kb) on stack. Stack size is insufficient for large files. When you allocate your memory using malloc, you ask operating system to give you some additional memory in heap.</p>\n\n<p>So, instead of your code you should do like</p>\n\n<pre><code>typedef char * string_t;\nstring_t * stringsArray = malloc(sizeof(string_t) * NUM_STRINGS_TO_ALLOCATE);\nfor (size_t i = 0; i &lt; STRINGS_COUNT; ++i)\n   stringsArray[i] = malloc(sizeof(char) * NUM_CHARS_PER_STRING);\n</code></pre>\n\n<p>don't forget to <code>free</code> allocated memory after using it, like:</p>\n\n<pre><code>for (size_t i = 0; i &lt; STRINGS_COUNT; ++i)\n   free(stringsArray[i]);\nfree(stringsArray);\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6083428, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ad2d5df17f1736674d58df4c478542a8?s=128&d=identicon&r=PG", "display_name": "John Taylor", "link": "https://stackoverflow.com/users/6083428/john-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465393003, "creation_date": 1465391685, "last_edit_date": 1495540724, "question_id": 37703570, "link": "https://stackoverflow.com/questions/37703570/how-to-rewrite-this-program-of-words-frequency-counter-in-the-text-file-in-c", "title": "How to rewrite this program of words frequency counter in the text file in c?", "body": "<p><a href=\"https://stackoverflow.com/questions/34070657/c-program-to-count-the-word-frequency-in-a-text-file\">Here</a> we see the program which computes how frequent each word of text file is present. After some small corrections it becomes to work perfectly for sufficiently small files. I wanted to use it for large text file, but get an error \"Segmentation fault\". The reason is that there is an initialization of array </p>\n\n<pre><code> char p[1000][512], \n</code></pre>\n\n<p>which is so small for large text (if I understand correctly, it can save only 1000 words (which in general may coincide)). If I try to enlarge the dimension of p, I also get this error (there cannot be arrays larger than 2000*2000 on my computer).</p>\n\n<p>Could the code above be modified in order for opening large text files? If yes, how to do that? Could You write the code which modifies it?</p>\n"}, {"tags": ["c", "clang", "pragma"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1465390450, "post_id": 37702664, "comment_id": 62880170, "body": "Is there a reason why you cant write <code>&#47;&#47; TODO</code> and then do a text search through the project? Too easy?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1465391122, "post_id": 37702664, "comment_id": 62880664, "body": "Extending on @Lundin&#39;s comment: Basically an XY-Problem. Some editors like kwrite highlight such comments (<code>&#47;&#47; TODO</code>, <code>&#47;&#47; NOTE</code>, etc.). Also doxygen (which should be used anyway in a larger project) collects <code>todo</code> tagged paragraphs and presents them in a seperate chapter."}, {"owner": {"reputation": 699, "user_id": 3957040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e88a425a40322e715b799744b3a89898?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3957040/pablo"}, "edited": false, "score": 0, "creation_date": 1465397344, "post_id": 37702664, "comment_id": 62885656, "body": "You are right. <code>&#47;&#47; TODO</code> is a better way of doing what I intend, because of compatibility reasons, and also, now that I think about it, because relying only on <code>#pragma message</code> seems inadvisable with incremental compilation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1474901243, "post_id": 37702664, "comment_id": 66709844, "body": "I&#39;m also interested in this. I have a project which I need to issue informational messages at compile time hence <code>#pragma message</code>. Just that, like the O.P., I&#39;d like to avoid them as they add confusion when the message contains (expanded) macros."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 3957040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e88a425a40322e715b799744b3a89898?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3957040/pablo"}, "edited": false, "score": 0, "creation_date": 1465397730, "post_id": 37702984, "comment_id": 62885958, "body": "No, <code>-Wno-#pragma-messages</code> hides all output from these <code>#pragma</code>s, while the goal would be to print these messages without also showing their source in the code.  However, @Lundin and @Olaf\u2019s comments above showed me that what I was asking for is not the best way to keep track of TODOs."}], "tags": [], "owner": {"reputation": 606, "user_id": 1864036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PnVHS.jpg?s=128&g=1", "display_name": "starturtle", "link": "https://stackoverflow.com/users/1864036/starturtle"}, "is_accepted": false, "score": 1, "last_activity_date": 1465390123, "last_edit_date": 1495540852, "creation_date": 1465390123, "answer_id": 37702984, "question_id": 37702664, "link": "https://stackoverflow.com/questions/37702664/declaring-clang-s-fno-caret-diagnostics-only-for-a-specific-type-of-pragma/37702984#37702984", "title": "Declaring Clang\u2019s -fno-caret-diagnostics only for a specific type of #pragma", "body": "<p>If I understand correctly, the answer is part of <a href=\"https://stackoverflow.com/questions/31669021/how-to-silence-pragma-messages-from-gcc\">this question</a>. Does <code>-Wno#pragma-messages</code> do what you want?</p>\n"}], "owner": {"reputation": 699, "user_id": 3957040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e88a425a40322e715b799744b3a89898?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3957040/pablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465390123, "creation_date": 1465389284, "question_id": 37702664, "link": "https://stackoverflow.com/questions/37702664/declaring-clang-s-fno-caret-diagnostics-only-for-a-specific-type-of-pragma", "title": "Declaring Clang\u2019s -fno-caret-diagnostics only for a specific type of #pragma", "body": "<p>I rely on Clang\u2019s <code>#pragma message</code> to remember TODO notices. For example,</p>\n\n<pre><code>int\nmain(void)\n{\n#pragma message \"TODO: do something\"\n}\n</code></pre>\n\n<p>which gives this output for <code>clang -o todo todo.c</code>:</p>\n\n<pre><code>todo.c:4:9: warning: TODO: do something [-W#pragma-messages]\n#pragma message \"TODO: do something\"\n        ^\n1 warning generated.\n</code></pre>\n\n<p>This, however, is redundant. I know I can use the <code>-fno-caret-diagnostics</code> flag with Clang to avoid having the <code>#pragma</code> line in the compiler\u2019s output, but this also disables the caret diagnostics for other warnings and errors, which I would want to avoid.</p>\n\n<p>Is there a way of declaring <code>-fno-caret-diagnostics</code> only for this kind of <code>#pragma</code>?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 4, "creation_date": 1465388244, "post_id": 37702243, "comment_id": 62878488, "body": "You can declare arbitrary labels for <code>goto</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1465388301, "post_id": 37702243, "comment_id": 62878539, "body": "It <a href=\"http://coliru.stacked-crooked.com/a/5c6a79adc4da3830\" rel=\"nofollow noreferrer\">doesn&#39;t compile and run without a warning</a>."}, {"owner": {"reputation": 784, "user_id": 4185477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cvKOt.jpg?s=128&g=1", "display_name": "nikesh joshi", "link": "https://stackoverflow.com/users/4185477/nikesh-joshi"}, "edited": false, "score": 1, "creation_date": 1465388328, "post_id": 37702243, "comment_id": 62878562, "body": "It compiles ... try it..."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1465388348, "post_id": 37702243, "comment_id": 62878574, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Looks like <a href=\"http://coliru.stacked-crooked.com/a/30f751ff0e42d26a\" rel=\"nofollow noreferrer\">it runs perfectly</a>. Your compiler is just needlessly whiny."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1465388673, "post_id": 37702243, "comment_id": 62878817, "body": "I have no idea. I upvoted the question. It&#39;s well-written, backed up with code. And questions should <i>not</i> be downvoted on the sole grounds of being obvious."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465389068, "post_id": 37702243, "comment_id": 62879135, "body": "@Bathsheba Right, but still, you can consider writing a meaningful title first. UV Q&amp;A, it&#39;s a good one. :)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1465389394, "post_id": 37702243, "comment_id": 62879367, "body": "This is a sensible question. With the current complete ban on <code>goto</code>, it&#39;s to be expected that new programmers are unfamiliar with goto labels, and it&#39;s not obvious that you can put such a label in that place even if you&#39;re aware of them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1465391501, "post_id": 37702243, "comment_id": 62880944, "body": "@molbdnilo: You have a point. I still think it is badly researched, but I accept it is not necessarily the fault of the asker. I still don&#39;t think it is a good question, as it apparently is not compiled with the recommended (and minimum expected) warnings enabled (see Dieter L&#252;ckings comment). In dubio pro reo."}], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 8, "last_activity_date": 1465388280, "creation_date": 1465388280, "answer_id": 37702276, "question_id": 37702243, "link": "https://stackoverflow.com/questions/37702243/defau1t-not-default-is-a-valid-value-for-label/37702276#37702276", "title": "&quot;defau1t:&quot; (NOT &quot;default:&quot;) is a valid value for label?", "body": "<p><code>defau1t :</code> is a valid label name, even if it is not a case label. </p>\n\n<p>You could have a <code>goto defau1t;</code> somewhere else in the code.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465389151, "post_id": 37702354, "comment_id": 62879189, "body": "<code>a good compiler will warn you that it&#39;s not used.</code> +1 for that"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465391934, "post_id": 37702354, "comment_id": 62881271, "body": "Exactly the same. Good point."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 7, "last_activity_date": 1465391941, "last_edit_date": 1465391941, "creation_date": 1465388491, "answer_id": 37702354, "question_id": 37702243, "link": "https://stackoverflow.com/questions/37702243/defau1t-not-default-is-a-valid-value-for-label/37702354#37702354", "title": "&quot;defau1t:&quot; (NOT &quot;default:&quot;) is a valid value for label?", "body": "<p>It's a valid name for a <em>label</em>, which you can use as a placeholder for a <code>goto</code> call. (And entering into a <code>switch</code> block via a <code>goto</code> call <em>is</em> allowable in C and C++ even if it's ill-advised).</p>\n\n<p><em>label</em> names broadly have the same rules as variable names when it comes to the characters they can contain. <code>defau1t</code> satisfies those rules.</p>\n\n<p>In your case, it's benign and will be compiled out at runtime, although a good compiler will warn you that it's not used.</p>\n"}], "owner": {"reputation": 784, "user_id": 4185477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cvKOt.jpg?s=128&g=1", "display_name": "nikesh joshi", "link": "https://stackoverflow.com/users/4185477/nikesh-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 2, "closed_date": 1465389331, "accepted_answer_id": 37702354, "answer_count": 2, "score": 9, "last_activity_date": 1465391941, "creation_date": 1465388179, "last_edit_date": 1465388994, "question_id": 37702243, "link": "https://stackoverflow.com/questions/37702243/defau1t-not-default-is-a-valid-value-for-label", "closed_reason": "Duplicate", "title": "&quot;defau1t:&quot; (NOT &quot;default:&quot;) is a valid value for label?", "body": "<p>Why this code compile and run fine. I have written defau1t instead of default , 1 at the place of l.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int i=4;\n    switch(i)\n    {\n        case 3:\n        break;\n        defau1t :\n        break;      \n    }\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "opengl", "soil"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465388644, "post_id": 37702260, "comment_id": 62878795, "body": "I know, how to link onter libraries, but SOL doesn&#39;t have the .lib file. It has the .a file."}, {"owner": {"reputation": 87, "user_id": 6440093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bac207c5723c4d059179f0ae04bc8fbd?s=128&d=identicon&r=PG&f=1", "display_name": "jovan", "link": "https://stackoverflow.com/users/6440093/jovan"}, "reply_to_user": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465388938, "post_id": 37702260, "comment_id": 62879038, "body": "that sounds stupid but i think that i just changed the .a to a .lib and it worked"}, {"owner": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465388990, "post_id": 37702260, "comment_id": 62879078, "body": "you mean to rename the file? But it gives me and error: cannot open libSOIL.lib"}, {"owner": {"reputation": 87, "user_id": 6440093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bac207c5723c4d059179f0ae04bc8fbd?s=128&d=identicon&r=PG&f=1", "display_name": "jovan", "link": "https://stackoverflow.com/users/6440093/jovan"}, "reply_to_user": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465389628, "post_id": 37702260, "comment_id": 62879554, "body": "i found a working version of the file on my computer and uploaded it: <a href=\"https://onedrive.live.com/redir?resid=CF5ABC1A46725010!440&amp;authkey=!AFhaF3v_sPtuYyo&amp;ithint=file%2clib\" rel=\"nofollow noreferrer\">onedrive.live.com/&hellip;</a>"}, {"owner": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465389676, "post_id": 37702260, "comment_id": 62879596, "body": "oh thank you soo much. I&#39;ll try and tell you if it works"}, {"owner": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "edited": false, "score": 0, "creation_date": 1465389861, "post_id": 37702260, "comment_id": 62879748, "body": "yes, thanks it worked. I&#39;ll tell yo if any of the SOIL functions wont work. Thanks for all"}], "tags": [], "owner": {"reputation": 87, "user_id": 6440093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bac207c5723c4d059179f0ae04bc8fbd?s=128&d=identicon&r=PG&f=1", "display_name": "jovan", "link": "https://stackoverflow.com/users/6440093/jovan"}, "is_accepted": false, "score": 0, "last_activity_date": 1465388466, "last_edit_date": 1465388466, "creation_date": 1465388234, "answer_id": 37702260, "question_id": 37702038, "link": "https://stackoverflow.com/questions/37702038/opengl-soil-linking-to-visual-studio/37702260#37702260", "title": "OpenGl SOIL linking to visual studio", "body": "<p>Rightclick on the project -> Properties -> VC++ Directories -> Library Directories -> Add Library Path\n(I have version in another language so the names could be a little different)</p>\n\n<p>Then you write into your Programm <code>#pragma comment(lib,\"NAMEOFLIB\")</code></p>\n"}], "owner": {"reputation": 103, "user_id": 5065555, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1610823509173713/picture?type=large", "display_name": "Alenprintf ", "link": "https://stackoverflow.com/users/5065555/alenprintf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "closed_date": 1465389365, "answer_count": 1, "score": -1, "last_activity_date": 1465388616, "creation_date": 1465387638, "last_edit_date": 1465388616, "question_id": 37702038, "link": "https://stackoverflow.com/questions/37702038/opengl-soil-linking-to-visual-studio", "closed_reason": "Duplicate", "title": "OpenGl SOIL linking to visual studio", "body": "<p>I have a problem with linking SOIL to my OpenGL project so I'm asking you if one can show me how to link it properly.</p>\n"}, {"tags": ["sql", "c", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "is_accepted": false, "score": 1, "last_activity_date": 1465388094, "creation_date": 1465388094, "answer_id": 37702215, "question_id": 37701952, "link": "https://stackoverflow.com/questions/37701952/calling-user-defined-function-in-insert-command-of-sqlite/37702215#37702215", "title": "Calling user defined function in Insert command of Sqlite", "body": "<p><code>msg</code> is a C program level variable. In the sql command you cannot reference a C variable, you have to insert its content into the sql statement as a string literal. The same applies to the <code>len</code> variable.</p>\n\n<p>You basically need to generate the following string within your C program:</p>\n\n<pre><code>char *sql = \"INSERT INTO TestHash (id,CheckSum) VALUES (?,hash('Testing of the hash',19));\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 1252223, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db138b22acc3e6beefafe61c1e0b097a?s=128&d=identicon&r=PG", "display_name": "Vikas", "link": "https://stackoverflow.com/users/1252223/vikas"}, "edited": false, "score": 0, "creation_date": 1465455047, "post_id": 37710775, "comment_id": 62910067, "body": "Both your method and Shadow&#39;s method work. which is better."}, {"owner": {"reputation": 83, "user_id": 1252223, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db138b22acc3e6beefafe61c1e0b097a?s=128&d=identicon&r=PG", "display_name": "Vikas", "link": "https://stackoverflow.com/users/1252223/vikas"}, "edited": false, "score": 0, "creation_date": 1465455145, "post_id": 37710775, "comment_id": 62910130, "body": "had problem with sqlite_binding_text ,was sending wrong column number for second parameter"}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": true, "score": 2, "last_activity_date": 1465412396, "creation_date": 1465412396, "answer_id": 37710775, "question_id": 37701952, "link": "https://stackoverflow.com/questions/37701952/calling-user-defined-function-in-insert-command-of-sqlite/37710775#37710775", "title": "Calling user defined function in Insert command of Sqlite", "body": "<p>You are already using a <a href=\"http://www.sqlite.org/lang_expr.html#varparam\" rel=\"nofollow\">parameter</a> for the ID value.\nDo the same for the other two values:</p>\n\n<pre><code>const char *sql = \"INSERT INTO TestHash (id,CheckSum) VALUES (?,hash(?,?));\"\n/* error handling omitted */\nrc = sqlite3_prepare_v2(db, sql, -1, &amp;res, NULL);\nsqlite3_bind_int(res, 1, ...);\nsqlite3_bind_text(res, 2, msg, len, SQLITE_TRANSIENT);\nsqlite3_bind_int(res, 3, len);\nrc = sqlite3_step(res);\n</code></pre>\n\n<p>If the ID value should be NULL (for an autoincremented value), you should not use a parameter for it.</p>\n\n<p>Your hash function should not need the length parameter.</p>\n"}], "owner": {"reputation": 83, "user_id": 1252223, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db138b22acc3e6beefafe61c1e0b097a?s=128&d=identicon&r=PG", "display_name": "Vikas", "link": "https://stackoverflow.com/users/1252223/vikas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 37710775, "answer_count": 2, "score": 0, "last_activity_date": 1465412396, "creation_date": 1465387379, "last_edit_date": 1465387837, "question_id": 37701952, "link": "https://stackoverflow.com/questions/37701952/calling-user-defined-function-in-insert-command-of-sqlite", "title": "Calling user defined function in Insert command of Sqlite", "body": "<p>I have written a user defined function to calculate checksum for a given string. I need to insert the calculated hash value into the table. \nI used the following method</p>\n\n<pre><code>char msg[] = \"Testing of the hash\"\nlen = strlen(msg)\nchar *sql = \"INSERT INTO TestHash (id,CheckSum) VALUES (?,hash(msg,len));\"\nsqlite3_prepare_v2(db, sql, -1, &amp;res, 0);\nsqlite3_step(res)\n</code></pre>\n\n<p>but sqlite throws a error \"failed to prepare insert sql statement:no such column:msg\". \nWhat is the right way to call a UDF in insert command.</p>\n\n<p>Platform:linux\nLanguage:C\ndatabase:sqlite</p>\n\n<p>Thanks for the help in advance </p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1465386947, "post_id": 37701741, "comment_id": 62877608, "body": "The <code>scanf</code> format <code>&quot;%s&quot;</code> reads <i>space delimited</i> &quot;words&quot;."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1465387681, "post_id": 37701741, "comment_id": 62878100, "body": "@user3121023 Yes, although it is also necessary to check for a <code>&#39;\\n&#39;</code> character at <code>ins[strlen(ins)-1]</code>. If it is not there, the buffer was too small and there are unread characters remaining on the input line. If it is there, the buffer was large enough and you can do further manipulation on the string, such as stripping leading and trailing whitespace characters, including the final newline character."}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465388397, "post_id": 37702067, "comment_id": 62878613, "body": "...and take note that a new line char &#39;\\n&#39;, if one,  will be into buffer <code>ins</code>."}], "tags": [], "owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "is_accepted": true, "score": 2, "last_activity_date": 1465387700, "creation_date": 1465387700, "answer_id": 37702067, "question_id": 37701741, "link": "https://stackoverflow.com/questions/37701741/while-loop-printing-and-scanf/37702067#37702067", "title": "While loop printing and scanf", "body": "<blockquote>\n  <p>%s - String of characters. This will read subsequent characters until a whitespace is found (whitespace characters are considered to be blank, newline and tab).</p>\n</blockquote>\n\n<p>I recommend you using <code>fgets()</code> instead of <code>scanf()</code> since the latter has no buffer overflow protection. </p>\n\n<pre><code>#define namesize 15\nchar *ins = malloc (namesize);\n\nfgets(ins, namesize, stdin);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6397675, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kD1xhdsGdF4/AAAAAAAAAAI/AAAAAAAAABA/vCGlyWo1QNk/photo.jpg?sz=128", "display_name": "Maryam Shekarriz", "link": "https://stackoverflow.com/users/6397675/maryam-shekarriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1465388416, "accepted_answer_id": 37702067, "answer_count": 1, "score": -1, "last_activity_date": 1465392540, "creation_date": 1465386748, "last_edit_date": 1465392540, "question_id": 37701741, "link": "https://stackoverflow.com/questions/37701741/while-loop-printing-and-scanf", "closed_reason": "Duplicate", "title": "While loop printing and scanf", "body": "<p>this program with this value :\nABCDEF\nis ok at the frist </p>\n\n<p>but again when you enter a value with space,like :\nABC DEF\nthe program works wrong!!!!\nwhile loop ignores scanf the second time\nWhat am I doing wrong?!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\nint main(){\n    bool checkSrc = false;\n    bool checkDst = false;\n\n    while (!checkSrc &amp;&amp; !checkDst)\n\n    {\n\n    char ins[10];\n\n    printf(\"White Player : \");\n    scanf(\"%s\",&amp;ins);\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "stack"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1465388566, "post_id": 37701734, "comment_id": 62878735, "body": "You can do what you prefer, but you also need a representation of an empty stack. With your current code, setting <code>sp</code> to <code>0</code> represents an empty stack. If <code>sp</code> indexed the top element on the stack, you&#39;d need to represent the empty stack by setting <code>sp</code> to <code>-1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1465388025, "post_id": 37701989, "comment_id": 62878327, "body": "There is an advantage to post-incrementing the stack-pointer: The first element of the stack can be used without invoking undefined behavior in C."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465393050, "post_id": 37701989, "comment_id": 62882154, "body": "@EOF What do you mean? <code>int isEmpty() { return sp==-1; }</code>, <code>int pop(){ return s[sp--];}</code> and <code>void push(int i) { s[++sp]=i; }</code> has no UB..."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465393597, "post_id": 37701989, "comment_id": 62882595, "body": "Yeah, that works. Although that&#39;s not quite a stack-<i>pointer</i>. If you have an actual <i>pointer</i> you increment/decrement, you can&#39;t use a pre-incremented stack and use the first element."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465395635, "post_id": 37701989, "comment_id": 62884286, "body": "Ok, now I understand your remark (pointer to represent a stack-pointer), then your remark was (of course) correct. Forgive me."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 3, "last_activity_date": 1465387485, "creation_date": 1465387485, "answer_id": 37701989, "question_id": 37701734, "link": "https://stackoverflow.com/questions/37701734/should-the-stack-pointer-point-to-the-value-on-the-top-or-the-the-position-wher/37701989#37701989", "title": "Should the stack pointer point to the value on the top, or the the position where the next value should be?", "body": "<p>This is just a matter of convention. Many implementations let the top stack pointer points to the \"next available space\", but you can really do what you prefer, provided that externally your stack behave as intented.</p>\n"}, {"comments": [{"owner": {"reputation": 1800, "user_id": 37370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1", "display_name": "RichieHH", "link": "https://stackoverflow.com/users/37370/richiehh"}, "edited": false, "score": 0, "creation_date": 1605604960, "post_id": 37705342, "comment_id": 114694713, "body": "The whole notion of pushing &quot;onto a stack&quot; suggest it grows upwards. It&#39;s not a ridiculous notion to represent just that in a high-level language - asm another thing entirely of course."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 1800, "user_id": 37370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1", "display_name": "RichieHH", "link": "https://stackoverflow.com/users/37370/richiehh"}, "edited": false, "score": 0, "creation_date": 1605800747, "post_id": 37705342, "comment_id": 114768767, "body": "@RichieHH: It&#39;s entirely arbitrary. All that matters is that we properly implement the LIFO <i>behavior</i> of  a stack - what it looks like under the hood is unimportant.  Imagine a stack based on a linked list, where we push by adding nodes to the list head and pop by removing nodes from the list head.  In that case, the concepts of &quot;upward&quot; and &quot;downward&quot; are <i>meaningless</i>."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1605801079, "last_edit_date": 1605801079, "creation_date": 1465396059, "answer_id": 37705342, "question_id": 37701734, "link": "https://stackoverflow.com/questions/37701734/should-the-stack-pointer-point-to-the-value-on-the-top-or-the-the-position-wher/37705342#37705342", "title": "Should the stack pointer point to the value on the top, or the the position where the next value should be?", "body": "<p>For me, the most natural implementation of an array-based stack is one that grows &quot;downwards&quot;, with the stack pointer pointing to the most recently pushed element:</p>\n<pre><code>void initStack (STACK *s)\n{\n    s-&gt;sp = MAX;\n}\n\nint push (STACK *s, int x)\n{\n  if( !s-&gt;sp ) \n    return 0;               \n  else                      \n    s-&gt;val[--s-&gt;sp] = x;    \n  return 1;                 \n}    \n\nint pop(STACK *s, int *x)\n{\n  if ( s-&gt;sp == MAX )\n    return 0;\n  else\n    *x = s-&gt;val[s-&gt;sp++];\n  return 1;\n}\n</code></pre>\n<p>The checks are simpler IMO, and since it never decrements below 0, you can safely use an unsigned type as your stack pointer (which I tend to do for reasons that probably aren't completely rational).</p>\n<p>Note that this mimics the x86 (and many other architectures') stack behavior, in that the SP grows &quot;downwards&quot;, towards 0.</p>\n<p>Notice that I changed the return value on success and failure, since in C <code>0</code> means &quot;false&quot; and non-zero means &quot;true&quot;.  This way you can write code like</p>\n<pre><code>if ( push( stack, val ) )\n{\n  ...\n}\nelse\n{\n  // push failed, handle as appropriate\n}\n</code></pre>\n<p>Again, this is just a more natural implementation IMO.</p>\n<p><strong>EDIT</strong></p>\n<p>One big drawback of this method is that it's difficult to grow the stack if necessary.  If you allocate the backing array dynamically, you can use <code>realloc</code> to extend it, but you will have to move all the existing data to the new stack &quot;bottom&quot;, which would be expensive and a pain in the ass.  By contrast, if you grow the stack upwards, you don't have that problem.  But, if I wanted a stack that could grow or shrink as necessary, I wouldn't use an array-based stack, I'd use one based on a linked list, where items are pushed by adding them to the head of the list and popped by removing them from the head.</p>\n"}], "owner": {"reputation": 188, "user_id": 5406663, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d2fc65d332ca7ec74016b7003e564aa?s=128&d=identicon&r=PG&f=1", "display_name": "C. Rib", "link": "https://stackoverflow.com/users/5406663/c-rib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 37701989, "answer_count": 2, "score": 0, "last_activity_date": 1605801079, "creation_date": 1465386741, "question_id": 37701734, "link": "https://stackoverflow.com/questions/37701734/should-the-stack-pointer-point-to-the-value-on-the-top-or-the-the-position-wher", "title": "Should the stack pointer point to the value on the top, or the the position where the next value should be?", "body": "<p>For example, take this example functions:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n#define MAX 100\ntypedef struct stack {\nint sp;\nint val [MAX];\n} STACK;\n\n\nvoid initStack (STACK *s){\n    s-&gt;sp = 0;\n}\n\nint push (STACK *s, int x){\n    if(s-&gt;sp == MAX) return -1;\n    else s-&gt;val[s-&gt;sp++] = x;\n    return 0;\n}\n\nint main(){\n    STACK s;\n    int pushval, p;\n\n    initStack(&amp;s);\n\n    p = push(&amp;s, 1);\n    pushval = s.val[s.sp-1];\n    printf(\"pushval %d\\n\", pushval);\n\n    return 0;\n}\n</code></pre>\n\n<p>So in this case if I do s.val[s.sp] I get gibberish. If I do s.val[s.sp-1] I get the value I pushed on to the stack. I don't know if the stack pointer should point to the \"next available space\" aka <strong>be equal to the number of elements in the array</strong>, <strong>or</strong> should be equal to the index of the last element of the array aka <strong>number of elements in the array - 1</strong></p>\n"}, {"tags": ["c", "encryption"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4346741"}, "is_accepted": false, "score": 1, "last_activity_date": 1465394001, "last_edit_date": 1465394001, "creation_date": 1465387854, "answer_id": 37702119, "question_id": 37701601, "link": "https://stackoverflow.com/questions/37701601/stuck-on-speck-decryption-algorithm-in-c/37702119#37702119", "title": "Stuck on Speck Decryption algorithm in C", "body": "<p>I've found a solid implementation on <a href=\"https://github.com/madmo/speck/blob/master/speck.c\" rel=\"nofollow\">https://github.com/madmo/speck/blob/master/speck.c</a>\nand am using the not-combined version (not sure about the differences).</p>\n\n<p>This works and hopefully can help others!</p>\n\n<p>On request, my implementation (as a Contiki process):</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#define SPECK_TYPE uint32_t\n#define SPECK_ROUNDS 27\n#define SPECK_KEY_LEN 4\n\n#define ROR(x, r) ((x &gt;&gt; r) | (x &lt;&lt; ((sizeof(SPECK_TYPE) * 8) - r)))\n#define ROL(x, r) ((x &lt;&lt; r) | (x &gt;&gt; ((sizeof(SPECK_TYPE) * 8) - r)))\n\n#ifdef SPECK_32_64\n#define R(x, y, k) (x = ROR(x, 7), x += y, x ^= k, y = ROL(y, 2), y ^= x)\n#define RR(x, y, k) (y ^= x, y = ROR(y, 2), x ^= k, x -= y, x = ROL(x, 7))\n#else\n#define R(x, y, k) (x = ROR(x, 8), x += y, x ^= k, y = ROL(y, 3), y ^= x)\n#define RR(x, y, k) (y ^= x, y = ROR(y, 3), x ^= k, x -= y, x = ROL(x, 8))\n#endif\n\nvoid speck_expand(SPECK_TYPE const K[static SPECK_KEY_LEN], SPECK_TYPE S[static SPECK_ROUNDS])\n{\n    SPECK_TYPE i, b = K[0];\n    SPECK_TYPE a[SPECK_KEY_LEN - 1];\n\n    for (i = 0; i &lt; (SPECK_KEY_LEN - 1); i++)\n    {\n        a[i] = K[i + 1];\n    }\n    S[0] = b;\n    for (i = 0; i &lt; SPECK_ROUNDS - 1; i++) {\n        R(a[i % (SPECK_KEY_LEN - 1)], b, i);\n        S[i + 1] = b;\n    }\n}\n\nvoid speck_encrypt(SPECK_TYPE const pt[static 2], SPECK_TYPE ct[static 2], SPECK_TYPE const K[static SPECK_ROUNDS])\n{\n    SPECK_TYPE i;\n    ct[0]=pt[0]; ct[1]=pt[1];\n\n    for(i = 0; i &lt; SPECK_ROUNDS; i++){\n        R(ct[1], ct[0], K[i]);\n    }\n}\n\nvoid speck_decrypt(SPECK_TYPE const ct[static 2], SPECK_TYPE pt[static 2], SPECK_TYPE const K[static SPECK_ROUNDS])\n{\n    SPECK_TYPE i;\n    pt[0]=ct[0]; pt[1]=ct[1];\n\n    for(i = 0; i &lt; SPECK_ROUNDS; i++){\n        RR(pt[1], pt[0], K[(SPECK_ROUNDS - 1) - i]);\n    }\n}\n\nPROCESS_THREAD(eval_crypto_process, ev, data)\n{\n    PROCESS_BEGIN();\n    printf(\"eval_crypto_process\\n\");\n\n    while(1){\n        printf(\"Waiting.\\n\");\n\n        static struct etimer timer;\n        etimer_set(&amp;timer, 5*CLOCK_CONF_SECOND);\n        PROCESS_WAIT_UNTIL(etimer_expired(&amp;timer));\n        printf(\"Starting crypto.\\n\");\n\n        PORTB ^= _BV(PB5);\n        PORTB ^= _BV(PB6);\n\n        uint32_t plain[2] = {987654321,987654321};\n        uint32_t key[4] = {123456789, 123456789, 123456789, 123456789};\n\n        SPECK_TYPE buffer[2] = {0};\n        SPECK_TYPE enc[2] = {0};\n\n        SPECK_TYPE exp[SPECK_ROUNDS];\n\n        speck_expand(key, exp);\n\n//      printf(\"Plaintext x: %lu\", plain[0]);\n//      printf(\", Plaintext y: %lu \\n\", plain[1]);\n\n        speck_encrypt(plain, enc, exp);\n\n//      printf(\"Encrypted  encr_x: %lu \",enc[0]);\n//      printf(\", Encrypted  encr_y: %lu \\n\", enc[1]);\n\n        speck_decrypt(enc, buffer, exp);\n\n//      printf(\"Decrypted x: %lu\", buffer[0]);\n//      printf(\", Decrypted y: %lu \\n\", buffer[1]);\n\n        PORTB ^= _BV(PB5);\n        PORTB ^= _BV(PB6);\n\n        printf(\"finished crypto.\\n\");\n    }\n\n    PROCESS_END();\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4346741"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1552487765, "creation_date": 1465386291, "last_edit_date": 1465387062, "question_id": 37701601, "link": "https://stackoverflow.com/questions/37701601/stuck-on-speck-decryption-algorithm-in-c", "title": "Stuck on Speck Decryption algorithm in C", "body": "<p>I want to use the Speck block cipher for crypto on my platform.\nSome of the code in C is available on <a href=\"https://en.wikipedia.org/wiki/Speck_(cipher)\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Speck_(cipher)</a> but they do not provide decryption.</p>\n\n<p>At the moment, I adapted the code for an implementation of Speck 64/128 (64bit block and 128bit key) and get a (supposedly) successful encryption, now I'd like to decrypt it again. The key is hardcoded, this is simply for benchmarking.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\n#define ROR(x, r) ((x &gt;&gt; r) | (x &lt;&lt; (32 - r)))\n#define ROL(x, r) ((x &lt;&lt; r) | (x &gt;&gt; (32 - r)))\n#define R(x, y, k) (x = ROR(x, 8), x += y, x ^= k, y = ROL(y, 3), y ^= x)\n#define ROUNDS 27\n\nvoid speckEncrypt(uint32_t pt[2], uint32_t ct[2], uint32_t K[2]) {\n   uint32_t y = pt[0], x = pt[1], b = K[0], a = K[1];\n\n   R(x, y, b);\n   for (int i = 0; i &lt; ROUNDS - 1; i++) {\n      R(a, b, i);\n      R(x, y, b);\n   }\n\n   ct[0] = y;\n   ct[1] = x;\n}\n\nvoid speckDecrypt(uint32_t pt[2], uint32_t ct[2], uint32_t K[2]) {\n}\n\nstatic void speck(uint32_t pt[2]){\n\n    uint32_t ct[2];\n\n    uint32_t K[4] = {123456789,123456789,123456789,123456789};\n\n    printf(\"Plaintext x: %lu\", pt[0]);\n    printf(\", Plaintext y: %lu \\n\", pt[1]);\n\n    printf(\"Get key schedule \\n\");\n\n    speckEncrypt(pt, ct, K);\n\n    printf(\"Encrypted  encr_x: %lu \",ct[0]);\n    printf(\", Encrypted  encr_y: %lu \\n\", ct[1]);\n\n//  speckDecrypt(pt, ct, K);\n\n//  printf(\"Decrypted x: %lu\", pt[0]);\n//  printf(\", Decrypted y: %lu \\n\", pt[1]);\n}\n</code></pre>\n\n<p>I'm not succeeding in implementing speckDecrypt. I've tried looking around for other solutions but consistently fail (e.g., <a href=\"https://www.multos.com/forums/viewthread/97\" rel=\"nofollow\">https://www.multos.com/forums/viewthread/97</a>).\nI'm inexperienced with crypto so could anybody help me out?</p>\n\n<p>Edit:</p>\n\n<p>I've also done the same for a Java implementation, which uses Key Extensions.\nCould that also be added to this one? The java version works, as far as I can determine.</p>\n\n<pre><code>public void speck(int subm_x,int subm_y){\n    byte n = 32;   // Word size\n    byte m = 4;   // # of key words\n    byte T = 27;   // Number of rounds\n    int[] l;  // Used in the key generation\n    int[] k;  // Stores subkeys\n    int x;   // Encrypted x\n    int y;   // Encrypted y\n    byte alpha = 8; // Number of shifts, function of n\n    byte beta = 3; // Number of shifts, function of n\n\n    k = new int[T];\n    l = new int[2*T];\n\n    k[0] = 123456789; //faux random number. Max Int is 2,147,483,647\n    k[1] = 123456789; //faux random number. Max Int is 2,147,483,647\n    k[2] = 123456789; //faux random number. Max Int is 2,147,483,647\n    k[3] = 123456789; //faux random number. Max Int is 2,147,483,647\n\n    l[m-4] = 1123456789;\n    l[m-3] = 1113456789;\n    l[m-2] = 1111456789;\n\n    x = subm_x;\n    y = subm_y;\n\n    /* *************** KEY EXTENSTION ***************** */\n    for(int i = 0; i &lt; T-1; i++) {\n        l[i+m-1] = (k[i] + rotateRight(l[i], alpha)) ^ i;\n        k[i+1] = rotateLeft(k[i], beta) ^ l[i+m-1]; \n    }\n    /* *************** ENCRYPTION ********************* */\n    for(int i = 0; i &lt; T; i++) {\n        x = (rotateRight(x, alpha) + y) ^ k[i];\n        y = rotateLeft(y, beta) ^ x;\n    }\n\n    /* *************** DECRYPTION ********************* */         \n    for(int i = T-1; i &gt;= 0; i--) {\n        y = rotateRight(x ^ y, beta);\n        x = rotateLeft((x ^ k[i]) - y, alpha);\n    }\n    }\n</code></pre>\n\n<p>The purpose is benchmarking them against each other.</p>\n"}, {"tags": ["c", "git", "libgit2"], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 1149206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/759656886a1651e29ad2c27b4f786856?s=128&d=identicon&r=PG", "display_name": "Maeln", "link": "https://stackoverflow.com/users/1149206/maeln"}, "edited": false, "score": 0, "creation_date": 1465387424, "post_id": 37701828, "comment_id": 62877926, "body": "&lt;project_name&gt; is just there so I don&#39;t have to disclose the name of the project I&#39;m working on. The real name contain only legal alphanumeric chars."}], "tags": [], "owner": {"reputation": 34, "user_id": 6124731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbl6W.png?s=128&g=1", "display_name": "joni", "link": "https://stackoverflow.com/users/6124731/joni"}, "is_accepted": false, "score": 0, "last_activity_date": 1465386981, "creation_date": 1465386981, "answer_id": 37701828, "question_id": 37701431, "link": "https://stackoverflow.com/questions/37701431/libgit2-failed-to-resolve-path-when-creating-a-repo/37701828#37701828", "title": "libgit2: Failed to resolve path when creating a repo", "body": "<p>The <em>repo_path</em> parameter of <em>git_repository_init_ext</em> isn't legal because \nit contains the chars '&lt;' '>' . \nTry to make new directory with the above chars and you get error message.</p>\n"}, {"tags": [], "owner": {"reputation": 63488, "user_id": 729881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdfaf0aad74fef442e2ffc9999ef9c1?s=128&d=identicon&r=PG", "display_name": "Edward Thomson", "link": "https://stackoverflow.com/users/729881/edward-thomson"}, "is_accepted": true, "score": 1, "last_activity_date": 1465414255, "last_edit_date": 1592644375, "creation_date": 1465414255, "answer_id": 37711309, "question_id": 37701431, "link": "https://stackoverflow.com/questions/37701431/libgit2-failed-to-resolve-path-when-creating-a-repo/37711309#37711309", "title": "libgit2: Failed to resolve path when creating a repo", "body": "<p>Windows XP is not supported by libgit2.  Support ended in <a href=\"https://github.com/libgit2/libgit2/releases/tag/v0.21.0\" rel=\"nofollow noreferrer\">v0.21.0 in 2014</a>:</p>\n<blockquote>\n<p>Top-level Improvements</p>\n<ul>\n<li><strong>We've dropped support for Windows XP.</strong> We're evil like that.</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 344, "user_id": 1149206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/759656886a1651e29ad2c27b4f786856?s=128&d=identicon&r=PG", "display_name": "Maeln", "link": "https://stackoverflow.com/users/1149206/maeln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 37711309, "answer_count": 2, "score": 0, "last_activity_date": 1465414255, "creation_date": 1465385815, "last_edit_date": 1465393163, "question_id": 37701431, "link": "https://stackoverflow.com/questions/37701431/libgit2-failed-to-resolve-path-when-creating-a-repo", "title": "libgit2: Failed to resolve path when creating a repo", "body": "<p>For a project I am working on, I am trying to use libgit2.\nFor the moment, I am just trying to create a repo using <code>git_repository_init</code> but it fails with the following error message :</p>\n\n<pre><code>Error: -1/2: Failed to resolve path 'D:/Workspace/&lt;project_name&gt;/test/.git/': Invalid argument\n</code></pre>\n\n<p>The code is the following :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"git2.h\"\n\nint main(int argc, char *argv[])\n{\n    git_libgit2_init();\n\n    git_repository *repo;\n    git_repository_init_options opts = GIT_REPOSITORY_INIT_OPTIONS_INIT;\n    opts.flags |= GIT_REPOSITORY_INIT_MKDIR;\n    int err = git_repository_init_ext(&amp;repo, \"D:/Workspace/&lt;project_name&gt;/test\", &amp;opts);\n    if(err &lt; 0)\n    {\n        const git_error *e = giterr_last();\n        std::cerr &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"/\" &lt;&lt; e-&gt;klass &lt;&lt; \": \" &lt;&lt; e-&gt;message &lt;&lt; std::endl;\n    }\n\n    git_repository_free(repo);\n\n    git_libgit2_shutdown();\n\n    return 0;\n}\n</code></pre>\n\n<p>The .git directory in the test directory is still created but it's empty.\nI have tried with relative and absolute path and also Unix and windows path but the result seem to always be the same.</p>\n\n<p>Also, when executing libgit2_clar, a lot of test fail always with the same error : \"error -1 - Failed to resolve path 'attr': Invalid argument\".</p>\n\n<p>libgit2 and the previous code has been compiled and executed on a Windows XP 32bit using MinGW with gcc 4.8.1.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465386533, "post_id": 37701411, "comment_id": 62877269, "body": "Make sure the prototype for <code>verifyWord()</code> is visible to every caller of the function."}], "answers": [{"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1465386592, "post_id": 37701576, "comment_id": 62877314, "body": "If you had read the OP&#39;s post, you&#39;d have seen that one of the declarations is <i>implicit</i>."}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1465387018, "post_id": 37701576, "comment_id": 62877657, "body": "Oh, my bad. Still, this solves the question, since the question is: &quot;Please point me in the right direction as i tried declaring above the main:&quot;"}], "tags": [], "owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "is_accepted": false, "score": 1, "last_activity_date": 1465387108, "last_edit_date": 1465387108, "creation_date": 1465386207, "answer_id": 37701576, "question_id": 37701411, "link": "https://stackoverflow.com/questions/37701411/conflicting-types-and-previous-implicit-declaration-in-c/37701576#37701576", "title": "conflicting types AND previous implicit declaration in C", "body": "<p>You need to declare the function correctly with the arguments you are willing to pass in it. </p>\n\n<p>Let's say for example that <code>verifyWord</code> returns <code>void</code> and accepts <code>char pointer</code> as an argument. </p>\n\n<p>The proper declaration would be: </p>\n\n<pre><code>void verifyWord (char *nextWord);\n</code></pre>\n\n<p>And you will use it like:</p>\n\n<pre><code>char* nextWord = NULL;\n\nverifyWord(nextword);\n</code></pre>\n\n<p>Your problem is that you didn't tell your compiler how to deal with the function. You need to have explicit declaration, like the one I mentioned above, placed somewhere before the line where you call it, and it has to be within the same scope. </p>\n"}], "owner": {"reputation": 5, "user_id": 6440029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522e101b1db9679d68bc7c3c1ab49a73?s=128&d=identicon&r=PG&f=1", "display_name": "CwhatC", "link": "https://stackoverflow.com/users/6440029/cwhatc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465387108, "creation_date": 1465385775, "question_id": 37701411, "link": "https://stackoverflow.com/questions/37701411/conflicting-types-and-previous-implicit-declaration-in-c", "title": "conflicting types AND previous implicit declaration in C", "body": "<p><a href=\"http://i.stack.imgur.com/Cchuk.png\" rel=\"nofollow\">The error message</a> </p>\n\n<pre><code>skeleton.c:86:6: warning: conflicting types for \u2018verifyWord\u2019 [enabled by default]\n void verifyWord(char nword) {\n      ^\nskeleton.c:79:3: note: previous implicit declaration of \u2018verifyWord\u2019 was here\n   verifyWord(nextword);\n   ^\n</code></pre>\n\n<hr>\n\n<pre><code>void playgame() {\n    .\n    .\n    . \n    strcpy(curword, get_random_word(dictptr));\n\n    for(;;) {\n        .\n        .\n        .\n        /*function for nextword if correct*/\n        verifyWord(nextword);\n        /*                                           */\n    } /* end for loop */\n    .\n    . \n    .\n}\n</code></pre>\n\n<hr>\n\n<pre><code>void verifyWord(char nword) {\nFILE * fp;\n\nfp = fopen (\"usedWords.txt\", \"a+\");\nfprintf(fp, \"%d \", nword);\n\nfclose(fp);\n}\n</code></pre>\n\n<p>Hi, this program is supposed to be a mini word game, i am new to C.\nNeed some help in figuring out how can i avoid the error shown in the imgur image.</p>\n\n<p>the above 2 is a playgame function and a verifyWord function</p>\n\n<p>Please point me in the right direction as i tried declaring above the main:</p>\n\n<ul>\n<li>verifyWord();</li>\n<li>char verifyWord(void);</li>\n<li>char verifyWord();</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1465391797, "post_id": 37701124, "comment_id": 62881161, "body": "Take a look <a href=\"http://stackoverflow.com/questions/37489236/function-returning-a-pointer-to-an-array\">also Here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 3, "creation_date": 1465385420, "post_id": 37701242, "comment_id": 62876486, "body": "-1 This is a lazy poorly written answer with no explanation or substance that  exists only so the answerer can be the first to &quot;answer&quot; the question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 1, "creation_date": 1465385467, "post_id": 37701242, "comment_id": 62876523, "body": "@MilesRout perhaps you could provide your own answer"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 2, "creation_date": 1465385508, "post_id": 37701242, "comment_id": 62876549, "body": "@MilesRout Using a typedef is actually a pretty good idea, one which has substance -- though I agree that the answer should have more explanation."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 1, "creation_date": 1465389540, "post_id": 37701242, "comment_id": 62879487, "body": "By the way,I dont understand it..Could you explain it?"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1465385328, "creation_date": 1465385328, "answer_id": 37701242, "question_id": 37701124, "link": "https://stackoverflow.com/questions/37701124/how-to-declare-function-return-type-int-3/37701242#37701242", "title": "How to declare function return type `int (*)[3]`?", "body": "<p>One way is:</p>\n\n<pre><code>typedef int Int_array_3[3];\n\nInt_array_3 * foo(void);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1465386472, "post_id": 37701461, "comment_id": 62877214, "body": "Your arguments would apply equally well to any function returning a pointer... this doesn&#39;t seem to have much to do with the question"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1465386553, "post_id": 37701461, "comment_id": 62877288, "body": "My intention is to provide a &quot;don&#39;t even think about doing it that way&quot; kind of answer. But I like folk writing dodgy code. In 20 years I can come out of retirement when most folk only know PHP and Java, and charge loads of cash for C consultancy to pay for my Saga holidays."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1465391958, "post_id": 37701461, "comment_id": 62881291, "body": "Then obviously this should have been a <i>function pointer to a function returning an array pointer</i>. Even professional C programmers will struggle to read that, so you can charge even more :)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1465385880, "creation_date": 1465385880, "answer_id": 37701461, "question_id": 37701124, "link": "https://stackoverflow.com/questions/37701124/how-to-declare-function-return-type-int-3/37701461#37701461", "title": "How to declare function return type `int (*)[3]`?", "body": "<p>I'd advise against doing this.</p>\n\n<p>It's often done as a poor workaround for the apparent limitation that C has of not being able to have an array as a return value.</p>\n\n<p>Too often, a <em>dangling</em> pointer will be returned since the programmer will return a pointer to an array in the function that has automatic storage duration. Then this gets hacked to a <code>static</code> which ruins the threading model and breaks all previous returned pointers!</p>\n\n<p>Only slightly better is returning a pointer given to you by a <code>malloc</code> call internal to the function. But then, that burdens (asymmetrically) the caller with having to call <code>free</code> at some point. Eventually your function winds up in some kind of precompiled library which uses a different C runtime to a client. Your <code>malloc</code> and their <code>free</code> no longer match, and you end up with a truck load of undefined behaviour!</p>\n\n<p>Instead of all this, do consider passing the array <em>by pointer</em> on the function parameter list, preferably pre-allocating the memory.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465386279, "post_id": 37701486, "comment_id": 62877086, "body": "IMHO this is a reasonable answer, but note that it is not  MISRA complant. See <a href=\"https://en.wikipedia.org/wiki/MISRA_C\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/MISRA_C</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465386339, "post_id": 37701486, "comment_id": 62877133, "body": "Yup. It&#39;s standard C. It&#39;s just a potential recipe for disaster. Just sayin&#39;"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1465386468, "post_id": 37701486, "comment_id": 62877212, "body": "@M.M Rebel ;-) But seriously, the OP should be aware of the potential flaws if they adopt this solution."}, {"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 0, "creation_date": 1465388000, "post_id": 37701486, "comment_id": 62878300, "body": "Thanks for the answer.  Also, could you please emphasize how you deduced the return type <code>int (*foo(void))[3] {</code> from what the OP asked <code>int (*)[3]</code>?  I did visit the link you posted, but couldn&#39;t comprehend this."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465391431, "post_id": 37701486, "comment_id": 62880904, "body": "@Bathsheba Where did MISRA come from and what part of the code do you mean? MISRA doesn&#39;t say much about the use of array pointers at all. All it says is that array indexing <code>arr[i]</code> should be used in preference to pointer arithmetic <code>*(ptr+i)</code>. (Which was a stupid rule to begin with and I believe it&#39;s been phased out in MISRA 2012.)  <code>*foo()</code> is an array and <code>(*(foo()))[0]</code> is array indexing, so I actually don&#39;t think that part is a MISRA violation. It&#39;s a sanity violation, rather."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465391492, "post_id": 37701486, "comment_id": 62880937, "body": "It&#39;s the <code>int arr[3];</code> at global scope that I have issue with."}, {"owner": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465395212, "post_id": 37701486, "comment_id": 62883928, "body": "Not being MISRA compliant isn&#39;t a flaw. If anything, it&#39;s a feature."}], "tags": [], "owner": {"reputation": 180, "user_id": 6363206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f58d51529f7e0f99f433a7c0d218fac?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Clarkstone", "link": "https://stackoverflow.com/users/6363206/simon-clarkstone"}, "is_accepted": true, "score": 4, "last_activity_date": 1465410115, "last_edit_date": 1491982285, "creation_date": 1465385935, "answer_id": 37701486, "question_id": 37701124, "link": "https://stackoverflow.com/questions/37701124/how-to-declare-function-return-type-int-3/37701486#37701486", "title": "How to declare function return type `int (*)[3]`?", "body": "<p>First, I agree with the other answers that you probably need a <code>typedef</code> or a <code>struct</code> in there to clarify.</p>\n\n<p>If you want to know how to <strong>declare</strong> the return type, it's\n<code>int (*foo(void))[3] {</code></p>\n\n<p>In the <a href=\"https://softwareengineering.stackexchange.com/questions/117024/why-was-the-c-syntax-for-arrays-pointers-and-functions-designed-this-way\">\"declaration reflects use\"</a> pattern, you can build this up by considering the usage, i.e. how to get from <code>foo</code>'s type to the plain type <code>int</code>:</p>\n\n<ul>\n<li>take <code>foo</code></li>\n<li>call it (with no arguments): <code>foo()</code></li>\n<li>dereference the return value: <code>*foo()</code></li>\n<li>add an array index: <code>(*foo())[i]</code>; the parentheses are needed because the postfix syntax would otherwise take precedence over prefix one.</li>\n<li>the result is of plain type <code>int</code></li>\n</ul>\n\n<p>Declaration reflects it:</p>\n\n<ul>\n<li>take <code>foo</code></li>\n<li>call it: <code>foo(void)</code>, inserting <code>void</code> to say it's specifically a 0-param function rather than one with an unspecified set of parameters</li>\n<li>dereference the function return value: <code>*foo(void)</code></li>\n<li>add an array index: <code>(*foo(void))[3]</code>, making the \"index\" be the size of the array</li>\n<li>we got down to the plain type, so declare that the thing you built has that type: <code>int (*foo(void))[3]</code></li>\n</ul>\n\n<p>Example code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint arr[3];\nint (*foo(void))[3] {\n  return &amp;arr;\n}\nint main (void) {\n  arr[0] = 413;\n  arr[1] = 612;\n  arr[2] = 1025;\n  printf(\"%d %d %d\\n\", (*(foo()))[0], (*(foo()))[1], (*(foo()))[2]);\n  return 0;\n}\n</code></pre>\n\n<p>Side note: be sure that the array you are returning a pointer to will continue to exist after the function returns.</p>\n"}, {"comments": [{"owner": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465395166, "post_id": 37703960, "comment_id": 62883886, "body": "It&#39;s only unreadable if you refuse to learn C. If you actually have any real familiarity with C, these types are very easy to understand."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465396768, "post_id": 37703960, "comment_id": 62885201, "body": "@MilesRout Yes they are trivial, code like <code>int(*x(int(*)(int)))[3];</code> is very easy to read and C is sane and simple... right? <b>No</b>. If you have true experience of C, you&#39;ll call such code for what it really is: pure unreadable crap."}, {"owner": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465396893, "post_id": 37703960, "comment_id": 62885301, "body": "Incorrect, it&#39;s trivial to understand if you apply even a modicum of effort."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465396948, "post_id": 37703960, "comment_id": 62885343, "body": "@MilesRout If it takes you longer than 5 minutes to understand a line of code, the code is truly awful. Now tell me what the code I just posted means, clock is ticking."}, {"owner": {"reputation": 1105, "user_id": 575229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d6d6d34880c5ad7ca699b4311517edf?s=128&d=identicon&r=PG", "display_name": "Miles Rout", "link": "https://stackoverflow.com/users/575229/miles-rout"}, "edited": false, "score": 0, "creation_date": 1465397209, "post_id": 37703960, "comment_id": 62885542, "body": "It&#39;s a function taking a pointer to another function and returning a pointer to an array of three integers. The argument function takes an int and returns an int. Didn&#39;t take me 4 mins to answer, it took me 4 mins to see you&#39;d replied to me."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1465392649, "creation_date": 1465392649, "answer_id": 37703960, "question_id": 37701124, "link": "https://stackoverflow.com/questions/37701124/how-to-declare-function-return-type-int-3/37703960#37703960", "title": "How to declare function return type `int (*)[3]`?", "body": "<p>As a rule of thumb, avoid functions passing/returning raw array pointers or function pointers, because such code is a nightmare both to program and read. In this case it would have been </p>\n\n<pre><code>int (*func()) [3]\n</code></pre>\n\n<p>which is completely unreadable. Just forget about writing such code. Instead, use a typedef to define an array type:</p>\n\n<pre><code>typedef int iarr3_t [3];\n</code></pre>\n\n<p>And then write a function returning a pointer to such an array:</p>\n\n<pre><code>iarr3_t* func (void);\n</code></pre>\n\n<hr>\n\n<p>However, as indicated by other comments and answers, returning an array pointer is usually quite questionable practice to begin with. The need to do so could be an indication of poor program design.</p>\n"}], "owner": {"reputation": 61, "user_id": 6440023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e67a37ff2b8e04d86fbb59031a97f58?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas.J Han", "link": "https://stackoverflow.com/users/6440023/lukas-j-han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 37701486, "answer_count": 4, "score": 2, "last_activity_date": 1465410115, "creation_date": 1465385040, "last_edit_date": 1465387670, "question_id": 37701124, "link": "https://stackoverflow.com/questions/37701124/how-to-declare-function-return-type-int-3", "title": "How to declare function return type `int (*)[3]`?", "body": "<p><code>int (*)[3] foo ();</code> doesn't work.</p>\n\n<p>How to declare function return pointer to array of 3?</p>\n\n<p>It might not be useful, but I want to know if it's possible.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465384894, "post_id": 37700983, "comment_id": 62876123, "body": "C11 draft standard n1570: <i>6.5.2.2 Function calls 4 An argument may be an expression of any complete object type. In preparing for the call to a function, the arguments are evaluated, and each parameter is assigned the value of the corresponding argument. 93) A function may change the values of its parameters, but these changes cannot affect the values of the arguments.</i> tl;dr: C is pass-by-value."}, {"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 1, "creation_date": 1465388266, "post_id": 37700983, "comment_id": 62878505, "body": "Off-topic: you don&#39;t need to cast the return of malloc"}], "answers": [{"comments": [{"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1465388547, "post_id": 37701588, "comment_id": 62878721, "body": "It&#39;s not actually in <code>main</code>, but the confusion is understandable given how the code was formatted. I&#39;ve fixed the formatting"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1465386259, "creation_date": 1465386259, "answer_id": 37701588, "question_id": 37700983, "link": "https://stackoverflow.com/questions/37700983/my-function-doesnt-memorize-the-head-of-linked-list/37701588#37701588", "title": "My function doesn&#39;t memorize the head of linked list", "body": "<p>The function has a prototype of </p>\n\n<pre><code>Mynbr* Addnumber(Mynbr* first)\n</code></pre>\n\n<p>It is called by <code>Addnumber(first)</code> in main. In main, the value pointed by the <code>first</code> pointer will be updated due to changes in the function. However, the first pointer itself will not be updated. i.e. the pointer will remain NULL. if it was NULL before.</p>\n\n<p>To fix this you need to call the function in main like this</p>\n\n<pre><code>first = Addnumber(first);\n</code></pre>\n\n<p>Also, your <code>AddNumber</code> function needs to be fixed. You are not adding a number when for the second or larger element of the list.</p>\n\n<pre><code>Mynbr* Addnumber(Mynbr* first){\n  printf(\"\\n===Function to add a number===\\n\");\n  Mynbr* head_nbr;\n  head_nbr = malloc(sizeof(Mynbr));\n  printf(\"Enter a number :\"); scanf(\"%d\", &amp;(head_nbr-&gt;nbr));\n  if (!first)\n  {\n    head_nbr-&gt;next = NULL;\n  }\n  else\n  {\n    head_nbr-&gt;next = first;\n  }\n  return head_nbr;\n}\n</code></pre>\n\n<p>This function adds at the start of the list as suggested by the variable <code>head_nbr</code>. To add at the end, you will have to make appropriate modifications.</p>\n"}, {"comments": [{"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 1, "creation_date": 1465388751, "post_id": 37702356, "comment_id": 62878882, "body": "Please note that your changes to Addnumber result in the list being LIFO whereas FIFO might be expected.  Also, why bother with the <code>curr</code> variable at all in the recursive version of <code>Displaynbr</code>, you could directly use <code>first</code>"}, {"owner": {"reputation": 31, "user_id": 6365749, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/29abbeb6e3f0597089b0a879b046be69?s=128&d=identicon&r=PG&f=1", "display_name": "rony.stackoverflow", "link": "https://stackoverflow.com/users/6365749/rony-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1465391150, "post_id": 37702356, "comment_id": 62880688, "body": "Thanks you very much for your help, but I want don&#39;t understand this part of code.Why next have been linked to first ?                    head_nbr-&gt;next = first;   // just link to initial head, be it null or not.    Moreover why you don&#39;t check if first in Addnumber() is NULL or not"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 31, "user_id": 6365749, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/29abbeb6e3f0597089b0a879b046be69?s=128&d=identicon&r=PG&f=1", "display_name": "rony.stackoverflow", "link": "https://stackoverflow.com/users/6365749/rony-stackoverflow"}, "edited": false, "score": 0, "creation_date": 1465396946, "post_id": 37702356, "comment_id": 62885340, "body": "@rony.stackoverflow: just imagine what happens in both cases, or carefully look at it under a debugger..."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1465398584, "last_edit_date": 1465398584, "creation_date": 1465388496, "answer_id": 37702356, "question_id": 37700983, "link": "https://stackoverflow.com/questions/37700983/my-function-doesnt-memorize-the-head-of-linked-list/37702356#37702356", "title": "My function doesn&#39;t memorize the head of linked list", "body": "<p>You were not very far from it, but forgot one essential rule:\n<strong>when you change the value of a parameter in a function, the caller's value remains unchanged</strong>.</p>\n\n<p>So <code>AddNumber</code> (almost) correctly returns the new value of the list head address, but <code>choiceMenu</code> immediately discards it.</p>\n\n<p>So here are some fixes:</p>\n\n<p><code>AddNumber</code> should be able to add a number to an empty or non empty list (NB: it currently leads to a LIFO):</p>\n\n<pre><code>Mynbr* Addnumber(Mynbr* first){\n    printf(\"\\n===Function to add a number===\\n\");\n    Mynbr* head_nbr = first;\n    head_nbr = (Mynbr*)malloc(sizeof(Mynbr));\n    printf(\"Enter a number :\"); scanf(\"%d\", &amp;(head_nbr-&gt;nbr));\n    head_nbr-&gt;next = first;   // just link to initial head, be it null or not\n\n    return head_nbr;\n}\n</code></pre>\n\n<p><code>choiceMenu</code> should not discard the new head - you can either return it to the caller like you do for <code>AddNumber</code> or use a double indirection:</p>\n\n<pre><code>void choiceMenu(int choice, Mynbr** first){\n    switch (choice){\ncase 1:\n    *first = Addnumber(*first);\n    break;\n\ncase 2:\n    break;\ncase 3:\n    break;\ncase 4:\n    Displaynbr(*first);\n    break;\ncase 5:\n    break;\n    }\n}\n</code></pre>\n\n<p>(do not forget to change the initial declaration and call it: <code>choiceMenu(choice, &amp;head)</code>)</p>\n\n<p>Last but not least, <code>DisplayNumber</code> incorrectly tests for <code>curr-&gt;next</code> instead of <code>curr</code>:</p>\n\n<pre><code>void Displaynbr(Mynbr* first){\n    printf(\"\\n===Function to display number===\\n\");\n    Mynbr* curr = first;\n    if (curr) {\n        printf(\"The number is : %d\", curr-&gt;nbr);\n        Displaynbr(first-&gt;next);\n    }\n}\n</code></pre>\n\n<p>but this still displays <em>===Function to display number===</em> for each and every value in list. It is better here to use simple iteration instead of recursion:</p>\n\n<pre><code>void Displaynbr(Mynbr* first){\n    printf(\"\\n===Function to display number===\\n\");\n    Mynbr* curr = first;\n    while (curr) {\n        printf(\"The number is : %d\\n\", curr-&gt;nbr);\n        curr = curr-&gt;next;\n    }\n}\n</code></pre>\n\n<p>or using a <code>for</code> loop:</p>\n\n<pre><code>void Displaynbr(Mynbr* first){\n    printf(\"\\n===Function to display number===\\n\");\n    Mynbr* curr;\n    for (curr=first; curr != NULL; curr=curr-&gt;next) {\n        printf(\"The number is : %d\\n\", curr-&gt;nbr);\n    }\n}\n</code></pre>\n\n<p>Recursive version could even be more concise by removing a useless local variable (thanks to @sokkyoku for the hint):</p>\n\n<pre><code>void Displaynbr(Mynbr* first){\n    printf(\"\\n===Function to display number===\\n\");\n    if (first) {\n        printf(\"The number is : %d\", first-&gt;nbr);\n        Displaynbr(first-&gt;next);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>If you want to change <code>AddNumber</code> to have a FIFO list, you need to add the new element at the end of the list. The code becomes:</p>\n\n<pre><code>Mynbr* Addnumber(Mynbr* first){\n    printf(\"\\n===Function to add a number===\\n\");\n    Mynbr* head_nbr = malloc(sizeof(Mynbr));\n    printf(\"Enter a number :\"); scanf(\"%d\", &amp;(head_nbr-&gt;nbr));\n    head_nbr-&gt;next = NULL;\n    if (first == NULL) first = head_nbr;\n    else {\n        Mynbr* last = first;\n        while (last-&gt;next != NULL) last = last-&gt;next;\n        last-&gt;next = head_nbr;\n    }\n    return first;\n}\n</code></pre>\n\n<p>But it would be more efficient in that case to keep a pointer to last element of the list instead of browsing the list to find it.</p>\n"}], "owner": {"reputation": 31, "user_id": 6365749, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/29abbeb6e3f0597089b0a879b046be69?s=128&d=identicon&r=PG&f=1", "display_name": "rony.stackoverflow", "link": "https://stackoverflow.com/users/6365749/rony-stackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465398584, "creation_date": 1465384645, "last_edit_date": 1465387973, "question_id": 37700983, "link": "https://stackoverflow.com/questions/37700983/my-function-doesnt-memorize-the-head-of-linked-list", "title": "My function doesn&#39;t memorize the head of linked list", "body": "<p>I have to do a program of a linked list with many function like delete, add and modify number.</p>\n\n<p>In my code when I put a number in my function with the choice 1, after that when I want to display all the numbers I put the head in parameter but I see in visual studio that the parameter of the function don't have anything. What can I do in order to pass the head of the linked list in parameter in my function <code>Displaynbr</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Mynbr\n{\n    int nbr;\n    struct Mynbr* next;\n} typedef Mynbr;\n\nvoid Menu();\nvoid choiceMenu(int choice, Mynbr* first);\nMynbr* Addnumber(Mynbr* first);\nvoid Displaynbr(Mynbr* first);\n\nint main(void)\n{\n    Mynbr* head = NULL;\n    int choice = 0;\n\n    while (choice!=5)\n    {\n        Menu();\n        printf(\"Your choice : \"); scanf(\"%d\", &amp;choice);\n        choiceMenu(choice, head);\n    }\n    system(\"PAUSE\");\n    return 0;\n}\n\nvoid Menu()\n{\n    printf(\"\\n1.Add number to the list\\n\");\n    printf(\"2.Delete number from the list\\n\");\n    printf(\"3.Search number in the list\\n\");\n    printf(\"4.Display all the numbers from the list\\n\");\n    printf(\"5.Exit\\n\");\n}\n\nvoid choiceMenu(int choice, Mynbr* first)\n{\n    switch (choice)\n    {\n    case 1:\n        Addnumber(first);\n        break;\n    case 2:\n        break;\n    case 3:\n        break;\n    case 4:\n        Displaynbr(first);\n        break;\n    case 5:\n        break;\n    }\n}\n\nMynbr* Addnumber(Mynbr* first)\n{\n    printf(\"\\n===Function to add a number===\\n\");\n    Mynbr* head_nbr = first;\n    if (!head_nbr)\n    {\n        head_nbr = (Mynbr*)malloc(sizeof(Mynbr));\n        printf(\"Enter a number :\"); scanf(\"%d\", &amp;(head_nbr-&gt;nbr));\n        head_nbr-&gt;next = NULL;\n    }\n    return head_nbr;\n}\n\nvoid Displaynbr(Mynbr* first)\n{\n    printf(\"\\n===Function to display number===\\n\");\n    Mynbr* curr = first;\n    if (curr-&gt;next)\n    {\n        printf(\"The number is : %d\", curr-&gt;nbr);\n        Displaynbr(first-&gt;next);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "ubuntu", "assembly", "nasm"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465384560, "post_id": 37700783, "comment_id": 62875928, "body": "Your code doesn&#39;t make any sense in the first place. Your function doesn&#39;t <code>return</code> anything even though it is declared as <code>float* calc(int n, int d, float*data)</code>."}, {"owner": {"reputation": 39, "user_id": 4182371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lzzY37RxJY8/AAAAAAAAAAI/AAAAAAAAAS4/biGetyUtzdY/photo.jpg?sz=128", "display_name": "zepolar", "link": "https://stackoverflow.com/users/4182371/zepolar"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465385057, "post_id": 37700783, "comment_id": 62876242, "body": "I&#39;m sorry, I have an error... I must return the result array... Thanks for your comment.."}, {"owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 0, "creation_date": 1465386227, "post_id": 37700783, "comment_id": 62877052, "body": "What&#39;s the prototype of the <code>calculate_value</code> C function? If it&#39;s really returning a <code>float</code> value, the return value will be on the math coprocessor stack and not <code>EAX</code>."}, {"owner": {"reputation": 39, "user_id": 4182371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lzzY37RxJY8/AAAAAAAAAAI/AAAAAAAAAS4/biGetyUtzdY/photo.jpg?sz=128", "display_name": "zepolar", "link": "https://stackoverflow.com/users/4182371/zepolar"}, "reply_to_user": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 0, "creation_date": 1465469116, "post_id": 37700783, "comment_id": 62918815, "body": "Thanks @pcarter, the calculate value is a float function. In this case, which register must i put to get the result???"}, {"owner": {"reputation": 1362, "user_id": 1366027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8113fc570a09e03414126d8cda5f971c?s=128&d=identicon&r=PG", "display_name": "pcarter", "link": "https://stackoverflow.com/users/1366027/pcarter"}, "edited": false, "score": 0, "creation_date": 1465517311, "post_id": 37700783, "comment_id": 62946921, "body": "The return value will be in the <code>ST0</code> register (the top of the math coprocessor stack). It doesn&#39;t sound like you are familiar with the coprocessor. You will need to learn how to work with it. It&#39;s way too involved to explain here. Google is your friend. If you look for the PC Assembly Language on-line book, chapter 5 covers the coprocessor."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1465875723, "post_id": 37700783, "comment_id": 63070349, "body": "The <a href=\"http://stackoverflow.com/tags/x86/info\">x86 tag wiki</a> has some links to ABI / calling convention docs, and to an x87 guide.  x87 is pretty much obsolete, though; in 64bit code the calling convention returns float / double in <code>xmm0</code>.  32bit code does return FP values in <code>ST0</code>, though."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1465875625, "post_id": 37789733, "comment_id": 63070329, "body": "You don&#39;t need to save/restore <code>ebx</code> around a call; it&#39;s already call-preserved in all normal ABIs.  Better to use call-preserved regs for both parameters in the loop, so you don&#39;t have to <code>push&#47;pop</code> inside the loop, just at the start/end of your function.  (e.g. <code>ebx</code> and <code>esi</code> are call-preserved in all 32bit ABIs I know of)"}], "tags": [], "owner": {"reputation": 3544, "user_id": 6445597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aRvT8.png?s=128&g=1", "display_name": "John Burger", "link": "https://stackoverflow.com/users/6445597/john-burger"}, "is_accepted": false, "score": 0, "last_activity_date": 1465820443, "creation_date": 1465820443, "answer_id": 37789733, "question_id": 37700783, "link": "https://stackoverflow.com/questions/37700783/how-can-i-access-one-elemento-of-array-in-assembler/37789733#37789733", "title": "How can i access one elemento of array in assembler", "body": "<p>Your problem is that you're calling a C function after carefully setting up your registers: the C function will <strong>definitely</strong> overwrite them. You need to save your important registers before calling the function:</p>\n\n<pre><code>push ebx ; Save for later\npush edx ; Save for later\n\npush    dword [ebp+d]       ; d \npush    dword [ebp+n]       ; n\npush    dword [edx]        ; current_row\npush    dword [ebp+data]    ; data to evaluate\ncall    calculate_value\nadd     esp, 16             ; restore stack after to call function.\n\npop edx ; It's later! (Note reversed restore...)\npop ebx ; It's later!\n</code></pre>\n\n<p>But this whole</p>\n\n<ul>\n<li>Set up your registers;</li>\n<li>Save them</li>\n<li>Call C</li>\n<li>Restore registers</li>\n<li>Go back for more</li>\n</ul>\n\n<p>completely removes the need for using assembly in the first place: you might as well have written the whole thing in C.</p>\n"}], "owner": {"reputation": 39, "user_id": 4182371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lzzY37RxJY8/AAAAAAAAAAI/AAAAAAAAAS4/biGetyUtzdY/photo.jpg?sz=128", "display_name": "zepolar", "link": "https://stackoverflow.com/users/4182371/zepolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465820443, "creation_date": 1465384042, "last_edit_date": 1465385168, "question_id": 37700783, "link": "https://stackoverflow.com/questions/37700783/how-can-i-access-one-elemento-of-array-in-assembler", "title": "How can i access one elemento of array in assembler", "body": "<p>I need of you help... Actually, I'm working in my scholar project and I'm trying to finish it. But I don't know how to access one element of one array in assembler.</p>\n\n<p>My idea is call the function assembler from C and the same time to pass the parameter. For example</p>\n\n<pre><code>float* calc(int n, int d, float*data){\n    float* result = _mm_malloc(sizeof (float)*n*d, 16);\n    calc_x86_asm(n, d, data, result)\n    //Line edited, I forget to put the return\n    return result; \n}\n</code></pre>\n\n<p>The function calc_x86_asm is declared in the initial of the file.</p>\n\n<pre><code>extern calc_x86_asm(int n, int d, float* data, float* result);\n</code></pre>\n\n<p>My function has the follow content:</p>\n\n<pre><code>;External asm function\nextern calculate_value\nsection .text                   ;program\n    n      equ         8\n    d      equ         12\n    data   equ         16\n    rta    equ         20 \n\nglobal calc_x86_asm    ;for linux\n\ncalc_x86_asm:\n        ;Initialize a stack frame\n        push    ebp\n        mov     ebp, esp\n        pushad\n.body:\n        ;Load information\n        mov     ebx, [ebp+rta]\n        ;Initialization counters\n        xor     edx, edx\n.loop:\n        cmp     edx, [ebp+n]            ; if(ecx &lt; n){\n        jz      .done                   ; goto .done\n                                    ; else\n        push    dword [ebp+d]       ; d \n        push    dword [ebp+n]       ; n\n        push    dword [edx]        ; current_row\n        push    dword [ebp+data]    ; data to evaluate\n        call    calculate_value\n        add     esp, 16             ; restore stack after to call function.\n        mov     [ebx+edx*4], eax    ;&lt;&lt;&lt; Here the problem\n        add     edx, 1\n        jmp     .loop\n.done:\n        .done:\n        ;Pop registries\n        popad\n        ;Restore the call's stack frame pointer\n        pop     ebp                 ; restore ebp\n        ret \n</code></pre>\n\n<p>Really, I don't know if I am doing the correct form the assignation of value in memory of the array. Because When I run my project, the apps throw me on error. By the way, the calculate_value is a C function.</p>\n\n<p>In C will be in this form:</p>\n\n<pre><code>for(int i=0; i&lt;n; i++){\n    result[i] = calc(n, d, i, data);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1465383060, "post_id": 37700201, "comment_id": 62875043, "body": "I guess the <code>while</code> loop will end because it will rrad the name and fail to interpret it as number. Please post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1465383122, "post_id": 37700201, "comment_id": 62875085, "body": "You read the same string over and over.... what did you expect"}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 1, "creation_date": 1465383243, "post_id": 37700201, "comment_id": 62875151, "body": "You are always scanning the same string, you would need to advance the string handed to <code>sscanf</code>; just use <code>strtok</code> as shown in the answer from terence hill."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465402236, "post_id": 37700201, "comment_id": 62889336, "body": "&quot;i need to analyze a string&quot;  --&gt; This often leads to the question: Should code detect unexpected strings like `&quot;dan 1 2 3 x`` or &quot;joe bob 1 2 3&quot;?  Or do you simply want an answers that assume the data in the strings well formed?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 1011, "user_id": 3389121, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2kFGy.jpg?s=128&g=1", "display_name": "Rahul Sinha", "link": "https://stackoverflow.com/users/3389121/rahul-sinha"}, "edited": false, "score": 0, "creation_date": 1465407063, "post_id": 37700201, "comment_id": 62892338, "body": "@RahulSinha: if you are going to edit 10 or more posts per hour, better make sure your edits are significant, rather than trivial."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465398745, "post_id": 37700394, "comment_id": 62886719, "body": "Minor bits: 1) Why <code>&#39;\\n&#39;</code> in <code>strtok(p, &quot; \\t\\n&quot;)</code>?  <code>line[strcspn(line, &quot;\\r\\n&quot;)] = 0;</code> insures there is no longer a <code>&#39;\\n&#39;</code>.  2) &quot;separated by a white space or \\t \\n character&quot; is really &quot;separated by a space or \\t \\n character&quot;."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465399407, "post_id": 37700394, "comment_id": 62887243, "body": "@chux thanks, I added the <code>line[strcspn(line, &quot;\\r\\n&quot;)] = 0</code> later and didn&#39;t modify the strtok"}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 2, "last_activity_date": 1465399437, "last_edit_date": 1495540352, "creation_date": 1465382959, "answer_id": 37700394, "question_id": 37700201, "link": "https://stackoverflow.com/questions/37700201/analyzing-strings-with-sscanf/37700394#37700394", "title": "Analyzing Strings with sscanf", "body": "<p>A working solution is given in the answer from sokkyoku.</p>\n\n<p><strong>Another possibility</strong> to read variable length lines is to use strtok like in the following code snippet:</p>\n\n<pre><code>int getlines (FILE *fin)\n{\n    int  nlines = 0;\n    int  count  = 0;\n    char line[BUFFSIZE]={0};\n    char *p;\n\n    if(NULL == fgets(buff, BUFFSIZE, fin))\n        return -1;\n\n    while(fgets(line, BUFFSIZE, fin) != NULL) {\n        //Remove the '\\n' or '\\r' character\n        line[strcspn(line, \"\\r\\n\")] = 0;\n        count = 0;\n        printf(\"line[%d] = %s\\n\", nlines, line);\n        for(p = line; (p = strtok(p, \" \\t\")) != NULL; p = NULL) {\n            printf(\"%s \", p);\n            ++count;\n        }\n        printf(\"\\n\\n\");\n        ++nlines;\n    }\n\n    return nlines;\n}\n</code></pre>\n\n<p><strong>Explanation</strong> of the above function <code>getlines</code>:</p>\n\n<p>Each line in the file <code>fin</code> is read using <code>fgets</code> and stored in the variable <code>line</code>. \nThen each substring in <code>line</code> (separated by a white space or <code>\\t</code> character) is extracted and the pointer to that substring stored in <code>p</code>, by means of the function <code>strtok</code> in the for loop (see for example this <a href=\"https://stackoverflow.com/questions/18927793/how-to-use-strtok\">post</a> for further example on strtok).</p>\n\n<p>The function then just print <code>p</code> but you can do everything with the substring here. \nI also count (<code>++count</code>) the number of items found in each line. At the end, the function <code>getline</code> count and returns the number of lines read.</p>\n"}, {"tags": [], "owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "is_accepted": true, "score": 2, "last_activity_date": 1465384027, "last_edit_date": 1465384027, "creation_date": 1465383134, "answer_id": 37700463, "question_id": 37700201, "link": "https://stackoverflow.com/questions/37700201/analyzing-strings-with-sscanf/37700463#37700463", "title": "Analyzing Strings with sscanf", "body": "<p>The reason this never ends is because you are constantly providing the same string to scan.</p>\n\n<p><code>sscanf</code> provides the <code>%n</code> switch which stores the amount of characters read before it is reached inside a, which allows you to move forward in your input string by that amount of characters before rescanning.</p>\n\n<p>This'll work:</p>\n\n<pre><code>int step[20];\nint index=0;\nint readLen;\nwhile(sscanf(mystring,\"%d%n\", &amp;step[index++], &amp;readLen)&gt;0) {\n  mystring += readLen;\n}\n</code></pre>\n"}], "owner": {"reputation": 1533, "user_id": 6135511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lbs4X.jpg?s=128&g=1", "display_name": "Danilo Calzetta", "link": "https://stackoverflow.com/users/6135511/danilo-calzetta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 37700463, "answer_count": 2, "score": 0, "last_activity_date": 1465403861, "creation_date": 1465382453, "last_edit_date": 1465403861, "question_id": 37700201, "link": "https://stackoverflow.com/questions/37700201/analyzing-strings-with-sscanf", "title": "Analyzing Strings with sscanf", "body": "<p>I need to analyze a string previous reader with fgets,</p>\n\n<p>then I have a row from:</p>\n\n<pre><code>name age steps\\n\nmario 10 1 2 3 4\\n\njoe   15 3 5\\n\nmax   20 9 3 2 4 5\\n\n</code></pre>\n\n<p>there are a variable number of steps for each column,\nthen I can read name and age with</p>\n\n<pre><code> sscanf(mystring, \"%s %d\", name, &amp;age);\n</code></pre>\n\n<p>after this I have a for cycle for read all steps</p>\n\n<pre><code>   int step[20];\n   int index=0;\n   while(sscanf(mystring,\"%d\", &amp;step[index++])&gt;0);\n</code></pre>\n\n<p>but this cycle never ends populating all array data with the age column.</p>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 4, "creation_date": 1465381929, "post_id": 37699774, "comment_id": 62874371, "body": "Why don&#39;t you use a simple socket IPC instead of manage manually all those things?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1465381937, "post_id": 37699774, "comment_id": 62874375, "body": "Very good question! At least <code>pshared</code> should be qualified as <code>volatile</code> to tell compiler that it may be modified in other ways. I&#39;m not sure any compiler would optimize <code>private</code> variable the way you suspect..."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1465382934, "post_id": 37699774, "comment_id": 62874965, "body": "I don&#39;t think compiler can do that. Assuming that type of <code>pshared</code> is <code>int*</code>, compiler should solve the question <i>&quot;Can <code>private</code> be modified through <code>*pshared</code>?&quot;</i>. If not, then <code>private</code> could be stored in register. If yes, it still doesn&#39;t mean that compiler can assume that <code>private</code> <b>is</b> <code>*pshared</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1465383539, "post_id": 37699774, "comment_id": 62875319, "body": "I added the &quot;language-lawyer&quot; tag, as it seems appropriate.  But if you distrust the data you copy that much, you also have to worry about compiler bugs and should probably be inspecting the actual instructions the compiler produces."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1465383805, "post_id": 37699774, "comment_id": 62875475, "body": "Can&#39;t you solve your problem using semaphores? It looks typically like something that can be solved using semaphores."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1465383925, "post_id": 37699774, "comment_id": 62875537, "body": "@AndrewHenle Inter-process synchronization is not covered by Standard C, so the language-lawyer tag is not really appropriate"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1465384162, "post_id": 37699774, "comment_id": 62875671, "body": "@user694733: <code>private</code> and <code>*pshared</code> aren&#39;t &quot;real&quot; things, they&#39;re C abstractions. The fear here is that the compiler might compile &quot;read from <code>private</code>&quot; into a load from the shared memory region."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465384164, "post_id": 37699774, "comment_id": 62875673, "body": "@M.M But his example is a single process loading an <code>int</code> value via a pointer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1465384221, "post_id": 37699774, "comment_id": 62875714, "body": "@AndrewHenle it includes the condition that the <code>*shared</code> location may be altered by another process."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1465384512, "post_id": 37699774, "comment_id": 62875902, "body": "@M.M But that&#39;s the same as <code>volatile</code>.  And it seems to me the question then becomes, &quot;In the absence of memory fences, is it allowable for the compiler to generate code that reloads a value after its value has been evaluated?&quot;  I&#39;m trying to give the benefit of the doubt here, as the wording of the question isn&#39;t really precise and the exact code isn&#39;t provided."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1465384785, "post_id": 37699774, "comment_id": 62876047, "body": "@AndrewHenle It&#39;s not the same as <code>volatile</code>, and I am assuming OP does have a memory fence in the first <code>...</code> part"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1465384168, "creation_date": 1465384168, "answer_id": 37700838, "question_id": 37699774, "link": "https://stackoverflow.com/questions/37699774/in-c-how-do-i-make-sure-that-a-memory-load-is-performed-only-once/37700838#37700838", "title": "In C, how do I make sure that a memory load is performed only once?", "body": "<p>It's hard to answer your question as posted. Note that you <em>must</em> use a synchronization object to prevent concurrent accesses, unless you are only reading units which are atomic on the platform. </p>\n\n<p>I am assuming that you intend to ask about (pseudocode):</p>\n\n<pre><code>lock_shared_area();\nint private = *pshared;\nunlock_shared_area();\n\nif (is_valid(private))\n</code></pre>\n\n<p>and that the other process also uses the same lock. (If not, it would be good to update your question to be a bit more specific about your synchronization).</p>\n\n<p>This code guarantees to read <code>*pshared</code> at most once.  Using the name <code>private</code> means to read the variable <code>private</code>, not the object <code>*pshared</code>. The compiler \"knows\" that the call to unlock the area acts as a memory fence and it won't reorder operations past the fence.</p>\n"}, {"comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465384741, "post_id": 37700967, "comment_id": 62876025, "body": "Note that C11 draft standard n1570 <i>does</i> have this to say about inter-process communication via atomics: <i>7.17.5 Lock-free property 2 NOTE Operations that are lock-free should also be address-free. That is, atomic operations on the same memory location via two different addresses will communicate atomically. The implementation should not depend on any per-process state. This restriction enables communication via memory mapped into a process more than once and memory shared between two processes.</i> It&#39;s not a requirement, but it is a <i>should</i>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "is_accepted": false, "score": 0, "last_activity_date": 1465384591, "creation_date": 1465384591, "answer_id": 37700967, "question_id": 37699774, "link": "https://stackoverflow.com/questions/37699774/in-c-how-do-i-make-sure-that-a-memory-load-is-performed-only-once/37700967#37700967", "title": "In C, how do I make sure that a memory load is performed only once?", "body": "<p>Since the C doesn't have any concept of interprocess communication there is nothing you can do to inform the compiler that there is another process that might be modifying the memory.</p>\n\n<p>Thus, I believe there is no way to prevent a sufficiently clever, malicious, but conforming build system from invoking the \"as if\" rule to allow it to do the Wrong Thing.</p>\n\n<p>To get something that is 'guaranteed' to work, you need to work whatever guarantees are given by your specific compiler and/or shared memory library you're using.</p>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 6439590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7b6ecd1a8922df5a329f5f704e346?s=128&d=identicon&r=PG&f=1", "display_name": "odelande", "link": "https://stackoverflow.com/users/6439590/odelande"}, "edited": false, "score": 0, "creation_date": 1465392748, "post_id": 37702755, "comment_id": 62881926, "body": "Thanks, this actually is my current robust solution; I am just wondering if it is necessary."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 311, "user_id": 6439590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7b6ecd1a8922df5a329f5f704e346?s=128&d=identicon&r=PG&f=1", "display_name": "odelande", "link": "https://stackoverflow.com/users/6439590/odelande"}, "edited": false, "score": 0, "creation_date": 1465396880, "post_id": 37702755, "comment_id": 62885295, "body": "@odelande: I think it is not necessary, see my edit."}, {"owner": {"reputation": 311, "user_id": 6439590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7b6ecd1a8922df5a329f5f704e346?s=128&d=identicon&r=PG&f=1", "display_name": "odelande", "link": "https://stackoverflow.com/users/6439590/odelande"}, "edited": false, "score": 0, "creation_date": 1465556225, "post_id": 37702755, "comment_id": 62962621, "body": "I don&#39;t quite follow you. AFAIK, with C11 explicitly knowing about threads (at least on a hosted implementation), the compiler is <i>not</i> free to believe that reloading memory will yield the value last written by the current thread. However, it is one of the possible behaviors, which the compiler is free to favor by removing duplicate reads <i>as long as there is no intermediate synchronization</i>; you do not need volatile if you perform some form of synchronization. In order to <i>prevent</i> a reload, which is what I need, my guess is that you do not need volatile either."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 3, "last_activity_date": 1465449572, "last_edit_date": 1465449572, "creation_date": 1465389528, "answer_id": 37702755, "question_id": 37699774, "link": "https://stackoverflow.com/questions/37699774/in-c-how-do-i-make-sure-that-a-memory-load-is-performed-only-once/37702755#37702755", "title": "In C, how do I make sure that a memory load is performed only once?", "body": "<p>You should inform the compiler the the shared memory can change at any moment by the <code>volatile</code> modifier.</p>\n\n<pre><code>volatile int *pshared;\n...\nint private = *pshared; // pshared points to the message in shared memory\n...\nif (is_valid(private)) {\n  ...\n  handle(private);\n}\n</code></pre>\n\n<p>As <code>*pshared</code> is declared to be volatile, the compiler can no longer assume that <code>*pshared</code> and <code>private</code> keep same value.</p>\n\n<hr>\n\n<p>Per your edit, it is now clear, that we all know that a volatile modifier on the shared memory is sufficient to guarantee that the compiler will honour the temporality of all accesses to that shared memory. </p>\n\n<p>Anyway, draft N1256 for C99 is explicit about it in 5.1.2.3 Program execution (emphasize mine)</p>\n\n<blockquote>\n  <p>2 <strong>Accessing a volatile object</strong>, modifying an object, modifying a file, or calling a function\n  that does any of those operations <strong>are all side effects</strong>, which are changes in the state of\n  the execution environment. Evaluation of an expression may produce side effects. At\n  certain specified points in the execution sequence called <strong>sequence points, all side effects\n  of previous evaluations shall be complete and no side effects of subsequent evaluations\n  shall have taken place</strong>.</p>\n  \n  <p>5 The least requirements on a conforming implementation are:<br/>\n  \u2014 At sequence points, volatile objects are stable in the sense that previous accesses are\n  complete and subsequent accesses have not yet occurred<br/>\n  \u2014 At program termination, all data written into files shall be identical to the result that\n  execution of the program according to the abstract semantics would have produced.</p>\n</blockquote>\n\n<p>That let think that even if <code>pshared</code> is not qualified as volatile, <code>private</code> value must have been loaded from <code>*pshared</code> before the evaluation of <code>is_valid</code>, and as the abstract machine has no reason to change it before the evaluation of <code>handle</code>, a conformant implementation should not change it. At most it could remove the call to <code>handle</code> if it contained no <em>side-effects</em> which is unlikely to happen</p>\n\n<hr>\n\n<p>Anyway, this is only an academic discussion, because I cannot imagine a real use case where share memory could not need the <code>volatile</code> modifier. If you do not use it, the compiler is free to believe that the previous value is still valid, so on second access, you will still get first value. So even if the answer to <em>this</em> question is <em>it is not necessary</em>, you still have to use <code>volatile int *pshared;</code>.</p>\n"}], "owner": {"reputation": 311, "user_id": 6439590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cb7b6ecd1a8922df5a329f5f704e346?s=128&d=identicon&r=PG&f=1", "display_name": "odelande", "link": "https://stackoverflow.com/users/6439590/odelande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 2, "answer_count": 3, "score": 15, "last_activity_date": 1465449572, "creation_date": 1465381289, "last_edit_date": 1465390920, "question_id": 37699774, "link": "https://stackoverflow.com/questions/37699774/in-c-how-do-i-make-sure-that-a-memory-load-is-performed-only-once", "title": "In C, how do I make sure that a memory load is performed only once?", "body": "<p>I am programming two processes that communicate by posting messages to each other in a segment of shared memory. Although the messages are not accessed atomically, synchronization is achieved by protecting the messages with shared atomic objects accessed with store-releases and load-acquires.</p>\n\n<p>My problem is about security. The processes do not trust each other. Upon receiving a message, a process makes no assumption about the message being well formed; it first copies the message from shared memory to private memory, then performs some validation on this private copy and, if valid, proceeds to handle this same private copy. Making this private copy is crucial, as it prevents a TOC/TOU attack in which the other process would modify the message between validation and use.</p>\n\n<p>My question is the following: does the standard guarantee that a clever C compiler will never decide that it can read the original instead of the copy? Imagine the following scenario, in which the message is a simple integer:</p>\n\n<pre><code>int private = *pshared; // pshared points to the message in shared memory\n...\nif (is_valid(private)) {\n  ...\n  handle(private);\n}\n</code></pre>\n\n<p>If the compiler runs out of registers and temporarily needs to spill <code>private</code>, could it decide, instead of spilling it to the stack, that it can simply discard its value and reload it from <code>*pshared</code> later, provided that an alias analysis ensures that <em>this thread</em> has not changed <code>*pshared</code>?</p>\n\n<p>My guess is that such a compiler optimization would not preserve the semantics of the source program, and would therefore be illegal: <code>pshared</code> does not point to an object that is provably reachable from this thread only (such as an object allocated on the stack whose address has not leaked), therefore the compiler cannot rule out that some other thread might concurrently modify <code>*pshared</code>. By constrast, the compiler may eliminate redundant loads, because one of  the possible behaviors is that no other thread runs between the redundant loads, therefore the current thread must be ready to deal with this particular behavior.</p>\n\n<p>Could anyone confirm or infirm that guess and possibly provide references to the relevant parts of the standard?</p>\n\n<p>(By the way: I assume that the message type has no trap representations, so that loads are always defined.)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Several posters have commented on the need for synchronization, which I did not intend to get into, since I believe that I already have this covered. But since people are pointing that out, it is only fair that I provide more details.</p>\n\n<p>I am implementing a low-level asynchronous communication system between two entities that do not trust each other. I run tests with processes, but will eventually move to virtual machines on top of a hypervisor. I have two basic ingredients at my disposal: shared memory and a notification mechanism (typically, injecting an IRQ into the other virtual machine).</p>\n\n<p>I have implemented a generic circular buffer structure with which the communicating entities can produce messages, then send the aforementioned notifications to let each other know when there is something to consume. Each entity maintains its own private state that tracks what it has produced/consumed, and there is a shared state in shared memory composed of message slots and atomic integers tracking the bounds of the regions holding pending messages. The protocol unambiguously identifies which message slots are to be exclusively accessed by which entity at any time. When it needs to produce a message, an entity writes a message (non atomically) to the appropriate slot, then performs an atomic store-release to the appropriate atomic integer to transfer the ownership of the slot to the other entity, then waits until memory writes have completed, then sends a notification to wake up the other entity. Upon receiving a notification, the other entity is expected to perform an atomic load-acquire on the appropriate atomic integer, determine how many pending messages there are, then consume them.</p>\n\n<p>The load of <code>*pshared</code> in my code snippet is just an example of what consuming a trivial (<code>int</code>) message looks like. In a realistic setting, the message would be a structure. Consuming a message does not need any particular atomicity or synchronization, since, as specified by the protocol, it only happens when the consuming entity has synchronized with the other one and knows that it owns the message slot. As long as both entites follow the protocol, everything works flawlessly.</p>\n\n<p>Now, I do not want the entites to have to trust each other. Their implementation must be robust against a malicious entity that would disregard the protocol and write all over the shared memory segment at any time. If this were to happen, the only thing the malicious entity should be able to achieve would be to disrupt the communication. Think of a typical server, that must be prepared to handle ill-formed requests by a malicious client, without letting such misbehavior cause buffer overflows or out-of-bound accesses.</p>\n\n<p>So, while the protocol relies on synchronization for normal operation, the entities must be prepared for the contents of shared memory to change at any time. All I need is a way to make sure that, after an entity makes a private copy of a message, it validates and uses that same copy, and never accesses the original any more.</p>\n\n<p>I have an implementation that copies the message using a volatile read, thus making it clear to the compiler that the shared memory does not have ordinary memory semantics. I believe that this is sufficient; I wonder whether it is necessary.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 3, "creation_date": 1465414647, "post_id": 37699432, "comment_id": 62896624, "body": "What about good old trick - having dummy var first and taking difference in addresses between dummy and your variable"}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1465422952, "post_id": 37699432, "comment_id": 62900801, "body": "What you suggest is similar to the code I included. The fact is that in order to do it, it takes the frame pointer adds to it the known fixed offset of the variable (in order to get it&#39;s address) and afterwards subtracts the frame pointer in order to find the already known fixed offset. I think there should be a better way."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1465636074, "post_id": 37699432, "comment_id": 62992544, "body": "This is a very dangerous function, it is quite incompatible with the optimizer.  It <i>really</i> needs an MCVE, but the long view is that you either get a lot of code because you correctly disabled the optimizer or it needs a lot of code because the optimizer eliminated the frame pointer.  Be sure to compile with -Wframe-address in effect."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1465637797, "post_id": 37699432, "comment_id": 62993009, "body": "I compiled with options -O;-Wall;-std=c++1z;-enable-frame-pointer; the code produced is: lea    -0x38(%rbp),%rax   \tmov    %rbp,%rcx sub    %rax,%rcx mov    %rcx,(%rbx)"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1465893996, "post_id": 37699432, "comment_id": 63078647, "body": "gcc is smart enough to not apply optimizations to problems that never happen. You&#39;re probably the first person ever to conceive this convoluted solution to whatever your actual problem is. The code gcc generated gives you the exact result you need. Could there be a peephole optimization that realizes that <code>lea X(%r1),%r2 sub %r1, %r2</code> is equivalent to <code>mov X, %r2</code>? Sure. But this situation probably never happens except in contrived situations like this. No point in wasting everyone elses compilation time on it. I&#39;d say that gcc is being very smart here."}], "answers": [{"comments": [{"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1465638515, "post_id": 37762052, "comment_id": 62993198, "body": "a) When I get the address of a variable (as in the case of the code shown) the compiler is obliged to store it in an address reachable location - or at least behave as if. b) Regarding inlining, indeed the compiler may choose to inline. I have managed it using __attribute__((noinline)) ."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1465638520, "post_id": 37762052, "comment_id": 62993200, "body": "Any way also when it is inlined I have seen that these variables are put on the parent stack frame as if defined directly there. It doesn&#39;t changes my problem as I just want to know the location of the variable relative to the current stack frame independently from which it is. The solution of Severin is no different than the one indicated by me initially and the code I suppose will be bloated in the same manner."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1465638901, "post_id": 37762052, "comment_id": 62993304, "body": "Regarding your phrase &quot;A stack frame is the not the BSS. The addresses may not be calculable at link time.&quot; I think it isn&#39;t true because if the address of a variable isn&#39;t calculable at compile time why the compiler is able to compile the correct instructions referring to the variables as locations with a fixed offset from the base pointer ? ( or at least as moving offsets from the SP if the Base pointer isn&#39;t used )."}, {"owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "edited": false, "score": 0, "creation_date": 1465639549, "post_id": 37762052, "comment_id": 62993507, "body": "By the way besides having all those objections on your comments, the pragmatic fact is that gcc correctly individuates in that case that the result resolves in a fixed offset and compiles accordingly                movq   $0xfffffffffffffffc,0x8(%rbx) movq   $0xfffffffffffffff8,0x10(%rbx) movq   $0xfffffffffffffff4,0x18(%rbx) so the answer of Severin seems at least to give the desirable result but still it isn&#39;t the desired way of doing it. In case that it doesn&#39;t follows in the next 2 days an answer related to some builtin into the compiler I will accept it as the correct one."}], "tags": [], "owner": {"reputation": 1457, "user_id": 2981588, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f4f2945d6e635729ef90306b3fc473d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/2981588/tim"}, "is_accepted": false, "score": 5, "last_activity_date": 1465636898, "creation_date": 1465636898, "answer_id": 37762052, "question_id": 37699432, "link": "https://stackoverflow.com/questions/37699432/how-to-get-the-offset-of-an-automatic-local-variable-relative-to-the-stack-fra/37762052#37762052", "title": "How to get the offset of an automatic (local) variable relative to the stack frame ( __builtin_frame_address )", "body": "<blockquote>\n  <p>Using gcc, I need to track the existence of some special kind of variables allocated in various routines as local variables</p>\n</blockquote>\n\n<p>Just because a variable has automatic storage doesn't mean it will exist on the stack. The compiler may just stick it in a register depending on how it's being used.</p>\n\n<blockquote>\n  <p>So I need at compile time a method to get the offset of an automatic variable (variable with local scope) relative to the stack frame (relative to rbp register in x86 architectures).</p>\n</blockquote>\n\n<p>This doesn't make any sense. The stack frame doesn't exist at compile-time. What happens if the compiler decides to inline your function? Where is the compile-time stack frame?</p>\n\n<blockquote>\n  <p>I am already able to get it as follows:</p>\n</blockquote>\n\n<pre><code>(char*)&amp;a - (char*)__builtin_frame_address(0)\n</code></pre>\n\n<p>That's one way to do it, and it handles the cases where the compiler shuffles around your stack frame.</p>\n\n<blockquote>\n  <p>the problem is that gcc isn't smart enough and generates a lot of instructions for what should just be the loading of a constant.</p>\n</blockquote>\n\n<p>That's because it's <em>not</em> a constant. A stack frame is the <em>not</em> the BSS. The addresses may not be calculable at link time. Again, the inliner completely breaks your preconceptions of what the stack frame is. You may want to read <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Return-Address.html\" rel=\"noreferrer\">the docs</a> on <code>__builtin_return_address</code>.</p>\n\n<hr>\n\n<p>The simplest solution is the one that Severin Pappadeux suggested:</p>\n\n<pre><code>void foo() {\n    int base = 0;\n    // do stuff\n    float my_special_var = 42.0f;\n    std::ptrdiff_t special_var_offset = reinterpret_cast&lt;char*&gt;(&amp;base) - reinterpret_cast&lt;char*&gt;(&amp;my_special_var);\n    std::cout &lt;&lt; special_var_offset &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1465636898, "creation_date": 1465380406, "question_id": 37699432, "link": "https://stackoverflow.com/questions/37699432/how-to-get-the-offset-of-an-automatic-local-variable-relative-to-the-stack-fra", "title": "How to get the offset of an automatic (local) variable relative to the stack frame ( __builtin_frame_address )", "body": "<p>Using gcc, I need to track the existence of some special kind of variables allocated in various routines as local variables.\nIn order to do that I have thought to signal their existence at compile time.\nSo I need at compile time a method to get the offset of an automatic variable (variable with local scope) relative to the stack frame (relative to rbp register in x86 architectures).</p>\n\n<p>I am already able to get it as follows:</p>\n\n<pre><code>(char*)&amp;a - (char*)__builtin_frame_address(0)\n</code></pre>\n\n<p>the problem is that gcc isn't smart enough and generates a lot of instructions for what should just be the loading of a constant.\nSo I am wondering if by chance there is any hidden macro or builtin that gives it to me directly as that is too the simpler solution.</p>\n"}, {"tags": ["c", "linux", "http", "server"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1465380657, "post_id": 37699327, "comment_id": 62873494, "body": "You appear to be ignoring the return value from <code>read()</code>. What happens if the number of bytes returned is less than <code>BUF_SIZ</code>? Also, are you sure you&#39;re sending your response with the correct HTTP headers?"}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1465380830, "post_id": 37699327, "comment_id": 62873623, "body": "the header I&#39;m sending is simply &quot;HTTP/1.1 200 OK\\r\\n\\r\\n&quot;. it works for simple text files... I ignore from read&#39;s return value because the function sendToClient measures the actual size of the buffer anyway with strlen."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1465380887, "post_id": 37699327, "comment_id": 62873664, "body": "(1) You need a <code>Content-Type</code> header as well. (2) <code>strlen()</code> is of no use whatsoever for binary data. Use the return value from <code>read()</code>."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1465381055, "post_id": 37699327, "comment_id": 62873790, "body": "ok, thanks, I will try that and report ..."}, {"owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1465381919, "post_id": 37699327, "comment_id": 62874362, "body": "well, there is a change - the data is fully sent, but the picture still doesnt show up. I&#39;ll keep on research. thanks everyone!"}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1465381630, "creation_date": 1465381630, "answer_id": 37699909, "question_id": 37699327, "link": "https://stackoverflow.com/questions/37699327/failure-in-sending-image-from-http-server-to-client/37699909#37699909", "title": "failure in sending image from http server to client", "body": "<p>The error is here: <code>size_t notSent = strlen(buf);</code>. You assume that the first null in the buffer marks the end of the data read from file. It makes sense for text files that should never contain a null byte, but it is a <strong>wrong</strong> assumption for binary files like image files. As they can contain null bytes, you will not transfer to the client all the bytes that were read from file, the worst case being if the first byte of the buffer is 0!</p>\n\n<p>You must pass the number of bytes actually read from disk to the <code>sendToClient</code> function and use it. Never assume the a particular byte or sequence will never occur in a binary file...</p>\n"}], "owner": {"reputation": 3588, "user_id": 5462551, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/647be55cadd0e8edac86c55a337b264c?s=128&d=identicon&r=PG&f=1", "display_name": "noamgot", "link": "https://stackoverflow.com/users/5462551/noamgot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 37699909, "answer_count": 1, "score": 1, "last_activity_date": 1465381630, "creation_date": 1465380094, "last_edit_date": 1465380417, "question_id": 37699327, "link": "https://stackoverflow.com/questions/37699327/failure-in-sending-image-from-http-server-to-client", "title": "failure in sending image from http server to client", "body": "<p>I'm implementing a simple http server in c code.\nI connect to the server via firefox browser as a client, and write:</p>\n\n<pre><code>http://localhost:&lt;port number&gt;/&lt;path to file&gt;\n</code></pre>\n\n<p>now, I tried it for a simple text file and it works. however, when I try it with an image it doesn't work. \nIt is important to mention that a few days ago it did work, but I changed my code due to some notes I got from my TA, and now it doesnt' work...</p>\n\n<p>I added some helper prints and saw that some of the data was sent, however at some point it gets stuck and doesn't send anymore.\nmy guess is that somehow the sending buffer is filled, but I make sure it is empty after sending is over... can you try to identify where is the problem?</p>\n\n<pre><code>#define BUF_SIZE 2048\n\n\nint sendToClient(int clientFd, char *buf)\n{\n    int bytesSent;\n    int totalSent = 0;\n    size_t notSent = strlen(buf);\n    while (notSent &gt; 0)\n    {\n        if ((bytesSent = send(clientFd, buf + totalSent, notSent, 0)) &lt; 0)\n        {\n            printf(\"send syscall failed: %s\\n\", strerror(errno));\n            return -1;\n        }\n        notSent -= bytesSent;\n        totalSent += bytesSent;\n    }\n    return totalSent;\n\n}\n\n\nvoid handleFile(int sockFd, char *path, struct stat *statBuf)\n{\n    //the stat structure pointer is delivered as a parameter, \n    //it already contains info about the file we want to send\n    //sockFd is the client's socket file descriptor.\n    //path is the path to the file...\n\n    size_t totalBytesToSend = (size_t) statBuf-&gt;st_size;\n    int fd = open(path, O_RDONLY, 0777);\n    if (fd &lt; 0)\n    {\n        printf(\"open syscall failed: %s\\n\", strerror(errno));\n        exit(EXIT_FAILURE);\n    }\n    // sending some initial http stuff...\n    char buf[BUF_SIZE];\n    // zero buffer\n    memset(buf, 0, BUF_SIZE);\n\n    int bytesSent;    \n    while (totalBytesToSend &gt; 0)\n    {   \n        if (read(fd, buf, BUF_SIZE) &lt; 0)\n        {\n            printf(\"read syscall failed: %s\\n\", strerror(errno));\n            exit(EXIT_FAILURE);\n        }\n        //send buf to client\n        if ((bytesSent = sendToClient(sockFd, buf)) &lt; 0)\n        {\n            exit(EXIT_FAILURE);\n        }\n        // data was sent - zero buf again\n        memset(buf, 0, BUF_SIZE);\n        totalBytesToSend -= bytesSent;\n    }\n    //close file &amp; socket\n    close(fd);\n    close(sockFd);\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "c++", "c"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 9, "creation_date": 1465379649, "post_id": 37699120, "comment_id": 62872764, "body": "Each program has it&#39;s own virtual address space. So you cannot really do this."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1465379719, "post_id": 37699120, "comment_id": 62872816, "body": "You would probably need to use shared memory... <a href=\"http://linux.die.net/man/3/shm_open\" rel=\"nofollow noreferrer\">linux.die.net/man/3/shm_open</a>"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1465379878, "post_id": 37699120, "comment_id": 62872917, "body": "Or read the procfs or use <code>ptrace</code>."}, {"owner": {"reputation": 855, "user_id": 1272072, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df162390316adb1dc3d5f1eb2d14079f?s=128&d=identicon&r=PG", "display_name": "woodtluk", "link": "https://stackoverflow.com/users/1272072/woodtluk"}, "edited": false, "score": 1, "creation_date": 1465379958, "post_id": 37699120, "comment_id": 62872986, "body": "For me it&#39;s not completely clear what you want to accomplish. But you can&#39;t access directly memory that belongs to one program from an other program. Each program has it&#39;s own virtual memory. If you need to communicate between two processes (applications) you have different options: shared memory, inter-process communication (IPC), sockets. You can choose an alternative depending on your needs and your system."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1465380191, "post_id": 37699120, "comment_id": 62873157, "body": "Minus 2? The question is well-written. Just because the <i>idea</i> is crazy doesn&#39;t make the question a poor one."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1465380807, "post_id": 37699120, "comment_id": 62873599, "body": "@Bathsheba Even the idea isn\u2019t completely crazy, there are legitimate (albeit <i>very</i> few) applications for this. Debuggers do it, as do patchers for games (the legitimacy of those is of course a matter of debate, but unless it impacts other people \u2014 e.g. in online tournaments \u2014 I find it hard to formulate objections)."}, {"owner": {"reputation": 157, "user_id": 6401135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf16ea5d62003784b127dc54df20eecd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Ite", "link": "https://stackoverflow.com/users/6401135/a-ite"}, "edited": false, "score": 1, "creation_date": 1465381166, "post_id": 37699120, "comment_id": 62873875, "body": "If each program has it&#39;s own virtual address space, how Operating Systems can access it?"}, {"owner": {"reputation": 1588, "user_id": 6082851, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b14f3cd864bc266a401eca07b4153602?s=128&d=identicon&r=PG", "display_name": "12431234123412341234123", "link": "https://stackoverflow.com/users/6082851/12431234123412341234123"}, "edited": false, "score": 0, "creation_date": 1465384322, "post_id": 37699120, "comment_id": 62875786, "body": "&quot;Each program has it&#39;s own virtual address space.&quot; not true at all environments. ARM Cortex-M for example dont have a MMU and all Tasks running with the same address space."}], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 3105210, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208057866502118/picture?type=large", "display_name": "jsquaredz", "link": "https://stackoverflow.com/users/3105210/jsquaredz"}, "is_accepted": true, "score": 6, "last_activity_date": 1465380554, "creation_date": 1465380554, "answer_id": 37699496, "question_id": 37699120, "link": "https://stackoverflow.com/questions/37699120/accessing-a-variable-of-the-another-program-in-c/37699496#37699496", "title": "Accessing a variable of the another program in C", "body": "<p>Doing something like this is more and more impossible these days.  With features like address space layout randomization you can't really tell where a given program, let alone variable will load in actual memory.</p>\n\n<p>Best bet is to use some type of message passing.  Not sure why all the downvotes on your question, but it seems like a reasonably put question, even if not technically feasible these days.</p>\n"}], "owner": {"reputation": 157, "user_id": 6401135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf16ea5d62003784b127dc54df20eecd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Ite", "link": "https://stackoverflow.com/users/6401135/a-ite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 37699496, "answer_count": 1, "score": 6, "last_activity_date": 1465380554, "creation_date": 1465379563, "question_id": 37699120, "link": "https://stackoverflow.com/questions/37699120/accessing-a-variable-of-the-another-program-in-c", "title": "Accessing a variable of the another program in C", "body": "<p>In python, you can learn memory location of variables by using id function, so:</p>\n\n<pre><code>X = \"Hello world!\"\nprint(id(X)) # Output is equal to 139806692112112 (0x7F27483876F0)\n</code></pre>\n\n<p>I'm tried to access to variable with pointers in C (Surely the other program still alive):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n    char *x = (char *) 0x7F27483876F0;\n    printf(\"%s\\n\", x);\n\n    return 0;   \n}\n</code></pre>\n\n<p>I compile the code, no errors or warnings but when i tried the running program OS giving a Segmentation error. How i can solve this problem?</p>\n\n<p>Or is it possible?</p>\n"}, {"tags": ["c#", "c"], "comments": [{"owner": {"reputation": 811, "user_id": 2784165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kq3T2.jpg?s=128&g=1", "display_name": "Gar", "link": "https://stackoverflow.com/users/2784165/gar"}, "edited": false, "score": 7, "creation_date": 1465379443, "post_id": 37698952, "comment_id": 62872609, "body": "Comments are stripped from the compiled code, they can not slow down your compiled program."}, {"owner": {"reputation": 539, "user_id": 2608528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/J5n8z.png?s=128&g=1", "display_name": "garglblarg", "link": "https://stackoverflow.com/users/2608528/garglblarg"}, "edited": false, "score": 1, "creation_date": 1465379508, "post_id": 37698952, "comment_id": 62872659, "body": "afaik: nope. comments get scraped by the compiler. also, see: <a href=\"http://stackoverflow.com/questions/821510/comments-compiled-into-exe-in-net\" title=\"comments compiled into exe in net\">stackoverflow.com/questions/821510/&hellip;</a>"}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "edited": false, "score": 2, "creation_date": 1465379548, "post_id": 37698952, "comment_id": 62872692, "body": "All the comments can do is to slow down the compiler (it should parse the source code and cut the comments off)."}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 2, "creation_date": 1465379631, "post_id": 37698952, "comment_id": 62872749, "body": "To even consider this implies considering coding with minimal or no comments - therefore it&#39;s not worth considering!"}, {"owner": {"reputation": 84066, "user_id": 5311735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6rhPk.jpg?s=128&g=1", "display_name": "Evk", "link": "https://stackoverflow.com/users/5311735/evk"}, "edited": false, "score": 4, "creation_date": 1465379682, "post_id": 37698952, "comment_id": 62872790, "body": "Sounds like someone searching for arguments to answer the question &quot;why don&#39;t you comment your code&quot; :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 539, "user_id": 2608528, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/J5n8z.png?s=128&g=1", "display_name": "garglblarg", "link": "https://stackoverflow.com/users/2608528/garglblarg"}, "edited": false, "score": 3, "creation_date": 1465402800, "post_id": 37698952, "comment_id": 62889704, "body": "@Gar Detail: not <i>stripped</i> so much as replaced: &quot;Each comment is replaced by one space character.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1465380274, "post_id": 37699357, "comment_id": 62873226, "body": "It\u2019s worth noting that the same is true for virtually all modern <i>interpreted</i> languages. So even interpreted languages won\u2019t see a slow-down from comments (except in the first stage of parsing, which, regardless of code flow, happens only once)."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1465380436, "post_id": 37699357, "comment_id": 62873353, "body": "I wouldn&#39;t say code optimization is optional. Every modern compiler has code optimization. It is very important phase of compilation."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1465380523, "post_id": 37699357, "comment_id": 62873416, "body": "It is one of the main reasons why it is questionable whether you can write faster Assembler code for some critical section then compiler would optimize your regular code."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 1, "creation_date": 1465380626, "post_id": 37699357, "comment_id": 62873484, "body": "@Aleksandar Makragi\u0107: often you can switch on kind of <i>debug mode</i>: ask the the compiler to perform <i>exactly</i> what you&#39;ve put down, without trying to optimize it anyhow."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1465380881, "post_id": 37699357, "comment_id": 62873657, "body": "@Konrad Rudolph: Thank you! Your note is really worth mentioned."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1465380934, "post_id": 37699357, "comment_id": 62873694, "body": "Can you explain that little better? I&#39;m not arguing, I just wanna learn something new :) I mean I guess it could be optional, but you would get about 20% slower performance. I think GCC has about  20% faster code because of code optimization. LLVM is I think somewhere around 15%. These numbers I wrote may be few percent wrong."}, {"owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "reply_to_user": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 2, "creation_date": 1465381487, "post_id": 37699357, "comment_id": 62874076, "body": "@Aleksandar Makragi\u0107: Imaging that you have a hidden error in your code and so you want to debug it. If code is optimized, it can well be a difficult task: many variables/methods/functions will be reordered, dropped, rewritten in some other (often very pecular) way. So you say: I&#39;m ready to have, say, 30% slower code, but, please, do <i>exactly</i> what I put; and only when I find out the error, optimize my <i>final</i> solution. First right, then fast: do not optimize prematurely!"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1465381599, "post_id": 37699357, "comment_id": 62874148, "body": "@DmitryBychenko Danke."}], "tags": [], "owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "is_accepted": true, "score": 16, "last_activity_date": 1465380536, "last_edit_date": 1465380536, "creation_date": 1465380187, "answer_id": 37699357, "question_id": 37698952, "link": "https://stackoverflow.com/questions/37698952/do-comments-slow-down-a-compiled-language/37699357#37699357", "title": "Do comments slow down a compiled language?", "body": "<p>When you compile the program, the compiler actually does:</p>\n\n<ul>\n<li>Lexical Analysis (tokenization)</li>\n<li>Syntax Analysis (parsing)</li>\n<li>Semantic Analysis (language rules checked)</li>\n<li>[Intermediate] Code Generation </li>\n<li>Code Optimization (optional)</li>\n</ul>\n\n<p>As for comments they should be <em>extracted</em> as tokens on Lexical Analysis stage and <em>dropped out</em> on Syntax Analysis (parsing) stage. So you can slow down the <em>compiler</em>, but not the <em>code generated</em>.</p>\n\n<p>Many <em>interpreted languages</em> often do first two or three stages and only then execute, so <em>comments</em> don't necessarily slow down even <em>interpreted languages</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465402903, "post_id": 37699382, "comment_id": 62889770, "body": "Comments are not skipped. Each comment is replaced by one space character."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465410178, "post_id": 37699382, "comment_id": 62894113, "body": "That is not true. Lexer would have empty rule when regular expression for comment is found. So you do not replace it with one space character, that simply has no point. Comments are just ignored."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1465415271, "post_id": 37699382, "comment_id": 62896965, "body": "Perhaps the C spec is wrong? &quot;Each comment is replaced by one space character.&quot;  C11dr &#167;5.1.1.2 3.  As to your &quot;do not replace it with one space character, that simply has no point&quot;, what is your reference to support that?  <code>-&#47;*abc*&#47;-a</code> is the same as <code>- -a</code>, not <code>--a</code>."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465420862, "post_id": 37699382, "comment_id": 62899850, "body": "You are talking about C preprocessor, not compiler/interpreter."}], "tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": false, "score": 4, "last_activity_date": 1520590990, "last_edit_date": 1520590990, "creation_date": 1465380244, "answer_id": 37699382, "question_id": 37698952, "link": "https://stackoverflow.com/questions/37698952/do-comments-slow-down-a-compiled-language/37699382#37699382", "title": "Do comments slow down a compiled language?", "body": "<p>Compilers have these phases:</p>\n\n<ul>\n<li>Lexical analysis</li>\n<li>Syntax analysis</li>\n<li>Semantic analysis</li>\n<li>Generating machine independent code</li>\n<li>Code optimization</li>\n<li>Generating final code</li>\n</ul>\n\n<p>In  <strong>Lexical analysis</strong>, comments are skipped, it is basically like you didn't write anything. </p>\n\n<p>So no, they do not affect performance in any way.</p>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4988990, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/VDWeY.jpg?s=128&g=1", "display_name": "Darshan Faldu", "link": "https://stackoverflow.com/users/4988990/darshan-faldu"}, "is_accepted": false, "score": 3, "last_activity_date": 1465380714, "creation_date": 1465380714, "answer_id": 37699549, "question_id": 37698952, "link": "https://stackoverflow.com/questions/37698952/do-comments-slow-down-a-compiled-language/37699549#37699549", "title": "Do comments slow down a compiled language?", "body": "<p>Comment will be exclude from <strong>Lexical analysis</strong> phase </p>\n\n<p>but if code with comments are parsed in <strong>Lexical analysis</strong> phase it might be take more time compare as code without comments but <strong><em>comments does not affect execution time</em></strong></p>\n\n<p>Why are you not try by your self, look into below example and run it.</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        DateTime StartTime;\n        DateTime EndTime;\n        TimeSpan ExecutionTime;\n\n        StartTime = DateTime.Now;\n        for (int i = 0; i &lt; 10000;)\n        {\n            i++;\n            for (int j = 0; j &lt; 100000;)\n            {\n                j++;\n            }\n        }\n        EndTime = DateTime.Now;\n        ExecutionTime = (EndTime - StartTime);\n\n        Console.WriteLine(\"Phase 1 without comment done.\");\n        Console.WriteLine(\"Phase 1 start time : \" + StartTime.ToString());\n        Console.WriteLine(\"Phase 1 end time : \" + EndTime.ToString());\n        Console.WriteLine(\"Phase 1 Execution Seconds : \" + ExecutionTime.TotalSeconds);\n\n        Console.WriteLine(\"\\r\\n---------------------------------------------\\r\\n\");\n\n        StartTime = DateTime.Now;\n        for (int i = 0; i &lt; 10000;)\n        {\n            i++;\n            for (int j = 0; j &lt; 100000;)\n            {\n                j++;\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n                // SOME COMMENT.\n            }\n        }\n        EndTime = DateTime.Now;\n        ExecutionTime = (EndTime - StartTime);\n\n        Console.WriteLine(\"Phase 2 with comment done.\");\n        Console.WriteLine(\"Phase 2 start time : \" + StartTime.ToString());\n        Console.WriteLine(\"Phase 2 end time : \" + EndTime.ToString());\n        Console.WriteLine(\"Phase 2 Execution Seconds : \" + ExecutionTime.TotalSeconds);\n\n        Console.ReadKey();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 5089102, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WIyTy.jpg?s=128&g=1", "display_name": "Yousuf Azad", "link": "https://stackoverflow.com/users/5089102/yousuf-azad"}, "is_accepted": false, "score": 0, "last_activity_date": 1465386148, "creation_date": 1465386148, "answer_id": 37701564, "question_id": 37698952, "link": "https://stackoverflow.com/questions/37698952/do-comments-slow-down-a-compiled-language/37701564#37701564", "title": "Do comments slow down a compiled language?", "body": "<p>No the compiler does not slow down the program, it ignores all the comments and takes the raw code. </p>\n"}], "owner": {"reputation": 221, "user_id": 6380306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e5c0c0ead2ece1083f8505e08df4a980?s=128&d=identicon&r=PG&f=1", "display_name": "jsls", "link": "https://stackoverflow.com/users/6380306/jsls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2306, "favorite_count": 1, "accepted_answer_id": 37699357, "answer_count": 4, "score": 6, "last_activity_date": 1540767196, "creation_date": 1465379182, "last_edit_date": 1540767196, "question_id": 37698952, "link": "https://stackoverflow.com/questions/37698952/do-comments-slow-down-a-compiled-language", "title": "Do comments slow down a compiled language?", "body": "<p>This question has been asked several times here about interpreted language or R but I don't find anything about a compiled language, specifically C#.</p>\n\n<p>According to what I read it seems to be negligible but it still induces a very little slowdown on interpreted language: \n<a href=\"https://stackoverflow.com/questions/2731022/do-comments-slow-down-an-interpreted-language\">Do comments slow down an interpreted language?</a> </p>\n\n<p>What about compiled languages?! do they slow down only the compilation process but not execution?</p>\n"}, {"tags": ["linux-kernel", "drivers", "c"], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1465443138, "question_id": 288376}, "owner": {"reputation": 95, "user_id": 6069943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02f3c5de12c3c2b9501ce18bd5dd0ab4?s=128&d=identicon&r=PG&f=1", "display_name": "malik12", "link": "https://stackoverflow.com/users/6069943/malik12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 910, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465443138, "creation_date": 1465378959, "question_id": 37716314, "link": "https://stackoverflow.com/questions/37716314/basic-mmap-implementation", "title": "Basic mmap implementation", "body": "<p>I am pretty much new to linux and am writing a custom driver for which I need to use mmap. I have found the sample code in many places as below</p>\n\n<pre><code>static int simple_remap_mmap(struct file *filp, struct vm_area_struct *vma)\n{\n    if (remap_pfn_range(vma, vma-&gt;vm_start, vm-&gt;vm_pgoff,\n                vma-&gt;vm_end - vma-&gt;vm_start,\n                vma-&gt;vm_page_prot))\n        return -EAGAIN;\n\n    vma-&gt;vm_ops = &amp;simple_remap_vm_ops;\n    simple_vma_open(vma);\n    return 0;\n}\n</code></pre>\n\n<p>But I want to know where exactly does this code specify which portion of kernel memory to map e.g if I have allocated a buffer in the kernel using kmalloc pointed to by *kptr how can i mmap that buffer to user space. Thank you.</p>\n"}, {"tags": ["c", "linux", "system-calls", "strace", "sysdig"], "owner": {"reputation": 1359, "user_id": 6439551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btmll.jpg?s=128&g=1", "display_name": "iFlo", "link": "https://stackoverflow.com/users/6439551/iflo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1465424115, "creation_date": 1465378810, "last_edit_date": 1465424115, "question_id": 37698803, "link": "https://stackoverflow.com/questions/37698803/weird-process-time-improvement-when-supervising-with-sysdig", "title": "Weird process time improvement when supervising with sysdig", "body": "<p>I recently tried Sysdig for a project.</p>\n\n<p>My main goal is to catch syscalls from the kernel and Sysdig seems to be a good option. Actually, I had done some tests with different techniques and compared the overhead for each one.<br>\nI come here with a simple test: a C program which just opens, writes and then close a file 100000 times.</p>\n\n<pre><code>#include \"stdio.h\"\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\nint i;\nchar puffer[100];\nFILE * handle;\n\nfor (i=0; i&lt;100000; i++) {\n    strcpy (puffer, \"Sysdig c'est trop fort !\\n\");\n    handle = fopen(\"test.txt\", \"w\");\n    fputs(puffer, handle);\n    fgets(puffer, 80, handle);\n    fclose(handle);\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>I ran 5 tests without supervision and the average duration is:</p>\n\n<ul>\n<li>real: 30,29s</li>\n<li>user:1.068</li>\n<li>sys:13.098</li>\n</ul>\n\n<p>I ran other 5 tests with small LKM with kprobes. It took about 3 more seconds to complete the same test.</p>\n\n<p>At this point, everything seems normal but when I ran tests with Sysdig:</p>\n\n<pre><code>sudo sysdig proc.name=\"ctest\" &gt; ctestlog\n</code></pre>\n\n<p>Where <code>ctest</code> is my C program, I had those results on average: </p>\n\n<ul>\n<li>real: 17,1108</li>\n<li>user: 0,6336</li>\n<li>sys: 7,3752</li>\n</ul>\n\n<p>So the result from this tests is that Sysdig enhanced my process quite by twice.<br>\nI precise that standard deviation from my tests is less than 1 sec.</p>\n\n<p>Has someone already seen something like that or have an explanation?<br>\nCan it be related with linux task scheduler because of Sysdig job?</p>\n"}, {"tags": ["c", "memory", "memcpy"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465378957, "post_id": 37698758, "comment_id": 62872246, "body": "Is this C or C++? In the latter there may be other techniques."}, {"owner": {"reputation": 41, "user_id": 6439518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d632363b4b9aab7f213f1265cfade0?s=128&d=identicon&r=PG&f=1", "display_name": "cids", "link": "https://stackoverflow.com/users/6439518/cids"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1465379053, "post_id": 37698758, "comment_id": 62872318, "body": "This is C programming"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1465379548, "post_id": 37698758, "comment_id": 62872693, "body": "What are <code>trace_buf</code> and <code>EventName</code>? What is the problem with your version of <code>memcpy_s</code>? Is there a compilation error message, or crash, or wrong behaviour? You haven&#39;t clearly explained what the actual problem is."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465379790, "post_id": 37698758, "comment_id": 62872872, "body": "Are you asking SO to code that &quot;simple&quot; func fo ryou?? If so it is off topic. Show us your efforts and we will help you on problems."}, {"owner": {"reputation": 41, "user_id": 6439518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d632363b4b9aab7f213f1265cfade0?s=128&d=identicon&r=PG&f=1", "display_name": "cids", "link": "https://stackoverflow.com/users/6439518/cids"}, "edited": false, "score": 0, "creation_date": 1465380028, "post_id": 37698758, "comment_id": 62873029, "body": "Hi, edited the memcpy_s function which I have writen (probably wrong?). Just that I am unaware of the memcpy_s function. I have given the syntax which I have written above. If someone could confirm or correct the memcpy_s syntax which I have written, would be great"}, {"owner": {"reputation": 41, "user_id": 6439518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d632363b4b9aab7f213f1265cfade0?s=128&d=identicon&r=PG&f=1", "display_name": "cids", "link": "https://stackoverflow.com/users/6439518/cids"}, "edited": false, "score": 0, "creation_date": 1465380490, "post_id": 37698758, "comment_id": 62873390, "body": "Yes, it is my implementation. So it that correct? From your words, I think it is fine?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465381192, "post_id": 37698758, "comment_id": 62873888, "body": "I&#39;m not getting you. Do you wantonly to cnage calls from <code>memcpy</code> to <code>memcpy_s</code>? If so I have no idea if <code>sizeof(trace_buf)</code> is the correct size you have to pass to <code>memcpy_s</code>. As far As I can Understand it should be <code>memcpy_s((void*)&amp;buffer[0], MAX, scenario, len)</code> or <code>memcpy_s((void*)&amp;buffer[0], sizeof(buffer), scenario, len)</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1465384425, "post_id": 37698758, "comment_id": 62875846, "body": "Don&#39;t cast to <code>void *</code>"}, {"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1465384747, "post_id": 37698758, "comment_id": 62876028, "body": "Did you try to run that code before asking? The way your question is formulated makes it look like you&#39;re asking before you&#39;ve tried it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1465384850, "post_id": 37698758, "comment_id": 62876091, "body": "@sokkyoku trial and error is not a good way to code in C"}, {"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465384945, "post_id": 37698758, "comment_id": 62876157, "body": "@M.M I don&#39;t see why not. It&#39;s easy to read the man, make a minimal program that uses the function to check that you understand it properly and then use it once you&#39;ve got it working. Asking others if X will work when trying X is trivial is not a good use of SO."}, {"owner": {"reputation": 41, "user_id": 6439518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d632363b4b9aab7f213f1265cfade0?s=128&d=identicon&r=PG&f=1", "display_name": "cids", "link": "https://stackoverflow.com/users/6439518/cids"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465386097, "post_id": 37698758, "comment_id": 62876962, "body": "@M.M could you please let me know why the (void*) casting is removed?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465386290, "post_id": 37698758, "comment_id": 62877097, "body": "@cids yes, it&#39;s a good principle to avoid casts because some compilers will suppress an important error message if you use a cast.  Also it is easier to read the code without clutter."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1543512459, "post_id": 37698758, "comment_id": 93955611, "body": "Or you might want to consider using <code>strlcpy (buffer, scenario, sizeof buffer);</code>  without <code>strlen</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5262, "user_id": 652904, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a35fe8f4d6fb939a92ded63198827e6f?s=128&d=identicon&r=PG", "display_name": "nhed", "link": "https://stackoverflow.com/users/652904/nhed"}, "edited": false, "score": 0, "creation_date": 1619132218, "post_id": 37700965, "comment_id": 118819913, "body": "or <code>strncpy_s</code>?"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1465384590, "creation_date": 1465384590, "answer_id": 37700965, "question_id": 37698758, "link": "https://stackoverflow.com/questions/37698758/how-to-convert-memcpy-to-memcpy-s/37700965#37700965", "title": "How to convert memcpy to memcpy_s?", "body": "<p>The code could be:</p>\n\n<pre><code>memcpy_s(buffer, sizeof(buffer), scenario, len)\n</code></pre>\n\n<p>although maybe you would want to use <code>len+1</code> if you intend to copy a null-terminated string. (But in that case, use <code>strcpy_s</code>). </p>\n\n<p>Also you should allow for the error case:  either design the rest of your code to behave properly if the memcpy failed (buffer will be nulled out), or check the return value and take action on failure.</p>\n"}], "owner": {"reputation": 41, "user_id": 6439518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1d632363b4b9aab7f213f1265cfade0?s=128&d=identicon&r=PG&f=1", "display_name": "cids", "link": "https://stackoverflow.com/users/6439518/cids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8982, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1531309200, "creation_date": 1465378704, "last_edit_date": 1465384379, "question_id": 37698758, "link": "https://stackoverflow.com/questions/37698758/how-to-convert-memcpy-to-memcpy-s", "title": "How to convert memcpy to memcpy_s?", "body": "<p>I am just a beginner in C. I have written a code in C with a lot of memcpy functions. I want to convert the memcpy statements to memcpy_s.. I don't quite get the syntax to do this.</p>\n\n<p>This is my code snippet:</p>\n\n<pre><code>signed char buffer[MAX]; \nunsigned char len; \nconst char *scenario = ConvertMap[identity]; \nlen = strlen(scenario); \nmemcpy((void*)&amp;buffer[0],scenario,len);\n</code></pre>\n\n<p>How do I convert the last line to memcpy_s? Is it like:</p>\n\n<p><code>memcpy_s((void*)&amp;buffer[0], sizeof(buffer), scenario, len)</code> ?</p>\n"}, {"tags": ["c", "algorithm", "time-complexity", "combinations", "binomial-coefficients"], "comments": [{"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 1, "creation_date": 1465379768, "post_id": 37698506, "comment_id": 62872856, "body": "What do you mean by &#39;larger values of n &amp; r&#39;. In which range do you want to select n and r?"}, {"owner": {"reputation": 9168, "user_id": 1921273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LREX2.png?s=128&g=1", "display_name": "MrSmith42", "link": "https://stackoverflow.com/users/1921273/mrsmith42"}, "edited": false, "score": 0, "creation_date": 1465379866, "post_id": 37698506, "comment_id": 62872908, "body": "How do you calculate the values of  nCr at the moment?"}, {"owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "edited": false, "score": 0, "creation_date": 1465380139, "post_id": 37698506, "comment_id": 62873120, "body": "What are the limits on r and n? Can we assume that r is relatively small?"}, {"owner": {"reputation": 1909, "user_id": 4876196, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4368b76bec0fddbb8e507521ee69c7da?s=128&d=identicon&r=PG", "display_name": "Kittsil", "link": "https://stackoverflow.com/users/4876196/kittsil"}, "edited": false, "score": 0, "creation_date": 1465380662, "post_id": 37698506, "comment_id": 62873498, "body": "Is this modulus anything? Otherwise, for &quot;larger values of <code>n</code> and <code>r</code>&quot; you will overflow the integers."}, {"owner": {"reputation": 1887, "user_id": 1597656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/22f0d3352b38fd97b8d86992c5dde179?s=128&d=identicon&r=PG", "display_name": "Yerken", "link": "https://stackoverflow.com/users/1597656/yerken"}, "edited": false, "score": 0, "creation_date": 1465382552, "post_id": 37698506, "comment_id": 62874730, "body": "there is no good formula for this series, but it can be easily computed modulus some prime value <code>M &gt; N</code> in <code>O(r)</code> time."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1465387780, "post_id": 37698506, "comment_id": 62878163, "body": "If the time complexity is not allowed to depend on n or r, then it must be a constant, implying that you could write out at most some fixed number of digits as the answer.  But obviously the number of digits of (n choose r) grows without bound as n and r grow, so this is a contradiction: no O(1) algorithm is possible."}, {"owner": {"reputation": 7193, "user_id": 1856325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ZO1bm.png?s=128&g=1", "display_name": "FreeNickname", "link": "https://stackoverflow.com/users/1856325/freenickname"}, "edited": false, "score": 0, "creation_date": 1465389109, "post_id": 37698506, "comment_id": 62879166, "body": "Am I missing anything or is it just <code>n * (C0 + C1 + ... + Cr)</code>? In this case, you can try to find solutions for simple array sum. There is no math formula to simplify it, I&#39;m afrais, but you could try parallel solutions."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1465389246, "post_id": 37698506, "comment_id": 62879252, "body": "Regarding &quot;already tried the basic way ...&quot;: you should post the important parts of your code, and mention how much time it takes. This is in order to let people know what this &quot;basic way&quot; is, so they won&#39;t post answers suggesting it. Also good to know how much time for you is too much."}, {"owner": {"reputation": 697, "user_id": 4538337, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wBYZB.jpg?s=128&g=1", "display_name": "Mayur Kharche", "link": "https://stackoverflow.com/users/4538337/mayur-kharche"}, "edited": false, "score": 0, "creation_date": 1465393113, "post_id": 37698506, "comment_id": 62882207, "body": "range of r,n &lt;= 10^5"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "edited": false, "score": 1, "creation_date": 1465389439, "post_id": 37702445, "comment_id": 62879412, "body": "I&#39;d just like to add that if <code>n&#47;2 &lt;&lt; r &lt; n</code> then you can save some computational time by subtracting the sum from <code>r to n</code> and subtracting that from <code>2^n</code>, which is the sum of the <i>entire</i> row"}, {"owner": {"reputation": 697, "user_id": 4538337, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wBYZB.jpg?s=128&g=1", "display_name": "Mayur Kharche", "link": "https://stackoverflow.com/users/4538337/mayur-kharche"}, "edited": false, "score": 0, "creation_date": 1465439775, "post_id": 37702445, "comment_id": 62905218, "body": "I have to calculate it with modulo m. I tried it but it results in wrong answer.This is my code in case you find any error <code>Arr[0] = 1;  for(i=1;i&lt;=max;i++){  \tArr[i] = ((Arr[i-1]*(range-i+1))&#47;i)%MOD; }  for(i=0;i&lt;=max;i++){ \t \tsum += Arr[i]; \t \tsum%=MOD; \t }</code>"}, {"owner": {"reputation": 413, "user_id": 6344885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65401b8a850dc21c9011360b07da7cd2?s=128&d=identicon&r=PG&f=1", "display_name": "2rd_7", "link": "https://stackoverflow.com/users/6344885/2rd-7"}, "edited": false, "score": 1, "creation_date": 1465448960, "post_id": 37702445, "comment_id": 62907484, "body": "No, this doesn&#39;t work. It&#39;s true that <code>(a.b)%m = ((a%m).(b%m))%m</code> but there is no guarantee that <code>( a.(b&#47;c) )%m = ((a%m).( (b&#47;c) %m))%m</code>. As explained in <a href=\"https://www.quora.com/I-need-to-find-nCr-mod-p-where-n-and-r-are-of-order-10-6-and-p-is-10-9-+-7-Can-anyone-help?no_redirect=1\" rel=\"nofollow noreferrer\">this</a> link you can find ncrmodm really fast after storing <code>i! % m</code> for all <code>i&lt;=n</code>. If you do not understand that solution leave a comment below, I would edit my answer and post the detailed solution. I assume <code>m is prime</code>."}], "tags": [], "owner": {"reputation": 413, "user_id": 6344885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65401b8a850dc21c9011360b07da7cd2?s=128&d=identicon&r=PG&f=1", "display_name": "2rd_7", "link": "https://stackoverflow.com/users/6344885/2rd-7"}, "is_accepted": true, "score": 1, "last_activity_date": 1465388726, "creation_date": 1465388726, "answer_id": 37702445, "question_id": 37698506, "link": "https://stackoverflow.com/questions/37698506/how-to-find-a-sum-of-the-first-r-binomial-coefficients-for-fixed-n/37702445#37702445", "title": "How to find a sum of the first r binomial coefficients for fixed n?", "body": "<p>AFAIK, there is no such expression to which it can be reduced. But it can be done in O(r) time complexity as follows.</p>\n\n<p>Consider an array A, where A[i] stores <sup>n</sup>c<sub>i</sub>. Then we can easily verify that A[i] = A[i-1].(n-i+1)/(i)</p>\n\n<p>So </p>\n\n<pre><code>A[0] = 1;\nfor(int i=1;i&lt;=r;i++){\n    A[i] = A[i-1].(n-i+1)/(i);\n}\nint ans = 0; //The required answer\nfor(int i=0;i&lt;=r;i++){\n    ans = ans+A[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 1, "last_activity_date": 1465394600, "last_edit_date": 1465394600, "creation_date": 1465393745, "answer_id": 37704421, "question_id": 37698506, "link": "https://stackoverflow.com/questions/37698506/how-to-find-a-sum-of-the-first-r-binomial-coefficients-for-fixed-n/37704421#37704421", "title": "How to find a sum of the first r binomial coefficients for fixed n?", "body": "<p>For large N, the binomial coefficients behave like the Gaussian curve (at least for the centermost values). This can be derived from the Stirling formula and is supported by the Central Limit theorem.</p>\n\n<p>Then the partial sum can be approximated by the Error function.</p>\n"}], "owner": {"reputation": 697, "user_id": 4538337, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/wBYZB.jpg?s=128&g=1", "display_name": "Mayur Kharche", "link": "https://stackoverflow.com/users/4538337/mayur-kharche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 2, "accepted_answer_id": 37702445, "answer_count": 2, "score": 3, "last_activity_date": 1465448996, "creation_date": 1465378086, "last_edit_date": 1495542869, "question_id": 37698506, "link": "https://stackoverflow.com/questions/37698506/how-to-find-a-sum-of-the-first-r-binomial-coefficients-for-fixed-n", "title": "How to find a sum of the first r binomial coefficients for fixed n?", "body": "<p>I have already tried the basic way to solve this series but it takes time for the larger values of <code>n</code> &amp; <code>r</code>. Is there any way to reduce this expression in a single expression whose time complexity doesn't depend on the value of <code>n</code> OR <code>r</code>.Range r,n&lt;=10^5</p>\n\n<p>NOTE: here <code>r &lt; n</code> i.e. i have to find the sum of first <code>r+1</code> terms of this series.</p>\n\n<hr>\n\n<p>I have already read this question but it doesn't help me:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29439921/algorithm-to-find-sum-of-the-first-r-binomial-coefficients-for-fixed-n-modulo-m\">Algorithm to find Sum of the first r binomial coefficients for fixed n modulo m</a> </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465377741, "post_id": 37698301, "comment_id": 62871421, "body": "How about <code>io_hw_t *const  io[] = {{PABASE}, {PBBASE}};</code>"}, {"owner": {"reputation": 23, "user_id": 6439362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd11d6a253f33b8abe070f397fd01ad?s=128&d=identicon&r=PG&f=1", "display_name": "Hakk\u0131 Korur", "link": "https://stackoverflow.com/users/6439362/hakk%c4%b1-korur"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465377876, "post_id": 37698301, "comment_id": 62871493, "body": "unfortunately did not work"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465378050, "post_id": 37698301, "comment_id": 62871615, "body": "Sorry, it&#39;s a pointer...."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465378627, "post_id": 37698301, "comment_id": 62872025, "body": "integers and pointers are different"}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 3, "last_activity_date": 1465403146, "last_edit_date": 1465403146, "creation_date": 1465378168, "answer_id": 37698540, "question_id": 37698301, "link": "https://stackoverflow.com/questions/37698301/why-i-cannot-assign-hexadecimal-values-into-foo-const-array/37698540#37698540", "title": "Why I cannot assign hexadecimal values into foo* const array[]?", "body": "<p>Provide explicit casting in initialization as:</p>\n\n<pre><code>io_hw_t *const  io[] = {(io_hw_t *)PABASE, (io_hw_t *)PBBASE};\n</code></pre>\n\n<p><code>io</code> is declared as as array of <code>const</code> pointer to <code>io_hw_t</code>. So each member must be a pointer. But <code>PABASE</code> is integer constant and needs to be explicitly casted to pointer.</p>\n\n<p>Alternatively you can add the casts in your macros also as:</p>\n\n<pre><code>#define PABASE ((void *)0x200)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6439362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbd11d6a253f33b8abe070f397fd01ad?s=128&d=identicon&r=PG&f=1", "display_name": "Hakk\u0131 Korur", "link": "https://stackoverflow.com/users/6439362/hakk%c4%b1-korur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 37698540, "answer_count": 1, "score": 2, "last_activity_date": 1578094737, "creation_date": 1465377603, "last_edit_date": 1578094737, "question_id": 37698301, "link": "https://stackoverflow.com/questions/37698301/why-i-cannot-assign-hexadecimal-values-into-foo-const-array", "title": "Why I cannot assign hexadecimal values into foo* const array[]?", "body": "<p>In CCS6 I couldn't run this program properly. </p>\n\n<pre><code>typedef volatile struct{\n    unsigned int pin_in;\n    unsigned int pin_out;\n    unsigned int pin_dir;\n    unsigned int pin_ren;\n    unsigned int pin_ds;\n    unsigned int pin_sel;\n    unsigned int reserved[10];\n}io_hw_t;\n//#define PABASE ((io_hw_t*) (0x200)) // this part is working\n\n#define PABASE 0x200\n#define PBBASE 0x220\n\nio_hw_t *const  io[] = {PABASE, PBBASE}; // error \n</code></pre>\n\n<p>The warning I get is:</p>\n\n<blockquote>\n  <p>\" #145-D a value of type \"int\" cannot be used to initialize an entity\n  of type \"io_hw_t *const \"</p>\n</blockquote>\n\n<p>How can I fix this ?    </p>\n"}, {"tags": ["c++", "c", "arrays", "arduino", "uuid"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1465385720, "post_id": 37698164, "comment_id": 62876700, "body": "That uuid has 16 bytes of data. Where should they go in your 31-byte array?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1465439978, "post_id": 37698164, "comment_id": 62905258, "body": "The values given in the binary array don&#39;t match the hex values in the string."}, {"owner": {"reputation": 4070, "user_id": 182551, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddea9418ea2852edf1a5f53b2c44b6ca?s=128&d=identicon&r=PG", "display_name": "Ondrej Rafaj", "link": "https://stackoverflow.com/users/182551/ondrej-rafaj"}, "edited": false, "score": 0, "creation_date": 1544289078, "post_id": 37698164, "comment_id": 94226411, "body": "I know they don&#39;t match, that&#39;s why I said &quot;pretty much like this&quot; ... it&#39;s only an example of what I needed"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1465377582, "creation_date": 1465377582, "answer_id": 37698294, "question_id": 37698164, "link": "https://stackoverflow.com/questions/37698164/how-do-i-convert-uuid-in-string-char-array-to-static-uint8-t-adv-data31/37698294#37698294", "title": "How do I convert UUID in string (char array) to static uint8_t adv_data[31]", "body": "<p>Red two characters at a time, convert them to a number corresponding to the hexadecimal value. Do in a loop. Skip the <code>'-'</code> character when you encounter it. Set the \"current\" element in the array to the value. Set \"current\" to the next element in the array.</p>\n\n<p>Something like this <em>pseudo</em> code</p>\n\n<pre><code>while (not at end of string)\n{\n    char1 = get next character from string;\n    char2 = get next character from string;\n    value = make int from hex characters(char1, char2);\n    array[current++] = value;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1465449958, "post_id": 37698546, "comment_id": 62907842, "body": "What happens if the number of hex-digit chars in <code>uuid</code> exceeds <code>32</code>. Can&#39;t you protect against it? Why use <code>atoi</code> for conversion when you can simply subtract <code>&#39;0&#39;</code> for <code>0-9</code> and <code>&#39;a&#39; - 10</code> for <code>a-f</code>?"}, {"owner": {"reputation": 402, "user_id": 748115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/959785136860ce69d89f18300a7cf611?s=128&d=identicon&r=PG", "display_name": "winux", "link": "https://stackoverflow.com/users/748115/winux"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1465451516, "post_id": 37698546, "comment_id": 62908444, "body": "As i have said in the comments, &quot;you have to make sure that the destination have  enough space&quot; which means i leave that to the OP to protect against it add code to check bounds. Why not simply subtract &#39;0&#39; for 0-9 and  &#39;a&#39;-10 for a-f? You have to understand that &#39;0&#39; is not the digit 0 and &#39;a&#39; is not the hex A. These character have equivalent ASCII codes &#39;a&#39; = 97 and &#39;0&#39; = 48. When you subtract &#39;a&#39; -10, that gives you a result 87 which is the character &#39;W&#39;. atoi function make sure you convert the number in the string to its integer counter part exactly as it appears."}], "tags": [], "owner": {"reputation": 402, "user_id": 748115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/959785136860ce69d89f18300a7cf611?s=128&d=identicon&r=PG", "display_name": "winux", "link": "https://stackoverflow.com/users/748115/winux"}, "is_accepted": false, "score": 1, "last_activity_date": 1465439590, "last_edit_date": 1465439590, "creation_date": 1465378176, "answer_id": 37698546, "question_id": 37698164, "link": "https://stackoverflow.com/questions/37698164/how-do-i-convert-uuid-in-string-char-array-to-static-uint8-t-adv-data31/37698546#37698546", "title": "How do I convert UUID in string (char array) to static uint8_t adv_data[31]", "body": "<p>This should work for your problem</p>\n\n<pre><code>char *uuid = \"3bdb098f-b8b0-4d1b-baa2-0d93eb7169c4\";\nstatic uint8_t adv_data[32];  //your uuid has 32 byte of data\n\n// This algo will work for any size of uuid regardless where the hypen is placed\n// However, you have to make sure that the destination have enough space.\n\nint strCounter=0;      // need two counters: one for uuid string (size=38) and\nint hexCounter=0;      // another one for destination adv_data (size=32)\nwhile (i&lt;strlen(uuid))\n{\n     if (uuid[strCounter] == '-') \n     {\n         strCounter++;     //go to the next element\n         continue;\n     }\n\n     // convert the character to string\n     char str[2] = \"\\0\";\n     str[0] = uuid[strCounter];\n\n     // convert string to int base 16\n     adv_data[hexCounter]= (uint8_t)atoi(str,16);\n\n     strCounter++;\n     hexCounter++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1465451263, "last_edit_date": 1465451263, "creation_date": 1465450636, "answer_id": 37717642, "question_id": 37698164, "link": "https://stackoverflow.com/questions/37698164/how-do-i-convert-uuid-in-string-char-array-to-static-uint8-t-adv-data31/37717642#37717642", "title": "How do I convert UUID in string (char array) to static uint8_t adv_data[31]", "body": "<p>An alternative to using a library function to convert to numeric form, you can simply subtract <code>'0'</code> for characters <code>0 - 9</code> and <code>'a' - 10</code> (or simply <code>'W'</code>) for characters <code>a - f</code> to preform the conversion. For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\n#define MAXC 32\n\nint main (int argc, char **argv) {\n\n    char *uuid = argc &gt; 1 ? argv[1] : \"3bdb098f-b8b0-4d1b-baa2-0d93eb7169c4\";\n    uint8_t data[MAXC] = {0};\n\n    size_t i, ui = 0, di = 0, ulen = strlen (uuid);\n\n    for (;di &lt; MAXC &amp;&amp; ui &lt; ulen; ui++, di++) {\n        if (uuid[ui] == '-') ui++;    /* advance past any '-'  */\n                                      /* convert to lower-case */\n        if ('A' &lt;= uuid[ui] &amp;&amp; uuid[ui] &lt;= 'Z') uuid[ui] |= (1 &lt;&lt; 5);\n        data[di] = ('0' &lt;= uuid[ui] &amp;&amp; uuid[ui] &lt;= '9') ? uuid[ui] - '0' :\n                    uuid[ui] - 'W';   /* convert to uint8_t */\n    }\n\n    if (di == MAXC &amp;&amp; ui != ulen) {  /* validate all chars fit in data */\n        fprintf (stderr, \"error: uuid string exceeds storage.\\n\");\n        return 1;\n    }\n\n    printf (\"\\n original: %s\\n unsigned: \", uuid);\n    for (i = 0; i &lt; di; i++)\n        putchar (data[i] + (data[i] &lt; 10 ? '0' : 'W'));\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Output</strong></p>\n\n<pre><code>$ ./bin/uuid_to_uint8_t\n\n original: 3bdb098f-b8b0-4d1b-baa2-0d93eb7169c4\n unsigned: 3bdb098fb8b04d1bbaa20d93eb7169c4\n</code></pre>\n\n<p>(<strong>note:</strong> you can add a further check that <code>uuid[ui]</code> is a valid <em>hexadecimal</em> character or <code>'-'</code> before attempting the conversion for additional validation).</p>\n"}], "owner": {"reputation": 4070, "user_id": 182551, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddea9418ea2852edf1a5f53b2c44b6ca?s=128&d=identicon&r=PG", "display_name": "Ondrej Rafaj", "link": "https://stackoverflow.com/users/182551/ondrej-rafaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1465451263, "creation_date": 1465377208, "question_id": 37698164, "link": "https://stackoverflow.com/questions/37698164/how-do-i-convert-uuid-in-string-char-array-to-static-uint8-t-adv-data31", "title": "How do I convert UUID in string (char array) to static uint8_t adv_data[31]", "body": "<p>I have an iBeacon UUID like this <code>\"3bdb098f-b8b0-4d1b-baa2-0d93eb7169c4\"</code> and I need it to look pretty much like that:</p>\n\n<pre><code>static uint8_t adv_data[31] = { 0x02,0x01,0x06, 0x1A,0xFF,0x4C,0x00,0x02,0x15,0x71,0x3d,0x00,0x00,0x50,0x3e,0x4c,0x75,0xba,0x94,0x31,0x48,0xf1,0x8d,0x94,0x1e,0x00,0x00,0x00,0x00,0xC5 };\n</code></pre>\n\n<p>I need either a method to convert that in code but a one off method of converting this \"by hand\" would be cool too (plus the arduino code wouldn't have to deal with the conversion everytime)</p>\n"}, {"tags": ["c", "gcc", "c-preprocessor", "pragma"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1465375711, "post_id": 37697475, "comment_id": 62870080, "body": "AFAIK this is not possible with <code>#pragma message</code>"}, {"owner": {"reputation": 2544, "user_id": 3374593, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b52e8f3dbba2dd84cee919766d30125d?s=128&d=identicon&r=PG&f=1", "display_name": "L&#230;rne", "link": "https://stackoverflow.com/users/3374593/l%c3%a6rne"}, "edited": false, "score": 0, "creation_date": 1465375824, "post_id": 37697475, "comment_id": 62870160, "body": "You need to be able to pass the information that a message has been printed between the different compilation units.  This seems unreasonably difficult.  I would rather write a script to filter out duplicates lines from the output."}, {"owner": {"reputation": 4248, "user_id": 1525238, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bHvMR.jpg?s=128&g=1", "display_name": "Ayberk &#214;zg&#252;r", "link": "https://stackoverflow.com/users/1525238/ayberk-%c3%96zg%c3%bcr"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1465384946, "post_id": 37697475, "comment_id": 62876160, "body": "@GillBates what can be another solution that allows printing configuration options during build?"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1465386488, "post_id": 37697475, "comment_id": 62877228, "body": "So what <i>are</i> the build tools? For instance this is not very difficult with GNU make, or even if the build system is just a shell script. Perhaps refine your tags?"}, {"owner": {"reputation": 4248, "user_id": 1525238, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bHvMR.jpg?s=128&g=1", "display_name": "Ayberk &#214;zg&#252;r", "link": "https://stackoverflow.com/users/1525238/ayberk-%c3%96zg%c3%bcr"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1466498282, "post_id": 37697475, "comment_id": 63327926, "body": "@MikeKinghan The build tools are proprietary from Microchip and are already quite broken and unstable. I would not dare isolate or cook up scripts for my own use that integrate their tools. I agree that maybe any (partial) answer to this particular problem would not be useful in general or even the situation is beyond any help since printing this type of message is not the compiler&#39;s job."}], "answers": [{"comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1465376070, "post_id": 37697704, "comment_id": 62870329, "body": "Why would the <code>CONFIG_MESSAGE_PRINTED</code> include guard behave differently to the <code>CONFIG_H</code> one?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1465376376, "post_id": 37697704, "comment_id": 62870549, "body": "@KarstenKoop It doesn&#39;t, but <code>include</code> directives inside false conditionals are ignored."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1465376549, "post_id": 37697704, "comment_id": 62870658, "body": "I think his problem is not multiple inclusions from the same compilation unit, but different compilation units with the same include producing the same message. But as it is not completely clear from the question, he might also mean the same compilation unit, and your answer could be helpful in that case."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1465382577, "post_id": 37697704, "comment_id": 62874739, "body": "My answer makes sure that the file cobtaining the message pragma is only ever included once. This makes sure that it is printed only once."}, {"owner": {"reputation": 4248, "user_id": 1525238, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bHvMR.jpg?s=128&g=1", "display_name": "Ayberk &#214;zg&#252;r", "link": "https://stackoverflow.com/users/1525238/ayberk-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1465384885, "post_id": 37697704, "comment_id": 62876112, "body": "@FUZxxl I think the problem is with multiple compilation units because this does not work, messages are still printed multiple times."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 4248, "user_id": 1525238, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bHvMR.jpg?s=128&g=1", "display_name": "Ayberk &#214;zg&#252;r", "link": "https://stackoverflow.com/users/1525238/ayberk-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1465389407, "post_id": 37697704, "comment_id": 62879378, "body": "@Ayberk&#214;zg&#252;r Yes, each compiler invocation prints the message once. What did you expect?"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1465375987, "creation_date": 1465375987, "answer_id": 37697704, "question_id": 37697475, "link": "https://stackoverflow.com/questions/37697475/show-pragma-message-in-header-only-once-during-build/37697704#37697704", "title": "Show #pragma message in header only once during build", "body": "<p>You could put the <code>#pragma message</code> in a separate file you only include once from <code>config.h</code>. gcc might print these pragmas even when inside a false conditional, but it won't include a file from inside a false conditional. So someting like this:</p>\n\n<pre><code>/* config.h */\n#ifndef CONFIG_H\n#define CONFIG_H\n\n#ifndef CONFIG_MESSAGE_PRINTED\n#define CONFIG_MESSAGE_PRINTED\n#include \"config_message.h\"\n#endif\n\n/* ... */\n#endif /* CONFIG_H */\n</code></pre>\n\n<p>In <code>config_message.h</code>:</p>\n\n<pre><code>#pragma message(\"A message\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 3046402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3754b488bc1e80870a63dacbeab35767?s=128&d=identicon&r=PG", "display_name": "mkvoya", "link": "https://stackoverflow.com/users/3046402/mkvoya"}, "is_accepted": false, "score": 0, "last_activity_date": 1482220485, "creation_date": 1482220485, "answer_id": 41237320, "question_id": 37697475, "link": "https://stackoverflow.com/questions/37697475/show-pragma-message-in-header-only-once-during-build/41237320#41237320", "title": "Show #pragma message in header only once during build", "body": "<p>Inspired by @fuz, maybe we can write <code>#pragma message</code> in a separate <code>.c</code> file.\nHere is the example:</p>\n\n<pre><code>/* config.h */\n#ifndef CONFIG_H\n#define CONFIG_H\n\n#define CONFIG_OPTION_A\n#define CONFIG_OPTION_B\n\n#endif /* CONFIG_H */\n</code></pre>\n\n<p>Write messages in a <code>.c</code> file:</p>\n\n<pre><code>/* config_msg.c */\n#include \"config.h\"\n\n#ifdef CONFIG_OPTION_A\n#pragma message \"Config option A is enabled!\"\n#endif\n\n#ifdef CONFIG_OPTION_C\n#pragma message \"Config option C is enabled!\"\n#endif\n</code></pre>\n\n<p>Finally add compilation dependency to the Makefile (that is, <code>config_msg.o</code>):</p>\n\n<pre><code>/* Makefile */\n.PHONY: all\n%.o: %.c\n    gcc -c -o $@ $&lt;\nconfig_msg.o: config_msg.c config.h\n    gcc -c -o $@ $&lt;\nall: main.o config_msg.o\n    gcc -o main $^\n</code></pre>\n\n<p>As long as <code>config.h</code> is modified, the <code>config_msg.o</code> will be re-compiled and print the messages within it. (Adding <code>config.h</code> to the dependencies of <code>Rule config_msg.o</code> is necessary. And this also depends on higher priority of <code>Rule config_msg.o</code> than <code>Rule %.o</code>. Correct me if I'm wrong.)</p>\n\n<p>Here is the test:</p>\n\n<pre><code>$ make all\ngcc -c -o main.o main.c\ngcc -c -o config_msg.o config_msg.c\nconfig_msg.c:4:9: warning: Config option A is enabled! [-W#pragma-messages]\n#pragma message \"Config option A is enabled!\"\n        ^\n1 warning generated.\ngcc -o main main.o config_msg.o\n$ make all\ngcc -o main main.o config_msg.o\n</code></pre>\n\n<p>Run after adding <code>#define CONFIG_OPTION_C</code> to <code>config.h</code>:</p>\n\n<pre><code>$ make all\ngcc -c -o config_msg.o config_msg.c\nconfig_msg.c:4:9: warning: Config option A is enabled! [-W#pragma-messages]\n#pragma message \"Config option A is enabled!\"\n        ^\nconfig_msg.c:8:9: warning: Config option C is enabled! [-W#pragma-messages]\n#pragma message \"Config option C is enabled!\"\n        ^\n2 warnings generated.\ngcc -o main main.o config_msg.o\n</code></pre>\n\n<p>I don't think this is a perfect solution. But hope it will help.\n:)</p>\n"}], "owner": {"reputation": 4248, "user_id": 1525238, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bHvMR.jpg?s=128&g=1", "display_name": "Ayberk &#214;zg&#252;r", "link": "https://stackoverflow.com/users/1525238/ayberk-%c3%96zg%c3%bcr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1499, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1482220485, "creation_date": 1465375396, "last_edit_date": 1465385396, "question_id": 37697475, "link": "https://stackoverflow.com/questions/37697475/show-pragma-message-in-header-only-once-during-build", "title": "Show #pragma message in header only once during build", "body": "<p>I have a bunch of <code>#pragma message(\"A message\")</code>s in a <code>config.h</code> header that gets included in many places in the project; the goal is to inform which configuration options are chosen during build. The header is protected by <code>#ifndef #define</code> style headerguards. The problem is that every time this header gets included, the message is printed. Is there a better way to do this so that the message gets printed only once during the build?</p>\n\n<p><strong>Edit:</strong> I understand that build options are usually manipulated and viewed with build tools such as cmake, qmake, autotools etc. but I don't really have a choice on the build tools due to the nature of the project.</p>\n"}, {"tags": ["c", "arm", "realloc", "xilinx"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1465375493, "post_id": 37696545, "comment_id": 62869918, "body": "<i>&quot;...&#39;failed&#39; because the size variable is overwritten by the out array.&quot;</i> - how do you figure that? <code>size</code> is function argument whose address is never taken, so doesn&#39;t even necessarily have storage that could be overwritten (indeed, <a href=\"https://godbolt.org/g/GVXUwS\" rel=\"nofollow noreferrer\">that function can easily do its thing entirely in registers</a>). Also, given that you&#39;re not checking the return value, how do you know <code>realloc()</code> itself doesn&#39;t fail (or given that this would appear to be a bare-metal environment, isn&#39;t simply implemented as <code>return NULL;</code>)?"}, {"owner": {"reputation": 29, "user_id": 1880847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b73eafa547fcc7de780a96db256dcd7?s=128&d=identicon&r=PG", "display_name": "alpine", "link": "https://stackoverflow.com/users/1880847/alpine"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1465378425, "post_id": 37696545, "comment_id": 62871890, "body": "I forget to mention that the application is bare-metal. I debugged the program with gdb and take a look at the memory. The address from the pointer was 0x1125a8, the address from size was 0x11309c. So there is a space between this from 0xaf4. The size variable is overwritten then variable i is 701 and x 2804. If I convert the decimal number 2804 to hex i get the difference that i calculated before (2804 = 0xaf4)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465378853, "post_id": 37696545, "comment_id": 62872178, "body": "Your comment is totally unclear.... Could you elaborate a bit more? Are you saying that the <code>size</code> parameter address into is, at a certain point of c<code>opyU32ArrayToUnsignedCharArray</code> execution, overwritten?...."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1465379290, "post_id": 37696545, "comment_id": 62872492, "body": "BTW what @Notlikethat wrote you is the point: you <b>have to</b> check <code>realloc</code> return value to be sure that <code>realloc</code> successfully allocated required memory."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1465384010, "post_id": 37696545, "comment_id": 62875585, "body": "Well, that rather suggests that for some reason your stack and heap are far too close together and running into each other, in which case the problem isn&#39;t anything to do with any of this code (I guess repeated <code>realloc()</code> calls might churn the heap enough to exacerbate it)."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 1880847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b73eafa547fcc7de780a96db256dcd7?s=128&d=identicon&r=PG", "display_name": "alpine", "link": "https://stackoverflow.com/users/1880847/alpine"}, "is_accepted": true, "score": 0, "last_activity_date": 1465409501, "creation_date": 1465409501, "answer_id": 37709897, "question_id": 37696545, "link": "https://stackoverflow.com/questions/37696545/realloc-overwrite-variable-xilinx-sdk-on-a-zynq-soc-cortex-a9/37709897#37709897", "title": "realloc overwrite variable (Xilinx SDK on a Zynq SoC (Cortex A9))", "body": "<p>I solved the problem with the hint from Notlikethat. The problem was the small heap size. Increasing the heap is done by editing the linker script file</p>\n"}], "owner": {"reputation": 29, "user_id": 1880847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b73eafa547fcc7de780a96db256dcd7?s=128&d=identicon&r=PG", "display_name": "alpine", "link": "https://stackoverflow.com/users/1880847/alpine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 37709897, "answer_count": 1, "score": 0, "last_activity_date": 1465409501, "creation_date": 1465372725, "last_edit_date": 1465382445, "question_id": 37696545, "link": "https://stackoverflow.com/questions/37696545/realloc-overwrite-variable-xilinx-sdk-on-a-zynq-soc-cortex-a9", "title": "realloc overwrite variable (Xilinx SDK on a Zynq SoC (Cortex A9))", "body": "<p>As mentioned I have a Zynq SoC (ZC706 Eval Board) and I'm trying to read an image from the SD Card. To do this I'm using the FatFs lib (<a href=\"http://elm-chan.org/fsw/ff/00index_e.html\" rel=\"nofollow\">http://elm-chan.org/fsw/ff/00index_e.html</a>).\nIn my code I read 4096 Byte from the file and save it to a buffer. After that i copy the buffer to an unsigned char pointer that size I increase after every read operation. </p>\n\n<p>Then I'm using realloc, the for loop in the copyU32ArrayToUnsignedCharArray function 'failed' because the size variable is overwritten by the out array.</p>\n\n<p>Code that overwrite the \"size\" in the copyU32ArrayToUnsignedCharArray function:</p>\n\n<pre><code>u32 buffer[1024];\nunsigned char *img = NULL;\nbytesreaded = 0;\nfor (;;) {\n    br=0;\n    fr = f_read(&amp;fil, buffer, sizeof(buffer), &amp;br); /* Read a chunk of source file */\n    if (fr || br == 0)\n        break; /* error or eof */\n\n    img = realloc(img,br);\n    copyU32ArrayToUnsignedCharArray(buffer, &amp;img[bytesreaded], br/4); // /4 because u32(32 bit) in to unsigned char(8 bit)\n    bytesreaded += br; // update readed bytes \n}\n</code></pre>\n\n<p>The code that worked:</p>\n\n<pre><code>    u32 buffer[1024];\nunsigned char *img = NULL;\nimg = malloc(512*512*3+100);\nbytesreaded = 0;\nfor (;;) {\n    br=0;\n    fr = f_read(&amp;fil, buffer, sizeof(buffer), &amp;br); /* Read a chunk of source file */\n    if (fr || br == 0)\n        break; /* error or eof */\n\n    copyU32ArrayToUnsignedCharArray(buffer, &amp;img[bytesreaded], br/4); // /4 because u32(32 bit) in to unsigned char(8 bit)\n    bytesreaded += br; // update readed bytes \n}\n</code></pre>\n\n<p>The copyU32ArrayToUnsignedCharArray function:</p>\n\n<pre><code>void copyU32ArrayToUnsignedCharArray(u32 *in, unsigned char* out, uint size){\nint i,x;\n\nx = 0;\nfor (i = 0; i &lt; size; i++) {\n    if(size != 1024)\n        break;\n    in[i] = Xil_In32BE(&amp;in[i]);\n    out[x] = (u32) in[i] &gt;&gt; 24;\n    out[x + 1] = (u32) in[i] &gt;&gt; 16 &amp; 0x00FF;\n    out[x + 2] = (u32) in[i] &gt;&gt; 8 &amp; 0x0000FF;\n    out[x + 3] = (u32) in[i] &amp; 0x000000FF;\n    x += 4;\n}\n}\n</code></pre>\n\n<p>I want to use realloc because I don't know how big the image will be that I read.</p>\n\n<p><strong>Update:</strong><br>\nSome further information to the code that doesn't work. I debugged it and the pointer to *img isn't null, so the realloc was successfully. If I'm using gdb the following things happen in the copyU32ArrayToUnsignedCharArray function:<br>\n - pointer to the variable \"out\" is 0x001125a8<br>\n - the address of the \"size\" variable is 0x0011309c (the value that is stored at this location is correct)<br>\n - the space in memory between this two variables is 0xaf4 = 2804 dec (difference of the two addresses)<br>\n - if the for loop within the copyU32ArrayToUnsignedCharArray function reached i=702 and x=2808 the size variable is changed to another value  </p>\n\n<p>Sincerely,<br>\nArno</p>\n"}, {"tags": ["c", "sockets", "network-programming", "proxy-server"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465370988, "post_id": 37695915, "comment_id": 62867213, "body": "no offense, you&#39;re writing a code or story? 200+ lines and no indentation, at all?"}, {"owner": {"reputation": 3, "user_id": 6438952, "user_type": "registered", "profile_image": "https://graph.facebook.com/876696292440992/picture?type=large", "display_name": "Venkatesh Koppuravuri", "link": "https://stackoverflow.com/users/6438952/venkatesh-koppuravuri"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465371410, "post_id": 37695915, "comment_id": 62867465, "body": "sorry bro. I have pasted the code for the first time in stackoverflow. I struggled  for 30 min and lost Indentation."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465371466, "post_id": 37695915, "comment_id": 62867509, "body": "HInt: hit the &quot;?&quot; icon in <a href=\"https://stackoverflow.com/posts/37695915/edit\">edit</a> mode."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6438952, "user_type": "registered", "profile_image": "https://graph.facebook.com/876696292440992/picture?type=large", "display_name": "Venkatesh Koppuravuri", "link": "https://stackoverflow.com/users/6438952/venkatesh-koppuravuri"}, "edited": false, "score": 0, "creation_date": 1465394090, "post_id": 37699546, "comment_id": 62883006, "body": "i have did clearing the cookie of the domain I am getting xyz.com didn&#39;t send any data"}], "tags": [], "owner": {"reputation": 88, "user_id": 3606247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b09fe531732514f335d35500ea09dcaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sunson", "link": "https://stackoverflow.com/users/3606247/sunson"}, "is_accepted": true, "score": 0, "last_activity_date": 1465380705, "last_edit_date": 1495540353, "creation_date": 1465380705, "answer_id": 37699546, "question_id": 37695915, "link": "https://stackoverflow.com/questions/37695915/i-am-unable-to-get-a-http-response-using-simple-proxy-server-to-browser/37699546#37699546", "title": "I am unable to get a http response using simple proxy server to browser", "body": "<p>This may not a code problem but a <em>net::ERR_CONNECTION_RESET</em> issue.<br><br>\nPossible Solution: Go to<br><br>\n<code>chrome setting &gt; Privacy &gt; Content Settings &gt; Cookie &gt; All cookie and Site Data &gt; Delete domain problem</code></p>\n\n<p>see\n<a href=\"https://stackoverflow.com/a/30222307\">reference link</a></p>\n"}], "owner": {"reputation": 3, "user_id": 6438952, "user_type": "registered", "profile_image": "https://graph.facebook.com/876696292440992/picture?type=large", "display_name": "Venkatesh Koppuravuri", "link": "https://stackoverflow.com/users/6438952/venkatesh-koppuravuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 37699546, "answer_count": 1, "score": 0, "last_activity_date": 1465380705, "creation_date": 1465370890, "last_edit_date": 1465374500, "question_id": 37695915, "link": "https://stackoverflow.com/questions/37695915/i-am-unable-to-get-a-http-response-using-simple-proxy-server-to-browser", "title": "I am unable to get a http response using simple proxy server to browser", "body": "<p>I have compiled this c file and ran on port 6666. I have changed my browser settings to localhost and port 6666. I am unable to load a html page when I am trying to connect <strong>I am getting Connection Reset in browser</strong>\nHow to solve this problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;errno.h&gt;\n\nvoid error(char* msg)\n{\n    perror(msg);\n    exit(0);\n}\n\nint main(int argc,char* argv[])\n{\n    pid_t pid;\n    struct sockaddr_in addr_in,cli_addr,serv_addr;\n    struct hostent* host;\n    int sockfd,newsockfd;\n\n    if(argc&lt;2)\n        error(\"./proxy &lt;port_no&gt;\");\n\n    printf(\"\\n*****WELCOME TO PROXY SERVER*****\\n\");\n    printf(\"\\nCopyright (c) 2014  GODLY T.ALIAS\\n\\n\");\n\n    bzero((char*)&amp;serv_addr,sizeof(serv_addr));\n    bzero((char*)&amp;cli_addr, sizeof(cli_addr));\n\n    serv_addr.sin_family=AF_INET;\n    serv_addr.sin_port=htons(atoi(argv[1]));\n    serv_addr.sin_addr.s_addr=INADDR_ANY;\n\n\n    sockfd=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);\n    if(sockfd&lt;0)\n        error((char*)\"Problem in initializing socket\");\n\n    if(bind(sockfd,(struct sockaddr*)&amp;serv_addr,sizeof(serv_addr))&lt;0)\n        error((char*)\"Error on binding\");\n\n\n    listen(sockfd,50);\n    //int clilen=sizeof(cli_addr);\n    socklen_t clilen;\n\n\naccepting:\n\n    newsockfd=accept(sockfd,(struct sockaddr*)&amp;cli_addr,&amp;clilen);\n\n    if(newsockfd&lt;0)\n        error((char*)\"Problem in accepting connection\");\n\n    pid=fork();\n    if(pid==0)\n    {\n        struct sockaddr_in host_addr;\n        int flag=0,newsockfd1,n,port=0,i,sockfd1;\n        char buffer[510],t1[300],t2[300],t3[10];\n        char* temp=NULL;\n        bzero((char*)buffer,500);\n        recv(newsockfd,buffer,500,0);\n\n        sscanf(buffer,\"%s %s %s\",t1,t2,t3);\n\n\n        if(((strncmp(t1,\"GET\",3)==0))&amp;&amp;((strncmp(t3,\"HTTP/1.1\",8)==0)||(strncmp(t3,\"HTTP/1.0\",8)==0))&amp;&amp;(strncmp(t2,\"http://\",7)==0))\n        {\n            strcpy(t1,t2);\n\n            flag=0;\n\n            for(i=7;i&lt;strlen(t2);i++)\n            {\n                if(t2[i]==':')\n                {\n                    flag=1;\n                    break;\n                }\n            }\n\n            temp=strtok(t2,\"//\");\n            if(flag==0)\n            {\n                port=80;\n                temp=strtok(NULL,\"/\");\n            }\n            else\n            {\n                temp=strtok(NULL,\":\");\n            }\n\n            sprintf(t2,\"%s\",temp);\n            printf(\"host = %s\",t2);\n            host=gethostbyname(t2);\n\n            if(flag==1)\n            {\n                temp=strtok(NULL,\"/\");\n                port=atoi(temp);\n            }\n\n\n            strcat(t1,\"^]\");\n            temp=strtok(t1,\"//\");\n            temp=strtok(NULL,\"/\");\n            if(temp!=NULL)\n                temp=strtok(NULL,\"^]\");\n            printf(\"\\npath = %s\\nPort = %d\\n\",temp,port);\n\n\n            bzero((char*)&amp;host_addr,sizeof(host_addr));\n            host_addr.sin_port=htons(port);\n            host_addr.sin_family=AF_INET;\n            bcopy((char*)host-&gt;h_addr,(char*)&amp;host_addr.sin_addr.s_addr,host-&gt;h_length);\n\n            sockfd1=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);\n            newsockfd1=connect(sockfd1,(struct sockaddr*)&amp;host_addr,sizeof(struct sockaddr));\n            sprintf(buffer,\"\\nConnected to %s  IP - %s\\n\",t2,inet_ntoa(host_addr.sin_addr));\n            if(newsockfd1&lt;0)\n                error(\"Error in connecting to remote server\");\n\n            printf(\"\\n%s\\n\",buffer);\n            //send(newsockfd,buffer,strlen(buffer),0);\n            bzero((char*)buffer,sizeof(buffer));\n            if(temp!=NULL)\n                sprintf(buffer,\"GET /%s %s\\r\\nHost: %s\\r\\nConnection: close\\r\\n\\r\\n\",temp,t3,t2);\n            else\n                sprintf(buffer,\"GET / %s\\r\\nHost: %s\\r\\nConnection: close\\r\\n\\r\\n\",t3,t2);\n\n\n            n=send(sockfd1,buffer,strlen(buffer),0);\n            printf(\"\\n%s\\n\",buffer);\n            if(n&lt;0)\n                error(\"Error writing to socket\");\n            else{\n                do\n                {\n                    bzero((char*)buffer,500);\n                    n=recv(sockfd1,buffer,500,0);\n                    if(!(n&lt;=0))\n                        send(newsockfd,buffer,n,0);\n                }while(n&gt;0);\n            }\n        }\n        else\n        {\n            send(newsockfd,\"400 : BAD REQUEST\\nONLY HTTP REQUESTS ALLOWED\",18,0);\n        }\n        close(sockfd1);\n        close(newsockfd);\n        close(sockfd);\n        _exit(0);\n    }\n    else\n    {\n        close(newsockfd);\n        goto accepting;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "printf", "getchar", "puts"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465370608, "post_id": 37695698, "comment_id": 62866964, "body": "print the pointers using <code>%p</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1465370906, "post_id": 37695698, "comment_id": 62867157, "body": "Also, I request you to re-read the man pages and double-check the supplied data types. :)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1465371985, "post_id": 37695698, "comment_id": 62867802, "body": "&quot;gives an error&quot; : which error ?"}, {"owner": {"reputation": 471, "user_id": 4968695, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-E9Zrmux9yCs/AAAAAAAAAAI/AAAAAAAAAKY/rs8VtH67YGo/photo.jpg?sz=128", "display_name": "Kanji Viroja", "link": "https://stackoverflow.com/users/4968695/kanji-viroja"}, "edited": false, "score": 0, "creation_date": 1465382231, "post_id": 37695698, "comment_id": 62874545, "body": "I have tried as you mention code snippet in gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.1)  and I didn&#39;t see any error during compilation time or runtime."}, {"owner": {"reputation": 326, "user_id": 3873968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202136154/picture?type=large", "display_name": "Pushp Sra", "link": "https://stackoverflow.com/users/3873968/pushp-sra"}, "edited": false, "score": 0, "creation_date": 1465492089, "post_id": 37695698, "comment_id": 62935517, "body": "[Error] cannot convert &#39;char (<i>)[4]&#39; to &#39;const char</i>&#39; for argument &#39;1&#39; to &#39;int puts(const char*)&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 4, "creation_date": 1465372662, "post_id": 37696479, "comment_id": 62868191, "body": "<code>char * [4]</code> is an array of 4 char pointers, <code>char (*) [4]</code> is a pointer to array of 4 chars."}, {"owner": {"reputation": 326, "user_id": 3873968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202136154/picture?type=large", "display_name": "Pushp Sra", "link": "https://stackoverflow.com/users/3873968/pushp-sra"}, "edited": false, "score": 0, "creation_date": 1465375347, "post_id": 37696479, "comment_id": 62869823, "body": "That helped and brought some clarity. Thanks."}, {"owner": {"reputation": 326, "user_id": 3873968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202136154/picture?type=large", "display_name": "Pushp Sra", "link": "https://stackoverflow.com/users/3873968/pushp-sra"}, "edited": false, "score": 0, "creation_date": 1465492215, "post_id": 37696479, "comment_id": 62935591, "body": "If the arguments are not checked on the call to printf, then how (when) is the output decided? Also how is it possible to accept arguments of type const * char and char, both?"}, {"owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "edited": false, "score": 0, "creation_date": 1465545788, "post_id": 37696479, "comment_id": 62956219, "body": "Arguments are not checked by the compiler. The output is decided at run time, the format string is parsed by the <code>printf</code> function."}], "tags": [], "owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "is_accepted": false, "score": 1, "last_activity_date": 1465374029, "last_edit_date": 1465374029, "creation_date": 1465372480, "answer_id": 37696479, "question_id": 37695698, "link": "https://stackoverflow.com/questions/37695698/c-strings-pointers-puts/37696479#37696479", "title": "C Strings, Pointers, Puts", "body": "<p>Your <code>ptr</code> variable is of type <code>char (*)[4]</code> (a pointer to <code>char</code> array). The prototype of <code>puts</code> is:</p>\n\n<pre><code>int puts(const char *s);\n</code></pre>\n\n<p>So, as your compiler probably says, <code>puts</code> expects a pointer on <code>char</code> but you give an argument of type <code>char (*)[4]</code>.</p>\n\n<blockquote>\n  <p>I want to know why do *(ptr+1) and (ptr+1) both work for printf while (ptr+1) gives an error for puts.</p>\n</blockquote>\n\n<p>The argument types are not checked on the call to <code>printf</code> (probably because <code>printf</code> takes variadic arguments). Add <code>-Wall</code> in your <code>CFLAGS</code> to add more warnings and your compiler should emit a warning about this.</p>\n\n<blockquote>\n  <p>Also I know that putchar takes an integer argument. Why do we use double pointer here?</p>\n</blockquote>\n\n<p>You dereference <code>ptr</code> twice to get a <code>char</code> (you can also do <code>(*ptr)[1]</code>). This <code>char</code> is implicitly cast into <code>int</code> when you call putchar.</p>\n"}], "owner": {"reputation": 326, "user_id": 3873968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1202136154/picture?type=large", "display_name": "Pushp Sra", "link": "https://stackoverflow.com/users/3873968/pushp-sra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465374029, "creation_date": 1465370294, "last_edit_date": 1465370658, "question_id": 37695698, "link": "https://stackoverflow.com/questions/37695698/c-strings-pointers-puts", "title": "C Strings, Pointers, Puts", "body": "<p>I have been studying a code on Programming in C lately. I got stuck here while dealing with two dimensional strings and pointers. Also the functions printf(), putchar(), and puts() are confusing! Please help me out with the following snippet:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    char wer[3][4]= {\"bag\", \"let\", \"bud\"};\n    char (*ptr)[4]=wer;\n    printf(\"%d   %d   %d\\n\",ptr, ptr+1, ptr+1); // points to bag, let and bud respectively \n    printf(\"%d   %d   %d\\n\",wer, wer+1, wer+1); // points to bag, let and bud respectively\n\n    printf(\"%d   %d   %d\\n\", (*ptr), (*ptr+1), (*ptr +2)); // points to b,a,g respectively\n\n    printf(\"%s\\n\",*(ptr+1)); //prints let\n    printf(\"%s\\n\", (ptr+1)); //prints let\n    printf(\"%s\\n\", (*ptr +1)); //prints ag\n\n\n    puts(*(ptr+1)); //prints let\n    //puts((ptr+1)); //gives error\n    puts((*ptr+1)); //prints ag\n\n\n    putchar(**(ptr+1));//prints l\n    putchar(*(*ptr +1));//prints a\n\n    return 0;\n}\n</code></pre>\n\n<p>I want to know why do  <code>*(ptr+1)</code> and <code>(ptr+1)</code> both work for <code>printf</code> while  <code>(ptr+1)</code> gives an error for <code>puts</code>. Also I know that <code>putchar</code> takes an integer argument. Why do we use double pointer here? </p>\n"}, {"tags": ["c", "gcc", "strcmp"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1465368822, "post_id": 37695188, "comment_id": 62865912, "body": "I certainly didn&#39;t expect to find that dup."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1465369047, "post_id": 37695188, "comment_id": 62866052, "body": "@2501 Pretty sure it isn&#39;t a duplicate. I can reproduce OP&#39;s problem on 5.3.1 (on my machine) but not 4.8 or 6.1. Also, using <code>const char s1[]</code> won&#39;t fix the problem, it&#39;s not even equivalent to what OP is doing."}, {"owner": {"reputation": 5359, "user_id": 582917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/98a347823cd1db90af884b227a29c29e?s=128&d=identicon&r=PG", "display_name": "CMCDragonkai", "link": "https://stackoverflow.com/users/582917/cmcdragonkai"}, "edited": false, "score": 1, "creation_date": 1465369157, "post_id": 37695188, "comment_id": 62866111, "body": "It&#39;s not necessarily an exact duplicate, but it is related. I noticed that the other question&#39;s answer mentioned <code>-fno-builtin</code>, and applying this results in both <code>printf</code> giving back 50."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1465369171, "post_id": 37695188, "comment_id": 62866124, "body": "@sleeptightpupper It is an exact dup. The first answer explains the reason for this are intrinsic functions, and the second explains the return values."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1465369186, "post_id": 37695188, "comment_id": 62866134, "body": "<a href=\"http://melpon.org/wandbox/permlink/4Px51XZffSVdjY7j\" rel=\"nofollow noreferrer\">Here&#39;s an online demo</a> for GCC 5.3.0 demonstrating the problem."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1465369380, "post_id": 37695188, "comment_id": 62866252, "body": "@sleeptightpupper The solution in the dup solves this problem."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1465369643, "post_id": 37695188, "comment_id": 62866420, "body": "@2501 <a href=\"http://melpon.org/wandbox/permlink/6VqPbHtoy7WGf1s6\" rel=\"nofollow noreferrer\">No it doesn&#39;t.</a>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "edited": false, "score": 0, "creation_date": 1465369803, "post_id": 37695188, "comment_id": 62866508, "body": "@sleeptightpupper  As has been said above and in the dup, <code>-fno-builtin</code> solves this."}, {"owner": {"reputation": 3256, "user_id": 6292850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/86iZy.jpg?s=128&g=1", "display_name": "uh oh somebody needs a pupper", "link": "https://stackoverflow.com/users/6292850/uh-oh-somebody-needs-a-pupper"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1465369887, "post_id": 37695188, "comment_id": 62866542, "body": "@2501 <a href=\"http://melpon.org/wandbox/permlink/ZN8tzmpAoCvwK7Ed\" rel=\"nofollow noreferrer\">Here&#39;s another link with <code>-fno-builtin</code></a>, now it prints <code>50 50</code>. And <a href=\"http://melpon.org/wandbox/permlink/AXcmZKQIm6Dl62rM\" rel=\"nofollow noreferrer\">with OP&#39;s original code</a>."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 2, "creation_date": 1465370302, "post_id": 37695188, "comment_id": 62866776, "body": "This is all that the POSIX standard gurantees: <code>Upon completion, strcmp() shall return an integer greater than, equal to, or less than 0, if the string pointed to by s1 is greater than, equal to, or less than the string pointed to by s2, respectively.</code> Source: <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 7580, "user_id": 5024726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd8466af959daf4c80b66890903d353?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5024726/matt"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1465370949, "post_id": 37695188, "comment_id": 62867185, "body": "There is a discussion about this question on Meta: <a href=\"http://meta.stackoverflow.com/questions/325726/how-can-i-get-this-question-thats-been-dup-hammered-re-opened\" title=\"how can i get this question thats been dup hammered re opened\">meta.stackoverflow.com/questions/325726/&hellip;</a> @2501"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 13578, "user_id": 1328439, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CuI4k.jpg?s=128&g=1", "display_name": "Dmitri Chubarov", "link": "https://stackoverflow.com/users/1328439/dmitri-chubarov"}, "edited": false, "score": 0, "creation_date": 1465372373, "post_id": 37695188, "comment_id": 62868024, "body": "@DmitriChubarov Isn&#39;t this used as dupe right now?"}, {"owner": {"reputation": 13578, "user_id": 1328439, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/CuI4k.jpg?s=128&g=1", "display_name": "Dmitri Chubarov", "link": "https://stackoverflow.com/users/1328439/dmitri-chubarov"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1465382270, "post_id": 37695188, "comment_id": 62874567, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I just wanted to get the post linked for those who could not see the close votes before it was actually closed."}], "owner": {"reputation": 5359, "user_id": 582917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/98a347823cd1db90af884b227a29c29e?s=128&d=identicon&r=PG", "display_name": "CMCDragonkai", "link": "https://stackoverflow.com/users/582917/cmcdragonkai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1465368779, "answer_count": 0, "score": 0, "last_activity_date": 1465368615, "creation_date": 1465368615, "question_id": 37695188, "link": "https://stackoverflow.com/questions/37695188/why-does-strcmp-give-back-non-deterministic-results-when-called-with-2-equivalen", "closed_reason": "Duplicate", "title": "Why does strcmp give back non-deterministic results when called with 2 equivalent styles on GCC on Linux and in Cygwin", "body": "<p>With this simple program, the first printf gives back 50, and the second gives back 1. At first we thought it might be caching or optimisation, but no matter what, this is what happens.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint compare (void const * a, void const * b) {\n    return strcmp((char const *) a, (char const *) b);\n}\n\nint main(void) {\n    printf(\"%i\\n\", compare((void const *) \"Key2\", (void const *) \"Key\")); // 50\n    printf(\"%i\\n\", strcmp(\"Key2\", \"Key\")); // 1\n    return 0;\n}\n</code></pre>\n\n<p>In comparison, <a href=\"https://repl.it/CZ5h/2\" rel=\"nofollow\">https://repl.it/CZ5h/2</a> shows that both give back 1. But my GCC is 5.3.0.</p>\n\n<p>So what is the reason for the results being different?</p>\n\n<p>Also noticed that clang compiles a program that gives deterministic results.</p>\n"}, {"tags": ["c", "node.js", "amazon-web-services", "lambda", "node-gyp"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1465367940, "post_id": 37694754, "comment_id": 62865419, "body": "have you tried to <code>fflush(stdout)</code> after your printf?"}, {"owner": {"reputation": 4315, "user_id": 4182755, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ggHFY.jpg?s=128&g=1", "display_name": "Abdul Manaf", "link": "https://stackoverflow.com/users/4182755/abdul-manaf"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1465369552, "post_id": 37694754, "comment_id": 62866363, "body": "tried. but still not working. question updated"}, {"owner": {"reputation": 370, "user_id": 2942641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba07873c1da87b601f15bc8ff2ccce1?s=128&d=identicon&r=PG", "display_name": "russtone", "link": "https://stackoverflow.com/users/2942641/russtone"}, "edited": false, "score": 0, "creation_date": 1465458077, "post_id": 37694754, "comment_id": 62911846, "body": "Can you post your C code that exports <code>sayHello</code> function?"}], "answers": [{"tags": [], "owner": {"reputation": 4315, "user_id": 4182755, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ggHFY.jpg?s=128&g=1", "display_name": "Abdul Manaf", "link": "https://stackoverflow.com/users/4182755/abdul-manaf"}, "is_accepted": false, "score": 5, "last_activity_date": 1465460265, "creation_date": 1465460265, "answer_id": 37720426, "question_id": 37694754, "link": "https://stackoverflow.com/questions/37694754/printf-statement-not-working-on-lambda/37720426#37720426", "title": "Printf Statement not working on lambda", "body": "<p>This code is working. fflush(stdout) is enogh for printing.</p>\n\n<pre><code>int sayHello()\n{\n    printf(\"Haaaaaaaaaaaaai\\n\");\n    fflush(stdout);\n    return 0;   \n}\n</code></pre>\n\n<p>But, aws lamda cannot print library prints directly on web console. We need to install awslogs for waching full logs.</p>\n\n<ol>\n<li><p>install awslogs</p>\n\n<blockquote>\n  <p>sudo pip install awslogs</p>\n</blockquote></li>\n<li><p>for Waching logs.</p>\n\n<blockquote>\n  <p>awslogs get /aws/lambda/lambdaFunctionName  --start=\"3h\"</p>\n</blockquote></li>\n</ol>\n"}], "owner": {"reputation": 4315, "user_id": 4182755, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ggHFY.jpg?s=128&g=1", "display_name": "Abdul Manaf", "link": "https://stackoverflow.com/users/4182755/abdul-manaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1499089613, "creation_date": 1465367111, "last_edit_date": 1499089613, "question_id": 37694754, "link": "https://stackoverflow.com/questions/37694754/printf-statement-not-working-on-lambda", "title": "Printf Statement not working on lambda", "body": "<p>I tried to create a lambda function using node.js. w wrote code in C code and convert it to node library using node-gyp. lambda function perfectly working. but it print only node.js console.log statements. </p>\n\n<p>This is my node.js code</p>\n\n<pre><code>'use strict';\nconsole.log('Loading function');\n\nexports.handler = (event, context, callback) =&gt; {\n\nvar addon = require('./build/Release/testLibraryfromCcode');\n\naddon.sayHello();\nconsole.log(\"Completed\");\n}\n</code></pre>\n\n<p>This is my C code</p>\n\n<pre><code>int sayHello()\n{\n    printf(\"Haaaaaaaaaaaaai\\n\");\n    fflush(stdout);\n    return 0;   \n}\n</code></pre>\n\n<p>I got output like this from lambda test console</p>\n\n<pre><code>   TART RequestId: 3e8cd5ff-2d41-11e6-af8f-ada8f1249113 Version: $LATEST\n    2016-06-08T06:21:32.779Z    3e8cd5ff-2d41-11e6-af8f-ada8f1249113    Loading function\n   2016-06-08T06:21:32.779Z 3e8cd5ff-2d41-11e6-af8f-ada8f1249113 Completed\n</code></pre>\n\n<p>Haaaaai print is missing. \ni need to print printf statements in my C code. if any idea? </p>\n"}, {"tags": ["c", "xml", "http", "parsing", "arduino"], "answers": [{"comments": [{"owner": {"reputation": 6638, "user_id": 412036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Y70j1.jpg?s=128&g=1", "display_name": "Gorgsenegger", "link": "https://stackoverflow.com/users/412036/gorgsenegger"}, "edited": false, "score": 0, "creation_date": 1614801183, "post_id": 37694499, "comment_id": 117498805, "body": "The first link is no longer available under its original location, so just look here:  <a href=\"https://web.archive.org/web/20160622041818/http://interactive-matter.eu/how-to/ajson-arduino-json-library/\" rel=\"nofollow noreferrer\">web.archive.org/web/20160622041818/http://interactive-matter&zwnj;&#8203;.eu/&hellip;</a>"}], "tags": [], "owner": {"reputation": 24020, "user_id": 264802, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9d9b871f40b338b97bfb44bdafa14a87?s=128&d=identicon&r=PG", "display_name": "fulvio", "link": "https://stackoverflow.com/users/264802/fulvio"}, "is_accepted": false, "score": 1, "last_activity_date": 1614831245, "last_edit_date": 1614831245, "creation_date": 1465366169, "answer_id": 37694499, "question_id": 37694440, "link": "https://stackoverflow.com/questions/37694440/parse-xml-data-in-arduino/37694499#37694499", "title": "Parse XML Data in Arduino", "body": "<p>Have you checked out this library?</p>\n<p><a href=\"https://web.archive.org/web/20160622041818/http://interactive-matter.eu/how-to/ajson-arduino-json-library/\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20160622041818/http://interactive-matter.eu/how-to/ajson-arduino-json-library/</a></p>\n<p>You're better off converting your XML to JSON and giving that a go considering the memory availability on Arduino.</p>\n<p>Otherwise if you really want to work with XML, then there's always these resources:</p>\n<p><a href=\"https://github.com/RobTillaart/Arduino/tree/master/libraries/XMLWriter\" rel=\"nofollow noreferrer\">https://github.com/RobTillaart/Arduino/tree/master/libraries/XMLWriter</a></p>\n<p><a href=\"http://john.crouchley.com/blog/archives/454\" rel=\"nofollow noreferrer\">http://john.crouchley.com/blog/archives/454</a></p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 6695476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6U910.jpg?s=128&g=1", "display_name": "xSx", "link": "https://stackoverflow.com/users/6695476/xsx"}, "is_accepted": false, "score": 1, "last_activity_date": 1475501318, "creation_date": 1475501318, "answer_id": 39832846, "question_id": 37694440, "link": "https://stackoverflow.com/questions/37694440/parse-xml-data-in-arduino/39832846#39832846", "title": "Parse XML Data in Arduino", "body": "<p>if you need only one-two easy(out of param) nodes, you can use my function :)</p>\n\n<pre><code>String xmlTakeParam(String inStr,String needParam)\n{\n  if(inStr.indexOf(\"&lt;\"+needParam+\"&gt;\")&gt;0){\n     int CountChar=needParam.length();\n     int indexStart=inStr.indexOf(\"&lt;\"+needParam+\"&gt;\");\n     int indexStop= inStr.indexOf(\"&lt;/\"+needParam+\"&gt;\");  \n     return inStr.substring(indexStart+CountChar+2, indexStop);\n  }\n  return \"not found\";\n}\n</code></pre>\n\n<p>I tried to find a solution for a long time, leave it here for clarity.\nThe complex xml with repeating nodes already so will not succeed.</p>\n"}], "owner": {"reputation": 683, "user_id": 5610932, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7cd04ba9a7bffbb2ba233a5dbcf7fe51?s=128&d=identicon&r=PG&f=1", "display_name": "hs7624", "link": "https://stackoverflow.com/users/5610932/hs7624"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5722, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1614831245, "creation_date": 1465365943, "question_id": 37694440, "link": "https://stackoverflow.com/questions/37694440/parse-xml-data-in-arduino", "title": "Parse XML Data in Arduino", "body": "<p>I am trying to read XML data in Arduino from  a google spreadsheet published to the web using an HTTP GET request to the following link.</p>\n\n<p><a href=\"https://spreadsheets.google.com/feeds/cells/SpreadsheetID/5/public/basic?&amp;range=D10\" rel=\"nofollow noreferrer\">https://spreadsheets.google.com/feeds/cells/SpreadsheetID/5/public/basic?&amp;range=D10</a>\n<a href=\"https://i.stack.imgur.com/sQhlW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQhlW.jpg\" alt=\"enter image description here\"></a>\nI receive the following reply along with some headers which I can observe on the serial port.</p>\n\n<p>I want to parse the data written in bold format in the above reply. The data can be a real number and can be positive &amp; negative. Please help me to find a way to parse this data.</p>\n"}, {"tags": ["c", "arduino", "embedded"], "comments": [{"owner": {"reputation": 668, "user_id": 5030426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206223842067254/picture?type=large", "display_name": "Mohsin Anees", "link": "https://stackoverflow.com/users/5030426/mohsin-anees"}, "edited": false, "score": 0, "creation_date": 1465364562, "post_id": 37694087, "comment_id": 62863912, "body": "I am using UART_Bridge library from Sandbox Electronics from GitHub for arduino."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465366341, "post_id": 37694087, "comment_id": 62864644, "body": "A fast look to the <a href=\"http://www.nxp.com/documents/data_sheet/SC16IS740_750_760.pdf\" rel=\"nofollow noreferrer\">manual at page 15</a>: <code>IER</code> and <code>IOIntEna</code> enables the interrupt source: did you write them with correct values.  <code>IIR[5:0]</code> is responsible for defining the type of interrupt: did you set it correctly?"}, {"owner": {"reputation": 668, "user_id": 5030426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206223842067254/picture?type=large", "display_name": "Mohsin Anees", "link": "https://stackoverflow.com/users/5030426/mohsin-anees"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465366779, "post_id": 37694087, "comment_id": 62864862, "body": "There are two functions defined in the library source file mentioned above. void SetPinInterrupt(uint8_t io_int_ena) void SetInterruptControl(uint8_t int_ena)  These functions are responsible for writing values to the registers you mentioned. SetPinInterrupt is I think for the I/O pin related interrupts. I used the second function to enable the Rx Tx interrupt by writing 0x04 to the IER register.  The problem is this keeps the IRQ pin constantly low, even when data is not present."}, {"owner": {"reputation": 668, "user_id": 5030426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206223842067254/picture?type=large", "display_name": "Mohsin Anees", "link": "https://stackoverflow.com/users/5030426/mohsin-anees"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465366994, "post_id": 37694087, "comment_id": 62864975, "body": "@LPs Can you please guide me what values should be written to these registers?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465367430, "post_id": 37694087, "comment_id": 62865169, "body": "Looking at the man (pag 29) <code>IER</code> set to <code>4</code> means: <i>enable the receiver line status interrupt</i>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1465367893, "post_id": 37694087, "comment_id": 62865398, "body": "At page 15 you have table 6 that explains values for IIR[5:0]. I don&#39;t know the right one for you..."}, {"owner": {"reputation": 668, "user_id": 5030426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206223842067254/picture?type=large", "display_name": "Mohsin Anees", "link": "https://stackoverflow.com/users/5030426/mohsin-anees"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1465373372, "post_id": 37694087, "comment_id": 62868629, "body": "Thank you very much. 1 value worked for me. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 6736863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b662efd4a1a02c42f8b294a2c2016380?s=128&d=identicon&r=PG&f=1", "display_name": "D Dowling", "link": "https://stackoverflow.com/users/6736863/d-dowling"}, "edited": false, "score": 0, "creation_date": 1596443013, "post_id": 45915670, "comment_id": 111802436, "body": "Even the alibaba clone boards repeat this mistake :-("}], "tags": [], "owner": {"reputation": 31, "user_id": 3982045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b86019a01036a8060c98abe02327a17?s=128&d=identicon&r=PG&f=1", "display_name": "Emi", "link": "https://stackoverflow.com/users/3982045/emi"}, "is_accepted": false, "score": 2, "last_activity_date": 1503911973, "creation_date": 1503911973, "answer_id": 45915670, "question_id": 37694087, "link": "https://stackoverflow.com/questions/37694087/sparkfun-sc16is750-interrupt-pin-irq-not-working/45915670#45915670", "title": "Sparkfun SC16IS750 interrupt pin IRQ not working", "body": "<p>I had a similar issue. Finally I found out that the interrupt pin on the breakout board is not connected to the 2kOhm IRQ pull up. \nI added a white wire and now it works fine. </p>\n"}], "owner": {"reputation": 668, "user_id": 5030426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10206223842067254/picture?type=large", "display_name": "Mohsin Anees", "link": "https://stackoverflow.com/users/5030426/mohsin-anees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503911973, "creation_date": 1465364489, "question_id": 37694087, "link": "https://stackoverflow.com/questions/37694087/sparkfun-sc16is750-interrupt-pin-irq-not-working", "title": "Sparkfun SC16IS750 interrupt pin IRQ not working", "body": "<p>I am facing problems using sc16is750 breakout board. I want to use the interrupt method mentioned in the datasheet. According to which, the IRQ pin should be active low whenever Rx or Tx pins are active, and an Interrupt should be generated.</p>\n\n<p>But the IRQ pin remains high nonetheless. I have set up an external 1k ohm pull-up resistor as mentioned with 3.3v VDD.</p>\n\n<p>My goal is to use vk16e gps module through spi pins on an arduino uno. I have set up the low interrupt on digital pin 2 and it is working fine. If I manually connect this pin to the ground, the gps data appears successfully. But not with the IRQ pin.</p>\n"}, {"tags": ["c", "algorithm", "audio", "trigonometry", "sound-synthesis"], "comments": [{"owner": {"reputation": 12292, "user_id": 1990169, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ohZfn.jpg?s=128&g=1", "display_name": "Abhishek Bansal", "link": "https://stackoverflow.com/users/1990169/abhishek-bansal"}, "edited": false, "score": 1, "creation_date": 1465365895, "post_id": 37693827, "comment_id": 62864446, "body": "Why can&#39;t you first calculate (double) (t)  * d and then subtract enough 2*pi &#39;s to make the result less than 2*pi."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1465370330, "post_id": 37693827, "comment_id": 62866793, "body": "see <a href=\"http://stackoverflow.com/a/28020934/2521214\">Is it possible to make realistic n-body solar system simulation in matter of size and mass?</a> At the bottom of that answer (last edit) is a simple technique you want."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1465375966, "post_id": 37693827, "comment_id": 62870246, "body": "Is the frequency of the sine wave an integer number of Hz? If so you can just reset d_sum to zero every 44100 samples"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1465376713, "post_id": 37693827, "comment_id": 62870767, "body": "Are you sure that <code>accuracy gets reduced because big numbers provided to &quot;sin&quot; function</code>? My example doesn&#39;t reveal that (at least for x87 instructions)"}, {"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 0, "creation_date": 1465444489, "post_id": 37693827, "comment_id": 62906155, "body": "The right audience for this kind of question is probably on  <a href=\"http://dsp.stackexchange.com\">dsp.stackexchange.com</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1465860312, "post_id": 37693827, "comment_id": 63066977, "body": "Post has a problem from the beginning.  With typical <code>double</code>, <code>300000006.7846112</code> is not exactly representable and instead has the value <code>300000006.7846112251...</code>.  This difference alone means that the expected sine value should be <code>0.0463094 459...</code> and not <code>0.0463094 209...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 2, "last_activity_date": 1465368514, "last_edit_date": 1465368514, "creation_date": 1465366610, "answer_id": 37694620, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time/37694620#37694620", "title": "How to compute sine wave with accuracy over the time", "body": "<p>You can try an approach that is used is some implementations of fast Fourier transformation. Values of trigonometric function are calculated based on previous values and delta.</p>\n\n<pre><code>Sin(A + d) = Sin(A) * Cos(d) + Cos(A) * Sin(d)\n</code></pre>\n\n<p>Here we have to store and update cosine value too and store constant (for given delta) factors Cos(d) and Sin(d).</p>\n\n<p>Now about precision: cosine(d) for small d is very close to 1, so there is risk of precision loss  (there are only few significant digits in numbers like 0.99999987). To overcome this issue, we can store constant factors as </p>\n\n<pre><code>dc = Cos(d) - 1 =  - 2 * Sin(d/2)^2\nds = Sin(d) \n</code></pre>\n\n<p>using another formulas to update current value<br>\n(here <code>sa = Sin(A)</code> for current value, <code>ca = Cos(A)</code> for current value)</p>\n\n<pre><code>ts = sa //remember last values\ntc = ca\nsa = sa * dc + ca * ds\nca = ca * dc - ts * ds\nsa = sa + ts\nca = ca + tc\n</code></pre>\n\n<p>P.S. Some FFT implementations periodically (every K steps) renew <code>sa</code> and <code>ca</code> values through trig. functions to avoid error accumulation.</p>\n\n<p>Example result. Calculations in doubles. </p>\n\n<pre><code>d=0.000125\n800000000 iterations\nfinish angle 100000 radians\n\n                             cos               sin\ndescribed method       -0.99936080743598  0.03574879796994 \nCos,Sin(100000)         -0.99936080743821  0.03574879797202\nwindows Calc           -0.9993608074382124518911354141448 \n                            0.03574879797201650931647050069581           \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "edited": false, "score": 0, "creation_date": 1465378217, "post_id": 37696511, "comment_id": 62871731, "body": "Actually I thought of a much easier way. Since you&#39;re not supposed to drastically edit answers I&#39;ll post that as another answer."}], "tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 1, "last_activity_date": 1465372606, "creation_date": 1465372606, "answer_id": 37696511, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time/37696511#37696511", "title": "How to compute sine wave with accuracy over the time", "body": "<p><strong><em>sin(x) = sin(x + 2N\u2219\u03c0)</em></strong>, so the problem can be boiled down to accurately finding a small number which is equal to a large number <strong><em>x</em></strong> modulo 2\u03c0.</p>\n\n<p>For example, \u20131.61059759 \u2245 256 <em>mod</em> 2\u03c0, and you can calculate <code>sin(-1.61059759)</code> with more precision than <code>sin(256)</code></p>\n\n<p>So let's choose some integer number to work with, 256. First find small numbers which are equal to powers of 256, modulo 2\u03c0:</p>\n\n<pre><code>// to be calculated once for a given frequency\n// approximate hard-coded numbers for d = 1 below:\ndouble modB = -1.61059759;  // = 256  mod (2\u03c0 / d)\ndouble modC =  2.37724612;  // = 256\u00b2 mod (2\u03c0 / d)\ndouble modD = -0.89396887;  // = 256\u00b3 mod (2\u03c0 / d)\n</code></pre>\n\n<p>and then split your index as a number in base 256:</p>\n\n<pre><code>// split into a base 256 representation\nint a = i         &amp; 0xff;\nint b = (i &gt;&gt; 8)  &amp; 0xff;\nint c = (i &gt;&gt; 16) &amp; 0xff;\nint d = (i &gt;&gt; 24) &amp; 0xff;\n</code></pre>\n\n<p>You can now find a much smaller number <code>x</code> which is equal to <code>i</code> modulo 2\u03c0/d</p>\n\n<pre><code>// use our smaller constants instead of the powers of 256\ndouble x = a + modB * b + modC * c + modD * d;\ndouble the_answer = sin(d * x);\n</code></pre>\n\n<p>For different values of <strong><em>d</em></strong> you'll have to calculate different values <code>modB</code>, <code>modC</code> and <code>modD</code>, which are equal to those powers of 256, but modulo (2\u03c0 / <em>d</em>). You could use a high precision library for these couple of calculations.</p>\n"}, {"tags": [], "owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 1, "last_activity_date": 1465380354, "creation_date": 1465380354, "answer_id": 37699423, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time/37699423#37699423", "title": "How to compute sine wave with accuracy over the time", "body": "<p>Scale up the period to 2^64, and do the multiplication using integer arithmetic:</p>\n\n<pre><code>// constants:\ndouble uint64Max = pow(2.0, 64.0);\ndouble sinFactor = 2 * M_PI / (uint64Max);\n\n// scale the period of the waveform up to 2^64\nuint64_t multiplier = (uint64_t) floor(0.5 + uint64Max * d / (2.0 * M_PI));\n\n// multiplication with index (implicitly modulo 2^64)\nuint64_t x = i * multiplier;\n\n// scale 2^64 down to 2\u03c0\ndouble value = sin((double)x * sinFactor);\n</code></pre>\n\n<p>As long as your period is not billions of samples, the precision of <code>multiplier</code> will be good enough.</p>\n"}, {"tags": [], "owner": {"reputation": 67889, "user_id": 341750, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/JgAmt.png?s=128&g=1", "display_name": "hotpaw2", "link": "https://stackoverflow.com/users/341750/hotpaw2"}, "is_accepted": false, "score": 0, "last_activity_date": 1465490715, "last_edit_date": 1465490715, "creation_date": 1465431467, "answer_id": 37714994, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time/37714994#37714994", "title": "How to compute sine wave with accuracy over the time", "body": "<p>The following code keeps the input to the sin() function within a small range, while somewhat reducing the number of small additions or subtractions due to a potentially very tiny phase increment.</p>\n\n<pre><code>double next() {\n    t0 += 1.0;\n    d_sum = t0 * d;\n    if ( d_sum &gt; 2.0 * M_PI ) {\n        t0 -= (( 2.0 * M_PI ) / d );\n    }\n    return (sin(d_sum));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1465847631, "last_edit_date": 1465847631, "creation_date": 1465844087, "answer_id": 37797159, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time/37797159#37797159", "title": "How to compute sine wave with accuracy over the time", "body": "<p>For hyper accuracy, OP has 2 problems:</p>\n\n<ol>\n<li><p>multiplying <code>d</code> by <code>n</code> and maintaining more precision than <code>double</code>.  That is answered in the first part below.</p></li>\n<li><p>Performing a <code>mod</code> of the period.  The simple solution is to use degrees and then <code>mod 360</code>, easy enough to do exactly.  To do <code>2*\u03c0</code> of large angles is tricky as it needs a value of <code>2*\u03c0</code> with about 27 more bits of accuracy than <code>(double) 2.0 * M_PI</code></p></li>\n</ol>\n\n<hr>\n\n<p><strong>Use 2 <code>double</code>s to represent <code>d</code>.</strong></p>\n\n<p>Let us assume 32-bit <code>int</code> and <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow\">binary64</a> <code>double</code>.  So <code>double</code> has 53-bits of accuracy.</p>\n\n<p><code>0 &lt;= n &lt;= 158,760,000</code> which is about 2<sup>27.2</sup>.  Since <code>double</code> can handle 53-bit unsigned integers continuously and exactly, 53-28 --> 25, any <code>double</code> with only 25 significant bits can be multiplied by <code>n</code> and still be exact.</p>\n\n<p>Segment <code>d</code> into 2 <code>double</code>s <code>dmsb,dlsb</code>, the 25-most significant digits and the 28- least.</p>\n\n<pre><code>int exp;\ndouble dmsb = frexp(d, &amp;exp);  // exact result\ndmsb = floor(dmsb * POW2_25);  // exact result\ndmsb /= POW2_25;               // exact result\ndmsb *= pow(2, exp);           // exact result\ndouble dlsb = d - dmsb;        // exact result\n</code></pre>\n\n<p>Then each multiplication (or successive addition) of <code>dmsb*n</code> will be exact. (this is the important part.)  <code>dlsb*n</code> will only error in its least few bits.</p>\n\n<pre><code>double next()\n{\n    d_sum_msb += dmsb;  // exact\n    d_sum_lsb += dlsb;\n    double angle = fmod(d_sum_msb, M_PI*2);  // exact\n    angle += fmod(d_sum_lsb, M_PI*2);\n    return sin(angle);\n}\n</code></pre>\n\n<p>Note: <code>fmod(x,y)</code> results are expected to be exact give exact <code>x,y</code>.</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define AS_n 158760000\ndouble AS_d = 300000006.7846112 / AS_n;\ndouble AS_d_sum_msb = 0.0;\ndouble AS_d_sum_lsb = 0.0;\ndouble AS_dmsb = 0.0;\ndouble AS_dlsb = 0.0;\n\ndouble next() {\n  AS_d_sum_msb += AS_dmsb;  // exact\n  AS_d_sum_lsb += AS_dlsb;\n  double angle = fmod(AS_d_sum_msb, M_PI * 2);  // exact\n  angle += fmod(AS_d_sum_lsb, M_PI * 2);\n  return sin(angle);\n}\n\n#define POW2_25 (1U &lt;&lt; 25)\n\nint main(void) {\n  int exp;\n  AS_dmsb = frexp(AS_d, &amp;exp);         // exact result\n  AS_dmsb = floor(AS_dmsb * POW2_25);  // exact result\n  AS_dmsb /= POW2_25;                  // exact result\n  AS_dmsb *= pow(2, exp);              // exact result\n  AS_dlsb = AS_d - AS_dmsb;            // exact result\n\n  double y;\n  for (long i = 0; i &lt; AS_n; i++)\n    y = next();\n  printf(\"%.20f\\n\", y);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0.04630942695385031893\n</code></pre>\n\n<hr>\n\n<p><strong>Use degrees</strong></p>\n\n<p>Recommend using degrees as <code>360</code> degrees is the <em>exact</em> period and <code>M_PI*2</code> radians is an approximation.  C cannot represent \u03c0 <em>exactly</em>.</p>\n\n<p>If OP still wants to use radians, for further insight on performing the mod of \u03c0, see <a href=\"http://www.csee.umbc.edu/~phatak/645/supl/Ng-ArgReduction.pdf\" rel=\"nofollow\"><em>Good to the Last Bit</em></a></p>\n"}], "owner": {"reputation": 199, "user_id": 4314069, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47b6638bb41afd6f697c7dba91980c51?s=128&d=identicon&r=PG&f=1", "display_name": "Abraham Sanchez", "link": "https://stackoverflow.com/users/4314069/abraham-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 1, "answer_count": 5, "score": 7, "last_activity_date": 1465847631, "creation_date": 1465363331, "last_edit_date": 1465403379, "question_id": 37693827, "link": "https://stackoverflow.com/questions/37693827/how-to-compute-sine-wave-with-accuracy-over-the-time", "title": "How to compute sine wave with accuracy over the time", "body": "<p>Use case is to generate a sine wave for digital synthesis, so, we need to compute all values of sin(d t) where:</p>\n\n<p><strong>t</strong> is an integer number, representing the sample number. This is variable. Range is from 0 to 158,760,000 for one hour sound of CD quality.</p>\n\n<p><strong>d</strong> is double, representing the delta of the angle. This is constant. And the range is: greater than 0 , less than pi.</p>\n\n<p>Goal is to achieve high accuracy with traditional <strong>int</strong> and <strong>double</strong> data types. Performance is not important.</p>\n\n<p>Naive implementation is:</p>\n\n<pre><code>double next()\n{\n    t++;\n    return sin( ((double) t) * (d) );\n}\n</code></pre>\n\n<p>But, the problem is when <strong>t</strong> increases, accuracy gets reduced because big numbers provided to \"sin\" function.</p>\n\n<p>An improved version is the following:</p>\n\n<pre><code>double next()\n{\n    d_sum += d;\n    if (d_sum &gt;= (M_PI*2)) d_sum -= (M_PI*2);\n\n    return sin(d_sum);\n}\n</code></pre>\n\n<p>Here, I make sure to provide numbers in range from 0 to 2*pi to the \"sin\" function.</p>\n\n<p>But, now, the problem is when <strong>d</strong> is small, there are many small additions which decreases the accuracy every time.</p>\n\n<p>The question here is how to improve the accuracy.</p>\n\n<hr>\n\n<p><strong>Appendix 1</strong></p>\n\n<p>\"accuracy gets reduced because big numbers provided to \"sin\" function\":</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n#define TEST      (300000006.7846112)\n#define TEST_MOD  (0.0463259891528704262050786960234519968548937998410258872449766)\n#define SIN_TEST  (0.0463094209176730795999323058165987662490610492247070175523420)\n\nint main()\n{\n    double a = sin(TEST);\n    double b = sin(TEST_MOD);\n\n    printf(\"a=%0.20f \\n\" , a);\n    printf(\"diff=%0.20f \\n\" , a - SIN_TEST);\n    printf(\"b=%0.20f \\n\" , b);\n    printf(\"diff=%0.20f \\n\" , b - SIN_TEST);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a=0.04630944601888796475\ndiff=0.00000002510121488442\nb=0.04630942091767308033\ndiff=0.00000000000000000000\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1465363687, "post_id": 37693815, "comment_id": 62863592, "body": "You have alot of basic errors. Perhaps time to go back to review your text book before proceeding further. Some highlights: <code>strcpy(p , test);</code> What are you trying to do there? Why are you trying to copy a function into an <code>int</code> array? <code>return o</code>: Why are you returning a char array when the return type is declared to be an int?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1465363806, "post_id": 37693815, "comment_id": 62863640, "body": "When you attempt this again would strongly recommend you turn up warning levels on your compiler, pay attention to what the warnings are and fix the code so that there are no warnings before posting your question."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 0, "last_activity_date": 1465368462, "last_edit_date": 1495542254, "creation_date": 1465367609, "answer_id": 37694880, "question_id": 37693815, "link": "https://stackoverflow.com/questions/37693815/element-values-show-incorrect-when-print-out-from-an-array/37694880#37694880", "title": "Element values show incorrect when print out from an array", "body": "<p>Your code contains a lot of errors. I am going to point them out and explain to you how to fix it.</p>\n\n<ul>\n<li><p>First of all, you should definitely forget the statement :</p>\n\n<pre><code>strcpy(p , test);\n</code></pre>\n\n<p>as by this you try to copy a <em>function</em> to an <em>array</em>! If you think that this statement calls <code>test</code> function and passes <code>p</code> as an argument to this, this is not true.</p></li>\n<li><p>If you want another function, other than <code>main</code>, to fill your array, the best way would be to dynamically allocate a pointer to <code>int</code> and pass it <strong>by reference</strong> to the function. You can read more about passing by reference or by value <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">here</a>.</p>\n\n<p>Let's see how you can do this. First of all, define <code>N</code> as a constant value outside your program :</p>\n\n<pre><code>#define N 20\n</code></pre>\n\n<p>Then, your <code>main</code> function should be modified like this :</p>\n\n<pre><code>int main ()\n{\n    int *p;\n    int i;\n\n    //Dynamically allocate a pointer to ints\n    p = malloc(N*sizeof(int));\n    if (p == NULL)\n        printf (\"Error in allocating memory\\n\");\n\n    //Now call your function  \n    p = test(&amp;p);              //pass the pointer by reference\n    for (i = 0; i &lt; N; i++)\n        printf (\"%d, %d\\n\", i , p[i]);\n}\n</code></pre>\n\n<p>and finally your <code>test</code> function should be modified accordingly like this :</p>\n\n<pre><code>int* test (int** p)\n{\n        for (i = 0; i &lt; N; i++)\n            *p[i] = i;\n        return *p;\n}\n</code></pre>\n\n<p>So the prototype of your <code>test</code> function should change from :</p>\n\n<pre><code>int test();\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>int* test(int**); \n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1465369770, "post_id": 37695370, "comment_id": 62866492, "body": "Your advise is better fit for a comment on the post. What  you&#39;ve suggested isn&#39;t an answer."}], "tags": [], "owner": {"reputation": 3, "user_id": 6438636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11a7092e3a4db98b8f66b3aba9e1024?s=128&d=identicon&r=PG&f=1", "display_name": "devwaseem", "link": "https://stackoverflow.com/users/6438636/devwaseem"}, "is_accepted": false, "score": 0, "last_activity_date": 1465369230, "creation_date": 1465369230, "answer_id": 37695370, "question_id": 37693815, "link": "https://stackoverflow.com/questions/37693815/element-values-show-incorrect-when-print-out-from-an-array/37695370#37695370", "title": "Element values show incorrect when print out from an array", "body": "<p>What you are coding is not logical and even impossible to work. Your program has lots of errors strcpy() is used to copy a string to a variable ,but you are using char array and returning int??. And you want to return an array but you are returning a char(it will give error)..dont panic or upset..just gothrough your books or learning sources..make flow charts and psuedocodes to get the logic work..hope this helps</p>\n"}], "owner": {"reputation": 21, "user_id": 6438393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1fe5e7fba13454b6a477a808032b936?s=128&d=identicon&r=PG&f=1", "display_name": "tpham1002002", "link": "https://stackoverflow.com/users/6438393/tpham1002002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1465377375, "creation_date": 1465363269, "last_edit_date": 1465363513, "question_id": 37693815, "link": "https://stackoverflow.com/questions/37693815/element-values-show-incorrect-when-print-out-from-an-array", "title": "Element values show incorrect when print out from an array", "body": "<p>I am just learning C and have my program print out incorrect values but I don't know how to fix it therefore I'd like to have your help.\nHere is the codes . The test function stores integer numbers (from 0 to 20) in an array and return it. That array is copied to a new array (p[20]) in the main function and I try to print every element of that array out using for loop however the value is not correct, for example i = 0 then p[0] should be 0 but it shows -443987883 ,.... </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint test();\n\nint main ()\n{\n    int p[20];\n    strcpy(p , test);\n    int i;\n    int N = 20;\n\n    for (i=0; i &lt; N; i++) {\n        printf (\"%i,%i\\n\", i , p[i]);\n    } \n}\n\nint test (int i , char o[])\n{\n    int N = 20;\n    for (i = 0; i &lt; N; i++) {\n        o[i] = i;\n    }\n    return o;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel"], "answers": [{"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1465364128, "creation_date": 1465364128, "answer_id": 37694003, "question_id": 37693504, "link": "https://stackoverflow.com/questions/37693504/replacing-a-kernel-function-by-using-loadable-kernel-modules/37694003#37694003", "title": "Replacing a kernel function by using loadable kernel modules", "body": "<p>At a guess, I'd say it's probably because you're running a kernel that write-protects its text pages. You will need to set those pages as writable before modifying them.</p>\n\n<p><strong>HOWEVER</strong>, keep in mind that that answer you're looking at is six years old. In the time since it was posted, a number of much better approaches to live kernel patching have emerged, including <a href=\"https://github.com/dynup/kpatch\" rel=\"nofollow\">kpatch</a>, <a href=\"https://www.suse.com/products/live-patching\" rel=\"nofollow\">SUSE Live Patching</a>, and <a href=\"https://cloudlinux.com/all-products/product-overview/kernelcare\" rel=\"nofollow\">KernelCare</a>. (Underneath, there's also <a href=\"https://www.kernel.org/doc/Documentation/trace/ftrace.txt\" rel=\"nofollow\">ftrace</a>, which can be used to dynamically instrument functions.) You should take a close look at these before trying to build your own patching solution from scratch.</p>\n"}], "owner": {"reputation": 439, "user_id": 6438341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1181377385240542/picture?type=large", "display_name": "Qi Zhang", "link": "https://stackoverflow.com/users/6438341/qi-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 37694003, "answer_count": 1, "score": -2, "last_activity_date": 1465364128, "creation_date": 1465361473, "last_edit_date": 1495542158, "question_id": 37693504, "link": "https://stackoverflow.com/questions/37693504/replacing-a-kernel-function-by-using-loadable-kernel-modules", "title": "Replacing a kernel function by using loadable kernel modules", "body": "<p>I am trying to replace a kernel function with a kernel module, and come across the following solusion proposed by kmm (<a href=\"https://stackoverflow.com/a/1242232/6438341\">https://stackoverflow.com/a/1242232/6438341</a>)</p>\n\n<p>However, it seems that the kernel does not allow copying anything to the address of 'real_printk'. The kernel complains: \"BUG: unable to handle kernel paging request at ffffffff81774863\", in which ffffffff81774863 is the address of printk that was found in System.map or /proc/kallsyms. </p>\n\n<p>Anyone knows how to fix it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465360510, "post_id": 37693297, "comment_id": 62862590, "body": "First visible bug, ignoring the return value of <code>scanf()</code>. Also, this code is completely unreadable. If you don&#39;t care about the formatting of your code you don&#39;t respect other programmers. Second bug, you are learning a OS specific thing that no one uses anymore, and you are not even using it in the code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465360764, "post_id": 37693297, "comment_id": 62862666, "body": "You also defined functions inside other functions, nested functions are not legal <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1465360854, "post_id": 37693297, "comment_id": 62862690, "body": "C and C++ are different languages. Pick one."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 1, "creation_date": 1465360883, "post_id": 37693297, "comment_id": 62862703, "body": "Undefined behaviour in <code>scanf(&quot;%d&quot;, tcs);</code>, should use <code>scanf(&quot;%d&quot;, &amp;tcs);</code> instead."}, {"owner": {"reputation": 13, "user_id": 5164862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44e18e4aa7030256876366a4520bae?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Goyal", "link": "https://stackoverflow.com/users/5164862/shubham-goyal"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465361010, "post_id": 37693297, "comment_id": 62862738, "body": "@iharob Such a rookie mistake!! Anyway thanks."}], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "reply_to_user": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1465361113, "post_id": 37693403, "comment_id": 62862766, "body": "Thanks, @MahmoudAl-Qudsi, but I was more interested in finding out the reason of the downvote - any problem with the code or my approach, etc.?  I could have used a different logic, but then I wanted to make minimum changes to the OP&#39;s code."}, {"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "reply_to_user": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1465361721, "post_id": 37693403, "comment_id": 62862925, "body": "Here comes the 2nd downvote.. again without mentioning any reason. :)"}], "tags": [], "owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "is_accepted": true, "score": 0, "last_activity_date": 1465362170, "last_edit_date": 1465362170, "creation_date": 1465360763, "answer_id": 37693403, "question_id": 37693297, "link": "https://stackoverflow.com/questions/37693297/file-name-exe-has-stopped-working/37693403#37693403", "title": "&quot;file_name.exe has stopped working&quot;", "body": "<p>Assuming you are using C++, there are couple of things that you need to change in your code:</p>\n\n<ol>\n<li><code>scanf(\"%d\", tcs);</code> should rather be <code>scanf(\"%d\", &amp;tcs);</code>  This mistake is the reason your program crashes, as <code>tcs</code> doesn't have the correct intended value.</li>\n<li>The function <code>int calc_fact(n)</code> should be outside the main() function with the prototype <code>int calc_fact(int n)</code>.  Due to this mistake, your code won't compile in the first place (are you sure when you say that your code complies when the arrays are declared statically)?</li>\n</ol>\n\n<p>Please see the modified code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n//#include &lt;conio.h&gt;                    //You actually don't need it.\n\nint calc_fact(int n)\n{\n    if(n==1)\n        return 1;\n    else\n        return n*calc_fact(n-1);\n}\n\nint main()\n{\n    int n, i, count, k, tcs, j, l, m;\n    scanf(\"%d\", &amp;tcs);\n    int fact[tcs];\n    int arr[tcs];\n    for(j=0; j&lt;tcs; j++)\n    {\n        scanf(\"%d\", &amp;arr[j]);\n    }\n\n    j=0;\n    m=0;\n    while(m&lt;tcs &amp;&amp; j&lt;tcs)\n    {\n        fact[m]=calc_fact(arr[j]);\n        m++;\n        j++;\n    }\n\n\n    m=0;\n    for(l=0; l&lt;tcs; l++)\n    {\n        i=1;\n        count=0;\n        while(i&lt;=fact[m])\n        {\n            if((fact[m])%i==0)\n            count++;\n            i++;\n        }\n    m++;\n    k=(count)%((10^9)+7);\n    printf(\"%d\\n\", k);            //and not printf(\"\\n%d\", k);\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Working code <a href=\"http://ideone.com/hxCzc3\" rel=\"nofollow\"><strong>here</strong></a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5164862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba44e18e4aa7030256876366a4520bae?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Goyal", "link": "https://stackoverflow.com/users/5164862/shubham-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 37693403, "answer_count": 1, "score": -5, "last_activity_date": 1465362170, "creation_date": 1465360227, "last_edit_date": 1465361868, "question_id": 37693297, "link": "https://stackoverflow.com/questions/37693297/file-name-exe-has-stopped-working", "title": "&quot;file_name.exe has stopped working&quot;", "body": "<p>This problem is from spoj. Please see <a href=\"http://www.spoj.com/problems/DIVFACT/\" rel=\"nofollow\">this</a> for question.\nMy logic is simple as you will see. If I change array sizes in dynamic form to static ones, the code executes and asks for integers and keeps executing like indefinitely whilst it should run for the number of test cases. However if I have kept dynamic, I keep getting this persistent error: file_name.exe has stopped working. </p>\n\n<p>Also plz comment on my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    int n, i, count, k, tcs, j, l, m;\n    scanf(\"%d\", tcs);\n    int fact[tcs];\n    int arr[tcs];\n    for (j = 0; j &lt; tcs; j++) {\n        scanf(\"%d\", &amp;arr[j]);\n    }\n\n    int calc_fact(n) {\n        if (n == 1)\n            return 1;\n        else\n            return n * calc_fact(n - 1);\n    }\n\n    j = 0;\n    m = 0;\n    while (m &lt; tcs &amp;&amp; j &lt; tcs) {\n        fact[m] = calc_fact(arr[j]);\n        m++;\n        j++;\n    }\n\n    m = 0;\n    for (l = 0; l &lt; tcs; l++) {\n        i = 1;\n        count = 0;\n        while (i &lt;= fact[m]) {\n            if ((fact[m]) % i == 0)\n                count++;\n            i++;\n        }\n        m++;\n        k = (count) % ((10 ^ 9) + 7);\n        printf(\"\\n%d\", k);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1465346672, "post_id": 37691588, "comment_id": 62859474, "body": "&quot;Nothing is working&quot; Can you explain what it is doing, or not doing? Does it compile? Does it run? Does it fail silently, deadlock, run as expected but not perform one or more expected changes, what?"}, {"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1465346852, "post_id": 37691588, "comment_id": 62859508, "body": "It compiles perfectly fine. But when I try running it, the output text file is the same as the input text file. The spaces are not &quot;squeezed&quot; together, nor the tab is replaced by a space."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465347011, "post_id": 37691588, "comment_id": 62859533, "body": "What files? Your program does not read/write any files (directly). Unless you are doing redirection on the command line. In which case you need to describe that."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1465347021, "post_id": 37691588, "comment_id": 62859537, "body": "@canucksfan96: Can&#39;t reproduce. When I compile and run your program, it does indeed compact the spaces. Aren&#39;t you just looking at terminal echo or something like that?"}, {"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465347098, "post_id": 37691588, "comment_id": 62859561, "body": "@kaylum - sorry, yeah, I&#39;m using I/O redirection."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465347165, "post_id": 37691588, "comment_id": 62859578, "body": "Please show how you are redirecting and also state clearly how you have determined that the output is wrong (did you open it and visually inspect? Or use a diff tool? or...)."}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1465347194, "post_id": 37691588, "comment_id": 62859588, "body": "The tabs are buggy, though, in case it&#39;s only that which confuses you."}, {"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465347703, "post_id": 37691588, "comment_id": 62859689, "body": "@kaylum - for example in my input text file I have &quot;Hello[space][space][space]World[newline][newline][newline][&zwnj;&#8203;tab]This[space][spac&zwnj;&#8203;e]is[newline][newlin&zwnj;&#8203;e]canucksfan96&quot; and in the output file, it should be like &quot;Hello[space]World[newline][space]This[space]is[newline]canu&zwnj;&#8203;cksfan96&quot;"}, {"owner": {"reputation": 429, "user_id": 6229026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o3HjY.jpg?s=128&g=1", "display_name": "Abhishek Panjabi", "link": "https://stackoverflow.com/users/6229026/abhishek-panjabi"}, "edited": false, "score": 0, "creation_date": 1465348632, "post_id": 37691588, "comment_id": 62859878, "body": "I think it is happening bcoz your if conditions are not matching. And your last statement in loop is printing all ur data as it is. Try printing something in any of the if&#39;s statements to know that conclusion is being done correctly. You can also use debugging to know the flow of ur actual working program."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1465349677, "post_id": 37691588, "comment_id": 62860093, "body": "You don&#39;t need to count spaces and newlines. You just need a variable that turns them on to print first occurrence and turn them off to stop printing succeeding occurrence. You don&#39;t need a separate <code>if</code> block for tabs. in the block where you check for space, you can also check for tab. I managed to run it successfully with these modifications"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1465364987, "post_id": 37691588, "comment_id": 62864070, "body": "@alvits that works for spaces, but not for <code>\\n</code>, because multiple blank lines should be surpressed. So <code>\\n\\n</code> would be correct, but not <code>\\n\\n\\n</code>. A counter is the easiest way to accomplish that."}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1465365247, "post_id": 37691588, "comment_id": 62864170, "body": "@canucksfan96 Did you step through with a debugger to see what&#39;s happening? And please add the call from shell as suggested before."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465358765, "post_id": 37692594, "comment_id": 62862082, "body": "I tried running your code. But in the output text file, the spaces and tabs didn&#39;t &quot;squeeze&quot; into one space, neither did multiple newlines &quot;squeeze&quot; into one newline."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465359399, "post_id": 37692594, "comment_id": 62862285, "body": "Oh, right now each <code>tab</code> is replaced with <code>8-spaces</code>. (that&#39;s the reason for <code>#define TABSPC 8</code> that lets you set the number of <code>spaces</code> to replace each <code>tab</code> with) If you want any series of <code>tabs &amp; spaces</code> squeezed into <code>one space</code>, that&#39;s a simple mod. Is that what you need?"}, {"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465360273, "post_id": 37692594, "comment_id": 62862512, "body": "Yes, that&#39;s what I need."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465361580, "post_id": 37692594, "comment_id": 62862886, "body": "Additionally, If you want to remove all blank lines (I collapsed multiple blank lines to <code>1</code>), all you need is <code>newlinecount++ &lt; 1</code> above (or tailor the <code>if</code> block to mimic the block for <code>space</code>."}, {"owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465362860, "post_id": 37692594, "comment_id": 62863291, "body": "Hi, I saw your edited post above. I tested it and now it works where it replaces tabs and multiple spaces with a single space! Only problem is, it doesn&#39;t work for multiple newlines, where it should replace with a single newline. Do you know the problem?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 0, "creation_date": 1465362961, "post_id": 37692594, "comment_id": 62863334, "body": "Uh, if there is more than one-<code>&#39;\\n&#39;</code> in a row, it replaces it with a <i>single</i> <code>&#39;\\n&#39;</code>. Oh, <i>Are you on Winoze?</i> Hold on. You have <code>carriage-returns</code> to worry about. Updated to handle DOS files."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "edited": false, "score": 1, "creation_date": 1465365653, "post_id": 37692594, "comment_id": 62864346, "body": "Glad to help, make sure you understand why I coded it the way I did. There is no magic about character processing in C. It is a straight-forward sequence of taking input <i>character-by-character</i> and then conditionally acting on each character. It takes a bit to get familiar with, but it is worth taking the time to learn."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1465363183, "last_edit_date": 1465363183, "creation_date": 1465355455, "answer_id": 37692594, "question_id": 37691588, "link": "https://stackoverflow.com/questions/37691588/c-replace-tabs-with-spaces-multiple-spaces-with-1-space-multiple-newlines-wi/37692594#37692594", "title": "C - Replace tabs with spaces, multiple spaces with 1 space, multiple newlines with 1 newline", "body": "<p><strong>Remove All Blank Lines &amp; Compressing All Tab &amp; Spaces to 1 Space</strong></p>\n\n<p>The biggest problem you have is if you encounter a <code>' '</code> or a <code>'\\n'</code> where you need to replace multiple occurrences of either with a smaller number, you need to keep reading (at that point within your outer <code>while</code> loop) until you find a character that is not a <code>' '</code> or a <code>'\\n'</code>. That simplifies keeping track of your counts. (and eliminates the need for <code>spacecount</code> and <code>newlinecount</code>)</p>\n\n<p>Since you are testing against multiple characters, when you find the first character that does not match your current search character, simply put it back in <code>stdin</code> and move to the next iteration of your outer while loop.</p>\n\n<p>When compressing all <code>tabs</code> and <code>spaces</code> to a single <code>space</code>, you need to test for either a <code>tab</code> or <code>space</code> in a single <code>if</code> statement.</p>\n\n<p>Putting that together, you can do:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int c;\n\n    while ((c = getchar ()) != EOF)\n    {\n        if (c == '\\r') continue;\n        if (c == '\\n') {        /* handle newlines/carriage-returns */\n            putchar (c);\n            while ((c = getchar ()) == '\\n' || c == '\\r') {}\n            if (c != EOF) ungetc (c, stdin); else break;\n            continue;\n        }\n        if (c == ' ' || c == '\\t') {  /* spaces &amp; tabs */\n            putchar (' ');\n            while ((c = getchar ()) == ' ' || c == '\\t') {}\n            if (c != EOF) ungetc (c, stdin); else break;\n            continue;\n        }\n        putchar (c);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> the code was updated to handle DOS/windoze <code>\\r\\n</code> line endings as well as Linux <code>'\\n'</code>)</p>\n\n<p><strong>Example Input</strong></p>\n\n<pre><code>$ cat dat/gcfmt.txt\n\nN &lt;tab&gt; description\n21      grapes\n18      pickles\n\n\n\nN &lt;spaces&gt; description\n23         apples\n51         banannas\n\n\n\n&lt;spaces&gt;N&lt;tab&gt;  description\n        8       cherries\n        4       mellons\n        6       strawberries\n\n\nthat's  all     folks   &lt;tab separated&gt;\n\nthat's  all     folks   &lt;space separated&gt;\n</code></pre>\n\n<p><strong>Exampe Use/Output</strong></p>\n\n<p>Using the same input file, the output is now:</p>\n\n<pre><code>$ ./bin/gcfmt1 &lt;dat/gcfmt.txt\nN &lt;tab&gt; description\n21 grapes\n18 pickles\nN &lt;spaces&gt; description\n23 apples\n51 banannas\n&lt;spaces&gt;N&lt;tab&gt; description\n 8 cherries\n 4 mellons\n 6 strawberries\nthat's all folks &lt;tab separated&gt;\nthat's all folks &lt;space separated&gt;\n</code></pre>\n\n<p>Let me know if that is what you intended.</p>\n"}], "owner": {"reputation": 49, "user_id": 4907558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fb7edca8dff906fb0f7ca0947dd7e?s=128&d=identicon&r=PG&f=1", "display_name": "canucksfan96", "link": "https://stackoverflow.com/users/4907558/canucksfan96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3566, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1465363183, "creation_date": 1465346336, "last_edit_date": 1465356721, "question_id": 37691588, "link": "https://stackoverflow.com/questions/37691588/c-replace-tabs-with-spaces-multiple-spaces-with-1-space-multiple-newlines-wi", "title": "C - Replace tabs with spaces, multiple spaces with 1 space, multiple newlines with 1 newline", "body": "<p>I'm asked to write a simple program to \"format\" text based on the well-known loop:</p>\n\n<pre><code>int c;\nwhile ((c = getchar()) != EOF)\n   putchar(c);\n</code></pre>\n\n<p>The program reads from stdin &amp; writes to stdout &amp; should be tested using I/O redirection.</p>\n\n<ul>\n<li><p>Each tab in the input is replaced by a space &amp; then two or more consecutive spaces are replaced by a single space in the output.</p></li>\n<li><p>Two or more consecutive blank lines in the input are replaced by one blank line in the output.</p></li>\n</ul>\n\n<p>Note: newline character is the last character of a line rather than the first character of the following line.</p>\n\n<p>Here is what I have so far, but the multiples spaces, newlines and tabs I have in my input text file aren't getting replaced in the output text file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void){\n\nint c;\nint spacecount = 0;\nint newlinecount = 0;\n\nwhile ((c = getchar()) != EOF){\n\n    if (c == '\\n'){\n        if (++newlinecount &lt; 3){\n            putchar(c);\n        }\n        continue;\n    }\n\n    newlinecount = 0;\n\n    if (c == ' '){\n        if (++spacecount &lt; 2){\n            putchar(c);\n        }\n        continue;   \n    }\n\n    spacecount = 0;\n\n    if (c == '\\t'){\n        c = ' ';\n    }\n    putchar(c);\n}\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23288, "user_id": 313137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb55653d537b073681395afbafad706b?s=128&d=identicon&r=PG", "display_name": "Romain Hippeau", "link": "https://stackoverflow.com/users/313137/romain-hippeau"}, "edited": false, "score": 0, "creation_date": 1465344508, "post_id": 37691320, "comment_id": 62859039, "body": "For a while loop to process the information the condition needs to be true. So if you start at 0 you will not execute the while loop. The syntax you have is valid, all you need is an expression inside the while, If the expression evaluates to 0 it will not evaluate else it will. See <a href=\"http://stackoverflow.com/questions/2254075/using-true-and-false-in-c\" title=\"using true and false in c\">stackoverflow.com/questions/2254075/using-true-and-false-in-&zwnj;&#8203;c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "reply_to_user": {"reputation": 11, "user_id": 5355216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c70a4da70fe5efb90254b017823a0aa?s=128&d=identicon&r=PG&f=1", "display_name": "max fugate", "link": "https://stackoverflow.com/users/5355216/max-fugate"}, "edited": false, "score": 0, "creation_date": 1465377726, "post_id": 37691344, "comment_id": 62871411, "body": "Then please be at least so kind to accept the answer which worked fine for you, @max fugate."}], "tags": [], "owner": {"reputation": 930, "user_id": 2945940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbd95bb0d1468cd30e4f0edc1c47790?s=128&d=identicon&r=PG&f=1", "display_name": "Kaizhe Huang", "link": "https://stackoverflow.com/users/2945940/kaizhe-huang"}, "is_accepted": false, "score": 3, "last_activity_date": 1465344340, "creation_date": 1465344340, "answer_id": 37691344, "question_id": 37691320, "link": "https://stackoverflow.com/questions/37691320/c-while-loop-multiple-conditions-math/37691344#37691344", "title": "C while loop multiple conditions math", "body": "<pre><code>while (x &gt;= 8 &amp;&amp; x &lt;= 600){\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1465358863, "creation_date": 1465358863, "answer_id": 37693059, "question_id": 37691320, "link": "https://stackoverflow.com/questions/37691320/c-while-loop-multiple-conditions-math/37693059#37693059", "title": "C while loop multiple conditions math", "body": "<p>The relational and equality operators (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, and <code>!=</code>) don't work like that in C.  The expression <code>a &lt;= b</code> will evaluate to 1 if the condition is true, 0 otherwise.  The operator is <em>left-associative</em>, so <code>8 &lt;= x &lt;= 600</code> will be evaluated as <code>(8 &lt;= x) &lt;= 600</code>.  <code>8 &lt;= x</code> will evaluate to 0 or 1, both of which are less than 600, so the result of the expression is always 1 (true).  </p>\n\n<p>To check if <code>x</code> falls within a range of values, you have to do two separate comparisons: <code>8 &lt;= x &amp;&amp; x &lt;= 600</code> (or <code>8 &gt; x || x &gt; 600</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6376093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qfhen.png?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6376093/dennis"}, "reply_to_user": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1465376994, "post_id": 37696529, "comment_id": 62870938, "body": "@user3078414 I don&#39;t know what the x value is ?  Sorry about my bad English."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1465377872, "post_id": 37696529, "comment_id": 62871489, "body": "In that case, please don&#39;t give answers before you <i>know</i> what you are answering to. You have comments to ask additional information..."}], "tags": [], "owner": {"reputation": 1, "user_id": 6376093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qfhen.png?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6376093/dennis"}, "is_accepted": false, "score": -1, "last_activity_date": 1465372663, "creation_date": 1465372663, "answer_id": 37696529, "question_id": 37691320, "link": "https://stackoverflow.com/questions/37691320/c-while-loop-multiple-conditions-math/37696529#37696529", "title": "C while loop multiple conditions math", "body": "<p>this one means if x>=8\uff0cif x is bigger than 8 ,it turns 1 &lt;= 600 \uff1b(always true)\nif not , Then it turns 0&lt;=600 ; (always fause)</p>\n"}], "owner": {"reputation": 11, "user_id": 5355216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c70a4da70fe5efb90254b017823a0aa?s=128&d=identicon&r=PG&f=1", "display_name": "max fugate", "link": "https://stackoverflow.com/users/5355216/max-fugate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1465372663, "creation_date": 1465344179, "last_edit_date": 1465357382, "question_id": 37691320, "link": "https://stackoverflow.com/questions/37691320/c-while-loop-multiple-conditions-math", "title": "C while loop multiple conditions math", "body": "<p>Im very new to <code>c</code> and am trying to make a <code>while</code> loop that checks if the parameter is less than or equal to a certain number but also if it is greater than or equal to a different number as well. I usually code in <code>python</code> and this is example of what I'm looking to do in <code>c</code>:</p>\n\n<p><code>while(8 &lt;= x &lt;= 600)</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1465344163, "post_id": 37691303, "comment_id": 62858949, "body": "It doesn&#39;t always output that. I don&#39;t think it does."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1465344303, "post_id": 37691303, "comment_id": 62858986, "body": "Probably because the low-order byte of the memory address of &quot;name&quot; happens to be the character value for a smiley face on your system. Purely coincidental."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1465345403, "post_id": 37691303, "comment_id": 62859216, "body": "Always, <i>always</i> check the return of any of the <code>scanf</code> family of functions, especially when taking user input."}], "answers": [{"comments": [{"owner": {"reputation": 471, "user_id": 4968695, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-E9Zrmux9yCs/AAAAAAAAAAI/AAAAAAAAAKY/rs8VtH67YGo/photo.jpg?sz=128", "display_name": "Kanji Viroja", "link": "https://stackoverflow.com/users/4968695/kanji-viroja"}, "edited": false, "score": 0, "creation_date": 1465363777, "post_id": 37691322, "comment_id": 62863630, "body": "you were used wrong format specifier that&#39;s you didn&#39;t get output. use %s instead of %c. Because %c takes only one character and %s takes input as a string. there is also do not use of &amp;. because of array name represent as a base address."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 4, "last_activity_date": 1465344181, "creation_date": 1465344181, "answer_id": 37691322, "question_id": 37691303, "link": "https://stackoverflow.com/questions/37691303/why-does-this-c-code-always-output-a-smiley-face/37691322#37691322", "title": "Why does this C code always output a smiley face?", "body": "<p>It's undefined behavior, try</p>\n\n<pre><code>scanf(\"%14s\", name);\n</code></pre>\n\n<p>You pass the wrong parameter to the \"%c\" specifier which expects a pointer to a single <code>char</code>. Instead you need the <code>\"%s\"</code> specifier and since <code>name</code> is an array it's automatically a pointer to it's first element so you don't need the <code>&amp;</code> address of operator.</p>\n"}], "owner": {"reputation": 23, "user_id": 6437382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2744cbbc7187ec1e05e4b59f1fe7106?s=128&d=identicon&r=PG&f=1", "display_name": "InKnight", "link": "https://stackoverflow.com/users/6437382/inknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 37691322, "answer_count": 1, "score": 0, "last_activity_date": 1465356352, "creation_date": 1465344087, "last_edit_date": 1465356352, "question_id": 37691303, "link": "https://stackoverflow.com/questions/37691303/why-does-this-c-code-always-output-a-smiley-face", "title": "Why does this C code always output a smiley face?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//A simple program that asks for the user's name and prints it back out.\nint main()\n{\n    char name[15]; \n    printf(\"What is your name? \");\n    scanf(\"%c\",&amp;name);\n    printf(\"Name: %c\",name);\n}\n</code></pre>\n\n<p>Not matter what the input is, a smiley face is always the output. I realize that if I change the %c to a %s, the program would run just fine but what I'm wondering is why, out of all things, a smiley face is the output. \nAlso, if the second %c is replaced with a %s i.e.</p>\n\n<pre><code>char name[15]; \nprintf(\"What is your name? \");\nscanf(\"%c\",&amp;name);\nprintf(\"Name: %s\",name);\n</code></pre>\n\n<p>then an @ symbol is printed after the 1st character of the input. For example, if the input is \"Sam\", then the output would be \"S@\". Any ideas as to why this happens? </p>\n"}, {"tags": ["c", "pointers", "char", "uint8t"], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465342092, "post_id": 37691000, "comment_id": 62858498, "body": "It&#39;s also probably worth pointing out that the result is not a C string as the OP probably intends. Due to no NUL terminator. And what is the reason for changing to <code>sizeof(uint8_t)</code>? Though the result is likely to be the same isn&#39;t it better to use the same type as the array elements?"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1465342213, "post_id": 37691000, "comment_id": 62858531, "body": "You&#39;re right, thanks. Also, I didn&#39;t change the <code>sizeof</code>, it was like that when I originally answered, the question got edited."}, {"owner": {"reputation": 255, "user_id": 3939138, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d71850e90843b2d1ffbed842c3cf76cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Maria de la Torre", "link": "https://stackoverflow.com/users/3939138/jose-maria-de-la-torre"}, "edited": false, "score": 0, "creation_date": 1465342478, "post_id": 37691000, "comment_id": 62858591, "body": "yeah sorry I edited the question, made more sense to have size of char. Im getting mixed results with my code (the string is not complete when I add an extra condition to my code (row is enabled) ) Im getting the number is: <code>7  the number is: 6  the number is: 7  the number is: 6  string: 7 </code> where string should be 7676"}, {"owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "edited": false, "score": 0, "creation_date": 1465342621, "post_id": 37691000, "comment_id": 62858633, "body": "Row is enabled? Do you mean you only print some rows? If so, you are going to get segments of the string into which you haven&#39;t written, and since you used <code>malloc</code> it&#39;s filled with garbage. Use a counter to keep track of how many elements you skip, so that you have the proper offset into the string. Don&#39;t forget about writing the null terminator too."}, {"owner": {"reputation": 255, "user_id": 3939138, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d71850e90843b2d1ffbed842c3cf76cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Maria de la Torre", "link": "https://stackoverflow.com/users/3939138/jose-maria-de-la-torre"}, "edited": false, "score": 0, "creation_date": 1465342734, "post_id": 37691000, "comment_id": 62858664, "body": "yep thats exactly it. Thanks a lot for your answer :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1465353489, "post_id": 37691000, "comment_id": 62860876, "body": "If you want to keep <code>sizeof(char)</code> then the <code>+1</code> should be multipled into that, not added on afterwards  (null terminator size is also  1 char)"}], "tags": [], "owner": {"reputation": 2459, "user_id": 975989, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/21bb25fc82d8cf970dbea53bd9685917?s=128&d=identicon&r=PG", "display_name": "user975989", "link": "https://stackoverflow.com/users/975989/user975989"}, "is_accepted": true, "score": 5, "last_activity_date": 1465355969, "last_edit_date": 1465355969, "creation_date": 1465341810, "answer_id": 37691000, "question_id": 37690964, "link": "https://stackoverflow.com/questions/37690964/concatenating-uint8-t-to-a-char/37691000#37691000", "title": "Concatenating uint8_t to a char*", "body": "<p>Since you're trying to print a string, you need the ASCII character for <code>0</code>. So, simply add <code>'0'</code> to each number, like so</p>\n\n<pre><code>char* string = malloc(sizeof(char)*(matrix-&gt;height*matrix-&gt;width + 1));\n\nfor (int i = 0; i &lt; matrix-&gt;height ; ++i) {\n    for (int j = 0; j &lt; matrix-&gt;width ; ++j) {\n        string[i*matrix-&gt;width+j] = matrix-&gt;value[i][j] + '0';\n    }\n}\n\nstring[matrix-&gt;height*matrix-&gt;width] = 0; //null terminator\n</code></pre>\n\n<p>Note however this isn't exactly the most portable solution. </p>\n\n<p>Also, notice that you want to multiply <code>i</code> by the <code>width</code>, because if you didn't have a square matrix your calculation wouldn't work correctly.</p>\n\n<p>It's kind of unnecessary to have <code>sizeof(char)</code>, because the size of a <code>char</code> is defined to be 1 regardless of the byte size. </p>\n"}], "owner": {"reputation": 255, "user_id": 3939138, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d71850e90843b2d1ffbed842c3cf76cb?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Maria de la Torre", "link": "https://stackoverflow.com/users/3939138/jose-maria-de-la-torre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 37691000, "answer_count": 1, "score": 3, "last_activity_date": 1465355969, "creation_date": 1465341537, "question_id": 37690964, "link": "https://stackoverflow.com/questions/37690964/concatenating-uint8-t-to-a-char", "title": "Concatenating uint8_t to a char*", "body": "<p>im really new to C and im having a bit of a complication creating a char* from various uint8_t</p>\n\n<p>My idea is to create a char* where in each location I place a number form a matrix</p>\n\n<p>For example if I have a matrix with:</p>\n\n<pre><code>[1][2][3][4]\n[5][6][7][8]\n[9][0][1][2]\n[3][4][5][6]\n</code></pre>\n\n<p>id like a char* thats <code>\"01234567890123456\"</code></p>\n\n<p>what im doing bit its not working is:</p>\n\n<pre><code>char* string = malloc(sizeof(char)*matrix-&gt;height*matrix-&gt;width);\n\nfor (int i = 0; i &lt; matrix-&gt;height ; ++i) {\n        for (int j = 0; j &lt; matrix-&gt;width ; ++j) {\n                string[i*matrix-&gt;height+j] = matrix-&gt;value[i][j];\n            }\n}\n</code></pre>\n\n<p>of course its not working but im a bit lost on how to proceed and I cant find more information regarding this problem.</p>\n\n<p>Any help would be nice,</p>\n\n<p>thanks</p>\n"}, {"tags": ["ios", "c", "sockets", "kernel", "panic"], "comments": [{"owner": {"reputation": 5851, "user_id": 558933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8ae7ece3a86c531c061c388545b76?s=128&d=identicon&r=PG", "display_name": "Robotic Cat", "link": "https://stackoverflow.com/users/558933/robotic-cat"}, "edited": false, "score": 0, "creation_date": 1465340446, "post_id": 37690638, "comment_id": 62858071, "body": "Log it with Apple and use one of your <code>TSI</code>s?: <a href=\"https://developer.apple.com/support/technical/\" rel=\"nofollow noreferrer\">developer.apple.com/support/technical</a>"}, {"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "reply_to_user": {"reputation": 5851, "user_id": 558933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8ae7ece3a86c531c061c388545b76?s=128&d=identicon&r=PG", "display_name": "Robotic Cat", "link": "https://stackoverflow.com/users/558933/robotic-cat"}, "edited": false, "score": 0, "creation_date": 1465341257, "post_id": 37690638, "comment_id": 62858286, "body": "Thanks for the suggestion. I may try that, but since those are limited (or cost money to get more), I&#39;d like to exhaust all other ideas first."}, {"owner": {"reputation": 18935, "user_id": 19405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72b55a41a43ea0493fc64641a1ed295?s=128&d=identicon&r=PG", "display_name": "nobody", "link": "https://stackoverflow.com/users/19405/nobody"}, "edited": false, "score": 0, "creation_date": 1465343696, "post_id": 37690638, "comment_id": 62858840, "body": "If you can cause a panic from user mode, it&#39;s a kernel bug. Report it."}, {"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465343874, "post_id": 37690638, "comment_id": 62858889, "body": "At present I can only do this from 8.x, though I haven&#39;t tested extensively on iOS 9 yet. So even if I report this I don&#39;t think apple will be fixing it. However, I want to make sure my users using 8.x don&#39;t see crashes, so I want to try and fix it. Even though it is technically an apple bug, it is also a bug in my code since before I added my latest changes (to support IPv6) this didn&#39;t happen."}], "answers": [{"comments": [{"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465352716, "post_id": 37692226, "comment_id": 62860714, "body": "Thanks very much for the hint about incorrect length being a possibility. I actually already had a bug like that, but there may be more lying around. Regarding your last paragraph however, based on my original post I think I know what line it is panicking at, but that is just because the state of a socket-related variable is not what it should be. I thought that the panic could be arbitrarily apart in time and code from the actual cause."}, {"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465352875, "post_id": 37692226, "comment_id": 62860752, "body": "One followup question: Everytime I pass a &quot;struct sockaddr_storage&quot; to a function like bind(), using X.ss_len should be correct for the length, right?"}, {"owner": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "reply_to_user": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465363684, "post_id": 37692226, "comment_id": 62863590, "body": "@Locksleyu: Well in my case the problem was with the arguments to the system call, so knowing where it panics is useful. Are you saying that your problem is with something other than the arguments to the system call?"}, {"owner": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "reply_to_user": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465363721, "post_id": 37692226, "comment_id": 62863609, "body": "@Locksleyu: Yes, it should be okay to use the length field of the structure, as long as you know for sure that all the places where you get the structure from do set the length field. However, cross-platform code might not set this field, as many platforms don&#39;t have this field."}, {"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465394655, "post_id": 37692226, "comment_id": 62883482, "body": "Regarding your previous comment: Yes, I would guess that the problem is related to the arguments to a system call, though I don&#39;t know 100%. However, since the actual panic is occurring in the kernel, away from any of my code, and it is also happening during what looks like some free-type behavior (removing something from a list), I am not sure if the debugger will directly help narrow down where the cause is. For you I think it crashed immediately during a system call, but for it is within a kernel call, and my app is not listed in any of the stacks in the kernel panic dump."}, {"owner": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "reply_to_user": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465412684, "post_id": 37692226, "comment_id": 62895578, "body": "@Locksleyu: But if you can catch the phone rebooting while stepping line-by-line through some function, then you can narrow down exactly where in your app&#39;s code the reboot happens. That&#39;s what I was saying."}, {"owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "edited": false, "score": 0, "creation_date": 1465416486, "post_id": 37692226, "comment_id": 62897659, "body": "Yeah, that would be ideal. I&#39;ll do some experimentation. But the panic report seems to imply that during the actual reboot none of my code is running."}], "tags": [], "owner": {"reputation": 28466, "user_id": 102008, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/eeae0562ab53da4f56ed31d1d5650bde?s=128&d=identicon&r=PG", "display_name": "user102008", "link": "https://stackoverflow.com/users/102008/user102008"}, "is_accepted": false, "score": 2, "last_activity_date": 1465352344, "creation_date": 1465352344, "answer_id": 37692226, "question_id": 37690638, "link": "https://stackoverflow.com/questions/37690638/triaging-ios-kernel-panic-related-to-sockets/37692226#37692226", "title": "Triaging iOS kernel panic related to sockets", "body": "<p>I have seen this happen (improperly coded IPv6 changes in iOS app causing the entire phone to reboot).</p>\n\n<p>In my case, it was caused by making the system call <code>sendto()</code> with the wrong <code>dest_len</code>, one that didn't match the size of the structure pointed to by <code>dest_addr</code>. This kind of issue is possible to come up when adding support for IPv6 because, when everything was IPv4, all <code>sockaddr</code> structures are <code>sockaddr_in</code>, with the same size which can be hard-coded, but when you can have IPv4 and IPv6 addresses, you can have different-sized structures, and you have to pass the correct length corresponding to the structure passed. Your particular issue might not be exactly in <code>sendto()</code>, but it might be a similar issue so I would check every system call where you need to pass a <code>socklen_t</code>, including <code>bind()</code> and <code>connect()</code>.</p>\n\n<p>I agree that no code in the app should be able to cause the phone to reboot, and that the fact that this is possible is an Apple bug.</p>\n\n<p>Although it is not possible for the debugger to stop on a kernel panic (because the device disconnects, so the debugger stops), you can still debug it in a way, if you know approximately where it happens, you can step line-by-line in the debugger, and see which line it kernel panics at. The line it panics on will be a function call (the panic happens inside the call), so you can now step inside that function call, and repeat, until you've narrowed it down to the specific system call.</p>\n"}], "owner": {"reputation": 4802, "user_id": 787684, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/863490eeddb10fb2d2c4cf2b7986aa5b?s=128&d=identicon&r=PG", "display_name": "Locksleyu", "link": "https://stackoverflow.com/users/787684/locksleyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "closed_date": 1465801176, "answer_count": 1, "score": 0, "last_activity_date": 1465492498, "creation_date": 1465339689, "last_edit_date": 1465492498, "question_id": 37690638, "link": "https://stackoverflow.com/questions/37690638/triaging-ios-kernel-panic-related-to-sockets", "closed_reason": "Not suitable for this site", "title": "Triaging iOS kernel panic related to sockets", "body": "<p>I have an iOS app that does alot of low-level socket work, and recently after adding IPv6 support I noticed there is a kernel panic which occurs sometimes when running my app. The entire device reboots, and I get a panic file which has alot of cryptic information (including no stack frames from my app), but a few critical things as shown here:</p>\n\n<pre><code>panic(cpu 0 caller 0xffffff800f15fba0): assertion failed: se-&gt;se_flags &amp; SEF_ATTACHED, file: /SourceCache/xnu/xnu-2784.30.7/bsd/kern/uipc_socket.c, line:     6228\nDebugger message: panic\n</code></pre>\n\n<p>Fortunately this module is open source, and I found the code for a close version here: <a href=\"http://opensource.apple.com//source/xnu/xnu-2782.1.97/bsd/kern/uipc_socket.c\" rel=\"nofollow\">http://opensource.apple.com//source/xnu/xnu-2782.1.97/bsd/kern/uipc_socket.c</a></p>\n\n<p>The error seems to match up with this function:</p>\n\n<pre><code>void\nsockaddrlist_remove(struct sockaddr_list *sl, struct sockaddr_entry *se)\n{\n    VERIFY(se-&gt;se_flags &amp; SEF_ATTACHED);\n    se-&gt;se_flags &amp;= ~SEF_ATTACHED;\n    VERIFY(sl-&gt;sl_cnt != 0);\n    sl-&gt;sl_cnt--;\n    TAILQ_REMOVE(&amp;sl-&gt;sl_head, se, se_link);\n}\n</code></pre>\n\n<p>I'm pretty sure the first VERIFY(), which is basically an assert, is failing.</p>\n\n<p>However, this just tells me that some memory was probably corrupted by my program some time before this code got to run. So, like most memory corruptions, it is very challenging to find the cause.</p>\n\n<p>Based on my logging, I see this happen after roughly some networking calls, including socket(), connect(), read() and write(), though it wouldn't be feasible to give the code here.</p>\n\n<p>Another piece of information is this only happens with IPv6. On IPv4, everything works without issue. But I have scrubbed the IPv6 code and have not found anything obviously wrong. Also I'm confused how any memory corruption issue in user space would make the kernel fail. Maybe understanding how this could happen would help me trace the issue.</p>\n\n<p>The next step most people would say is to try the guard malloc, however unfortunately when I try to turn that on I run into another problem, so for now lets just make the assumption that I cannot use guard malloc at present.</p>\n\n<p>I have also tried to attach to the program live while running and make it crash, but it doesn't stop in the debugger anywhere, it just reboots the entire device (iPad).</p>\n\n<p>If anyone has any triaging ideas for this tricky bug, please let me know.</p>\n\n<p>EDIT:</p>\n\n<p>Based on the feedback from one of the answers, I've checked all the lengths for the relevant socket API calls and those seem to be correct. So it seems like there is some other issue here, possibly overwriting memory. </p>\n\n<p>I was able to try using \"Malloc Guard Edges\", but then the problem stops happening. I can't use \"Guard Malloc\" since it will only work on the simulator, and my app doesn't run well on the simulator due to how it interacts with the hardware. </p>\n\n<p>If anyone has any more ideas, please let me know.</p>\n"}, {"tags": ["c++", "c", "windows", "cmd", "system"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 2, "creation_date": 1465340147, "post_id": 37690612, "comment_id": 62858005, "body": "No.  You&#39;ll need to use CreateProcess instead, which has a <code>CREATE_NO_WINDOW</code> option."}, {"owner": {"reputation": 179, "user_id": 3277766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa34be104a9e883147c4b867428ca9eb?s=128&d=identicon&r=PG&f=1", "display_name": "XenoChrist", "link": "https://stackoverflow.com/users/3277766/xenochrist"}, "edited": false, "score": 0, "creation_date": 1465340558, "post_id": 37690612, "comment_id": 62858098, "body": "Thanks a lot, this looks exactly like what I needed."}], "owner": {"reputation": 179, "user_id": 3277766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa34be104a9e883147c4b867428ca9eb?s=128&d=identicon&r=PG&f=1", "display_name": "XenoChrist", "link": "https://stackoverflow.com/users/3277766/xenochrist"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1465340581, "answer_count": 0, "score": 0, "last_activity_date": 1465339531, "creation_date": 1465339531, "question_id": 37690612, "link": "https://stackoverflow.com/questions/37690612/is-it-possible-to-prevent-system-from-stealing-focus", "closed_reason": "Duplicate", "title": "Is it possible to prevent system() from stealing focus?", "body": "<p>I'm on windows. There's something I want to do with system() about every 3-4 seconds, and every system() call opens a cmd window, which would be fine if it didn't also steal focus from whatever I'm doing while my program runs.</p>\n\n<p>Basically, do I have control over system()'s behavior? I'd like it to be as silent as possible.</p>\n\n<p>(I'm trying to run a python script which use the mitsuba bindings. I tried using the Python.h methods to directly call my scripts from the C++ code but I can't get it to work. I feel this would belong in another question, but first I'd like to see if I can get the system() stuff working, unless someone has another solution to run a python script from C code.)</p>\n"}, {"tags": ["c", "types"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1465338150, "post_id": 37690347, "comment_id": 62857396, "body": "The number of trailing zeros in the decimal representation of <code>n!</code> is determined by the number of factors of <code>5</code> in the factorial. You don&#39;t need to compute the full factorial."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465338298, "post_id": 37690347, "comment_id": 62857452, "body": "You could brute-force this with a bignum library, but if you&#39;re going to get more problems from wherever you got this one, implementing the naive algorithm with bignums is unlikely to cut it for all your problems."}, {"owner": {"reputation": 97, "user_id": 4805163, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10154171998733164/picture?type=large", "display_name": "Ambareesh S J", "link": "https://stackoverflow.com/users/4805163/ambareesh-s-j"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1465338439, "post_id": 37690347, "comment_id": 62857501, "body": "@EOF I know that approach, that&#39;s why I didn&#39;t ask for the solution. Is there a way using my method?"}, {"owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1465338553, "post_id": 37690347, "comment_id": 62857538, "body": "@BLUEPIXY neither of those questions answer this one"}, {"owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "edited": false, "score": 1, "creation_date": 1465338884, "post_id": 37690347, "comment_id": 62857641, "body": "and that one isn&#39;t even related"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1465339161, "post_id": 37690347, "comment_id": 62857710, "body": "Try <a href=\"http://stackoverflow.com/questions/117429/handling-large-numbers-in-c\" title=\"handling large numbers in c\">stackoverflow.com/questions/117429/handling-large-numbers-in&zwnj;&#8203;-c</a>   It is not a single data type but an array used to store all the digits."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1465342319, "post_id": 37690347, "comment_id": 62858560, "body": "Use a bignum library."}], "answers": [{"tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": false, "score": 1, "last_activity_date": 1465388333, "last_edit_date": 1465388333, "creation_date": 1465387123, "answer_id": 37701872, "question_id": 37690347, "link": "https://stackoverflow.com/questions/37690347/appropriate-data-type-to-be-used-in-a-c-program/37701872#37701872", "title": "Appropriate data type to be used in a C program", "body": "<p>Well these kind of numbers cannot be stored as single number rightly as you've reasoned <strong>there are no data types</strong> to hold them. The best way to work with large numbers is to store them as arrays of <code>int</code> type or <code>char</code> type.</p>\n\n<p>for example you can store <code>1234567898765</code> as an array <code>int big[14]</code> where,</p>\n\n<pre><code>big[0]=1\nbig[1]=2\n.\n.\n.\nbig[13]=5  //last element\nbig[14]=-1 //to mark the end of number...\n</code></pre>\n\n<p>or in the reverse order with <code>-1</code> as last element (select which is is convenient for your implementation)</p>\n\n<hr>\n\n<p>and now comes the challenging part where you have to create functions for addition, subtraction, multiplication and other operations which you require.. There are many ways of implementing these function..give a try.. or you can just look up how to do them here's a source : <a href=\"https://www3.cs.stonybrook.edu/~skiena/392/programs/bignum.c\" rel=\"nofollow\">click</a></p>\n\n<p>this provides a implementation of arithmetic numbers for up to 100 digit numbers however you can try to build one which can deal with even larger numbers :)</p>\n"}], "owner": {"reputation": 97, "user_id": 4805163, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10154171998733164/picture?type=large", "display_name": "Ambareesh S J", "link": "https://stackoverflow.com/users/4805163/ambareesh-s-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465388333, "creation_date": 1465338002, "last_edit_date": 1465338305, "question_id": 37690347, "link": "https://stackoverflow.com/questions/37690347/appropriate-data-type-to-be-used-in-a-c-program", "title": "Appropriate data type to be used in a C program", "body": "<p>I'm trying to run a program that does certain operations on factorials of large numbers (say  50!; viz 3.041e+64 - huge!) and therefore doesn't fit in the normal int data types that I'm aware of(unsigned long long int etc)</p>\n\n<p>Which data type do I use to store these values?</p>\n\n<p>P.S I was trying to find the trailing zeroes in a factorial. The following was my approach:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint FactorialFinder(int a)\n{\n    if (a&gt;1)\n    a= a* (FactorialFinder(a-1)) ;\n\n    return a;\n}\n\n\nint main()\n {\n  printf(\"Enter number \\n\");\n  int num ;\n  scanf(\"%d\",&amp;num) ;\n  printf(\"number is %d\\n\",num);\n\n  printf(\"Factorial is %d\",(num = FactorialFinder(num))) ;\n\nint x=0, count = 0 ;\n\nwhile(num&gt;0)\n{\n    x = (num%10) ;\n    if (x == 0)\n        count++ ;\n    else\n        break;\n\n    num= num/10 ;\n}\n\nprintf(\"\\nNumber of trailing zeroes is %d\",count) ;\ngetchar() ;\nreturn 0;\n}\n</code></pre>\n\n<p>Works fine upto 12! beyond which the results are erroneous (<strong>from 17! it starts returning  negative factorial values(?)</strong>, from 34! it gives 0) I'm guessing due to the datatype problem. Can someone help me out?</p>\n"}, {"tags": ["c", "mpi", "barrier"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1465338298, "post_id": 37690116, "comment_id": 62857453, "body": "Please explain why you think the problem has anything to do with the barrier. Seems to me that all four processes reached the barrier, and then process 1 was able to continue. What happens after that has nothing to do with the barrier."}, {"owner": {"reputation": 139, "user_id": 1125649, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f11486b7af4906dc8033aa5ee2de41ba?s=128&d=identicon&r=PG", "display_name": "dv_", "link": "https://stackoverflow.com/users/1125649/dv"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1465347856, "post_id": 37690116, "comment_id": 62859725, "body": "Ok. Question edited, explaining the expected output. Thanks."}, {"owner": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1465363914, "post_id": 37690116, "comment_id": 62863672, "body": "It&#39;s still impossible to say anything because you do not provide a minimal working example that reproduces the problem. There is nothing wrong with the code fragment itself. Thus, the first suspicion is that this behavior is due to some other part of the code (for example you might have called a non-blocking barrier on the other processes beforehand, which was matched by this MPI_Barrier call on process 1 now). Does it work with different number of processes? Maybe it&#39;s due to the environment, does it work on other systems? What do you mean by several threads?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1465371571, "post_id": 37690116, "comment_id": 62867571, "body": "@haraldkl, <i>&quot;Unlike point-to-point operations, nonblocking collective operations do not match with blocking collective operations&quot;</i> - straight out of the MPI standard."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1465373869, "post_id": 37690116, "comment_id": 62868896, "body": "You definitely need to provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1465374156, "post_id": 37690116, "comment_id": 62869064, "body": "@HristoIliev yeah, ok sorry, didn&#39;t check back. Well, then it shouldn&#39;t be that at least ;)"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1465376585, "post_id": 37690116, "comment_id": 62870679, "body": "@HristoIliev Let&#39;s say I post a nonblocking barrier on a subset of the communicator ranks. Then I post a blocking barrier on this communicator. That would be a incorrect MPI program, right? Now undefined behavior might include what haraldkl suggested, or?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1465378273, "post_id": 37690116, "comment_id": 62871771, "body": "@Zulan, the order of collective calls (blocking or non-blocking) on a given communicator must be the same in all ranks, therefore such a scenario as the one you&#39;ve described is indeed erroneous according to the standard. If the OP isn&#39;t really doing something messy, I would be more in favour of the hypothesis that this is yet another case of misconfigured network interfaces (Open MPI is very prone to those)."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 6841732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60f98e3bea7299966d5db056b8a678cf?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Jaumann", "link": "https://stackoverflow.com/users/6841732/stefan-jaumann"}, "is_accepted": false, "score": -1, "last_activity_date": 1499528562, "creation_date": 1499528562, "answer_id": 44987915, "question_id": 37690116, "link": "https://stackoverflow.com/questions/37690116/mpi-barrier-only-some-processes-passes-the-barrier/44987915#44987915", "title": "MPI_Barrier - Only some processes passes the barrier", "body": "<p>I've been experiencing similar problems, began searching the web. I found - as far as I understand it - that the implementation of MPI_Barrier in OpenMPI might be buggy, depending on the specific version. </p>\n\n<p><a href=\"https://github.com/open-mpi/ompi/issues/3042\" rel=\"nofollow noreferrer\">https://github.com/open-mpi/ompi/issues/3042</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/8230027/mpi-barrier-doesnt-function-properly\">MPI_Barrier doesn&#39;t function properly</a></p>\n"}], "owner": {"reputation": 139, "user_id": 1125649, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f11486b7af4906dc8033aa5ee2de41ba?s=128&d=identicon&r=PG", "display_name": "dv_", "link": "https://stackoverflow.com/users/1125649/dv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1041, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1499528562, "creation_date": 1465336709, "last_edit_date": 1465370784, "question_id": 37690116, "link": "https://stackoverflow.com/questions/37690116/mpi-barrier-only-some-processes-passes-the-barrier", "title": "MPI_Barrier - Only some processes passes the barrier", "body": "<p>I'm facing a situation where only some processes bypass the <code>MPI_Barrier</code> function.</p>\n\n<p>The problem appears in this fragment of code:</p>\n\n<pre><code>printf(\"[%d] Before barrier\\n\", mpi_rank);\nfflush(stdout);\nMPI_Barrier(MPI_COMM_WORLD);\nprintf(\"[%d] After barrier\\n\", mpi_rank);\nfflush(stdout);\nsleep(1);\n</code></pre>\n\n<p>After running it with 4 processes, I have the following output:</p>\n\n<pre><code>[3] Before barrier\n[2] Before barrier\n[0] Before barrier\n[1] Before barrier\n[1] After barrier\n</code></pre>\n\n<p>And the application freezes. </p>\n\n<p>I was expecting that all processes were able to print the message <code>[id] After barrier</code>, but only process <code>1</code> printed it.</p>\n\n<p>Why are not all processes passing the barrier?</p>\n\n<p>I was expecting an output like:</p>\n\n<pre><code>[3] Before barrier\n[2] Before barrier\n[0] Before barrier\n[1] Before barrier\n[1] After barrier\n[0] After barrier\n[2] After barrier\n[3] After barrier\n</code></pre>\n\n<p>I'm using openmpi with centos inside docker. The application starts several threads, but the fragment showed is not inside any of it.</p>\n"}, {"tags": ["c", "if-statement", "nested", "scanf"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1465336363, "post_id": 37689902, "comment_id": 62856716, "body": "You have three true/false conditions, for a total of eight possible outcomes. So all you need is an array of eight strings, and code to combine the three answers into a 3 bit number."}, {"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1465336702, "post_id": 37689902, "comment_id": 62856861, "body": "@user3386109 We haven&#39;t gone over arrays yet in this course so I assume we aren&#39;t allowed to use them. We&#39;ve done if/else statements, switch statements, loops and nothing beyond that"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1465337387, "post_id": 37689902, "comment_id": 62857112, "body": "I&#39;d get the three inputs.  Then I&#39;d evaluate: <code>if (not too cold and never froze and not raining) { print &quot;All Systems Go&quot; else { print &quot;The plane is not launching because &quot;; pad = &quot;&quot;; if (too cold) { print &#47;*pad,*&#47; &quot;it is too cold&quot;; pad &quot; and&quot;; } if (it froze) { print pad, &quot;it froze last night&quot;; pad = &quot; and&quot;; } if (it is raining) { print pad, &quot;it is raining&quot;; &#47;* pad = &quot; and&quot;; *&#47; } putchar(&#39;\\n&#39;);</code>.  Just four tests.  The <code>pad</code> allows you to build up the list of reasons cumulatively."}], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "is_accepted": false, "score": 0, "last_activity_date": 1465337740, "creation_date": 1465337740, "answer_id": 37690303, "question_id": 37689902, "link": "https://stackoverflow.com/questions/37689902/scanning-multiple-inputs-and-outputting-based-on-the-amount-true-false-in-c/37690303#37690303", "title": "Scanning multiple inputs and outputting based on the amount true/false - in C", "body": "<p>You could do something like:</p>\n\n<pre><code>#define avgTmpErrMsg \"the temperature is below 42 degrees\"\n#define lowTmpErrMsg \"the temperature has dropped below 32 degrees in the past day\"\n#define rainingErrMsg \"it's raining\"\n\n\nshort state = (avgTmp &lt; 42) + ((lowTmp &lt; 32)&lt;&lt;1) + ((raining)&lt;&lt;2); // store the state in one simple variable\nshort nErr = (avgTmp &lt; 42) + (lowTmp &lt; 32) + (raining); // number of error\nswitch(nErr){\n   case 0: // no error\n      printf(\"could launch\\n\");\n      break;\n   case 1: // one error\n      printf(\"The plane is not launching because %s\\n\", msg(state,1));\n      break;\n   case 2: // 2 errors\n      printf(\"The plane is not launching because:\\n%s\\n%s\\n\",msg(state,1),msg(state,2));\n      break;\n   case 3: // 3 errors\n      printf(\"The plane is not launching because:\\n%s\\n%s\\n%s\\n\",msg(state,1),msg(state,2),msg(state,3));\n      break;\n}\n\n\n\nchar* msg(short err,short n) {\n    /* print the nth error stored in err */\n    return ((err&amp;1 &amp;&amp; (!(--n)))? avgTmpErrMsg : ((err&amp;2 &amp;&amp; (!(--n)))? lowTmpErrMsg : rainingErrMsg));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 1608165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjD6t.png?s=128&g=1", "display_name": "Gavin Higham", "link": "https://stackoverflow.com/users/1608165/gavin-higham"}, "is_accepted": false, "score": 1, "last_activity_date": 1465338246, "last_edit_date": 1465338246, "creation_date": 1465337807, "answer_id": 37690314, "question_id": 37689902, "link": "https://stackoverflow.com/questions/37689902/scanning-multiple-inputs-and-outputting-based-on-the-amount-true-false-in-c/37690314#37690314", "title": "Scanning multiple inputs and outputting based on the amount true/false - in C", "body": "<p>The <a href=\"https://en.wikipedia.org/wiki/%3F:#C\" rel=\"nofollow\">ternary operator</a> combined with format strings is a handy way to solve this problem.</p>\n\n<p>The ternary operator allows you to conditionally-assign a value based on some boolean expression, and format strings let you inject other strings into your printfs, even empty strings:</p>\n\n<pre><code>char *cond1 = temperature_is_low ? \"the temperature is low\" : \"\";\nchar *cond2 = is_raining ? \"it's raining\" : \"\";\nchar *sep = (temperature_is_low &amp;&amp; is_raining) ? \" and \" : \"\";\nprintf(\"The plane will not launch because %s%s%s.\\n\", cond1, sep, cond2);\n</code></pre>\n\n<p>If you can't use ternary operators or format strings, you could do the same thing by separating the print over multiple lines:</p>\n\n<pre><code>printf(\"The plane will not launch because \");\nif (temperature_is_low)\n    printf(\"the temperature is low\");\nif (temperature_is_low &amp;&amp; is_raining)\n    printf(\" and \");\nif (is_raining)\n    printf(\"it's raining\");\nprintf(\".\\n\");\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1465338246, "creation_date": 1465335847, "last_edit_date": 1465336266, "question_id": 37689902, "link": "https://stackoverflow.com/questions/37689902/scanning-multiple-inputs-and-outputting-based-on-the-amount-true-false-in-c", "title": "Scanning multiple inputs and outputting based on the amount true/false - in C", "body": "<p>I have an assignment that is supposed to ask the user a few questions about temperature in regards to a plane launch.</p>\n\n<p>EX: </p>\n\n<ul>\n<li>What is the average temperature?</li>\n<li>Lowest temperature in the past day?</li>\n<li>Is it raining?</li>\n</ul>\n\n<p>Now the program is suppose to take the input and base it on a few conditions</p>\n\n<ul>\n<li>temperature must be 42 degrees</li>\n<li>temperature couldn't have dropped below 32</li>\n<li>Can't be raining</li>\n</ul>\n\n<p>So I got the output that gives 'the okay' for the plane launch by nesting some 'if statements', that's all good. The problem is that, depending on the number of incorrect statements, it'll output something different.</p>\n\n<p>EX: </p>\n\n<p>If the only issue is that the temperature is below 32 degrees, it'll output:</p>\n\n<p>\"<strong>The plane is not launching because the temperature has dropped below 32 degrees in the past day</strong>\"</p>\n\n<p>If the temperature dropped below 32 degrees AND it's raining, the program will spit out </p>\n\n<p>\"<strong>The plane is not launching because:</strong></p>\n\n<p><strong>The temperature is below 32 degrees</strong></p>\n\n<p><strong>it's raining</strong>\"</p>\n\n<p>I know that I can make a whole bunch of if statements for each situation but that'll just make my code massive and confusing. Surely there must be a simpler way to set it up in which 'there are 2 statements false, so print this depending on which 2'. Should I make a switch statement? </p>\n\n<p>The last class I took I separated all of the work into functions and then just called down each one into the main when needed. In this course, we have to do all of the work in the main function and it is kinda confusing because I began learning a different way. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c", "arrays", "string", "char", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 555, "user_id": 3491653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4a181bf47a17fe43bf62ff3778525bfa?s=128&d=identicon&r=PG&f=1", "display_name": "i_use_the_internet", "link": "https://stackoverflow.com/users/3491653/i-use-the-internet"}, "edited": false, "score": 0, "creation_date": 1465335836, "post_id": 37689821, "comment_id": 62856511, "body": "but in this case i am not getting user input, I have the values, how do i place them in the array to correctly extract them by the receiving method?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 555, "user_id": 3491653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4a181bf47a17fe43bf62ff3778525bfa?s=128&d=identicon&r=PG&f=1", "display_name": "i_use_the_internet", "link": "https://stackoverflow.com/users/3491653/i-use-the-internet"}, "edited": false, "score": 2, "creation_date": 1465336031, "post_id": 37689821, "comment_id": 62856606, "body": "@i_use_the_internet Your code is too wrong so you should delete it, read about <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> programming and start over."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1465337218, "last_edit_date": 1465337218, "creation_date": 1465335484, "answer_id": 37689821, "question_id": 37689768, "link": "https://stackoverflow.com/questions/37689768/c-place-integer-in-a-char-array-and-extract-it/37689821#37689821", "title": "C - place integer in a char array and extract it", "body": "<p>The result of your program is called <strong>UNDEFINED BEHAVIOR</strong>. You MUST use compiler warnings if you are learning.</p>\n\n<p>Your code has many issues, you should READ about strings in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> instead of trying stuff just to see if they work.</p>\n\n<ol>\n<li><p>You are using <code>sprintf()</code> wrong, you should pass a pointer to <code>char</code> as the first parameter, that points to valid data. You are passing uninitialized pointers instead which leads to <em>undefined behavior</em>.</p></li>\n<li><p>Function <code>method1()</code> (<em>please note, that methods are for classes or objects, in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> there are no methods, just functions</em>) is also not passing anything anywhere. The array of pointer <code>values</code> is local to the function and is not accessible from outside the function. To <strong>pass</strong> something to a function you should do it through the parameters instead and it would be the other way around since you can't call <code>main()</code> from a <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> program because it is undefined behavior.</p></li>\n<li><p>You are using <code>sscanf()</code> where you apparently what <code>fscanf()</code> or just <code>scanf()</code>.</p>\n\n<p>If you want to read input from the user use</p>\n\n<pre><code>if (scanf(\"%d %d\", &amp;i, &amp;j) == 2)\n    printf(\"i: %d, j: %d\\n\", i, j);\nelse\n    printf(\"Invalid input\\n\");\n</code></pre>\n\n<p>you can substitute <code>scanf()</code> with <code>fscanf(stdin, ...</code> or another <code>FILE *</code> object to read from a  file.</p>\n\n<p>In your code, your program is expecting <code>buffer</code> to contain a string (<em>a sequence of bytes terminated with a <code>'\\0'</code></em>). You are passing an uninitialized array instead which invokes <em>undefined behavior</em>.</p>\n\n<p>If you want to test how <code>sscanf()</code> works, do this</p>\n\n<pre><code>char buffer[] = \"1 2\";\nif (sscanf(buffer, \"%d %d\", &amp;i, &amp;j) ...\n</code></pre>\n\n<p>the rest is the same.</p></li>\n</ol>\n\n<p>I would say, that you want this</p>\n\n<pre><code>int\nmain(void)\n{\n    char buffer[256];\n    int i;\n    int j;\n\n    sprintf(buffer, \"%d %d\", 1289, 9); // - This is not necessay, but for illustration\n                                       // - This is also, unsafe as it could cause\n                                       //   a buffer overflow.\n    if (sscanf(buffer, \"%d %d\", &amp;i, &amp;j) == 2) // Would be surprised if this is false,\n        printf(\"values: %d %d\\n\", i, j);      // but you MUST always check to make \n    else                                      // sure, because this kind of situation\n        printf(\"invalid input?\\n\");           // is very unusual in real code.\n\n}\n</code></pre>\n\n<p>I hope you can see, why your code is SO wrong. You can also move the part you want to the function. But it should be the right part.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4734940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08d189041efdbf233a4b0e153149d50?s=128&d=identicon&r=PG&f=1", "display_name": "PFL", "link": "https://stackoverflow.com/users/4734940/pfl"}, "is_accepted": false, "score": -1, "last_activity_date": 1465335776, "creation_date": 1465335776, "answer_id": 37689888, "question_id": 37689768, "link": "https://stackoverflow.com/questions/37689768/c-place-integer-in-a-char-array-and-extract-it/37689888#37689888", "title": "C - place integer in a char array and extract it", "body": "<p>Try this:</p>\n\n<p><code>char values[10];\n  int i = 1298;\n  int j = 9;\n  sprintf(values,\"%d %d\",i,j);</code></p>\n"}, {"comments": [{"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465336705, "post_id": 37690076, "comment_id": 62856863, "body": "I use <code>fprintf</code> to show a way of handling errors; people typically don&#39;t like answers that ignore errors. And as for my coding style it&#39;s not really relevant to the question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465336822, "post_id": 37690076, "comment_id": 62856911, "body": "I don&#39;t think that&#39;s bad. A programmer should NEVER ignore errors. But your answer is way too advanced for the level of the OP. You should put yourself in his situation, and notice that he doesn&#39;t even understand how to use <code>sprintf()</code>. If so, how would your answer help him? Your coding style is relevant for me, not for the question."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465337451, "post_id": 37690076, "comment_id": 62857125, "body": "Now, it&#39;s worse. Why do you think there is a second parameter to <code>strtol()</code>?"}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465337590, "post_id": 37690076, "comment_id": 62857180, "body": "@iharob According to the man page for <code>strtol</code>; the second argument can be NULL so long as it&#39;s NULL terminated; which happens to be the case for C-strings. And OP&#39;s example didn&#39;t include a string which has many integers; that&#39;d be a different answer."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465337915, "post_id": 37690076, "comment_id": 62857300, "body": "No, you&#39;re wrong. You are saying that there a pitfall, you can fix it with that second argument. It sotres a pointer to the <i>unconverted</i> characters. Read tha man page carefully. You think that because it can be <code>NULL</code> it SHOULD be <code>NULL</code>.?"}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1465338039, "post_id": 37690076, "comment_id": 62857350, "body": "I&#39;m aware; I could additionally check that the end pointer is set to the end of that current string and then verify for sure if there was an error. But I didn&#39;t have time at the instance to account for that so I just noted it in my answer. If OP chooses to implement it; then they may fix my pitfall."}], "tags": [], "owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1465337205, "last_edit_date": 1465337205, "creation_date": 1465336522, "answer_id": 37690076, "question_id": 37689768, "link": "https://stackoverflow.com/questions/37689768/c-place-integer-in-a-char-array-and-extract-it/37690076#37690076", "title": "C - place integer in a char array and extract it", "body": "<p>Here's something I wrote up quickly; you can pass an array of strings to this function along with it's length and it will dynamically allocate an array of integers with their converted values.</p>\n\n<p>The pitfall here is that with <code>strtol</code>: if it fails to convert one of the strings it will default to 0. So if an element in your array of strings happens to contain some non-numeric characters you may not get what you expect; and an error won't be reported as you'd have to also confirm that the string itself wasn't 0.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint *convert_to_int_array(const char **strings, size_t length) {\n    int *numbers = malloc(length * sizeof(int));\n    size_t i = 0;\n\n    if(numbers == NULL)\n        return NULL;\n\n    for(i = 0; i &lt; length; i++) {\n        numbers[i] = strtol(strings[i], NULL, 10);\n    }\n    return numbers;\n}\n\nint main(int argc, char **argv) {\n    const char *strings[2];\n    strings[0] = \"100\";\n    strings[1] = \"50\";\n    int *numbers;\n    size_t length = 2, i;\n\n    numbers = convert_to_int_array(strings, length);\n    if(numbers == NULL) {\n        fprintf(stderr, \"failed to initialize numbers\\n\");\n    }\n\n    for(i = 0; i &lt; length; i++) {\n        printf(\"%d\\n\", numbers[i]);\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "is_accepted": true, "score": 3, "last_activity_date": 1465337059, "creation_date": 1465337059, "answer_id": 37690188, "question_id": 37689768, "link": "https://stackoverflow.com/questions/37689768/c-place-integer-in-a-char-array-and-extract-it/37690188#37690188", "title": "C - place integer in a char array and extract it", "body": "<pre><code>    char *values[2];\n</code></pre>\n\n<p>The above line is parsed as <code>char *(values[2]);</code>, i.e., <code>[]</code> take precedence over <code>*</code>.  This means that <code>values</code> is an array with 2 elements.  The type of the elements is <code>char *</code>.  So, <code>values[0]</code> and <code>values[1]</code> are of type <code>char *</code>.  Since you haven't initialized the array elements, the two items in the array have unknown, random values.</p>\n\n<pre><code>    //sprintf(values,\"%d\" \"%d\",i,j);\n</code></pre>\n\n<p>Although you have commented this out, it seems like you were trying to store the string representation of <code>i</code> and <code>j</code> into <code>values</code> using one <code>sprintf</code> call.  As you probably found out, this is impossible.</p>\n\n<pre><code>    sprintf(&amp;values[0],\"%d\" ,i);\n</code></pre>\n\n<p>Here, you are calling <code>sprintf</code> to store the string representation of <code>i</code> into the memory location pointed to by <code>values[0]</code>.  But as noted above, <code>values[0]</code> is not pointing anywhere useful, since you haven't initialized it.  This is bad.</p>\n\n<pre><code>    sprintf(&amp;values[1],\"%d\" ,j);\n</code></pre>\n\n<p>Same as above.</p>\n\n<pre><code>    method2(values, 2);\n</code></pre>\n\n<p>Here, you are calling <code>method2</code>, but you haven't declared the signature of <code>method2</code>.  As it turns out, <code>method2</code> takes a <code>char *</code> and an int.  You are passing <code>values</code> and <code>2</code>.  <code>values</code> is an array of <code>char *</code>, which gets converted to a pointer in this context, so <code>method2</code> should take a <code>char **</code> and an <code>int</code>.</p>\n\n<pre><code>int method2(char *strings, int num_values){\n</code></pre>\n\n<p>This should be: <code>int method2(char **strings, int num_values) {</code></p>\n\n<pre><code>    int i, j;\n    char buffer[256];\n    sscanf(buffer, \"%d\" \"%d\", &amp;i, &amp;j);\n</code></pre>\n\n<p>I am not sure what you are trying to do here.  You are ignoring <code>strings</code>, but instead using a <code>buffer</code> variable.  <code>buffer</code> is uninitialized, so trying to interpret the data in it as two integers is pointless.</p>\n\n<p>I am assuming you are writing this program to understand strings, pointers, and functions.  As such, there is no single correct way to do what you are trying to do.  But here is one approach:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* Define method2 before method1, so that its definition is visible\n   in method1 */\n\n/* Assume that method2 will be called with one char * containing two integer\n   values.  I also changed the return type to void since you weren't really\n   using the int return value.  Same for method1. */\nvoid method2(const char *strings)\n{\n    int i, j;\n    sscanf(strings, \"%d %d\", &amp;i, &amp;j);\n    printf(\"i: %d, j: %d\\n\",i,j);\n}\n\nvoid method1(void)\n{\n    /* Changed values to a char array that has enough space */\n    char values[256];\n    int i = 1298;\n    int j = 9;\n\n    sprintf(values, \"%d %d\", i, j);\n    method2(values);\n}\n\nint main(void)\n{\n    method1();\n    return 0;\n}\n</code></pre>\n\n<p>The above outputs:</p>\n\n<pre><code>i: 1298, j: 9\n</code></pre>\n\n<p>There are a lot of moving parts in your program.  I recommend that you learn the basics about pointers, arrays etc., in C, before passing them around in functions.</p>\n"}], "owner": {"reputation": 555, "user_id": 3491653, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4a181bf47a17fe43bf62ff3778525bfa?s=128&d=identicon&r=PG&f=1", "display_name": "i_use_the_internet", "link": "https://stackoverflow.com/users/3491653/i-use-the-internet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1038, "favorite_count": 0, "accepted_answer_id": 37690188, "answer_count": 4, "score": -1, "last_activity_date": 1465337218, "creation_date": 1465335277, "question_id": 37689768, "link": "https://stackoverflow.com/questions/37689768/c-place-integer-in-a-char-array-and-extract-it", "title": "C - place integer in a char array and extract it", "body": "<p>String manipulation in C is the bane of my existence, I have tried to understand how to manipulate char arrays and fall short of grasping it every time. I simply want to do this in C.</p>\n\n<pre><code>Method1 passes [\"1298\",\"9\"]\nMethod2 receives and converts them both to ints\n\nint method1(){\n  char *values[2];\n  int i = 1298;\n  int j = 9;\n\n  //sprintf(values,\"%d\" \"%d\",i,j);\n  sprintf(&amp;values[0],\"%d\" ,i);\n  sprintf(&amp;values[1],\"%d\" ,j);\n  method2(values,2);\n}\nint method2(char *strings, int num_values){\n   int i, j;\n   char buffer[256];\n   sscanf(buffer, \"%d\" \"%d\", &amp;i, &amp;j);\n   printf(\"i: %d, j: %d\\n\",i,j);\n   return 0;\n}\n</code></pre>\n\n<p>The result of this is 1 and 9; but i want 1298 and 9\nPlease even after providing an answer, can you explain why it is the way it is? </p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1465334971, "post_id": 37689568, "comment_id": 62856156, "body": "Hmm - <a href=\"http://ideone.com/GX2ryd\" rel=\"nofollow noreferrer\">works for me</a> - what compiler are you using ?"}, {"owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1465335065, "post_id": 37689568, "comment_id": 62856192, "body": "@PaulR GCC 4.8.4   ok I will test this isolated (right now it is inside a huge pile of mess)"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 3, "creation_date": 1465335306, "post_id": 37689568, "comment_id": 62856281, "body": "I would add debug output to dump all addresses used in <code>find_minmax_float()</code>.  Also, it would not hurt to print values for *begin, **min, and **max at the top of the <code>while</code> loop."}, {"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 1, "creation_date": 1465368560, "post_id": 37689568, "comment_id": 62865753, "body": "Works for me too. My guess is that *min or float[0] get corrupted due to some bug elsewhere in your big program."}, {"owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "edited": false, "score": 1, "creation_date": 1465383988, "post_id": 37689568, "comment_id": 62875573, "body": "Yes guys when I tested the code isolated it works as intended....for sure the problem is somewhere else. Thanks a lot for your effort on testing the code."}], "answers": [{"tags": [], "owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "is_accepted": false, "score": 0, "last_activity_date": 1465397054, "creation_date": 1465397054, "answer_id": 37705765, "question_id": 37689568, "link": "https://stackoverflow.com/questions/37689568/finding-min-and-max-elements-in-a-float-array-using-out-params/37705765#37705765", "title": "Finding min and max elements in a float array using out params", "body": "<p>I do not know if I should delete the question or not. Anyway, the problem was somewhere else in my code which apparently overwrote the first element in my array.</p>\n\n<p>Thanks a lot to people who tested my code :P</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1465400107, "creation_date": 1465400107, "answer_id": 37706967, "question_id": 37689568, "link": "https://stackoverflow.com/questions/37689568/finding-min-and-max-elements-in-a-float-array-using-out-params/37706967#37706967", "title": "Finding min and max elements in a float array using out params", "body": "<p><code>fmin</code> and <code>fmax</code> are unitialized pointers. Your code just invokes Undefined Behaviour.</p>\n"}], "owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 37706967, "answer_count": 2, "score": 3, "last_activity_date": 1514730860, "creation_date": 1465334441, "question_id": 37689568, "link": "https://stackoverflow.com/questions/37689568/finding-min-and-max-elements-in-a-float-array-using-out-params", "title": "Finding min and max elements in a float array using out params", "body": "<p>I have written the function below:</p>\n\n<pre><code>void find_minmax_float(float * begin, float * end, \n                float ** min, float ** max) {\n    if(begin == end) { //if it is not an array\n        *min = *max = 0;\n    } else { //if atleast 1 element exist\n        *min = *max = begin;\n        while(++begin != end) {\n            if(*begin &lt; ** min) *min = begin;\n            if(*begin &gt; ** max) *max = begin;\n        }\n    }\n}\n</code></pre>\n\n<p>And I test it with the following code:</p>\n\n<pre><code>float floats[] = { 0.9, 1.11, 2.35, 5.999 };\nint size = sizeof(floats) / sizeof(floats[0]);\nfloat * fmin;\nfloat * fmax;\n\nfind_minmax_float(floats, floats + size, &amp;fmin, &amp;fmax);\nprintf(\"float[]\\tmin=%f\\tmax=%f\\n\", *fmin, *fmax);\n</code></pre>\n\n<p>But I get this weird output on terminal:</p>\n\n<pre><code>float[] min=0.000000    max=5.999000\n</code></pre>\n\n<p>Obviously I get the <code>min</code> value not correct, while the <code>max</code> seems to be ok. I can not figure out what is going wrong! I should get <code>min=0.900000</code></p>\n\n<p>I tried 0.1 to 0.9 and I always get 0.000000 for the min.</p>\n"}, {"tags": ["c", "algorithm", "performance", "time-complexity"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1465334377, "post_id": 37689419, "comment_id": 62855910, "body": "If the code works, perhaps move to <a href=\"http://codereview.stackexchange.com/\">Code review</a> for an opinion?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465334463, "post_id": 37689419, "comment_id": 62855947, "body": "<code>memset</code> has the same time complexity as setting the elements manually. The usual way to do this would involve a hash table, but C doesn&#39;t come with a hash table implementation built in; you may want to get one."}, {"owner": {"reputation": 5466, "user_id": 1803692, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/umD6Q.jpg?s=128&g=1", "display_name": "Vogel612", "link": "https://stackoverflow.com/users/1803692/vogel612"}, "edited": false, "score": 1, "creation_date": 1465334477, "post_id": 37689419, "comment_id": 62855954, "body": "Agreed. Seems like a good <a href=\"https://stackoverflow.com/questions/tagged/performance\">performance</a> question over there. Voting to close as &quot;Too Broad&quot;, since Stack Overflow usually does not deal with Code Review-Style questions. They have too many possible answers."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1465334553, "post_id": 37689419, "comment_id": 62855986, "body": "@WeatherVane: People keep saying that, but I don&#39;t think it makes sense. First, code that fails to meet its performance requirements is not working code. Second, in your actual job, would you submit unworkably slow code for code review?"}, {"owner": {"reputation": 5466, "user_id": 1803692, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/umD6Q.jpg?s=128&g=1", "display_name": "Vogel612", "link": "https://stackoverflow.com/users/1803692/vogel612"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1465334747, "post_id": 37689419, "comment_id": 62856066, "body": "@user2357112 actually Code Review considers code that&#39;s provably correct, but slow &quot;working&quot;. Time is not always a criterion of &quot;working&quot;. Some people don&#39;t even have the luxury of codereviews at their jobs (<i>~shudder</i>). Additionally CodeReview.SE has the tags <a href=\"https://stackoverflow.com/questions/tagged/time-limit-exceeded\">time-limit-exceeded</a> and <a href=\"https://stackoverflow.com/questions/tagged/performance\">performance</a>. Such questions are on-topic there."}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465334801, "post_id": 37689419, "comment_id": 62856090, "body": "This is controversial, I know, but I think @user2357112 has a point."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465334859, "post_id": 37689419, "comment_id": 62856111, "body": "So is this the &quot;why is my code slow&quot; equivalent of &quot;why is my code not working&quot;?"}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 4, "creation_date": 1465334861, "post_id": 37689419, "comment_id": 62856114, "body": "I refered to <a href=\"http://codereview.stackexchange.com/help/on-topic\">codereview help</a> and I&#39;m not sure this question is suitable there."}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465334960, "post_id": 37689419, "comment_id": 62856151, "body": "@WeatherVane, I don&#39;t think so, because I know why it&#39;s slow (: I just don&#39;t know exactly how to make it better."}], "answers": [{"comments": [{"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335116, "post_id": 37689685, "comment_id": 62856203, "body": "I don&#39;t see how this can allow me to unest the loops. Could you be more specific? (:"}, {"owner": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "reply_to_user": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335324, "post_id": 37689685, "comment_id": 62856289, "body": "@HenriqueBarcelos It&#39;s less about figuring out how to &quot;un-nest&quot; the loop and more about optimizing the algorithm itself by not doing unneeded operations. As a clue, I think you&#39;re going to need one more variable outside of the loop and a couple of branches... I don&#39;t know what more I can say without giving out the answer. Try to give it a think, it&#39;ll hit you :)"}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335476, "post_id": 37689685, "comment_id": 62856365, "body": "The only unneeded operation I can see right the way is that I&#39;m setting <i>all counters</i> to <code>maxCounter</code>. The alternative would be to verify if I need to do this, but I think a comparison operation takes more CPU time than an attribution one."}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335511, "post_id": 37689685, "comment_id": 62856381, "body": "What do you mean by &quot;keep track of the value you meant to reset the array elements&quot;?"}, {"owner": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "reply_to_user": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335895, "post_id": 37689685, "comment_id": 62856536, "body": "@HenriqueBarcelos What I meant is that instead of setting all counters to the same value, just remember that value. Next time you want to increment a counter, check against this value to figure out how to update the counter."}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465335965, "post_id": 37689685, "comment_id": 62856565, "body": "Got it! this seems promising"}, {"owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 0, "creation_date": 1465336501, "post_id": 37689685, "comment_id": 62856775, "body": "But I&#39;d still have to iterate over the elements because I&#39;d have to store the difference to the <code>maxCounter</code> for each one."}, {"owner": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "reply_to_user": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "edited": false, "score": 1, "creation_date": 1465336851, "post_id": 37689685, "comment_id": 62856922, "body": "@HenriqueBarcelos I don&#39;t think you have to. You can infer a value of any counter just by comparing it to the value maxCounter was set to at the time you got the &quot;max counter&quot; command."}], "tags": [], "owner": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "is_accepted": false, "score": 3, "last_activity_date": 1465335961, "last_edit_date": 1465335961, "creation_date": 1465334869, "answer_id": 37689685, "question_id": 37689419, "link": "https://stackoverflow.com/questions/37689419/decreasing-asymptotic-time-complexity/37689685#37689685", "title": "Decreasing asymptotic time complexity", "body": "<p>You are on the right track by updating the maxCounter value as you go, instead of calculating it from scratch when you actually need it. A somewhat similar tactic might work for the problem of setting all counters to the current maximum. What if you keep track of the value you meant to reset the counters to, but only do so when it is really necessary?</p>\n"}, {"comments": [{"owner": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "edited": false, "score": 3, "creation_date": 1465339576, "post_id": 37690463, "comment_id": 62857827, "body": "I believe you don&#39;t need any extra per-counter record at all. Since the only other operation done on the counters is a simple increment, you can tell whether a previous MAX operation was done on it already by comparing it to the global maximum at that time. If it&#39;s less, you store last_global_max + 1, otherwise you increment as usual."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 854, "user_id": 2044117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0d3500dd9fb77acd5ad0addb2cd65c?s=128&d=identicon&r=PG&f=1", "display_name": "Quinchilion", "link": "https://stackoverflow.com/users/2044117/quinchilion"}, "edited": false, "score": 0, "creation_date": 1465365354, "post_id": 37690463, "comment_id": 62864219, "body": "@Quinchilion, you are right.  I have added a description of that alternative to my answer."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1465392540, "last_edit_date": 1465392540, "creation_date": 1465338623, "answer_id": 37690463, "question_id": 37689419, "link": "https://stackoverflow.com/questions/37689419/decreasing-asymptotic-time-complexity/37690463#37690463", "title": "Decreasing asymptotic time complexity", "body": "<p>The loop nesting is a <em>symptom</em> of your problem, not the cause.  The essential problem here is that there can be <em>O</em>(<code>N</code>) non-trivial <code>MAX</code> operations, so you cannot afford for more than <em>O</em>(<code>1</code>) of them to have a cost exceeding <em>O</em>(<code>1</code>).  Whether you loop or not, either testing or updating the value of all <code>M</code> counters costs <em>O</em>(<code>M</code>), so if you implement the <code>MAX</code> operation in a way that requires doing one or both of those in the normal case, then the overall cost is <em>o</em>(<code>N</code>*<code>M</code>).</p>\n\n<p>Supposing that you track the global maximum as you update counters, as indeed you do, you can implement <code>MAX</code> in a manner that does not process all the counters immediately.  Instead, you can keep a record of the time when a <code>MAX</code> operation was most recently applied, the global maximum at that time, and a per-counter record of when a <code>MAX</code> operation was last applied <em>to that counter</em>.</p>\n\n<p>In that event, whenever you perform an update on a particular counter, you can check whether there was a previous <code>MAX</code> operation that needs to be applied to it first, and what value to apply.  All of that is <em>O</em>(<code>1</code>), so the cost of each update remains <em>O</em>(<code>1</code>).  The <code>MAX</code> operation itself requires only updating two scalars, so that also is <em>O</em>(<code>1</code>).  Processing all the instructions therefore costs <em>O</em>(<code>M</code>).  At the end, you must make one pass through the counters to apply any remaining un-applied <code>MAX</code> operations; this costs <em>O</em>(<code>1</code>) for each of <code>N</code> counters.  Overall cost: <em>O</em>(<code>N</code>+<code>M</code>).</p>\n\n<p>Note that this exhibits a classic space vs. speed tradeoff.  The simple-minded approach to the problem has <em>O</em>(<code>1</code>) memory overhead, but worse asymptotic complexity in terms of number of operations.  The alternative solution outlined above has better asymptotic complexity in number of operations, but requires <em>O</em>(<code>N</code>) memory overhead.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>But as @Quinchilion rightly observes, you can do even better.  Consider that the correct current value of each counter is the value set by the last <code>MAX</code> operation plus the number of increments performed on that counter since the last <code>MAX</code>.  No counter's value ever decreases.  Therefore, we don't need to explicitly track the timing of <code>MAX</code> operations -- the most recent value recorded for each counter inherently indicates whether the last <code>MAX</code> still needs to be applied.  If it is less than the maximum counter value recorded at the time of the latest <code>MAX</code>, then that <code>MAX</code> has to be applied before the increment; otherwise, not.  This can be combined with the approach described above to eliminate the need for an auxiliary array.</p>\n"}, {"tags": [], "owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "is_accepted": true, "score": 1, "last_activity_date": 1465394369, "last_edit_date": 1465394369, "creation_date": 1465393973, "answer_id": 37704513, "question_id": 37689419, "link": "https://stackoverflow.com/questions/37689419/decreasing-asymptotic-time-complexity/37704513#37704513", "title": "Decreasing asymptotic time complexity", "body": "<p>I'd like to thank you @Quinchilion and @JohnBollinger very much for your thorough analysis of the problem.</p>\n\n<p>I've found an answer that passes both the correctness and performance tests. Here it is, fully commented:</p>\n\n<pre><code>struct Results solution(int N, int A[], int M) {\n    struct Results result;\n\n    int i,\n        maxCounter = 0,\n        lastMaxCounter = 0;\n\n    result.C = calloc(N, sizeof(int));\n\n    result.L = N;\n\n    /* One way or another, We have to iterate over all the counter  \n     * operations input array, which gives us an O(M) time...\n     */\n    for (i = 0; i &lt; M; i++) {\n        /* There is a little gotcha here. The counter operations\n         * input array is 1-based, while our native C arrays are 0-based.\n         * So, in order check if we have a `increment` or a `max counters`\n         * operation, we have to consider the interval ]0, N].\n         */\n        if (A[i] &gt; 0 &amp;&amp; A[i] &lt;= N) {\n            /* This is an `increment` operation.\n             *\n             * First we need to check if there is no pending `max counter`\n             * operation in this very counter.\n             * This is done by checking if the value of current counter is\n             * **less than** the value of `lastMaxCounter`.\n             */\n            if (result.C[A[i] - 1] &lt; lastMaxCounter) {\n                /* If it is, means that we have to discard the counter's\n                 * current value and increment it from the value of\n                 * `lastMaxCounter`.\n                 */\n                result.C[A[i] - 1] = lastMaxCounter + 1;\n            } else {\n                /* If it ain't, we just increment this counter's value.\n                 */\n                result.C[A[i] - 1]++;\n            }\n\n            /* We also want to keep track of the maximum counter value.\n             */\n            if (result.C[A[i] - 1] &gt; maxCounter) {\n                maxCounter = result.C[A[i] - 1];\n            }\n        } else {\n            /* This is a `max counter` operation.\n             * \n             * What we need to do is buffer the current `maxCounter`\n             * in order to be able to update the counters later.\n             */\n            lastMaxCounter = maxCounter;\n        }\n    }\n\n    /* At this point, if all counters have been incremented at least \n     * once after the last `max counter` operation, we are good to go.\n     *\n     * Since this is a rather pretentious assumption, we need to\n     * double check it.\n     *\n     * We iterate over all counters, checking if any of them is lower\n     * than the buffered `lastMaxCounter`. If it is, it means that no\n     * `increment` was performed on this counter after the last\n     * `max counter`, so this means that its value should be equal\n     * to `lastMaxCounter`.\n     *\n     * This is an O(N) operation.\n     *\n     * So, the algorithm's time complexity is O(N) + O(M) = O(N+M)\n     * and the space complexity is O(N).\n     */\n    for (i = 0; i &lt; N; i++) {\n        if (result.C[i] &lt; lastMaxCounter) {\n            result.C[i] = lastMaxCounter;\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 7084, "user_id": 1798341, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/9ad6340e7a0d020db85c9a3343b709c7?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Barcelos", "link": "https://stackoverflow.com/users/1798341/henrique-barcelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 37704513, "answer_count": 3, "score": 2, "last_activity_date": 1465394369, "creation_date": 1465333800, "last_edit_date": 1465335869, "question_id": 37689419, "link": "https://stackoverflow.com/questions/37689419/decreasing-asymptotic-time-complexity", "title": "Decreasing asymptotic time complexity", "body": "<p>First of all, sorry about the rather extensive question.</p>\n\n<p>I'm practicing my algorithm skills in codility. Currently, I'm trying to find a solution to <a href=\"https://codility.com/demo/take-sample-test/max_counters/\" rel=\"nofollow\">this problem</a>.</p>\n\n<blockquote>\n  <p>You are given N counters, initially set to 0, and you have two\n  possible operations on them:</p>\n  \n  <ul>\n  <li>increase(X) \u2212 counter X is increased by 1,</li>\n  <li>max counter \u2212 all counters are set to the maximum value of any counter.</li>\n  </ul>\n  \n  <p>A non-empty zero-indexed array A of M integers is given. This\n  array represents consecutive operations:</p>\n  \n  <ul>\n  <li>if A[K] = X, such that 1 \u2264 X \u2264 N, then operation K is increase(X),</li>\n  <li>if A[K] = N + 1 then operation K is max counter.</li>\n  </ul>\n  \n  <p>For example, given integer N = 5 and array A such that:</p>\n\n<pre><code>A[0] = 3\nA[1] = 4\nA[2] = 4\nA[3] = 6\nA[4] = 1\nA[5] = 4\nA[6] = 4\n</code></pre>\n  \n  <p>the values of the counters after each consecutive operation will be:</p>\n\n<pre><code>(0, 0, 1, 0, 0)\n(0, 0, 1, 1, 0)\n(0, 0, 1, 2, 0)\n(2, 2, 2, 2, 2)\n(3, 2, 2, 2, 2)\n(3, 2, 2, 3, 2)\n(3, 2, 2, 4, 2) \n</code></pre>\n  \n  <p>The goal is to calculate the value of every counter after all operations.</p>\n  \n  <p>Assume that the following declarations are given:</p>\n\n<pre><code>struct Results {\n  int * C;\n  int L;\n};\n</code></pre>\n  \n  <p>Write a function:</p>\n\n<pre><code>struct Results solution(int N, int A[], int M);\n</code></pre>\n  \n  <p>that, given an integer N and a non-empty zero-indexed array A\n  consisting of M integers, returns a sequence of integers representing\n  the values of the counters.</p>\n  \n  <p>The sequence should be returned as:</p>\n  \n  <ul>\n  <li>a structure Results (in C), or</li>\n  <li>a vector of integers (in C++), or</li>\n  <li>a record Results (in Pascal), or</li>\n  <li>an array of integers (in any other programming language).</li>\n  </ul>\n  \n  <p>For example, given:</p>\n\n<pre><code>A[0] = 3\nA[1] = 4\nA[2] = 4\nA[3] = 6\nA[4] = 1\nA[5] = 4\nA[6] = 4\n</code></pre>\n  \n  <p>the function should return <code>[3, 2, 2, 4, 2]</code>, as explained above.</p>\n  \n  <p>Assume that:</p>\n  \n  <p>N and M are integers within the range [1..100,000]; each element of\n  array A is an integer within the range [1..N + 1].</p>\n  \n  <p>Complexity:</p>\n  \n  <ul>\n  <li>expected worst-case time complexity is O(N+M); </li>\n  <li>expected worst-case space complexity is O(N), beyond input storage (not counting the    storage required for input arguments).</li>\n  </ul>\n  \n  <p>Elements of input arrays can be modified.</p>\n</blockquote>\n\n<hr>\n\n<p>Here is my attempt in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>:</p>\n\n<pre><code>struct Results solution(int N, int A[], int M) {\n    struct Results result;\n    int i, j,\n        maxCounter = 0;\n\n    result.C = calloc(N, sizeof(int));\n\n    result.L = N;\n\n    for (i = 0; i &lt; M; i++) {\n        if (A[i] &lt;= N) {\n            result.C[A[i] - 1]++;\n            if (result.C[A[i] - 1] &gt; maxCounter) {\n                maxCounter = result.C[A[i] - 1];\n            }\n        } else {\n            for (j = 0; j &lt; N; j++) {\n                result.C[j] = maxCounter;\n            }\n        }\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>The solution <strong>does work</strong>, but it fails on some performance tests. The issue is this algorithm is <code>O(N*M)</code> because of the nested loops. The problem states that the complexity in worst case should be <code>O(N+M)</code>.</p>\n\n<p>I had some ideas of how unnest the loops, like storing how many times the <code>max counters</code> operation took place and somehow figuring out the proper way to sum it to the counters, but I couldn't materialize it.</p>\n\n<p>Another possibility would be to find a way of setting all elements in <code>struct.C</code> at once, using something like <code>memset</code>, but I think this would be cheating.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c", "binary", "ieee-754", "16-bit"], "comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 2, "creation_date": 1465332975, "post_id": 37689142, "comment_id": 62855262, "body": "You missed %, + and / which are also arithmetic operations. But why?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1465332983, "post_id": 37689142, "comment_id": 62855265, "body": "If your function is to return an <code>int</code>, then in what sense do you expect that value to be decimal rather than binary?"}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1465333152, "post_id": 37689142, "comment_id": 62855341, "body": "You should double-check your requirements. You may be expected to produce a string or array of digit characters, rather than an int. As for the conversion, you could do it with shifts and masks, though it&#39;s tricky for base 10 (not being a power of 2)."}, {"owner": {"reputation": 83, "user_id": 5982851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5a38793a8a4775ca4f9ae06ff069c859?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Penguin", "link": "https://stackoverflow.com/users/5982851/code-penguin"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1465333204, "post_id": 37689142, "comment_id": 62855368, "body": "@gnasher729 forgot to include that +/- is allowed but the others are not.   John I want to convert from binary to decimal, which is an int if I&#39;m not mistaken (If im following you correctly here)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465333342, "post_id": 37689142, "comment_id": 62855429, "body": "Please show the definition of <code>bit16</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465333348, "post_id": 37689142, "comment_id": 62855430, "body": "What&#39;s <code>bit16</code> type? Wouldn&#39;t <code>dec=x</code> do what you want?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465333443, "post_id": 37689142, "comment_id": 62855469, "body": "Update: Yes, it definitely will. A classical confusion of beginners."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465333443, "post_id": 37689142, "comment_id": 62855470, "body": "@Code_Penguin, an <code>int</code> is no more decimal than any other arithmetic type, which apparently includes <code>bit16</code>.  C defines the representations of integral types in terms of a collection of bits."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1465333449, "post_id": 37689142, "comment_id": 62855473, "body": "Please remove the <code>IEEE</code> tag."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465333551, "post_id": 37689142, "comment_id": 62855527, "body": "This is either an X-Y question, or misunderstood premise."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465333586, "post_id": 37689142, "comment_id": 62855547, "body": "@WeatherVane It&#39;s neither. It&#39;s a misunderstood concept."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1465333588, "post_id": 37689142, "comment_id": 62855550, "body": "k is not initialized"}, {"owner": {"reputation": 83, "user_id": 5982851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5a38793a8a4775ca4f9ae06ff069c859?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Penguin", "link": "https://stackoverflow.com/users/5982851/code-penguin"}, "edited": false, "score": 0, "creation_date": 1465333713, "post_id": 37689142, "comment_id": 62855627, "body": "I&#39;ve updated with some more details, perhaps now it&#39;ll be more clear. Sorry for the confusion!"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1465333793, "post_id": 37689142, "comment_id": 62855668, "body": "Define &quot;integer representation&quot;.  Do you mean a character string containing a sequence of decimal digits?  If not, then what?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1465333833, "post_id": 37689142, "comment_id": 62855689, "body": "@Code_Penguin <code>0x4A</code> <i>is</i> <code>74</code>. They denote absolutely the same literals in C. Try to <code>printf</code> your <code>bit16</code> and you will see."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465333882, "post_id": 37689142, "comment_id": 62855708, "body": "@Code_Penguin, the confusion is all yours.  The premise of the question is mistaken."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465333913, "post_id": 37689142, "comment_id": 62855725, "body": "Also, <code>0x4A</code> is not a <i>binary</i> representation.  It is hexadecimal."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465333914, "post_id": 37689142, "comment_id": 62855726, "body": "@EugeneSh. even the high-rep John Bollinger uses the word &quot;premise&quot;."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465333989, "post_id": 37689142, "comment_id": 62855750, "body": "@WeatherVane Well, our reps are not for linguistics :)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465334045, "post_id": 37689142, "comment_id": 62855778, "body": "@EugeneSh. no they are for ideas and mine was (were?) not wrong."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1465334099, "post_id": 37689142, "comment_id": 62855802, "body": "Voting to close.  The question is utterly ill-defined.  The desired return value has not been specified.  How is the decimal representation meant to be encoded?  As a string?  Packed into an integer with no convenient way to decode it?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1465338071, "post_id": 37689142, "comment_id": 62857365, "body": "@TomKarzes the OP mentioned + and  - can be used and I think it&#39;s not I&#39;ll defined"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1465343913, "post_id": 37689142, "comment_id": 62858895, "body": "@CherubimAnand It has nothing to do with the restrictions on which operators can be used.  Read my comments.  It has to do with what the output is.  One more time:  Is it supposed to be a character string?  If not, then what in the world does &quot;base 10&quot; mean in the context of an integer?  Look at OP&#39;s example:  If 0x4a is passed as the argument, then 74 should be returned.  But they&#39;re <i>the same number</i>.  So just <code>return x;</code> is all that&#39;s needed.  It makes no sense."}], "answers": [{"comments": [{"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1465333042, "post_id": 37689221, "comment_id": 62855290, "body": "You could use a really large switch statement :-)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1465333126, "post_id": 37689221, "comment_id": 62855325, "body": "And in what sense is the returned <b><code>int</code></b> decimal if the input is to be considered non-decimal?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1465338775, "post_id": 37689221, "comment_id": 62857608, "body": "I don&#39;t think it&#39;s difficult... If OP could write down functions for + and - using binary operators and rest in the way I&#39;ve using those functions to add and subtract... I think it&#39;s not hard"}], "tags": [], "owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "is_accepted": false, "score": 1, "last_activity_date": 1465333013, "creation_date": 1465333013, "answer_id": 37689221, "question_id": 37689142, "link": "https://stackoverflow.com/questions/37689142/converting-from-binary-to-decimal-without-using-arithmetic-operations/37689221#37689221", "title": "Converting from Binary to Decimal without using arithmetic operations", "body": "<p>Since <code>+</code> is also an arithmetic operation, it becomes difficult. Depending on the exact rules, using a lookup table might be acceptable: <code>return lookuptable[x];</code></p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1465333855, "post_id": 37689410, "comment_id": 62855700, "body": "Ignoring for the moment the question&#39;s mistaken premise, why do you suppose the <code>+</code> part of <code>+=</code> would be permitted if arithmetic operations are to be avoided?"}, {"owner": {"reputation": 83, "user_id": 5982851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5a38793a8a4775ca4f9ae06ff069c859?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Penguin", "link": "https://stackoverflow.com/users/5982851/code-penguin"}, "edited": false, "score": 0, "creation_date": 1465334029, "post_id": 37689410, "comment_id": 62855767, "body": "+/- are permitted, they&#39;re the only exceptions in the question"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465334047, "post_id": 37689410, "comment_id": 62855779, "body": "Didn&#39;t Op mention in the last line than he can use + / and - @JohnBollinger see the last line"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465334270, "post_id": 37689410, "comment_id": 62855873, "body": "@CherubimAnand, fair enough -- the OP has an odd definition of &quot;arithmetic operation&quot;.  Nevertheless, although you provide a way to work around the disallowed multiplication he asks about, there are still the <code>&#47;</code> and <code>%</code> that he seems to be overlooking."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465334407, "post_id": 37689410, "comment_id": 62855924, "body": "Ya I&#39;ve done the % @JohnBollinger"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465334776, "post_id": 37689410, "comment_id": 62856081, "body": "Now I&#39;ve provided for all of them @JohnBollinger"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1465335043, "post_id": 37689410, "comment_id": 62856179, "body": "I do think this is entirely missing the point, but I lifted my DV."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1465335079, "post_id": 37689410, "comment_id": 62856195, "body": "Ya fixed it @RolandIllig thanks for mention"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1465337443, "post_id": 37689410, "comment_id": 62857119, "body": "@RolandIllig ya i was doing it but we had a power cut :(... Fixed it thanks"}], "tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": true, "score": -1, "last_activity_date": 1465339096, "last_edit_date": 1465339096, "creation_date": 1465333776, "answer_id": 37689410, "question_id": 37689142, "link": "https://stackoverflow.com/questions/37689142/converting-from-binary-to-decimal-without-using-arithmetic-operations/37689410#37689410", "title": "Converting from Binary to Decimal without using arithmetic operations", "body": "<p>As + and - are allowed...Instead of multiplying into <code>k*reamainder</code> try looping this way</p>\n\n<pre><code>int n;//consider new int\n</code></pre>\n\n<p>In the while loop write first line as</p>\n\n<pre><code>n=remainder;\n</code></pre>\n\n<p>Instead of * </p>\n\n<pre><code>for(i=0;i&lt;k;i++)\n    remainder+=n;\n</code></pre>\n\n<p>This would do the multiplication :). </p>\n\n<p>And for x%10, construct a function</p>\n\n<pre><code>int mod(int n)\n{\n   int m;\n   while(n&gt;0)\n   {\n      n=n-10;\n      m=n;\n    }\n   return m;\n}\n</code></pre>\n\n<p>And for x/10 it'd be the same but you must return number of times you subtracted like this :</p>\n\n<pre><code>int mod(int n)\n{\n   int count=0;\n   while(n&gt;0)\n   {\n      count=count+1;\n      n=n-10;\n   }\n   return count;\n}\n</code></pre>\n\n<p>edit : If + and - are also not allowed try making functions for them using binary operators and use them instead of + and - in the above answer!</p>\n"}], "owner": {"reputation": 83, "user_id": 5982851, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5a38793a8a4775ca4f9ae06ff069c859?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Penguin", "link": "https://stackoverflow.com/users/5982851/code-penguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "closed_date": 1465338851, "accepted_answer_id": 37689410, "answer_count": 2, "score": 1, "last_activity_date": 1465339096, "creation_date": 1465332771, "last_edit_date": 1465333731, "question_id": 37689142, "link": "https://stackoverflow.com/questions/37689142/converting-from-binary-to-decimal-without-using-arithmetic-operations", "closed_reason": "Needs details or clarity", "title": "Converting from Binary to Decimal without using arithmetic operations", "body": "<p>I had this written until i realized * is an arithmetic operation.</p>\n\n<p>I want to return a nonnegative integer representation of the binary sequence input. IE. 0x4a returns 74 in decimal </p>\n\n<pre><code>typedef unsigned bit16;\n\nunsigned int bin_to_dec(bit16 x)\n{\nint dec=0;\nint k=0;\nint remainder;\n\nwhile (x!= 0){\n    remainder = x%10;\n    dec+=remainder*k;\n    k=k+2;\n    x=x/10;\n}\n</code></pre>\n\n<p>:(</p>\n\n<p>How would I go about this conversion if I can't use arithmetic operations other than +/-?</p>\n"}, {"tags": ["c++", "c", "cpu-cache"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1465331265, "post_id": 37688698, "comment_id": 62854498, "body": "which cache ? L1 or L2 or L3 ? or size of cache line ?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 5, "creation_date": 1465331552, "post_id": 37688698, "comment_id": 62854645, "body": "Cache size is not generally part of the ISA, nor of ISA-extensions. Also, cache is characterized by much more than size. Associativity, eviction policy, write-back/write-through, level, number of processors/cores/hardware-threads that share the cache..."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1465332088, "post_id": 37688698, "comment_id": 62854903, "body": "Forgot to mention: d-cache/i-cache/unified cache, virtually/physically indexed/tagged, coherent/non-coherent (and which coherence-protocol if any), interaction with TLB(size, levels, hardware/software-refill), cache-line size."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1465333657, "post_id": 37688698, "comment_id": 62855596, "body": "What should happen when I take your program compiled on an i7 with 6MB L2 cache and run it on an i5 with 4MB L2 cache?"}, {"owner": {"reputation": 366, "user_id": 2718503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71a9d3538627b82a92236e6f5689fdd?s=128&d=identicon&r=PG&f=1", "display_name": "amigadev", "link": "https://stackoverflow.com/users/2718503/amigadev"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1465543579, "post_id": 37688698, "comment_id": 62954803, "body": "@immibis Difficult to answer, either there will be no difference because it is very hard to control an algorithm to this point to match with implementation detais of the cache, or maybe his optimization will be counter productive on other CPUs."}, {"owner": {"reputation": 366, "user_id": 2718503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71a9d3538627b82a92236e6f5689fdd?s=128&d=identicon&r=PG&f=1", "display_name": "amigadev", "link": "https://stackoverflow.com/users/2718503/amigadev"}, "edited": false, "score": 0, "creation_date": 1465543780, "post_id": 37688698, "comment_id": 62954910, "body": "@hr0m Even if it is not provided by the compiler, you can make decisions in your code at runtime reading caches topology from <code>&#47;sys&#47;devices&#47;system&#47;cpu&#47;cpu0&#47;cache&#47;</code>."}, {"owner": {"reputation": 2256, "user_id": 2329365, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f9ae77df0d9ea5a75e379d2f6904e9a1?s=128&d=identicon&r=PG", "display_name": "hr0m", "link": "https://stackoverflow.com/users/2329365/hr0m"}, "reply_to_user": {"reputation": 366, "user_id": 2718503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71a9d3538627b82a92236e6f5689fdd?s=128&d=identicon&r=PG&f=1", "display_name": "amigadev", "link": "https://stackoverflow.com/users/2718503/amigadev"}, "edited": false, "score": 0, "creation_date": 1465576863, "post_id": 37688698, "comment_id": 62976112, "body": "@amigadev yes i know that i can read it out per hand with a script during compile time or runtime. But that is not the answer to my question. The question remains: Can do compiler do that for me?"}, {"owner": {"reputation": 366, "user_id": 2718503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71a9d3538627b82a92236e6f5689fdd?s=128&d=identicon&r=PG&f=1", "display_name": "amigadev", "link": "https://stackoverflow.com/users/2718503/amigadev"}, "edited": false, "score": 0, "creation_date": 1465802883, "post_id": 37688698, "comment_id": 63034777, "body": "@hr0m Not only with a script, your program itself can read these entries and adapt the algorithm accordingly. I think the only thing that is done by the compiler about the cache is the alignment of functions and loops on the cache line size. Optimization by the compiler and related to a given CPU is about instructions (specific instructions, scheduling, ...)."}], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1465590807, "post_id": 37756624, "comment_id": 62982827, "body": "Taking a quick look it seems like this library still does everything at runtime"}, {"owner": {"reputation": 2256, "user_id": 2329365, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f9ae77df0d9ea5a75e379d2f6904e9a1?s=128&d=identicon&r=PG", "display_name": "hr0m", "link": "https://stackoverflow.com/users/2329365/hr0m"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1465592265, "post_id": 37756624, "comment_id": 62983436, "body": "@vu1p3n0x damn i haven&#39;t took a look, you are right"}], "tags": [], "owner": {"reputation": 2256, "user_id": 2329365, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f9ae77df0d9ea5a75e379d2f6904e9a1?s=128&d=identicon&r=PG", "display_name": "hr0m", "link": "https://stackoverflow.com/users/2329365/hr0m"}, "is_accepted": false, "score": 2, "last_activity_date": 1465592306, "last_edit_date": 1465592306, "creation_date": 1465590146, "answer_id": 37756624, "question_id": 37688698, "link": "https://stackoverflow.com/questions/37688698/cache-information-given-by-compiler-during-compile-time/37756624#37756624", "title": "Cache information given by compiler during compile time", "body": "<p>Apparently, no compiler is capable of having such detailed information about a cpu AND making it available to the compiling program. However i have found a <a href=\"https://github.com/anrieff/libcpuid\" rel=\"nofollow\">library</a>, which seems to do exactly that. Sadly again only at runtime. However it is at least a comfortable solution.</p>\n\n<p>(I found it by accident. I was not looking for it :) If you ever look for something, 1) google 2) look <a href=\"https://github.com/jnv/lists\" rel=\"nofollow\">here</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1465594372, "creation_date": 1465594372, "answer_id": 37757446, "question_id": 37688698, "link": "https://stackoverflow.com/questions/37688698/cache-information-given-by-compiler-during-compile-time/37757446#37757446", "title": "Cache information given by compiler during compile time", "body": "<p>You can compile several versions of your library for various cache sizes and then pick them dynamically. That is the only possible approach for adding cache size info at compile-time.</p>\n"}], "owner": {"reputation": 2256, "user_id": 2329365, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f9ae77df0d9ea5a75e379d2f6904e9a1?s=128&d=identicon&r=PG", "display_name": "hr0m", "link": "https://stackoverflow.com/users/2329365/hr0m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1465594372, "creation_date": 1465331203, "last_edit_date": 1465378519, "question_id": 37688698, "link": "https://stackoverflow.com/questions/37688698/cache-information-given-by-compiler-during-compile-time", "title": "Cache information given by compiler during compile time", "body": "<p>In order to check whether AVX or SSE is available, the compiler usually sets <strong>SSE</strong> or <strong>AVX</strong> true. However is there an option, how to receive during compile time the size of the cache?</p>\n\n<p>Edit:\nI refrase the question a little bit, since it is not clear enough.</p>\n\n<p>I want information about the cache during compile time. The more the better. I would like to have it for optimization purposes (i.e. cache-blocking,...). In my current task - spatial blocking - the size of the cache is mostly relevant. But the comments bellow rightly asked, which level of cache am i asking for. In addition caches can behave very differrently, if you consider their evicting strategy, size of cache line, amount of levels, how they are shared between cores... The list goes on.</p>\n\n<p>So my general question: How do i recieve any information about the cache during compile time?</p>\n\n<p>For my current task, it would be sufficient to readout <code>/proc/cpuinfo</code> and use the cachesize given there. However the general question is far more interesting.</p>\n\n<p>How do i recieve information about the cpu (with focus on its cache) during compile time?</p>\n\n<p>(I am not considering of crosscompiling at all. The code compiled will be run on the SAME machine.)</p>\n"}, {"tags": ["c", "linux", "serial-port", "usb"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1465331679, "post_id": 37688676, "comment_id": 62854707, "body": "You are operating some weird terms. Do you mean you want to automatically load the device driver once the USB is plugged in? Then look for <code>udev</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1465345446, "post_id": 37688823, "comment_id": 62859225, "body": "<i>&quot;a USB controller that can be set to operate as a USB device&quot;</i> -- More often you&#39;ll find dedicated Host or Device USB controller ports.  BTW if the target board has USB type B connector, then it should have a USB Device controller port.  If the target board has USB type C (aka OTG) connector, then it could have a USB Device controller port."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1465351067, "post_id": 37688823, "comment_id": 62860361, "body": "@sawdust It depends more on the SoC than the ports. To reuse an example, the Pi Zero has a micro-USB (type B) port for size reasons, but acts as a host by default."}, {"owner": {"reputation": 621, "user_id": 632469, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UKtpF.jpg?s=128&g=1", "display_name": "Bruce Chidester", "link": "https://stackoverflow.com/users/632469/bruce-chidester"}, "edited": false, "score": 0, "creation_date": 1465356114, "post_id": 37688823, "comment_id": 62861437, "body": "Much helpful info here...I will investigate some of the details and return to your advice."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1465367684, "post_id": 37688823, "comment_id": 62865292, "body": "<i>&quot;Pi Zero has a micro-USB (type B) port&quot;</i> -- I&#39;ve seen it described as an OTG port, which should mean that&#39;s a type C, not B."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1465372991, "post_id": 37688823, "comment_id": 62868404, "body": "@sawdust USB OTG has existed for much longer (15 years) than the type C connector (under 2 years)."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1465424945, "post_id": 37688823, "comment_id": 62901558, "body": "Okay thanks for explaining that.  So the OTG port could have a type AB or C connector, because using a type B for a Host connection seems contrary to USB convention."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1465430522, "post_id": 37688823, "comment_id": 62903282, "body": "It&#39;s a bit more complicated than that. Read <a href=\"https://en.wikipedia.org/wiki/USB_On-The-Go\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/USB_On-The-Go</a> for details, but in short, USB OTG is always on a USB type B mini or micro connector. USB C replaces the On-The-Go specification, so it&#39;s technically something else."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 3, "last_activity_date": 1465331646, "creation_date": 1465331646, "answer_id": 37688823, "question_id": 37688676, "link": "https://stackoverflow.com/questions/37688676/linux-serial-device-server-over-usb/37688823#37688823", "title": "Linux Serial Device Server over USB?", "body": "<p>What you are looking for is the <a href=\"https://kernel.org/doc/Documentation/usb/gadget_serial.txt\" rel=\"nofollow\">Linux USB serial gadget</a>. The Linux USB gadgets framework allows devices to behave as a variety of standard USB devices, including serial devices, Ethernet adapters, and mass storage devices.</p>\n\n<p>Note that USB gadgets will only work on targets with a USB controller that can be set to operate as a USB device. Not all USB controllers and target devices are compatible with this configuration. For instance, most PCs have a host-only USB controller, and the Raspberry Pi Model B is <em>not</em> compatible with gadgets because it contains an embedded USB hub upstream of the USB ports. (However, <a href=\"https://learn.adafruit.com/turning-your-raspberry-pi-zero-into-a-usb-gadget/overview\" rel=\"nofollow\">the Pi Zero is fully compatible with gadgets</a>.)</p>\n"}], "owner": {"reputation": 621, "user_id": 632469, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UKtpF.jpg?s=128&g=1", "display_name": "Bruce Chidester", "link": "https://stackoverflow.com/users/632469/bruce-chidester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465331646, "creation_date": 1465331110, "question_id": 37688676, "link": "https://stackoverflow.com/questions/37688676/linux-serial-device-server-over-usb", "title": "Linux Serial Device Server over USB?", "body": "<p>I have an embedded Linux solution and want to create a command service over serial USB. The idea being that when a computer connects to my embedded via USB, they see a serial device and send serial commands to me through that port and I send responses back.</p>\n\n<p>I need some help in the direction to proceed. Do I need to emulate a serial device so they see me as a COM port? Is there build in Linux solutions to broadcast my details as a serial device? Are there code examples? I can see block devices connect with my embedded solution like a USB storage device. When I plug into another computer, I would like it to see me as a serial COM port.</p>\n\n<p>I just need help in the direction of which path I should go down to solve this.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "postgresql", "postgresql-9.3", "postgresql-9.4"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465331019, "post_id": 37688437, "comment_id": 62854374, "body": "I will not follow links within links. Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> which shows what you have tried. And, &quot;I don&#39;t think it is working&quot; does not adequately describe the problem."}, {"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465332771, "post_id": 37688437, "comment_id": 62855169, "body": "Sorry for the confusion. I am only trying to run the demo example given. They have created a schema and a table initially. And then through a background worker they are deleting and updating the rows from the table. Upon the initial creation of table, a log message is also being printed."}, {"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1465332843, "post_id": 37688437, "comment_id": 62855201, "body": "I am not able to see any schema or table once I run the SQL script. Also, what is the default log file location of postgreSQL?"}, {"owner": {"reputation": 1038, "user_id": 4196282, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002952351779/picture?type=large", "display_name": "Jim Nasby", "link": "https://stackoverflow.com/users/4196282/jim-nasby"}, "edited": false, "score": 0, "creation_date": 1465336169, "post_id": 37688437, "comment_id": 62856651, "body": "You need to run make install, and I don&#39;t know if this will play nice with a system Postgres (one not built from your code checkout). And you probably shouldn&#39;t be running worker_spi by hand, but instead doing CREATE EXTENSION."}, {"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "edited": false, "score": 0, "creation_date": 1465337919, "post_id": 37688437, "comment_id": 62857303, "body": "Thanks. But do I need to copy worker_spi.so to some other directory of postgres?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "edited": false, "score": 0, "creation_date": 1465397321, "post_id": 37692043, "comment_id": 62885635, "body": "Thanks for the explanation. That makes much more sense now.  I copied the respective files to the following locations:   &quot;/usr/pgsql-9.4/share/extension&quot; and  &quot;/usr/pgsql-9.4/lib&quot;  I then restarted the postgres server. Finally, when I am trying to create the required extension, it is not being created. Is there still something else that I need to do?"}, {"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "edited": false, "score": 0, "creation_date": 1465398413, "post_id": 37692043, "comment_id": 62886476, "body": "There is another file called: worker_spi.control. Do I need to put it some other directory?"}, {"owner": {"reputation": 706, "user_id": 3882261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8859cfd04f0636b2e9b019b38b12ac?s=128&d=identicon&r=PG&f=1", "display_name": "korry", "link": "https://stackoverflow.com/users/3882261/korry"}, "edited": false, "score": 0, "creation_date": 1465409049, "post_id": 37692043, "comment_id": 62893453, "body": "What error message are you seeing when you try to create the extension?"}, {"owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "edited": false, "score": 0, "creation_date": 1465828975, "post_id": 37692043, "comment_id": 63051418, "body": "Thanks for the explanation. I am able to create an extension now. Also the required background worker. One step which I was missing is to add the database name of this background worker in my config file. So in postgresql.conf: worker_spi.database = \u2018databasename\u2019 has to be added."}], "tags": [], "owner": {"reputation": 515, "user_id": 6437914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe02d43a991c166bd02dadc2d9e3938?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen Frost", "link": "https://stackoverflow.com/users/6437914/stephen-frost"}, "is_accepted": true, "score": 1, "last_activity_date": 1465350636, "creation_date": 1465350636, "answer_id": 37692043, "question_id": 37688437, "link": "https://stackoverflow.com/questions/37688437/background-worker-worker-spi-example-postgresql/37692043#37692043", "title": "Background Worker worker_spi Example PostgreSQL", "body": "<p>Yes, the .so file needs to be installed into the PKGLIBDIR.</p>\n\n<p>You can find out what the PKGLIBDIR is by running \"pg_config\".  For example, on an Ubuntu system with PostgreSQL 9.4, pg_config will return:</p>\n\n<p>PKGLIBDIR = /usr/lib/postgresql/9.4/lib</p>\n\n<p>Further, the worker_spi--1.0.sql should be installed into SHAREDIR/extension.  On an Ubuntu system with PostgreSQL 9.4, the SHAREDIR returned from pg_config is:</p>\n\n<p>SHAREDIR = /usr/share/postgresql/9.4</p>\n\n<p>And the directory to install the worker_spi--1.0.sql is:</p>\n\n<p>/usr/share/postgresql/9.4/extension</p>\n\n<p>Once the worker_spi--1.0.sql and worker_spi.so files are installed into the correct locations, you should be able to execute:</p>\n\n<p>CREATE EXTENSION worker_spi;</p>\n\n<p>from any database and have the extension be installed.</p>\n\n<p>Using \"\\i worker_spi--1.0.sql\" does not install it as an extension but rather as a set of independent objects.</p>\n"}], "owner": {"reputation": 55, "user_id": 6437079, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/XJNCK.png?s=128&g=1", "display_name": "akashag26", "link": "https://stackoverflow.com/users/6437079/akashag26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 1, "accepted_answer_id": 37692043, "answer_count": 1, "score": 1, "last_activity_date": 1465415227, "creation_date": 1465330290, "question_id": 37688437, "link": "https://stackoverflow.com/questions/37688437/background-worker-worker-spi-example-postgresql", "title": "Background Worker worker_spi Example PostgreSQL", "body": "<p>I am trying to run the demo background worker example present in PostgreSQL documentation. I downloaded it from: <a href=\"https://github.com/postgres/postgres/tree/master/src/test/modules/worker_spi\" rel=\"nofollow\">https://github.com/postgres/postgres/tree/master/src/test/modules/worker_spi</a></p>\n\n<p>I am able to compile the code and the following files are created:\n\"worker_spi.o\" and \"worker_spi.so\"</p>\n\n<p>I then ran worker_spi--1.0.sql with:- \\i worker_spi--1.0.sql.\nFinally, after connecting to the database, I created an extension as specified in SQL file. But, I don't think it is working. Do I need to put this \".so\" file in some other directory? Any help is much appreciated.</p>\n"}]