[{"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1536793752, "post_id": 52304585, "comment_id": 91556688, "body": "<code>input!=&#39;R&#39; || input!=&#39;r&#39;</code> is always true.  Rest is irrelevant.  I suspect code should be <code>input!=&#39;R&#39; &amp;&amp; input!=&#39;r&#39; &amp;&amp; ...</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536796444, "post_id": 52304585, "comment_id": 91557258, "body": "Minor issue: the <code>if(input==&#39;Q&#39; || input==&#39;q&#39;)</code> test makes more sense after the <code>while()</code> loop."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 10181633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Keb22nO1WNY/AAAAAAAAAAI/AAAAAAAAAQw/JfGZfOE75Fc/photo.jpg?sz=128", "display_name": "girobuz", "link": "https://stackoverflow.com/users/10181633/girobuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1536794396, "creation_date": 1536794396, "answer_id": 52304680, "question_id": 52304585, "link": "https://stackoverflow.com/questions/52304585/c-while-loop-will-not-exit/52304680#52304680", "title": "C - while loop will not exit", "body": "<p>You need to change all the OR operators in the while loop to AND operators. If they are OR operators, all inputs would be true.</p>\n\n<p>`</p>\n\n<pre><code>printf(\"\\nEnter (r)ock, (p)aper, or (s)cissors. Enter (q) to quit.\");\nscanf(\"%c\", &amp;input);\nif(input=='Q' || input=='q') {\n     return 0;\n}\nwhile(input!='R' &amp;&amp; input!='r' &amp;&amp; input!='P' &amp;&amp; input!='p' &amp;&amp; input!='S' &amp;&amp; input!='s' &amp;&amp; input!='Q' &amp;&amp; input!='q') {\n        printf(\"\\nInvalid entry! Please enter (r)ock, (p)aper, or (s)cissors. Enter (q) to quit.\");\n        scanf(\" %c\", &amp;input);\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 3303868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1596a1c83c9281bcda1a429e03d7463?s=128&d=identicon&r=PG&f=1", "display_name": "agxxvi", "link": "https://stackoverflow.com/users/3303868/agxxvi"}, "is_accepted": false, "score": 1, "last_activity_date": 1536898606, "last_edit_date": 1536898606, "creation_date": 1536796490, "answer_id": 52304882, "question_id": 52304585, "link": "https://stackoverflow.com/questions/52304585/c-while-loop-will-not-exit/52304882#52304882", "title": "C - while loop will not exit", "body": "<p>It seems you've got a classical logic bug in your code. It took me a while to catch it too, because using or (<code>||</code>) seems to make sense. In this case, though, if you think about it, the computer is following your instructions correctly and never allowing you to leave the loop. What you really mean is that if your input is different than 'R'  and (<code>&amp;&amp;</code>) 'r' and 'P' and 'p'... it is not valid.  </p>\n\n<p>On another, unrelated topic, it is probably a good idea to always check the return value of your input function calls. In this case you may want to write something like</p>\n\n<pre><code>while (1) { /* infinite loop */\n    printf(\"\\nEnter (r)ock, (p)aper, or (s)cissors. Enter (q) to quit.\");\n    if (scanf(\" %c\", &amp;c) != EOF) {\n        if (c == 'q' || c == 'Q') {\n            break;\n        } else if (c == 'r' || c == 'R') {\n            /* rock */\n        } else if (/* paper, etc... */) {\n            /* ... */\n        } else {\n            /* you can say here that the input is not valid */\n        }\n    } else {\n        printf(\"\\nBye!\\n\");\n        break;\n    }\n}\n</code></pre>\n\n<p>As a 'bonus' if you're using a *NIX terminal (think Linux or BSD) you'll be able to leave the loop by typing Ctrl-D (^D), which will cause the scanf to return EOF. Remember to always be very careful if you ever write an infinite loop (like this while(1) loop on my example). You'll have to provide some way to get out of those loops.</p>\n"}], "owner": {"reputation": 33, "user_id": 10355737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fFff2vZWYRM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaM_0mH1IZs1jaIGGgDAAelp8pRHYQ/mo/photo.jpg?sz=128", "display_name": "Ash", "link": "https://stackoverflow.com/users/10355737/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 52304680, "answer_count": 2, "score": -1, "last_activity_date": 1536898606, "creation_date": 1536793588, "question_id": 52304585, "link": "https://stackoverflow.com/questions/52304585/c-while-loop-will-not-exit", "title": "C - while loop will not exit", "body": "<p>I'm creating a rock, paper, scissors code for a school lab. I'm just trying to test for invalid entries, but I get stuck in a continuous while loop despite entering a valid character. </p>\n\n<pre><code>printf(\"\\nEnter (r)ock, (p)aper, or (s)cissors. Enter (q) to quit.\");\nscanf(\"%c\", &amp;input);\nif(input=='Q' || input=='q') {\n     return 0;\n}\nwhile(input!='R' || input!='r' || input!='P' || input!='p' || input!='S' || input!='s' || input!='Q' || input!='q') {\n        printf(\"\\nInvalid entry! Please enter (r)ock, (p)aper, or (s)cissors. Enter (q) to quit.\");\n        scanf(\" %c\", &amp;input);\n}\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1536791024, "post_id": 52304259, "comment_id": 91556083, "body": "A look-up table could do this a lot more easily."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1536791055, "post_id": 52304259, "comment_id": 91556093, "body": "Also why <code>char letter_grade[1]</code> instead of <code>char letter_grade</code>? If you need just one character you should save it in a single <code>char</code>. For a character <i>string</i> you&#39;ll need a minimum of 2 characters to accommodate the NUL terminator, and you&#39;ll also need to use <code>strcpy()</code> to populate it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536791865, "post_id": 52304259, "comment_id": 91556284, "body": "@D Doe What C compiler are you using?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536795293, "post_id": 52304259, "comment_id": 91557025, "body": "It&#39;s C; character arrays and characters are different things--you can&#39;t assign one to the other. You can put characters <i>into</i> a character array."}], "answers": [{"comments": [{"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1536791719, "post_id": 52304280, "comment_id": 91556248, "body": "@P__J__There is a difference between correct and appropriate - code will compile without any error and work as needed."}], "tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": false, "score": 1, "last_activity_date": 1536791057, "creation_date": 1536791057, "answer_id": 52304280, "question_id": 52304259, "link": "https://stackoverflow.com/questions/52304259/char-array-in-c-equal-to-one-letter/52304280#52304280", "title": "char array in c equal to one letter", "body": "<p>Use this <code>letter_grade[0]</code> instead of just <code>letter_grade</code> while assigning value, example:</p>\n\n<p><code>letter_grade[0] = 'A';</code></p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 10002388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c04d9583153b43b79b6e4777496070fa?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie12345", "link": "https://stackoverflow.com/users/10002388/newbie12345"}, "is_accepted": false, "score": 1, "last_activity_date": 1536791698, "creation_date": 1536791698, "answer_id": 52304349, "question_id": 52304259, "link": "https://stackoverflow.com/questions/52304259/char-array-in-c-equal-to-one-letter/52304349#52304349", "title": "char array in c equal to one letter", "body": "<p>Change the line:</p>\n\n<pre><code>char letter_grade[1];\n</code></pre>\n\n<p>to be:</p>\n\n<pre><code>char letter_grade;\n</code></pre>\n\n<p>You are trying to declare a Char like an array.</p>\n"}], "owner": {"reputation": 33, "user_id": 5763533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f064aa8a23d7890b82a243c632b44562?s=128&d=identicon&r=PG&f=1", "display_name": "D Doe", "link": "https://stackoverflow.com/users/5763533/d-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1536791698, "creation_date": 1536790902, "question_id": 52304259, "link": "https://stackoverflow.com/questions/52304259/char-array-in-c-equal-to-one-letter", "title": "char array in c equal to one letter", "body": "<p>I have a char array and im trying to set it equal to a single letter. What's the problem?</p>\n\n<pre><code>char letter_grade[1];\nif(grades &gt;= 90)\n  letter_grade = 'A';\nelse if(grades &gt;= 80)\n  letter_grade = 'B';\nelse if(grades &gt;= 70)\n  letter_grade = 'C';\nelse if(grades &gt;= 60)\n  letter_grade = 'D';\nelse if(grades &lt; 60)\n  letter_grade = 'F';\n</code></pre>\n"}, {"tags": ["c", "regex", "comments", "lex"], "comments": [{"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "edited": false, "score": 0, "creation_date": 1536791243, "post_id": 52304225, "comment_id": 91556138, "body": "Comment is neither in the form <code>&#47;*...*&#47;</code> nor in the form <code>&#47;&#47;</code> but in the form of <code>{}</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1536795358, "post_id": 52304225, "comment_id": 91557034, "body": "Comment&#39;s are in the specification for a language. <code>&#47;* .. *&#47;</code> and <code>&#47;&#47; ...</code> are C++ style comments, where <code>{..}</code> is not a comment in the C lang spec. Also, you can&#39;t just match comments without matching quoted strings since strings hide comment syntax. I guess you could treat <code>{</code> <code>}</code> as comment delimiters to be parsed as well, but it is highly unusual. Let me know if you need the C regex."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1536798430, "post_id": 52304225, "comment_id": 91557617, "body": "@josephV: Have you tried reading up about regular expressions? <code>&quot;{}&quot;.*</code> means: an open brace followed by a close brace followed by any amount of anything other than a newline. So it would match <code>{}This is a comment</code>. I don&#39;t think that&#39;s what you&#39;re looking for."}, {"owner": {"reputation": 99, "user_id": 5465746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf11f01402078db9dc8926505804c47?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph V", "link": "https://stackoverflow.com/users/5465746/joseph-v"}, "reply_to_user": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "edited": false, "score": 0, "creation_date": 1536804738, "post_id": 52304225, "comment_id": 91558737, "body": "@user10334659 yes that was part of the requirements it was baffling to me as well"}, {"owner": {"reputation": 99, "user_id": 5465746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf11f01402078db9dc8926505804c47?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph V", "link": "https://stackoverflow.com/users/5465746/joseph-v"}, "edited": false, "score": 0, "creation_date": 1536804779, "post_id": 52304225, "comment_id": 91558753, "body": "@sln yes I would very much appreciate the C regex!"}, {"owner": {"reputation": 99, "user_id": 5465746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf11f01402078db9dc8926505804c47?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph V", "link": "https://stackoverflow.com/users/5465746/joseph-v"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1536804884, "post_id": 52304225, "comment_id": 91558778, "body": "@rici yes I am in the midst of learning regex, my example was just a guess!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1536865350, "post_id": 52304225, "comment_id": 91587802, "body": "@JosephV  - posted a regex for you."}], "answers": [{"tags": [], "owner": {"reputation": 4946, "user_id": 2656614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/rJz0Z.png?s=128&g=1", "display_name": "Addison", "link": "https://stackoverflow.com/users/2656614/addison"}, "is_accepted": false, "score": 0, "last_activity_date": 1536796418, "creation_date": 1536796418, "answer_id": 52304877, "question_id": 52304225, "link": "https://stackoverflow.com/questions/52304225/lex-program-to-remove-comments-from-input-file/52304877#52304877", "title": "Lex program to remove comments from input file", "body": "<p>I don't know what kind of comment is contained within <code>{</code> and <code>}</code>, but you should be careful.</p>\n\n<p>Try this regex.</p>\n\n<pre><code>\\/\\*[\\s\\S]*?\\*\\/|{[^{}]*?}\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/AXxFHc/2\" rel=\"nofollow noreferrer\">Try it online</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1536865998, "last_edit_date": 1536865998, "creation_date": 1536865296, "answer_id": 52320201, "question_id": 52304225, "link": "https://stackoverflow.com/questions/52304225/lex-program-to-remove-comments-from-input-file/52320201#52320201", "title": "Lex program to remove comments from input file", "body": "<p><strong><em>== Note that for all the regex below, matches must be replaced by <code>$2</code> (capture group 2) which write's back the non-comments. This effectively removes all the comments ==</em></strong></p>\n\n<p>Here is a standard C++ comment parser.<br>\nThis is the extended version that preserves formatting.  </p>\n\n<p>raw:   </p>\n\n<pre><code>(?m)((?:(?:^[ \\t]*)?(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|/\\*|//)))?|//(?:[^\\\\]|\\\\(?:\\r?\\n)?)*?(?:\\r?\\n(?=[ \\t]*(?:\\r?\\n|/\\*|//))|(?=\\r?\\n))))+)|(\"(?:\\\\[\\S\\s]|[^\"\\\\])*\"|'(?:\\\\[\\S\\s]|[^'\\\\])*'|(?:\\r?\\n|[\\S\\s])[^/\"'\\\\\\s]*)\n</code></pre>\n\n<p>delimited <code>/ regex /</code>  </p>\n\n<pre><code>/(?m)((?:(?:^[ \\t]*)?(?:\\/\\*[^*]*\\*+(?:[^\\/*][^*]*\\*+)*\\/(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|\\/\\*|\\/\\/)))?|\\/\\/(?:[^\\\\]|\\\\(?:\\r?\\n)?)*?(?:\\r?\\n(?=[ \\t]*(?:\\r?\\n|\\/\\*|\\/\\/))|(?=\\r?\\n))))+)|((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?:\\r?\\n(?:(?=(?:^[ \\t]*)?(?:\\/\\*|\\/\\/))|[^\\/\"'\\\\\\r\\n]*))+|[^\\/\"'\\\\\\r\\n]+)+|[\\S\\s][^\\/\"'\\\\\\r\\n]*)/\n</code></pre>\n\n<p>Demo PCRE:    <a href=\"https://regex101.com/r/UldYK5/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/UldYK5/1</a><br>\nDemo Python:  <a href=\"https://regex101.com/r/avfSfB/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/avfSfB/1</a></p>\n\n<p><strong>----------------------------------------------------------</strong></p>\n\n<p>This a modified version of the above, adding your <code>{ .. }</code> comments.<br>\n(<em>This is not recommended since <code>{}</code> is scoping syntax in C</em>)</p>\n\n<p>raw:   </p>\n\n<pre><code>(?m)((?:(?:^[ \\t]*)?(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|/\\*|//|\\{)))?|//(?:[^\\\\]|\\\\(?:\\r?\\n)?)*?(?:\\r?\\n(?=[ \\t]*(?:\\r?\\n|/\\*|//|\\{))|(?=\\r?\\n))|\\{[\\S\\s]*?\\}(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|/\\*|//|\\{)))?))+)|((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?:\\r?\\n(?:(?=(?:^[ \\t]*)?(?:/\\*|//|\\{))|[^/\"'\\\\\\r\\n{]*))+|[^/\"'\\\\\\r\\n{]+)+|[\\S\\s][^/\"'\\\\\\r\\n{]*)\n</code></pre>\n\n<p>delimited <code>/ regex /</code>  </p>\n\n<pre><code>/(?m)((?:(?:^[ \\t]*)?(?:\\/\\*[^*]*\\*+(?:[^\\/*][^*]*\\*+)*\\/(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|\\/\\*|\\/\\/|\\{)))?|\\/\\/(?:[^\\\\]|\\\\(?:\\r?\\n)?)*?(?:\\r?\\n(?=[ \\t]*(?:\\r?\\n|\\/\\*|\\/\\/|\\{))|(?=\\r?\\n))|\\{[\\S\\s]*?\\}(?:[ \\t]*\\r?\\n(?=[ \\t]*(?:\\r?\\n|\\/\\*|\\/\\/|\\{)))?))+)|((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?:\\r?\\n(?:(?=(?:^[ \\t]*)?(?:\\/\\*|\\/\\/|\\{))|[^\\/\"'\\\\\\r\\n{]*))+|[^\\/\"'\\\\\\r\\n{]+)+|[\\S\\s][^\\/\"'\\\\\\r\\n{]*)/\n</code></pre>\n\n<p>Demo PCRE (using your sample text): <a href=\"https://regex101.com/r/xHTua7/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/xHTua7/1</a></p>\n\n<p>Readable version with comments  </p>\n\n<pre><code>    (?m)                             # Multi-line modifier\n    (                                # (1 start), Comments \n         (?:\n              (?: ^ [ \\t]* )?                  # &lt;- To preserve formatting\n              (?:\n                   /\\*                              # Start /* .. */ comment\n                   [^*]* \\*+\n                   (?: [^/*] [^*]* \\*+ )*\n                   /                                # End /* .. */ comment\n                   (?:                              # &lt;- To preserve formatting \n                        [ \\t]* \\r? \\n                                      \n                        (?=\n                             [ \\t]*                  \n                             (?:\n                                  \\r? \\n \n                               |  /\\*\n                               |  // \n                               |  \\{                               # Added:  for {} comments\n                             )\n                        )\n                   )?\n                |                                 # or,\n                   //                               # Start // comment\n                   (?:                              # Possible line-continuation\n                        [^\\\\] \n                     |  \\\\ \n                        (?: \\r? \\n )?\n                   )*?\n                   (?:                              # End // comment\n                        \\r? \\n                               \n                        (?=                              # &lt;- To preserve formatting\n                             [ \\t]*                          \n                             (?:\n                                  \\r? \\n \n                               |  /\\*\n                               |  // \n                               |  \\{                               # Added:  for {}  comments\n                             )\n                        )\n                     |  (?= \\r? \\n )\n                   )\n                |                                 # or,\n                   \\{                               # Added:  Start { .. } comment\n                   [\\S\\s]*? \n                   \\}                               # Added:  End { .. } comment\n                   (?:                              # &lt;- To preserve formatting \n                        [ \\t]* \\r? \\n                                      \n                        (?=\n                             [ \\t]*                  \n                             (?:\n                                  \\r? \\n \n                               |  /\\*\n                               |  // \n                               |  \\{                               # Added:  for {} comments\n                             )\n                        )\n                   )?\n              )\n         )+                               # Grab multiple comment blocks if need be\n    )                                # (1 end)\n\n |                                 ## OR\n\n    (                                # (2 start), Non - comments \n         # Quotes\n         # ======================\n         (?:                              # Quote and Non-Comment blocks\n              \"\n              [^\"\\\\]*                          # Double quoted text\n              (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n              \"\n           |                                 # --------------\n              '\n              [^'\\\\]*                          # Single quoted text\n              (?: \\\\ [\\S\\s] [^'\\\\]* )*\n              ' \n           |                                 # --------------\n\n              (?:                              # Qualified Linebreak's\n                   \\r? \\n                           \n                   (?:\n                        (?=                              # If comment ahead just stop\n                             (?: ^ [ \\t]* )?\n                             (?:\n                                  /\\*\n                               |  // \n                               |  \\{                               # Added:  for {} comments\n                             )\n                        )\n                     |                                 # or,\n                                                         # Added:  [^{] for {} comments\n                        [^/\"'\\\\\\r\\n{]*                   # Chars which doesn't start a comment, string, escape,\n                                                         # or line continuation (escape + newline)\n                   )\n              )+\n           |                                 # --------------\n                                               # Added:  [^{] for {} comments\n              [^/\"'\\\\\\r\\n{]+                   # Chars which doesn't start a comment, string, escape,\n                                               # or line continuation (escape + newline)\n\n         )+                               # Grab multiple instances\n\n      |                                 # or,\n         # ======================\n         # Pass through\n\n         [\\S\\s]                           # Any other char\n                                          # Added:  [^{] for {} comments\n         [^/\"'\\\\\\r\\n{]*                   # Chars which doesn't start a comment, string, escape,\n                                          # or line continuation (escape + newline)\n\n    )                                # (2 end), Non - comments \n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5465746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf11f01402078db9dc8926505804c47?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph V", "link": "https://stackoverflow.com/users/5465746/joseph-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536865998, "creation_date": 1536790676, "question_id": 52304225, "link": "https://stackoverflow.com/questions/52304225/lex-program-to-remove-comments-from-input-file", "title": "Lex program to remove comments from input file", "body": "<p>Currently I am trying to remove all forms of comments from an input file. However I cannot figure out how to remove a particular form specifically this form \"{comment}\". I know on this site there are plenty of Regex examples to remove multi/single line comments but I cannot figure it out.</p>\n\n<p>Input:</p>\n\n<pre><code>       int j=100;\n       /* comment needs to be removed*/\n       int c = 200;\n\n\n      /*\n       *comment needs to be removed \n       */\n\n      count = count + 1;\n\n     {comment needs to be removed}\n\n      i++;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>int j=100;\nint c =200;\ncount = count +1;\ni++;\n</code></pre>\n\n<p>I already was able to remove the first 2 comments but not the last one. I tried using the regex of <code>\"{}\".*</code> however that did not work for my last comment <code>{comment}</code>. Is there a regex that can be used to rectify this or am I better creating a function in C and handling the situation that way?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 0, "creation_date": 1536789370, "post_id": 52303993, "comment_id": 91555631, "body": "Never use <code>gets</code>. It&#39;s unsafe and deprecated. Use <code>fgets</code> instead."}, {"owner": {"reputation": 305, "user_id": 6268413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df85b09ddfc4573596aa796a052a1173?s=128&d=identicon&r=PG&f=1", "display_name": "Arun Kuttiyara Varghese", "link": "https://stackoverflow.com/users/6268413/arun-kuttiyara-varghese"}, "edited": false, "score": 0, "creation_date": 1536790232, "post_id": 52303993, "comment_id": 91555854, "body": "when adding the first element head-&gt;next_rec is assigned null. When adding second element tmp_rec = head-&gt;next_rec; And in  while (tmp_rec-&gt;next_rec != NULL) {, basically trying to deference null. Thats why it&#39;s crashing"}, {"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1536790709, "post_id": 52303993, "comment_id": 91555985, "body": "` while (cur_ptr != NULL) {         printf(&quot;\\n%d&quot;, cur_ptr-&gt;ch);     }` is an infinite loop if cur_ptr doesn&#39;t start out as NULL.  The increment should be inside the body of the while."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1544564921, "post_id": 52303993, "comment_id": 94319543, "body": "run it under your debugger"}], "owner": {"reputation": 87, "user_id": 10328051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2770e8e5212ad22ce5e7b8af0e314868?s=128&d=identicon&r=PG&f=1", "display_name": "level1", "link": "https://stackoverflow.com/users/10328051/level1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544564829, "creation_date": 1536789152, "question_id": 52303993, "link": "https://stackoverflow.com/questions/52303993/why-does-my-program-terminate-before-printing-out-the-linked-list", "title": "Why does my program terminate before printing out the linked list?", "body": "<p>I am using a linked list to hold structures representing ASCII characters. I am able to read the input from the file and print it back out, so I know I have the data I need. After I add the nodes to the list and try to print the list to make sure the nodes were filled the program abruptly ends, but I don't see why. My input file is just one line at the moment. (ex. 111B1111)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n\n#ifndef NULL\n    #define NULL 0\n#endif\n\n// Define a struct to be used in the linked list\ntypedef struct tape {\n    int ch;\n    struct tape *next_rec;\n    struct tape *prev_rec;\n} tape;\n\n// Typedef for the structure pointer\ntypedef tape *TAPEPTR;\n\n// Define a struct to hold the transition instructions\ntypedef struct instruction {\n    int write;\n    int direction;\n    int new_state;\n} instruction;\n\n// Variables\nint num_states;\nint start_state;\nint end_state;\nchar filename[20];\nFILE *fp;\n\n// Add ASCII character to linked list\nTAPEPTR build_list(int size, char *input) {\n    TAPEPTR head = NULL;\n    int i = 0;\n    int ch;\n    while (i++ &lt; size) {\n        ch = input[i];\n\n        TAPEPTR new_rec = NULL;\n        TAPEPTR tmp_rec = NULL;\n        TAPEPTR prev_rec = NULL;\n\n        // Allocate memory for the list item\n        new_rec = (TAPEPTR)malloc(sizeof(tape));\n        if (!new_rec) {\n            printf(\"\\nUnable to allocate memory!\\n\");\n            exit(1);\n        }\n\n        // Set the new link's data\n        new_rec-&gt;ch = ch;\n        new_rec-&gt;next_rec = NULL;\n        new_rec-&gt;next_rec = NULL;\n\n        //Adding first item to the list\n        if (head == NULL) {\n            head = new_rec;\n            new_rec-&gt;next_rec = NULL;\n            new_rec-&gt;prev_rec = NULL;\n        } else {\n            // Adding item at the end of the list\n            tmp_rec = head-&gt;next_rec;\n            prev_rec = head;\n            while (tmp_rec-&gt;next_rec != NULL) {\n                tmp_rec = tmp_rec-&gt;next_rec;\n                prev_rec = prev_rec-&gt;next_rec;\n            }\n            tmp_rec-&gt;next_rec = new_rec;\n            new_rec-&gt;prev_rec = tmp_rec;\n            new_rec-&gt;next_rec = NULL;\n\n        }\n    }\n    return head;\n}\n\n// Display the linked list\nvoid show_list(TAPEPTR head)  {\n    TAPEPTR cur_ptr = head;\n    while (cur_ptr != NULL) {\n        printf(\"\\n%d\", cur_ptr-&gt;ch);\n    }\n    cur_ptr = cur_ptr-&gt;next_rec;\n}\n\n\n// Setup turing machine\nvoid load(FILE* fp) {\n    char buf[256];\n    // Read text until newline \n    fscanf(fp, \"%[^\\n]\", buf);\n    int length = strlen(buf);\n    printf(\"Data from the file: \\n%s\", buf);\n\n    // Create a doubly-linked list and store nodes as type struct tape\n    TAPEPTR head = build_list(length, buf);\n\n    // Print out the linked list\n    show_list(head);\n\n\n\n    //fclose(fp);\n\n}\n\n\nint main(void) {\n\n    // Ask the user for the input file\n    printf(\"\\nEnter the name of the input file: \");\n    gets(filename);\n\n    // Open the input file for reading\n    if ((fp = fopen(filename, \"r\")) == NULL) {\n        fprintf(stderr, \"Error opening file.\\n\");\n        exit(1);\n    }\n\n    // Build the Turing Machine\n    load(fp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1536788708, "post_id": 52303888, "comment_id": 91555447, "body": "<code>1pNum = phoneNumber &#47; 10000; 2pNum = phoneNumber % 10000;</code> ?"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1536788747, "post_id": 52303888, "comment_id": 91555456, "body": "there&#39;s no need to split it into two ints, you can just store it in a string and print two halfs of that."}, {"owner": {"reputation": 13431, "user_id": 2169762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nns8w.png?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/2169762/martin"}, "edited": false, "score": 0, "creation_date": 1536788757, "post_id": 52303888, "comment_id": 91555458, "body": "<code>2pNum = phoneNumber % 10000; 1pNum = (phoneNumber - 2pNum) &#47; 10000;</code>  Something like this will do it."}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1536788761, "post_id": 52303888, "comment_id": 91555459, "body": "Kamil Cuk has a good idea tho lol"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1536788814, "post_id": 52303888, "comment_id": 91555478, "body": "Phone numbers are more string than number-is there a specific reason you need them in a numeric type?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1536791323, "post_id": 52303888, "comment_id": 91556164, "body": "<code>1pNum</code> and <code>2pNum</code> are not valid identifiers."}], "answers": [{"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 3, "creation_date": 1536789284, "post_id": 52303934, "comment_id": 91555603, "body": "This probably won&#39;t do what you want when 0s happen in the wrong place. For example, 1230056 will print &quot;123-56&quot;. You can fix this with &quot;%03d-%04d&quot;."}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 1, "last_activity_date": 1536790970, "last_edit_date": 1536790970, "creation_date": 1536788797, "answer_id": 52303934, "question_id": 52303888, "link": "https://stackoverflow.com/questions/52303888/split-int-into-2-parts-in-c/52303934#52303934", "title": "Split int into 2 parts in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  int phoneNumber = 1234567;\n  int p1 = phoneNumber / 10000;\n  int p2 = phoneNumber % 10000;\n  printf(\"OK: %03d-%04d\\n\", p1, p2);\n  // OK: 123-4567\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1536798880, "post_id": 52304084, "comment_id": 91557700, "body": "The question is tagged <code>C</code>, not <code>C++</code>."}, {"owner": {"reputation": 231, "user_id": 4922734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8ce2f8d8c8d4ae6e95dff2f916cf67?s=128&d=identicon&r=PG&f=1", "display_name": "Mia", "link": "https://stackoverflow.com/users/4922734/mia"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1536851295, "post_id": 52304084, "comment_id": 91580725, "body": "Correct Thanks for letting me know Ajay, they are close and the concept would be same and helpful for Owen :) I will try to find exact code for C as well and Post here"}], "tags": [], "owner": {"reputation": 231, "user_id": 4922734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8ce2f8d8c8d4ae6e95dff2f916cf67?s=128&d=identicon&r=PG&f=1", "display_name": "Mia", "link": "https://stackoverflow.com/users/4922734/mia"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789741, "creation_date": 1536789741, "answer_id": 52304084, "question_id": 52303888, "link": "https://stackoverflow.com/questions/52303888/split-int-into-2-parts-in-c/52304084#52304084", "title": "Split int into 2 parts in C", "body": "<p>A clean code for this problem would be to convert it to string and insert hyphen in 4th character. Assuming you are using c:\nfirst part is from int to string you can use code like (<a href=\"http://www.cplusplus.com/articles/D9j2Nwbp/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/articles/D9j2Nwbp/</a>)</p>\n\n<pre><code> template &lt;typename T&gt;\n   string NumberToString ( T Number )\n {\n    ostringstream ss;\n    ss &lt;&lt; Number;\n    return ss.str();\n }\n</code></pre>\n\n<p>and for second part you can use .insert like:</p>\n\n<pre><code>strNumber.insert(4, \"-\");\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9100084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b6d30fa8a387e9d03d9e3dd846f247?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Stafford", "link": "https://stackoverflow.com/users/9100084/owen-stafford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536790970, "creation_date": 1536788559, "last_edit_date": 1536788655, "question_id": 52303888, "link": "https://stackoverflow.com/questions/52303888/split-int-into-2-parts-in-c", "title": "Split int into 2 parts in C", "body": "<p>Im looking to have the user input a 7 digit Int, which I have already done.</p>\n\n<p>I have an Int value with 7 digits, and I would like to add a hyphen after the 3rd digit (turn it into a phone number format)</p>\n\n<p>The way I want to do this is by having the system create 1 new Int that is equivalent to the first 3 digits of the initial Int, then a second one equivalent to the last 4 digits. Then printf with the hyphen in between</p>\n\n<pre><code>int phoneNumber;\n\nscanf\n\nphoneNumber = 1234567\n</code></pre>\n\n<hr>\n\n<pre><code>int 1pNum = 123\n\nint 2pNum = 4567\n\nprintf(1pNum + \"-\" + 2pNum)\n</code></pre>\n\n<p>Don't worry, I know the format in which i explained that would not work exactly, I just want to know how to split it</p>\n"}, {"tags": ["c", "windows", "memory-address", "createfile", "function-call"], "comments": [{"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 1, "creation_date": 1536788603, "post_id": 52303813, "comment_id": 91555411, "body": "IIRC WinAPI functions need to be annotated with <code>__stdcall</code>. Try <code>typedef HANDLE(__stdcall *_CreateFileA)(...);</code>"}, {"owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "reply_to_user": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 0, "creation_date": 1537128010, "post_id": 52303813, "comment_id": 91660323, "body": "@AndrewSun thanks a lot, it did the trick, if you post it as an answer i&#39;ll accept it. Btw edit to add <code>__stdcall</code> to the first 2 procedure too, without it it wont work."}], "answers": [{"tags": [], "owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "is_accepted": true, "score": 1, "last_activity_date": 1537128889, "creation_date": 1537128889, "answer_id": 52358033, "question_id": 52303813, "link": "https://stackoverflow.com/questions/52303813/calling-function-from-address-doesnt-work/52358033#52358033", "title": "Calling function from address doesn&#39;t work", "body": "<p>As per my comment, Windows API functions and pointer types to said functions need to be annotated with <code>__stdcall</code> (or <code>WINAPI</code>), which will change their calling convention to the one expected by the API (more information on the stdcall calling convention <a href=\"https://msdn.microsoft.com/en-us/library/zxk0tw93.aspx\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<pre><code>typedef HMODULE(__stdcall *_LoadLibraryA)(LPCSTR);\ntypedef FARPROC(__stdcall *_GetProcAddress)(HMODULE, LPCSTR);\ntypedef HANDLE(__stdcall *_CreateFileA)(LPCSTR, DWORD, DWORD, LPSECURITY_ATTRIBUTES, DWORD, DWORD, HANDLE);\n</code></pre>\n\n<p>Also side note: the <code>*</code> must be placed after the <code>__stdcall</code>, for some reason; otherwise the annotation will do nothing.</p>\n"}], "owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 52358033, "answer_count": 1, "score": 0, "last_activity_date": 1537128889, "creation_date": 1536788142, "question_id": 52303813, "link": "https://stackoverflow.com/questions/52303813/calling-function-from-address-doesnt-work", "title": "Calling function from address doesn&#39;t work", "body": "<p>I can't understand why if i call the <code>CreateFileA</code> function using the address the program crash.</p>\n\n<p>This snipet should call the <code>CreateFileA</code> using it's address retrieved from the <code>GetProcAddress</code> call. Of course in this simple example i could just call it normally, but i need to retrieve each address manually (Even <code>LoadLibraryA</code> and <code>GetProcAddress</code> but for the sake of brevity i didn't in this example)</p>\n\n<p>What am i doing wrong? Why if i use <code>CreateFileA</code> instead of <code>(*CreateFileAAddr)</code> on the last line it works even if they are pointing to the same thing?</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\ntypedef HMODULE(*_LoadLibraryA)(LPCSTR);\ntypedef FARPROC(*_GetProcAddress)(HMODULE, LPCSTR);\ntypedef HANDLE(*_CreateFileA)(LPCSTR, DWORD, DWORD, LPSECURITY_ATTRIBUTES, DWORD, DWORD, HANDLE);\n\nint main() {\n    _LoadLibraryA LoadLibraryAAddr = (_LoadLibraryA)&amp;LoadLibraryA;\n    _GetProcAddress GetProcAddressAddr = (_GetProcAddress)&amp;GetProcAddress;\n\n    HMODULE kernel32Handle = (*LoadLibraryAAddr)(\"Kernel32.dll\");\n    if (kernel32Handle == NULL) return -1;\n    _CreateFileA CreateFileAAddr = (_CreateFileA)((*GetProcAddressAddr)(kernel32Handle, \"CreateFileA\"));\n    if ((unsigned long)CreateFileAAddr != (unsigned long)&amp;CreateFileA) return -1; //Just to check if the address is correct for Debug\n    (*CreateFileAAddr)(\"123.txt\", GENERIC_WRITE, 0, NULL, OPEN_ALWAYS, OPEN_ALWAYS, NULL);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1536837097, "post_id": 52303395, "comment_id": 91571818, "body": "Welcome to SO. Your requirements are a bit unclear. Do you have to delete pairs of numbers or any number that could be paired with any other number to match <code>k</code>? The part <code>4-&gt;5-&gt;4</code> is not a pair or two pairs. After you removed the first pair <code>4-&gt;5</code> there is no more pair to delete. Depending on your goal, the code will look very different."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 1, "last_activity_date": 1536836477, "last_edit_date": 1536836477, "creation_date": 1536786770, "answer_id": 52303558, "question_id": 52303395, "link": "https://stackoverflow.com/questions/52303395/deleting-two-adjacent-nodes-in-singly-linked-list/52303558#52303558", "title": "Deleting two adjacent nodes in singly linked list", "body": "<p>Right now you break linkage at the very first match: in your example, after you delete 4, 13's <code>next</code> still points to it and so is a dangling pointer. But it won't happen as you'll never move anywhere from 13 as you only iterate forward if you delete an element (which does not happen for the pair 13->4.)</p>\n\n<p>The third thing you should take into account is you should actually mark elements for deletion otherwise you won't be able to delete the second 4 in your example.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "edited": false, "score": 0, "creation_date": 1536787966, "post_id": 52303681, "comment_id": 91555169, "body": "Here is what I&#39;ve got: [13, 0, -2069100912, 4, 3]. There must be problem in first if section :/"}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "edited": false, "score": 0, "creation_date": 1536788088, "post_id": 52303681, "comment_id": 91555218, "body": "@Filip Is it your input?"}, {"owner": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "edited": false, "score": 0, "creation_date": 1536788216, "post_id": 52303681, "comment_id": 91555266, "body": "It&#39;s an output."}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "edited": false, "score": 0, "creation_date": 1536788280, "post_id": 52303681, "comment_id": 91555295, "body": "@Filip Did you see how and why <code>while</code> loop has been modified in my answer? Did you replace yours?"}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "edited": false, "score": 0, "creation_date": 1536789827, "post_id": 52303681, "comment_id": 91555757, "body": "@Filip Modified again, try now!"}], "tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789748, "last_edit_date": 1536789748, "creation_date": 1536787487, "answer_id": 52303681, "question_id": 52303395, "link": "https://stackoverflow.com/questions/52303395/deleting-two-adjacent-nodes-in-singly-linked-list/52303681#52303681", "title": "Deleting two adjacent nodes in singly linked list", "body": "<p>First --> You are not moving ahead in the list, hence it will result into an infinite loop.</p>\n\n<p>Second --> If the next node of <code>tmp</code> is <code>NULL</code> then <code>tmp=tmp-&gt;next-&gt;next</code> will give you segmentation fault.</p>\n\n<p>Third --> When you are freeing the memory you are also breaking the linked list, hence <code>pointToPrev</code> pointer has been declared in the underlying code which will be pointing to the node one behind the <code>prev</code> pointer but in case of freeing in the memory, it will point to net node to <code>tmp</code> to hold the list.</p>\n\n<p>better change the while loop to this:</p>\n\n<pre><code> `  int indicator=0;\n    Node *pointToPrev = *list;\n    if(prev-&gt;value + tmp-&gt;value == k)\n    {\n         *list=temp-&gt;next;\n         free(tmp);\n         free(prev);\n         indicator=2;\n    }\n    while((tmp != NULL)&amp;&amp;(indicator!=2))\n    {\n          if(prev-&gt;value + tmp-&gt;value == k)\n          {\n             free(prev);\n             pointToPrev-&gt;next = tmp-&gt;next;\n             free(tmp)\n             break; //AS YOU DON'T NEED TO COMPLETE THE ENTIRE WHILE LOOP AS SUM HAS BEEN ALREADY FOUND\n          }\n          else //THIS WILL SAVE YOU FROM THE INFINITE LOOP \n          {   \n             tmp = tmp-&gt;next;\n             prev = prev-&gt;next;\n             if(indicator==0)\n             {\n                  pointToPrev = *list;\n                  indicator=1;\n             }\n             else\n                  pointToPrev=pointToPrev-&gt;next;\n          }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1536790486, "creation_date": 1536790486, "answer_id": 52304192, "question_id": 52303395, "link": "https://stackoverflow.com/questions/52303395/deleting-two-adjacent-nodes-in-singly-linked-list/52304192#52304192", "title": "Deleting two adjacent nodes in singly linked list", "body": "<p>This problem is complicated by the fact that you have two overlapping conditions controlling whether a given node should be removed: if the sum of its value with that of the <em>previous</em> node is the target value, or if the sum of its value with the <em>next</em> node is the target value.  What is more, except when it is the last node, you will always need to compare the next node with the one following it, so either you must memorialize the value it carries or else you must avoid deleting it.</p>\n\n<p>This problem can be addressed with an ordinary linked list traversal starting at the second node (or if there are fewer than two nodes, then nothing needs to be done).  On each iteration</p>\n\n<ul>\n<li>determine whether the sum of the node values for the current and previous nodes is equal to the target value</li>\n<li>if so, <em>or</em> if that evaluation was true in the previous loop iteration, then delete the previous node</li>\n</ul>\n\n<p>After the loop terminates, delete the last node if appropriate.  You'll need to carry enough state from iteration to iteration to perform the deletions appropriately and to remember the result of the sum evaluation in the previous iteration, but overall it's not much more difficult than deleting individual nodes by value.</p>\n\n<p>This approach is pretty simple, as it limits the number of cases that must be considered in each evaluation to two, it never requires looking further ahead in the list than the next node, and when it deletes a node, that node is always has the same relationship to the current node.  The code for this is left as the exercise it is supposed to be.</p>\n"}], "owner": {"reputation": 1, "user_id": 10355326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5cf9b600e2efd8611c368da936b965?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/10355326/filip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1536836477, "creation_date": 1536785912, "last_edit_date": 1536787256, "question_id": 52303395, "link": "https://stackoverflow.com/questions/52303395/deleting-two-adjacent-nodes-in-singly-linked-list", "title": "Deleting two adjacent nodes in singly linked list", "body": "<p>I am student (still a rookie) and I have a problem. I have to delete pair of nodes in singly linked list, whose sum equals <strong>k</strong>.\nFor example, if the linked list is <strong>13->4->5->4->3</strong> and <strong>k=9</strong>, then my function should convert the list to <strong>13->3</strong> (4+5=9, 5+4=9). This is my unfinished code:</p>\n\n<pre><code>typedef struct _node\n{\n    int value;\n    struct _node* next;\n}Node;\n\nvoid remove(Node **list, int k)\n{\n    if(*list == NULL || (*list)-&gt;next == NULL)\n       return;\n\n    Node *prev = *list;\n    Node *tmp = (*list)-&gt;next;\n\n    while(tmp != NULL)\n    {\n        if(prev-&gt;value + tmp-&gt;value == k)\n        {\n             free(prev);\n             prev = tmp-&gt;next;\n             free(tmp);\n             tmp = tmp-&gt;next-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>I have an idea, but i don't know how to set conditions in while loop.\nDoes anyone have idea how to rewrite this?</p>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 5645637, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wPnXm.jpg?s=128&g=1", "display_name": "gutelfuldead", "link": "https://stackoverflow.com/users/5645637/gutelfuldead"}, "is_accepted": true, "score": 1, "last_activity_date": 1536797238, "creation_date": 1536797238, "answer_id": 52304952, "question_id": 52303185, "link": "https://stackoverflow.com/questions/52303185/linux-inserting-carriage-return-linefeed-instead-of-just-linefeed/52304952#52304952", "title": "Linux inserting carriage return-linefeed instead of just linefeed", "body": "<p>The issue was with not properly setting the termios struct flag : c_oflag</p>\n\n<p>From the termios docs ( <a href=\"https://en.wikibooks.org/wiki/Serial_Programming/termios\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/Serial_Programming/termios</a> )</p>\n\n<pre><code> //\n // Output flags - Turn off output processing\n //\n // no CR to NL translation, no NL to CR-NL translation,\n // no NL to CR translation, no column 0 CR suppression,\n // no Ctrl-D suppression, no fill characters, no case mapping,\n // no local output processing\n //\n // config.c_oflag &amp;= ~(OCRNL | ONLCR | ONLRET |\n //                     ONOCR | ONOEOT| OFILL | OLCUC | OPOST);\n config.c_oflag = 0;\n</code></pre>\n\n<p>It was apparently initialized on one platform but not the other. Thanks to @KamilCuk and @EugeneSh. for finding the issue.</p>\n"}], "owner": {"reputation": 510, "user_id": 5645637, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wPnXm.jpg?s=128&g=1", "display_name": "gutelfuldead", "link": "https://stackoverflow.com/users/5645637/gutelfuldead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 52304952, "answer_count": 1, "score": 3, "last_activity_date": 1536797238, "creation_date": 1536784939, "last_edit_date": 1536793766, "question_id": 52303185, "link": "https://stackoverflow.com/questions/52303185/linux-inserting-carriage-return-linefeed-instead-of-just-linefeed", "title": "Linux inserting carriage return-linefeed instead of just linefeed", "body": "<p>I am writing ASCII commands over a UART interface in an embedded linux system.</p>\n\n<p>I tested the code with a laptop to begin with. Both the embedded platform and the laptop share a ftdi usb dongle. The code should be identical on the two platforms (I thought).</p>\n\n<p>I am creating a string and sending it like so,</p>\n\n<pre><code>char cmd[MAX_STR_LEN];\nsprintf(cmd,\"r %02x %02x\\n\",chipAddr,naddr);\nssize_t bytes_tx = write(fd, (char *)cmd, strlen(cmd));\nif (bytes_tx &lt; 0){\n    ERROR_PRINT(\"%s\\n\",strerror(errno));\n    return -1;\n}\n</code></pre>\n\n<p>When I monitor the output of the serial device on an oscilloscope when running the code from the PC I see that <code>\\n</code> is correctly interpreted as <code>0x0a</code>.</p>\n\n<p>When I run the same code snippet on the embedded platform I see <code>\\n</code> is being interpreted as <code>0x0d 0x0a</code> or <code>\\r\\n</code>. </p>\n\n<p>How do I force the embedded platform to send only <code>\\n</code> or <code>0x0a</code>? The embedded platform is running Linux Kernel 4.4.x generated with buildroot.</p>\n\n<p>--- UPDATED Full Test Code</p>\n\n<p>Placed full code here : <a href=\"https://pastebin.com/5dWhaaDv\" rel=\"nofollow noreferrer\">https://pastebin.com/5dWhaaDv</a></p>\n\n<p>result on both embedded and laptop targets,</p>\n\n<pre><code>Connected to /dev/ttyUSB0\nstrlen 8 : r 40 00\n\ntx cmd[0] = 72 r\ntx cmd[1] = 20  \ntx cmd[2] = 34 4\ntx cmd[3] = 30 0\ntx cmd[4] = 20  \ntx cmd[5] = 30 0\ntx cmd[6] = 30 0\ntx cmd[7] = 0a \n\nbytes_tx = 8\nsizeof(\\n) : 4\n</code></pre>\n"}, {"tags": ["c", "googletest"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536785262, "post_id": 52303168, "comment_id": 91554150, "body": "The only difference between your two codes is a <code>printf</code> line. If they behave differently as a result, it suggests <i>undefined behaviour</i> somewhere. Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem."}, {"owner": {"reputation": 111, "user_id": 9572810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJbaR-yS4Ys/AAAAAAAAAAI/AAAAAAAAAA4/HuOrTCs71Fg/photo.jpg?sz=128", "display_name": "Rutger Luther", "link": "https://stackoverflow.com/users/9572810/rutger-luther"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536785428, "post_id": 52303168, "comment_id": 91554223, "body": "my bad didnt copy over correctly. Ill fix that"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1536785524, "post_id": 52303168, "comment_id": 91554272, "body": "<code>int *final = (int*) malloc(sizeof(int)*n)</code> allocates memory, but does not initialize it. Allocated memory contains garbage. <code>final[i] += matrix[row] * vector[column]</code> adds something valid to the garbage."}, {"owner": {"reputation": 111, "user_id": 9572810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJbaR-yS4Ys/AAAAAAAAAAI/AAAAAAAAAA4/HuOrTCs71Fg/photo.jpg?sz=128", "display_name": "Rutger Luther", "link": "https://stackoverflow.com/users/9572810/rutger-luther"}, "edited": false, "score": 0, "creation_date": 1536785680, "post_id": 52303168, "comment_id": 91554336, "body": "I understand that. I should move the print statement. Sorry i lost internet and cant ssh into my stuff. So ill follow up with what happens after that shortly"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 1, "creation_date": 1536786596, "post_id": 52303168, "comment_id": 91554648, "body": "I don&#39;t think moving the <code>print()</code> statement is going to change much;  I believe what user58697 is saying is that after <code>malloc()</code>ing the space, you need to initialize it -- to all zeros, I&#39;d say, based on the gist of what that function is doing;  your two main options would be to do it by hand (e.g., loop over the allocated space), or use <code>memset()</code>"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1536786763, "post_id": 52303168, "comment_id": 91554709, "body": "...probably you can leverage the loop you already have;  try adding <code>final[i] = 0;</code> just before the <code>while(column &lt; n)</code> loop"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536787855, "post_id": 52303168, "comment_id": 91555112, "body": "regarding: <code>int *final = (int*) malloc(sizeof(int)*n);</code>  1) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc.  2) always check (!=NULL) the returned value to assure the operation was successful.  If not successful, call <code>perror( &quot;your error message&quot; );</code> to output your error message and the text reason the system thinks the error occurred to <code>stderr</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536788283, "post_id": 52303168, "comment_id": 91555299, "body": "OT: for ease of readability and understanding: 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  2) variable (and parameter) names should indicate <code>content</code> or <code>usage</code> (or better, both)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536788456, "post_id": 52303168, "comment_id": 91555360, "body": "in the inner <code>while()</code> loop, the variable <code>row</code> is incremented for each column.  to multiply the matrix by the array, work with just one row at a time.  As it is, the multiplication of the matrix by the array will not be correct"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536788981, "post_id": 52303168, "comment_id": 91555516, "body": "regarding: <code>int *multiply(int m, int n, int *matrix, int *vector,int sizeV){</code>  would be much better/clearer written as: <code>int *multiply(int numRows, int numCols, int matrix[ numRows ][ numCols ], int vectorLen, int vector[ vectorLen ] ){</code>"}, {"owner": {"reputation": 111, "user_id": 9572810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJbaR-yS4Ys/AAAAAAAAAAI/AAAAAAAAAA4/HuOrTCs71Fg/photo.jpg?sz=128", "display_name": "Rutger Luther", "link": "https://stackoverflow.com/users/9572810/rutger-luther"}, "edited": false, "score": 0, "creation_date": 1536789290, "post_id": 52303168, "comment_id": 91555608, "body": "thank you guys i appreciate all the help. When i was using memset i wasnt properly addressing the third arguement. I fixed that and it fixed eveything"}, {"owner": {"reputation": 111, "user_id": 9572810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJbaR-yS4Ys/AAAAAAAAAAI/AAAAAAAAAA4/HuOrTCs71Fg/photo.jpg?sz=128", "display_name": "Rutger Luther", "link": "https://stackoverflow.com/users/9572810/rutger-luther"}, "edited": false, "score": 0, "creation_date": 1536790503, "post_id": 52303168, "comment_id": 91555924, "body": "thanks but we werent allowed to do a double matrix. Haha that would have been quite a bit easier"}], "owner": {"reputation": 111, "user_id": 9572810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJbaR-yS4Ys/AAAAAAAAAAI/AAAAAAAAAA4/HuOrTCs71Fg/photo.jpg?sz=128", "display_name": "Rutger Luther", "link": "https://stackoverflow.com/users/9572810/rutger-luther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536785547, "creation_date": 1536784875, "last_edit_date": 1536785547, "question_id": 52303168, "link": "https://stackoverflow.com/questions/52303168/wrong-value-from-array-passed-by-function", "title": "Wrong value from array passed by function", "body": "<p>So ive read some other threads that cover this. They make note that its dynmaic so you need to allocate that memory. The issue when I alloce this space then place in my values is that now none of my memory is saved into the array. I was wondering if I'm mallocing wrong or if theres some concept im misunderstanding about arrays and c.</p>\n\n<pre><code>//.c file\nint *multiply(int m, int n, int *matrix, int *vector,int sizeV){\n    int *final = (int*) malloc(sizeof(int)*n);\n    int i = 0;\n    int j = 0;\n    int row = 0;\n    int column = 0;\n\n    if(n != sizeV){return NULL;};\n\n    for(i = 0;i &lt; sizeV;i++)\n    {\n            while(column &lt; n)\n            {\n                    final[i] += matrix[row] * vector[column];\n                    row++;\n                    column++;\n            }\n            column = 0;\n            j = 0;\n    }\n    for(i = 0;i &lt; sizeV;i++)\n    {\n            printf(\"\\nfinal[%d] = %d\\n\",i,final[i]);\n    }\n    return final;\n}\n</code></pre>\n\n<p>googletest\n    //.googletest file</p>\n\n<pre><code>TEST(MultiplyTest, Correct_Result_3x3){\nint matrix[] = {1,2,3,4,5,6,7,8,9};\nint vector[] = {1,2,3};\nint correct[] = {14, 32, 50};   \nint *result = multiply(3,3,(int *)matrix, vector,3);\n\nASSERT_NE(-1, *(result));\n\nfor(int i = 0; i &lt; 3; i++)\n    EXPECT_EQ(correct[i], *(&amp;result[i]));   \n}\n\nTEST(MultiplyTest, Correct_Result_2x2){\n    int matrix[] = {1,2,4,5};\n    int vector[] = {1,2,};\n    int correct[] = {5, 14};    \n    int *result = multiply(2,2,(int *)matrix, vector,2);\n\n     ASSERT_NE(-1, *(result));\n\n    for(int i = 0; i &lt; 2; i++)                  \n        EXPECT_EQ(correct[i], *(result + i));   \n    }\n</code></pre>\n\n<p>output\n    //output\n    [ RUN      ] MultiplyTest.Correct_Result_3x3</p>\n\n<pre><code>final[0] = -1656784906\n\n final[1] = 32620\n\n final[2] = -1656784870\n src/Matrix-vector_unittests.cpp:15: Failure\n Expected equality of these values:\n correct[i]\n Which is: 14\n *(&amp;result[i])\n Which is: -1656784906\nsrc/Matrix-vector_unittests.cpp:15: Failure\nExpected equality of these values:\n correct[i]\n Which is: 32\n *(&amp;result[i])\n Which is: 32620\nsrc/Matrix-vector_unittests.cpp:15: Failure\nExpected equality of these values:\n  correct[i]\n  Which is: 50\n *(&amp;result[i])\n Which is: -1656784870\n[  FAILED  ] MultiplyTest.Correct_Result_3x3 (0 ms)\n[ RUN      ] MultiplyTest.Correct_Result_2x2\n\nfinal[0] = -1656784931\n\nfinal[1] = 32602\n\nsrc/Matrix-vector_unittests.cpp:27: Failure\nExpected equality of these values:\n correct[i]\n Which is: 5\n *(result + i)\nWhich is: -1656784931\nsrc/Matrix-vector_unittests.cpp:27: Failure\n</code></pre>\n\n<p>Expected equality of these values:</p>\n\n<p>So again, im not sure what im doing wrong. I dont free the memory currently. Im mainly trying to get these correct values passed over right now and having trouvle with that.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 797, "user_id": 99124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb4a98e32eb0337a855061470ea7a19?s=128&d=identicon&r=PG", "display_name": "mlp", "link": "https://stackoverflow.com/users/99124/mlp"}, "edited": false, "score": 0, "creation_date": 1536782976, "post_id": 52302687, "comment_id": 91553232, "body": "What error message does the compiler give you?"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 7, "creation_date": 1536783007, "post_id": 52302687, "comment_id": 91553250, "body": "You try to modify a const value ?"}, {"owner": {"reputation": 315, "user_id": 8605253, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zYd1adcnueE/AAAAAAAAAAI/AAAAAAAAABo/j1fBOvy7mnY/photo.jpg?sz=128", "display_name": "Aristos Georgiou", "link": "https://stackoverflow.com/users/8605253/aristos-georgiou"}, "edited": false, "score": 0, "creation_date": 1536783062, "post_id": 52302687, "comment_id": 91553268, "body": "assignment of read-only location &#39;array[0]&#39;"}, {"owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "edited": false, "score": 0, "creation_date": 1536783067, "post_id": 52302687, "comment_id": 91553273, "body": "Make the members non constant for a start."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1536783426, "post_id": 52302687, "comment_id": 91553404, "body": "When you say &quot;add to a struct array&quot; are you talking about making the array bigger, or changing an existing value? That would be better written as &quot;assign to a struct array&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 10, "last_activity_date": 1536783142, "creation_date": 1536783142, "answer_id": 52302757, "question_id": 52302687, "link": "https://stackoverflow.com/questions/52302687/c-array-of-struct/52302757#52302757", "title": "C array of struct", "body": "<p>The element of <code>Expected</code> are declared <code>const</code>.  That means they can't be modified.</p>\n\n<p>In order to set the values, you need to <em>initialize</em> them at the time the variable is defined:</p>\n\n<pre><code>Expected array[1] = { {1, 'c'} };\n</code></pre>\n\n<p>The fact that you're using an array doesn't matter in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1536783198, "last_edit_date": 1592644375, "creation_date": 1536783198, "answer_id": 52302775, "question_id": 52302687, "link": "https://stackoverflow.com/questions/52302687/c-array-of-struct/52302775#52302775", "title": "C array of struct", "body": "<p>This is not allowed because <code>struct</code> has <code>const</code> members:</p>\n<blockquote>\n<p>error: assignment of read-only location <code>array[0]</code></p>\n<pre><code>array[0] = e;\n</code></pre>\n</blockquote>\n<p>When a <code>struct</code> has one <code>const</code> member, the whole <code>struct</code> cannot be assigned as well.</p>\n<p>If it were possible to assign array elements like that, one would be able to circumvent const-ness of any member of a <code>struct</code> like this:</p>\n<pre><code>Expected replacement = {.number = array[0].number, .operand = newOperand}; // &lt;&lt; Allowed\narray[0] = replacement; // &lt;&lt;== This is not allowed\n</code></pre>\n<p>Compiler flags this assignment as an error (<a href=\"https://ideone.com/ITGTqP\" rel=\"nofollow noreferrer\">demo</a>).</p>\n<p>If you need to keep <code>const</code>, you would have to construct your array with initializers instead of using assignments.</p>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 3175478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d226ad76c20a10964496dc2be49dd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3175478/john"}, "is_accepted": false, "score": 5, "last_activity_date": 1536783289, "last_edit_date": 1536783289, "creation_date": 1536783228, "answer_id": 52302785, "question_id": 52302687, "link": "https://stackoverflow.com/questions/52302687/c-array-of-struct/52302785#52302785", "title": "C array of struct", "body": "<p>Making the struct members <code>const</code> means you can't write to them.\nAfter removing that it works.</p>\n\n<pre><code>typedef struct Expected {\n\n   int number;\n   char operand;\n\n} Expected;\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 8605253, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zYd1adcnueE/AAAAAAAAAAI/AAAAAAAAABo/j1fBOvy7mnY/photo.jpg?sz=128", "display_name": "Aristos Georgiou", "link": "https://stackoverflow.com/users/8605253/aristos-georgiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 52302757, "answer_count": 3, "score": 7, "last_activity_date": 1536843220, "creation_date": 1536782846, "last_edit_date": 1536843220, "question_id": 52302687, "link": "https://stackoverflow.com/questions/52302687/c-array-of-struct", "title": "C array of struct", "body": "<pre><code>typedef struct Expected {\n\n   const int number;\n   const char operand;\n\n} Expected;   \n\nExpected array[1];\nExpected e = {1, 'c'};\narray[0] = e;\n</code></pre>\n\n<p>I don't understand why you cannot add to a struct array like that.  Do I have to calculate the positions in memory myself?</p>\n"}, {"tags": ["c", "linux-kernel", "operating-system"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 3, "creation_date": 1536783231, "post_id": 52302679, "comment_id": 91553341, "body": "You should use <code>copy_to_user</code> if you want to copy data to userspace. Although I don&#39;t this is the cause of your issue. You provide more information on &quot;how&quot; exactly it fails. Also pointers use <code>&quot;%p&quot;</code> specified in format string."}, {"owner": {"reputation": 129, "user_id": 4100928, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wkJR0QjWGZk/AAAAAAAAAAI/AAAAAAAAAE8/SqhVK5aMWcM/photo.jpg?sz=128", "display_name": "CoopTang", "link": "https://stackoverflow.com/users/4100928/cooptang"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1536786005, "post_id": 52302679, "comment_id": 91554441, "body": "@Ivan Thank you. Would you mind doing a longer explanation as an answer for more visibility and as the accepted solution? I&#39;m not entirely sure why it works, but I replaced the *retAddress = retValue with copy_to_user(retAddress, &amp;retValue, sizeof(retValue));"}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1536786826, "post_id": 52302679, "comment_id": 91554736, "body": "given the fact that <code>retAddress</code> address has no reason to fail <code>access_ok</code> check, and the address belong to the process and is valid, it is very interesting to understand why it fails"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1536788413, "post_id": 52302679, "comment_id": 91555347, "body": "I think userspace should be visible from the kernel. Probably has something to do with spectre/meltdown workarounds. Or pages can be swapped out."}], "answers": [{"tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": true, "score": 2, "last_activity_date": 1536788640, "creation_date": 1536788640, "answer_id": 52303907, "question_id": 52302679, "link": "https://stackoverflow.com/questions/52302679/how-to-assign-a-value-to-a-point-with-system-calls/52303907#52303907", "title": "How to assign a value to a point with system calls?", "body": "<p>You should use <code>copy_to_user</code> to safely copy data to userspace.</p>\n\n<p>Userspace pointer should not be dereferenced directly by the kernel code - pointer can be invalid, memory at that location might be unavailable (might be swapped out).</p>\n"}], "owner": {"reputation": 129, "user_id": 4100928, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wkJR0QjWGZk/AAAAAAAAAAI/AAAAAAAAAE8/SqhVK5aMWcM/photo.jpg?sz=128", "display_name": "CoopTang", "link": "https://stackoverflow.com/users/4100928/cooptang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52303907, "answer_count": 1, "score": 2, "last_activity_date": 1536788640, "creation_date": 1536782810, "last_edit_date": 1536784319, "question_id": 52302679, "link": "https://stackoverflow.com/questions/52302679/how-to-assign-a-value-to-a-point-with-system-calls", "title": "How to assign a value to a point with system calls?", "body": "<p>I'm attempting to use a system call to add two numbers together and assign the result to a memory location via pointer. I've set up the system call and wrote a test for it, but the system call is failing when I try to assign the result by dereferencing the passed pointer. Is there something I'm missing with system calls and pointers?</p>\n\n<p>The system call</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/linkage.h&gt;\n\nasmlinkage long sys_simple_add(int val1, int val2, int *retAddress) {\n    int retValue = val1 + val2;\n    *retAddress = retValue;     //This is where the system call fails according to the /var/log/syslog\n    printk(KERN_ALERT \"Value 1: %d \\t Value 2: %d \\t Result: %d\", val1, val2, retValue);\n    return 0;\n}\n</code></pre>\n\n<p>The test code with the system call.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;sys/unistd.h&gt;\n\nint main (void) {\n    int x = 5;\n    int y = 10;\n    int retValue;\n    int *retAddress = &amp;retValue;\n\n    long returnStatus = syscall(334, x, y, retAddress);\n    if (!returnStatus) {\n        printf(\"Value 1: %d \\t Value 2: %d \\t Result: %d \\n\", x, y, retValue);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The log right after the call.</p>\n\n<pre><code>Sep 12 14:19:09 cu-cs-vm kernel: [   45.314581] BUG: unable to handle kernel paging request at 00007ffffd47e680\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314602] IP: sys_simple_add+0x9/0x30\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314607] PGD 8000000428efb067 P4D 8000000428efb067 PUD 428efa067 PMD 3d4794067 PTE 800000038ef40867\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314621] Oops: 0003 [#1] SMP PTI\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314626] Modules linked in: kvm_intel kvm irqbypass crct10dif_pclmul crc32_pclmul ghash_clmulni_intel pcbc aesni_intel aes_x86_64 crypto_simd glue_helper cryptd vmw_balloon joydev input_leds serio_raw intel_rapl_perf shpchp i2c_piix4 mac_hid vmw_vsock_vmci_transport vsock vmw_vmci binfmt_misc parport_pc ppdev lp parport autofs4 vmwgfx ttm hid_generic usbhid hid drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops drm psmouse mptspi mptscsih mptbase ahci e1000 scsi_transport_spi libahci pata_acpi\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314706] CPU: 5 PID: 1920 Comm: test Not tainted 4.15.18PA1 #6\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314710] Hardware name: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 05/19/2017\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314716] RIP: 0010:sys_simple_add+0x9/0x30\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314721] RSP: 0018:ffffc22783327f28 EFLAGS: 00010206\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314727] RAX: ffffffffa0a6ead0 RBX: ffffc22783327f58 RCX: 000000000000000f\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314731] RDX: 00007ffffd47e680 RSI: 000000000000000a RDI: 0000000000000005\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314735] RBP: ffffc22783327f48 R08: 0000000000000026 R09: 0000000000000001\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314739] R10: 0000000000000000 R11: 0000000000000000 R12: 0000000000000000\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314742] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314749] FS:  00007f869172e700(0000) GS:ffff9fa1ad740000(0000) knlGS:0000000000000000\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314753] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314758] CR2: 00007ffffd47e680 CR3: 0000000429388001 CR4: 00000000003606e0\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314870] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314874] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314878] Call Trace:\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314892]  ? do_syscall_64+0x73/0x130\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314903]  entry_SYSCALL_64_after_hwframe+0x3d/0xa2\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314908] RIP: 0033:0x7f86912624d9\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314913] RSP: 002b:00007ffffd47e658 EFLAGS: 00000202 ORIG_RAX: 000000000000014e\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314918] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f86912624d9\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314922] RDX: 00007ffffd47e680 RSI: 000000000000000a RDI: 0000000000000005\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314926] RBP: 00007ffffd47e6a0 R08: 0000000000000026 R09: 0000000000000001\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314930] R10: 0000000000000000 R11: 0000000000000202 R12: 00000000004004e0\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314934] R13: 00007ffffd47e780 R14: 0000000000000000 R15: 0000000000000000\nSep 12 14:19:09 cu-cs-vm kernel: [   45.314939] Code: 90 90 0f 1f 44 00 00 55 48 c7 c7 4e 29 ac a1 48 89 e5 e8 5b f8 07 00 31 c0 5d c3 90 90 90 90 90 90 90 0f 1f 44 00 00 8d 0c 37 55 &lt;89&gt; 0a 48 89 e5 89 f2 89 fe 48 c7 c7 60 29 ac a1 e8 32 f8 07 00 \nSep 12 14:19:09 cu-cs-vm kernel: [   45.315025] RIP: sys_simple_add+0x9/0x30 RSP: ffffc22783327f28\nSep 12 14:19:09 cu-cs-vm kernel: [   45.315028] CR2: 00007ffffd47e680\nSep 12 14:19:09 cu-cs-vm kernel: [   45.315035] ---[ end trace 22b1e68d2410810c ]---\n</code></pre>\n\n<p>And the dump of the object file for simple_add.o</p>\n\n<pre><code>simple_add.o:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000000000 &lt;sys_simple_add&gt;:\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/linkage.h&gt;\n\nasmlinkage long sys_simple_add(int val1, int val2, int *retAddress) {\n   0:   e8 00 00 00 00          callq  5 &lt;sys_simple_add+0x5&gt;\n    int retValue = val1 + val2;\n   5:   8d 0c 37                lea    (%rdi,%rsi,1),%ecx\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/linkage.h&gt;\n\nasmlinkage long sys_simple_add(int val1, int val2, int *retAddress) {\n   8:   55                      push   %rbp\n    int retValue = val1 + val2;\n    *retAddress = retValue;\n   9:   89 0a                   mov    %ecx,(%rdx)\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/linkage.h&gt;\n\nasmlinkage long sys_simple_add(int val1, int val2, int *retAddress) {\n   b:   48 89 e5                mov    %rsp,%rbp\n    int retValue = val1 + val2;\n    *retAddress = retValue;\n    printk(KERN_ALERT \"Value 1: %d \\t Value 2: %d \\t Result: %d\", val1, val2, retValue);\n   e:   89 f2                   mov    %esi,%edx\n  10:   89 fe                   mov    %edi,%esi\n  12:   48 c7 c7 00 00 00 00    mov    $0x0,%rdi\n  19:   e8 00 00 00 00          callq  1e &lt;sys_simple_add+0x1e&gt;\nreturn 0;\n  1e:   31 c0                   xor    %eax,%eax\n  20:   5d                      pop    %rbp\n  21:   c3                      retq   \n</code></pre>\n"}, {"tags": ["c", "algorithm", "for-loop", "time-complexity", "nested-loops"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536784583, "post_id": 52302600, "comment_id": 91553883, "body": "Aside: in C arrays are rarely indexed from <code>1</code>. It is usual to index arrays from <code>0</code> such as <code>for(i = 0; i &lt; n; i++)</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536784793, "post_id": 52302600, "comment_id": 91553955, "body": "Did you mean <code>!(i==k || j==m)</code>? That is more difficult to get your head around than <code>if (A[i][j] == A[k][m] &amp;&amp; i != k &amp;&amp; j != m)</code>"}, {"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536787275, "post_id": 52302600, "comment_id": 91554912, "body": "I meant <code>not</code> for both <code>i == k</code> and <code>j == m</code> leading to condition where both the conditions are satisfied."}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "edited": false, "score": 0, "creation_date": 1536787357, "post_id": 52302909, "comment_id": 91554934, "body": "Thank you @Kaidul That&#39;s what I had in mind but thought it was correct."}], "tags": [], "owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "is_accepted": false, "score": 2, "last_activity_date": 1536784043, "last_edit_date": 1536784043, "creation_date": 1536783737, "answer_id": 52302909, "question_id": 52302600, "link": "https://stackoverflow.com/questions/52302600/best-and-the-worst-case-time-complexity-for-4-nested-for-loops/52302909#52302909", "title": "Best and the worst case time complexity for 4 nested &#39;for&#39; loops?", "body": "<p>The best case time complexity is constant, <code>O(1)</code>. Best case will happen when the first and second element of the grid <code>A</code> are equal.</p>\n\n<pre><code>    1 1 x x x\nA = x x x x x\n    x x x x x\n    x x x x x\n</code></pre>\n\n<p>The worst case complexity is <code>O(n^4)</code>. Worst case will happen when all the elements of the grid <code>A</code> are unique.</p>\n\n<pre><code>    1  2  3  4\nA = 5  6  7  8\n    9  10 11 12\n    13 14 15 16\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "reply_to_user": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1536787496, "post_id": 52302913, "comment_id": 91554983, "body": "Thanks @Srini and juvian Do you think by changing the logic the efficiency could be improved instead of using a map or set?"}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "reply_to_user": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "edited": false, "score": 0, "creation_date": 1536800545, "post_id": 52302913, "comment_id": 91557966, "body": "@RajatGupta not sure what you mean. Using a map or a set already means changing the logic"}, {"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "edited": false, "score": 0, "creation_date": 1536932218, "post_id": 52302913, "comment_id": 91613149, "body": "I meant in terms of the looping. But now I got your point. :)"}, {"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "reply_to_user": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1536936883, "post_id": 52302913, "comment_id": 91616023, "body": "For best case in the solution you and @Srini gave, <code>i != k</code> should be satisfied along with <code>j != m</code>. Therefore, A[1][1] = A[1][2] is not correct. Does it make sense or I&#39;m making it more confusing?"}, {"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "reply_to_user": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "edited": false, "score": 0, "creation_date": 1537052145, "post_id": 52302913, "comment_id": 91644298, "body": "@RajatGupta !(i==k &amp;&amp; j==m) is equivalent to (i != k || j !=m)"}, {"owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "edited": false, "score": 0, "creation_date": 1537137881, "post_id": 52302913, "comment_id": 91662359, "body": "Okay, got it. I didn&#39;t took into consideration <code>&amp;&amp;</code> condition. Thanks again."}], "tags": [], "owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "is_accepted": true, "score": 2, "last_activity_date": 1536784761, "last_edit_date": 1536784761, "creation_date": 1536783767, "answer_id": 52302913, "question_id": 52302600, "link": "https://stackoverflow.com/questions/52302600/best-and-the-worst-case-time-complexity-for-4-nested-for-loops/52302913#52302913", "title": "Best and the worst case time complexity for 4 nested &#39;for&#39; loops?", "body": "<p>Best case: O(1), when A[1][1] = A[1][2]</p>\n\n<p>Worst case: O(n<sup>4</sup>), when there is no repeated element -> you end up iterating whole array for each element of it.</p>\n\n<p>Note that you could implement it more efficiently with a map or a set (will call it structure):</p>\n\n<ul>\n<li>Iterate the array </li>\n<li>If the structure already has A[i][j], return 1</li>\n<li>Add A[i][j] to the structure</li>\n<li>return 0 after array iteration ends</li>\n</ul>\n\n<p>This will give you a worse case of O(n<sup>2</sup> log n) or O(n<sup>2</sup>), depending on the structure you use</p>\n"}], "owner": {"reputation": 172, "user_id": 8715880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a394c69c8162ab05d1652f5fa13fa0?s=128&d=identicon&r=PG", "display_name": "rjgupta21", "link": "https://stackoverflow.com/users/8715880/rjgupta21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 1, "accepted_answer_id": 52302913, "answer_count": 2, "score": 1, "last_activity_date": 1536784761, "creation_date": 1536782470, "last_edit_date": 1536782890, "question_id": 52302600, "link": "https://stackoverflow.com/questions/52302600/best-and-the-worst-case-time-complexity-for-4-nested-for-loops", "title": "Best and the worst case time complexity for 4 nested &#39;for&#39; loops?", "body": "<p>What is the worst and the best time complexity for nested <code>for</code> loop?</p>\n\n<pre><code>int compare(int n, int A[][]) {\n    int i, j, k, m;\n    for (i=1; i&lt;=n; i++) {\n        for (j=1; j&lt;=n; j++) {\n            for (k=1; k&lt;=n; k++) {\n                for (m=1; m&lt;=n; m++) {\n                    if (A[i][j] == A[k][m] &amp;&amp; !(i==k &amp;&amp; j==m))\n                        return 1;\n                }\n            }\n        }\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>I tried to solve it on my own but getting really confused on how the inner most loop will add to the complexity.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536786245, "post_id": 52302332, "comment_id": 91554519, "body": "&quot;Why was currX placed here?&quot; --&gt; certainly looks like <i>null pointer</i> detection."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1536782312, "post_id": 52302369, "comment_id": 91552972, "body": "Or one could just as easily say that <code>while (0 != currX)</code> is <i>long</i> for <code>while (currX)</code>.  One should remember that in C, relational expressions evaluate to integers, so conditional statements having relational expressions as their conditions are just testing the truthiness of the expression&#39;s integer result."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 5, "last_activity_date": 1536781523, "creation_date": 1536781523, "answer_id": 52302369, "question_id": 52302332, "link": "https://stackoverflow.com/questions/52302332/why-place-any-identifier-in-conditional-statements-without-giving-any-condition/52302369#52302369", "title": "Why place any identifier in conditional statements without giving any condition?", "body": "<p><code>while (currX)</code>  tests the truthiness of <code>currX</code>. It's effectively short for <code>while (0!=currX)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 3, "last_activity_date": 1536782811, "creation_date": 1536782811, "answer_id": 52302680, "question_id": 52302332, "link": "https://stackoverflow.com/questions/52302332/why-place-any-identifier-in-conditional-statements-without-giving-any-condition/52302680#52302680", "title": "Why place any identifier in conditional statements without giving any condition?", "body": "<p>The important point about the condition <code>(currX &amp;&amp; currX-&gt;data != x)</code> is that <code>&amp;&amp;</code> will \"short circuit\", that is to say, if <code>currX</code> is false (meaning, the pointer is null) the right hand half will not be evaluated, since the entire expression must be false.</p>\n\n<p><code>if (ptr &amp;&amp; ptr-&gt;foo)</code> is a common pattern used to protect against dereferencing a null pointer.</p>\n"}], "owner": {"reputation": 131, "user_id": 8178591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBMKN.jpg?s=128&g=1", "display_name": "Deba ", "link": "https://stackoverflow.com/users/8178591/deba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52302680, "answer_count": 2, "score": 1, "last_activity_date": 1536782811, "creation_date": 1536781350, "question_id": 52302332, "link": "https://stackoverflow.com/questions/52302332/why-place-any-identifier-in-conditional-statements-without-giving-any-condition", "title": "Why place any identifier in conditional statements without giving any condition?", "body": "<pre><code>  struct Node *prevX = NULL, *currX = *head_ref; \n  while (currX &amp;&amp; currX-&gt;data != x) \n { \n   prevX = currX; \n   currX = currX-&gt;next; \n } \n</code></pre>\n\n<p>Why was currX placed here? How can it affect the outcome? </p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536780433, "post_id": 52302083, "comment_id": 91552153, "body": "hint: paste code, select, ctrl+k. Don&#39;t backtick all the lines."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 5, "creation_date": 1536780591, "post_id": 52302083, "comment_id": 91552229, "body": "Another hint: Try printing both before and after the recursive call and see what you get."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1536780995, "post_id": 52302083, "comment_id": 91552416, "body": "You probably don&#39;t need the function to return a value.  You just print the number <code>n</code>; if it is bigger than 2, then call recursively with <code>n-2</code> and print <code>n</code> again."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1536781551, "post_id": 52302336, "comment_id": 91552686, "body": "using global variables to control recursion isn&#39;t the best idea."}], "tags": [], "owner": {"reputation": 305, "user_id": 6268413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df85b09ddfc4573596aa796a052a1173?s=128&d=identicon&r=PG&f=1", "display_name": "Arun Kuttiyara Varghese", "link": "https://stackoverflow.com/users/6268413/arun-kuttiyara-varghese"}, "is_accepted": false, "score": 0, "last_activity_date": 1536781370, "creation_date": 1536781370, "answer_id": 52302336, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302336#52302336", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n\nint a;\nint forward = 0;\n\nint main() { \n    printf(\"Give a:\");\n    scanf(\"%d\", &amp;a);\n    func(a);\n    return 0; \n}\n\nint func(int n)\n\n{ \n    printf(\"\\t%d \\n\",n);\n    if (forward != 1 ) {\n        if (n==1 || n==2)\n        {\n            //start printing from 1 or 2 to N\n            forward = 1;\n            func(n+2);\n        } else {\n            return func(n-2); \n        }\n    } else {\n       if(n &gt;= a) {\n            return;\n        }\n        return func(n+2);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 2695425, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9agQA.jpg?s=128&g=1", "display_name": "Anand", "link": "https://stackoverflow.com/users/2695425/anand"}, "is_accepted": false, "score": 0, "last_activity_date": 1536782146, "last_edit_date": 1536782146, "creation_date": 1536781528, "answer_id": 52302372, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302372#52302372", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>Using static variables.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(int n);\n\nint main()\n{\n  int a;\n\n  printf(\"Give a:\");    \n  scanf(\"%d\", &amp;a);  \n  func(a);\n  return 0;\n}\n\nvoid func(int n)\n{\n  static char reverse;\n  static char init = 1;\n  static int  val;\n\n  if (init)\n  {\n      val = n;\n      init = 0;\n  }\n\n  printf(\"%d\\t\",n);    \n\n  if (n &lt;=2 ) {\n    reverse = 1;\n  }   \n\n  n += (reverse) ? 2 : -2;\n\n  if (n &gt; val) return;\n\n  func(n);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>7       5       3       1       3       5       7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1536781868, "post_id": 52302438, "comment_id": 91552812, "body": "You must be assuming that this is possible <i>without</i> using global / static variables."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 1, "creation_date": 1536781896, "post_id": 52302438, "comment_id": 91552822, "body": "@meowgoesthedog it&#39;s a world gone mad."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536786694, "post_id": 52302438, "comment_id": 91554679, "body": "Nit: OP requested <code>&quot;7 5 3 1 3 5 7&quot;</code> not <code>&quot;7 5 3 1 3 5 7 &quot;</code> with that extra space after 7.  Good to leave something for OP to code."}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 2, "last_activity_date": 1536781984, "last_edit_date": 1536781984, "creation_date": 1536781809, "answer_id": 52302438, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302438#52302438", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>Apparently I must be assuming something everyone else isn't. Either that or they just like obtuse code.</p>\n\n<pre><code>void func(int n)\n{\n    if (n &gt; 2)\n    {\n        printf(\"%d \", n);\n        f(n-2);\n    }\n    printf(\"%d \", n);\n}\n</code></pre>\n\n<p>should be all that is required. Live example below</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid f(int n)\n{\n    if (n &gt; 2)\n    {\n        printf(\"%d \", n);\n        f(n-2);\n    }\n    printf(\"%d \", n);\n}\n\nint main()\n{\n    for (int i=0; i&lt;=10; ++i)\n    {\n        f(i);\n        fputc('\\n', stdout);\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>0 \n1 \n2 \n3 1 3 \n4 2 4 \n5 3 1 3 5 \n6 4 2 4 6 \n7 5 3 1 3 5 7 \n8 6 4 2 4 6 8 \n9 7 5 3 1 3 5 7 9 \n10 8 6 4 2 4 6 8 10 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 9095728, "user_type": "registered", "profile_image": "https://graph.facebook.com/1640840835983905/picture?type=large", "display_name": "Miruna Radu", "link": "https://stackoverflow.com/users/9095728/miruna-radu"}, "is_accepted": false, "score": 0, "last_activity_date": 1536781863, "creation_date": 1536781863, "answer_id": 52302446, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302446#52302446", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>Here's my solution . I'm sure there's better ones but still ...</p>\n\n<pre><code>void rec(int n) {\n    if (n%2==1 &amp;&amp;n==1) { printf(\"\\t1\"); return; }\n    else if(n%2==0 &amp;&amp; n==2)\n    {\n        printf(\"\\t2\");return;\n    }\n    printf(\"\\t%d\",n);\n    rec(n-2);\n    printf(\"\\t%d\",n);\n}\nint main()\n{\n    rec(7);\n    return 0;\n}\n</code></pre>\n\n<p>Hope it was helpful ! </p>\n"}, {"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": false, "score": 1, "last_activity_date": 1536840915, "last_edit_date": 1536840915, "creation_date": 1536782395, "answer_id": 52302580, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302580#52302580", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>Here's a simple approach (where the step is also configurable). It goes down towards <strong><em>1</em></strong>, printing the numbers and calling itself (also printing the value smaller than step (the one in the middle, if any) <strong>once</strong> - the <code>else</code> branch), then when coming back (on the stack) from recursion, it prints the numbers again (the 2<sup>nd</sup> <code>printf</code>) in reversed order.</p>\n\n<p>The program continues until user enters an invalid (including non positive <em>int</em>) value for <strong><em>n</em></strong>.</p>\n\n<p><em>code.c</em>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\n#define STEP 2\n\n\nvoid func(int n, unsigned int step) {\n    if (n &gt; step) {\n        printf(\"%d    \", n);\n        func(n - step, step);\n        printf(\"%d    \", n);\n    } else if (n &gt;= 1) {\n        printf(\"%d    \", n);\n    }\n}\n\n\nint main() {\n    int n = 0;\n    while (1) {\n        printf(\"\\n\\nEnter n (invalid, to exit): \");\n        if ((!scanf(\"%d\", &amp;n)) || (n &lt;= 0)) {\n            break;\n        }\n        printf(\"\\nResults for %d (with a step of: %d):\\n\", n, STEP);\n        func(n, STEP);\n    }\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<blockquote>\n<pre><code>e:\\Work\\Dev\\StackOverflow\\q052302083&gt;test.exe\n\n\nEnter n (invalid, to exit): 6\n\nResults for 6 (with a step of: 2):\n6    4    2    4    6\n\nEnter n (invalid, to exit): 7\n\nResults for 7 (with a step of: 2):\n7    5    3    1    3    5    7\n\nEnter n (invalid, to exit): 8\n\nResults for 8 (with a step of: 2):\n8    6    4    2    4    6    8\n\nEnter n (invalid, to exit): 9\n\nResults for 9 (with a step of: 2):\n9    7    5    3    1    3    5    7    9\n\nEnter n (invalid, to exit): 3\n\nResults for 3 (with a step of: 2):\n3    1    3\n\nEnter n (invalid, to exit): 2\n\nResults for 2 (with a step of: 2):\n2\n\nEnter n (invalid, to exit): 1\n\nResults for 1 (with a step of: 2):\n1\n\nEnter n (invalid, to exit): q\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 50, "user_id": 10354868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cfe086c1f90061cc888477b3a878b2a?s=128&d=identicon&r=PG&f=1", "display_name": "a_very_pink_twinkie", "link": "https://stackoverflow.com/users/10354868/a-very-pink-twinkie"}, "is_accepted": false, "score": 0, "last_activity_date": 1536782521, "creation_date": 1536782521, "answer_id": 52302609, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52302609#52302609", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>I would have a counter of some sort that you switch \"on\" when you are going upward. Pass in the counter as well as the original number into func().</p>\n\n<p>I'm not sure of exact syntax, as I'm new to C after working for a year in C++, but this is what I would do.</p>\n\n<pre><code>counter = 0;\nint func(int n, int counter, int originalNum)\n{\n    printf(\"\\t%d\",n);\n\n    if(counter == 0)\n    {\n        if (n==1 || n==2)\n        {\n            counter = 1;\n            return func(n+2, counter, originalNum);\n        }\n        return func(n-2, counter ,originalNum);\n    }\n    else\n    {\n\n        if (n == originalNum)\n        {\n            return 1;\n        }\n        return func(n+2, counter, originalNum);\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1536789049, "creation_date": 1536789049, "answer_id": 52303981, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n/52303981#52303981", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>For fun, I thought I would try to improve on <a href=\"https://stackoverflow.com/a/52302438/2410359\">@WhozCraig</a> good answer and code a single function to not only print the sequence, but also output the spacing and sentinels as requested,   also no trailing space after last number.</p>\n\n<pre><code>7, then calling the function would print &lt;&lt;7 5 3 1 3 5 7&gt;&gt; ...\n8, it would print &lt;&lt;8 6 4 2 4 6 8&gt;&gt;\n</code></pre>\n\n<p>The trick to this is that the function needs to know if it is the first call (to print the <code>\"&lt;&lt;%d\"</code>, <code>\"&gt;&gt;\"</code> or a re-entrant one.  Since OP did not specify behavior for negative values, <code>func()</code> below uses the sign to indicate first or re-entrant call.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(int n) {\n  if (n &gt; 0) {\n    printf(\"&lt;&lt;%d\", n);\n    if (n &gt; 2) {\n      func(-(n - 2));\n      printf(\" %d\", n);\n    }\n    printf(\"&gt;&gt;\\n\");\n  } else {\n    n = -n;\n    printf(\" %d\", n);\n    if (n &gt; 2) {\n      func(-(n - 2));\n      printf(\" %d\", n);\n    }\n  }\n}\n\nint main(void) {\n  for (int a = 1; a&lt;= 10; a++) {\n    func(a);\n  }\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;&lt;1&gt;&gt;\n&lt;&lt;2&gt;&gt;\n&lt;&lt;3 1 3&gt;&gt;\n&lt;&lt;4 2 4&gt;&gt;\n&lt;&lt;5 3 1 3 5&gt;&gt;\n&lt;&lt;6 4 2 4 6&gt;&gt;\n&lt;&lt;7 5 3 1 3 5 7&gt;&gt;\n&lt;&lt;8 6 4 2 4 6 8&gt;&gt;\n&lt;&lt;9 7 5 3 1 3 5 7 9&gt;&gt;\n&lt;&lt;10 8 6 4 2 4 6 8 10&gt;&gt;\n</code></pre>\n\n<hr>\n\n<p>On a personal note, the code may benefit with some improvements, yet the code as posted is exactly what I typed and compiled the first time.  I have never written this many lines of code for a complete program that worked exactly as wanted with no edits: a <a href=\"https://en.wikipedia.org/wiki/Red_letter_day\" rel=\"nofollow noreferrer\">red letter day</a>.</p>\n"}], "owner": {"reputation": 33, "user_id": 10354555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feaeefa25d828cb90096abe6e719f108?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/10354555/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1922, "favorite_count": 0, "accepted_answer_id": 52302438, "answer_count": 7, "score": 3, "last_activity_date": 1536840915, "creation_date": 1536780313, "last_edit_date": 1536781022, "question_id": 52302083, "link": "https://stackoverflow.com/questions/52302083/recursive-function-that-prints-all-integers-from-n-to-1-and-then-from-1-to-n", "title": "Recursive function that prints all integers from N to 1 and then from 1 to N", "body": "<p>I just wanted to ask how i can display all integers from N to 1 and again to N with step -+2 and a recursive function, considering that N is given by user. For example, if the user gives 7, then calling the function would print &lt;&lt;7 5 3 1 3 5 7>> or if the parameter is 8, it would print &lt;&lt;8 6 4 2 4 6 8>> I have only figured out to display N to 1 (or N to 2). Here's my code:</p>\n\n<pre><code>    int main()\n{\n    int a;\n    printf(\"Give a:\");\n    scanf(\"%d\", &amp;a);\n    func(a);\n    return 0;\n}\n\nint func(int n)\n{\n    printf(\"\\t%d\",n);\n    if (n==1 || n==2)\n    {\n        return 1;\n    }\n    return func(n-2);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "networking"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536779205, "post_id": 52301806, "comment_id": 91551620, "body": "Try printing out the <code>int</code> values in hex instead of decimal.  Then look at an ASCII-to-hex table.  You&#39;ll learn something..."}, {"owner": {"reputation": 363, "user_id": 10284786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ef9fc457873fe05114b2fa5c9eb05f?s=128&d=identicon&r=PG&f=1", "display_name": "Doritos", "link": "https://stackoverflow.com/users/10284786/doritos"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536779299, "post_id": 52301806, "comment_id": 91551670, "body": "I know that is what is doing. But I want to know why. I want to compare package against many different things so pakage 1, 2, 3, 4, 5, 6, etc I want to compare against &quot;1&quot;, &quot;2&quot;, &quot;3&quot;. Not against the converted number. And I am not printing them. I am using VS debugger I can see what they are."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536779871, "post_id": 52301806, "comment_id": 91551924, "body": "You&#39;re sending a string like <code>&quot;11111111...&quot;</code>, right? What is the value of i after <code>int i; memcpy(&amp;i, &quot;1111&quot;, 4);</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 3676886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJeQv.jpg?s=128&g=1", "display_name": "HenryGiraldo", "link": "https://stackoverflow.com/users/3676886/henrygiraldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1536780058, "creation_date": 1536780058, "answer_id": 52302020, "question_id": 52301806, "link": "https://stackoverflow.com/questions/52301806/convert-blob-of-data-to-align-with-structure/52302020#52302020", "title": "Convert blob of data to align with structure", "body": "<p>You have to review the following functions:</p>\n\n<p>htonl, htons, ntohl, ntohs - convert values between host and network byte order.</p>\n"}], "owner": {"reputation": 363, "user_id": 10284786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98ef9fc457873fe05114b2fa5c9eb05f?s=128&d=identicon&r=PG&f=1", "display_name": "Doritos", "link": "https://stackoverflow.com/users/10284786/doritos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536780058, "creation_date": 1536778962, "question_id": 52301806, "link": "https://stackoverflow.com/questions/52301806/convert-blob-of-data-to-align-with-structure", "title": "Convert blob of data to align with structure", "body": "<pre><code>char buf[512] = { 0 };\n\nint ret = recv(gSock, buf, 512, 0);\n\ntypedef struct _STRUCT {\n    int package;\n    int version;\n    char string[512];\n} STRUCT, *PSTRUCT;\n\nPSTRUCT ok;\n\nok = (PSTRUCT)buf;\n</code></pre>\n\n<p>I am trying to accept a buffer from a socket (Code not here, but it is working). It accepts it and places it into buf. I then want to cast this buf as a structure STRUCT. I want the first 4 bytes to go into the first member, second 4 bytes into the second member, and then the remaining data to go into the last member. However this is not working like I expected. I am getting weird large numbers that are not what I am receiving. </p>\n\n<p>I entered 1111111111 (10) and the results I got back were;</p>\n\n<pre><code>package = 825307441\nversion = 825307441\nstring = 11\\n\n</code></pre>\n\n<p>I did a decimal to hex conversion on the package number and it comes back as '31313131', which is my first 4 1's. So I am not to sure why it is going from integer, to hex back to a integer. I want just exactly what sends to go into the structure.</p>\n"}, {"tags": ["c", "multidimensional-array", "struct"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536777601, "post_id": 52301518, "comment_id": 91550843, "body": "Add a flag <code>bool empty;</code> to the structure."}, {"owner": {"reputation": 424, "user_id": 2355768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4560030af14caa06c60e993fef6f9d54?s=128&d=identicon&r=PG", "display_name": "Avert", "link": "https://stackoverflow.com/users/2355768/avert"}, "edited": false, "score": 0, "creation_date": 1536777754, "post_id": 52301518, "comment_id": 91550903, "body": "<code>char empty</code> There is no <code>bool</code> type in C :p"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 424, "user_id": 2355768, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4560030af14caa06c60e993fef6f9d54?s=128&d=identicon&r=PG", "display_name": "Avert", "link": "https://stackoverflow.com/users/2355768/avert"}, "edited": false, "score": 3, "creation_date": 1536777868, "post_id": 52301518, "comment_id": 91550949, "body": "@Avert Your information is outdated. Like about a decade, or so.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536778139, "post_id": 52301518, "comment_id": 91551069, "body": "Unless every <code>struct</code> member is a string (<code>char</code> array) or a pointer, which are all initialised to <code>0</code> (which you can test), then you need another member - which also needs to be initialised."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1536778279, "post_id": 52301518, "comment_id": 91551143, "body": "Don&#39;t allocate an array of pointers. Just allocate an array of structures. This is far less messy and far faster."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536778450, "post_id": 52301518, "comment_id": 91551231, "body": "@EugeneSh. some people still learn from the first edition of the K&amp;R :)"}, {"owner": {"reputation": 87, "user_id": 10328051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2770e8e5212ad22ce5e7b8af0e314868?s=128&d=identicon&r=PG&f=1", "display_name": "level1", "link": "https://stackoverflow.com/users/10328051/level1"}, "edited": false, "score": 0, "creation_date": 1536778862, "post_id": 52301518, "comment_id": 91551451, "body": "Thanks all! Adding a bool variable works for what I needed. I will also try the calloc idea later as a separate version just to play around a bit I would like to keep the size of my array as small as possible. Cheers!"}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1536778958, "post_id": 52301518, "comment_id": 91551497, "body": "@MichalPatriak In order to save memory, you can add <code>bit field</code> of <code>1 bit</code> as a <code>flag</code> to check if the structure variable has value or it&#39;s empty."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 1, "creation_date": 1536779188, "post_id": 52301518, "comment_id": 91551616, "body": "@Mayur that will only save memory if there are other members which can also use a bit field, which does not seem to be the case here."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536779683, "post_id": 52301518, "comment_id": 91551846, "body": "..not speaking of the fact that it is most likely a very premature optimization."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536779930, "post_id": 52301518, "comment_id": 91551949, "body": "@WeatherVane, another approach is like, after allocating memory to structure variable we can do <code>memset(shelves[i], 0, sizeof(item));</code> To check if varible is empty or not we can do <code>if(!shelves[i][j].name[0]){ &#47;&#47;variable is empty};</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1536782948, "post_id": 52301518, "comment_id": 91553219, "body": "@Mayur that is similar to my first comment."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536783048, "post_id": 52301518, "comment_id": 91553263, "body": "@WeatherVane yeah, I just realized that :-)"}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 3676886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJeQv.jpg?s=128&g=1", "display_name": "HenryGiraldo", "link": "https://stackoverflow.com/users/3676886/henrygiraldo"}, "is_accepted": false, "score": 0, "last_activity_date": 1536779768, "creation_date": 1536779768, "answer_id": 52301962, "question_id": 52301518, "link": "https://stackoverflow.com/questions/52301518/how-can-i-check-if-a-struct-contains-any-data-as-im-looping-passed-it/52301962#52301962", "title": "How can I check if a struct contains any data as I&#39;m looping passed it?", "body": "<p>Add a flag to mark used/empty structs.</p>\n\n<p>Since C99 there is bool type using #include </p>\n"}, {"tags": [], "owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "is_accepted": false, "score": 0, "last_activity_date": 1536781317, "creation_date": 1536781317, "answer_id": 52302322, "question_id": 52301518, "link": "https://stackoverflow.com/questions/52301518/how-can-i-check-if-a-struct-contains-any-data-as-im-looping-passed-it/52302322#52302322", "title": "How can I check if a struct contains any data as I&#39;m looping passed it?", "body": "<p>Add a flag to your struct <code>item</code>, and when the user specifies data for it then set the flag. You can use a <code>bool</code> like so:</p>\n\n<pre><code>typedef struct item {\n    char name[20];\n    int quantity;\n    bool used;\n} item;\n</code></pre>\n\n<p>or you could also use a bitfield:</p>\n\n<pre><code>typedef struct item {\n    char name[20];\n    int quantity;\n    unsigned char used:1; //bitfield\n} item;\n</code></pre>\n\n<p>Either way, set the <code>used</code> member to 1 (or <code>true</code> if its a <code>bool</code>) then check for it when printing the array of structs.</p>\n\n<pre><code>for (int i = 0; i &lt; num_rows; i++) {\n    for (int j = 0; j &lt; num_cols; j++) {\n            if(shelves[i][j].used){\n                //printf statement for struct goes here\n            }\n            else{\n                //printf statement for EMPTY goes here\n            }\n    }               \n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 10328051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2770e8e5212ad22ce5e7b8af0e314868?s=128&d=identicon&r=PG&f=1", "display_name": "level1", "link": "https://stackoverflow.com/users/10328051/level1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536781317, "creation_date": 1536777537, "last_edit_date": 1536778253, "question_id": 52301518, "link": "https://stackoverflow.com/questions/52301518/how-can-i-check-if-a-struct-contains-any-data-as-im-looping-passed-it", "title": "How can I check if a struct contains any data as I&#39;m looping passed it?", "body": "<p>I am trying to loop through a 2D array of structs that already have memory dynamically allocated for them and identify any structs that do not have data from user input.\nIn other words, I am asking a user to select specific spots withing the array to store their data and then I want to go through the array, printing everything in there, and displaying EMPTY for the spots that do not have data saved.</p>\n\n<p>How can I determine if the struct contains data as I pass it in the loop?</p>\n\n<pre><code>typedef struct item {\n    char name[20];\n    int quantity;\n} item;\n\nstruct item **shelves = (item **)malloc(num_rows * sizeof(item *));\nfor (i = 0; i &lt; num_rows; i++) {\n    shelves[i] = (item *)malloc(num_cols * sizeof(item));\n}\n\nfor (int i = 0; i &lt; num_rows; i++) {\n    for (int j = 0; j &lt; num_cols; j++) {\n            ???     \n    }               \n}\n</code></pre>\n"}, {"tags": ["c", "popen"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536777717, "post_id": 52301501, "comment_id": 91550886, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including what you expected to happen and what actually happened instead."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536777989, "post_id": 52301501, "comment_id": 91551003, "body": "@melpomene That is the code so far for the C part."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536778124, "post_id": 52301501, "comment_id": 91551058, "body": "Why are you including <code>&lt;mysql&#47;mysql.h&gt;</code>? Why do you have global variables (that are unused)? Have you ever done anything with files in C (e.g. using <code>fopen</code>, <code>fread</code>, <code>fgets</code>, etc)?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536778160, "post_id": 52301501, "comment_id": 91551080, "body": "What compiler options are you using? If you&#39;re using gcc, you should at minimum have <code>gcc -Wall -Wextra -pedantic -O2</code>."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536778519, "post_id": 52301501, "comment_id": 91551269, "body": "@melpomene, that was later on in the code, the value way going to be added to a table. I omitted that code for now. I am using geany, and my code complies fine."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536778604, "post_id": 52301501, "comment_id": 91551312, "body": "You cannot return a <i>floating point</i> value to the shell. At most, portably, you can return an <code>unsigned char</code> value between <code>0-255</code>. If you can ignore the fractional part of the floating point number (or simply provide an integer conversion for the value), you can return the result to the shell with the <code>return</code> statement."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536778649, "post_id": 52301501, "comment_id": 91551335, "body": "Your code compiling fine is exactly the problem because it contains type errors that a compiler should warn about."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536778700, "post_id": 52301501, "comment_id": 91551355, "body": "@DavidC.Rankin would I add the return to the script? And then how would I get the value to the C program?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536778837, "post_id": 52301501, "comment_id": 91551427, "body": "No, no... The <code>return 0;</code> doesn&#39;t have to <code>return 0;</code>, it can <code>return val;</code> so if you can convert your string representation to a value between <code>0-255</code>, just <code>return that;</code> (note some OS&#39;s allow a wider range of return values, some allow 16-bit values. What OS are you on?"}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536778903, "post_id": 52301501, "comment_id": 91551476, "body": "@DavidC.Rankin, I am sorry I am lost, where would the return call go?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536778971, "post_id": 52301501, "comment_id": 91551504, "body": "Right where you have <code>return 0;</code> currently. You would replace <code>return 0;</code> with <code>return your_value;</code>. That is what the <code>return</code> from <code>main()</code> does -- it returns the given value to your shell <code>:)</code> See <a href=\"https://stackoverflow.com/questions/8082953/what-is-the-valid-range-for-program-return-value-in-linux-bash\">What is the valid range for program return value in Linux/bash? (and duplicates)</a>"}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536779082, "post_id": 52301501, "comment_id": 91551567, "body": "@DavidC.Rankin That will not work because, I have a few things things I want get from the shell script"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536779276, "post_id": 52301501, "comment_id": 91551656, "body": "(Rankin scratching his head puzzled...) We are talking about the return from your C program correct? You are reading the upload speed from the shell script right? Then you convert that to an integer value in C (with <code>strtol</code>, <code>sscanf</code>, etc..), check the range of values, scale it so it returns Megabytes, Kilobytes (whatever makes the range <code>0-255</code>), then return that value at the end of your C program. If you are talking about another return, please clarify -- I&#39;m not following you there."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536779379, "post_id": 52301501, "comment_id": 91551715, "body": "@DavidC.Rankin my apologizes for the head scratching, I want to return the value of a bash script so I can use the returned value from the shell script as variables for my C code."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536779458, "post_id": 52301501, "comment_id": 91551749, "body": "What you&#39;re doing with <code>popen</code> is capturing the output the shell script produces. That&#39;s different from return values."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536779539, "post_id": 52301501, "comment_id": 91551785, "body": "@melpomene, oh I see, is there a way to get the return values from the shell script?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536779793, "post_id": 52301501, "comment_id": 91551890, "body": "@Vlad I&#39;m not sure what you mean by return values in this context. Do you mean the exit status? If so, that&#39;s returned by <code>pclose</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536779884, "post_id": 52301501, "comment_id": 91551932, "body": "Yes, if the shell script explicitly <b>returns</b> the upload speed then you can use the <code>system</code> call (see <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">system(3) - Linux manual page</a>), but the shell script must explicitly return the upload speed (e.g. <code>exit $upload_speed</code>) or the return will simply the the status of the last command executed (see the man page for how the return is handled). It may be easier just to have the script output the upload speed to <code>stdout</code> and then use the <code>popen&#47;fgets</code> approach you started with."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536780260, "post_id": 52301501, "comment_id": 91552087, "body": "when I try exit @upload_speed, i get this error on on the shell script exit: Upload:: numeric argument required"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536781575, "post_id": 52301501, "comment_id": 91552692, "body": "<code>exit $upload_speed</code> is not equal to <code>exit @upload_speed</code> (you do have the variable named <code>upload_speed</code> initialized with the upload speed in your shell script -- right?) I figure your <code>&#39;@&#39;</code> is a typo right?"}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536781712, "post_id": 52301501, "comment_id": 91552744, "body": "@DavidC.Rankin yes and yes, it was a typo and I do have a variable declared"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536782494, "post_id": 52301501, "comment_id": 91553035, "body": "Run your shell script on the command line and then do <code>echo $?</code> and verify it is returning your value."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536782919, "post_id": 52301501, "comment_id": 91553206, "body": "@DavidC.Rankin  with exit or return at the end of the bash script?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536799505, "post_id": 52301501, "comment_id": 91557799, "body": "<b>After</b> the script has <b>exited</b> as the very next command before you do anything else."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536778745, "post_id": 52301637, "comment_id": 91551384, "body": "I see it returns the first line, is there a way to get it to return the last night result of the shell script? And thank you"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1536778847, "post_id": 52301637, "comment_id": 91551436, "body": "Need to use <code>pclose()</code>, not <code>fclose()</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536778854, "post_id": 52301637, "comment_id": 91551442, "body": "@Vlad Knowing what the script outputs, you would need to read multiple lines and parse them to get the information you want."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536778908, "post_id": 52301637, "comment_id": 91551481, "body": "@Shawn Good catch.  Fixed."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536779012, "post_id": 52301637, "comment_id": 91551529, "body": "@dbush and how would I parse them? Sorry, in all of the time i worked with C I never really interacted with fgets"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1536779552, "post_id": 52301637, "comment_id": 91551792, "body": "E.g. <code>fgets(outputStr, sizeof(outputStr), outputFile);</code> then I would just use a pointer or an array index to iterate over <code>outputStr</code> to find the first <code>[+-0-9]</code> and call <code>strtol</code> (or <code>strtof</code> if you actually want the float value), or use <code>sscanf</code> to accomplish the same (checking the return values and (and <code>ptr</code> &amp; <code>endptr</code> in the case to <code>strtol</code>) to validate the conversion succeeded -- then you have a valid value you can scale and return. There are many examples on this site for <code>strtol</code> and <code>sscanf</code> conversions as well as how to parse or iterate over the string."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536780688, "post_id": 52301637, "comment_id": 91552269, "body": "@dbush Than you, I can use your code to work for my project.  One quick question, if I need to run the code more than once, since the shell output will change based on the argument I run through it, do I have to use the pclose after each iteration or just at the end once I am done with popen?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536780770, "post_id": 52301637, "comment_id": 91552306, "body": "@Vlad Each successful instance of <code>popen</code> must be paired with an instance of <code>pclose</code>."}, {"owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "edited": false, "score": 0, "creation_date": 1536780871, "post_id": 52301637, "comment_id": 91552361, "body": "@dbush Thank you =)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1536778893, "last_edit_date": 1536778893, "creation_date": 1536778199, "answer_id": 52301637, "question_id": 52301501, "link": "https://stackoverflow.com/questions/52301501/read-script-output-variable/52301637#52301637", "title": "Read script output variable", "body": "<p>The <code>popen</code> function returns a pointer to a <code>FILE</code> object representing the input and output of the executed program.  You're treating it as a string (i.e. a <code>char *</code>) which it is not.</p>\n\n<p>You need to read from the file object to get its output:</p>\n\n<pre><code>FILE *outputFile;\nchar outputStr[80];\n\noutputFile = popen(\"./Filter_Data.sh Upload\", \"r\");\nif (outputFile) {\n  fgets(outputStr, sizeof(outputStr), outputFile);\n  printf(\"output is: %s\", outputStr);\n  pclose(outputFile);\n}\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 3525621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf4725b22ebadcf7c94204d9e8abcec7?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3525621/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52301637, "answer_count": 1, "score": -1, "last_activity_date": 1536779405, "creation_date": 1536777445, "last_edit_date": 1536779405, "question_id": 52301501, "link": "https://stackoverflow.com/questions/52301501/read-script-output-variable", "title": "Read script output variable", "body": "<p>I am trying to return the value of a shell script. From what I have read it looks like i can use popen, but for some reason I can not get the code to work. Right now when I run the code I get garbage characters and not the float I am wanting.</p>\n\n<p>The value form the shell script is a float. </p>\n\n<p>I want to return the value of a bash script so I can use the returned value from the shell scrip as variables for my C code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//Settings Variables\n float upload_speed;\n float download_speed;\n\nint main(int argc, char **argv)\n{\n\n    FILE *upload_speed;\n\n    //Runs shell script on code and returns data\n    upload_speed = popen(\"./Filter_Data.sh Upload\", \"r\");\n    printf(\"return value is: %s\", upload_speed);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "git", "libgit2"], "answers": [{"tags": [], "owner": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "is_accepted": true, "score": 4, "last_activity_date": 1536777993, "last_edit_date": 1536777993, "creation_date": 1536775539, "answer_id": 52301102, "question_id": 52301101, "link": "https://stackoverflow.com/questions/52301101/using-libgit2-how-can-an-empty-initial-commit-be-created/52301102#52301102", "title": "Using libgit2, how can an empty initial commit be created?", "body": "<p>While writing my question, I came across an <a href=\"https://libgit2.org/libgit2/ex/HEAD/init.html\" rel=\"nofollow noreferrer\">example on the libgit2 reference</a>, which had exactly what I needed.</p>\n\n<blockquote>\n<pre><code>static void create_initial_commit(git_repository *repo)\n{\n  git_signature *sig;\n  git_index *index;\n  git_oid tree_id, commit_id;\n  git_tree *tree;\n\nif (git_signature_default(&amp;sig, repo) &lt; 0)\n    fatal(\"Unable to create a commit signature.\",\n          \"Perhaps 'user.name' and 'user.email' are not set\");\n\n if (git_repository_index(&amp;index, repo) &lt; 0)\n    fatal(\"Could not open repository index\", NULL);\n\n if (git_index_write_tree(&amp;tree_id, index) &lt; 0)\n    fatal(\"Unable to write initial tree from index\", NULL);\n\n git_index_free(index);\n\n if (git_tree_lookup(&amp;tree, repo, &amp;tree_id) &lt; 0)\n    fatal(\"Could not look up initial tree\", NULL);\n\n if (git_commit_create_v(\n      &amp;commit_id, repo, \"HEAD\", sig, sig,\n      NULL, \"Initial commit\", tree, 0) &lt; 0)\n    fatal(\"Could not create the initial commit\", NULL);\n\n  git_tree_free(tree);\n  git_signature_free(sig);\n}\n</code></pre>\n</blockquote>\n\n<p>This function creates an empty initial commit. It reads the index from the empty repository, then uses that to obtains the ID of the empty tree (<code>4b825dc642cb6eb9a060e54bf8d69288fbee4904</code>), then uses that to obtain the empty tree, and finally creates the empty initial commit using that tree.</p>\n"}], "owner": {"reputation": 1418, "user_id": 5946921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa6d24b5cd68697ac3f92d8b7e608ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Will Da Silva", "link": "https://stackoverflow.com/users/5946921/will-da-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 52301102, "answer_count": 1, "score": 0, "last_activity_date": 1587836651, "creation_date": 1536775539, "last_edit_date": 1587755145, "question_id": 52301101, "link": "https://stackoverflow.com/questions/52301101/using-libgit2-how-can-an-empty-initial-commit-be-created", "title": "Using libgit2, how can an empty initial commit be created?", "body": "<p>Previously I had asked <a href=\"https://stackoverflow.com/questions/52188664/\">how one could create an empty commit in libgit2</a>. That question was fully answered, however I wasn't clear enough when I initially asked it.</p>\n\n<p>Using libgit2, how can one create an empty <strong>initial</strong> commit? The answer to <a href=\"https://stackoverflow.com/questions/52188664/\">my previous question</a> relies on having the parent commit object, which I don't know how to obtain for an empty repository. Perhaps something could be done using the empty tree object (whose hash can be generated with <code>git hash-object -t tree /dev/null</code>)?</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1536775600, "post_id": 52301014, "comment_id": 91549903, "body": "Use a debugger. Or plenty of &quot;printf&quot; to see where it crash. Likely some index out of bounds."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1536775938, "post_id": 52301014, "comment_id": 91550067, "body": "<code>return stack[top];             top = top -1;</code> -  See a problem here?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536777645, "post_id": 52301014, "comment_id": 91550858, "body": "<code>void main()</code> - illegal signature -&gt; undefined behaviour."}, {"owner": {"reputation": 55, "user_id": 9975742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8vi8LUJp0Q/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0T1rGQCO7CZzWpRtNdkw3lE9HETg/mo/photo.jpg?sz=128", "display_name": "Raghav Maheshwari", "link": "https://stackoverflow.com/users/9975742/raghav-maheshwari"}, "edited": false, "score": 0, "creation_date": 1536784883, "post_id": 52301014, "comment_id": 91554000, "body": "@EugeneSh.Thanks, that was a major bug!"}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1536777203, "post_id": 52301198, "comment_id": 91550681, "body": "The first (1) of these points is the reason any stack implementations worth their salt do <i>not</i> return values from <code>pop()</code>; they provide access to them via a <code>top()</code> mechanic, then the caller <code>pop()</code> s afterward. And <i>neither</i> is done by the caller if a <code>empty()</code> mechanic indicates the stack has no content. Regarding your (2) point, take solace, that is precisely why <code>while(stack[top] != &#39;#&#39;)</code> runs to infinity, and eventually <code>postfix</code> is overrun with the same content over and over and over again."}], "tags": [], "owner": {"reputation": 53, "user_id": 10107950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e9efc11e0058a2b191d2134d5ed428?s=128&d=identicon&r=PG&f=1", "display_name": "TYX", "link": "https://stackoverflow.com/users/10107950/tyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1536775989, "creation_date": 1536775989, "answer_id": 52301198, "question_id": 52301014, "link": "https://stackoverflow.com/questions/52301014/segmentation-fault-while-converting-infix-to-postfix/52301198#52301198", "title": "Segmentation fault while converting infix to postfix", "body": "<p>Disclaimer: I have not taken a close look at your code, just a cursory glance.</p>\n\n<p>Your pop() function is not well-formed.</p>\n\n<pre><code>    if (top == -1)\n    printf(\"Error: Stack Underflow\\n\");\nelse\n    {\n        return stack[top];\n        top = top -1;\n    }\n</code></pre>\n\n<p>1) I am pretty sure this will not even compile (or at least your C compiler will throw some errors) because if top == -1, then this function will not even return anything.\n2) The function returns before updating \"top\". This means that the top decrement never actually happens, so stack is continually indexed by \"top\". </p>\n\n<p>This may not be the direct cause of your seg fault, but it is a good starting point. As a general suggestion in spirit with that of @Ripi2, I suggest you debug this code either with a debugger (i.e. GDB), printf statements, or a memory profiler such as valgrind.</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 9975742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8vi8LUJp0Q/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0T1rGQCO7CZzWpRtNdkw3lE9HETg/mo/photo.jpg?sz=128", "display_name": "Raghav Maheshwari", "link": "https://stackoverflow.com/users/9975742/raghav-maheshwari"}, "edited": false, "score": 0, "creation_date": 1536784809, "post_id": 52302653, "comment_id": 91553960, "body": "This was really helpful. I did a major mistake by not taking it as precedence(stack[top]). And yup even that return statement thing."}, {"owner": {"reputation": 55, "user_id": 9975742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8vi8LUJp0Q/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0T1rGQCO7CZzWpRtNdkw3lE9HETg/mo/photo.jpg?sz=128", "display_name": "Raghav Maheshwari", "link": "https://stackoverflow.com/users/9975742/raghav-maheshwari"}, "edited": false, "score": 0, "creation_date": 1536784853, "post_id": 52302653, "comment_id": 91553987, "body": "I thinh taking as -1 is fine as when i am pushing i first say top = top + 1, so this works well. Thanks a lot anyways :)"}, {"owner": {"reputation": 55, "user_id": 9975742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8vi8LUJp0Q/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0T1rGQCO7CZzWpRtNdkw3lE9HETg/mo/photo.jpg?sz=128", "display_name": "Raghav Maheshwari", "link": "https://stackoverflow.com/users/9975742/raghav-maheshwari"}, "edited": false, "score": 0, "creation_date": 1536790463, "post_id": 52302653, "comment_id": 91555915, "body": "It was indeed helpful. Thanks again :)"}], "tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": false, "score": 0, "last_activity_date": 1536786460, "last_edit_date": 1536786460, "creation_date": 1536782712, "answer_id": 52302653, "question_id": 52301014, "link": "https://stackoverflow.com/questions/52301014/segmentation-fault-while-converting-infix-to-postfix/52302653#52302653", "title": "Segmentation fault while converting infix to postfix", "body": "<p><strong>MAJOR --></strong> You forgot to pass <code>stack[top]</code> as argument to <code>precedence</code> function while comparing <code>precedence</code> values.</p>\n\n<p>call <code>pop()</code> function only when there is some element present in stack - better make <code>top</code> represent the no. of elements currently present in stack (initialize it with <em>0</em> rather than <strong>-1</strong>.</p>\n\n<p><strong>IMP--></strong> In <code>pop()</code> function (or any other function), once the <code>return</code> statement has been executed after that you cannot modify <code>top=top-1</code> --> better make it <code>return stack[--top]</code>.</p>\n\n<hr>\n\n<p>Here is the correct code:</p>\n\n<pre><code>  #include&lt;stdio.h&gt;\n  #include&lt;ctype.h&gt;\n  #include&lt;string.h&gt;\n  #include&lt;stdlib.h&gt;\n  #define MAX 100\n  char infix[MAX],postfix[MAX];\n  int top = 0;\n  char stack[MAX];\n\n  void push(char element){\n      if(top == MAX-1)\n      {\n          printf(\"Error: Stack Overflow\\n\");\n      }\n      else\n      {\n        stack[top++] = element;\n      }\n }\n\n char pop(){\n      if (top ==1)\n          printf(\"Error: Stack Underflow\\n\");\n      else\n      {  \n        return stack[--top];\n      }\n  }\n\n  int precedence(char symbol){\n        printf(\"pre%d\\n\\n\",symbol);\n        if((symbol=='+')||(symbol=='-')\n                  return 1;\n        if((symbol=='*')||(symbol=='/')||(symbol=='%'))\n                 return 2;\n        else\n                 return 0;\n   }\n\n    void infixtopostfix(char infix[],char postfix[]){\n\n         int i=0,j=0;\n         char symbol;\n         stack[++top] = '#';\n\n         for (i=0;i&lt;strlen(infix);i++){\n\n          symbol = infix[i];\n          if(isalnum(symbol)){\n               postfix[j] = symbol;\n               j++; \n          }\n          else if (symbol == '('){\n               push(symbol);\n          }\n          else if (symbol == ')'){\n               while(stack[top] != '('){\n                    postfix[j] = pop();\n                    j++;\n           }\n               pop();     //This will pop out ( from the stack.\n           }\n           else{\n            while((top&gt;1)&amp;&amp;(precedence(symbol)&lt;=precedence(stack[top-1]))){\n                postfix[j] = pop();\n                j++;\n           }\n               push(symbol);\n        }\n    }\n\n    while(top&gt;1){\n\n        postfix[j] = pop();\n        j++;\n    }\n    postfix[j] = '\\0';\n }\n\nint main(){\n\n\n    printf(\"Enter an infix expression:\\t\");\n    scanf(\" %s\",infix);\n\n    infixtopostfix(infix,postfix);\n    printf(\"The infix expression is:  %s\",infix);\n    printf(\"The postfix expression is: %s\",postfix);\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9975742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8vi8LUJp0Q/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0T1rGQCO7CZzWpRtNdkw3lE9HETg/mo/photo.jpg?sz=128", "display_name": "Raghav Maheshwari", "link": "https://stackoverflow.com/users/9975742/raghav-maheshwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536786460, "creation_date": 1536775149, "last_edit_date": 1536775299, "question_id": 52301014, "link": "https://stackoverflow.com/questions/52301014/segmentation-fault-while-converting-infix-to-postfix", "title": "Segmentation fault while converting infix to postfix", "body": "<p>I am converting infix to postfix, here is my code, can anyone please figure out why i am getting the segmentation fault?\nWhy i am getting the segmentation fault ? Please explain. I tried that multiple times still i am getting the same thing. Please help.</p>\n\n<p>Is it because i took excess memory or what? or my program is taking too much time to execute?</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;ctype.h&gt;\n#include&lt;string.h&gt;\n#define MAX 100\nchar infix[MAX],postfix[MAX];\nint top = -1;\nchar stack[MAX];\n\nvoid push(char element){\n    if(top == MAX-1)\n        {\n        printf(\"Error: Stack Overflow\\n\");\n        }\n    else\n        {\n            top = top +1;\n            stack[top] = element;\n        }\n}\n\nchar pop(){\n    if (top == -1)\n        printf(\"Error: Stack Underflow\\n\");\n    else\n        {\n            return stack[top];\n            top = top -1;\n        }\n}\n\nint precedence(char symbol){\n\n    switch(symbol){\n\n        case '+':\n        case '-':\n            return 2;\n            break;\n        case '*':\n        case '/':\n        case '%':\n            return 3;\n            break;\n        case '(':\n        case ')':\n        case '#':\n            return 1;\n            break;\n        default: \n            return 0;\n            break;\n    }\n}\n\nvoid infixtopostfix(char infix[],char postfix[]){\n\n    int i=0,j=0;\n    char symbol;\n    stack[++top] = '#';\n\n    for (i=0;i&lt;strlen(infix);i++){\n\n        symbol = infix[i];\n\n        if(isalnum(symbol)){\n            postfix[j] = symbol;\n            j++; \n        }\n        else if (symbol == '('){\n            push(symbol);\n        }\n        else if (symbol == ')'){\n\n            while(stack[top] != '('){\n                postfix[j] = pop();\n                j++;\n            }\n            pop();     //This will pop out ( from the stack.\n        }\n        else{\n            if (precedence(symbol)&gt;stack[top]){\n                push(symbol);\n            }\n            else{\n                while(precedence(symbol)&lt;=stack[top]){\n                    postfix[j] = pop();\n                    j++;\n                }\n                push(symbol);\n            }\n        }\n    }\n\n    while(stack[top] != '#'){\n\n        postfix[j] = pop();\n        j++;\n    }\n    postfix[j] = '\\0';\n}\n\nvoid main(){\n\n\n    printf(\"Enter an infix expression:\\t\");\n    scanf(\"%s\",infix);\n\n    infixtopostfix(infix,postfix);\n    printf(\"The infix expression is:  %s\",infix);\n    printf(\"The postfix expression is: %s\",postfix);\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "malloc", "gsoap"], "comments": [{"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "edited": false, "score": 0, "creation_date": 1542838373, "post_id": 52300672, "comment_id": 93716715, "body": "What WSDL or .xsd schema did you use to generate that header? Adding the relevant bit(s) of that may prove helpful, as well as your <code>wsdl2h</code> and <code>soapcpp2</code> commands."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1536776531, "creation_date": 1536776531, "answer_id": 52301321, "question_id": 52300672, "link": "https://stackoverflow.com/questions/52300672/gsoap-allocating-mem-for-dynamic-array-of-structures/52301321#52301321", "title": "gsoap allocating mem for dynamic array of structures.", "body": "<blockquote>\n  <p>Before I start to write my own push and pop methods I just want to ensure I'm not missing anything obvious. </p>\n</blockquote>\n\n<p>I suspect you're missing that <code>soap_malloc()</code> allocates memory <em>that is automatically freed</em> under at least some circumstances.  As such, using <code>realloc()</code> to resize the allocated memory is begging for trouble.  There's a fair chance that the reallocation as such will succeed, but you're likely at minimum to end up with a nasty mess when gSOAP's automatic freeing tries to kick in in <code>soap_end()</code>.</p>\n\n<p>On the other hand, I don't think you're overlooking any reallocation function.  <a href=\"https://www.genivia.com/doc/soapdoc2.html\" rel=\"nofollow noreferrer\">The docs</a> indeed do not seem to describe any.  You can always implement your own reallocation wrapper that allocates fresh memory with <code>soap_malloc()</code>, copies the contents of the original space (whose size you'll need to know somehow), and releases the original space with <code>soap_dealloc()</code>.</p>\n\n<p>The bottom line appears to be that <code>soap_malloc()</code> is not intended to be a general-purpose allocator, and it is not particularly well suited to your use case.  It's primary objective appears to be internal, to relieve library users of any need to manually free the temporary objects that the library allocates.  I take exposing it to library users for their direct use to be intended as a convenience.</p>\n\n<p>If you want the ability to reallocate blocks, then I suggest you obtain them in the first place via regular <code>malloc()</code>.  You'll want to read the docs carefully if you're going to mix <code>malloc()</code>ed data with <code>soap_malloc()</code>ed data, but it is likely possible.  Alternatively, consider approaches that do not require reallocation, such as storing your data in a linked list instead of a dynamic array.</p>\n"}, {"comments": [{"owner": {"reputation": 865, "user_id": 1879439, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1506263321/picture?type=large", "display_name": "Jerry Miller", "link": "https://stackoverflow.com/users/1879439/jerry-miller"}, "edited": false, "score": 0, "creation_date": 1587864797, "post_id": 53421142, "comment_id": 108676701, "body": "Although I haven&#39;t used soap_malloc(), it seems na&#239;ve to expect SOAP to handle any allocation over which it doesn&#39;t have complete control. If you change the size or the address, SOAP has no way of knowing that. Just be generous from the start, since it will be freed before it goes out of scope, theoretically. Or create a realloc of your own that handles the freeing and reallocating BEFORE doing a soap_malloc for what goes out the door."}], "tags": [], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "is_accepted": false, "score": 0, "last_activity_date": 1542838222, "creation_date": 1542838222, "answer_id": 53421142, "question_id": 52300672, "link": "https://stackoverflow.com/questions/52300672/gsoap-allocating-mem-for-dynamic-array-of-structures/53421142#53421142", "title": "gsoap allocating mem for dynamic array of structures.", "body": "<p>What you're doing there is indeed wrong. After using <code>soap_new_T()</code> (where <code>T</code> in your case is <code>ns1__Product</code>), the <code>soap</code> context now manages that memory by holding onto the <code>ns1__Product*</code> pointer internally. Later, when you call <a href=\"https://www.genivia.com/doc/guide/html/group__group__context.html#gaf7d0176161e9def36981e24faa1913d9\" rel=\"nofollow noreferrer\"><code>soap_destroy()</code></a> to free all <code>soap_new_T()</code>-allocated objects managed by the <code>soap</code> context, the context will be trying to free a pointer that no longer points to valid memory since you called <code>realloc()</code>.</p>\n\n<p>As John Bollinger <a href=\"https://stackoverflow.com/a/52301321/5689220\">pointed out</a>, there's no built-in way in gSOAP to do something similar to a <code>realloc</code>. You'd instead just need to do the reallocation manually, e.g.:</p>\n\n<pre><code>// allocate memory for 1 product (as you already do above)\nprod_array = soap_new_ns1__Product(soap, 1);\n\n// ... do some stuff, realize you need to \"realloc\" to add another product ...\n\n// allocate a new array, managed by the soap context\nstruct ns1__Product* new_array = soap_new_ns1__Product(soap, 2);\n\n// copy the old array into the new one (assuming old_size is however many elements are in prod_array)\nfor(std::size_t i = 0; i &lt; old_size; ++i)\n{\n    new_array[i] = prod_array[i];\n}\n\n// tell the soap context to destroy the old array\nsoap_dealloc(soap, prod_array);\n</code></pre>\n\n<hr>\n\n<p>Aside:</p>\n\n<p>It seems like it should be possible to use an <code>std::vector&lt;ns1__Product&gt;</code> rather than an array, which would solve your problem in an arguably better manner, but that question was already asked <a href=\"https://stackoverflow.com/questions/12538625/dynamic-arrays-in-gsoap-the-c-way-using-stl-vector-instead-of-ptr-size\">here</a> to no avail. Unfortunately I don't know the answer to that at this time.</p>\n"}], "owner": {"reputation": 33, "user_id": 10000487, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6yrb57z5SB8/AAAAAAAAAAI/AAAAAAAANMA/Af-CN1Ld2OU/photo.jpg?sz=128", "display_name": "PaulE", "link": "https://stackoverflow.com/users/10000487/paule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542838222, "creation_date": 1536773685, "question_id": 52300672, "link": "https://stackoverflow.com/questions/52300672/gsoap-allocating-mem-for-dynamic-array-of-structures", "title": "gsoap allocating mem for dynamic array of structures.", "body": "<p>gSoap usefully creates stubs to help with memory management etc. One of these\ncommands is soap_malloc but there doesn't seem to be a corresponding soap_realloc.\nBefore I start to write my own push and pop methods I just want to ensure I'm not missing anything obvious.   </p>\n\n<pre><code>//example.h generated with wsdl2h\n\nstruct ns1___Customer\n{\n    int   __sizeProduct;     \n    ns1__Product *Product;        \n    int  customerid;       \n}\n\nstruct ns1__Product\n{\n    int  productid;\n}\n</code></pre>\n\n<p>I am currently using soap_malloc and then realloc for dynamically growing the array.</p>\n\n<pre><code>//I could use soap_new_ns1__Product(&amp;soap,XXX) and allocate mem for XXX\n//number of ns1__Product structures but this is wasteful and doesn't solve \n//anything\n\nstruct ns1__Customter cust;\nsoap_default_ns1__Product(soap, &amp;cust);\n\nstruct ns1__Product *prod_array = NULL;\n\n//allocate mem for 1 product\nprod_array = soap_new_ns1__Product(soap,1) ;\n\nsoap_default_ns1__Product(soap, &amp;prod_array[0]);\nprod_array[0].productid=111;\n\n//Need to add product therefore need to realloc mem. \n//IS THIS THE BEST WAY IN gsoap?\nprod_array = realloc( prod_array, 2 * sizeof(struct  ns1__Product)) ;\nsoap_default_ns1__Product(soap, &amp;emp_array[1]);\nprod_array[1].product=222;\n\n//assigning array ptr to Customer\ncust.Product=prod_array;\n// Remember to adjust sizeProduct\ncust.__sizeProduct=2;\n</code></pre>\n\n<p>This seems wrong and clumsy, does gsoap suggest a better way? I can't find a clear example in the documentation or by searching online.</p>\n"}, {"tags": ["c", "windows", "dll", "loadlibrary", "getprocaddress"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1536773279, "post_id": 52300376, "comment_id": 91548829, "body": "Your search on MSDN wasn&#39;t very thorough, because the &quot;Requirements&quot; table at the bottom of <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilea\" rel=\"nofollow noreferrer\">the official <code>CreateFileA</code> page</a> says (in addition to Minimum Windows Version, Header File, and Import Library) &quot;DLL: kernel32.dll&quot;"}, {"owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1536774042, "post_id": 52300376, "comment_id": 91549198, "body": "Yeah, i found it later, anyway the question didn&#39;t change, i needed a way to find dlls for all the function i need and they gave it to me"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1536774629, "post_id": 52300376, "comment_id": 91549451, "body": "FYI, crtdll.dll is a legacy DLL that&#39;s only included in SysWOW64 for 32-bit programs. It&#39;s not available for 64-bit programs. The version I have in Windows 10 is from 9 Dec 1995, based on the timestamp in the PE header."}], "answers": [{"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": true, "score": 1, "last_activity_date": 1536773356, "creation_date": 1536773356, "answer_id": 52300592, "question_id": 52300376, "link": "https://stackoverflow.com/questions/52300376/how-to-dynamically-load-every-needed-function/52300592#52300592", "title": "How to dynamically load every needed function", "body": "<p>The function in your example (<code>printf</code>) is not a Windows API function, rather it is a function defined in the C standard. Therefore it should be more readily available. However this re-enforces the point that if you don't have any of the either standard or Windows API functions available that makes for a lot of dlls to know about. I don't know of a single place that defines them all in one source file, but you can load your functions on a case by case basis using a resource like <a href=\"https://www.pinvoke.net\" rel=\"nofollow noreferrer\">www.pinvoke.net</a> which lets you type in a function name and retrieve the name of the dll to load (as well as the C# method signature but you don't need that, you already know the C signature).</p>\n"}], "owner": {"reputation": 493, "user_id": 8884758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4a88115ae6fac5961c636926539e19f1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Rek", "link": "https://stackoverflow.com/users/8884758/d-rek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 52300592, "answer_count": 1, "score": -1, "last_activity_date": 1536773356, "creation_date": 1536772368, "last_edit_date": 1536773098, "question_id": 52300376, "link": "https://stackoverflow.com/questions/52300376/how-to-dynamically-load-every-needed-function", "title": "How to dynamically load every needed function", "body": "<p>I'm trying to find a way to dynamically load every Windows API function I need to use. For example, to use a the <code>printf</code> function, I do something like:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\ntypedef int (*printfPtr)(const char *str, ...);\nint main(){\n    HMODULE handle = LoadLibraryA(\"crtdll.dll\");\n    if(handle == NULL) return;\n    printfPtr printfAdr = (printfPtr)GetProcAddress(handle, \"printf\");\n    (*printfAdr)(\"This is a test\\n\");\n}\n</code></pre>\n\n<p>This is a fast coded working snippet. Doing this was easy because I followed a guide which told me that I could load the <code>printf</code> from the <code>crtdll.dll</code>. However, now I would like to load the <code>CreateFileA</code> function but I don't know how to find the correct dll to load.</p>\n\n<p>I've already tried to Google something and searched on the MSDN but I didn't find anything. In general, given one function (a common one, for example one in <code>windows.h</code>, <code>stdio.h</code> or <code>stdlib.h</code>), how can I find which dll to load?</p>\n\n<p>N.B. I know that some of you may think that loading function this way as no use. However, this is not the real program. In the real one, the addresses <code>LoadLibraryA</code> and <code>GetProcAddress</code> are manually found and I can write code and then export the segment from the PE.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "char"], "comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1536770166, "post_id": 52299809, "comment_id": 91547327, "body": "in order to use <code>strcat()</code> properly, there must be enough room in the first argument to fit both it AND whatever you are concatenating to it.  if there isn&#39;t enough room, the leftover information will spill out of its range and cause a segmentation fault."}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "reply_to_user": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1536770232, "post_id": 52299809, "comment_id": 91547361, "body": "@Tau Oh... yeah. So... is there another way?"}, {"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 0, "creation_date": 1536770308, "post_id": 52299809, "comment_id": 91547402, "body": "Calculate the required size and store your result in a variable of that size. If the size isn&#39;t known at compile time you&#39;ll need to use <code>malloc()</code> or <code>calloc()</code> to get this space from the heap."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536771135, "post_id": 52299809, "comment_id": 91547815, "body": "If the documentation of <code>strcat</code> is not clear to you, you should learn about C-strings, arrays and pointers in your textbook. You will also find how to properly write intialisers, etc. It&#39;s a basic lesson."}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536771250, "post_id": 52299809, "comment_id": 91547876, "body": "@toohonestforthissite What&#39;s improper about my initialiser(s)?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536771622, "post_id": 52299809, "comment_id": 91548051, "body": "@Hanlon: Without context it&#39;s not a constant expression. You want to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "reply_to_user": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "edited": false, "score": 0, "creation_date": 1536770883, "post_id": 52299942, "comment_id": 91547704, "body": "with icc this code compiles fine. no stdlib.h needed"}, {"owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "edited": false, "score": 0, "creation_date": 1536770942, "post_id": 52299942, "comment_id": 91547722, "body": "I use GCC and compiling this code produces an error without including <code>stdlib.h</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1536772176, "post_id": 52299942, "comment_id": 91548348, "body": "Headers have to be included, otherwise it&#39;s UB for missing declarations. So, yeah, <code>stdlib.h</code> has to be included. And you should always check for error from functions like <code>malloc</code>. Said that, the code is overly complicated for a simple demo."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1536777053, "post_id": 52299942, "comment_id": 91550604, "body": "<a href=\"https://www.joelonsoftware.com/2001/12/11/back-to-basics/\" rel=\"nofollow noreferrer\">Shlemiel the painter</a>. If you have already figured out where text should go (<code>strlen(str1)</code>) don&#39;t go back to the beginning and measure again (<code>strcat</code>)."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536780787, "post_id": 52299942, "comment_id": 91552312, "body": "@toohonestforthissite in the &quot;modern&quot; ( ie not older than 20y) not having to protypes is not the UB anymore. It is just the compile error."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536783262, "post_id": 52299942, "comment_id": 91553355, "body": "@P__J__: Yeah, sorry, an undeclared identifier it a syntax violation actually (6.5.1p2). Nevertheless the compiler has to generate a diagnostic message (5.1.1.3p1). A missing prototype <b>should</b> be reported only. I have noprmally all warnings enabled, because I&#39;m a lazy developer and don&#39;t like to debug code for bugs the compiler can catch automatically. The main problem is many compilers, including gcc, use builtin functions for many standard functions when compiling for a hosted environment to optimise the code."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536784347, "post_id": 52299942, "comment_id": 91553778, "body": "@toohonestforthissite it is not the warning anymore (for 20 years). Just switch the C standard to C89 or newer :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536784781, "post_id": 52299942, "comment_id": 91553949, "body": "I don#t see what you mean. Of course you get a diagnostic for an undeclared identifier. And you get a warning for a missing function declaration. Just read the standard. And C standard is C17 (i.e. C11 with corrigendae), so that&#39;s what I&#39;m talking and this discussion is about."}], "tags": [], "owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "is_accepted": true, "score": 0, "last_activity_date": 1536779650, "last_edit_date": 1536779650, "creation_date": 1536770514, "answer_id": 52299942, "question_id": 52299809, "link": "https://stackoverflow.com/questions/52299809/appending-a-char-to-a-string-using-arrays-and-strcat/52299942#52299942", "title": "Appending a char to a string using arrays and strcat", "body": "<p>Try something like this </p>\n\n<pre><code>/* strncat example */\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n  char * string0=\"whatever\";\n  char * string1=\"whoever\";\n  size_t l = strlen(string1);\n  char * str1 = malloc(l+2);\n  strcpy (str1,string1);\n  int i=3;\n  int len = 1;\n  strncat (&amp;(str1[l]), &amp;(string0[i]), len);\n  //you can also simply do\n  //str1[l] = string0[i];\n  //str1[l + 1] = 0;\n  puts (str1);\n  return 0;\n}\n</code></pre>\n\n<p>You allocate a variable with enough space hence <code>strlen(string1)+2</code>\nthen copy string1 into the larger variable using <code>strcpy</code> and the function you werre lokking for is <code>strncat</code> (see <a href=\"http://www.cplusplus.com/reference/cstring/strncat/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstring/strncat/</a>) it appends a limited number of characters.</p>\n\n<p>in the code above the result is </p>\n\n<pre><code>whoevert\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536780949, "post_id": 52301454, "comment_id": 91552396, "body": "Of course, whether it&#39;s done this way, via <code>strcat()</code>, or via some other approach, it is necessary for there to be available space in the destination array, or else for the result to go into a new, larger array."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536784579, "post_id": 52301454, "comment_id": 91553880, "body": "@JohnBollinger Firstly - C standard library string functions assume that there is a space and proper allocation is a programmer problem. Secondly it is obvious that caller has to reserve enough space for this char."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536784967, "post_id": 52301454, "comment_id": 91554035, "body": "It is obvious to you and to me that the caller has to ensure there is enough space, but experience shows that often it is <i>not</i> obvious to folks who pose questions such as this.  It seems safe, therefore, to assume that it also is not obvious to many people who read the answer later."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536787772, "post_id": 52301454, "comment_id": 91555078, "body": "@JohnBollinger strcpy the same. It is basic C knowledge. I know that beginners do think about it."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1536780661, "last_edit_date": 1536780661, "creation_date": 1536777193, "answer_id": 52301454, "question_id": 52299809, "link": "https://stackoverflow.com/questions/52299809/appending-a-char-to-a-string-using-arrays-and-strcat/52301454#52301454", "title": "Appending a char to a string using arrays and strcat", "body": "<p>strcat to add the char ? Overkill. </p>\n\n<pre><code> char *addchar(char *dest, const char *src, size_t nth)\n{\n     size_t len = strlen(dest);\n     dest[len++] = src[nth];\n     dest[len] = 0;\n     return dest;\n}\n</code></pre>\n"}], "owner": {"reputation": 330, "user_id": 7952358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-csVPwZqYROg/AAAAAAAAAAI/AAAAAAAAAAs/VT0EsSkbUgg/photo.jpg?sz=128", "display_name": "Hanlon", "link": "https://stackoverflow.com/users/7952358/hanlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1536779685, "accepted_answer_id": 52299942, "answer_count": 2, "score": -1, "last_activity_date": 1536780661, "creation_date": 1536769936, "question_id": 52299809, "link": "https://stackoverflow.com/questions/52299809/appending-a-char-to-a-string-using-arrays-and-strcat", "closed_reason": "Not suitable for this site", "title": "Appending a char to a string using arrays and strcat", "body": "<p>Two variables: <code>string0</code> and <code>string1</code>. Both are of type <code>char *</code>. What I want to do is to add the ith element of <code>string0</code> to the end of <code>string1</code>. Since <code>string0[i]</code> is a <code>char</code>, I cannot simply use <code>strcat(string1, string0[i])</code>.</p>\n\n<p>Nevertheless, I had other idea:</p>\n\n<pre><code>char string0i[2] = {string0[i], '\\0'};\nstrcat(string1, string0i);\n</code></pre>\n\n<p>But this results in a segmentation fault. Why and how can I achieve what I want, i.e. appending the ith element of <code>string0</code> to <code>string1</code>?</p>\n"}, {"tags": ["c", "static", "global-variables"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1536765806, "post_id": 52298602, "comment_id": 91544970, "body": "shadow rule, if you don&#39;t want this behavior just don&#39;t name your variable the same."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1536765877, "post_id": 52298602, "comment_id": 91545015, "body": "In practice <i>never</i> have two variables of the same name visible in some common location (this is a coding rule)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1536766028, "post_id": 52298602, "comment_id": 91545116, "body": "Note, that <code>static</code> or not <code>static</code> - it won&#39;t change anything. The local will be &quot;picked&quot; in any case."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7015283"}, "edited": false, "score": 0, "creation_date": 1536766239, "post_id": 52298602, "comment_id": 91545260, "body": "Meaning that <b>static int account</b> is local variable. I am asking this because I thought that static and global are stored separately in memory , so that none of them is local to function. Please correct me if I am wrong."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536766370, "post_id": 52298602, "comment_id": 91545339, "body": "The way it is stored is unrelated to the scope rules."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7015283"}, "edited": false, "score": 0, "creation_date": 1536766439, "post_id": 52298602, "comment_id": 91545374, "body": "Oh Okay. Got it!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536766523, "post_id": 52298602, "comment_id": 91545423, "body": "But note, that <code>static</code> <i>will</i> affect the scope of a <i>global</i> variable, and will restrict it to the translation unit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7015283"}, "edited": false, "score": 0, "creation_date": 1536766556, "post_id": 52298602, "comment_id": 91545442, "body": "translation unit??"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536766583, "post_id": 52298602, "comment_id": 91545460, "body": "Usually - a single source file."}, {"owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "edited": false, "score": 1, "creation_date": 1536769022, "post_id": 52298602, "comment_id": 91546827, "body": "Neither of those variables will be stored in the heap. <a href=\"https://stackoverflow.com/questions/93039/where-are-static-variables-stored-in-c-and-c#93411\">Where they end up depends on if they&#39;re initialized.</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536772506, "post_id": 52298602, "comment_id": 91548492, "body": "Not clear what you are asking. <code>static</code> variables <b>are</b> have a &quot;global&quot; lifetime. &quot;global&quot; is not a standard term; what so you mean?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536772613, "post_id": 52298602, "comment_id": 91548526, "body": "@EugeneSh.: Ehm, \u2026 no. - wait, &quot;restrict&quot; in which sense? This question and the comments mix just way too many concepts. OP should first learn about the standard terminology; that should also make most of the question irrelevant."}, {"owner": {"reputation": 1237, "user_id": 1196033, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/61d1910b70d5ca13305e30bb4ae95942?s=128&d=identicon&r=PG", "display_name": "xaviersjs", "link": "https://stackoverflow.com/users/1196033/xaviersjs"}, "edited": false, "score": 0, "creation_date": 1541285602, "post_id": 52298602, "comment_id": 93165537, "body": "One really important point here is that by defining the inner variable static, you have enforced zero-initialization! This is the main reason you see 0 instead of an unspecified value"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 26, "last_activity_date": 1536781456, "last_edit_date": 1536781456, "creation_date": 1536765788, "answer_id": 52298655, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why/52298655#52298655", "title": "Selecting Static over Global. Why?", "body": "<p>If multiple variables exist with the same name at multiple scopes, the one in the innermost scope is the one that is accessible.  Variables at higher scope are hidden.  </p>\n\n<p>In this case you have <code>account</code> defined in <code>main</code>.  This hides the variable named <code>account</code> declared at file scope.  The fact that the inner variable inside <code>main</code> is declared <code>static</code> doesn't change that.  </p>\n\n<p>While the <code>static</code> declaration on a local variable means that it is typically stored in the same place as a global variable, that has no bearing on which is visible when the names are the same.</p>\n"}, {"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1536770977, "post_id": 52298766, "comment_id": 91547746, "body": "I felt sad that you didn&#39;t call <code>quork</code> again."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 7, "last_activity_date": 1541426661, "last_edit_date": 1541426661, "creation_date": 1536766132, "answer_id": 52298766, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why/52298766#52298766", "title": "Selecting Static over Global. Why?", "body": "<p>Consider this small self explaining program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint bar = 123;     // global variable, can be accessed from other source files\n\nstatic int blark;  // global variable, but can be accessed only in the same\n                   // source file\n\nvoid foo()\n{\n  static int bar;  // static variable : will retain it's value from\n                   // one call of foo to the next\n                   // most compilers will warn here:\n                   // warning  declaration of 'bar' hides global declaration\n\n  printf(\"foo() : bar = %d\\n\", bar);  // won't use the global bar but the\n                                      // local static bar\n  bar++;\n}\n\nvoid quork()\n{\n  int bar = 777;   // local variable exists only during the execution of quork\n                   // most compilers will warn here as well:\n                   // warning  declaration of 'bar' hides global declaration\n\n  printf(\"quork() : bar = %d\\n\", bar);  // won't use the global bar but the\n                                        // local bar\n  bar++;\n}\n\nint main() {\n  foo();\n  foo();\n  printf(\"main() 1 : bar = %d\\n\", bar);\n  bar++;\n  quork();\n  quork();\n  foo();\n  printf(\"main() 2 : bar = %d\\n\", bar);\n  printf(\"blark = %d\\n\", blark);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo() : bar = 0\nfoo() : bar = 1\nmain() 1 : bar = 123\nquork() : bar = 777\nquork() : bar = 777\nfoo() : bar = 2\nmain() 2 : bar = 124\nblark = 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "is_accepted": false, "score": 3, "last_activity_date": 1541015725, "creation_date": 1541015725, "answer_id": 53091032, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why/53091032#53091032", "title": "Selecting Static over Global. Why?", "body": "<p>Just to clarify for future readers, global and static variables are not stored in heap or stack memory.\n<a href=\"https://www.geeksforgeeks.org/memory-layout-of-c-program/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/memory-layout-of-c-program/</a></p>\n\n<p>They will either be stored in initialized data or uninitialized data.</p>\n\n<p>Thats not the main question here, which was answered by dbush, but it is a misunderstanding in the original question.</p>\n"}, {"tags": [], "owner": {"reputation": 1237, "user_id": 1196033, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/61d1910b70d5ca13305e30bb4ae95942?s=128&d=identicon&r=PG", "display_name": "xaviersjs", "link": "https://stackoverflow.com/users/1196033/xaviersjs"}, "is_accepted": false, "score": 2, "last_activity_date": 1541491870, "last_edit_date": 1541491870, "creation_date": 1541285110, "answer_id": 53136169, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why/53136169#53136169", "title": "Selecting Static over Global. Why?", "body": "<p>Short answer: encapsulation. </p>\n\n<p><code>static</code> describes both <em>lifetime</em> and <em>visibility</em> of a variable, and its meaning changes depending on the context. My opinion is that it is one of the more useful and important language features for encapsulation in c. Ignoring the complex relationship to <code>extern</code>, here's a simplified description:</p>\n\n<p><code>static</code> variables defined at the file level have program lifetime and <em><a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">compilation unit</a></em> visibility. This means all functions in a .c file can access/modify the variable, but other .c files won't know about the variable. This is <em>super</em> useful for making sure variables used across functions with a compilation unit don't accidentally link with variables in other compilation units. Personally, I <strong>highly</strong> recommend all file variables to be static by default. Only remove the <code>static</code> specifier if you really want another compilation unit to have access to it (although a getter function may be safer)</p>\n\n<p>Variables declared <code>static</code> <em>within</em> a block scope (most importantly function scope) have program lifetime, and scope visibility. That means it functions as if you declared the variable globally in the file, but only code within that block scope can see it. It also means from one call to the next, the variable does not get destroyed and state can be transferred from call to call.</p>\n\n<p><strong>One really important difference</strong> with static variables is that they are default-initialized to zero. This differs from <em>all</em> other variables in c, and is the reason your program prints the value 0. Often times with trivial programs we don't notice the difference because the stack hasn't been polluted with variables yet, but it becomes critical for any program of size.</p>\n\n<p>The most common use for this that I have seen is to enable one-time initialization <em>within</em> a scope. They are also extremely useful for synchronization primitives like <code>pthread_mutex_t</code>. One time I even implemented a state-machine with function-scope static variable.</p>\n\n<p>an example:</p>\n\n<pre><code>int started;//oops, anybody in the entire program can change this value, especially with such a common name!\nstatic int lastCall;\n\nint callCount(void)\n{\n    // This is default-initialized to 0\n    static int functionStaticVariable;\n\n    //Increment each time I'm called\n    ++functionStaticVariable;\n\n    //tell the outside world that I'm the one who was called last\n    lastCall = 1;\n\n    //return (a copy of) my internal state.\n    return functionStaticVariable;\n}\n\nchar *getSharedMemory(unsigned int bytes)\n{\n    // Here I cannot see functionStaticVariable, but I can see globalVariable\n    //functionStaticVariable++; // this would cause a compilation failure\n\n    // static pointer is default-initialized to zero (i.e. NULL)\n    static char *sharedMemory;\n    if(sharedMemory == 0)\n    {\n        // This block only executes once, the first time the function is called.\n        // Actually this is a nice side-effect because it means if the function is never called we don't clutter the stack with unused memory\n        // Although we will probably never free this memory\n        sharedMemory = (char *)malloc(bytes);\n    }\n\n    // tell the outside world that this function has been called\n    lastCall = 2;//valid\n\n    //Woah, this is such a bad idea, but actually does _not_ return memory that gets invalidated\n    return sharedMemory;\n}\n</code></pre>\n\n<p>Hopefully you can see with this pattern you could protect a variable by placing it inside a function and doing optional things like acquiring a mutex-lock in order to allocate the memory. You could even implement the <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">double-lock pattern</a> this way.</p>\n\n<p>I secretly wish that all C++ programmers learned good c encapsulation, because actually the language really encourages it. You can do an incredible amount by placing only functions that need to communicate with each other together in a compilation unit. In a non-OOP language, this can be very powerful.</p>\n\n<p>Full details of static and extern are described by <a href=\"https://en.cppreference.com/w/c/language/storage_duration\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/language/storage_duration</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 911, "user_id": 3274560, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UTsnv3WsIoA/AAAAAAAAAAI/AAAAAAAAAC0/9kd6F2mN5kM/photo.jpg?sz=128", "display_name": "rioted", "link": "https://stackoverflow.com/users/3274560/rioted"}, "is_accepted": false, "score": 0, "last_activity_date": 1541517472, "creation_date": 1541517472, "answer_id": 53174792, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why/53174792#53174792", "title": "Selecting Static over Global. Why?", "body": "<p>The pragmatic reasoning behind why innermost variable decaration should be the one used: you're not always in control of what's outside your code. You want to be able to write a function that certainly works. If other programmers (say, in a larger team) could break your code just by the way they name variables in other parts of the code, programming would be more of a pain than it is now.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7015283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 1, "accepted_answer_id": 52298655, "answer_count": 5, "score": -1, "last_activity_date": 1541517472, "creation_date": 1536765617, "last_edit_date": 1541078307, "question_id": 52298602, "link": "https://stackoverflow.com/questions/52298602/selecting-static-over-global-why", "title": "Selecting Static over Global. Why?", "body": "<p>The output of the following code is 0.</p>\n\n<pre><code>int account=2;\n\nint main()\n{\n    static int account;\n    printf(\"%d\",account);\n    return 0;\n}\n</code></pre>\n\n<p>Why it picked static variable over global variable? Because what I understand is that both global and static variables are stored in the heap and not in function stack , right? So what method it uses to use select one over another?</p>\n"}, {"tags": ["c", "performance", "readfile"], "comments": [{"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1536765764, "post_id": 52297615, "comment_id": 91544945, "body": "@Gerhardh, I&#39;m really sorry, I post this question using smartphone application. I&#39;m doing already  indentation adjustments"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1536766510, "post_id": 52297615, "comment_id": 91545415, "body": "Unfortunately you are not providing an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (serial config, number of bytes to read) and you are not telling us how the writing to the serial is done. By the way: your code is broken. It expects a) &quot;end&quot; to be at the start of the buffer and b) &quot;end&quot; to be read completely during one <code>ReadFile</code>. Both assumptions might not be true."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1536766913, "post_id": 52297615, "comment_id": 91545640, "body": "What is the type of lpBuffer (I assumed <code>char</code> but see <code>lpBuffer[0] % 1024</code>)? How many bytes do you read in total (how many chunks, how many bytes per chunk)?"}, {"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1536766982, "post_id": 52297615, "comment_id": 91545678, "body": "@WernerHenze, I have my serial input from MCU(cortex m7 h743zi). And I literally can&#39;t provide verifiable example because it will require a piece of external hardware. About &quot;end&quot; it&#39;s a little hack and I have control over when this specific dummy packet (with first buffer entry contain 0x646E65 - &quot;end&quot; ) will be send"}, {"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1536767014, "post_id": 52297615, "comment_id": 91545700, "body": "@WernerHenze it&#39;s unsigned int. I&#39;m reading 1024*4 bytes in chunk 60 chunks (61440*4 bytes overall)"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1536771019, "post_id": 52297615, "comment_id": 91547762, "body": "While <code>fprintf</code> is executing, the serial keeps accumulating incoming data. The next time you try to read, the data is readily available. Without <code>fprintf</code>, the program has to wait for it inside <code>ReadFile</code>. Therefore a discrepancy."}, {"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1536771200, "post_id": 52297615, "comment_id": 91547848, "body": "@user58697 sounds reasonable, thanks! Would you mind making an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "edited": false, "score": 1, "creation_date": 1536765497, "post_id": 52298515, "comment_id": 91544810, "body": "But in my case time consumed by readfile function and some minuscule lines of code is getting less, not more. Did I understand you right?"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "reply_to_user": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "edited": false, "score": 0, "creation_date": 1536765887, "post_id": 52298515, "comment_id": 91545019, "body": "from your question I state that commenting the fprintf invocation your program is faster. So I imagine that you run anyway the ReadFile method, otherwise your buffer would not be filled."}, {"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "edited": false, "score": 0, "creation_date": 1536766555, "post_id": 52298515, "comment_id": 91545441, "body": "I&#39;m sorry, I think I express this poorly, when I do printing, <code>readfile</code> take less time"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1536766652, "post_id": 52298515, "comment_id": 91545496, "body": "In the given output the overall time is the same with or without printing."}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1536767405, "post_id": 52298515, "comment_id": 91545918, "body": "@WernerHenze I&#39;ve tried running this code with printing and without using the clock() function to count ticks. I got a result of 95 ticks with printing and a single tick without, so I don&#39;t understand how you can get the same time..."}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "reply_to_user": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "edited": false, "score": 0, "creation_date": 1536768363, "post_id": 52298515, "comment_id": 91546487, "body": "@user9403409 Ok so I didn&#39;t understand correctly the initial question. Now that it has been edited it is clearer for me."}, {"owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1536768630, "post_id": 52298515, "comment_id": 91546631, "body": "@WernerHenze time that readfile function takes was measured with <code>starrCounter</code> and <code>endCounter</code>. This counter was expressed as plain &quot;time&quot; not full time"}], "tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 0, "last_activity_date": 1536765940, "last_edit_date": 1536765940, "creation_date": 1536765369, "answer_id": 52298515, "question_id": 52297615, "link": "https://stackoverflow.com/questions/52297615/fprintf-have-strange-effect-on-timestamp-counter/52298515#52298515", "title": "fprintf have strange effect on timestamp counter", "body": "<p>printing on the console can be an intense time consuming operation, many times reaching even thousands of clock cycles.\nHave a look at this <a href=\"https://embeddedgurus.com/stack-overflow/tag/printf/\" rel=\"nofollow noreferrer\">link</a> where it is explained the time consumed by using printf. I know in your case you are using fprintf, but your destination file is still the console output, requiring so the whole process of interrupt, context switch, printing on console, etc.\nI cite this piece of code from the link:</p>\n\n<pre><code>int main( void )\n{\n    int i = 89;\n\n    printf(\"hello, world %d\\n\", i);\n}\n</code></pre>\n\n<p>This might seems as a small and fast code, but it requires 6371 cycles on a RISC CPU. So imagine having a 1MHz RISC CPU, this would require more than 6 ms to execute.</p>\n\n<p>Now imagine that if you are running your code on a computer with OS there are even more delay introduced by the switching between processes and threads and interrupts routines.</p>\n"}, {"tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": true, "score": 3, "last_activity_date": 1536771286, "creation_date": 1536771286, "answer_id": 52300131, "question_id": 52297615, "link": "https://stackoverflow.com/questions/52297615/fprintf-have-strange-effect-on-timestamp-counter/52300131#52300131", "title": "fprintf have strange effect on timestamp counter", "body": "<p>While <code>fprintf</code> is executing, the serial keeps accumulating incoming data. The next time you try to read, the data is readily available. Without <code>fprintf</code>, the program has to wait for it inside <code>ReadFile</code>. Therefore a discrepancy.</p>\n"}], "owner": {"reputation": 47, "user_id": 9403409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5e27f02c09b24851a54a2b973989de?s=128&d=identicon&r=PG&f=1", "display_name": "stronk_kisik", "link": "https://stackoverflow.com/users/9403409/stronk-kisik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 52300131, "answer_count": 2, "score": 0, "last_activity_date": 1536771286, "creation_date": 1536762629, "last_edit_date": 1536768450, "question_id": 52297615, "link": "https://stackoverflow.com/questions/52297615/fprintf-have-strange-effect-on-timestamp-counter", "title": "fprintf have strange effect on timestamp counter", "body": "<p>I have two counters:</p>\n\n<pre><code>#define number_of_ccr 1024\nunsigned int lpBuffer[number_of_ccr] = {0};\nunsigned long nNumberOfBytesToRead =     number_of_ccr*4;\nunsigned long lpNumberOfBytesRead;  \nunsigned int counter = 0;\nunsigned int error = 0;\nQueryPerformanceCounter(&amp;fullCounter); // first counter\n\nfor(;;) {\n\n  QueryPerformanceCounter(&amp;startCounter); //     second counter \n  error = ReadFile(\n    hSerial,\n    lpBuffer,\n    nNumberOfBytesToRead,\n    &amp;lpNumberOfBytesRead,\n    NULL\n    );\n\n  if(!strcmp(lpBuffer, \"end\")) {\n  CloseHandle(FileHandle);\n  //char *copyString = \"copy\";\n  //WriteFile(hSerial, copyString , strlen(copyString), &amp;bytes_written, NULL);\n  fprintf(stderr, \"end flag was received\\n\");\n  break;\n  }\n  else if(lpNumberOfBytesRead == nNumberOfBytesToRead) {\n\n  // NOTE(): succeed\n  QueryPerformanceCounter(&amp;endCounter);\n  time += Win32GetSecondsElapsed(startCounter, endCounter); //second counter\n\n  DWORD BytesWritten;\n  // write data to file\n  WriteFile(FileHandle, lpBuffer, lpNumberOfBytesRead, &amp;BytesWritten, 0);\n    if(!(lpBuffer[0] % 1024)) {\n      fprintf(stderr, \"bytes %d \\r\", lpBuffer[0]);// &lt;--- THIS LINE\n    }\n  }\n  else if(lpNumberOfBytesRead &lt; nNumberOfBytesToRead) {\n    fprintf(stderr, \"bytes %d \\n\", lpNumberOfBytesRead); \n  }\n\n}// for(;;) \nQueryPerformanceCounter(&amp;fullCounterEnd);\nfullTime =   Win32GetSecondsElapsed(fullCounter, fullCounterEnd);           \n\nchar DebugBuffer[256];\nfprintf(stderr, \"time: %f \\n\", time);\nfprintf(stderr, \"full time: %f \\n\", fullTime);\n</code></pre>\n\n<p>if I will comment <code>fprintf(stderr, \"bytes %d \\r\", lpBuffer[0]);// &lt;--- THIS LINE</code> second counter will  be approx same time as fist counter (fullCounter). When this line is uncommented second  timer is almost twice less than first counter. Presence of this line is the only difference.</p>\n\n<p>Overall: \nIf <code>fprintf</code>is NOT COMMENTED my counter show BETTER <code>readfile</code> performance --> second counter has LESSER time</p>\n\n<p>If <code>fprintf</code> COMMENTED I have WORSE performance --> second counter has MORE time on it</p>\n\n<p>compiler flags: cl -Z7 -nologo -Fmsource.map ../code/source.c</p>\n\n<p>cmder log:</p>\n\n<pre><code>C:\\Documents\\work\\region\\testProject\\build (master -&gt; origin)\n\u03bb source.exe\nOpening serial port...OK\nSending bytes...9 bytes written\nend flag was received\ntime: 0.193245\nfull time: 0.206170\nClosing serial port...OK\n\nC:\\Documents\\work\\region\\testProject\\build (master -&gt; origin)\n\u03bb source.exe\nOpening serial port...OK\nSending bytes...9 bytes written\nend flag was received\ntime: 0.115640\nfull time: 0.204010\nClosing serial port...OK\n</code></pre>\n\n<p>My question is, why is this happen? What kind of effect it have on my program?</p>\n"}, {"tags": ["c", "variables", "int"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1536762276, "post_id": 52297437, "comment_id": 91542844, "body": "You most likely invoke <i>undefined behavior</i>, but we&#39;ll need a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to tell you where (most likely <code>qtail</code> isn&#39;t initialized or a null pointer)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536762380, "post_id": 52297437, "comment_id": 91542918, "body": "<i>&quot;maybe I ran out of stack memory and the program started rewriting itself?&quot;</i> - Not on any modern OS."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536762451, "post_id": 52297437, "comment_id": 91542960, "body": "Wow...that sounds like magic, an int that changes itself!"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 3, "creation_date": 1536762514, "post_id": 52297437, "comment_id": 91543000, "body": "Seems that <code>qtail-&gt;block</code> is the same address as <code>max</code>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1536762676, "post_id": 52297437, "comment_id": 91543103, "body": "@PaulOgilvie Or it partially overlaps <code>max</code> so that zeroing it out zeroes all the non-zero parts of <code>max</code>."}, {"owner": {"reputation": 1519, "user_id": 5447136, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/bpy5K.jpg?s=128&g=1", "display_name": "bool3max", "link": "https://stackoverflow.com/users/5447136/bool3max"}, "edited": false, "score": 2, "creation_date": 1536762690, "post_id": 52297437, "comment_id": 91543112, "body": "Try <code>printf(&quot;%p : %p&quot;, &amp;(qtail-&gt;block), &amp;max);</code> to see if they possibly point to the same address."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1536763387, "post_id": 52297437, "comment_id": 91543536, "body": "Just a kudo for ferociously debugging until you narrowed it down to three lines. Very well done!"}, {"owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "edited": false, "score": 0, "creation_date": 1536763963, "post_id": 52297437, "comment_id": 91543891, "body": "thanks everyone, it was the same address problem indeed, but I&#39;m not very experienced so it didn&#39;t come to my mind"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1536764040, "post_id": 52297437, "comment_id": 91543946, "body": "Well, now you should investigate <i>why</i> it was the same address."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536764721, "post_id": 52298192, "comment_id": 91544361, "body": "If <code>qtail-&gt;block</code> has type <code>int</code> and <code>&amp;qtail-&gt;block == &amp;max</code> then the behavior you observed is perfectly well defined, and exactly what one would expect.  There may be some UB responsible for those two pointers being aliased, but you left that out of the scope of the question."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1536766989, "post_id": 52298192, "comment_id": 91545684, "body": "Nitpick: arguments matching a <code>&quot;%p&quot;</code> specifier in printf should be of type <code>(void*)</code>, with a cast if needed."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536772942, "post_id": 52298192, "comment_id": 91548676, "body": "No cast is ever needed when passing any pointer type argument to a function that takes void *."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 1, "creation_date": 1536773112, "post_id": 52298192, "comment_id": 91548754, "body": "just wander, what was the reason for getting different vars allocated at the same address in your case? can you update the answer with explanation?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536774444, "post_id": 52298192, "comment_id": 91549392, "body": "@ LeeDanielCrocker <code>printf</code> does not have a <code>void*</code> argument. Pointers to different types are not necessarily the same size, so the <code>(void*)</code> cast is precautionary, for the <code>%p</code> specifier to be given the correct value."}], "tags": [], "owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "is_accepted": true, "score": 3, "last_activity_date": 1536764325, "creation_date": 1536764325, "answer_id": 52298192, "question_id": 52297437, "link": "https://stackoverflow.com/questions/52297437/an-integer-changed-itself-for-no-reason-could-it-be-for-memory-issues/52298192#52298192", "title": "an integer changed itself for no reason, could it be for memory issues?", "body": "<p>The problem happened because of undefined behaviour; by using </p>\n\n<pre><code> printf(\"%p : %p\", &amp;(qtail-&gt;block), &amp;max); \n</code></pre>\n\n<p>I saw that max and the qtail pointer had the same address and corrected what caused it. </p>\n"}], "owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1536773340, "accepted_answer_id": 52298192, "answer_count": 1, "score": 0, "last_activity_date": 1536764325, "creation_date": 1536762131, "question_id": 52297437, "link": "https://stackoverflow.com/questions/52297437/an-integer-changed-itself-for-no-reason-could-it-be-for-memory-issues", "closed_reason": "Not suitable for this site", "title": "an integer changed itself for no reason, could it be for memory issues?", "body": "<p>I have a long program that has an int max in it. It wasn't working and i found out that max changed itself to 0 for no reason since after its first value is never changed.</p>\n\n<p>I used a lot of prints to find out where it happens and for some reason happens here:</p>\n\n<pre><code>printf(\"max is: %d\\n\",max); \nqtail-&gt;block=0;\nprintf(\"max is: %d\\n\",max);\n</code></pre>\n\n<p>Before this instruction, max has its correct value, and after it max is 0. How?? That pointer has absolutely nothing to do with max, maybe I ran out of stack memory and the program started rewriting itself?...block is an int too but inside a struct</p>\n"}, {"tags": ["c", "go", "system-calls"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1536761020, "post_id": 52297027, "comment_id": 91541954, "body": "What do you mean by a &quot;raw systemcall&quot;? Can you please elaborate? And please try to make your question self-contained by adding a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> or two."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1536761278, "post_id": 52297027, "comment_id": 91542112, "body": "@JimB: It states that pure C calls are only 2244 ns/op though. You&#39;re looking at CGo (using native C interfaces from within Go) vs. Go, not Go vs. C."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1536761434, "post_id": 52297027, "comment_id": 91542220, "body": "@JimB we are comparing C and Go, not Cgo."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536761453, "post_id": 52297027, "comment_id": 91542231, "body": "And how many times did you run your benchmarks?  How do you know how many times your test processes were swapped out during a test, or switched to another CPU core?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1536761728, "post_id": 52297027, "comment_id": 91542405, "body": "Maybe because you&#39;re comparing apples to pears?"}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536761786, "post_id": 52297027, "comment_id": 91542455, "body": "@Jabberwocky Am I? Why?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536761922, "post_id": 52297027, "comment_id": 91542551, "body": "@ChangkunOu not sure, but mabe the overhead is different? Perhaps you need to clarify the question and add more background information."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536761969, "post_id": 52297027, "comment_id": 91542601, "body": "@AndrewHenle You should read the benchmark and running script."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536762112, "post_id": 52297027, "comment_id": 91542724, "body": "@Someprogrammerdude You are saying nothing helpful. The code is provided in the link. You literally can run the benchmark with two lines of command (<code>git clone</code> and <code>sh run.sh</code>)"}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536762289, "post_id": 52297027, "comment_id": 91542859, "body": "@Jabberwocky I added more background information regarding C system call and Go syscall in the description."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536762741, "post_id": 52297027, "comment_id": 91543146, "body": "<i>You should read the benchmark and running script.</i>  I did.  So tell me, how many times did your benchmark processes get swapped out or switched to another CPU while running?  If you&#39;re going to benchmark things like this, you have to account for context switches and everything else that can pollute your results."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536763108, "post_id": 52297027, "comment_id": 91543358, "body": "@AndrewHenle <i>how many times did your benchmark processes get swapped out or switched to another CPU while running?</i> You can profiling the benchmark your self. If I can do anything myself, why am I seeking insights here? The final result is an average based on <code>500000</code> times execution as you can see from the output of the benchmark. The average shows C system call is significantly faster than Go syscall."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1536763438, "post_id": 52297027, "comment_id": 91543561, "body": "Links can go stale, change, or disappear completely. That&#39;s why questions should be <i>self contained</i>. Otherwise they run the risk of becoming worthless. It&#39;s not only about helping you now, but helping other programmers with similar (or the same) problem in the future as well. If you need, then please (re-)read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536763575, "post_id": 52297027, "comment_id": 91543647, "body": "@Someprogrammerdude Thank you very much. I&#39;ve added all benchmarks in the question description, please help, thanks again."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1536764488, "post_id": 52297027, "comment_id": 91544213, "body": "<i>You can profiling the benchmark your self.</i> I&#39;m not the one <b>asking</b> for help.  The information you have given does not &quot;shows C system call is significantly faster than Go syscall&quot; at all. That may be true, but your data doesn&#39;t establish that. Something that fast can be perturbed by a lot of things the data you have collected doesn&#39;t account for. You can try to account for unknowns by running your benchmarks many times to see if the results are significant and consistent."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536766372, "post_id": 52297027, "comment_id": 91545340, "body": "@AndrewHenle Well. Chart is added."}], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "edited": false, "score": 0, "creation_date": 1536766980, "post_id": 52298477, "comment_id": 91545676, "body": "A great explanation! I appreciate a lot. Thus there is no way to optimize and I must suffer that if I make massive IO calls, mustn&#39;t I?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "reply_to_user": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "edited": false, "score": 0, "creation_date": 1536768342, "post_id": 52298477, "comment_id": 91546471, "body": "Updated my answer to address your comment."}, {"owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "edited": false, "score": 0, "creation_date": 1537164667, "post_id": 52298477, "comment_id": 91667511, "body": "Hi, I managed your proposal, however, the benchmark shows the performance not even close to pure system calls (in description updates). Is there anything wrong with my benchmark?"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "reply_to_user": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "edited": false, "score": 0, "creation_date": 1537206072, "post_id": 52298477, "comment_id": 91690862, "body": "Both the question and answer already accreted too much additional information, clearly displaying SO is not fit for solving it. Please post the question to <a href=\"https://groups.google.com/d/forum/golang-nuts\" rel=\"nofollow noreferrer\">the mailing list</a> instead. Please be sure to post <i>the question</i> (complete with a short summary of the insight provided by others, and your concerns left unsolved), not just drop a link to this discussion. Thanks."}], "tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": true, "score": 18, "last_activity_date": 1575829699, "last_edit_date": 1575829699, "creation_date": 1536765265, "answer_id": 52298477, "question_id": 52297027, "link": "https://stackoverflow.com/questions/52297027/go-syscall-v-s-c-system-call/52298477#52298477", "title": "Go syscall v.s. C system call", "body": "<blockquote>\n  <p>My benchmark shows, pure C system call is 15.82% faster than pure Go system call in the latest release (go1.11).</p>\n  \n  <p>What did I miss? What could be a reason and how to optimize them?</p>\n</blockquote>\n\n<p>The reason is that while both C and Go (on a typical platform Go supports\u2014such as Linux or *BSD or Windows) are compiled down to machine code, Go-native code runs in an environment quite different from that of C.</p>\n\n<p>The two chief differences to C are:</p>\n\n<ul>\n<li>Go code runs in the context of so-called goroutines which are freely scheduled by the Go runtime on different OS threads.</li>\n<li>Goroutines use their own (growable and <em>reallocatable)</em> lightweight stacks which have nothing to do with the OS-supplied stack C code uses.</li>\n</ul>\n\n<p>So, when Go code wants to make a syscall, quite a lot should happen:</p>\n\n<ol>\n<li>The goroutine which is about to enter a syscall must be \"pinned\" to the OS thread on which it's currently running.</li>\n<li>The execution must be switched to use the OS-supplied C stack.</li>\n<li>The necessary preparation in the Go runtime's scheduler are made.</li>\n<li>The goroutine enters the syscall.</li>\n<li>Upon exiting the execution of the goroutine has to be resumed, which is a relatively involved process in itself which may be additionaly hampered if the goroutine was <em>in</em> the syscall for too long and the scheduler removed the so-called \"processor\" from under that goroutine, spawned another OS thread and made that processor run another goroutine (\"processors\", or <code>P</code>s are thingies which run goroutines on OS threads).</li>\n</ol>\n\n<hr>\n\n<p><em>Update</em> to answer the OP's comment</p>\n\n<blockquote>\n  <p>&lt;\u2026> Thus there is no way to optimize and I must suffer that if I make massive IO calls, mustn't I?</p>\n</blockquote>\n\n<p>It heavily depends on the nature of the \"massive I/O\" you're after.</p>\n\n<p>If your example (with <code>socketpair(2)</code>) is not toy, there is simply no reason to use syscalls directly: the FDs returned by <code>socketpair(2)</code> are \"pollable\" and hence the Go runtime may use its native \"netpoller\" machinery to perform I/O on them. Here is a working code from one of my projects which properly \"wraps\" FDs produced by <code>socketpair(2)</code> so that they can be used as \"regular\" sockets (produced by functions from the <code>net</code> standard package):</p>\n\n<pre><code>func socketpair() (net.Conn, net.Conn, error) {\n       fds, err := syscall.Socketpair(syscall.AF_LOCAL, syscall.SOCK_STREAM, 0)\n       if err != nil {\n               return nil, nil, err\n       }\n\n       c1, err := fdToFileConn(fds[0])\n       if err != nil {\n               return nil, nil, err\n       }\n\n       c2, err := fdToFileConn(fds[1])\n       if err != nil {\n               c1.Close()\n               return nil, nil, err\n       }\n\n       return c1, c2, nil\n}\n\nfunc fdToFileConn(fd int) (net.Conn, error) {\n       f := os.NewFile(uintptr(fd), \"\")\n       defer f.Close()\n       return net.FileConn(f)\n}\n</code></pre>\n\n<p>If you're talking about some other sort of I/O, the answer is that yes, syscalls are not really cheap and if you <em>must</em> do lots of them, there are ways to work around their cost (such as offloading to some C code\u2014linked in or hooked up as an external process\u2014which would somehow <em>batch</em> them so that each call to that C code would result in several syscalls done by the C side).</p>\n"}], "owner": {"reputation": 1022, "user_id": 3819460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oZU0t.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3819460/jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3100, "favorite_count": 7, "accepted_answer_id": 52298477, "answer_count": 1, "score": 15, "last_activity_date": 1575829699, "creation_date": 1536760857, "last_edit_date": 1537164367, "question_id": 52297027, "link": "https://stackoverflow.com/questions/52297027/go-syscall-v-s-c-system-call", "title": "Go syscall v.s. C system call", "body": "<p>Go, and C both involve system calls directly (Technically, C will call a stub).</p>\n\n<blockquote>\n  <p>Technically, write is both a system call and a C function (at least on many systems). However, the C function is just a stub which invokes the system call. Go does not call this stub, it invokes the system call directly, which means that C is not involved here</p>\n  \n  <p>From <a href=\"https://stackoverflow.com/questions/52081841/differences-between-c-write-call-and-go-syscall-write\">Differences between C write call and Go syscall.Write</a></p>\n</blockquote>\n\n<p>My benchmark shows, pure C system call is 15.82% faster than pure Go system call in the latest release (go1.11).</p>\n\n<p>What did I miss? What could be a reason and how to optimize them?</p>\n\n<p>Benchmarks:</p>\n\n<p>Go:</p>\n\n<pre><code>package main_test\n\nimport (\n    \"syscall\"\n    \"testing\"\n)\n\nfunc writeAll(fd int, buf []byte) error {\n    for len(buf) &gt; 0 {\n        n, err := syscall.Write(fd, buf)\n        if n &lt; 0 {\n            return err\n        }\n        buf = buf[n:]\n    }\n    return nil\n}\n\nfunc BenchmarkReadWriteGoCalls(b *testing.B) {\n    fds, _ := syscall.Socketpair(syscall.AF_UNIX, syscall.SOCK_STREAM, 0)\n    message := \"hello, world!\"\n    buffer := make([]byte, 13)\n    for i := 0; i &lt; b.N; i++ {\n        writeAll(fds[0], []byte(message))\n        syscall.Read(fds[1], buffer)\n    }\n}\n</code></pre>\n\n<p>C:</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint write_all(int fd, void* buffer, size_t length) {\n    while (length &gt; 0) {\n        int written = write(fd, buffer, length);\n        if (written &lt; 0)\n            return -1;\n        length -= written;\n        buffer += written;\n    }\n    return length;\n}\n\nint read_call(int fd, void *buffer, size_t length) {\n    return read(fd, buffer, length);\n}\n\nstruct timespec timer_start(){\n    struct timespec start_time;\n    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;start_time);\n    return start_time;\n}\n\nlong timer_end(struct timespec start_time){\n    struct timespec end_time;\n    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;end_time);\n    long diffInNanos = (end_time.tv_sec - start_time.tv_sec) * (long)1e9 + (end_time.tv_nsec - start_time.tv_nsec);\n    return diffInNanos;\n}\n\nint main() {\n    int i = 0;\n    int N = 500000;\n    int fds[2];\n    char message[14] = \"hello, world!\\0\";\n    char buffer[14] = {0};\n\n    socketpair(AF_UNIX, SOCK_STREAM, 0, fds);\n    struct timespec vartime = timer_start();\n    for(i = 0; i &lt; N; i++) {\n        write_all(fds[0], message, sizeof(message));\n        read_call(fds[1], buffer, 14);\n    }\n    long time_elapsed_nanos = timer_end(vartime);\n    printf(\"BenchmarkReadWritePureCCalls\\t%d\\t%.2ld ns/op\\n\", N, time_elapsed_nanos/N);\n}\n</code></pre>\n\n<p>340 different running, each C running contains 500000 executions, and each Go running contains b.N executions (mostly 500000, few times executed in 1000000 times):</p>\n\n<p><a href=\"https://i.stack.imgur.com/MVOvW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/MVOvW.png\" alt=\"enter image description here\"></a></p>\n\n<p>T-Test for 2 Independent Means: The t-value is -22.45426. The p-value is &lt; .00001. The result is significant at p &lt; .05.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fnCFT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fnCFT.png\" alt=\"enter image description here\"></a></p>\n\n<p>T-Test Calculator for 2 Dependent Means: The value of t is 15.902782. The value of p is &lt; 0.00001. The result is significant at p \u2264 0.05.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XTZmc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XTZmc.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Update: I managed the proposal in the answers and wrote another benchmark, it shows the proposed approach significantly drops the performance of massive I/O calls, its performance close to CGO calls.</p>\n\n<p>Benchmark:</p>\n\n<pre><code>func BenchmarkReadWriteNetCalls(b *testing.B) {\n    cs, _ := socketpair()\n    message := \"hello, world!\"\n    buffer := make([]byte, 13)\n    for i := 0; i &lt; b.N; i++ {\n        cs[0].Write([]byte(message))\n        cs[1].Read(buffer)\n    }\n}\n\nfunc socketpair() (conns [2]net.Conn, err error) {\n    fds, err := syscall.Socketpair(syscall.AF_LOCAL, syscall.SOCK_STREAM, 0)\n    if err != nil {\n        return\n    }\n    conns[0], err = fdToFileConn(fds[0])\n    if err != nil {\n        return\n    }\n    conns[1], err = fdToFileConn(fds[1])\n    if err != nil {\n        conns[0].Close()\n        return\n    }\n    return\n}\n\nfunc fdToFileConn(fd int) (net.Conn, error) {\n    f := os.NewFile(uintptr(fd), \"\")\n    defer f.Close()\n    return net.FileConn(f)\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/IcdWm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IcdWm.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above figure shows, 100 different running, each C running contains 500000 executions, and each Go running contains b.N executions (mostly 500000, few times executed in 1000000 times)</p>\n"}, {"tags": ["javascript", "c"], "comments": [{"owner": {"reputation": 8252, "user_id": 6634591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHVdG.jpg?s=128&g=1", "display_name": "Luca Kiebel", "link": "https://stackoverflow.com/users/6634591/luca-kiebel"}, "edited": false, "score": 3, "creation_date": 1536758795, "post_id": 52296319, "comment_id": 91540481, "body": "Use <code>charCodeAt(i)</code>"}, {"owner": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "edited": false, "score": 0, "creation_date": 1536758832, "post_id": 52296319, "comment_id": 91540503, "body": "I&#39;m quite new into javascript, could you please provide a working sample"}, {"owner": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "edited": false, "score": 0, "creation_date": 1536758975, "post_id": 52296319, "comment_id": 91540598, "body": "changing password[i].charCodeAt(); into password.charCodeAt(i) made it output chinese characters... it dont output the same as the C functions"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1536758994, "post_id": 52296319, "comment_id": 91540614, "body": "Tip: <code>encrypt</code> is the same as <code>decrypt</code> with <code>-key</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1536759102, "post_id": 52296319, "comment_id": 91540700, "body": "javascript doesn&#39;t have the same concept of types as C, so when you subtract 322424 from <code>char</code>, you&#39;re going to get a very negative number"}, {"owner": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "edited": false, "score": 0, "creation_date": 1536759151, "post_id": 52296319, "comment_id": 91540719, "body": "Chris Turner how can i make it like C? can you please show me"}, {"owner": {"reputation": 741, "user_id": 1864182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80A1W.png?s=128&g=1", "display_name": "Alvaro Castro", "link": "https://stackoverflow.com/users/1864182/alvaro-castro"}, "edited": false, "score": 0, "creation_date": 1536759345, "post_id": 52296319, "comment_id": 91540859, "body": "Can you provide examples of inputs and their expected output of the functions?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1536760066, "post_id": 52296319, "comment_id": 91541338, "body": "It&#39;s unclear if you understand exactly what that C function does (passing a null-terminated array of char of unknown length, integer promotion from char to int to perform the addition and then truncation and cast to a char)."}, {"owner": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "edited": false, "score": 0, "creation_date": 1536760179, "post_id": 52296319, "comment_id": 91541402, "body": "The C functions works, i just wanted to understand how to make the same function in Js... hoped someone could show me so i can understand"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1536761413, "post_id": 52296319, "comment_id": 91542202, "body": "Re. &quot;how can i make it like C?&quot; ; after each arithmetic operation, mask out the upper bits so the result is modulo-256 (e.g. <code>(char - key) &amp; 0xff</code>).  I cannot post an answer because I am no JavaScript expert, and that is by no means the only issue."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 741, "user_id": 1864182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80A1W.png?s=128&g=1", "display_name": "Alvaro Castro", "link": "https://stackoverflow.com/users/1864182/alvaro-castro"}, "edited": false, "score": 0, "creation_date": 1536761454, "post_id": 52296319, "comment_id": 91542232, "body": "@AlvaroCastro Well, it&#39;s even worse, C <a href=\"https://stackoverflow.com/a/3996106/4944425\">doesn&#39;t really mandate any particular encoding</a>. Consider that <code>char</code> could be signed in many implementations: <a href=\"https://wandbox.org/permlink/boPD4K5aSQ9ImGX3\" rel=\"nofollow noreferrer\">wandbox.org/permlink/boPD4K5aSQ9ImGX3</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1536761788, "post_id": 52296319, "comment_id": 91542458, "body": "You probably need to use <i>typed arrays</i> (using <code>Int8</code> type) in order to create an equivalent - especially if the encryption/decryption need to be inter-operable (e.g. encrypted in C and decrypted in JS)."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1536762394, "post_id": 52297303, "comment_id": 91542929, "body": "Whether <code>char</code> is sugned or unsigned in C is implementation defined. Adding 256 to a char value -16 in C will only result in 240, if assigned to a larger type - when assigned to a <code>char</code> the will remain -16.  It has no effect on the bit pattern.  Simpler to use explicit <code>unsigned char</code> or cast to <code>unsigned char</code> - but it makes no difference to the character the code is associated with; -16 and 240 refer to the same <code>char</code> bit pattern on platforms where <code>char</code> is 8 bit (again implementation defined), and therefore the same character."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1536763716, "post_id": 52297303, "comment_id": 91543727, "body": "@Clifford <code>char</code> signedness is implementation dependent, had to be said (and was added). Besides, I don&#39;t think the answer was missing the rest, did it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536772849, "post_id": 52297303, "comment_id": 91548635, "body": "<code>char c = 0x3042; &#47;&#47; will only keep one byte, the LSB, 0x42</code> Actually the C standard says the result is either an implementation defined value or an implementation defined signal, so in principle this could segfault (raise SIGSEGV)."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 0, "last_activity_date": 1536763420, "last_edit_date": 1536763420, "creation_date": 1536761715, "answer_id": 52297303, "question_id": 52296319, "link": "https://stackoverflow.com/questions/52296319/c-functions-to-javascript/52297303#52297303", "title": "C functions to Javascript", "body": "<p>A <code>char</code> in C is actually a tiny integer, which value in hexa goes from <code>00</code> to <code>FF</code>. <code>char</code> is signed in many implementations (<code>unsigned char</code> is not), so its values go from <code>-128</code> to <code>127</code> (256 values total, or <code>0</code> to <code>255</code> if unsigned). An array of chars, <code>char[]</code> is an array of tiny integers, conventionally the last char of a 'string' in C is the byte 0x00 that marks the end (for instance, <code>printf</code> knows the end is there when the byte <code>0</code> is met).</p>\n\n<p>In Javascript a string is a set of Unicode characters.</p>\n\n<p>In C,</p>\n\n<pre><code>char s[] = \"hello\";\nint k = 322424;\nchar *t = s;\nwhile(*t) *t++ -= k; // 't' is the encoded version of 's'\n// print the integer values of the new encoded 'string'\nfor(t=s ; *t ; t++) printf(\"%d \", *t); // -16 -19 -12 -12 -9\n// (unsigned: 240 237 244 244 247, or add 256 to negative values above)\nprintf(\"\\n\");\n</code></pre>\n\n<p>A <code>char</code> cannot contain more than a byte.</p>\n\n<p>In Javascript, you have to keep the resulting number in a byte-range, otherwise, a  multi-byte character might be stored instead. For instance</p>\n\n<pre><code>String.fromCharCode(0x3042)  gives \"\u3042\" (Unicode [character 0x3042](https://www.key-shortcut.com/en/writing-systems/%E3%81%B2%E3%82%89%E3%81%8C%E3%81%AA-japanese/))\n</code></pre>\n\n<p>In C,</p>\n\n<pre><code>char c = 0x3042; // will only keep one byte, the LSB, 0x42\n</code></pre>\n\n<p>Thus in Javascript, try something like</p>\n\n<pre><code>var s = \"hello\";\nvar k = 322424;\nvar i,l = s.length;\nvar t = '';\n// Note the `&amp; 0xff` that keep the result within a byte range\nfor(i=0 ; i&lt;l ; i++) t += String.fromCharCode((s.charCodeAt(i) - k) &amp; 0xff);\n// 't' is the result, let see its char codes\nvar u = '';\nfor(i=0 ; i&lt;l ; i++) u += t.charCodeAt(i) + ' ';\n\nconsole.log(u);  // 240 237 244 244 247 (same as in C, 240-256 = -16 ...)\n</code></pre>\n\n<p>The JS char codes are unsigned, thus the positive results. They're the same as in C.</p>\n"}, {"comments": [{"owner": {"reputation": 741, "user_id": 1864182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80A1W.png?s=128&g=1", "display_name": "Alvaro Castro", "link": "https://stackoverflow.com/users/1864182/alvaro-castro"}, "reply_to_user": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "edited": false, "score": 0, "creation_date": 1536778883, "post_id": 52297396, "comment_id": 91551463, "body": "Glad it worked. Just as a an advice if you come here again with another transpilation question, provide examples of inputs and its expected output along with the code, that way we have something to test with when answering. There are a lot of differences between JS and C, not just syntax, that can be easily overlook."}], "tags": [], "owner": {"reputation": 741, "user_id": 1864182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80A1W.png?s=128&g=1", "display_name": "Alvaro Castro", "link": "https://stackoverflow.com/users/1864182/alvaro-castro"}, "is_accepted": true, "score": 0, "last_activity_date": 1536769167, "last_edit_date": 1536769167, "creation_date": 1536762013, "answer_id": 52297396, "question_id": 52296319, "link": "https://stackoverflow.com/questions/52296319/c-functions-to-javascript/52297396#52297396", "title": "C functions to Javascript", "body": "<p>Try this, as said by Clifford in the comments, each char code has to be masked to modulo-256 because the size of <code>char</code>. Also, since <code>decrypt</code> is the same but substracting <code>key</code>, I reused <code>encrypt</code> but with a negative <code>key</code>.</p>\n\n<p>Here you have a working snippet, let me know if it gives the desired output.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function encrypt (password, key) {\r\n    var i,\r\n        output = '';\r\n\r\n    for (i = 0; i &lt; password.length; i++) {\r\n        var charCode = password.charCodeAt(i),\r\n            keyedCharCode = (charCode - key) &amp; 0xff;\r\n\r\n        output += String.fromCharCode(keyedCharCode);\r\n    }\r\n\r\n    return output;\r\n}\r\n\r\nfunction decrypt (password, key) {\r\n    return encrypt(password, -key);\r\n}\r\n\r\nvar password = 'hello',\r\n    key = 322424,\r\n    encrypted = encrypt(password, key),\r\n    decrypted = decrypt(encrypted, key);\r\n\r\nconsole.log('encrypt', encrypted);\r\nconsole.log('decrypt', decrypted);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 51, "user_id": 9685982, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/9685982/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 52297396, "answer_count": 2, "score": -1, "last_activity_date": 1536769167, "creation_date": 1536758695, "last_edit_date": 1536759818, "question_id": 52296319, "link": "https://stackoverflow.com/questions/52296319/c-functions-to-javascript", "title": "C functions to Javascript", "body": "<p>I'm trying to convert 2 functions from C to Javascript, but I'm failing on that.</p>\n\n<p>The C functions im trying to convert is:</p>\n\n<pre><code>void encrypt(char password[],int key)\n{\n    unsigned int i;\n    for(i=0;i&lt;strlen(password);++i)\n    {\n        password[i] = password[i] - key;\n    }\n}\n\nvoid decrypt(char password[],int key)\n{\n    unsigned int i;\n    for(i=0;i&lt;strlen(password);++i)\n    {\n        password[i] = password[i] + key;\n    }\n}\n</code></pre>\n\n<p>The C functions is from: <a href=\"http://c-program-example.com/2012/04/c-program-to-encrypt-and-decrypt-a-password.html\" rel=\"nofollow noreferrer\">http://c-program-example.com/2012/04/c-program-to-encrypt-and-decrypt-a-password.html</a></p>\n\n<p>What i did in Javascript is this:</p>\n\n<pre><code>var password = \"hello\"\n\nvar key = 322424;\n\n   for (var i=0; i&lt;password.length; i++) {\n\n        var char = password[i].charCodeAt();\n\n\n        var s = String.fromCharCode(char-key);\n\n\n        alert(s);\n\n     }  \n</code></pre>\n\n<p>I'm putting the alert to see if it working correctly before making them as functions. Can someone please show me how it is done correctly in Js?</p>\n"}, {"tags": ["c", "malloc", "8051", "sdcc"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536756802, "post_id": 52295683, "comment_id": 91538987, "body": "Relevant reading material <a href=\"https://stackoverflow.com/questions/30825151/is-there-a-meaningful-distinction-between-freestanding-and-hosted-implementation\" title=\"is there a meaningful distinction between freestanding and hosted implementation\">stackoverflow.com/questions/30825151/&hellip;</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1536756809, "post_id": 52295683, "comment_id": 91538992, "body": "You can&#39;t allocate what doesn&#39;t exist..."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1536756839, "post_id": 52295683, "comment_id": 91539019, "body": "No. <code>malloc</code> is part of the standard library and not part of the compiler. So your board must provide a library that implements malloc."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1536756890, "post_id": 52295683, "comment_id": 91539062, "body": "On systems with very little RAM, dynamic memory allocation doesn&#39;t make much sens most of the time."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1536758842, "post_id": 52295683, "comment_id": 91540512, "body": "It wasn&#39;t uncommon back in the old console days (PS2 and earlier) to allocate all of the memory from the OS at startup and then just use memory by address for your game from a manually created memory map in a spreadsheet."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536762147, "post_id": 52295683, "comment_id": 91542745, "body": "If it would make your life easier, you can reserve a chunk of memory and write a simple <code>malloc</code> and <code>free</code> to manage that chunk."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536766557, "post_id": 52295683, "comment_id": 91545444, "body": "@PaulOgilvie returning an 8-bit pointer to an array of bits?  :)"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1536766712, "post_id": 52295683, "comment_id": 91545540, "body": "@PaulOgilvie <i>board</i>, really?"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1536766283, "post_id": 52296188, "comment_id": 91545289, "body": "The problem is RAM. Unless there is XDATA space,. malloc() etc. is umm...  &#39;best avoided&#39; on 8051."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1536766334, "post_id": 52296188, "comment_id": 91545322, "body": "Actually even if there is XDATA RAM, malloc() etc. is umm... &#39;best avoided&#39; on 8051."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 4, "creation_date": 1536766416, "post_id": 52296188, "comment_id": 91545363, "body": "In fact, avoiding the 8051 altogether is not an unreasonable approach;)"}], "tags": [], "owner": {"reputation": 52, "user_id": 9050065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8c1c16b518e4ab28b17a1b93998dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Javeed Shariff", "link": "https://stackoverflow.com/users/9050065/javeed-shariff"}, "is_accepted": false, "score": -1, "last_activity_date": 1536758253, "creation_date": 1536758253, "answer_id": 52296188, "question_id": 52295683, "link": "https://stackoverflow.com/questions/52295683/why-and-when-malloc-will-not-be-available-in-c/52296188#52296188", "title": "Why and when malloc() will not be available in C?", "body": "<p>With C libraries included in your project you can leverage the functions like malloc, printf....etc Understand that 8051 is a low memory foot print device in order of few KB. Hence inclusion of C libraries would increase the size of output .hex file and you will run out of memory.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 37, "user_id": 3845287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1d3de026db011c577772eaf22954d3?s=128&d=identicon&r=PG&f=1", "display_name": "cleveraintwise", "link": "https://stackoverflow.com/users/3845287/cleveraintwise"}, "edited": false, "score": 0, "creation_date": 1536780115, "post_id": 52296221, "comment_id": 91552020, "body": "@cleveraintwise, no, unless the implementation claims to be a conforming, hosted implementation, it is not safe to assume that <code>malloc()</code> will be available to programs in the execution environment.  Period.  There is <i>no</i> library function that the C standard requires standalone implementations to provide, not even <code>malloc()</code>, and the standard makes no demands at all on non-conforming implementations.  There is no substitute for reading your implementation&#39;s documentation, at least enough to check whether it claims to be a conforming, hosted one."}, {"owner": {"reputation": 37, "user_id": 3845287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1d3de026db011c577772eaf22954d3?s=128&d=identicon&r=PG&f=1", "display_name": "cleveraintwise", "link": "https://stackoverflow.com/users/3845287/cleveraintwise"}, "edited": false, "score": 0, "creation_date": 1536782718, "post_id": 52296221, "comment_id": 91553129, "body": "I would, if there was any."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 37, "user_id": 3845287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1d3de026db011c577772eaf22954d3?s=128&d=identicon&r=PG&f=1", "display_name": "cleveraintwise", "link": "https://stackoverflow.com/users/3845287/cleveraintwise"}, "edited": false, "score": 1, "creation_date": 1536783193, "post_id": 52296221, "comment_id": 91553326, "body": "@cleveraintwise, without any documentation at all, you have no basis at all for what code you can or should write.  Even if &quot;documentation&quot; means word of mouth from the person responsible for the C implementation, you have to have <i>something</i> in order to do any work."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 7, "last_activity_date": 1536761724, "last_edit_date": 1536761724, "creation_date": 1536758368, "answer_id": 52296221, "question_id": 52295683, "link": "https://stackoverflow.com/questions/52295683/why-and-when-malloc-will-not-be-available-in-c/52296221#52296221", "title": "Why and when malloc() will not be available in C?", "body": "<p><strong>TL;DR:</strong></p>\n\n<blockquote>\n  <p>Why and when malloc() will not be available in C?</p>\n</blockquote>\n\n<p>The only thing that can be said in general is that <code>malloc()</code> will be provided by every conforming, hosted C implementation, but there are other kinds, including another conforming kind.</p>\n\n<hr>\n\n<blockquote>\n  <p>Isn't malloc supposed to be on a dynamic library within the compiler?</p>\n</blockquote>\n\n<p>Not exactly.  <code>malloc()</code> is part of the C standard library, therefore it is provided by every conforming, hosted C implementation.  A C implementation comprises a system for translating C source code into executable programs and a mechanism and environment for running the resulting programs.  The former typically revolves around a compiler.  The latter includes as much of the C standard library as the implementation provides, and this part is where <code>malloc</code> resides if it is available.  Thus, no, <code>malloc</code> is technically not part of the <em>compiler</em>.</p>\n\n<p>I'm sure that's not a distinction you meant to invoke, but it does bear on the answer.  Note well that I said that <code>malloc</code> is provided by <em>hosted</em> implementations.  These are the kind you ordinarily run into on general-purpose operating systems.  They create programs that are launched in a standard way via the host OS, and they provide all the features of the C standard library in conjunction with the OS.  But there are also <em>standalone</em> implementations.  One of the key differences is that standalone implementations are excused from providing most of the standard library, including <code>malloc()</code>.</p>\n\n<p>You will commonly find standalone implementations in use for and on embedded systems, such as yours.  They are also used for OS kernels, boot loaders, and other such programs than run directly on bare metal.  That your programs run on top of an OS makes your environment a bit of a Cadillac among embedded systems, but does not ensure that the C implementation is a hosted one.  Inasmuch as it does not provide <code>malloc</code>, it cannot be a <em>conforming</em> hosted implementation, but it can be a conforming standalone implementation.  It ought to document which, if either, it claims to be.  If it is standalone but provides other standard library functions then you can consider that a luxury.</p>\n"}, {"tags": [], "owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "is_accepted": false, "score": 2, "last_activity_date": 1537454133, "last_edit_date": 1537454133, "creation_date": 1537452272, "answer_id": 52427006, "question_id": 52295683, "link": "https://stackoverflow.com/questions/52295683/why-and-when-malloc-will-not-be-available-in-c/52427006#52427006", "title": "Why and when malloc() will not be available in C?", "body": "<p>Some guidelines for (safety) critical systems does not allow dynamic memory allocations.</p>\n\n<p>For example <a href=\"https://en.wikipedia.org/wiki/MISRA_C\" rel=\"nofollow noreferrer\">MISRA C</a>:2004 guideline have the following rule: </p>\n\n<blockquote>\n  <p>20.4 - Dynamic heap memory allocation shall not be used.</p>\n</blockquote>\n\n<p>One way to follow the rule is: Don't bring or implement <code>malloc()</code> and other dynamic memory allocation functions to the system. </p>\n\n<p>Those kind of systems are typically embedded systems, where memory needs are well known/limited during or before compile time. So dynamic memory allocations can be avoided without pain.</p>\n"}], "owner": {"reputation": 37, "user_id": 3845287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1d3de026db011c577772eaf22954d3?s=128&d=identicon&r=PG&f=1", "display_name": "cleveraintwise", "link": "https://stackoverflow.com/users/3845287/cleveraintwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 52296221, "answer_count": 3, "score": 3, "last_activity_date": 1537454133, "creation_date": 1536756704, "question_id": 52295683, "link": "https://stackoverflow.com/questions/52295683/why-and-when-malloc-will-not-be-available-in-c", "title": "Why and when malloc() will not be available in C?", "body": "<p>I've been given a 8051 based board with an embedded in-house operating system. I am using SDCC to create applications above the OS. And malloc is not available so I have to allocate memory statically. Why is that? Isn't malloc supposed to be on a dynamic library within the compiler? </p>\n"}, {"tags": ["c", "output", "gets"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536756706, "post_id": 52295628, "comment_id": 91538898, "body": "I&#39;ll guess that your input contains whitespaces other than <code>\\n</code>?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1536756728, "post_id": 52295628, "comment_id": 91538921, "body": "I don&#39;t know what you mean by &quot;wrong output&quot;.  You gave sample output, but I don&#39;t know what about it is wrong.  Please edit your question (the tiny gray word &quot;edit&#39; under the tags is a button, yes, really) and explain what you <i>want</i> this program to print as well as what you actually got.  It would also help if you showed us the code that doesn&#39;t work, instead of the code that does."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1536756729, "post_id": 52295628, "comment_id": 91538924, "body": "Never, ever use <code>gets()</code>.  Its unresolvably unsafe, and has been removed from the standard.  It continues to be provided by implementations of the C standard library only for backwards compatibility.  Use <code>fgets()</code> instead for a safer analog."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536756779, "post_id": 52295628, "comment_id": 91538968, "body": "@JohnBollinger This is true but it is also almost certainly not the cause of the problem pnimeesha is asking about, and <code>scanf(&quot;%s&quot;)</code> is just as unsafe."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1536756817, "post_id": 52295628, "comment_id": 91538996, "body": "Yes, @zwol.  This is why I wrote a comment instead of an answer."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536756900, "post_id": 52295628, "comment_id": 91539071, "body": "@JohnBollinger A new contributor probably does not already understand the difference between a comment and an answer."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1536756981, "post_id": 52295628, "comment_id": 91539136, "body": "And thanks to our little side discussion here, @zwol, now he does."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1536757099, "post_id": 52295628, "comment_id": 91539232, "body": "Please see <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">scanf() leaves the newline char in the buffer</a>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536757108, "post_id": 52295628, "comment_id": 91539240, "body": "@JohnBollinger And we wouldn&#39;t have confused them by sniping at each other in the comments if you had just written &quot;This isn&#39;t the cause of your immediate problem, but&quot; at the beginning of your original comment."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1536757266, "post_id": 52295628, "comment_id": 91539348, "body": "... and <i>because</i> <code>scanf()</code> leaves the newline char in the buffer, the first call to <code>gets</code> or <code>fgets</code> will pick up an empty string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536757561, "post_id": 52295628, "comment_id": 91539568, "body": "Tip 1: Avoid using <code>scanf()</code> and <code>gets()</code> in the same code.  Tip 2: <code>gets()</code> no longer exists in C (C11) - don&#39;t use it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536757913, "post_id": 52295628, "comment_id": 91539819, "body": "Tip 3: <code>char str[80]; scanf(&quot;%s&quot;,&amp;str);</code> should warn about mis-matched types.  Save time and use a fully warnings enabled compiler - or a better compiler.  Tip 4: after your <code>scanf()</code> or <code>gets()</code>, add <code>printf(&quot;&lt;%s&gt;&quot;, str);</code> to see what you are reading and then notice the differences."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536763106, "post_id": 52295628, "comment_id": 91543354, "body": "<a href=\"https://stackoverflow.com/q/1694036/995714\">Why is the gets function so dangerous that it should not be used?</a>"}, {"owner": {"reputation": 9, "user_id": 9714858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5ab2a2716e031eb1dbf359df0995b0?s=128&d=identicon&r=PG&f=1", "display_name": "pnimeesha", "link": "https://stackoverflow.com/users/9714858/pnimeesha"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1536838893, "post_id": 52295628, "comment_id": 91572877, "body": "@zwol   sorry for not mentioning it..(The code should print YES if the number of consonants and vowels are equal in a string else should print NO) expected output is: 2 goods code NO YES"}], "owner": {"reputation": 9, "user_id": 9714858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5ab2a2716e031eb1dbf359df0995b0?s=128&d=identicon&r=PG&f=1", "display_name": "pnimeesha", "link": "https://stackoverflow.com/users/9714858/pnimeesha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "closed_date": 1536757629, "answer_count": 0, "score": 0, "last_activity_date": 1536757607, "creation_date": 1536756533, "last_edit_date": 1536757607, "question_id": 52295628, "link": "https://stackoverflow.com/questions/52295628/problem-with-gets-and-not-getting-expected-output-whyy", "closed_reason": "Duplicate", "title": "problem with gets and not getting expected output. whyy?", "body": "<p>Below code does not work if gets() is used instead of scanf() for input of str. why so?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() \n{\n    //code\n    int n,i,j,len,vow=0,cons=0;\n    char str[80];\n    scanf(\"%d\",&amp;n); //n is number of testcases\n    for(j=0;j&lt;n;j++)\n    {\n        scanf(\"%s\",&amp;str); //input of string.\"not working for the first \n        //iteration if gets is used instead of scanf\"\n        for(i=0;str[i]!='\\0';i++)\n        {\n            str[i]=str[i]+32; \n            if(str[i]=='a' || str[i]=='e' || str[i]=='i' || str[i]=='o' || str[i]=='u' )\n            {\n                vow+=1;  \n            }\n            else \n            {\n                cons+=1;\n            }\n        }\n        if(vow==cons)\n            printf(\"YES\\n\");\n        else \n            printf(\"NO\\n\");\n        vow=0;\n        cons=0;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>sample output:</p>\n\n<pre><code>2\ngoods\nNO\ncode\nNO\n</code></pre>\n\n<p>Above code gives wrong output.I don't find anything wrong in the code.\nCan anyone plz help</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1536752658, "post_id": 52294245, "comment_id": 91536297, "body": "Code 2 will work as long as you only include <code>Single.h</code> in one <code>.c</code> file."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1536752700, "post_id": 52294245, "comment_id": 91536320, "body": "This feels like an XY problem. What is your use case?"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536753152, "post_id": 52294245, "comment_id": 91536563, "body": "Code 2 works for me. I included Single.h in both Single.c and Main.c"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536753306, "post_id": 52294245, "comment_id": 91536654, "body": "And my use case is that I am just trying to find out a generalized way to make and use a  single object throughout the code, across multiple files."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536753364, "post_id": 52294245, "comment_id": 91536695, "body": "And what is that XY problem you mentioned?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536753639, "post_id": 52294245, "comment_id": 91536884, "body": "&quot;<i>I do not want any other object of the same type to be created</i>&quot; - Why?"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536753774, "post_id": 52294245, "comment_id": 91536978, "body": "Why? Because I was trying to do something similar to Java; where you can make sure that a class has only one instance throughout the application."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536753861, "post_id": 52294245, "comment_id": 91537037, "body": "It&#39;s much cleaner just to declare the struct type with a tag than to (tentatively) define global variables in shared header files."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536754042, "post_id": 52294245, "comment_id": 91537150, "body": "@Jazz How do you do that in Java?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1536754045, "post_id": 52294245, "comment_id": 91537153, "body": "Is there any need for external code to access the members of <code>oneAndOnly</code> directly, or is all access intended to be through function calls? If the latter, then you do not need to declare <code>oneAndOnly</code> in the header file at all and can just define it in Single.c."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536754065, "post_id": 52294245, "comment_id": 91537163, "body": "@ian I know it is cleaner. That is why I posted code for comparison too. But I want to know if it works without problems?"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536754216, "post_id": 52294245, "comment_id": 91537252, "body": "@melpomene In java you make the constructor private, have a static attribute of the class type and have a public static method make that checks the attribute to see if an instance is there or not. If it is not there then a new instance is created and assigned to the attribute and returned to the user."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536754412, "post_id": 52294245, "comment_id": 91537369, "body": "@IanAbbott I was thinking of accessing the members of oneAndOnly directly. I was hoping to do so. I can do it via function calls. But I am curious about this in C."}, {"owner": {"reputation": 62898, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 2, "creation_date": 1536756321, "post_id": 52294245, "comment_id": 91538598, "body": "possibly related: <a href=\"https://stackoverflow.com/questions/803673/how-to-create-a-singleton-in-c\" title=\"how to create a singleton in c\">stackoverflow.com/questions/803673/&hellip;</a>"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 62898, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1536757807, "post_id": 52294245, "comment_id": 91539742, "body": "@ely Okay I just looked into that Singeton topic&#39;s question. The singleton was kept as a static variable inside a function. But other files still require the definition of the struct of the variable to &quot;know&quot; its attributes. But if the definition is not anonymous then others can create variables too. That creation is what I was hoping to prevent."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1536760619, "post_id": 52294245, "comment_id": 91541699, "body": "@Jazz Defining the <code>oneAndOnly</code> global variable more than once (when Single.h is included by several compilation units) is only working because it does not have an initializer, and so in C terms it is &quot;tentatively&quot; defined in several places (and the linker will resolve them to a single instance). As soon as you add an initializer to the variable definition in the shared header, and multiple compilation units include it, you will end up with linker errors due to the variable being multiply defined."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1536763523, "post_id": 52294245, "comment_id": 91543618, "body": "@IanAbbott I just tried it with an initializer. You are right. 0.0 Now I get the expected error that oneAndOnlyOne is multiply defined. Good point. Thank you."}, {"owner": {"reputation": 62898, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1536763561, "post_id": 52294245, "comment_id": 91543640, "body": "@Jazz Would your use case be OK with singletons as a convention instead of enforced, like how it works in e.g. Python? You could name your struct something like, <code>struct dontYouDareCreateOneOfTheseOrCharlotteFromHRWillBeEmailingYo&zwnj;&#8203;uSoon</code>."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 62898, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1536763695, "post_id": 52294245, "comment_id": 91543715, "body": "@ely Yes it would be okay as I am just experimenting. But Ian just mentioned the problem with code 2. I will not seek that style further anymore."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536764189, "post_id": 52294245, "comment_id": 91544036, "body": "@IanAbbott Can you please post your last comment as the answer."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1536770698, "post_id": 52294245, "comment_id": 91547613, "body": "@Jazz The multiple definition problem for initialized variables was mentioned (briefly) in user Scheff&#39;s answer already. I don&#39;t think my comment is complete enough to be considered an answer."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536771471, "post_id": 52294245, "comment_id": 91547976, "body": "@IanAbbott Got it. I did not think about it clearly at that time. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536754566, "post_id": 52294817, "comment_id": 91537444, "body": "I understand your point and your code. But what if I want to use it in main.c.  What if I put oneAndOnly.x =5; in between the initSingle() and printSingle() in main()."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 2, "creation_date": 1536757392, "post_id": 52294817, "comment_id": 91539447, "body": "@Jazz Then make another function: <code>void setSingle(int x) { oneAndOnly.x = x; }</code>"}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536757971, "post_id": 52294817, "comment_id": 91539859, "body": "My goal was to directly use the attributes. :)"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1536754111, "creation_date": 1536754111, "answer_id": 52294817, "question_id": 52294245, "link": "https://stackoverflow.com/questions/52294245/how-to-declare-global-variable-for-an-anonymous-structure-in-c/52294817#52294817", "title": "How to declare global variable for an anonymous structure in C?", "body": "<p>You call the function in other compilation unit. It uses the global variable not your main program. So you do not even have to know the data structure and the variable, as you newer use any of them in your main program.</p>\n\n<p>you can reduce it to :</p>\n\n<pre><code>void initSingle(void);\nvoid printSingle(void);\n\nint main()\n{\n    initSingle();\n    printSingle();\n    return 0;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct{\n    int x;\n}oneAndOnly;\n\nstatic struct single oneAndOnly;\n\nvoid initSingle(void){\n    oneAndOnly.x = 10;\n}\nvoid printSingle(void){\n    printf(\"x = %d\\n\",oneAndOnly.x);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536755090, "post_id": 52295076, "comment_id": 91537746, "body": "I just wanted to know what is possible or not in C so that I can keep it in mind while designing code in the future. I got this idea only because I studied Java."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1536754957, "creation_date": 1536754957, "answer_id": 52295076, "question_id": 52294245, "link": "https://stackoverflow.com/questions/52294245/how-to-declare-global-variable-for-an-anonymous-structure-in-c/52295076#52295076", "title": "How to declare global variable for an anonymous structure in C?", "body": "<p>None of your attempts will work in practice.</p>\n\n<p>With e.g. gcc or clang I can just do</p>\n\n<pre><code>typeof(oneAndOnly) secondInstance;\n</code></pre>\n\n<p>gcc also supports</p>\n\n<pre><code>__auto_type secondInstance = oneAndOnly;\n</code></pre>\n\n<p>(not sure about clang).</p>\n\n<p>Even if the compiler in question doesn't support these extensions, I can just copy/paste the anonymous struct declaration from the header.</p>\n\n<p>That said, I don't see what preventing other objects of the same type buys you. It makes sense in Java to make the constructor <code>private</code> because a constructor has behavior whose use you may want to restrict, but in C structs are just dumb collections of data.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536755648, "post_id": 52295294, "comment_id": 91538117, "body": "Not just similar, it looks identical."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536755887, "post_id": 52295294, "comment_id": 91538298, "body": "But I want to use the variable in other files too."}, {"owner": {"reputation": 62898, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536756142, "post_id": 52295294, "comment_id": 91538477, "body": "@melpomene Given the particulars of this question and the names of variables, it&#39;s <b>highly</b> likely that two different programmers would come up with identically the same code to add the static struct pattern here. I don&#39;t see a reason to read anything into the identical nature of the two answers. That seems expected to me."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 1, "creation_date": 1536756247, "post_id": 52295294, "comment_id": 91538547, "body": "@Jazz I was not aware this. I got it as if you wanted to &quot;save&quot; the <code>struct Single</code> against accidental access. You might add &quot;getter&quot; and &quot;setter&quot; functions..."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536757721, "post_id": 52295294, "comment_id": 91539681, "body": "@Scheff Okay I just looked into that Singeton topic&#39;s question. The singleton was kept as a static variable inside a function. But other files still require the definition of the struct of the variable to &quot;know&quot; its attributes. But if the definition is not anonymous then others can create variables too. That creation is what I was hoping to prevent."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 1, "creation_date": 1536757834, "post_id": 52295294, "comment_id": 91539763, "body": "@Jazz I googled a bit as well and extended the answer a bit."}, {"owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "edited": false, "score": 0, "creation_date": 1536771674, "post_id": 52295294, "comment_id": 91548074, "body": "@Scheff I did not understand/notice that you had answered my question in your answer&#39;s last paragraph. IanAbbott&#39;s comment made me realize it. Thank you."}], "tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": true, "score": 1, "last_activity_date": 1536758136, "last_edit_date": 1536758136, "creation_date": 1536755598, "answer_id": 52295294, "question_id": 52294245, "link": "https://stackoverflow.com/questions/52294245/how-to-declare-global-variable-for-an-anonymous-structure-in-c/52295294#52295294", "title": "How to declare global variable for an anonymous structure in C?", "body": "<p>There is a third variant which might be of interest.</p>\n\n<p>It \"hides\" the <code>struct single</code> completely in <code>Single.c</code>. Hence, no accidental access is possible.</p>\n\n<p><code>Single.h</code>:</p>\n\n<pre><code>void initSingle(void);\nvoid printSingle(void);\n</code></pre>\n\n<p><code>Single.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"Single.h\"\n\nstruct Single {\n    int x;\n};\nstatic struct Single oneAndOnly;\n\nvoid initSingle(void)\n{\n    oneAndOnly.x = 10;\n}\nvoid printSingle(void)\n{\n    printf(\"x = %d\\n\", oneAndOnly.x);\n}\n</code></pre>\n\n<p><code>main.c</code>:</p>\n\n<pre><code>#include \"Single.h\"\n\nint main()\n{\n    initSingle();\n    printSingle();\n    return 0;\n}\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/3xz4nWJHOn6T9efg\" rel=\"nofollow noreferrer\"><strong>Live Demo on Wandbox</strong></a></kbd></p>\n\n<p>Actually, this approach is similar to <a href=\"https://stackoverflow.com/a/52294817/7478597\">P__J__'s answer</a>. I just was too slow to press the Send button.</p>\n\n<hr>\n\n<p>I needed some time to realize that the solution in quest should prevent an (accidental) second variable of the type of <code>oneAndOnly</code>.</p>\n\n<p>\"Hiding\" the <code>struct</code> in the C file with a static instance is probably the best one can have in C. Even the counter examples in <a href=\"https://stackoverflow.com/a/52295076/7478597\">melpomene's answer</a> shouldn't work in this case.</p>\n\n<p>If read/write access to the single instance is required, I would add something like \"getter\"/\"setter\" functions.</p>\n\n<p>This reminded me to the <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"nofollow noreferrer\">Singleton pattern</a> though I'm not sure if that is a legal usage for a non-OO language like C. Googling a bit, I found (as well) <a href=\"https://stackoverflow.com/q/803673/7478597\">How to create a Singleton in C?</a> which I find worth to mention.</p>\n\n<hr>\n\n<p>I googled a bit concerning the actual question of OP whether her/his Code 2 is valid as well. I suspected something like a duplicated definition (may be, because I did too long in C++ in daily work).</p>\n\n<p>Actually, I tried OP's Code 2 in <a href=\"https://wandbox.org/permlink/qFfPMf5aLONmCoh3\" rel=\"nofollow noreferrer\">Wandbox</a> &ndash; no duplicate definition issue. Finally, I found <a href=\"https://stackoverflow.com/a/28610934/7478597\">Are the global variables extern by default or it is equivalent to declaring variable with extern in global?</a> and came to the conclusion that Code 2 should be fine as well.</p>\n\n<p>The limitation is that Code 2 allows only default initialization (filling with 0s if I remember right). As soon as an initializer is added, the compiler complains (as expected) as it's included multiple times.</p>\n"}], "owner": {"reputation": 551, "user_id": 1134024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6UpS9.jpg?s=128&g=1", "display_name": "Jazz", "link": "https://stackoverflow.com/users/1134024/jazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2773, "favorite_count": 0, "accepted_answer_id": 52295294, "answer_count": 3, "score": 1, "last_activity_date": 1536771749, "creation_date": 1536752301, "last_edit_date": 1536771749, "question_id": 52294245, "link": "https://stackoverflow.com/questions/52294245/how-to-declare-global-variable-for-an-anonymous-structure-in-c", "title": "How to declare global variable for an anonymous structure in C?", "body": "<p>I am using Pelles C on Windows 8.1.</p>\n\n<p>How to declare single global variable for a structure in C?</p>\n\n<p>Code 1: it works but I do not want any other object of the same type to be created. If code 2 has problems then I will have to use this one.</p>\n\n<p>Single.h</p>\n\n<pre><code>struct single{\n    int x;\n};\n\nextern struct single oneAndOnly;\n\nvoid initSingle(void);\nvoid printSingle(void);\n</code></pre>\n\n<p>Single.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"Single.h\"\n\nstruct single oneAndOnly;\n\nvoid initSingle(void){\n    oneAndOnly.x = 10;\n}\nvoid printSingle(void){\n    printf(\"x = %d\\n\",oneAndOnly.x);\n}\n</code></pre>\n\n<p>Main.c</p>\n\n<pre><code>#include \"Single.h\"\nint main()\n{\n    initSingle();\n    printSingle();\n    return 0;\n}\n</code></pre>\n\n<p>Code 2: It works but I am not clear about the combination of declaring and defining a variable in a header file. Will it cause a problem? I get no error though.</p>\n\n<p>Single.h</p>\n\n<pre><code>struct{\n    int x;\n}oneAndOnly;\n\nvoid initSingle(void);\nvoid printSingle(void);\n</code></pre>\n\n<p>Single.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"Single.h\"\n\nvoid initSingle(void){\n    oneAndOnly.x = 10;\n}\nvoid printSingle(void){\n    printf(\"x = %d\\n\",oneAndOnly.x);\n}\n</code></pre>\n\n<p>Main.c is the same as in Code 1.</p>\n\n<p>Can I use code 2 without any problem?</p>\n\n<hr>\n\n<p>Can someone tell me why does code 2 work, when I and many others thought that it would not?</p>\n\n<hr>\n\n<p>Thanks to everyone for all your comments and ideas and answers</p>\n"}, {"tags": ["c", "data-structures", "binary-tree"], "comments": [{"owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1536751119, "post_id": 52293895, "comment_id": 91535453, "body": "Please post the full code in the question so it&#39;s self-contained. Thank you."}, {"owner": {"reputation": 15, "user_id": 10283833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdyK3.jpg?s=128&g=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/10283833/ashwini"}, "reply_to_user": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "edited": false, "score": 0, "creation_date": 1536752789, "post_id": 52293895, "comment_id": 91536358, "body": "I added the link."}], "answers": [{"tags": [], "owner": {"reputation": 13895, "user_id": 1162233, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/e3Eil.jpg?s=128&g=1", "display_name": "Kaidul", "link": "https://stackoverflow.com/users/1162233/kaidul"}, "is_accepted": true, "score": 1, "last_activity_date": 1536751414, "last_edit_date": 1536751414, "creation_date": 1536751113, "answer_id": 52293919, "question_id": 52293895, "link": "https://stackoverflow.com/questions/52293895/findheight-of-a-binary-tree-method-always-returns-1/52293919#52293919", "title": "FindHeight (of a binary tree) method always returns 1?", "body": "<p>The code is buggy. When you are reaching beyond the leaf node, you are returning <code>-1</code> which is wrong. This is doing subtraction on the calculation of tree height. You should simply return <code>0</code> here because you hit the end, there is no node down there.</p>\n\n<p>Here is the corrected method:</p>\n\n<pre><code>int findHeight(struct BstNode* root)\n{\n    if(root == NULL)\n        return 0;\n\n    return 1 + max(findHeight(root-&gt;left), findHeight(root-&gt;right));\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10283833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SdyK3.jpg?s=128&g=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/10283833/ashwini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 52293919, "answer_count": 1, "score": -1, "last_activity_date": 1536751414, "creation_date": 1536751028, "question_id": 52293895, "link": "https://stackoverflow.com/questions/52293895/findheight-of-a-binary-tree-method-always-returns-1", "title": "FindHeight (of a binary tree) method always returns 1?", "body": "<pre><code>int findHeight(struct BstNode* root)\n{\n    if(root==NULL)\n        return -1;\n    return max(findHeight(root-&gt;left),findHeight(root-&gt;right))+1;\n}\n</code></pre>\n\n<p>The function always returns 1 as the height. <br>\nHere's the code link.\n<a href=\"https://github.com/ashwinidotx/OpenIssues/blob/master/Height%20Of%20Binary%20Tree.c\" rel=\"nofollow noreferrer\">https://github.com/ashwinidotx/OpenIssues/blob/master/Height%20Of%20Binary%20Tree.c</a></p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1536749577, "post_id": 52293393, "comment_id": 91534625, "body": "<code>sizeof(_port)</code> doesn&#39;t have to be equal to <code>sizeof(*_port)</code>. Also you should read about <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\"><i>endianness</i></a>, and consider that <code>char</code> will be <a href=\"http://en.cppreference.com/w/c/language/conversion#Integer_promotions\" rel=\"nofollow noreferrer\">promoted</a> to <code>int</code> with <i>sign extension</i>."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536750181, "post_id": 52293393, "comment_id": 91534937, "body": "I dont expect it to be eqal, an array is not a pointer. But i didnt get the point. I also know (little) about Endians but i dont know how to convert it thats why im asking this questin."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536752501, "post_id": 52293393, "comment_id": 91536203, "body": "If the value was not 1234, but 34, should output be <code>\\x22</code>?   If the value was 65536, should output be <code>\\x01\\x00\\x00</code>?"}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536752631, "post_id": 52293393, "comment_id": 91536279, "body": "Likely, but i also get into troubles in the next time because 0 characters should be avoided cause they cant be sent over the network in a stream (will be treaten 0 terminator) but its a long time until i am that far :P You really recognized what i am about to do, right? hahah"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536750379, "post_id": 52293618, "comment_id": 91535031, "body": "This way i get this output: \\xd2\\x04\\x00\\x00 - 2 nibbles (00) too much, not what i wanted :S  <a href=\"http://tpcg.io/2BD1Lr\" rel=\"nofollow noreferrer\">tpcg.io/2BD1Lr</a>"}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536750730, "post_id": 52293618, "comment_id": 91535231, "body": "Your link shows the same formatting and not the one i need! I need \\xd2\\x04 and not \\xd2\\x04\\x00\\x00"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536753643, "post_id": 52293618, "comment_id": 91536887, "body": "@JanedOE so change sizeof to 2 and you will have exactly two bytes displayed. Not too difficult."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536754419, "post_id": 52293618, "comment_id": 91537375, "body": "You missed the same point like i did, endianess :S take a look at &quot;Some programmers dude&quot;&#39;s answer"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536768121, "post_id": 52293618, "comment_id": 91546334, "body": "@JanedOE if you want to take the endianess into the account see my updated answer."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536831514, "post_id": 52293618, "comment_id": 91568703, "body": "I already have had accepted &quot;Some programmers Dude&quot;s answer, he also explained it very well and i cant give points (less reputation) because i always have to create new accounts because being blocked for poor language and programming skills from some Pro&#39;s here :P"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1536768561, "last_edit_date": 1536768561, "creation_date": 1536750229, "answer_id": 52293618, "question_id": 52293393, "link": "https://stackoverflow.com/questions/52293393/displaying-integer-in-a-special-hexadecimal-format/52293618#52293618", "title": "Displaying integer in a special hexadecimal format", "body": "<p>Get rid of signess and modify the formats.</p>\n\n<pre><code>void foo(int port, int endianess)\n{\n    unsigned char * _port = (unsigned char*)&amp;port;\n\n    if(endianess)\n    {\n        for (size_t i = 0; i &lt; 2; i++) \n        {\n            printf(\"\\\\x%02hhx\", _port[i]);\n        }\n    }\n    else\n    {\n        for (size_t i = sizeof(port) - 1; i &gt;= sizeof(port) - 2; i--) \n        {\n            printf(\"\\\\x%02hhx\", _port[i]);\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536751496, "post_id": 52293934, "comment_id": 91535656, "body": "Works like a charm, i justs need some time to look at it to understand what you have done :P Thank you!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536751575, "post_id": 52293934, "comment_id": 91535709, "body": "@JanedOE I recommend you draw the &quot;array&quot; on paper, and draw an arrow to where <code>current</code> is pointing. Then erase and redraw the arrow as you &quot;loop&quot;."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536751748, "post_id": 52293934, "comment_id": 91535806, "body": "I thought about turning the loop du decrement but i was confused of typing, compiling, trying .. all at the same time. So current is just a pointer at what position the loop is on the integer, right? and you went from right to left and  jumped over the zeros and just displayed the higher order bytes on the left of your drawing??"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536751878, "post_id": 52293934, "comment_id": 91535877, "body": "@JanedOE Something like that yes. :)"}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536752275, "post_id": 52293934, "comment_id": 91536082, "body": "Just one more question: on all x86/x86_64 systems? Also on linux or does the OS also makes a difference?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536752315, "post_id": 52293934, "comment_id": 91536108, "body": "&quot;wrong endian&quot; would be directly solved by avoiding this <code>uint8_t *current;</code> and instead shifting <code>port</code> by 0 and then 8."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536752497, "post_id": 52293934, "comment_id": 91536198, "body": "@JanedOE Endianness is CPU dependent, not OS dependent."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1536751512, "last_edit_date": 1536751512, "creation_date": 1536751156, "answer_id": 52293934, "question_id": 52293393, "link": "https://stackoverflow.com/questions/52293393/displaying-integer-in-a-special-hexadecimal-format/52293934#52293934", "title": "Displaying integer in a special hexadecimal format", "body": "<p>On most systems the size of <code>int</code> is four bytes, 32 bits. The hexadecimal representation of <code>1234</code> is <code>0x000004d2</code>. On a little-endian system (like x86 and x86-64) it's stored in memory like the four bytes <code>0xd2</code>, <code>0x04</code>, <code>0x00</code> and <code>0x00</code> <em>in that order</em>.</p>\n\n<p>If we look at it as an array of bytes, it looks like</p>\n\n<pre>\n+------+------+------+------+\n| 0xd2 | 0x04 | 0x00 | 0x00 |\n+------+------+------+------+\n</pre>\n\n<p>There are three problems you have:</p>\n\n<ol>\n<li>You loop over all <em>four</em> bytes of the <code>int</code>, while you only want the significant bits</li>\n<li>You don't consider the endianness</li>\n<li>That <code>char</code> on your system is <em>signed</em> and when promoted to <code>int</code> it will be sign-extended (according to the <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">two's complement</a> rules)</li>\n</ol>\n\n<p>To solve the first point you need to discard the \"leading\" zero bytes.</p>\n\n<p>To solve the second point you need to loop from the <em>end</em> (but only on little-endian systems).</p>\n\n<p>To solve the third point use a type which won't be sign-extended (i.e. <code>uint8_t</code>).</p>\n\n<p>Put together you could do something like this:</p>\n\n<pre><code>// The number we want to print\nint port = 1234;\n\n// Copy the raw binary data to a buffer\n// This buffer is to not break strict aliasing\nuint8_t _port[sizeof port];\nmemcpy(_port, &amp;port, sizeof port);\n\n// Skip leading zeroes in the buffer\n// This is done by looping from the end of the buffer to the beginning,\n// and loop as long as the current byte is zero\nuint8_t *current;\nfor (current = _port + sizeof _port - 1; current &gt; _port &amp;&amp; *current == 0; --current)\n{\n    // Empty\n}\n\n// Print the remaining bytes\nfor (; current &gt;= _port; --current)\n{\n    printf(\"\\\\x%02x\", *current);  // Print with zero-padding, so e.g. \\x4 becomes \\x04\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/J7I8FZ\" rel=\"nofollow noreferrer\">Proof of concept</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52293934, "answer_count": 2, "score": 0, "last_activity_date": 1536768561, "creation_date": 1536749447, "last_edit_date": 1536751276, "question_id": 52293393, "link": "https://stackoverflow.com/questions/52293393/displaying-integer-in-a-special-hexadecimal-format", "title": "Displaying integer in a special hexadecimal format", "body": "<p>i am again facing a formatting problem. I want to pass a port number (as integer) as parameter to a function (argv[]) and want to display it in a special format. In my actual case i want to display the port number 1234 in hexadecimal. I try it this way</p>\n\n<pre><code>int port = 1234;\nchar* _port = (char*)&amp;port;\nfor (int i = 0; i &lt; sizeof(port); i++) {\n    printf(\"\\\\x%02x\", _port[i]);\n}\n</code></pre>\n\n<p>but it shows </p>\n\n<pre><code>\\xffffffd2\\x04\\x00\\x00\n</code></pre>\n\n<p>But i want it in format with leading zeros and 2 digits like</p>\n\n<pre><code>\\x04\\xd2\n</code></pre>\n\n<p>can you help me please?</p>\n\n<p>EDIT: I changed it to </p>\n\n<pre><code>sizeof(port)-2 \n</code></pre>\n\n<p>and it shows only 2 digits but in the wrong endian :S</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1536748228, "post_id": 52293039, "comment_id": 91533822, "body": "C++ != C; I guessed you were asking about C."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1536748255, "post_id": 52293039, "comment_id": 91533837, "body": "Check the <code>scanf</code> manual again. You&#39;re using it incorrectly..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1536748474, "post_id": 52293039, "comment_id": 91533962, "body": "@HelloWorld: The behaviour of both expressions is actually undefined in C and C++. And C is superior in many ways, for example the ability to type pun through a union."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 2, "creation_date": 1536748477, "post_id": 52293039, "comment_id": 91533964, "body": "@HelloWorld That&#39;s simply wrong."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 1, "creation_date": 1536748519, "post_id": 52293039, "comment_id": 91533985, "body": "@HelloWorld C++ is not C and more. Or are there VLA available in C++ now?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1536748559, "post_id": 52293039, "comment_id": 91534004, "body": "@Gerhardh: although VLA support is optional from C11."}, {"owner": {"reputation": 613, "user_id": 10009621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fb9e76523b45cfd70dde3d0501e881?s=128&d=identicon&r=PG&f=1", "display_name": "Belverus", "link": "https://stackoverflow.com/users/10009621/belverus"}, "edited": false, "score": 0, "creation_date": 1536748573, "post_id": 52293039, "comment_id": 91534018, "body": "that ampersand thing...:( thank you."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1536748245, "creation_date": 1536748245, "answer_id": 52293058, "question_id": 52293039, "link": "https://stackoverflow.com/questions/52293039/basic-c-programming-how-to-solve-run-time-check-failure-3-the-variable-in/52293058#52293058", "title": "Basic C Programming - How to solve &quot;Run-Time Check Failure #3 - The variable &#39;integer1&#39; is being used without being initialized.&quot;", "body": "<p>Your compiler is being really rather friendly.</p>\n\n<p>You need to pass a <em>pointer</em> to the variable to be set by <code>scanf</code>, and you should <em>always</em> check the return value of <code>scanf</code>:</p>\n\n<pre><code>if (scanf(\"%d\", &amp;integer1) == 1){\n    // all read correctly; i.e. 1 variable set\n} else {\n    // don't attempt to read `integer1`\n}\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 10009621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fb9e76523b45cfd70dde3d0501e881?s=128&d=identicon&r=PG&f=1", "display_name": "Belverus", "link": "https://stackoverflow.com/users/10009621/belverus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52293058, "answer_count": 1, "score": -2, "last_activity_date": 1536757521, "creation_date": 1536748176, "last_edit_date": 1536757521, "question_id": 52293039, "link": "https://stackoverflow.com/questions/52293039/basic-c-programming-how-to-solve-run-time-check-failure-3-the-variable-in", "title": "Basic C Programming - How to solve &quot;Run-Time Check Failure #3 - The variable &#39;integer1&#39; is being used without being initialized.&quot;", "body": "<p>I'm a newbie who is trying to compile a simple code. This is the code I'm trying to compile.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint main() \n{\n    int integer1; \n    int integer2; \n    int sum; \n\n    printf(\"Enter first integer\\n\"); \n    scanf( \"%d\", integer1 ); \n\n    printf( \"Enter second integer\\n\" ); \n    scanf( \"%d\", integer2 ); \n\n    sum = integer1 + integer2; \n\n    printf( \"sum is %d\\n\", sum ); \n    return 0;  \n}  \n</code></pre>\n\n<p>I am using the Visual Studio 2017 as compiler and I get the error below. </p>\n\n<blockquote>\n  <p>Run-Time Check Failure #3 - The variable 'integer1' is being used without being initialized.</p>\n</blockquote>\n\n<p>Could you please help?</p>\n"}, {"tags": ["c", "printf", "fork"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1536747053, "post_id": 52292664, "comment_id": 91533102, "body": "You wrote code with a missing quotations (<code>&quot;</code>)? And as nitpicking as it sounds, look at it from our perspective. If you got that detail wrong, how can you be sure your example reproduces the issue? It&#39;s important to write good <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>s."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536747055, "post_id": 52292664, "comment_id": 91533105, "body": "stdout is buffered, you must fflush(stdout) before fork"}], "answers": [{"tags": [], "owner": {"reputation": 1033, "user_id": 5778803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b5CcU.jpg?s=128&g=1", "display_name": "Eliyahu Machluf", "link": "https://stackoverflow.com/users/5778803/eliyahu-machluf"}, "is_accepted": false, "score": 1, "last_activity_date": 1536747168, "creation_date": 1536747168, "answer_id": 52292739, "question_id": 52292664, "link": "https://stackoverflow.com/questions/52292664/fork-works-strange/52292739#52292739", "title": "Fork works strange", "body": "<p>This is because stdout is buffering the data, and flushing it only when newline is reached.\nso when you did not add a newline to the parent first print, it was not actually printed, but was buffered by the process. then buffer was flushed when the process (parent or child) exited.</p>\n\n<p>see \n<a href=\"https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin\">Why does printf not flush after the call unless a newline is in the format string?</a></p>\n\n<p>for more details.</p>\n"}], "owner": {"reputation": 24, "user_id": 10264666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wk7LEncPLmE/AAAAAAAAAAI/AAAAAAAAB2A/7k3pquG4g3U/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041d\u0438\u0433\u043c\u0430\u0442\u0443\u043b\u043b\u0438\u043d", "link": "https://stackoverflow.com/users/10264666/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9d%d0%b8%d0%b3%d0%bc%d0%b0%d1%82%d1%83%d0%bb%d0%bb%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1536747187, "answer_count": 1, "score": -1, "last_activity_date": 1536747168, "creation_date": 1536746912, "question_id": 52292664, "link": "https://stackoverflow.com/questions/52292664/fork-works-strange", "closed_reason": "Duplicate", "title": "Fork works strange", "body": "<p>I have exercise in university. </p>\n\n<blockquote>\n  <p>Create a program that declares a variable\n  n, forks a new process and prints \u201cHello\n  from parent [PID - n]\u201d and \u201cHello from\n  child [PID - n]\u201d from parent and child\n  processes respectively. Run it 10 times\n  and explain the output </p>\n</blockquote>\n\n<p>I wrote this code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid main()\n{\n    pid_t n = getpid();\n    printf(\"Hello from parent [PID - %d], n);\n    fork();\n    n = getpid();\n    printf(\"Hello from child [PID - %d], n);\n}\n</code></pre>\n\n<p>But after compilation and execution i get this</p>\n\n<pre><code>Hello from parent [PID - 10135]Hello from child [PID - 10135]Hello from parent [PID - 10135]Hello from child [PID - 10136]\n</code></pre>\n\n<p>The \"Hello from parent ...\" printed twice. But if i will change code printf statements a little</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid main()\n{\n    pid_t n = getpid();\n    printf(\"Hello from parent [PID - %d]\\n, n);\n    fork();\n    n = getpid();\n    printf(\"Hello from child [PID - %d]\\n, n);\n}\n</code></pre>\n\n<p>(I've just added '\\n' to each string)\ni would get</p>\n\n<pre><code>Hello from parent [PID - 10223]\nHello from child [PID - 10223]\nHello from child [PID - 10224]\n</code></pre>\n\n<p>And it works as it should. I've tried cc and gcc with -std=c99 flag but result stays the same. </p>\n\n<p>I think that problem somewhere in printf function)</p>\n\n<p>So, please explain me what happened, and why this works like this.</p>\n"}, {"tags": ["c", "gcc", "arm"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1536746367, "post_id": 52292350, "comment_id": 91532699, "body": "The values are promoted to <code>int</code> before comparison; they have the same type when promoted.  That may be why you don\u2019t get any warning for the comparison. You should get a warning about the <code>return</code> with no value in a function returning an <code>int</code>, unless perhaps the compiler deduces the return will never be executed."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1536746644, "post_id": 52292350, "comment_id": 91532859, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Opti&zwnj;&#8203;ons</a> &quot;<i><code>-Wsign-compare</code> - Warn when a comparison between signed and unsigned values could produce an incorrect result when the signed value is converted to unsigned.</i>&quot; <code>bar</code> is not converted to an unsigned type."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536746716, "post_id": 52292350, "comment_id": 91532895, "body": "@JonathanLeffler Thank you for the reply, but I want to deny the developers to use this kind of comparison. Maybe this code is simple but in complex software maybe it will be a very awful bug."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1536746719, "post_id": 52292350, "comment_id": 91532899, "body": "<code>-Wsign-compare</code> is only for C++"}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536746825, "post_id": 52292350, "comment_id": 91532972, "body": "@melpomene could you explain more about your answer?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 4, "creation_date": 1536746850, "post_id": 52292350, "comment_id": 91532986, "body": "@KeineLust Documentation seems to imply that it&#39;s available also on C: <i>&quot;-Wsign-compare      Warn when a comparison between signed and unsigned values could produce an incorrect result when the signed value is converted to unsigned. In C++, this warning is also enabled by -Wall. <b>In C, it is also enabled by -Wextra.</b> &quot;</i>"}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1536746859, "post_id": 52292350, "comment_id": 91532996, "body": "@KeineLust How could I use in C something similar?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536746905, "post_id": 52292350, "comment_id": 91533022, "body": "@poprock 1) I only wrote a comment, not an answer. 2) What&#39;s unclear about it?"}, {"owner": {"reputation": 1514, "user_id": 1291628, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7eca596c7dc7b82b63243bb8af928128?s=128&d=identicon&r=PG", "display_name": "ikkentim", "link": "https://stackoverflow.com/users/1291628/ikkentim"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1536746996, "post_id": 52292350, "comment_id": 91533070, "body": "@KeineLust No, it&#39;s also for C. See, see the manual <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wsign-compare\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/&hellip;</a>"}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536747001, "post_id": 52292350, "comment_id": 91533073, "body": "@melpomene why is not converted to an unsigned type?"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1536747049, "post_id": 52292350, "comment_id": 91533099, "body": "What about an analyse tool like PC-Lint?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1536747052, "post_id": 52292350, "comment_id": 91533100, "body": "Oops, sorry, <code>-Wall</code> turns on this flag only in C++"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1536747071, "post_id": 52292350, "comment_id": 91533119, "body": "@poprock because <code>uint8_t</code> and <code>int16_t</code> both fit into <code>int</code>, therefore they&#39;ll be promoted to int. And it&#39;s <i>promotion</i>, not <i>conversion</i>. All types narrower than int will always be promoted to int"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536747106, "post_id": 52292350, "comment_id": 91533136, "body": "@poprock Because, as JonathanLeffler said, they&#39;re both converted to <code>int</code>. As for why, see <a href=\"https://stackoverflow.com/a/46073296/1848654\">stackoverflow.com/a/46073296/1848654</a>."}, {"owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536747469, "post_id": 52292350, "comment_id": 91533361, "body": "@phuclv Are you sure that is it ok? I mean, it is safe for the software or maybe in complex situations exist an awful bug?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1536747883, "post_id": 52292350, "comment_id": 91533594, "body": "@JonathanLeffler <i>You should get a warning ...</i>  Not on <code>main()</code>.  Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.2.2.3\" rel=\"nofollow noreferrer\"><b>5.1.2.2.3 Program termination</b></a>: &quot;... reaching the } that terminates the main function returns a value of 0 ...&quot;"}, {"owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "edited": false, "score": 0, "creation_date": 1536747956, "post_id": 52292350, "comment_id": 91533657, "body": "This should be caught in static analysis, for example: <a href=\"http://adlint.sourceforge.net/pmwiki/upload.d/Main/users_guide_en.html#W0245\" rel=\"nofollow noreferrer\">adlint.sourceforge.net/pmwiki/upload.d/Main/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536748029, "post_id": 52292350, "comment_id": 91533709, "body": "@AndrewHenle \u2014 Before it was edited, the return after the if had no value specified. I agree that if the infinite loop terminates, falling off the end of main in C99 or later is equivalent to returning zero."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1536762939, "post_id": 52292350, "comment_id": 91543254, "body": "There&#39;s nothing dangerous with <i>comparing different datatypes</i> per se. People compare like that all the time, for example int and long. It&#39;s just that comparing <b>types with different signness</b> may produce unexpected result due to the change in <i>value</i>, and that was coverered with <code>-Wsign-compare</code>. In this case all the values are preserved like chux said, and the output won&#39;t surprise you like <code>-1 &gt; 2U</code>"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1536756151, "last_edit_date": 1536756151, "creation_date": 1536755057, "answer_id": 52295114, "question_id": 52292350, "link": "https://stackoverflow.com/questions/52292350/how-to-get-a-warning-if-the-c-code-comparing-different-datatypes/52295114#52295114", "title": "How to get a warning, if the C Code comparing different datatypes?", "body": "<blockquote>\n  <p>How to get a warning, if the C Code comparing different datatypes?</p>\n</blockquote>\n\n<p><code>==</code> causes both operands to to go though an <em>implicit conversion</em> per their relative <em>integer conversion rank</em>.  To get a warning, do a comparison that after <em>integer promotions</em>, the operands differ in sign-ness.</p>\n\n<blockquote>\n  <blockquote>\n    <p>If an <code>int</code> can represent all values of the original type (as restricted by the width, for a bit-field), the value is converted to an <code>int</code>; otherwise, it is converted to an <code>unsigned int</code>. These are called the <em>integer promotions</em>.  C11dr \u00a76.3.1.1 2</p>\n  </blockquote>\n</blockquote>\n\n<p>A key concept to remember is that <em>integer promotions</em> never changes the <em>value</em>, only the <em>type</em>.  With no value change, the compare happens with no \"surprises\".</p>\n\n<p>It is conversion that may change the <em>value</em>.  E.g. <code>int -1</code> --> <code>unsigned UINT_MAX</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>I cannot see any error or warning, Why?</p>\n</blockquote>\n\n<p>With <code>foo8 == bar</code> below, both <code>foo8</code> and <code>bar</code> are promoted to <code>int</code>.  <strong>There is nothing significant to warn about</strong>.  The compare is well defined for all value combinations of <code>bar, foo8</code> - no surprises.  That is C.</p>\n\n<pre><code>uint8_t foo8 = 0;\nint16_t bar = -1;\nuint32_t foo32 = 0;\n\nint main(void) {\n  if (foo8 == bar)  return 1;\n  if (foo32 == bar) return 2;\n}\n</code></pre>\n\n<p>With <code>foo32 == bar</code>,  <code>foo32</code> becomes <code>unsigned</code> (or <code>unsigned long</code>) and <code>bar</code> is promoted to <code>int</code>.  With various compiler options, you can readily get a warning like</p>\n\n<pre><code>warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\n</code></pre>\n\n<hr>\n\n<p>In this later case, to compare an <code>int</code> over its [INT_MIN...INT_MAX] range to an <code>unsigned</code> over its [0...UINT_MAX] range and make sure comparing <code>-1, UINT_MAX</code> fails, code could use:</p>\n\n<pre><code>// if (foo32 == bar) return 2;\nif (bar &gt;= 0 &amp;&amp; foo32 == (unsigned)bar) return 2;\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 4871825, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/41b858818a8ef0c12c6da5c236cbcd5b?s=128&d=identicon&r=PG&f=1", "display_name": "pop rock", "link": "https://stackoverflow.com/users/4871825/pop-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536756151, "creation_date": 1536746071, "last_edit_date": 1536746591, "question_id": 52292350, "link": "https://stackoverflow.com/questions/52292350/how-to-get-a-warning-if-the-c-code-comparing-different-datatypes", "title": "How to get a warning, if the C Code comparing different datatypes?", "body": "<p>I want to see a warning or an error if the developer in C Code is comparing different data types. I am using the gcc arm none eabi and I have tried the following code and the following compiler flags correspondingly.</p>\n\n<pre><code>uint8_t foo = 0;\nint16_t bar = -1;\n\nint main() {\n  while(1) {\n    if (foo==bar) return 0;\n  }\n}\n</code></pre>\n\n<p>Compiler Options </p>\n\n<pre><code>-Wsign-compare -Wall -Wextra\n</code></pre>\n\n<p>But I cannot see any error or warning, Why? Could you help me?</p>\n"}, {"tags": ["c", "language-lawyer", "undefined-behavior", "unions", "type-punning"], "comments": [{"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1536740127, "post_id": 52290456, "comment_id": 91528782, "body": "why <code>int x; printf(&quot;%08x\\n&quot;, x);</code> an UB ? Casting an int to an unsigned int is a behavior defined, and not initialyzing a variable is not an UB, so why this code end up in a UB ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1536740190, "post_id": 52290456, "comment_id": 91528818, "body": "@Tom&#39;s - Accessing indeterminate values is UB. Point blank."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 2, "creation_date": 1536740200, "post_id": 52290456, "comment_id": 91528826, "body": "@Tom&#39;s There are no casts in that line, and why do you think using an uninitialized variable is not UB?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1536740283, "post_id": 52290456, "comment_id": 91528869, "body": "Because the behavior is defined ... Well I agree that this code will end up printing &quot;garbage/random&quot; value, but it will never crash are behaved differently. And there is a &quot;cast&quot; thougth it&#39;s really implicite : printf %x wait an unsigned int, and an int was given?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 2, "creation_date": 1536740354, "post_id": 52290456, "comment_id": 91528915, "body": "@Tom&#39;s - <i>&quot;but it will never crash are behaved differently&quot;</i> The C standard, which is the subject here, does not guarantee anything of the sort. That&#39;s the whole point in being undefined behavior."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1536740493, "post_id": 52290456, "comment_id": 91528981, "body": "@Tom&#39;s A cast is an explicit type conversion. There&#39;s no cast here. There isn&#39;t even an implicit conversion because varargs doesn&#39;t give you a known type context. Or do you think <code>printf(&quot;%f&quot;, 42)</code> is fine because <code>42</code> can be implicitly converted to <code>double</code>?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536740553, "post_id": 52290456, "comment_id": 91529032, "body": "@StoryTeller Strange. I do not see how an unitialyzed variable (which is not a pointer) can cause a different behavior. Thanks for the info."}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1536740596, "post_id": 52290456, "comment_id": 91529065, "body": "I&#39;m not convinced  this is a duplicate.  The second piece of quoted text in Shafik Yaghmour&#39;s answer notes that &quot; ... the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type ...&quot;.  The problem here is that there aren&#39;t enough bits in a char to create an int, therefore typically 8 or 24 bits of the int will be uninitialized.  As @StoryTeller has noted unitialized access is UB."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1536740643, "post_id": 52290456, "comment_id": 91529097, "body": "@Tom&#39;s <a href=\"https://stackoverflow.com/questions/6725809/trap-representation\">stackoverflow.com/questions/6725809/trap-representation</a>"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536740937, "post_id": 52290456, "comment_id": 91529280, "body": "@melpomene thanks, I will read that."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536747650, "post_id": 52290456, "comment_id": 91533460, "body": "@dgnuff Perhaps out of common courtesy you might want to accept one of the comprehensive answers below?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536768086, "post_id": 52290456, "comment_id": 91546313, "body": "&quot;The following is not UB in modern C:&quot; no one said that actually the first exemple is completely UB ?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1536768910, "post_id": 52290456, "comment_id": 91546778, "body": "@Stargateur Although in <a href=\"http://blog.frama-c.com/index.php?post/2013/03/13/indeterminate-undefined\" rel=\"nofollow noreferrer\">C the wording has changed a lot</a> reading an indeterminate value is undefined behavior with some caveats. Thankfully for C++, <a href=\"https://stackoverflow.com/q/23415661/1708801\">C++14 nailed it down more concisely</a>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536769516, "post_id": 52290456, "comment_id": 91547054, "body": "@ShafikYaghmour Why force language to define thing that shouldn&#39;t ever be write, people are not suppose to use union like that and I completely agree. If OP want look at the byte of a float <a href=\"http://rextester.com/AAIHI96066\" rel=\"nofollow noreferrer\">this</a> is perfectly defined. Plus there is simply no evidence an int is the same size that a float."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1536769626, "post_id": 52290456, "comment_id": 91547107, "body": "@Stargateur type punning via a union is well defined in C although I would just use memcpy and bit_cast in C++ see <a href=\"https://stackoverflow.com/a/51228315/1708801\">my answer here for more details</a>. I personally <a href=\"https://stackoverflow.com/a/31080901/1708801\">feel that unions are meant for variant types</a> but that boat left a long time ago."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536769886, "post_id": 52290456, "comment_id": 91547207, "body": "@ShafikYaghmour No it&#39;s not ! And whatever don&#39;t push people to do this"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536772401, "post_id": 52290456, "comment_id": 91548440, "body": "@Stargateur: If a program wants to extract the exponent from a <code>double</code>, the level of compiler complexity required to support reading and writing a superimposed <code>uint16_t</code> or <code>uint32_t</code> would be far less than the level of compiler complexity required to recognize all reasonable code patterns via which a program might assemble bytes of a float into a longer integer type and later decompose that type into a sequence of bytes, and convert those patterns into a single 16-or-32-bit read and a single such write."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536797938, "post_id": 52290456, "comment_id": 91557523, "body": "@Stargateur &quot;Accessing indeterminate values is UB&quot; - wrong"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536747580, "post_id": 52291386, "comment_id": 91533428, "body": "@PotentialUpvoters why is this only +2? I&#39;ll do my bit."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536769491, "post_id": 52291386, "comment_id": 91547043, "body": "Note I quote the defect report specifically because footnotes are non-normative, while a defect report we can see the rationale and have more confidence that we don&#39;t have an error, which does happen in non-normative sections from time to time."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 8, "last_activity_date": 1536767818, "last_edit_date": 1536767818, "creation_date": 1536743045, "answer_id": 52291386, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior/52291386#52291386", "title": "Is the following C union access pattern undefined behavior?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_283.htm\" rel=\"noreferrer\">Defect report 283: Accessing a non-current union member (\"type punning\")</a> covers this and tells us there is undefined behavior if there is trap representation.</p>\n\n<p>The defect report asked:</p>\n\n<blockquote>\n  <p>In the paragraph corresponding to 6.5.2.3#5, C89 contained this\n  sentence:</p>\n  \n  <blockquote>\n    <p>With one exception, if a member of a union object is accessed after a value has been stored in a different member of the object, <strong>the\n    behavior is implementation-defined.</strong></p>\n  </blockquote>\n  \n  <p>Associated with that sentence was this footnote:</p>\n  \n  <blockquote>\n    <p>The \"byte orders\" for scalar types are invisible to isolated programs that do not indulge in type punning (for example, by\n    assigning to one member of a union and inspecting the storage by\n    accessing another member that is an appropriately sixed array of\n    character type), but must be accounted for when conforming to\n    externally imposed storage layouts. </p>\n  </blockquote>\n  \n  <p>The only corresponding verbiage in <a href=\"https://port70.net/~nsz/c/c99/n1256.html#6.2.6.1p7\" rel=\"noreferrer\">C99 is 6.2.6.1#7</a>:</p>\n  \n  <blockquote>\n    <p>When a value is stored in a member of an object of union type, the bytes of the object representation that do not correspond to that\n    member but <strong>do correspond to other members take unspecified values,</strong> but\n    the value of the union object shall not thereby become a trap\n    representation. </p>\n  </blockquote>\n  \n  <p><strong>It is not perfectly clear that the C99 words have the same\n  implications as the C89 words.</strong></p>\n</blockquote>\n\n<p>The defect report added the following footnote:</p>\n\n<blockquote>\n  <p>Attach a new footnote 78a to the words \"named member\" in 6.5.2.3#3:</p>\n  \n  <p>78a <strong>If the member used to access the contents of a union object is not the same as the member last used to store a value in the object,</strong> the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type as described in 6.2.6 (a process sometimes called \"type punning\"). <strong>This might be a trap representation.</strong></p>\n</blockquote>\n\n<p>C11 <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.2.6.1p5\" rel=\"noreferrer\">6.2.6.1 General</a> tells us: </p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. I<strong>f the stored value of an object has such a representation and is read by an lvalue expression that does not have character type, the behavior is undefined.</strong> If such a representation is produced by a side effect that modifies all or any part of the object by an lvalue expression that does not have character type, the behavior is undefined.<sup>50)</sup> <strong>Such a representation is called a trap representation.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 4, "last_activity_date": 1536743479, "creation_date": 1536743479, "answer_id": 52291533, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior/52291533#52291533", "title": "Is the following C union access pattern undefined behavior?", "body": "<p>From 6.2.6.1 \u00a77 :</p>\n\n<blockquote>\n  <p>When a value is stored in a member of an object of union type, the bytes of the object representation that do not correspond to that member but do correspond to other members take unspecified values.</p>\n</blockquote>\n\n<p>So, the value of <code>plugh.i</code> would be unspecified after setting <code>plugh.c</code>.</p>\n\n<p>From a footnote to 6.5.2.3 \u00a73 :</p>\n\n<blockquote>\n  <p>If the member used to read the contents of a union object is not the same as the member last used to store a value in the object, the appropriate part of the object representation of the value is reinterpreted as an object representation in the new type as described in 6.2.6 (a process sometimes called \u2018\u2018type punning\u2019\u2019). This might be a trap representation.</p>\n</blockquote>\n\n<p>This says that type punning is specifically allowed (as you asserted in your question). But it might result in a trap representation, in which case reading the value has undefined behavior according to 6.2.6.1 \u00a75 :</p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. If the stored value of an object has such a representation and is read by an lvalue expression that does not have character type, the behavior is undefined. If such a representation is produced by a side effect that modifies all or any part of the object by an lvalue expression that does not have character type, the behavior is undefined. 50) Such a representation is called\n  a trap representation.</p>\n</blockquote>\n\n<p>If it's not a trap representation, there seems to be nothing in the standard that would make this undefined behavior, because from 4 \u00a73, we get :</p>\n\n<blockquote>\n  <p>A program that is correct in all other aspects, operating on correct data, containing unspecified behavior shall be a correct program and act in accordance with 5.1.2.3.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1536743599, "creation_date": 1536743599, "answer_id": 52291575, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior/52291575#52291575", "title": "Is the following C union access pattern undefined behavior?", "body": "<p><strong>C11 \u00a76.2.6.1 p7 says:</strong></p>\n\n<blockquote>\n  <p>When a value is stored in a member of an object of union type, the\n  bytes of the object representation that do not correspond to that\n  member but do correspond to other members take <strong>unspecified</strong> values.</p>\n</blockquote>\n\n<p>So, <code>plugh.i</code> would be unspecified.</p>\n"}, {"comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536770372, "post_id": 52299870, "comment_id": 91547428, "body": "I think the concept of <a href=\"https://stackoverflow.com/a/31746063/1708801\">wobbly values</a> encompasses this issue."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536772052, "post_id": 52299870, "comment_id": 91548272, "body": "@ShafikYaghmour: There are some situations where a guarantee that writing to a struct member will not disturb any storage outside that member would be useful, and working around the lack of such a guarantee would be expensive; there are others where such a guarantee would be expensive.  There are likewise platforms where such a guarantee could be upheld at almost no cost, and others where it would be expensive.  I don&#39;t think the authors of the Standard intended the license above to be applied except in cases where an implementer judged that the latter expense would exceed the former for..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536772107, "post_id": 52299870, "comment_id": 91548313, "body": "...the kinds of tasks the implementation was intended to serve, but unfortunately the Standard provides no means by which programs which require that guarantee can safely refuse to run on implementations that don&#39;t provide it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1536772840, "post_id": 52299870, "comment_id": 91548633, "body": "@ShafikYaghmour, as far as I understand what the term is supposed to mean, I don&#39;t think &quot;wobbly values&quot; are needed to understand what I&#39;m describing.  That is, whether the unspecified values taken by some bytes of <code>plugh.i</code> upon assignment to <code>plugh.c</code> are furthermore wobbly is an additional, separate consideration."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536776484, "post_id": 52299870, "comment_id": 91550339, "body": "@JohnBollinger: In some cases, the only way to achieve optimal performance would be to recognize the concept of &quot;wobbly bytes&quot;.  Suppose, for example, that code writes <code>unionArray[i].struct1.member2</code>, <code>unionArray[j].struct2</code>, and <code>unionArray[i].struct1.member1</code> in that order, and then returns <code>unionArray[i].struct1</code>.  I think that sequence should have defined behavior if nothing beyond the first member of the returned structure or <code>unionArray[i].struct1</code> is ever examined, and see no basis for such examination via character type to invoke UB, but see no basis other than &quot;wobbly values&quot; for..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536776540, "post_id": 52299870, "comment_id": 91550367, "body": "...the returned structure not to match the final value of <code>unionArray[i].struct1</code> unless the return or the observation invokes UB, or there&#39;s some kind of &quot;wobbly value&quot; at work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536778901, "post_id": 52299870, "comment_id": 91551473, "body": "@supercat, I agree that in your scenario there is no justification other than wobbly values (which seem not to have made it into C17), or UB as you describe, for the structure value returned from the function to differ from the final value of <code>unionarray[i].struc1</code>.  The question I&#39;m considering in this answer, however, is what the standard says about what that value is in the first place, in the event that <code>i == j</code>.  Without any other details, all I can say with certainty is that its <code>member1</code> will have the value set in the third operation."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1536795097, "post_id": 52299870, "comment_id": 91556984, "body": "@JohnBollinger: The Standard clearly does not require that unused members take on any specific bit pattern.  What is ambiguous is whether they are required to behave as though they hold <i>some</i> consistent bit pattern.  I think I&#39;ve come up with a simplified example, which I offer in my answer."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1536770188, "creation_date": 1536770188, "answer_id": 52299870, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior/52299870#52299870", "title": "Is the following C union access pattern undefined behavior?", "body": "<p>Other answers address the main question of whether reading <code>plugh.i</code> produces undefined behavior when <code>plugh</code> was not initialized and only <code>plugh.c</code> was ever assigned.  In short: no, unless the bytes of <code>plugh.i</code> constitute a trap representation at the time of the read.</p>\n\n<p>But I want to speak directly to a preliminary assertion in the question:</p>\n\n<blockquote>\n  <p>Most C compilers nowadays will have <code>sizeof(char) &lt; sizeof(int)</code>, with\n  <code>sizeof(int)</code> being either 2 or 4. That means that in these cases at\n  most 50% or 25% of <code>plugh.i</code> will have been written to</p>\n</blockquote>\n\n<p>The question seems to be supposing that assigning a value to <code>plugh.c</code> will leave undisturbed those bytes of <code>plugh</code> that do not correspond to <code>c</code>, but in no way does the standard support that proposition.  In fact, it expressly denies any such guarantee, for as others have noted:</p>\n\n<blockquote>\n  <p>When a value is stored in a member of an object of union type, <em>the\n  bytes of the object representation that do not correspond to that\n  member but do correspond to other members take unspecified values</em>.</p>\n</blockquote>\n\n<p>(<a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.2.6.1p7\" rel=\"nofollow noreferrer\">C2011, 6.2.6.1/7</a>; emphasis added)</p>\n\n<p>Although this does not guarantee that the unspecified values taken by those bytes are different from their values prior to the assignment, it expressly provides that they might be.  And it is entirely plausible that in some implementations they often will be.  For example, on a platform that supports only word-sized writes to memory or where such writes are more efficient than byte-sized ones, it is likely that assignments to <code>plugh.c</code> are implemented with word-sized writes, without first loading the other bytes of <code>plugh.i</code> so as to preserve their values.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1536794823, "last_edit_date": 1536794823, "creation_date": 1536779076, "answer_id": 52301828, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior/52301828#52301828", "title": "Is the following C union access pattern undefined behavior?", "body": "<p>In cases where useful optimizations might cause some aspects of a program's execution to behave in a fashion inconsistent with the Standard (e.g. two consecutive reads of the same byte yielding inconsistent results), the Standard generally attempts to characterize situations where such effects might be observed, and then classify such situations as invoking Undefined Behavior.  It doesn't make much effort to ensure that its characterizations don't \"ensnare\" some actions whose behavior should obviously be processed predictably, since it expects compiler writers to avoid behaving obtusely in such cases.</p>\n\n<p>Unfortunately, there are some corner cases where this approach really doesn't work well.  For example, consider:</p>\n\n<pre><code>struct c8 { uint32_t u; unsigned char arr[4]; };\nunion uc { uint32_t u; struct c8 dat; } uuc1,uuc2;\n\nvoid wowzo(void)\n{\n  union uc u;\n  u.u = 123;\n  uuc1 = u;\n  uuc2 = u;\n}\n</code></pre>\n\n<p>I think it's clear that the Standard does not require that the bytes in <code>uuc1.dat.arr</code> or <code>uuc2.dat.arr</code> contain any particular value, and that a compiler would be allowed to, for each of the four bytes i==0..3, copy <code>uuc1.dat.arr[i]</code> to <code>uuc2.dat.arr[i]</code>, copy <code>uuc2.dat.arr[i]</code> to <code>uuc1.dat.arr[i]</code>, or write both <code>uuc1.dat.arr[i]</code> and <code>uuc2.dat.arr[i]</code> with matching values.  I don't think it's clear whether the Standard intends to require that a compiler select one of those courses of action rather than simply leaving those bytes holding whatever they happen to hold.</p>\n\n<p>Clearly the code is supposed to have <em>fully</em> defined behavior if nothing ever observes the contents of <code>uuc1.dat.arr</code> nor <code>uuc2.dat.arr</code>, and there's nothing to suggest that examining those arrays should invoke UB.  Further, there is no defined means via which the value of <code>u.dat.arr</code> could change between the assignments to <code>uuc1</code> and <code>uuc2</code>.  That would suggest that the <code>uuc1.dat.arr</code> and <code>uuc2.dat.arr</code> should contain matching values.  On the other hand, for some kinds of programs, storing obviously-meaningless data into <code>uuc1.dat.arr</code> and/or <code>uuc1.dat.arr</code> would seldom serve any useful purpose.  I don't think the authors of the Standard particularly intended to require such stores, but saying that the bytes take on \"Unspecified\" values makes them necessary.  I'd expect such a behavioral guarantee to be deprecated, but I don't know what could replace it.</p>\n"}], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 2, "accepted_answer_id": 52291386, "answer_count": 5, "score": 7, "last_activity_date": 1546961738, "creation_date": 1536739882, "last_edit_date": 1546961738, "question_id": 52290456, "link": "https://stackoverflow.com/questions/52290456/is-the-following-c-union-access-pattern-undefined-behavior", "title": "Is the following C union access pattern undefined behavior?", "body": "<p>The following is not undefined behavior in modern C:</p>\n\n<pre><code>union foo\n{\n    int i;\n    float f;\n};\nunion foo bar;\nbar.f = 1.0f;\nprintf(\"%08x\\n\", bar.i);\n</code></pre>\n\n<p>and prints the hex representation of 1.0f.</p>\n\n<p>However the following is undefined behavior:</p>\n\n<pre><code>int x;\nprintf(\"%08x\\n\", x);\n</code></pre>\n\n<p>What about this?</p>\n\n<pre><code>union xyzzy\n{\n    char c;\n    int i;\n};\nunion xyzzy plugh;\n</code></pre>\n\n<p>This ought to be undefined behavior since no member of <code>plugh</code> has been written.</p>\n\n<pre><code>printf(\"%08x\\n\", plugh.i);\n</code></pre>\n\n<p>But what about this. Is this undefined behavior or not?</p>\n\n<pre><code>plugh.c = 'A';\nprintf(\"%08x\\n\", plugh.i);\n</code></pre>\n\n<p>Most C compilers nowadays will have <code>sizeof(char) &lt; sizeof(int)</code>, with <code>sizeof(int)</code> being either 2 or 4.  That means that in these cases, at most 50% or 25% of <code>plugh.i</code> will have been written to, but reading the remaining bytes will be reading uninitialized data, and hence should be undefined behavior. On the basis of this, is the entire read undefined behavior?</p>\n"}, {"tags": ["c", "compiler-construction", "lex"], "answers": [{"tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 4, "last_activity_date": 1536739966, "creation_date": 1536739966, "answer_id": 52290479, "question_id": 52290165, "link": "https://stackoverflow.com/questions/52290165/scanner-l22-warning-rule-cannot-be-matched/52290479#52290479", "title": "scanner.l:22: warning, rule cannot be matched", "body": "<p>There should be no newline between the matched token and the action. So :</p>\n\n<pre><code>{digit}\n        {\n                charno++;\n        }\n</code></pre>\n\n<p>should be :</p>\n\n<pre><code>{digit} {\n                charno++;\n        }\n</code></pre>\n\n<p>(and similarly for the others)</p>\n"}], "owner": {"reputation": 25, "user_id": 9752959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b01b7540480e0f9de96454b43c4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Alexia Paskevicius", "link": "https://stackoverflow.com/users/9752959/alexia-paskevicius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52290479, "answer_count": 1, "score": 2, "last_activity_date": 1536739966, "creation_date": 1536738874, "question_id": 52290165, "link": "https://stackoverflow.com/questions/52290165/scanner-l22-warning-rule-cannot-be-matched", "title": "scanner.l:22: warning, rule cannot be matched", "body": "<p>I am currently attempting to write a program that counts the number of characters and lines in a .in file. The issue is that when I input the command:</p>\n\n<pre><code> lex scanner.l\n</code></pre>\n\n<p>It produces an error that says:</p>\n\n<pre><code>scanner.l:22:warning, rule cannot be matched\n</code></pre>\n\n<p>I would appreciate any help on this matter. Below is my code:</p>\n\n<pre><code>%option noyywrap\n%{\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint charno=0;\nint lineno=0;\n%}\n\ncharacter [a-zA-Z]\nline [\\n]\ndigit [0-9]\n\n%%\n\n{digit}\n        {\n                charno++;\n        }\n\n{character}\n        {\n                charno++;\n        }\n{line}\n        {\n                lineno++;\n        }\n.      \n        {\n                charno++;\n        }\n\n%%\nint main(int argc, char **argv)\n{\n            ++argv, --argc; /*skip over program name */\n            if (argc &gt; 0)\n                    yyin = fopen(argv[0], \"r\");\n            else\n                    yyin = stdin;\n            yylex();\n\n            printf(\"Number of characters: %d \", charno);\n            printf(\"Number of lines:      %d \", lineno);\n            return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "io", "segmentation-fault", "fgets", "strtok"], "comments": [{"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 0, "creation_date": 1536737782, "post_id": 52289809, "comment_id": 91527457, "body": "doesn&#39;t this already causes a SegFault <code>buff[strlen(buff)] = &#39;\\0&#39;;</code> ?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 5, "creation_date": 1536738094, "post_id": 52289809, "comment_id": 91527637, "body": "You never check to see if <code>strtok()</code> returns a null pointer before trying to use that pointer."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1536738128, "post_id": 52289809, "comment_id": 91527660, "body": "In <code>while</code> loop, invert <code>printf</code> and <code>strtok</code>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1536743807, "post_id": 52289809, "comment_id": 91531063, "body": "<code>buff[strlen(buff)] = &#39;\\0&#39;;</code> is useless.  If <code>buff</code> is already <code>NUL</code>-terminated, it does nothing.  If <code>buff</code> isn&#39;t already <code>NUL</code>-terminated, it&#39;s undefined behavior."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 4, "last_activity_date": 1536739067, "creation_date": 1536739067, "answer_id": 52290228, "question_id": 52289809, "link": "https://stackoverflow.com/questions/52289809/c-reading-a-file-using-fgets-strtok-causes-segmentation-fault/52290228#52290228", "title": "c reading a file using fgets, strtok causes segmentation fault", "body": "<p>You repeatedly have code like:</p>\n\n<pre><code>token = strtok(NULL, INV_DELIM2);\nprintf(\"%s\\n\", token);\n</code></pre>\n\n<p>If <code>strtok()</code> returns NULL, it's then passed on to <code>printf()</code>, which expects to get a pointer to a valid 0-terminated string because of the <code>%s</code> in the format argument. NULL is not a pointer to a valid 0-terminated string, and so bad things happen, manifesting as as a crash in your case.</p>\n\n<p>Solution: Make sure the pointer returned by <code>strtok()</code> is not NULL before trying to use it.</p>\n\n<p>Suggestion for the future: Learn how to use a <strong>debugger</strong> to step through code, and get used to using <strong>valgrind</strong> to help track down memory problems. You shouldn't have to make bad guesses about what's going on when you can use a tool to find out where the problem is and learn exactly what's wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536743007, "post_id": 52290813, "comment_id": 91530563, "body": "I like <code>buffer[strcspn(buffer, \u201c\\n\u201d)] = &#39;\\0&#39;;</code> as it avoids the conditional in the code and works when the string is empty, etc."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536745171, "post_id": 52290813, "comment_id": 91531918, "body": "@JonathanLeffler Yes, you have a good point there. Habit I guess. I generally make use of <code>strlen</code>, so my normal check is <code>if (len &amp;&amp; buff[len - 1] == &#39;\\n&#39;) buff[--len] = &#39;\\0&#39;; else if (len == MAXC - 1) { &#47;* string too long *&#47; }</code>. (which preserves the updated string length in <code>len</code> after truncating the newline) Here there was no continued use of <code>buff</code> as a full-string necessitating the removal of the newline, so I just shortened the test somewhat to check only that the line fit in <code>buff</code>."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1536742449, "last_edit_date": 1536742449, "creation_date": 1536741135, "answer_id": 52290813, "question_id": 52289809, "link": "https://stackoverflow.com/questions/52289809/c-reading-a-file-using-fgets-strtok-causes-segmentation-fault/52290813#52290813", "title": "c reading a file using fgets, strtok causes segmentation fault", "body": "<p><em>Don't Skimp On Buffer Size</em>. If your longest line can be <code>25</code> characters, then don't use <code>26</code> characters as the buffer size, instead:</p>\n\n<pre><code>#define MAXC 1024  /* constant for max characters in buf */\n...\n    char buff[MAXC] = 1024;\n</code></pre>\n\n<p>(It's up to you, <code>128</code> works as will any other value that guarantees that with any variation in input length you don't write beyond the bounds of your array. I'd rather the buffer be 1000-characters too long than 1-char too short.)</p>\n\n<p>Then validate each <code>fgets</code> call by checking the length and that the last character in <code>buff</code> is the <code>'\\n'</code> character, e.g.</p>\n\n<pre><code>    while(fgets(buff, MAXC, file) != NULL) {\n        size_t len = strlen (buff);\n        if (len == MAXC - 1 &amp;&amp; buff[len - 1] != '\\n') {\n            fputs (\"error: line too long.\\n\", stderr);\n            /* handle error - generally by reading and dicarding\n             * characters until '\\n' or EOF encounterd and \n             * then either calling continue or break\n             */\n        }\n</code></pre>\n\n<p>This will insure you have a valid string before you call <code>strtok</code>.</p>\n\n<p><strong>You Don't Need Multiple Delimiters</strong></p>\n\n<p>Then, as mentioned in the comments, there is no need for separate delimiters. A single <code>delim</code> defined with <code>#define DELIM \":(,)\\n\"</code> or declared with <code>const char *delim = \":(,)\\n\"</code> is sufficient. Then you can simply loop over all tokens with:</p>\n\n<pre><code>    for (token = strtok(buff, delim); token; token = strtok(NULL, delim))\n        printf (\"%s\\n\", token);\n</code></pre>\n\n<p><strong>Short Example</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXC 1024\n\nint main (int argc, char **argv) {\n\n    char buff[MAXC] = \"\";\n    char *token = NULL;\n    const char *delim = \":(,)\\n\";\n    FILE *file = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!file) {    /* validate file open for reading */\n        perror (\"file open failed\");\n        return 1;\n    }\n\n    while(fgets(buff, MAXC, file) != NULL) {\n        size_t len = strlen (buff);\n        if (len == MAXC - 1 &amp;&amp; buff[len - 1] != '\\n') {\n            fputs (\"error: line too long.\\n\", stderr);\n            /* handle error - generally by reading and dicarding\n             * characters until '\\n' or EOF encounterd and \n             * then either calling continue or break\n             */\n        }\n\n        for (token = strtok(buff, delim); token; token = strtok(NULL, delim))\n            printf (\"%s\\n\", token);\n    }\n    if (file != stdin) fclose (file);   /* close file if not stdin */\n\n    return 0;\n}\n</code></pre>\n\n<p>(you can adjust <code>delim</code> if you need a different result)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo \"InputVector:0(1,3,4,2,40)\" | ./bin/strtok_delims\nInputVector\n0\n1\n3\n4\n2\n40\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 113, "user_id": 8735550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d660c71bad26279ca5ef73bf37a9c02?s=128&d=identicon&r=PG&f=1", "display_name": "alexW", "link": "https://stackoverflow.com/users/8735550/alexw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 52290228, "answer_count": 2, "score": -1, "last_activity_date": 1536742449, "creation_date": 1536737670, "last_edit_date": 1536738341, "question_id": 52289809, "link": "https://stackoverflow.com/questions/52289809/c-reading-a-file-using-fgets-strtok-causes-segmentation-fault", "title": "c reading a file using fgets, strtok causes segmentation fault", "body": "<p>Trying to read a file line by line,\na line from a file looks like this:</p>\n\n<pre><code>InputVector:0(1,3,4,2,40)\n</code></pre>\n\n<p>The code :</p>\n\n<pre><code>FILE *file = fopen(filename, \"r\");\nchar buff[26];\nchar *token;\n\nwhile(fgets(buff, 26, (FILE*)file) != NULL) {\n\n    buff[strlen(buff)] = '\\0';\n\n    printf(\"%s\\n\", buff);\n    token = strtok(buff, INV_DELIM1);\n    printf(\"%s\\n\", token);\n    token = strtok(NULL, INV_DELIM2);\n    printf(\"%s\\n\", token);\n\n    while(token != NULL) {\n        token = strtok(NULL, INV_DELIM3);\n        printf(\"%s\\n\", token);\n    }\n}\n</code></pre>\n\n<p>My guess is that in the while loop <code>strtok()</code> didn't return <code>NULL</code> after the last number and kept going and caused segmentation fault. I tried adding <code>\"\\0\"</code> to the end of <code>buff</code> after <code>fgets()</code> but it didn't do anything.</p>\n\n<pre><code>delim1: \":\",\ndelim2: \"(\",\ndelim3: \",)\"\n</code></pre>\n\n<p>the output i get is </p>\n\n<pre><code>InputVector:0(1,3,4,2,40)\nInputVector\n0\n1\n3\n4\n2\n40\nsegfault\n</code></pre>\n"}, {"tags": ["c", "pointers", "char"], "comments": [{"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 4, "creation_date": 1536737945, "post_id": 52289791, "comment_id": 91527544, "body": "What does <code>char[512] buf</code> mean? Is it a typo error?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536738251, "post_id": 52289791, "comment_id": 91527736, "body": "Not only is that not valid C, if you want to print out a pointer&#39;s value in <code>printf()</code> and friends, <code>%d</code> is not the right format specifier... go back and read the documentation on the function. And see if you can find something about pointer decay while you&#39;re doing so."}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1536738285, "post_id": 52289791, "comment_id": 91527756, "body": "Do you mean  char buf[512]; ?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536738315, "post_id": 52289791, "comment_id": 91527772, "body": "(<a href=\"http://c-faq.com/aryptr/index.html\" rel=\"nofollow noreferrer\">c-faq.com/aryptr/index.html</a> might be useful reading)"}, {"owner": {"reputation": 1, "user_id": 10351654, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216029835512885/picture?type=large", "display_name": "Robert Po", "link": "https://stackoverflow.com/users/10351654/robert-po"}, "edited": false, "score": 0, "creation_date": 1536738365, "post_id": 52289791, "comment_id": 91527804, "body": "Yes,I mean  char buf[512]."}], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1536738401, "creation_date": 1536738401, "answer_id": 52290022, "question_id": 52289791, "link": "https://stackoverflow.com/questions/52289791/why-is-the-address-of-a-char512-equal-to-that-char512/52290022#52290022", "title": "Why is the address of a char[512] equal to that char[512]", "body": "<p>it is the address of the 1st element in the array (i.e. address of buf[0]) vs. the address of the array itself (i.e. buf). No big surprise that they are equal.</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 0, "last_activity_date": 1536738471, "creation_date": 1536738471, "answer_id": 52290038, "question_id": 52289791, "link": "https://stackoverflow.com/questions/52289791/why-is-the-address-of-a-char512-equal-to-that-char512/52290038#52290038", "title": "Why is the address of a char[512] equal to that char[512]", "body": "<p>The address is the same because an array decays into a pointer to the first element when passed, on the other hand, the address-of operator <code>&amp;</code> takes the address of the array, the address of the first element and the address of the array itself are the same.</p>\n\n<p>Use <code>%p</code> instead of <code>%d</code> to print addresses:</p>\n\n<pre><code>printf(\" buf :  %p %p\\n\", (void *)buf, (void *)&amp;buf);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10351654, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216029835512885/picture?type=large", "display_name": "Robert Po", "link": "https://stackoverflow.com/users/10351654/robert-po"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "closed_date": 1536739631, "answer_count": 2, "score": -1, "last_activity_date": 1536748964, "creation_date": 1536737599, "last_edit_date": 1536739394, "question_id": 52289791, "link": "https://stackoverflow.com/questions/52289791/why-is-the-address-of-a-char512-equal-to-that-char512", "closed_reason": "Duplicate", "title": "Why is the address of a char[512] equal to that char[512]", "body": "<p>When I declared a variable </p>\n\n<pre><code>char buf[512];\n</code></pre>\n\n<p>What does mean <code>&amp;buf</code> ?</p>\n\n<p>It seems equals to <code>buf</code> :</p>\n\n<pre><code>printf(\" buf :  %p %p\\n\", (void *) buf, (void *) &amp;buf);\n</code></pre>\n\n<p>prints :</p>\n\n<pre><code>buf :  0x7ffda6053fe0 0x7ffda6053fe0\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 635, "user_id": 1794026, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/b3a94746dee2c501d67d4a1bcd76a232?s=128&d=identicon&r=PG", "display_name": "elasticman", "link": "https://stackoverflow.com/users/1794026/elasticman"}, "edited": false, "score": 1, "creation_date": 1536738124, "post_id": 52289763, "comment_id": 91527654, "body": "What do you mean by equivalent? Equivalent in the way the instructions are interpreted or what the outcome of assembly code is?  The results &quot;in numbers&quot; are the same."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 635, "user_id": 1794026, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/b3a94746dee2c501d67d4a1bcd76a232?s=128&d=identicon&r=PG", "display_name": "elasticman", "link": "https://stackoverflow.com/users/1794026/elasticman"}, "edited": false, "score": 0, "creation_date": 1536738429, "post_id": 52289763, "comment_id": 91527837, "body": "@elasticman The way they are interpreted. Do they both mean the same thing? if they mean the same thing, I assume there won&#39;t be any difference in terms of assembly caode."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1536740908, "post_id": 52289763, "comment_id": 91529253, "body": "Note: You are dererencing pointer using the wrong type; that is <i>strict aliasing violation</i> and results in <i>undefined behaviour</i>. Both statements are invalid in standard C."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536743372, "post_id": 52289763, "comment_id": 91530796, "body": "To expand on @user694733 comment and noting that in general <code>sizeof(int) != sizeof(long long int)</code>, see e.g. <a href=\"https://wandbox.org/permlink/CDb1VB3LcnUQ0DJj\" rel=\"nofollow noreferrer\">wandbox.org/permlink/CDb1VB3LcnUQ0DJj</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1536748763, "post_id": 52289763, "comment_id": 91534136, "body": "To expand on @user694733&#39;s comment on strict aliasing, what you are doing is not guaranteed to work.  For example, on your system <code>int</code> could have a requirement to be aligned on a 2-byte boundary, while <code>unsigned long long</code> might have to be on an 8-byte boundary.  When you force an <code>int</code> to act as the start of an <code>unsigned long long</code> value, you violate your system&#39;s hardware restriction. If anyone posts &quot;But it worked for me!&quot;, they&#39;re just showing that they don&#39;t understand what they&#39;re doing. A lot of people think what you&#39;re doing is OK because the common x86 systems mostly allow such code."}, {"owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536752789, "post_id": 52289763, "comment_id": 91536359, "body": "@AndrewHenle P is an array of Int, what is wrong if I type cast P as <code>unsigned long long</code>? how does it violates system&#39;s hardware restriction?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536756524, "post_id": 52289763, "comment_id": 91538744, "body": "<i>P is an array of Int, what is wrong if I type cast P as <code>unsigned long long</code>?</i>  You can&#39;t do that because <code>P</code> is not an <code>unsigned long long</code>.  Period.  It&#39;s called the <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">&quot;strict aliasing rule&quot;</a>  What can happen?  <a href=\"https://www.google.com/search?q=sparc+SIGBUS\" rel=\"nofollow noreferrer\">Most of these failures</a> are probably caused by violating the strict aliasing rule on hardware that actually has alignment restrictions on data types.  Another example: <a href=\"https://stackoverflow.com/questions/45880782/call-stack-shows-sigbus-what-does-that-mean\" title=\"call stack shows sigbus what does that mean\">stackoverflow.com/questions/45880782/&hellip;</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536756943, "post_id": 52289763, "comment_id": 91539106, "body": "See <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p7\" rel=\"nofollow noreferrer\"><b>6.3.2.3 Pointers</b>, paragraph 7</a>: &quot;A pointer to an object type may be converted to a pointer to a different object type. If the resulting pointer is not correctly aligned for the referenced type, the behavior is undefined.&quot;"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536838446, "post_id": 52289763, "comment_id": 91572612, "body": "@AndrewHenle There seems to be a small misunderstanding: Strict aliasing violation and alignment issue are not the same thing (although typical errors lead to both). You are right about alignment issues being hardware related. But it&#39;s possible to have SA violation even when alignment and size of types match. SA violation makes compiler blind to the changes in variable, so it may fail to insert instructions to refresh data between RAM and CPU register for example."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1536839040, "post_id": 52289763, "comment_id": 91572984, "body": "@user694733  Those were examples in response to the &quot;how does it violates system&#39;s hardware restriction?&quot; question a few comments up.  A strict aliasing violation without a hardware fault such as a <code>SIGBUS</code> could probably be described as &quot;just more normal x86 code&quot;, for better or for worse.  The examples you mention - &quot;fail to insert instructions to refresh data between RAM and CPU register&quot; - are subtle bugs and hard to find common, clear-cut, and consistently-repeatable examples of, unlike searching for &quot;SIGBUS arm&quot; or &quot;SIGBUS sparc&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536756770, "post_id": 52290257, "comment_id": 91538962, "body": "Given <code>int P[5];</code>, <code>((unsigned long long *)P)[0] += B;</code> violates strict aliasing and is undefined behavior.  Such code will fail on systems that have alignment restrictions on data.  Like here:  <a href=\"https://stackoverflow.com/questions/19114491/structure-assignment-in-linux-fails-in-arm-but-succeeds-in-x86\" title=\"structure assignment in linux fails in arm but succeeds in x86\">stackoverflow.com/questions/19114491/&hellip;</a>"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536760242, "post_id": 52290257, "comment_id": 91541442, "body": "My answer was limited to x86 systems and I have mentioned this in the answer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536760580, "post_id": 52290257, "comment_id": 91541671, "body": "<a href=\"https://stackoverflow.com/questions/15233717/disable-misaligned-data-fixups-on-x86-64-linux\">It&#39;s not guaranteed to work on x86 systems either.</a>"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536762064, "post_id": 52290257, "comment_id": 91542669, "body": "But would it not require the auto-alignment feature to be OFF for it not to work?"}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1536753413, "last_edit_date": 1536753413, "creation_date": 1536739198, "answer_id": 52290257, "question_id": 52289763, "link": "https://stackoverflow.com/questions/52289763/type-casting-used-along-with-compound-assignment-operator/52290257#52290257", "title": "Type casting used along with Compound assignment operator", "body": "<p>They mean the same and the assembly (for x86-64 systems) is the same as well. You can check this at the godbolt compiler explorer <a href=\"https://godbolt.org/z/HTS900\" rel=\"nofollow noreferrer\">here</a> which shows the assembly of the two statements.</p>\n\n<pre><code>int P[5];\nunsigned long long B;\n\nvoid check1() {\n    ((unsigned long long *)P)[0] += B;\n}\n\nvoid check2() {\n    ((unsigned long long *)P)[0] = ((unsigned long long *)P)[0] + B;\n}\n</code></pre>\n\n<p>Assembly of <code>check1</code>:  </p>\n\n<pre><code>check1:\n        pushq   %rbp\n        movq    %rsp, %rbp\n        movl    $P, %eax\n        movq    (%rax), %rdx\n        movq    B(%rip), %rax\n        movl    $P, %ecx\n        addq    %rdx, %rax\n        movq    %rax, (%rcx)\n        nop\n        popq    %rbp\n        ret\n</code></pre>\n\n<p>Assembly of <code>check2</code>:  </p>\n\n<pre><code>check2:\n        pushq   %rbp\n        movq    %rsp, %rbp\n        movl    $P, %eax\n        movq    (%rax), %rdx\n        movq    B(%rip), %rax\n        movl    $P, %ecx\n        addq    %rdx, %rax\n        movq    %rax, (%rcx)\n        nop\n        popq    %rbp\n        ret\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 1654837, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGvHY.jpg?s=128&g=1", "display_name": "M Sharath Hegde", "link": "https://stackoverflow.com/users/1654837/m-sharath-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 52290257, "answer_count": 1, "score": 1, "last_activity_date": 1536753413, "creation_date": 1536737509, "question_id": 52289763, "link": "https://stackoverflow.com/questions/52289763/type-casting-used-along-with-compound-assignment-operator", "title": "Type casting used along with Compound assignment operator", "body": "<pre><code>((unsigned long long *)P)[0] += B;\n</code></pre>\n\n<p>Is the above Statement equivalent to: <code>((unsigned long long *)P)[0] = ((unsigned long long *)P)[0] + B;</code> ?</p>\n\n<p>P is defined as: <code>int P[5];</code></p>\n\n<p>B is defined as: <code>unsigned long long B;</code></p>\n\n<p>Size of int is 2 bytes.</p>\n"}, {"tags": ["c", "c-strings", "stm8"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536748634, "post_id": 52289756, "comment_id": 91534054, "body": "Please show the definition of <code>cmd1</code> to <code>cmd3</code>"}, {"owner": {"reputation": 1, "user_id": 9850746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Oseihie Eigbobo", "link": "https://stackoverflow.com/users/9850746/oseihie-eigbobo"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536753563, "post_id": 52289756, "comment_id": 91536833, "body": "@PaulOgilvie done. added as attachement. They were defined globally"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536754766, "post_id": 52289756, "comment_id": 91537563, "body": "Note that with your <code>i&lt; sizeof(cmd)</code> in the <code>for</code> loop you will also send the terminating null character. Is that what you want?"}, {"owner": {"reputation": 1, "user_id": 9850746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Oseihie Eigbobo", "link": "https://stackoverflow.com/users/9850746/oseihie-eigbobo"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536755667, "post_id": 52289756, "comment_id": 91538134, "body": "yes that is what i want"}, {"owner": {"reputation": 1, "user_id": 9850746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Oseihie Eigbobo", "link": "https://stackoverflow.com/users/9850746/oseihie-eigbobo"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536755876, "post_id": 52289756, "comment_id": 91538287, "body": "i forgot to add in the explanation of my problem that when i go step by step, there is no problem but when i allow the program to run, then the problem occurs."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1536756302, "post_id": 52289756, "comment_id": 91538582, "body": "So you probably have undefined behaviour somewhere. Also, that code is very poorly formatted."}, {"owner": {"reputation": 1, "user_id": 9850746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Oseihie Eigbobo", "link": "https://stackoverflow.com/users/9850746/oseihie-eigbobo"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1536756560, "post_id": 52289756, "comment_id": 91538774, "body": "@underscore_d   Yes, but i dont know where. I think it has something to do with the UART sending register. It somehow stores what has been sent before and when it gets to a certain length it stops and keeps repeatng what has been sent so far. I tried it with different strings and its the same thing. I guess there is nothing like clearing the register or?                                                                 And yes, am so sorry for the poor indentation."}, {"owner": {"reputation": 165, "user_id": 787742, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b090eebb6353d11dd8d9c9969f9b582a?s=128&d=identicon&r=PG", "display_name": "Dapu", "link": "https://stackoverflow.com/users/787742/dapu"}, "edited": false, "score": 0, "creation_date": 1548611268, "post_id": 52289756, "comment_id": 95593967, "body": "are you calling this function in an Interrupt?"}], "owner": {"reputation": 1, "user_id": 9850746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Oseihie Eigbobo", "link": "https://stackoverflow.com/users/9850746/oseihie-eigbobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536755967, "creation_date": 1536737487, "last_edit_date": 1536755967, "question_id": 52289756, "link": "https://stackoverflow.com/questions/52289756/stm8-uart-transmiission-gets-truncated", "title": "STM8 UART Transmiission gets truncated", "body": "<p>I am using the stm8l151... mcu and I am trying to send different strings via Uart1 to HTerminal. I have three different strings to send. The first two strings are transmitted completely but when the third one is being sent, it is truncated and it starts to send the first and second string again and repeatedly but when i go step by step through the code then it works perfectly fine. But if i allow the code to run, then the problem occurs.</p>\n\n<p>I have attached the output from Hterm (<strong>uart_com</strong>) for better understanding and also some parts of my code(<strong>uart transmit and uart_init</strong>)</p>\n\n<p>Just for better understanding of the attached output, the strings(cmd 1, 2 and 3) are <strong>at+nrb</strong>, <strong>at+cfun=1</strong>, and <strong>at+cops=1,2,\"26201\"</strong></p>\n\n<p>Please, Any suggestion will be greatly appreciated.\ud83d\ude0a</p>\n\n<pre><code>void nbiot_buf_transmit(void){\n\n\n  for(int i=0 ; i &lt; sizeof(cmd1);i++){\n\n\n    USART_SendData8(USART1,((uint8_t)cmd1[i]));\n   while(!(USART1-&gt;SR));\n     while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);\n\n   }\n\n\n   for(int i=0 ; i &lt; sizeof(cmd2);i++){\n\n\n    USART_SendData8(USART1,((uint8_t)cmd2[i]));\n       while(!(USART1-&gt;SR));\n     while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);\n\n     }\n\n\n   for(int i=0 ; i &lt; sizeof(cmd3);i++){\n\n\n    USART_SendData8(USART1,((uint8_t)cmd3[i]));\n        while(!(USART1-&gt;SR));\n     while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);\n\n     }\n\n\n\n\nvoid uart_init(void){\n  /* init Tx and Rx Pins */\n  GPIO_Init(GPIOC, GPIO_Pin_3, GPIO_Mode_Out_PP_High_Fast); //tx pin output\n  GPIO_Init(GPIOC, GPIO_Pin_2, GPIO_Mode_In_FL_No_IT);     //rx pin input\n  /* enable usart1 clk */\n  (CLK-&gt;PCKENR1 |= (uint8_t)((uint8_t)1 &lt;&lt; ((uint8_t)CLK_Peripheral_USART1 &amp; \n (uint8_t)0x0F)));\n  /* config for GPIO mode */\n(CLK-&gt;PCKENR2 |= (uint8_t)((uint8_t)1 &lt;&lt; ((uint8_t)CLK_Peripheral_COMP &amp; \n(uint8_t)0x0F)));  \n(RI-&gt;IOCMR3 &amp;= 0xFD);\n(RI-&gt;IOSR3 &amp;= (uint8_t) (~(uint8_t) ((uint8_t)1 &lt;&lt; (uint8_t) (RI_IOSwitch_6 \n&amp; (uint8_t) 0x0F)))); \n\n(CLK-&gt;PCKENR2 &amp;= (uint8_t)(~(uint8_t)(((uint8_t)1 &lt;&lt; \n((uint8_t)CLK_Peripheral_COMP &amp; (uint8_t)0x0F)))));\n\n  /* init usart peripheral */\n  USART_Init(USART1,\n         (PAL_dwCLK_FREQ_VALUE/9600),\n         USART_WordLength_8b,\n         USART_StopBits_1,\n         USART_Parity_No,\n         USART_Mode_Rx); //Rx enable\n  ITC-&gt;ISPR8 &amp;= 0xFC; // Set USART1_RX_IRQn on ITC_PriorityLevel_2\n  ITC-&gt;ISPR7 &amp;= 0x3F; // Set USART1_TX_IRQn on ITC_PriorityLevel_2\n  /* enable usart1 peripheral */\n USART_Cmd(USART1,ENABLE)\n }\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/t2xnD.jpg\" alt=\"\"></p>\n\n<p><a href=\"https://i.stack.imgur.com/SxYN6.jpg\" rel=\"nofollow noreferrer\">strings definition</a></p>\n"}, {"tags": ["c", "macros"], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1536740529, "post_id": 52290528, "comment_id": 91529012, "body": "To clarify, the key part is <code>BRACIFY INIT</code>, which &quot;gets rid of the parentheses&quot; by passing the entire 2nd argument as a parenthesized list of arguments to the <code>BRACIFY</code> macro."}], "tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": true, "score": 2, "last_activity_date": 1536740117, "creation_date": 1536740117, "answer_id": 52290528, "question_id": 52289708, "link": "https://stackoverflow.com/questions/52289708/number-of-arguments-in-macro/52290528#52290528", "title": "Number of arguments in macro", "body": "<blockquote>I am getting the error: macro \"EXPAND_TO_ENUM\" passed 6 arguments, but takes just 3. The reason is the elements between brackets, the compiler is considering each element into the bracket as a single element Why</blockquote>\n\n<p>Macros are processed by the <em>preprocessor</em>, not the \"language proper\".  A function-like macro invocation recognizes string-boundaries and will match parentheses, but not braces or square brackets... to the preprocessor, <code>[</code>, <code>{</code>, <code>}</code>, and <code>]</code> are just tokens having nothing to do with each other.  (Incidentally, the name for the thing you're writing is an X-macro).</p>\n\n<p>When you invoke <code>MY_MAPPING(something)</code>, assuming that <code>something</code> \"expands\" to a token that's <code>#define</code>'d as a function-like macro, then once this part is evaluated:</p>\n\n<p>&nbsp;&nbsp;<i>ENTRY</i><code>(a, {0x10,0x01,0x01,0x00}, foo)</code></p>\n\n<p>...it will be a macro invocation with six arguments:</p>\n\n<ul>\n<li><code>a</code></li>\n<li><code>{0x10</code></li>\n<li><code>0x01</code></li>\n<li><code>0x01</code></li>\n<li><code>0x00}</code></li>\n<li><code>foo</code></li>\n</ul>\n\n<blockquote>do you have any Idea to solve the problem?</blockquote>\n\n<p>Part 1 of the solution: Use parentheses.  If you use parentheses (the preprocessor <em>does</em> match those):</p>\n\n<p>&nbsp;&nbsp;<i>ENTRY</i><code>(a, (0x10, 0x01, 0x01, 0x00), foo)</code></p>\n\n<p>...then your invocation has three arguments:</p>\n\n<ul>\n<li><code>a</code></li>\n<li><code>(0x10, 0x01, 0x10, 0x00)</code></li>\n<li><code>foo</code></li>\n</ul>\n\n<p>Part 2 is implied:</p>\n\n<blockquote>they are accepting array as input.</blockquote>\n\n<p>...but I can't figure out what you're really saying here, other than that somehow you want that argument 2 to be surrounded by braces.  That you can do easily enough:</p>\n\n<pre><code>#define MY_MAPPING(ENTRY)                               \\\nENTRY(a,                    (0x10,0x01,0x01,0x00), foo) \\\nENTRY(b,                    (0x10,0x01,0x02,0x00), boo)\n#define BRACIFY(...) { __VA_ARGS__ }\n#define MAKE_SOME_INT_ARRAY_THINGY(ID, INIT, X) int ID[] = BRACIFY INIT;\nMY_MAPPING(MAKE_SOME_INT_ARRAY_THINGY)\n</code></pre>\n\n<p>...expands to:</p>\n\n<pre><code>int a[] = { 0x10,0x01,0x01,0x00 }; int b[] = { 0x10,0x01,0x02,0x00 };\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 6644375, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6c70e82e4e69a7ffc24b7e269cbff6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Mouin", "link": "https://stackoverflow.com/users/6644375/mouin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 52290528, "answer_count": 1, "score": 1, "last_activity_date": 1536740117, "creation_date": 1536737331, "question_id": 52289708, "link": "https://stackoverflow.com/questions/52289708/number-of-arguments-in-macro", "title": "Number of arguments in macro", "body": "<p>I am writing a \"mapping macro\" and want to use it to generate enums, classes, function calls ...</p>\n\n<p>This is how the macro looks like:</p>\n\n<pre><code>#define MY_MAPPING(ENTRY)                                   \\\nENTRY(a,                    {0x10,0x01,0x01,0x00}, foo) \\\nENTRY(b,                    {0x10,0x01,0x02,0x00}, boo)\n</code></pre>\n\n<p>Now I am trying to generate an enumeration using the \"mapping macro\"</p>\n\n<pre><code>#define STRCONC(a,b) a##b\n#define EXPAND_TO_ENUM(a,b,c) STRCONC(a,_Idx),\n\ntypedef enum\n{\n    MY_MAPPING(EXPAND_TO_ENUM)\n}example_Enum;\n</code></pre>\n\n<p>I am getting the error: <code>macro \"EXPAND_TO_ENUM\" passed 6 arguments, but takes just 3</code>. \nThe reason is the elements between brackets, the compiler is considering each element into the bracket as a single element Why and do you have any Idea to solve the problem?</p>\n\n<p>Of course using parentheses will solve the problem but I don't want to use them since I need to use the elements between brackets as function arguments after  for <code>foo</code> and <code>boo</code>, they are accepting array as input.</p>\n"}, {"tags": ["c", "scanf", "infinite-loop"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1536735746, "post_id": 52289226, "comment_id": 91526335, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50840130/how-to-loop-scanf-s-until-success\">How to loop scanf_s() until success?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1536735803, "creation_date": 1536735803, "answer_id": 52289285, "question_id": 52289226, "link": "https://stackoverflow.com/questions/52289226/infinite-loop-in-the-guessing-number-program-in-c/52289285#52289285", "title": "infinite loop in the guessing number program in c", "body": "<p>If <code>scanf</code> fails to parse its input according to the specified format, then the input will be left in the input buffer for the next call to <code>scanf</code> which will read the very same input and again fail. And so on and on and on...</p>\n\n<p>The simple solution is to first of all <em>read the whole line</em> of input, using e.g. <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a>. Then you can use <code>sscanf</code> in that (now extracted) input to attempt to parse it.</p>\n\n<hr>\n\n<p>Further complicating your <em>current</em> code is the fact that if <code>scanf</code> fails in some other way, it will return <code>EOF</code> which is the integer <code>-1</code>, which is \"true\". That will of course lead to problems with your logic and looping as well.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 5687321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000840589255/picture?type=large", "display_name": "Luiz Fernando Softov", "link": "https://stackoverflow.com/users/5687321/luiz-fernando-softov"}, "is_accepted": false, "score": 1, "last_activity_date": 1536736590, "last_edit_date": 1536736590, "creation_date": 1536736326, "answer_id": 52289425, "question_id": 52289226, "link": "https://stackoverflow.com/questions/52289226/infinite-loop-in-the-guessing-number-program-in-c/52289425#52289425", "title": "infinite loop in the guessing number program in c", "body": "<p>I see this reply in another post: <a href=\"https://stackoverflow.com/a/1716066/5687321\">https://stackoverflow.com/a/1716066/5687321</a></p>\n\n<p><code>scanf</code> consumes only the input that matches the format string, returning the number of characters consumed. Any character that doesn't match the format string causes it to stop scanning and leaves the invalid character still in the buffer. As others said, you still need to flush the invalid character out of the buffer before you proceed. This is a pretty dirty fix, but it will remove the offending characters from the output.</p>\n\n<pre><code>char c = '0';\nif (scanf(\"%d\", &amp;number) == 0) {\n  printf(\"Err. . .\\n\");\n  do {\n    c = getchar();\n  }\n  while (!isdigit(c));\n  ungetc(c, stdin);\n  //consume non-numeric chars from buffer\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8438038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b9cc353f8e88cb97a22543e50373a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy Da Silva", "link": "https://stackoverflow.com/users/8438038/jimmy-da-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536738482, "creation_date": 1536735604, "last_edit_date": 1536738482, "question_id": 52289226, "link": "https://stackoverflow.com/questions/52289226/infinite-loop-in-the-guessing-number-program-in-c", "title": "infinite loop in the guessing number program in c", "body": "<p>I am fairly new when it comes down to C programmming. That's why i am working my way up by doing some of the easier exercises. The exercise i'm working on is the \"guess the number\" game, where the user must guess the number that lies between two numbers (upper and lower bounds). The program is doing what it must, with one exception: when the user enters a character instead of an integer, the program gets stuck in an infinite loop. The only way to break out of this loop is by using a break statement and restarting the program. What i want instead, is to have the program request for the users input again, untill an integer is entered. </p>\n\n<p>Can someone tell me why the programm gets stuck in this infinite loop and why it is not requesting for input again trough scnanf like it did in the first iteration? your help will be appreciated. thank you.</p>\n\n<pre><code>//globals\nint secret_nr;\nint guess;\nint upper_bound = 100;\nint lower_bound = 1;\nint total_guesses = 1;\n\n\nvoid check_input(void) {\n    if (guess &lt; lower_bound || guess &gt; upper_bound) {\n        printf(\"Invalid input! Your guess must be between %d and %d\\n\", lower_bound, upper_bound);\n    }\n    else if (guess &lt; secret_nr) {\n        printf(\"Higher\\n\");\n        total_guesses++;\n    }\n    else if (guess &gt; secret_nr) {\n        printf(\"Lower\\n\");\n        total_guesses++;\n    }\n    else if (guess == secret_nr) {\n        printf(\"correct! You guessed the number after guessing %d times!\\n\", total_guesses);\n    }\n}\n\n\nint main(int argc, char* argv[]) {\n    srand(time(NULL));\n    secret_nr = (rand() % upper_bound) + 1;\n\n    printf(\"Guess the number between %d and %d:\\n\", lower_bound, upper_bound);\n    do {\n        if (scanf(\"%d\", &amp;guess)) {\n            check_input();\n        }\n        else {\n            printf(\"Invalid input! Only integer values are allowed!\\n\");\n            //break;\n        }\n    } while (guess != secret_nr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536730256, "post_id": 52288053, "comment_id": 91523740, "body": "Check the meaning of <code>&quot;%c&quot;</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1536730382, "post_id": 52288053, "comment_id": 91523782, "body": "Compare to e.g.  <code>&quot;%[^;]&quot;</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536730849, "post_id": 52288053, "comment_id": 91523923, "body": "Do you know that you have several other problems? Does your code compile? Do you get warnings? Strict warnings? Which?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536731991, "post_id": 52288053, "comment_id": 91524363, "body": "Yea should use &quot;%s&quot;"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536732025, "post_id": 52288053, "comment_id": 91524386, "body": "No. That will give you the whole line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536732054, "post_id": 52288053, "comment_id": 91524401, "body": "Yea, wasn&#39;t so sure on how to do it so I haven&#39;t yet compiled the program, but should have."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536732155, "post_id": 52288053, "comment_id": 91524445, "body": "Please study the concept of making a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Compilability is the minimum condition (at least for runtime problems). Do not ask questions before doing some experiments yourself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536732211, "post_id": 52288053, "comment_id": 91524466, "body": "oh my bad. so something like &quot;%s%[^;]&quot; ?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536732283, "post_id": 52288053, "comment_id": 91524504, "body": "Try yourself. Please. And if you find out that it reads all of the line into <code>name</code> then read my comment 4 minutes ago."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "edited": false, "score": 0, "creation_date": 1536731888, "post_id": 52288210, "comment_id": 91524323, "body": "Thanks. So should it be something like this?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "edited": false, "score": 0, "creation_date": 1536731962, "post_id": 52288210, "comment_id": 91524349, "body": "fscanf(fp,&quot;%c %[^;] %f %[^;] %f %[^;] ,&amp;name, &amp;age, &amp;fav_number);"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 2, "last_activity_date": 1536731160, "creation_date": 1536731160, "answer_id": 52288210, "question_id": 52288053, "link": "https://stackoverflow.com/questions/52288053/how-to-use-fscanf-to-read-lines-separated-by-semicolon/52288210#52288210", "title": "How to use fscanf to read lines separated by semicolon", "body": "<p>There are few issues with your code. Firstly its recommended to check the return value of <code>fopen()</code> for e.g this</p>\n\n<pre><code>fp = fopen(in_file,\"r\");\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>fp = fopen(in_file,\"r\");\nif(fp == NULL) {\n   /* error handling @TODO */\n} \n</code></pre>\n\n<p>Secondly, the <code>fscanf()</code> arguments are not correct, surely compiler produces the warnings but seems you ignored them.  This </p>\n\n<pre><code>while(fscanf(fp,\"%c %f %f\", &amp;name, &amp;age, &amp;fav_number) != EOF) { /* read the name from file &amp; store into name i.e it should be &amp;name if name is char variable */\n      fscanf(fp,\"%c %f %f\", &amp;name, &amp;age, &amp;fav_number);\n      sum += age;\n}\n</code></pre>\n\n<p>lastly if you want to read the lines separated by semicolon then use <code>%[^;]</code> or use <code>strtok()</code>. Or it's better to read whole line first using <code>fgets()</code> and then use <code>strtok()</code>. To know how <code>strtok()</code> works read the manual page <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\">strtok</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1536738656, "last_edit_date": 1536738656, "creation_date": 1536738137, "answer_id": 52289936, "question_id": 52288053, "link": "https://stackoverflow.com/questions/52288053/how-to-use-fscanf-to-read-lines-separated-by-semicolon/52289936#52289936", "title": "How to use fscanf to read lines separated by semicolon", "body": "<p>There are many issues in your code:</p>\n\n<ul>\n<li><code>File</code> should be <code>FILE</code></li>\n<li>you should test the return value of <code>fopen()</code></li>\n<li>the format string for <code>fscanf()</code> is incorrect: <code>%c</code> reads just one character, <code>%f</code> requires a pointer to <code>float</code> and you instead provide an <code>int</code> value...</li>\n<li>you should compare the return value of <code>fscanf()</code> to the number of expected conversions (<code>3</code> in your code), not <code>EOF</code> which is only returned at end of file if no conversions were performed. </li>\n<li>you call <code>fscanf()</code> twice.</li>\n</ul>\n\n<p>Since you are not interested in the <code>Name</code> and <code>Favorite colour</code> fields, you can just ignore them:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char in_file[] = \"test.csv\";\n    FILE *fp;\n    fp = fopen(in_file, \"r\");\n    if (fp != NULL) {\n        double sum = 0, age = 0;\n        while (fscanf(fp,\" %*[^;];%lf;%*lf\", &amp;age) == 1) {\n            sum += age;\n        }\n        fclose(fp);\n        printf(\"total of ages: %g\\n\", sum);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note however that it would be more reliable to read the input file one line at a time and parse it with <code>sscanf()</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char buf[256];\n    char in_file[] = \"test.csv\";\n    double sum = 0, age = 0;\n    FILE *fp;\n\n    fp = fopen(in_file, \"r\");\n    if (fp == NULL) {\n        fprintf(stderr, \"cannot open input file %s\\n\", in_file);\n        exit(1);\n    }\n    while (fgets(buf, sizeof buf, fp)) {\n        if (sscanf(buf,\"%*[^;];%lf;%*lf\", &amp;age) == 1) {\n            sum += age;\n        } else {\n            fprintf(stderr, \"invalid data: %s\\n\", buf);\n            fclose(fp);\n            exit(1);\n        }\n    }\n    fclose(fp);\n    printf(\"total of ages: %g\\n\", sum);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10350852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "closed_date": 1536772965, "answer_count": 2, "score": 0, "last_activity_date": 1536738656, "creation_date": 1536730199, "last_edit_date": 1536737880, "question_id": 52288053, "link": "https://stackoverflow.com/questions/52288053/how-to-use-fscanf-to-read-lines-separated-by-semicolon", "closed_reason": "Duplicate", "title": "How to use fscanf to read lines separated by semicolon", "body": "<p>For example, I am trying to get the total age from a text file separated by semicolons with the format of <code>Name;Age;Favorite Number</code></p>\n\n<pre><code>Jack;12;3\nRed;21;15\nBlue;14;6\n</code></pre>\n\n<p>I have tried doing something like this.</p>\n\n<pre><code>File *fp;\nfp = fopen(in_file,\"r\");\nint sum = 0, age = 0, fav_number = 0;\nwhile (fscanf(fp,\"%c %f %f\", name, age, fav_number) != EOF) {\n    fscanf(fp, \"%c %f %f\", name, age, fav_number);\n    sum += age;\n}\n</code></pre>\n\n<p>But since it is not separated with space by with semicolon, it wouldn't work. I am not sure how to change it. Any clue on how to do it?</p>\n"}, {"tags": ["c", "for-loop", "struct", "linked-list"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536727106, "post_id": 52287548, "comment_id": 91522883, "body": "Yes. What is your problem? What makes you doubt your interpretation?"}, {"owner": {"reputation": 6924, "user_id": 835629, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b38fa6792bcb51a7fe773b5f942c66c2?s=128&d=identicon&r=PG", "display_name": "coyotte508", "link": "https://stackoverflow.com/users/835629/coyotte508"}, "edited": false, "score": 1, "creation_date": 1536727124, "post_id": 52287548, "comment_id": 91522894, "body": "Yes... The second argument of the for is confusing, something like <code>a != NULL</code> would fit better"}, {"owner": {"reputation": 123, "user_id": 4983615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGqTu.jpg?s=128&g=1", "display_name": "maximusg", "link": "https://stackoverflow.com/users/4983615/maximusg"}, "edited": false, "score": 0, "creation_date": 1536727222, "post_id": 52287548, "comment_id": 91522915, "body": "Awesome thanks guys. This was hanging me up becuase it was in some code, and I couldn&#39;t figure out why it would terminate. I wasn&#39;t sure if C terminated the for loop where the middle statement is &quot;0&quot;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536727412, "post_id": 52287548, "comment_id": 91522955, "body": "In C, <code>0</code> is false, any other value is true. The loop repeats as long as the test is true."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1536727917, "last_edit_date": 1536727917, "creation_date": 1536727443, "answer_id": 52287620, "question_id": 52287548, "link": "https://stackoverflow.com/questions/52287548/c-programming-linked-list-for-loop/52287620#52287620", "title": "C programming Linked list for loop", "body": "<p>The documentation of <a href=\"https://en.cppreference.com/w/c/language/for\" rel=\"nofollow noreferrer\">for</a> will help you:  </p>\n\n<blockquote>\n<pre><code>for ( init_clause ; cond_expression ; iteration_expression ) loop_statement \n</code></pre>\n  \n  <p>Explanation<br>\n  Behaves as follows:<br>\n  ...\n  <strong>cond_expression is evaluated before the loop body. If the result of the expression is zero, the loop statement is exited immediately.</strong>   </p>\n</blockquote>\n\n<p>In your case, the <code>cond_expression</code> is just <code>a</code> and when <code>a</code> is zero (or NULL in case of pointer), the loop exits.</p>\n"}, {"tags": [], "owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "is_accepted": false, "score": 4, "last_activity_date": 1536945267, "last_edit_date": 1536945267, "creation_date": 1536727603, "answer_id": 52287640, "question_id": 52287548, "link": "https://stackoverflow.com/questions/52287548/c-programming-linked-list-for-loop/52287640#52287640", "title": "C programming Linked list for loop", "body": "<p>The <code>for</code> loop is for traversing from the first node to the last node (until) it finds <code>NULL</code> (its for traversing the entire Linked List)..</p>\n\n<p>The first parameter: <code>a = (apple *) list_begin(&amp;apples)</code> puts <code>a</code> at the beginning of that list.</p>\n\n<p>The second parameter: <code>a</code> is a condition and it gets violated on reaching one past the last node as it will be <code>NULL</code>.</p>\n\n<p>The thirst parameter: <code>a = (apple *) list_next(&amp;a-&gt;header)</code> is for traversing down the list.</p>\n"}], "owner": {"reputation": 123, "user_id": 4983615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GGqTu.jpg?s=128&g=1", "display_name": "maximusg", "link": "https://stackoverflow.com/users/4983615/maximusg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 52287620, "answer_count": 2, "score": 1, "last_activity_date": 1536945267, "creation_date": 1536726864, "question_id": 52287548, "link": "https://stackoverflow.com/questions/52287548/c-programming-linked-list-for-loop", "title": "C programming Linked list for loop", "body": "<p>Given the standard linked list where \"apples\" is the list with (->first and ->last properties), and an \"apple\" is an element of that list with a (->next property). How does this for loop work?</p>\n\n<pre><code>typedef struct\n{\n    list_element header;\n    int value;\n\n} apple;\n\nint main()\n{\n    list apples;\n    apple * a = (apple *) malloc(sizeof(apple));\n    apple * b = (apple *) malloc(sizeof(apple));\n    apple * c = (apple *) malloc(sizeof(apple));\n\n    a-&gt;value = 1;\n    b-&gt;value = 2;\n    c-&gt;value = 3;\n\n    list_init(&amp;apples);\n\n    list_push_back(&amp;apples, &amp;a-&gt;header);\n    list_push_back(&amp;apples, &amp;b-&gt;header);\n    list_push_back(&amp;apples, &amp;c-&gt;header);\n</code></pre>\n\n<blockquote>\n<pre><code>    for (a = (apple *) list_begin(&amp;apples); a; a = (apple *) list_next(&amp;a-&gt;header))\n    {\n        printf(\"%d\\n\", a-&gt;value);\n    }\n</code></pre>\n</blockquote>\n\n<p>How does this for loop work?? The list_begin function just returns the ->first of apples. The ;a; as the conditional statement is saying if not 0 then continue the for loop? and the last part is pointing a to its next element in the loop. So when the last value of the loop is a=0 is that what would terminate the for loop?</p>\n\n<p>Does that make sense?</p>\n"}, {"tags": ["c", "linux", "fpga", "adc"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5442914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9655dd465128483d18f22670e0d2d170?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pavlovsky", "link": "https://stackoverflow.com/users/5442914/daniel-pavlovsky"}, "edited": false, "score": 0, "creation_date": 1536760260, "post_id": 52289776, "comment_id": 91541462, "body": "Hello SKi. I followed your last suggestion on changing both the offsets and the type to uint32_t, but getting similar behavior expect now channels 0 and 1 give me a 1, while the other channels are giving nothing."}, {"owner": {"reputation": 71, "user_id": 5442914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9655dd465128483d18f22670e0d2d170?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pavlovsky", "link": "https://stackoverflow.com/users/5442914/daniel-pavlovsky"}, "edited": false, "score": 0, "creation_date": 1536766360, "post_id": 52289776, "comment_id": 91545331, "body": "I think that my problem is actually the /dev/mem because the AD7928 is onboard through the SPI interface, but when I go to my /dev/ folder there is no spidev0.0 or anything like that. I guess the kernel wasn&#39;t compiled with SPI support. I githubbed the linux-socfpga kernel and am recompiling with some added instruction found here: <a href=\"https://wiki.analog.com/resources/tools-software/linux-drivers/iio-adc/ad7298\" rel=\"nofollow noreferrer\">wiki.analog.com/resources/tools-software/linux-drivers/iio-a&zwnj;&#8203;dc/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1536738738, "last_edit_date": 1536738738, "creation_date": 1536737547, "answer_id": 52289776, "question_id": 52287529, "link": "https://stackoverflow.com/questions/52287529/fpga-analog-to-digital-conversion-de1-soc/52289776#52289776", "title": "FPGA Analog-to-Digital Conversion DE1-SOC", "body": "<p>I bet that your problem is in the following lines:</p>\n\n<pre><code>&gt; volatile int *h2p_lw_adc_addr;\n&gt; \n&gt; *(int *)(h2p_lw_adc_addr + 4) = 1;\n&gt; \n&gt; samples[i] = *(int *)(h2p_lw_adc_addr + channel);\n</code></pre>\n\n<p>Because <code>h2p_lw_adc_addr</code> is pointer to <code>int</code>, you will get wrong addresses from the later two lines.</p>\n\n<p>When you add number N to the <code>int</code> pointer, the result pointer is <code>N * sizeof(int)</code> bigger than the <code>int</code> pointer.</p>\n\n<p>Change the type of <code>h2p_lw_adc_addr</code> to <code>char</code> pointer to get quick fix:</p>\n\n<pre><code>volatile char *h2p_lw_adc_addr;\n</code></pre>\n\n<p>Or <em>alternatively</em>, you can change the offsets:</p>\n\n<pre><code> *(int *)(h2p_lw_adc_addr + 1) = 1;\n int channel = 4; // channel 4\n</code></pre>\n\n<p>But in that case I propose to use <code>int32_t</code> or <code>uint32_t</code> instead on <code>int</code>:</p>\n"}], "owner": {"reputation": 71, "user_id": 5442914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9655dd465128483d18f22670e0d2d170?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pavlovsky", "link": "https://stackoverflow.com/users/5442914/daniel-pavlovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536738738, "creation_date": 1536726684, "last_edit_date": 1536729682, "question_id": 52287529, "link": "https://stackoverflow.com/questions/52287529/fpga-analog-to-digital-conversion-de1-soc", "title": "FPGA Analog-to-Digital Conversion DE1-SOC", "body": "<p>I have a DE1-SOC(Rev. C) running Linux. I am having problems accessing the onboard ADC. The input to all 8 channels is a 3V Pk-Pk sinusoidal signal. The onboard ADC is an AD7928 12-bit 8-channel ADC. The datasheet says that the ADC can handle bipolar signals, and gives the following circuit diagram:</p>\n\n<p><a href=\"https://i.stack.imgur.com/c9FGt.png\" rel=\"nofollow noreferrer\">AD7928 Bipolar Circuit Diagram</a></p>\n\n<p>All eight channels need to be sampled continually. and the DE1-SOC datasheet specifies to set the channel one register to 1, which activates the automatic update option on the ADC. Here's my first attempt at the code. It compiles and runs but the values aren't correct, as the same signal that's being fed into the ADC is also being measured by my oscilloscope.</p>\n\n<pre><code>#include &lt;inttypes.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;sys/mman.h&gt;\n\n/* FPGA HPS BRIDGE BASE */\n#define LW_BRIDGE_BASE (0xFF200000)\n#define HW_REGS_BASE   (0xFF200000)\n#define HW_REGS_SPAN   (0x00200000)\n#define HW_REGS_MASK  ( HW_REGS_SPAN - 1 )\n\n/* HPS-2-FPGA AXI Bridge */\n#define ALT_AXI_FPGASLVS_OFST (0xC0000000) // axi_master\n#define HW_FPGA_AXI_SPAN      (0x40000000) // Bridge span 1GB\n#define HW_FPGA_AXI_MASK     ( HW_FPGA_AXI_SPAN - 1 )\n\n/* ADC REGISTER SPAN */\n#define ADC_BASE (0x00004000)\n\n/* ADC CHANNEL &amp; UPDATE REGISTERS */\n#define ADC_CH0_UPDATE      (LW_BRIDGE_BASE+ADC_BASE)\n#define ADC_CH1_AUTO_UPDATE (LW_BRIDGE_BASE+ADC_BASE+4) // Write 1 for continual ADC request\n#define ADC_CH2             (LW_BRIDGE_BASE+ADC_BASE+8)\n#define ADC_CH3             (LW_BRIDGE_BASE+ADC_BASE+12)\n#define ADC_CH4             (LW_BRIDGE_BASE+ADC_BASE+16)\n#define ADC_CH5             (LW_BRIDGE_BASE+ADC_BASE+20)\n#define ADC_CH6             (LW_BRIDGE_BASE+ADC_BASE+24)\n#define ADC_CH7             (LW_BRIDGE_BASE+ADC_BASE+28)\n\n/* ADC REGISTER END */\n#define ADC_END (0x0000001F)\n\nint main() {\n\n// Defining variables\nvoid *virtual_base;\nint fd;\nvolatile int *h2p_lw_adc_addr;\nint i;\n\n//Defining pointer for register\n    if((fd = open( \"/dev/mem\",(O_RDWR | O_SYNC ))) == -1) {\n        printf(\"ERROR: could not open \\\"/dev/mem\\\"...\\n\");\n        return(1);\n    }\n\n    virtual_base = mmap(NULL,HW_REGS_SPAN,(PROT_READ | PROT_WRITE),MAP_SHARED,fd,HW_REGS_BASE);\n    if(virtual_base == MAP_FAILED) {\n        printf(\"ERROR: mmap() failed...\\n\");\n        close(fd);\n        return(1);\n    }\n\n    h2p_lw_adc_addr = virtual_base + ((int)(LW_BRIDGE_BASE + ADC_BASE)&amp;(int)(HW_REGS_MASK));\n\n    float Vref = 5.0;\n    float stepSize = Vref/4096.0;\n\n    /* Heading &amp; Calculating Step Size/Resolution */\n    printf(\"*____________________________________*\\n\");\n    printf(\"*     Setting up the AD7928 ADC      *\\n\");\n    printf(\"*____________________________________*\\n\");\n    printf(\"Resolution for 5V  Vref: %f[mV]\\n\", stepSize*1000);\n\n    // Setting up the ADC for bipolar signal\n    // ...\n\n    // Auto-update all channels continuously\n    *(int *)(h2p_lw_adc_addr + 4) = 1;\n\n    // Sample a single channel\n    // ...\n\n    /* Data Collection Attempt #1 */\n    int num = 5; // Number of samples?\n    unsigned int samples[num];\n\n    int channel = 16; // channel 4\n    for (i = 0; i &lt; num; i++){\n        samples[i] = *(int *)(h2p_lw_adc_addr + channel);\n    }\n\n    if(munmap(virtual_base, HW_REGS_SPAN) != 0) {\n        printf(\"ERROR: munmap() failed...\\n\");\n        close(fd);\n        return(1);\n    }\nclose(fd);\nreturn 0;\n}\n</code></pre>\n\n<p>It gets cross-compiled using this Makefile:</p>\n\n<pre><code>C_SRC := adc.c\nCFLAGS := -g -O0 -Wall\nLDFLAGS := -lm\n\nCROSS_COMPILE := arm-linux-gnueabihf-\nCC := $(CROSS_COMPILE)gcc\nNM := $(CROSS_COMPILE)nm\n\nifeq ($(or $(COMSPEC),$(ComSpec)),)\nRM := rm -rf\nelse\nRM := cs-rm -rf\nendif\n\nELF ?= adc\nOBJ := $(patsubst %.c,%.o,$(C_SRC))\n\n.c.o:\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n\n.PHONY: all\nall: $(ELF)\n\n.PHONY:\nclean:\n    $(RM) $(ELF) $(OBJ) $(OBJS) *.map *.objdump\n\n$(ELF): $(OBJ) $(OBJS)\n    $(CC) $(CFLAGS) $(OBJ) $(OBJS) -o $@ $(LDFLAGS)\n    $(NM) $@ &gt; $@.map\n</code></pre>\n\n<p>I'm a noobie when it comes to ADCs and DSP, but ideally, I would like to be able to continually measure all eight channels, recording the pk-pk (amplitude) of the incoming sine waves in each one, which will eventually be used for post-processing. </p>\n\n<p>As of right now, the output for the five samples is always 0, except when I sample channel 1, then all five samples are 1, like so:</p>\n\n<pre><code>Samples [0]: 1\nSamples [1]: 1\nSamples [2]: 1\nSamples [3]: 1\nSamples [4]: 1\n</code></pre>\n\n<p>Even when I increase the number of samples, it's always 1 for Channel 1 and 0 for all the other channels.</p>\n\n<p>I think my problem is probably a combination of my code and also maybe not having the buffering circuitry? (But I'm not handling the bipolar input only because I can set the DC offset on my signal generator so it's an all positive 3v pk-pk.)</p>\n\n<p>Vref on the ADC is being fed an even 5V DC. I'm pretty lost right now, so any help or pointers would be greatly appreciated. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 8, "creation_date": 1536725206, "post_id": 52287331, "comment_id": 91522431, "body": "You need a null terminator as well as some characters to record a name, but you can&#39;t fit all those in a single <code>char</code>.  You need an array: <code>char name[32];</code> or similar (and should use <code>%31s</code> in the format to avoid overflows).  Also, with an array, you&#39;ll use just <code>name</code> (and not <code>&amp;name</code>) in the call to <code>scanf()</code>.  And you should check that <code>scanf()</code> succeeded: <code>if (scanf(&quot;%31s&quot;, name) == 1) printf(&quot;Your name is %s\\n&quot;);</code> \u2014 adding a newline too."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536896539, "post_id": 52287331, "comment_id": 91596307, "body": "regarding: <code>char name;</code>  this only allows the name to be a max of 1 character long.  Suggest something similar to: <code>char name[ 100 ];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1536725527, "post_id": 52287375, "comment_id": 91522520, "body": "It is mandatory to omit the <code>&amp;</code> \u2014 if you include it, you pass a <code>char (*)[15]</code> to a function that is expecting a <code>char *</code>.  The types are quite different, though the values of the pointers happen to be the same.  A good compiler will warn you about the type mismatch."}, {"owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536725605, "post_id": 52287375, "comment_id": 91522542, "body": "Thanks for the info Jonathan. Just knew that it works even with the ampersand. Thanks for letting me know about this."}], "tags": [], "owner": {"reputation": 2191, "user_id": 10232790, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ffWFm9uJgO4/AAAAAAAAAAI/AAAAAAAABjI/hXd8V3yjdoE/photo.jpg?sz=128", "display_name": "Harshith Rai", "link": "https://stackoverflow.com/users/10232790/harshith-rai"}, "is_accepted": true, "score": 1, "last_activity_date": 1536725795, "last_edit_date": 1536725795, "creation_date": 1536725391, "answer_id": 52287375, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input/52287375#52287375", "title": "Asking for Name and Displaying input", "body": "<p>A very small mistake @Jackie_Legs. In the declaration of the variable <code>name</code>, You have declared it as a <code>char</code>. so it holds just one character. </p>\n\n<p>The solution: choose an arbitrary size for your name, say 10 or 15 characters. and declare it as an array of the size.</p>\n\n<pre><code>char name[15];\n</code></pre>\n\n<p>No changes in any other part of the program. Also, you should omit the <code>&amp;</code> symbol in the <code>scanf</code> for strings.</p>\n\n<p>So just one change and your code should work.</p>\n\n<p>Here is the updated code which would work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  char name[15];\n\n  printf(\"Let's do this, please enter your name:\");\n  scanf(\"%s\", name);\n  printf(\"Your name is %s\\n\", name);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 2845970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee48e0b779fdb8d7a3e97188906b683?s=128&d=identicon&r=PG&f=1", "display_name": "chetan kankotiya", "link": "https://stackoverflow.com/users/2845970/chetan-kankotiya"}, "is_accepted": false, "score": 1, "last_activity_date": 1536725870, "last_edit_date": 1536725870, "creation_date": 1536725517, "answer_id": 52287384, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input/52287384#52287384", "title": "Asking for Name and Displaying input", "body": "<p>It is because your name variable can only store single character and you are trying to store more than one character which will lead to unpredictable behaviour of program (e.g. segmentation fault).</p>\n\n<p>If you know max length of name, declare variable name as array of character such as</p>\n\n<pre><code>char name[20]; \n</code></pre>\n\n<p>Here you can store name with max length of 19 character. You can decide length of array as per your requirement.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536725621, "post_id": 52287389, "comment_id": 91522545, "body": "You need to omit the <code>&amp;</code> from before <code>name</code> in the call to <code>scanf()</code>.  For details, see another <a href=\"https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input#comment91522520_52287375\">comment</a> of mine."}], "tags": [], "owner": {"reputation": 1065, "user_id": 6720576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4iFs.jpg?s=128&g=1", "display_name": "AsthaUndefined", "link": "https://stackoverflow.com/users/6720576/asthaundefined"}, "is_accepted": false, "score": 0, "last_activity_date": 1536725644, "last_edit_date": 1536725644, "creation_date": 1536725556, "answer_id": 52287389, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input/52287389#52287389", "title": "Asking for Name and Displaying input", "body": "<p>It is throwing error because of <code>char name;</code> <strong>char</strong> data type in C contain 1 character only in a variable. But your input is a string. \nYou need to change the declaration of the variable from char to char array.</p>\n\n<pre><code>char name[50];\n printf(\"Let's do this, please enter your name:\");\n scanf(\"%s\", name);\n printf(\"Your name is %s\", name);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1536725563, "creation_date": 1536725563, "answer_id": 52287391, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input/52287391#52287391", "title": "Asking for Name and Displaying input", "body": "<p><code>name</code> is declared as <code>char</code>, which means it can contain only one character. It is not sufficient to contain a string of characters (which a name usually consists of). You need to declare a <code>char</code> array (an array of characters). </p>\n\n<p>The size of the array should be at least 1 more than the largest name you want to read in.\nThe extra byte is to contain the null terminating character <code>'\\0'</code>.</p>\n\n<pre><code>char name[SizeOfLargestName + 1];\n</code></pre>\n\n<p>And when you use <code>scanf</code>, you need not use <code>&amp;</code> because now name points to the first byte of the array.  </p>\n\n<pre><code> scanf(\"%s\", name);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536726282, "post_id": 52287462, "comment_id": 91522702, "body": "You need to omit the &amp; from before name in the call to scanf(). For details, see another <a href=\"https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input#comment91522520_52287375\">comment</a> of mine."}, {"owner": {"reputation": 3617, "user_id": 6243553, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4jGJ2.jpg?s=128&g=1", "display_name": "HarshitMadhav", "link": "https://stackoverflow.com/users/6243553/harshitmadhav"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536728217, "post_id": 52287462, "comment_id": 91523177, "body": "@JonathanLeffler thanks for this info I thought that in both ways they mean the same thing."}], "tags": [], "owner": {"reputation": 3617, "user_id": 6243553, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4jGJ2.jpg?s=128&g=1", "display_name": "HarshitMadhav", "link": "https://stackoverflow.com/users/6243553/harshitmadhav"}, "is_accepted": false, "score": 1, "last_activity_date": 1536726375, "last_edit_date": 1536726375, "creation_date": 1536726093, "answer_id": 52287462, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input/52287462#52287462", "title": "Asking for Name and Displaying input", "body": "<p>You need to declare a string as because a single letter is stored in char and multiple characters along with a null character at the end forms an String which can be anything like names, etc.</p>\n\n<p>In your code you have taken char which stores only a single character but in order to store your name (which is a string) you will have to take char array along with the size of the array.</p>\n\n<p>Replace <code>char</code> <strong>with</strong> <code>char[size]</code> where size is the size for the string that you need.</p>\n\n<p>Here are the changes I made to your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  char name[30];\n\n printf(\"Let's do this, please enter your name:\");\n scanf(\"%s\", name);\n printf(\"Your name is %s\", name);\n\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10350900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf2b9977e0b7ca6e52c6533c1e900c6?s=128&d=identicon&r=PG&f=1", "display_name": "j.beach", "link": "https://stackoverflow.com/users/10350900/j-beach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52287375, "answer_count": 5, "score": 1, "last_activity_date": 1536726375, "creation_date": 1536725040, "last_edit_date": 1536725263, "question_id": 52287331, "link": "https://stackoverflow.com/questions/52287331/asking-for-name-and-displaying-input", "title": "Asking for Name and Displaying input", "body": "<p>I relatively new to the C language and StackOverflow. I'm trying to write a simple C code that will prompt user for their name and then display it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n  char name;\n\n printf(\"Let's do this, please enter your name:\");\n scanf(\"%s\", &amp;name);\n printf(\"Your name is %s\", name);\n\n return 0;\n}\n</code></pre>\n\n<p>The code complies but after inputting the name, it displays Segmentation fault (core dumped).</p>\n\n<p>Thank you for any help.</p>\n"}, {"tags": ["c++", "c", "openocd", "stm32f7"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 1, "creation_date": 1536732852, "post_id": 52287140, "comment_id": 91524759, "body": "Is it C, or C++?"}, {"owner": {"reputation": 11, "user_id": 5569860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dda77a5a7364bfe08090155a59a70c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh-Dev", "link": "https://stackoverflow.com/users/5569860/dinesh-dev"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1536756744, "post_id": 52287140, "comment_id": 91538936, "body": "The code is the blinky template in C"}], "owner": {"reputation": 11, "user_id": 5569860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dda77a5a7364bfe08090155a59a70c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh-Dev", "link": "https://stackoverflow.com/users/5569860/dinesh-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1536723855, "creation_date": 1536723436, "last_edit_date": 1536723855, "question_id": 52287140, "link": "https://stackoverflow.com/questions/52287140/stm32f767zit6-nucleo-openocd-flash", "title": "STM32F767ZIT6 Nucleo openocd flash", "body": "<p>STM32F767ZIT6 Nucleo board and trying to flash it with blinky code from templates</p>\n\n<ul>\n<li>have populated all the CMSIS and required drivers.</li>\n<li>Installed GNU MCU eclipse plugin.</li>\n<li>Built the code</li>\n<li>Configured openOCD</li>\n<li>When trying to debug the code its returns these errors</li>\n</ul>\n\n<pre>\nGNU MCU Eclipse 64-bits Open On-Chip Debugger 0.10.0+dev-00254-g2ec04e4e (2017-11-10-11:34)\nLicensed under GNU GPL v2\nFor bug reports, read\n    http://openocd.org/doc/doxygen/bugs.html\nInfo : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWD\nadapter speed: 2000 kHz\nadapter_nsrst_delay: 100\nsrst_only separate srst_nogate srst_open_drain connect_deassert_srst\nsrst_only separate srst_nogate srst_open_drain connect_deassert_srst\nInfo : Listening on port 6666 for tcl connections\nInfo : Listening on port 4444 for telnet connections\nInfo : Unable to match requested speed 2000 kHz, using 1800 kHz\nInfo : Unable to match requested speed 2000 kHz, using 1800 kHz\nInfo : clock speed 1800 kHz\nInfo : STLINK v2 JTAG v29 API v2 SWIM v18 VID 0x0483 PID 0x374B\nInfo : using stlink api v2\nInfo : Target voltage: 3.243922\nInfo : stm32f7x.cpu: hardware has 8 breakpoints, 4 watchpoints\nInfo : Listening on port 3333 for gdb connections\nInfo : accepting 'gdb' connection on tcp/3333\nInfo : device id = 0x10016451\nInfo : flash size = 2048kbytes\nInfo : Single Bank 2048 kiB STM32F76x/77x found\ntarget halted due to debug-request, current mode: Thread \nxPSR: 0x01000000 pc: 0xfffffffe msp: 0xfffffffc\nsemihosting is enabled\ntarget halted due to debug-request, current mode: Thread \nxPSR: 0x01000000 pc: 0xfffffffe msp: 0xfffffffc, semihosting\nInfo : Padding image section 0 with 4 bytes\nInfo : Padding image section 1 with 1 bytes\ntarget halted due to breakpoint, current mode: Thread \nxPSR: 0x61000000 pc: 0x20000046 msp: 0xfffffffc, semihosting\ntarget halted due to debug-request, current mode: Thread \nxPSR: 00000000 pc: 0xf924f000 msp: 0xb083b500, semihosting\ntarget halted due to debug-request, current mode: Thread \nxPSR: 00000000 pc: 0xf924f000 msp: 0xb083b500, semihosting\n===== arm v7m registers\n(0) r0 (/32): 0x00000000\n(1) r1 (/32): 0x00000000\n(2) r2 (/32): 0x00000000\n(3) r3 (/32): 0x00000000\n(4) r4 (/32): 0x00000000\n(5) r5 (/32): 0x00000000\n(6) r6 (/32): 0x00000000\n(7) r7 (/32): 0x00000000\n(8) r8 (/32): 0x00000000\n(9) r9 (/32): 0x00000000\n(10) r10 (/32): 0x00000000\n(11) r11 (/32): 0x00000000\n(12) r12 (/32): 0x00000000\n(13) sp (/32): 0xB083B500\n(14) lr (/32): 0xFFFFFFFF\n(15) pc (/32): 0xF924F000\n(16) xPSR (/32): 0x00000000\n(17) msp (/32): 0xB083B500\n(18) psp (/32): 0x00000000\n(19) primask (/1): 0x00\n(20) basepri (/8): 0x00\n(21) faultmask (/1): 0x00\n(22) control (/2): 0x00\n(23) d0 (/64): 0x0000000000000000\n(24) d1 (/64): 0x0000000000000000\n(25) d2 (/64): 0x0000000000000000\n(26) d3 (/64): 0x0000000000000000\n(27) d4 (/64): 0x0000000000000000\n(28) d5 (/64): 0x0000000000000000\n(29) d6 (/64): 0x0000000000000000\n(30) d7 (/64): 0xFFFFFFFF00000000\n(31) d8 (/64): 0x0000000000000000\n(32) d9 (/64): 0x0000000000000000\n(33) d10 (/64): 0x0000000000000000\n(34) d11 (/64): 0x0000000000000000\n(35) d12 (/64): 0x0000000000000000\n(36) d13 (/64): 0x0000000000000000\n(37) d14 (/64): 0x0000000000000000\n(38) d15 (/64): 0xFFFFFFFF00000000\n(39) fpscr (/32): 0x00000000\n===== Cortex-M DWT registers\n(40) dwt_ctrl (/32)\n(41) dwt_cyccnt (/32)\n(42) dwt_0_comp (/32)\n(43) dwt_0_mask (/4)\n(44) dwt_0_function (/32)\n(45) dwt_1_comp (/32)\n(46) dwt_1_mask (/4)\n(47) dwt_1_function (/32)\n(48) dwt_2_comp (/32)\n(49) dwt_2_mask (/4)\n(50) dwt_2_function (/32)\n(51) dwt_3_comp (/32)\n(52) dwt_3_mask (/4)\n(53) dwt_3_function (/32)\n\n\nmem.ld  is as below\nMEMORY\n\n    {\n      FLASH (rx) : ORIGIN = 0x08000000, LENGTH = 2048K\n      RAM (xrw) : ORIGIN = 0x20000000, LENGTH = 512K\n    }\n</pre>\n\n<p>I am guessing it could be something to do with the memory map. Can't figure it out.\n<a href=\"https://www.st.com/en/microcontrollers/stm32f767zi.html\" rel=\"nofollow noreferrer\">https://www.st.com/en/microcontrollers/stm32f767zi.html</a></p>\n\n<p>*****Real newbie at this****(\n- ( I am using Windows and eclipse Photon)</p>\n"}, {"tags": ["c++", "c", "c++11", "winapi", "visual-c++"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1536723558, "post_id": 52287016, "comment_id": 91522087, "body": "&quot;A pointer to the memory address in the calling process address space where mapping begins. <b>This must be a multiple of the system&#39;s memory allocation granularity</b>, or the function fails.&quot;"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1536724804, "post_id": 52287016, "comment_id": 91522342, "body": "This won&#39;t work because you can&#39;t force Windows to map the file at any arbitrary address you choose.  But this is starting to sound like an X-Y problem.  Why do you want to do this?"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1536724982, "post_id": 52287016, "comment_id": 91522396, "body": "My reason for wanting to do this is so that I can allocate non-contiguous chunks of a file to an array of some data structure and then just use array indexing to write to the array and have it persist to the file."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1536725137, "post_id": 52287016, "comment_id": 91522417, "body": "Ok.  But why?  Why can&#39;t you allocate the array and then use <code>WriteFile</code> and <code>ReadFile</code> to save and load it?"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1536726205, "post_id": 52287016, "comment_id": 91522679, "body": "I was looking at how SQLite&#39;s file is formatted.  It appears to be in pages (chunks in my terminology).  I was trying to figure out how to work like that and use memory mapped files.  The biggest difference is me wanting to have an array or such cross chunk boundaries."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1536726220, "post_id": 52287016, "comment_id": 91522682, "body": "@Graznarak what about using a wrapper class that has an overriden <code>operator[]</code> to access the appropriate block? You don&#39;t need to allocate sequential memory to use sequential indexing."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1536726306, "post_id": 52287016, "comment_id": 91522707, "body": "@RemyLebeau you are right.  My reason for wanting them to be sequential is that my expected access/processing pattern is linear, and having them sequential in the address space should have some slight improvement to cache performance...I think."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 1, "creation_date": 1536727428, "post_id": 52287016, "comment_id": 91522958, "body": "Note that the allocation granularity mentioned by Peter Ruderman is why sql server grows its files in 64kb chunks (that is the granularity on x86 and x64 systems, I don&#39;t know about others), sql server allocates 64kb at a time and uses that in 8kb extents."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1536727832, "post_id": 52287016, "comment_id": 91523066, "body": "SQLite&#39;s site indicates that pages are sized to powers of 2 between 0.5kiB and 64kiB."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1536730019, "post_id": 52287016, "comment_id": 91523666, "body": "It sure is a shame that Microsoft doesn&#39;t let you map over an address reserved (not committed) with VirtualAlloc."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1536754749, "post_id": 52287016, "comment_id": 91537547, "body": "@immibis: Of course that&#39;s possible. See <a href=\"https://docs.microsoft.com/en-us/windows/desktop/memory/address-windowing-extensions\" rel=\"nofollow noreferrer\">Address Windowing Extension</a>, for example."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1536760381, "post_id": 52287016, "comment_id": 91541539, "body": "@IInspectable I can see in the documentation that AWE would allow for arranging memory pages in a desired order, but I cannot see how one would use it to place a memory mapped file in the address space."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1536760716, "post_id": 52287016, "comment_id": 91541759, "body": "I wasn&#39;t providing a solution to this question. I was commenting on immibis&#39; statement."}], "answers": [{"tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": true, "score": 1, "last_activity_date": 1540992373, "last_edit_date": 1540992373, "creation_date": 1536723508, "answer_id": 52287149, "question_id": 52287016, "link": "https://stackoverflow.com/questions/52287016/win32-memory-mapped-file-with-views-at-adjacent-locations/52287149#52287149", "title": "Win32 Memory Mapped File With Views at Adjacent Locations", "body": "<p>You can't.  This idea won't work.  There are two problems.  First, the address you pass to <code>MapViewOfFileEx</code> is a request.  The system is under no obligation to map your file there and will fail if the address isn't free.  Second, the address you pass must be a multiple of the system's allocation granularity.  (Use the <code>GetSystemInfo</code> function to retrieve this value.)  You simply can't allocate virtual memory ranges that are only 1 KiB apart on any architecture I'm aware of.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>If your heart is set on this, then I think the only (safe) way to do it is with an indirection layer.  Create a new class that stores a <code>vector</code> of pointers to the base address of each mapped region.  The class's <code>operator[]</code> will determine the correct block based on the index and calculate the address of the desired element within it.  (Basically the way a <code>std::deque</code> works.)</p>\n"}], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 52287149, "answer_count": 1, "score": 1, "last_activity_date": 1540992373, "creation_date": 1536722437, "last_edit_date": 1536724260, "question_id": 52287016, "link": "https://stackoverflow.com/questions/52287016/win32-memory-mapped-file-with-views-at-adjacent-locations", "title": "Win32 Memory Mapped File With Views at Adjacent Locations", "body": "<p>I have a file that has multiple blocks in it.  I would like to map the file such that blocks that are not contiguous are contiguous in memory.</p>\n\n<p>Example:</p>\n\n<p>Assume chunk size is 1kiB.</p>\n\n<ul>\n<li>Chunk 1: Offset 0 in file, mapped to location X</li>\n<li>Chunk 2: Offset 1kiB in file, mapped to location X + 2kiB</li>\n<li>Chunk 3: Offset 2kiB in file, mapped to location X + 1kiB</li>\n</ul>\n\n<p>I know that I can give suggestions to <code>MapViewOfFileEx</code> for a location to place the view.</p>\n\n<p>I tried allocating address space using <code>VirtualAlloc</code> and then passing that as the base address (X), but it gives the error 487 - \"Attempt to access invalid address.\"</p>\n\n<p>How would I guarantee that there is a sufficiently large region in the address space such that I know that this will work?</p>\n\n<hr>\n\n<p>As has been pointed out, views must be mapped at multiples of the memory allocation granularity, so 1kiB chunks would not work as desired.  Is it possible to make the example work if the chunk size is the same ass the memory allocation granularity?</p>\n"}, {"tags": ["c", "padding"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536722750, "post_id": 52286999, "comment_id": 91521958, "body": "Try declaring it <code>unsigned char *p</code> instead of <code>char *p</code>. <code>128</code> is a negative number for a signed char."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1536724826, "post_id": 52286999, "comment_id": 91522351, "body": "Plain <code>char</code> is a signed type on your machine.  When a value with the leading bit set is converted (a negative value), the sign is preserved \u2014 giving you a negative <code>int</code>.  When you print that with a hex format, you get leading 0xFFFFFF##."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8301516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9298db0a941f8d1103f9448ea135bf14?s=128&d=identicon&r=PG&f=1", "display_name": "JesseWei Li", "link": "https://stackoverflow.com/users/8301516/jessewei-li"}, "edited": false, "score": 0, "creation_date": 1536726132, "post_id": 52287317, "comment_id": 91522660, "body": "Thanks P.W. Plain char ranges from -128 to 127 on my machine."}, {"owner": {"reputation": 53, "user_id": 8301516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9298db0a941f8d1103f9448ea135bf14?s=128&d=identicon&r=PG&f=1", "display_name": "JesseWei Li", "link": "https://stackoverflow.com/users/8301516/jessewei-li"}, "edited": false, "score": 0, "creation_date": 1536726635, "post_id": 52287317, "comment_id": 91522784, "body": "Thanks P.W. Plain char ranges from -128 to 127 on my machine.Also learned the C standard does not say char shall be unsigned char or signed char. The other confusion is even when the value of the byte more than 0x80, why the GCC(or at machine level?) pads with 1s but not 0s? Thanks."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 53, "user_id": 8301516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9298db0a941f8d1103f9448ea135bf14?s=128&d=identicon&r=PG&f=1", "display_name": "JesseWei Li", "link": "https://stackoverflow.com/users/8301516/jessewei-li"}, "edited": false, "score": 0, "creation_date": 1536726859, "post_id": 52287317, "comment_id": 91522826, "body": "If I understand your question right, this is about how numbers are represented. This article can help you. <a href=\"https://en.wikipedia.org/wiki/Signed_number_representations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Signed_number_representations</a>"}, {"owner": {"reputation": 53, "user_id": 8301516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9298db0a941f8d1103f9448ea135bf14?s=128&d=identicon&r=PG&f=1", "display_name": "JesseWei Li", "link": "https://stackoverflow.com/users/8301516/jessewei-li"}, "edited": false, "score": 0, "creation_date": 1536727689, "post_id": 52287317, "comment_id": 91523032, "body": "Thanks. Just realized that padding 1s to expand that negative number to 64 bits (depends on the machine).  All clear. Cheers."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1536724902, "creation_date": 1536724902, "answer_id": 52287317, "question_id": 52286999, "link": "https://stackoverflow.com/questions/52286999/c-language-why-get-1s-padded-to-the-byte-when-byte-starts-with-1/52287317#52287317", "title": "C language: why get 1s padded to the byte when byte starts with 1?", "body": "<p>It appears as if <code>char</code> in your implementation is <code>signed</code>. This means you can represent values from -128 to +127 in it. So for the value 128 (which will be considered a negative value), the first bit will be 1.</p>\n\n<p>You can find out if plain <code>char</code> is <code>signed</code> or <code>unsigned</code> (if CHAR_MIN is less than 0 or equal to 0).</p>\n"}], "owner": {"reputation": 53, "user_id": 8301516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9298db0a941f8d1103f9448ea135bf14?s=128&d=identicon&r=PG&f=1", "display_name": "JesseWei Li", "link": "https://stackoverflow.com/users/8301516/jessewei-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1536728160, "accepted_answer_id": 52287317, "answer_count": 1, "score": 0, "last_activity_date": 1536724902, "creation_date": 1536722318, "question_id": 52286999, "link": "https://stackoverflow.com/questions/52286999/c-language-why-get-1s-padded-to-the-byte-when-byte-starts-with-1", "closed_reason": "Duplicate", "title": "C language: why get 1s padded to the byte when byte starts with 1?", "body": "<p>What I try to do: \nprint each byte in hex, for int type number in C, byte by byte</p>\n\n<p>What I get: \nprint each byte of number 128, get 00 00 00 ffffff80 instead of getting 00 00 00 80</p>\n\n<p>Question: Why my PC padding 1s when the first bit of the byte is 1?</p>\n\n<pre><code>code:\n#include \"stdio.h\"\n\nvoid show_bytes(char* p, int len){\n    int i;\n    printf(\"With padding:\\t\\t\");\n    for(i = 0; i &lt; len; i++){\n        printf(\"%.2x\\t\", p[len - 1 - i]);\n    }\n    printf(\"\\n\");\n    printf(\"Mask of padding:\\t\");\n    for(i = 0; i &lt; len; i++){\n        printf(\"%.2x\\t\", 0xFF &amp; p[len - 1 - i]);\n    }\n    printf(\"\\n\");\n\n}\n\nvoid show_bytes_of_int(int x){\n    show_bytes((char*) &amp;x, sizeof(int));\n}\n\nint main(){\n    show_bytes_of_int(128);\n\n    printf(\"%.2x\\n\", 128);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "raw-sockets"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536726892, "post_id": 52286967, "comment_id": 91522837, "body": "Are you aware of &quot;endianess&quot;? Compilers and network encoding do not always agree on the order of e.g. version and ihl. However, usually compilers do disagree consistently, i.e. they would also rearrange src_ip and dest_ip."}, {"owner": {"reputation": 864, "user_id": 5217293, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/53b23b52006e94906cc5daae79c7023e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Shores", "link": "https://stackoverflow.com/users/5217293/k-shores"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1536727052, "post_id": 52286967, "comment_id": 91522873, "body": "I am. That is why I mentioned the htons function. I also thought that the other numbers would be swapped but hey aren\u2019t."}], "answers": [{"comments": [{"owner": {"reputation": 864, "user_id": 5217293, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/53b23b52006e94906cc5daae79c7023e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Shores", "link": "https://stackoverflow.com/users/5217293/k-shores"}, "edited": false, "score": 0, "creation_date": 1536767034, "post_id": 52288794, "comment_id": 91545712, "body": "Ah, I assumed it wouldn&#39;t need to be this because the other fields appeared fine in wireshark. Thank you."}], "tags": [], "owner": {"reputation": 91, "user_id": 7878219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w1ivV.jpg?s=128&g=1", "display_name": "Ali R", "link": "https://stackoverflow.com/users/7878219/ali-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1536737021, "last_edit_date": 1536737021, "creation_date": 1536733840, "answer_id": 52288794, "question_id": 52286967, "link": "https://stackoverflow.com/questions/52286967/layout-of-an-ip-header-and-network-programming/52288794#52288794", "title": "Layout of an ip header and network programming", "body": "<p>You simply need to correct your structure's endianness. Look at the IP header structure defined in the <code>&lt;netinet/ip.h&gt;</code> file:</p>\n\n<pre><code>  struct iphdr\n  {\n#if __BYTE_ORDER == __LITTLE_ENDIAN\n    unsigned int ihl:4;\n    unsigned int version:4;\n#elif __BYTE_ORDER == __BIG_ENDIAN\n    unsigned int version:4;\n    unsigned int ihl:4;\n#else\n# error \"Please fix &lt;bits/endian.h&gt;\"\n#endif\n    uint8_t tos;\n    uint16_t tot_len;\n    uint16_t id;\n    uint16_t frag_off;\n    uint8_t ttl;\n    uint8_t protocol;\n    uint16_t check;\n    uint32_t saddr;\n    uint32_t daddr;\n    /*The options start here. */\n  };\n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 5217293, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/53b23b52006e94906cc5daae79c7023e?s=128&d=identicon&r=PG&f=1", "display_name": "K. Shores", "link": "https://stackoverflow.com/users/5217293/k-shores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 52288794, "answer_count": 1, "score": 0, "last_activity_date": 1536737021, "creation_date": 1536722031, "question_id": 52286967, "link": "https://stackoverflow.com/questions/52286967/layout-of-an-ip-header-and-network-programming", "title": "Layout of an ip header and network programming", "body": "<p>I am taking a class on computer and network security. We are writing a packet spoofer. I could just download one from the internet and use it, but I prefer writing the stuff myself. Below is the struct that I use to represent the ip header which I am <a href=\"https://en.wikipedia.org/wiki/IPv4#Header\" rel=\"nofollow noreferrer\">basing off of the wikipedia article</a>. I am attempting to send an icmp ping packet. I have done it successfully, but only after assigning the value of the ip header length to the version field, and vice versa. Somehow I have setup my struct wrong, or I am assigning the values wrong, and I am not sure what I am doing incorrectly.</p>\n\n<pre><code>struct ip_header\n{\n    uint8_t version : 4 // version\n        , ihl : 4; // ip header length\n    uint8_t dscp : 6 // differentiated services code point\n        , ecn : 2; // explicit congestion notification\n    uint16_t total_length; // entire packet size in bytes\n    uint16_t identification; // a unique identifier\n    uint16_t flags : 3 // control and identify fragments\n        , frag_offset : 13; // offset of fragment relative to the original\n    uint8_t ttl; // how many hops the packet is allowd to travel\n    uint8_t protocol; // what protocol is in use\n    uint16_t checksum; // value used to determine bad packets\n    uint32_t src_ip; // where the packet is form\n    uint32_t dest_ip; // where the packet is going\n};\n</code></pre>\n\n<p>If I assign the <code>version</code> and <code>ihl</code>, like below, wireshark reports an error with the header, \"Bogus IPV4 version (0, must be 4)\".</p>\n\n<pre><code>char buffer[1024];\nstruct ip_header* ip = (struct ip_header*) buffer;\nip-&gt;version = 4;\nip-&gt;ihl = 5;\n</code></pre>\n\n<p>However, after changing to the following listing, the ICMP request goes through just fine.</p>\n\n<pre><code>char buffer[1024];\nstruct ip_header* ip = (struct ip_header*) buffer;\nip-&gt;version = 5;\nip-&gt;ihl = 4;\n</code></pre>\n\n<p>I have tried placing <code>htons</code> around the numbers, but that doesn't seem to do anything useful. What am I missing here?</p>\n"}, {"tags": ["c", "if-statement", "printing", "fork"], "comments": [{"owner": {"reputation": 2516, "user_id": 837627, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731edf3878b237686d04752a0d489a56?s=128&d=identicon&r=PG&f=1", "display_name": "bunbun", "link": "https://stackoverflow.com/users/837627/bunbun"}, "edited": false, "score": 0, "creation_date": 1536719798, "post_id": 52286650, "comment_id": 91521379, "body": "what is your set-up? Any code of what you have tried already/"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536719843, "post_id": 52286650, "comment_id": 91521394, "body": "You need some kind of synchronization between the processes, otherwise the order that they run is totally unpredictable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536719934, "post_id": 52286650, "comment_id": 91521413, "body": "I don&#39;t think there&#39;s any way to synchronize with just the 3 operations you mention."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1536719995, "post_id": 52286650, "comment_id": 91521425, "body": "Where are the restrictions coming from? Is your question a part of a bigger problem? Are you allowed to use <code>setpriority()</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536720075, "post_id": 52286650, "comment_id": 91521438, "body": "Is there a requirement that different letters be printed in different processes? What prevents you from printing everything in one process, and doing nothing in the forked child&gt;"}, {"owner": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536720548, "post_id": 52286650, "comment_id": 91521529, "body": "@Barmar Its an exercise that I have to do. Its a simple program that I have to fill the gaps. It starts with &quot;int x,y,z...&quot; (i can declare as many int variables as i want), <i>big gap</i>, &quot;printf(&quot;A&quot;);&quot;, <i>big gap</i>, printf(&quot;B&quot;);. I have to fill the gap before the printfA and between the printfA and printfB , so that A is printed 5 times and afterwards B is printed 3 times . But i have to do that by only using fork,if and exit."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536720620, "post_id": 52286650, "comment_id": 91521549, "body": "Please put all the requirements in the question, not just a comment."}, {"owner": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1536720801, "post_id": 52286650, "comment_id": 91521578, "body": "@DYZ its just an exercise. a simple program to fill the gaps. all i was given was one &quot;printf(&quot;A&quot;) and one printf(&quot;B&quot;). I need to write code before the printfA and between printfA and printfB so that it prints 5 times &quot;A&quot; and 3 times &quot;B&quot; in the exact same order. I can declare as many int variables as i want, but i cant use anything else but fork, if and exit."}, {"owner": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536720851, "post_id": 52286650, "comment_id": 91521591, "body": "@Barmar my bad, fixing it rn."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536720931, "post_id": 52286650, "comment_id": 91521610, "body": "Fork a process that prints a letter, then it forks a child. Each time you fork, increment a global variable that counts the number of forks. When the number is 1-5, print A. When it&#39;s 6-9 print B. When it&#39;s higher than that, exit."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536720988, "post_id": 52286650, "comment_id": 91521622, "body": "Also make sure you flush after printing each character."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "edited": false, "score": 0, "creation_date": 1536729437, "post_id": 52287429, "comment_id": 91523491, "body": "So let me see if I understand what you did here and correct me if I&#39;m wrong. You forked 5 times and ended up with 5 child processes and 1 parent). Then the 5 child processes had to print &quot;A&quot; and terminate. Then we are back at the start, and you again create 3 child processes that print &quot;B&quot; and terminate. Two question though: 1) when you exit() what processes does it terminate? (I thoiught that exit() terminates the whole program) and 2) in the line where &quot;if(pid==0)&quot; is, why doesn&#39;t the counter go to the next 3 forks, therefore printing &quot;B&quot; first?  Thank you very much for your answer."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "edited": false, "score": 0, "creation_date": 1536730735, "post_id": 52287429, "comment_id": 91523893, "body": "@Jim K - exit() does terminate the process - but since it&#39;s inside the (pid == 0) check, only the child process stops.  The parent process has a number for PID (not zero) so does not execute this part."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "edited": false, "score": 0, "creation_date": 1536730907, "post_id": 52287429, "comment_id": 91523946, "body": "@Jim K - follow the process through (in your head) as if you&#39;re the parent process.  Each time you call fork(), &quot;pid&quot; will be given the Process ID (PID) of the child.  So using the (pid != 0) check, only the parent process ever calls fork()."}], "tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": true, "score": 0, "last_activity_date": 1536725807, "creation_date": 1536725807, "answer_id": 52287429, "question_id": 52286650, "link": "https://stackoverflow.com/questions/52286650/how-can-i-print-multiple-things-in-a-row-with-using-only-fork-and-if/52287429#52287429", "title": "How can I print multiple things in a row with using only fork() and if?", "body": "<p>What you are supposed to be learning here is that fork() duplicates your process - at the point of the fork().  It returns a Process IDentifier (PID) <strong>number</strong> to the parent process, and <strong>zero</strong> to the child process.</p>\n\n<p>So by simply watching the return of the fork(), the execution path can determine if they are the parent or child process.</p>\n\n<p>Thus to implement the problem, I took the approach of controlling everything from the single parent process, and having the child simply output a letter, then exit() - which terminates the process.  </p>\n\n<p>It would be much nicer with a for() loop, but that was not allowed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int pid = fork();\n    if (pid != 0)\n        pid = fork();\n    if (pid != 0)\n        pid = fork();\n    if (pid != 0)\n        pid = fork();\n    if (pid != 0)\n        pid = fork();\n\n    if (pid == 0)\n    {\n        // child process only\n        printf(\"A\");\n        exit(0);\n    }\n\n    pid = fork();\n    if (pid != 0)\n        pid = fork();\n    if (pid != 0)\n        pid = fork();\n    if (pid == 0)\n    {\n        // child process only\n        printf(\"B\");\n        exit(0);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: I <em>suspect</em> that it may occasionally get mixed up due to system load, scheduling, etc.  But in all my tests I received the correct answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 10350585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8UUVC.jpg?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/10350585/jim-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 52287429, "answer_count": 1, "score": -1, "last_activity_date": 1551106516, "creation_date": 1536719510, "last_edit_date": 1551106516, "question_id": 52286650, "link": "https://stackoverflow.com/questions/52286650/how-can-i-print-multiple-things-in-a-row-with-using-only-fork-and-if", "title": "How can I print multiple things in a row with using only fork() and if?", "body": "<p>after hours of searching I ended up here. Here's my problem:</p>\n\n<p>I have an exercise I need to do.The code given is this:</p>\n\n<pre><code>int main(){\nint x,y,z....;\n//\n\nfill the gap\n\n//\nprintf(\"A\");\n//\n\nfill the gap\n\n//\nprintf(\"B\");\nreturn(0);\n}\n</code></pre>\n\n<p>I must print exactly \"AAAAABBB\" with using <strong>ONLY</strong> fork(),if and exit().\n(no \"wait\", no multiple \"printf\", no \"sleep\". no \"for\")</p>\n\n<p>How could I do it? I have tested it in online IDEs but I just cant print them in this exact way. The output is always confusing (AABBBAA, ABABABAA etc.) I can't seem to understand how to give priority to the parent or child without using anything but fork() and if.</p>\n\n<p>Any tip is appreciated.</p>\n"}, {"tags": ["c", "memory-management", "heap-memory"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1536721905, "post_id": 52286713, "comment_id": 91521818, "body": "He&#39;s clearly trying to access the implementation-dependent bookkeeping data of malloc. The fact that it&#39;s UB is probably irrelevant, just like in questions about shellcode exploits."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1536724376, "post_id": 52286713, "comment_id": 91522257, "body": "Yes. How I forget that ?. Thanks @Barmar let me modify."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 1, "last_activity_date": 1536729221, "last_edit_date": 1536729221, "creation_date": 1536720076, "answer_id": 52286713, "question_id": 52286552, "link": "https://stackoverflow.com/questions/52286552/understanding-memory-allotment-in-heap/52286713#52286713", "title": "Understanding memory allotment in heap", "body": "<p>From <strong>C programming language</strong> book by <strong>DENNIS M. RITCHIE</strong></p>\n\n<blockquote>\n  <p>Rather than allocating from a compiled-in <strong>fixed-sized</strong> array,\n  <strong>malloc</strong> will request space from the operating system as needed. Since other activities in the program may also request space without\n  calling this allocator, the space that\n  <strong>malloc</strong> manages may not be contiguous. Thus its free storage is kept as a list of <strong>free blocks</strong>. Each block contains a <strong>size</strong>, a\n  <strong>pointer to the next block</strong>, and the\n  <strong>space itself</strong>. The blocks are kept in order of increasing storage address, and the last block (highest address) points to the first. The\n  block returned by malloc() looks like</p>\n\n<pre><code>    points to          \n    next free\n     block       \n      |                \n   ---------------------------------------\n   |       |   size   |                  |\n   ---------------------------------------\n   |       |          |..address returned to the user\n   (ptr-2) (ptr-1)    ptr --&gt;     \n                      LSB              MSB\n</code></pre>\n  \n  <p>Here</p>\n</blockquote>\n\n<pre><code>void print_int_heap(unsigned int *ptr, int len) {\n    printf(\"PREV_SIZE: [%08x]  SIZE: [%08x]  MEM: [%08x] for INT malloc(%d)\\n\", *(ptr-2), *(ptr-1), ptr, len);\n}\n</code></pre>\n\n<p><code>*(ptr-2)</code> prints the value inside  <code>\"next free block\"</code> as shown in above image and <code>*(ptr-1)</code> prints the value inside <code>\"size\"</code> block i.e how much memory allocated, &amp; <code>ptr</code> prints the address returned by user. Note that here <code>ptr</code> type is <code>unsigned int*</code> so <code>*(ptr-2)</code> means accessing data from <code>2*sizeof(int)</code> bytes just before where <code>ptr</code> points.</p>\n\n<p>And here</p>\n\n<pre><code>void print_char_heap(char *ptr, int len){\n    printf(\"PREV_SIZE: [%08x]  SIZE: [%08x]  MEM: [%08x] for CHAR malloc(%d)\\n\", *(ptr-2), *(ptr-1), ptr, len);\n}\n</code></pre>\n\n<p>while accessing <code>*(ptr-1)</code>          </p>\n\n<blockquote>\n<pre><code>    next free\n     block        (ptr-1)--&gt; *(ptr-1) prints data from ? marked location.\n      |            |  \n   ---------------------------------------\n   |       | size |? |                  |\n   ---------------------------------------\n   |       |         |..address returned to the user\n                     ptr --&gt;     \n                     LSB              MSB\n</code></pre>\n</blockquote>\n\n<p><code>ptr</code> type is <code>char*</code> means when you do <code>*(ptr-1)</code> it will access data from <code>sizeof(char)</code> bytes just before where <code>ptr</code> points.</p>\n\n<p>Also better to use <a href=\"http://valgrind.org/docs/manual/manual.html\" rel=\"nofollow noreferrer\">valgrind</a> when memory allocated dynamically &amp; make sure there is no where memory leakage happens, simply by running </p>\n\n<pre><code>valgrind --leak-check=full -v ./your_exe\n</code></pre>\n\n<p>and analyzing the messages of <code>valgrind</code>. for e.g it may show something like</p>\n\n<pre><code>==3193== Invalid read of size 4\n==3193==    at 0x8048459: print_int_heap\n==3193== Invalid read of size 4\n==3193==    at 0x8048461: print_int_heap\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1536721986, "creation_date": 1536721986, "answer_id": 52286961, "question_id": 52286552, "link": "https://stackoverflow.com/questions/52286552/understanding-memory-allotment-in-heap/52286961#52286961", "title": "Understanding memory allotment in heap", "body": "<p>When you perform arithmetic on a pointer, the arithmetic is done in units of the size of the object that the pointer points to. So with <code>char *ptr</code>, <code>ptr-1</code> subtracts 1 byte from the address in <code>ptr</code>. But with <code>unsigned int *ptr</code>, <code>ptr-1</code> subtracts <code>sizeof(int)</code> from the address in <code>ptr</code>.</p>\n\n<p>So in your two functions, you're not subtracting the same number of bytes to get to the heap's bookkeeping data for the block.</p>\n\n<p>Also, when you dereference a pointer, it only accesses the number of bytes in the pointer's data type. So in <code>print_int_heap()</code>, <code>*(ptr-1)</code> returns an <code>unsigned int</code>, while in <code>print_char_heap()</code> it returns a single <code>char</code>.</p>\n\n<p>You should probably just write a single <code>print_heap()</code> function, and cast the argument to the appropriate type in the caller.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1536722734, "creation_date": 1536722734, "answer_id": 52287053, "question_id": 52286552, "link": "https://stackoverflow.com/questions/52286552/understanding-memory-allotment-in-heap/52287053#52287053", "title": "Understanding memory allotment in heap", "body": "<p>If <code>ptr</code> is an <code>int*</code>, <code>*(ptr - 1)</code> refers to the <code>sizeof(int)</code> bytes just before what <code>ptr</code> references. That will ususlly be a 32-bit quantity starting four bytes before <code>ptr</code>.</p>\n\n<p>Similarly, if it is a <code>char*</code>, <code>*(ptr - 1)</code> refers to the <code>sizeof(char)</code> bytes just before what <code>ptr</code> references. <code>sizeof(char)</code> is always 1; normally that will be the 8-bit quantity in the single byte preceding the value of <code>ptr</code>.</p>\n\n<p>These are obviously quite different things.</p>\n\n<p>By the way, you are allowed to write <code>ptr[-1]</code>. But as the above analysis show, that's really not what you want. You want to cast <code>ptr</code> to a pointer to the datatype of the object(s) you believe precede <code>ptr</code>, probably <code>uint32_t</code>.</p>\n\n<p>Technically this is all Undefined Behaviour, but if your <code>malloc</code> implementation is stashing data just before the allocation and you know the type of that data, I'd say that it's fine to read it. (Although it's always a bit rude to stare at the internal data of a system function.)</p>\n\n<p>Be aware that not all <code>malloc</code> implementations do the same thing. You may well find one which storrs the length elsewhere or not at all.</p>\n"}], "owner": {"reputation": 43, "user_id": 2216993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32416fa523a730d77ac92ca1a77cdf29?s=128&d=identicon&r=PG", "display_name": "Gaurav Ojha", "link": "https://stackoverflow.com/users/2216993/gaurav-ojha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52287053, "answer_count": 3, "score": -3, "last_activity_date": 1536729221, "creation_date": 1536718660, "question_id": 52286552, "link": "https://stackoverflow.com/questions/52286552/understanding-memory-allotment-in-heap", "title": "Understanding memory allotment in heap", "body": "<p>I was trying to understand how memory is allotted on the heap using malloc, and came across the following observation, and am unable to understand the reason behind it. It would be great if someone can explain.</p>\n\n<p>First, let's take a look at the code I wrote:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid print_int_heap(unsigned int *ptr, int len)\n{\n    printf(\"PREV_SIZE: [%08x]  SIZE: [%08x]  MEM: [%08x] for INT malloc(%d)\\n\", *(ptr-2), *(ptr-1), ptr, len);\n}\nvoid print_char_heap(char *ptr, int len)\n{\n    printf(\"PREV_SIZE: [%08x]  SIZE: [%08x]  MEM: [%08x] for CHAR malloc(%d)\\n\", *(ptr-2), *(ptr-1), ptr, len);\n}\n\nint main() {\n\n    unsigned int *ptr1 = malloc(20);\n    print_int_heap(ptr1, 20);\n    char *ptr2 = malloc(20)\n    print_char_heap(ptr2, 20);\n    return 0;\n}\n</code></pre>\n\n<p>The output which I get for the above program is:</p>\n\n<pre><code>PREV_SIZE: [0x00000000] SIZE: [0x00000019] MEM: [0x0804b008] for INT malloc(20)\nPREV_SIZE: [0x00000000] SIZE: [0x00000000] MEM: [0x0804b020] for INT malloc(20)\n</code></pre>\n\n<p>I can understand the output for the int malloc, but I do not understand why the value for size of chunk for char malloc is 0? </p>\n"}, {"tags": ["c", "clang"], "answers": [{"comments": [{"owner": {"reputation": 6808, "user_id": 1828382, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/fd5534fd09e8b5a94a1d7010565f03be?s=128&d=identicon&r=PG", "display_name": "Charlie Burns", "link": "https://stackoverflow.com/users/1828382/charlie-burns"}, "edited": false, "score": 0, "creation_date": 1536719242, "post_id": 52286504, "comment_id": 91521281, "body": "Thanks, really appreciate it. ( Knocks self in forehead. )"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1536720010, "post_id": 52286504, "comment_id": 91521428, "body": "<code>NULL</code> might be a macro for <code>0</code> , so the <code>(char *)0</code> version should always be used (or <code>(char *)NULL</code>)"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 4, "last_activity_date": 1536731036, "last_edit_date": 1536731036, "creation_date": 1536718265, "answer_id": 52286504, "question_id": 52286365, "link": "https://stackoverflow.com/questions/52286365/clang-bug-related-to-stdarg/52286504#52286504", "title": "clang bug related to stdarg?", "body": "<p><code>0</code> is not a <code>char*</code>; it's an <code>int</code>. So reading it with <code>va_arg(ap, char*)</code> is Undefined Behaviour.</p>\n\n<p>Supply the argument <code>(char*)0</code> when you mean a null pointer of type <code>char *</code>. (Or <code>(char*)NULL</code>, if you prefer.) As M.M. points out in a comment, the commonly-seen <code>NULL</code> is not correct since <code>NULL</code> might be <code>#define</code>d as <code>0</code>.</p>\n\n<p>(Since <code>0</code> is an <code>int</code>, the compiler doesn't worry about the high-order four bytes. The low-order four bytes of the argument are indeed 0. But that's an implementation detail; I only mention it by way of explanation.)</p>\n"}], "owner": {"reputation": 6808, "user_id": 1828382, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/fd5534fd09e8b5a94a1d7010565f03be?s=128&d=identicon&r=PG", "display_name": "Charlie Burns", "link": "https://stackoverflow.com/users/1828382/charlie-burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52286504, "answer_count": 1, "score": 0, "last_activity_date": 1536731036, "creation_date": 1536717006, "question_id": 52286365, "link": "https://stackoverflow.com/questions/52286365/clang-bug-related-to-stdarg", "title": "clang bug related to stdarg?", "body": "<p>This appears to be a bug in clang related to null terminated variable argument lists. </p>\n\n<p>The expected behavior is that va_arg() will return 0 on the first iteration since the argument following alias is 0.</p>\n\n<p>Complete code is below. In main(), removing \"void *map = 0;\" or the call to foo() makes the bug go away.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\n/*\nclang --version:\nApple LLVM version 9.0.0 (clang-900.0.39.2)\nTarget: x86_64-apple-darwin16.7.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n*/\n\nvoid *foo(char *a, char *b, char *c, ...) {\n        return 0;\n}\n\nvoid *bar(char *a, char *b, char *c, char *d, char *e, char *f, char *alias, ...) {\n        char *arg;\n        va_list ap;\n        va_start(ap, alias);\n        printf(\"alias = %s\\n\", alias);\n        while((arg = va_arg(ap, char *))) {\n                printf(\"arg = %p\\n\", arg);\n                printf(\"BUG!\\n\");\n                return 0;\n        }\n        va_end(ap);\n        printf(\"NO BUG\\n\");\n        return 0;\n}\n\nint main() {\n        void *map = 0; // removing this statement hides bug\n        foo(0, 0, 0, 0);// removing this statement hides bug\n        bar(\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"b\", 0);\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>alias = b\narg = 0x100000000\nBUG!\n</code></pre>\n"}, {"tags": ["c", "arrays", "concatenation"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1536724631, "post_id": 52286355, "comment_id": 91522299, "body": "Those aren&#39;t &quot;hexadecimal&quot; arrays. They&#39;re just chars that you chose to represent that way textually. The data is the same as if you had specified a comma separated list of decimal or octal literals."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1536730833, "post_id": 52286355, "comment_id": 91523917, "body": "I know, but i dont need a list of comma separated values, i need it represented that way. Thats it!"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1536731961, "post_id": 52286355, "comment_id": 91524347, "body": "You might explain a bit more in which way it is &quot;just nonsense&quot; for your next questions."}, {"owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "edited": false, "score": 0, "creation_date": 1536732319, "post_id": 52286355, "comment_id": 91524515, "body": "Didnt my edit explain it? I used the wrong representatin so i&#39;ve seen the wrong values.. Its solved anyway.."}], "answers": [{"tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 2, "last_activity_date": 1536727038, "last_edit_date": 1536727038, "creation_date": 1536725279, "answer_id": 52287361, "question_id": 52286355, "link": "https://stackoverflow.com/questions/52286355/copy-multiple-hex-arrays-into-one-in-c/52287361#52287361", "title": "Copy multiple hex arrays into one in C", "body": "<p><code>sizeof</code> on each one of those arrays is +1 larger than you think it is. Because each string also contains the null terminating zero (as any string would).  And that increases each array by 1 bytes as well.  For example, <code>sizeof(ip1)</code> is 5, not 4.</p>\n\n<p>Quick and dirty hack to your program is to subtract 1 form each <code>sizeof()</code> calculation.  Like this:</p>\n\n<pre><code>unsigned char result[sizeof(sc1) + sizeof(ip) + sizeof(sc2) + sizeof(port) + sizeof(sc3) - 5];\n\nmemcpy(result, sc1, sizeof(sc1)-1);\nmemcpy(result + sizeof(sc1)-1, ip, sizeof(ip)-1);\nmemcpy(result + sizeof(sc1)-1 + sizeof(ip)-1, sc2, sizeof(sc2)-1);\nmemcpy(result + sizeof(sc1)-1 + sizeof(ip)-1 + sizeof(sc2)-1, port, sizeof(port)-1);\nmemcpy(result + sizeof(sc1)-1 + sizeof(ip)-1 + sizeof(sc2)-1 + sizeof(port)-1, sc3, sizeof(sc3)-1);\n\n\nfor (int i = 0; i &lt; sizeof(result); i++) {\n    printf(\"%02x \", result[i]);  // %x, not %d to print hex\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>fc e8 82 00 00 00 60 89 e5 31 c0 c0 a8 00 01 68 02 00 04 d2 89 e6 50 50 50 50 40 50 40 50\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10341219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec96c9da5255adf90bb5248c81a2029?s=128&d=identicon&r=PG&f=1", "display_name": "Jane dOE", "link": "https://stackoverflow.com/users/10341219/jane-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536727038, "creation_date": 1536716957, "last_edit_date": 1536718750, "question_id": 52286355, "link": "https://stackoverflow.com/questions/52286355/copy-multiple-hex-arrays-into-one-in-c", "title": "Copy multiple hex arrays into one in C", "body": "<p>My problem is, i have 5 hexadecimal arrays and want to combine them.</p>\n\n<pre><code>unsigned char sc1[] = \"\\xfc\\xe8\\x82\\x00\\x00\\x00\\x60\\x89\\xe5\\x31\\xc0\";        \nunsigned char ip[] = \"\\xc0\\xa8\\x00\\x01\"; // IP 192.168.0.1  \nunsigned char sc2[] = \"\\x68\\x02\\x00\";\nunsigned char port[] = \"\\x04\\xd2\"; // PORT 1234    \nunsigned char sc3[] = \"\\x89\\xe6\\x50\\x50\\x50\\x50\\x40\\x50\\x40\\x50\" \n</code></pre>\n\n<p>Of course, the order shouldnt change (network byte order i guess) :P I tried it with memcpy </p>\n\n<pre><code>unsigned char result[sizeof(sc1) + sizeof(ip) + sizeof(sc2) + sizeof(port) + sizeof(sc3)];\n\nmemcpy( result, sc1, sizeof(sc1) );\nmemcpy( result + sizeof(sc1), ip, sizeof(ip) );\nmemcpy( result + sizeof(sc1) + sizeof(ip), sc2, sizeof(sc2) );\nmemcpy( result + sizeof(sc1) + sizeof(ip) + sizeof(sc2), port, sizeof(port) );\nmemcpy( result + sizeof(sc1) + sizeof(ip) + sizeof(sc2) + sizeof(port), sc3, sizeof(sc3) );\n</code></pre>\n\n<p>and so on for every array but when i try to print it </p>\n\n<pre><code>for (int i = 0; i &lt; sizeof(result); i++) {\n    printf(\"%d \", result[i]);\n}\n</code></pre>\n\n<p>the result is just nonsense so i stopped fiddling around and hope you can help me out.</p>\n\n<p>EDIT: Sorry folks, i got it, im so stupid!!! Of course i have to use <code>%x</code></p>\n\n<pre><code>printf(\"%x \", result[i]);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 72, "user_id": 8900754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDhvL.jpg?s=128&g=1", "display_name": "dernst", "link": "https://stackoverflow.com/users/8900754/dernst"}, "edited": false, "score": 1, "creation_date": 1536715690, "post_id": 52286086, "comment_id": 91520585, "body": "This can be explained by understanding how 2&#39;s complement encoding works.  <a href=\"https://stackoverflow.com/questions/1049722/what-is-2s-complement\" title=\"what is 2s complement\">stackoverflow.com/questions/1049722/what-is-2s-complement</a>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1536715718, "post_id": 52286086, "comment_id": 91520595, "body": "overflow and underflow of signed integer are undefined."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1536715765, "post_id": 52286086, "comment_id": 91520608, "body": "1.  integer overflow is undefined behavior.  You should not expect consistent results from these assignments.  2.  Your results 1&amp;2 seem intuitive to me (if I were going to define the desired behavior, that&#39;s what it would be).  I&#39;m not sure about the missing warning, though.  That seems <i>undesirable</i> :)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1536721876, "post_id": 52286086, "comment_id": 91521811, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45089640/why-does-the-negation-of-the-minimum-possible-integer-yield-itself\">Why does the negation of the minimum possible integer yield itself?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1536722443, "post_id": 52286086, "comment_id": 91521911, "body": "@zzyzx There&#39;s no UB in this code. You should expect consistent results if rerunning the code on the same implementation."}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1536716547, "post_id": 52286295, "comment_id": 91520753, "body": "It drives me nuts what C compilers consider &quot;pedantic&quot; in terms of warnings."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 1, "last_activity_date": 1536716377, "creation_date": 1536716377, "answer_id": 52286295, "question_id": 52286086, "link": "https://stackoverflow.com/questions/52286086/overflow-issues-in-implict-conversions/52286295#52286295", "title": "overflow issues in implict conversions?", "body": "<p>The warning you want is enabled in GCC by <code>-pedantic</code>. In Code Blocks go over to Settings, Compiler and find \"Enable warnings demanded by strict ISO C\". Turn that on.</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1536726013, "creation_date": 1536726013, "answer_id": 52287454, "question_id": 52286086, "link": "https://stackoverflow.com/questions/52286086/overflow-issues-in-implict-conversions/52287454#52287454", "title": "overflow issues in implict conversions?", "body": "<p>What is happening in your case is integer overflow which causes undefined behaviour. </p>\n\n<p>From C Committee draft (N1570)</p>\n\n<blockquote>\n  <p><strong>3.4.3</strong><br>\n  1 undefined behaviour<br>\n  behavior, upon use of a nonportable or erroneous program construct or of erroneous data,\n  for which this International Standard imposes no requirements.<br>\n  2 NOTE: <strong>Possible undefined behavior ranges from ignoring the situation completely with unpredictable results</strong>, to behaving during translation or program execution in a documented manner characteristic of the environment (with or without the issuance of a diagnostic message), to terminating a translation or execution (with the issuance of a diagnostic message).<br>\n  3 EXAMPLE: <strong>An example of undefined behavior is the behavior on integer overflow.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 166, "user_id": 9018878, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c4xBQ8So3D4/AAAAAAAAAAI/AAAAAAAABrY/R7KXS01GeWY/photo.jpg?sz=128", "display_name": "praveen padala", "link": "https://stackoverflow.com/users/9018878/praveen-padala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1536766802, "creation_date": 1536714558, "last_edit_date": 1536766802, "question_id": 52286086, "link": "https://stackoverflow.com/questions/52286086/overflow-issues-in-implict-conversions", "title": "overflow issues in implict conversions?", "body": "<p>In my machine size of integer data type  is 4 bytes so maximum value to the positive side is 2147483647 and to the negative side is -2147483648 in case of a signed int. consider the below c program </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    int a = 2147483648;\n    int  b = -2147483649;\n\n    printf(\"%d\",a);\n    printf(\"\\n%d\",b);\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>output:\n-2147483647\n2147483647</p>\n\n<p>why a is implicitly getting converted to -2147483648 and b implicitly getting converted to 2147483647? and why I am getting only for line number 2 the below- given warning </p>\n\n<p>\"overflow in implicit constant conversion(-woverflow)\"</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536714144, "post_id": 52285885, "comment_id": 91520279, "body": "Why are you claiming that the function receives a matrix of <code>int *</code> values?  Drop the <code>*</code> from the function prototype and definition."}, {"owner": {"reputation": 72, "user_id": 8900754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDhvL.jpg?s=128&g=1", "display_name": "dernst", "link": "https://stackoverflow.com/users/8900754/dernst"}, "edited": false, "score": 0, "creation_date": 1536714614, "post_id": 52285885, "comment_id": 91520376, "body": "See <a href=\"https://stackoverflow.com/questions/14808908/c-pointer-to-two-dimensional-array\" title=\"c pointer to two dimensional array\">stackoverflow.com/questions/14808908/&hellip;</a> to see how to define a pointer to a 2D array.  In your printMatriz function you will also need to dereference the pointer to the array (add a * in front of matriz in the printf statement) ."}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1536716192, "post_id": 52285885, "comment_id": 91520687, "body": "<code>int *matriz[][]</code> in function declartion means 2D array of <b>pointers</b> to int. In &#39;main&#39; you declared it as a 2D array of just int: <code>int matriz[][]</code>. These are inncompatible types.  Remove the &#39;*&#39;."}, {"owner": {"reputation": 123, "user_id": 9451725, "user_type": "registered", "profile_image": "https://graph.facebook.com/359188914586522/picture?type=large", "display_name": "Paulo Henrique Rodrigues Grund", "link": "https://stackoverflow.com/users/9451725/paulo-henrique-rodrigues-grund"}, "edited": false, "score": 0, "creation_date": 1536717674, "post_id": 52285885, "comment_id": 91520961, "body": "i forgot to declare it as a pointer. Now that I did it, it keeps displaying the warning, here is the code now <a href=\"https://pastebin.com/58txTMzQ\" rel=\"nofollow noreferrer\">pastebin.com/58txTMzQ</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1536722161, "post_id": 52285885, "comment_id": 91521862, "body": "If you have new code, <a href=\"https://stackoverflow.com/posts/52285885/edit\">edit</a> your question or ask a new one. Comments are not meant for updates."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9451725, "user_type": "registered", "profile_image": "https://graph.facebook.com/359188914586522/picture?type=large", "display_name": "Paulo Henrique Rodrigues Grund", "link": "https://stackoverflow.com/users/9451725/paulo-henrique-rodrigues-grund"}, "edited": false, "score": 0, "creation_date": 1536717272, "post_id": 52286097, "comment_id": 91520886, "body": "i put void printMatriz(int (*matriz)[TAM][TAM]) and it still keeps displaying the warning, though it&#39;s working as well"}, {"owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "reply_to_user": {"reputation": 123, "user_id": 9451725, "user_type": "registered", "profile_image": "https://graph.facebook.com/359188914586522/picture?type=large", "display_name": "Paulo Henrique Rodrigues Grund", "link": "https://stackoverflow.com/users/9451725/paulo-henrique-rodrigues-grund"}, "edited": false, "score": 0, "creation_date": 1536736911, "post_id": 52286097, "comment_id": 91526947, "body": "Extended my answer now that you dug a little into the code."}], "tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": true, "score": 2, "last_activity_date": 1536736878, "last_edit_date": 1536736878, "creation_date": 1536714632, "answer_id": 52286097, "question_id": 52285885, "link": "https://stackoverflow.com/questions/52285885/passing-2d-array-to-a-function-in-c-with-pointers/52286097#52286097", "title": "Passing 2d array to a function in C with pointers", "body": "<p><b>First Answer</b>\nTo make it a pointer you need to enclosed it within parentheses. </p>\n\n<p>When reading such definitions start on the deepest name and spiral out starting up and to the right, honoring precedence. </p>\n\n<p><code>   void printMatriz(int (*matriz)[TAM][TAM])</code></p>\n\n<p>Working from inside out, starting with name:</p>\n\n<ul><li>name matriz is (spiraling out within parentheses) a pointer to\n<li>[TAM][TAM] two-d array of\n<li>integers.</ul>\n\n<p><p>Using your original code:</p>\n\n<p><code>   void printMatriz(int *matriz[TAM][TAM])</code></p>\n\n<p>Working from inside out:</p>\n\n<ul><li>name matriz is a\n<li>[TAM][TAM] two-d array of\n<li>pointers to \n<li>integers.</ul>\n\n<p>Hoping there is not too much sleep in my eyes. </p>\n\n<p><b>Now that you have struggled</b>\nSecond answer now that you have dug a bit. </p>\n\n<p>Use of <code>typedef</code> specifier can greatly simplify some definitions by encapsulating complexity within the typedef declaration. </p>\n\n<pre>typedef int matriz_t[TAM][TAM]; /* typedef simplifies referencing code */\n\nvoid printTypedef(matriz_t *matriz)   /* (note: now a simple pointer) */\n{\n    int i, j;\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"%i\\t\", (*matriz)[j][i]);  /* still need () here */\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main()\n{\n    int i, j;\n    matriz_t  matriztdef;               /* doesn't get simpler than this */\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            scanf(\"%i\", &amp;matriztdef[i][j]);\n        }\n    }\n    printTypedef(&matriztdef);\n    return 0;\n}</pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1536721950, "last_edit_date": 1536721950, "creation_date": 1536721646, "answer_id": 52286925, "question_id": 52285885, "link": "https://stackoverflow.com/questions/52285885/passing-2d-array-to-a-function-in-c-with-pointers/52286925#52286925", "title": "Passing 2d array to a function in C with pointers", "body": "<p>You can afford to use far fewer asterisks, like this.  Note that the printing code reverses the order of the subscripts compared to your code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TAM 2\nvoid printMatriz(int matriz[TAM][TAM]);\n\nint main(void)\n{\n    int matriz[TAM][TAM];\n\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n        {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            if (scanf(\"%i\", &amp;matriz[i][j]) != 1)\n            {\n                fprintf(stderr, \"failed to read an integer\\n\");\n                return 1;\n            }\n        }\n    }\n\n    printMatriz(matriz);\n    return 0;\n}\n\nvoid printMatriz(int matriz[TAM][TAM])\n{\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n            printf(\"%i\\t\", matriz[i][j]);  // Reversed order of i, j\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>Matriz[0][0] = 19\nMatriz[0][1] = 28\nMatriz[1][0] = 30\nMatriz[1][1] = 41\n19  28  \n30  41\n</code></pre>\n\n<p>Note that this uses C99 notation for the <code>for</code> loops, avoiding the need for the variables <code>i</code> and <code>j</code> outside the loops.  If it's a problem, reinstate the variable definitions outside the loops.</p>\n\n<p>If you really want to use pointers to matrices, you could use either of these two variants of your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TAM 2\nvoid printMatriz(int (*matriz)[TAM]);\n\nint main(void)\n{\n    int matriz[TAM][TAM];\n\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n        {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            if (scanf(\"%i\", &amp;matriz[i][j]) != 1)\n            {\n                fprintf(stderr, \"failed to read an integer\\n\");\n                return 1;\n            }\n        }\n    }\n\n    printMatriz(matriz);\n    return 0;\n}\n\nvoid printMatriz(int (*matriz)[TAM])\n{\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n            printf(\"%i\\t\", matriz[i][j]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TAM 2\nvoid printMatriz(int (*matriz)[TAM][TAM]);\n\nint main(void)\n{\n    int matriz[TAM][TAM];\n\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n        {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            if (scanf(\"%i\", &amp;matriz[i][j]) != 1)\n            {\n                fprintf(stderr, \"failed to read an integer\\n\");\n                return 1;\n            }\n        }\n    }\n\n    printMatriz(&amp;matriz);\n    return 0;\n}\n\nvoid printMatriz(int (*matriz)[TAM][TAM])\n{\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n            printf(\"%i\\t\", (*matriz)[i][j]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Note the different notations needed in the last example \u2014 in the call (like in your original code) and in the use of the matrix.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1536743626, "post_id": 52291517, "comment_id": 91530958, "body": "That&#39;s not a 2-dimensional matrix.  That&#39;s an array of one-dimensional arrays.  And it&#39;s a hugely inefficient way to allocate an array."}], "tags": [], "owner": {"reputation": 89, "user_id": 6819537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28e45a9f6258d1a1a8f9ddbc46824fd?s=128&d=identicon&r=PG&f=1", "display_name": "Massimiliano Di Cavio", "link": "https://stackoverflow.com/users/6819537/massimiliano-di-cavio"}, "is_accepted": false, "score": 0, "last_activity_date": 1536743405, "creation_date": 1536743405, "answer_id": 52291517, "question_id": 52285885, "link": "https://stackoverflow.com/questions/52285885/passing-2d-array-to-a-function-in-c-with-pointers/52291517#52291517", "title": "Passing 2d array to a function in C with pointers", "body": "<p>You could do in this way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TAM 2\nvoid printMatriz(int **matriz);\n\nint main(void)\n{\n    int **matriz=(int**)malloc(sizeof(int)*TAM);\n\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        matriz[i]=(int*)malloc(sizeof(int)*TAM);\n        for (int j = 0; j &lt; TAM; j++)\n        {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            if (scanf(\"%i\", &amp;matriz[i][j]) != 1)\n            {\n                fprintf(stderr, \"failed to read an integer\\n\");\n                return 1;\n            }\n        }\n    }\n\n    printMatriz(matriz);\n    return 0;\n}\n\nvoid printMatriz(int **matriz)\n{\n    for (int i = 0; i &lt; TAM; i++)\n    {\n        for (int j = 0; j &lt; TAM; j++)\n            printf(\"%d \", matriz[i][j]);\n        printf(\"\\n\");\n     }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "is_accepted": false, "score": 0, "last_activity_date": 1536774365, "last_edit_date": 1536774365, "creation_date": 1536772900, "answer_id": 52300491, "question_id": 52285885, "link": "https://stackoverflow.com/questions/52285885/passing-2d-array-to-a-function-in-c-with-pointers/52300491#52300491", "title": "Passing 2d array to a function in C with pointers", "body": "<blockquote>\n  <p>I want to pass the pointer of a 2d array</p>\n</blockquote>\n\n<p>You can pass a pointer to the first element of the 2D array and access all the elements using that pointer like so:</p>\n\n<pre><code>#define TAM 2\nvoid printMatrix(int * matrix); //function prototype\n\nvoid printMatrix(int * matrix)\n{\n    int i, j;\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"%i\\t\", *(matrix + i*TAM + j));\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>In your main function you would do something like this:</p>\n\n<pre><code>int main()\n{\n    int i, j, matrix[TAM][TAM];\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"matrix[%i][%i] = \", i, j);\n            scanf(\"%i\", &amp;matrix[i][j]);\n        }\n    }\n    printMatrix(&amp;matrix[0][0]); //could also do this other ways (e.g. matrix[0], *matrix) just wanted to make it explicit that you are passing a pointer to the first element of the 2D array \n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>I managed to make it work, but I still get the following warning:</p>\n</blockquote>\n\n<pre><code>||=== Build: Debug in matriz (compiler: GNU GCC Compiler) ===|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c||In function 'main':|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|15|warning: passing argument 1 of \n'printMatriz' from incompatible pointer type [-Wincompatible-pointer-types]|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|4|note: expected 'int * (*)[2]' but \nargument is of type 'int (*)[2][2]'|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c||In function 'printMatriz':|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|23|warning: format '%i' expects argument \nof type 'int', but argument 2 has type 'int *' [-Wformat=]|\n||=== Build finished: 0 error(s), 2 warning(s) (0 minute(s), 0 second(s)) ===|\n||=== Run: Debug in matriz (compiler: GNU GCC Compiler) ===|\n</code></pre>\n\n<p>Your warnings are stemming from a misunderstanding of how you defined your function and then what you passed it. As others have stated, your function is defined as taking an argument of a 2D array of pointers to integers <code>int * matrix[][]</code>, and since the name of the array is itself a pointer to the beginning of that array, the function wants <em>a pointer to a pointer (remember the first element of <code>int * matrix[][]</code> will be a pointer to an <code>int</code>)</em> but then you pass it <code>&amp;matrix</code> which is <code>int *</code> (a pointer to an <code>int</code>) because the first element of the 2D array <code>matrix</code> is an <code>int</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 9451725, "user_type": "registered", "profile_image": "https://graph.facebook.com/359188914586522/picture?type=large", "display_name": "Paulo Henrique Rodrigues Grund", "link": "https://stackoverflow.com/users/9451725/paulo-henrique-rodrigues-grund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 52286097, "answer_count": 4, "score": 0, "last_activity_date": 1536774365, "creation_date": 1536712508, "question_id": 52285885, "link": "https://stackoverflow.com/questions/52285885/passing-2d-array-to-a-function-in-c-with-pointers", "title": "Passing 2d array to a function in C with pointers", "body": "<p>I'm new to C and I'm learning pointers. So, I want to pass the pointer of a 2d array. I managed to make it work, but I still get the following warning: </p>\n\n<pre><code>||=== Build: Debug in matriz (compiler: GNU GCC Compiler) ===|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c||In function 'main':|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|15|warning: passing argument 1 of \n'printMatriz' from incompatible pointer type [-Wincompatible-pointer-types]|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|4|note: expected 'int * (*)[2]' but \nargument is of type 'int (*)[2][2]'|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c||In function 'printMatriz':|\nC:\\Users\\pauli\\.dev\\c\\uvv\\matriz\\main.c|23|warning: format '%i' expects argument \nof type 'int', but argument 2 has type 'int *' [-Wformat=]|\n||=== Build finished: 0 error(s), 2 warning(s) (0 minute(s), 0 second(s)) ===|\n||=== Run: Debug in matriz (compiler: GNU GCC Compiler) ===|\n</code></pre>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define TAM 2\nvoid printMatriz(int *matriz[TAM][TAM]);\n\nint main()\n{\n    int i, j, matriz[TAM][TAM];\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"Matriz[%i][%i] = \", i, j);\n            scanf(\"%i\", &amp;matriz[i][j]);\n        }\n    }\n    printMatriz(&amp;matriz);\n    return 0;\n}\nvoid printMatriz(int *matriz[TAM][TAM])\n{\n    int i, j;\n    for(i = 0; i &lt; TAM; i++) {\n        for(j = 0; j &lt; TAM; j++) {\n            printf(\"%i\\t\", matriz[j][i]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 937, "user_id": 9242445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IaxD.jpg?s=128&g=1", "display_name": "Marker", "link": "https://stackoverflow.com/users/9242445/marker"}, "edited": false, "score": 0, "creation_date": 1536711758, "post_id": 52285719, "comment_id": 91519813, "body": "You would have to either pass the number of entries in the array to the function, or use a special value (NaN, INF) as an indicator that you have reached the end of the array.  BTW, &quot;float *deposit[25]&quot; is an array of 25 pointers to a float, are you sure you don&#39;t want &quot;float deposit[25]&quot; or even &quot; float deposit[]&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1536711703, "creation_date": 1536711703, "answer_id": 52285779, "question_id": 52285719, "link": "https://stackoverflow.com/questions/52285719/quick-question-how-to-say-if-i-the-max-ammount-of-numbers-stored-in-an-array/52285779#52285779", "title": "Quick question: how to say if i &lt; the max ammount of numbers stored in an array?", "body": "<p>C doesn't provide a built-in way to retrieve the value you want, so you have to keep track of it yourself. There's two different ways to do that:</p>\n\n<ol>\n<li>As you're filling up <code>deposit</code>, keep track of how many slots you filled with another variable, then pass that to <code>depositSum</code> too.</li>\n<li>Choose a sentinel value (one that you'll never actually put in <code>deposit</code>, such as 0, -1, Infinity, or NaN). Initialize all of the elements of <code>deposit</code> with that value before you start writing to it. Then in <code>depositSum</code>, stop looping when the next value is a sentinel (or after reading all 25, in case you overwrite the last one and there is no more sentinel).</li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 10307808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-29S4iEyIT0c/AAAAAAAAAAI/AAAAAAAAAc8/wLXLg_7Gdo4/photo.jpg?sz=128", "display_name": "Mixtape Mania", "link": "https://stackoverflow.com/users/10307808/mixtape-mania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1536711703, "creation_date": 1536711125, "question_id": 52285719, "link": "https://stackoverflow.com/questions/52285719/quick-question-how-to-say-if-i-the-max-ammount-of-numbers-stored-in-an-array", "title": "Quick question: how to say if i &lt; the max ammount of numbers stored in an array?", "body": "<p>I need to catch an array as a pointer *deposit[25] this has been altered in other functions at this point, it is being catched from main. I want to calculate the sum of all values entered in the array, that shouldnt be a problem for me except...how would i stop at the last value? </p>\n\n<p>like if i say</p>\n\n<pre><code>void depositSum(float *deposit[25], float *sum)\n{\n    int i = 0;\n\n    for (i = 0; i &lt;= (the ammount of numbers that have been entered into deposit[25]); i++ )\n}\n\nhow would i translate that from pseudocode to actual C???\n</code></pre>\n"}, {"tags": ["c", "function", "math", "gcc", "discrete-mathematics"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1536707410, "post_id": 52285193, "comment_id": 91518861, "body": "The Riemann zeta function is defined as sum(1/n^s for 1 \u2264 n &lt; \u221e) when the real part of s is greater than 1. You are summing n^s (<code>pow(i,s)</code>) rather than 1/n^s (<code>pow(i,-s)</code> or <code>1&#47;pow(i,s)</code>). 1.0369\u2026 is zeta(5). The sum will not converge for negative s. Instead, the function is defined as an analytic continuation and must be computed differently."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1536707931, "post_id": 52285193, "comment_id": 91518987, "body": "Looks like you&#39;re computing zeta(abs(x))..."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536707937, "post_id": 52285193, "comment_id": 91518988, "body": "To add some details to @EricPostpischil comment (shouldn&#39;t it be an answer instead?) The formula for negative integers is <code>S(-n) = (-1)^n * (B_{n+1})&#47;(n + 1)</code> where <code>B_n</code> is the n-th Bernoulli number."}, {"owner": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536708126, "post_id": 52285193, "comment_id": 91519043, "body": "I&#39;m not using abs()! What can I do for negative ones?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1536709022, "post_id": 52285193, "comment_id": 91519241, "body": "@deamentiaemundi: It would be an answer if I were positive, but I never really deal with the zeta function and was just going by stuff I looked up. So I hedged with a comment. Feel free to enter an answering, using my text and information or your own."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536876412, "post_id": 52293207, "comment_id": 91592344, "body": "Even with your zeta() I still having wrong answers to negative odds one...   zeta(-5,1000) = 167167083333250020.000000000000000  the correct is -0.00396825396825396825"}, {"owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "reply_to_user": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536876894, "post_id": 52293207, "comment_id": 91592468, "body": "zeta function with s a real converges only when s&gt;1.0 otherwise it goes to infinity. To get the result you are looking for you need a totally other approach.  You must consider s a complex and as @EricPostpischil said &quot;the function is defined as an analytic continuation and must be computed differently&quot;. For that you can have look at the thesis cited in <a href=\"https://math.stackexchange.com/questions/183680/modern-formula-for-calculating-riemann-zeta-function\" title=\"modern formula for calculating riemann zeta function\">math.stackexchange.com/questions/183680/&hellip;</a>"}, {"owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "reply_to_user": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536877011, "post_id": 52293207, "comment_id": 91592502, "body": "And before you ask. even if you adjust the above code making s complex it wont work and you are back looking at the thesis. But it is a good exercice and kind of mind blowing..."}, {"owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "reply_to_user": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536877152, "post_id": 52293207, "comment_id": 91592539, "body": "On a more fun level you can watch this video <a href=\"https://www.youtube.com/watch?time_continue=10&amp;v=w-I6XTVZXww\" rel=\"nofollow noreferrer\">youtube.com/watch?time_continue=10&amp;v=w-I6XTVZXww</a>"}, {"owner": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536877576, "post_id": 52293207, "comment_id": 91592649, "body": "How to compute differently? I can test if it is negative and apllied the correct for of computation... If I know how to do it. I&#39;m using the Euler-Maclaurin Summation yet on my algorithm..."}, {"owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "reply_to_user": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536878950, "post_id": 52293207, "comment_id": 91592973, "body": "I think this article gives you the limitation of Euler-Maclaurin Summation <a href=\"http://numbers.computation.free.fr/Constants/Miscellaneous/zetaevaluations.pdf\" rel=\"nofollow noreferrer\">numbers.computation.free.fr/Constants/Miscellaneous/&hellip;</a> However if you want you can edit your post with your implementation of Euler-Maclaurin. And we will see if something is off (well it that case it should belong to code review maybe, I don&#39;t know)"}, {"owner": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "edited": false, "score": 0, "creation_date": 1536897358, "post_id": 52293207, "comment_id": 91596448, "body": "I&#39;m not a mathematician, I&#39;m just a newbie trying to program... This equations sounds like greek <i>tu dum tss</i> to me... I need some help with the translation of the equations. My function calculates (n!=1)&gt;infinite on the real plane with a very good approximation, all checked on Wolfram Alpha, it&#39;s perfect the approximation... But I just can&#39;t understend the math of the negatives, I need some clues in human language... Also works on negative evens... But the Odds... It&#39;s making me sick"}], "tags": [], "owner": {"reputation": 2332, "user_id": 7013419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RXUhu.png?s=128&g=1", "display_name": "PilouPili", "link": "https://stackoverflow.com/users/7013419/piloupili"}, "is_accepted": false, "score": 1, "last_activity_date": 1536750155, "last_edit_date": 1536750155, "creation_date": 1536748799, "answer_id": 52293207, "question_id": 52285193, "link": "https://stackoverflow.com/questions/52285193/riemann-zeta-function-in-c-for-negatives-odd-reals/52293207#52293207", "title": "Riemann Zeta function in C for negative&#39;s odd reals", "body": "<p>I did not participate in comments, sorry.</p>\n\n<p>following the definition of the zeta-function the simple way of coding is (I just changed s to -s from your code, and added the 'level of convergence n' as a parameter)</p>\n\n<pre><code>double zeta_simple(double s, long long int n)\n{\n    double p=0.0;\n    long long int i;\n    for(i=1; i&lt;=n; i++)\n    {\n\n        p+=pow(i,-s);\n    }\n    return p;\n}\n</code></pre>\n\n<p>However the problem is that you start adding the \"big\" numbers before the \"small\" and soon you will hit underflow operation. So what you want to do is</p>\n\n<pre><code>double zeta(double s, long long int n)\n{\n    double p=0.0;\n    long long int i;\n    for(i=n; i&gt;0; i--)\n    {\n\n        p+=pow(i,-s);\n    }\n    return p;\n}\n</code></pre>\n\n<p>you can test convergence with s=2 which converges to PI^2/6.0 and s=4 which converges to PI^4/90.0</p>\n\n<pre><code>#define PI 3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679L\nint main()\n{\n      long long int n;\n      for (long long int n=10; n&lt;=100000000; n*=10)\n      {\n        printf(\"%28.16f\\t %28.16f\\n\", zeta(4.0, n), zeta2(4.0, n));\n      }\n      printf(\"%s=%20.16f\\n\\n\",\"PI^4/90\", PI*PI*PI*PI/90.0);\n\n      for (long long int n=10; n&lt;=10000000000; n*=10)\n      {\n        printf(\"%28.16f\\t %28.16f\\n\", zeta(2.0, n), zeta2(2.0, n));\n      }\n      printf(\"%s=%20.16f\\n\",\"PI^2/6 \", PI*PI/6.0);\n}\n</code></pre>\n\n<p>you get</p>\n\n<pre><code>          1.0820365834937564               1.0820365834937566\n          1.0823229053444732               1.0823229053444725\n          1.0823232333783044               1.0823232333783073\n          1.0823232337108049               1.0823232337108359\n          1.0823232337111379               1.0823232337109849\n          1.0823232337111381               1.0823232337109849\n          1.0823232337111381               1.0823232337109849\n          1.0823232337111381               1.0823232337109849\nPI^4/90=  1.0823232337111379\n\n          1.5497677311665408               1.5497677311665408\n          1.6349839001848929               1.6349839001848925\n          1.6439345666815597               1.6439345666815606\n          1.6448340718480596               1.6448340718480665\n          1.6449240668982261               1.6449240668982523\n          1.6449330668487265               1.6449330668487985\n          1.6449339668482315               1.6449339668477756\n          1.6449340568482265               1.6449340573291047\n          1.6449340658482263               1.6449340600880324\n          1.6449340667482264               1.6449340600880324\nPI^2/6 =  1.6449340668482264\n</code></pre>\n\n<p>see how the convergence of <code>zeta_simple</code> stops after a while... For convergence to continue you have to use <code>zeta</code></p>\n\n<p>You can also see that for 10000000000 operations (hence the use of long long int) you only get a precision on 9 digits for s=2. And as s increase so does the rate of convergence.</p>\n\n<p>Therefore for small s to be efficient people use accelerated convergence formulae.</p>\n\n<p>If you want to dig further I recommend you look at <a href=\"https://math.stackexchange.com/questions/183680/modern-formula-for-calculating-riemann-zeta-function\">https://math.stackexchange.com/questions/183680/modern-formula-for-calculating-riemann-zeta-function</a></p>\n\n<p>Also wat is really interesting is when you start poking around with <code>s</code> complex</p>\n"}], "owner": {"reputation": 174, "user_id": 4844227, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/736389596480662/picture?type=large", "display_name": "Victor Melo", "link": "https://stackoverflow.com/users/4844227/victor-melo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1536877262, "creation_date": 1536706425, "last_edit_date": 1536877262, "question_id": 52285193, "link": "https://stackoverflow.com/questions/52285193/riemann-zeta-function-in-c-for-negatives-odd-reals", "title": "Riemann Zeta function in C for negative&#39;s odd reals", "body": "<p>I'm trying to code the Riemann Zeta function in C but I'm having quite issues with the negative odds one. Since Even negatives are 0 by definition. Only for Real numbers the function, not complex. So 0..1 it's <strong>undefined</strong>. I know it's some math error I'm doing, but I started today to read about this function and I'm trying to learn. </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Riemann_zeta_function\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Riemann_zeta_function</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\ndouble zeta(double s, long long int n)\n{\n    double p=0.0;\n    if(s&lt;0 &amp;&amp; fmod(s,2)==0)\n    {\n        return p;\n    }\n    if(s==0) { return -0.5;}\n    if(s&gt;0 &amp;&amp; s&lt;=1)\n    {\n        puts(\"Undefined. \");\n        exit(-1);\n    }\n    long long int i;\n    for(i=n; i&gt;0; i--)\n    {\n\n        p+=pow(i,-s);\n    }\n    return p;\n}\n\nint main()\n{\n    double s;\n    puts(\"Enter real number to Zeta function: \");\n    scanf(\"%lf\",&amp;s);\n    printf(\"\\n%.15lf\",zeta(s,1000000));\n    return 0;\n\n}\n</code></pre>\n\n<p>It's just a sketch... Nothing professional here! </p>\n\n<p>example: zeta(-5) = -0.003968253968253\nit's giving 1.036927755143338...</p>\n\n<p>I'm only having issues with <strong>NEGATIVE REAL</strong> ones...\nI'm on Windows 10, Codeblocks with GCC.</p>\n\n<p>The code was update with the @NPE contributions but still not working for negative real odds... </p>\n"}, {"tags": ["c", "numerical-methods"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 7, "creation_date": 1536700777, "post_id": 52284303, "comment_id": 91516915, "body": "&#39;but my numerical solution is coming same as to the analytical solution&#39;..... so..... is that a problem?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1536700788, "post_id": 52284303, "comment_id": 91516921, "body": "Aside: <code>for(i=0;i&lt;=n-1;i++)</code> is poor style for two reasons. <code>for(i=0;i&lt;n;i++)</code> is idiomatic because it is more readable and less work for the brain, and if <code>n</code> is unsigned and <code>0</code> the ending condition will fail."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1536700789, "post_id": 52284303, "comment_id": 91516923, "body": "please properly format and indent your code. It&#39;s pretty unreadable now."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536700794, "post_id": 52284303, "comment_id": 91516927, "body": "Why is it a <i>problem</i> that the numerical solution exactly matches the analytical solution up to any given precision?  Surely, one hopes to maximimize the precision to which one&#39;s numerical algorithms reproduce the exact analytical solution, yes?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1536700818, "post_id": 52284303, "comment_id": 91516938, "body": "what is the expected result?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536701032, "post_id": 52284303, "comment_id": 91517018, "body": "And you do know, do you not, that in most C implementations, type <code>double</code> is good for about <b>16</b> decimal digits?  That&#39;s <i>ten orders of magnitude</i> more precision than you&#39;re looking at."}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536702769, "post_id": 52284303, "comment_id": 91517613, "body": "What happens to the truncation error ( with taylor series truncation ) and the round off error of the system ?"}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536702825, "post_id": 52284303, "comment_id": 91517632, "body": "@chux yes, it&#39;s T(x3) thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536751743, "post_id": 52284303, "comment_id": 91535803, "body": "Anshuman Sinha, Is TDMA --&gt; Tridiagonal matrix algorithm? What is cfd? (Computational fluid dynamics ?)"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536703310, "post_id": 52284688, "comment_id": 91517775, "body": "@Anshuman Sinha With printing more precision, how does your output compare?"}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536724068, "post_id": 52284688, "comment_id": 91522197, "body": "your above code { printf(&quot;T analytical %.*e\\t%a\\n&quot;, DBL_DECIMAL_DIG - 1, z[i], z[i]); } . is not working in my programme . The following error shows up :  main.c: In function \u2018main\u2019: main.c:26:43: error: \u2018DBL_DECIMAL_DIG\u2019 undeclared (first use in this function)          printf(&quot;T analytical %.*e\\t%a\\n&quot;, DBL_DECIMAL_DIG - 1, z[i], z[i]);"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536724217, "post_id": 52284688, "comment_id": 91522226, "body": "@AnshumanSinha Did you include <code>#include&lt;float.h&gt;</code>?  What C compiler/version are you using?  Is it C99 compliant?  (<code>DBL_DECIMAL_DIG</code> was introduced in C99) If you still have trouble, replace <code>DBL_DECIMAL_DIG</code> with <code>17</code> or <code>(DBL_DIG + 3)</code>"}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536744877, "post_id": 52284688, "comment_id": 91531750, "body": "yes I did include #include&lt;float.h&gt; . I am using an online compiler from the website onlinegdb.com."}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536745097, "post_id": 52284688, "comment_id": 91531872, "body": "It&#39;s running with 17. how to interpret the result ?  T analytical 1.19047619047619041e-01    0x1.e79e79e79e79ep-4 , what&#39;s the meaning of 1.19047619047619041e-01 and 0x1.e79e79e79e79ep-4 together ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536750549, "post_id": 52284688, "comment_id": 91535130, "body": "@AnshumanSinha 1.19047619047619041e-01 is a <i>decimal</i> textual representation of <code>z[1]</code>.  <code>0x1.e79e79e79e79ep-4</code> is a textual representation of <code>z[1]</code> showing a <i>hexadecimal</i>  significant <code>0x1.e79e79e79e79e</code> and a decimal  power of 2, <code>-4</code>.  It maps very close to the <code>double</code> bit patten that encodes <code>z[1]</code>.  This is useful for understanding how &quot;different&quot; two nearby <code>double</code> are - the key to the incorrect assertion &quot;the numerical solution coming same&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536751607, "post_id": 52284688, "comment_id": 91535723, "body": "@AnshumanSinha My &quot;(DBL_DECIMAL_DIG was introduced in C99)&quot; is incorrect.      <code>DBL_DECIMAL_DIG</code> came out in C11 and onlinegdb.com version of C is C99. (<code>printf(&quot;%ld\\n&quot;, __STDC_VERSION__)</code> reports <code>199901</code>.)  Use <code>17</code> for now.  Back to the 1st question: With printing more precision, how does your output compare?  For me with onlinegdb.com, your results are likely the same as posted in this answer."}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536756407, "post_id": 52284688, "comment_id": 91538657, "body": "The above comment is not getting deleted but my solution is only similar for last T values , but the other three are still coming same for both numerical and analytical upto the 17 decimal places."}, {"owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536756550, "post_id": 52284688, "comment_id": 91538770, "body": "other students are getting difference in analytical and numerical at the 4th decimal place only."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "edited": false, "score": 0, "creation_date": 1536756825, "post_id": 52284688, "comment_id": 91539006, "body": "@AnshumanSinha  If the real question is why your results differ from the results of another program, it is useful to post both sources codes of both programs, their exact outputs, and the expected output - else too much guess work is involved.  To be fair, take time to answers <a href=\"https://stackoverflow.com/questions/52284303/why-is-the-numerical-solution-coming-same-as-analytical-solution-in-c-language/52284688?noredirect=1#comment91535803_52284303\">questions</a> before going further."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1536703585, "last_edit_date": 1536703585, "creation_date": 1536702733, "answer_id": 52284688, "question_id": 52284303, "link": "https://stackoverflow.com/questions/52284303/why-is-the-numerical-solution-coming-same-as-analytical-solution-in-c-language/52284688#52284688", "title": "Why is the numerical solution coming same as analytical solution in C language?", "body": "<blockquote>\n  <p>Why is the numerical solution coming same as analytical solution in C language?</p>\n</blockquote>\n\n<p>They differ, by about 3 bits.</p>\n\n<p>Print with enough precision to see the difference.</p>\n\n<p>Using the below, we see a a difference in the last hexdigit of the significant of x620 vs x619 of <code>T[3]</code>.  This is only 1 part in 10<sup>15</sup> difference.</p>\n\n<pre><code>#include&lt;float.h&gt;\nprintf(\"T analytical %.*e\\t%a\\n\", DBL_DECIMAL_DIG - 1, z[i], z[i]);\nprintf(\"T numerical  %.*e\\t%a\\n\", DBL_DECIMAL_DIG - 1, T[i], T[i]);\n</code></pre>\n\n<p>C allows <code>double</code> math to be performed at <code>long double</code> math when <code>FLT_EVAL_METHOD == 2</code> and then the same analytical/numerical results. Your results may differ from mine due to that as well as other subtle FP nuances.</p>\n\n<pre><code>printf(\"FLT_EVAL_METHOD %d\\n\", FLT_EVAL_METHOD);\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>T analytical 0.0000000000000000e+00 0x0p+0\nT analytical 1.1904761904761907e-01 0x1.e79e79e79e7ap-4\nT analytical 1.2698412698412700e-01 0x1.0410410410411p-3\nT analytical 2.3809523809523836e-02 0x1.861861861862p-6\n\nT numerical  0.0000000000000000e+00 0x0p+0\nT numerical  1.1904761904761904e-01 0x1.e79e79e79e79ep-4\nT numerical  1.2698412698412698e-01 0x1.041041041041p-3\nT numerical  2.3809523809523812e-02 0x1.8618618618619p-6\n\nFLT_EVAL_METHOD 0\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9043769, "user_type": "registered", "profile_image": "https://graph.facebook.com/2101492076543039/picture?type=large", "display_name": "Anshuman Sinha", "link": "https://stackoverflow.com/users/9043769/anshuman-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536703585, "creation_date": 1536700407, "last_edit_date": 1536702853, "question_id": 52284303, "link": "https://stackoverflow.com/questions/52284303/why-is-the-numerical-solution-coming-same-as-analytical-solution-in-c-language", "title": "Why is the numerical solution coming same as analytical solution in C language?", "body": "<p>I have coded a 1 Dimmension cfd problem but my numerical solution is coming same as to the analytical solution (upto 6 decimal places). </p>\n\n<p>I am using TDMA method for numerical solution and for the analytical solution I am directly substituting the x value in the function T(x).</p>\n\n<p>Analytical solution T(x) comes out to be <code>T(x) = -(x^2)/2 +11/21(x);</code></p>\n\n<p>E. g. 4 grid points then ; </p>\n\n<pre><code>  x0  = 0.000000,    x1  = 0.333333 ,   x2  = 0.666666 ,   x3  = 0.999999 .\nT(x0) = 0.000000 , T(x1) = 0.119048 , T(x2) = 0.126984 , T(x3) = 0.023810.\n</code></pre>\n\n<p>And for numerical solution I have used TDMA technique, please refer the code below. </p>\n\n<p>Enter n = 4 for the results.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid temp_matrix(int n, double *a, double *b, double *c, double *d, double *T);\n\nint main() {\n  int Bi = 20.0;\n  int n;\n  printf(\"%s \", \"Enter the Number of total Grid Points\");\n  scanf(\"%d\", &amp;n);\n  float t = (n - 1);\n  double dx = 1.0 / t;\n  int i;\n  printf(\"\\n\");\n\n  double q; // analytical solution below\n  double z[n];\n  for (i = 0; i &lt;= n - 1; i++) {\n    q = (dx) * i;\n    z[i] = -(q * q) / 2 + q * (11.0 / 21);\n    printf(\"\\nT analytical %lf \", z[i]);\n  }\n\n  double b[n - 1];\n  b[n - 2] = -2.0 * Bi * dx - 2.0;\n  for (i = 0; i &lt;= n - 3; i++) {\n    b[i] = -2.0;\n  }\n\n  double a[n - 1];\n  a[n - 2] = 2.0;\n  a[0] = 0;\n  for (i = 1; i &lt; n - 2; i++) {\n    a[i] = 1.0;\n  }\n\n  double c[n - 1];\n  for (i = 0; i &lt;= n - 2; i++) {\n    c[i] = 1.0;\n  }\n\n  double d[n - 1];\n  for (i = 0; i &lt;= n - 2; i++) {\n    d[i] = -(dx * dx);\n  }\n\n  double T[n];\n  temp_matrix(n, a, b, c, d, T);\n\n  return 0;\n}\n\nvoid temp_matrix(int n, double *a, double *b, double *c, double *d, double *T) {\n  int i;\n  double beta[n - 1];\n  double gama[n - 1];\n  beta[0] = b[0];\n  gama[0] = d[0] / beta[0];\n  for (i = 1; i &lt;= n - 2; i++) {\n    beta[i] = b[i] - a[i] * (c[i - 1] / beta[i - 1]);\n    gama[i] = (d[i] - a[i] * gama[i - 1]) / beta[i];\n  }\n  int loop;\n  for (loop = 0; loop &lt; n - 1; loop++)\n    for (loop = 0; loop &lt; n - 1; loop++)\n\n      T[0] = 0;\n  T[n - 1] = gama[n - 2];\n\n  for (i = n - 2; i &gt;= 1; i--) {\n    T[i] = gama[i - 1] - (c[i - 1] * (T[i + 1])) / beta[i - 1];\n  }\n  printf(\"\\n\");\n  for (i = 0; i &lt; n; i++) {\n    printf(\"\\nT numerical %lf\", T[i]);\n\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "networking", "terminal", "network-programming"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536699485, "post_id": 52284044, "comment_id": 91516424, "body": "Try using <code>strcat(response,&quot; &gt;&gt; out.txt&quot;);</code>"}, {"owner": {"reputation": 460, "user_id": 9434838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657662b65060e28ebf01b35332a545f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kasper", "link": "https://stackoverflow.com/users/9434838/kasper"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536699930, "post_id": 52284044, "comment_id": 91516597, "body": "doesn&#39;t work - the only difference it will list all command results"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1536701980, "post_id": 52284044, "comment_id": 91517338, "body": "If you&#39;re on a POSIX system, consider using <a href=\"http://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">popen</a>."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1536704131, "post_id": 52284044, "comment_id": 91518042, "body": "Consider <code>freopen</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1536706189, "post_id": 52284044, "comment_id": 91518577, "body": "Imagine what would happen if someone runs <code>echo &quot;rm -rf &#47;&quot; | telnet &lt;your_ip&gt; 9002</code> on your network :)"}, {"owner": {"reputation": 460, "user_id": 9434838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657662b65060e28ebf01b35332a545f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kasper", "link": "https://stackoverflow.com/users/9434838/kasper"}, "edited": false, "score": 0, "creation_date": 1536729650, "post_id": 52284044, "comment_id": 91523545, "body": "I tried both ways (popen,freopen) before , but the error messages will not printed in the file in both"}, {"owner": {"reputation": 460, "user_id": 9434838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657662b65060e28ebf01b35332a545f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kasper", "link": "https://stackoverflow.com/users/9434838/kasper"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1536729744, "post_id": 52284044, "comment_id": 91523582, "body": "@AjayBrahmakshatriya in my case I&#39;m sure I&#39;m in the safe side , because nobody in my network :3"}], "answers": [{"tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 4, "last_activity_date": 1536700526, "last_edit_date": 1536700526, "creation_date": 1536700205, "answer_id": 52284267, "question_id": 52284044, "link": "https://stackoverflow.com/questions/52284044/how-to-print-systemcommand-output-to-file-c/52284267#52284267", "title": "how to print system(command) output to file C?", "body": "<p>A command's output and its error/status messages are cleanly separated so that you don't have to worry about error messages corrupting the program's expected output. </p>\n\n<p><code>1&gt;</code> aka <code>&gt;</code> only redirects output, while <code>2&gt;</code> only redirects errors:</p>\n\n<pre><code>$ ls -l myfile filethatdoesntexist &gt; output 2&gt; errors\n\n$ cat output\n-rw-r--r-- 1 me me 42 Sep 11 14:08 myfile\n\n$ cat errors\nls: cannot access 'filethatdoesntexist': No such file or directory\n</code></pre>\n\n<p>If you want to write both to the same file, the shell construct to use is <code>&gt; file 2&gt;&amp;1</code></p>\n\n<pre><code>$ ls -l myfile filethatdoesntexist &gt; out.txt 2&gt;&amp;1\n\n$ cat out.txt\nls: cannot access 'filethatdoesntexist': No such file or directory\n-rw-r--r-- 1 me me 42 Sep 11 14:08 myfile\n</code></pre>\n\n<p>So you could change your suffix to:</p>\n\n<pre><code>strcat(response,\" &gt; out.txt 2&gt;&amp;1\");\n</code></pre>\n"}], "owner": {"reputation": 460, "user_id": 9434838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/657662b65060e28ebf01b35332a545f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kasper", "link": "https://stackoverflow.com/users/9434838/kasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 0, "accepted_answer_id": 52284267, "answer_count": 1, "score": 2, "last_activity_date": 1585670717, "creation_date": 1536699086, "last_edit_date": 1585670717, "question_id": 52284044, "link": "https://stackoverflow.com/questions/52284044/how-to-print-systemcommand-output-to-file-c", "title": "how to print system(command) output to file C?", "body": "<p>I'm learning C network programming.</p>\n\n<p>now I'm trying to print the output of commands coming from client to file in the server's folder.</p>\n\n<p>Server Code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\nint read_size;\nchar Message[1024]=\"Hello client , I'm the Server\";\n\nint check(char *msg){return !strcmp(msg,\"exit\");}\n\nint main(){\n    //creat socket\n    int soc;\n    soc = socket(AF_INET, SOCK_STREAM, 0);\n\n    //define server address\n    struct sockaddr_in server_address;\n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(9002);\n    server_address.sin_addr.s_addr = INADDR_ANY;\n\n    //bind the socket to ip and port\n    bind(soc, (struct sockaddr*) &amp;server_address, sizeof(server_address));\n\n    listen(soc, 5);\n\n    puts(\"Listening...\");\n\n    int client_soc;\n    client_soc = accept(soc, 0, 0);\n    //send the message\n    send(client_soc, Message, sizeof(Message), 0);\n    if(client_soc&lt;0){\n        puts(\"Connection Error\");\n        return 0;\n    }   \n    puts(\"Connected\");\n\n    //Receive a message from client\n    while(1){\n        char response[1024]=\"\";\n        recv(client_soc,response, 1024, 0);\n        //fflush(stdout);\n\n        if(check(response)){\n                        puts(\"Disconnected !\");\n                        break;\n                }\n\n        strcat(response,\" &gt; out.txt\");\n        int sys = system(response);\n\n        if(sys != 0)//worng command enterd\n            printf(\"Worng Command\");\n\n\n    }\n    //close the sockets\n    close(client_soc);\n    close(soc);\n    return 0;\n}\n</code></pre>\n\n<p>Client Code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\nchar response[1024];\nchar Message[1024];\n\nint check(char *msg){\n        return !strcmp(msg,\"exit\");\n}\nint main(){\n        //creat a socket\n        int soc;\n        soc = socket(AF_INET, SOCK_STREAM, 0);\n\n    //specify an address for the socket\n    struct sockaddr_in server_address;\n    server_address.sin_family = AF_INET;\n    server_address.sin_port = htons(9002);\n    server_address.sin_addr.s_addr = INADDR_ANY;\n    int con = connect(soc , (struct sockaddr *) &amp;server_address , sizeof(server_address));\n\n    //check for error with the connection\n    if(con == -1){\n        puts(\"Connection Error !\");\n        close(soc);\n        exit(0);\n    }\n\n    //recieve data from the server\n    recv(soc, &amp;response, sizeof(response), 0);\n\n    //print recieved data\n    printf(\"Server : %s\\n\",response);   \n\n    //Send message to server\n    //send(soc, Message, strlen(Message), 0);\n    while(1){\n        printf(\"Message For The Server : \");\n        //scanf(\"%s\",Message);\n        gets(Message);\n        send(soc, Message, strlen(Message), 0);\n        //fflush(stdout);\n        if(check(Message)){\n            puts(\"Disconnected !\");\n            break;\n        }\n    }\n    //close the socket\n    close(soc);\n        return 0;\n\n}\n</code></pre>\n\n<p>now the problem is : </p>\n\n<p>when I send a valid command (from the client) the server will print the result in the file without problems , but when I send invalid command it will clean the file and print the output in the terminal.</p>\n\n<p>can I print the wrong message coming from \"system()\" in the file instead of the terminal ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 8, "creation_date": 1536698201, "post_id": 52283831, "comment_id": 91515853, "body": "Not every number is representable as as <code>float</code>. First one is not. <i>any integer can represented by any float in c</i> - this is not true. <code>float</code> might be represented by the same number of bits as <code>int</code>, while it&#39;s range is much wider, including fractional numbers. So by <a href=\"https://en.wikipedia.org/wiki/Pigeonhole_principle\" rel=\"nofollow noreferrer\">pigeonhole principle</a> , it cannot represent all of the integers."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 3, "creation_date": 1536698202, "post_id": 52283831, "comment_id": 91515854, "body": "&quot;<i>I thought any integer can represented by any float in c</i>&quot;.  Well now you know that is incorrect.  Floats have limited precision.  I recommend reading up on the IEEE 754 standard for specification of how floating point numbers work. <a href=\"https://en.wikipedia.org/wiki/IEEE_floating-point_standard\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/IEEE_floating-point_standard</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1536698593, "post_id": 52283831, "comment_id": 91516006, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/759201/representing-integers-in-doubles\">Representing integers in doubles</a>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536701363, "post_id": 52283831, "comment_id": 91517128, "body": "Integers are 32 bits, and floats are 32 bits for both mantissa and exponent. so by pidgeonhole principle alone there will be many integers not exactly representable as float. You can get all the 32-bit integers into a double."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1536707633, "post_id": 52283831, "comment_id": 91518908, "body": "@LeeDanielCrocker: &quot;Integers are 32 bits, and floats are 32 bits &quot; - That&#39;s not guaranteed and depends on the implementation."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1536708128, "post_id": 52283831, "comment_id": 91519044, "body": "True, but it&#39;s probably the OP&#39;s case."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1536714500, "post_id": 52283831, "comment_id": 91520358, "body": "The bottom line here is &quot;use doubles&quot;. Unless you really have a good reason to sacrifice precision, you&#39;ll find doubles to be the best choice."}], "answers": [{"comments": [{"owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "edited": false, "score": 0, "creation_date": 1536698589, "post_id": 52283878, "comment_id": 91516003, "body": "Thanks for the answer, confusion = gone."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536701372, "post_id": 52283878, "comment_id": 91517130, "body": "Not entirely. Any size integer within <code>float</code> range can be exactly encoded as a 32-bit <code>float</code> provided that all its <code>1</code> bits are contained in a range of 24 bits."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1536701696, "post_id": 52283878, "comment_id": 91517241, "body": "Well yes, there are some ints that can still be represented, but not all of them.  Feel free to suggest an edit if you can put that eloquently.  Edit: I changed the wording slightly to be more precise."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536701782, "post_id": 52283878, "comment_id": 91517272, "body": "So for example <code>uint64_t v = 0xFFFFFF0000000000;</code> can be exactly represented in <code>float</code>."}, {"owner": {"reputation": 1733, "user_id": 1472459, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/583f4a0d147f136a5bbc30a29c51abbc?s=128&d=identicon&r=PG", "display_name": "Ed King", "link": "https://stackoverflow.com/users/1472459/ed-king"}, "edited": false, "score": 0, "creation_date": 1536702174, "post_id": 52283878, "comment_id": 91517411, "body": "For some extra fun, my question here might be interesting: <a href=\"https://stackoverflow.com/questions/25182556/rules-of-thumb-for-minimising-floating-point-errors-in-c\" title=\"rules of thumb for minimising floating point errors in c\">stackoverflow.com/questions/25182556/&hellip;</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536702540, "post_id": 52283878, "comment_id": 91517538, "body": "In fact, although there are some <code>int</code>s that can be exactly represented as <code>float</code>s, they constitute less than one percent of all <code>int</code>s (32-bit / 32-bit case).  It just happens that the ones that we most often care specifically about -- smallish ones, primarily -- are disproportionately among the representable ones."}], "tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": true, "score": 10, "last_activity_date": 1536701746, "last_edit_date": 1536701746, "creation_date": 1536698339, "answer_id": 52283878, "question_id": 52283831, "link": "https://stackoverflow.com/questions/52283831/what-is-going-on-with-this-int-to-float-conversion-why-is-it-innacurate/52283878#52283878", "title": "What is going on with this int to float conversion, why is it innacurate?", "body": "<p>Unfortunately, you thought wrong.</p>\n\n<p>On a typical implementation with 32-bit ints and 32-bit floats, it is obvious that a float cannot contain all ints exactly, as some of its bits must be used for the exponent, to make it floating point.</p>\n\n<p>If your platform is IEEE-754 compatible, and your float is single-precision, specifically it breaks up like this:</p>\n\n<ul>\n<li>1 bit - sign</li>\n<li>8 bits - exponent</li>\n<li>24 bits<sup>1</sup> - significand</li>\n</ul>\n\n<p>This means that all integers up to 24 bits can be exactly represented, after that, some precision must necessarily be lost for some numbers.</p>\n\n<p>With the same assumptions, a double will hold all 32-bit integers, as a double has 53 bits of precision.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">Single Precision Format</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow noreferrer\">Double Precision Format</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE-754</a></li>\n</ul>\n\n<p><sup>1</sup>: Only 23 bits are stored, but the top bit is always considered to be 1, for regular numbers.  This means if the top bit needs to be zero, the whole thing is shifted left, and the exponent decreased.  This gets us an extra bit of precision that doesn't need to be stored.</p>\n"}], "owner": {"reputation": 1528, "user_id": 8580574, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/912ad5911e696e7aac0ea9ec35d80057?s=128&d=identicon&r=PG&f=1", "display_name": "PEREZje", "link": "https://stackoverflow.com/users/8580574/perezje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 52283878, "answer_count": 1, "score": 1, "last_activity_date": 1536701746, "creation_date": 1536698102, "question_id": 52283831, "link": "https://stackoverflow.com/questions/52283831/what-is-going-on-with-this-int-to-float-conversion-why-is-it-innacurate", "title": "What is going on with this int to float conversion, why is it innacurate?", "body": "<p>So I've basically got this code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n = 0x7fffffff;\n    float f = n;\n\n    printf(\"%d\\n\", n);\n    printf(\"%f\\n\", f);\n\n    n = 0x00ffffff;\n    f = n;\n\n    printf(\"%d\\n\", n);\n    printf(\"%f\", f);\n}\n</code></pre>\n\n<p>This gives this output:</p>\n\n<pre><code>&gt;     2147483647                                                                             \n&gt;     2147483648.000000                                                                      \n&gt;     16777215                                                                               \n&gt;     16777215.000000\n</code></pre>\n\n<p>Why the difference between the two first numbers, but not the second two numbers. I thought any integer can represented by any float in c. Why does this happen?</p>\n"}, {"tags": ["c", "pointers", "function-pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "edited": false, "score": 0, "creation_date": 1536697683, "post_id": 52283724, "comment_id": 91515660, "body": "What warnings are you getting? Please include them in your question."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1536697723, "post_id": 52283724, "comment_id": 91515674, "body": "<code>char</code> and <code>char*</code> are very different types"}, {"owner": {"reputation": 152, "user_id": 3581328, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f00f0dbabdf6828ffabf3cb541b85475?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/3581328/alan"}, "edited": false, "score": 0, "creation_date": 1536697766, "post_id": 52283724, "comment_id": 91515688, "body": "Try:      char *charTest2 = argv[2];     char *strTest = argv[1];"}, {"owner": {"reputation": 161, "user_id": 7541680, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/283f7d8015897a34bbb9ddf2179eecca?s=128&d=identicon&r=PG&f=1", "display_name": "sudo-potato", "link": "https://stackoverflow.com/users/7541680/sudo-potato"}, "reply_to_user": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "edited": false, "score": 0, "creation_date": 1536697878, "post_id": 52283724, "comment_id": 91515733, "body": "@HarryCutts I&#39;ve edited my post to include them."}, {"owner": {"reputation": 161, "user_id": 7541680, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/283f7d8015897a34bbb9ddf2179eecca?s=128&d=identicon&r=PG&f=1", "display_name": "sudo-potato", "link": "https://stackoverflow.com/users/7541680/sudo-potato"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1536697884, "post_id": 52283724, "comment_id": 91515736, "body": "@UnholySheep I understand that, do you mind explaining how they differ so I can better understand?"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 7541680, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/283f7d8015897a34bbb9ddf2179eecca?s=128&d=identicon&r=PG&f=1", "display_name": "sudo-potato", "link": "https://stackoverflow.com/users/7541680/sudo-potato"}, "edited": false, "score": 0, "creation_date": 1536698665, "post_id": 52283793, "comment_id": 91516037, "body": "I&#39;ve followed your steps using strdup and am now getting 2 warnings. Please see above edit.  <code>Removing3.c:12:8: warning: incompatible integer to pointer conversion initializing &#39;char *&#39; with an       expression of type &#39;char&#39;; remove * [-Wint-conversion]         char *charTest2 = *argv[2];               ^           ~~~~~~~~  Removing3.c:30:20: warning: comparison between pointer and integer (&#39;int&#39; and &#39;char *&#39;)         pw += (*pw != c);                ~~~ ^  ~ 2 warnings generated.</code>"}, {"owner": {"reputation": 161, "user_id": 7541680, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/283f7d8015897a34bbb9ddf2179eecca?s=128&d=identicon&r=PG&f=1", "display_name": "sudo-potato", "link": "https://stackoverflow.com/users/7541680/sudo-potato"}, "edited": false, "score": 0, "creation_date": 1536699302, "post_id": 52283793, "comment_id": 91516344, "body": "Thanks for your help. More importantly, thanks for explaining why your code works."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1536699109, "last_edit_date": 1536699109, "creation_date": 1536697868, "answer_id": 52283793, "question_id": 52283724, "link": "https://stackoverflow.com/questions/52283724/issues-with-passing-pointers-to-function/52283793#52283793", "title": "Issues with Passing Pointers to Function", "body": "<p>Your function takes arguments of type <code>char*</code>, but your local variables <code>char charTest2 = *argv[2]; char strTest = *argv[1]</code> are of type <code>char</code>. A variable of type <code>char</code> is capable of holding one single character, and your variables will hold the first letter of the respective <code>argv</code> then. A <code>char *</code>, in contrast, is a pointer to a character in memory; it often points to the first of a sequence of characters, then treated as a \"string\"; the sequence (i.e. the string) ends with the string termination character <code>'\\0'</code>, i.e. a <code>0</code>-value.</p>\n\n<p>First, change them to <code>char*</code>; Second: I'd avoid to change the strings in <code>argv</code> directly but rather make a copy:</p>\n\n<pre><code>char *strTest = strdup(argv[1]); \nchar *charTest2 = argv[2]; // will not be changed; no copy necessary\n</code></pre>\n\n<p>If <code>strdup</code> is not available, you could write:</p>\n\n<pre><code>char *strTest = malloc(strlen(argv[1])+1);\nstrcpy(strTest,argv[1]);\n</code></pre>\n\n<p>And you need to change</p>\n\n<pre><code>    pw += (*pw != c);\n</code></pre>\n\n<p>into </p>\n\n<pre><code>    pw += (*pw != *c);\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 7541680, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/283f7d8015897a34bbb9ddf2179eecca?s=128&d=identicon&r=PG&f=1", "display_name": "sudo-potato", "link": "https://stackoverflow.com/users/7541680/sudo-potato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 52283793, "answer_count": 1, "score": 0, "last_activity_date": 1536699109, "creation_date": 1536697516, "last_edit_date": 1536698851, "question_id": 52283724, "link": "https://stackoverflow.com/questions/52283724/issues-with-passing-pointers-to-function", "title": "Issues with Passing Pointers to Function", "body": "<p>I'm trying to write something that will take two command line arguments (a word, and a letter), and remove all instances of that letter from the word. For example, if I pass Hello and e, Hllo should be the resulting String.</p>\n\n<p>I'm trying to do this using pointers, and reducing unnecessary local variables for efficiency. When compiling I'm getting obvious incompatibility warnings, and I know it has something to do with my pointers. If I use local variables and just pass those, everything works perfect - so my understanding of pointers is obviously flawed.</p>\n\n<p>Any pointers (no pun intended) would be greatly appreciated!</p>\n\n<pre><code>// Function Prototypes\nvoid remove_all_chars(char *, char *);\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) { //Function parameters allow for CLI arguments\n\n    printf(\"%s\\n\", argv[1]);\n    printf(\"%s\\n\", argv[2]);\n    char *charTest2 = *argv[2];\n    char *strTest = strdup(argv[1]);\n    //char strTest[20];\n    //char charTest[20];\n    //strncpy(strTest, argv[1], 10);\n    //strTest[0] = *argv[1];\n    remove_all_chars(strTest, charTest2);\n    printf(\"%s\", strTest);\n\n    return 0;\n\n}\n\n\nvoid remove_all_chars(char *str, char *c) {\n    char *pr = str, *pw = str;\n    while (*pr) {\n        *pw = *pr++;\n        pw += (*pw != c);\n    }\n    *pw = '\\0';\n}\n</code></pre>\n\n<p>EDIT: After add <code>char*</code> to my data types, I end up with the following warnings:</p>\n\n<pre><code>Removing3.c:12:8: warning: incompatible integer to pointer conversion initializing 'char *' with an\n      expression of type 'char'; remove * [-Wint-conversion]\n        char *charTest2 = *argv[2];\n              ^           ~~~~~~~~\nRemoving3.c:30:20: warning: comparison between pointer and integer ('int' and 'char *')\n        pw += (*pw != c);\n               ~~~ ^  ~\n2 warnings generated.\n</code></pre>\n\n<p>EDIT: Here are the warnings</p>\n\n<pre><code>Removing3.c:18:19: warning: incompatible integer to pointer conversion passing 'char' to parameter of\n      type 'char *'; take the address with &amp; [-Wint-conversion]\n        remove_all_chars(strTest, charTest2);\n                         ^~~~~~~\n                         &amp;\nRemoving3.c:2:29: note: passing argument to parameter here\nvoid remove_all_chars(char *, char *);\n                            ^\nRemoving3.c:18:28: warning: incompatible integer to pointer conversion passing 'char' to parameter of\n      type 'char *'; take the address with &amp; [-Wint-conversion]\n        remove_all_chars(strTest, charTest2);\n                                  ^~~~~~~~~\n                                  &amp;\nRemoving3.c:2:37: note: passing argument to parameter here\nvoid remove_all_chars(char *, char *);\n                                    ^\nRemoving3.c:19:15: warning: format specifies type 'char *' but the argument has type 'char' [-Wformat]\n        printf(\"%s\", strTest);\n                ~~   ^~~~~~~\n                %c\nRemoving3.c:30:20: warning: comparison between pointer and integer ('int' and 'char *')\n        pw += (*pw != c);\n               ~~~ ^  ~\n4 warnings generated.\n</code></pre>\n"}, {"tags": ["c", "ocaml"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1536695555, "post_id": 52283220, "comment_id": 91514731, "body": "&quot;doesn&#39;t work&quot; is not a problem description. Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536695632, "post_id": 52283220, "comment_id": 91514764, "body": "Your C code doesn&#39;t even compile (<code>return 0</code> in a function returning <code>void</code>)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536695700, "post_id": 52283220, "comment_id": 91514784, "body": "<code>if c=false then false else true</code> can be simplified to <code>c</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1536695720, "post_id": 52283220, "comment_id": 91514792, "body": "<code>c=false</code> looks like a type error to me."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536695730, "post_id": 52283220, "comment_id": 91514798, "body": "Why does <code>b</code> even exist?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1536697179, "post_id": 52283220, "comment_id": 91515462, "body": "I saw at least three problems with that. You should start by looking at the error messages and fixing the first one, and then the next, and so on. If you update your post to include the errors you don&#39;t understand you might get more useful help."}, {"owner": {"reputation": 1, "user_id": 10349397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q6J3C.jpg?s=128&g=1", "display_name": "MirageCommander", "link": "https://stackoverflow.com/users/10349397/miragecommander"}, "edited": false, "score": 0, "creation_date": 1536853868, "post_id": 52283220, "comment_id": 91582156, "body": "hey melpomene, thank you for replying., My C code does work, and i have run it several times."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536856591, "post_id": 52283220, "comment_id": 91583554, "body": "@MirageCommander Please post answers as answers; don&#39;t edit them into the question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536856804, "post_id": 52283220, "comment_id": 91583667, "body": "@MirageCommander Then either you&#39;re ignoring warnings or you&#39;re using a non-conforming C compiler. The C standard requires a diagnostic message for a <code>return</code> statement with an expression in a function whose return type is <code>void</code>. (Note that in the case of gcc you need to use <code>gcc -pedantic</code> to get all error messages required by the standard.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536856855, "post_id": 52283220, "comment_id": 91583692, "body": "<code>if !c then true else false</code> can be simplified to <code>!c</code>."}], "answers": [{"tags": [], "owner": {"reputation": 57265, "user_id": 821679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f564c4721ee3125fa835f6c3a5283c?s=128&d=identicon&r=PG", "display_name": "Jeffrey Scofield", "link": "https://stackoverflow.com/users/821679/jeffrey-scofield"}, "is_accepted": false, "score": 0, "last_activity_date": 1536695590, "creation_date": 1536695590, "answer_id": 52283289, "question_id": 52283220, "link": "https://stackoverflow.com/questions/52283220/why-my-while-loop-in-ocaml-doesnt-work-as-expected/52283289#52283289", "title": "Why my while loop in OCaml doesn&#39;t work as expected?", "body": "<p>One possibility: your C code has <code>while (b &lt;= pri)</code>. Your OCaml code has <code>while !b &lt; n</code>. The meanings of <code>&lt;=</code> in C and <code>&lt;</code> in OCaml are different.</p>\n"}], "owner": {"reputation": 1, "user_id": 10349397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q6J3C.jpg?s=128&g=1", "display_name": "MirageCommander", "link": "https://stackoverflow.com/users/10349397/miragecommander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1536854396, "creation_date": 1536695239, "last_edit_date": 1536854396, "question_id": 52283220, "link": "https://stackoverflow.com/questions/52283220/why-my-while-loop-in-ocaml-doesnt-work-as-expected", "title": "Why my while loop in OCaml doesn&#39;t work as expected?", "body": "<p>I am trying to translate this C code to OCaml code, which should check if the input int is prime number or not. My C code works, but my ocaml code doesn't even run.</p>\n\n<pre><code>void is_prime(int pri){\n    int a=2;\n    int b=poww(a,2);\n    while(b&lt;=pri){\n       int resu=pri%a;\n       if(resu==0) {\n            printf(\"False\");\n            return 0;\n       }\n       a++;\n       b=poww(a,2);\n    }\n    printf(\"True\");\n}\n</code></pre>\n\n<p>And this is my OCaml code:</p>\n\n<pre><code>let is_prime n = \n  let a= ref 2 in\n  let b= ref (pow !a 2) in \n  let c= ref true in\n  while !b&lt;n do\n    let resu= (n mod !a) in\n    if resu=0 then c:=false;\n    a:=!a+1;\n    b:=(pow !a 2);\n  done in\n  if c=false then false\n  else true\n;;\n</code></pre>\n\n<p>What I want is an OCaml code takes an int as input and output a boolean. pow in my OCaml code is an existing function pow a b (where a and b are int and output a^b). For some reason, the code doesn't work...</p>\n\n<p>Update: problem solved\nNew Ocaml code that works:</p>\n\n<pre><code>let is_prime n = \n  if n&gt;1 then\n    let a= ref 2 in\n    let b= ref (pow !a 2) in \n    let c= ref true in\n\n    while !b&lt;n do\n    (*ignore (Printf.printf \"abc\");*)\n      let resu= (n mod !a) in\n      if resu=0 then c:=false;\n      a:=!a+1;\n      b:=(pow !a 2);\n    done;\n    if !c then true\n    else false\n  else raise Domain\n;;\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "sizeof", "void"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 4, "creation_date": 1536694045, "post_id": 52282908, "comment_id": 91514008, "body": "<code>sizeof(*t)</code> -- is not valid in C when <code>t</code> is of type <code>void*</code>. Your compiler might be allowing it as an extension. To answer your question, there is no way of knowing the original size from a <code>void*</code> ptr. You need to pass it along in a separate variable or cast to appropriate type and use <code>sizeof</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1536694065, "post_id": 52282908, "comment_id": 91514017, "body": "<code>sizeof(void)</code> is 1 for gcc, but undefined in the standard. As soon as you cast to void, you lose the type info. C++ has type information hidden and you can use <code>dynamic_cast</code> to try to guess which type is behind <code>void</code>. You can implement it manually with &quot;custom&quot; structures in C."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 2, "creation_date": 1536694146, "post_id": 52282908, "comment_id": 91514048, "body": "curious what is motivating this question ..."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1536694147, "post_id": 52282908, "comment_id": 91514049, "body": "I don&#39;t see any casts to void in the given code.  Or any structs passed into a function.  So what are you trying to show us with the code?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1536694171, "post_id": 52282908, "comment_id": 91514054, "body": "A void pointer <i>by definition</i> is a pointer to something unknown, so no, it is no longer possible to know the size of what it points to. It&#39;s your job to keep track of that by other means."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1536694177, "post_id": 52282908, "comment_id": 91514058, "body": "Having <code>typeX</code> and <code>TypeX</code> be two completely different things is really being deliberately difficult and obtuse."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1536694188, "post_id": 52282908, "comment_id": 91514061, "body": "@ChristianGibbons There is a cast to <code>TypeX</code>, which is <code>void*</code>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536694260, "post_id": 52282908, "comment_id": 91514095, "body": "@EugeneSh. Ah, that got lost in the mix for me.  <code>typeX</code> and <code>TypeX</code>. :/"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536694290, "post_id": 52282908, "comment_id": 91514109, "body": "Note: To print <code>size_t</code>, use <code>&quot;%zu&quot;</code> --&gt; <code>printf(&quot;%zu\\n&quot;, sizeof *t);</code>.  With <code>%lu</code>, you are (un)lucky."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536694377, "post_id": 52282908, "comment_id": 91514153, "body": "&quot;Is there any way to identify the struct size correctly by passing a void pointer as parameter?&quot; --&gt; No."}, {"owner": {"reputation": 1510, "user_id": 10334659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6afc02c5a2d072d70358d1712a0439d3?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/10334659/gaurav"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1536694383, "post_id": 52282908, "comment_id": 91514157, "body": "@MFisherKDX Not related to this question but a user defined version of struct is generally <code>void *</code> perhaps that might trigger folks to know the size as there is no compiler intervention to align the memory (with bit padding)."}, {"owner": {"reputation": 35, "user_id": 10348825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3f5b58d8f506611271bc8def67a954?s=128&d=identicon&r=PG&f=1", "display_name": "Wallacy", "link": "https://stackoverflow.com/users/10348825/wallacy"}, "edited": false, "score": 0, "creation_date": 1536695279, "post_id": 52282908, "comment_id": 91514597, "body": "Thank you, guys! I have many custom structs that are void pointers in my code, specifically 2 structs that have different number of members, and that is why I asked the question hahah If there was a way to get a hidden struct size, it would be a great help to make my code better. Unfortunately, don&#39;t have. :("}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10348825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3f5b58d8f506611271bc8def67a954?s=128&d=identicon&r=PG&f=1", "display_name": "Wallacy", "link": "https://stackoverflow.com/users/10348825/wallacy"}, "edited": false, "score": 0, "creation_date": 1536696609, "post_id": 52283032, "comment_id": 91515206, "body": "Thank you. I had not thought of it in that way. And I forgot to use -pedantic haha"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 1, "last_activity_date": 1536694384, "creation_date": 1536694384, "answer_id": 52283032, "question_id": 52282908, "link": "https://stackoverflow.com/questions/52282908/how-to-know-struct-size-casted-to-void-pointer-in-c/52283032#52283032", "title": "How to know struct size casted to void pointer in C?", "body": "<p>First off, having both <code>typeX</code> and <code>TypeX</code> but with very different meanings is very confusing. Also, don't hide pointers behind typedefs.</p>\n\n<p>As for your question: No, you cannot recover the size of the object that <code>t</code> is pointing to.</p>\n\n<p><code>sizeof EXPR</code> gives you the size of the <em>type</em> of EXPR (in bytes). It does not matter what the actual value is (in fact, EXPR isn't even evaluated<sup>1</sup>).</p>\n\n<p>Consider</p>\n\n<pre><code>char c;\nint i;\ndouble d[100];\n\nTypeX p1 = (TypeX)&amp;c, p2 = (TypeX)&amp;i, p3 = (TypeX)d;\n</code></pre>\n\n<p>All of <code>p1</code>, <code>p2</code>, <code>p3</code> have the same type, so <code>sizeof</code> will return the same value for all of them, even though the objects they're pointing to have very different sizes.</p>\n\n<p>Finally, <code>sizeof (void)</code> is not a thing in standard C. GCC allows it as an extension (and returns <code>1</code>), but it will warn you that this is non-standard if you enable <code>-pedantic</code> diagnostics.</p>\n\n<p><sup>1</sup> - With one relatively obscure exception, which I'm just going to ignore.</p>\n"}], "owner": {"reputation": 35, "user_id": 10348825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db3f5b58d8f506611271bc8def67a954?s=128&d=identicon&r=PG&f=1", "display_name": "Wallacy", "link": "https://stackoverflow.com/users/10348825/wallacy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "accepted_answer_id": 52283032, "answer_count": 1, "score": 1, "last_activity_date": 1536694384, "creation_date": 1536693837, "question_id": 52282908, "link": "https://stackoverflow.com/questions/52282908/how-to-know-struct-size-casted-to-void-pointer-in-c", "title": "How to know struct size casted to void pointer in C?", "body": "<p>In my code, there are 2 types that refer a struct:<br>\n<em>TypeX</em> and <em>typeX</em>.  </p>\n\n<p><em>TypeX</em> is a void pointer, and <em>typeX</em> is the struct type.<br>\nAfter allocating memory to a typeX variable, I passed it (casted) to a TypeX variable (or a void pointer).</p>\n\n<p>I want to get the size of following struct casted to void pointer:</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct _typeX {  \n    double a;  \n    double b;  \n};  \n\ntypedef struct _typeX typeX;\ntypedef void* TypeX;\n\nint main(int argc, char const *argv[]) {  \n    TypeX t = NULL;  \n    typeX *t0 = NULL;\n\n    t0 = (typeX *) calloc(1, sizeof(typeX));\n\n    t0-&gt;a = 123;\n    t0-&gt;b = 456;\n\n    t = (TypeX) t0;\n\n    printf(\"%lu\\n\", sizeof(*t0));\n    printf(\"%lu\\n\", sizeof(*t));\n\n    free(t);\n\n    return 0;  \n}  \n</code></pre>\n\n<p>But struct size and void pointer size are different:</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>16\n1\n</code></pre>\n\n<p>Is there any way to identify the struct size correctly by passing a void pointer as parameter?</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1536693057, "post_id": 52282704, "comment_id": 91513595, "body": "Loop through odd numbers. And make a special case for <code>2</code>. Or for <code>1</code> and <code>2</code> to make the special cases before the main loop."}, {"owner": {"reputation": 147, "user_id": 4008319, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/OJbXB.png?s=128&g=1", "display_name": "Roemerdt", "link": "https://stackoverflow.com/users/4008319/roemerdt"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536693291, "post_id": 52282704, "comment_id": 91513697, "body": "@EugeneSh. Yeah I had thought about that. But I was wondering if there possibly was a more elegant way to do it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536693341, "post_id": 52282704, "comment_id": 91513716, "body": "If by &quot;elegant&quot; you mean shorter - yes. But it will impact the readability and (arguable) the performance."}], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 10340130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd380558f8a71a63a89ae9e37195019c?s=128&d=identicon&r=PG", "display_name": "njras", "link": "https://stackoverflow.com/users/10340130/njras"}, "edited": false, "score": 0, "creation_date": 1536693983, "post_id": 52282754, "comment_id": 91513986, "body": "and third considers odd numbers only. What are you suggesting?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 511, "user_id": 10340130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd380558f8a71a63a89ae9e37195019c?s=128&d=identicon&r=PG", "display_name": "njras", "link": "https://stackoverflow.com/users/10340130/njras"}, "edited": false, "score": 0, "creation_date": 1536694757, "post_id": 52282754, "comment_id": 91514318, "body": "@psinaught it suggests the iteration considers odd numbers, while <code>2</code> is a special case. If all the numbers are to be considered in sequence, <code>1</code> is also a special case because it comes before <code>2</code>."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 511, "user_id": 10340130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd380558f8a71a63a89ae9e37195019c?s=128&d=identicon&r=PG", "display_name": "njras", "link": "https://stackoverflow.com/users/10340130/njras"}, "edited": false, "score": 0, "creation_date": 1536695827, "post_id": 52282754, "comment_id": 91514842, "body": "@psinaught Roemerdt Fixed. Thanks."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 3, "last_activity_date": 1536696020, "last_edit_date": 1536696020, "creation_date": 1536693185, "answer_id": 52282754, "question_id": 52282704, "link": "https://stackoverflow.com/questions/52282704/loop-through-odd-numbers-and-2/52282754#52282754", "title": "Loop through odd numbers and 2", "body": "<p>Of course. Here is a pretty straight forward way.</p>\n\n<pre><code>for(int i=1; i&lt;N; i++) {\n    if(i&gt;3) i++;\n    // Code\n}\n</code></pre>\n\n<p>A bit more hackish variant:</p>\n\n<pre><code>for(int i=1; i&lt;N; i+=1+(i&gt;2)) {\n     // Code\n}\n</code></pre>\n\n<p>But I think in this case that the most readable variant would be something like:</p>\n\n<pre><code>// Code for 1 and 2\n\n// Then code for 3,5,7 ...\nfor(int i=3; i&lt;N; i+=2) {\n    // Code\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536695441, "post_id": 52283195, "comment_id": 91514671, "body": "Could do the very same without array <code>for (i=1; i &lt; n; i+= 1+(i&gt;2))</code>"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536695952, "post_id": 52283195, "comment_id": 91514906, "body": "@EugeneSh. yes I know. However that is already been presented. this introduces the idea of using a logical operation as an array subscript which I thought interesting."}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1536697076, "last_edit_date": 1536697076, "creation_date": 1536695132, "answer_id": 52283195, "question_id": 52282704, "link": "https://stackoverflow.com/questions/52282704/loop-through-odd-numbers-and-2/52283195#52283195", "title": "Loop through odd numbers and 2", "body": "<p>Another alternative which does use an array but only a small one that is a constant size of two elements no matter how many numbers in the sequence would be:</p>\n\n<pre><code>{\n    int i;\n    int  iray[] = {1, 2};\n    int n = 15;\n\n    for (i = 1; i &lt; n; i += iray[i &gt; 2]) {\n        printf (\" i = %d \\n\", i);\n        // code\n    }\n}\n</code></pre>\n\n<p>which produces:</p>\n\n<pre><code>i = 1\ni = 2\ni = 3\ni = 5\ni = 7\ni = 9\ni = 11\ni = 13\n</code></pre>\n\n<p><strong>Extending this alternative to other sequences</strong></p>\n\n<p>And this alternative can be extended to other sequences where there is a change of a similar nature. For instance if the desired sequence was</p>\n\n<pre><code>1, 2, 3, 5, 8, 11, ..\n</code></pre>\n\n<p>Which involves several changes in the sequence. Beginning at 1 an increment of 1 is used followed by a first increment change beginning at 3 where an increment of 2 is used followed by a second change in the sequence beginning at 5 where an increment of 3 is used, you can make the following modification.</p>\n\n<pre><code>{\n    int i;\n    int  iray[] = {1, 2, 3};  // increment changes\n    int n = 15;\n\n    // calculate the increment based on the current value of i\n    for (i = 1; i &lt; n; i += iray[(i &gt; 2) + (i &gt; 3)]) {\n        printf (\" i = %d \\n\", i);\n        // code\n    }\n    return 0;\n}\n</code></pre>\n\n<p>which would produce:</p>\n\n<pre><code> i = 1\n i = 2\n i = 3\n i = 5\n i = 8\n i = 11\n i = 14\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": false, "score": 0, "last_activity_date": 1536696896, "creation_date": 1536696896, "answer_id": 52283604, "question_id": 52282704, "link": "https://stackoverflow.com/questions/52282704/loop-through-odd-numbers-and-2/52283604#52283604", "title": "Loop through odd numbers and 2", "body": "<p>Another option</p>\n\n<pre><code>for(int i=1;;++i) // you didn't specify a limit\n{\n    switch(i)\n    {\n        default:\n            if(!(i&amp;1))continue;\n        case 1:\n        case 2:\n            DoSomething(i):\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1536700634, "last_edit_date": 1536700634, "creation_date": 1536699935, "answer_id": 52284209, "question_id": 52282704, "link": "https://stackoverflow.com/questions/52282704/loop-through-odd-numbers-and-2/52284209#52284209", "title": "Loop through odd numbers and 2", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    for(unsigned x = 0; x &lt; 10; x++)\n    printf(\"%u%s element - %u\\n\",x + 1, !x ? \"st\" : x == 1 ? \"nd\" : x == 2 ? \"rd\" : \"th\", !x + x * 2 - (x &gt;= 2));\n\n    return 0;\n}\n</code></pre>\n\n<p>no jumps calculating in the <code>!x + x * 2 - (x &gt;= 2)</code> so no pipeline flushes.</p>\n"}], "owner": {"reputation": 147, "user_id": 4008319, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/OJbXB.png?s=128&g=1", "display_name": "Roemerdt", "link": "https://stackoverflow.com/users/4008319/roemerdt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1536700634, "creation_date": 1536692939, "question_id": 52282704, "link": "https://stackoverflow.com/questions/52282704/loop-through-odd-numbers-and-2", "title": "Loop through odd numbers and 2", "body": "<p>Is it possible in C to have a fast for/while loop that loops through the odd numbers and 2? Without using arrays.</p>\n\n<p>So I'd like it to loop through {1, 2, 3, 5, 7, 9, ..}</p>\n"}, {"tags": ["c", "optimization", "char", "user-input"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536692635, "post_id": 52282601, "comment_id": 91513417, "body": "&quot;didn&#39;t work&quot; is not a problem description. Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 9615644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLnV5.jpg?s=128&g=1", "display_name": "student24", "link": "https://stackoverflow.com/users/9615644/student24"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536693516, "post_id": 52282601, "comment_id": 91513789, "body": "@melpomene Thanks for the tip, I added more detail instead of writing didn&#39;t work. Do you mean <code>printf(&quot;%c&quot;, head -&gt; data);</code> If so it prints out the char stored at the node the head is pointing at."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536693678, "post_id": 52282601, "comment_id": 91513860, "body": "No, I meant multiple calls to <code>getchar</code>, but I realized that the example was more confusing than helpful due to the unspecified evaluation order of function arguments, so I deleted my comment."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1536693618, "creation_date": 1536693618, "answer_id": 52282850, "question_id": 52282601, "link": "https://stackoverflow.com/questions/52282601/how-to-optimize-reading-character-from-input-so-the-user-does-not-need-to-specif/52282850#52282850", "title": "How to optimize reading character from input so the user does not need to specify the number of characters beforehand", "body": "<p>Every call to <code>getchar()</code> reads and returns another character from the standard input.</p>\n\n<p>Consider what happens with code like</p>\n\n<pre><code>while (getchar() != '\\n') {\n//     ^^^^^^^^^ #1\n\n    head = Insert(head,getchar());\n//                     ^^^^^^^^^ #2\n\n}\n</code></pre>\n\n<p>and a user input of <code>asdf</code>.</p>\n\n<p>The call labeled #1 reads and returns <code>'a'</code> (the first character of input), which is not <code>'\\n'</code>, so the loop body is executed.</p>\n\n<p>Then the call labeled #2 reads and returns <code>'s'</code> (the next character), which is added to the list.</p>\n\n<p>Then we go back to the loop condition. <code>getchar()</code> #1 reads and returns <code>'d'</code>, which is still not <code>'\\n'</code> ...</p>\n\n<p>... and <code>getchar()</code> #2 reads and returns <code>'f'</code>, which is also added to the list.</p>\n\n<p>Finally <code>getchar()</code> #1 reads a newline, which terminates the loop.</p>\n\n<p>Because of the two calls to <code>getchar</code> in every iteration, only every second character was added to the list.</p>\n\n<p>Your second attempt is similar, but <code>if</code> is not a loop, so only the second character <em>total</em> (<code>'s'</code> in <code>asdf</code>) was added to the list.</p>\n\n<p>To fix this, you need to store the return value of <code>getchar</code> in a variable so you can compare it and add it to the list without reading more characters:</p>\n\n<pre><code>int c;\nwhile ((c = getchar()) != '\\n' &amp;&amp; c != EOF) {\n    head = Insert(head, c);\n}\n</code></pre>\n\n<p>The additional check for <code>EOF</code> is to prevent your program from going into an infinite loop in case the input is not terminated by <code>'\\n'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9615644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLnV5.jpg?s=128&g=1", "display_name": "student24", "link": "https://stackoverflow.com/users/9615644/student24"}, "edited": false, "score": 0, "creation_date": 1536700511, "post_id": 52283263, "comment_id": 91516820, "body": "How does <code>putchar(a);</code> get executed? To me it looks like  <code>printRev();</code> makes it so you jump back to the top."}, {"owner": {"reputation": 145, "user_id": 5334741, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eor0o.jpg?s=128&g=1", "display_name": "Ahmed Yasen", "link": "https://stackoverflow.com/users/5334741/ahmed-yasen"}, "reply_to_user": {"reputation": 1, "user_id": 9615644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLnV5.jpg?s=128&g=1", "display_name": "student24", "link": "https://stackoverflow.com/users/9615644/student24"}, "edited": false, "score": 0, "creation_date": 1536709145, "post_id": 52283263, "comment_id": 91519281, "body": "it is a recursive function, when calling a function, a copy of it is in the memory(stack). so, when calling printRev(); every time, there is a copy of the function into the stack with different values to variable a. the putchar(a) will be executed when the last called printRev() returned, which is when you hit enter the function will return from the if statement. are you got it?"}, {"owner": {"reputation": 161, "user_id": 7576758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-985SkdQTZ7o/AAAAAAAAAAI/AAAAAAAACfQ/Byl2b0Cf0q0/photo.jpg?sz=128", "display_name": "Sydney Hauke", "link": "https://stackoverflow.com/users/7576758/sydney-hauke"}, "edited": false, "score": 0, "creation_date": 1537645711, "post_id": 52283263, "comment_id": 91862611, "body": "I wouldn&#39;t do that at all. Each recursive call (on each character encountered) grows the stack. A few thousand characters entered  and you will provoke a stack-overflow. This solution imposes a limit on how many characters can be entered on std input and introduces a way to crash the program."}], "tags": [], "owner": {"reputation": 145, "user_id": 5334741, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eor0o.jpg?s=128&g=1", "display_name": "Ahmed Yasen", "link": "https://stackoverflow.com/users/5334741/ahmed-yasen"}, "is_accepted": false, "score": 0, "last_activity_date": 1536695468, "creation_date": 1536695468, "answer_id": 52283263, "question_id": 52282601, "link": "https://stackoverflow.com/questions/52282601/how-to-optimize-reading-character-from-input-so-the-user-does-not-need-to-specif/52283263#52283263", "title": "How to optimize reading character from input so the user does not need to specify the number of characters beforehand", "body": "<blockquote>\n  <p>you can do this using recursion.Just call the following function in your code.</p>\n</blockquote>\n\n<pre><code>void printRev(){\n  char a;\n  a = getchar();\n  if(a == '\\n'){\n      return;\n  }\n  printRev();\n  putchar(a);\n}\n</code></pre>\n\n<p>here you don't need for specifying the size of the input. you just scan until you hit enter then print during return.</p>\n"}], "owner": {"reputation": 1, "user_id": 9615644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLnV5.jpg?s=128&g=1", "display_name": "student24", "link": "https://stackoverflow.com/users/9615644/student24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1536696232, "creation_date": 1536692467, "last_edit_date": 1536693054, "question_id": 52282601, "link": "https://stackoverflow.com/questions/52282601/how-to-optimize-reading-character-from-input-so-the-user-does-not-need-to-specif", "title": "How to optimize reading character from input so the user does not need to specify the number of characters beforehand", "body": "<p><strong>Current state of program</strong></p>\n\n<p>I am making a program which reads the users input of chars until a new line and prints them out in reverse order. </p>\n\n<p>The output i get is correct but i want to optimize the code.</p>\n\n<p>In main i have written code that executes my Insert function n times (n represents the number of chars the user wants to input). So right now the user first need to input the amout of chars they want to input and then they can input the chars. </p>\n\n<p><strong>How i actually want it</strong></p>\n\n<p>I want to make it so that the user can just input the chars without having to first specify the number of chars they want to enter. </p>\n\n<p><strong>My attempts</strong></p>\n\n<p>Tried using a while loop but got wrong result:</p>\n\n<p>Entered \"asdf\" as input</p>\n\n<p>and got \"fs\" as output</p>\n\n<pre><code>int main(){\nstruct Node* head = NULL;\nprintf(\"Enter the chars you want to type: \");\nwhile (getchar() != '\\n') {\nhead = Insert(head,getchar());\n}\nPrint(head);\n}\n</code></pre>\n\n<p>Tried using a if statement but got wrong result: </p>\n\n<p>Entered \"asdf\" as input</p>\n\n<p>and got \"s\" as output</p>\n\n<pre><code>int main(){\nstruct Node* head = NULL;\nprintf(\"Enter the chars you want to type: \");\nif (getchar() != '\\n') {\nhead = Insert(head,getchar());\n}\nPrint(head);\n}\n</code></pre>\n\n<p><strong>My code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n\nstruct Node {\n  char data;\n  struct Node* linkToNext;\n};\n\n\n\nvoid Print(struct Node* head){\n  while (head != NULL) {\n    printf(\"%c\", head -&gt; data);\n    head = head -&gt; linkToNext;\n  }\n}\n\n\n\nstruct Node* Insert(struct Node* head, char input){\n  struct Node* pointerToNode = (struct Node*)malloc(sizeof(struct Node)); \n  pointerToNode -&gt; data = input;\n  pointerToNode -&gt;linkToNext = head;\n  head = pointerToNode;\n  return head;\n}\n\n\n\nint main(){\n  struct Node* head = NULL;\n  int i, n;\n  printf(\"Enter the amout of chars you want to type: \");\n  scanf(\"%d\", &amp;n);\n  for (i = 0; i &lt;= n; i++) {\n    head = Insert(head,getchar());\n  }\n    Print(head);\n}\n</code></pre>\n\n<p><strong>Example result of running code</strong></p>\n\n<p>Enter the amout of chars you want to type: 4</p>\n\n<p>asdf</p>\n\n<p>fdsa</p>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1536692476, "post_id": 52282579, "comment_id": 91513325, "body": "what effort have you made to solve the problem?"}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 4, "creation_date": 1536692499, "post_id": 52282579, "comment_id": 91513340, "body": "wouldn&#39;t this just simplify to calling <code>f1()</code> and return right away without doing any of the other branches?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1536692505, "post_id": 52282579, "comment_id": 91513344, "body": "looks like an XY problem. The best way would be to use a function pointer table instead of a macro"}, {"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "edited": false, "score": 0, "creation_date": 1536692507, "post_id": 52282579, "comment_id": 91513349, "body": "Why? It is perfectly readable, easy to test and the code itself can be autogenerated by a bit of python/bash/emacs or even excel. A complex array of function pointers might be shorter but source liens are cheap"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1536692538, "post_id": 52282579, "comment_id": 91513368, "body": "Do you really have fifty methods with names like <code>f1</code> and so on? Why not just run them in order? What purpose does the loop serve?"}, {"owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "reply_to_user": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1536692596, "post_id": 52282579, "comment_id": 91513391, "body": "@DanielA.White, I know someone else spent more time than he should to solve this by using macro, but no luck. I did some search but have no clue how to do it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536692663, "post_id": 52282579, "comment_id": 91513429, "body": "Why don&#39;t you have functors in a map or array?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1536692742, "post_id": 52282579, "comment_id": 91513463, "body": "Use a <code>map</code> instead and you can do this with a call to it&#39;s <code>operator[]</code>"}, {"owner": {"reputation": 193, "user_id": 7927672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/349c309560c1a72c588d75e757b651b7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian4264 ", "link": "https://stackoverflow.com/users/7927672/ian4264"}, "edited": false, "score": 3, "creation_date": 1536692898, "post_id": 52282579, "comment_id": 91513525, "body": "As Daniel already said,it will return the result of f1() and will never loop over the other 49 functions...is the example code correct?"}, {"owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "edited": false, "score": 0, "creation_date": 1536693059, "post_id": 52282579, "comment_id": 91513598, "body": "oh, yes, let&#39;s a bug, it always returns f1()"}, {"owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "edited": false, "score": 0, "creation_date": 1536693145, "post_id": 52282579, "comment_id": 91513641, "body": "alright, this is a bad question, how do I close this thread ? I can not edit it"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1536693187, "post_id": 52282579, "comment_id": 91513658, "body": "@TMS Just under the tags, after the question body, there should be small grey buttons labeled &quot;share&quot;, &quot;edit&quot;, &quot;close&quot;, &quot;delete&quot; and &quot;flag&quot;."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1536693223, "post_id": 52282579, "comment_id": 91513669, "body": "but deleting with upvoted answers isn&#39;t very nice..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1536693408, "post_id": 52282579, "comment_id": 91513741, "body": "Hey, you just had a nasty bug in the code found. I&#39;d call that a win. What the solution is, who can say, but at least you know this needs a serious look-over."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1536693565, "post_id": 52282579, "comment_id": 91513805, "body": "A macro is <i>almost always</i> the wrong solution."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1536693649, "post_id": 52282579, "comment_id": 91513839, "body": "Notable exception to the above comment: <a href=\"http://dilbert.com/strip/1994-06-10\" rel=\"nofollow noreferrer\">dilbert.com/strip/1994-06-10</a>"}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1536692662, "creation_date": 1536692662, "answer_id": 52282638, "question_id": 52282579, "link": "https://stackoverflow.com/questions/52282579/how-to-make-a-macro-to-generate-code-in-a-for-loop/52282638#52282638", "title": "how to make a macro to generate code in a for loop?", "body": "<p>There cannot be any CPP macro to generate this, but it is common practice in C or C++ to generate stuff with something else. For example, you could trivially write in Python, Ocaml, or AWK some script which generates your code, and doing such things are common practice (you just need to add a few lines in your <code>Makefile</code> to do so). And you could also use other preprocessors, such as <a href=\"https://www.gnu.org/software/m4/m4.html\" rel=\"nofollow noreferrer\">m4</a> or <a href=\"https://logological.org/gpp\" rel=\"nofollow noreferrer\">gpp</a>.</p>\n\n<p>BTW, in your case, you could consider declaring an array of 50 pointer functions, and call them indirectly.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "edited": false, "score": 0, "creation_date": 1536693912, "post_id": 52282658, "comment_id": 91513950, "body": "btw, there&#39;s no bug in original code, only the simplified code I post here has issues. thanks for pointing it out"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "edited": false, "score": 1, "creation_date": 1536693994, "post_id": 52282658, "comment_id": 91513991, "body": "@TMS To be honest, I don&#39;t quite understand why you accepted this answer then. :-)"}, {"owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "edited": false, "score": 2, "creation_date": 1536694227, "post_id": 52282658, "comment_id": 91514077, "body": "@melpomene, I don&#39;t think I should correct my post since there&#39;re already so many discussions about the bug in the post. i would better start a new one if I still want to ask this question correctly. This answer indeed simplify the code so it&#39;s accepted."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1536750092, "post_id": 52282658, "comment_id": 91534895, "body": "Haha, I had to think about this for a few minutes. Nice!"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 10, "last_activity_date": 1536692801, "creation_date": 1536692801, "answer_id": 52282658, "question_id": 52282579, "link": "https://stackoverflow.com/questions/52282579/how-to-make-a-macro-to-generate-code-in-a-for-loop/52282658#52282658", "title": "how to make a macro to generate code in a for loop?", "body": "<pre><code>for (int i = 0; i &lt; 50; ++i) {\n  switch(i) {\n    case 0:\n      return f1();\n    ...\n</code></pre>\n\n<p>can be reduced to</p>\n\n<pre><code>return f1();\n</code></pre>\n\n<p>No macros required.</p>\n"}], "owner": {"reputation": 301, "user_id": 884553, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/396bdb6e7cdbfc4629d6c081d4a2b8e0?s=128&d=identicon&r=PG", "display_name": "TMS", "link": "https://stackoverflow.com/users/884553/tms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 52282658, "answer_count": 2, "score": -2, "last_activity_date": 1536749413, "creation_date": 1536692388, "last_edit_date": 1536749413, "question_id": 52282579, "link": "https://stackoverflow.com/questions/52282579/how-to-make-a-macro-to-generate-code-in-a-for-loop", "title": "how to make a macro to generate code in a for loop?", "body": "<p>I noticed the following code in a code review:</p>\n\n<pre><code>for (int i = 0; i &lt; 50; ++i) {\n  switch(i) {\n    case 0:\n      return f1();\n    case 1:\n      return f2();\n    ...\n    case 49:\n      return f50();\n  }\n}\n</code></pre>\n\n<p>and I'm wondering if there's any elegant way, such as using a macro to simplify this code (reduce it to few lines):</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1536692368, "post_id": 52282542, "comment_id": 91513274, "body": "<code>float f = y + x &#47;= x &#47; y;</code> - what is this supposed to mean?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1536692438, "post_id": 52282542, "comment_id": 91513304, "body": "There&#39;s a lot going on here and not all of it makes sense. What&#39;s the intent with <code>x &#47;= x</code>?"}, {"owner": {"reputation": 1, "user_id": 10338202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8da1e581d624e537e6d6ea632b19ee?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea J", "link": "https://stackoverflow.com/users/10338202/andrea-j"}, "edited": false, "score": 0, "creation_date": 1536692452, "post_id": 52282542, "comment_id": 91513309, "body": "This is an exercise from a website."}], "answers": [{"tags": [], "owner": {"reputation": 804, "user_id": 5893772, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EATNh.png?s=128&g=1", "display_name": "Reticulated Spline", "link": "https://stackoverflow.com/users/5893772/reticulated-spline"}, "is_accepted": false, "score": 0, "last_activity_date": 1536694627, "last_edit_date": 1536694627, "creation_date": 1536693081, "answer_id": 52282737, "question_id": 52282542, "link": "https://stackoverflow.com/questions/52282542/lvalue-required-as-left-operand-of-assignment-float-error/52282737#52282737", "title": "lvalue required as left operand of assignment float error", "body": "<p>C makes a distinction between <em>lvalues</em> and <em>rvalues</em>. Here's <a href=\"https://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/\" rel=\"nofollow noreferrer\">a snippet</a> that sums up the difference:</p>\n\n<blockquote>\n  <p>An lvalue (locator value) represents an object that occupies some\n  identifiable location in memory (i.e. has an address).</p>\n</blockquote>\n\n<p>On this line, you violate this by mixing the two types:</p>\n\n<pre><code>float f = y + x /= x / y;\n</code></pre>\n\n<p>There is nowhere in memory specified to hold the result of <code>x / y</code>. You can read more about this on <a href=\"https://stackoverflow.com/search?q=%5Bc%5D%20lvalue\">many Stack pages</a>.</p>\n\n<p>As for the second question, <code>if (x &amp;&amp; y == 1)</code> is false because <code>y == 1</code> is false. The statement is equivalent to <code>x &amp;&amp; 0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1536694726, "creation_date": 1536694726, "answer_id": 52283094, "question_id": 52282542, "link": "https://stackoverflow.com/questions/52282542/lvalue-required-as-left-operand-of-assignment-float-error/52283094#52283094", "title": "lvalue required as left operand of assignment float error", "body": "<p>You can find multiple answers on SO describing what an lvalue is (an expression that designates an object, as opposed to merely a value), and that address other instances of \"lvalue required\" errors.  For example,</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/3896637/2402272\">lvalue required</a></li>\n<li><a href=\"https://stackoverflow.com/q/8218693/2402272\">lvalue required error</a></li>\n<li><a href=\"https://stackoverflow.com/q/6966299/2402272\">Error: lvalue required in this simple C code? (Ternary with assignment?)</a></li>\n</ul>\n\n<p>Basically, the error means that the program contains an assignment or combined operator / assignment expression whose left-hand operand does not designate an object, such that the assignment part is nonsense.</p>\n\n<p>Sometimes these arise because operator precedence yields a different order of operations than the author of the code supposed or wanted, and unless the code you presented is intentionally erroneous, that's the case with it.  Specifically, in</p>\n\n<blockquote>\n<pre><code>            float f = y + x /= x / y;\n</code></pre>\n</blockquote>\n\n<p>, the problem is with the initializer expression, <code>y + x /= x / y</code>.  Presumably, the intention was that this would be evaluated as <code>y + (x /= (x / y))</code>, which has a well-defined value and a well-defined side effect on the value of <code>x</code>.</p>\n\n<p>However, the precedence of the assignment and opassignment operators such as <code>/=</code> is very low, so the expression is <em>actually</em> interpreted as equivalent to <code>(y + x) /= (x / y)</code>.  <code>y + x</code> is not an lvalue (it can be evaluated, but it does not designate an object), therefore it is not an acceptable left operand of the <code>/=</code> operator.  This is the reason for the error.</p>\n\n<p>Your second question involves another operator precedence issue.  The <code>&amp;&amp;</code> operator has lower precedence than the <code>==</code> operator, so <code>x &amp;&amp; y == 1</code> is equivalent to <code>x &amp;&amp; (y == 1)</code>.  With your initializations, the right-hand operand of <code>&amp;&amp;</code> evaluates to 0, so the overall expression evaluates to 0.  If the intention was to test whether <code>x &amp;&amp; y</code> evaluates to a truthy value, then this is a case of shooting oneself in the foot, because leaving off the <code>== 1</code> part would both be more conventional and yield the desired result.</p>\n"}], "owner": {"reputation": 1, "user_id": 10338202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8da1e581d624e537e6d6ea632b19ee?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea J", "link": "https://stackoverflow.com/users/10338202/andrea-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1536694726, "creation_date": 1536692232, "last_edit_date": 1536692815, "question_id": 52282542, "link": "https://stackoverflow.com/questions/52282542/lvalue-required-as-left-operand-of-assignment-float-error", "title": "lvalue required as left operand of assignment float error", "body": "<p>Why do I have the error <em>lvalue required as left operand of assignment error</em>?</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n        int main()\n        {\n            int x = 2, y = 2;\n            float f = y + x /= x / y;\n            printf(\"%d %f\\n\", x, f);\n            return 0;\n        }\n</code></pre>\n\n<p>And why is the output false here?</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n    int main()\n    {\n        int x = 1, y = 2;\n        if (x &amp;&amp; y == 1)\n            printf(\"true\\n\");\n        else\n            printf(\"false\\n\");\n    }\n</code></pre>\n\n<p>I thought that when the both values are different from 0, &amp;&amp; will always result a 1</p>\n"}, {"tags": ["python", "c", "python-3.x", "raspberry-pi", "exec"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536691152, "post_id": 52282245, "comment_id": 91512637, "body": "Please show the code you tried."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1536691483, "post_id": 52282245, "comment_id": 91512816, "body": "Prediction: The Python script you want to run takes no arguments, and you failed to pass <code>python3</code> twice to one of the <code>execl*</code> functions, or failed to pass it as the first element of <code>argv</code> for one of the <code>execv*</code> functions, so it ended up interpreting the command as &quot;run <code>python3</code> with no arguments, just tell it it has the same name as my script&quot;, not &quot;run <code>python3</code> under its own name, with my script as its argument&quot;."}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1536691829, "post_id": 52282245, "comment_id": 91512989, "body": "@ShadowRanger I failed to pass python3 twice, Thank you very much."}, {"owner": {"reputation": 116, "user_id": 2600110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7260760921a1d7e8657396721be0c4?s=128&d=identicon&r=PG", "display_name": "Edwin", "link": "https://stackoverflow.com/users/2600110/edwin"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1536691852, "post_id": 52282245, "comment_id": 91512998, "body": "I concur with @ShadowRanger, that it&#39;s difficult to do more than a prediction without additional information.  I&#39;d add that depending on how you are making the call out to the shell, if you in fact <b>are</b> passing the path to the python script as the second argument, you may be in the wrong working directory and it won&#39;t be able to find the script -- leaving the console to hang.  Good luck!"}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1536693397, "creation_date": 1536693397, "answer_id": 52282796, "question_id": 52282245, "link": "https://stackoverflow.com/questions/52282245/how-to-execute-a-python-program-from-c-in-linux/52282796#52282796", "title": "How to execute a Python program from C in Linux", "body": "<p>To answer the problem <a href=\"https://stackoverflow.com/questions/52282245/how-to-execute-a-python-program-from-c-in-linux/52282796#comment91512816_52282245\">as determined in the comments</a>:</p>\n\n<p>The OP was using <code>execlp</code> or the like, in the form:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>execlp(\"python3\", \"name_of_script.py\", (char*)0);\n</code></pre>\n\n<p>(or if they didn't know about <a href=\"https://stackoverflow.com/a/12677236/364696\">the issue with <code>NULL</code></a>, they might have passed <code>NULL</code> instead of <code>(char*)0</code>).</p>\n\n<p>Problem is, <a href=\"https://linux.die.net/man/3/execlp\" rel=\"nofollow noreferrer\"><code>execlp</code> usually needs the first argument to be passed twice</a>; the second time it's the value to be set as <code>argv[0]</code>, while user-supplied arguments are almost always checked for in <code>argv[1]</code> and higher (the value in <code>argv[0]</code> is rarely used, and when it is, it's mostly for usage/debug output). When <code>python3</code> sees its own <code>argv</code>, it sees that it's been invoked with the \"name\" of <code>name_of_script.py</code>, but it doesn't see it as a real \"argument\", so it acts as if it were launched with no arguments, which leads to the interactive interpreter.</p>\n\n<p>The fix is to pass the program name twice, once to find the program, once to set it in <code>argv</code>, so the argument is recognized by <code>python3</code> as a script to invoke:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>execlp(\"python3\", \"python3\", \"name_of_script.py\", (char*)0);\n//        ^ program to find\n//                    ^ name to set in argv[0]\n//                                  ^ script name to put in argv[1] so script is run\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 52282796, "answer_count": 1, "score": 0, "last_activity_date": 1536693436, "creation_date": 1536691013, "last_edit_date": 1536693436, "question_id": 52282245, "link": "https://stackoverflow.com/questions/52282245/how-to-execute-a-python-program-from-c-in-linux", "title": "How to execute a Python program from C in Linux", "body": "<p>I'm using a Raspberry Pi and I need to be able to execute a python program once my C program finishes running a function. I've been trying to use fork and exec, however, when I use \"python3\" as the first parameter for the exec function, all I get is the python command prompt in the console. </p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1536691049, "post_id": 52282230, "comment_id": 91512579, "body": "You haven&#39;t actually created a matrix.  You&#39;re just printing rows/columns of values.  You need something like <code>int matrix[5][5]</code> which you then populate and print the contents of."}, {"owner": {"reputation": 1, "user_id": 10016329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1709137b0d0aee8be745424fdfde085?s=128&d=identicon&r=PG&f=1", "display_name": "user10016329", "link": "https://stackoverflow.com/users/10016329/user10016329"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1536691569, "post_id": 52282230, "comment_id": 91512861, "body": "How would I create an identity matrix by doing that, though?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1536691630, "post_id": 52282230, "comment_id": 91512894, "body": "@user10016329 Do you know what an &quot;Identity matrix&quot; looks like? <a href=\"https://en.wikipedia.org/wiki/Identity_matrix\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Identity_matrix</a>"}, {"owner": {"reputation": 1, "user_id": 10016329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1709137b0d0aee8be745424fdfde085?s=128&d=identicon&r=PG&f=1", "display_name": "user10016329", "link": "https://stackoverflow.com/users/10016329/user10016329"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1536691816, "post_id": 52282230, "comment_id": 91512980, "body": "@4386427 Yes, that&#39;s exactly what I need. That is what I get with the code I have. However, my teacher wants us to use &quot;pointers&quot; in the actual code."}, {"owner": {"reputation": 1369, "user_id": 2730233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDPoY.jpg?s=128&g=1", "display_name": "Lucio Mollinedo", "link": "https://stackoverflow.com/users/2730233/lucio-mollinedo"}, "edited": false, "score": 0, "creation_date": 1536692635, "post_id": 52282230, "comment_id": 91513418, "body": "You need to read about pointer usage in C and practice a little. Then come up with code where you attempt to solve this problem, share it in this question, and then you&#39;ll get more help. You are not using pointers in your code right now at all."}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 1, "creation_date": 1536692669, "post_id": 52282230, "comment_id": 91513430, "body": "Your code isn&#39;t actually broken so adding pointers doesn&#39;t fix anything. As others have stated, you haven&#39;t created a matrix; you are just printing a pattern that outputs what appears to be an identity matrix. You need to create a matrix and modify the memory locations that the matrix points to. E.g. <code>int matrix[5][5]</code> <code>matrix</code> is a pointer to an array of arrays that you can use to assign individual memory locations <code>*((*(matrix + 1)) + 1) = 5; &#47;&#47;same as matrix[1][1] = 5</code>"}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536729661, "post_id": 52282230, "comment_id": 91523549, "body": "I essentially gave you the answer and then you went and concocted this. <b>Have some patience and actually read</b> what people are trying to tell you on here and it just might make your life easier."}, {"owner": {"reputation": 1, "user_id": 10016329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1709137b0d0aee8be745424fdfde085?s=128&d=identicon&r=PG&f=1", "display_name": "user10016329", "link": "https://stackoverflow.com/users/10016329/user10016329"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536797523, "post_id": 52282230, "comment_id": 91557444, "body": "@bigwillydos sorry, your answer wasn&#39;t showing when I posted that. I tried meeting with a tutor and that&#39;s what we got. I&#39;m still lost, I can&#39;t get it to print at all..."}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536801435, "post_id": 52282230, "comment_id": 91558112, "body": "@user10016329 sorry to hear that you are still lost, but my answer provides code that does all but the print out the matrix. This is your assignment so you have to do the work. Here&#39;s some resources on printing the matrix: 1) <a href=\"http://tpcg.io/hVOBtx\" rel=\"nofollow noreferrer\">example program</a> 2) <a href=\"https://www.tutorialspoint.com/cprogramming/c_multi_dimensional_arrays.htm\" rel=\"nofollow noreferrer\">Tutorial on multi-dimensional arrays in C</a>"}, {"owner": {"reputation": 1, "user_id": 10016329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1709137b0d0aee8be745424fdfde085?s=128&d=identicon&r=PG&f=1", "display_name": "user10016329", "link": "https://stackoverflow.com/users/10016329/user10016329"}, "edited": false, "score": 0, "creation_date": 1536803291, "post_id": 52282230, "comment_id": 91558437, "body": "bigwillydos Thank you for your help. I ended up figuring it out. The second part of my assignment wants me to exchange rows 0 and 4, which I cant figure out. I think this is where I needed the pointers, not in the code to just print the matrix"}], "answers": [{"comments": [{"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 1, "creation_date": 1536693185, "post_id": 52282531, "comment_id": 91513657, "body": "How does this help the student who asked this question what pointers are? I also doubt that the teacher wanted the use of syntactic sugar here."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536694300, "post_id": 52282531, "comment_id": 91514111, "body": "Is a VLA acceptable as a function argument? Was this code tested, or guessed?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536697356, "post_id": 52282531, "comment_id": 91515544, "body": "I don&#39;t think &quot;an array decays to a pointer&quot; counts as pointer addressing."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536854855, "post_id": 52282531, "comment_id": 91582683, "body": "@WeatherVane It makes no difference that the variable is a VLA. Passing an array of array (aka 2D array) to a function is perfectly fine like this and IMO the clearest way. &quot;Is it tested?&quot; It is \u2026 but try it a try your self. Remember to turn all the highest warning level for your compiler to see if you get any warnings."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536855426, "post_id": 52282531, "comment_id": 91582995, "body": "@bigwillydos Any array indexing is a pointer operation. <code>x[n]</code> is simply just a short hand and more readable form of <code>*(x + n)</code>. It&#39;s always a pointer operation. It gets even worse when handling arrays of arrays (aka 2D array). Coding <code>x[n][m]</code> as <code>*(x + n*NUM_COLUMNS + m)</code> is hard to read and error prone. All in all - array operations counts as pointer operation because that&#39;s simply what they are. BTW &quot;syntactic sugar&quot; ? What...? This is be far the best way to pass a n-by-n array of array to a function. No sugar here..."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536855503, "post_id": 52282531, "comment_id": 91583037, "body": "@TimRandall Maybe you don&#39;t think so but that doesn&#39;t change the fact that any array indexing is a pointer operation. I&#39;m sure a C teacher knows that."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536856666, "post_id": 52282531, "comment_id": 91583594, "body": "Why do you suppose the teacher chose that form of words, if not to get the students to use something other than array indexing?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536856962, "post_id": 52282531, "comment_id": 91583750, "body": "@TimRandall Because the teacher wants to tell the students that array indexing is equivalent to pointer operations. Something a C programmer must know."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536858030, "post_id": 52282531, "comment_id": 91584276, "body": "We agree, I think, that <code>array[index]</code> and <code>*(array+index)</code> are two equivalent forms, and that the former is often more convenient, particularly in the case of multidimensional arrays. Given this common ground, how would you, as the teacher, word your question, assuming that you wished your students to demonstrate that they had mastered the second, more complicated form?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1536858247, "post_id": 52282531, "comment_id": 91584391, "body": "@TimRandall There is no point in teaching students to master bad coding styles. There is, however, a point in teaching them how array indexing works (i.e. that they are pointer operations). I believe that is (or at least should be) what the teacher was trying to teach."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536864380, "post_id": 52282531, "comment_id": 91587346, "body": "@4386427 thanks for that. I use MSVC which has never implemented the VLA and now doesn&#39;t need to :("}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536877835, "post_id": 52282531, "comment_id": 91592711, "body": "@4386427 The &quot;master bad coding styles&quot; comment is laughable justification of your answer to me. As if the underlying constructs of the C programming language should be covered up because they are too hideous to be seen. Even with your new edits, you&#39;ve done nothing to address the student&#39;s obvious misconceptions. Lastly, <code>x[n][m]</code> is syntactic sugar for <code>*(x + n*NUM_COLS + m)</code> and you pointed that out yourself but this is an assignment for a student who is still learning about the underlying meaning of <code>x[n][m]</code>."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": -2, "last_activity_date": 1536860886, "last_edit_date": 1536860886, "creation_date": 1536692140, "answer_id": 52282531, "question_id": 52282230, "link": "https://stackoverflow.com/questions/52282230/how-can-i-fix-my-c-code-by-adding-pointers/52282531#52282531", "title": "How can I fix my C code by adding pointers?", "body": "<p>Any array decays into a pointer when passed to a function. By passing suitable \"size\" information, you can use it as a matrix.</p>\n\n<p>So all you need is the code below - this will pass  <code>a</code> as a <strong>pointer</strong> to array (size n) of int. Then you can dereference the pointer using simple array indexing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid make_identity(int n, int a[n][n])\n{\n    for (int i = 0; i &lt; n; ++i)\n    {\n        for (int j=0; j &lt; n; ++j)\n        {\n            if (i==j)\n                a[i][j]=1;\n            else\n                a[i][j]=0;\n        }\n    }\n}\n\nvoid print_matrix(int n, int a[n][n])\n{\n    for (int i = 0; i &lt; n; ++i)\n    {\n        for (int j=0; j &lt; n; ++j)\n        {\n            printf(\"%d \", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main(void) {\n    int size = 5;   // Just change size to get another matrix size\n    int matrix[size][size];\n    make_identity(size, matrix);\n    print_matrix(size, matrix);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 0 0 0 0 \n0 1 0 0 0 \n0 0 1 0 0 \n0 0 0 1 0 \n0 0 0 0 1 \n</code></pre>\n\n<p>An alternative way to write the code is:</p>\n\n<pre><code>void make_identity(int n, int (*a)[n])\n{\n     ...\n}\n\n\nvoid print_matrix(int n, int (*a)[n])\n{\n     ...\n}\n</code></pre>\n\n<p>it will give you the exact same result (though less readable, IMO).</p>\n\n<p>In both cases <code>a</code> is a <strong>pointer</strong> to array (size n) of int.</p>\n"}, {"tags": [], "owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "is_accepted": false, "score": 1, "last_activity_date": 1536707523, "creation_date": 1536707523, "answer_id": 52285319, "question_id": 52282230, "link": "https://stackoverflow.com/questions/52282230/how-can-i-fix-my-c-code-by-adding-pointers/52285319#52285319", "title": "How can I fix my C code by adding pointers?", "body": "<blockquote>\n  <p>How can I fix my C code by adding pointers?</p>\n</blockquote>\n\n<p>Minus a typo for your function call to <code>Identity</code>, your code isn't actually broken so \"adding pointers\" doesn't fix anything.</p>\n\n<blockquote>\n  <p>I understood how to create the matrix, but not with the\n  use of pointers.</p>\n</blockquote>\n\n<p>You say this, but you haven't actually created a matrix with the posted code; you are simply printing out a pattern that resembles an identity matrix.</p>\n\n<blockquote>\n  <p>..my teacher wants us to Use pointer/addressing methods to display the\n  matrix. I don't fully understand pointers and I have been having\n  trouble adding it to my code..</p>\n</blockquote>\n\n<p>If your teacher wants you to use pointers to display the matrix, then you will have to actually create one. This can be done statically or dynamically. Statically makes the most sense for a beginner/student. You would do that like this: <code>int matrix[5][5]</code></p>\n\n<p>Understanding pointers is often one of the most difficult aspects of C for newcomers to pick up so that's normal. It's probably been said to you before but I'll say it again: a pointer <em>points</em> to a memory location. You can use that pointer to obtain the value in the memory location (aka <em>dereferencing</em>). </p>\n\n<p>For example:</p>\n\n<pre><code>int a = 10;\nint * p = &amp;a; //p points to the memory location where a is stored\n\n/* these print the same thing */\nprintf(\"%d\\n\", a);\nprintf(\"%d\\n\", *p); //dereferencing\n</code></pre>\n\n<p>How does this relate to arrays and matrices? When you declare an array, the name of that array refers to the memory location for the beginning of the array. Each successive element is located at some offset from the beginning, meaning the nth element is located at the beginning address plus (n - 1). Here's an example of statically allocating an array and assigning individual memory locations of that array:</p>\n\n<pre><code>int a[10] = {0}; //an array of 10 signed integers that have been initialized to 0\nprintf(\"0x%x\\n\", a); //prints the beginning address of the array a\n\na[0] = 10; //assign the 0th element\nprintf(\"%d\\n\", a[0]); //prints 10\n\n*a = 11; //this also assigns the 0th element\nprintf(\"%d\\n\", *a); //prints 11\n\na[1] = 12; //assign the 1st element\nprintf(\"%d\\n\", a[1]); //prints 12\n\n*(a + 1) = 13; //this also assigns the 1st element\nprintf(\"%d\\n\", *(a + 1)); //prints 13\n</code></pre>\n\n<p>A matrix is an array of arrays but all the elements are next to each other in memory so you can address the elements in a linear fashion: beginning_address + current_row * total_number_of_columns + current_column</p>\n\n<p>Knowing this, let's change up your <code>Identity</code> function:</p>\n\n<pre><code>int Identity(int * ptr, int num) { \n    int row, col; \n\n    for (row = 0; row &lt; num; row++) { \n        for (col = 0; col &lt; num; col++) { \n            // Check if row is equal to column  \n            if (row == col) \n                *(ptr + row*num + col) = 1;\n            else\n                *(ptr + row*num + col) = 0; \n        }  \n    } \n    return 0; \n}\n</code></pre>\n\n<p>Now it takes a pointer to an int and the size of the identity matrix. To use it, we will pass it a pointer to the beginning of our matrix along with the size of the matrix.</p>\n\n<p>Like this:</p>\n\n<pre><code>int main(){\n\n    /* this needs to match your matrix dimensions!! */\n    int size = 5; \n\n    /* statically allocate 5 x 5 matrix of signed integers */\n    int matrix[5][5] = {0};\n\n    /* modifies our matrix to make it an identity matrix */\n    Identity(&amp;matrix[0][0], size); //first argument is the address of the element located in row 0, column 0\n\n    /* now go through and print elements of the matrix */\n    //I'm going to leave this part up to you\n\n    return 0;\n\n}\n</code></pre>\n\n<p><strong>For more on matrices in C, check out this <a href=\"https://www.geeksforgeeks.org/dynamically-allocate-2d-array-c/\" rel=\"nofollow noreferrer\">tutorial</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 10291385, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tiDvzxBGmXo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPAmWjDas8D8sSIvg4R9lVdKss9yQ/mo/photo.jpg?sz=128", "display_name": "mbsysd", "link": "https://stackoverflow.com/users/10291385/mbsysd"}, "is_accepted": false, "score": -1, "last_activity_date": 1536863780, "creation_date": 1536863780, "answer_id": 52319877, "question_id": 52282230, "link": "https://stackoverflow.com/questions/52282230/how-can-i-fix-my-c-code-by-adding-pointers/52319877#52319877", "title": "How can I fix my C code by adding pointers?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  // const\n  int ROWS= 3,  COLS= 4;\n\n  // variable\n  int row, col;\n\n  // 2d array\n  int arr[ROWS][COLS];\n\n  // fill pointer with first address of array\n  int *ptr = &amp;arr[0][0];\n\n  // print the element of the array via pointer ptr\n  for (row = 0; row &lt; ROWS; row++) {\n    for (col = 0; col &lt; COLS; col++) {\n      if(row == col) {\n         *(ptr + (row*COLS + col)) = 1;\n      }\n      else {\n         *(ptr + (row*COLS + col)) = 0;\n      }\n      printf(\"%d \", *(ptr + (row*COLS + col)));\n    }\n    printf(\"\\n\");\n  }   \n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 0 0 0                                                                                                                                \n0 1 0 0                                                                                                                                \n0 0 1 0 \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10016329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1709137b0d0aee8be745424fdfde085?s=128&d=identicon&r=PG&f=1", "display_name": "user10016329", "link": "https://stackoverflow.com/users/10016329/user10016329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1536863780, "creation_date": 1536690970, "last_edit_date": 1536711232, "question_id": 52282230, "link": "https://stackoverflow.com/questions/52282230/how-can-i-fix-my-c-code-by-adding-pointers", "title": "How can I fix my C code by adding pointers?", "body": "<p>I added my code below. I created a 5x5 identity matrix, but my teacher wants us to Use pointer/addressing methods to display the matrix. I don't fully understand pointers and I have been having trouble adding it to my code. I understood how to create the matrix, but not with the use of pointers. Any help would be greatly appreciated.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n\nint main() {\n\n   int i;\n   int j;\n   int ar[i][j];//initialize the array\n   int ptr;\n    *ptr = ar;\n   for(i = 0; i &lt; 5; i++){\n       for( j=0; j&lt;5; j++) {\n\n          //if i = j, the array will = 1 \n         if (i == j ){          \n           ar[i][j] = 1;\n           printf(\"%d\",ar[i][j]);\n        } \n\n        //else it will equal 0\n        else {\n        ar[i][j] = 0;\n        printf(\"%d\",ar[i][j]);\n     }\n       }\n   }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 6, "creation_date": 1536689575, "post_id": 52281702, "comment_id": 91511781, "body": "Try very hard to redesign your app to not do this."}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "edited": false, "score": 0, "creation_date": 1536697852, "post_id": 52281702, "comment_id": 91515720, "body": "You say that you are <i>required</i> to use two threads. Is that because this is a homework problem?"}], "answers": [{"tags": [], "owner": {"reputation": 3306, "user_id": 1951463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZ8Ii.jpg?s=128&g=1", "display_name": "Terry Carmen", "link": "https://stackoverflow.com/users/1951463/terry-carmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1536689967, "last_edit_date": 1536689967, "creation_date": 1536689494, "answer_id": 52281866, "question_id": 52281702, "link": "https://stackoverflow.com/questions/52281702/c-how-to-run-a-thread-for-a-couple-seconds-and-then-continue-with-a-second-thr/52281866#52281866", "title": "C - How to run a thread for a couple seconds and then continue with a second thread", "body": "<p>You can make your thread sleep for whatever time you want by calling the sleep() function, however this is a \"sleep <em>for</em> x seconds\" not \"sleep <em>after</em> x seconds\".</p>\n\n<p>The only way I can think of to implement this would be with a timer running outside your threads to put them to pause() them for the desired times then send a non-kill signal to wake it up when you want it again.</p>\n\n<p>sleep(n) would work, but only handles integers.</p>\n\n<p>Also, there aren't any guarantees that your thread won't be busy with blocking I/O when you try to pause/sleep it, so if it's <em>really</em> important that this actually happen exactly as you want, you'll need to do some work to prevent blocking.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536693323, "post_id": 52282719, "comment_id": 91513712, "body": "Yes, I want to run Thread 1 for 2.1sec and then Thread 2 for 3.4 sec, and then back to Thread 1 and so on. I want to use two threads, but can&#39;t find the way to implement it."}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "reply_to_user": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536693509, "post_id": 52282719, "comment_id": 91513785, "body": "@Atame, Yes, I hear you say that you <i>want</i> to use two threads. But, I am saying that you don&#39;t <i>need</i> to use two threads.  At least, not unless there is some other requirement you haven&#39;t told us about."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 1, "creation_date": 1536698715, "post_id": 52282719, "comment_id": 91516051, "body": "@Atame the requirement makes no sense.  Talk to your boss/customer/client/whatever and tell them."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1536706339, "post_id": 52282719, "comment_id": 91518613, "body": "@MartinJames you missed /professor and they are usually difficult to convice :)"}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "edited": false, "score": 0, "creation_date": 1536706665, "post_id": 52282719, "comment_id": 91518682, "body": "I agree, this looks like a homework question. It looks like countless others that I see here that may teach students something about <i>how</i> to use threads, but which fill their heads with horribly wrong ideas about <i>when</i> and <i>why</i> to use threads."}, {"owner": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536746219, "post_id": 52282719, "comment_id": 91532608, "body": "@besmirched  Yes this is a homework question, I&#39;m still learning about threads. I&#39;m just doing what my teacher is asking me to do."}, {"owner": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536914011, "post_id": 52282719, "comment_id": 91602783, "body": "I did some research and it seems you can use mutexes? Is this true?"}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "reply_to_user": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536936193, "post_id": 52282719, "comment_id": 91615609, "body": "@Atame A <a href=\"https://en.wikipedia.org/wiki/Semaphore_(programming)\" rel=\"nofollow noreferrer\">semaphore</a> would be better than a mutex. The reason is, when other programmers see the word &quot;mutex&quot; or the word &quot;lock&quot;, they will assume that it is being used for <i>mutual exclusion</i> (i.e., to prevent different threads from interfering with each other&#39;s use of a shared data structure.) When other programmers see &quot;semaphore,&quot; they are more likely to expect it to be used for <i>signalling</i> between different threads. If you had a semaphore, one thread could <i>signal</i> it when it&#39;s turn was done, and the other thread could <i>await</i> for..."}, {"owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "edited": false, "score": 0, "creation_date": 1536936259, "post_id": 52282719, "comment_id": 91615650, "body": "...its turn to begin.  I don&#39;t know whether there is some ready-made semaphore library that you can use in a plain C program, or whether you will have to implement your own."}, {"owner": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "edited": false, "score": 0, "creation_date": 1536937693, "post_id": 52282719, "comment_id": 91616475, "body": "@besmirched Thanks for your answer, I will look into semaphores!"}], "tags": [], "owner": {"reputation": 283, "user_id": 10291999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dec25f1d614fd4d883d7c6f386f925?s=128&d=identicon&r=PG&f=1", "display_name": "besmirched", "link": "https://stackoverflow.com/users/10291999/besmirched"}, "is_accepted": false, "score": 0, "last_activity_date": 1536693433, "last_edit_date": 1536693433, "creation_date": 1536693003, "answer_id": 52282719, "question_id": 52281702, "link": "https://stackoverflow.com/questions/52281702/c-how-to-run-a-thread-for-a-couple-seconds-and-then-continue-with-a-second-thr/52282719#52282719", "title": "C - How to run a thread for a couple seconds and then continue with a second thread", "body": "<p>Let me re-phrase your question: You want your program to do one thing for 2.1 seconds, then you want it to stop doing that thing, and do some other thing for 3.4 seconds, and then you want it to go back to doing the first thing.</p>\n\n<p>You don't need multiple threads for that. All you need is a way for your two functions to <a href=\"https://linux.die.net/man/3/clock_gettime\" rel=\"nofollow noreferrer\">look at the clock</a>.</p>\n\n<pre><code>#include &lt;time.h&gt;\n\ndo_thing_1(double for_how_long) {\n    struct timespec start_time;\n    clock_gettime(CLOCK_MONOTONIC, &amp;start_time);\n    while (elapsed_time_since(&amp;start_time) &lt; for_how_long) {\n        ...\n    }\n}\n\ndo_thing_2(double for_how_long) {\n    struct timespec start_time;\n    clock_gettime(CLOCK_MONOTONIC, &amp;start_time);\n    while (elapsed_time_since(&amp;start_time) &lt; for_how_long) {\n        ...\n    }\n}\n\nmain(...) {\n    do_thing_1(2.1 /*seconds*/);\n    do_thing_2(3.4 /*seconds*/);\n    do_thing_1(9999999.9);\n}\n</code></pre>\n\n<p>Left as an exercisse for the reader:  Implement <code>elapsed_time_since(...)</code></p>\n\n<p>Extra credit: Write a generic <code>do_thing(function, for_how_long)</code> function.</p>\n"}], "owner": {"reputation": 1, "user_id": 10349072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e93a7da90a37d95ace24747180b8a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Atame", "link": "https://stackoverflow.com/users/10349072/atame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1536758037, "creation_date": 1536688827, "last_edit_date": 1536758037, "question_id": 52281702, "link": "https://stackoverflow.com/questions/52281702/c-how-to-run-a-thread-for-a-couple-seconds-and-then-continue-with-a-second-thr", "title": "C - How to run a thread for a couple seconds and then continue with a second thread", "body": "<p>I'm working on my program where I want thread 1 to run for 2.1 seconds, after 2.1 seconds I want thread 2 to run for 3.4 seconds and then it needs to switch back to thread 1. I've managed to make both threads run, but without the given time. It is required that I use 2 threads.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nint main() {\n\n    void* taskOne();\n    void* taskTwo();\n\n    pthread_attr_t tattr;\n    pthread_attr_init(&amp;tattr);\n\n    pthread_t thread1, thread2;\n\n    double seconds1 = 2.1;\n    double seconds2 = 3.4;\n\n\n    pthread_create(&amp;thread1, &amp;tattr, taskOne, NULL);\n    pthread_create(&amp;thread2, &amp;tattr, taskTwo, NULL);\n\n    pthread_join(thread1, NULL);\n    pthread_join(thread2, NULL);\n\n    return 0;\n}\n\nvoid* taskOne() {\n    int i, j, m, n;\n    while (1) {\n        for (i = 0; i &lt; 5; i++) {\n            for (j = 1; j &lt;= 8; j++) {\n                printf(\"thread: 1 periodnumber: %i\\n\", j);\n                for (m = 0; m &lt;= 1250; m++)\n                    for (n = 0; n &lt;= 250000; n++);\n\n\n            }\n        }\n    }\n}\n\nvoid* taskTwo() {\n    int i, j, m, n;\n    while (1) {\n        for (i = 0; i &lt; 5; i++) {\n            for (j = 1; j &lt;= 8; j++) {\n                printf(\"thread: 2 periodnumber: %i\\n\", j);\n                for (m = 0; m &lt;= 2750; m++)\n                    for (n = 0; n &lt;= 250000; n++);\n\n\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1536688680, "post_id": 52281631, "comment_id": 91511316, "body": "The debugger might help on this one."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536689596, "post_id": 52281631, "comment_id": 91511791, "body": "Note: <code>size4 = (size1 - (end - start))</code> is unused.  Why is it there?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1536690116, "post_id": 52281631, "comment_id": 91512041, "body": "In the first example the index <code>i</code> was incremented (in the loop control) but you wrote nothing to that array position, after filling in the middle part. The second example is correct - you need to copy the next element anyway, whether or not you copy the middle part. So no <code>else</code> is needed."}, {"owner": {"reputation": 31, "user_id": 6819706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc21e426210a1c7e2d05ee3126172ee?s=128&d=identicon&r=PG&f=1", "display_name": "A. Miranda", "link": "https://stackoverflow.com/users/6819706/a-miranda"}, "edited": false, "score": 0, "creation_date": 1536691688, "post_id": 52281631, "comment_id": 91512922, "body": "I see it now. It&#39;s so obvious now... i gets an increment at the end of the loop that fills in the middle, and then control immediately flows to the larger loop, which means i gets incremented twice at the end of the middle-filling loop. Wonderful catch, thank you very much!"}, {"owner": {"reputation": 31, "user_id": 6819706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc21e426210a1c7e2d05ee3126172ee?s=128&d=identicon&r=PG&f=1", "display_name": "A. Miranda", "link": "https://stackoverflow.com/users/6819706/a-miranda"}, "edited": false, "score": 0, "creation_date": 1536691972, "post_id": 52281631, "comment_id": 91513060, "body": "The unused variable size4 is a left over from what I deleted. As I stated, this program is part of an assignment, and I know sometimes this site is used to copy paste code, so I didn&#39;t want this to be used in the future for such purposes."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536693065, "post_id": 52281631, "comment_id": 91513606, "body": "It&#39;s helpful to <i>direct</i> your replies to the commenters, for example your most recent comment would be better as: @chux . . ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536693658, "post_id": 52281631, "comment_id": 91513846, "body": "@A.Miranda I would have commented like this to demonstrate the style, but a) the comment reaches the Original Poster anyway, and b) I wanted to draw chux&#39;s attention to your answer to his comment, and c) only one @ is allowed per comment."}, {"owner": {"reputation": 31, "user_id": 6819706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc21e426210a1c7e2d05ee3126172ee?s=128&d=identicon&r=PG&f=1", "display_name": "A. Miranda", "link": "https://stackoverflow.com/users/6819706/a-miranda"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1536693949, "post_id": 52281631, "comment_id": 91513972, "body": "@WeatherVane Thank you, I will keep this in mind going forward."}], "answers": [{"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1536707720, "last_edit_date": 1536707720, "creation_date": 1536706707, "answer_id": 52285227, "question_id": 52281631, "link": "https://stackoverflow.com/questions/52281631/else-statement-causes-improper-output/52285227#52285227", "title": "Else statement causes improper output", "body": "<p>You don't assign the 5th member of the <code>outputArray2</code> array. Placing some printfs:</p>\n\n<pre><code>     for(int i = 0; i &lt; size3; i++){\n            if (i == position) {\n                    for(int j = start; j &lt;= end; j++) {\n                            printf(\"i=%d j=%d\\n\", i, j);\n                            outputArray2[i] = inputArray1[j];\n                            i++;\n                    }\n            } else {\n                    printf(\"i=%d kIterator=%d\\n\", i, kIterator);\n                    outputArray2[i] = inputArray2[kIterator];\n                    kIterator++;\n            }\n    }\n</code></pre>\n\n<p>You can see:</p>\n\n<pre><code>i=0 kIterator=0\ni=1 j=2\ni=2 j=3\ni=3 j=4\ni=4 j=5\ni=6 kIterator=1\n</code></pre>\n\n<p><code>i</code> is never equal <code>5</code>, thus <code>outputArray2[5]</code> is never initialized and has uninitialized value. Why is that? Because the <code>i</code> gets incremented twice.<br>\nImagine you are on the line <code>outputArray2[i] = inputArray1[j];</code> the last time with <code>i = 4</code> and <code>j =  5 = end</code>. Then the next line <code>i++</code> makes i=5, then <code>j++</code> from <code>for</code> increments <code>j = 6</code> which is greater then <code>end</code> so the <code>for(int j = start; j &lt;= end; j++)</code> exits. Then the <code>i++</code> statement from the first <code>for(int i = 0; i &lt; size3; i++)</code> get's executed thus incrementing the <code>i</code> second time to <code>6</code>! You can also fix the code better with:</p>\n\n<pre><code>     for(int i = 0; i &lt; size3; i++){\n            if (i == position) {\n                    for(int j = start; j &lt;= end; j++) {\n                            outputArray2[i] = inputArray1[j];\n                            i++;\n                    }\n                    i--;\n            } else {\n                    outputArray2[i] = inputArray2[kIterator];\n                    kIterator++;\n            }\n    }\n</code></pre>\n\n<p>This method is better then your code, because when <code>end == size3</code> then the loop doesn't try to assign the value out of bound for <code>outputArray2</code> (ie. <code>outputArray2[size3] = smth</code>). (It's all assuming, that <code>position+(end-start) &lt;= size3</code>, which you don't check anyway).</p>\n"}], "owner": {"reputation": 31, "user_id": 6819706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc21e426210a1c7e2d05ee3126172ee?s=128&d=identicon&r=PG&f=1", "display_name": "A. Miranda", "link": "https://stackoverflow.com/users/6819706/a-miranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536707720, "creation_date": 1536688499, "last_edit_date": 1536689174, "question_id": 52281631, "link": "https://stackoverflow.com/questions/52281631/else-statement-causes-improper-output", "title": "Else statement causes improper output", "body": "<p>I found and fixed an error in a program I needed to make for an assignment. But I don't understand why the error occurs and I would like to understand what is happening for future uses.</p>\n\n<p>The program asks the user for the size of 2 int arrays, then prompts the user to enter the values these arrays will hold. It then asks the user for a range of indices from array 1 to add the values to array 2 before a given position. Then 2 more arrays are generated to show the new array 2 with the new values added from array one.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid fillArray(int x[], int size);\n\nint main()\n{\n        int size1, size2, start, end, position;\n\n        //getting input and creating array one\n        printf(\"How big is array one?: \");\n        scanf(\"%d\", &amp;size1);\n        int inputArray1[size1];\n        printf(\"Please enter the numbers for array one: \");\n        fillArray(inputArray1, size1);\n\n        //getting input and creating array two\n        printf(\"How big is array two?: \");\n        scanf(\"%d\",&amp;size2);\n        int inputArray2[size2];\n        printf(\"Please enter the numbers for array two: \");\n        fillArray(inputArray2, size2);\n\n        printf(\"Enter the start and end index of array one to be removed: \");\n        scanf(\"%d %d\", &amp;start, &amp;end);\n\n        printf(\"Enter the position of array two to be added before: \");\n        scanf(\"%d\", &amp;position);\n\n        int size3 = ((end - start) + size2+1), size4 = (size1 - (end - start));\n        int outputArray2[size3], kIterator=0; \n\n\n         for(int i=0; i&lt;size3; i++){\n                if(i == position){\n                        for(int j=start; j&lt;=end; j++){\n                                outputArray2[i] = inputArray1[j];\n                                i++;\n                        }\n                }else{\n                //HERE IS WHERE I FIXED THE ERROR\n                outputArray2[i] = inputArray2[kIterator];\n                kIterator++;\n                }\n        }\n\n\n        for(int i=0; i&lt;size3; i++){\n                printf(\"%d \", outputArray2[i]);\n        }\n        return 0;\n}\n\n\n//Function to fill an array with user inputs\nvoid fillArray(int x[], int size){\n        for(int i=0; i&lt;size; i++)\n                scanf(\"%d\", &amp;x[i]);\n}\n</code></pre>\n\n<p>How big is array one?: 8<br>\nPlease enter the numbers for array one: 9 12 8 41 38 12 67 49<br>\nHow big is array two?: 3<br>\nPlease enter the numbers for array two: 11 27 6<br>\nEnter the start and end index of array one to be removed: 2 5<br>\nEnter the position of array two to be added before: 1<br>\n11 8 41 38 12 32767 27 </p>\n\n<p>Why does this output occur? The output should be: 11 8 41 38 12 27 6<br>\nWhen I remove the else block but leave the code to look like:</p>\n\n<pre><code>for(int i=0; i&lt;size3; i++){\n     if(i == position){\n         for(int j=start; j&lt;=end; j++){\n              outputArray2[i] = inputArray1[j];\n              i++;\n         }\n     }\n     //HERE IS WHERE I FIXED THE ERROR\n     outputArray2[i] = inputArray2[kIterator];\n     kIterator++;\n\n}\n</code></pre>\n\n<p>Suddenly the output is correct and I don't get that large number. Why is this?</p>\n"}, {"tags": ["c", "string", "strstr"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1536687739, "post_id": 52281456, "comment_id": 91510864, "body": "<code>strstr</code> is not the right tool. Look at <code>strtok</code> or <code>strchr</code> instead. Too broad anyways."}, {"owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1536688068, "post_id": 52281456, "comment_id": 91511027, "body": "Have you tried anything yet? What exactly was the problem?"}, {"owner": {"reputation": 35, "user_id": 10348993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f8e918c6fafcff8123d50c48b8e52f?s=128&d=identicon&r=PG&f=1", "display_name": "renshencha", "link": "https://stackoverflow.com/users/10348993/renshencha"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536688076, "post_id": 52281456, "comment_id": 91511032, "body": "@EugeneSh. My assignment specifically tells me to use strstr and not to use strtok.."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1536688154, "post_id": 52281456, "comment_id": 91511062, "body": "Then I would guess it does not want you to use  <i>any</i> library provided string parsing functions and wants you to implement it using C primitives."}, {"owner": {"reputation": 35, "user_id": 10348993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f8e918c6fafcff8123d50c48b8e52f?s=128&d=identicon&r=PG&f=1", "display_name": "renshencha", "link": "https://stackoverflow.com/users/10348993/renshencha"}, "reply_to_user": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "edited": false, "score": 0, "creation_date": 1536688208, "post_id": 52281456, "comment_id": 91511081, "body": "@Mureinik Yes ,I can get first part by making two pointers using strstr and subtracting the substring, but I dont know how to make it work for the rest of the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536688245, "post_id": 52281456, "comment_id": 91511097, "body": "@renshencha 1) requirements like &quot;not to use strstr and not to use strtok&quot; belong in the question, not only in a comment.  2) Post what code you have tried."}, {"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "edited": false, "score": 1, "creation_date": 1536688258, "post_id": 52281456, "comment_id": 91511101, "body": "@renshencha: Then you should post your code and tell us what is working and what isn&#39;t working."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1536688433, "post_id": 52281456, "comment_id": 91511181, "body": "Keep two pointers, one &quot;previous&quot; and the other &quot;current&quot;. Set &quot;previous&quot; to the start of the string. In a loop, set &quot;current&quot; to the first instance of the delimiter &quot;:&quot; or the string&#39;s nul terminator. Use memcpy to get the bytes between &quot;previous&quot; and &quot;current&quot;-1. If &quot;current&quot; is at the nul terminator, break out of the loop. Else, set &quot;previous&quot; to the position of &quot;current&quot;+1, and repeat the loop."}, {"owner": {"reputation": 1098, "user_id": 6694684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a3b34689f308f4a92ad3002622bd6d3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin J.", "link": "https://stackoverflow.com/users/6694684/benjamin-j"}, "reply_to_user": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 0, "creation_date": 1536689478, "post_id": 52281456, "comment_id": 91511728, "body": "You can do this with a loop as @AlexReynolds suggested. But we&#39;re not here to write a complete program for you. I think you should try to implement the loop. If you get stuck you can come back and ask for specific help."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1536692241, "creation_date": 1536692241, "answer_id": 52282545, "question_id": 52281456, "link": "https://stackoverflow.com/questions/52281456/how-to-loop-a-string-using-strstr-to-find-substrings-in-c/52282545#52282545", "title": "How to loop a string using strstr to find substrings in C", "body": "<blockquote>\n  <p>find different substrings of information from a larger string where the information is separated by \":\"<br>\n  How could I using <code>strstr</code> function in C loop this string to extract the information into different substring?</p>\n</blockquote>\n\n<p><code>strstr()</code> isn't the best tool for this task, but it can be used to look for a <code>\":\"</code>.<br>\nInstead I'd recommend <code>strcspn(string, \"\\n\")</code> as the goal is to find the next <code>\":\"</code> <strong>or</strong> <em>null character</em>.</p>\n\n<p>OP'c code is close to forming a loop, yet needs to also handle the last token, which lacks a final <code>':'</code>.</p>\n\n<pre><code>void parse_colon(const char *string) {\n  while (*string) { // loop until at the end\n    size_t len;\n    const char *endptr = strstr(string, \":\"); // much like OP's code\n    if (endptr) {\n      len = (size_t) (endptr - string);  // much like OP's code\n      endptr++;\n    } else {\n      len = strlen(string);\n      endptr = string + len;\n    }\n    char *result = malloc(len + 1);\n    if (result) {\n      memcpy(result, string, len);\n      result[len] = '\\0';\n      puts(result);\n      free(result);\n    }\n    string = endptr;\n  }\n}\n\nint main(void) {\n  parse_colon(\"username:id:password:info\");\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>username\nid\npassword\ninfo\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10348993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f8e918c6fafcff8123d50c48b8e52f?s=128&d=identicon&r=PG&f=1", "display_name": "renshencha", "link": "https://stackoverflow.com/users/10348993/renshencha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 52282545, "answer_count": 1, "score": 0, "last_activity_date": 1536692241, "creation_date": 1536687687, "last_edit_date": 1536690889, "question_id": 52281456, "link": "https://stackoverflow.com/questions/52281456/how-to-loop-a-string-using-strstr-to-find-substrings-in-c", "title": "How to loop a string using strstr to find substrings in C", "body": "<p>I'm trying to find different substrings of information from a larger string where the information is separated by <code>\":\"</code> </p>\n\n<p>For example: <strong>username:id:password:info</strong></p>\n\n<p>How could I using <code>strstr</code> function in C loop this string to extract the information into different substring?</p>\n\n<p>So far I've tried something like:</p>\n\n<pre><code>char string[] = \"username:id:password:info\"\nchar *endptr;\n\nif((endptr = strstr(string, \":\")) != NULL)  {\n  char *result = malloc(endptr - string + 1);\n  if(result != NULL) {\n    memcpy(result, string, (endptr - string));\n    result[endptr - string] = '\\0';\n    username = strdup(result);\n    free(result);\n  }\n}\n</code></pre>\n\n<p>I want to make this loopable to extract all substrings.</p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1536687068, "post_id": 52281232, "comment_id": 91510536, "body": "In <code>while (fgets(str, MSGMAX, p)){ strcpy (mymsg.text, str); }</code> you copy each line to the same  <code>mymsg.text</code>, so you end up sending the last line only. Either send each line individually or concat all lines, eg using strcat"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8058046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8519378503c5e65811cc999e7121f3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Timokhin", "link": "https://stackoverflow.com/users/8058046/ilya-timokhin"}, "edited": false, "score": 1, "creation_date": 1536687383, "post_id": 52281322, "comment_id": 91510680, "body": "Thank you! Really helpful answer."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1536687184, "creation_date": 1536687184, "answer_id": 52281322, "question_id": 52281232, "link": "https://stackoverflow.com/questions/52281232/multiline-message-sending-in-c-doesnt-work/52281322#52281322", "title": "Multiline message sending in C doesn&#39;t work", "body": "<p>With <code>while (fgets(str, MSGMAX, p)){ strcpy (mymsg.text, str); }</code>, you will override the contents of <code>mymsg.txt</code> with every new line read by <code>fgets</code>. I'd suggest to write something like...</p>\n\n<pre><code>strcpy(mymsg.text,\"\");\nwhile (fgets(str, MSGMAX, p)){ strcat (mymsg.text, str); }\n</code></pre>\n\n<p>or you send the buffer to the server within the loop, i.e. sending every line read separately.</p>\n"}], "owner": {"reputation": 59, "user_id": 8058046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8519378503c5e65811cc999e7121f3ad?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Timokhin", "link": "https://stackoverflow.com/users/8058046/ilya-timokhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52281322, "answer_count": 1, "score": 0, "last_activity_date": 1551801688, "creation_date": 1536686829, "last_edit_date": 1551801688, "question_id": 52281232, "link": "https://stackoverflow.com/questions/52281232/multiline-message-sending-in-c-doesnt-work", "title": "Multiline message sending in C doesn&#39;t work", "body": "<p>I use message queue in C and sending information about all files (in current folder) from the <strong>client</strong> to server (MSGMAX defined as 4096).\nClient code:</p>\n\n<pre><code>    int mq_id;\n    struct { long type; char text[MSGMAX]; } mymsg;\n    mq_id = msgget(12, IPC_CREAT | 0666);\nFILE* p;\nchar str[MSGMAX];\np = popen(\"ls -l\", \"r\");\nwhile (fgets(str, MSGMAX, p)){ strcpy (mymsg.text, str); }\npclose(p);\nmymsg.type = 1;\nmsgsnd(mq_id, &amp;mymsg, sizeof(mymsg), IPC_NOWAIT);\n}\n</code></pre>\n\n<p>In this part <code>mymsg.text</code> returns correct multline string (result of <code>ls -l</code>). But when I tried to print this string in <strong>server</strong> part, it retured only last line of whole string:</p>\n\n<pre><code>    int mq_id;\n    struct { long type; char text[MSGMAX]; } mymsg;\n    mq_id = msgget(12, 0);\n    if (msgrcv(mq_id, &amp;mymsg, sizeof(mymsg), 0, 0) &lt; 0)\n    perror(\"\\nMsg error!\");\n    else\n    printf(\"%s\", mymsg.text);\n</code></pre>\n\n<p>How could I send <code>mymsg.text</code> completely, with all lines? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536685675, "post_id": 52280875, "comment_id": 91509881, "body": "The int at address <code>0x7051</code> will be assigned the value <code>0x0003</code>"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1536685721, "post_id": 52280875, "comment_id": 91509904, "body": "In this case you have memory mapped I/O and the device is at address 0x7051. Then you are writing a command or something else to that address. That&#39;s all I can tell from the #define statement."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536687996, "post_id": 52280875, "comment_id": 91510993, "body": "Note: Good programming practice would have employed enclosing <code>()</code> --&gt; <code>define SCICTL1A ((volatile unsigned int *)0x7051)</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536694358, "post_id": 52280875, "comment_id": 91514140, "body": "That&#39;s completely unrelated to the preprocessor. Start understanding what the preprocessor actually does. The expression itself will become clear from every textbook."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536694442, "post_id": 52280875, "comment_id": 91514184, "body": "@chux: \u2026 and using fixed-width types instead of standard integer types."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536694622, "post_id": 52280875, "comment_id": 91514267, "body": "@toohonestforthissite True, Using  fixed width types is best for mapping hardware registers.  Aniruddh P Rao, are your aware  of <code>uint16_t</code> and family as in <code>#define SCICTL1A ((volatile uint16_t *)0x7051)</code> ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536696159, "post_id": 52280875, "comment_id": 91515013, "body": "@chux: I suppose that&#39;s some vendor-provided header. No beginner will ceate them theirselves."}, {"owner": {"reputation": 11, "user_id": 10158746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b69b0210debb01900368a9cf30377b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aniruddh P Rao", "link": "https://stackoverflow.com/users/10158746/aniruddh-p-rao"}, "edited": false, "score": 0, "creation_date": 1537018543, "post_id": 52280875, "comment_id": 91636210, "body": "uint16_t was defined in the header file which wasn&#39;t included in the question above."}], "answers": [{"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1536685662, "creation_date": 1536685662, "answer_id": 52280954, "question_id": 52280875, "link": "https://stackoverflow.com/questions/52280875/pointer-definition-in-preprocessor-directive/52280954#52280954", "title": "Pointer definition in preprocessor directive", "body": "<p>There is no variable there. Only the pointer.</p>\n\n<p>the <code>*SCICTL1A = 0X0003;</code> is replaced by the preprocessor by the:</p>\n\n<pre><code>*(volatile unsigned int *)0x7051 = 0x0003;\n</code></pre>\n\n<p>You just write the location with the address of the 0x07051. That does it mean depends on your implementation</p>\n"}, {"comments": [{"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536688944, "post_id": 52280959, "comment_id": 91511453, "body": "<code>volatile</code> is required when you want to tell the compiler to not optimize out memory access, in this case to a register in a memory-mapped peripheral. This memory will update without the compiler knowing it. Normally it would predict when it needs to access memory and avoid unnecessary memory access to speed up the code (optimization). In this case, those predictions would almost always be wrong and your code would not behave how you would expect it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1536694483, "post_id": 52280959, "comment_id": 91514199, "body": "@bigwillydos: That&#39;s not correct. <code>volatile</code> does not enforce memory accesses."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 3, "last_activity_date": 1536690413, "last_edit_date": 1536690413, "creation_date": 1536685673, "answer_id": 52280959, "question_id": 52280875, "link": "https://stackoverflow.com/questions/52280875/pointer-definition-in-preprocessor-directive/52280959#52280959", "title": "Pointer definition in preprocessor directive", "body": "<p>There is no variables here. The macro expands as text in place, so the 2nd excerpt becomes</p>\n\n<pre><code>*(volatile unsigned int *)0x7051 = 0X0003;\n</code></pre>\n\n<p>It casts the unsigned integer <code>0x7051</code> into a pointer to volatile unsigned integer, then references this in assignment. Essentially it stores <code>0x0003</code> into the <code>unsigned integer</code>-wide piece of memory that starts from address <code>0x7051</code> (or, however the integer-to-pointer conversion happens to work on your target platform) </p>\n\n<p><code>volatile</code> is required so that the compiler does not just optimize the assignment out - it must be strictly evaluated and considered a side effect (see <a href=\"https://stackoverflow.com/a/46455917/918959\">as-if rule</a>).</p>\n\n<p>As for the actual reason why this is done - it is probably some memory-mapped device, check the microcontroller datasheets for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "is_accepted": false, "score": 0, "last_activity_date": 1536686107, "last_edit_date": 1536686107, "creation_date": 1536685790, "answer_id": 52280986, "question_id": 52280875, "link": "https://stackoverflow.com/questions/52280875/pointer-definition-in-preprocessor-directive/52280986#52280986", "title": "Pointer definition in preprocessor directive", "body": "<p>I'm assuming you're using a TMS320F2803x Piccolo microcontroller: <a href=\"http://www.ti.com/lit/ds/sprs584l/sprs584l.pdf\" rel=\"nofollow noreferrer\">http://www.ti.com/lit/ds/sprs584l/sprs584l.pdf</a></p>\n\n<p>According to this document, address <code>0x7051</code> is Control Register 1 for the Serial Communications Interface (SCI) Module.</p>\n\n<p>According to this document, <a href=\"https://www.swarthmore.edu/NatSci/echeeve1/Ref/embedRes/DL/28069TechRefManual_spruh18d.pdf\" rel=\"nofollow noreferrer\">https://www.swarthmore.edu/NatSci/echeeve1/Ref/embedRes/DL/28069TechRefManual_spruh18d.pdf</a>, you're able to do the following with this register:</p>\n\n<blockquote>\n  <p>SCICTL1 controls the receiver/transmitter enable, TXWAKE and SLEEP\n  functions, and the SCI software reset.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 10158746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b69b0210debb01900368a9cf30377b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aniruddh P Rao", "link": "https://stackoverflow.com/users/10158746/aniruddh-p-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 52280959, "answer_count": 3, "score": 0, "last_activity_date": 1536694296, "creation_date": 1536685392, "last_edit_date": 1536694296, "question_id": 52280875, "link": "https://stackoverflow.com/questions/52280875/pointer-definition-in-preprocessor-directive", "title": "Pointer definition in preprocessor directive", "body": "<p>I was going through a programming manual for one of the microcontrollers I came across and it had the preprocessor definition as follows: </p>\n\n<pre><code>#define SCICTL1A (volatile unsigned int *)0x7051\n</code></pre>\n\n<p>and a statement in the source file as follows: </p>\n\n<pre><code>*SCICTL1A = 0X0003;\n</code></pre>\n\n<p>My question is, what is the pointer variable here and what is it pointing to, (I have never come across pointer definitions in preprocessor directives before since I am a beginner to C programming) and what does the assignment statement do? </p>\n"}, {"tags": ["c", "matlab", "makefile", "cross-compiling", "simulink"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536684797, "post_id": 52280560, "comment_id": 91509460, "body": "Have you checked the binary is in the appropriate location in the SoC board?"}, {"owner": {"reputation": 1, "user_id": 6359356, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204922874931/picture?type=large", "display_name": "Hector Mu&#241;oz H", "link": "https://stackoverflow.com/users/6359356/hector-mu%c3%b1oz-h"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536695596, "post_id": 52280560, "comment_id": 91514753, "body": "Hi, yes. After a &quot;ls&quot; command I can see the application there but it doesn&#39;t run. Maybe the binary is corrupted or was not properly created?"}], "owner": {"reputation": 1, "user_id": 6359356, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154204922874931/picture?type=large", "display_name": "Hector Mu&#241;oz H", "link": "https://stackoverflow.com/users/6359356/hector-mu%c3%b1oz-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536683977, "creation_date": 1536683977, "question_id": 52280560, "link": "https://stackoverflow.com/questions/52280560/simulink-cross-compilation-succeeded-application-not-working", "title": "Simulink cross-compilation succeeded, application not working", "body": "<p>I am currently trying to compile a Simulink model for a SoC board that is running a Linux OS. I am able to compile and run applications successfully for this board making my own makefiles, which are really very simple. </p>\n\n<p>The cross-compiler I am using is the<br>\nenvironment-setup-cortexa8hf-vfp-neon-poky-linux-gnueabi</p>\n\n<p>Also, generating c code from a Simulink model and applying my makefile works as well. (With very simple simulink models)</p>\n\n<p>The problem is when I try  to generate code and also compile the simulink model with the following options:</p>\n\n<p>ert.tcl</p>\n\n<p>toolchain: automatic (GNU)\nfor: faster builds</p>\n\n<p>This generates a binary that is working but I have to modify the makefile in order to compile the code with my cross-compiler. The cross-compilation works but when I try to run the application in the SoC board I get the following error:\n-sh. ./application file not found</p>\n\n<p>Here is the makefile:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>###########################################################################\r\n## Makefile generated for Simulink model 'simmod'. \r\n## \r\n## Makefile     : simmod.mk\r\n## Generated on : Tue Sep 11 14:57:43 2018\r\n## MATLAB Coder version: 4.0 (R2018a)\r\n## \r\n## Build Info:\r\n## \r\n## Final product: $(RELATIVE_PATH_TO_ANCHOR)/simmod\r\n## Product type : executable\r\n## Build type   : Top-Level Standalone Executable\r\n## \r\n###########################################################################\r\n\r\n###########################################################################\r\n## MACROS\r\n###########################################################################\r\n\r\n# Macro Descriptions:\r\n# PRODUCT_NAME            Name of the system to build\r\n# MAKEFILE                Name of this makefile\r\n# COMPUTER                Computer type. See the MATLAB \"computer\" command.\r\n\r\nPRODUCT_NAME              = simmod\r\nMAKEFILE                  = simmod.mk\r\nCOMPUTER                  = GLNXA64\r\nMATLAB_ROOT               = /opt/MATLAB/R2018a\r\nMATLAB_BIN                = /opt/MATLAB/R2018a/bin\r\nMATLAB_ARCH_BIN           = $(MATLAB_BIN)/glnxa64\r\nMASTER_ANCHOR_DIR         = \r\nSTART_DIR                 = /home/hector/Documents/Qt/DA_AMiRo/Devices/Reflective_Operator/Matlab_Reflective_Operator/temp\r\nARCH                      = glnxa64\r\nSOLVER                    = \r\nSOLVER_OBJ                = \r\nCLASSIC_INTERFACE         = 0\r\nTGT_FCN_LIB               = ISO_C\r\nMODEL_HAS_DYNAMICALLY_LOADED_SFCNS = 0\r\nMODELREF_LINK_RSPFILE_NAME = simmod_ref.rsp\r\nRELATIVE_PATH_TO_ANCHOR   = ..\r\nC_STANDARD_OPTS           = -mfloat-abi=hard -std=gnu99 -pedantic -fwrapv #-std=c99 \r\nCPP_STANDARD_OPTS         = -fwrapv\r\n\r\n###########################################################################\r\n## TOOLCHAIN SPECIFICATIONS\r\n###########################################################################\r\n\r\n# Toolchain Name:          GNU gcc/g++ v4.4.x | gmake (64-bit Linux)\r\n# Supported Version(s):    4.4.x\r\n# ToolchainInfo Version:   R2018a\r\n# Specification Revision:  1.0\r\n# \r\n#-------------------------------------------\r\n# Macros assumed to be defined elsewhere\r\n#-------------------------------------------\r\n\r\n# C_STANDARD_OPTS\r\n# CPP_STANDARD_OPTS\r\n\r\n#-----------\r\n# MACROS\r\n#-----------\r\n\r\nWARN_FLAGS         = -Wall -W -Wwrite-strings -Winline -Wstrict-prototypes -Wnested-externs -Wpointer-arith -Wcast-align\r\nWARN_FLAGS_MAX     = $(WARN_FLAGS) -Wcast-qual -Wshadow\r\nCPP_WARN_FLAGS     = -Wall -W -Wwrite-strings -Winline -Wpointer-arith -Wcast-align\r\nCPP_WARN_FLAGS_MAX = $(CPP_WARN_FLAGS) -Wcast-qual -Wshadow\r\n\r\nTOOLCHAIN_SRCS = \r\nTOOLCHAIN_INCS = \r\nTOOLCHAIN_LIBS = \r\n\r\n#------------------------\r\n# BUILD TOOL COMMANDS\r\n#------------------------\r\n\r\n# C Compiler: GNU C Compiler\r\nCC = arm-poky-linux-gnueabi-gcc #gcc\r\n\r\n# Linker: GNU Linker\r\nLD = arm-poky-linux-gnueabi-g++ #g++\r\n\r\n# C++ Compiler: GNU C++ Compiler\r\nCPP = arm-poky-linux-gnueabi-g++ #g++\r\n\r\n# C++ Linker: GNU C++ Linker\r\nCPP_LD = arm-poky-linux-gnueabi-g++ #g++\r\n\r\n# Archiver: GNU Archiver\r\nAR = ar\r\n\r\n# MEX Tool: MEX Tool\r\nMEX_PATH = $(MATLAB_ARCH_BIN)\r\nMEX = \"$(MEX_PATH)/mex\"\r\n\r\n# Download: Download\r\nDOWNLOAD =\r\n\r\n# Execute: Execute\r\nEXECUTE = $(PRODUCT)\r\n\r\n# Builder: GMAKE Utility\r\nMAKE_PATH = %MATLAB%/bin/glnxa64\r\nMAKE = \"$(MAKE_PATH)/gmake\"\r\n\r\n\r\n#-------------------------\r\n# Directives/Utilities\r\n#-------------------------\r\n\r\nCDEBUG              = -g\r\nC_OUTPUT_FLAG       = -o\r\nLDDEBUG             = -g\r\nOUTPUT_FLAG         = -o\r\nCPPDEBUG            = -g\r\nCPP_OUTPUT_FLAG     = -o\r\nCPPLDDEBUG          = -g\r\nOUTPUT_FLAG         = -o\r\nARDEBUG             =\r\nSTATICLIB_OUTPUT_FLAG =\r\nMEX_DEBUG           = -g\r\nRM                  = @rm -f\r\nECHO                = @echo\r\nMV                  = @mv\r\nRUN                 =\r\n\r\n#----------------------------------------\r\n# \"Faster Builds\" Build Configuration\r\n#----------------------------------------\r\n\r\nARFLAGS              = ruvs\r\nCFLAGS               = -c $(C_STANDARD_OPTS) -fPIC \\\r\n                       -O0\r\nCPPFLAGS             = -c $(CPP_STANDARD_OPTS) -fPIC \\\r\n                       -O0\r\nCPP_LDFLAGS          = -Wl,-rpath,\"$(MATLAB_ARCH_BIN)\",-L\"$(MATLAB_ARCH_BIN)\"\r\nCPP_SHAREDLIB_LDFLAGS  = -shared -Wl,-rpath,\"$(MATLAB_ARCH_BIN)\",-L\"$(MATLAB_ARCH_BIN)\" -Wl,--no-undefined\r\nDOWNLOAD_FLAGS       =\r\nEXECUTE_FLAGS        =\r\nLDFLAGS              = -Wl,-rpath,\"$(MATLAB_ARCH_BIN)\",-L\"$(MATLAB_ARCH_BIN)\"\r\nMEX_CPPFLAGS         = -R2018a -MATLAB_ARCH=$(ARCH) $(INCLUDES) \\\r\n                         \\\r\n                       CXXOPTIMFLAGS=\"$(C_STANDARD_OPTS)  \\\r\n                       -O0 \\\r\n                        $(DEFINES)\" \\\r\n                         \\\r\n                       -silent\r\nMEX_CPPLDFLAGS       = LDFLAGS=='$$LDFLAGS'\r\nMEX_CFLAGS           = -R2018a -MATLAB_ARCH=$(ARCH) $(INCLUDES) \\\r\n                         \\\r\n                       COPTIMFLAGS=\"$(C_STANDARD_OPTS)  \\\r\n                       -O0 \\\r\n                        $(DEFINES)\" \\\r\n                         \\\r\n                       -silent\r\nMEX_LDFLAGS          = LDFLAGS=='$$LDFLAGS'\r\nMAKE_FLAGS           = -f $(MAKEFILE)\r\nSHAREDLIB_LDFLAGS    = -shared -Wl,-rpath,\"$(MATLAB_ARCH_BIN)\",-L\"$(MATLAB_ARCH_BIN)\" -Wl,--no-undefined\r\n\r\n#--------------------\r\n# File extensions\r\n#--------------------\r\n\r\nH_EXT               = .h\r\nOBJ_EXT             = .o\r\nC_EXT               = .c\r\nEXE_EXT             =\r\nSHAREDLIB_EXT       = .so\r\nHPP_EXT             = .hpp\r\nOBJ_EXT             = .o\r\nCPP_EXT             = .cpp\r\nEXE_EXT             =\r\nSHAREDLIB_EXT       = .so\r\nSTATICLIB_EXT       = .a\r\nMEX_EXT             = .mexa64\r\nMAKE_EXT            = .mk\r\n\r\n\r\n###########################################################################\r\n## OUTPUT INFO\r\n###########################################################################\r\n\r\nPRODUCT = $(RELATIVE_PATH_TO_ANCHOR)/simmod\r\nPRODUCT_TYPE = \"executable\"\r\nBUILD_TYPE = \"Top-Level Standalone Executable\"\r\n\r\n###########################################################################\r\n## INCLUDE PATHS\r\n###########################################################################\r\n\r\nINCLUDES_BUILDINFO = -I$(START_DIR) -I$(START_DIR)/simmod_ert_rtw -I$(MATLAB_ROOT)/extern/include -I$(MATLAB_ROOT)/simulink/include -I$(MATLAB_ROOT)/rtw/c/src -I$(MATLAB_ROOT)/rtw/c/src/ext_mode/common -I$(MATLAB_ROOT)/rtw/c/ert\r\n\r\nINCLUDES = $(INCLUDES_BUILDINFO)\r\n\r\n###########################################################################\r\n## DEFINES\r\n###########################################################################\r\n\r\nDEFINES_BUILD_ARGS = -DCLASSIC_INTERFACE=0 -DALLOCATIONFCN=0 -DTERMFCN=1 -DONESTEPFCN=1 -DMAT_FILE=0 -DMULTI_INSTANCE_CODE=0 -DINTEGER_CODE=0 -DMT=0\r\nDEFINES_IMPLIED = -DTID01EQ=0\r\nDEFINES_STANDARD = -DMODEL=simmod -DNUMST=1 -DNCSTATES=0 -DHAVESTDIO -DMODEL_HAS_DYNAMICALLY_LOADED_SFCNS=0 -DUNIX\r\n\r\nDEFINES = $(DEFINES_BUILD_ARGS) $(DEFINES_IMPLIED) $(DEFINES_STANDARD)\r\n\r\n###########################################################################\r\n## SOURCE FILES\r\n###########################################################################\r\n\r\nSRCS = $(START_DIR)/simmod_ert_rtw/simmod.c\r\n\r\nMAIN_SRC = $(START_DIR)/simmod_ert_rtw/ert_main.c\r\n\r\nALL_SRCS = $(SRCS) $(MAIN_SRC)\r\n\r\n###########################################################################\r\n## OBJECTS\r\n###########################################################################\r\n\r\nOBJS = simmod.o\r\n\r\nMAIN_OBJ = ert_main.o\r\n\r\nALL_OBJS = $(OBJS) $(MAIN_OBJ)\r\n\r\n###########################################################################\r\n## PREBUILT OBJECT FILES\r\n###########################################################################\r\n\r\nPREBUILT_OBJS = \r\n\r\n###########################################################################\r\n## LIBRARIES\r\n###########################################################################\r\n\r\nLIBS = \r\n\r\n###########################################################################\r\n## SYSTEM LIBRARIES\r\n###########################################################################\r\n\r\nSYSTEM_LIBS =  -lm\r\n\r\n###########################################################################\r\n## ADDITIONAL TOOLCHAIN FLAGS\r\n###########################################################################\r\n\r\n#---------------\r\n# C Compiler\r\n#---------------\r\n\r\nCFLAGS_BASIC = $(DEFINES) $(INCLUDES)\r\n\r\nCFLAGS += $(CFLAGS_BASIC)\r\n\r\n#-----------------\r\n# C++ Compiler\r\n#-----------------\r\n\r\nCPPFLAGS_BASIC = $(DEFINES) $(INCLUDES)\r\n\r\nCPPFLAGS += $(CPPFLAGS_BASIC)\r\n\r\n###########################################################################\r\n## INLINED COMMANDS\r\n###########################################################################\r\n\r\n###########################################################################\r\n## PHONY TARGETS\r\n###########################################################################\r\n\r\n.PHONY : all build buildobj clean info prebuild download execute\r\n\r\n\r\nall : build\r\n\t@echo \"### Successfully generated all binary outputs.\"\r\n\r\n\r\nbuild : prebuild $(PRODUCT)\r\n\r\n\r\nbuildobj : prebuild $(OBJS) $(PREBUILT_OBJS)\r\n\t@echo \"### Successfully generated all binary outputs.\"\r\n\r\n\r\nprebuild : \r\n\r\n\r\ndownload : build\r\n\r\n\r\nexecute : download\r\n\t@echo \"### Invoking postbuild tool \"Execute\" ...\"\r\n\t$(EXECUTE) $(EXECUTE_FLAGS)\r\n\t@echo \"### Done invoking postbuild tool.\"\r\n\r\n\r\n###########################################################################\r\n## FINAL TARGET\r\n###########################################################################\r\n\r\n#-------------------------------------------\r\n# Create a standalone executable            \r\n#-------------------------------------------\r\n\r\n$(PRODUCT) : $(OBJS) $(PREBUILT_OBJS) $(MAIN_OBJ)\r\n\t@echo \"### Creating standalone executable \"$(PRODUCT)\" ...\"\r\n\t$(LD) $(LDFLAGS) -o $(PRODUCT) $(OBJS) $(MAIN_OBJ) $(SYSTEM_LIBS) $(TOOLCHAIN_LIBS)\r\n\t@echo \"### Created: $(PRODUCT)\"\r\n\r\n\r\n###########################################################################\r\n## INTERMEDIATE TARGETS\r\n###########################################################################\r\n\r\n#---------------------\r\n# SOURCE-TO-OBJECT\r\n#---------------------\r\n\r\n%.o : %.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : %.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(RELATIVE_PATH_TO_ANCHOR)/%.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(RELATIVE_PATH_TO_ANCHOR)/%.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(MATLAB_ROOT)/rtw/c/src/%.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(MATLAB_ROOT)/rtw/c/src/%.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(MATLAB_ROOT)/simulink/src/%.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(MATLAB_ROOT)/simulink/src/%.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(START_DIR)/%.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(START_DIR)/%.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(START_DIR)/simmod_ert_rtw/%.c\r\n\t$(CC) $(CFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n%.o : $(START_DIR)/simmod_ert_rtw/%.cpp\r\n\t$(CPP) $(CPPFLAGS) -o \"$@\" \"$&lt;\"\r\n\r\n\r\n###########################################################################\r\n## DEPENDENCIES\r\n###########################################################################\r\n\r\n$(ALL_OBJS) : $(MAKEFILE) rtw_proj.tmw\r\n\r\n\r\n###########################################################################\r\n## MISCELLANEOUS TARGETS\r\n###########################################################################\r\n\r\ninfo : \r\n\t@echo \"### PRODUCT = $(PRODUCT)\"\r\n\t@echo \"### PRODUCT_TYPE = $(PRODUCT_TYPE)\"\r\n\t@echo \"### BUILD_TYPE = $(BUILD_TYPE)\"\r\n\t@echo \"### INCLUDES = $(INCLUDES)\"\r\n\t@echo \"### DEFINES = $(DEFINES)\"\r\n\t@echo \"### ALL_SRCS = $(ALL_SRCS)\"\r\n\t@echo \"### ALL_OBJS = $(ALL_OBJS)\"\r\n\t@echo \"### LIBS = $(LIBS)\"\r\n\t@echo \"### MODELREF_LIBS = $(MODELREF_LIBS)\"\r\n\t@echo \"### SYSTEM_LIBS = $(SYSTEM_LIBS)\"\r\n\t@echo \"### TOOLCHAIN_LIBS = $(TOOLCHAIN_LIBS)\"\r\n\t@echo \"### CFLAGS = $(CFLAGS)\"\r\n\t@echo \"### LDFLAGS = $(LDFLAGS)\"\r\n\t@echo \"### SHAREDLIB_LDFLAGS = $(SHAREDLIB_LDFLAGS)\"\r\n\t@echo \"### CPPFLAGS = $(CPPFLAGS)\"\r\n\t@echo \"### CPP_LDFLAGS = $(CPP_LDFLAGS)\"\r\n\t@echo \"### CPP_SHAREDLIB_LDFLAGS = $(CPP_SHAREDLIB_LDFLAGS)\"\r\n\t@echo \"### ARFLAGS = $(ARFLAGS)\"\r\n\t@echo \"### MEX_CFLAGS = $(MEX_CFLAGS)\"\r\n\t@echo \"### MEX_CPPFLAGS = $(MEX_CPPFLAGS)\"\r\n\t@echo \"### MEX_LDFLAGS = $(MEX_LDFLAGS)\"\r\n\t@echo \"### MEX_CPPLDFLAGS = $(MEX_CPPLDFLAGS)\"\r\n\t@echo \"### DOWNLOAD_FLAGS = $(DOWNLOAD_FLAGS)\"\r\n\t@echo \"### EXECUTE_FLAGS = $(EXECUTE_FLAGS)\"\r\n\t@echo \"### MAKE_FLAGS = $(MAKE_FLAGS)\"\r\n\r\n\r\nclean : \r\n\t$(ECHO) \"### Deleting all derived files...\"\r\n\t$(RM) $(PRODUCT)\r\n\t$(RM) $(ALL_OBJS)\r\n\t$(ECHO) \"### Deleted all derived files.\"</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536682896, "post_id": 52280153, "comment_id": 91508573, "body": "Sounds like you hung some device on the memory bus.  What platform OS and hardware are you debugging?"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536683376, "post_id": 52280153, "comment_id": 91508786, "body": "The system is not hung. It is operational, normally. Everytime I do step debugging around that API, I see this behaviour. Between I&#39;m running Linux kernel on x86_64 arch"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536683551, "post_id": 52280153, "comment_id": 91508858, "body": "How about <code>x&#47;20xw 0x7fffd7e4f5b8</code> what result does that give?"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536683605, "post_id": 52280153, "comment_id": 91508889, "body": "What does this do?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536683679, "post_id": 52280153, "comment_id": 91508922, "body": "It examines memory at the address <code>examine &#47; 20 hex words</code>"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536683737, "post_id": 52280153, "comment_id": 91508946, "body": "Ok. I&#39;ll execute and update you the results"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1536685104, "post_id": 52280153, "comment_id": 91509626, "body": "The value looks like an uninitialized pointer for which the compiler/ run-time set this value so it will create a problem (seg fault) when the pointer is used without first having been properly assigned."}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536687752, "post_id": 52280153, "comment_id": 91510872, "body": "@PaulOgilvie: This can&#39;t be an uninitialized pointer as it is a function argument. So when this function is called, definitely the caller function should be passing some value for this argument. Isn&#39;t it?"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536687887, "post_id": 52280153, "comment_id": 91510936, "body": "@cleblanc: I couldn&#39;t run what you mentioned on the same running program. However, i tried it on the new program instance.   <code>(gdb) info args  hashset = 0xe0e0e0e0e0e0e0e0 item_key = 0x7fffd7e79f28 (gdb) x&#47;20xw 0x7fffd7e79f28 0x7fffd7e79f28:\t0xff7f0000\t0x00bb8fd3\t0xd38fbb00\t0x00007fff 0x7fffd7e79f38:\t0xff7f0000\t0xb89fe7d7\t0xd7e79f80\t0x00007fff 0x7fffd7e79f48:\t0xff7f0000\t0xb89fe7d7\t0xff7f0000\t0x48f11ed4 0x7fffd7e79f58:\t0xd7e7a368\t0x00007fff\t0xd7e79f90\t0x00007fff 0x7fffd7e79f68:\t0xed88cb4b\t0x00007fff\t0xb4000000\t0x90d0edd7 </code>"}, {"owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1536687965, "post_id": 52280153, "comment_id": 91510975, "body": "@cleblanc By the way, i didn&#39;t understand how does this result helps?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 1, "creation_date": 1536689254, "post_id": 52280153, "comment_id": 91511613, "body": "@DarshanL it just shows that gdb is able to access the program memory.  Maybe you could try compiling your program with <code>-O0 -g</code> it may be that the code is optimized in such a way the gdb can&#39;t show you the value of <code>hashset</code> at this point in the program"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1536698587, "post_id": 52280153, "comment_id": 91516001, "body": "please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1536735777, "post_id": 52280153, "comment_id": 91526349, "body": "The pattern looks indeed like a piece of some bitmap data. It could indicate that the pointer is uninitialized and contains whatever happens to have been stored in its location before. You point out that since it is a function argument, it cannot be <i>uninitialized</i>, but you could have passed an uninitialized pointer as an argument to the function whose argument you inspect with the debugger. I suggest you recompile with optimisations disabled (<code>-O0</code>) and post the complete code to both the function and its caller."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1536805244, "creation_date": 1536805244, "answer_id": 52305781, "question_id": 52280153, "link": "https://stackoverflow.com/questions/52280153/in-the-call-stack-what-does-it-indicate-when-the-argument-of-type-pointer-holds/52305781#52305781", "title": "In the call stack, what does it indicate when the argument of type pointer holds address of pattern 0x8080808080808080 or 0xf8f8f8f8f8f8f8f8?", "body": "<blockquote>\n  <p>I know that when the GDB shows any variable as \"value optimized out\", it indicates that its value is stored in register instead of storing on the stack frame.</p>\n</blockquote>\n\n<p>That isn't what \"value optimized out\" means.</p>\n\n<p>It means: the compiler didn't provide location information for this variable at the current program counter.</p>\n\n<p>In theory, <code>DWARF</code> standard is rich enough that it can describe things like \"this variable can be located by adding <code>constant</code> to value of <code>register</code>\", or \"by adding <code>register A</code> and <code>register B</code> and ORing the result with <code>contents of location pointed by register C</code>\". In practice, few compilers go to such length, and instead simply omit the info.</p>\n\n<blockquote>\n  <p>However, in this case, the arg hashset which was initially shown as \"value optimized out\" is later changed to some address location</p>\n</blockquote>\n\n<p>When you advanced the program counter, GDB found location information at the new PC. But interpreting that location information resulted in value <code>0xf8f8f8f8f8f8f8f8</code>, which can't be true value of a pointer on <code>x86_64</code>.</p>\n\n<p>From this you can conclude that <em>either</em> the location information is incorrect (a compiler bug; most likely) or that GDB didn't correctly interpret the <code>DWARF</code> description (not unheard of).</p>\n\n<p>Unfortunately, such debugging artifacts are a fact of life when debugging optimized code. They are also dependent on exact versions of GCC and GDB -- newer versions are often (but not always!) better. Clang/LLVM is currently quite poor and produces \"value optimized out\" much more often than it should.</p>\n"}], "owner": {"reputation": 686, "user_id": 5347487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d833ea8c62a588ddcb527aae21fd69?s=128&d=identicon&r=PG&f=1", "display_name": "Darshan L", "link": "https://stackoverflow.com/users/5347487/darshan-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1536805244, "creation_date": 1536682384, "last_edit_date": 1536733842, "question_id": 52280153, "link": "https://stackoverflow.com/questions/52280153/in-the-call-stack-what-does-it-indicate-when-the-argument-of-type-pointer-holds", "title": "In the call stack, what does it indicate when the argument of type pointer holds address of pattern 0x8080808080808080 or 0xf8f8f8f8f8f8f8f8?", "body": "<p>When i was debugging an issue using GDB, i came across this weird behavior. For which i could not convince myself with any logical answer.</p>\n\n<p>Below is the snapshot of the call stack obtained because of the breakpoint at the beginning of the function (I am restricting the stack frame to 3 level for simplicity).</p>\n\n<pre><code>(gdb) \n#0  hashset_get (hashset=&lt;value optimized out&gt;, item_key=0x7fffd7e4f5b8)\n    at /xxx/yyy/zzz/hashset.c:123\n#1  0x00007fffed855d00 in hashmap_get (hashmap=&lt;value optimized out&gt;, key=0x7fffd7e4f648)\n    at /xxx/yyy/zzz/hashmap.c:789\n#2  0x00007ffa589d8eeb in hashmap_get_value (hashmap=0x7ff9d82d1b78, key=0x7fffd7e4f648)\n    at /xxx/yyy/zzz/hashmap.c:456\n</code></pre>\n\n<p>After this there is one single-step execution. Later to which stack frame looked as below-</p>\n\n<pre><code>    (gdb) bt\n#0  hashset_get (hashset=0xf8f8f8f8f8f8f8f8, item_key=0x7fffd7e4f5b8)\n    at /xxx/yyy/zzz/hashset.c:125\n#1  0x00007fffed855d00 in hashmap_get (hashmap=&lt;value optimized out&gt;, key=0x7fffd7e4f648)\n    at /xxx/yyy/zzz/hashmap.c:789\n#2  0x00007ffa589d8eeb in hashmap_get_value (hashmap=0x7ff9d82d1b78, key=0x7fffd7e4f648)\n    at /xxx/yyy/zzz/hashmap.c:456\n</code></pre>\n\n<p>I know that when the GDB shows any variable as \"<em>value optimized out</em>\", it indicates that its value is stored in register instead of storing on the stack frame.</p>\n\n<p><strong>However, in this case, the arg <code>hashset</code> which was initially shown as \"<em>value optimized out</em>\" is later changed to some address location - <code>0xf8f8f8f8f8f8f8f8</code>. So does that mean initially it has stored the <code>hashset</code> in register then created a space on the stack frame?</strong></p>\n\n<p>And this address doesn't looks like any other memory location address. You could see some pattern in the address (like f8f8...)</p>\n\n<p>To add more confusion to the fact, if I try to print the data at that location, GDB outputs as below-</p>\n\n<pre><code>(gdb) p *hashset\nCannot access memory at address 0xf8f8f8f8f8f8f8f8\n</code></pre>\n\n<p>Some more things i tried in a hope that it could help in understand this behavior.</p>\n\n<p><strong>I assigned a valid address <code>0x7fffd7e4f5b8</code> - which is held by the arg <code>item_key</code>, to <code>hashset</code></strong></p>\n\n<pre><code>(gdb) s hashset=0x7fffd7e4f5b8\n(gdb) p *hashset\nCannot access memory at address 0xb8b8b8b8b8b8b8b8\n(gdb) p hashset\n$6 = (hashset) 0xb8b8b8b8b8b8b8b8\n</code></pre>\n\n<p><strong>But to my surprise, when I print the value of <code>hashset</code>, it is showing the address as <code>0xb8b8b8b8b8b8b8b8</code> instead of <code>0x7fffd7e4f5b8</code>!!</strong></p>\n\n<p>Could someone please explain what is happening here?</p>\n\n<p>[Edit: There is NO crash/hang. System is operational, normally]</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1536686524, "post_id": 52281011, "comment_id": 91510276, "body": "There is also the POSIX <code>ssize_t</code> type; a function returning this type <i>could</i> return -1, but <code>%zu</code> wouldn&#39;t print <code>&quot;-1&quot;</code> here either."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1536686652, "post_id": 52281011, "comment_id": 91510339, "body": "@DavidBowling AFAIK, POSIX does not even require <code>ssize_t</code> to be the same width as <code>size_t</code>.  It usually is the same, yet I think it may be allowed to be wider."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1536687048, "post_id": 52281011, "comment_id": 91510527, "body": "I thought that <code>ssize_t</code> has to be wider than <code>size_t</code>, because it has to be able to represent all <code>size_t</code> values, in addition to -1 (at least). But, I&#39;ll have to check to see if I am remembering correctly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1536687251, "post_id": 52281011, "comment_id": 91510635, "body": "@DavidBowling IIRC, <code>ssize_t</code> is not required to represent all <code>size_t</code> either.  It certainly usually handles <code>[-1...SIZE_MAX&#47;2]</code> at least."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1536688200, "post_id": 52281011, "comment_id": 91511076, "body": "@DavidBowling, chux is correct.  POSIX does not link <code>ssize_t</code> with <code>size_t</code> in any formal way.  They have different, independent descriptions, and different, independent maximum values given in <code>limits.h</code> and <code>stdint.h</code>, respectively.  It is often the case in practice that the two are the same size, but this is not required.  I have never knowingly used an implementation where <code>size_t</code>  was smaller than <code>ssize_t</code>, though this is allowed, too."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536688813, "post_id": 52281011, "comment_id": 91511390, "body": "@JohnBollinger -- thanks... all I could find in the POSIX Standard is: &quot;The type <b>ssize_t</b> shall be capable of storing values at least in the range [-1, {SSIZE_MAX}].&quot; But no connection between <code>size_t</code> and <code>ssize_t</code> widths. Hmmm. Dementia?"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1536687954, "last_edit_date": 1536687954, "creation_date": 1536685925, "answer_id": 52281011, "question_id": 52280112, "link": "https://stackoverflow.com/questions/52280112/what-happens-if-size-t-is-signed-like-1/52281011#52281011", "title": "What happens if size_t is signed like -1", "body": "<blockquote>\n  <p>what happens if size_t is signed like -1 (?)</p>\n</blockquote>\n\n<p>If code truly printed a <code>\"-1\"</code>, then the compilation is not C compliant.</p>\n\n<blockquote>\n  <p>in this <code>strncat</code> implementation at the end of function size_t is -1. </p>\n</blockquote>\n\n<p>No it is not -1 with a conforming C compiler.</p>\n\n<p><code>size_t</code> is an <em>unsigned</em> integer of some width - at least 16 bits.</p>\n\n<p><code>while (len--) {</code> loop continues until <code>len == 0</code>.  With the post decrement <code>len--</code>, the value after the evaluation wraps around to <code>SIZE_MAX</code>, some large positive value.</p>\n\n<blockquote>\n  <p>Can overflow?</p>\n</blockquote>\n\n<p>Mathematically yes <code>size_t</code> math can overflow. In C <em>unsigned</em> math is well defined to wrap around<sup>1</sup>, in effect modulo <code>SIZE_MAX + 1</code> for type <code>size_t</code>. \u00a76.2.5 9</p>\n\n<hr>\n\n<p>I'd expect <code>printf(\"%zu\\n\",len);</code> to report <code>18446744073709551615</code>, <code>4294967295</code> or some other <a href=\"http://mathworld.wolfram.com/MersenneNumber.html\" rel=\"nofollow noreferrer\">Mersenne number</a>.</p>\n\n<blockquote>\n  <p><code>size_t</code> which is the unsigned integer type of the result of the <code>sizeof</code> operator;  C11dr \u00a77.19 2</p>\n</blockquote>\n\n<hr>\n\n<p><sup>1</sup> A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type.</p>\n\n<hr>\n\n<p><strong>Questionable code</strong></p>\n\n<p>Consider <code>util_strncat(ptr, \"\", size)</code> can lead to <em>undefined behavior</em> (UB).</p>\n\n<pre><code>int main() {\n   char dest[7] = \"abcd\";\n   char src[] = \"\\0xyz\";\n   util_strncat(dest, src, 2);\n   printf(\"%s\\n\", dest);\n   printf(\"%c\\n\", dest[5]); // 'x'!!\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536688716, "post_id": 52281141, "comment_id": 91511334, "body": "This answer presents two correct, but uncorrelated, facts.  <code>%zu</code> will not format the corresponding value with a negative sign because the <code>u</code> says to interpret it as an unsigned number.  The value (as interpreted according to any particular type) or bit pattern of the corresponding argument doesn&#39;t matter in that regard."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536693911, "post_id": 52281141, "comment_id": 91513949, "body": "@JohnBollinger did I write that they are?. You could also add the president Trump&#39;s headache is not correlated with unsigned wrap around :) and numbers of printf calls in the software used by the WH."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1536695256, "post_id": 52281141, "comment_id": 91514579, "body": "Although you did not explicitly say that the two facts are correlated, that is an implication of juxtaposing them in the way that you did.  If they are not meant to be rhetorically connected then this answer would benefit from a few more words to make that clear."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1536687494, "last_edit_date": 1536687494, "creation_date": 1536686460, "answer_id": 52281141, "question_id": 52280112, "link": "https://stackoverflow.com/questions/52280112/what-happens-if-size-t-is-signed-like-1/52281141#52281141", "title": "What happens if size_t is signed like -1", "body": "<p>The <code>%zu</code> cant print the negative number at any circumstances. When unsigned number of the type <code>size_t</code> wraps over when decreasing its value becomes <code>SIZE_MAX</code>.</p>\n"}], "owner": {"reputation": 145, "user_id": 9986154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1f7be3e0cb5d72962fb3faad690d8c0?s=128&d=identicon&r=PG&f=1", "display_name": "theriver", "link": "https://stackoverflow.com/users/9986154/theriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52281011, "answer_count": 2, "score": 1, "last_activity_date": 1536687954, "creation_date": 1536682234, "last_edit_date": 1536687713, "question_id": 52280112, "link": "https://stackoverflow.com/questions/52280112/what-happens-if-size-t-is-signed-like-1", "title": "What happens if size_t is signed like -1", "body": "<p>If <code>size_t</code> is signed like -1 is incorrect the code? </p>\n\n<p>For example in this <code>strncat</code> implementation at the end of function size_t is -1. Can overflow?  </p>\n\n<p>Consider this example:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar *util_strncat(char *destination, const char *source, size_t len) {\n   char *temp = destination + strlen(destination);\n\n   while (len--) {\n      *temp++ = *source++;\n      if(*source == '\\0'){\n         break;\n      }\n   }\n   *temp = '\\0';\n\n   printf(\"%zu\\n\",len); //-1\n\n   return destination;\n}\n\nint main() {\n   char dest[7] = \"abcd\";\n   char src[] = \"efg\";\n   util_strncat(dest, src, 2);\n   printf(\"%s\\n\", dest);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "initialization"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1536681264, "post_id": 52279688, "comment_id": 91507718, "body": "Your last paragraphe is puzzling. Local variables (or auto variables as you call them) are not initialized upon function entry, they contain garbage. You <b>must</b> initialize them prior to using them. Period."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1536682265, "post_id": 52279688, "comment_id": 91508240, "body": "Define variables when you can initialize them.  If the variable will be assigned/initialized by being passed via pointer to a function, there&#39;s no need to initialize it before passing.  (<code>int i; if (scanf(&quot;%d&quot;, &amp;i) != 1) { \u2026 }</code> \u2014 there&#39;s no need to initialize <code>i</code>.)"}], "owner": {"reputation": 69, "user_id": 10262257, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xxA7TSpLO10/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOrckxBxgKUrgbZuthzTglSWGcQBA/mo/photo.jpg?sz=128", "display_name": "Bhawandeep Singh", "link": "https://stackoverflow.com/users/10262257/bhawandeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1536681741, "creation_date": 1536680659, "last_edit_date": 1536681741, "question_id": 52279688, "link": "https://stackoverflow.com/questions/52279688/initializing-and-checking-pointer-and-other-auto-variables-in-c", "title": "Initializing and checking pointer and other auto variables in C", "body": "<p>Should I initialize regular auto variables also - to 0 or any value before the actual value is input or calculated or returned by another function etc ?</p>\n\n<p>When I initialize a static or global pointer variable to NULL (or it is done by default), what are the best practices of when and where to check the pointer value before using it or de-referencing it to modify  the dereferenced variable ? Should I stop checking the pointer in the functions that are called by other functions and by that time, the pointer cannot have stayed NULL, even if it were initially NULL ? </p>\n\n<p>What about those pointers that can potentially get corrupted ? How should I check those ? Should I always check the value of the pointer and live with the small amount of extra code in every function that uses the pointer variable - just to make sure any abnormal event did not cause the pointer value (i.e. the address that it points to) to get corrupted ?</p>\n\n<p>For auto pointers within a function, is there anything other than - checking the pointer variable to not be NULL once before the first use and then no need to check it in the rest of the function ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536680266, "post_id": 52279539, "comment_id": 91507098, "body": "The first thing you are doing wrong seems that you are asking here without providing a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 11, "user_id": 8163147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa000f67642c2c927c5e95027334432?s=128&d=identicon&r=PG&f=1", "display_name": "Vittorio Gatto", "link": "https://stackoverflow.com/users/8163147/vittorio-gatto"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536681089, "post_id": 52279539, "comment_id": 91507621, "body": "sorry, I entered the complete code"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1536681980, "post_id": 52279539, "comment_id": 91508083, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8163147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa000f67642c2c927c5e95027334432?s=128&d=identicon&r=PG&f=1", "display_name": "Vittorio Gatto", "link": "https://stackoverflow.com/users/8163147/vittorio-gatto"}, "edited": false, "score": 0, "creation_date": 1536683551, "post_id": 52279969, "comment_id": 91508857, "body": "I&#39;m sorry, but I did not understand how I could solve bringing out the if, could you be clearer? thank you"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1536681610, "creation_date": 1536681610, "answer_id": 52279969, "question_id": 52279539, "link": "https://stackoverflow.com/questions/52279539/entry-ordered-by-name-and-surname-in-linked-list/52279969#52279969", "title": "Entry ordered by name and surname in linked list", "body": "<p>The loop terminates when a condition <code>strcmp(g-&gt;cognome,p-&gt;cognome)&lt;0</code> is violated. It includes a <code>strcmp(g-&gt;cognome,p-&gt;cognome) == 0</code> situation.</p>\n\n<p>This means that the <code>if(strcmp(t-&gt;cognome,p-&gt;cognome)==0)</code> clause is never reached/executed. Take it out of the loop.</p>\n"}], "owner": {"reputation": 11, "user_id": 8163147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa000f67642c2c927c5e95027334432?s=128&d=identicon&r=PG&f=1", "display_name": "Vittorio Gatto", "link": "https://stackoverflow.com/users/8163147/vittorio-gatto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536681610, "creation_date": 1536680093, "last_edit_date": 1536681050, "question_id": 52279539, "link": "https://stackoverflow.com/questions/52279539/entry-ordered-by-name-and-surname-in-linked-list", "title": "Entry ordered by name and surname in linked list", "body": "<p>I need help with a program written in C, which involves inserting data into a list via ordered insertion. The ordered placement must take place first by surname, and if two identical surnames are found it must be sorted by name. I threw down two lines of code, but if the surnames are the same, the placement ordered by name does not happen.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct vettura\n{\n  char marca[11];\n  char modello[21];\n  int anno;\n  struct vettura *next;\n};\nstruct lista\n{\n  char cognome[21];\n  char nome[21];\n  char fiscale[12];\n  char email[21];\n  struct vettura *vet;\n  struct lista *next;\n };\n\n void socio(struct lista **list)\n {\n    struct lista *p,*t=*list,*g;\n    p=(struct lista*)malloc(sizeof(struct lista));\n    p-&gt;next=NULL;\n    p-&gt;vet=NULL;\n    fflush(stdin);\n    printf(\"Insert surname: \");\n    gets(p-&gt;cognome);\n    fflush(stdin);\n    printf(\"Insert name:  \");\n    gets(p-&gt;nome);\n    fflush(stdin);\n\n    if(*list==NULL)\n    {\n        *list=p;\n        return;\n    }\n    else\n    {\n        for(g=*list;g!=NULL&amp;&amp;(strcmp(g-&gt;cognome,p-&gt;cognome)&lt;0);t=g,g=g&gt;next)\n            {\n                printf(\"Cognome in lista: %s \\t\",g-&gt;cognome);\n                printf(\"Conome da inserire: %s \\n\",p-&gt;cognome);\n                if(strcmp(t-&gt;cognome,p-&gt;cognome)==0)\n                    {\n                        if(strcmp(t-&gt;nome,p-&gt;nome)&lt;0)\n                        {\n                            break;\n                        }\n                    }\n\n            }\n        if(t==g)\n            {\n                p-&gt;next=*list;\n                *list=p;\n                return;\n            }\n        else\n            {\n                t-&gt;next=p;\n                p-&gt;next=g;\n                return;\n            }\n    }\n  }\n  void stampa(struct lista **list)\n  {\n    struct lista *scorri=*list;\n    while(scorri!=NULL)\n    {\n        printf(\"surname: %s \\t name: %s \\n\",scorri-&gt;cognome,scorri-&gt;nome);\n        scorri=scorri-&gt;next;\n    }\n  }\n\n\n int main()\n {\n  struct lista *list=NULL;\n  socio(&amp;list);\n  socio(&amp;list);\n  socio(&amp;list);\n  stampa(&amp;list);\n }\n</code></pre>\n\n<p>what am I doing wrong?</p>\n"}, {"tags": ["android", "c", "usb", "jna"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536680331, "post_id": 52279537, "comment_id": 91507140, "body": "You can&#39;t &quot;call&quot; macros."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536681356, "post_id": 52279537, "comment_id": 91507758, "body": "Assuming <code>_IOR</code> comes from <code>#include &lt;linux&#47;ioctl.h&gt;</code> you need to work out what magic number the macro produces and use that number to define a constant in your Java code."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536681927, "post_id": 52279537, "comment_id": 91508053, "body": "If you want to find out what the actual magic numbers are, write a small C program to print them out."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1536682361, "post_id": 52279537, "comment_id": 91508289, "body": "I&#39;m pretty sure Android has its own API for claiming USB interfaces. Maybe you should use that."}, {"owner": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "edited": false, "score": 0, "creation_date": 1536682490, "post_id": 52279537, "comment_id": 91508367, "body": "Thanks Ian. I&#39;m aware of that but for efficient perspective I would like to use ioctl commands for bulk transfer and others"}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "edited": false, "score": 0, "creation_date": 1536681156, "post_id": 52279653, "comment_id": 91507659, "body": "Thanks. I understand i can&#39;t call C Macros but how can i call _IOR, _IO, _IORW etc.,"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "edited": false, "score": 0, "creation_date": 1536681278, "post_id": 52279653, "comment_id": 91507724, "body": "You need to implement it (those calculations) in your Java program."}, {"owner": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "edited": false, "score": 0, "creation_date": 1536681313, "post_id": 52279653, "comment_id": 91507737, "body": "Can you example for Calculating this _IOR(&#39;U&#39;, 15, unsigned int)?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "edited": false, "score": 0, "creation_date": 1536681416, "post_id": 52279653, "comment_id": 91507783, "body": "Open ioctl.h from the framework/osyou use and see not it is implemented. Then write the appropriate java methods"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1536680536, "creation_date": 1536680536, "answer_id": 52279653, "question_id": 52279537, "link": "https://stackoverflow.com/questions/52279537/how-to-call-ior-macro-of-c-using-jna/52279653#52279653", "title": "How to call _IOR macro of C using JNA?", "body": "<p>You can't call c macros. You will need to call local functions other way</p>\n"}], "owner": {"reputation": 140, "user_id": 5850007, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n9MVB0jr4u0/AAAAAAAAAAI/AAAAAAAAABo/ule04k-9rg0/photo.jpg?sz=128", "display_name": "sunder kandasamy", "link": "https://stackoverflow.com/users/5850007/sunder-kandasamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1536680536, "creation_date": 1536680086, "question_id": 52279537, "link": "https://stackoverflow.com/questions/52279537/how-to-call-ior-macro-of-c-using-jna", "title": "How to call _IOR macro of C using JNA?", "body": "<p>I am trying to use </p>\n\n<pre><code>#define USBDEVFS_CLAIMINTERFACE    _IOR('U', 15, unsigned int)\n</code></pre>\n\n<p>from usbdevice_fs.h header file in Java Android</p>\n\n<p>How to call _IOR using Java</p>\n"}, {"tags": ["c", "raspberry-pi"], "comments": [{"owner": {"reputation": 1004, "user_id": 2038709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e65b1bc98b25269963ef4373a58f6e69?s=128&d=identicon&r=PG", "display_name": "gst", "link": "https://stackoverflow.com/users/2038709/gst"}, "edited": false, "score": 1, "creation_date": 1536679911, "post_id": 52279439, "comment_id": 91506886, "body": "<a href=\"https://www.raspberrypi.org/documentation/hardware/raspberrypi/gpio/README.md\" rel=\"nofollow noreferrer\">Interrupts</a> is a way to go.  Or do you have a specific requirement to keep polling?"}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 1004, "user_id": 2038709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e65b1bc98b25269963ef4373a58f6e69?s=128&d=identicon&r=PG", "display_name": "gst", "link": "https://stackoverflow.com/users/2038709/gst"}, "edited": false, "score": 0, "creation_date": 1536680075, "post_id": 52279439, "comment_id": 91506978, "body": "@vk_gst my only requirement to start polling is a button push that will set the pin to high. After that, I need to go back to waiting for another button push."}, {"owner": {"reputation": 1004, "user_id": 2038709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e65b1bc98b25269963ef4373a58f6e69?s=128&d=identicon&r=PG", "display_name": "gst", "link": "https://stackoverflow.com/users/2038709/gst"}, "edited": false, "score": 1, "creation_date": 1536680666, "post_id": 52279439, "comment_id": 91507358, "body": "Try configuring the interrupts for the GPIO pin you want, and on interrupt/button press  invoke a callback function(interrupt handler) that reads the weight indicator values and on second button press stops reading the weight indicator. This is one way of approaching. Here is a <a href=\"https://medium.com/@rxseger/interrupt-driven-i-o-on-raspberry-pi-3-with-leds-and-pushbuttons-rising-falling-edge-detection-36c14e640fef\" rel=\"nofollow noreferrer\">demo</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536680816, "post_id": 52279439, "comment_id": 91507458, "body": "It is Unix and RPi. So just wait for the gpio in the loop. If not active go sleep for some time 50-200ms"}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 1004, "user_id": 2038709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e65b1bc98b25269963ef4373a58f6e69?s=128&d=identicon&r=PG", "display_name": "gst", "link": "https://stackoverflow.com/users/2038709/gst"}, "edited": false, "score": 0, "creation_date": 1536680941, "post_id": 52279439, "comment_id": 91507538, "body": "@vk_gst Actually, I wouldn&#39;t need that second button because it&#39;s only a single reading per button press, I&#39;ll look into interrupts, thanks!"}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536682804, "post_id": 52279439, "comment_id": 91508531, "body": "@P__J__ Could this be achieved with a while loop? Something like while(pin==LOW){sleep(50us)}?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536699880, "post_id": 52279439, "comment_id": 91516571, "body": "sitting in a <code>while()</code> loop means the program will be doing nothing useful, most of the time..  It that what you want?"}, {"owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1536771007, "post_id": 52279439, "comment_id": 91547754, "body": "@user3629249 I just need it to wait for the GPIO pin to go high and then run a function. So, it&#39;s not going to be doing anything useful most of the time."}], "owner": {"reputation": 63, "user_id": 10240125, "user_type": "registered", "profile_image": "https://graph.facebook.com/1457437204322574/picture?type=large", "display_name": "Miguel &#193;ngel G&#225;rate Fox", "link": "https://stackoverflow.com/users/10240125/miguel-%c3%81ngel-g%c3%a1rate-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536679741, "creation_date": 1536679741, "question_id": 52279439, "link": "https://stackoverflow.com/questions/52279439/have-a-c-program-do-nothing-while-it-waits-for-a-gpio-input-on-a-raspberry-pi", "title": "Have a C program do nothing while it waits for a GPIO input on a Raspberry Pi?", "body": "<p>I have a program that polls a weight indicator using the modbus protocol and writes the read data in a database, however, I need to be able to have the program run all the time without doing anything until the Raspberry Pi receives a GPIO input. Once the pin goes high, it'll run the polling function and go back to waiting for another trigger.</p>\n\n<p>I'm not a programmer, so I would like to know the best way to have the program wait for the GPIO input.</p>\n"}, {"tags": ["c", "palindrome"], "comments": [{"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 1, "creation_date": 1536679883, "post_id": 52279432, "comment_id": 91506867, "body": "Welcome to Stack Overflow. You should use print statements or a debugger to look at the values in <code>n</code> and <code>count</code>. Compare them with your expected values."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1536679891, "post_id": 52279432, "comment_id": 91506870, "body": "First of all you should stop using <code>gets</code>. <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">It&#39;s a dangerous function</a>, and has therefore been removed from the C standard. Use e.g. <a href=\"https://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1536679891, "post_id": 52279432, "comment_id": 91506871, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>. And your program <i>is</i> really small."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536679934, "post_id": 52279432, "comment_id": 91506907, "body": "Are you sure your program <i>always</i> displays the &#39;else&#39; statement? Try one-char input."}, {"owner": {"reputation": 18, "user_id": 10348178, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYoPmydDzjc/AAAAAAAAAAI/AAAAAAAAAiE/KveCELJkKkA/photo.jpg?sz=128", "display_name": "Vengence Tech", "link": "https://stackoverflow.com/users/10348178/vengence-tech"}, "edited": false, "score": 0, "creation_date": 1536680091, "post_id": 52279432, "comment_id": 91506985, "body": "Thank you all for all the answers, count always shows 1."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536680209, "post_id": 52279432, "comment_id": 91507054, "body": "@VengenceTech &quot;count always shows 1&quot; really? I tested with an input <code>ab</code> and got a result <code>count = 0</code> by adding <code>printf(&quot;%d\\n&quot;, count);</code> just before <code>if(count==n)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18, "user_id": 10348178, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYoPmydDzjc/AAAAAAAAAAI/AAAAAAAAAiE/KveCELJkKkA/photo.jpg?sz=128", "display_name": "Vengence Tech", "link": "https://stackoverflow.com/users/10348178/vengence-tech"}, "edited": false, "score": 0, "creation_date": 1536680535, "post_id": 52279544, "comment_id": 91507256, "body": "Thank you so much for the answer, Here we are forced to use Borland compiler which suggests Education system here is outdated and they dont intend to change."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 0, "last_activity_date": 1536680892, "last_edit_date": 1536680892, "creation_date": 1536680111, "answer_id": 52279544, "question_id": 52279432, "link": "https://stackoverflow.com/questions/52279432/what-am-i-doing-wrong-in-this-c-program-to-check-a-string-is-palindrome-or-not/52279544#52279544", "title": "What Am I doing wrong in this C program to check a string is Palindrome or not?", "body": "<p>When <code>i = 0</code>, <code>f[n-i]</code> will be the terminating null character, which will never appear in the middle of the string.\nBecause of that, if the string is 2-char long or more, the condition <code>f[i+1]==f[n-i]</code> will be false.\n(If the string is 1-char long, <code>f[i+1]</code> will be the terminating null character after the first (and only) character, so the condition will be true.)</p>\n\n<p>The condition should be <code>f[i]==f[n-i-1]</code>.</p>\n\n<p>By the way,</p>\n\n<ul>\n<li>You shouldn't use <code>gets()</code>, which has unavoidable risk of buffer overrun, deprecated in C99 and removed from C11.</li>\n<li>You should use standard <code>int main(void)</code> in hosted environment instead of <code>void main()</code>, which is illegal in C89 and implementation-defined in C99 or later, unless you have some special reason to use this non-standard signature (for example, forced to use this from your boss or teacher).</li>\n</ul>\n\n<p>An example of full fixed code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main(void)\n{\n    int i,n,count=0;\n    char f[30 + 1]; /* allocate one more element for storeing newline character */\n    char* lf;\n    printf(\"Enter the string. :  \");\n    fgets(f, sizeof(f), stdin); /* change gets() to fgets() */\n    /* fgets() stores newline character while gets() doesn't, so remove it */\n    if ((lf = strchr(f, '\\n')) != NULL) *lf = '\\0';\n    n = strlen(f);\n\n    for(i=0;i&lt;n;i++)\n    {\n        if(f[i]==f[n-i-1])\n        count=count+1;\n    }\n    if(count==n)\n        printf(\"\\n Entered string is Palindrome\");\n    else\n        printf(\"\\n Entered string is NOT Palindrome\");\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536680483, "post_id": 52279581, "comment_id": 91507231, "body": "<code>scanf(&quot;%s&quot;, f);</code> also have risk of buffer overrun. <code>scanf(&quot;%29s&quot;, f);</code> is better. (not <code>%30s</code> because a room for terminating null character must be allocated)"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536680526, "post_id": 52279581, "comment_id": 91507249, "body": "yeah I just changed it for fast prototyping, I will change it :)"}, {"owner": {"reputation": 18, "user_id": 10348178, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYoPmydDzjc/AAAAAAAAAAI/AAAAAAAAAiE/KveCELJkKkA/photo.jpg?sz=128", "display_name": "Vengence Tech", "link": "https://stackoverflow.com/users/10348178/vengence-tech"}, "edited": false, "score": 0, "creation_date": 1536680769, "post_id": 52279581, "comment_id": 91507434, "body": "Got it, bro Thank you"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "edited": false, "score": 0, "creation_date": 1536681011, "post_id": 52279581, "comment_id": 91507572, "body": "Note that using fgets, the strlen also counts the new line feed, so the palindrome right side starts at n-i-2"}], "tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 0, "last_activity_date": 1536680947, "last_edit_date": 1536680947, "creation_date": 1536680237, "answer_id": 52279581, "question_id": 52279432, "link": "https://stackoverflow.com/questions/52279432/what-am-i-doing-wrong-in-this-c-program-to-check-a-string-is-palindrome-or-not/52279581#52279581", "title": "What Am I doing wrong in this C program to check a string is Palindrome or not?", "body": "<p>I think just the indexing in the string is wrong. Change it from i+1 to i and n-i-2</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\n    int i,n,count=0;\n    char f[30];\n    printf(\"Enter the string. :  \");\n    fgets(f, 29, stdin);\n    n = strlen(f);\n\n    for(i=0;i&lt;n;i++)\n    {\n        if(f[i]==f[n-i-2])\n        count=count+1;\n    }\n    if(count==n)\n    printf(\"\\n Entered string is Palindrome\");\n    else\n    printf(\"\\n Entered string is NOT Palindrome\");\n\n}\n</code></pre>\n\n<p>Also another more efficient should would be:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nvoid main()\n{\n    int i = 0,n,count=0;\n    char f[30];\n    printf(\"Enter the string. :  \");\n    fgets(f, 29, stdin);\n    n = strlen(f);\n\n    while (i &lt; n &gt;&gt; 1) {\n        if (f[i]!=f[n-i-2]) {\n            printf(\"\\n Entered string is NOT Palindrome\\n\");\n            return;\n        }\n        i++;\n    }\n    printf(\"\\n Entered string is Palindrome\\n\");\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 18, "user_id": 10348178, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYoPmydDzjc/AAAAAAAAAAI/AAAAAAAAAiE/KveCELJkKkA/photo.jpg?sz=128", "display_name": "Vengence Tech", "link": "https://stackoverflow.com/users/10348178/vengence-tech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 52279544, "answer_count": 2, "score": -1, "last_activity_date": 1536680947, "creation_date": 1536679718, "question_id": 52279432, "link": "https://stackoverflow.com/questions/52279432/what-am-i-doing-wrong-in-this-c-program-to-check-a-string-is-palindrome-or-not", "title": "What Am I doing wrong in this C program to check a string is Palindrome or not?", "body": "<p>Following is the C program I wrote to check whether Entered string is Palindrome or not, but it always displays the 'else' statement i.e. The string is not Palindrome:-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\nint i,n,count=0;\nchar f[30];\nprintf(\"Enter the string. :  \");\ngets(f);\nn = strlen(f);\n\nfor(i=0;i&lt;n;i++)\n{\n    if(f[i+1]==f[n-i])\n    count=count+1;\n}\nif(count==n)\nprintf(\"\\n Entered string is Palindrome\");\nelse\nprintf(\"\\n Entered string is NOT Palindrome\");\n\n}\n</code></pre>\n"}, {"tags": ["c", "vim", "putty"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1536679612, "post_id": 52279362, "comment_id": 91506685, "body": "<code>printf( &quot;The sum of %d and %d is %d&quot;, &amp;num1, &amp;num2, &amp;sum )</code> -&gt; <code>printf( &quot;The sum of %d and %d is %d&quot;, num1, num2, sum )</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1536679667, "post_id": 52279362, "comment_id": 91506733, "body": "VTC as typo...."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 9190493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rDIhC.jpg?s=128&g=1", "display_name": "AcousticScarf", "link": "https://stackoverflow.com/users/9190493/acousticscarf"}, "edited": false, "score": 0, "creation_date": 1536679702, "post_id": 52279401, "comment_id": 91506749, "body": "OH. Easy fix. Thanks!"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 2, "last_activity_date": 1536679625, "creation_date": 1536679625, "answer_id": 52279401, "question_id": 52279362, "link": "https://stackoverflow.com/questions/52279362/how-to-solve-d-outputs-in-my-printf-show-the-ascii-values-of-num1-num2-and-su/52279401#52279401", "title": "how to solve %d outputs in my printf show the ascii values of num1, num2, and sum, instead of their assigned values", "body": "<p>Using unary <code>&amp;</code> operator, you are passing <em>addresses</em> to the variables (not ASCII values) to <code>printf()</code>. Remove them and pass <em>values</em> of the variables like this:</p>\n\n<pre><code>printf( \"The sum of %d and %d is %d\", num1, num2, sum ) ;\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9190493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rDIhC.jpg?s=128&g=1", "display_name": "AcousticScarf", "link": "https://stackoverflow.com/users/9190493/acousticscarf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1536681698, "answer_count": 1, "score": -1, "last_activity_date": 1536681773, "creation_date": 1536679521, "last_edit_date": 1536681773, "question_id": 52279362, "link": "https://stackoverflow.com/questions/52279362/how-to-solve-d-outputs-in-my-printf-show-the-ascii-values-of-num1-num2-and-su", "closed_reason": "Not suitable for this site", "title": "how to solve %d outputs in my printf show the ascii values of num1, num2, and sum, instead of their assigned values", "body": "<p>here is my code. Just trying to make a simple calculator in C.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\n    int main( void ) //initialize code\n    {\n         int num1 = 0 ; //first number\n         int num2 = 0 ; //second number\n         int sum = 0 ; //sum of num1 and num2\n\n     printf(\"Enter the first number: \" ) ;\n     scanf( \"%d\", &amp;num1 ) ; //first number inputted by user\n\n\n     if (num1 &lt; 0) //if the user entered number is negative\n     {\n          do //ask them to enter a non-negative number until it's positive\n          {\n               printf( \"Enter a non-negative number: \") ;\n               scanf( \"%d\", &amp;num1 ) ;\n          }\n          while ( num1 &lt; 0 ) ; //loops until num1 &gt;= 0\n     }\n\n     printf( \"Enter the second number: \" ) ; //initialized after if loop ends\n     scanf( \"%d\", &amp;num2 ) ; //second number inputted by user\n\n     if (num2 &lt; 0) //if the user entered number is negative\n     {\n          do //ask them to enter a non-negative number until it's positive\n          {\n               printf( \"Enter a non-negative number: \") ;\n               scanf( \"%d\", &amp;num2 ) ;\n          }\n          while ( num2 &lt; 0 ) ; loops until num2 &gt;= 0\n     }\n     sum = (num1 + num2) ;\n     printf( \"ADDITION\\n\" ) ;\n     printf( \"The sum of %d and %d is %d\", &amp;num1, &amp;num2, &amp;sum ) ;\n}\n</code></pre>\n\n<p>When I run a.out and punch in 3 for num1 and 2 for num2, I get</p>\n\n<p>ADDITION\nThe sum of -7316 and -7320 is -7324</p>\n\n<p>This doesn't really make sense, and I'm assuming this is just the ASCII values rather than the ones I assigned.</p>\n\n<p>I'm a total beginner and just need a little bit of help, Google hasn't helped much.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 80378, "user_id": 637853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72baa38005eb8de126b2dd2e6fa1d660?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/637853/thomas"}, "edited": false, "score": 2, "creation_date": 1536678223, "post_id": 52278930, "comment_id": 91505771, "body": "If you&#39;re after C why did you add the Python and Java tags? Besides that, did you step through your code with a debugger?"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "edited": false, "score": 1, "creation_date": 1536678670, "post_id": 52278930, "comment_id": 91506069, "body": "change &quot;numberOfDimes &gt; 1&quot; to &quot;numberOfDimes &gt; 0&quot;"}, {"owner": {"reputation": 16808, "user_id": 197011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2bfdf995aa973ef9974fca9aeb6c7fb?s=128&d=identicon&r=PG", "display_name": "GreenMatt", "link": "https://stackoverflow.com/users/197011/greenmatt"}, "edited": false, "score": 1, "creation_date": 1536678892, "post_id": 52278930, "comment_id": 91506223, "body": "Not worthy of an answer, but it is recommended that you have <code>#include &lt;stdio.h&gt;</code> at the top of your program. Otherwise, the compiler issues a bunch of warnings (for me at least)."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10348124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb8d0cc7f935876920a5d669012da05?s=128&d=identicon&r=PG&f=1", "display_name": "user10348124", "link": "https://stackoverflow.com/users/10348124/user10348124"}, "edited": false, "score": 0, "creation_date": 1536773312, "post_id": 52279075, "comment_id": 91548850, "body": "thank you !! yeah i just took out the if statement all together and it worked perfectly !!"}], "tags": [], "owner": {"reputation": 810, "user_id": 5258200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f7c82634650754944e0a5bd1e361f9?s=128&d=identicon&r=PG&f=1", "display_name": "Manish Dash", "link": "https://stackoverflow.com/users/5258200/manish-dash"}, "is_accepted": false, "score": 0, "last_activity_date": 1536678589, "creation_date": 1536678589, "answer_id": 52279075, "question_id": 52278930, "link": "https://stackoverflow.com/questions/52278930/simple-coin-change-maker-program-in-c/52279075#52279075", "title": "Simple Coin Change Maker Program in C", "body": "<p>A simple logical error.</p>\n\n<p>change <code>if(numberOfDimes &gt; 1)</code> to <code>if(numberOfDimes &gt; 0)</code>.</p>\n\n<p>Better yet, you don't need the <code>if</code> statements inside the blocks. If the program reaches inside the while loop, then the if statement is always going to be true. </p>\n"}, {"comments": [{"owner": {"reputation": 16808, "user_id": 197011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2bfdf995aa973ef9974fca9aeb6c7fb?s=128&d=identicon&r=PG", "display_name": "GreenMatt", "link": "https://stackoverflow.com/users/197011/greenmatt"}, "edited": false, "score": 0, "creation_date": 1536678790, "post_id": 52279086, "comment_id": 91506150, "body": "As written, your code will print the number of quarters each time through the loop. I don&#39;t think this is the desired behavior."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1536678617, "creation_date": 1536678617, "answer_id": 52279086, "question_id": 52278930, "link": "https://stackoverflow.com/questions/52278930/simple-coin-change-maker-program-in-c/52279086#52279086", "title": "Simple Coin Change Maker Program in C", "body": "<pre><code>while(change &gt;= 25)\n{\n    numberOfQuarters++;\n    if(numberOfQuarters &gt;0 )\n    {\n        change = (change - (numberOfQuarters * 25));\n    }\n    printf(\"\\nNumber of Quarters:%d\", numberOfQuarters);\n}\n</code></pre>\n\n<p>This structure is wrong because 2nd quarter will have twice more value and 3rd quarter will have third more value in this code. You don't need to multiply <code>numberOfQuarters</code> and you don't need to check if <code>numberOfQuarters</code> is positive because it must be positive after incrementing from zero (if overflow doesn't happen).</p>\n\n<p>This segment should be like this:</p>\n\n<pre><code>while(change &gt;= 25)\n{\n    numberOfQuarters++; /* add one more quarter */\n    change = change - 25; /* subtract the value of one quarter because one is added */\n    printf(\"\\nNumber of Quarters:%d\", numberOfQuarters);\n}\n</code></pre>\n\n<p>Calculations for dimes and nickels should be done in this way, too.</p>\n\n<p>The reason for two dimes are used is that for some reason you desided not to decrease values of dimes when there is only one dime.</p>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 0, "last_activity_date": 1536679072, "creation_date": 1536679072, "answer_id": 52279224, "question_id": 52278930, "link": "https://stackoverflow.com/questions/52278930/simple-coin-change-maker-program-in-c/52279224#52279224", "title": "Simple Coin Change Maker Program in C", "body": "<p>So since the main issue has already been addressed, at this point I might as well just propose another implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n\n    int numberOfQuarters =0;\n    int numberOfDimes =0;\n    int numberOfNickels =0;\n    int numberOfPennies =0;\n\n    int price;\n    int paid;\n    int change;\n\n    printf(\"Please enter the price of your item in cents: \");\n    scanf(\"%d\", &amp;price);\n\n    printf(\"Please enter the amount of money you gave in cents: \");\n    scanf(\"%d\", &amp;paid);\n\n    change = (paid - price);\n    printf(\"Change required: %d\", change);\n\n    numberOfQuarters += change / 25;\n    change %= 25;\n    numberOfDimes += change / 10;\n    change %= 10;\n    numberOfNickels += change / 5;\n    change %= 5;\n    numberOfPennies = change;\n\n    printf(\"\\nThe number of quarters: %d\", numberOfQuarters);\n    printf(\"\\nThe number of dimes: %d\", numberOfDimes);\n    printf(\"\\nThe number of nickels: %d\", numberOfNickels);\n    printf(\"\\nThe number of pennies: %d\\n\", change);\n\n}\n</code></pre>\n\n<p>This way you avoid having any loop and just use division and reminder.</p>\n"}], "owner": {"reputation": 9, "user_id": 10348124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb8d0cc7f935876920a5d669012da05?s=128&d=identicon&r=PG&f=1", "display_name": "user10348124", "link": "https://stackoverflow.com/users/10348124/user10348124"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1226, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1536679072, "creation_date": 1536678140, "last_edit_date": 1536678272, "question_id": 52278930, "link": "https://stackoverflow.com/questions/52278930/simple-coin-change-maker-program-in-c", "title": "Simple Coin Change Maker Program in C", "body": "<p>So I have to make a Coin Change Maker program where the user inputs the price and how much they gave to pay and the output has to be their change in quarters, dimes, nickles, pennies. For some reason my program won't give the right output. If I input the price as 40 cents and input the amount I paid as 50 cents it says the change required is 10 cents but 2 dimes so it's giving me an extra dime. If anyone can help me that'd be greatly appreciated.  </p>\n\n<pre><code>int main()\n{\n\n    int numberOfQuarters =0;\n    int numberOfDimes =0;\n    int numberOfNickels =0;\n    int numberOfPennies =0;\n\n    int price;\n    int paid;\n    int change;\n\n\n\n    printf(\"Please enter the price of your item in cents: \");\n    scanf(\"%d\", &amp;price);\n\n    printf(\"Please enter the amount of money you gave in cents: \");\n    scanf(\"%d\", &amp;paid);\n\n    change = (paid - price);\n    printf(\"Change required: %d\", change);\n\n    while(change &gt;= 25)\n    {\n        numberOfQuarters++;\n        if(numberOfQuarters &gt;0 )\n        {\n            change = (change - (numberOfQuarters * 25));\n        }\n        printf(\"\\nNumber of Quarters:%d\", numberOfQuarters);\n    }\n\n    while((change &gt;= 10) &amp;&amp; (change &lt; 25))\n    {\n        numberOfDimes++;\n        if(numberOfDimes &gt; 1)\n        {\n            change = (change - (numberOfDimes * 10));\n        }\n    }\n    while((change &gt;= 5) &amp;&amp; (change &lt; 10))\n    {\n        numberOfNickels++;\n        if(numberOfNickels &gt;0)\n        {\n            change = (change - (numberOfNickels * 5));\n        }\n    }\n\n    printf(\"\\nThe number of quarters: %d\", numberOfQuarters);\n    printf(\"\\nThe number of dimes: %d\", numberOfDimes);\n    printf(\"\\nThe number of nickels: %d\", numberOfNickels);\n    printf(\"\\nThe number of pennies: %d\", change);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "max", "scanf", "min"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1536678112, "post_id": 52278883, "comment_id": 91505695, "body": "The program will stop working after doing everything in the program. What is the problem? You have SEGV or somthing?"}, {"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1536678501, "post_id": 52278883, "comment_id": 91505955, "body": "@MikeCAT It does not do everything it is supposed to. It only allows to enter the elements of the array and after that a error message appears &quot;Program.exe has stooped working.&quot;."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1536678673, "post_id": 52278883, "comment_id": 91506073, "body": "Are you sure you&#39;re compiling and running the code you pasted? You&#39;re missing a <code>&quot;</code> character on line 10 of what you pasted."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1536678817, "post_id": 52278883, "comment_id": 91506170, "body": "One of the hallmarks of a good &quot;it&#39;s not doing what I expect&quot; question is to indicate what you expect and what you got. If you include what you expect and what you got, then you&#39;ll get better help much faster."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1536678913, "post_id": 52278883, "comment_id": 91506243, "body": "<i>&quot;... but then stops working&quot;</i> is not a good problem statement. You should provide details of how it is not working."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 1, "creation_date": 1536678561, "post_id": 52279051, "comment_id": 91505996, "body": "Its written in C rather than cpp."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1536678657, "post_id": 52279051, "comment_id": 91506055, "body": "C++ does not support dynamic arrays. And C is a different languaeg anyway."}], "tags": [], "owner": {"reputation": 1604, "user_id": 7032512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4848s.png?s=128&g=1", "display_name": "amin saffar", "link": "https://stackoverflow.com/users/7032512/amin-saffar"}, "is_accepted": false, "score": 0, "last_activity_date": 1536678912, "last_edit_date": 1536678912, "creation_date": 1536678525, "answer_id": 52279051, "question_id": 52278883, "link": "https://stackoverflow.com/questions/52278883/why-does-the-following-program-stops-working-after-taking-the-inputs-in-the-arra/52279051#52279051", "title": "Why does the following program stops working after taking the inputs in the array?", "body": "<p>In cpp for dynamic array should use this syntax.</p>\n\n<pre><code>int *a = new int[n] ;\n</code></pre>\n\n<p>if you like to use cpp and you want to have dynamic list you can use vector</p>\n\n<pre><code>std::vector&lt;int&gt; a;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536678765, "post_id": 52279102, "comment_id": 91506135, "body": "That is a mistake I did while copying it here."}, {"owner": {"reputation": 971, "user_id": 10335421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZnBu.jpg?s=128&g=1", "display_name": "Ali Hussam", "link": "https://stackoverflow.com/users/10335421/ali-hussam"}, "reply_to_user": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "edited": false, "score": 0, "creation_date": 1536678897, "post_id": 52279102, "comment_id": 91506228, "body": "@AASingh check the answer now"}], "tags": [], "owner": {"reputation": 971, "user_id": 10335421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZnBu.jpg?s=128&g=1", "display_name": "Ali Hussam", "link": "https://stackoverflow.com/users/10335421/ali-hussam"}, "is_accepted": false, "score": 0, "last_activity_date": 1536678847, "last_edit_date": 1536678847, "creation_date": 1536678660, "answer_id": 52279102, "question_id": 52278883, "link": "https://stackoverflow.com/questions/52278883/why-does-the-following-program-stops-working-after-taking-the-inputs-in-the-arra/52279102#52279102", "title": "Why does the following program stops working after taking the inputs in the array?", "body": "<p>First things first your code has a missing closing \" in the printf statement below. Your code is working fine.</p>\n\n<pre><code>printf(\"Enter of inputs.\\n\");\n</code></pre>\n\n<p>There can be one more possibility, you might be using some IDE that closes the result window at the end of the program you can try placing <code>getchar()</code> before <code>return</code> to hold the screen.</p>\n"}, {"tags": [], "owner": {"reputation": 6814, "user_id": 5227053, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/30254853024c1381c7e51ca09b9341e7?s=128&d=identicon&r=PG&f=1", "display_name": "AnoE", "link": "https://stackoverflow.com/users/5227053/anoe"}, "is_accepted": true, "score": 0, "last_activity_date": 1536678733, "creation_date": 1536678733, "answer_id": 52279123, "question_id": 52278883, "link": "https://stackoverflow.com/questions/52278883/why-does-the-following-program-stops-working-after-taking-the-inputs-in-the-arra/52279123#52279123", "title": "Why does the following program stops working after taking the inputs in the array?", "body": "<p>You are missing one <code>\"</code> symbol here:</p>\n\n<pre><code>printf(\"Enter of inputs.\\n);\n</code></pre>\n\n<p>After that, it works well for me (on Linux), with only a certainly harmless warning:</p>\n\n<pre><code>$ gcc -Wall -Wextra t.c\nt.c: In function \u2018main\u2019:\nt.c:6:17: warning: unused variable \u2018t\u2019 [-Wunused-variable]\n     int n,i,l,s,t;\n\n$ ./a.out\nEnter number of inputs.\n1\nEnter of inputs.\n1\nmax = 1 , min = 1\n$ ./a.out\nEnter number of inputs.\n10\nEnter of inputs.\n20\n21\n23\n24\n25\n26\n27\n28\n29\n2023\nmax = 2023 , min = 20\n</code></pre>\n\n<p>Possibly you had that typo and <em>thought</em> you had recompiled it, but then went on to run an old executable (because it was not able to recompile)?</p>\n"}, {"comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1536680771, "post_id": 52279244, "comment_id": 91507437, "body": "Could you be more explicit on how is your suggestion improving on OP&#39;s code?"}], "tags": [], "owner": {"reputation": 18, "user_id": 10348178, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYoPmydDzjc/AAAAAAAAAAI/AAAAAAAAAiE/KveCELJkKkA/photo.jpg?sz=128", "display_name": "Vengence Tech", "link": "https://stackoverflow.com/users/10348178/vengence-tech"}, "is_accepted": false, "score": 0, "last_activity_date": 1536679136, "creation_date": 1536679136, "answer_id": 52279244, "question_id": 52278883, "link": "https://stackoverflow.com/questions/52278883/why-does-the-following-program-stops-working-after-taking-the-inputs-in-the-arra/52279244#52279244", "title": "Why does the following program stops working after taking the inputs in the array?", "body": "<p>Well, You didnt provide output(printf statement) of largest and smallest number after finding them. Program should be like this :-</p>\n\n<pre><code>int main()\n{\nint n,i,l,s,t;\nprintf(\"Enter number of inputs.\\n\");\nscanf(\"%d\",&amp;n);\nint a[n];\nprintf(\"Enter of inputs.\\n\");\nfor(i=0;i&lt;n;i++)\n{\n    scanf(\"%d\",&amp;a[i]);\n}\nl=a[0];\ns=a[0];\nfor(i=0;i&lt;n;i++)\n{\n    if(a[i]&gt;l)\n    {\n        l=a[i];\n    }\n    if(a[i]&lt;s)\n    {\n        s=a[i];\n    }\n}\nprintf(\"Largest no : %d and smallest no : %d\",l,s);\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10140727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aec3341dd6b3fef9bf360e3c1a7471b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Akash Singh", "link": "https://stackoverflow.com/users/10140727/aditya-akash-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1536682161, "accepted_answer_id": 52279123, "answer_count": 4, "score": -2, "last_activity_date": 1536679136, "creation_date": 1536678007, "last_edit_date": 1536678716, "question_id": 52278883, "link": "https://stackoverflow.com/questions/52278883/why-does-the-following-program-stops-working-after-taking-the-inputs-in-the-arra", "closed_reason": "Not suitable for this site", "title": "Why does the following program stops working after taking the inputs in the array?", "body": "<p>I wrote the following program for finding the largest and the smallest element of an array. The program takes the input of the array but then stops working. What is the reason behind that ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int n,i,l,s,t;\n    printf(\"Enter number of inputs.\\n\");\n    scanf(\"%d\",&amp;n);\n    int a[n];\n    printf(\"Enter inputs.\\n\");\n    for(i=0;i&lt;n;i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    l=a[0];\n    s=a[0];\n    for(i=0;i&lt;n;i++)\n    {\n        if(a[i]&gt;l)\n        {\n            l=a[i];\n        }\n        if(a[i]&lt;s)\n        {\n            s=a[i];\n        }\n    }\n    printf(\"max = %d , min = %d\\n\",l,s);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["ios", "c", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1536680054, "post_id": 52278468, "comment_id": 91506967, "body": "As far as I&#39;m aware SDL multitouch/gestures are processed based on previous fingerdown/move/up events, so it is quite unlikely you&#39;ll get multitouch event but no second figerdown. Could it be that your problem is actually in the way you react to said events? Can you printf-dump full tfinger state on fingerdown event and mgesture state on multitouch event, and attach results to question?"}, {"owner": {"reputation": 1192, "user_id": 1152375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67a454b408549197a8176722482a2480?s=128&d=identicon&r=PG", "display_name": "gh123man", "link": "https://stackoverflow.com/users/1152375/gh123man"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1536705779, "post_id": 52278468, "comment_id": 91518492, "body": "I added a sample event stream to the question. I did further testing. I found that if I call <code>SDL_GetTouchFinger</code> within the event poll loop - I can detect both fingers independently. If I cannot get the finger up/down events to work I will use this approach instead."}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 0, "creation_date": 1536785728, "post_id": 52278468, "comment_id": 91554357, "body": "have you tried building from the latest source? this does feel like a bug especially given that you do get <code>SDL_FINGERMOTION</code>. You can also try testing with your Mac if you have a touchpad. Or maybe an Android device?"}], "answers": [{"tags": [], "owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "is_accepted": false, "score": 0, "last_activity_date": 1536786976, "creation_date": 1536786976, "answer_id": 52303594, "question_id": 52278468, "link": "https://stackoverflow.com/questions/52278468/sdl2-ios-multitouch-second-finger-down-not-detected/52303594#52303594", "title": "SDL2 iOS multitouch second finger down not detected", "body": "<p>Looking at the <a href=\"https://hg.libsdl.org/SDL/file/02509665751f/src/video/uikit/SDL_uikitview.m\" rel=\"nofollow noreferrer\">source code</a> I see that <code>SDL_SendTouch()</code> should be getting called for every finger (<code>NSEvent</code>) sent to the <code>SDL_uikitview::touchesBegan</code> handler (SDL subclass of <code>UIView</code>). I dont remember enough about UIKit to comment on the expected behavior here, but you can attach a debugger and see for yourself if it gets the expected number of <code>NSEvents</code>.</p>\n\n<p>If the number and type of <code>NSEvents</code> don't match what you expect then it seems there is little SDL could do. If they are as you expect then it points to a bug in SDL.</p>\n\n<p>Specifically, look at <a href=\"https://hg.libsdl.org/SDL/file/02509665751f/src/events/SDL_touch.c\" rel=\"nofollow noreferrer\">the source</a> for <code>SDL_SendTouch</code> as another place to put some breakpoints. There are a few cases where that function can bail out:</p>\n\n<pre><code>   228 SDL_Touch* touch = SDL_GetTouch(id);\n   229     if (!touch) {\n   230         return -1;\n   231     }\n   232 \n   233     finger = SDL_GetFinger(touch, fingerid);\n   234     if (down) {\n   235         if (finger) {\n   236             /* This finger is already down */\n   237             return 0;\n   238         }\n   239 \n   240         if (SDL_AddFinger(touch, fingerid, x, y, pressure) &lt; 0) {\n   241             return 0;\n   242         }\n</code></pre>\n"}], "owner": {"reputation": 1192, "user_id": 1152375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67a454b408549197a8176722482a2480?s=128&d=identicon&r=PG", "display_name": "gh123man", "link": "https://stackoverflow.com/users/1152375/gh123man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1536786976, "creation_date": 1536676768, "last_edit_date": 1536763763, "question_id": 52278468, "link": "https://stackoverflow.com/questions/52278468/sdl2-ios-multitouch-second-finger-down-not-detected", "title": "SDL2 iOS multitouch second finger down not detected", "body": "<p>I am working on a SDL2 project that I have ported to iOS.\nI am having trouble getting 2 touches to register to use as game controls. </p>\n\n<p>The controls work like this:</p>\n\n<pre><code>iOS Device\n+---------------+\n|   F   |   |   |\n|-------| L | R |\n|   B   |   |   |\n+---------------+\n</code></pre>\n\n<p><strong>F</strong> - Move forward </p>\n\n<p><strong>B</strong> - Move backwards</p>\n\n<p><strong>L</strong> - Turn left</p>\n\n<p><strong>R</strong> - Turn right</p>\n\n<p>The player should be able to move forward and turn at the same time - which means I have to handle two individual touches at the same time that are NOT a multitouch gesture.</p>\n\n<p>Here is a sample of the code that does this in my project.</p>\n\n<pre><code>while (SDL_PollEvent(&amp;event)) {\n    printf(\"event %#010x\\n\", event.type);\n    switch (event.type) {\n        case SDL_FINGERDOWN:\n        //case SDL_FINGERMOTION:\n            if (event.tfinger.x &lt; 0.5) { \n                lastMoveFinger = event.tfinger.fingerId;\n                isMoving = true;\n                if (event.tfinger.y &lt; 0.5) { \n                    mvForward = true;\n                } else { \n                    mvForward = false;\n                }\n            } else { \n                lastTurnFinger = event.tfinger.fingerId;\n                isTurning = true;\n                if (event.tfinger.x &lt; 0.75) { \n                    turnRight = false;\n                } else { \n                    turnRight = true;\n                }\n            }\n            break;\n        case SDL_FINGERUP:\n            if (event.tfinger.x &lt; 0.5 || event.tfinger.fingerId == lastMoveFinger) {\n                lastMoveFinger = -1;\n                isMoving = false;\n            } else {\n                lastTurnFinger = -1;\n                isTurning = false;\n            }\n            break;\n    }\n}\n</code></pre>\n\n<p>Here is what happens:</p>\n\n<ol>\n<li>Place the first finger down on the screen (hold it down)</li>\n<li>First touch event is registered</li>\n<li>Place the second finger down on the screen. </li>\n<li>No second touch is registered but multitouch gesture events are fired (I caught these with the <code>printf</code>). </li>\n</ol>\n\n<p>One interesting thing I found is that if I handle <code>SDL_FINGERMOTION</code> both touches are register in the correct locations - but this wont work because it doesn't detect a single tap, but instead only works when fingers are moved around. So it seems multitouch is working but perhaps I am not handling it correctly. </p>\n\n<p>For reference here are the touch events from <code>SDL_events.h</code></p>\n\n<pre><code>/* Touch events */\nSDL_FINGERDOWN      = 0x700,\nSDL_FINGERUP,\nSDL_FINGERMOTION,\n</code></pre>\n\n<p>Here is a sample of the event stream. I placed down 1 finger, then a second, then lifted the first, then lifted the second.</p>\n\n<pre><code>event 0x00000401\nevent 0x00000700 // Finger down\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000802\nevent 0x00000702\nevent 0x00000802\nevent 0x00000402\nevent 0x00000701 // Finger up\n</code></pre>\n\n<p>Notice that there is lots of finger motion - but only 1 finger up and down event. If I get some time later I will update this with a printout of the current number of fingers on the screen to illustrate that the second finger down event is never fired. </p>\n"}, {"tags": ["c", "embedded", "usb", "stm32", "cubemx"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536677181, "post_id": 52277953, "comment_id": 91505128, "body": "How do you call <code>CDC_Receive_FS</code> what is the <code>USBDRIVER_receive</code> prototype?"}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536677708, "post_id": 52277953, "comment_id": 91505454, "body": "I never call CDC_Receive_FS from any of my code. I think it is called by an interrupt in FreeRTOS.   I&#39;d like to point out that the code never reaches that far, it seems to halt before entering the CDC_Receive_FS function.  The USBDRIVER_receive function is my own function which copies the data in the Buf buffer to a local buffer, i.e. not doing anything complicated."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1536687530, "post_id": 52277953, "comment_id": 91510755, "body": "@purplepsycho you do not call it. It is static for the reason!! I think you have no experience with this library."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536687705, "post_id": 52277953, "comment_id": 91510845, "body": "@dman I afraid HAL USB implementation is full of bugs. Check buffer sizes if they are not 4 bytes for example as in some versions of HAL. Check if there are not dynamic allocations in the interrupt routine + many other known glitches."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536687797, "post_id": 52277953, "comment_id": 91510890, "body": "@dman - CDC payload is max 64 bytes / packet - so it should not make any difference if it is 8 or 9. Check the buffer sizes."}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1536741826, "post_id": 52277953, "comment_id": 91529818, "body": "Hi. I haven&#39;t tested Wireshark, I used USBlyzer to debug, you will be able to see all the USB packets. How do you start the USB to receive?"}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1536743601, "post_id": 52277953, "comment_id": 91530948, "body": "@JMA the routine for starting USB is defined by CubeMX auto-generated code. I added the code to the initial question for clarity."}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1536744108, "post_id": 52277953, "comment_id": 91531262, "body": "@P__J__ Thanks for your answers! USB implementation being &quot;full of bugs&quot; doesn&#39;t sound too good. Do you know of any place where the information about the bugs and possible remedies are collected?"}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1536744593, "post_id": 52277953, "comment_id": 91531566, "body": "@dman I don&#39;t remember very well how does it work, I started with this library but I&#39;ve modified it to be similar to a UART and I have a start receive function now. Do you call <code>USBD_CDC_SetRxBuffer</code> or <code>USBD_CDC_ReceivePacket</code>?"}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1536745813, "post_id": 52277953, "comment_id": 91532332, "body": "@JMA I use USBD_CDC_ReceivePacket. But I never call that function. It gets called by an interrupt or similar. But I figured out that it is that function that gets called when I send a USB message from a PC."}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1536759783, "post_id": 52277953, "comment_id": 91541162, "body": "@dman Search in the code where <code>USBD_CDC_SetRxBuffer</code>is called. May be in <code>CDC_Init_FS</code>, and check the buffer size."}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1537536265, "post_id": 52277953, "comment_id": 91832195, "body": "@JMA I looked around and found <code>#define CDC_CMD_PACKET_SIZE                         8  &#47;* Control Endpoint Packet size *&#47;</code> located in <code>usbd_cdc.h</code> which seemed <b>really</b> promising, but changing that to 64 did not change the behaviour. Any other ideas?"}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1537543710, "post_id": 52277953, "comment_id": 91836616, "body": "@dman <code>CDC_CMD_PACKET_SIZE</code> is for command packets, I also have value 8. In file <code>usb_cdc_if.c</code> check the value of <code>APP_RX_DATA_SIZE</code>. You also can check it in the Cube, parameter &quot;USB CDC Rx Buffer Size&quot;"}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1537859708, "post_id": 52277953, "comment_id": 91925729, "body": "@JMA Thanks for the tip, In the file &quot;<code>usbd_cdc_if.c</code>&quot; I have that constant <code>APP_RX_DATA_SIZE</code> set to <code>4</code> (unit is bits I assume?). Although I struggle to understand the relation between this constant and the length of the message on the wire. As I can see when tracing with wireshark the message is 64 bytes (payload is padded with zeroes). To add to the confusion the parameter &quot;USB CDC Rx Buffer Size&quot; in CubeMX is set to 1000 Bytes (which doesn&#39;t correlate with the 4 in the c file in any way I can understand. I would really appreciate it if you could provide some clarity to this?"}, {"owner": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1537864518, "post_id": 52277953, "comment_id": 91928221, "body": "@dman I don&#39;t have much more info. <code>APP_RX_DATA_SIZE</code> is used to define the RX buffer: <code>uint8_t UserRxBufferFS[APP_RX_DATA_SIZE];</code> and this buffer is set as receive buffer with the function <code>USBD_CDC_SetRxBuffer(&amp;hUsbDeviceFS, UserRxBufferFS);</code> that is called in the <code>static int8_t CDC_Init_FS(void)</code> function. The parameter <code>*Buff</code> in the <code>static int8_t CDC_Receive_FS (uint8_t* Buf, uint32_t *Len)</code> function is pointing to that buffer. If this buffer is smaller that the frame you send you will provoke a out of bound error."}, {"owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "reply_to_user": {"reputation": 462, "user_id": 6537200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtIQn.jpg?s=128&g=1", "display_name": "JMA", "link": "https://stackoverflow.com/users/6537200/jma"}, "edited": false, "score": 0, "creation_date": 1539004757, "post_id": 52277953, "comment_id": 92332892, "body": "@JMA, alright! Thanks for that information. Is there any way I can track if there is an &quot;out of bound error&quot; that is occuring? Because all the information I have now is that the MCU execution proceeds to the Hardware fault handler and halts (on incoming messages)."}], "owner": {"reputation": 11, "user_id": 7486257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0c9cdab50dc2d0ea779985d6641fd7?s=128&d=identicon&r=PG&f=1", "display_name": "dman", "link": "https://stackoverflow.com/users/7486257/dman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1057, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561024631, "creation_date": 1536675203, "last_edit_date": 1536747678, "question_id": 52277953, "link": "https://stackoverflow.com/questions/52277953/receive-usb-messages-on-stm32-mcu-hangs", "title": "Receive USB messages on STM32 MCU hangs", "body": "<p>I am building a USB driver on an ARM Cortex M series MCU, namely the STM32F107VCT.\nMy code is based on the USB CDC library code generated by STM's own code generation software called CubeMX. \nIn CubeMX the MCU is configured to support 64 byte USB messages.</p>\n\n<p>Sending messages from a host computer and parsing them on the MCU works fine when the USB payload is 8 chars (i.e. 8 bytes) or smaller. I can see in Wireshark that such messages are padded out to be 64 bytes on the wire.</p>\n\n<p>When 9 chars are being sent the MCU stops execution (without going to the hardware fault handler) and without hitting any of the breakpoint I inserted in the CDC_Receive_FS function as seen in the code segment below.</p>\n\n<p>I can see the USB message (padded out to 64 bytes, just like when having 8 chars as payload) going out from the PC using Wireshark and the MCU hardware acknowledges the message, but the MCU halts without reaching any breakpoints.</p>\n\n<p><strong>My main questions:</strong></p>\n\n<p>Does anyone know why this would halt? Perhaps some simple setting I am missing?\nIs there any lower level code I can place breakpoints in to really try and figure out what is going on? To me it is not clear what function actually calls CDC_Receive_FS</p>\n\n<p>My implementation of CDC_Receive_FS:</p>\n\n<pre><code>    static int8_t CDC_Receive_FS (uint8_t* Buf, uint32_t *Len)\n{\n  /* USER CODE BEGIN 6 */\n\n  // Test breakpoint 1 set here\n\n   //My custom parser\n  USBDRIVER_receive(&amp;(project.usbDriver), Buf, Len);\n\n  // Test breakpoint 2 set here\n\n  //CubeMX Generated functions\n  USBD_CDC_SetRxBuffer(&amp;hUsbDeviceFS, &amp;Buf[0]);\n  USBD_CDC_ReceivePacket(&amp;hUsbDeviceFS);\n\n  // Test breakpoint 3 set here\n\n  return (USBD_OK);\n  /* USER CODE END 6 */ \n}\n</code></pre>\n\n<p>Please let me know if some additional information is needed in order to solve the issue.</p>\n\n<p>The USB driver is initialized by the following CubeMX auto-generated code:</p>\n\n<pre><code>void MX_USB_DEVICE_Init(void)\n{\n  /* USER CODE BEGIN USB_DEVICE_Init_PreTreatment */\n\n  /* USER CODE END USB_DEVICE_Init_PreTreatment */\n\n  /* Init Device Library, add supported class and start the library. */\n  USBD_Init(&amp;hUsbDeviceFS, &amp;FS_Desc, DEVICE_FS);\n\n  USBD_RegisterClass(&amp;hUsbDeviceFS, &amp;USBD_CDC);\n\n  USBD_CDC_RegisterInterface(&amp;hUsbDeviceFS, &amp;USBD_Interface_fops_FS);\n\n  USBD_Start(&amp;hUsbDeviceFS);\n\n  /* USER CODE BEGIN USB_DEVICE_Init_PostTreatment */\n\n  /* USER CODE END USB_DEVICE_Init_PostTreatment */\n}\n</code></pre>\n"}, {"tags": ["c", "xamarin", "xamarin.forms"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "reply_to_user": {"reputation": 3868, "user_id": 4610605, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d1bc7f1ffa08148176687b20de16c13b?s=128&d=identicon&r=PG", "display_name": "Felix D.", "link": "https://stackoverflow.com/users/4610605/felix-d"}, "edited": false, "score": 0, "creation_date": 1536677264, "post_id": 52278015, "comment_id": 91505184, "body": "But this paid or canceled status will appear on a label @Felix D."}, {"owner": {"reputation": 917, "user_id": 8395242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230839a45c62cfecdd8eb945fe625be4?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8395242/andrew"}, "reply_to_user": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "edited": false, "score": 0, "creation_date": 1536678083, "post_id": 52278015, "comment_id": 91505678, "body": "So it&#39;s a string? The Converter approach is still valid it would be <code>return (string)value == &quot;Paid&quot;;</code> or whatever the Paid string is. I would recommend using an Enum instead of strings though to prevent &quot;magic strings&quot; from floating around, but that&#39;s another topic"}, {"owner": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "edited": false, "score": 0, "creation_date": 1536679800, "post_id": 52278015, "comment_id": 91506818, "body": "Yes, it&#180;s. But I still understand how I can  to get id button in code behind, my listview Is to be populated from an API. I should check if the status on the label is paid should the button appear btn.IsVisible = true, it&#39;s being a little hard to figure out why I&#39;m still new to Xamarin!! @Andrew"}, {"owner": {"reputation": 3868, "user_id": 4610605, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d1bc7f1ffa08148176687b20de16c13b?s=128&d=identicon&r=PG", "display_name": "Felix D.", "link": "https://stackoverflow.com/users/4610605/felix-d"}, "reply_to_user": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "edited": false, "score": 0, "creation_date": 1536814759, "post_id": 52278015, "comment_id": 91560942, "body": "@AmaroManungu but there is no need to do this kind of things in code behind. Check out <a href=\"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/enterprise-application-patterns/mvvm\" rel=\"nofollow noreferrer\">MVVM</a> and <a href=\"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/xaml/bindable-properties\" rel=\"nofollow noreferrer\">DataBindings in Xamarin.Forms</a> - <b>If you are new to Xamarin this is something you really should look at !</b>"}, {"owner": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "reply_to_user": {"reputation": 3868, "user_id": 4610605, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d1bc7f1ffa08148176687b20de16c13b?s=128&d=identicon&r=PG", "display_name": "Felix D.", "link": "https://stackoverflow.com/users/4610605/felix-d"}, "edited": false, "score": 0, "creation_date": 1537801330, "post_id": 52278015, "comment_id": 91905799, "body": "@FelixD. I&#39;ve been testing the MVVM but I had a lot of difficulty to implement these last days"}], "tags": [], "owner": {"reputation": 917, "user_id": 8395242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/230839a45c62cfecdd8eb945fe625be4?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8395242/andrew"}, "is_accepted": false, "score": 4, "last_activity_date": 1536675987, "last_edit_date": 1536675987, "creation_date": 1536675366, "answer_id": 52278015, "question_id": 52277714, "link": "https://stackoverflow.com/questions/52277714/how-to-get-the-id-of-a-button-inside-a-viewcell/52278015#52278015", "title": "How to get the id of a button inside a viewCell", "body": "<p>Sounds like an excellent place to bind the <code>IsVisible</code> property of the button to the paid state:</p>\n\n<pre><code>&lt;Button x:Name=\"cmdOpen\" \n        IsVisible=\"{Binding paidState}\" \n        Text=\"Open pdf\" /&gt;\n</code></pre>\n\n<p>Note that this will only work if the paidState property is a bool. If your just using something like a double to store the remaining amount, you'll need to use a <a href=\"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/data-binding/converters\" rel=\"nofollow noreferrer\">converter</a> to change the value into a bool. Your XAML:</p>\n\n<pre><code>&lt;ContentPage.Resources&gt;\n    &lt;ResourceDictionary&gt;\n        &lt;local:DoubleToBoolConverter x:Key=\"doubleToBool\" /&gt;\n    &lt;/ResourceDictionary&gt;\n&lt;/ContentPage.Resources&gt;\n\n&lt;!--your code ---&gt;\n\n&lt;Button x:Name=\"cmdOpen\" \n        IsVisible=\"{Binding amountRemaining, Converter={StaticResource doubleToBool}}\" \n        Text=\"Open pdf\" /&gt;\n</code></pre>\n\n<p>And then the converter:</p>\n\n<pre><code>public class DoubleToBoolConverter : IValueConverter\n{\n    public object Convert(\n               object value, \n               Type targetType, \n               object parameter, \n               CultureInfo culture)\n    {\n        return (double)value == 0;\n    }\n\n    public object ConvertBack(\n               object value, \n               Type targetType, \n               object parameter, \n               CultureInfo culture)\n    {\n        throw new NotImplementedException();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9115653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kgUu.jpg?s=128&g=1", "display_name": "Amaro Manungu", "link": "https://stackoverflow.com/users/9115653/amaro-manungu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536676869, "creation_date": 1536674409, "last_edit_date": 1536676869, "question_id": 52277714, "link": "https://stackoverflow.com/questions/52277714/how-to-get-the-id-of-a-button-inside-a-viewcell", "title": "How to get the id of a button inside a viewCell", "body": "<p>I have a button inside a viewCell and I have two paid and canceled states that appears in this Label Text = \"{Binding statusDescr}\", when the state on the label is paid the button should appear and when it is canceled the button should not appear. My problem is that I can not get the ID of the button inside a viewcell to make it visible when the status on the label is paid and invisible when it is canceled</p>\n\n<pre><code>&lt;ListView x:Name=\"Lista\"  \n          SeparatorColor=\"Gray\" \n          SeparatorVisibility=\"Default\" \n          HasUnevenRows=\"True\" \n          VerticalOptions=\"FillAndExpand\" &gt;\n    &lt;ListView.ItemTemplate&gt;\n        &lt;DataTemplate&gt;\n            &lt;ViewCell&gt;\n                &lt;StackLayout&gt;\n                    &lt;StackLayout Orientation=\"Horizontal\" &gt;\n                        &lt;StackLayout Orientation=\"Horizontal\" \n                                     HorizontalOptions=\"FillAndExpand\"&gt;\n                            &lt;StackLayout&gt;\n                                &lt;Label Text=\"{Bindenter code hereing entityName}\" \n                                       TextColor=\"White\" \n                                       Font=\"14\"/&gt;\n                                &lt;Label Text=\"{Binding cmPaymentDate}\" \n                                       TextColor=\"White\" \n                                       Font=\"14\"/&gt;\n                                &lt;Label Text=\"{Binding statusDescr}\" \n                                       TextColor=\"White\"\n                                       Font=\"14\"/&gt;\n                            &lt;/StackLayout&gt;\n                            &lt;StackLayout HorizontalOptions=\"EndAndExpand\"&gt;\n                                &lt;Button x:Name=\"cmdOpen\" \n                                        Text=\"Open pdf\" /&gt;\n                                &lt;Label Text=\"{Binding paymentAmount}\" \n                                       TextColor=\"White\"\n                                       Font=\"14\" \n                                       HorizontalOptions=\"End\" /&gt;\n                                &lt;Label Text=\"{Binding paymentNumber}\" \n                                       TextColor=\"White\" \n                                       Font=\"10\" \n                                       HorizontalOptions=\"End\" /&gt;\n                            &lt;/StackLayout&gt;\n                        &lt;/StackLayout&gt;\n                    &lt;/StackLayout&gt;\n                &lt;/StackLayout&gt;\n            &lt;/ViewCell&gt;\n        &lt;/DataTemplate&gt;\n    &lt;/ListView.ItemTemplate&gt;\n&lt;/ListView&gt;\n</code></pre>\n"}, {"tags": ["c", "return-value", "main"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1536674091, "post_id": 52277576, "comment_id": 91503064, "body": "Why&#39;d you use <code>void main()</code>? use <code>int main()</code> , unless explicitly mentioned something else by your compiler documentation."}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 3, "creation_date": 1536674157, "post_id": 52277576, "comment_id": 91503109, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2108192/what-are-the-valid-signatures-for-cs-main-function\">What are the valid signatures for C&#39;s main() function?</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1536675101, "post_id": 52277576, "comment_id": 91503790, "body": "If the message is output in the <i>build log</i>, then it is related the <i>build</i> not the <i>execution</i> of this code.  Did you really mean &quot;<i>build log</i>&quot;?  Does your build also <i>execute</i> the code?  That would explain your description, but is unusual and deserves explanation.  Either way, if you are in any way relying on or testing the exit value of a program, you should probably explicitly return a value - otherwise why are you testing it?"}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1536674238, "creation_date": 1536674238, "answer_id": 52277659, "question_id": 52277576, "link": "https://stackoverflow.com/questions/52277576/why-does-this-give-a-non-zero-error-code-on-termination/52277659#52277659", "title": "Why does this give a (non zero) error code on termination?", "body": "<p>If you declare <code>main</code> as <code>int main(void)</code> or <code>int main(int argc, char *argv[])</code>, then the current C standard says that reaching the <code>}</code> that terminates <code>main</code> returns a value of 0. This also holds if <code>main</code> is declared with a return type compatible with <code>int</code> but with parameters defined by the C implementation.</p>\n\n<p>If you declare <code>main</code> differently, as with <code>void main()</code>, the C standard does not say what the behavior is, and it is up to your C implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1536674312, "creation_date": 1536674312, "answer_id": 52277680, "question_id": 52277576, "link": "https://stackoverflow.com/questions/52277576/why-does-this-give-a-non-zero-error-code-on-termination/52277680#52277680", "title": "Why does this give a (non zero) error code on termination?", "body": "<p>First of all, I'd recommend to check <a href=\"https://stackoverflow.com/q/2108192/2173917\">What are the valid signatures for C's main() function?</a>.</p>\n\n<p>For a hosted environment, <code>void</code> is not a valid return type for <code>main()</code>.</p>\n\n<p>That being said, as per this function signature, the return type is <code>void</code>, that indicates the call to <code>main()</code> returns nothing to the caller (environment). Now, from the environment, try to access the returned value [i.e., the prompt you are getting] would be indeterminate, at best. C standard does not define any behavior for that.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1536674376, "post_id": 52277686, "comment_id": 91503263, "body": "The C standard says that, if the return type of <code>main</code> is compatible with <code>int</code> and control reaches the <code>}</code> that terminates <code>main</code>, then zero is returned. This is a special specification for <code>main</code>, different from other functions."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536674419, "post_id": 52277686, "comment_id": 91503285, "body": "To complete what @EricPostpischil said, the <code>return 0;</code> in the end is anyway implicit for <code>main()</code>."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1536674335, "creation_date": 1536674335, "answer_id": 52277686, "question_id": 52277576, "link": "https://stackoverflow.com/questions/52277576/why-does-this-give-a-non-zero-error-code-on-termination/52277686#52277686", "title": "Why does this give a (non zero) error code on termination?", "body": "<p>If you don't return anything from main, any value may get returned. In your case, your program returns <code>2</code> as indicated in the message (<code>status 2</code>). You need to return <code>0</code> to notify other programs that your program run successfully.  </p>\n\n<pre><code>int main() {\n   ....\n   return 0;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1536680258, "last_edit_date": 1536680258, "creation_date": 1536676874, "answer_id": 52278499, "question_id": 52277576, "link": "https://stackoverflow.com/questions/52277576/why-does-this-give-a-non-zero-error-code-on-termination/52278499#52278499", "title": "Why does this give a (non zero) error code on termination?", "body": "<p>Since you declared <code>main</code> without a valid signature (i.e. you gave it the return type <code>void</code>), you cannot assume anything about the value that is actually returned to the operating system. If you're compiling for the x86 architecture, then here's what's <em>probably</em> happening to explain the returned value of <code>2</code>:</p>\n\n<pre><code>main:\n    ...\n    call printf\n    add esp, 8\n    ; return value from printf is in EAX register\n    ret \n</code></pre>\n\n<p><code>printf</code> returns the number of characters written to standard output, 2 in your case with the format string <code>\\n%c</code>. The return value from <code>printf</code> is still in the register designated for holding return values (<code>EAX</code>) when you exit from <code>main</code>, so that's what <code>main</code> returns.</p>\n"}], "owner": {"reputation": 1, "user_id": 9813335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yFonG.jpg?s=128&g=1", "display_name": "IAmACoder", "link": "https://stackoverflow.com/users/9813335/iamacoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1536680258, "creation_date": 1536673960, "last_edit_date": 1536674565, "question_id": 52277576, "link": "https://stackoverflow.com/questions/52277576/why-does-this-give-a-non-zero-error-code-on-termination", "title": "Why does this give a (non zero) error code on termination?", "body": "<p>This code runs, even produces the expected output. However, in the build log, I always get <code>Process terminated with status 2 (0 minute(s), 5 second(s))</code> or some variation of this log.</p>\n\n<p>Code -</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nvoid main() {\n\nprintf(\"Please enter a character\");\nchar ch = getch();\n\nch++;\nprintf(\"\\n%c\", ch);\n\n\n} \n</code></pre>\n\n<p>Sample output (the input was 'a' without quotes)-</p>\n\n<pre><code>Please enter a character\nb\n</code></pre>\n"}, {"tags": ["c", "static-libraries", "lib"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536674911, "post_id": 52277064, "comment_id": 91503653, "body": "doesnt it defeat the purpose of a library that each time you want to pick a different font you have to rebuild everything?"}, {"owner": {"reputation": 139, "user_id": 10095132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac23d321a1a6a461b3ff580a85fa1aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tirdad Sadri Nejad", "link": "https://stackoverflow.com/users/10095132/tirdad-sadri-nejad"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1536675389, "post_id": 52277064, "comment_id": 91503964, "body": "@user463035818 the library contains all fonts. but the end application selects to load only one font. library size doesn&#39;t matter, program size does."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1536672920, "post_id": 52277135, "comment_id": 91502193, "body": "Note that the names of each array would need to differ, so the same symbol isn&#39;t exported by each object. The header could be used to determine which of the three names to use (e.g. by <code>#define</code>ing <code>font</code> to be <code>font_a</code>, <code>font_b</code> or <code>font_c</code> depending on the preprocessor defines)."}, {"owner": {"reputation": 139, "user_id": 10095132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac23d321a1a6a461b3ff580a85fa1aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tirdad Sadri Nejad", "link": "https://stackoverflow.com/users/10095132/tirdad-sadri-nejad"}, "edited": false, "score": 0, "creation_date": 1536672977, "post_id": 52277135, "comment_id": 91502234, "body": "there can&#39;t be font1, font2, font3 as the internal functions are written with just &quot;font&quot;. maybe im misunderstood, but how&#39;s the mechanism to select the font in the end application ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 139, "user_id": 10095132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac23d321a1a6a461b3ff580a85fa1aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tirdad Sadri Nejad", "link": "https://stackoverflow.com/users/10095132/tirdad-sadri-nejad"}, "edited": false, "score": 0, "creation_date": 1536673147, "post_id": 52277135, "comment_id": 91502340, "body": "@TirdadSadriNejad It seems you need a redesign of your library. One thing that could (and should, IMO) change is that you pass the font as an argument to the function that needs to use it. That way those function becomes independent of the actual font used. Then it&#39;s easy to use the preprocessor and conditional compilation to &quot;select&quot; font when building the application using the library."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1536675694, "post_id": 52277135, "comment_id": 91504156, "body": "The idea of @Someprogrammerdude is correct. Each source file has a <code>font</code> array defined. The library will now have multiple objects with the same <code>font</code> variable and upon linking one will be selected. To force this selection, you could have an init function in each source file <i>with a s lightly different name</i> and you call this function from your code, even if that function just does a return. This will force the linker to select the object with that function from the library."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1536739680, "post_id": 52277135, "comment_id": 91528541, "body": "There&#39;s an alternative way too, which is to still give each array its own variable name, but use linker features to alias the name <code>font</code> to one of them in the header file depending on preprocessor directives. The details of how to do that - and if the particular compiler/linker can do it at all, depends on the compiler/linker though."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1536672690, "creation_date": 1536672690, "answer_id": 52277135, "question_id": 52277064, "link": "https://stackoverflow.com/questions/52277064/selective-variable-definition-in-a-static-c-library/52277135#52277135", "title": "selective variable definition in a static C library", "body": "<p>You could possibly split the fonts up in different source files. Each source file would then be built into a separate object file (<a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\"><em>translation unit</em></a>) and if your linker is good enough it will discard object files containing symbols not used.</p>\n\n<p>If the unused object files are discarded then they code and data in them will of course not be part of the final linked executable.</p>\n"}], "owner": {"reputation": 139, "user_id": 10095132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac23d321a1a6a461b3ff580a85fa1aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tirdad Sadri Nejad", "link": "https://stackoverflow.com/users/10095132/tirdad-sadri-nejad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52277135, "answer_count": 1, "score": 0, "last_activity_date": 1536672690, "creation_date": 1536672467, "last_edit_date": 1536672688, "question_id": 52277064, "link": "https://stackoverflow.com/questions/52277064/selective-variable-definition-in-a-static-c-library", "title": "selective variable definition in a static C library", "body": "<p>Im making a C static library file (.lib) for a Graphical LCD based on 8051 Microcontroller. there are some functions and 3 fonts which can be selected before compile(only one font is allowed). the library should contain some different fonts like :</p>\n\n<pre><code>#if defined FONT1\nconst uint8_t code font[size1] = { /* Font1 Data*/ }\n#elif defined FONT2\nconst uint8_t code font[size2] = { /* Font2 Data*/ }\n\u2026\n</code></pre>\n\n<p>and the end user may select one desired font by defining it in the given \".h\" file. when I tested, it was not possible to do this by writing above code as the library file, just compiles with one defined font which was obvious. on other hand, it's not efficient to load all 3 fonts at once (in the end application) because of memory considerations.\nis there a proper way to do so ?</p>\n"}, {"tags": ["c++", "c", "opencl"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1536673488, "post_id": 52276989, "comment_id": 91502588, "body": "Which language, C or C++?  They are distinct languages.  C++ has <code>std::vector</code> and <code>std::array</code> as well as pass by reference.  The C language doesn&#39;t have these items."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1536673565, "post_id": 52276989, "comment_id": 91502655, "body": "OpenCL is C, so all my device code is in C. But the host code (which I didn&#39;t provide that much) use C++."}], "answers": [{"comments": [{"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536673376, "post_id": 52277286, "comment_id": 91502496, "body": "Could you be more specific about <code>Always use indices</code> ? I dont understand."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536673497, "post_id": 52277286, "comment_id": 91502600, "body": "@Vuwox If you need to save a position in a buffer from one kernel invocation to another, you need to use an integer array index, not a pointer."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536673714, "post_id": 52277286, "comment_id": 91502787, "body": "OpenCL doesn&#39;t allow to have pointer in structure. So I already store &quot;index&quot; in your term. You do you mean I should do : <code>wrkspc-&gt;getPtr[SRC_IMG] = src[0];</code> instead of <code>&amp;src[0]</code> ? Because that will only store the value contain at position 0 imo. I don&#39;t get it."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 1, "creation_date": 1536674410, "post_id": 52277286, "comment_id": 91503280, "body": "OpenCL does allow pointers in structures, you just mustn&#39;t use them to pass pointers in and out of kernels, <i>because pointers are only valid within that one kernel invocation, and are not the same on host vs device</i>. Whether you do this with a pointer-typed field or by casting a pointer to an integer type (which is what you&#39;re trying to do) doesn&#39;t matter, it&#39;s still not valid."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536674588, "post_id": 52277286, "comment_id": 91503396, "body": "(The fact that you&#39;re having to cast from a pointer type to an integer type should already be telling you that what you&#39;re trying to do is a bad idea and is not going to work.)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536674674, "post_id": 52277286, "comment_id": 91503471, "body": "@Vuwox <code>&amp;src[0]</code> is a virtual memory address on the CPU side. You are storing that pointer as a <code>ulong</code>. You then try to access that pointer from the GPU side, which 1) most likely has a different virtual address space and 2) likely operates on completely different physical memory. Both of these (individually already) mean your CPU-side pointer points to garbage on the GPU side."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1536674935, "post_id": 52277286, "comment_id": 91503677, "body": "@MaxLanghof I believe it&#39;s all on the GPU side: @Vuwox appears to first enqueue the <code>Workspace_Init</code> kernel to &quot;initialise&quot; his struct-of-pointers, then attempt to use those pointers in the <code>ComputeLABFromSrc</code> kernel. But although both are on the device, it&#39;s still not well-defined."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1536674990, "post_id": 52277286, "comment_id": 91503713, "body": "@pmdj Right, my apologies."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536675142, "post_id": 52277286, "comment_id": 91503813, "body": "Yes, everything is on device. This might be not well-defined, Im just wondering why my AMD works perfectly with this, and Nvidia works also for a certain time and start to have issue after a while. Like my pipeline have 26 buffer currently, when accessing the 25 first, there is no issue, but when trying to access the 26 at kernel execution 67, it start to do weird thing. So I just wanted to get explaination why is not working and is there any other solution, except passing them as argument every time. I might have to do it, Im just searching for another approach."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536675350, "post_id": 52277286, "comment_id": 91503939, "body": "If any of you, have reference or something I could read about the fact &quot;they are not guaranteed to stay the same.&quot;. I would appreciate, Im just a curious developer, I made that from scratch and its my first OpenCL project. Im here to learn."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "edited": false, "score": 0, "creation_date": 1536675443, "post_id": 52277286, "comment_id": 91503998, "body": "Like any undefined behaviour, it might behave as you intended some of the time, but not always. The answer remains the same: don&#39;t try to rely on undefined behaviour. Yes, you will need to pass buffers as kernel arguments. You can make this a little easier for yourself by using one large buffer object instead of many small ones, and saving indices into this one large buffer."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536676542, "post_id": 52277286, "comment_id": 91504748, "body": "@Vuwox I&#39;ve provided some references in my answer now. Those are probably as good as you&#39;re going to get - basically, the standard doesn&#39;t specify how what you&#39;re trying to do will behave, so it&#39;s undefined. For the most part, the standard doesn&#39;t enumerate all the things you <i>aren&#39;t</i> allowed to rely on, just the ones that you are."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536685965, "post_id": 52277286, "comment_id": 91510018, "body": "Thanks. I already tried the idea of a large single buffer before. But this is too hard to maintain due to device buffer limit (1/4th of the memory usually). I think, I will have to set arguments one-by-one despite sometime this can be terrible (over 15 arguments). Thanks again."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536687233, "post_id": 52277286, "comment_id": 91510626, "body": "Just to let you know why I tried that approach, is because I found this in the past <a href=\"https://stackoverflow.com/questions/14330291/base-address-of-memory-object-opencl\" title=\"base address of memory object opencl\">stackoverflow.com/questions/14330291/&hellip;</a>. But I re-read that carefully, and I understand now, the second answer is the good one. Like you said, I should prefer indices to pointer."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1536687516, "post_id": 52277286, "comment_id": 91510746, "body": "And here another articles I just found with the same problem. <a href=\"https://stackoverflow.com/questions/36246239/copying-global-on-device-pointer-address-back-and-forth-between-device-and-host\" title=\"copying global on device pointer address back and forth between device and host\">stackoverflow.com/questions/36246239/&hellip;</a>, this lead me to conclusion that device address is okay inside the same kernel, but not guaranteed to be the same in time."}], "tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": true, "score": 4, "last_activity_date": 1536676829, "last_edit_date": 1536676829, "creation_date": 1536673129, "answer_id": 52277286, "question_id": 52276989, "link": "https://stackoverflow.com/questions/52276989/using-structure-as-buffer-holder/52277286#52277286", "title": "Using structure as buffer holder", "body": "<p>Don't try to store GPU-side pointer values across kernel boundaries. They are not guaranteed to stay the same. Always use indices. And if a kernel uses a specific buffer, you need to pass it as an argument to that kernel.</p>\n\n<p>References:</p>\n\n<ol>\n<li>The OpenCL 1.2 specification (as far as I'm aware, nvidia does not implement a newer standard) does not define the behaviour of pointer-to-integer casts or vice versa.</li>\n<li>Section 6.9p states: <strong>\"Arguments to kernel functions that are declared to be a struct or union do not allow OpenCL objects to be passed as elements of the struct or union.\"</strong> This is exactly what you are attempting to do: passing a struct of buffers to a kernel.</li>\n<li>Section 6.9a states: <strong>\"Arguments to kernel functions in a program cannot be declared as a pointer to a pointer(s).\"</strong> - This is essentially what you're trying to subvert by casting your pointers to an integer and back. (point 1) You can't \"trick\" OpenCL into this being well-defined by bypassing the type system.</li>\n</ol>\n\n<p>As I suggest in the comment thread below, you will need to use indices to save positions inside a buffer object. If you want to store positions across different memory regions, you'll need to either unify multiple buffers into one and save one index into this giant buffer, or save a numeric value that identifies which buffer you are referring to.</p>\n"}], "owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 52277286, "answer_count": 1, "score": 0, "last_activity_date": 1536683922, "creation_date": 1536672251, "last_edit_date": 1536683922, "question_id": 52276989, "link": "https://stackoverflow.com/questions/52276989/using-structure-as-buffer-holder", "title": "Using structure as buffer holder", "body": "<p>In my current OpenCL implementation, I wanted to save time with arguments, avoid to pass them every time I wanted to use a buffer inside a kernel and have a shorter argument list for my kernel. </p>\n\n<p>So I made a structure (workspace) that holds the pointer to the buffer in device memory, the struct act like an object with member variable you want to access through time and you want to stay alive for the whole execution. I never had a problem on AMD GPU or even on CPU. But Nvidia causing a lot of problems with this. It always seems to be an alignment problem, never reaching to right buffer, etc. </p>\n\n<p>Here some code to help, see question below:</p>\n\n<p>The structure define on host:</p>\n\n<pre><code> #define SRC_IMG 0       // (float4 buffer) Source image\n #define LAB_IMG 1       // (float4 buffer) LAB image\n\n // NOTE: The size of this array should be as much as the last define + 1.\n #define __WRKSPC_SIZE__ 2 \n\n // Structure defined on host.\n struct Workspace\n {\n      cl_ulong getPtr[__WRKSPC_SIZE__];\n };\n\n struct HostWorkspace\n {\n      cl::Buffer srcImg;\n      cl::Buffer labImg;\n };\n</code></pre>\n\n<p>The structure defined on device:</p>\n\n<pre><code>typedef struct __attribute__(( packed )) gpuWorkspace\n{\n    ulong getPtr[__WRKSPC_SIZE__]; \n} gpuWorkspace_t; \n</code></pre>\n\n<p>Note that on device, I use ulong and on host I use cl_ulong as shown here <a href=\"https://stackoverflow.com/questions/33119233/opencl-using-struct-as-kernel-argument\">OpenCL: using struct as kernel argument</a>.</p>\n\n<p>So once cl::Buffer for source image or LAB image are created, I save them into a HostWorkspace object, so until that object is released, the reference to cl::Buffer is kept, so buffer exists for the entire project on the host, and defacto on the device.</p>\n\n<p>Now, I need to feed those the device, so I have a simple kernel which init my device workspace as follow:</p>\n\n<pre><code>__kernel void Workspace_Init(__global gpuWorkspace_t* wrkspc,\n                             __global float4* src,\n                             __global float4* LAB)\n{\n    // Get the ulong pointer on the first element of each buffer.\n    wrkspc-&gt;getPtr[SRC_IMG] = &amp;src[0];\n    wrkspc-&gt;getPtr[LAB_IMG] = &amp;LAB[0];\n}\n</code></pre>\n\n<p>where wrkspc is a buffer allocated with <code>struct Workspace</code>, and src + LAB are just buffer allocate as 1D array images.</p>\n\n<p>And afterwards, in any of my kernel, if I want to use src or LAB, I do as follow:</p>\n\n<pre><code>__kernel void ComputeLABFromSrc(__global gpuWorkspace_t* wrkSpc)\n{\n    // =============================================================\n    // Get pointer from work space.\n    // =============================================================\n\n    // Cast back the pointer of first element as a normal buffer you\n    // want to use along the execution of the kernel.\n    __global float4* srcData = ( __global float4* )( wrkSpc-&gt;getPtr[SRC_IMG] );\n    __global float4* labData = ( __global float4* )( wrkSpc-&gt;getPtr[LAB_IMG] );\n\n    // Code kernel as usual.\n}\n</code></pre>\n\n<p>When I started to use this, I had like 4-5 images which was going well, with a different structure like this:</p>\n\n<pre><code>struct Workspace\n{\n    cl_ulong imgPtr;\n    cl_ulong labPtr;\n};\n</code></pre>\n\n<p>where each image had there own pointer. </p>\n\n<p>At a certain point I reach more images, and I had some problem. So I search online, and I found some recommendation that the sizeof() the struct could be different in-between device/host, so I change it to a single array of the same time, and this works fine until 16 elements. </p>\n\n<p>So I search more, and I found a recommendation about the <strong>attribute</strong>((packed)), which I put on the device structure (see above). But now, I reach 26 elements, when I check the sizeof the struct either on device or on host, the size is 208 (elements * sizeof(cl_ulong) == 26 * 8). But I still have a similar issue to my previous model, my pointer goes read somewhere else in the middle of the previous image, etc.</p>\n\n<p>So I have wondering, if anyone ever try a similar model (maybe with a different approach) or have any tips to have a \"solid\" model with this.</p>\n\n<p>Note that all kernel are well coded, I have a good result when executing on AMD or on CPU with the same code. The only issue is on Nvidia. </p>\n"}, {"tags": ["c", "string", "while-loop", "char", "int"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536671447, "post_id": 52276687, "comment_id": 91501138, "body": "Is your question \u201cWhat is the sum of the number of digits in the decimal numerals for all integers from 0 to <i>n</i>?\u201d"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1536671458, "post_id": 52276687, "comment_id": 91501153, "body": "could you not take an upper bound for the total size ? You will allocate too much memory that way, but it&#39;s a lot easier."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536671550, "post_id": 52276687, "comment_id": 91501211, "body": "Why does your question say you start with <code>int i = 0;</code> but your code starts with <code>i = 1</code>? Which is correct?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1536671575, "post_id": 52276687, "comment_id": 91501229, "body": "You need <code>(10 - 1) * 1 + (21 - 10) * 2 + 1</code> characters to fit all digits. <code>(10 - 1) * 1</code> for the range <code>1</code> to <code>9</code>, <code>(21 - 10) * 2</code> for the range <code>10</code> to <code>20</code>, and then <code>1</code> extra for the terminator. It shouldn&#39;t be to hard to find a pattern"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1536671735, "post_id": 52276687, "comment_id": 91501358, "body": "You could use <a href=\"http://man7.org/linux/man-pages/man3/asprintf.3.html\" rel=\"nofollow noreferrer\"><code>asprintf</code></a> which is not ISO-C, but GNU-C"}, {"owner": {"reputation": 57, "user_id": 9566728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1ec457853fedca4028341997edf3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Shan", "link": "https://stackoverflow.com/users/9566728/paul-shan"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536671840, "post_id": 52276687, "comment_id": 91501443, "body": "@EricPostpischil I think that&#39;s what I am asking. I just want to know how many characters are between 1 to n, if I counted from 1 all the way to n. I also fixed the <code>int = 0</code> typo."}, {"owner": {"reputation": 57, "user_id": 9566728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1ec457853fedca4028341997edf3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Shan", "link": "https://stackoverflow.com/users/9566728/paul-shan"}, "reply_to_user": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1536671857, "post_id": 52276687, "comment_id": 91501455, "body": "@SanderDeDycker Yea I could, but I want to be efficient, plus I don&#39;t know what the max number will be."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1536672023, "post_id": 52276687, "comment_id": 91501583, "body": "@PaulShan : technically you want to be efficient with your memory usage, but that&#39;ll come at the cost of cpu usage (to pre-calculate the size). Also, if being efficient with memory usage is the goal, do you really need to have that entire string in memory ?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1536672220, "post_id": 52276687, "comment_id": 91501718, "body": "@PaulShan : an easy upper bound could be the amount of characters of the maximum value (ie. <code>2</code> characters for the value <code>20</code> in your example), multiplied by the amount of values (ie. also <code>20</code> in your example), giving you a 40 character upper bound, which is not too far off the actual length of 31."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536672767, "post_id": 52276687, "comment_id": 91502076, "body": "One simple possibility: sprintf to a local array large enough for even the biggest number, count the number of characters in this array (using <code>strlen</code>), reserve that number of bytes + 1of memory with <code>malloc</code>, copy from the local array to the allocated memory (using <code>strcpy</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536682719, "post_id": 52276687, "comment_id": 91508486, "body": "@Jabberwocky Rather than use <code>strlen()</code> to count the characters, use the prior <code>sprintf()</code> return value.  Yet at least 2 answers below provide an efficient  total, possibly  faster than even 1 call of <code>sprintf()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536678872, "post_id": 52277232, "comment_id": 91506205, "body": "Better, yet still infinite loop with <code>digits(MAX)</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536678989, "post_id": 52277232, "comment_id": 91506287, "body": "@chux. On your second point, oops. On your first one, needs a bit of thought. I&#39;ll have a think when I&#39;m on the choo choo on my way home, unless you have something up your sleeve in which case ping me and I&#39;ll wiki the answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536680280, "post_id": 52277232, "comment_id": 91507112, "body": "1) To prevent infinite loop, can&#39;t use <code>i_same_type_n &lt;= n</code>. 2) Since the range of <code>digits(x)</code> is wider than domain <code>x</code>, we are left with OF possibilities staying with one type. When some type exists much wider than <code>int&#47;unsigned</code>, code could use wider types. e.g. <code>digits(unsigned n) ... uintmax_t total, i</code>. Since OP talks of allocation, <code>size_t</code> is the widest type <i>needed</i>.  The simplicity of this code is sweet even if some corners are cracked."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536680736, "post_id": 52277232, "comment_id": 91507407, "body": "@chux: Good points made indeed. I&#39;m thinking in terms of a closed-form approximation for the highest possible value of <code>n</code>."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1536740068, "last_edit_date": 1536740068, "creation_date": 1536672993, "answer_id": 52277232, "question_id": 52276687, "link": "https://stackoverflow.com/questions/52276687/how-can-i-figure-out-how-many-characters-are-in-a-number/52277232#52277232", "title": "How can I figure out how many characters are in a number?", "body": "<p>To count the number of digits that are written if you write out the numbers from 1 to n, use something like</p>\n\n<pre><code>unsigned long digits(unsigned long n) \n{ \n    unsigned long total = 0;  \n    for (unsigned long i = 1; i &lt;= n; i *= 10){\n        total += (1 + n - i); \n    }\n    return total;  \n} \n</code></pre>\n\n<p>For example, <code>n</code> being <code>11</code> produces <code>1234567891011</code> which has 13 digits.</p>\n\n<p>The algorithm suffers from a defect in that it can loop on a sufficiently large <code>n</code>, and the cutoff is contingent on the range of <code>unsigned long</code> on your platform. Constraining <code>n</code> to be no larger than <code>ULONG_MAX / 10 - 1</code> would be sufficient.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1536673215, "post_id": 52277235, "comment_id": 91502381, "body": "Sorry, I stole your thunder and wrote out the algorithm instead. Your answer + my answer = perfect answer. Have an upvote!"}, {"owner": {"reputation": 810, "user_id": 5258200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f7c82634650754944e0a5bd1e361f9?s=128&d=identicon&r=PG&f=1", "display_name": "Manish Dash", "link": "https://stackoverflow.com/users/5258200/manish-dash"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536673879, "post_id": 52277235, "comment_id": 91502905, "body": "nice timing :) I had a feeling that I spent too much time formatting the answer. A code would be much faster :D"}], "tags": [], "owner": {"reputation": 810, "user_id": 5258200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f7c82634650754944e0a5bd1e361f9?s=128&d=identicon&r=PG&f=1", "display_name": "Manish Dash", "link": "https://stackoverflow.com/users/5258200/manish-dash"}, "is_accepted": false, "score": 2, "last_activity_date": 1536672998, "creation_date": 1536672998, "answer_id": 52277235, "question_id": 52276687, "link": "https://stackoverflow.com/questions/52276687/how-can-i-figure-out-how-many-characters-are-in-a-number/52277235#52277235", "title": "How can I figure out how many characters are in a number?", "body": "<p>This is more of a puzzle question. You want to store the sequence of numbers from 1 to some number <strong>x</strong> in string, so need the total of all the characters.\nFor example, let x=77867. So x is a 5 character long number. This can be found out using the loop as given by <strong>user10334659</strong>. </p>\n\n<p>The first thing to notice is that the numbers from 1 to upto 4 digits are basically filled and do not depend on value of <strong>x</strong>. So we can first calculate the number of characters for these numbers.</p>\n\n<ol>\n<li>1-9 : single digits. #numbers = 9 .  => characters = 9 x 1</li>\n<li>10-99 : 2 char.      #numbers = 90.  => characters = 90 x 2</li>\n<li>100-999 : 3 char.    # numbers = 900. => characters = 900 x 3</li>\n<li>1000-9999 : 4 char.  # numbers = 9000. => characters = 9000 x 4</li>\n</ol>\n\n<p>So the total characters for all numbers from 1 to maximum <strong>y</strong>-digit number is:</p>\n\n<p><code>9 ( 10^0 x 1  +  10^1 x 2 + ... + 10^(y-1) x y )</code></p>\n\n<p>Now we just need to count the total numbers from <code>10^(y)</code> to <strong>x</strong>(which is a (y+1)- digit number). For our case, 10000 - 77867 : #numbers = 67688   => characters = 67688x5.</p>\n\n<p><strong>Time Complexity</strong></p>\n\n<p>Let the maximum number be n. Then <strong>y+1</strong> can be calculated in <strong>O(log(n))</strong> time. Finding the characters from 1 to <strong>y</strong>-digit number also takes <strong>O(log(n))</strong> time. Lastly, number of characters from 10^<strong>y</strong> to n was found in <strong>O(1)</strong> time.</p>\n\n<p>So this algorithm can find the total number of characters in <strong>O(log(n))</strong>  time as opposed to the naive O(n) time loop.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536673361, "post_id": 52277310, "comment_id": 91502485, "body": "Yup, upped. Out of interest, why did you go for <code>&#47;=10</code> rather than the multiplication?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1536673440, "post_id": 52277310, "comment_id": 91502543, "body": "@Bathsheba: Mostly just because <code>&#47;10</code> was in my head first, but also <code>*10</code> has a risk of overflowing. On the other hand, <code>Digits * (n+1)</code> can also overflow before <code>- LeadingDigits</code> reduces it. So, in either case, an ideal solution requires a bit more tinkering. Although <code>*10</code> is going to overflow only long after the total number of digits overflows anyway. But at least <code>&#47;10</code> stops before overflowing the later calculation, whereas <code>*10</code> could loop forever."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1536678576, "post_id": 52277310, "comment_id": 91506007, "body": "1) Curious, why <code>0 &lt; t</code> vs. <code>t &gt; 0</code>?  The later, IMO, is clearer. 2) <code>Digits * (n+1) - LeadingZeros</code> can simply use wider math - perhaps <code>n+1ull</code>, when available, to prevent overflow.  3) Good and efficient code answer.  O(ln(n))."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1536692160, "post_id": 52277310, "comment_id": 91513172, "body": "@chux: I adopted a practice of always using <code>&lt;</code> or <code>&lt;=</code> in the absence of good reason to do it the other way. It is not a big deal; it is just a consistent pattern that helps me keep complicated compound conditions and loops untangled. I also prefer half-open intervals such as [0, n), which also means <code>i &lt; n</code> is preferred to <code>i &lt;= n-1</code>. Half-open intervals have some nice properties, such as [0, 2n) is a doubling of [0, n), while [0, 2n] is not a doubling of [0, n]."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1536740313, "post_id": 52277310, "comment_id": 91528889, "body": "@EricPostpischil: Yes, that&#39;s very refined indeed. In C++, &quot;&lt;&quot; is, in a sense, more fundamental than the other relational operators. The C++ standard library uses solely &quot;&lt;&quot; to define ordering. And of course all the other relational operators can be defined in terms of &quot;&lt;&quot; and the logical operators."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1536673222, "creation_date": 1536673222, "answer_id": 52277310, "question_id": 52276687, "link": "https://stackoverflow.com/questions/52276687/how-can-i-figure-out-how-many-characters-are-in-a-number/52277310#52277310", "title": "How can I figure out how many characters are in a number?", "body": "<p>The following code calculates the total number of digits in the decimal numerals for all integers from 1 to <code>n</code>:</p>\n\n<pre><code>int Digits = 0;\nint LeadingZeros = 0;\nfor (int t = n; 0 &lt; t; t /= 10)\n{\n    ++Digits;\n    LeadingZeros = 10*LeadingZeros + 1;\n}\n\nint TotalDigits = Digits * (n+1) - LeadingZeros;\n</code></pre>\n\n<p>Reasoning: The loop calculates the number of digits in <code>n</code>, putting this number in <code>Digits</code>. If we wrote all integers from 0 to <code>n</code> as decimal numerals with <code>Digits</code> digits (using leading zeros, such as \u201c003\u201d), that would use <code>Digits * (n+1)</code> digits. From that, we want to subtract the number of leading zeros. (For zero, we want to subtract all of its zeros, so it has no net effect on our count.)</p>\n\n<p>For <code>n</code> from 1 to 9, there is only one \u201c0\u201d to subtract, the one for 0. For <code>n</code> from 10 to 99, we want to subtract the 9 leading zeros in \u201c01\u201d to \u201c09\u201d, as well as the two zeros in \u201c00\u201d. Thus, for 10 to 99, we subtract the same one leading zero as for <code>n</code> in 1 to 9 but also ten more leading zeros. Similarly, for <code>n</code> from 100 to 999, we subtract those leading zeros plus 100 more\u2014one more for each number from 0 to 99. Ultimately, the number of LeadingZeros is a number 111\u2026111 with the same number of digits as <code>n</code>. We can see the loop calculates this in <code>LeadingZeros</code>, and so the total number of digits used is <code>Digits * (n+1) - LeadingZeros</code>.</p>\n\n<p>When preparing a buffer for these digits, one more character should be included for a terminating null. Additionally, <code>sprintf(my_numbers_as_a_string, \"%d\", i);</code> will write the new number to the start of <code>my_numbers_as_a_string</code>. To concatenate new numbers, provision should be made for writing to the end of the previous numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1536676552, "last_edit_date": 1536676552, "creation_date": 1536676375, "answer_id": 52278332, "question_id": 52276687, "link": "https://stackoverflow.com/questions/52276687/how-can-i-figure-out-how-many-characters-are-in-a-number/52278332#52278332", "title": "How can I figure out how many characters are in a number?", "body": "<p>Just print the number to a string, then count the string length? Or is that too simple?</p>\n\n<pre><code>int numdigits(int n)\n{\n    char buf[64];\n    return(sprintf(buf,\"%d\",n));\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9566728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1ec457853fedca4028341997edf3d4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Shan", "link": "https://stackoverflow.com/users/9566728/paul-shan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1536740068, "creation_date": 1536671261, "last_edit_date": 1536671738, "question_id": 52276687, "link": "https://stackoverflow.com/questions/52276687/how-can-i-figure-out-how-many-characters-are-in-a-number", "title": "How can I figure out how many characters are in a number?", "body": "<p>So the length of:</p>\n\n<p><code>int test1 = 1</code> is 1 character long</p>\n\n<p><code>int test2 = 37</code> is 2 characters long</p>\n\n<p><code>int test3 = 82342</code> is 5 characters long.</p>\n\n<hr>\n\n<p>I can find the character length of these int's using:</p>\n\n<p><code>int character_len = floor(log10(abs(whatever_vairable_here))) + 1;</code></p>\n\n<hr>\n\n<p>I want to count <code>int i = 1;</code> all the way up to <code>n</code>, but in the example code, I just used <code>20</code>). Is there a way where I can figure out the total number of characters I will use without using the first while loop to determine the size I have to malloc. I'm trying to figure out how much space I should <code>malloc</code> </p>\n\n<pre><code>int total_characters_needed = 0;\nint i = 1;\nwhile (i &lt;= 20) {\n    total_characters_needed += floor(log10(abs(i))) + 1;`\n    i++;\n}\n\nchar *my_numbers_as_a_string = malloc(sizeof(char) * total_characters_needed);\n\ni = 1;\nwhile (i &lt;= 20) {\n    sprintf(my_numbers_as_a_string, \"%d\", i);\n    i++;\n}\n\nprintf(\"%s\\n\", my_numbers_as_a_string);\n// Should print out:\n// 1234567891011121314151617181920\n//\n// If the above is unread-able its basically\n// 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\n</code></pre>\n"}, {"tags": ["c", "printf", "malloc", "overflow"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1536668886, "post_id": 52275688, "comment_id": 91499366, "body": "You&#39;re returning the address of a local array from <code>bloch_patch()</code>. The underlying array ceases to exist as soon as the function returns."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10223471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216145850894857/picture?type=large", "display_name": "Joshua Michael McAteer", "link": "https://stackoverflow.com/users/10223471/joshua-michael-mcateer"}, "edited": false, "score": 0, "creation_date": 1536671191, "post_id": 52275941, "comment_id": 91500967, "body": "Thank you so much. I&#39;ve been staring at this for days. That makes a lot of sense. Thanks"}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 0, "last_activity_date": 1536669986, "last_edit_date": 1536669986, "creation_date": 1536668915, "answer_id": 52275941, "question_id": 52275688, "link": "https://stackoverflow.com/questions/52275688/c-printf-changing-value-of-variable/52275941#52275941", "title": "C: Printf changing value of variable", "body": "<p>Your <code>bloch_patch</code> function returns a pointer to a local array. That is <a href=\"https://stackoverflow.com/questions/11656532/returning-an-array-using-c\">bad</a>. Once the function ends, that pointer no longer points to valid memory, and should no longer be used. You do however, which leads to <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">undefined behavior</a>. And in your case, that undefined behavior manifests itself as a strange value being printed, and further calculations being meaningless (most likely because the memory that was originally allocated for the array has been re-used, and filled with other data).</p>\n\n<p>Also, you then assign that returned pointer to <code>k1_M</code>, overwriting the pointer to allocated memory it contained. This creates a memory leak.</p>\n"}], "owner": {"reputation": 15, "user_id": 10223471, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216145850894857/picture?type=large", "display_name": "Joshua Michael McAteer", "link": "https://stackoverflow.com/users/10223471/joshua-michael-mcateer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 886, "favorite_count": 0, "closed_date": 1536669528, "answer_count": 1, "score": 2, "last_activity_date": 1546809999, "creation_date": 1536667994, "last_edit_date": 1546809999, "question_id": 52275688, "link": "https://stackoverflow.com/questions/52275688/c-printf-changing-value-of-variable", "closed_reason": "Duplicate", "title": "C: Printf changing value of variable", "body": "<p>I'm writing a Runge-Kutta ODE solver which takes in initial conditions, and 'events' and solves the equation. It starts and stops at these events to form 'patches'. These 'patches' are then put into an array which is saved. </p>\n\n<p>The programme worked fine when it was evaluated for a large number of steps, however, when it was evaluated for a small number of steps it gave strange results, which would change in value between evaluations of the programme, sometimes being extremely large (~e200) or extremely small (~e-200).</p>\n\n<p>I tried to probe the issue with printf statements, and it seems that the value of the variables changes on calling the print statement. </p>\n\n<pre><code>printf(\"after solution K1_M[0] = %e,K1_M[1] = %e,K1_M[2] = %e\\n\",k1_M[0],k1_M[1],k1_M[2]);//This is fine\n\nprintf(\"Going into K2 Mx: %e, My: %e, Mz: %e\\n\",M_f[0],M_f[1],M_f[2]);// This is fine\nprintf(\"What is happening to this division? k1_M[0] = %e, 1/6.0 = %e, k1_M[0]/6.0 = %e\\n\",k1_M[0],1/6.0,k1_M[0]/6.0);\n\nint hh = 1,hhh=3;\nhhh = hh + hhh;\nprintf(\"Print statement to make sure other statements exicute in order %d\\n\",hhh);\n\nM_f[0] = M_inf[1] + k1_M[0]/(double)(6.0);//This is not fine\nprintf(\"What is happening to this division? k1_M[0] = %e, 1/6.0 = %e, k1_M[0]/6.0 = %e\\n\",k1_M[0],1/6.0,k1_M[0]/6.0); \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/h6vXF.png\" rel=\"nofollow noreferrer\">Example of the execution of the code and issue present</a></p>\n\n<p><code>k1_M[0]</code> has memory allocated to it just before this quotation. </p>\n\n<p>I've used malloc a lot when parsing arrays into the functions, and I think that this is probably where the error occurs. I was initially trying to minimise the calls to malloc, as I understand that it is quite slow, so I was parsing the pointers to the function, however, I have now swapped to declaring as much as possible in the function (which is why some things are declared twice, but only one should be in scope) for debugging. </p>\n\n<p>I thought that it could be something to do with the typecasting of 6.0, and that it might be dividing by zero, but that can't be it as the output is sometimes very small too. The fact that it is inconstant seems to go with my idea of it being some kind of memory leakage issue. I tried to debug it with gdb but I couldn't get it to run on my computer. </p>\n\n<p>I was compiling with gcc 8.2, on a mac running OS 10.13.6</p>\n\n<p>If anyone has any ideas what might be wrong I'd be extremely grateful. I don't know if other people have had similar problems, I couldn't find any other questions with the same issue, but then I didn't know exactly what to look for. Thanks very much.</p>\n\n<p>All of the code is quoted here: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n//#include \"plcdemos.h\"\n//#include &lt;unistd.h&gt;\n//#include &lt;string.h&gt;\n\ndouble vec_max(double *vec, int length){//find maximum value in a double vector of length length\n    double max_so_far = vec[0];\n    for(int i = 1;i&lt;length;i++){\n        if(vec[i] &gt; max_so_far){\n            max_so_far = vec[i];\n        }\n    }\n    return max_so_far;\n}\n\ndouble *bloch_patch(double t, double M[3], double Amplitude_RF, double gyro, double T_1, double T_2, double M_0, double B_z,int pulse_on){\n//(M_inf[0],M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on)\n    double B_x = 0.0;\n\n    double w_l = B_z*gyro;\n    double w = w_l;\n    double w_1 = 0.0;\n    double dM[3] = {0.0,0.0,0.0};\n    double (*dM_pointer);// malloc(3*sizeof(double));\n    dM_pointer = (double*) malloc(3*sizeof(double));\n\n    if(pulse_on == 1)\n        B_x = Amplitude_RF;\n\n    //printf(\"Value of B_x in function is %e\\n\",B_x);\n    w_1 = gyro*B_x;\n    //w_l = B_z*gyro;\n    //ODE\n    //printf(\"Mx: %e, My: %e, Mz: %e\\n\",M[0],M[1],M[2]);\n\n    //printf(\"dM[1] First term is: %e\\n\",(w_l - w)*M[1]);\n    //printf(\"dM[1] Second term is: %e\\n\",- M[0]/T_2);\n\n    //printf(\"dM[2] First term is: %e\\n\",-(w_l - w)*M[0]);\n    //printf(\"dM[2] Second term is: %e\\n\",w_1*M[2]);\n    //printf(\"dM[2] Third term is: %e\\n\",- M[1]/T_2);\n\n    //actual ODE\n    dM[0] = (w_l - w)*M[1] - M[0]/T_2; \n    dM[1] = -(w_l - w)*M[0] + w_1*M[2] - M[1]/T_2;\n    dM[2] = -w_1*M[1] - (M[2] - M_0)/T_1;\n\n    //printf(\"dM values are: %e, %e, %e\\n\",dM[0],dM[1],dM[2]); \n\n    //end of ODE\n\n        //http://www.mmrrcc.upenn.edu/mediawiki/images/d/d1/Bloch.pdf\n    //printf(\"words %lf\\n\",dM[0]);\n    dM_pointer = dM;\n    return dM_pointer;\n    //return dM[0];\n}\n\n\ndouble *JVerner_step(double actual_dt,double *a,double *b,double *c,double *d,double *e,double *f,double *g, double M_inf[4],double Amplitude_RF,double gyro,double T_1,double T_2,double M_0,double B_z,int pulse_on){\n//double *JVerner_step(double actual_dt,double *k1_M,double *k2_M,double *k3_M,double *k4_M,double *k5_M,double *k7_M,double *k8_M, double M_inf[4],double Amplitude_RF,double gyro,double T_1,double T_2,double M_0,double B_z,int pulse_on){\n    //printf(\"Jstep6\\n\");\n    double *M_out;\n    M_out = (double*)malloc(3*sizeof(double));\n    double M_f[3] = {0.0,0.0,0.0};\n\n\n    //was previously parsing kn_Ms into function. Where a-g are passed in. a-g do nothing.\n    double *k1_M,*k2_M,*k3_M,*k4_M,*k5_M,*k7_M,*k8_M;\n\n\n    k1_M = (double*)malloc(3 * sizeof(double));         //Try: does allocating the memory in the function make it work?\n    k2_M = (double*)malloc(3 * sizeof(double));         //It doens't fix it, but it doesn't make it less clear either\n    k3_M = (double*)malloc(3* sizeof(double));\n    k4_M = (double*)malloc(3 * sizeof(double));\n    k5_M = (double*)malloc(3* sizeof(double));\n    //k6_M not needed\n    k7_M = (double*)malloc(3 * sizeof(double));\n    k8_M = (double*)malloc(3 * sizeof(double));\n\n\n    for(int j = 0;j&lt;3;j++){\n        k1_M[j] = 0.0;//force set to be zero\n        k2_M[j] = 0.0;// not using these \n        k3_M[j] = 0.0;\n        k4_M[j] = 0.0;\n        k5_M[j] = 0.0;\n\n        k7_M[j] = 0.0;\n        k8_M[j] = 0.0;\n\n    }\n\n\n    printf(\"Actual_dt: %e\\n\",actual_dt);\n    printf(\"Mx %e, My %e, Mz %e\\n\",M_inf[1],M_inf[2],M_inf[3]);\n    //M_inf[0] = M_t[2*i + 1];//time\n    //M_inf[1] = M_t[2*i + 2];//space\n    printf(\"before solution K1_y = %e\\n\",k1_M[1]);\n    M_f[0] = M_inf[1];\n    M_f[1] = M_inf[2];\n    M_f[2] = M_inf[3];\n    k1_M = bloch_patch(M_inf[0],M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on); \n    k1_M[0] = k1_M[0]*actual_dt;//done\n    k1_M[1] = k1_M[1]*actual_dt;\n    k1_M[2] = k1_M[2]*actual_dt;\n\n\n    printf(\"after solution K1_M[0] = %e,K1_M[1] = %e,K1_M[2] = %e\\n\",k1_M[0],k1_M[1],k1_M[2]);//This is fine\n\n    printf(\"Going into K2 Mx: %e, My: %e, Mz: %e\\n\",M_f[0],M_f[1],M_f[2]);// This is fine\n    printf(\"What is happening to this division? k1_M[0] = %e, 1/6.0 = %e, k1_M[0]/6.0 = %e\\n\",k1_M[0],1/6.0,k1_M[0]/6.0);\n\n    int hh = 1,hhh=3;\n    hhh = hh + hhh;\n    printf(\"Print statement to make sure other statements exicute in order %d\\n\",hhh);\n\n    M_f[0] = M_inf[1] + k1_M[0]/(double)(6.0);//This is not fine\n    printf(\"What is happening to this division? k1_M[0] = %e, 1/6.0 = %e, k1_M[0]/6.0 = %e\\n\",k1_M[0],1/6.0,k1_M[0]/6.0);\n\n    M_f[1] = M_inf[2] + k1_M[1]/(double)(6.0);\n    M_f[2] = M_inf[3] + k1_M[2]/(double)(6.0);\n    printf(\"Going into K2 Mx: %e, My: %e, Mz: %e\\n\",M_f[0],M_f[1],M_f[2]);\n    k2_M = bloch_patch(M_inf[0]+(actual_dt/6.0),M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k2_M[0] = k2_M[0]*actual_dt;//done\n    k2_M[1] = k2_M[1]*actual_dt;\n    k2_M[2] = k2_M[2]*actual_dt;\n\n    printf(\"K2_y = %e\\n\",k2_M[1]);\n\n    M_f[0] = M_inf[1] + (4.0*k1_M[0] + 16.0*k2_M[0])/75.0;\n    M_f[1] = M_inf[2] + (4.0*k1_M[1] + 16.0*k2_M[1])/75.0;\n    M_f[2] = M_inf[3] + (4.0*k1_M[2] + 16.0*k2_M[2])/75.0;\n    k3_M = bloch_patch(M_inf[0]+(actual_dt*4.0/15.0),M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k3_M[0] = k3_M[0]*actual_dt;//done\n    k3_M[1] = k3_M[1]*actual_dt;// coeffs equal to 0.266666666666667\n    k3_M[2] = k3_M[2]*actual_dt;\n\n    printf(\"K3_y = %e\\n\",k3_M[1]);\n\n    M_f[0] = M_inf[1] + (5.0*k1_M[0]/6.0 - 8.0*k2_M[0]/3.0 + 5.0*k3_M[0]/2.0);\n    M_f[1] = M_inf[2] + (5.0*k1_M[1]/6.0 - 8.0*k2_M[1]/3.0 + 5.0*k3_M[1]/2.0);\n    M_f[2] = M_inf[3] + (5.0*k1_M[2]/6.0 - 8.0*k2_M[2]/3.0 + 5.0*k3_M[2]/2.0);\n    k4_M = bloch_patch(M_inf[0]+(actual_dt*2.0/3.0),M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k4_M[0] = k4_M[0]*actual_dt;//done\n    k4_M[1] = k4_M[1]*actual_dt;//coeffs equal to 0.666666666666667\n    k4_M[2] = k4_M[2]*actual_dt;\n\n    printf(\"K4_y = %e\\n\",k4_M[1]);\n\n    M_f[0] = M_inf[1] + (-165.0*k1_M[0]/64.0 + 55.0*k2_M[0]/6.0 - 425.0*k3_M[0]/64.0 + 85.0*k4_M[0]/96.0);\n    M_f[1] = M_inf[2] + (-165.0*k1_M[1]/64.0 + 55.0*k2_M[1]/6.0 - 425.0*k3_M[1]/64.0 + 85.0*k4_M[1]/96.0);\n    M_f[2] = M_inf[3] + (-165.0*k1_M[2]/64.0 + 55.0*k2_M[2]/6.0 - 425.0*k3_M[2]/64.0 + 85.0*k4_M[2]/96.0);\n    k5_M = bloch_patch(M_inf[0]+actual_dt*5.0/6.0,M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k5_M[0] = k5_M[0]*actual_dt;//done\n    k5_M[1] = k5_M[1]*actual_dt;//coeffs equal to 0.833333333333333\n    k5_M[2] = k5_M[2]*actual_dt;\n    printf(\"K5_y = %e\\n\",k5_M[1]);\n    //no need for k6\n    M_f[0] = M_inf[1] + (-8263.0*k1_M[0]/15000.0 + 124.0*k2_M[0]/75.0 - 643.0*k3_M[0]/680.0 - 81.0*k4_M[0]/250.0 + 2484.0*k5_M[0]/10625.0);\n    M_f[1] = M_inf[2] + (-8263.0*k1_M[1]/15000.0 + 124.0*k2_M[1]/75.0 - 643.0*k3_M[1]/680.0 - 81.0*k4_M[1]/250.0 + 2484.0*k5_M[1]/10625.0);\n    M_f[2] = M_inf[3] + (-8263.0*k1_M[2]/15000.0 + 124.0*k2_M[2]/75.0 - 643.0*k3_M[2]/680.0 - 81.0*k4_M[2]/250.0 + 2484.0*k5_M[2]/10625.0);\n    k7_M = bloch_patch(M_inf[0]+(actual_dt/15.0),M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k7_M[0] = k7_M[0]*actual_dt; //coeffs equal to 0.066666666666667\n    k7_M[1] = k7_M[1]*actual_dt;\n    k7_M[2] = k7_M[2]*actual_dt;\n    printf(\"K7_y = %e\\n\",k7_M[1]);\n\n    M_f[0] = M_inf[1] + (3501.0*k1_M[0]/1720.0 - 300.0*k2_M[0]/43.0 + 297275.0*k3_M[0]/52632.0 - 319.0*k4_M[0]/2322.0 + 24068.0*k5_M[0]/84065.0 + 3850.0*k7_M[0]/26703.0);\n    M_f[1] = M_inf[2] + (3501.0*k1_M[1]/1720.0 - 300.0*k2_M[1]/43.0 + 297275.0*k3_M[1]/52632.0 - 319.0*k4_M[1]/2322.0 + 24068.0*k5_M[1]/84065.0 + 3850.0*k7_M[1]/26703.0);\n    M_f[2] = M_inf[3] + (3501.0*k1_M[2]/1720.0 - 300.0*k2_M[2]/43.0 + 297275.0*k3_M[2]/52632.0 - 319.0*k4_M[2]/2322.0 + 24068.0*k5_M[2]/84065.0 + 3850.0*k7_M[2]/26703.0);\n    //M_f[0] = M_inf[1] + (3501.0*k1_M[0]/1720.0 - 300.0*k2_M[0]/43.0 + 297275.0*k3_M[0]/52632.0 - 319.0*k4_M[0]/2322.0 + 24068.0*k5_M[0]/84065.0 + k7_M[0]*0.144178556716475);\n    //M_f[1] = M_inf[2] + (3501.0*k1_M[1]/1720.0 - 300.0*k2_M[1]/43.0 + 297275.0*k3_M[1]/52632.0 - 319.0*k4_M[1]/2322.0 + 24068.0*k5_M[1]/84065.0 + k7_M[1]*0.144178556716475);\n    //M_f[2] = M_inf[3] + (3501.0*k1_M[2]/1720.0 - 300.0*k2_M[2]/43.0 + 297275.0*k3_M[2]/52632.0 - 319.0*k4_M[2]/2322.0 + 24068.0*k5_M[2]/84065.0 + k7_M[2]*0.144178556716475);\n    k8_M = bloch_patch(M_inf[0]+(actual_dt),M_f,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n    k8_M[0] = k8_M[0]*actual_dt;// coeffs equal to 1.000 000 000 000 001 = 1 + 1e-15 \n    k8_M[1] = k8_M[1]*actual_dt;\n    k8_M[2] = k8_M[2]*actual_dt;//0.144178556716475\n    printf(\"K8_y = %e\\n\",k8_M[1]);\n    // sixth order inc\n    M_out[0] = (3.0*k1_M[0]/40.0 + 875.0*k3_M[0]/2244.0 + 23.0*k4_M[0]/72.0 + 264.0*k5_M[0]/1955.0 + 125.0*k7_M[0]/11592.0 + 43.0*k8_M[0]/616.0);\n    M_out[1] = (3.0*k1_M[1]/40.0 + 875.0*k3_M[1]/2244.0 + 23.0*k4_M[1]/72.0 + 264.0*k5_M[1]/1955.0 + 125.0*k7_M[1]/11592.0 + 43.0*k8_M[1]/616.0);\n    M_out[2] = (3.0*k1_M[2]/40.0 + 875.0*k3_M[2]/2244.0 + 23.0*k4_M[2]/72.0 + 264.0*k5_M[2]/1955.0 + 125.0*k7_M[2]/11592.0 + 43.0*k8_M[2]/616.0);\n    printf(\"M_y = %e\\n\",M_out[1]);\n    // coeffs equal to 1.0 to machine precision\n    return M_out;\n}\n\n\n\ndouble *JsolveVernerPatch(double t,double t_start,double t_end, int n, double M_in[3],double Amplitude_RF, double gyro, double T_1, double T_2, double M_0, double B_z,int pulse_on){\n    //takes parameters of the function to be solved as well as the start point, the end point, and the regular stepsize\n    double actual_dt = (t_end-t_start)/(double)n;\n    printf(\"Actual_dt: %e\\n\",actual_dt);\n    double M_inf[4];//first for time, then three for mx my mz\n    double *k1_M,*k2_M,*k3_M,*k4_M,*k5_M,*k7_M,*k8_M; //k values in solver\n    double *F_out; //solution out\n    double *M_t;\n\n    M_t = (double*)malloc((4*(n+1)) * sizeof(double)); //vector will store points, t and M\n\n    //These are not currently used, how allocating inside of '_step' function\n    k1_M = (double*)malloc(3 * sizeof(double));         // allocation of memeory for k solver values I don't know \n    k2_M = (double*)malloc(3 * sizeof(double));         // if this is faster, but it seems like a sort of sensible thing\n    k3_M = (double*)malloc(3 * sizeof(double));\n    k4_M = (double*)malloc(3 * sizeof(double));\n    k5_M = (double*)malloc(3 * sizeof(double));\n    //k6_M not needed\n    k7_M = (double*)malloc(3 * sizeof(double));\n    k8_M = (double*)malloc(3 * sizeof(double));\n    F_out = (double*)malloc(3 * sizeof(double));\n\n\n\n    M_t[0] = t_start;\n    M_t[1] = M_in[0];\n    M_t[2] = M_in[1];\n    M_t[3] = M_in[2];\n\n\n    for(int i = 0;i&lt;n;i++){\n\n        M_inf[0] = M_t[4*i + 0]; //time\n        M_inf[1] = M_t[4*i + 1]; //space\n        M_inf[2] = M_t[4*i + 2]; //space\n        M_inf[3] = M_t[4*i + 3]; //space\n        printf(\"Going into function: t: %e,Mx: %e,My: %e,Mz: %e\\n\",M_inf[0],M_inf[1],M_inf[2],M_inf[3]);\n\n        for(int j = 0;j&lt;3;j++){\n            k1_M[j] = 0.0;//force set to be zero\n            k2_M[j] = 0.0;// not using these \n            k3_M[j] = 0.0;\n            k4_M[j] = 0.0;\n            k5_M[j] = 0.0;\n\n            k7_M[j] = 0.0;\n            k8_M[j] = 0.0;\n\n        } \n        F_out = JVerner_step(actual_dt,k1_M,k2_M,k3_M,k4_M,k5_M,k7_M,k8_M,M_inf,Amplitude_RF,gyro,T_1,T_2,M_0,B_z,pulse_on);\n\n        M_t[4*(i + 1) + 0] = M_inf[0] + actual_dt;  //time\n        M_t[4*(i + 1) + 1] = M_inf[1] + F_out[0];   //space\n        M_t[4*(i + 1) + 2] = M_inf[2] + F_out[1];   //space\n        M_t[4*(i + 1) + 3] = M_inf[3] + F_out[2];   //space \n\n    }\n    return M_t;\n}\n\n\ndouble *JsolveVernerWhole(double t_start,double t_end, int n, double M_in[3],double Amplitude_RF, double gyro, double T_1, double T_2, double M_0, double B_z,int *pulse_v_pt,double *pulse_t_pt,int length_pulse){\n    //takes parameters of the function to be solved as well as the start point, the end point, and the regular stepsize\n    //double actual_dt = (t_end-t_star)/n;\n\n\n\n    //double *k1_M,*k2_M,*k3_M,*k4_M,*k5_M,*k7_M; //k values in solver\n\n    double *M_t,*M_patch;\n    double t;\n\n\n    int pulse_on = 0;\n    //typical_dt = dt;//pow(dt_min * dt_max,0.5);\n\n    int (*pulse_v);\n    double (*pulse_t);\n\n\n    pulse_v = (int*)malloc((length_pulse+1) * sizeof(int)); //how to get array of unknown length into function\n    pulse_t = (double*)malloc((length_pulse+1) * sizeof(double));\n\n    //pulse sequence\n    printf(\"Pulse length is %d\\n\",length_pulse);\n    for(int i=0;i&lt;length_pulse+1;i++){\n        pulse_v[i] = pulse_v_pt[i]; //might be able to use use the pointers directly and skip this out\n        pulse_t[i] = pulse_t_pt[i];\n        printf(\"Pulse t is %e\\n\",pulse_t[i]);\n        //printf(\"pulse_v[%d] = %e\\n\",i,pulse_v[i]);\n    }\n\n\n\n    M_t = (double*)malloc((4*(n*(length_pulse)) + 4 ) * sizeof(double)); //vector will store points, t and M\n    printf(\"Function Whole M_t allocated size: %d\\n\",(4*(n*(length_pulse)) + 4 ));\n    M_patch = (double*)malloc(4*n* sizeof(double));\n    M_t[0] = t_start;\n    M_t[1] = M_in[0];\n    M_t[2] = M_in[1];\n    M_t[3] = M_in[2];\n    int start_at = 4;\n    printf(\"Time is: %e, Mx is: %e, My is: %e, Mz is: %e\\n\",M_t[0],M_t[1],M_t[2],M_t[3]);\n    for(int i = 0;i&lt;(length_pulse);i++){\n        t = M_t[i*n*4 + 0];\n        //printf(\"Starting patch at t = %e\\n\",t);\n        M_in[0] = M_t[i*n*4 + 1];\n        M_in[1] = M_t[i*n*4 + 2];\n        M_in[2] = M_t[i*n*4 + 3];\n\n        if(length_pulse &gt; 1){\n            for(int i = 0;i&lt;length_pulse;i++){\n                if(t&lt;=pulse_t[i]){\n                    if(pulse_v[i] == 1){\n                        pulse_on = 1;\n                    }\n                break;\n                }   \n            }\n        }//end of pulse sequence\n        printf(\"Tstart at %e, Tend at %e for current patch\\n\",pulse_t[i],pulse_t[i+1]);\n        printf(\"Index value is: %d\\n\",i);\n        M_patch = JsolveVernerPatch(t,pulse_t[i],pulse_t[i+1],n, M_in,Amplitude_RF, gyro, T_1, T_2, M_0, B_z, pulse_on);\n        printf(\"Time is: %e, Mx is: %e, My is: %e\\n\",M_patch[4*0 + 0],M_patch[4*0+ 1],M_patch[4*0 + 2]);\n        for(int j=1;j&lt;n+1;j++){\n            printf(\"Time is: %e, Mx is: %e, My is: %e\\n\",M_patch[4*j + 0],M_patch[4*j + 1],M_patch[4*j + 2]);\n            /*\n            M_t[i*(n-1)*4  +4+ 0 + 4*j] = M_patch[4*j + 0];// time\n            M_t[i*(n-1)*4  +4+ 1 + 4*j] = M_patch[4*j + 1];\n            M_t[i*(n-1)*4  +4+ 2 + 4*j] = M_patch[4*j + 2];\n            M_t[i*(n-1)*4  +4+ 3 + 4*j] = M_patch[4*j + 3];// copy patch into matrix    \n            */\n            M_t[start_at + 0] = M_patch[4*j + 0];// time\n            M_t[start_at + 1] = M_patch[4*j + 1];\n            M_t[start_at + 2] = M_patch[4*j + 2];\n            M_t[start_at + 3] = M_patch[4*j + 3];// copy patch into matrix\n            printf(\"start_at: %d\\n\",start_at);\n            start_at = start_at + 4;\n        }\n\n        //for(int j=1;j&lt;n+1;j++){\n            //printf(\"Time is: %e, Mz is: %e\\n\",M_patch[4*j + 0],M_patch[4*j + 3]);\n            /*\n            M_t[i*(n-1)*4  +4+ 0 + 4*j] = M_patch[4*j + 0];// time\n            M_t[i*(n-1)*4  +4+ 1 + 4*j] = M_patch[4*j + 1];\n            M_t[i*(n-1)*4  +4+ 2 + 4*j] = M_patch[4*j + 2];\n            M_t[i*(n-1)*4  +4+ 3 + 4*j] = M_patch[4*j + 3];// copy patch into matrix    \n            */\n\n        //}\n\n\n    }\n    /*\n    printf(\"Check loop\\n\");\n    for(int j=0;j&lt;n+1;j++){\n        printf(\"Time is: %e, My is: %e\\n\",M_t[4*j + 0],M_t[4*j + 2]);\n\n        M_t[i*(n-1)*4  +4+ 0 + 4*j] = M_patch[4*j + 0];// time\n        M_t[i*(n-1)*4  +4+ 1 + 4*j] = M_patch[4*j + 1];\n        M_t[i*(n-1)*4  +4+ 2 + 4*j] = M_patch[4*j + 2];\n        M_t[i*(n-1)*4  +4+ 3 + 4*j] = M_patch[4*j + 3];// copy patch into matrix    \n\n\n    }\n    */\n\n\n    printf(\"start_at: %d\\n\",start_at);\n    return M_t;\n}\n\n\n\n\n\n\nint main(){\n\n    double Amplitude_RF,B_x,gyro,T_1,T_2,M_0,B_z,pulse_t[3];\n    int length_pulse;\n    int pulse_v[3];\n    double (*M_out);\n    Amplitude_RF = 1.0e-4;B_x = 0.0;gyro = 267.513e6;T_1 = 900e-3;T_2 = 90e-3;M_0 = 1.0;B_z = 3.5;\n\n    double M_in[3] = {0.0,1.0,0.0}; //xyz\n\n    double t_start = 0.0;\n    double t_end = 0.3;\n    int n = 3;\n    length_pulse = 1;\n    pulse_v[0] = 0; pulse_v[1] = 0; pulse_v[2] = 0;// pulse_v[1] = 0.0;\n    pulse_t[0] = t_start; pulse_t[1] = t_end; pulse_t[2] = t_end;\n\n    int *pulse_v_pt ;//= pulse_v;\n    double *pulse_t_pt;// = pulse_t;\n\n    pulse_v_pt = (int*)malloc((length_pulse + 1)*sizeof(int));\n    pulse_t_pt = (double*)malloc((length_pulse + 1)*sizeof(double));\n\n\n    //pulse sequence\n    printf(\"Pulse length is %d\\n\",length_pulse);\n    for(int i=0;i&lt;length_pulse+1;i++){\n        pulse_v_pt[i] = pulse_v[i]; //might be able to use use the pointers directly and skip this out\n        pulse_t_pt[i] = pulse_t[i];\n        printf(\"Pulse t is %e\\n\",pulse_t[i]);\n        //printf(\"pulse_v[%d] = %e\\n\",i,pulse_v[i]);\n    }\n\n    //double tol = 4.6416e-7;\n\n    //double tol = 2.1544e-7;\n\n    //solver_out = Jsolve_RK6(t_start,t_end, dt_guess, M_in,Amplitude_RF, B_x, gyro, T_1, T_2, M_0, B_z,pulse_v,pulse_t, length_pulse);\n    //solver_out = Jsolve46(tol,rel_tol,t_start,t_end, dt_guess,dt_min,dt_max,M_in,Amplitude_RF, B_x, gyro, T_1, T_2, M_0, B_z,pulse_v,pulse_t,length_pulse);\n\n    //solver_out = Jsolve_RK4(t_start,t_end, dt_guess,M_in,a);\n    //M_out = JsolveFehlberg45(tol,1.0,t_start,t_end, dt_in,dt_min,dt_max,M_in,Amplitude_RF, B_x, gyro, T_1, T_2, M_0, B_z,pulse_v,pulse_t,length_pulse);\n    printf(\"Going into function t_start is: %e, coming out of function %e \\n\",t_start,t_end);\n    printf(\"Pulse_t[0] s: %e, pulse_t[1] %e \\n\",pulse_t[0],pulse_t[1]);\n    M_out = JsolveVernerWhole(t_start,t_end, n, M_in,Amplitude_RF, gyro, T_1, T_2, M_0, B_z,pulse_v_pt,pulse_t_pt,length_pulse);\n\n    //int skip = (int)fmax(ceil(1000/M_out[0]),1);\n\n    //double *mx,*my,*mz,*t,*modmy,*modmz,*diff,max_diff;\n    //mx = malloc(((length_pulse-1)*n + 1)  * sizeof(double));\n    //my = malloc(((length_pulse-1)*n + 1)  * sizeof(double));\n    //mz = malloc(((length_pulse-1)*n + 1)  * sizeof(double));\n    //t = malloc(((length_pulse-1)*n + 1) * sizeof(double));\n    //modmy = malloc(((length_pulse-1)*n + 1) * sizeof(double));\n    //modmz = malloc(((length_pulse-1)*n + 1) * sizeof(double));\n    //diff = malloc(((length_pulse-1)*n + 1) * sizeof(double));\n\n\n    //max_diff = 0.0;\n\n\n    printf(\"end point = %d\\n\",((length_pulse)*n+1));\n\n\n\n    //printf(\"does this bit work\\n\");\n    //for(int i=0;i&lt;((length_pulse)*n +1);i++){\n        //printf(\"index %d\\n\",i);\n        //printf(\"%lf %lf %lf %lf\\n\", solver_out[4*i+1],solver_out[4*i +2],solver_out[4*i +3],solver_out[4*i +4]);\n        //fprintf(fp,\"%lf %lf %lf %lf \\n\", M_out[4*i+1],M_out[4*i +2],M_out[4*i+3],M_out[4*i +4]);\n        //printf(\"points = %d\\n\",points);\n        //printf(\"My[%d] = %e\\n\",points,M_out[4*i+2]);\n    //      t[points] = M_out[4*i+0];\n    //      printf(\"Time points %3.16e\\n\",t[points]);\n    //      mx[points] = M_out[4*i+1];  \n    //      my[points] = M_out[4*i+2];\n        //  printf(\"My[%d] = %e\\n\",points,my[points]);\n    //      mz[points] = M_out[4*i+3];\n            //printf(\"t = %e,My data: %e\\n\",t[points],my[points]);\n            //printf(\"Index number is: %d\\n\",i);\n            //modmy[points] = exp(-t[points]/T_2);\n            //modmz[points] = 1-exp(-t[points]/T_1);\n            //diff[points] = fmax(fabs(my[points]-modmy[points]),fabs(mz[points]-modmz[points]));\n            //max_diff = fmax(max_diff,diff[points]);\n    //      points++;\n            //printf(\"Time is: %e My is: %e\\n\",t[points],my[points]);\n\n\n        //fprintf(fp,\"%3.16e %3.16e %3.16e %3.16e \\n\", M_out[4*i+1],M_out[4*i +2],M_out[4*i+3],M_out[4*i +4]);\n        //fprintf(fp,\"the word data\\n\");\n    //}\n\n\n\n    printf(\"Solver_finished\\n\");\n    printf(\"Plotting\\n\");\n    printf(\"total points: %d\\n\",(int)(4*((length_pulse)*n+1)));\n\n\n    //FILE *fp = fopen(strcat(getcwd(cwd,sizeof(cwd)),\"data.csv\"),\"W\");\n    printf(\"opening file to write to\\n\");\n    FILE *fp = fopen(\"Bloch_RKR.csv\",\"w\");\n    if (fp == NULL)\n    {\n        printf(\"Error opening file!\\n\");\n        exit(1);\n    }\n\n    //printf(\"fp %f\\n\",fp);\n    //fp ;\n    printf(\"writing data to file\\n\");\n    //for(int i=0;i&lt;(points);i++){\n        //printf(\"index %d\\n\",i);\n        //printf(\"%lf %lf %lf %lf\\n\", solver_out[4*i+1],solver_out[4*i +2],solver_out[4*i +3],solver_out[4*i +4]);\n        //fprintf(fp,\"%lf %lf %lf %lf \\n\", M_out[4*i+1],M_out[4*i +2],M_out[4*i+3],M_out[4*i +4]);\n    //  printf(\"%3.16e %3.16e %3.16e %3.16e\\n\", t[i],mx[i],my[i],mz[i]);\n    //  fprintf(fp,\"%3.16e %3.16e %3.16e %3.16e\\n\", t[i],mx[i],my[i],mz[i]);\n        //fprintf(fp,\"the word data\\n\");\n    //}\n\n\n    for(int i=0;i&lt;((length_pulse)*n +1);i++){\n        //printf(\"index %d\\n\",i);\n        //printf(\"%lf %lf %lf %lf\\n\", solver_out[4*i+1],solver_out[4*i +2],solver_out[4*i +3],solver_out[4*i +4]);\n        //fprintf(fp,\"%lf %lf %lf %lf \\n\", M_out[4*i+1],M_out[4*i +2],M_out[4*i+3],M_out[4*i +4]);\n        //printf(\"points = %d\\n\",points);\n        //printf(\"My[%d] = %e\\n\",points,M_out[4*i+2]);\n        printf(\"%3.16e %3.16e %3.16e %3.16e\\n\", M_out[4*i+0],M_out[4*i+1],M_out[4*i+2],M_out[4*i+3]);\n        fprintf(fp,\"%3.16e %3.16e %3.16e %3.16e\\n\", M_out[4*i+0],M_out[4*i+1],M_out[4*i+2],M_out[4*i+3]);\n            //t[points] = M_out[4*i+0];\n            //printf(\"Time points %3.16e\\n\",t[points]);\n            //mx[points] = M_out[4*i+1];    \n            //my[points] = M_out[4*i+1];\n        //  printf(\"My[%d] = %e\\n\",points,my[points]);\n            //mz[points] = M_out[4*i+3];\n            //printf(\"t = %e,My data: %e\\n\",t[points],my[points]);\n            //printf(\"Index number is: %d\\n\",i);\n            //modmy[points] = exp(-t[points]/T_2);\n            //modmz[points] = 1-exp(-t[points]/T_1);\n            //diff[points] = fmax(fabs(my[points]-modmy[points]),fabs(mz[points]-modmz[points]));\n            //max_diff = fmax(max_diff,diff[points]);\n            //points++;\n            //printf(\"Time is: %e My is: %e\\n\",t[points],my[points]);\n\n\n        //fprintf(fp,\"%3.16e %3.16e %3.16e %3.16e \\n\", M_out[4*i+1],M_out[4*i +2],M_out[4*i+3],M_out[4*i +4]);\n        //fprintf(fp,\"the word data\\n\");\n    }\n\n\n\n    fclose(fp);\n    printf(\"data written\\n\");\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gsl", "scientific-computing"], "answers": [{"tags": [], "owner": {"reputation": 970, "user_id": 1179272, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/55d8aa49a1a1efe643b321fb4b3cb862?s=128&d=identicon&r=PG&f=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/1179272/cameron"}, "is_accepted": false, "score": 0, "last_activity_date": 1536662291, "creation_date": 1536662291, "answer_id": 52274036, "question_id": 52273943, "link": "https://stackoverflow.com/questions/52273943/why-is-gsl-success-and-gsl-continue-missing-from-my-cygwin-gsl-installation/52274036#52274036", "title": "Why is GSL_SUCCESS and GSL_CONTINUE missing from my cygwin GSL installation?", "body": "<p>So I just needed to include:</p>\n\n<pre><code>&lt;gsl/gsl_errno.h&gt;\n</code></pre>\n\n<p>Then it worked with no problems!</p>\n"}], "owner": {"reputation": 970, "user_id": 1179272, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/55d8aa49a1a1efe643b321fb4b3cb862?s=128&d=identicon&r=PG&f=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/1179272/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536662291, "creation_date": 1536661940, "question_id": 52273943, "link": "https://stackoverflow.com/questions/52273943/why-is-gsl-success-and-gsl-continue-missing-from-my-cygwin-gsl-installation", "title": "Why is GSL_SUCCESS and GSL_CONTINUE missing from my cygwin GSL installation?", "body": "<p>I am creating a simple application involving a basic one dimensional minimisation using GSL. I try to run the following, after including <code>gsl_min.h</code></p>\n\n<pre><code>do\n    {\n      iter++;\n      status = gsl_min_fminimizer_iterate (s);\n\n      status = gsl_min_test_interval (a, b, 0.001, 0.0);\n\n      if (status == GSL_SUCCESS)\n        printf (\"Converged:\\n\");\n    }\n    while (status == GSL_CONTINUE &amp;&amp; iter &lt; max_iter);\n</code></pre>\n\n<p>However I get an error saying that both GSL_SUCCESS and GSL_CONTINUE are undeclared. Why could this be?</p>\n\n<p>My cygwin installed libraries are:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3JKxT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3JKxT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c", "security"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1536662148, "post_id": 52273855, "comment_id": 91495193, "body": "Where in the code is it crashing? Or do you not have access to the C code?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536663151, "post_id": 52273855, "comment_id": 91495746, "body": "(1) Compare <code>jeff-binary</code> with <code>jeff-binary-mode</code> byte-for-byte to see if there are any differences other than the intended change to the string. You may find the <code>od -xa</code> command useful to display a file using hex and ASCII characters\u2014you can display each file with <code>od -xa</code> and then compare the two outputs of <code>od</code>. (2) If you do not have permission to open etc/secret-password-dir/jeff/password, why would you expect an executable file you wrote to have such permission? The original executable might have that permission if it is marked setuid and is owned by Jeff. But your copy will not."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 2, "creation_date": 1536663469, "post_id": 52273855, "comment_id": 91495916, "body": "did you replace the original string with a string of the same length ? If not, you changed the size of the binary file, and more importantly, you invalidated all offsets after the change."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1536664577, "post_id": 52273855, "comment_id": 91496569, "body": "In general, &quot;patching&quot; executable binary files is extremely difficult, so difficult it might as well be impossible for most purposes.  But the exception is string constants, such as the pathname you&#39;re trying to alter.  It&#39;s perfectly straightforward to alter those, <i>if</i> you don&#39;t alter their length.  If the new string is the same length as, or shorter than, the old, you&#39;re fine.  If the new string is longer than the old, you can&#39;t do it, unless you&#39;re lucky and the data just beyond the string somehow isn&#39;t important.  (Also remember to preserve the null termination.)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1536664687, "post_id": 52273855, "comment_id": 91496638, "body": "Following up on the comment by @EricPostpischil, another extremely useful tool (on Unix-like systems) is <code>cmp -l</code>.  You can use if to both verify that you changed the string you expected to, and that the offset/position of everything following that string didn&#39;t change."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1536664905, "post_id": 52273855, "comment_id": 91496777, "body": "Modify your Python script so that it only reads and writes the file without replacing anything and then see if the new binary works or not. If it doesn&#39;t work, then the problem is most likely within the Python script."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1536665648, "post_id": 52273855, "comment_id": 91497234, "body": "Why the detour into a &quot;hex string&quot;?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1536670522, "post_id": 52273855, "comment_id": 91500479, "body": "@steve: patching a literal string like that can have unintended consequences if the compiler has optimized storage by overlaying string literals, which it can do if one literal is a suffix of the other one."}], "answers": [{"tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": false, "score": 0, "last_activity_date": 1536672630, "last_edit_date": 1536672630, "creation_date": 1536669445, "answer_id": 52276130, "question_id": 52273855, "link": "https://stackoverflow.com/questions/52273855/plausibility-of-directly-modifying-a-binary-executable-without-corrupting-it/52276130#52276130", "title": "Plausibility of directly modifying a binary executable without corrupting it", "body": "<p>I tried to reproduce what OP intends to achieve (as far as I understood it).</p>\n\n<ol>\n<li>I wrote a little password \"safed\" application in C.</li>\n</ol>\n\n<p><code>testSecret.c</code>:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n  const char *password = \"MySecretPassword\";\n  if (argc != 2) {\n    fprintf(stderr, \"ERROR! Wrong number of command line arguments.\\n\");\n    return -1;\n  }\n  if (strcmp(argv[1], password) == 0) {\n    printf(\"Hello, proper receiver of secret message.\\n\");\n  } else {\n    fprintf(stderr, \"Nice try but FAILED!\\n\");\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Compiled and tested in <a href=\"http://www.cygwin.org\" rel=\"nofollow noreferrer\">cygwin64</a> on Windows 10:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gcc -std=c11 -o testSecret testSecret.c\n\n$ ./testSecret \nERROR! Wrong number of command line arguments.\n\n$ ./testSecret wrong\nNice try but FAILED!\n\n$ ./testSecret MySecretPassword\nHello, proper receiver of secret message.\n\n$\n</code></pre>\n\n<ol start=\"2\">\n<li>I loaded the binary into the <a href=\"https://notepad-plus-plus.org/\" rel=\"nofollow noreferrer\">Notepad++</a> with Hex-Editor plug-in. I look for the initialization text of <code>password</code>.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/YYZjA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YYZjA.png\" alt=\"snapshot of Notepad++ with found string constant\"></a></p>\n\n<ol start=\"3\">\n<li>The first byte of constant string is overwritten with 0. (It's important that no byte is inserted nor erased. Otherwise, all addresses of following will become wrong and binary will be surely broken.) The \"patched\" file is saved as <code>testSecretCracked.exe</code>.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/6WkmD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6WkmD.png\" alt=\"snapshot of Notepad++ after patching and saving the binary\"></a></p>\n\n<ol start=\"4\">\n<li>Test the cracked binary:</li>\n</ol>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ ./testSecretCracked.exe \nERROR! Wrong number of command line arguments.\n\n$ ./testSecretCracked.exe \"\"\nHello, proper receiver of secret message.\n\n$\n</code></pre>\n\n<p>The new password after cracking is now <code>\"\"</code>. So, the secret reduces to the experience to pass an argument with empty string on <code>bash</code>.</p>\n\n<hr>\n\n<p>Of course, this is a demo for entertainment / educational purpose only. There are many reasons while this may fail (e.g. the one mentioned in comments). Commercial applications might contain encrypted data (which are decrypted at runtime). A simple check might be to hash internal data and compare it with a hash code which would de-mask most of modifications. (Btw. <em>our</em> commercial applications are shipped with a H/W license check which combines the above safety techniques with others.)</p>\n\n<hr>\n\n<p>Just for fun, I automated the simple \"cracking\" as describe above:</p>\n\n<p><code>testAutoCrack.c</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv)\n{\n  if (argc != 4) {\n    fprintf(stderr, \"ERROR! Wrong number of command line arguments.\\n\");\n    return -1;\n  }\n  const char *inFile = argv[1];\n  const char *outFile = argv[2];\n  const char *password = argv[3];\n  /* read binary */\n  size_t size = 0x1000;\n  char *buffer = malloc(size);\n  if (!buffer) {\n    fprintf(stderr, \"ERROR! Out of memory.\\n\");\n    return -1;\n  }\n  FILE *fIn = fopen(inFile, \"rb\");\n  if (!fIn) {\n    fprintf(stderr, \"ERROR! Failed to open '%s'.\\n\", inFile);\n    return -1;\n  }\n  size_t lenTotal = 0;\n  for (;;) {\n    size_t lenRead = size - lenTotal;\n    size_t len = fread(buffer + lenTotal, 1, lenRead, fIn);\n    lenTotal += len;\n    if (len &lt; lenRead) break; // EOF\n    char *bufferNew = realloc(buffer, 2 * size);\n    if (!bufferNew) {\n      fprintf(stderr, \"ERROR! Out of memory.\\n\");\n      return -1;\n    }\n    buffer = bufferNew;\n    size *= 2;\n  }\n  fclose(fIn);\n  /* find password in binary */\n  size_t lenPassword = strlen(password) + 1;\n  if (lenTotal &lt; lenPassword) {\n    fprintf(stderr, \"ERROR! Password longer than binary.\\n\");\n    return -1;\n  }\n  size_t i = lenTotal - lenPassword;\n  while (i-- &amp;&amp; strncmp(buffer + i, password, lenPassword) != 0);\n  if (i &gt;= lenTotal) {\n    fprintf(stderr, \"Password '%s' not found!\\n\", password);\n    return -1;\n  }\n  /* patch password */\n  buffer[i] = '\\0';\n  /* write binary */\n  FILE *fOut = fopen(outFile, \"wb\");\n  if (!fOut) {\n    fprintf(stderr, \"ERROR! Failed to open '%s'.\\n\", outFile);\n    return -1;\n  }\n  if (fwrite(buffer, 1, lenTotal, fOut) &lt; lenTotal\n    || fclose(fOut)) {\n    fprintf(stderr, \"ERROR! Failed to write '%s'.\\n\", outFile);\n    return -1;\n  }\n  /* done */\n  printf(\"'%s' successfully cracked.\\n\", inFile);\n  return 0;\n}\n</code></pre>\n\n<p>Compiled and tested:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ gcc -std=c11 -o testAutoCrack testAutoCrack.c \n\n$ ./testAutoCrack testSecret.exe testSecretAutoCracked.exe MySecretPassword\n'testSecret.exe' successfully cracked.\n\n$ chmod a+x testSecretAutoCracked.exe\n\n$ ./testSecretAutoCracked.exe \"\"\nHello, proper receiver of secret message.\n\n$\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6133691, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9d12022bcc552642e8dc3a545df1c42e?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rengold", "link": "https://stackoverflow.com/users/6133691/r-rengold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1536672630, "creation_date": 1536661679, "question_id": 52273855, "link": "https://stackoverflow.com/questions/52273855/plausibility-of-directly-modifying-a-binary-executable-without-corrupting-it", "title": "Plausibility of directly modifying a binary executable without corrupting it", "body": "<p>Firstly, just in case anybody is wondering, this question is for <em>educational</em> purposes only.</p>\n\n<p>Say that I've been given a binary executable file (complied from C code). This binary executable takes a single argument, a password, and it writes out a secret message if the password is correct. In practice <code>$./jeff-binary jeffspassword</code> would yield <code>Secret: Jeff's Secret Message</code></p>\n\n<p>I wish to know that secret while circumnavigating the necessity to know the password (<code>jeffspassword</code>). I know that in the C code which created these binaries, the path which contains the password is hard-coded in. There will be a part in the code which reads: <code>fp = fopen(\"/etc/secret-password-dir/jeff/password\", \"r\");</code> Obviously, since I'm not Jeff, I do not have permission to either read or write to <code>jeff</code>.</p>\n\n<p>Since I have access to this binary, what I've done currently is read in the binary file as a single, long hex string, then searched it for the hex string matching (as per the example) <code>/etc/secret-password-dir/jeff/password</code> and replacing it with <code>/home/fred/Documents/blank_password</code>, then created a new binary which has this single change. The intention is that the file pointer will end up assuming the password is whatever I put into <code>blank_password</code> (which I know), and therefore I can run this modified binary with a non-password so it prints out Jeff's secret.</p>\n\n<p>Specifically, the process which I currently have running is this:</p>\n\n<ol>\n<li><p>I have a C program which reads in the contents of <code>jeff-binary</code> and writes it as hex string to <code>hex_of_jeff_binary.txt</code>.</p></li>\n<li><p>I then have a Python script which reads <code>hex_of_jeff_binary.txt</code> does some string comprehension by replacing the hex representation of <code>/etc/secret-password-dir/jeff/password</code> with <code>/home/fred/Documents/blank_password</code>, then writes this modified binary as <code>jeff-binary-mod</code>.</p></li>\n<li><p><code>chmod +x jeff-binary-mod</code> to make it executable.</p></li>\n<li><p>The result is: <code>Segmentation fault (core dumped)</code>. Eh.</p></li>\n</ol>\n\n<p>My questions are: is what I'm attempting to do possible? If so, where am I going wrong?</p>\n"}, {"tags": ["c", "volatile"], "comments": [{"owner": {"reputation": 743, "user_id": 1085203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dXQg1.png?s=128&g=1", "display_name": "ivand58", "link": "https://stackoverflow.com/users/1085203/ivand58"}, "edited": false, "score": 0, "creation_date": 1536660464, "post_id": 52273459, "comment_id": 91494221, "body": "You are writing 10 in address 0x1234 and then you calculate content at this address times content of the address (it&#39;s not necessary to  get  10*10). <code>volatile</code> means &#39;no optimization&#39; i.e. that the value should be read every time and keeping it in temporary place like register is not allowed"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 7, "creation_date": 1536660548, "post_id": 52273459, "comment_id": 91494278, "body": "This is some b0rken program from the DOS era or something. If you&#39;re a beginner, the best thing you can do with this program is to delete it and forget it existed."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1536661562, "post_id": 52273459, "comment_id": 91494874, "body": "You should tell us what the program is supposed to do. Where exactly did you find this code? On which platform is it supposed to run? Reading from address <code>0x1234</code> looks totally bogous to me."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1536662308, "post_id": 52273459, "comment_id": 91495279, "body": "&quot;Not working properly&quot; is a different issue than the use of <code>volatile</code> - what do you expect it to do, and how does it not work.  It appears that this is likely hypothetical example code for an embedded system rather than real code expected to run on a real target.  It is squaring the value at address 0x1234, which is unlikely to represent a real address, and in practice would probably represent some external input hardware on a GPIO port for example.  If run on a modern desktop OS, I would expect it to seg-fault on access to an invalid address."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1536662492, "post_id": 52273459, "comment_id": 91495375, "body": "Although external I/O should be accessed as volatile, if the purpose is to <i>square</i> the input value, you do not want to make two separate reads in any case, as the value may change between assignment of <code>a</code> and <code>b</code>.  Rather you want to return <code>a * a</code> and remove <code>b</code> altogether.  In that sense this code is broken."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1536662538, "post_id": 52273459, "comment_id": 91495401, "body": "On volatile: <a href=\"https://www.embedded.com/electronics-blogs/beginner-s-corner/4023801/Introduction-to-the-Volatile-Keyword\" rel=\"nofollow noreferrer\">embedded.com/electronics-blogs/beginner-s-corner/4023801/&hellip;</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1536662865, "post_id": 52273459, "comment_id": 91495589, "body": "As a beginner, be wary of code you just &quot;came across&quot;; not all code is good code, and you need to know what the author was trying to achieve or demonstrate to understand its purpose.  By any measure this is particularly bizarre code - choose your sources carefully."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10118751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc76a9e1b85bc1a33983c5ddfd582f48?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/10118751/curious"}, "edited": false, "score": 0, "creation_date": 1536661166, "post_id": 52273522, "comment_id": 91494648, "body": "thank you for your answer. How could we modify it to run properly?"}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 9, "user_id": 10118751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc76a9e1b85bc1a33983c5ddfd582f48?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/10118751/curious"}, "edited": false, "score": 0, "creation_date": 1536661308, "post_id": 52273522, "comment_id": 91494744, "body": "writing to adresses directly is not permitted on all major operating systems, so if you use one of those you cant make it run properly like this."}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 9, "user_id": 10118751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc76a9e1b85bc1a33983c5ddfd582f48?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/10118751/curious"}, "edited": false, "score": 0, "creation_date": 1536661332, "post_id": 52273522, "comment_id": 91494760, "body": "What you can do is create a global variable and replace 0x1234 with its address, but that really is another question. Better that you learn about variables and their addresses first"}], "tags": [], "owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "is_accepted": true, "score": 2, "last_activity_date": 1536661096, "last_edit_date": 1536661096, "creation_date": 1536660520, "answer_id": 52273522, "question_id": 52273459, "link": "https://stackoverflow.com/questions/52273459/proper-use-of-volatile-keyword-in-c/52273522#52273522", "title": "Proper use of volatile keyword in C", "body": "<p>When you read the same register twice the compiler can decide to optimize the behaviour.</p>\n\n<p>It could turn the code into something like this:</p>\n\n<pre><code>unsigned  int a = * (unsigned int *) 0x1234;\nunsigned  int b = a;\n</code></pre>\n\n<p>When you add volatile the compiler will make no assumption on the second read that the value will be the same and it will generate the extra instructions for dereferencing the pointer to register again.</p>\n\n<p>It might be too advanced for you right now but you can check this with the assembly output option on your compiler, the volatile version will have more assembly instructions.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1536660560, "creation_date": 1536660560, "answer_id": 52273533, "question_id": 52273459, "link": "https://stackoverflow.com/questions/52273459/proper-use-of-volatile-keyword-in-c/52273533#52273533", "title": "Proper use of volatile keyword in C", "body": "<p>It forces the compiler to read the referenced value every time it is used. Compiler knows that this object can be changed by something not seen by the compiler in the normal program execution path. </p>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 2, "last_activity_date": 1536664841, "creation_date": 1536664841, "answer_id": 52274731, "question_id": 52273459, "link": "https://stackoverflow.com/questions/52273459/proper-use-of-volatile-keyword-in-c/52274731#52274731", "title": "Proper use of volatile keyword in C", "body": "<p>The code you show is a bad example of what <code>volatile</code> does, and a bad example for C code in general.</p>\n\n<p>First, then the code does this:</p>\n\n<pre><code>mPtr = (int*) 0x1234;\n*mPtr = 10;\n</code></pre>\n\n<p>it takes a seemingly arbitrary address, <code>0x1234</code>, and puts an <code>int</code> value there. In general, you cannot know you are allowed to write to this address. It might not be mapped in your virtual address space, and, if it is, there might be something important there, and writing over it will break a program. So this program is doing something bad and unsupported, and we should not expect it will work. (In special environments, it is possible the layout of the memory address space is specified and can be used in ways like this. Such situations should always be clearly documented, and the code is limited to the specific systems it was designed for; it is not suitable for use as general-purpose C code.)</p>\n\n<p>Second, the code does nothing special that shows any difference between objects with and without <code>volatile</code>. Aside from the mistake that it writes to <code>0x1234</code> using <code>int</code> and reads from it using <code>unsigned int</code>, normal execution of this code is going to produce an unsurprising result, 100, if the program does not crash due to using <code>0x1234</code>. A better example would be a program like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a = 1234;\n    volatile int b = 5678;\n    printf(\"Press enter to proceed.\\n\");\n    getchar();\n    printf(\"a = %d.\\n\", a);\n    printf(\"b = %d.\\n\", b);\n}\n</code></pre>\n\n<p>Students would then be instructed to compile this program with optimization and debugging enabled, run it in a debugger, interrupt it (in the debugger) while the program is waiting for input, use the debugger to change the values of <code>a</code> and <code>b</code>, and then continue running the program. The result would be that the program displays <code>a</code> with its original value, 1234, but displays <code>b</code> with its changed value. (In fact, due to optimization, <code>a</code> might not exist in a way that can be changed by the debugger.)</p>\n\n<p>This would demonstrate that a compiler assumes it has full control over non-volatile objects such as <code>a</code>, so it may optimize code in ways that assume they do not change unexpectedly, but the compiler does not make such assumptions with <code>volatile</code> objects. With a <code>volatile</code> object, the compiler reloads it from memory each time it is used in source code (and it writes it to memory each time it is modified in source code).</p>\n\n<p>The meaning of <code>volatile</code> is that an object may change in ways not normally known to the compiler. Therefore, demonstrating how volatile works requires modifying the program from outside the program. Although the debugger is one way to accomplish this, an intended use of <code>volatile</code> is to access locations in the address space that are connected to I/O devices instead of normal memory. These locations may change when some input/output operation occurs. The <code>volatile</code> keyword tells the compiler not to treat objects as normal memory, to expect that they may change unexpectedly from external actions.</p>\n"}], "owner": {"reputation": 9, "user_id": 10118751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc76a9e1b85bc1a33983c5ddfd582f48?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/10118751/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 52273522, "answer_count": 3, "score": -1, "last_activity_date": 1536664841, "creation_date": 1536660266, "last_edit_date": 1536663004, "question_id": 52273459, "link": "https://stackoverflow.com/questions/52273459/proper-use-of-volatile-keyword-in-c", "title": "Proper use of volatile keyword in C", "body": "<p>I am a beginner with C and i came across to the following code:</p>\n\n<pre><code>#include \"stdio.h\"\n\nunsigned int ReturnSquare(void);\n\nint main(void) {\n\nint k;\nint *mPtr;\n\nmPtr = (int*) 0x1234;\n\n*mPtr = 10;\n\n k = (int) ReturnSquare();\n\n printf(\"%p --&gt; %d\\n\",mPtr,k);\n\n}\n\nunsigned int ReturnSquare(void)\n{\n  unsigned  volatile int a = * (unsigned volatile int *) 0x1234;\n  unsigned  volatile int b = * (unsigned volatile int *) 0x1234;\n  return a * b;\n}\n</code></pre>\n\n<p>Could you please help me understand what is the use of volatile in this code?</p>\n\n<p>It seems that the program does not work correctly. Any suggestion and explanation is very welcome. Thank you in advance.</p>\n"}, {"tags": ["c", "parsing", "split", "string-formatting"], "answers": [{"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1536672772, "post_id": 52273505, "comment_id": 91502083, "body": "Yes, chances are that the OP are actually trying to <i>return</i> an array of <code>float</code>, loosing also any information about the actual number of elements read, by the way."}, {"owner": {"reputation": 11, "user_id": 9092890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ca6c50d1ba22faafeeaa7f5d7cd92?s=128&d=identicon&r=PG&f=1", "display_name": "Prof. Banana", "link": "https://stackoverflow.com/users/9092890/prof-banana"}, "edited": false, "score": 0, "creation_date": 1536766194, "post_id": 52273505, "comment_id": 91545237, "body": "I have fixed the problems, and now the strtok part work, only thing that remain is do the strtod part.. but it won&#39;t work"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1536661671, "last_edit_date": 1536661671, "creation_date": 1536660439, "answer_id": 52273505, "question_id": 52273096, "link": "https://stackoverflow.com/questions/52273096/computing-scalar-product-and-string-manipulation-in-c/52273505#52273505", "title": "Computing scalar product and string manipulation in C", "body": "<p>A lot of problem in your code: </p>\n\n<ul>\n<li>some variables are miss-spelled: <code>vfinal</code> // <code>vfinale</code> </li>\n<li>some semicolons are missing: <code>char *todPtr</code></li>\n<li>some parentheses is missing: <code>vet1f[100]=manipulate_stringvet1[100]);</code></li>\n</ul>\n\n<p>But, even if these little problems are corrected, you need to understand array manipulation:</p>\n\n<ul>\n<li><code>double vfinal[100];</code> declares an array of 100 <code>double</code></li>\n<li><code>vfinale[100] = d;</code> set the value of the <strong>101th</strong> element of the array to <code>d</code>: you try to write outside the array.</li>\n</ul>\n\n<p>You have the same problem (4 times) in these lines:</p>\n\n<pre><code>vet1f[100]=manipulate_string(vet1[100]);\nvet2f[100]=manipulate_string(vet2[100]);\n</code></pre>\n\n<p>And you have another problem: the function <code>manipulate_string</code> does not what you want: you make it to return only one <code>unsigned char</code> while what you want would be to modify the <code>vet1f</code> (or <code>vet2f</code>) array (which should have been passed as a parameter)</p>\n\n<hr>\n\n<p>If we take this piece of code :</p>\n\n<pre><code> token = strtok(vet, s);\n\n while( token != NULL ) {\n     token = strtok(NULL, s);\n     double d = strtod(vet, &amp;stringPtr);\n     vfinale[100]=d\n\n     return d;\n }\n</code></pre>\n\n<p>We can see two problems:</p>\n\n<ul>\n<li><p>First the <code>return d;</code> is inside the loop, making to exit before last token has been read</p></li>\n<li><p>In the loop block (between the <code>{}</code>) you read a new token befor using the previous, thus:</p>\n\n<ul>\n<li>The fist token is lost</li>\n<li>When <code>token</code> will be <code>NULL</code>, it will be passed to <code>strtod</code> and it's not what you want.</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>Most compiler can have their warning enabled, try with <code>-Wall</code> (GCC, clang, icc...) or /W4 (visual studio)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9092890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ca6c50d1ba22faafeeaa7f5d7cd92?s=128&d=identicon&r=PG&f=1", "display_name": "Prof. Banana", "link": "https://stackoverflow.com/users/9092890/prof-banana"}, "is_accepted": false, "score": 0, "last_activity_date": 1536766363, "last_edit_date": 1536766363, "creation_date": 1536684300, "answer_id": 52280628, "question_id": 52273096, "link": "https://stackoverflow.com/questions/52273096/computing-scalar-product-and-string-manipulation-in-c/52280628#52280628", "title": "Computing scalar product and string manipulation in C", "body": "<p>Even if i fixed the problems, there is just a thing that i can't understand: Why the strtod is not converting my string.. Here is the code fixed</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n//TODO TAKE ARGOMENTS\n//TODO EXTRACT THE NUMBERS\n//TODO CONVERT THEM TO DOUBLE\n//TODO DO THE SCALAR PRODUCT\n\n\n//prototipi\n\nunsigned manipulate_string(char vet1[], char vet2[]);\n//funzioni\n\nunsigned manipulate_string(char vet1[], char vet2[]){\n  const char s[4] = \" ,{}\";\n  double vfinale1[100];\n  double vfinale2[100];\n  char *token1;\n  char *token2;\n  char *stringPtr1;\n  char *stringPtr2;\n  int c1=0, c2=0;\n\n//get the first token\n\ntoken1 = strtok(vet1, s);\n\n//walk through other tokens\nwhile( token1 != NULL ) {\n   printf( \" %s\\n\", token1);\n\n   token1 = strtok(NULL, s);\n\n}\n\n\ntoken2 = strtok(vet2, s);\n\nwhile( token2 != NULL ) {\n   printf( \"%s\\n\", token2);\n\n   token2 = strtok(NULL, s);\n}\n\n double d = strtod(vet1, &amp;stringPtr1);\n vfinale1[c1]=d;\n\n double u = strtod(vet2, &amp;stringPtr2);\n vfinale1[c2]=u;\n\n return *vfinale2;\n return *vfinale1;\n}\n\n\nint main(int argc, char const *argv[]){\n   char vet1[100];\n   char vet2[100];\n   double vfinale2[100];\n   double vfinale1[100];\n\n   printf(\"insert first vector\\n\");\n   scanf(\"%[^\\n\\r]\", vet1);\n   printf(\"insert second vector\\n\");\n   scanf(\" %[^\\n\\r]\", vet2);\n\n   manipulate_string(vet1, vet2);\n\n\n   printf(\"the first one is %.2f\\n\", *vfinale1);\n\n   printf(\"the second one is %.2f\\n\", *vfinale2);\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>insert first vector\n1,2,3,4\ninsert second vector\n5,6,7,8\n 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n the first one is 0.00\n the second one is 0.00\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9092890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4ca6c50d1ba22faafeeaa7f5d7cd92?s=128&d=identicon&r=PG&f=1", "display_name": "Prof. Banana", "link": "https://stackoverflow.com/users/9092890/prof-banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1536766363, "creation_date": 1536659039, "last_edit_date": 1536659666, "question_id": 52273096, "link": "https://stackoverflow.com/questions/52273096/computing-scalar-product-and-string-manipulation-in-c", "title": "Computing scalar product and string manipulation in C", "body": "<p>For my homework I need to do a program that:</p>\n\n<ol>\n<li><p>Get 2 strings (in <code>char</code> format, max 100 characters) from <code>scanf</code>, (like:{1,2,3, 4} and {0,1, 2,0})</p></li>\n<li><p>Take the numbers between spaces (I'm using <code>strtok</code> right now)</p></li>\n<li><p>Convert them to <code>double</code> (I'm using <code>strtod</code> for that)</p></li>\n<li><p>Do the scalar product</p></li>\n</ol>\n\n<p>Before copy my actual code, I want to ask you guys, if you know how to learn this type of manipulation easily; my exam is going to be like that, take string do thing, parse them convert them, but I'm having a lot of difficulty to learn how. And the man, and my book are to simplified, and I can't understand. </p>\n\n<p>Thanks to all, I hope you can help me before I definitely mad about that.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #include &lt;string.h&gt;\n\n  //TODO TAKE ARGOMENTS\n  //TODO EXTRACT THE NUMBERS\n  //TODO CONVERT THEM TO DOUBLE\n  //TODO DO THE SCALAR PRODUCT\n\n  //prototypes:\n\n  unsigned manipulate_string(char vet[100]);\n\n  //functions:\n\n  unsigned manipulate_string(char vet[100]){\n      const char s[4] = \" ,{}\";\n      double vfinal[100];\n      char *token;\n      char *stringPtr;\n      char *todPtr\n\n      //get the first token\n\n     token = strtok(vet, s);\n\n     //walk through other tokens\n     while( token != NULL ) {\n         printf( \" %s\\n\", token );\n\n         token = strtok(NULL, s);\n\n         double d = strtod(vet, &amp;stringPtr);\n         vfinale[100]=d\n\n         return d;\n     }\n}\n\n int main () {\n     char vet1[100];\n     char vet2[100];\n     double vet1f[100];\n     double vet2f[100];\n     const char s[4] = \" ,{}\";\n     char *token;\n     printf(\"inseert first vector\\n\");\n     scanf(\"%[^\\n\\r]\", vet1);\n     printf(\"insert second vector\\n\");\n     scanf(\"%[^\\n\\r]\", vet2);\n\n     vet1f[100]=manipulate_stringvet1[100]);\n     vet2f[100]=manipulate_string(vet2[100]);\n\n     printf(\"the first one is\\n\",vet1f);\n     printf(\"the second one is\\n\",vet2f);\n\n\n}\n</code></pre>\n\n<p>Now the code is only about see the string manipulated, after, don't think I would have problem to do a function that do the scalar product.</p>\n\n<p>Thanks another time, for help and time wasted on it.</p>\n"}, {"tags": ["c", "x86"], "answers": [{"comments": [{"owner": {"reputation": 2923, "user_id": 1479092, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/be51588b1a81bba9dbc04d21fa980916?s=128&d=identicon&r=PG&f=1", "display_name": "Twifty", "link": "https://stackoverflow.com/users/1479092/twifty"}, "edited": false, "score": 0, "creation_date": 1536655884, "post_id": 52271950, "comment_id": 91491409, "body": "Thanks, I switched the compiler to MSVC and it produced the original content. I had my head wrapped up in all the <code>std::isunordered</code> <code>std::isnan</code> functions..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 2923, "user_id": 1479092, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/be51588b1a81bba9dbc04d21fa980916?s=128&d=identicon&r=PG&f=1", "display_name": "Twifty", "link": "https://stackoverflow.com/users/1479092/twifty"}, "edited": false, "score": 0, "creation_date": 1536701094, "post_id": 52271950, "comment_id": 91517036, "body": "@Twifty: interesting.  <a href=\"https://godbolt.org/z/1KQUDt\" rel=\"nofollow noreferrer\">godbolt.org/z/1KQUDt</a>.  (I used a conditional store to force compilers to branch instead of branchless).  MSVC does indeed use lahf/test in 32-bit code, but when making 64-bit code, it does the same thing as gcc (<code>ucomisd</code> / <code>jp</code> / <code>jne</code>).  One or the other is a missed-optimization.  (Also, gcc should probably <code>jp</code> / <code>sete</code> for Antti&#39;s function; branching on unordered should predict well, and simplify the branchless handling of the ordered cases.)"}, {"owner": {"reputation": 2923, "user_id": 1479092, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/be51588b1a81bba9dbc04d21fa980916?s=128&d=identicon&r=PG&f=1", "display_name": "Twifty", "link": "https://stackoverflow.com/users/1479092/twifty"}, "edited": false, "score": 0, "creation_date": 1536704547, "post_id": 52271950, "comment_id": 91518179, "body": "Before working on this project, I would never question the compiler. But now, after wading through the generated instructions, I&#39;m left thinking &quot;what?&quot;. So many over complicated steps of doing a simple task."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1536740730, "post_id": 52271950, "comment_id": 91529147, "body": "I think that <code>lahf</code> + <code>test</code> is rather clever... It is the microprocessor architecture itself that makes this complicated :D why not have flags as a general register that you could and/or against as you wish"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 4, "last_activity_date": 1536657610, "last_edit_date": 1536657610, "creation_date": 1536655143, "answer_id": 52271950, "question_id": 52271834, "link": "https://stackoverflow.com/questions/52271834/c-equivalent-of-ucomisd/52271950#52271950", "title": "c equivalent of ucomisd", "body": "<p>The <a href=\"https://www.felixcloutier.com/x86/UCOMISD.html\" rel=\"nofollow noreferrer\">pseudo for ucomisd</a> seems to be</p>\n\n<pre><code>RESULT\u2190 UnorderedCompare(DEST[63:0] &lt;&gt; SRC[63:0]) {\n(* Set EFLAGS *) CASE (RESULT) OF\n    UNORDERED: ZF,PF,CF\u2190111;\n    GREATER_THAN: ZF,PF,CF\u2190000;\n    LESS_THAN: ZF,PF,CF\u2190001;\n    EQUAL: ZF,PF,CF\u2190100;\nESAC;\nOF, AF, SF\u21900; }\n</code></pre>\n\n<p>I.e. <code>ZF xor PF</code> would be true if the 2 double-precision operands are equal. If I read correctly this would be</p>\n\n<pre><code>double a, b;\n\nif (a == b) {\n    ...\n}\n</code></pre>\n\n<p>There is no <strong>jump if zero and parity flag unset</strong> opcode, which is why the <code>lahf</code> + <code>test</code> or some alternative means are required.</p>\n\n<p>Testing this function:</p>\n\n<pre><code>int x(double a, double b) {\n    return a == b;\n}\n</code></pre>\n\n<p>with GCC produces</p>\n\n<pre><code>xorl    %eax, %eax\nmovl    $0, %edx\nucomisd %xmm1, %xmm0\n\n# set al to 1 if no parity flag\nsetnp   %al\n\n# if zero flag not set, zero the return value\ncmovne  %edx, %eax\n\nret\n</code></pre>\n\n<p>i.e. return 1 if no parity flag and equal.</p>\n"}], "owner": {"reputation": 2923, "user_id": 1479092, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/be51588b1a81bba9dbc04d21fa980916?s=128&d=identicon&r=PG&f=1", "display_name": "Twifty", "link": "https://stackoverflow.com/users/1479092/twifty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 52271950, "answer_count": 1, "score": 2, "last_activity_date": 1536657610, "creation_date": 1536654715, "question_id": 52271834, "link": "https://stackoverflow.com/questions/52271834/c-equivalent-of-ucomisd", "title": "c equivalent of ucomisd", "body": "<p>While porting a windows binary to linux, I have come across the following set of instructions:</p>\n\n<pre><code>ucomisd xmm5,xmm0\nlahf \ntest ah,0x44\njp 0x42D511\n</code></pre>\n\n<p>From what I can tell it is comparing the two values in <code>ucomisd</code>, then testing for the presence of either the <code>ZF</code> or <code>PF</code> flags, but not both.</p>\n\n<p>What would the <code>c</code> equivalent be? Every search I do on the topic results in comparing float/double with an epsilon, which this clearly isn't doing.</p>\n\n<p>If it helps, the second operand is always a const value taken from the .rdata section.</p>\n"}]